#!/bin/bash
set -e

echo "═══════════════════════════════════════════════════════════════"
echo "  DSMIL Complete Platform v8.3.2 - Post-Installation"
echo "═══════════════════════════════════════════════════════════════"

# Check all components are installed
echo "Verifying installation..."

COMPONENTS=(
    "dsmil-platform"
    "dell-milspec-tools"
    "tpm2-accel-examples"
)

ALL_OK=true
for component in "${COMPONENTS[@]}"; do
    if dpkg -l | grep -q "$component"; then
        echo "  ✓ $component installed"
    else
        echo "  ✗ $component missing"
        ALL_OK=false
    fi
done

if $ALL_OK; then
    echo ""
    echo "═══════════════════════════════════════════════════════════════"
    echo "  All Components Installed Successfully!"
    echo "═══════════════════════════════════════════════════════════════"
    echo ""
    echo "Quick Start:"
    echo "  1. Start service: sudo systemctl start dsmil-server"
    echo "  2. Access UI: http://localhost:9876"
    echo ""
    echo "Check status: sudo systemctl status dsmil-server"
    echo "View logs: sudo journalctl -u dsmil-server -f"
    echo ""
else
    echo ""
    echo "⚠ Warning: Some components missing"
    echo "Some features may not work correctly"
fi

exit 0
