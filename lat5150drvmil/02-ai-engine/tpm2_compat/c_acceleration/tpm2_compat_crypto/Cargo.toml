[package]
name = "tpm2_compat_crypto"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
description = "Hardware-accelerated cryptography for TPM2 compatibility layer"

[dependencies]
tpm2_compat_common = { path = "../tpm2_compat_common", features = ["std", "serde-support"] }
ring.workspace = true
aes.workspace = true
sha2.workspace = true
rand.workspace = true
zeroize.workspace = true
log.workspace = true
thiserror.workspace = true
cfg-if.workspace = true

# Async support
tokio = { workspace = true, features = ["rt", "sync", "time"] }
futures = "0.3"

# High-performance crypto
chacha20poly1305 = "0.10"
x25519-dalek = "2.0"
ed25519-dalek = "2.1"
curve25519-dalek = "4.1"

# Post-quantum cryptography
pqcrypto-kyber = { version = "0.8", optional = true }
pqcrypto-dilithium = { version = "0.5", optional = true }

# Hardware acceleration (commented out - not available in crates.io)
# intel-accel = { version = "0.3", optional = true }

# SIMD optimizations
wide = { version = "0.7", optional = true }
rayon = "1.10"

[features]
default = ["post-quantum", "simd"]
# hardware-accel = ["intel-accel"]  # Disabled - dependency not available
post-quantum = ["pqcrypto-kyber", "pqcrypto-dilithium"]
simd = ["wide"]
testing = []

[build-dependencies]
cc = "1.1"