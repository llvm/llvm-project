#!/bin/sh
set -e

case "$1" in
    configure)
        echo "========================================================================"
        echo "  Dell MIL-SPEC Platform Installation Complete"
        echo "========================================================================"
        echo ""
        echo "The following components have been installed:"
        echo "  - dell-milspec-dsmil-dkms: DSMIL kernel driver (84 devices)"
        echo "  - tpm2-accel-early-dkms: TPM2 acceleration kernel driver"
        echo ""
        if dpkg -l dell-milspec-tools 2>/dev/null | grep -q '^ii'; then
            echo "  - dell-milspec-tools: Management and monitoring utilities"
        fi
        if dpkg -l dell-milspec-docs 2>/dev/null | grep -q '^ii'; then
            echo "  - dell-milspec-docs: Complete documentation suite"
        fi
        if dpkg -l tpm2-accel-examples 2>/dev/null | grep -q '^ii'; then
            echo "  - tpm2-accel-examples: Working code examples"
        fi
        echo ""
        echo "Next steps:"
        echo "  1. Verify DSMIL driver: dsmil-status"
        echo "  2. Check TPM2 acceleration: tpm2-accel-status"
        echo "  3. View documentation: man dell-milspec"
        echo "  4. Read guides: /usr/share/doc/dell-milspec/"
        echo ""
        echo "For detailed information:"
        echo "  - Runbooks: /usr/share/doc/dell-milspec/runbooks/"
        echo "  - Man pages: man dsmil-status, man tpm2-accel-status"
        echo "  - Online: https://github.com/dell/milspec-platform"
        echo ""
        echo "========================================================================"
        ;;
    abort-upgrade|abort-remove|abort-deconfigure)
        ;;
    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

#DEBHELPER#

exit 0
