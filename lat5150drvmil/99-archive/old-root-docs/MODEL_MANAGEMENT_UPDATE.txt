â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MODEL MANAGEMENT UI - UPDATE NOTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ADD THIS SECTION TO SETTINGS PANEL (after guardrails section):

        <div class="settings-section">
            <div class="settings-section-title">MODEL MANAGEMENT</div>

            <div style="margin-bottom: 15px;">
                <strong>Installed Models:</strong>
                <div id="modelList" style="margin-top: 10px; max-height: 200px; overflow-y: auto; font-size: 12px;">
                    Loading...
                </div>
            </div>

            <div style="margin-bottom: 15px;">
                <strong>Download Model:</strong><br>
                <select id="modelSelect" style="width: 100%; background: #002200; color: #0f0; border: 1px solid #0f0; padding: 8px; margin-top: 5px;">
                    <option value="">Select a model...</option>
                    <option value="deepseek-r1:1.5b">DeepSeek R1 1.5B (Fast reasoning)</option>
                    <option value="qwen2.5-coder:1.5b">Qwen Coder 1.5B (Code specialist)</option>
                    <option value="deepseek-coder:6.7b">DeepSeek Coder 6.7B (Better code)</option>
                    <option value="codellama:7b">CodeLlama 7B (Meta's code model)</option>
                    <option value="llama3.2:1b">Llama 3.2 1B (Fast general)</option>
                    <option value="llama3.2:3b">Llama 3.2 3B (Balanced)</option>
                    <option value="mistral:7b">Mistral 7B (Quality responses)</option>
                </select>
                <button onclick="downloadModel()" style="width: 100%; background: #003300; border: 1px solid #0f0; color: #0f0; padding: 8px; margin-top: 5px; cursor: pointer;">
                    ğŸ“¥ Download Model
                </button>
            </div>

            <div style="margin-bottom: 15px;">
                <strong>Active Model:</strong><br>
                <select id="activeModelSelect" style="width: 100%; background: #002200; color: #0f0; border: 1px solid #0f0; padding: 8px; margin-top: 5px;" onchange="setActiveModel(this.value)">
                    <option value="auto">Auto (Smart Routing)</option>
                </select>
            </div>

            <button onclick="refreshModels()" style="width: 100%; background: #003300; border: 1px solid #0f0; color: #0f0; padding: 8px; cursor: pointer;">
                ğŸ”„ Refresh Models
            </button>
        </div>

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ADD THESE JAVASCRIPT FUNCTIONS (at the end of the script section):

        // Model Management Functions
        let currentActiveModel = 'auto';

        async function refreshModels() {
            const modelListDiv = document.getElementById('modelList');
            modelListDiv.innerHTML = '<div style="color: #ff0;">Loading...</div>';

            try {
                const response = await fetch('http://localhost:11434/api/tags');
                const data = await response.json();

                if (!data.models || data.models.length === 0) {
                    modelListDiv.innerHTML = '<div style="color: #666;">No models installed</div>';
                    return;
                }

                // Update model list display
                modelListDiv.innerHTML = data.models.map(model => {
                    const sizeGB = (model.size / 1073741824).toFixed(2);
                    return `
                        <div style="padding: 8px; margin-bottom: 5px; background: #002200; border: 1px solid #0f0; display: flex; justify-content: space-between; align-items: center;">
                            <div style="flex: 1;">
                                <div style="font-weight: bold;">${model.name}</div>
                                <div style="font-size: 10px; color: #888;">${sizeGB} GB</div>
                            </div>
                            <button onclick="deleteModel('${model.name}')"
                                    style="background: #330000; border: 1px solid #f00; color: #f00; padding: 4px 8px; cursor: pointer; font-size: 11px;">
                                Delete
                            </button>
                        </div>
                    `;
                }).join('');

                // Update active model dropdown
                const activeSelect = document.getElementById('activeModelSelect');
                activeSelect.innerHTML = '<option value="auto">Auto (Smart Routing)</option>' +
                    data.models.map(m => `<option value="${m.name}">${m.name}</option>`).join('');

                addMessage('system', `âœ“ Found ${data.models.length} models`);
            } catch (error) {
                modelListDiv.innerHTML = '<div style="color: #f00;">Error: Ollama not running</div>';
                addMessage('system', `Error loading models: ${error.message}`);
            }
        }

        async function downloadModel() {
            const modelSelect = document.getElementById('modelSelect');
            const modelName = modelSelect.value;

            if (!modelName) {
                addMessage('system', 'âš ï¸ Please select a model');
                return;
            }

            addMessage('system', `ğŸ“¥ Downloading ${modelName}... This may take several minutes.`);

            try {
                const response = await fetch('http://localhost:11434/api/pull', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({name: modelName, stream: false})
                });

                if (response.ok) {
                    addMessage('system', `âœ… Successfully downloaded ${modelName}`);
                    refreshModels();
                    modelSelect.value = '';
                } else {
                    addMessage('system', `âŒ Failed to download ${modelName}`);
                }
            } catch (error) {
                addMessage('system', `Error: ${error.message}`);
            }
        }

        async function deleteModel(modelName) {
            if (!confirm(`Delete model "${modelName}"? This cannot be undone.`)) return;

            addMessage('system', `ğŸ—‘ï¸ Deleting ${modelName}...`);

            try {
                const response = await fetch('http://localhost:11434/api/delete', {
                    method: 'DELETE',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({name: modelName})
                });

                if (response.ok) {
                    addMessage('system', `âœ… Deleted ${modelName}`);
                    refreshModels();
                } else {
                    addMessage('system', `âŒ Failed to delete ${modelName}`);
                }
            } catch (error) {
                addMessage('system', `Error: ${error.message}`);
            }
        }

        function setActiveModel(modelName) {
            currentActiveModel = modelName;
            document.getElementById('modelInfo').textContent =
                modelName === 'auto' ? 'Model: Auto (Smart Routing)' : `Model: ${modelName}`;
            addMessage('system', `âœ“ Active model set to: ${modelName}`);
        }

        // Auto-refresh models when settings panel opens
        document.addEventListener('DOMContentLoaded', () => {
            refreshModels();
        });

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

COMPLETED TODAY:

1. âœ… Committed v8.3.1 to git (558 files, 39,709 insertions)
2. âœ… Added chat history persistence
   - Auto-save to localStorage
   - Load/save/delete chats
   - Export (TXT/JSON)
   - Import chats
   - Active chat highlighting

3. âœ… Created .deb package (2.4MB)
   - Full Debian package
   - Auto-install dependencies
   - Systemd integration
   - Install with: sudo dpkg -i dsmil-platform_8.3.1-1.deb

4. â³ Model Management UI (90% complete)
   - UI designed
   - Functions written
   - Needs integration into clean_ui_v3.html

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NEXT SESSION: Integrate model management UI + commit final v8.3.2
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
