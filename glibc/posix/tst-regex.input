1998-08-11 14:05  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/backward: Update from tzdata1998g.
	* timezone/etcetera: Likewise.
	* timezone/europe: Likewise.

1998-08-11  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/generic/tempname.c (__path_search): Fix typo and
	formatting.

1998-08-11  H.J. Lu  <hjl@gnu.org>

	* malloc/malloc.c (free_check): Print pointer value using %p.
	(realloc_check): Likewise.

1998-08-11 13:57  Ulrich Drepper  <drepper@cygnus.com>

	* libio/fileops.c (_IO_file_sync): Use _IO_ssize_t for delta, not
	_IO_size_t.

1998-08-10 15:49  Ulrich Drepper  <drepper@cygnus.com>

	* include/dirent.h: Protect from double inclusion.

1998-08-09  Mark Kettenis  <kettenis@phys.uva.nl>

	* posix/glob.h: Add LFS support for glob and globfree.
	* posix/Versions [GLIBC_2.1]: Add glob64 and globfree64.
	* posix/Makefile (routines): Add glob64.
	* sysdeps/generic/glob64.c: New file.
	* sysdeps/unix/sysv/linux/glob64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/glob64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/glob64.c: New file.
	* sysdeps/generic/glob.c [_LIBC && glob] (__glob_pattern_p):
	Elide function.
	* sysdeps/unix/sysv/linux/alpha/glob.c: Add glob64 as a weak alias
	for __new_glob.  Likewise for globfree64.
	* sysdeps/unix/sysv/linux/sparc/sparc64/glob.c: New file.

1998-08-09  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/Makefile ($(common-objpfx)s-proto.d): Remove
	-include flag from command.

1998-08-10  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_db/db-XXX.c (_nss_db_getXXX): If buffer is too small
	decrement `entidx' to allow retrieving the same entry again.

1998-08-09 22:32  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/powerpc/ffs.c: Fix typo.  Add support for ffsl.
	Patch by Matt McLean <keys@yikes.com>.

1998-08-07  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/powerpc/bits/setjmp.h: Use word to save condition
	registers.
	* sysdeps/powerpc/setjmp.S: Save condition registers.
	* sysdeps/powerpc/__longjmp.S: Restore condition registers.

1998-08-09 09:40  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_files/files-XXX.c (internal_getent): In case of an read
	error do not trust errno value, set it to ENOENT.

	* db2/db_185.h: Move __ prototypes into include/* header.
	* dirent/dirent.h: Likewise.
	* elf/dlfcn.h: Likewise.
	* gmon/sys/gmon.h: Likewise.
	* grp/grp.h: Likewise.
	* intl/libintl.h: Likewise.
	* io/fcntl.h: Likewise.
	* io/sys/stat.h: Likewise.
	* io/sys/statfs.h: Likewise.
	* io/sys/statvfs.h: Likewise.
	* libio/stdio.h: Likewise.
	* login/utmp.h: Likewise.
	* misc/mntent.h: Likewise.
	* misc/search.h: Likewise.
	* misc/sys/file.h: Likewise.
	* misc/sys/ioctl.h: Likewise.
	* misc/sys/select.h: Likewise.
	* misc/sys/uio.h: Likewise.
	* misc/sys/ustat.h: Likewise.
	* posix/unistd.h: Likewise.
	* posix/sys/times.h: Likewise.
	* posix/sys/wait.h: Likewise.
	* pwd/pwd.h: Likewise.
	* resource/ulimit.h: Likewise.
	* resource/sys/resource.h: Likewise.
	* setjmp/setjmp.h: Likewise.
	* shadow/shadow.h: Likewise.
	* signal/signal.h: Likewise.
	* socket/sys/socket.h: Likewise.
	* stdlib/alloca.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* string/string.h: Likewise.
	* sysdeps/generic/sys/mman.h: Likewise.
	* sysdeps/unix/bsd/osf/sys/mman.h: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/sys/mman.h: Likewise.
	* sysdeps/unix/bsd/ultrix4/sys/mman.h: Likewise.
	* sysdeps/unix/sysv/irix4/sys/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sched.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/mman.h: Likewise.
	* termios/termios.h: Likewise.
	* time/time.h: Likewise.
	* time/sys/time.h: Likewise.
	* wcsmbs/wchar.h: Likewise.

	* include/alloca.h: Add __ prototypes here.
	* include/db_185.h: Likewise.
	* include/dirent.h: Likewise.
	* include/dlfcn.h: Likewise.
	* include/fcntl.h: Likewise.
	* include/grp.h: Likewise.
	* include/libintl.h: Likewise.
	* include/mntent.h: Likewise.
	* include/pwd.h: Likewise.
	* include/sched.h: Likewise.
	* include/search.h: Likewise.
	* include/setjmp.h: Likewise.
	* include/shadow.h: Likewise.
	* include/signal.h: Likewise.
	* include/stdio.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/string.h: Likewise.
	* include/termios.h: Likewise.
	* include/time.h: Likewise.
	* include/ulimit.h: Likewise.
	* include/unistd.h: Likewise.
	* include/utmp.h: Likewise.
	* include/wchar.h: Likewise.
	* include/sys/file.h: Likewise.
	* include/sys/gmon.h: Likewise.
	* include/sys/ioctl.h: Likewise.
	* include/sys/mman.h: Likewise.
	* include/sys/resource.h: Likewise.
	* include/sys/select.h: Likewise.
	* include/sys/socket.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/sys/statfs.h: Likewise.
	* include/sys/time.h: Likewise.
	* include/sys/times.h: Likewise.
	* include/sys/uio.h: Likewise.
	* include/sys/wait.h: Likewise.

	* Makeconfig (+includes): Search in $(..)include first.

	* io/fstat.c: Undefine __fstat.
	* io/lstat.c: Undefine __lstat.

	* wcsmbs/Versions: Add __mbrlen.

1998-08-09  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-reloc.c (_dl_relocate_object): Implement DT_BIND_NOW.

1998-07-31 17:59  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/bits/byteswap.h: Fix problems with side effects.

	* manual/filesys.texi: Document truncate and ftruncate.
	Patch by Michael Deutschmann <michael@talamasca.wkpowerlink.com>.

	* shadow/putspent.c: Lock stream while generating the output.

	* sunrpc/clnt_unix.c: Use ucred instead of cmsgcred again.
	(__msgwrite): Rewrite accordingly.
	* sunrpc/svc_unix.c: Likewise.
	* sysdeps/unix/sysv/linux/Dist: Remove __recvmsg.S and __sendmsg.S.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir)==socket]
	(sysdep_routines): Remove __sendmsg and __recvmsg.
	* sysdeps/unix/sysv/linux/__recvmsg.S: Removed.
	* sysdeps/unix/sysv/linux/__sendmsg.S: Removed.
	* sysdeps/unix/sysv/linux/recvmsg.c: Removed.
	* sysdeps/unix/sysv/linux/sendmsg.c: Removed.
	* sysdeps/unix/sysv/linux/recvmsg.S: New file.
	* sysdeps/unix/sysv/linux/sendmsg.S: New file.
	* sysdeps/unix/sysv/linux/bits/socket.h: Define SCM_CREDENTIALS and
	struct ucred.  Remove struct cmsgcred.
	Patches by Thorsten Kukuk.

1998-08-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* inet/rcmd.c (__ivaliduser): Allow '#' as comment character.

1998-08-08 14:42  Ulrich Drepper  <drepper@cygnus.com>

	* argp/argp-help.c: Prepare to be used outside glibc without gcc by
	adding usual alloca cruft.
	Reported by Eleftherios Gkioulekas <lf@amath.washington.edu>.

1998-04-05  Jim Meyering  <meyering@ascend.com>

	* lib/regex.c (WIDE_CHAR_SUPPORT): Define.
	This now depends on HAVE_BTOWC so systems that lack btowc (like
	solaris-2.5.1) don't lose.

1998-08-07  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/generic/bits/sigaction.h: Remove definition of SA_DISABLE.
	* sysdeps/generic/bits/sigstack.h: Define SS_DISABLE, SS_ONSTACK,
	MINSIGSTKZ and SIGSTKSZ.  Definitions match BSD.
	* hurd/sigunwind.c (_hurdsig_longjmp_from_handler): Use SS_ONSTACK
	instead of SA_ONSTACK.
	* sysdeps/mach/hurd/sigaltstack.c (__sigaltstack): Renamed from
	sigaltstack, and created a weak alias.  Use SS_DISABLE and
	SS_ONSTACK instead of SA_DISABLE and SA_ONSTACK.
	* sysdeps/mach/hurd/sigstack.c (sigstack): Use SS_ONSTACK instead
	of SA_ONSTACK.  Call __sigaltstack instead of sigaltstack.
	* sysdeps/mach/hurd/i386/sigreturn.c (__sigreturn): Use SS_ONSTACK
	instead of SA_ONSTACK.
	* sysdeps/mach/hurd/alpha/sigreturn.c (__sigreturn): Likewise.
	* sysdeps/mach/hurd/mips/sigreturn.c (__sigreturn): Likewise.
	* sysdeps/mach/hurd/i386/trampoline.c (_hurd_setup_sighandler):
	Use SS_DISABLE instead of SA_DISABLE.  Use SS_ONSTACK instead of
	SA_ONSTACK where appropriate.
	* sysdeps/mach/hurd/alpha/trampoline.c (_hurd_setup_sighandler):
	Likewise.
	* sysdeps/mach/hurd/hppa/trampoline.c (_hurd_setup_sighandler):
	Likewise.
	* sysdeps/mach/hurd/mips/trampoline.c (_hurd_setup_sighandler):
	Likewise.
	* manual/signal.texi (Signal Stack): Talk about SS_DISABLE and
	SS_ONSTACK instead of SA_DISABLE and SA_ONSTACK in discussion of
	the `ss_flags' member of `struct sigaltstack'.

1998-08-05  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libio/Makefile (routines) [$(versioning)=yes]: Add oldtmpfile.
	(shared-only-routines): Likewise.
	* libio/oldtmpfile.c: New file
	* stdio-common/tmpfile.c: Use __fdopen and __close.
	[USE_IN_LIBIO]: Use _IO_fdopen instead of _IO_new_fdopen.  Put
	tmpfile on symbol version GLIBC_2.1.
	* stdio-common/tmpfile64.c: Use __fdopen and __close.
	[USE_IN_LIBIO]: Use _IO_fdopen instead of _IO_new_fdopen.
	* stdio-common/Version [GLIBC_2.1]: Add tmpfile.
	* stdio-common/tempnam.c: Use __strdup instead of strdup.
	* sysdeps/posix/fdopen.c: Define __fdopen and make fdopen weak
	alias.
	* sysdeps/generic/fdopen.c: Likewise.
	* sysdeps/mach/hurd/fdopen.c: Likewise.
	* stdio/stdio.h: Declare __fdopen.
	* sunrpc/openchild.c: Use __fdopen instead of fdopen.
	[USE_IN_LIBIO]: Map __fdopen to _IO_fdopen.
	* sysdeps/posix/tempname.c (__gen_tempname): Don't bother checking
	__stub_open64, it is never defined.

1998-08-05  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libio/iofopen64.c: Fix typo.  Avoid unnessary casts.
	* libio/iopopen.c: Unlink file before freeing it if command
	creation failed.  Avoid unnessary casts.
	* libio/iofdopen.c:  Avoid unnecessary cast.
	* pwd/fgetpwent_r.c [USE_IN_LIBIO]: Map funlockfile to
	_IO_funlockfile.
	* pwd/fgetspent_r.c [USE_IN_LIBIO]: Likewise.

1998-08-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* grp/grp.h, pwd/pwd.h: Don't declare __grpopen, __grpread,
	__grpalloc, __grpscan and the corresponding pwd functions, they
	were removed long ago.

1998-08-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* math/libm-test.c (csqrt_test): Adjust epsilons.
	(casinh_test): Likewise.

1998-08-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/globtest.sh: Fix typo.  Remove second test output file.

1998-08-07  Cristian Gafton  <gafton@redhat.com>

	* pwd/putpwent.c (putpwent): Avoid writting (none) in the passwd file.
	* shadow/putspent.c (putspent): Likewise.
	* grp/putgrent.c: New file.
	* grp/Makefile (routines): Add putgrent.
	* grp/Versions [GLIBC_2.1]: Add putgrent.
	* grp/grp.h: Add putgrent prototype.

1998-08-04 19:33  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: More ELF definitions.

1998-08-04 16:53  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/tmpfile.c: Include unistd.h for close prototype.
	* stdio-common/tmpfile64.c: Likewise.

	* db2/makedb.c: Generate output file with same access permissions
	the input file has.

	* signal/signal.h: Pretty printing.

1998-08-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* misc/mktemp.c: Add include <stlib.h> for prototype, remove
	unneccessary includes.
	* misc/mkstemp.c: Likewise.

1998-08-03 16:36  Ulrich Drepper  <drepper@cygnus.com>

	* catgets/catgets.c: Use mmap/munmap only is _POSIX_MAPPED_FILES
	is defined.
	* catgets/open_catalog.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* intl/loadmsgcat.c: Likewise.
	* locale/findlocale.c: Likewise.
	* locale/loadlocale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* malloc/malloc.c: Likewise.

	* elf/elf.h: Fix typo.

	* math/Makefile: Use $(LN_S) instead of ln.

	* sysdeps/generic/getpgid.c: Fix return type.

1998-08-01 02:49 -0400  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* sysdeps/posix/tempname.c (__stdio_gen_tempname): Rename to
	__gen_tempname and simplify the interface.  Strip out the
	code to do path search and create FILE objects.  This function
	now takes a mktemp() style template and returns either a name
	or a file descriptor.
	(__path_search): New function; searches for directories for
	temp files.
	* sysdeps/generic/tempname.c: Stub out __gen_tempname and
	__path_search, not __stdio_gen_tempname.

	* libio/stdio.h: Prototype __gen_tempname and __path_search,
	not __stdio_gen_tempname.
	* stdio/stdio.h: Likewise.

	* stdio-common/tempnam.c: Use __path_search and __gen_tempname.
	* stdio-common/tmpfile.c: Likewise.
	* stdio-common/tmpfile64.c: Likewise.
	* stdio-common/tmpnam.c: Likewise.
	* stdio-common/tmpnam_r.c: Likewise.

	* misc/mkstemp.c: New file.  Use __gen_tempname.
	* misc/mktemp.c: Likewise.

	* sysdeps/posix/mkstemp.c: Removed.
	* sysdeps/posix/mktemp.c: Removed.
	* sysdeps/generic/mkstemp.c: Removed.
	* sysdeps/generic/mktemp.c: Removed.

1998-08-02  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* configure.in: Check, if door add-on is installed.
	* config.make.in: Add have_doors.
	* sunrpc/Makefile: Add HAVE_DOOR define.
	* sunrpc/key_call.c: Add keyserv/door interface.

	* sunrpc/svc_unix.c: Call setsockopt only if SO_PASSCRED is defined.
	* sunrpc/clnt_unix.c: Likewise.

1998-08-02  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* inet/netinet/in.h (IN_CLASSC): Correct mask.
	Reported by Ian Staniforth <I.Staniforth@sheffield.ac.uk> [fixes
	PR libc/727].

1998-08-03 10:23  Ulrich Drepper  <drepper@cygnus.com>

	* misc/Makefile: Fix installation problem with --disable-shared.
	* posix/Makefile: Likewise.

1998-08-02  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/regex.c (re_search_2): Optimize searching for anchored
	pattern if '^' cannot match at embedded newlines.
	(regerror): Renamed from __regerror, which it should only be
	called if _LIBC.

1998-07-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sunrpc/svc_unix.c (__msgread): Check setsockopt return value.

1998-07-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/glob.c: Remove obsolete cast.

1998-07-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Rules (tests): Fix last change.

1998-07-31 17:59  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Makefile [subdir==misc] (sysdep_routines):
	Add sys_setresuid.

1998-07-30  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/unix/sysv/linux/syscalls.list: Add __syscall_setresuid
	as real name for system call and make setresuid a weak alias.  Set
	caller to seteuid.
	* sysdeps/unix/sysv/linux/seteuid.c (seteuid): Implement using
	`setresuid' syscall if availble.  Fixes problems with sendmail
	which expects `seteuid' to not set the saved user ID.

1998-07-30 20:09 -0400  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* time/tzset.c (__tzstring): Get rid of excessive cleverness
	which was causing stack corruption.

1998-07-31 16:41 -0400  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* argp/argp-fmtstream.c (__argp_fmtstream_update): Correct
	off-by-one in wordwrap algorithm when there' a space at the
	beginning of the buffer.

1998-07-31 15:45  Ulrich Drepper  <drepper@cygnus.com>

	* Makerules (LDLIBS-c.so): Extend value instead of overwriting it.

1998-07-31 11:10  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Add lots of new symbols from Irix and Solaris.

	* sysdeps/unix/sysv/linux/sigstack.c: Include stddef.h to get NULL
	definition.

1998-07-31  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/xcrypt.c: Use only the first 8 characters of the password.

1998-07-30 21:06 -0400  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* sysdeps/generic/glob.c: Undefine strdup before defining it,
	because bits/string2.h may have defined it already.

1998-07-29  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* stdio-common/vfscanf.c: Optimize looking for type modifiers.
	Fix recognition of 'a' modifier vs. 'a' format.
	(TYPEMOD): Removed.

	* stdio-common/printf-parse.h (parse_one_spec): Optimize looking
	for type modifiers.  Fix recognition of 'hh' modifier.

1998-07-31  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/svc_unix.c: Fix typo.

1998-07-31  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sysdeps/unix/sysv/linux/recvmsg.c: Don't check for SCM_CREDS before
	syscall.

1998-07-30 12:38  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/ffs.c: Add ffsl entry point.
	* sysdeps/i386/i686/ffs.c: Likewise.
	* sysdeps/m68k/ffs.c: Likewise.
	* sysdeps/powerpc/ffs.c: Likewise.

	* sysdeps/i386/i486/bits/string.h: Add optimizations for ffs/ffsl
	on i686.

1998-07-30  Richard Henderson  <rth@cygnus.com>

	* elf/Makefile (ld-map): Move initialization below Makeconfig include.

	* sysdeps/libm-ieee754/k_standard.c (zero): Make non-const to
	work around gcc bug.

	* string/string.h (ffsl, ffsll): Prototype.
	* string/Version (GLIBC_2.1): Add them.
	* sysdeps/alpha/ffs.S: Schedule for EV5.  Add ffsl and ffsll
	entry points.
	* sysdeps/alpha/ffsll.S: New file.  Empty.
	* sysdeps/generic/ffs.c: Add ffsl and ffsll entry points.
	* sysdeps/generic/ffsll.c: New file.
	* string/Makefile (routines): Add ffsll.

1998-07-30 10:03  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/bits/time.h: Don't define CLK_TCK for
	strictly ISO C compliant programs.
	* sysdeps/unix/sysv/linux/mips/bits/time.h: Likewise.

1998-07-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* inet/protocols/rwhod.h: Correct typo in comment.

	* configure.in: Use better regex for gettext.

1998-07-29 21:29  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Define more EM_* constants, ELFCLASSNUM, ELFDATANUM,
	EV_NUM, Elf32_Nhdr, Elf64_Nhdr and various note section values.

	* elf/elf.h: Add DT_FLAGS_1 and the DF_1_* flag definitions.

	* elf/sprof.c: Implement -c/--call-pairs option to emit list with
	caller/callee and the number of calls.

1998-07-29  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/dl-sysdep.c (__lseek): New function.
	(__getpid): New function.
	(abort): New function.

1998-07-29 15:07  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/arm/fpu/Dist: New file.  Add ieee754.h.

	* nis/nis_cache2_xdr.c: Removed.
	* nis/nis_cache.c: Removed.
	* nis/nis_cache2.h: Removed.

1998-07-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Rules (tests): Depend on tests-static only if build-static == yes.

	* misc/Makefile (install-lib): Compile libbsd-compat.a and libg.a
	only if build-static == yes.

1998-07-29 12:58  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/glob.c: Windows compatibility stuff.
	Patch received from Paul D. Smith <psmith@BayNetworks.COM>.

1998-07-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sunrpc/clnt_unix.c (__msgwrite)[!SCM_CRED]: Add return
	statement, fix typo.
	* sunrpc/svc_unix.c (__msgwrite)[!SCM_CRED]: Likewise.

1998-07-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/pattern.texi (More Flags for Globbing): Fix typo.

	* manual/math.texi (Special Functions): Fix typo.

	* sysdeps/unix/sysv/linux/bits/in.h (IPV6_ROUTER_ALERT): New
	constant from Linux 2.1.112.

	* posix/Makefile (install-lib): Compile libposix.a only if
	build-static == yes.

1998-07-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/glob.c: Maintain const correctness.  Move extern
	declarations to file level.  Cope with unsupported
	_SC_GETPW_R_SIZE_MAX.

1998-07-29  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/tst-printf.c: %z is now recognized by printf.

	* sysdeps/libm-ieee754/c_csqrt.c: Fix problems with some cancelation
	errors.
	* sysdeps/libm-ieee754/c_csqrtf.c: Likewise.
	* sysdeps/libm-ieee754/c_csqrtlc: Likewise.
	Patch by Stephen L Moshier <moshier@mediaone.net>.

	* math/libm-test.c (csqrt_test): Correct typo in one test, add
	another one.

	* sysdeps/unix/sysv/linux/bits/siginfo.h: Adjust siginfo_t after
	latest kernel change.

1998-07-29  6:39  Kazushige Goto <goto@statabo.rim.or.jp>

	* sysdeps/alpha/fpu/e_sqrt.c [!_IEEE_FP]: Correctly handle
	inputs near DBL_MIN.

1998-07-28  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/nss_dns/dns-host.c (getanswer_r): Lower the priority of
	warnings when DNSSEC related records are received.
	* resolv/gethnamaddr.c (getanswer): Likewise.
	Patch by Brian Wellington <bwelling@anomaly.munge.com>.

	* signal/signal.h: Add prototype for sysv_signal.

	* math/libm-test.c (tgamma_test): Remove redundant tests.

	* sysdeps/generic/glob.c: Correct problems with */foo and GLOB_NOCHECK
	where foo does not exist in any of the subdirectories.
	Reported by Paul D. Smith <psmith@BayNetworks.COM>.

	* posix/globtest.sh: Add test for this bug.

	* posix/glob.h: Add GLOB_TILDE_CHECK.
	* sysdeps/generic/glob.c: Implement GLOB_TILDE_CHECK.
	* posix/globtest.c: Add option T to enable GLOB_TILDE_CHECK.
	* posix/globtest.sh: Re-enable test with ~ and non-existing user name.

1998-07-28  Mark Kettenis  <kettenis@phys.uva.nl>

	* io/sys/statfs.h: Fix typos.
	* io/sys/statvfs.h: Fix typos.

1998-07-28  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.0.95.

	* math/Makefile (libm-calls): Remove w_gamma, add w_tgamma.
	* math/Versions [GLIBC_2.1]: Add tgamma, tgammaf, and tgammal.
	* math/libm-test.c: Split old gamma_test and move half of it in new
	function tgamma_test.
	* math/bits/mathcalls.h: Add declaration of tgamma.
	* sysdeps/libm-ieee754/k_standard.c: Change gamma errors into
	tgamma errors.
	* sysdeps/libm-ieee754/w_gamma.c: Remove lgamma compatibility code
	and rename to ...
	* sysdeps/libm-ieee754/w_tgamma.c: ... this.  New file.
	* sysdeps/libm-ieee754/w_gammaf.c: Remove lgammaf compatibility code
	and rename to ...
	* sysdeps/libm-ieee754/w_tgammaf.c: ... this.  New file.
	* sysdeps/libm-ieee754/w_gammal.c: Remove lgammal compatibility code
	and rename to ...
	* sysdeps/libm-ieee754/w_tgammal.c: ... this.  New file.
	* sysdeps/libm-ieee754/w_lgamma.c: Add gamma as weak alias.
	* sysdeps/libm-ieee754/w_lgammaf.c: Likewise.
	* sysdeps/libm-ieee754/w_lgammal.c: Likewise.

	* stgdio-common/printf-parse.h: Implement handling of j, t, and z
	modifiers.
	* stdio-common/vfprintf.c: Likewise.
	* stdio-common/vfscanf.c: Likewise.
	* manual/stdio.texi: Document new printf/scanf modifiers.

	* sysdeps/unix/sysv/linux/recvmsg.c: Remove alias __recvmsg.
	* sysdeps/unix/sysv/linux/sendmsg.c: Remove alias __sendmsg.

1998-07-28  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/Makefile (routines): Add clnt_unix and svc_unix.
	* sunrpc/Versions: Add new *unix_create functions.
	* sunrpc/clnt_gen.c: Add support for RPC over AF_UNIX.
	* sunrpc/clnt_unix.c: New, client side of RPC over AF_UNIX.
	* sunrpc/key_call.c: Use RPC over AF_UNIX for communication
	with keyserv daemon.
	* sunrpc/rpc/clnt.h: Add AF_UNIX based RPC function prototypes.
	* sunrpc/rpc/svc.h: Likewise.
	* sunrpc/svc_authux.c: Copy internal auth flavor if none is given.
	* sunrpc/svc_tcp.c: Fix typos.
	* sunrpc/svc_unix.c: New, server side of AF_UNIX based RPC.

	* nis/Makefile: Remove currently not working cache functions.
	* nis/Versions: Add __nisbind_* functions for rpc.nisd.
	* nis/nis_call.c: Rewrite binding to a NIS+ server to reuse
	CLIENT handles.
	* nis/nis_file.c: Fix memory leaks.
	* nis/nis_intern.h: Move internal structs from here ...
	* nis/rpcsvc/nislib.h: ... to here for NIS+ server and tools.
	* nis/nis_lookup.c: Try at first if last client handle works.
	* nis/nis_table.c: Likewise.
	* nis/nis_checkpoint.c: Adjust __do_niscall2 parameters.
	* nis/nis_mkdir.c: Likewise.
	* nis/nis_ping.c: Likewise.
	* nis/nis_rmdir.c: Likewise.
	* nis/nis_server.c: Likewise.
	* nis/nis_util.c: Likewise.
	* nis/nis_findserv.c (__nis_findfastest): Little optimization.

1998-07-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* stdlib/strtol.c (STRTOL_LONG_MAX): Correct typo in last patch -
	define as LONG_MAX.

1998-07-28 09:31  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/connections.c (gr_send_answer): Deal with missing UIO_MAXIOV.
	Correct test whether writev send all data.
	* nscd/nscd_getgr_r.c (__nscd_getgr_r): Correct test whether readv
	received all data.

1998-07-28  Mark Kettenis  <kettenis@phys.uva.nl>

	* nscd/nscd_getgr_r.c (__nscd_getgr_r): Deal with missing UIO_MAXIOV.

1998-07-28  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/dl-sysdep.c (open_file): Change assert call to
	allow mode to be 0.
	(__xstat): New function.
	(__fxstat): New function.
	(_dl_sysdep_read_whole_file): Removed.  The implementation in
	`elf/dl-misc.c' now also works for the Hurd.

1998-07-27 22:25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/glob.c: Handle ~ and ~NAME case correctly.

	* posix/globtest.sh: Also add directories with NSS modules into the
	library path.

1998-07-27 17:42  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_files/files-parse.c (INT_FIELD): Use strtoul instead of
	strtol.
	(INT_FIELD_MAYBE_NULL): Likewise.

	* posix/globtest.c: Rewrite for extended test suite.
	* posix/globtest.sh: More tests.
	Patch by Brian Wellington <bwelling@anomaly.munge.com>.

	* stdlib/strtol.c: Don't redefine LONG_MAX, LONG_MIN, and ULONG_MAX.
	Use new macro.

	* sysdeps/generic/readv.c: Correct return type.
	* sysdeps/generic/writev.c: Likewise.

1998-07-24  Gordon Matzigkeit  <gord@fig.org>

	* argp/argp-help.c (_GNU_SOURCE): Define, to suck in
	program_invocation_name when compiling outside of glibc.

1998-07-26  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/arm/siglist.c: New file; ARM tools don't
	like `@' in .type directives.

	* sysdeps/libm-ieee754/e_expf.c (__ieee754_expf): Check whether
	FE_TONEAREST exists for this platform before using it.
	* sysdeps/libm-ieee754/e_exp.c (__ieee754_exp): Likewise.

	* sysdeps/arm/dl-machine.h (elf_machine_rel): Delete redundant
	debugging code.  Correct handling of PC24 relocs.

	* elf/Makefile (ld-map): Only define if versioning is in use.

	* sysdeps/arm/fpu_control.h: Move to ...
	* sysdeps/arm/fpu/fpu_control.h: ... here.
	* sysdeps/generic/fpu_control.h: Made usable as a dummy
	implementation.

	* sysdeps/unix/sysv/linux/arm/brk.c: New file.

	* sysdeps/arm/machine-gmon.h: Improved profiling for ARM.
	* sysdeps/arm/sysdep.h (CALL_MCOUNT): Replace stub with real
	implementation.
	* sysdeps/unix/sysv/linux/arm/clone.S: Likewise.
	Based on patch from Scott Bambrough and Pat Beirne.

	* shlib-versions: Add appropriate definitions for ARM machines.

	* README.template: Mention that Linux/ARM with ELF works now.

1998-07-18  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules: Generate compilation rules for all object suffixes,
	not only those currently selected, for sources in the current or
	object directory.

1998-07-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/fnmatch.c (fnmatch): Allow `/' in character class.  Don't
	match `/' in filename by a character class if requested.
	* posix/testfnm.c: Rewritten.
	* posix/testfnm.args: Removed.

1998-07-25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/annexc.c (limits_syms): Add missing symbols.
	(stdarg_syms): Move va_list to `maybe' list.
	(stdio_syms): Add FOPEN_MAX.

1998-07-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/bits/byteswap.h (__bswap_64): Change __v to __w to
	prevent conflict with __bswap_32.

1998-07-24 21:29  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/connections.c (pw_send_answer): Make one single writev call.
	(gr_send_answer): Do the work in two writev calls.  This change
	changes the protocol.

	* nscd/nscd_getgr_r.c (__nscd_getgr_r): Adjust for protocol change.
	We now can do the job using two readv calls.

1998-07-24  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/glob.c (glob): Fix problems with handle tilde.
	Reported by Brian Wellington <bwelling@anomaly.munge.com>.

	* elf/elf.h: Really define Elf64_Verdef, Elf64_Verdaux, Elf64_Verneed,
	and Elf64_Vernaux.

1998-07-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Recognize pgcc as compiler.
	Reported by sauron@angband.ee.ualberta.ca.

1998-07-02  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nscd/dbg_log.c: Make sure, that debug message is really written.
	* nscd/nscd.c: Don't use daemon(), set signal handler after fork.

1998-07-23  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/glob.c: Fix two problems with GLOB_DOOFFS.
	Reported by bwelling@anomaly.munge.com [PR libc/720].

	* sysdeps/libm-ieee754/k_standard.c: Return NAN for libm not in
	SVID more for gamma(x) with x integer <= 0.
	Reported by Stephen L Moshier <moshier@mediaone.net>.

	* math/libm-test.c (gamma_test): Add test for gamma(-1) and gamma(0).
	Correct test for SVID version of gamma.

	* sysdeps/libm-ieee754/w_gamma.c: Use correct matherr call in SVID
	emulation mode.
	* sysdeps/libm-ieee754/w_gammaf.c: Likewise.
	* sysdeps/libm-ieee754/w_gammal.c: Likewise.

	* string/string.h: Don't use string function optimization for C++
	as long as we use macros.

1998-07-22 23:47  Ulrich Drepper  <drepper@cygnus.com>

	* posix/fnmatch.c: Fix completely broken range matching.

1998-07-22 23:19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/siginfo.h: Fix typo.

1998-07-22  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (headers2_0): Add sigstack.h.

	* sysdeps/unix/sysv/linux/alpha/getrusage.S: Also define __getrusage.

1998-07-22 11:43  Ulrich Drepper  <drepper@cygnus.com>

	* libio/fileops.c (_IO_file_sync): Don't lock stream here.
	Reported by Thorsten Kukuk.

	* string/strcoll.c: Correct problem with empty strings.
	* string/strxfrm.c: Likewise.
	Reported by vbzoli@hbrt.hu [PR libc/719].

1998-07-21 18:40  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* sysdeps/posix/tempname.c: Use the random-name generator
	already used by mktemp/mkstemp.  Honor TMPDIR.

1998-07-21  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* hurd/Makefile (routines): Remove cthreads.
	* sysdeps/mach/hurd/Makefile (sysdep_routines): Add cthreads.

	* sysdeps/unix/sysv/linux/i386/Dist: Add missing files.

	* manual/Makefile (distribute): Add summary.texi.

1998-07-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/sigcontextinfo.h: Fix typo.

1998-07-21  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Correct expression to match gcc version.

	* configure.in: Move test for available port after machine
	variable is defined.

1998-07-21 16:08  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* sysdeps/unix/sysv/linux/sendmsg.c: If passing a SCM_CREDS
	message, copy the buffer and resize it to what the kernel
	wants to see.  Bug found and analyzed by Thorsten Kukuk
	<kukuk@weber-eb.uni-paderborn.de>

1998-07-20  Jose M. Moya  <josem@gnu.org>

	* hurd/hurdmsg.c (_S_msg_get_env_variable): Copy getenv return
	value.

1998-07-20  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/getdomain.c: New file.
	* sysdeps/mach/hurd/setdomain.c: New file.

1998-07-20  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/unix/bsd/sigsuspend.c: Define __sigsuspend with sigsuspend as
	a weak alias.

1998-07-20 18:23  Ulrich Drepper  <drepper@cygnus.com>

	* libio/libioP.h: Use __PMT in typedef.
	* libio/strfile.h: Likewise.

1998-07-20 18:20  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/gethostname.c: Return ENAMETOOLONG if
	buffer is too small.
	Reported by John Levon <j_levon@ncc.co.uk>.

1998-07-20 17:09  Ulrich Drepper  <drepper@cygnus.com>

	* shlib-versions: Remove definition for libSegFault.

	* memory.texi: Comment out the relocating allocator description.
	* manual/signal.texi: Remove reference to relocating allocator.
	* manual/top-menu.texi: Regenerated.

	* posix/fnmatch.c: Implement [: :] and change to recognize
	^ as negation only when not _POSIXLY_CORRECT.

	* sysdeps/generic/glob.c: Add several optimizations.

	* posix/glob.h: Undefine __PMT to prevent warnings.
	Reported by Roland McGrath.

	* posix/regex.c: Define namespace macros only for _LIBC.

	* sysdeps/arm/dl-machine.h: Fix typo.

	* sysdeps/unix/sysv/sysv4/solaris2/sigpending.c: New file.
	* sysdeps/unix/sysv/sysv4/solaris2/sigstack.c: New file.
	* sysdeps/unix/sysv/sysv4/solaris2/sigwaitinfo.c: New file.
	* sysdeps/unix/sysv/sysv4/solaris2/syscalls.list: Add sigaltstack,
	sigpending, sigqueue, and sigtimedwait.
	* sysdeps/unix/sysv/sysv4/solaris2/sparc/sparc32/syscall.S: New file.

	* timezone/leapseconds: Update from tzdata1998f.

1998-07-18  Mark Kettenis  <kettenis@phys.uva.nl>

	* stdio/stdio.h [__USE_GNU]: Add prototype for fputs_unlocked.
	* stdio/Versions [GLIBC_2.1]: Add fputs_unlocked.
	* libio/stdio.h: Fix typo.

1998-07-19  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/dl-sysdep.c (_dl_sysdep_start): #if 0 out the
	magic memobj port arg parsing stuff.  Fix it someday when we are ready
	to really use it.
	(_dl_sysdep_output): New function, modified from _dl_sysdep_error.
	(_dl_sysdep_error, _dl_sysdep_message, _dl_sysdep_fatal): Removed.

1998-07-19  Roland McGrath  <roland@baalperazim.frob.com>

	* stdio/fputs.c: Add fputs_unlocked as weak alias for fputs.

1998-07-19  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/posix/sigsuspend.c: Define __sigsuspend with sigsuspend as
	a weak alias.
	* sysdeps/mach/hurd/sigsuspend.c: Likewise.
	* sysdeps/generic/sigsuspend.c: Likewise.

1998-07-19  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/i386/sigcontextinfo.h: New file.

1998-07-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (map-file): Don't use $(wildcard) to find the
	generated version script, instead look in $(version-maps).
	($(common-objpfx)libc.so): Only depend on libc.map if versioning
	is used.
	* extra-lib.mk ($(objpfx)$(lib).so): Only depend on version script
	if versioning is used.  Don't use $(wildcard) to find the
	generated version script, instead look in $(verson-maps).

1998-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/segfault.c: Rename GET_EIP to GET_PC.  Remove
	unused function handle.
	* sysdeps/generic/sigcontextinfo.h: Rename GET_EIP to GET_PC.
	* sysdeps/unix/sysv/linux/i386/sigcontextinfo.h: Likewise.
	* debug/catchsegv.sh: Fix argument processing, quoting and various
	typos.  Put the crash info always in the current directory.  Find
	program in $PATH if it contains no directory component.
	* Makerules (install-lib.so-versioned,
	install-lib.so-unversioned): New variables.
	(install-lib-nosubdir): Depend on unversioned libs in
	slibdir, not libdir.

1998-07-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Make-dist (+tsrcs): Remove references to %-map variables and
	*.map files.  Add Versions in subdirs.
	* Makerules (distinfo-vars): Don't write out %-map variables.

1998-07-20 13:55  Ulrich Drepper  <drepper@cygnus.com>

	* inet/protocols/rwhod.h: Remove definition of _PATH_RWHODIR.
	Include <paths.h> instead.
	* sysdeps/generic/paths.h: Define _PATH_RWHODIR.
	* sysdeps/unix/sysv/linux/paths.h: Likewise.
	Reported by Dale Scheetz <dwarf@polaris.net>.

1998-07-17 21:44  Ulrich Drepper  <drepper@cygnus.com>

	* catgets/open_catalog.c: Strictly check whether catalog file is
	larger enough for the data.  Reported by Andries.Brouwer@cwi.nl.

1998-07-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/sigcontextinfo.h: New file.

	* sysdeps/unix/sysv/linux/m68k/socket.S: Support NO_WEAK_ALIAS.

1998-07-17  Ulrich Drepper  <drepper@cygnus.com>

	* debug/catchsegv.sh: Fix several stupid bugs.

	* shlib-versions: Define version for libSegFault.
	* debug/Makefile: Replace shared lib version number while rewriting.

1998-07-17  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/dl-sysdep.c (__mmap): Add sanity check.
	Suggested by Roland McGrath.

1998-07-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* timezone/Makefile: Remove '-L (leapseconds)' for testdata
	generation to control environment.

1998-07-17 09:21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/sysv4/solaris2/bits/signum.h: Define SIG_HOLD.
	Patch by John Tobey <jtobey@banta-im.com>.

	* manual/llio.texi: Document readv/writev and mmap functions.
	Patch by Michael Deutschmann <michael@talamasca.wkpowerlink.com>.

1998-07-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/Makefile (texis): Depend on texis.awk.
	(nonexamples): Filter out add-on chapters.
	(chapters.% top-menu.%): Depend on libc-texinfo.sh.
	(stamp-summary): Depend on $(texis) except summary.texi.
	($(inst_infodir)/libc.info): Simplify command.
	* manual/libc-texinfo.sh: Cleaned up to use less temporary files.
	Fix the generation of the detailed node listing to make it
	complete again.
	* manual/math.texi: Fix signature of lgamma_r.

1998-07-16 23:06  Ulrich Drepper  <drepper@cygnus.com>

	* debug/Makefile (distribute): Add sigcontextinfo.h.
	Add rules to generate and install catchsegv.
	* debug/catchsegv.sh: New file.

1998-07-16  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/dl-sysdep.c (open_file): Return a Hurd I/O
	port instead of a Mach memory object.
	(__open): Likewise.
	(__libc_read): New function.
	(__mmap): Change to take a Hurd I/O port instead of a Mach memory
	object.

1998-07-16 20:01  Ulrich Drepper  <drepper@cygnus.com>

	* debug/Makefile (routines): Add backtracesymsfd.
	Add rules to generate libSegFault.
	* debug/Versions: Add __backtrace_symbols_fd and backtrace_symbols_fd.
	* debug/execinfo.h: Declare backtrace_symbols_fd.
	* sysdeps/generic/backtracesymsfd.c: New file.
	* sysdeps/generic/elf/backtracesymsfd.c: New file.
	* sysdeps/generic/segfault.c: New file.
	* sysdeps/generic/sigcontextinfo.h: New file.
	* sysdeps/unix/sysv/linux/i386/sigcontextinfo.h: New file.

	* sysdeps/generic/elf/backtracesyms.c: Remove unneeded +.

1998-07-16 19:27  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (process_envvars): Also recognize on as LD_BIND_NOW value.
	(process_envvars): Append .PID to LD_DEBUG_OUTPUT file name.

1998-07-16 13:44  Ulrich Drepper  <drepper@cygnus.com>

	* argp/argp-fmtstream.c: Fix warnings introduced in last change.
	* assert/assert-perr.c: Likewise.
	* assert/assert.c: Likewise.
	* gconv_conf.c: Likewise.
	* libio/iofputs_u.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* malloc/obstack.c: Likewise.
	* misc/error.c: Likewise.
	* misc/syslog.c: Likewise.
	* stdio-common/asprintf.c: Likewise.
	* stdio-common/dprintf.c: Likewise.
	* stdio-common/getw.c: Likewise.
	* stdio-common/putw.c: Likewise.
	* stdio-common/snprintf.c: Likewise.
	* stdio-common/sprintf.c: Likewise.
	* stdio-common/sscanf.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sysdeps/generic/abort.c: Likewise.

	* rt/aio_cancel.c: Don't define ECANCELED here.
	* sysdeps/unix/sysv/linux/bits/errno.h: Define ECANCELED correctly.

1998-07-16 10:23  Ulrich Drepper  <drepper@cygnus.com>

	* argp/argp-fmtstream.c: Unify names of used global functions.
	* argp/argp-help.c: Likewise.
	* assert/assert-perr.c: Likewise
	* assert/assert.c: Likewise
	* dirent/scandir.c: Likewise
	* dirent/scandir64.c: Likewise
	* dirent/versionsort.c: Likewise
	* dirent/versionsort64.c: Likewise
	* gmon/bb_exit_func.c: Likewise.
	* gmon/gmon.c: Likewise.
	* grp/initgroups.c: Likewise.
	* iconv/gconv_conf.c: Likewise.
	* inet/getnameinfo.c: Likewise.
	* inet/getnetgrent_r.c: Likewise.
	* inet/inet_ntoa.c: Likewise.
	* inet/rcmd.c: Likewise.
	* inet/rexec.c: Likewise.
	* inet/ruserpass.c: Likewise.
	* io/fts.c: Likewise.
	* io/ftw.c: Likewise.
	* io/ftw64.c: Likewise.
	* io/getdirname.c: Likewise.
	* io/getwd.c: Likewise.
	* io/lockf.c: Likewise.
	* libio/iofdopen.c: Likewise.
	* libio/iopopen.c: Likewise.
	* login/utmp_daemon.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* malloc/obstack.c
	* misc/daemon.c: Likewise.
	* misc/efgcvt_r.c: Likewise.
	* misc/err.c: Likewise.
	* misc/error.c: Likewise.
	* misc/fstab.c: Likewise.
	* misc/getpass.c: Likewise.
	* misc/getttyent.c: Likewise.
	* misc/mntent_r.c: Likewise.
	* misc/search.h: Likewise.
	* misc/syslog.c: Likewise.
	* nscd/nscd_getgr_r.c: Likewise.
	* nscd/nscd_getpw_r.c: Likewise.
	* posix/getpgrp.c: Likewise.
	* posix/wordexp.c: Likewise.
	* pwd/fgetpwent_r.c: Likewise.
	* pwd/getpw.c: Likewise.
	* resolv/herror.c: Likewise.
	* resolv/res_init.c: Likewise.
	* shadow/fgetspent_r.c: Likewise.
	* shadow/lckpwdf.c: Likewise.
	* signal/sigrelse.c: Likewise.
	* stdio-common/asprintf.c: Likewise.
	* stdio-common/dprintf.c: Likewise.
	* stdio-common/getw.c: Likewise.
	* stdio-common/putw.c: Likewise.
	* stdio-common/snprintf.c: Likewise.
	* stdio-common/sprintf.c: Likewise.
	* stdio-common/sscanf.c: Likewise.
	* stdlib/lrand48_r.c: Likewise.
	* stdlib/mrand48_r.c: Likewise.
	* string/argz-replace.c: Likewise.
	* string/envz.c: Likewise.
	* sunrpc/auth_des.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/bindrsvprt.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/netname.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.
	* sysdeps/generic/abort.c: Likewise.
	* sysdeps/generic/dl-sysdep.c: Likewise.
	* sysdeps/generic/fstatfs64.c: Likewise.
	* sysdeps/generic/ftruncate64.c: Likewise.
	* sysdeps/generic/getrlimit64.c: Likewise.
	* sysdeps/generic/glob.c: Likewise.
	* sysdeps/generic/prof-freq.c: Likewise.
	* sysdeps/generic/putenv.c: Likewise.
	* sysdeps/generic/statfs64.c: Likewise.
	* sysdeps/generic/ttyname_r.c: Likewise.
	* sysdeps/generic/utmp_file.c: Likewise.
	* sysdeps/generic/vlimit.c: Likewise.
	* sysdeps/generic/vtimes.c: Likewise.
	* sysdeps/posix/cuserid.c: Likewise.
	* sysdeps/posix/euidaccess.c: Likewise.
	* sysdeps/posix/mkstemp.c: Likewise.
	* sysdeps/posix/mktemp.c: Likewise.
	* sysdeps/posix/pread.c: Likewise.
	* sysdeps/posix/pread64.c: Likewise.
	* sysdeps/posix/profil.c: Likewise.
	* sysdeps/posix/pwrite.c: Likewise.
	* sysdeps/posix/pwrite64.c: Likewise.
	* sysdeps/posix/sigblock.c: Likewise.
	* sysdeps/posix/sigpause.c: Likewise.
	* sysdeps/posix/ttyname.c: Likewise.
	* sysdeps/posix/ttyname_r.c: Likewise.
	* sysdeps/posix/waitid.c: Likewise.
	* sysdeps/unix/getlogin_r.c: Likewise.
	* sysdeps/unix/grantpt.c: Likewise.
	* sysdeps/unix/rewinddir.c: Likewise.
	* sysdeps/unix/sysv/linux/gethostid.c: Likewise.
	* sysdeps/unix/sysv/linux/getpt.c: Likewise.
	* sysdeps/unix/sysv/linux/if_index.c: Likewise.
	* sysdeps/unix/sysv/linux/ptsname.c: Likewise.
	* sysdeps/unix/sysv/linux/sendmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/statvfs.c: Likewise.
	* sysdeps/unix/sysv/linux/ttyname.c: Likewise.
	* sysdeps/unix/sysv/linux/ttyname_r.c: Likewise.
	* sysdeps/unix/sysv/linux/ulimit.c: Likewise.
	* sysdeps/unix/sysv/linux/unlockpt.c: Likewise.
	* sysvipc/sys/shm.h: Likewise.
	* time/ctime_r.c: Likewise.
	* time/strptime.c: Likewise.
	* wcsmbs/mbrlen.c: Likewise.
	* wcsmbs/wcsdup.c: Likewise.
	* wcsmbs/wcsxfrm.c: Likewise.
	* wctype/wcfuncs.c: Likewise.

	* sysdeps/unix/sysv/linux/i386/socker.S: Change to honor NO_WEAK_ALIAS.
	* sysdeps/unix/sysv/linux/accept.S: Don't generate __ name.
	* sysdeps/unix/sysv/linux/bind.S: Likewise.
	* sysdeps/unix/sysv/linux/getsockname.S: Likewise.
	* sysdeps/unix/sysv/linux/listen.S: Likewise.
	* sysdeps/unix/sysv/linux/recvfrom.S: Likewise.
	* sysdeps/unix/sysv/linux/sendto.S: Likewise.
	* sysdeps/unix/sysv/linux/setsockopt.S: Likewise.

	* grp/fgetgrent_r.c: Use explicit locking of the stream.

	* elf/Makefile (rtld-routines): Add dl-environ.
	* sysdeps/generic/dl-sysdep.c: Move _dl_next_ld_env_entry and unsetenv
	to...
	* sysdeps/generic/dl-environ.c: here.  New file.

	* libio/Makefile [REENTRANT] (routines): Add iofputs_u.
	* libio/Versions: Add fputs_unlocked.
	* libio/iofputs_u.c: New file.
	* libio/stdio.h: Add prototype for fputs_unlocked.

	* sunrpc/rpc/auth.h: Use __PMT instead of __P in type definitions.
	* sunrpc/rpc/clnt.h: Likewise.
	* sunrpc/rpc/pmap_clnt.h: Likewise.
	* sunrpc/rpc/svc.h: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.

	* sysdeps/i386/memchr.S: Correct for more strict gas.
	* sysdeps/i386/fpu/bits/mathinline.h: Likewise.
	* sysdeps/libm-i387/i686/s_fdim.S: Likewise.
	* sysdeps/libm-i387/i686/s_fdimf.S: Likewise.
	* sysdeps/libm-i387/i686/s_fdiml.S: Likewise.

1998-07-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Change message for binutils version from
	2.8.1.0.17->2.8.1.0.23.

1998-07-15  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/sysv4/solaris2/sparc/sysdep.h: Define LOC.
	Patch by John Tobey <jtobey@banta-im.com>.

1998-07-14  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/auth_unix.c (authunix_create_default): Use __sysconf
	instead of sysconf.

1998-07-14 19:39  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfscanf.c (ungetc): Use _IO_sputbackc, not _IO_ungetc.
	[_USE_IN_LIBIO] (encode_error): Free cancelation handler.
	(conv_error): Likewise.
	(input_error): Likewise.
	(memory_error): Likewise.

1998-07-12  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/dl-sysdep.c: Bring in sync with generic
	implementation.  Include <entry.h>.  Replace references to symbol
	_start with macro ENTRY_POINT.
	(__libc_uid): Remove.
	(__libc_multiple_libcs): New variable.
	(__libc_stack_end): New variable.
	(_dl_hwcap_mask): New variable.
	(_dl_important_hwcaps): New function.
	(_dl_show_auxv): Mark internal.

1998-07-14  Mark Kettenis  <kettenis@phys.uva.nl>

	* mach/Makefile: Create target directory before generating
	mach-syscalls.mk.
	* mach/Machrules: Invoke awk using AWK variable.  Create target
	directory before generating server stubs.

1998-07-14  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wcslen.c (__wcslen): Fix comment.

	* configure.in: Allow egcs-2.92.

1998-07-10 18:14 -0400  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* manual/Makefile: Overhauled.  Generate libc.texinfo from the
	chapter files.  Exorcise the chapters, chapters-incl mess.
	Support inserting doc chapters from add-on modules.
	(chapters): New variable.
	(add-chapters): New variable.
	(appendices): New variable.
	(libc.texinfo): New target.
	(clean): Fix bugs.
	(realclean): Fix bugs.

	* manual/texis.awk: New file.
	* manual/libc-texinfo.sh: New file.
	* manual/libc-texinfo.in: New file.

	* manual/conf.texi (top @node): Remove next pointer.
	* manual/lang.texi (top @node): Remove prev pointer.

	* manual/job.texi (top @node): Add explicit pointers.
	* manual/message.texi (top @node): Add explicit pointers.
	* manual/nss.texi (top @node): Add explicit pointers.
	* manual/process.texi (top @node): Add explicit pointers.
	* manual/startup.texi (top @node): Add explicit pointers.
	* manual/terminal.texi (top @node): Add explicit pointers.
	* manual/users.texi (top @node): Add explicit pointers.

	* manual/arith.texi: Add %MENU% tag.
	* manual/conf.texi: Add %MENU% tag.
	* manual/contrib.texi: Add %MENU% tag.
	* manual/ctype.texi: Add %MENU% tag.
	* manual/errno.texi: Add %MENU% tag.
	* manual/filesys.texi: Add %MENU% tag.
	* manual/header.texi: Add %MENU% tag.
	* manual/install.texi: Add %MENU% tag.
	* manual/intro.texi: Add %MENU% tag.
	* manual/io.texi: Add %MENU% tag.
	* manual/job.texi: Add %MENU% tag.
	* manual/lang.texi: Add %MENU% tag.
	* manual/llio.texi: Add %MENU% tag.
	* manual/locale.texi: Add %MENU% tag.
	* manual/maint.texi: Add %MENU% tag.
	* manual/math.texi: Add %MENU% tag.
	* manual/mbyte.texi: Add %MENU% tag.
	* manual/memory.texi: Add %MENU% tag.
	* manual/message.texi: Add %MENU% tag.
	* manual/nss.texi: Add %MENU% tag.
	* manual/pattern.texi: Add %MENU% tag.
	* manual/pipe.texi: Add %MENU% tag.
	* manual/process.texi: Add %MENU% tag.
	* manual/search.texi: Add %MENU% tag.
	* manual/setjmp.texi: Add %MENU% tag.
	* manual/signal.texi: Add %MENU% tag.
	* manual/socket.texi: Add %MENU% tag.
	* manual/startup.texi: Add %MENU% tag.
	* manual/stdio.texi: Add %MENU% tag.
	* manual/string.texi: Add %MENU% tag.
	* manual/sysinfo.texi: Add %MENU% tag.
	* manual/terminal.texi: Add %MENU% tag.
	* manual/time.texi: Add %MENU% tag.
	* manual/users.texi: Add %MENU% tag.

1998-07-13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h (x86_cap_flags):
	Update.

1998-07-11  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/recvmsg.c (__libc_recvmsg): Use ANSI
	style declaration to avoid warning.
	* sysdeps/unix/sysv/linux/sendmsg.c (__libc_sendmsg): Likewise.

1998-07-04  Mark Kettenis  <kettenis@phys.uva.nl>

	* elf/rtld.c (process_dl_debug): Add missing continue.

1998-07-12  Mark Kettenis  <kettenis@phys.uva.nl>

	* elf/rtld.c (_dl_skip_args): Make global because the Hurd startup
	code needs it.

1998-07-10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig ($(common-objpfx)sysd-dirs): Write out definition of
	sysd-dirs-done.
	* Makerules: Don't generate version maps too early.
	($(common-objpfx)sysd-versions): Force regeneration if the list of
	subdirs has changed.

1998-07-10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dlfcn.h (DL_CALL_FCT): Use portable comma expression.

1998-07-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconv/gconv_db.c (gen_steps): Always set *handle and *nsteps.
	* iconv/gconv_dl.c (__gconv_find_shlib): Correct use of tfind
	return value.

1998-07-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-open.c (dl_open_worker): New function.
	(_dl_open): Call it to do the actual work while catching errors.
	* elf/dl-close.c (_dl_close): Only call termination function if
	the initialisation function was called.

1998-07-13  Ulrich Drepper  <drepper@cygnus.com>

	* libio/libioP.h (_IO_cleanup_registration_needed): Use __PMT.
	Reported by Felix von Leitner <leitner@amdiv.de>.

1998-07-09  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Make-dist (+sysdep-tsrcs): Add Versions.

1998-07-09  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* math/Versions: Remove __log1p, __atan2, __fe_dfl_env,
	__fe_enabled_env, __fe_nonieee_env and __fe_nomask_env.
	* sysdeps/powerpc/Versions: New file.
	* csu/Versions: Remove brk, sbrk, environ, __environ, _environ
	and __errno_location.
	* misc/Versions: Add brk and sbrk.
	* posix/Versions: Add environ, __environ and _environ.
	* sysdeps/unix/sysv/linux/Versions: Add __errno_location.

1998-07-10 11:58  Ulrich Drepper  <drepper@cygnus.com>

	* Makerules [no_defs]: Avoid dependency for loading sysd-versions.
	Patch by Zack Weinberg.

1998-07-10  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* posix/annexc.c (errno_maybe): EACCESS->EACCES.
	(signal_maybe): Remove duplicate entry SIGEV_SIGNAL.
	(mman_maybe): Remove duplicates MS_ASYNC, MS_INVALIDATE.

1998-07-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/bits/fcntl.h: Fix typo.

1998-07-09  Ulrich Drepper  <drepper@cygnus.com>

	* posix/unistd.h: Simplify #ifdefs.

	* libio/libio.h: Undo last change due to possible C++ problems.
	* libio/fileops.h: Likewise.

1998-07-09 13:34  Ulrich Drepper  <drepper@cygnus.com>

	* grp/grp.h: Define gid_t also for __USE_XOPEN.
	* io/fcntl.h: Include <sys/stat.h> also for __USE_XOPEN.
	* io/utime.h: Define time_t also for __USE_XOPEN.
	* io/sys/stat.h: Define time_t also for __USE_XOPEN.
	Define *_t types except for pid_t also for __USE_XOPEN.
	Define S_* macros also for __USE_XOPEN.
	* locale/langinfo.h: Define CODESET, CRNCYSTR, RADIXCHAR, and
	THOUSEP also for __USE_XOPEN.
	* math/math.c: Define M_* macros also for __USE_XOPEN.
	* math/bits/mathcalls.h: Declare hypot also for __USE_XOPEN.
	* posix/fnmatch.h: Define FNM_NOSYS and for if _XOPEN_SOURCE is
	defined.
	* posix/glob.h: Likewise for GLOB_NOSYS.
	* posix/regex.h: Likewise for REG_NOSYS.
	* posix/wordexp.h: Likewise for WRDE_NOSYS.
	* posix/unistd.h: Define *_t types also for __USE_XOPEN.
	* posix/sys/wait.h: Define pid_t for __USE_XOPEN.
	* pwd/pwd.h: Define gid_t and pid_t also for __USE_XOPEN.
	* signal/signal.h: Define pid_t also for __USE_XOPEN.
	* sysdeps/unix/sysv/linux/bits/fcntl.h: Define _RSYNC and O_DSYNC also
	for __USE_POSIX199309.
	* sysdeps/unix/sysv/linux/bits/termios.h: Define the various B*
	constants also for __USE_XOPEN.
	* wcsmbs/wchar.h: For XPG4 include wctype.h.

	* intl/dcgettext.c (find_msg): Initialize act to prevent warning.
	* locale/setlocale.c (new_composite_name): Likewise for last_len.

	* libio/stdio.h: Don't declare fclose_unlocked.

	* sysdeps/posix/fpathconf.c: Handle _PC_FILESIZEBITS.

1998-07-08  Mark Kettenis  <kettenis@phys.uva.nl>

	* stdio/stdio.h: Add prototypes for fflush_unlocked,
	getc_unlocked, getchar_unlocked, putc_unlocked, putchar_unlocked,
	fgets_unlocked, fread_unlocked, fwrite_unlocked,
	clearerr_unlocked, feof_unlocked, ferror_unlocked,
	fileno_unlocked, flockfile, ftrylockfile, funlockfile.
	[__USE_XOPEN && !__USE_GNU] Declare optarg, optind, opterr.  Add
	prototype for getopt.
	* stdio/clearerr.c (clearerr_unlocked): Weak alias for clearerr.
	* stdio/feof.c (feof_unlocked): Weak alias for feof.
	* stdio/ferror.c (ferror_unlocked): Weak alias for ferror.
	* stdio/fflush.c (fflush_unlocked): Weak alias for fflush.
	* stdio/fgets.c (fgets_unlocked): Weak alias for fgets.
	* stdio/fileno.c (fileno_unlocked): Weak alias for fileno.
	* stdio/fputc.c (fputc_unlocked): Weak alias for fputc.
	* stdio/fread.c (fread_unlocked): Weak alias for fread.
	* stdio/fwrite.c (fwrite_unlocked): Weak alias for fwrite.
	* stdio/getc.c (getchar_unlocked): Weak alias for getc.
	* stdio/getchar.c (getchar_unlocked): Weak alias for getchar.
	* stdio/putc.c (putc_unlocked): Weak alias for putc.
	* stdio/putchar.c (putchar_unlocked): Weak alias for putchar.
	* stdio/Versions [GLIBC_2.1]: Add clearerr_unlocked,
	feof_unlocked, ferror_unlocked, fflush_unlocked, fgets_unlocked,
	fileno_unlocked, fputc_unlocked, fread_unlocked, fwrite_unlocked,
	getc_unlocked, getchar_unlocked, putc_unlocked and
	putchar_unlocked.

	* libio/Versions: Move flockfile, ftrylockfile and funlockfile
	from here ...
	* stdio-common/Versions: ... to here.

1998-07-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Makerules (versioning): Correct typo.

1998-07-08 22:18  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Versions: Add _dl_mcount_wrapper_check.
	* elf/dlfcn.h (DL_CALL_FCT): Don't test _dl_profile_map, simply use
	_dl_mcount_wrapper_check.
	* iconv/skeleton.c: Use DL_CALL_FCT, not _CALL_DL_FCT.

	* elf/dl-reloc.c (_dl_relocate_object): Don't declare using
	internal_function.
	* elf/ldsodefs.h: Likewise.

	* io/fcntl.h: Define SEEK_SET, SEEK_CUR, and SEEK_END.

	* libio/stdio.h: Make sure va_list is defined for X/Open.
	Define P_tmpdir for X/Open.

	* posix/regex.h: Fix typo.

	* posix/unistd.h: Define intptr_t if not already happened.
	Add pthread_atfork prototype.
	* sysdeps/generic/bits/types.h: Define __intptr_t.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/mips/types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sparc/sparc64/types.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/types.h: Likewise.
	* sysdeps/wordsize-32/stdint.h: Don't define intptr_t if already done.
	* sysdeps/wordsize-64/stdint.h: Likewise.

	* posix/bits/posix1_lim.h: Define _POSIX_CLOCKRES_MIN.

	* signal/Makefile (headers): Add bits/sigthread.h.
	* signal/signal.h: Include bits/sigthread.h.
	* sysdeps/generic/bits/sigthread.h: New file.

	* stdlib/stdlib.h: Declare rand_r use __USE_POSIX.

	* sysdeps/generic/bits/confname.h: Define _PC_FILESIZEBITS.
	* sysdeps/posix/pathconf.c: Handle _PC_FILESIZEBITS.
	* sysdeps/unix/sysv/linux/alpha/fpathconf.c: New file.
	* sysdeps/unix/sysv/linux/alpha/pathconf.c: New file.

	* sysdeps/generic/bits/dlfcn.h: Define RTLD_LOCAL.

	* elf/rtld.c: Remove preloading and loadpath variables in SUID
	programs.
	* sysdeps/generic/dl-sysdep.c: Define unsetenv.
	* sysdeps/unix/sysv/linux/i386/dl-librecon.h: Define other envvar
	names.

	* sysdeps/unix/sysv/linux/bits/errno.h: Define ECANCELED.

	* sysdeps/unix/sysv/linux/bits/fcntl.h: Define O_RSYNC and O_DSYNC.
	Remove O_READ and O_WRITE definition.

	* sysdeps/unix/sysv/linux/bits/resource.h: Define RLIM_SAVED_MAX
	and RLIM_SAVED_CUR.

	* sysdeps/unix/sysv/linux/fstatvfs.h: Handle UFS filesystem.

1998-07-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules ($(common-objpfx)sysd-versions): Expect awk script in
	scripts directory.  Pass move-if-change to awk.
	(common-generated): Add $(version-maps) and sysd-versions.
	* versions.awk: Moved to...
	* scripts/versions.awk: ... here.  Use move-if-change to void
	touching unchanged files.  Print "version-maps = ..." instead of
	"all-version-maps = ..." and without $(common-objpfx).  Explain
	expected variable names.
	* Makefile (distribute): Updated.

1998-07-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* misc/getttyent.c (getttyent): Don't return with locked stream.
	* misc/mntent_r.c (__getmntent_r): Likewise.

1998-07-07 18:24  Ulrich Drepper  <drepper@cygnus.com>

	* libio/fileops.c (_IO_do_write): Don't shrink wwrite buffer to zero
	if stream is line buffered.
	(_io_file_overflow): Likewise.
	* libio/libio.h (_IO_putc_unlocked): Make sure that for line-buffered
	streams writing '\n' flushes the string.

1998-07-07 17:28  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-profstub.c (_dl_profile_map): Only declare variable here.
	* elf/dl-support.c: Define it here...
	* elf/rtld.c: ...and here.

1998-07-07 16:28  Ulrich Drepper  <drepper@cygnus.com>

	* grp/initgroups.c: Handle directives from nsswitch.conf file.

1998-07-07  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/types.h: Add
	__ino64_t definition.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/types.h: Define
	__off64_t.  Reported by Felix von Leitner <leitner@math.fu-berlin.de>.

	* sysdeps/unix/sysv/linux/ldd-rewrite.sed: Do not exit the shell
	script if lddlibc4 failed.
	Reported by B. D. Elliott <bde@accessone.com>.

1998-07-06  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/elf/backtracesyms.c (__backtrace_symbols):
	Improve generated strings a bit.

1998-07-06 14:36  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/Makefile (generated): Remove $(objpfx) from the names.

1998-07-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* stdio-common/test_rdwr.c: Use %Zu for size_t in printf
	format string.

	* libio/iofread_u.c: Include <stdio.h> for prototype.
	* libio/iofwrite_u.c: Likewise.

1998-07-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* db2/Versions: New file.

1998-07-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (lib-noranlib): Don't depend on sysd-versions.
	($(common-objpfx)sysd-versions): Remove rule.
	* Makerules ($(common-objpfx)sysd-versions): Define here instead.
	Pass name of Versions.def file to script and redirect output to
	target.  Include it and make all generated version maps depend on
	it.
	* versions.awk: Print out variable definition containing all
	generated version maps.  Print error messages to stderr.  Remove
	temp file.

1998-07-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/annexc.c (check_header): Terminate macro name before
	comparing.
	(get_null_defines): Allow builtin macros with parameters.
	(fmt, testfmt): Add -D_LIBC.
	* posix/Makefile: Remove bogus duplicate include directories from
	annexc test command.

1998-07-06 12:04  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_nis/nis-pwd.c (internal_nis_getpwent_r): Handle adjunct
	password scheme.
	(_nss_nis_getpwnam_r): Likewise.
	(_nss_nis_getpwuid_r): Likewise.

1998-07-05  Mark Kettenis  <kettenis@phys.uva.nl>

	* libio/Versions: Move symbols whose source lives in
	stdio-common to ...
	* stdio-common/Versions: ... here.
	* stdio/Versions: Add missing symbols.

1998-07-05  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/__sendmsg.S: Define function as
	__syscall_sendmsg.
	* sysdeps/unix/sysv/linux/__recvmsg.S: Define function as
	__syscall_recvmsg.
	* sysdeps/unix/sysv/linux/recvmsg.c: Define function as __libc_recvmsg
	and make __recvmsg and recvmsg weak aliases.
	* sysdeps/unix/sysv/linux/sendmsg.c: Likewise for sendmsg.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Define __syscall_recvmsg
	and __syscall_sendmsg.

1998-07-05 11:49  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_conf.c (read_conf_file): Use feof_unlocked on private
	stream.
	* inet/ruserpass.c (token): Likewise.
	* nss/nsswitch.c (nss_parse_file): Likewise.
	* intl/localealias.c: Likewise.  Also for ferror.
	* time/getdate.c (__getdate_r): Likewise.

	* libio/Makefile (routines): Add iofgets_u.
	* libio/iofgets_u.c: New file.
	* libio/Versions: Add fgets_unlocked.
	* libio/stdio.h: Add prototype for fgets_unlocked.

	* misc/getttyent.c (getttyent): Use fgets_unlocked instead of fgets.
	* misc/getusershell.c (initshells): Likewise.
	* misc/mntent_r.c (__getmntent_r): Explicitly lock stream.  Use
	fgets_unlocked.
	* nss/nss_files/files-XXX.c (internal_getent): Likewise.
	* resolv/res_init.c (res_init): Likewise.
	* sysdeps/unix/sysv/linux/getsysstats.c: Likewise.

1998-05-23  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/sysv/linux/arm/syscalls.list: Add `syscall'.
	* sysdeps/unix/sysv/linux/arm/syscall.S: Deleted.

1998-07-05  Ulrich Drepper  <drepper@cygnus.com>

	* misc/getttyent.c (getttyent): Explicitly lock the FILE and use
	_unlocked functions.

	* inet/ruserpass.c (ruserpass): Use _unlocked functions since this
	is a private FILE.

1998-07-04 17:11 -0400  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* csu/Makefile: Build crt files in lib pass.
	* db2/Makefile (distribute): Add mutex/sco.cc.
	* mach/Machrules: Don't generate .udeps files if no_deps is set.
	* sysdeps/unix/Makefile: Don't generate sysd-syscalls or
	s-proto.d if avoid-generated is set.

	* sysdeps/alpha/Dist: List only one file per line.
	* sysdeps/generic/Dist: Likewise.
	* sysdeps/m68k/fpu/switch/Dist: Likewise.
	* sysdeps/sparc/sparc32/Dist: Likewise.
	* sysdeps/unix/Dist: Likewise.
	* sysdeps/unix/sysv/irix4/Dist: Likewise.

	* sysdeps/mach/hurd/i386/Dist: New file.
	* sysdeps/generic/Dist: Add endutxent.c, getutxent.c, getutxid.c,
	getutxline.c, pututxline.c, setutxent.c, updwtmpx.c, and utmpxname.c.
	* sysdeps/unix/sysv/linux/Dist: Add getresuid.c and getresgid.c.
	* sysdeps/unix/sysv/linux/sparc/sparc32/Dist: Remove __sigtrampoline.S.

1998-07-04 10:14  Ulrich Drepper  <drepper@cygnus.com>

	* libio/Makefile (routines): Add iofread_u and iofwrite_u.
	* libio/Versions: Add fread_unlocked and fwrite_unlocked.

	* Makerules (lib%.so): Adjust ignore pattern for last makefile change.

	* time/tzfile.c (decode): Optimize by using bswap_32.
	(__tzfile_read): Use _unlocked stream functions.  Correct setting of
	__tzname array values.
	(__tzfile_compute): Correct setting of __tzname array values.
	* time/tzset.c (__tzstring): Clean up a bit.

1998-06-29 19:01  Jim Wilson  <wilson@cygnus.com>

	* posix/regex.c (re_comp): Add cast to char * before gettext calls.

1998-06-30  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/bsd/poll.c (__poll): Allocate fd_set dynamically so
	that fd can be bigger than FD_SETSIZE.

1998-07-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nscd/grpcache.c: Include <unistd.h>.
	* nscd/pwdcache.c: Likewise.

	* nis/nis_modify.c: Include <string.h>.
	* nis/nis_add.c: Likewise.
	* nis/nis_checkpoint.c: Likewise.
	* posix/runptests.c: Likewise.
	* sysdeps/generic/statvfs64.c: Likewise.
	* sysdeps/generic/fstatvfs64.c: Likewise.

1998-07-03 13:16  Ulrich Drepper  <drepper@cygnus.com>

	* localedata/charmaps/ISO-8859-9: Change mapping for 0xea, 0xec, 0xef
	to match data from Unicode.
	Reported by Michael Deutschmann <michael@talamasca.wkpowerlink.com>.

1998-07-03 11:45  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/printf.h: Define printf_function and
	printf_arginfo_function types using __PMT not __P.
	Reported by Marc Lehmann.

1998-07-02 14:07 -0400  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* assert/test-assert.c: New test.
	* assert/test-assert-perr.c: New test.
	* assert/Makefile (tests): Add test-assert and test-assert-perr.

1998-07-02 13:45  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	BSD-style SCM_CREDS support.

	* sysdeps/unix/sysv/linux/socket.h: Define struct cmsgcred and
	SCM_CREDS.
	* sysdeps/unix/sysv/linux/sendmsg.c: New file.  Convert user
	visible SCM_CREDS packet to what the kernel wants.
	* sysdeps/unix/sysv/linux/recvmsg.c: New file.  Convert
	SCM_CREDS packet output by kernel to what users want.

	* sysdeps/unix/sysv/linux/sendmsg.S: Moved to...
	* sysdeps/unix/sysv/linux/__sendmsg.S: here.
	* sysdeps/unix/sysv/linux/recvmsg.S: Moved to...
	* sysdeps/unix/sysv/linux/__recvmsg.S: here.

	* sysdeps/unix/sysv/linux/Makefile [subdir=socket]: Add
	__sendmsg and __recvmsg to sysdep_routines.
	* sysdeps/unix/sysv/linux/Dist: Add __sendmsg.S and __recvmsg.S.

1998-07-02  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nscd/grpcache.c: Fix gid pointer handling and debug messages.
	* nscd/pwdcache.c: Fix uid pointer handling and debug messages.
	* nscd/nscd.c: Check, if pthread_create fails.

1998-07-02  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* stdio-common/test_rdwr.c (main): Use %Zu for size_t in printf
	format strings.
	* stdio-common/bug1.c (main): Likewise.
	* stdio-common/bug5.c (main): Likewise.
	* stdio-common/tstgetln.c (main): Likewise.
	* elf/sprof.c (generate_call_graph): Likewise.
	(load_shobj): Likewise.
	* posix/runptests.c (main): Likewise.
	* string/tst-strlen.c (main): Likewise.

	* sysdeps/libm-ieee754/e_acos.c (__ieee754_acos): Remove unused
	variable q3.
	* sysdeps/libm-ieee754/e_asin.c (__ieee754_asin): Likewise

1998-07-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* wctype/Versions: Add __towctrans.
	Noticed by Alex Buell <alex.buell@tahallah.demon.co.uk>.

1998-07-02  Mark Kettenis  <kettenis@phys.uva.nl>

	* grp/initgroups.c (compat_call): Only call dynamically loaded
	functions if they are really present.

1998-07-02  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/unix/sysv/linux/bits/sched.h: Move __END_DECLS within
	#ifdef that contains __BEGIN_DECLS.

1998-07-02  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libio/iofwrite.c: Fix return value when size == 0.

1998-07-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/Makefile (distribute): Add annexc.c.
	(generated): Add $(objpfx)annexc and $(objpfx)annexc.out.

1998-07-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/pthreadtypes.h here, and do not clobber headers.

	* sysdeps/unix/sysv/linux/Dist: Add bits/pthreadtypes.h.

1998-07-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* timezone/tst-timezone.c: Add tests for tzname variable.

1998-07-03 12:17  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* Makefile [versioning=yes]: Build the mapfiles with a pattern
	rule that lists all of them as targets.
	(sysd-versions): Depend only on Versions.def.  Write a Makefile
	fragment that defines $(vers-libs) based on contents of that file;
	then include it.
	(lib-noranlib): Depend on lib-mapfiles not sysd-versions.
	(lib-mapfiles): New target, depends on sysd-versions and $(vers-libs).
	Predicate all this on avoid-generated unset as well as versioning.

1998-07-03 14:35  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/Versions: New file.

1998-07-02 21:51  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig: Define list of subdirs as all-subdirs and make subdirs
	a copy.
	* Makefile: Add rules to generate map files.
	(distribute): Remove libc.map, add Versions.def and versions.awk.
	* Makerules: Change rules to find map files on common-objpfx.
	* elf/Makefile: Likewise.
	* md5-crypt/Makefile: Likewise.
	* nis/Makefile (libnsl-map): Remove.
	* Versions.def: New file.
	* versions.awk: New file.
	* argp/Versions: New file.
	* assert/Versions: New file.
	* catgets/Versions: New file.
	* csu/Versions: New file.
	* ctype/Versions: New file.
	* db/Versions: New file.
	* debug/Versions: New file.
	* dirent/Versions: New file.
	* elf/Versions: New file.
	* gmon/Versions: New file.
	* grp/Versions: New file.
	* hesiod/Versions: New file.
	* hurd/Versions: New file.
	* iconv/Versions: New file.
	* inet/Versions: New file.
	* intl/Versions: New file.
	* io/Versions: New file.
	* libio/Versions: New file.
	* linuxthreads/Versions: New file.
	* locale/Versions: New file.
	* login/Versions: New file.
	* malloc/Versions: New file.
	* math/Versions: New file.
	* md5-crypt/Versions: New file.
	* misc/Versions: New file.
	* nis/Versions: New file.
	* nss/Versions: New file.
	* posix/Versions: New file.
	* pwd/Versions: New file.
	* resolv/Versions: New file.
	* resource/Versions: New file.
	* rt/Versions: New file.
	* setjmp/Versions: New file.
	* shadow/Versions: New file.
	* signal/Versions: New file.
	* socket/Versions: New file.
	* stdio/Versions: New file.
	* stdio-common/Versions: New file.
	* stdlib/Versions: New file.
	* streams/Versions: New file.
	* string/Versions: New file.
	* sunrpc/Versions: New file.
	* sysdeps/alpha/Versions: New file.
	* sysdeps/alpha/fpu/Versions: New file.
	* sysdeps/i386/Versions: New file.
	* sysdeps/sparc/Versions: New file.
	* sysdeps/unix/sysv/Versions: New file.
	* sysdeps/unix/sysv/linux/Versions: New file.
	* sysdeps/unix/sysv/linux/alpha/Versions: New file.
	* sysdeps/unix/sysv/linux/i386/Versions: New file.
	* sysdeps/unix/sysv/linux/mips/Versions: New file.
	* sysvipc/Versions: New file.
	* termios/Versions: New file.
	* time/Versions: New file.
	* wcsmbs/Versions: New file.
	* wctype/Versions: New file.
	* libc.map: Removed.
	* db/libdb.map: Removed.
	* elf/libdl.map: Removed.
	* hesiod/libnss_hesiod.map: Removed.
	* hurd/libhurduser.map: Removed.
	* hurd/libmachuser.map: Removed.
	* linuxthreads/libpthread.map: Removed.
	* locale/libBrokenLocale.map: Removed.
	* login/libutil.map: Removed.
	* math/libm.map: Removed.
	* md5-crypt/libcrypt.map: Removed.
	* nis/libnsl.map: Removed.
	* nis/libnsl_compat.map: Removed.
	* nis/libnss_nis.map: Removed.
	* nis/libnss_nisplus.map: Removed.
	* nss/libnss_db.map: Removed.
	* nss/libnss_files.map: Removed.
	* resolv/libnss_dns.map: Removed.
	* resolv/libresolv.map: Removed.
	* rt/librt.map: Removed.

	* elf/dl-load.c (fillin_rpath): Fix test for trusted directory.
	Fix typos.

	* elf/rtld.c (process_dl_debug): Recognize 'all'.
	(process_envvars): LD_BIND_NOW must be followed by y, Y, or 1.

	* sysdeps/generic/elf/backtracesyms.c: Allocate string memory of
	correct size.

1998-07-01  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/getsysstats.c (get_proc_path): Fix typo
	in comment.

	* nscd/nscd.c: Include unistd.h.

1998-07-01 09:32  Ulrich Drepper  <drepper@cygnus.com>

	* math/libm-test.c: Adjust delta for indentities1_test because gcc
	became cleverer.

1998-06-29  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* resolv/inet_addr.c (inet_aton): Define variable base only if needed.

1998-06-30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* scripts/test-installation.pl: Include <stdio.h> in test program
	to make it strictly conforming.

1998-06-30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/sysdep.S: Make _errno a weak alias,
	not a strong alias.
	* sysdeps/unix/sysv/linux/i386/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep.S: Likewise.

1998-06-30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/sysdep.S: Make _errno a weak alias,
	not a strong alias.

1998-06-30  Ulrich Drepper  <drepper@cygnus.com>

	* posix/Makefile (headers): Remove bits/pthreadtypes.h.
	* sysdeps/unix/sysv/linux/Makefile [subdir==posix] (headers): Add
	bits/pthreadtypes.h.

1998-06-30 11:47  Ulrich Drepper  <drepper@cygnus.com>

	* include/aio.h: New file.
	* posix/Makefile (distribute): Add bits/pthreadtypes.h.
	(tests): Build and run annexc program.
	* posix/annexc.c: New file.
	* posix/bits/posix1_lim.h: Add several more _POSIX_* limits.
	* rt/aio.h: Remove __need_timespec_t.  We can include the whole time.h.
	* rt/aio_misc.c: Include limits.h.
	* rt/aio_notify.c: Include errno.h.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Include pthreadtypes.h.
	Define size_t.
	* sysdeps/unix/sysv/linux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/errno.h: Define ENOTSUP though the
	kernel doesn't do this.
	* sysdeps/unix/sysv/linux/bits/fcntl.h: Define O_LARGEFILE only if
	__USE_LARGEFILE64 is defined.
	* sysdeps/unix/sysv/linux/bits/pthreadtypes.h: New file.  Empty.
	* sysdeps/unix/sysv/linux/bits/sched.h: Define __sched_param struct
	if requested.
	* sysdeps/unix/sysv/linux/bits/siginifo.h: Protect non-standard names.

	* stdlib/isomac.c: Avoid include_next warning.

1998-06-29 12:27  Ulrich Drepper  <drepper@cygnus.com>

	* argp/argp.h: Use __PMT instead of __P for function pointer.
	* iconv/gconv.h: Likewise.
	* io/fts.h: Likewise.
	* io/ftw.h: Likewise.
	* libio/libio.h: Likewise.
	* malloc/mcheck.h: Likewise.
	* misc/search.h: Likewise.
	* posix/glob.h: Likewise.
	* resolv/resolv.h: Likewise.
	* signal/signal.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/siginfo.h: Likewise.

1998-06-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig (CPPFLAGS): Use $($(subdir)-CPPFLAGS) only once.

1998-06-27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/wordexp.c (parse_param): Fix memory leak.

1998-06-27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libc.map: Export _IO_ftrylockfile.

1998-06-27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/aio_sigqueue.c: Use get[pu]id instead of
	__get[pu]id.

1998-06-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-misc.c (_dl_debug_message): Don't cache the pid.

	* elf/dl-runtime.c (_dl_object_relocation_scope): Avoid adding the
	same search list twice.

1998-06-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* login/programs/utmpd.c (handle_requests): Set and use maximal fd
	used to optimize loop/select.

1998-06-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/init-first.c: Don't define __libc_pid.
	* sysdeps/unix/sysv/linux/init-first.c: Likewise.
	* sysdeps/mach/hurd/i386/init-first.c: Likewise.
	* sysdeps/mach/hurd/mips/init-first.c: Likewise.
	* sysdeps/arm/init-first.c: Likewise.
	* posix/getopt_init.c: Don't use __libc_pid.
	* sysdeps/unix/sysv/linux/aio_sigqueue.c: Likewise.
	* sysdeps/unix/sysv/linux/sigqueue.c: Likewise.
	* libc.map: Remove __libc_uid and __libc_pid.

1998-06-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sunrpc/rtime.c (rtime): Use poll instead of select.

1998-06-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sunrpc/clnt_tcp.c (readtcp): Use poll instead of select.
	* sunrpc/pmap_rmt.c (clnt_broadcast): Likewise.
	* sunrpc/clnt_udp.c (clntudp_call): Likewise.
	Patches from FreeBSD current.

1998-06-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nscd/connections.c (handle_new_request): Handle POLLHUP
	correctly.
	(close_sockets): Correct parameter to dbg_log.

1998-06-27  David S. Miller  <davem@pierdol.cobaltmicro.com>

	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_matches_host):
	Cleanup weak_extern usage for _dl_hwcap and _dl_hwcap_mask.
	(elf_machine_fixup_plt): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getpagesize.c: When
	_dl_pagesize not set, use system call to always get correct answer.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list
	(__syscall_getpagesize): Add

1998-06-27  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/res_send.c (res_send): Fix typo.

1998-06-25  Andi Kleen <ak@muc.de>

	* inet/rcmd.c (rcmd): Change to use __poll instead of select.
	* resolv/res_send.c (res_send): Likewise.

1998-06-27 12:58  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/bsd/poll.c: Define __poll, make poll weak alias.
	* sysdeps/unix/sysv/linux/poll.c: Likewise.

1998-06-27  7:07  Richard Henderson  <rth@cygnus.com>

	* math/atest-exp.c (exp_mpn, main): Cast to mp_limb_t appropriately.
	* math/atest-exp2.c (exp_mpn, main): Likewise.
	* math/atest-sincos.c (main): Likewise.

	* resolv/inet_addr.c (inet_aton): Check for 32-bit overflow.  Move
	base handling away from strtoul.  Always reset errno.

	* sysdeps/alpha/Makefile (elf): Kill -mno-fp-regs.

	* sysdeps/alpha/dl-machine.h (elf_machine_runtime_setup): Only set
	_dl_profile_map if _dl_name_match_p.
	(RTLD_START): Fix .prologue.  Set __libc_stack_end.
	* sysdeps/alpha/elf/start.S: Pass sp as arg 7.  Kill __data_start.

	* sysdeps/alpha/fpu/fraiseexcpt.c (feraiseexcept): Mark tmp
	as early-clobber.

	* sysdeps/libm-ieee754/e_exp10.c: Include "math_private.h".
	* sysdeps/libm-ieee754/e_exp10f.c: Likewise.
	* sysdeps/libm-ieee754/e_exp10l.c: Likewise.

1998-06-26  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/bits/mathinline.h (__finite): Use alias-safe code.

1998-06-26  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nis_call.c: Don't copy server structure.
	* nis/nis_intern.h: Remove unused entries.
	* nis/nis_table.c: Rewrite __create_ib_request.

1998-06-26 14:37  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Check for -fexceptions.
	* config.make.in: Define exceptions, not no-exceptions.
	* misc/sys/cdefs.h: Define __PMT.  When using modern g++ define
	__P to use throw().
	* misc/Makefile: Define CFLAGS-tsearch.c and CFLAGS-lsearch.c to
	$(exceptions).
	* stdlib/Makefile: Likewise for bsearch.c, msort.c, and qsort.c.
	* misc/search.h: Use __PMT in tsearch, tfind, tdelete, twalk, tdestroy,
	lfind, and lsearch prototpypes.
	* stdlib/stdlib.h: Likewise for bsearch and qsort.

1998-06-26  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/bits/mathinline.h (__finite): Use C code, not asm.

1998-06-25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (remove-old-headers): Make phony.

	* configure.in: Substitute @old_glibc_headers@.

1998-06-26  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Remove __libc_uid.

1998-06-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/terminal.texi (Allocation, Pseudo-Terminal Pairs): Fix
	typos.

1998-06-26  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add Alpha-specific io function from protected namespace.

1998-06-25 19:26  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (CPPFLAGS): Use $($(subdir)-CPPFLAGS) if defined first.
	* locale/Makefile: Define locale-CPPFLAGS instead of redefining
	CPPFLAGS.

	* libc.map: Export __sigaction.

1998-06-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/bits/sched.h (CLONE_PTRACE): Add it
	(from Linux 2.1.107).

1998-06-24  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_files/files-XXX.c (_nss_files_get,ENTNAME_r): Initialize
	position when file was opened here.
	Reported by Howard Chu <hyc@platinum.com>.

	* sysdeps/generic/glob.c: Also protect FNM_* macros from being
	undefined in a second inclusion.

1998-06-20  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/i386/Makefile: New file.
	* sysdeps/mach/hurd/i386/init-first.c [!PIC] (init1): Call
	__libc_init_secure.
	(_hurd_stack_setup): Renamed
	from __libc_init_first.
	(__libc_init_first): New function.
	* sysdeps/mach/hurd/i386/static-start.S: New file.

1998-05-30  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/i386/init-first.c

1998-06-22  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* grp/initgroups.c: Use _CALL_DL_FCT.

1998-06-23  Mark Kettenis  <kettenis@phys.uva.nl>

	* elf/rtld.c (process_dl_debug): Add missing continue.

1998-06-23  Mark Kettenis  <kettenis@phys.uva.nl>

	* elf/dl-load.c (_dl_map_object_from_fd): Add missing cast.

1998-06-23  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/terminal.texi (Pseudo-Terminals): Correct typos.

1998-06-23  Ulrich Drepper  <drepper@cygnus.com>

	* config.make.in: Remove LDAP support.
	* nss/Makefile: Likewise.

1998-06-22 17:02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/enbl-secure.c: Don't use __libc_uid.
	* sysdeps/unix/sysv/linux/aio_sigqueue.c: Likewise.
	* sysdeps/unix/sysv/linux/sigqueue.c: Likewise.
	* sysdeps/unix/sysv/linux/init-first.c: Don't initialize __libc_uid.

1998-06-02  Gordon Matzigkeit  <gord@profitpress.com>

	* mach/Makefile: Change `mv' invocations to `mv -f'.
	* mach/Machrules: Likewise.

1998-06-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* config.make.in (old-glibc-headers): Add it.

	* configure.in: Add test for glibc 2.0.x headers.

	* Makefile (headers2_0): New variable - contains so far only
	Linux/Intel glibc 2.0.x headers.
	(remove-old-headers): New rule to remove headers from glibc 2.0.x.
	(install): Depend on remove-old-headers.

1998-06-19  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/generic/ftruncate.c: Define function as __ftruncate and
	make ftruncate a weak alias.
	* sysdeps/mach/hurd/ftruncate.c: Really define function as
	__ftruncate.
	* sysdeps/mach/hurd/truncate.c: Include <unistd.h>.
	(truncate): Fix function defenition to match prototype.

1998-06-20  Mark Kettenis  <kettenis@phys.uva.nl>

	* manual/terminal.texi: Document ttyname_r, getpt, grantpt,
	unlockpt, ptsname, ptsname_r, openpty and forkpty.

1998-06-22  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/glob.c: Make it possible to include glob.h
	before loading glob.c.
	Reported by Felix von Leitner <leitner@math.fu-berlin.de>.

1998-06-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nscd/connections.c: Use poll() instead of select().

1998-06-22 14:08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/Dist: Fix typo.

1998-06-20  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nis_add.c: Avoid unnecessary strlen () calls.
	* nis/nis_addmember.c: Likewise.
	* nis/nis_call.c: Likewise.
	* nis/nis_creategroup.c: Likewise.
	* nis/nis_destroygroup.c: Likewise.
	* nis/nis_findserv.c: Likewise.
	* nis/nis_ismember.c: Likewise.
	* nis/nis_print.c: Likewise.
	* nis/nis_print_group_entry.c: Likewise.
	* nis/nis_removemember.c: Likewise.
	* nis/nis_verifygroup.c: Likewise.
	* nis/ypclnt.c: Likewise.

	* nis/nis_file.c: Close file handles.

	* nis/nis_callback.c: Fix typo.

1998-06-10  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/Makefile: Add nis-initgroups and compat-initgroups.
	* nis/libnss_compat.map: Add _nss_compat_initgroups.
	* nis/libnss_nis.map: Add _nss_nis_initgroups.
	* nis/nss_compat/compat-initgroups.c: New, faster then getgrent().
	* nis/nss_nis/nis-initgroups.c: Likewise.
	* libc-work/nss/nsswitch.c: Rename nss_lookup_function to
	__nss_lookup_function and make it public.
	* grp/initgroups.c: Rewrite, to use initgroups function from NSS
	module if exists, else use old method.

1998-06-19  Ulrich Drepper  <drepper@cygnus.com>

	* nss/getXXbyYY_r.c (lookup_function): Correct return in type
	definition.
	* nss/getXXent_r.c (set_function, end_function, get_function):
	Likewise.  Reported by Thorsten Kukuk.

	* sysdeps/unix/sysv/linux/sigstack.c: Mark sigstack as dangerous.

1998-06-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sparc/Dist: Follow change from
	1998-06-16 and distribute kernel_termios.h.

	* nis/Makefile (distribute): Add nis_xdr.h.

1998-06-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sigstack.c (sigstack): Disable for
	kernels that don't have sigaltstack.

1998-06-19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/bits/sem.h: Don't define union semun.

	* sysdeps/unix/sysv/linux/bits/sem.h: Fix typo.

	* sysdeps/unix/sysv/linux/bits/ipc.h: Remove ipc_kludge definition
	here.
	* sysdeps/unix/sysv/linux/msgrcv.c (msgrcv): Add ipc_kludge
	definition here.

1998-06-18 21:45  Ulrich Drepper  <drepper@cygnus.com>

	* signal/signal.h: Add prototype for __sigaltstack.
	* sysdeps/unix/sysv/linux/syscalls.list: Add __sigaltstack name.
	Remove sigstack entry.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add sigstack here.
	* sysdeps/unix/sysv/linux/sigstack.c: New file.

	* sysdeps/i386/backtrace.c: Add casts.

1998-06-18 19:49  Ulrich Drepper  <drepper@cygnus.com>

	* intl/dcgettext.c: use complete type name.
	* intl/hash-string.h: Likewise.

	* intl/localealias.c: Undo patch from 1998-04-29.
	* intl/l10nflist.c: Likewise.
	* intl/loadinfo.h: Likewise.

1998-06-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/elf/start.S (_start): Ensure correct alignment.

1998-06-18 16:40  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add _dl_profile_map, _dl_profile_output, _dl_start_profile,
	_dl_mcount, _dl_mcount_wrapper.
	* elf/Makefile (routines): Add dl-profstub.
	* elf/dl-profstub.c: New file.
	* elf/dl-support.c: Don't define _dl_profile_map.
	* elf/rtld.c: Likewise.
	* elf/dlfcn.h: Define DL_CALL_FCT macro.
	* elf/ldsodefs.h: Declare _dl_profile_output, _dl_mcount_wrapper.
	Define _CALL_DL_FCT.
	* iconv/gconv.c: Use _CALL_DL_FCT to call function from dynamically
	loaded object.
	* iconv/gconv_db.c: Likewise.
	* iconv/skeleton.c: Likewise.
	* nss/getXXbyYY_r.c: Likewise.
	* nss/getXXent_r.c: Likewise.
	* nss/nsswitch.c: Likewise.

1998-06-18 12:29  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-i387/e_scalb.S: Fix bug in FPU stack handling.
	* sysdeps/libm-i387/e_scalbf.S: Likewise.
	* sysdeps/libm-i387/e_scalbl.S: Likewise.

1998-06-18  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/tst-strtod.c (long_dbl): Provide receipe to regenerate
	longestdbl.

1998-06-18 10:26  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile (modules): Add MACINTOSH.
	(MACINTOSH-routines): New variable.
	(distribute): Add macintosh.c.
	(awk-generated-headers): Add macintosh.h.
	Add rule for macintosh.h generation.
	* iconvdata/gconv-modules: Add definitions for MACINTOSH.
	* iconvdata/macintosh.c: New file.

1998-06-17  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/tst-strtod.c (long_dbl): Add test for loooong numbers.

	* stdlib/strtod.c (str_to_mpn): Fix extending of n array which
	only should happen for cy != 0.

	* sysdeps/unix/sysv/linux/alpha/glob.c: Include sys/types.h before
	glob.h.

1998-06-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/backtrace.c (INNER_THAN): New definition, use it
	to compare stack addresses.

1998-06-17  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/glob.c: Include glob.h before
	defining prototypes.

1998-06-16  David S. Miller <davem@dm.cobaltmicro.com>

	* sysdeps/sparc/sparc32/dl-machine.h
	(elf_machine_fixup_plt): During rtld bootstrap, always perform
	flushes as the kernel will emulate it when the underlying cpu does
	not implement flush.

	* sysdeps/unix/sysv/linux/sparc/sys/kernel_termios.h: Move...
	* sysdeps/unix/sysv/linux/sparc/kernel_termios.h: ...to here.

	* sysdeps/unix/sysv/linux/sparc/sparc32/__sigtrampoline.S: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc32/Makefile: No longer build
	trampoline code.

	* sysdeps/unix/sysv/linux/sparc/sparc32/clone.S
	(__clone): Branch to label .Lerror not __clone_syscall_error.
	(.Lerror): Fixup EINVAL setting.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getgroups.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setgroups.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list
	(__syscall_getgroups, __syscall_setgroups): Add.

	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c
	(__sigaction): Member name is k_sa_handler.  Use memcpy to copy
	around sa_mask data.

1998-06-16  Ulrich Drepper  <drepper@cygnus.com>

	* math/math.h: Include bits/nan.h when compiling for ISO C 9x.

	* string/Makefile: Make sure test-ffs does not use builtins.

1998-06-16  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/svc.c: Check for NULL pointer.

	* nis/libnsl.map: Add public NIS+ xdr functions.

	* nis/rpcsvc/nis_callback.h: New file.
	* nis/rpcsvc/nis.h: Move xdr_* functions from here ...
	* nis/nis_xdr.h: ... here.

	* nis/nis_add.c: Use internal _xdr_* functions, check for NULL
	pointers, use NIS+ defines where possible.
	* nis/nis_cache.c: Likewise.
	* nis/nis_cache2_xdr.c: Likewise.
	* nis/nis_call.c: Likewise.
	* nis/nis_checkpoint.c: Likewise.
	* nis/nis_clone_dir.c: Likewise.
	* nis/nis_clone_obj.c: Likewise.
	* nis/nis_clone_res.c: Likewise.
	* nis/nis_creategroup.c: Likewise.
	* nis/nis_file.c: Likewise.
	* nis/nis_free.c: Likewise.
	* nis/nis_getservlist.c: Likewise.
	* nis/nis_local_names.c: likewise.
	* nis/nis_lookup.c: Likewise.
	* nis/nis_mkdir.c: Likewise.
	* nis/nis_modify.c: Likewise.
	* nis/nis_ping.c: Likewise.
	* nis/nis_print.c: Likewise.
	* nis/nis_remove.c: Likewise.
	* nis/nis_removemember.c: Likewise.
	* nis/nis_rmdir.c: Likewise.
	* nis/nis_server.c: Likewise.
	* nis/nis_table.c: Likewise.
	* nis/nis_util.c: Likewise.
	* nis/nis_verifygroup.c: Likewise.
	* nis/nis_xdr.c: Likewise.
	* nis/nis_callback.c: Likewise, and move xdr functions from here ...
	* nis/nis_xdr.c: ... to here.

1998-06-15 18:07  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/ksc5601.h: Clean up a bit.

1998-06-15 14:35  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/svc_tcp.c (readtcp): Also listen to all the other connections
	and process incoming data.
	* sunrpc/xdr_rec.c (set_input_fragment): Only recognize zero length
	fragments as invalid.
	Patches by Thorsten Kukuk <kukuk@weber.uni-paderborn.de>.

1998-06-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	Removal of duplicates like "the the".
	* manual/time.texi (TZ Variable): Likewise.
	* manual/users.texi (Manipulating the Database): Likewise.
	* manual/sysinfo.texi (Filesystem handling): Likewise.
	* manual/signal.texi (Signaling Yourself): Likewise.
	* manual/message.texi (Message Translation): Likewise.
	(Common Usage): Likewise.
	* manual/llio.texi: Likewise.
	* manual/arith.texi (Old-style number conversion): Likewise.
	* manual/argp.texi (Argp): Likewise.
	(Argp Parsers): Likewise.
	(Argp Help Filtering): Likewise.

	* hesiod/README.hesiod: Correct typo.

	* manual/llio.texi: Correct typos.
	* manual/sysinfo.texi: Likewise.

1998-06-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* rt/aio.h: Rename __op to __operation for g++.

1998-06-13 20:17 -0400  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* iconvdata/gen-8bit-gap.sh: Use awk not perl.  Clean up sed
	script.
	* iconvdata/gen-8bit-gap-1.sh: Likewise.
	* iconvdata/gen-8bit.sh: Clean up sed script.

	* iconvdata/Makefile: Remove all PERL conditionals; build all
	the modules all the time.  Export AWK.
	(gen-8bit-gap): Delete setting of PERL.
	(gen-8bit-gap-1): Likewise.
	(perl-generated-headers): Renamed awk-generated-headers.

	* iconvdata/gap.pl: Removed.
	* iconvdata/gaptab.pl: Removed.
	* iconvdata/gap.awk: New file.
	* iconvdata/gaptab.awk: New file.

1998-06-15  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/Dist: Add errno-loc.c.

	* sysdeps/unix/sysv/linux/alpha/glob.c: Add prototypes for the
	__new_* functions.

1998-06-14 14:21 -0400  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* stdio-common/bug12.c: New test for fread()/fseek().
	* stdio-common/Makefile (tests): Add bug12.

1998-06-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/elf/backtracesyms.c: Make array elements
	constant.
	* sysdeps/generic/backtracesyms.c: Likewise.  Fix type of RESULT.
	* debug/execinfo.h: Update declaration.

1998-06-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/elf/backtracesyms.c: Make array elements constant.
	* sysdeps/generic/backtracesyms.c: Likewise.  Fix type of RESULT.
	* debug/execinfo.h: Update declaration.

1998-06-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/llio.texi: Fix spelling.
	* manual/sysinfo.texi: Fix spelling.

1998-06-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* misc/hsearch.c (__hdestroy): Renamed from hdestroy, create weak
	alias for old name.  Put this on __libc_subfreeres.
	* misc/search.h: Declare it.

1998-06-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* string/bits/string2.h (strcmp): Add missing parens around macro
	parameters.

1998-06-12 23:34  Ulrich Drepper  <drepper@cygnus.com>

	* manual/arith.texi: Fix problem with @math and texinfo.tex.

	* manual/filesys.texi: Document LFS functions.
	* manual/llio.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/time.texi: Likewise.

	* manual/llio.texi: Document AIO functions.

	* resource/sys/resource.h: Mark second argument of setrlimit as const.
	* sysdeps/generic/setrlimit.c: Likewise.
	* sysdeps/generic/setrlimit64.c: Likewise.
	* sysdeps/mach/hurd/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/setrlimit.c: Likewise.

1998-06-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/getenv.c: Fix last change.

1998-06-10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/backtrace.c: Provide generic implementation.

1998-06-10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* configure.in: Give visual feedback of the default directories we
	added.

1998-06-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* io/fts.c (fts_build): Define oflag only if needed.

1998-06-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/libm-ieee754/w_exp10.c: Add missing close comment.

1998-06-11  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Don't export argp's fmtstream handling functions.

	* manual/sysinfo.texi: Document fstab and mtab handling functions.
	* manual/llio.texi: Document more LFS functions and start documenting
	the AIO functions.

1998-06-03 03:09  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/unix/sysv/linux/pread.c: Detect missing syscall, like poll().
	* sysdeps/unix/sysv/linux/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite64.c: Likewise.

1998-06-03 03:09  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/powerpc/Makefile: Use -G0 on the startup file; this
	makes it easier to undump emacs.
	* sysdeps/powerpc/bits/endian.h: Use more informative error message
	for when the endianness can't be determined.

1998-06-04 13:19  Geoff Keating  <geoffk@ozemail.com.au>

	* nss/Makefile: Add files publickey database support.
	* nss/libnss_files.map: Export the required functions.
	* nss/nss_files/files-key.c: Implement it.
	* sunrpc/rpc/auth_des.h: Correct typos in comments.

1998-06-10  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_builtin.h: Add aliases for CORBA.
	* iconvdata/gconv-modules: Likewise.

1998-06-10  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (main): Call exp10_test.
	(exp10_test): New function which tests exp10.

1998-06-10  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add sigaltstack and
	sigstack.

	* sysdeps/unix/sysv/linux/bits/sigstack.h: Add definitions of
	SS_ONSTACK, SS_DISABLE, MINSIGSTKSZ and SIGSTKSZ.
	* sysdeps/unix/sysv/linux/alpha/bits/sigstack.h: New file.

1998-06-08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/i386/dl-machine.h (_dl_start_user): Store stack address
	in the variable, not its GOT slot.

1998-06-10 10:32  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/fpu/bits/mathinline.h: Define __ieee754_exp10 as
	inline.
	* sysdeps/m68k/fpu/e_exp10.c: New file.
	* sysdeps/m68k/fpu/e_exp10f.c: New file.
	* sysdeps/m68k/fpu/e_exp10l.c: New file.

	* sysdeps/m68k/dl-machine.h (elf_machine_runtime_setup): Set
	_dl_profile_map only if the name matches.
	(_dl_start_user): Remember stack address.
	* sysdeps/m68k/elf/start.S: Pass new argument to
	__libc_start_user.

	* sysdeps/unix/sysv/linux/m68k/sysdep.h (SYSCALL_ERROR_LABEL): New
	definition.
	(PSEUDO, SYSCALL_ERROR_HANDLER): Use it instead of syscall_error.
	* sysdeps/unix/sysv/linux/m68k/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/m68k/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/m68k/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/m68k/syscall.S: Likewise.

1998-06-09 18:16  Ulrich Drepper  <drepper@cygnus.com>

	* math/Makefile (libm-calls): Add w_exp10 and e_exp10.
	* math/libm.map: Add exp10{,f,l} and pow10{,f,l}.
	* math/math_private.h: Add prototypes for __ieee754_exp10{,f,l}.
	* math/bits/mathcalls.h: Add definitions for exp10 and pow10
	prototypes.
	* sysdeps/libm-i387/e_exp10.S: New file.
	* sysdeps/libm-i387/e_exp10f.S: New file.
	* sysdeps/libm-i387/e_exp10l.S: New file.
	* sysdeps/libm-ieee754/e_exp10.c: New file.
	* sysdeps/libm-ieee754/e_exp10f.c: New file.
	* sysdeps/libm-ieee754/e_exp10l.c: New file.
	* sysdeps/libm-ieee754/w_exp10.c: New file.
	* sysdeps/libm-ieee754/w_exp10f.c: New file.
	* sysdeps/libm-ieee754/w_exp10l.c: New file.
	* sysdeps/libm-ieee754/k_standard.c: Add exception code for exp10.

1998-05-25 22:18  H.J. Lu  <hjl@gnu.org>

	* sysdeps/unix/sysv/linux/i386/Makefile (sysdep_headers): Add
	sys/elf.h and sys/reg.h.
	* sysdeps/unix/sysv/linux/i386/sys/elf.h: New file.
	* sysdeps/unix/sysv/linux/i386/sys/reg.h: New file.
	* sysdeps/unix/sysv/linux/i386/sys/procfs.h: New file.
	* sysdeps/unix/sysv/linux/i386/sys/user.h: New file.

	* sysdeps/unix/sysv/linux/sys/ptrace.h (PTRACE_GETREGS,
	PTRACE_SETREGS, PTRACE_GETFPREGS, PTRACE_SETFPREGS): Added.

1998-06-09  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/ip.h (struct ip_options): Define
	__data member only for gcc.  Reported by ak@muc.de.

	* misc/mntent.h: Undo last patch.
	* sysdeps/unix/sysv/linux/fstatvfs.c (fstatvfs): Undo last patch.
	* misc/tst/mntent.c: Adjust code for this change.

	* io/fts.c: Updated from a slightly more recent BSD version.
	* io/fts.h: Likewise.

	* libc.map: Add __libc_stack_end.

	* db2/Makefile (routines): Add lock_region.
	* db2/config.h: Update from db-2.4.14.
	* db2/db.h: Likewise.
	* db2/db_185.h: Likewise.
	* db2/db_int.h: Likewise.
	* db2/btree/bt_close.c: Likewise.
	* db2/btree/bt_compare.c: Likewise.
	* db2/btree/bt_conv.c: Likewise.
	* db2/btree/bt_cursor.c: Likewise.
	* db2/btree/bt_delete.c: Likewise.
	* db2/btree/bt_open.c: Likewise.
	* db2/btree/bt_page.c: Likewise.
	* db2/btree/bt_put.c: Likewise.
	* db2/btree/bt_rec.c: Likewise.
	* db2/btree/bt_recno.c: Likewise.
	* db2/btree/bt_rsearch.c: Likewise.
	* db2/btree/bt_search.c: Likewise.
	* db2/btree/bt_split.c: Likewise.
	* db2/btree/bt_stat.c: Likewise.
	* db2/btree/btree.src: Likewise.
	* db2/btree/btree_auto.c: Likewise.
	* db2/clib/getlong.c: Likewise.
	* db2/common/db_appinit.c: Likewise.
	* db2/common/db_apprec.c: Likewise.
	* db2/common/db_byteorder.c: Likewise.
	* db2/common/db_err.c: Likewise.
	* db2/common/db_log2.c: Likewise.
	* db2/common/db_region.c: Likewise.
	* db2/common/db_salloc.c: Likewise.
	* db2/common/db_shash.c: Likewise.
	* db2/db/db.c: Likewise.
	* db2/db/db.src: Likewise.
	* db2/db/db_auto.c: Likewise.
	* db2/db/db_conv.c: Likewise.
	* db2/db/db_dispatch.c: Likewise.
	* db2/db/db_dup.c: Likewise.
	* db2/db/db_overflow.c: Likewise.
	* db2/db/db_pr.c: Likewise.
	* db2/db/db_rec.c: Likewise.
	* db2/db/db_ret.c: Likewise.
	* db2/db/db_thread.c: Likewise.
	* db2/db185/db185.c: Likewise.
	* db2/db185/db185_int.h: Likewise.
	* db2/dbm/dbm.c: Likewise.
	* db2/hash/hash.c: Likewise.
	* db2/hash/hash.src: Likewise.
	* db2/hash/hash_auto.c: Likewise.
	* db2/hash/hash_conv.c: Likewise.
	* db2/hash/hash_debug.c: Likewise.
	* db2/hash/hash_dup.c: Likewise.
	* db2/hash/hash_func.c: Likewise.
	* db2/hash/hash_page.c: Likewise.
	* db2/hash/hash_rec.c: Likewise.
	* db2/hash/hash_stat.c: Likewise.
	* db2/include/btree.h: Likewise.
	* db2/include/btree_ext.h: Likewise.
	* db2/include/clib_ext.h: Likewise.
	* db2/include/common_ext.h: Likewise.
	* db2/include/cxx_int.h: Likewise.
	* db2/include/db.h.src: Likewise.
	* db2/include/db_185.h.src: Likewise.
	* db2/include/db_am.h: Likewise.
	* db2/include/db_auto.h: Likewise.
	* db2/include/db_cxx.h: Likewise.
	* db2/include/db_dispatch.h: Likewise.
	* db2/include/db_ext.h: Likewise.
	* db2/include/db_int.h.src: Likewise.
	* db2/include/db_page.h: Likewise.
	* db2/include/db_shash.h: Likewise.
	* db2/include/db_swap.h: Likewise.
	* db2/include/hash.h: Likewise.
	* db2/include/hash_ext.h: Likewise.
	* db2/include/lock.h: Likewise.
	* db2/include/lock_ext.h: Likewise.
	* db2/include/log.h: Likewise.
	* db2/include/log_ext.h: Likewise.
	* db2/include/mp.h: Likewise.
	* db2/include/mp_ext.h: Likewise.
	* db2/include/mutex_ext.h: Likewise.
	* db2/include/os_ext.h: Likewise.
	* db2/include/os_func.h: Likewise.
	* db2/include/queue.h: Likewise.
	* db2/include/shqueue.h: Likewise.
	* db2/include/txn.h: Likewise.
	* db2/lock/lock.c: Likewise.
	* db2/lock/lock_conflict.c: Likewise.
	* db2/lock/lock_deadlock.c: Likewise.
	* db2/lock/lock_region.c: Likewise.
	* db2/lock/lock_util.c: Likewise.
	* db2/log/log.c: Likewise.
	* db2/log/log.src: Likewise.
	* db2/log/log_archive.c: Likewise.
	* db2/log/log_auto.c: Likewise.
	* db2/log/log_compare.c: Likewise.
	* db2/log/log_findckp.c: Likewise.
	* db2/log/log_get.c: Likewise.
	* db2/log/log_put.c: Likewise.
	* db2/log/log_rec.c: Likewise.
	* db2/log/log_register.c: Likewise.
	* db2/mp/mp_bh.c: Likewise.
	* db2/mp/mp_fget.c: Likewise.
	* db2/mp/mp_fopen.c: Likewise.
	* db2/mp/mp_fput.c: Likewise.
	* db2/mp/mp_fset.c: Likewise.
	* db2/mp/mp_open.c: Likewise.
	* db2/mp/mp_pr.c: Likewise.
	* db2/mp/mp_region.c: Likewise.
	* db2/mp/mp_sync.c: Likewise.
	* db2/mutex/68020.gcc: Likewise.
	* db2/mutex/mutex.c: Likewise.
	* db2/mutex/parisc.gcc: Likewise.
	* db2/mutex/parisc.hp: Likewise.
	* db2/mutex/sco.cc: Likewise.
	* db2/os/os_abs.c: Likewise.
	* db2/os/os_alloc.c: Likewise.
	* db2/os/os_config.c: Likewise.
	* db2/os/os_dir.c: Likewise.
	* db2/os/os_fid.c: Likewise.
	* db2/os/os_fsync.c: Likewise.
	* db2/os/os_map.c: Likewise.
	* db2/os/os_oflags.c: Likewise.
	* db2/os/os_open.c: Likewise.
	* db2/os/os_rpath.c: Likewise.
	* db2/os/os_rw.c: Likewise.
	* db2/os/os_seek.c: Likewise.
	* db2/os/os_sleep.c: Likewise.
	* db2/os/os_spin.c: Likewise.
	* db2/os/os_stat.c: Likewise.
	* db2/os/os_unlink.c: Likewise.
	* db2/progs/db_archive/db_archive.c: Likewise.
	* db2/progs/db_checkpoint/db_checkpoint.c: Likewise.
	* db2/progs/db_deadlock/db_deadlock.c: Likewise.
	* db2/progs/db_dump/db_dump.c: Likewise.
	* db2/progs/db_dump185/db_dump185.c: Likewise.
	* db2/progs/db_load/db_load.c: Likewise.
	* db2/progs/db_printlog/db_printlog.c: Likewise.
	* db2/progs/db_recover/db_recover.c: Likewise.
	* db2/progs/db_stat/db_stat.c: Likewise.
	* db2/txn/txn.c: Likewise.
	* db2/txn/txn.src: Likewise.
	* db2/txn/txn_auto.c: Likewise.
	* db2/txn/txn_rec.c: Likewise.

	* elf/rtld.c: Move definition of __libc_stack_end to ...
	* sysdeps/generic/dl-sysdep.h: ...here.

	* sysdeps/unix/sysv/linux/fstatvfs.c: Handle nodiratime option.
	* sysdeps/unix/sysv/linux/bits/statvfs.h: Define ST_NODIRATIME.
	* sysdeps/unix/sysv/linux/sys/mount.h: Define MS_NODIRATIME.

	* sysdeps/generic/libc-start.c: Always set __libc_stack_end.
	* sysdeps/i386/backtrace.c: Test whether frame pointer is legal
	before following it.

1998-06-08 21:44  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/fstatvfs.c: Handle constant option string
	from mntent correctly.

1998-06-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sunrpc/Makefile (generated): Correct typo.

1998-06-04  Philip Blundell  <philb@gnu.org>

	* elf/elf.h (EM_ARM, et al.): New definitions.
	* sysdeps/arm/dl-machine.h: Update for new draft ARM ELF ABI.

1998-06-08 21:33  Ulrich Drepper  <drepper@cygnus.com>

	* localedata/SUPPORTED: Add sk_SK.
	* localedata/locales/sk_SK: New file.

1998-06-08 18:57  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (subdirs): Add debug.
	* configure.in: Use sysdeps/generic/elf subdir if ELF platform.
	* libc.map: Add __backtrace, __backtrace_symbols, backtrace and
	backtrace_symbols.
	* sysdeps/generic/backtrace.c: New file.
	* sysdeps/generic/backtracesyms.c: New file.
	* sysdeps/generic/elf/backtracesyms.c: New file.
	* sysdeps/i386/backtrace.c: New file.
	* debug/Makefile: New file.
	* debug/backtrace-tst.c: New file.
	* debug/execinfo.h: New file.

1998-06-08 13:34  Ulrich Drepper  <drepper@cygnus.com>

	* elf/sprof.c: Implement call graph profiling.

	* sysdeps/generic/getenv.c: Optimize to use strncmp less often.

1998-06-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* pwd/fgetpwent_r.c (__fgetpwent_r): Correct buffer overflow fix.
	* grp/fgetgrent_r.c (__fgetgrent_r): Likewise.
	* shadow/fgetspent_r.c (__fgetspent_r): Likewise.
	Noticed by Jake Garver <garver@valkyrie.net>.

1998-06-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libio/genops.c (__underflow): Read character from read pointer
	as unsigned.
	(__uflow): Likewise.

1998-06-07 13:32  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add _dl_profile.
	* elf/dl-reloc.c (_dl_relocate_object): Take extra argument, pass
	this to ELF_DYNAMIC_RELOCATE.
	Always allocate array for relocation result if LD_PROFILE is defined.
	* elf/ldsodefs.h: Adjust prototypes.
	* elf/dl-open.c (_dl_open): Call relocation function with extra
	argument.
	* elf/rtld.c: Likewise.
	* elf/dl-profile.c (_dl_mcount): Don't mark as internal function.
	Correct loop condition.
	* elf/dynamic-link.h: Don't examine _dl_profile variable, pass
	consider_profile to runtime setup function.
	* sysdeps/i386/dl-machine.h (elf_machine_runtime_setup): Use
	_dl_runtime_profile for all shared objects if LD_PROFILE is defined.

	* elf/dl-support.c: Define __libc_stack_end.
	* elf/rtld.c: Likewise.
	* sysdeps/generic/libc-start.c: Store last stack address in
	__libc_stack_end.
	* sysdeps/i386/dl-machine.h (_dl_start_user): Store stack address.
	* sysdeps/i386/elf/start.s: Call __libc_start_main with extra argument.

	* elf/elf.h: Include <features.h>, not <sys/cdefs.h>.
	Include <stdint.h>, not <inttypes.h>.

	* elf/sprof.c: Implement flat profiling.

	* libio/fgetc.c: Call _IO_cleanup_region_end with 0 and call
	_IO_funlockfile explicitly.
	* libio/fileops.c: Likewise.
	* libio/fputc.c: Likewise.
	* libio/freopen.c: Likewise.
	* libio/freopen64.c: Likewise.
	* libio/fseek.c: Likewise.
	* libio/fseeko.c: Likewise.
	* libio/fseeko64.c: Likewise.
	* libio/ftello.c: Likewise.
	* libio/ftello64.c: Likewise.
	* libio/getc.c: Likewise.
	* libio/getchar.c: Likewise.
	* libio/iofclose.c: Likewise.
	* libio/iofflush.c: Likewise.
	* libio/iofgetpos.c: Likewise.
	* libio/iofgetpos64.c: Likewise.
	* libio/iofgets.c: Likewise.
	* libio/iofputs.c: Likewise.
	* libio/iofread.c: Likewise.
	* libio/iofsetpos.c: Likewise.
	* libio/iofsetpos64.c: Likewise.
	* libio/ioftell.c: Likewise.
	* libio/iofwrite.c: Likewise.
	* libio/iogetdelim.c: Likewise.
	* libio/iogets.c: Likewise.
	* libio/ioputs.c: Likewise.
	* libio/ioseekoff.c: Likewise.
	* libio/ioseekpos.c: Likewise.
	* libio/iosetbuffer.c: Likewise.
	* libio/iosetvbuf.c: Likewise.
	* libio/ioungetc.c: Likewise.
	* libio/iovsprintf.c: Likewise.
	* libio/iovsscanf.c: Likewise.
	* libio/oldfileops.c: Likewise.
	* libio/oldiofclose.c: Likewise.
	* libio/peekc.c: Likewise.
	* libio/putc.c: Likewise.
	* libio/putchar.c: Likewise.
	* libio/rewind.c: Likewise.

	* malloc/mtrace.c: Pretty print.

	* misc/mntent.h (struct mentent): Make string elements const char *.

	* nis/nis_printf.c: Optimize I/O a little bit.

	* signal/Makefile (distribute): Add sigset-cvt-mask.h.
	* sysdeps/generic/sigset-cvt-mask.h: New file.
	* sysdeps/unix/sysv/linux/sigset-cvt-mask.h: New file.
	* sysdeps/unix/sysv/sysv4/sigset-cvt-mask.h: New file.
	* sysdeps/posix/sigvec.c: Rewrite the use definitions from
	sigset-cvt-mask.h to do the dirty work.
	Patches by Joe Keane.

	* sysdeps/posix/mkstemp.c: Save one precious byte of rodata.

	* sysdeps/unix/sysv/linux/i386/sysdep.h: Rewrite PSEUDO etc to make
	syscall_error label in case of PIC anonymous.
	* sysdeps/unix/sysv/linux/i386/i686/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/clone.S: Adapt for this change.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Adapt for this change.
	* sysdeps/unix/sysv/linux/i386/s_pread64.S: Adapt for this change.
	* sysdeps/unix/sysv/linux/i386/s_pwrite64.S: Adapt for this change.
	* sysdeps/unix/sysv/linux/i386/socket.S: Adapt for this change.
	* sysdeps/unix/sysv/linux/i386/syscall.S: Adapt for this change.

1998-06-05  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/xdr_rec.c (xdrrec_create): Add cast for *_ops array since
	we cannot declare the struct element as const.
	* sunrpc/xdr_mem.c (xdrmem_create): Likewise.
	* sunrpc/xdr_stdio.c (xdrstdio_create): Likewise.

1998-06-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/Makefile: Include ../Makeconfig earlier.
	(MAKEINFO, TEXI2DVI): Use defaults if ../Makeconfig does not
	exist.
	(dir-add.texinfo): Remove useless $(SHELL).

1998-06-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (others): Build programs from install-bin.
	* configure.in: Modify config.make only if is was just created and
	move that command to second argument of AC_OUTPUT.  Add command to
	set config_vars in config.status.

1998-06-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* malloc/Makefile (address-width): Fix conditional.

1998-06-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libc.map: Add fattach, fdetach, getmsg, getpmsg, makecontext,
	putmsg, putpmsg, scalbln, scalblnf, scalblnl, strtoimax,
	strtoumax, swapcontext, waitid, wcsnlen, wcstoimax, wcstoumax with
	version GLIBC_2.1.

1998-06-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/lang.texi (Range of Type): Change @end table->@end vtable.
	(Floating Point Parameters): Likewise.

1998-06-01  Gordon Matzigkeit  <gord@profitpress.com>

	* hurd/Makefile (routines): Add cthreads.

1998-05-31  Mark Kettenis  <kettenis@phys.uva.nl>

	* login/login.c (login): Let pututline take care of finding the
	positin to insert the UTMP entry.  This corrects a bug where ssh
	was not reusing UTMP entries marked as DEAD_PROCESS.
	Reported by Herbert Xu <herbert@gondor.apana.org.au>.

1998-05-31  Mark Kettenis  <kettenis@phys.uva.nl>

	* login/Makefile (tests): New variable, add tst-utmp and
	tst-utmpx.
	* login/tst-utmp.c: New file.
	* login/tst-utmpx.c: New file.

1998-06-01  Gordon Matzigkeit  <gord@profitpress.com>

	* sysdeps/mach/hurd/errlist.c (sys_nerr, _sys_nerr): Make weak
	aliases for _hurd_nerr, for programs that don't use sys_errlist,
	but need sys_err.

1998-05-31  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/generic/updwtmpx.c: Rename function to updwtmpx.
	* libc.map: Add updwtmpx and utmpxname to GLIBC_2.1.

1998-05-31  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/read.c: Rename function to __libc_read and
	make __read a weak alias.  Use ANSI-style function definition.
	* sysdeps/mach/hurd/write.c: Likewise.

1998-05-31  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/err_hurd.sub: Use _hurd_errlist instead of
	_sys_errlist.

1998-05-30  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/Makefile ($(objpfx)librtld.os):
	Renamed from librtld.so.

1998-06-02  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libc.map: Remove _IO_getline_info which was erroneously
	introduced in section GLIBC_2.0.
	Noticed by Horst von Brand <vonbrand@sleipnir.valparaiso.cl>.

1998-06-01  Gordon Matzigkeit  <gord@profitpress.com>

	* sysdeps/generic/socket.c (__socket): Renamed from socket, and
	created a weak alias.
	* sysdeps/mach/hurd/socket.c (__socket): Likewise.

1998-05-31  Gordon Matzigkeit  <gord@profitpress.com>

	* sysdeps/mach/hurd/ftruncate.c (__ftruncate): Rename from old
	ftruncate function, and create a weak alias to ftruncate.

1998-06-01  Gordon Matzigkeit  <gord@profitpress.com>

	* grp/fgetgrent_r.c: Use &errno instead of __errno_location ().
	* inet/getnetgrent_r.c: Likewise.
	* nss/getXXbyYY_r.c: Likewise.
	* nss/getXXent_r.c: Likewise.
	* pwd/fgetpwent_r.c: Likewise.
	* shadow/sgetspent_r.c: Likewise.
	* shadow/fgetspent_r.c: Likewise.
	* sunrpc/publickey.c: Likewise.

1998-06-01  Gordon Matzigkeit  <gord@profitpress.com>

	* hurd/libhurduser.map: New file.
	* mach/libmachuser.map: Likewise.

	* libc.map: Add Hurd-specific functions to version 2.1.
	Add __flshfp and __fillbf.

1998-05-30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/signal.texi (Basic Signal Handling): Fix typo.
	* manual/errno.texi (Error Codes): Likewise.

1998-06-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netipx/ipx.h: Include <bits/sockaddr.h>
	instead of <sys/socket.h>.
	Patch by NIIBE Yutaka <gniibe@mri.co.jp>

	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c (DL_FIND_ARG_COMPONENTS):
	Finally make it working.
	Patch by Mark Hatle <fray@kernel.crashing.org>.

1998-03-22  Paul Eggert  <eggert@twinsun.com>

	* posix/regex.c: Include <wchar.h> before <wctype.h>, to work around
	a Solaris 2.6 bug.

1998-05-30  Philip Blundell  <Philip.Blundell@pobox.com>

	* stdlib/gmp-impl.h: Support strange mixed-endian double format
	used by ARM systems.
	* sysdeps/arm/fpu/bits/fenv.h (FE_EXCEPTION_SHIFT): Rename to
	FE_EXCEPT_SHIFT.
	* sysdeps/arm/bits/fenv.h: Deleted.
	* sysdeps/arm/fpu/ieee754.h: New file.
	* sysdeps/arm/gmp-mparam.h: New file.
	* stdlib/longlong.h (umul_ppmm): Temporarily disable broken ARM
	implementation.

1998-06-01  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/rpc/xdr.h (struct XDR): Don't mark xdr_ops element as const.

	* sysdeps/i386/fpu/bits/mathinline.h: Use ((__unused__)) instead
	of ((unused)).  Reported by Bruno Haible.

1998-05-31  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/arm/sysdep.S: Use C_SYMBOL_NAME when
	referring to errno and _errno.

	* sysdeps/arm/fpu/feholdexcpt.c: New file.

	* sysdeps/i386/fpu_control.h: Fix typo.

	* sysdeps/arm/bits/setjmp.h (__jmp_buf): Remove floating-point support.
	(_JMPBUF_UNWINDS): Added.
	* sysdeps/arm/fpu/bits/setjmp.h: New file.

1998-05-25  Gordon Matzigkeit  <gord@profitpress.com>

	* sysdeps/mach/hurd/Makefile: Use the `before-compile' target in
	order to build header files, not `generated'.

	* Rules (before-compile): New target which depends on all
	$(before-compile) files.

1998-06-01  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nis_call.c: Make directory search faster.

	* nis/nis_callback.c: Insert public key of user in callback data.

	* nis/nis_clone_obj.c: Make size from type u_long, not u_int.

	* nis/nis_creategroup.c: Check for NULL pointer, fill in more fields.

	* nis/nis_findserv.c: Rename __pmap_getport to __pmap_getnisport.

	* nis/nis_intern.h: Remove duplicated prototype.

1998-06-01  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/auth_des.c: Move prototypes from here ...
	* sunrpc/rpc/auth.h: ... to here.

	* sunrpc/clnt_tcp.c: Add more control flags.
	* sunrpc/clnt_udp.c: Likewise.

	* sunrpc/netname.c (host2netname): Remove prefixing dot from
	domainname.

	* sunrpc/rpc/clnt.h: Document, which control flags are not
	implementable.

	* sunrpc/svcauth_des.c: Use key_decryptsession_pk to avoid deadlock.

1998-05-29  Ulrich Drepper  <drepper@cygnus.com>

	* locale/loadlocale.c (_nl_load_locale): Don't allow too small
	files crash the program.

	* io/Makefile: Don't run ftwtest-sh if cross-compiling.
	* string/Makefile: Don't run test on tst-svc.out if cross-compiling.
	Reported by Deborah Wallach <kerr@pa.dec.com>.

1998-05-28 00:53  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* glibcbug.in: Send to bugs@gnu or libc-alpha@cygnus depending
	on whether this is a stable release or not (keeps snapshot bug
	reports out of the database).

	* include/libc-symbols.h: Use __ASSEMBLER__ test macro not ASSEMBLER.
	* sysdeps/arm/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/m68k/sysdep.h: Likewise.
	* sysdeps/mach/mips/sysdep.h: Likewise.
	* sysdeps/mach/sys/reboot.h: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/unix/alpha/sysdep.h: Likewise.
	* sysdeps/unix/bsd/hp/m68k/sysdep.h: Likewise.
	* sysdeps/unix/bsd/osf/alpha/sysdep.h: Likewise.
	* sysdeps/unix/bsd/sequent/i386/sysdep.h: Likewise.
	* sysdeps/unix/bsd/sony/newsos/m68k/sysdep.h: Likewise.
	* sysdeps/unix/bsd/sun/m68k/sysdep.h: Likewise.
	* sysdeps/unix/bsd/vax/sysdep.h: Likewise.
	* sysdeps/unix/i386/sysdep.h: Likewise.
	* sysdeps/unix/mips/sysdep.h: Likewise.
	* sysdeps/unix/sparc/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/sparc/sysdep.h: Likewise.

1998-05-27  Mark Kettenis  <kettenis@phys.uva.nl>

	* mach/Machrules: Use $(move-if-change).

1998-05-27  Mark Kettenis  <kettenis@phys.uva.nl>

	* Makeconfig [elf=yes] (+interp): New variable, set to interp.os.
	* Makerules (lib%.so): Depend on $(+interp).
	(libc.so): Add interp.os to list of dependencies.
	(interp-obj): Remove variable.
	* mach/Machrules (+interp): Define to empty since libhurduser and
	libmachuser don't need to have the interpreter set.

1998-05-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* resolv/res_send.c: Security fixes from bind 4.9.7-REL.

	* resolv/gethnamaddr.c: Likewise.

	* resolv/res_comp.c: Likewise.

1998-05-28  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/mach/hurd/wait4.c (__wait4): Use ANSI-style definition
	so that transparent union works.

1998-05-29 08:58  Ulrich Drepper  <drepper@cygnus.com>

	* manual/texinfo.tex: Update to last available version.

	* timezone/africa: Update from tzdata1998e.
	* timezone/antarctica: Likewise.
	* timezone/asia: Likewise.
	* timezone/australasia: Likewise.
	* timezone/europe: Likewise.
	* timezone/iso3166.tab: Likewise.
	* timezone/northamerica: Likewise.
	* timezone/tzselect.ksh: Likewise.
	* timezone/zone.tab: Likewise.

1998-05-27  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/chown.c: Fix comment.
	Reported by Matt McLean <keys@brio.yikes.com>.

1998-05-25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* catgets/Makefile ($(objpfx)de.cat): Renamed from
	do-gencat-test.  Use automatic variables.
	($(objpfx)de.msg): Fix reference to po file.

1998-05-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig ($(common-objpfx)gnu/lib-names.stmp): Use
	$(move-if-change).

1998-05-25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* intl/dcgettext.c: Fix typo.

1998-05-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Allow more make versions e.g 3.76.90.

1998-05-25  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (rpath-link): Find libc.so.6 in $(common-objdir).

	* malloc/thread-m.h: Use __mutex_init function in mutex_init macro
	for Hurd.  Patch by Mark Kettenis.

1998-04-18  Gordon Matzigkeit  <gord@profitpress.com>

	 * mach/Machrules (+preinit, +postinit): Define these variables to
	 empty because libhurduser and libmachuser don't need startup
	 files.

1998-04-22  Gordon Matzigkeit  <gord@profitpress.com>

	 * sysdeps/mach/hurd/errlist.c (ERR_REMAP): Use err_get_code
	 instead of a raw bitmask.

1998-05-23  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig (rpath-dirs): New variable.
	(rpath-link): Use it.
	(nssobjdir, nisobjdir, rtobjdir, resolvobjdir): Removed.
	(db-objpfx): Removed.
	* crypt/Makefile: Augment rpath-dirs instead of rpath-link.
	* md5-crypt/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.

	* Makeconfig (move-if-change): New variable.
	* iconvdata/Makefile (move-if-change): Removed.
	* manual/Makefile (move-if-change): Set only if undefined, use
	local script by default.
	* sunrpc/Makefile (move-if-change): Removed.
	* sysdeps/mach/hurd/Makefile ($(common-objpfx)stamp-errnos): Use
	$(move-if-change).

	 * elf/Makefile: Remove all references to obsolete file
	 $(objpfx)rtldtbl.h.
	 ($(objpfx)trusted-dirs.h): Use stamp file.  Cleanup command.

1998-05-22  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-close.c (_dl_close): Add debugging message.

1998-05-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* csu/Makefile ($(objpfx)version-info.h): Correct sed expression
	to get Linux version and not gcc version.
	Reported by Alan Curry <pacman@cqc.com>.

1998-05-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/generic/_strerror.c (__strerror_r): Don't return NULL
	pointers - return unknown error message instead.
	Reported by Alan Curry <pacman@cqc.com>.

1998-05-24  Mark Kettenis  <kettenis@phys.uva.nl>

	* iconvdata/Makefile (modules, sed-generated-headers,
	perl-generated-headers): ibm424.h is perl generated.  Make
	necessary modifications to compile without perl.

1998-05-24  Mark Kettenis  <kettenis@phys.uva.nl>

	* hesiod/hesiod.c (read_config_file): Fix typo.

1998-05-24  Ulrich Drepper  <drepper@cygnus.com>

	* version.h: Bump VERSION.

	* csu/Makefile (distribute): Add munch-tmpl.c.

1998-05-23  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nis_defaults.c: Fix buffer problems and typos.

1998-05-23 08:42  Ulrich Drepper  <drepper@cygnus.com>

	* intl/dcgettext.c: Don't use any alloca hacks if C_ALLOCA is defined.
	Patch by Fred Fish.

1998-05-22  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/random_r.c (__random_r): Rewrite last patch to fix buffer
	overwriting bugs.

	* libio/strops.c (_IO_str_underflow): Read newly available
	character from buffer as unsigned.

1998-05-22 10:56  Ulrich Drepper  <drepper@cygnus.com>

	* catgets/Makefile (distribute): Add xopen-msg.h.
	(generated): Add de.msg and de.cat.
	(tests): Add do-gencat-test.
	(do-gencat-test): New goal.  Run gencat on a generated msg file.
	* catgets/xopen-msg.h: New file.

1998-05-22  Ulrich Drepper  <drepper@cygnus.com>

	* catgets/open_catalog.c (__open_catalog): Use byteswap.h
	functions.  Optimize filename creation a bit.

1998-05-22 09:29  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/random_r.c: Help gcc to optimize the code.
	Patch by Joe Keane <jgk@jgk.org>.

1998-05-21  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/iconv_prog.c (print_known_names): Use strverscmp in all
	tsearch calls.

1998-05-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* timezone/test-tz.c: The test with TZ=UTC0 seems to work - enable
	it.

1998-05-21 15:27  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wcsnrtombs.c: Correct computation of result.
	* wcsmbs/wcsrtombs.c: Likewise.

	* wcsmbs/Makefile (tests): Add wcsmbs-tst1.c.
	* wcsmbs/wcsmbs-tst1.c: New file.

	* iconv/loop.c (COUNT_CONVERTED): Correct computation.

	* locale/C-ctype.c (_nl_C_LC_CTYPE): Define MB_CUR_MAX for C locale
	as 1.

	* locale/setlocale.c: Don't make _nl_current_* and _nl_C_* references
	weak.

1998-05-21  Philip Blundell  <philb@gnu.org>

	* sysdeps/arm/fpu_control.h: Replace stub file with real
	implementation.
	* sysdeps/arm/fpu/bits/fenv.h: New file.
	* sysdeps/arm/fpu/fesetround.c: Likewise.
	* sysdeps/arm/fpu/fclrexcpt.c: Likewise.
	* sysdeps/arm/fpu/fsetexcptflag.c: Likewise.
	* sysdeps/arm/fpu/ftestexcpt.c: Likewise.
	* sysdeps/arm/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/arm/fpu/fegetenv.c: Likewise.
	* sysdeps/arm/fpu/fesetenv.c: Likewise.

1998-05-21 16:34  Richard Henderson  <rth@cygnus.com>

	* elf/dl-load.c (_dl_map_object_from_fd): Get file header with
	read instead of mmap.

1998-05-21  8:16  Richard Henderson  <rth@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/glob.c: Include sysdeps/generic/glob.c
	directly instead of include_next.  Add missing semicolons.
	* sysdeps/unix/sysv/linux/alpha/oldglob.c: Include sys/types.h.
	Add missing semicolons.

1998-05-21  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/gconv-modules: Add more aliases to please java
	environments.

1998-05-20  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c (process_arg): Fix typo.

	* iconvdata/TESTS: New tests for EUC-KR.

	* iconvdata/Makefile ($(objpfx)iconv-test.out): Also depend on TESTS.
	* iconvdata/testdata/EUC-KR: New file.

1998-05-20 07:26  H.J. Lu  <hjl@gnu.org>

	* math/libm-test.c (hypot_test): Fix a typo.

1998-05-20  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c: When precision is specified for %ls or
	%S handle it correctly.

1998-05-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/bsd/vax/vfork.S: Missed double occurences of "the
	the" in one line - fixed it.
	* sysdeps/unix/bsd/sun/m68k/vfork.S: Likewise.
	* sysdeps/unix/bsd/hp/m68k/vfork.S: Likewise.
	* posix/unistd.h: Likewise

1998-05-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Makeconfig (rpath-link): Add resolvobjdir.
	(resolvobjdir): New variable.
	Reported by Peter Breitenlohner <peb@mppmu.mpg.de> [fixes PR libc/633].

1998-05-20 09:36  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c: Call shared object terminators at the right time.
	Patch by Philippe Troin <phil@fifi.org>.

1998-05-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Make-dist (+tsrcs): Also add *.map for every member of
	$(extra-libs).

	* Makefile (distribute): Don't distribute scripts/printsources and
	scripts/=__ify.  Distribute FAQ.in.
	(rpm/%): Don't pass subdirs to sub-make.

	* timezone/Makefile: Protect inclusion of z.* by $(avoid-generated)
	instead of $(no_deps).

1998-05-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/setenv.c: Protect against GNU C extension.
	(KNOWN_VALUE, STORE_VALUE): Do it right.
	(setenv): Remove unused variable.

1998-05-18  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* timezone/Makefile (tz-cflags): Define TM_GMTOFF and TM_ZONE.
	(CFLAGS-zdump.c): Add $(tz-cflags).

	* timezone/zdump.c (abbr): Use TM_ZONE if defined.  Add const to
	return type.

1998-05-18  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* time/tzfile.c (__tzfile_compute): Undo last change.  Instead
	take struct tm parameter and set tm_isdst, tm_zone and tm_offset
	if use_localtime.
	* time/tzset.c: Update prototype of __tzfile_compute.
	(__tz_convert): Pass tp to __tzfile_compute.  Don't set tm_isdst,
	tm_zone and tm_offset here if __use_tzfile.

1998-05-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules: Install libc.a even if there are no object file.

1998-05-18  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (do-makelib): Don't force creating library from
	scratch, which is faster and gets correct behaviour if $(subdirs)
	is incomplete.

1998-05-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (do-stamp): Make it work when building in source
	directory.

1998-05-20 00:10  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c: Rename option and variable from ignore-rpath to
	inhibit-rpath.
	* elf/dl-support.c: Likewise.
	* elf/ldsodefs.h: Likewise.
	* elf/rtld.c: Likewise.
	* iconvdata/run-iconv-test.sh: Likewise.

1998-05-19 23:08  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c: Recognize --ignore-rpath argument and set _dl_ignore_path
	variable using the value.
	* elf/ldsodefs.h: Declare _dl_ignore_path.
	* elf/dl-load.c (decompose_rpath): Compare name of handled shared
	object against list in _dl_ignore_path and ignore RPATH if on the list.
	* elf/dl-support.c: Define _dl_ignore_path for static binaries.
	* iconvdata/run-iconv-test.sh: Call ld.so with --ignore-rpath parameter
	to make sure we get the correct helper libraries loaded.

	* elf/dl-load.c (decompose_rpath): Remove `room' parameter.  Use
	"RPATH" string in call to fillin_rpath instead.
	(_dl_init_paths): Remove this parameter from call to decompose_rpath.

1998-05-19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/i486/bits/string.h (__strstr_g): Initialize %edx
	correctly.  Patch by Horst von Brand <vonbrand@sleipnir.valparaiso.cl>.

1998-05-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/terminal.texi (I/O Queues): Fix typo.

	* manual/stdio.texi (Closing Streams): Fix grammar.

	* manual/arith.texi (Absolute Value): Correct typo.
	Patches by Oskar Liljeblad <osk@hem.passagen.se>. [PR libc/630]

1998-05-19 15:58  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (process_envvars): Fix typo.  Don't handle
	LD_PROFILE_OUTPUT in SUID binaries.
	* intl/dcgettext.c: In SUID binaries don't let language part of
	locale value contain path elements.
	* intl/explodename.h: Define new function _nl_find_language.
	* intl/loadinfo.h: Declare _nl_find_language.
	* locale/findlocale.c (_nl_find_locale): Use _nl_find_locale to get
	language part it drop the value is path element is contained.

	* locale/setlocale.c: Fix typo.

1998-05-18  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/sysv/linux/arm/socket.S: Correct handling of arguments.

	* sysdeps/arm/strlen.S: Support both big and little endian processors.

	* sysdeps/arm/sysdep.h (ALIGNARG): ELF .align directive uses a
	log, not a byte-count.

	* sysdeps/unix/arm/sysdep.S (syscall_error): Use C_SYMBOL_NAME for
	a.out compatibility.

1998-05-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/bsd/vax/vfork.S: Fix the "the the" problems.
	* sysdeps/unix/bsd/sun/m68k/vfork.S: Likewise.
	* sysdeps/unix/bsd/hp/m68k/vfork.S: Likewise.
	* posix/unistd.h: Likewise.
	* math/math.h: Likewise.
	* manual/users.texi (Manipulating the Database): Likewise.
	* manual/signal.texi (Job Control Signals): Likewise.
	* manual/message.texi (The gencat program): Likewise.
	* manual/filesys.texi (Hard Links): Likewise.
	* manual/math.texi (SVID Random): Likewise.
	* manual/llio.texi (Waiting for I/O): Likewise.
	* manual/io.texi (File Name Errors): Likewise.
	* manual/conf.texi (String Parameters): Likewise.
	* manual/arith.texi (Infinity): Likewise.
	* malloc/malloc.c: Likewise.
	* hurd/hurdsig.c (_hurd_internal_post_signal): Likewise.
	* csu/Makefile: Likewise.

1998-05-19 12:16  Ulrich Drepper  <drepper@cygnus.com>

	* manual/memory.texi: Add back accidently removed line.

1998-04-25  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/generic/utmp_file.c (TIMEOUT): New macro.
	(timeout_handler): New function.
	(LOCK_FILE, UNLOCK_FILE): New macros.
	Implement file locking with timeout.
	(getutent_r_file, internal_getut_r, getutline_r_file,
	pututline_file, updwtmp_file): Use LOCK_FILE and UNLOCK_FILE for
	locking.

1998-05-18 11:38  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/run-iconv-test.sh: Extend library-path by iconvdata
	directory.

1998-05-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* rpm/Makefile: Delete inclusion of version.mk.

1998-05-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libc.map: Add all libio functions needed libstdc++ with version
	2.0, sort entries.

1998-05-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* iconvdata/Makefile (generated): Add *.stmp files.

1998-05-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* timezone/Makefile (testdata, build-testdata): New variables, use
	them in rules for test data.
	($(objpfx)tst-timezone.out): Depend on test data.
	($(testdata)/Europe/Berlin, $(testdata)/Universal,
	$(testdata)/Australia/Melbourne, $(testdata)/America/Sao_Paulo):
	New rules to build test data.
	(tst-timezone-ENV): Pass TZDIR to point to test data.

1998-05-18  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/TESTS: ISO-2022-KR has not really ASCII as a subset
	(the designation sequence is disturbing).

1998-05-17  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/svc_tcp.c: Add FreeBSD DoS patch.
	* sunrpc/xdr_rec.c: Likewise.

1998-05-15  Ulrich Drepper  <drepper@cygnus.com>

	* posix/Makefile (tests): Add runptests.
	(distribute): Add PTESTS, PTESTS2C.sed, and ptestcases.h.
	(before-compile): Add ptestcases.h.
	(ptestscases.h): Add rule to generate from PTESTS.
	* posix/runptests.c: New file.
	* posix/PTESTS: New file.
	* posix/PTESTS2C.sed: New file.

1998-05-15  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/loop.c: Let user add code to use and set paramaters.

	* iconvdata/iso-2022-kr.c: Correct to-loop.

	* iconvdata/iso-2022-kr.c (PREPARE_LOOP): Use correct variable to
	point to output buffer.

	* iconvdata/ksc5601.h (ksc5601_to_ucs4): Use correct value to find
	hanja.

	* iconvdata/TESTS: Add ISO-2022-KR test.
	* iconvdata/testdata/ISO-2022-KR: New file.

1998-05-15 21:07  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv.h (gconv_step_data): Add new fields invocation_counter
	and internal_use.
	* iconv/gconv_open.c (__gconv_open): Initialize invocation_counter
	and internal_use.
	* wcsmbs/btowc.c: Likewise.
	* wcsmbs/mbrtowcs.c: Likewise.
	* wcsmbs/mbsnrtowcs.c: Likewise.
	* wcsmbs/mbsrtowcs.c: Likewise.
	* wcsmbs/wcrtomb.c: Likewise.
	* wcsmbs/wcsnrtombs.c: Likewise.
	* wcsmbs/wcsrtombs.c: Likewise.
	* wcsmbs/wctob.c: Likewise.
	* iconv/skeleton.c: Increment invocation_counter.
	* iconvdata/iso-2022-kr.c: When used in iconv() emit designator
	sequence first.

	* iconv/skeleton.c (FROM_DIRECTION): Completely embrace expression.
	* iconvdata/iso-2022-jp.c: Likewise.
	* iconvdata/iso646.c: Likewise.

	* iconvdata/Makefile: Correct rpath definition for ISO-2022-KR.

1998-05-15  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_db.c (derivation_lookup): Use __tfind correctly.

	* sysdeps/generic/setenv.c (setenv): Remove optimization for
	overwriting existing values if it fits.

1998-05-15 14:36  Ulrich Drepper  <drepper@cygnus.com>

	* posix/wordexp-test.c: Avoid duplicate messages.

	* sysdeps/generic/setenv.c: Use __tfind and __tsearch, not tfind and
	tsearch.  Correctly interpret values returned by those functions.
	(unsetenv): Store pointer to string, not pointer to string pointer.

	* time/tzfile.c (__tzfile_compute): Take new arguments.  Store
	DST information and offset in them.
	* time/tzset.c (__tz_convert): Pass extra parameters to
	__tzfile_compute.  Compute equivalent values for use of tz_rules.

1998-05-15 00:49:11  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* iconvdata/Makefile (gen-8bit-table): Use move-if-change and
	stamp files to avoid unnecessary recompilation.
	(gen-8bit-gap-table): Likewise.
	(move-if-change): New variable.
	(all generated .h rules): Change to be .stmp rules.
	(%.h): New rule; depend on %.stmp; no commands.
	(distribute): Add gen-8bit.sh, gen-8bit-gap.sh,
	gen-8bit-gap-1.sh.

1998-05-15 01:09  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* Makerules (libc-map): Deleted.
	(load-map-file): Set to the appropriate compiler switch, not
	just the file name.  If libfoo-map is not set, look for a
	libfoo.map in the current directory and $(..).
	(map-file): New variable, contains just the mapfile name.
	(build-shlib): Adjust for new value of load-map-file.
	(libc.so): Correct dependencies.

	* extra-lib.mk: Correct shlib dependencies since libfoo-map
	may not be set anymore.

	* elf/Makefile: Set ld-map to $(..)libc.map, not $(libc-map).
	Delete libdl-map.  Tweak ld.so link rule to work with changed
	variable settings in Makerules.
	* iconvdata/Makefile: Tweak build-module to work with changed
	variable settings in Makerules.

	* db/Makefile: Delete libdb-map.
	* hesiod/Makefile: Delete libnss_hesiod-map.
	* linuxthreads/Makefile: Delete libpthread-map.
	* locale/Makefile: Delete libBrokenLocale-map.
	* login/Makefile: Delete libutil-map.
	* math/Makefile: Delete libm-map.
	* md5-crypt/Makefile: Delete libcrypt-map.
	* nis/Makefile: Delete libnsl-map, libnss_nis-map,
	libnss_nisplus-map, and libnss_compat-map.
	* nss/Makefile: Delete libnss_files-map, libnss_db-map, and
	libnss_ldap-map.
	* resolv/Makefile: Delete libresolv-map and libnss_dns-map.
	* rt/Makefile: Delete librt-map.

1998-05-15 01:06  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* configure.in: Instead of substituting `yes' or `no' for whether
	--no-whole-archive is available, set @no_whole_archive@ to the
	appropriate gcc switch or the empty string.  Likewise for
	-fno-exceptions.
	* config.make.in: Replace have-no-whole-archive with
	no-whole-archive and have-no-exceptions with no-exceptions.
	* Makerules: Delete stanzas setting no-whole-archive and
	no-exceptions.

	* sunrpc/Makefile: Use move-if-change to update generated .h
	and .c files.

1998-05-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* wcsmbs/wcsmbsload.c (extract_charset_name): Use strcspn instead
	of strchr loop.

1998-05-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* time/tzfile.c (__tzfile_read): Remove unused variable info.
	(__tzfile_compute): Likewise.

1998-05-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/bits/socket.h (AF_SNA,PF_SNA): Add new
	defines from Linux 2.1.102.

1998-05-14 23:14  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-ctype.c: Write correct mb_cur_max value.

1998-05-14 13:25  Ulrich Drepper  <drepper@cygnus.com>

	* inet/netinet/in.h: Add defines for multicast.
	Reported by Jeremy Hall <jhall@UU.NET>.

	* stdlib/stdlib.h: Add prototypes for __setenv and __unsetenv.
	* sysdeps/generic/putenv.c: Use __setenv and __unsetenv, not setenv
	and unsetenv.  Optimize _LIBC case.
	* sysdeps/generic/setenv.c: Prevent unnecessary memory leaks.
	Define functions with leading __.

	* time/tzfile.c: Correct handling of global variables daylight,
	timezone, and tzname.
	* time/tzset.c: Likewise.
	* timezone/Makefile (tests): Add tst-timezone.
	* timezone/tst-timezone.c: New file.

1998-05-14 10:35  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/asia: Update from tzdata1998d.
	* timezone/australasia: Likewise.
	* timezone/europe: Likewise.

1998-05-13  Ulrich Drepper  <drepper@cygnus.com>

	* string/string.h: Don't use the optimized versions for the string
	functions if optimizing for space.

	* stdlib/tst-strtod.c: Add test for -0.0.

	* io/ftwtest-sh: Prevent tests from being run by root.

	* wcsmbs/wcsmbsload.c (extract_charset_name): Fix silly bugs in
	last addition.  Patch by wkpark@chem.skku.ac.kr.

1998-05-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/8bit-gap.c (BODY): Don't fall off the end of the gap
	table.

1998-05-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/gen-8bit.sh: New file.
	* iconvdata/gen-8bit-gap.sh: New file.
	* iconvdata/gen-8bit-gap-1.sh: New file.
	* iconvdata/Makefile (generate-8bit-table): Use shell script
	instead of writing the commands directly.
	(generate-8bit-gap-table): Likewise.
	($(objpfx)iso8859-7jp.h): Likewise.
	(generated headers): Depend on shell script instead of Makefile.
	(before-compile): Add $(perl-generated-headers) only if perl is
	available.
	(headers): Depend on $(perl-generated-headers) only if perl is
	available.
	(sed-generated-headers): Remove iso8859-7jp.h.

1998-05-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* csu/Makefile ($(objpfx)abi-tag.h): Double $ in command.  Clean up.
	(/): Removed.

1998-05-12  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wcsmbsload.c (extract_charset_name): Pass correctly
	formed charset names to getfct.  Let user override charset
	selection by mention charset in locale name.

1998-05-12 12:15  Ulrich Drepper  <drepper@cygnus.com>

	* posix/glob.c: Move to ...
	* sysdeps/generic/glob.c: ...here.
	* posix/glob.h (glob_t): Use correct types for gl_pathc and gl_offs
	elements.
	* sysdeps/unix/sysv/linux/alpha/glob.c: New file.
	* sysdeps/unix/sysv/linux/alpha/oldglob.c: New file.
	* sysdeps/unix/sysv/linux/alpha/Dist: Add oldglob.c.
	* sysdeps/unix/sysv/linux/alpha/Makefile: Compile oldglob in posix
	subdir.
	* libc.map [GLIBC_2.1]: Add glob and globfree.

1998-05-12  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/Makefile (generated): Restore old list.

1998-05-11  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* rt/Makefile (tests): Define only if we have a thread library.

	* nis/ypclnt.c: Add: #include <errno.h>.

1998-05-10 15:39  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* configure.in: Define and substitute RELEASE as well as
	VERSION.
	* config.make.in: Add RELEASE and VERSION to be substituted.
	* Makeconfig: Delete all references to version.mk.
	* Make-dist: Likewise.
	* MakeTAGS: Likewise.
	* elf/Makefile: Likewise.

1998-05-10  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c: Move "(none)" domainname check from __yp_check to
	yp_get_default_domain.

1998-05-12  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/profil.c (__profil): Don't define act and timer
	variables as static.  Patch by Joe Keane <jgk@jgk.org>.

1998-05-12  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c: Fix for NO_THREADS case.

1998-05-11 18:02  Richard Henderson  <rth@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/Makefile (sysdep_routines):
	Remove statfs and fstatfs.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Don't mark pread
	and pwrite as EXTRA.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.

1998-05-09  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add capget and capset.

1998-05-08  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c
	(DL_FIND_ARG_COMPONENTS): Find correct alignment for auxiliary
	vector.  Patch by Mark Hatle <fray@kernel.crashing.org>
	and Matt McLean <keys@brio.yikes.com>.

1998-05-08 23:49  Ulrich Drepper  <drepper@cygnus.com>

	* misc/Makefile (tests): Add tst-mntent.
	* misc/tst-mntent.c: New file.

1998-05-08 21:56  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* autolock.sh: Removed.
	* manual/move-if-change: Removed.

	* scripts: New directory.
	* =__ify: Moved to scripts.
	* config.guess: Likewise.
	* config.sub: Likewise.
	* gen-FAQ.pl: Likewise.
	* install-sh: Likewise.
	* mkinstalldirs: Likewise.
	* move-if-change: Likewise.
	* printsources: Likewise.
	* rellns.sh: Likewise.
	* test-installation.pl: Likewise.

	* configure.in: Look in scripts for config.guess, config.sub,
	install-sh.
	* Makefile: Distribute all above files in their
	new home.  Find gen-FAQ.pl and test-installation.pl in scripts.
	* manual/Makefile: Find mkinstalldirs and move-if-change in
	$(..)scripts.  Drop them from distribute.  Minor cleanups.
	* Makerules: Find mkinstalldirs and rellns-sh in scripts.
	* sysdeps/mach/hurd/Makefile: Find move-if-change in scripts.
	* timezone/Makefile: Find rellns-sh in scripts.

1998-05-08  Ulrich Drepper  <drepper@cygnus.com>

	* intl/locale.alias: Change italian to it_IT.ISO-8859-1.
	Reported by Ottavio G. Rizzo <otto@mast.queensu.ca>.

1998-05-08 19:24  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* Makefile (+subdir-inits): Delete variable.
	(+init_subdirs): Likewise.
	(aux): Likewise.
	(before-compile): Likewise.
	(libc-init): Delete stanza.
	(version-info.h): Delete rule and associated variable.
	(distribute): Don't distribute moved files.
	* Makerules (interp-obj): It lives in elf now.  Only use it
	if $(elf) is set.  Delete rule to build it.
	* csu/Makefile: Build set-init.o and/or munch-init.o.  Build
	version.o and version-info.h.  Minor cleanups.
	(routines): Add libc-init, sysdep, version.
	(generated): Add version-info.h.
	* elf/Makefile: Build interp.os.

	* interp.c: Moved to elf.
	* set-init.c: Moved to csu.
	* munch-init.c: Likewise.
	* munch.awk: Likewise.
	* version.c: Likewise.

	* Rules: Unconfuse syntax highlighting with a fake comment.

1998-05-08  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add capset and capget
	syscalls.

1998-05-08 16:36  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* iconvdata/Makefile (generated): Set to *-generated-headers
	plus gconv-modules.
	(tests): Set to iconv-test.
	* localedata/Makefile (generated-dirs): Add ld-test-names to list.
	* posix/Makefile (generated): Set to wordexp-test-result*.
	* sunrpc/Makefile (generated): Remove rpcsvc/*.
	(generated-dirs): Add rpcsvc.
	* libio/Makefile: Clean up.

1998-05-08 14:55  Ulrich Drepper  <drepper@cygnus.com>

	* Make-dist (+tsrcs): Also use tests-statc where tests is used.
	* Makerules: Likewise.
	(+depfiles): Also add sysdep-others.
	* Rules: Likewise.
	* iconv/Makefile (distribute): Add loop.s and skeleton.c.
	* iconvdata/Makefile (distribute): Add TESTS.
	* localedata/Makefile (repertoires): Rename to repertoiremaps.
	* sysdeps/gnu/Dist: Add utmpx.h and bits/utmpx.h.
	* sysdeps/unix/sysv/linux/Dist: Add ldd-rewrite.sed.
	* sysdeps/unix/sysv/linux/i386/Makefile [subdir=elf]: Define
	sysdep-others, not others.
	* sysdeps/unix/sysv/linux/m68k/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/sparc/Dist: Add sys/kernel_termios.h.

1998-05-08 12:26  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_int.h (struct gconv_module): Remove cost field and add
	cost_hi and cost_lo.
	* iconv/gconv_conf.c (builtin_modules): Initialize cost_hi from
	Cost parameter and set cost_lo to INT_MAX.
	(add_module): Take new parameter and use it to initialize cost_lo.
	(read_conf_file): Count modules being loaded and use counter for
	new parameter to add_module.
	* iconv/gconv_db.c (find_derivation): When look for cost examine
	cost_hi and cost_lo.

1998-05-08 10:52  Ulrich Drepper  <drepper@cygnus.com>

	* string/bits/string2.h: Don't use unsigned char * unless really
	necessary since this disturbs C++.
	* sysdeps/i386/i486/bits/string.h: Likewise.
	Patch by Bernd Schmidt <crux@Pool.Informatik.RWTH-Aachen.DE>.

1998-05-08 13:53  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* malloc/malloc.c (top_check): Fix last change.

1998-05-07  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/powerpc/bits/setjmp.h (_JMPBUF_UNWINDS): Define.
	Patch by Matt McLean <keys@brio.yikes.com>.

1997-05-07 13:26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (lib): Put back dependency on lib-noranlib.
	($(subdirs-stamps)): Remove dependency on stamp.* again.

1998-05-07  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/bits/mathinline.h: Use long long int also for
	test in __pow2 implementation.

1998-04-16 07:42  Geoff Keating  <geoffk@ozemail.com.au>

	* Makeconfig [!build-static]: Link `static' binaries with libc_pic.a.
	Still need *FLAGS-.o because we still sometimes build .o files.
	* db2/Makefile: Don't build libndbm.a if !build-static.

1998-05-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* malloc/malloc.c (top_check): Add void as parameter to silent gcc.

1998-04-16 07:42  Geoff Keating  <geoffk@ozemail.com.au>

	* configure.in: New test for broken gcc on PowerPC.
	* sysdeps/powerpc/atomicity.h: Use result of test.
	* linuxthreads/sysdeps/powerpc/pt-machine.h: Use result of test.

	* math/libm-test.c: Update many of the epsilon to match actual
	performance.

	* sysdeps/libm-ieee754/e_exp.c: Reduce the number of branches.
	* sysdeps/libm-ieee754/e_expf.c: Likewise.
	* sysdeps/libm-ieee754/s_exp2.c: Likewise.
	* sysdeps/libm-ieee754/s_exp2f.c: Likewise.

	* sysdeps/libm-ieee754/e_pow.c: Correct typo.

	* sysdeps/powerpc/elf/libc-start.c: New file.
	* sysdeps/powerpc/elf/start.S: New file, use libc-start.
	* sysdeps/powerpc/elf/start.c: Delete.

	* sysdeps/unix/sysv/linux/powerpc/Dist: Remove syscall.h
	* sysdeps/unix/sysv/linux/powerpc/syscall.h: Delete.  It was unused.

	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c: Correct previous
	few patches.

1998-05-06 12:51  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/bits/mathinline.h (pow): Use long long int for
	test for integer.

	* sysdeps/libm-i387/e_pow.S: Correctly shift double word.
	* sysdeps/libm-i387/e_powl.S: Likewise.

1998-03-31  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c (chunk2mem_check, top_check): New functions.
	(malloc_check, free_check, realloc_check, memalign_check): Use
	them to improve overrun checking.  Overruns of a single byte and
	corruption of the top chunk are now detected much more reliably.

1998-05-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (pow_test): Add test for special value from PR
	libc/590.

1998-05-06  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/errno.h: Undefine EILSEQ before
	including linux/errno.h.

1998-05-06 09:49  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/sysv4/solaris2/bits/stat.h: Add LFS support.
	Use correct types.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/types.h: New file.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/errno.h: New file.

1998-05-05  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (elide-routines.*): Fix assignments.
	(do-makelib): Fix typo.
	($(subdirs-stamps)): Depend on $(objpfx)stamp.* if in parent
	makefile.

1998-05-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (sysdep-subdirs, subdirs, $(common-objpfx)sysd-dirs,
	$(objpfx)sysd-dirs): Move them...
	* Makeconfig: ... here.
	* Makerules (subdirs-stamps, subdirs-stamp-o): Always define.
	(stubs): Fix circular depedency.
	(do-makelib): Clean up.
	(lib): Don't depend on lib-noranlib.
	($(objpfx)stamp.oS): Remove special case for empty
	static-only-routines.
	(elide-routines.o): Add $(static-only-routines).
	(elide-routines$o): Define this instead of elide-routines.$o.
	* manual/Makefile (stubs): Fix circular dependency.

1998-05-05  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libio/Makefile (routines): Remove duplicate oldiofclose.

1998-05-05  Ulrich Drepper  <drepper@cygnus.com>

	* string/strcoll.c: Use uint32_t instead of u_int32_t.

1998-05-05  Ulrich Drepper  <drepper@cygnus.com>

	* libio/stdio.h: Fix typo in __REDIRECT.
	* io/sys/stat.h: Likewise.
	Reported by Myles Uyema <myles@uyema.nws.net>.

1998-05-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* locale/programs/localedef.c (options): Fix help message.

1998-05-04  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h: Avoid nasty
	relocations.  Patch by Joe Keane <jgk@jgk.org>.

1998-05-04 12:40  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c (ptmalloc_init_all): New function.  Similar to
	ptmalloc_unlock_all, but re-initializes the mutexes instead.
	(ptmalloc_init): Use new function in thread_at_fork call.
	(thread_atfork_static): Likewise.
	Suggested by Wolfram Gloger and Xavier Leroy.

1998-05-04  Ulrich Drepper  <drepper@cygnus.com>

	* signal/signal.h: Move definitions of struct sigstack and
	struct sigaltstack into separate file and include it.
	* sysdeps/generic/bits/sigstack.h: New file.
	* sysdeps/unix/sysv/linux/bits/sigstack.h: New file.
	* signal/Makefile (headers): Add bits/sigstack.h.

1998-05-03  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/rtld.c (dl_main): Fix check for number of references to
	interpreter object.

1998-05-03  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/rtld.c (dl_main): Check has_interp after executing platform
	specific code.

1998-05-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/run-iconv-test.sh: Fix typo.

1998-05-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (+depfiles): Add depfiles for $(tests-static).
	Simplified.

1998-05-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/terminal.texi (Special Characters): Fix description of
	c_cc indexes.

1998-05-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/tcsetattr.c: Use memcpy to copy the c_cc
	array.
	* sysdeps/unix/sysv/linux/tcgetattr.c: Likewise.  Initialize rest
	of c_cc array.

1998-04-30 14:15  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* sysdeps/unix/sysv/linux/netrose/rose.h: Don't include kernel headers.

1998-05-01  Ulrich Drepper  <drepper@cygnus.com>

	* intl/locale.alias: Update russian entry.

1998-05-01 21:54  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* Makerules (static-only-routines): Reimplement in terms of
	elide-routines.os.
	(shared-only-routines): Reimplement in terms of
	elide-routines.X [where X is all object-suffixes except .os].

	(stubs): Create stubs file inside the subdir.
	(common-mostlyclean): Remove stubs file from inside the subdir.
	* Makefile (subdir-stubs): Look for stubs files inside the
	subdirs.
	* manual/Makefile (stubs): Create dummy stubs file inside the
	subdir.

1998-05-01 21:01  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	Build speed improvement: make ar less of a bottleneck.

	* Makerules (stamp$o): Just record the object list for later
	use.
	(libc_foo.a): New rule, depends on subdir stamp files; builds
	and ranlibs the library from the lists saved in those files.

	(subdirs-stamps): Define also if subdir == elf (FIXME: kludge).
	(subdirs-stamp-o): Likewise.

	(ar-symtab-name): Delete variable.
	(lib%.a): Delete target.
	(libc_foo.a(bar.%)): Delete target.
	(libc_foo.a($(ar-symtab-name))): Delete target.

	(objects objs): Just depend on libobjs and extra-objs.
	(libobjs): Depend on the stamp files, not the objects.
	(extra-objs): New target, just depends on the extra-objs list.

	(CREATE_ARFLAGS): Kill the `ar S' hack.

	* config.make.in (have-ar-S): Deleted.
	* configure.in: Delete test for `ar S'.  Add test to determine
	whether ranlib does anything useful.

1998-05-01  Ulrich Drepper  <drepper@cygnus.com>

	* inet/tst-ether_aton.c: Include <stdio.h>.

1998-04-30 16:45  Ulrich Drepper  <drepper@cygnus.com>

	* inet/ether_aton.c: Including netinet/if_ether.h is not necessary.

	* locale/Makefile (distribute): Add programs/repertoire.h.
	(localedef-modules): Add repertoire.
	(CPPFLAGS): Define REPERTOIREMAP_PATH.
	* locale/programs/repertoire.c: New file.
	* locale/programs/repertoire.h: New file.
	* locale/programs/charmap.c: Starting fixing character set handling
	to handle multi-byte encodings.
	* locale/programs/charset.c: Likewise.
	* locale/programs/charset.h: Likewise.
	* locale/programs/ld-collate.c: Likewise.
	* locale/programs/ld-ctype.c: Likewise.
	* locale/programs/linereader.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* locale/programs/locfile-kw.gperf: Likewise.
	* locale/programs/locfile-kw.h: Likewise.
	* locale/programs/locfile-token.h: Likewise.
	* locale/programs/locfile.h: Likewise.
	* locale/programs/stringtrans.c: Likewise.

	* locale/programs/locfile.c: Interpret I18NPATH value as base of
	path, extended with "/locales/".

1998-04-18  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/arm/memset.S: Fix off by one error.

	* sysdeps/unix/sysv/linux/arm/sysdep.h (PSEUDO): On error, call
	__syscall_error rather than syscall_error directly.

1998-04-17  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/sysv/linux/arm/mmap.S: New file; implementation of
	mmap() syscall for ARM.

	* sysdeps/unix/arm/start.c: New file; startup code for ARM a.out
	binaries.

1998-04-30  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/localedef.c: Recognize repertoire-map option.

1998-04-29  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/linereader.c (get_toplvl_escape): Fix typo in
	converting non-hex numbers.
	Patch by Won Kyu Park <bird@bird.kitel.co.kr>.

1998-04-23 07:31  H.J. Lu  <hjl@gnu.org>

	* resolv/inet_addr.c (inet_aton): Use __strtoul_internal to
	check overflow.
	* resolv/Makefile (tests): New, add tst-aton.
	* resolv/tst-aton.c: New file.

1998-04-29  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/sparc/sparc32/dl-machine.h (WEAKADDR): Add missing
	semicolon.

1998-04-29 12:11  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/mbsnrtowcs.c: Remove variable to pass to conversion function
	by letting the later modify the variable computing the total directly.
	* wcsmbs/mbsrtowcs.c: Likewise.
	* wcsmbs/wcsnrtombs.c: Likewise.
	* wcsmbs/wcsrtombs.c: Likewise.

	* wcsmbs/btowc.c (converted): Rename variable to dummy to make clear
	it is not used.
	* wcsmbs/wctoc.c: Likewise.

	* wcsmbs/mbsrtowcs.c: Optimize a bit more.
	* wcsmbs/wcsrtombs.c: Likewise.

	* sysdeps/unix/sysv/linux/alpha/bits/signum.h: Add SIGCLD definition.

1998-04-29  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/skeleton.c: Correct counting of actually converted
	characters.

	* intl/localealias.c (read_alias_file): Use unsigned char for
	local variables.  Remove unused variable tp.
	* intl/l10nflist.c (_nl_normalize_codeset): Use unsigned char *
	for type of codeset.  For loosing Solaris systems.
	* intl/loadinfo.h: Adapt prototype of _nl_normalize_codeset.
	* intl/bindtextdom.c (BINDTEXTDOMAIN): Don't define local variable
	len if not needed.
	Patches by Jim Meyering.

	* stdio-common/vfprintf.c [%S]: Don't clear mbstate twice;
	wcsrtombs must put it into initial state.

1998-04-29  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconv/gconv_simple.c: Fix endian bug.  Don't put side effects in
	argument of bswap_XX macro.

1998-04-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/Makefile (EBCDIC-DK-NO-A-routines): Fix typo in
	variable name.

1998-04-28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/semctl.c (semctl): Define own union
	semun and use stdarg macros to get the value.
	* sysdeps/generic/semctl.c: Don't use union semun.

	* sysvipc/sys/sem.h: Don't use union semun in semctl prototype.

	* string/basename.c [!_LIBC]: Define function as gnu_basename.

	* posix/getopt.c [!__GNU_LIBRARY__]: Include string.h or
	strings.h.

	* stdlib/grouping.h: Accept ungrouped numbers even if locale
	defines grouping.

	* intl/hash-string.h: Don't include values.h.

	* inet/Makefile (tests): Add tst-ether_aton.
	* inet/tst-ether_aton.c: New file.

	* inet/ether_aton_r.c (ether_aton_r): Preserve high-nibble value
	in hex conversion.
	* inet/ether_aton.c (ether_aton): Declare result variable static.
	Reported by ahyung@unixg.ubc.ca.

	* sysdeps/unix/sysv/linux/bits/sem.h: Don't define union semun.
	Define macro _SEM_SEMUN_UNDEFINED instead.
	Reported by Dirk Laessig <d.laessig@tu-bs.de>.

	* stdio-common/tst-wc-printf.c: New file.  Test for %S and %C format.
	* stdio-common/Makefile (tests): Add tst-wc-printf.

1998-04-28 16:32  Philip Blundell  <philb@gnu.org>

	* manual/stdio.texi (Variable Arguments Output): Correct variable
	name.  Patch from Ewan Mellor <em@nexus.co.uk>

1998-04-27  Ulrich Drepper  <drepper@cygnus.com>

	* intl/dcgettext.c: Remove unneeded definition of
	internal_function.

1998-04-27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/Makefile ($(objpfx)iconv-test.out): Use this as target
	instead of do-iconv-test.
	($(objpfx)gconv-modules): Define rule only if objpfx is not
	empty.

1998-04-27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* string/string.h: Fix feature test.

1998-04-27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/iso646.c (BODY): Don't use character constants that
	depend on signedness of char.

1998-04-27  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/Makefile [$(subdirs)=misc]
	(sysdep_routines): Add s_pread64 and s_pwrite64.

1998-04-27 09:54  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile (distribute): Remove generated .h files.
	* iconvdata/koi8-r.h: Removed.
	* iconvdata/latin-greek-1.h: Removed.
	* iconvdata/latin-greek.h: Removed.

	* iconvdata/testdata/CP1258..UTF8: New iconv test source.
	* iconvdata/KOI-8: Likewise.
	* iconvdata/KOI-8..UTF8: Likewise.
	* iconvdata/KOI8-R: Likewise.
	* iconvdata/KOI8-R..UTF8: Likewise.

1998-04-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* streams/Makefile (headers): Add sys/stropts.h.
	* streams/sys/stropts.h: New file.

1998-04-25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/ttyname.c,
	sysdeps/unix/sysv/linux/ttyname_r.c: New files, like
	sysdeps/posix/ttyname*.c, but look in /dev/pts first.

1998-04-25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/ptsname.c: Fix off-by-one bug in second
	argument of _itoa_word.

1998-04-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/syscalls.list (s_getcwd, s_getdents,
	s_pread64, s_pwrite64, s_reboot, s_sigpending, s_sigprocmask): Set
	caller to getcwd, getdents, pread64, pwrite64, reboot, sigpending,
	sigprocmask, resp., instead of EXTRA.

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Remove
	s_pread64 and s_pwrite64.

1998-04-26 18:44  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Correct rules to generate gap table.
	* iconvdata/gap.pl: Simplify.

	* iconvdata/TESTS: Name new tests.
	* iconvdata/testdata/CP1250: New file.
	* iconvdata/testdata/CP1250..UTF8: New file.
	* iconvdata/testdata/CP1251: New file.
	* iconvdata/testdata/CP1251..UTF8: New file.
	* iconvdata/testdata/CP1252: New file.
	* iconvdata/testdata/CP1252..UTF8: New file.
	* iconvdata/testdata/CP1253: New file.
	* iconvdata/testdata/CP1253..UTF8: New file.
	* iconvdata/testdata/CP1254: New file.
	* iconvdata/testdata/CP1254..UTF8: New file.
	* iconvdata/testdata/CP1255: New file.
	* iconvdata/testdata/CP1255..UTF8: New file.
	* iconvdata/testdata/CP1256: New file.
	* iconvdata/testdata/CP1256..UTF8: New file.
	* iconvdata/testdata/CP1257: New file.
	* iconvdata/testdata/CP1257..UTF8: New file.

1998-04-26  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Add rules for ISO-2022-KR.
	* iconvdata/iso-2022-kr.c: New file.

	* iconvdata/gconv-modules: Add entry for ISO-2022-JP, ISO-2022-JP-2,
	and ISO-2022-KR.

1998-04-25 18:39  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Use gap method for iso8859-5, iso8859-7,
	iso8859-8 and iso8859-10.
	* iconvdata/iso8859-5.c: Change to use gap method.
	* iconvdata/iso8859-7.c: Likewise.
	* iconvdata/iso8859-8.c: Likewise.
	* iconvdata/iso8859-10.c: Likewise.

	* iconvdata/Makefile: Add rules for ISO-2022-JP module.
	* iconv/skeleton.c: Allow END_LOOP do be defined and use it at the
	end of the loop.
	* iconvdata/iso-2022-jp.c: New file.

	* iconvdata/ksc5601.c: Don't use uint16_t to represent byte sequence.
	* iconvdata/ksc5601.h: Unify function interfaces.
	* iconvdata/euckr.c: Adapt for changed ksc5601.h interface.
	* iconvdata/uhc.c: Likewise.

	* iconvdata/gb2312.h: Use correct types.

	* iconvdata/iso646.c (gconv_open): Correctly initialize the character
	size elements of data.

1998-04-24  Ulrich Drepper  <drepper@cygnus.com>

	* string/tst-svc.expect: Adapt for change in .input.
	* string/tst-svc.input: More tests.

1998-04-24 17:15  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Add rules for new modules.
	* iconvdata/gconv-modules: Likewise.
	* iconvdata/cp737.c: New file.
	* iconvdata/cp737.h: New file.
	* iconvdata/cp775.c: New file.
	* iconvdata/cp775.h: New file.
	* iconvdata/cp874.c: New file.
	* iconvdata/cp874.h: New file.

1998-04-24 16:30  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Create target directory before generating
	headers.

1998-04-23  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* misc/sys/cdefs.h (__REDIRECT): Handle systems with non-empty
	__USER_LABEL_PREFIX__.
	(__ASMNAME, __ASMNAME2): New macros.

1998-04-24  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c: Include sys/param.h for MAX.

1998-04-24 21:44  Richard Henderson  <rth@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (ftruncate): Make
	__ftruncate the strong symbol, and add weak alias.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.

1998-04-24  Ulrich Drepper  <drepper@cygnus.com>

	* termios/cfsetspeed.c: Make code cleaner and add missing const.
	Patch by Joe Keane <jgk@jgk.org>.

	* inet/rcmd.c (__ivaliduser): Check buf for being NULL before
	free()ing.

1998-04-24 13:56  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/bits/socket.h: Add #defines for enum values.
	Patch by Thomas Bushnell, n/BSG.

1998-04-24  Ulrich Drepper  <drepper@cygnus.com>

	* inet/rcmd.c (iruserok): Initialize hostf variable to NULL.

1998-04-24  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Put generated headers in build directory.

1998-04-23 22:43  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c (fillin_rpath): Handle empty element returned by
	strsep as current directory.

	* iconv/gconv_builtin.h: Add aliases unicode and unicodebig for
	Java.  Add definitions for unicodelittle implementation.
	* iconv/gconv_int.h: Add declaration for unicodelittle functions.
	* iconv/gconv_simple.c: Define unicodelittle functions.

	* iconv/iconv_prog.c: Make program print information about position
	of illegal character in input.

	* iconv/skeleton.c: Use __strcasecmp instead of __strcasestr for
	comparison of charset name.
	* iconvdata/big5.c (CHARSET_NAME): Adapt for this.
	* iconvdata/ebcdic-at-de-a.c: Likewise.
	* iconvdata/ebcdic-at-de.c: Likewise.
	* iconvdata/ebcdic-ca-fr.c: Likewise.
	* iconvdata/euccn.c: Likewise.
	* iconvdata/eucjp.c: Likewise.
	* iconvdata/euckr.c: Likewise.
	* iconvdata/euctw.c: Likewise.
	* iconvdata/hp-roman8.c: Likewise.
	* iconvdata/iso6937.c: Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/iso8859-10.c: Likewise.
	* iconvdata/iso8859-2.c: Likewise.
	* iconvdata/iso8859-3.c: Likewise.
	* iconvdata/iso8859-4.c: Likewise.
	* iconvdata/iso8859-5.c: Likewise.
	* iconvdata/iso8859-6.c: Likewise.
	* iconvdata/iso8859-7.c: Likewise.
	* iconvdata/iso8859-8.c: Likewise.
	* iconvdata/iso8859-9.c: Likewise.
	* iconvdata/johab.c: Likewise.
	* iconvdata/koi-8.c: Likewise.
	* iconvdata/koi8-r.c: Likewise.
	* iconvdata/latin-greek-1.c: Likewise.
	* iconvdata/latin-greek.c: Likewise.
	* iconvdata/sjis.c: Likewise.
	* iconvdata/t61.c: Likewise.
	* iconvdata/uhc.c: Likewise.

	* iconvdata/iso646.c: Add support for more ISO 646 variants.
	* iconvdata/TESTS: Add tests for ISO646 module.
	* iconvdata/gconv-modules: Add new modules.
	* iconvdata/testdate/CSA_Z243.4-1985-1: New tests for ISO646 module.
	* iconvdata/testdate/CSA_Z243.4-1985-1..UCS2: Likewise.
	* iconvdata/testdate/CSA_Z243.4-1985-2: Likewise.
	* iconvdata/testdate/CSA_Z243.4-1985-2..UCS4: Likewise.
	* iconvdata/testdate/DIN_66003: Likewise.
	* iconvdata/testdate/DIN_66003..UTF8: Likewise.
	* iconvdata/testdate/DS_2089: Likewise.
	* iconvdata/testdate/DS_2089..UTF8: Likewise.
	* iconvdata/testdate/ES: Likewise.
	* iconvdata/testdate/ES..UTF8: Likewise.
	* iconvdata/testdate/ES2: Likewise.
	* iconvdata/testdate/ES2..UTF8: Likewise.
	* iconvdata/testdate/GB_1988-80: Likewise.
	* iconvdata/testdate/GB_1988-80..UTF8: Likewise.
	* iconvdata/testdate/IT: Likewise.
	* iconvdata/testdate/IT..UTF8: Likewise.
	* iconvdata/testdate/JIS_C6220-1969-RO: Likewise.
	* iconvdata/testdate/JIS_C6220-1969-RO..UTF8: Likewise.
	* iconvdata/testdate/JIS_C6229-1984-B: Likewise.
	* iconvdata/testdate/JIS_C6229-1984-B..UTF8: Likewise.
	* iconvdata/testdate/JUS_I.B1.002: Likewise.
	* iconvdata/testdate/JUS_I.B1.002..UTF8: Likewise.
	* iconvdata/testdate/KSC5636: Likewise.
	* iconvdata/testdate/KSC5636..UTF8: Likewise.
	* iconvdata/testdate/MSZ_7795.3: Likewise.
	* iconvdata/testdate/MSZ_7795.3..UTF8: Likewise.
	* iconvdata/testdate/NC_NC00-10: Likewise.
	* iconvdata/testdate/NC_NC00-10..UTF8: Likewise.
	* iconvdata/testdate/NF_Z_62-010: Likewise.
	* iconvdata/testdate/NF_Z_62-010..UTF8: Likewise.
	* iconvdata/testdate/NF_Z_62-010_1973: Likewise.
	* iconvdata/testdate/NF_Z_62-010_1973..UTF8: Likewise.
	* iconvdata/testdate/NS_4551-1: Likewise.
	* iconvdata/testdate/NS_4551-1..UTF8: Likewise.
	* iconvdata/testdate/NS_4551-2: Likewise.
	* iconvdata/testdate/NS_4551-2..UTF8: Likewise.
	* iconvdata/testdate/PT: Likewise.
	* iconvdata/testdate/PT..UTF8: Likewise.
	* iconvdata/testdate/PT2: Likewise.
	* iconvdata/testdate/PT2..UTF8: Likewise.
	* iconvdata/testdate/SEN_850200_B: Likewise.
	* iconvdata/testdate/SEN_850200_B..UTF8: Likewise.
	* iconvdata/testdate/SEN_850200_C: Likewise.
	* iconvdata/testdate/SEN_850200_C..UTF8: Likewise.

	* iconvdata/cns11643.h: Use uint32_t instead of wchar_t.
	* iconvdata/cns11643l1.h: Likewise.
	* iconvdata/latin-greek-1.h: Likewise.
	* iconvdata/latin-greek.h: Likewise.
	* iconvdata/koi8-r.h: Likewise.
	* iconvdata/jis0212.h: Likewise.
	* iconvdata/gb2312.h: Likewise.
	* iconvdata/ksc5601.h: Likewise.

	* iconvdata/8bit-gap.c: Use 32 bit type for idx element of struct gap.

	* iconvdata/Makefile: Add rules for lots of more modules.
	* iconvdata/cp1250.c: New file.
	* iconvdata/cp1251.c: New file.
	* iconvdata/cp1252.c: New file.
	* iconvdata/cp1253.c: New file.
	* iconvdata/cp1254.c: New file.
	* iconvdata/cp1255.c: New file.
	* iconvdata/cp1256.c: New file.
	* iconvdata/cp1257.c: New file.
	* iconvdata/ebcdic-dk-no-a.c: New file.
	* iconvdata/ebcdic-dk-no.c: New file.
	* iconvdata/ebcdic-es-a.c: New file.
	* iconvdata/ebcdic-es-s.c: New file.
	* iconvdata/ebcdic-es.c: New file.
	* iconvdata/ebcdic-fi-se-a.c: New file.
	* iconvdata/ebcdic-fi-se.c: New file.
	* iconvdata/ebcdic-fr.c: New file.
	* iconvdata/ebcdic-is-friss.c: New file.
	* iconvdata/ebcdic-it.c: New file.
	* iconvdata/ebcdic-pt.c: New file.
	* iconvdata/ebcdic-uk.c: New file.
	* iconvdata/ebcdic-us.c: New file.
	* iconvdata/ibm037.c: New file.
	* iconvdata/ibm038.c: New file.
	* iconvdata/ibm1004.c: New file.
	* iconvdata/ibm1026.c: New file.
	* iconvdata/ibm1047.c: New file.
	* iconvdata/ibm256.c: New file.
	* iconvdata/ibm273.c: New file.
	* iconvdata/ibm274.c: New file.
	* iconvdata/ibm275.c: New file.
	* iconvdata/ibm277.c: New file.
	* iconvdata/ibm278.c: New file.
	* iconvdata/ibm280.c: New file.
	* iconvdata/ibm281.c: New file.
	* iconvdata/ibm284.c: New file.
	* iconvdata/ibm285.c: New file.
	* iconvdata/ibm290.c: New file.
	* iconvdata/ibm297.c: New file.
	* iconvdata/ibm420.c: New file.
	* iconvdata/ibm423.c: New file.
	* iconvdata/ibm424.c: New file.
	* iconvdata/ibm437.c: New file.
	* iconvdata/ibm500.c: New file.
	* iconvdata/ibm850.c: New file.
	* iconvdata/ibm851.c: New file.
	* iconvdata/ibm852.c: New file.
	* iconvdata/ibm855.c: New file.
	* iconvdata/ibm857.c: New file.
	* iconvdata/ibm860.c: New file.
	* iconvdata/ibm861.c: New file.
	* iconvdata/ibm862.c: New file.
	* iconvdata/ibm863.c: New file.
	* iconvdata/ibm864.c: New file.
	* iconvdata/ibm865.c: New file.
	* iconvdata/ibm868.c: New file.
	* iconvdata/ibm869.c: New file.
	* iconvdata/ibm870.c: New file.
	* iconvdata/ibm871.c: New file.
	* iconvdata/ibm875.c: New file.
	* iconvdata/ibm880.c: New file.
	* iconvdata/ibm891.c: New file.
	* iconvdata/ibm903.c: New file.
	* iconvdata/ibm904.c: New file.
	* iconvdata/ibm905.c: New file.
	* iconvdata/ibm918.c: New file.

	* locale/iso-4217.def: Update.
	* localedata/locales/pt_BR: Correct.  Patches by Andreas Jaeger.

	* stdio-common/vfscanf.h: Recognize nan and inf in floating-point
	formats.

1998-04-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/dl-load.c (_dl_init_paths): ';' is also a terminal for
	LD_LIBRARY_PATH.

1998-04-22  Gordon Matzigkeit  <gord@profitpress.com>

	* Makerules: Change occurances of `cd dir; cmd' to `cd dir && cmd'.
	* Makefile: Likewise.
	* posix/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.

1998-04-22  Gordon Matzigkeit  <gord@profitpress.com>

	* sysdeps/mach/hurd/bits/dirent.h: New file.
	* sysdeps/mach/hurd/readdir64.c: New file.
	* sysdeps/mach/hurd/readdir64_r.c: New file.

1998-04-21  Gordon Matzigkeit  <gord@profitpress.com>

	* stdio/stdio.h (vasprintf, __asprintf, asprintf, vdprintf,
	dprintf): Synchronize declarations with libio/stdio.h.

1998-04-21  Gordon Matzigkeit  <gord@profitpress.com>

	* elf/dlerror.c (dlerror): Don't assume that
	__libc_internal_tsd_get is defined.  __libc_getspecific is already
	well-protected, so just use it directly.

1998-04-22  Gordon Matzigkeit  <gord@profitpress.com>

	* io/ftw.h (ftw): Fix typo.

1998-04-21  Gordon Matzigkeit  <gord@profitpress.com>

	* sysdeps/gnu/utmp_file.c: Fix typo.

1998-04-22 11:06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/run-iconv-test.sh: Fix more portability bugs.  When
	one part of a test fails move on to the next test.

1998-04-24  5:45  Richard Henderson  <rth@cygnus.com>

	* sysdeps/alpha/bits/setjmp.h (_JMPBUF_UNWINDS): Added.

1998-04-21  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/i386/bits/setjmp.h (_JMPBUF_UNWINDS): Compare addresses
	as pointers, not signed integers.

1998-04-22 11:06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/bits/setjmp.h (_JMPBUF_UNWINDS): Added.

1998-04-21 21:49  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* misc/sys/cdefs.h: New macro __REDIRECT to support changing the
	asm symbol name of functions.
	* include/features.h: Kill redundant test.

	* dirent/dirent.h: Use new macros to implement __USE_FILE_OFFSET64.
	* io/ftw.h: Likewise.
	* io/sys/stat.h: Likewise.
	* io/sys/statfs.h: Likewise.
	* io/sys/statvfs.h: Likewise.
	* libio/stdio.h: Likewise.
	* resource/sys/resource.h: Likewise.
	* rt/aio.h: Likewise.

	* posix/unistd.h: Use new macros for __USE_FILE_OFFSET64 and
	 __FAVOR_BSD.
	* signal/signal.h: Use new macros for BSD vs. SysV signal().

	* misc/Makefile: Drop bsd-compat.c.  Make libbsd-compat.a
	a dummy library.
	* misc/bsd-compat.c: Removed.

1998-04-21 20:32  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/loop.c: Allow EXTRA_LOOP_DECLS be defined and use it in
	function declaration.
	* iconv/skeleton.c: Allow PREPARE_LOOP and EXTRA_LOOP_ARGS be defined
	and use them in conversion function.
	* iconvdata/Makefile (modules): Re-add ISO6446.
	* iconvdata/TEST: Add tests for ASCII variants.
	* iconvdata/iso646.c: Rewrite to use loop.c and skeleton.c.
	* iconvdata/testdata/ANSI_X3.4-1968: New file.
	* iconvdata/testdata/BS_4730: New file.
	* iconvdata/testdata/BS_4730..UTF8: New file.

1998-04-21 19:05  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv.h (struct gconv_step): Add element stateful.
	* iconv/gconv_builtin.c (__gconv_builtin_trans): Initialize stateful
	to zero for all internal conversions.
	* iconv/skeleton.c: Initialize stateful depending on whether or not
	RESET_STATE is defined to one or zero respectively.
	* stdlib/mblen.c: Use stateful element of currently selected
	converter for result if S is NULL.
	* stdlib/mbtowc.c: Likewise.
	* stdlib/wctomb.c: Likewise.

1998-04-21 18:00  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv.c (__gconv): Remove bogus input buffer size computation.

	* iconv/gconv_open.c (__gconv_open): Initialize outbufend element.

	* iconv/gconv_simple.c (__gconv_transform_internal_ascii): Don't use
	character in comparison with uint32_t.
	(__gconv_transform_internal_utf8): Specify MAX_NEEDED_TO.
	(__gconv_transform_utf8_internal): Specify MAX_NEEDED_FROM.
	Optimize BODY a bit.

	* iconv/loop.c: Require MIN_NEEDED_INPUT and MIN_NEEDED_OUTPUT to
	be defined.

	* iconv/skeleton.c: Also reset converted counter in case of an error.
	Call reset function using correct value for output buffer start.

	* iconvdata/Makefile: Re-enable tests.

	* iconvdata/iso8859-1.c: Swap MIN_NEEDED_INPUT and MIN_NEEDED_OUTPUT
	value for to-conversion.

	* iconvdata/TESTS: Add new third column.
	* iconvdata/run-iconv-test.sh: Add support for charsets which are
	not ASCII based.
	* iconvdata/testdata/suntzus: New file.

	* elf/dl-minimal.c (__strtol_internal): Increment pointer to string
	while reading.  Correctly used base.  Little optimization.
	(__strtoul_internal): Likewise.

	* elf/rtld.c (dl_main): Test to avoid duplicate call of _dl_init_paths
	was wrong.  Use explicit variable.

1998-04-20 23:49  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* configure.in: Check for awk.
	* config.make.in: Add AWK to be substituted.

	* manual/xtract-typefun.awk: Rewrite to eliminate gawk extensions.
	* manual/users.texi: Fix typo exposed by above rewrite.

	* Makefile: Invoke awk using AWK variable.
	* csu/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* mach/Makefile: Likewise.
	* manual/Makefile: Likewise.
	* sysdeps/gnu/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.
	* sysdeps/unix/Makefile: Likewise.
	* timezone/Makefile: Likewise.

1998-04-10  Gordon Matzigkeit  <gord@profitpress.com>

	* sysdeps/gnu/errlist.awk (ERR_REMAP): Implement error code to
	array index translation.
	(SYS_ERRLIST_ALIAS, SYS_NERR_ALIAS): Make weak aliases only if
	these are defined.

	* sysdeps/mach/hurd/Dist: Add errlist.c to distribution.

	* sysdeps/mach/hurd/errlist.c: New file.
	(ERR_TRANSLATE): Map Hurd error codes into errlist indices.
	(_hurd_errlist): The Hurd error list doesn't have Unix sys_errlist
	semantics, so rename it.

1998-04-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/run-iconv-test.sh: Make portable.  Always test all
	conversions.

1998-04-21 12:30  H.J. Lu  <hjl@gnu.org>

	* wcsmbs/wcsrtombs.c (__wcsrtombs): Initialize result to 0.
	* wcsmbs/wcsnrtombs.c: Likewise.

1998-04-21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/dl-sysdep.c: Handle _dl_hwcap correctly.

	* wcsmbs/btowc.c (__btowc): Declare inptr as const char *.

	* time/strftime.c (my_strftime): Initialize pad variable in
	declaration.

	* iconvdata/big5.c: Don't use character constants in comparisons
	with unsigned value.

1998-04-20 18:00  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add __dgettext to GLIBC_2.0 and __libc_longjmp, and
	__libc_siglongjmp to GLIBC_2.1.

	* elf/dl-minimal.c (__assert_perror_fail): Don't use strerror, use
	__strerror_r.

	* iconv/Makefile: Don't run tests now.

	* iconv/iconv_prog.c (process_block): If loop is repeated, call iconv
	with correct output buffer.

	Major rewrite of the low-level gconv functionality.
	* iconv/gconv.c: Rewritten.
	* iconv/gconv.h: Likewise.
	* iconv/gconv_builtin.c: Likewise.
	* iconv/gconv_builtin.h: Likewise.
	* iconv/gconv_conf.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_open.c: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconv/iconv.c: Likewise.
	* iconvdata/8bit-gap.c: Likewise.
	* iconvdata/8bit-generic.c: Likewise.
	* iconvdata/Makefile: Likewise.
	* iconvdata/big5.c: Likewise.
	* iconvdata/cns11643.c: Likewise.
	* iconvdata/cns11643.h: Likewise.
	* iconvdata/cns11643l1.c: Likewise.
	* iconvdata/cns11643l1.h: Likewise.
	* iconvdata/ebcdic-at-de-a.c: Likewise.
	* iconvdata/ebcdic-at-de.c: Likewise.
	* iconvdata/ebcdic-ca-fr.c: Likewise.
	* iconvdata/euccn.c: Likewise.
	* iconvdata/eucjp.c: Likewise.
	* iconvdata/euckr.c: Likewise.
	* iconvdata/euctw.c: Likewise.
	* iconvdata/gb2312.c: Likewise.
	* iconvdata/gb2312.h: Likewise.
	* iconvdata/hp-roman8.c: Likewise.
	* iconvdata/iso646.c: Likewise.
	* iconvdata/iso6937.c: Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/iso8859-10.c: Likewise.
	* iconvdata/iso8859-2.c: Likewise.
	* iconvdata/iso8859-3.c: Likewise.
	* iconvdata/iso8859-4.c: Likewise.
	* iconvdata/iso8859-5.c: Likewise.
	* iconvdata/iso8859-6.c: Likewise.
	* iconvdata/iso8859-7.c: Likewise.
	* iconvdata/iso8859-8.c: Likewise.
	* iconvdata/iso8859-9.c: Likewise.
	* iconvdata/jis0201.c: Likewise.
	* iconvdata/jis0201.h: Likewise.
	* iconvdata/jis0208.c: Likewise.
	* iconvdata/jis0208.h: Likewise.
	* iconvdata/jis0212.c: Likewise.
	* iconvdata/jis0212.h: Likewise.
	* iconvdata/johab.c: Likewise.
	* iconvdata/koi-8.c: Likewise.
	* iconvdata/koi8-r.c: Likewise.
	* iconvdata/ksc5601.c: Likewise.
	* iconvdata/ksc5601.h: Likewise.
	* iconvdata/latin-greek-1.c: Likewise.
	* iconvdata/latin-greek.c: Likewise.
	* iconvdata/run-iconv-test.sh: Likewise.
	* iconvdata/sjis.c: Likewise.
	* iconvdata/t61.c: Likewise.
	* iconvdata/uhc.c: Likewise.
	* wcsmbs/btowc.c: Likewise.
	* wcsmbs/mbrtowc.c: Likewise.
	* wcsmbs/mbsnrtowcs.c: Likewise.
	* wcsmbs/mbsrtowcs.c: Likewise.
	* wcsmbs/wcrtomb.c: Likewise.
	* wcsmbs/wcsmbsload.c: Likewise.
	* wcsmbs/wcsnrtombs.c: Likewise.
	* wcsmbs/wcsrtombs.c: Likewise.
	* wcsmbs/wctob.c: Likewise.
	* iconv/loop.c: New file.
	* iconv/skeleton.c: New file.

	* stdlib/mblen.c: Handle empty input string correctly.
	* stdlib/mbtowc.c: Likewise.

	* posix/getopt.c: Various cleanups.

	* sysdeps/arm/bits/setjmp.h: Add copyright text.
	* sysdeps/i386/bits/setjmp.h: Likewise.
	* sysdeps/m68k/bits/setjmp.h: Likewise.
	* sysdeps/powerpc/bits/setjmp.h: Likewise.
	* sysdeps/sparc/sparc32/bits/setjmp.h: Likewise.

	* sysdeps/generic/longjmp.c: Rename function to __libc_siglongjmp
	and make longjmp weak alias.

1998-04-18 20:29  Philip Blundell  <Philip.Blundell@pobox.com>

	* iconv/Makefile (routines): Only include gconv_dl if building for
	an ELF system - dynamic linking is not available on a.out.
	(CFLAGS-gconv_conf.c): Define STATIC_GCONV if omitting gconv_dl
	due to above check.
	* iconv/gconv_db.c: If STATIC_GCONV defined, don't try to call
	routines from gconv_dl.

1998-04-17  Gordon Matzigkeit  <gord@profitpress.com>

	* csu/init.c (_IO_stdin_used): Protect with USE_IN_LIBIO so that
	we can compile without libio.

1998-04-20 16:28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/mach/hurd/Subdirs: Remove login.

1998-04-11  Gordon Matzigkeit  <gord@profitpress.com>

	* db2/compat.h: Include <errno.h>, to make sure we get the
	definition of EFTYPE before we define it ourselves.

1998-04-10  Gordon Matzigkeit  <gord@profitpress.com>

	* sysdeps/generic/bits/socket.h: Protect against multiple inclusion.
	* sysdeps/mach/hurd/bits/ioctls.h: Likewise.
	Fix typo to allow inclusion from sys/ioctl.h again.

1998-04-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/*.[ch]: Clean up namespace.  Optimize character lookup.

1998-04-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libc.map: Export __strerror_r.  Remove _strerror_internal.

1998-04-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/strcasestr.c: Undefine strcasestr, not strstr.
	Also undefine __strcasestr.

1998-04-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/regex.c: Rename __re_max_failures back to re_max_failures,
	aliases do not work with global variables due to copy relocations.

1998-04-20 15:12  Ulrich Drepper  <drepper@cygnus.com>

	* manual/creature.texi: Fix type.  Patch by Andreas Schwab.

1998-04-20 13:47  Ulrich Drepper  <drepper@cygnus.com>

	* signal/sighold.c: Include stddef.h for NULL definition.
	* signal/sigrelse.c: Likewise.
	* sysdeps/posix/sigignore.c: Likewise.
	* sysdeps/posix/sigset.c: Likewise.
	* sysdeps/posix/waitid.c: Likewise.
	* sysdeps/unix/sysv/linux/rt_sigsuspend.c: Likewise.
	* sysdeps/unix/sysv/linux/rt_sigtimedwait.c: Likewise.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c: Likewise.
	* wcsmbs/mbsrtowcs.c: Include stdlib.h for MB_CUR_MAX.
	Patch by Franz Sirl <Franz.Sirl-kernel@lauterbach.com>.

1998-04-13  Mark Kettenis  <kettenis@phys.uva.nl>

	* login/Makefile (headers): Remove utmpx.h and bits/utmpx.h.
	* login/getutent.c (getutxent): Remove alias.
	* login/getutent_r.c (setutxent, pututxline, endutxent):
	Remove aliases.
	* login/getutid.c (getutxid): Remove alias.
	* login/getutline.c (getutxline): Remove alias.
	* login/utmp.h: Add prototypes for __updwtmp, __getutent,
	__getutid, __getutline and __pututline.
	* login/utmpx.h: Moved to ...
	* sysdeps/gnu/utmpx.h: ... here.  [__USE_GNU]: Define UTMPX_FILE,
	UTMPX_FILENAME, WTMPX_FILE and WTMPX_FILENAME, declare utmpxname
	and updwtmpx.
	* login/updwtmp.c: Moved to ...
	* sysdeps/generic/updwtmp.c: ... here.  (updwtmp): Generalized by
	allowing file name transformation.
	* sysdeps/gnu/updwtmp.c: New file.  Use generic implementation with
	additional file name transformation.
	* sysdeps/unix/sysv/linux/updwtmp.c: Likewise.
	* login/utmp_file.c: Moved to ...
	* sysdeps/generic/utmp_file.c: ... here.  (setutent_file):
	Generalized by allowing file name transformation.  Do not
	print error message.  Library functions should not print them.
	Reported by Jim Meyering.
	* sysdeps/gnu/utmp_file.c: New file.  Use generic implementation
	with additional file name transformation.
	* sysdeps/unix/sysv/linux/utmp_file.c: Likewise.
	* sysdeps/gnu/Makefile [$(subdir)=login] (sysdep_routines): Add
	setutxent, getutxent, endutxent, getutxid, getutxid, getutxline,
	pututxline, utmpxname and updwtmpx.  (sysdep_headers): Add utmpx.h
	and bits/utmpx.h.
	* sysdeps/gnu/bits/utmpx.h [__USE_GNU] Include paths.h.
	(_PATH_UTMPX): Define to _PATH_UTMP.  (_PATH_WTMPX): Define to
	_PATH_WTMPX.  (RUN_LVL): Define only if __USE_GNU.  (ACCOUNTING):
	Define if __USE_GNU.
	* sysdeps/generic/setutxent.c: New file.
	* sysdeps/generic/getutxent.c: New file.
	* sysdeps/generic/endutxent.c: New file.
	* sysdeps/generic/getutxid.c: New file.
	* sysdeps/generic/getutxline.c: New file.
	* sysdeps/generic/pututxline.c: New file.
	* sysdeps/generic/utmpxname.c: New file.
	* sysdeps/generic/updwtmpx.c: New file.
	* sysdeps/unix/sysv/linux/paths.h (_PATH_UTMP_DB): Remove.
	* sysdeps/generic/bits/utmpx.h: Remove.

1998-04-20  Ulrich Drepper  <drepper@cygnus.com>

	* posix/wordexp-test.c (main): Initialize ifs element of ts for
	~root test.

1998-04-17 07:53  H.J. Lu  <hjl@gnu.org>

	* sysdeps/unix/sysv/linux/i386/s_pread64.S: Fix a typo.

1998-04-17 11:32  Ulrich Drepper  <drepper@cygnus.com>

	* libio/oldfileops.c (_IO_old_file_seekoff): Define temporary st
	variable using _G_stat64.
	* libio/fileops.c: Remove macro definition of fstat, it is in the
	global header.
	Reported by Thorsten Kukuk <kukuk@weber.uni-paderborn.de>.

1998-04-17  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/arm/strlen.S: New file, based on code by Matthew Wilcox
	<willy@odie.barnet.ac.uk>.

1998-04-16  Philip Blundell  <Philip.Blundell@pobox.com>

	* inet/netinet/in.h (IN6_IS_ADDR_MC_NODELOCAL): New macro,
	required by IPv6 Basic API.
	(IN6_IS_ADDR_MC_LINKLOCAL): Likewise.
	(IN6_IS_ADDR_MC_SITELOCAL): Likewise.
	(IN6_IS_ADDR_MC_ORGLOCAL): Likewise.
	(IN6_IS_ADDR_MC_GLOBAL): Likewise.

1998-04-15 16:41  Ulrich Drepper  <drepper@cygnus.com>

	Don't name internal representation since it might be different from
	the external form (namely on little endian machines).
	* iconv/gconv_builtin.h: Add UCS4 support.  Change references to
	UCS4 into references to INTERNAL.
	* iconv/gconv_simple.c: Implement UCS4<->INTERNAL converters.
	Add endianess support to UCS functions.  Change references to
	UCS4 into references to INTERNAL.
	* iconv/gconv_int.h: Change references to UCS4 into references to
	INTERNAL.
	* iconv/iconv_prog.c: Don't mention INTERNAL in --list output.
	* iconvdata/gconv-modules: Change accordingly.
	* wcsmbs/wcsmbsload.c: Change names to use INTERNAL.

	* iconv/gconv_simple.c: Adjust input buffer pointer for output buffer
	overflow.
	* iconvdata/8bit-gap.c: Likewise.
	* iconvdata/8bit-generic.c: Likewise.
	* iconvdata/big5.c: Likewise.
	* iconvdata/euccn.c: Likewise.
	* iconvdata/eucjp.c: Likewise.
	* iconvdata/euckr.c: Likewise.
	* iconvdata/euctw.c: Likewise.
	* iconvdata/iso646.c: Likewise.
	* iconvdata/iso6937.c: Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/johab.c: Likewise.
	* iconvdata/sjis.c: Likewise.
	* iconvdata/t61.c: Likewise.
	* iconvdata/uhc.c: Likewise.

	* iconvdata/8bit-gap.c: Correct access to to_ucs4 array.
	* iconvdata/8bit-generic.c: Likewise.

	* iconvdata/TESTS: Add more tests.

	* sysdeps/i386/bits/byteswap.h: Change to use "=r" when ror is used.

1998-04-15 11:47  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Better rules to run tests.

	* iconvdata/testdata/ISO-8859-1..UTF8: New file.
	* iconvdata/testdata/ISO-8859-10: Likewise.
	* iconvdata/testdata/ISO-8859-10..UCS2: Likewise.
	* iconvdata/testdata/ISO-8859-2: Likewise.
	* iconvdata/testdata/ISO-8859-2..UCS4: Likewise.
	* iconvdata/testdata/ISO-8859-2..UTF8: Likewise.
	* iconvdata/testdata/ISO-8859-3: Likewise.
	* iconvdata/testdata/ISO-8859-4: Likewise.
	* iconvdata/testdata/ISO-8859-5: Likewise.
	* iconvdata/testdata/ISO-8859-6: Likewise.
	* iconvdata/testdata/ISO-8859-7: Likewise.
	* iconvdata/testdata/ISO-8859-8: Likewise.
	* iconvdata/testdata/ISO-8859-9: Likewise.

1998-04-15  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/run-iconv-test.sh: Handle $from..$t file to compare
	intermediate result (if available).

	* iconv/gconv_simple.c (__gconv_transform_ucs4_ascii): Fix typo in
	last change.

	* iconvdata/Makefile: Add rules to run run-iconv-test.sh.
	(distribute): Add run-iconv-test.sh and testdata/*.

	* stdlib/testmb.c (main): Simplify mbc array handling.

1998-04-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-minimal.c (__strtol_internal): Correct range check.  Fix
	return value on overflow.

1998-04-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/posix/mkstemp.c (mkstemp): Change value and v to 64
	bits.

1998-04-14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* malloc/mtrace.c (mtrace): Use standard function setvbuf instead
	of non-standard function setbuffer.

1998-04-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* stdio-common/perror.c: Include <string.h> for __strerror_r.

1998-04-14 23:54  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Add rules to run tests.
	* iconvdata/TESTS: New file.
	* iconvdata/run-iconv-test.sh: New file.
	* iconvdata/testdata/ISO-8859-1: New file.

	* iconv/iconv_prog.c (main): Call process_block with OUTPUT stream,
	not stdout.

1998-04-14 18:22  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_builtin.c (__gconv_get_builtin_trans): Initialize
	counter element of step.

	* iconv/gconv_dl.c: Don't mark get_sym as internal function.

	* iconv/gconv_simple.c (__gconv_transform_ucs4_ascii): Correct loop
	termination test.
	(__gconv_transform_ucs4_utf8): Likewise.  Remove unnecessary variable
	ACTUALLY.
	(__gconv_transform_utf8_ucs4): Correct test for empty input.

1998-04-14  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile: Include makeconfig before defining rule to regenerate
	configure files.

	* configure.in: Remove restriction on compiling without static
	libs.

1998-04-14 16:34  Ulrich Drepper  <drepper@cygnus.com>

	* test-skeleton.c: Provide hook for initializing code before the fork.
	* rt/tst-aio.c: Use PREPARE hook to make suer temp files are always
	removed.

	* libio/fcloseall.c (__fcloseall): Return return value of _IO_cleanup.
	* libio/genops.c (_IO_cleanup): Return return value of _IO_flush_all.
	* libio/libioP.h: Adopt _IO_cleanup prototype.

	* stdlib/Makefile (tests): Add test-canon2.
	* stdlib/test-canon2.c: New file.
	* stdlib/canonicalize.c (canonicalize): Allow RESOLVED parameter to
	be NULL.  Use __lxstat, not __lstat.  Correctly recognize long
	symlink sequences.
	(__realpath): Make real function which checks RESOLVED parameter for
	not being NULL.

1998-04-14  Ulrich Drepper  <drepper@cygnus.com>

	* catgets/open_catalog.c (__open_catalog): Fix problems with
	reading non-files.  Always close file.
	Reported by Cristian Gafton <gafton@redhat.com>.

	* elf/dl-minimal.c (__strtol_internal): Prevent overflow warnings.

1998-04-14 13:28  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add various low-level I/O functions.

1998-04-14 10:35  Ulrich Drepper  <drepper@cygnus.com>

	* string/Makefile (routines): Remove strerror_r.
	* string/strerror_r.c: Removed.
	* string/strerror.c: Call __strerror_r for doing the real work.
	* sysdeps/generic/_strerror.c: Rename function to __strerror_r and
	add weak alias strerror_r.
	* sysdeps/mach/_strerror.c: Likewise.
	* assert/assert-perr.c: Use __strerror_r instead of _strerror_internal.
	* elf/dl-error.c (_dl_signal_error): Likewise.
	* elf/dl-profile.c (_dl_start_profile): Likewise.
	* gmon/gmon.c (write_gmon): Likewise.
	* stdio-common/perror.c: Likewise.
	* stdio-common/vfprintf.c: Likewise.

1998-04-10  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/unix/sysv/linux/Makefile [$(subdir)=inet]
	(sysdep_headers): Add netatalk/at.h.

1998-04-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/socket.texi, manual/creature.texi, manual/time.texi:
	Formatting fixes.

1998-04-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/regex.c: Rename __re_syntax_options back to
	re_syntax_options, aliases do not work with global variables due
	to copy relocations.
	(regex_compile): Use syntax parameter instead of
	re_syntax_options.

1998-04-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Document that enable-force-install is default.

1998-04-13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/mktemp.c: Increment `value' in a way which touches
	all needed 36 bits.
	* sysdeps/posix/mkstemp.c: Likewise.

1998-04-13 17:40  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/8bit-gap.c: Simplify step data handling.
	* iconvdata/8bit-generic.c: Likewise.
	* iconvdata/big5.c: Likewise.
	* iconvdata/euccn.c: Likewise.
	* iconvdata/eucjp.c: Likewise.
	* iconvdata/euckr.c: Likewise.
	* iconvdata/euctw.c: Likewise.
	* iconvdata/iso6937.c: Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/jis0208.h: Likewise.
	* iconvdata/jis0212.c: Likewise.
	* iconvdata/jis0212.h: Likewise.
	* iconvdata/johab.c: Likewise.
	* iconvdata/ksc5601.h: Likewise.
	* iconvdata/sjis.c: Likewise.
	* iconvdata/t61.c: Likewise.
	* iconvdata/uhc.c: Likewise.

1998-04-13 16:36  Ulrich Drepper  <drepper@cygnus.com>

	* manual/texinfo.texi: Updated from last version.

1998-04-13 14:52  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/cns11643.c: New file.
	* iconvdata/cns11643.h: New file.
	* iconvdata/cns11643l1.c: New file.
	* iconvdata/cns11643l1.h: New file.
	* iconvdata/euctw.c: New file.
	* iconvdata/Makefile: Add rules for EUC-TW and CNS.
	* iconvdata/gconv-modules: Likewise.

	* iconvdata/eucjp.c: Several bug fixes and improvements.
	* iconvdata/gb2312.h: Likewise.
	* iconvdata/jis0201.h: Likewise.
	* iconvdata/jis0208.h: Likewise.
	* iconvdata/jis0212.h: Likewise.

1998-04-13 09:11  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/eucjp.c: New file.
	* iconvdata/euccn.c: New file.
	* iconvdata/gb2312.h: New file.
	* iconvdata/gb2312.c: New file.
	* iconvdata/Makefile: Add rules for EUC-JP and EUC-CN.
	* iconvdata/gconv-modules: Likewise.

	* iconvdata/euckr.c: Use stdint.h instead of inttypes.h.

1998-04-12  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c
	(DL_FIND_ARG_COMPONENTS): Always initialize auxv.
	Patch by Mark Hatle <fray@kernel.crashing.org>.

1998-04-12 22:47  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/sysv/linux/bits/socket.h (PF_APPLETALK): Correct
	comment.
	(PF_AAL5, AF_AAL5): Rename to *_ATMPVC.
	(PF_ATMSVC, PF_ECONET, AF_ATMSVC, AF_ECONET): Added.

1998-04-12  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/sjis.c (gconv): Remove superfluous varaible declarations.

	* iconvdata/Makefile: Add rules for big5 conversion.
	* iconvdata/gconv-modules: Likewise.
	* iconvdata/big5.c: New file.

	* time/mktime.c (TYPE_MAXIMUM): Add missing cast.
	Patch by Jim Meyering.

1998-04-11  Ulrich Drepper  <drepper@cygnus.com>

	* rt/tst-aio.c: Add test for aio_read and lio_listio.

	* rt/lio_listio.c: Correct total counter handling.

	* rt/aio_misc.c (handle_fildes_io): Correctly dequeue elements
	from request queue.

	* test-skeleton.c (main): Make stdout unbuffered.  Improve message
	of signal on exit even more.

	* rt/aio_suspend.c (aio_suspend): Use PTHREAD_COND_INITIALIZER
	instead of call to pthread_cond_init.
	* rt/lio_listio.c (lio_listio): Likewise.
	* rt/lio_listio64.c (lio_listio64): Likewise.

	* nis/nis_findserv.c: Include sys/socket.h.

1998-04-11 09:33  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (rtobjdir): New variable.
	(rpath-link): Add rtobjdir and thread directory, if available.

	* test-skeleton.c: Add support to remove temporary files.
	Always define test_dir.  Improve message about expected signal.

	* rt/Makefile (tests): Add tst-aio.
	Add rules for tst-aio to be linked with librt and thread library.
	* rt/aio_misc.c: Correct fundamental bugs.
	* rt/aio_suspend.c: Correct bug in test for available request.
	Initialize conditional variable.
	* rt/lio_listio.c: Initialize conditional variable.
	* rt/lio_listio64.c: Likewise.
	* rt/tst-aio.c: New file.

	* sysdeps/libm-ieee754/s_signgam.c: Undo last change.
	* sysdeps/libm-ieee754/w_gamma.c: Likewise.  Adopt for ISO C 9x.
	* sysdeps/libm-ieee754/w_gammaf.c: Likewise.
	* sysdeps/libm-ieee754/w_gammal.c: Likewise.
	* sysdeps/libm-ieee754/w_lgamma.c: Likewise.
	* sysdeps/libm-ieee754/w_lgammaf.c: Likewise.
	* sysdeps/libm-ieee754/w_lgammal.c: Likewise.

1998-04-11 14:49  Mark Kettenis  <kettenis@landau.phys.uva.nl>

	* posix/regex.c [_LIBC] (__re_syntax_options): Initialize to 0.

1998-04-10  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c (open_path): Use correct name for test whether
	directory in load path exists.

	* sysdeps/libm-ieee754/s_expm1.c: Remove variable one.
	* sysdeps/libm-ieee754/e_pow.c: Fix typo.
	Patches by Tom Rini <trini@kernel.crashing.org>.

	* wcsmbs/wcstof_l.c: Declare ____wcstoull_l_internal.
	* wcsmbs/wcstod_l.c: Likewise.
	* wcsmbs/wcstold_l.c: Likewise.

	* include/byteswap.h: New file.

	* malloc/mtrace.c (mtrace): Use smaller output buffer to reduce
	.bss segment size.  Patch by Joe Keane <jgk@jgk.org>.

	* inet/getnameinfo.c (getnameinfo): Change parameter to match
	declaration.  Patch by Richard Henderson.

1998-04-10 12:40  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* manual/process.texi (SIGCHLD example): Save errno.

1998-04-09  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regex.c: Define regerror really as __regerror.
	* posix/regex.h: Add __ protected prototypes for regcomp, regexec,
	regerror and regfree.

	* stdlib/strtof_l.c: Declare ____strtoull_l_internal.
	* stdlib/strtod_l.c: Likewise.
	* stdlib/strtold_l.c: Likewise.

	* intl/gettextP.h [_LIBC] (SWAP): Use byteswap.h macros.

	* sysdeps/i386/i486/bits/string.h: Remove unused variables.

	* misc/syslog.c (closelog_internal): Set LogTag to NULL.
	Patch by Christian Gafton.

1998-04-09 14:27  Ulrich Drepper  <drepper@cygnus.com>

	* manual/socket.texi (Interface Naming): Correct @deftypefun line
	for if_indextoname.

1998-04-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/bits/sockunion.h: Fix error message.

	* manual/socket.texi (Interface Naming): Fix typo.

1998-04-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/examples/filesrv.c (main): Remove filename first.

	* manual/socket.texi (Address Formats): Change ?F_LOCAL, ?F_FILE,
	?F_UNIX.

	* manual/examples/mkfsock.c (make_named_socket): Use PF_LOCAL
	instead of PF_UNIX.

	* manual/examples/filecli.c (main): Use AF_LOCAL
	instead of AF_UNIX.

1998-04-09  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/s_signgam.c: Define __signgam and make
	signgam weak alias.
	* sysdeps/libm-ieee754/w_lgamma.c: Use __signgam not signgam.
	* sysdeps/libm-ieee754/w_lgammaf.c: Likewise.
	* sysdeps/libm-ieee754/w_lgammal.c: Likewise.
	* sysdeps/libm-ieee754/w_gamma.c: Likewise.
	* sysdeps/libm-ieee754/w_gammaf.c: Likewise.
	* sysdeps/libm-ieee754/w_gammal.c: Likewise.

	* login/utmp_daemon.c (open_socket): Use __connect not connect.

1998-04-08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* configure.in: Add new option --enable-force-install.  Substitute
	force_install.
	* config.make.in (force-install): Set from configure.
	* Makerules (force-install): New phony target.
	* Makeconfig (+force): New variable.
	* Makefile: Use it in dependency list of installation targets.
	* db/Makefile: Likewise.
	* db2/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* hurd/Makefile: Likewise.
	* iconv/Makefile: Likewise.
	* iconvdata/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* localedata/Makefile: Likewise.
	* login/Makefile: Likewise.
	* po/Makefile: Likewise.
	* sunrpc/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.
	* sysdeps/standalone/i386/force_cpu386/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/Makefile: Likewise.
	* timezone/Makefile: Likewise.

1998-04-08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/getcwd.c: Use PATH_MAX as default
	alloc_size.  Pass return value of getcwd syscall to realloc.

1998-04-08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/socket.texi: Spelling fixes.

1998-04-08  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-load.c (print_search_path): Remove unused variable.

1998-04-08  Ulrich Drepper  <drepper@cygnus.com>

	* login/utmp_file.c: use __ftruncate not ftruncate.
	* sysdeps/unix/common/syscalls.list: Add __ftruncate as real name
	for system call and make ftruncate weak alias.
	* posix/unistd.h: Add prototype for __ftruncate.
	* login/utmp_daemon.c (open_socket): Use __socket not socket.
	* nscd/nscd_getpw_r.c (__nscd_getpw_r): use __snprintf and __readv
	instead of snprintf and readv.
	* nscd/nscd_getgr_r.c (__nscd_getgr_r): Use __snprintf not
	snprintf.
	* stdlib/strtod.c: Call strtoull/wcstoull's internal functions
	directly.

1998-04-08 20:06  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_conf.c (__gconv_read_conf): Use __realpath not realpath.
	* iconv/gconv_db.c: Use __ protected regex functions.
	* iconv/gconv_simple.c: Use __mbsinit not mbsinit.
	* posix/getopt_init.c: Use __getpid not getpid.
	* posix/regex.c: Rename all global functions to start with __ and
	make old names weak aliases.
	* posix/regex.h: Adopt prototypes for this.
	* stdlib/canonicalize.c: Define __realpath, make canonicalize_file_name
	a weak alias and use __getcwd instead of getcwd.
	* stdlib/stdlib.h: Declare __realpath and __canonicalize_file_name.
	* stdlib/strtod.c: Use __btowc instead of btowc.
	* stdlib/strtol.c: Likewise.
	* sysdeps/libm-ieee754/s_matherr.c: Weaken definition of matherr.
	* sysdeps/unix/sysv/linux/errlist.c: Make sure definitions of sys_nerr
	and sys_errlist are weak.
	* wcsmbs/btowc.c: Define function as __btowc and make btowc weak alias.
	* wcsmbs/mbrtowc.c: Use __mbsinit not mbsinit.
	* wcsmbs/mbsnrtowcs.c: Likewise.
	* wcsmbs/mbsrtowcs.c: Likewise.
	* wcsmbs/wcsnrtombs.c: Likewise.
	* wcsmbs/wcsrtombs.c: Likewise.
	* wcsmbs/mbsinit.c: Define function as __mbsinit and make mbsinit
	weak alias.
	* wcsmbs/wchar.h: Declare __btowc and __mbsinit.
	* wctype/wctype.c: Define function as __wctype and make wctype
	weak alias.
	* wctype/wctype.h: Declare __wctype.

1998-04-08  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfscanf.c: Perform test in %l[ handling correctly.

1998-04-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/_G_config.h (_G_stat64): Define to
	stat64.
	(_G_OPEN64, _G_LSEEK64, _G_FSTAT64): Use namespace clean
	functions.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add __lseek64 alias
	for __llseek.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/llseek.c: Likewise.
	* sysdeps/generic/lseek64.c (lseek64): Rename to __lseek64, and
	make it a weak alias.
	* posix/unistd.h: Declare __lseek64.

	* libio/fileops.c (fstat) [_LIBC]: Use namespace clean function.
	(_IO_file_stat): Fix typo.
	(_IO_file_xsgetn): Update fd->_offset.  Read a multiple of the
	block size from the file.  Use __mempcpy if _LIBC.

1998-04-07 20:32  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/btowc.c: Fix dozends of bugs in untested code.
	* wcsmbs/mbrtowc.c: Likewise.
	* wcsmbs/mbsnrtowcs.c: Likewise.
	* wcsmbs/mbsrtowcs.c: Likewise.
	* wcsmbs/wcrtomb.c: Likewise.
	* wcsmbs/wcsnrtombs.c: Likewise.
	* wcsmbs/wcsrtombs.c: Likewise.
	* wcsmbs/wctob.c: Likewise.

	* iconv/gconv-simple.c (__gconv_transform_ascii_ucs4): Compute
	position of next output character correctly.
	(__gconv_transform_ucs4_ascii): Count used input bytes correctly.

	* stdio-common/vfprintf.c (vfprintf): Clear state before used.

	* stdlib/strtod.c: Don't use mbtowc.

1998-04-07 19:07  H.J. Lu  <hjl@gnu.org>

	* libio/fileops.c (_IO_file_xsgetn): Call __underflow () when
	what we want is smaller than a buffer.

1998-04-07 18:14  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-support.c (_dl_important_hwcaps): Define dummy version of
	this function.

1998-04-07  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Recognize --with-headers flag and determine
	commandline options to be used in compilation.
	* Makeconfig (+includes): Use $(sysincludes).
	* config.make.in (sysincludes): Define from SYSINCLUDES.
	* glibcbug.in: Use SYSINCLUDES information.
	Patches by Zack Weinberg.

1998-04-07 19:03  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* glibcbug.in: On linux, report version of kernel headers seen
	by compiler.

1998-04-07 16:18  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add __asprintf to GLIBC_2.1.
	* elf/dlerror.c: Use __asprintf, not asprintf.
	* libio/stdio.h: Declare __asprintf.
	* stdio-common/asprintf.c: Define as __asprintf and make asprintf
	a weak alias.

	* elf/dl-minimal.c: Add definition of strtol and strtoul (und friends)
	to avoid inclusion from libc_pic.a.

	* elf/dl-runtime.c: Undo last patch.

	* stdlib/strtod.c: Don't use mbtowc, use btowc.

	* sysdeps/i386/dl-machine.h (dl_platform_init): Don't use "i386"
	as default, use NULL.

1998-04-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* resolv/Makefile: Include ../Makeconfig - needed for building
	static NSS module.

1998-04-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* hesiod/Makefile (libnss_hesiod-inhibit-o): Remove condition for
	static-nss since we don't want hesiod in the static NSS.

	* nss/Makefile: Build only nss_files as static.

	* nss/function.def: Remove support for service db.

1998-04-04 09:44  H.J. Lu  <hjl@gnu.org>

	* Makeconfig (CPPFLAGS-.oS): Add -DPIC.

1998-04-04 18:29  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp-test.c: Make IFS per test-case.

1998-04-07 17:50  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* glibcbug.in: Report version of gcc in use.  Remove unused variable
	ENVIRONMENT.

1998-04-07  Gordon Matzigkeit  <gord@profitpress.com>

	* aclocal.m4 (LIBC_PROG_BINUTILS): Use `-print-prog-name', not
	`-print-file-name' to find as and ld.

1998-04-07  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/mkstemp.c (mkstemp): Correct return value in case
	template is wrong.  Remove unused varaible `ignored'.

1998-04-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libc.map: Export __libc_sa_len.

	* iconv/gconv_conf.c (MAXPATHLEN): Define correctly.

1998-04-07 08:51  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv.c: Take care for NULL arguments.
	* iconv/gconv_dl.c: Make find_func function global.
	* iconv/gconv_int.h: Add prototype for __gconv_find_func.
	Add prototypes for ASCII conversion functions.
	* iconv/gconv_simple.c: Add ASCII conversion functions.
	* locale/C-ctype.c: Correct charset name.

	* wcsmbs/Makefile (distribute): Add wcsmbsload.h.
	(routines): Remove wmemrtowcs and wmemrtombs, add wcsnlen and
	wcsmbsload.
	* wcsmbs/btowc.c: Rewrite to use iconv functionality.
	* wcsmbs/mbrtowc.c: Likewise.
	* wcsmbs/mbsnrtowcs.c: Likewise.
	* wcsmbs/mbsrtowcs.c: Likewise.
	* wcsmbs/wcrtomb.c: Likewise.
	* wcsmbs/wcsnrtombs.c: Likewise.
	* wcsmbs/wcsrtombs.c: Likewise.
	* wcsmbs/wctob.c: Likewise.
	* wcsmbs/wchar.h: Add prototype for __wcslen, wcsnlen.  Remove
	prototypes for wmemr*.
	* wcsmbs/wcslen.c: Rename to __wcslen and make wcslen weak alias.
	* wcsmbs/wcsnlen.c: New file.
	* wcsmbs/wcsmbsload.c: New file.
	* wcsmbs/wcsmbsload.h: New file.

	* manual/filesys.texi: Mention risks of tmpnam and mktemp.

	* manual/install.texi: Describe some more critical points.

	* string/string.h: Add prototype for __strnlen.
	* string/strnlen.c: Rename to __strnlen and make strnlen weak alias.

	* sysdeps/posix/mktemp.c: Rewrite to allow many more files and
	much less predictable names.
	* sysdeps/posix/mkstemp.c: Likewise.

1998-04-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/libc.texinfo (Top): Change "file namespace" to "local
	namespace".

	* manual/socket.texi: Change file namespace to local namespace.
	(Out-of-Band Data): Remove unneeded variable link.
	(Host Address Functions): Use uint32_t consequently and add a
	number of clarifications for IPv4/IPv6, classless addresses.
	(Internet Namespace): Added some paragraphs about IPv6.
	Based on suggestions by Francesco Potort <F.Potorti@cnuce.cnr.it>.

1998-04-05  Philip Blundell  <Philip.Blundell@pobox.com>

	Update for draft-ietf-ipngwg-bsd-api-new-01.txt:

	* resolv/netdb.h (getnameinfo): Use `socklen_t' not `size_t'.
	(NI_NUMERICHOST, et al.): Tidy up and add comments.
	(AI_NUMERICHOST): Define.
	(getnodebyname): New prototype.
	(AI_V4MAPPED, et al.): New constants.

	* sysdeps/unix/bsd/bsd4.4/bits/sockaddr.h (SA_LEN): New macro.
	* sysdeps/generic/bits/sockaddr.h (SA_LEN): Likewise.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add sa_len
	for socket.
	* sysdeps/unix/sysv/linux/sa_len.c: New file.
	* sysdeps/unix/sysv/linux/Dist: Add sa_len.c.

	* sysdeps/unix/sysv/linux/bits/socket.h: Make multiple #inclusion safe.

	* sysdeps/generic/bits/sockunion.h: New file, defining sockaddr_union.
	* sysdeps/unix/sysv/linux/bits/sockunion.h: Likewise.
	* socket/Makefile (headers): Add bits/sockunion.h.
	* socket/sys/socket.h: Include <bits/sockunion.h>
	* inet/netinet/in.h: Include <bits/sockaddr.h> rather than
	<sys/socket.h>, to avoid getting sockaddr_union defined.
	* sysdeps/generic/bits/socket.h: Allow inclusion from netinet.in.h.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/socket.h: Likewise.

	* sysdeps/unix/sysv/linux/if_index.c: Remove use of SIOCGIFCOUNT
	(2.2.x kernels won't have it).

1998-04-06 21:21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/mach/hurd/bits/ioctls.h: Allow inclusion from hurd/ioctl.h.
	* sysdeps/mach/hurd/dl-sysdep.c: Use __ptr_t not caddr_t.
	* iconv/gconv_conf.c: Define MAXPATHLEN if not available before.
	Patches by UCHIYAMA Yasushi <uch@nop.or.jp>.

1998-04-05  Philip Blundell  <Philip.Blundell@pobox.com>

	* manual/socket.texi (Socket Addresses): Fix a typo.
	(Interface Naming): New section.

1998-04-05 23:29  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* configure.in: Check for CC using $ac_tool_prefix, to handle
	cross-compilation.  Use AC_CHECK_TOOL to find MiG.
	* config.make.in: Add MIG to be substituted.
	* mach/Machrules: Don't define MIG variable.

	Patch by Gordon Matzigkeit <gord@profitpress.com>.

1998-04-05  Mark Kettenis  <kettenis@phys.uva.nl>

	* elf/dl-load.c (decompose_rpath): Use local_strdup instead of
	strdupa to copy rpath.

1998-04-05  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* configure.in: Fix gcc version check.

	* aclocal.m4 (AC_PROG_CHECK_VER): Rewritten to make less
	confusing.

1998-03-31  Mark Kettenis  <kettenis@phys.uva.nl>

	* sysdeps/unix/bsd/unlockpt.c (unlockpt): Call __ptsname_r instead
	of ptsname_r.

	* stdlib/stdlib.h: Change prototype of ptsname_r to make it more
	like ttyname_r.
	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_r): Likewise.
	* sysdeps/generic/ptsname.c (__ptsname_r): Likewise.
	* sysdeps/unix/grantpt.c (grantpt): Change check of return value
	of __ptsname_r accordingly.
	* login/openpty.c (openpty): Likewise.

1998-06-04 18:47  H.J. Lu  <hjl@gnu.org>

	* libio/fileops.c (_IO_file_xsgetn): Adjust pointers.

1998-04-06 13:58  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig (libtypes): Redo H.J. Lu's change of 1998-03-27.

	* Makerules: Re-add missing rule for $(objpfx)stamp.oS.

1998-04-06  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c: Don't give YPERR_RPC back, use the do_ypcall
	return value for better error checking.

1998-04-06  Jakub Jelinek <jj@sunsite.ms.mff.cuni.cz>

	* elf/dl-runtime.c (fixup, profile_fixup): The final arg to
	_dl_lookup_*symbol is DL_LOOKUP_NOPLT not ELF_MACHINE_JMP_SLOT.

	* elf/elf.h (EM_SPARC64): Remove.
	(EM_SPARC32PLUS, EM_SPARCV9): Add.
	(HWCAP_SPARC_V9): Add.

	* elf/ldsodefs.h (_dl_hwcap): Declare.
	* sysdeps/sparc/sparc32/dl-machine.h (_dl_hwcap, _dl_hwcap_mask):
	Weaken so dlopen from static progies works.
	(WEAKADDR): New macro.
	(elf_machine_matches_host): Accept EM_SPARC32PLUS on a v9 cpu.
	(LD_SO_PRELOAD): New macro.
	(elf_machine_fixup_plt): Cope with weak _dl_hwcap.
	(elf_machine_rela): Weaken _dl_rtld_map.

	* sysdeps/unix/sysv/linux/sparc/sparc32/clone.S: Rename __libc_clone
	to __clone, and remove the later's alias.
	* sysdeps/unix/sysv/linux/sparc/sparc64/clone.S: Likewise.

	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c: Copy to/from
	the kernel's structure.

	* sysdeps/unix/sysv/linux/sparc/sys/kernel_termios.h: New file.
	Sparc needs a custom value of __KERNEL_NCCS.

1998-04-06  Richard Henderson  <rth@cygnus.com>

	* sysdeps/generic/libc-start.c: Allow init and fini to be null.

	* sysdeps/sparc/sparc32/elf/start.S: Rewrite for __libc_start_main.
	* sysdeps/sparc/sparc64/elf/start.S: Likewise.

1998-04-06  Richard Henderson  <rth@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/socket.S: Revert 03-01 change,
	as the buffer is not properly aligned.
	Reported by Juan Cespedes <cespedes@debian.org>.

1998-04-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/examples/mkfsock.c (make_named_socket): Use AF_LOCAL
	instead of AF_FILE.

1998-04-05  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_simple.c: Rewrite to not make use of the mb*towc*
	and wc*tomb* functions.

1998-04-04 15:16  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/start.c: Fix typo.

1998-04-04  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_db.c (__gconv_find_transform): Fix typo.

1998-04-03 23:38  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/e_acos.c: Optimize by splitting large
	expressions and using array variables.
	* sysdeps/libm-ieee754/e_asin.c: Likewise.
	* sysdeps/libm-ieee754/e_j0.c: Likewise.
	* sysdeps/libm-ieee754/e_j1.c: Likewise.
	* sysdeps/libm-ieee754/e_log.c: Likewise.
	* sysdeps/libm-ieee754/e_pow.c: Likewise.
	* sysdeps/libm-ieee754/k_cos.c: Likewise.
	* sysdeps/libm-ieee754/k_sin.c: Likewise.
	* sysdeps/libm-ieee754/k_tan.c: Likewise.
	* sysdeps/libm-ieee754/s_atan.c: Likewise.
	* sysdeps/libm-ieee754/s_erf.c: Likewise.
	* sysdeps/libm-ieee754/s_expm1.c: Likewise.
	* sysdeps/libm-ieee754/s_log1p.c: Likewise.
	Patch by Naohiko Shimizu <nshimizu@et.u-tokai.ac.jp>.

1998-04-03 23:17  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv.c: Rewrite of the low-level of gconv.
	* iconv/gconv.h: Likewise.
	* iconv/gconv_builtin.h: Likewise.
	* iconv/gconv_close.c: Likewise.
	* iconv/gconv_db.: Likewise.
	* iconv/gconv_dl.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_open.c: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconvdata/8bit-gap.c: Adapt for rewrite.
	* iconvdata/8bit-generic.c: Likewise.
	* iconvdata/euckr.c: Likewise.
	* iconvdata/iso646.c: Likewise.
	* iconvdata/iso6937.c: Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/johab.c: Likewise.
	* iconvdata/sjis.c: Likewise.
	* iconvdata/t61.c: Likewise.
	* iconvdata/uhc.c: Likewise.

1998-04-03 15:34  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_int.h: New file.  Internal header.
	* iconv/Makefile (distribute): Add gconv_int.h.
	* iconv/gconv.h: Remove definition which are now in gconv_int.h.
	* iconv/gconv_builtin.c: Adopt for gconv_int.h introduction.
	* iconv/gconv_close.c: Likewise.
	* iconv/gconv_conf.c: Likewise.
	* iconv/gconv_db.c: Likewise.
	* iconv/gconv_dl.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_open.c: Likewise.
	* iconv/iconv.c: Likewise.
	* iconv/iconv_close.c: Likewise.
	* iconv/iconv_open.c: Likewise.
	* iconv/iconv_prog.c: Likewise.

1998-04-03  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/ksc5601.c: Correct Perl scripts and make them omit the
	missing braces.

1998-04-03  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nis_table.c (nis_list): Fix FOLLOW_PATH and ALL_RESULTS flags.

1998-04-03 16:29  Philip Blundell  <pb@nexus.co.uk>

	Based on patch from Pat Beirne:
	* sysdeps/unix/sysv/linux/arm/sysdep.S (__syscall_error): Same for
	PIC and non-PIC now.  Correctly negate error number.
	(errno): Use `%' not `@' in .type directives.

1998-04-03  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/strtok.S: Change to use single exit point.
	* sysdeps/i386/i686/strtok.S: Likewise.

1998-04-02  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/dl-procinfo.h (_dl_hwcap_string): Provide
	default.

1998-04-02  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (installed-libcs): Fix typo.

1998-04-02  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/Makefile ($(objpfx)UHC.so): Link against libKSC.
	(UHC-routines): Remove ksc5601.

1998-04-03 16:29  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/unix/sysv/linux/arm/sysdep.h (PSEUDO): Fix typo
	introduced in last change.

1998-04-03 06:22  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/getcwd.c: Make compilable with kernels
	before 2.1.92.

1998-04-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add s_getcwd entry.

	* stdlib/isomac.c: Use -isystem instead of -I for system include
	dir.

1998-03-30 08:05  H.J. Lu  <hjl@gnu.org>

	* resolv/res_comp.c (underscorechar): New.
	(middlechar): Allow '_'.

1998-04-02  Ulrich Drepper  <drepper@cygnus.com>

	* intl/explodename.c (stdlib.h): Include that file only if
	STDC_HEADERS or _LIBC.
	(string.h): Include that file only if HAVE_STRING_H or _LIBC.
	Patch by Philippe De Muyter <phdm@macqel.be>.

1998-04-01 21:08  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* aclocal.m4 (AC_PROG_CC_LOCAL): Remove superfluous tests.
	(AC_PROG_CHECK_VER): New macro.
	* configure.in: Use AC_PROG_CHECK_VER to check versions of
	gcc, gmake, msgfmt, makeinfo.  Remove superfluous tests.

1998-04-02 15:13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/i686/sysdep.h: New file.
	* sysdeps/i386/i686/strtok.S: New file
	* sysdeps/i386/i686/strtok_r.S: New file

1998-04-02  Mark Kettenis  <kettenis@phys.uva.nl>

	* posix/unistd.h: [__USE_FILE_OFFSET64] (lseek): Change return
	type to __off64_t.
	* libio/stdio.h [__USE_FILE_OFFSET64] (fseeko): Declare offset
	parameter as __off64_t instead of __off_t.
	(ftello): Make alias for ftello64 instead of ftello.  Change
	return type to __off64_t.

1998-04-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/bits/string.h: Fix various typos.
	Patch by Horst von Brand <vonbrand@sleipnir.valparaiso.cl>.

	* sysdeps/unix/sysv/linux/getcwd.c: Use getcwd syscall in Linux 2.1.92.

1998-04-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/chown.c: Handle old kernels without
	lchown syscall correctly.  [PR libc/541].

1998-04-02 11:45  Ulrich Drepper  <drepper@cygnus.com>

	* localedata/Makefile: Correct testsuite rules.

	* iconvdata/gconv-modules: Set cost of ISO646 module to 2.
	* iconvdata/iso646.c: Fix conversion from UCS4.

	* elf/ldsodefs.h: Mark internal function with internal_function.
	* elf/dl-addr.c: Likewise.
	* elf/dl-close.c: Likewise.
	* elf/dl-debug.c: Likewise.
	* elf/dl-deps.c: Likewise.
	* elf/dl-error.c: Likewise.
	* elf/dl-fini.c: Likewise.
	* elf/dl-init.c: Likewise.
	* elf/dl-load.c: Likewise.
	* elf/dl-lookup.c: Likewise.
	* elf/dl-object.c: Likewise.
	* elf/dl-open.c: Likewise.
	* elf/dl-profile.c: Likewise.
	* elf/dl-reloc.c: Likewise.
	* elf/dl-runtime.c: Likewise.
	* elf/dl-symbol.c: Likewise.
	* elf/dl-version.c: Likewise.
	* elf/dlerror.c: Likewise.
	* sysdeps/generic/dl-sysdep.c: Likewise.
	* sysdeps/i386/dl-machine.h: Likewise.
	* intl/finddomain.c: Likewise.
	* intl/gettextP.h: Likewise.
	* intl/loadmsgcat.c: Likewise.

1998-04-01 17:38  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_simple.c: New builtins for UCS en/decoding.
	* iconv/gconv_builtin.h: Add definitions for new builtins.
	* iconv/gconv.h: Add prototypes for new builtins.

	* iconvdata/Makefile (modules): Add ISO646.
	Add rules for ISO646 module.
	(distribute): Add iso646.c.
	* iconvdata/gconv-modules: Add module and alias definition for
	ISO646 charsets.
	* iconvdata/iso646.c: New file.

1998-04-01 16:10  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add __gconv_alias_db, __gconv_nmodules, __gconv_modules_db.
	* iconv/iconv_prog.c: Implement --list option to print available
	coded character sets.

1998-04-01 18:10  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	Make fread() read large blocks straight to the user buffer.

	* libio/fileops.c (_IO_file_xsgetn): New function.
	(_IO_file_jumps): Use it.
	* libio/libioP.h: Prototype it.

1998-04-01  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_conf.c (builtin_aliases): New variable.
	(__gconv_read_conf): Add builtin aliases.
	* iconv/gconv_builtin.c (builtin_map): Define BUILTIN_ALIAS as an
	noop macro before including gconv_builtin.h.
	* iconv/gconv_builtin.h: Add alias names.

	* iconv/gconv_simple.c (__gconv_transform_ucs4_utf8): Compute
	number of converted bytes correctly.

1998-04-01  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/clnt_udp.c (clntudp_call): Don't check the xid if
	we only wait for a replay.

1998-04-01  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Finally fix dependencies for JOHAB and
	EUC-KR modules.

1998-04-1 16:52  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/unix/sysv/linux/arm/socket.S: Correct test for error and
	use PLTJMP() rather than explicit (PLT).

	* sysdeps/arm/elf/start.S: Leave most of the initialisation for
	__libc_start_main().

	Based on patch from Pat Beirne:
	* sysdeps/unix/sysv/linux/arm/sysdep.h (SYSCALL_ERROR_HANDLER):
	Always define, not only #ifndef PIC.
	(DO_CALL): Pass fifth argument correctly in R4.
	(PSEUDO): Correct test for error, call syscall_error through PLT
	if PIC.

1998-03-31 10:51  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/unix/sysv/linux/netash/ash.h: Fix typos and add new
	definitions.

1998-04-01  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Remove extra dependencies for EUC-KR.so and
	JOHAB.so.

1998-04-01 13:20  Mark Kettenis  <kettenis@phys.uva.nl>

	* io/Makefile (static-only-routines): Add stat64, fstat64 and
	lstat64.

1998-03-30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/Makefile: Use object-suffixes-for-libc instead of
	object-suffixes.
	* rpm/Makefile (install-lib): Likewise.

1998-03-30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/lddlibc4.c: Fix OB1 bug.

	* sysdeps/unix/sysv/linux/configure.in: Match $machine against
	`m68*', not only `m68k'.

1998-04-01 10:50  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/dl-librecon.h: New file.

	* sysdeps/unix/sysv/linux/m68k/Makefile [$(subdir)=elf]: Build and
	install lddlibc4.

1998-03-31  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile: Use libKSC shared object in JOHAB and
	EUC-KR.

	* sysdeps/unix/sysv/linux/bits/socket.h (PF_FILE): Correct
	comment.

1998-03-30 08:43  H.J. Lu  <hjl@gnu.org>

	* sysdeps/alpha/elf/start.S: Let __libc_start_main do most of
	the init stuff.

1998-03-31  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Wrapper for
	adjtimex syscall.
	* sysdeps/unix/sysv/linux/alpha/Makefile (sysdep_routines): Add
	adjtimex.
	Patches by Dominik Kubla <kubla@sundiver.zdv.uni-mainz.de>.

1998-03-31  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Makerules (install): Change comment for libc.so following the
	libc_nonshared changes.

1998-03-31  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/dl-sysdep.c (_dl_important_hwcaps): Fix typo.

	* iconvdata/gap.pl: Avoid using %#06x.

1998-03-31 19:55  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* Makerules: Use $? instead of S^ when invoking ar.

1998-03-31  Ulrich Drepper  <drepper@cygnus.com>

	* db2/compat.h: Allow EFTYPE being defined.
	* sysdeps/unix/bsd/bits/signum.h: Add definition for SIG_HOLD.
	* sysdeps/unix/bsd/ulimit.c: Include <ulimit.h>.
	* sysdeps/mach/hurd/bits/fcntl.h: Add O_LARGEFILE.
	* sysdeps/mach/bits/libc-lock.h: Fix typo.
	(__libc_once): Correctly unlock semaphore.
	* sysdeps/mach/hurd/dl-sysdep.c: Include <elf/ldsodefs.h>.
	* sysdeps/unix/bsd/getpt.c: Fix typo.
	Patches by UCHIYAMA Yasushi <uch@ddd.scei.sony.co.jp>.

1998-03-31  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/socket.h (MSG_*): Also define as
	macros.

1998-03-31 18:11  Ulrich Drepper  <drepper@cygnus.com>

	* include/mntent.h: New file.

	* elf/Makefile (trusted-dirs.h): Append slash to filename.
	* elf/dl-load.c: Rewrite search path handling.
	* elf/ldsodefs.h (struct r_search_path_elem): Change for rewrite.
	* elf/rtld.c (process_envvars): Recognize LD_HWCAP_MASK.
	* sysdeps/generic/dl-sysdep.h (_dl_important_hwcap): New function.
	* elf/ldsodefs.h: Add prototype.

1998-03-30  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nsswitch.c (__nss_lookup): Adjust comment.

	* sysdeps/generic/dl-sysdep.c (_dl_important_hwcaps): New
	function.

	* sysdeps/generic/dl-procinfo.h (HWCAP_IMPORTANT): New definition.

	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h (_dl_hwcap_string):
	New function.
	(HWCAP_IMPORTANT): New definition.

1998-03-30 17:26  H.J. Lu  <hjl@gnu.org>

	* elf/dl-open.c (_dl_open): Fix a typo.
	(_dl_global_scope_alloc): Make it static.

1998-03-30 17:20  Ulrich Drepper  <drepper@cygnus.com>

	* Makerules: Remove duplicate rules to handle stamp.oS.

1998-03-30  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/examples/inetsrv.c (main): Change prototype of
	make_socket following change in mkisock.c.

	* manual/examples/inetcli.c (SERVERHOST): Use mescaline.gnu.org as
	example host.
	(main): Change prototype of init_sockaddr following change in
	isockadd.c.

	* manual/examples/mkisock.c (make_socket): Use uint16_t for port.
	* manual/examples/isockad.c (init_sockaddr): Likewise.

	* manual/examples/mkfsock.c (make_named_socket): Removed blank
	lines for clarification.
	(make_named_socket): Use strncpy instead of strcpy.
	Reported by Francesco Potort <F.Potorti@cnuce.cnr.it>.

1998-03-30 13:28  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (parent-mostlyclean): Use object-suffixes-for-libc for
	determining libs to remove.
	(postclean): Add soversions.mk.
	* Makerules (common-mostlyclean): Add tests-static and generated
	files.

1998-03-30 12:53  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/i486/bits/string.h (__strcat_c) [__i686__]: Correct
	scanning for \0.
	(__strncat_g): Add i686 specific code.

1998-03-30  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Reporting Bugs): Ask to include section
	names in reports.

1998-03-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/Makefile ($(objpfx)syscall-%.h): Emit
	guard against direct inclusion.

1998-03-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	Rework support for libc_nonshared.a:
	* Makeconfig (object-suffixes-for-libc): New variable.
	* Rules: Remove handling of static-only and shared-only routines.
	* Makerules: Handle them here instead.  Use
	object-suffixes-for-libc instead of object-suffixes when dealing
	with libc objects.
	(object-suffixes-for-rules): Remove variable.
	(elide-routines.oS): Elide all routines except static-only
	routines.
	($(objpfx)stamp.oS): Special rule for when static-only-routines is
	empty.
	(installed-libcs): Remove special case for .oS.
	(rmobjs): Likewise.

1998-03-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (do-collate-test, do-xfrm-test, do-tst-fmon,
	do-tst-rpmatch): New targets.
	(test): Use them.
	(install-locales): Ignore comment lines.

1998-03-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/Makefile ($(objpfx)ld.so): Depend on version script.
	($(objpfx)trusted-dirs.h): Depend also on $(..)Makeconfig.
	($(objpfx)rtldtbl.h): Likewise.
	(CPPFLAGS-dl-load.c): Fix reference to object directory.

1998-03-30 09:36  Ulrich Drepper  <drepper@cygnus.com>

	* manual/string.texi (Finding Tokens in a String): Extend strsep
	description and correct example.

1998-03-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/socket.texi: Remove misguided explicit line breaks and
	fix the formatting problem instead by reformulating the
	paragraphs.
	* manual/filesys.texi: Likewise.
	* manual/conf.texi: Likewise.  Don't typeset table with index
	fonts, that looks worse than a minimally overfull line.

1998-03-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* nscd/Makefile (nscd-modules): Move definition outside of
	conditional.

	* pwd/Makefile: Use have-thread-library to test for thread
	library.

1998-03-30  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/getXXent_r.c (INTERNAL): Remove unused variable current_nip.

	* iconvdata/uhc.c (gconv): Remove unused variable idx.

1998-03-30  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Dist: Add lddlibc4.c.

1998-03-29  Ulrich Drepper  <drepper@cygnus.com>

	* nss/getXXent_r.c: Correctly handle failing setXXent function.

	* inet/netinet/in.h: Use cast to uint32_t in IPv4 macros.
	Reported by Andreas Jaeger.

1998-03-29 20:59  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile: Fix typo.
	(distribute): Add dl-librecon.h.
	* elf/ldd.bash.in: Collect output of ldd --verify in verify_out.
	* elf/ldd.sh.in: Likewise.
	* elf/ldsodefs.h: Declare _dl_correct_cache_id.
	* elf/rtld.c (dl_main): In --verify mode allow platform specifc action.
	Use strsep correctly.
	(process_envvars): Allow platform specific variables.
	* sysdeps/generic/dl-cache.c (_dl_correct_cache_id): New variable.
	(_dl_load_cache_lookup): Test cache IDs found against
	_dl_correct_cache_id.
	* sysdeps/generic/dl-librecon.h: New file.
	* sysdeps/unix/sysv/linux/dl-librecon.h: New file.

	* sysdeps/unix/sysv/linux/lddlibc4.c: Include error.h.

1998-03-29 16:50  Ulrich Drepper  <drepper@cygnus.com>

	* config.make.in (ldd-rewrite-script): New variable.
	* configure.in: Substitute ldd-rewrite-script.
	* elf/Makefile: Rewrite rules to generate ldd script.
	* elf/ldd.bash.in: Allow handling of non-ELF binaries.
	* elf/ldd.sh.in: Likewise.
	* sysdeps/unix/sysv/linux/Makefile: Remove rule to install lddlibc4.
	* sysdeps/unix/sysv/linux/configure.in: Define ldd_rewrite_script to
	point to sed script for libc4 handling insertion for ix86, m68, SPARC.
	* sysdeps/unix/sysv/linux/i386/Makefile: Add rule to install lddlibc4.
	* sysdeps/unix/sysv/linux/ldd-rewrite.sed: New file.

1998-03-26 15:20  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* inet/rcmd.c (iruserok): Remain setuid to the local user
	while .rhosts is actually read, to make .rhosts-over-NFS work
	(PR libc/524).  Use iruserfopen() for security checks on both
	hosts.equiv and .rhosts.  General cleanup.
	(iruserfopen): New function, performs careful checking on
	hosts.equiv/.rhosts files.  Disallows all the old forbidden
	stuff plus hard links to files.

1998-03-29 09:26  Ulrich Drepper  <drepper@cygnus.com>

	* setjmp/tst-setjmp.c: Don't test __setjmp, test _setjmp instead.

	* nss/getXXent_r.c (REENTRANT_GETNAME): Avoid endless loop.

1998-03-29 02:02  H.J. Lu  <hjl@gnu.org>

	* sysdeps/i386/i486/bits/string.h: Fix typos.

1998-03-28 00:13  H.J. Lu  <hjl@gnu.org>

	* sysdeps/unix/sysv/linux/alpha/readdir.c (__readdir64): New
	strong alias.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (socket): Added.

	* libc.map (__ieee_get_fp_control, __ieee_set_fp_control):
	Added.  Used by libm.so on alpha.

1998-03-28  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* intl/bindtextdom.c [_LIBC]: Define strdup only if not yet
	defined.

1998-03-27 07:29  H.J. Lu  <hjl@gnu.org>

	* Makerules (object-suffixes-for-rules): Add .oS only for
	building shared library.
	Add ranlib rule for nonshared library.
	(rmobjs): Fix typo.

	* Makeconfig (libtype.oS, CFLAGS-.oS, CPPFLAGS-.oS): Moved
	into for shared library only.
	(CPPFLAGS-.oS): Add -DPIC.
	(libtypes): Use $(object-suffixes-for-rules) instead of
	$(object-suffixes).

1998-03-28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Makefile (inhibit-stdio_lim): Compile
	and install lddlibc4.

1998-03-28 09:13  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* iconvdata/gap.pl: Gobble rest of line with a scalar, not a
	hash.
	* iconvdata/gaptab.pl: Likewise.

1998-03-27 22:46  Ulrich Drepper  <drepper@cygnus.com>

	* Rules: Allow Makefiles to specify test-static for tests which
	cannot be linked dynamically.
	* math/Makefile: Move atest-exp, atest-sincos, atest-exp2 to
	tests-static.

	* libc.map: Add __nss_passwd_lookup, __nss_group_lookup, __nss_next.

	* misc/error.c: Pretty print.

1998-03-27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (libc_nonshared-name): Remove variable.
	(installed-libcs): Use libc-name instead.
	($(inst_libdir)/libc.so): Likewise.  Remove explicit reference to
	dynamic linker.

	* Makeconfig (link-libc): Link against libc_nonshared.a instead of
	libc.a.  Remove explicit reference to dynamic linker.

1998-03-27  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/iso8859-1.c (gconv): Add cast to assignment from char
	to wchar_t.
	* iconv/iconv_prog.c: Correctly test for write failure.
	* iconvdata/Makefile: Add rules for EUC-KR, UHC, and JOHAB conversions.
	* iconvdata/gconv-modules: Likewise.
	* iconvdata/euckr.c: New file.
	* iconvdata/johab.c: New file.
	* iconvdata/ksc5601.c: New file.
	* iconvdata/ksc5601.h: New file.
	* iconvdata/uhc.c: New file.
	Contributed by Jungshik Shin <jshin@pantheon.yale.edu>.

	* libio/fileops.c (_IO_file_fopen): Interpret x flag to fopen.
	* stdio/fopen.c: Correct handling of 'x' flag.
	Reported by Jason M. Petry <jason@ps.ohio-state.edu>.

1998-03-27  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sunrpc/rpc/key_prot.h: Prevent warning by unknown pragma ident.
	* sunrpc/rpcsvc/key_prot.x: Likewise.
	* sunrpc/key_prot.c: Likewise.

1998-03-27 13:49  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/bits/string.h: Correct things which never worked.
	* sysdeps/i386/i486/bits/string.h: Add clobber marks.
	Patches by Bernd Schmidt <crux@Pool.Informatik.RWTH-Aachen.DE>.

1998-03-27  Ulrich Drepper  <drepper@cygnus.com>

	* intl/textdomain.c [_LIBC]: Define strdup only if not yet
	defined.  Reported by Thorsten Kukuk.

1998-03-26 18:50  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/lddlibc4.c: New file.

1998-03-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Supported Configurations): Add
	arm-linuxaout and arm-none.

1998-03-26  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.0.93.

1998-03-25 07:30  H.J. Lu  <hjl@gnu.org>

	* configure.in (libc_cv_ar_S): New to indicate if ar S works.

	* config.make.in (have-ar-S): New, substituted by libc_cv_ar_S.

	* Makerules (CREATE_ARFLAGS): New determined by $(have-ar-S).
	(do-ar, build-extra-lib): Use $(CREATE_ARFLAGS) for $(AR).

1998-03-26  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (link-libc): Add missing use of libc_nonshared.a.

1998-03-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	Put the static-only routines in a separate library.
	* Makeconfig (libtype.oS, CFLAGS-.oS, CPPFLAGS-.oS): New
	variables.
	(all-object-suffixes): Add .oS.
	* Makerules (libc_static-name): New variable.
	(installed-libcs): Add libc_nonshared.a.
	($(inst_libdir)/libc.so): Use libc_nonshared.a instead of libc.a.
	(object-suffixes-for-rules): New variable.  Use it instead of
	object-suffixes for generating compilation rules.
	(rmobjs): Also remove *.oS.
	* Rules (subdir_lib): Depend on $(objpfx)stamp.oS.
	($(objpfx)stamp.oS): New target.

1998-03-26  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (FAQ): Automatically check in regenerated FAQ.

1998-03-26 10:16  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* Makefile (INSTALL): Depend on install.texi, not maint.texi.

1998-03-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/Dist: Add sizes.h.
	* sysdeps/unix/sysv/linux/alpha/Dist: Likewise.

	* sysdeps/generic/stub_warning: Removed.

	* Makefile (distribute): Add include/des.h.

	* manual/Makefile (distribute): Change dir-add.texi to
	dir-add.texinfo.

	* glibcbug.in: Create files safely when mktemp is not available.

	* sysdeps/unix/sysv/linux/adjtime.c: Make weak alias appear again.
	Patch by a sun <asun@saul1.u.washington.edu>.

1998-03-25  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* libc.map: Rename getname to getnetname.

1998-03-25 13:35  Ulrich Drepper  <drepper@cygnus.com>

	* manual/maint.texi: Use supported platform in examples.

	* manual/install.texi: Document some installation tips.

1998-03-25 10:56  Ulrich Drepper  <drepper@cygnus.com>

	* posix/wordexp.c: Fix some memory leaks and makes $* more efficient.
	Fix a bug so that it returns an error if a numeric parameter is
	unset and WRDE_UNDEF is set.
	Patch by Andreas Schwab and Tim Waugh.
	* posix/wordexp-test.c: Add new new test.

1998-03-25  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regex.c (regex_compile): Last patch wasn't entirely
	correct.  Patch by Alain Magloire <alainm@rcsm.ece.mcgill.ca>.

1998-03-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/filesys.texi (Scanning Directory Content): Fix typo.

1998-03-25 09:24  Bernd Schmidt  <crux@Pool.Informatik.RWTH-Aachen.DE>

	* sysdeps/i386/bits/string.h: Fix all assembler statements so that
	clobbered registers don't appear as operands.

1998-03-24  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regex.c: Undefine ISASCII and ISPRINT before defining for
	Solaris' sake.

	* posix/regex.c (regex_compile): Don't allow non-alphabet
	characters in character set name.

1998-03-25 00:00  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c (w_newword): New function.
	(do_parse_glob): New function.
	(parse_glob): Use do_parse_glob.  Now handles the case where a
	variable expansion causes a field-split.
	(wordexp): Use w_newword.
	(parse_arith): Likewise.
	(exec_comm): Likewise.
	(parse_comm): Likewise.
	(parse_param): Likewise.
	(parse_backtick): Likewise.

1998-03-24 19:36  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp-tst.sh: Another test.

	* posix/wordexp-test.c: Two new tests.

	* posix/wordexp.c (parse_glob): Use w_addstr instead of realloc
	directly (the code using realloc was buggy).
	(parse_param): Fix typo in comment.

1998-03-24  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c (_dl_close): Replace questionable memcpy by loop.

1998-03-24  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* libc.map: Add more rpc auth functions/variables.

	* nscd/nscd.c: Add -g option to argp options.

1998-03-24  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Be prepared for gcc 2.9.10 and up.
	* configure.in: Add missing disabling of quote characters in
	compiler version check.  Reported by HJ Lu.

1998-03-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* malloc/mtrace.c: Include elf/ldsodefs.h instead of link.h.

1998-03-24  Ulrich Drepper  <drepper@cygnus.com>

	* intl/locale.alias: Fix spelling of romanian.

	* sunrpc/Makefile (headers): Add rpc/rpc_des.h.
	(distribute): Remove des.h.
	* include/des.h: New file.
	* sunrpc/des.h: Moved to ...
	* sunrpc/rpc/rpc_des.h: ...here.

1998-03-22  NIIBE Yutaka  <gniibe@mri.co.jp>

	* inet/netinet/in.h (IN6_IS_ADDR_UNSPECIFIED, IN6_IS_ADDR_LOOPBACK):
	Fix paren.

1998-03-24  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/mach/hurd/setsockopt.c (setsockopt): Make OPTVAL
	parameter const.  Reported by UCHIYAMA Yasushi <uch@nop.or.jp>.

1998-03-24  Ulrich Drepper  <drepper@cygnus.com>

	* elf/ldsodesf.h: New file.
	* elf/Makefile (distribute): Add ldsodefs.h.
	* elf/link.h: Separate internal information in exter header.
	* elf/rtld.c: Include elf/ldsodefs.h not link.h.
	* elf/dl-minimal.c: Likewise.
	* sysdeps/generic/dl-sysdep.c: Likewise.
	* elf/sprof.c: Likewise.
	* elf/dlsym.c: Likewise.
	* elf/dlvsym.c: Likewise.
	* elf/dlerror.c: Likewise.
	* elf/dladdr.c: Likewise.
	* elf/dlclose.c: Likewise.
	* elf/dlopen.c: Likewise.
	* elf/dl-addr.c: Likewise.
	* elf/dl-close.c: Likewise.
	* elf/dl-debug.c: Likewise.
	* elf/dl-deps.c: Likewise.
	* elf/dl-error.c: Likewise.
	* elf/dl-fini.c: Likewise.
	* elf/dl-init.c: Likewise.
	* elf/dl-load.c: Likewise.
	* elf/dl-lookup.c: Likewise.
	* elf/dl-object.c: Likewise.
	* elf/dl-open.c: Likewise.
	* elf/dl-profile.c: Likewise.
	* elf/dl-reloc.c: Likewise.
	* elf/dl-runtime.c: Likewise.
	* elf/dl-support.c: Likewise.
	* elf/dl-symbol.c: Likewise.
	* elf/dl-version.c: Likewise.
	* sysdeps/generic/dl-cache.c: Likewise.
	* sysdeps/generic/libc-start.c: Likewise.
	* iconv/gconv_dl.c: Likewise.
	* nss/nsswitch.c: Likewise.

1998-03-23 13:45  Ulrich Drepper  <drepper@cygnus.com>

	* manual/nss.texi: The database is not called network but networks.
	Reported by Herbert Xu <herbert@gondor.apana.org.au>.

1998-03-23  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Correct test for compiler version.
	Check that LD_LIBRARY_PATH doesn't contain current path.

1998-03-23 07:52  H.J. Lu  <hjl@gnu.org>

	* elf/dl-close.c (_dl_close): Fix byte count while removing
	the shared object from the global scope list and optimize
	a little bit.

1998-03-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/filesys.texi (Scanning Directory Content): Add missing
	closing brace.
	(Scanning Directory Content): Fix text.

1998-03-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/memory.texi (Heap Consistency Checking): Add paragraph
	explaining difference of -lmcheck and MALLOC_CHECK_.

1998-03-23  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/fstatvfs.c (fstatvfs): Correct some
	typos in comments.

1998-03-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* test-skeleton.c (main): Fix test for exit signal.

1998-03-22  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/strtok_r.c: Undefine __strtok_r.

1998-03-22  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/memcmp.c [_LIBC]: Define WORDS_BIGENDIAN as
	appropriate.

1998-03-23 11:14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libc.map: Export __strtok_r.

1998-03-23  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regex.c (re_compile_fastmap): Remove unused variable
	num_regs and adjust comment.
	Patch by Jim Meyering <meyering@ascend.com>.

	* math/math.h (M_*l): Extend long double constants to be usable
	for 128 bit floats.  Patch by Richard Henderson.

1998-03-23 11:16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/m68020/wordcopy.S: New file.

1998-03-22  Ulrich Drepper  <drepper@cygnus.com>

	* posix/wordexp.c: Rewrite parse_param.
	Patch by Tim Waugh and Andreas Schwab.

1998-03-21 23:46  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* Rules: Update timestamps on empty object files.

1998-03-21 09:15  Ulrich Drepper  <drepper@cygnus.com>

	* manual/filesys.texi (Scanning Directory Content): Add description
	of 64 bits scandir function and friends.

1998-03-20  Ulrich Drepper  <drepper@cygnus.com>

	* glibcbug.in: Use mktemp to generate unique file name for
	temporary files.

	* sysdeps/unix/grantpt.c (grantpt): Use __ptsname_r and not
	ptsname_r.  Use cast for execve call.

1998-03-20 16:24  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add statvfs, fstatvfs, statvfs64, and fstatvfs64.
	* io/Makefile (headers): Add sys/statvfs.h and bits/statvfs.h.
	* io/sys/statvfs.h: New file.
	* sysdeps/generic/fstatvfs.h: New file.
	* sysdeps/generic/statvfs.h: New file.
	* sysdeps/generic/fstatvfs64.h: New file.
	* sysdeps/generic/statvfs64.h: New file.
	* sysdeps/generic/bits/statvfs.h: New file.
	* sysdeps/unix/sysv/linux/fstatvfs.c: New file.
	* sysdeps/unix/sysv/linux/statvfs.c: New file.
	* sysdeps/unix/sysv/linux/bits/statvfs.h: New file.

	* sysdeps/unix/sysv/linux/bits/statfs.h: Correct type for f_files
	and f_ffree elements.

	* sysdeps/unix/sysv/linux/sys/mount.h: Pretty print.  Define
	mount options in enum.

1998-03-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Check for recent egcs/gcc.

1998-03-20  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add alphasort64, scandir64, versionsort64.
	* dirent/Makefile (routines): Add scandir64, alphasort64, and
	versionsort64.
	* dirent/alphasort64.c: New file.
	* dirent/scandir64.c: New file.
	* dirent/versionsort64.c: New file.
	* dirent/dirent.h: Add LFS support for scandir, alphasort, and
	versionsort.
	* sysdeps/generic/readdir64.c: Rename to __readdir64 and make
	old name weak alias.
	* sysdeps/unix/sysv/linux/readdir64.c: Likewise.

	* dirent/alphasort.c: Use strcoll instead of strcmp.

	* dirent/scandir.c: Optimize a bit.

	* dirent/versionsort.c: Pretty print.

1998-03-20  Ulrich Drepper  <drepper@cygnus.com>

	* string/string.h: Add prototype for __strtok_r.

1998-03-20 12:14  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/Makefile: Fix typo in last change.

1998-03-20  Ulrich Drepper  <drepper@cygnus.com>

	* dirent/dirent.h (scandir): Make argument of select function const.
	* dirent/scandir.c (scandir): Likewise.
	Reported by David.Faure@insa-lyon.fr [PR libc/512].

1998-03-19 14:28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/strtok_r.c: Make __strtok_r real name and strtok_r
	weak alias.
	* sysdeps/i386/strtok_r.c: Likewise.

	* sysdeps/libm-i387/i686/s_fdim.S: Make it really work.
	* sysdeps/libm-i387/i686/s_fdimf.S: Likewise.
	* sysdeps/libm-i387/i686/s_fdiml.S: Likewise.
	* sysdeps/libm-i387/i686/s_fmin.S: Likewise.
	* sysdeps/libm-i387/i686/s_fminf.S: Likewise.
	* sysdeps/libm-i387/i686/s_fminl.S: Likewise.

1998-03-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* intl/localealias.c: Remove unneeded define for strdup.

1998-03-19 13:45  Ulrich Drepper  <drepper@cygnus.com>

	* manual/argp.texi: Adjust for better TeX output.
	* manual/arith.texi: Likewise.
	* manual/conf.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/header.texi: Likewise.
	* manual/lgpl.texinfo: Likewise.
	* manual/math.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/pattern.texi: Likewise.
	* manual/process.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/socket.texi: Likewise.
	* manual/startup.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/terminal.texi: Likewise.
	* manual/examples/rprintf.c: Likewise.
	* manual/examples/testopt.c: Likewise.
	Patches by Zack Weinberg <zack@rabi.phys.columbia.edu>.

1998-03-19 20:45  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c (parse_param): Don't immediately stop parsing a
	parameter name after seeing a digit if it's enclosed in braces.

1998-03-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/i686/Implies: Add libm-i387/i686.

1998-03-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/memory.texi (Heap Consistency Checking): Document
	MALLOC_CHECK_.  Based on a text by Wolfram Gloger.

1998-03-18 17:11  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* manual/Makefile: Add missing rules.

1998-03-18  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/Makefile (generated): Define to remove all stamp files.

	* sysdeps/generic/strsep.c: Also undefine __strsep.

	* string/strdup.c: Undefine __strdup and strdup first.
	* string/strndup.c: Likewise.

	* string/bits/string2.h: Correct strtok_r and strsep.
	Add strndup optimization.

	* sysdeps/generic/strsep.c: Little optimization.

1998-03-18 14:25  Ulrich Drepper  <drepper@cygnus.com>

	* string/bits/string2.h: Add optimization for strdup.
	Always define __strsep and __strtok_r and make real names available
	when feature select macros are defined.

1998-03-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Installation): Use i486-linux as example
	instead of the unsupported sunos4.
	(Reporting Bugs): Mention glibcbug script.
	(Tools for Installation): gcc 2.8.1/egcs 1.0.2 is required.

1998-03-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/wordexp-tst.sh: Make portable.  Add more tests.

	* posix/Makefile (do-globtest do-wordexp-test): New targets.

1998-03-18 13:38  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/libc-start.c: Moved to ...
	* sysdeps/generic/libc-start.c: ...here, replacing former content.

	* sysdeps/unix/sysv/linux/Dist: Add netash/ash.h and
	netpacket/packet.h.

	* sysdeps/unix/sysv/linux/bits/socket.h: Pretty print.

1998-03-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/bits/resource.h: Remove trailing comma
	in enumerator for strict standard compliance.
	* sysdeps/generic/bits/resource.h: Likewise.

1998-03-18 10:04  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/arm/sysdep.h (__ARM_USES_FP): Deleted.
	(PLTJMP): New macro.

	* sysdeps/arm/fpu/__longjmp.S: New file, implementation of
	longjmp() when floating point enabled.
	* sysdeps/arm/fpu/setjmp.S: Likewise for setjmp().
	* sysdeps/arm/__longjmp.S: Remove floating point code.
	* sysdeps/arm/setjmp.S: Likewise.

	* sysdeps/arm/bsd-setjmp.S: Call __sigsetjmp by correct name.
	* sysdeps/arm/bsd-_setjmp.S: Likewise.

	* sysdeps/arm/memset.S: New file; optimised ARM implementation of
	memset().

	* sysdeps/generic/setsockopt.c (setsockopt): Keep in step with
	prototype.

1998-03-17 16:16  Philip Blundell  <pb@nexus.co.uk>

	Based on patches from Pat Beirne and Scott Bambrough:

	* sysdeps/arm/__longjmp.S: Use ip, not r2, as temporary.

	* sysdeps/arm/bits/fenv.h: New file.

	* sysdeps/arm/dl-machine.h: New file.  Add ELF support.
	* sysdeps/arm/elf/setjmp.S: Likewise.
	* sysdeps/arm/elf/start.S: Likewise.
	* sysdeps/arm/init-first.c: Likewise.
	* sysdeps/arm/setjmp.S: Call __sigjmp_save through PLT
	* sysdeps/arm/sysdep.h: Change format of .type directive.  Correct
	comment about floating point to reflect current reality.

	* sysdeps/unix/arm/brk.S: Support PIC.
	* sysdeps/unix/arm/sysdep.S (syscall_error): Support PIC and
	re-entrant code.
	* sysdeps/unix/sysv/linux/arm/socket.S: Check correctly for error
	return; call syscall_error through PLT.
	* sysdeps/unix/sysv/linux/arm/sysdep.h (ENTRY): Correct error jump.

1998-03-04 12:01  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/unix/sysv/linux/netpacket/packet.h: New file.
	* sysdeps/unix/sysv/linux/netash/ash.h: Likewise.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Install them.

1998-03-18  Ulrich Drepper  <drepper@cygnus.com>

	* dirent/list.c (test): Return error value.
	(main): Exit with error value.

	* sysdeps/unix/opendir.c (__opendir): Add missing initialization.

	* Makefile (distribute): Add test-skeleton.c.
	* test-skeleton.c: New file.
	* dirent/Makefile (tests): Add opendir-tst1.
	* dirent/opendir-tst1.c: New file.

1998-03-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/opendir.c (__opendir): Don't block on FIFOs etc.
	Optimize memory handling.
	* sysdeps/unix/closedir.c: Optmize memory handling.

1998-03-17  Ulrich Drepper  <drepper@cygnus.com>

	* posix/wordexp.c (parse_param): Fix off-by-on error in $@
	handling.  Optimize a bit.

1998-03-18 00:25  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c (parse_comm): Allow quoting inside $(...).
	(parse_param): Fold in Andreas' fixes to do with when the end of
	the parameter name has been reached, and quoting inside ${...}.
	(parse_dollars): Fix differentiation between $(((1+3)*(4-2))) and
	$((echo);(ls)).

1998-03-16 22:10  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* manual/maint.texi: Split out installation and contribution
	sections to their own appendices.  Misc cleanups.
	* manual/install.texi: New file.  Mention add-ons.  Refer to FAQ.
	* manual/contrib.texi: New file.
	* manual/libc.texinfo: Pull in new appendices.
	* manual/header.texi: Correct node pointer.

1998-03-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/process.texi (Process Completion): Clarify return value
	of waitpid a bit.  Patch by Zack Weinberg. [PR libc/490]

1998-03-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/wordexp-test.c: Add more tests.
	(testit): Fix logic.

	* posix/wordexp.c (exec_comm): In the child, redirect stderr to
	/dev/null instead of closing it, close pipe.  Always chop off all
	trailing newlines.  Kill and reap child before returning error.
	(w_addword, parse_glob): Fix memory leak.
	(wordexp): Fix dangling pointer problem.

1998-03-16  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-close.c (_dl_close): Correct and simplify unmapping.

	* posix/wordexp-test.c (main): Fix little thinkos and typos.

	* catgets/Makefile (CPPFLAGS): Change NLSPATH to also examine
	directory index by only the language.

1998-03-16 13:02  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp-tst.sh: Store test results in the
	${common_objpfx}posix directory.

	* posix/wordexp-test.c: Remove temporary directory afterwards.

1998-03-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libc.map: Export internal versions of cancelable functions.

1998-03-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (MAKEFLAGS): Append `r'.

1998-03-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig: Define have-thread-library, shared-thread-library
	and static-thread-library if a thread library is available.  Don't
	define rt.
	* nscd/Makefile: Compile nscd if have-thread-library.  Rename
	nscd-routines to nscd-modules.  Use shared-thread-library and
	static-thread-library in dependencies.
	* rt/Makefile: Only compile librt if have-thread-library is
	defined.
	* Makefile (subdirs): Always include rt subdir.

1998-03-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig ($(common-objpfx)gnu/lib-names.h): Add dummy command.

1998-03-14 21:55  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Recognize variations for 32 MIPS processors.
	Don't assume ELF systems always have .weak, test for .weakext.

1998-03-14  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Irix6 is an ELF platform.

1998-03-14 11:47  H.J. Lu  <hjl@gnu.org>

	* elf/dl-close.c (_dl_close): Stop unmapping the segments after
	unmapping the last loaded segment.

1998-03-14 15:54  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Set base_os for Irix6.
	Correct test for .weakext.

1998-03-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/dl-deps.c (_dl_map_object_deps): Add first parameter
	(new_line) to _dl_debug_message call.

1998-03-14 00:52  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c (parse_param): Perform field-splitting after
	expanding positional parameter.

	* posix/wordexp-tst.sh: Test that field-splitting is performed
	after expanding positional parameter.

	* posix/wordexp.c (parse_param): Fixed memory leak in
	field-splitting after parameter expansion.

1998-03-14  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/linereader.c (lr_token): Return EOF token at EOF.
	(get_toplvl_escape): Correctly terminate loop at EOF.
	Patch by Cristian Gafton <gafton@redhat.com>.

1998-03-13 16:55  Ulrich Drepper  <drepper@cygnus.com>

	* string/tester.c (test_strpbrk): Add more strpbrk tests.
	(test_strsep): Likewise.  Correct horrible bugs.

	* string/bits/string2.h (strcspn): Optimize also reject string of
	length 2 and 3.
	(strspn): Likewise.
	(strpbrk): Likewise.
	(strsep): Likewise.  Correct bug with successive separators and
	separators at the end of the string.
	* sysdeps/generic/strsep.c: Correct bug with successive separators
	and separators at the end of the string.

1998-03-13 13:11  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c (parse_param): Positional parameters ($1, $2
	etc) now handled, as well as $$ (pid).

	* posix/Makefile (tests): Execute wordexp-test.sh for `make check'.
	(distribute): Add wordexp-tst.sh.

	* posix/wordexp-tst.sh: New file.

	* posix/wordexp.c (parse_param): $# (or ${#}) expands to the
	number of positional parameters.  Renamed substitute_length to
	seen_hash.
	Don't free(env) is env is NULL.

1998-03-13 16:50  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add pthread_attr_init to GLIBC_2.1.

1998-03-13 15:01  Ulrich Drepper  <drepper@cygnus.com>

	* gmon/gmon.c: Allow GMON_OUT_PREFIX variable to specify filename
	for output file replacing gmon.out.
	Patch by Dean Gaudet <dgaudet@arctic.org>.

1998-03-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-misc.c (_dl_debug_message): Fix printing of pid.  Clean
	up namespace.  Optimize finding end of line.

1998-03-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/rtld.c (process_envvars): Ignore LD_DEBUG_OUTPUT if running
	securely.  Optimized.
	(process_dl_debug): Add ':' to list of separators.  Optimized.

1998-03-13 10:25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/fpu/bits/mathinline.h (isgreater, isgreaterequal,
	isless, islessequal, islessgreater, isunordered): Return zero or
	one.

1998-03-12 13:11  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp-test.c: More tests.
	(main): Set up arena for pathname expansion tests (in a temporary
	directory).
	(testit): Don't check word count or word vector if return value is
	non-zero.

	* posix/wordexp.c (exec_comm): Always chop off terminating
	linefeed (just like bash does).
	(parse_param): Change lots of occurrences of "if (!*env)" to "if
	(!env || !*env)".
	(parse_param): For assignment inside parameter expansion, use all
	expanded words in assignment rather than just the first.
	(parse_param): Corrected return value for parameter expansion of
	an unset variable when WRDE_UNDEF is in effect.
	(parse_dollars): Don't field-split if quoted.
	(wordexp): Opening brace character isn't allowed unquoted.

1998-03-12  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dlerror.c: Fix concurrency problems with error string and
	number.

	* elf/dl-deps.c (_dl_map_object_deps): Print debug info when
	filter/auxiliary are being loaded.

1998-03-12 14:24  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dlerror.c (last_object_name): Removed.
	(dlerror): Don't use last_object_name.
	(_dl_error_run): Omit second argument to _dl_catch_error.
	* elf/dl-error.c (struct catch): Remove objname member.
	(_dl_signal_error): Construct string including objname when given.
	(_dl_catch_error): Remove objname handling.
	* elf/link.h (_dl_catch_error): Fix prototype and comment.
	* elf/rtld.c (dl_main): Call _dl_catch_error correctly.
	* elf/dl-deps.c (_dl_map_objet_deps): Likewise.
	* nss/nsswitch.c (nss_dlerror_run): Likewise.
	* iconv/gconv_dl.c (dlerror_run): Likewise.
	[Corrects PR libc/501].

1998-03-12  Matthias Urlichs <smurf@noris.de>

	* nscd/nscd.c: Ignore SIGPIPE.

1998-03-12  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/nscd_getgr_r.c: Use __ protected names.
	* nscd/nscd_getpw_r.c: Likewise.

1998-03-12  Matthias Urlichs <smurf@noris.de>

	* nscd/nscd_getpw_r.c: Use pw_*_len values correctly.
	* nscd/nscd_getpw_r.c: Fix length calculation in result check,
	null bytes are not transmitted.

1998-03-12 00:40  Franz Sirl <Franz.Sirl-kernel@lauterbach.com>

	* powerpc/syscalls.list: Correct typo.
	* alpha/syscalls.list: Likewise.
	* mips/syscalls.list: Likewise.

1998-03-12  Ulrich Drepper  <drepper@cygnus.com>

	* socket/sys/socket.h: Add prototype for __socket.

1998-03-10  Ulrich Drepper  <drepper@cygnus.com>

	* aclocal.m4 (LIBC_PROG_FOO_GNU): Don't depend on GNU grep.

	* sysdeps/unix/sysv/linux/mips/bits/socket.h: Add various SOL_*
	constants.

	* sysdeps/unix/sysv/linux/bits/socket.h (SOL_ROSE): Remove
	definition here.
	* sysdeps/unix/sysv/linux/netrose/rose.h (SOL_ROSE): Add
	definition here.

	* sysdeps/unix/sysv/linux/mips/bits/socket.h: Adds lots of missing
	AF_* and PF_* constants.

	* sysdeps/unix/sysv/linux/bits/socket.h: Add PF_ASH and AF_ASH.

1998-03-11 15:27  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c: Update help message.
	Install link maps for preloaded objects using main_map as loader.

	* elf/dl-misc.c: Use __libc_write instead of __write for debugging.
	* elf/dl-profile.c: Likewise.

	* elf/dlsym.c: Little optimization.
	* elf/dlvsym.c: Likewise.

1998-03-11 14:56  Ulrich Drepper  <drepper@cygnus.com>

	* posix/wordexp-test.c: Move test for parameter list at the very
	beginning.

1998-03-11 00:16  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c (wordexp): Set we_wordc to zero initially unless
	WRDE_REUSE flag is set.
	(parse_param): Allow `*', `@', and numbers in parameter names.
	(parse_dollars): Differentiate between arithmetic expansion and a
	command substitution that starts immediately with a sub-shell
	(like ``$((1+3))'' as opposed to ``$((echo);(ls))'').
	(parse_param): Memory allocated with __alloca in a block was
	referenced outside that block.  Adjusted to use malloc/free.
	(parse_param): Adjusted field-splitting algorithm so that there is
	not necessarily a field split at the end of a parameter expansion.

1998-03-10 19:52  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c (wordexp): If about to return WRDE_NOSPACE,
	don't free words that have already been allocated.
	(parse_param): A dollar sign on its own will never have a pattern
	associated with it (like "${HOME%%/}" has), so don't try to free it.
	(parse_glob): Attempt to glob when an unquoted `[' is found
	(rather than an unquoted '{' (!)).  Also for unquoted '?'.
	(parse_glob): Sorted out quoting in a glob-able word.
	(parse_param): Added $* and $@ handling.

1998-03-11  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nss_db/db-XXX.c (lookup): Copy data to safe place before
	parsing it.

1998-03-11  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/generic/dl-cache.c (_dl_load_cache_lookup): Use
	_dl_debug_message.

1998-03-12  Matthias Urlichs  <smurf@noris.de>

	* elf/dl-misc.c: Default for debug output should be stderr.
	* elf/dl-misc.c: Spurious garbage bytes after the PID in debug output.
	* elf/dl-lookup.c: reference_name may be NULL or empty.

1998-03-11 10:30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* aclocal.m4 (LIBC_PROG_FOO_GNU): Fix order of redirection.

1998-03-11  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Dist: Add scsi/scsi.h.

	* sysdeps/unix/sysv/linux/scsi/sg.h: Include features.h.

1998-03-10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/scsi/scsi.h: New file.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Install it.

1998-03-11 10:30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/elf/start.S: Let __libc_start_main do most of the
	init stuff.

1998-03-10  Ulrich Drepper  <drepper@cygnus.com>

	* libio/iovdprintf.c (_IO_vdprintf): Set _IO_DELETE_DONT_CLOSE
	flag.

	* misc/syslog.c (vsyslog): Don't try to send if not connected to
	syslog daemon.
	(closelog_internal): Don't do anything if not connected.

1998-03-10 17:54  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add _dl_debug_message.
	* elf/dl-misc.c: Make _dl_debug_message a function.  Print the PID
	before every line.
	* elf/fini.c: Correctly use new _dl_debug_message function.
	* elf/init.c: Likewise.
	* elf/dl-lookup.c: Likewise.
	* sysdeps/unix/sysv/linux/libc-start.c: Likewise.
	* elf/dl-load.c: Likewise.  Add more debugging prints.
	* elf/dl-reloc.c: Likewise.
	* elf/dl-version.c: Likewise.
	* elf/dl-support.c: Add variables for debugging.
	* elf/rtld.c: Likewise.  Recognize new debug options.
	* elf/link.h: Declare new variables.

	* elf/dl-deps.c (_dl_map_object_deps): Little optimizations.

1998-03-10  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sys/quota.h: Extract information from
	kernel headers.  Patch by a sun <asun@saul7.u.washington.edu>.

1998-03-11 00:16  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp-test.c (command_line_test): New function to allow
	testing of specific cases from the command-line.

1998-03-10  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-init.c (_dl_init_next): Print nicer messages.
	* elf/dl-fini.c (_dl_fini): Likewise.
	* sysdeps/unix/sysv/linux/libc-start.c (__libc_start_main): Likewise.

	* elf/dl-lookup.c (_dl_lookup_versioned_symbol): Print version
	symbol in debug message.
	(_dl_lookup_versioned_symbol_skip): Likewise.

1998-03-10 19:43  Matthias Urlichs <urlichs@noris.de>

	* sysdeps/unix/readdir_r.c: Zero out *result on EOF.
	* sysdeps/unix/sysv/linux/readdir64_r.c: Likewise.
	* manual/filesys/texi: Document this.

1998-03-10 10:49  Ulrich Drepper  <drepper@cygnus.com>

	* manual/filesys.texi: Document the change below.

1998-03-10  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/posix/mkstemp.c (mkstemp): Open temporary file mode 0600.
	Reported by Greg Alexander <galexand@sietch.bloomington.in.us>.

1998-03-10 00:10  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-lookup.c (do_lookup): Remove list and n parameter and add
	instead scope.  If debugging display information about symbol
	resolving.
	(_dl_lookup_symbol): Call do_lookup with correct parameters.
	(_dl_lookup_symbol_skip): Likewise.
	(_dl_lookup_versioned_symbol): Likewise.
	(_dl_lookup_versioned_symbol_skip): Likewise.
	* elf/dl-support.c: Define _dl_debug_symbols.
	* elf/link.h: Add declaration for _dl_debug_symbols.
	* elf/rtld.c: Define _dl_debug_symbols.
	(process_dl_debug): Recognize symbols option.

1998-03-09 23:36  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/init-first.c [!PIC]: Expect arguments
	in correct format.
	* sysdeps/unix/sysv/linux/libc-start.c: Call __libc_init_first
	with correct parameters.
	[!PIC]: Initialize __libc_multiple_libcs.

1998-03-09 18:21  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-support.c (_dl_debug_bindings): Add definition.
	* elf/rtld.c (_dl_debug_bindings): Add definition.
	(process_dl_debug): Recognize bindings option.  Update help message.
	* elf/link.h (struct link_map): Add l_versyms member.
	(_dl_debug_bindings): Add declaration.
	* elf/version.c (_dl_check_map_versions): Initialize l_versyms.
	* elf/dl-object.c (_dl_new_object): Don't initialize l_rpath_dirs
	and l_reloc_result.
	* elf/dl-lookup.c (do_lookup): Define verstab from l_versyms.
	(sym_val): Remove a member, add m as link_map.
	(do_lookup): Return result appropriately.
	(_dl_lookup_symbol): If _dl_debug_bindings is defined print message.
	Call do_lookup correctly.
	(_dl_lookup_symbol_skip): Likewise.
	(_dl_lookup_versioned_symbol): Likewise.
	(_dl_lookup_versioned_symbol_skip): Likewise.

1998-03-09 08:21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/chown.c: Moved to ...
	* sysdeps/unix/sysv/linux/i386/chown.c: ...here.

	* sysdeps/unix/sysv/linux/i386/chown.c: Correct versioning information.
	* libc.map: Add chown to GLIBC_2.1.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add s_chown here.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove s_chown here.

1998-03-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/ffs.S: Rename function to __ffs and make ffs a
	weak alias.
	* sysdeps/alpha/ffs.c: Likewise.
	* sysdeps/am29k/ffs.c: Likewise.
	* sysdeps/i386/ffs.c: Likewise.
	* sysdeps/i960/ffs.c: Likewise.
	* sysdeps/m68k/ffs.c: Likewise.
	* sysdeps/m88k/ffs.c: Likewise.
	* sysdeps/powerpc/ffs.c: Likewise.
	* sysdeps/rs6000/ffs.c: Likewise.
	* sysdeps/vax/ffs.s: Likewise.
	* string/string.h: Declare __ffs.
	* libc.map: Export it.
	* elf/dl-profile.c (_dl_start_profile): Use __ffs instead of
	__builtin_ffs, which is not guaranteed to be namespace clean.

1998-03-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/sprof.c: Rewrite symbol handling to use the normal symbol
	table, which is much more likely to exist than debugging symbols.
	(printsym): Remove const.
	(load_shobj): Don't use _dl_pagesize.  Fix mapping of section
	header table.

	* libc.map: Export __profile_frequency, used by elf/sprof, to
	avoid infinite recursion during startup.

1998-03-09 12:16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/m68k/sysdep.h (SYSCALL_ERROR_HANDLER):
	Readd lost negate.

	* sysdeps/m68k/sysdep.h: Remove the stabs stuff again.

1998-03-09  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-support.c: Add definition of _dl_debug_impcalls.

1998-03-08  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (process_envvars): Also recognize LD_LIBRARY_PATH,
	LD_PRELOAD, and LD_VERBOSE.
	(dl_main): Use global variables set by process_envvars instead of
	calling getenv.
	* elf/dl-load.c (_dl_init_paths): Don't call getenv to get
	LD_LIBRARY_PATH value, this comes with the parameter.
	* elf/dl-support.c (non_dynamic_init): Pass return value of getenv
	("LD_LIBRARY_PATH") to _dl_init_paths.

1998-03-08 22:55  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (dl_main): Delay initialization of path structure if
	the dynamically linker is invoked implicitly until we read the
	dynamic section.

1998-03-08  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/chown.c: Add versioning stuff.

1998-03-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/chown.c: New file for compatibility of
	Linux 2.0 and 2.1.

	* sysdeps/unix/sysv/linux/syscalls.list: Add chown.

1998-03-08 14:58  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (nisobjdir): Set to path to nis directory.
	(rpath-link): Add nisobjdir.
	Patch by Sven Verdoolaege <skimo@kotnet.org>.

	* elf/Makefile: Pretty print.
	* elf/dl-lookup.c: Include unistd.h.
	* elf/dl-runtime.c: Likewise.

	* localedata/Makefile (test-srcs): Add tst-rpmatch.
	(distribute): Add tst-rpmatch.sh.
	(tests): Add tst-rpmatch to dependency list and run tst-rpmatch.sh.

	New tests for rpmatch function by
	Jochen Hein <jochen.hein@delphi.central.de>.
	* localedata/tst-rpmatch.c: New file.
	* localedata/tst-rpmatch.sh: New file.

	* localedata/locales/de_DE: Correct yesexpr and noexpr.
	* localedata/locales/de_AT: Likewise.

	* posix/getopt.c: Update contact address.
	* posix/getopt1.c: Pretty print.

	* sysdeps/generic/libc-start.c: Do most of the initialization now
	here instead of in start.S.
	* sysdeps/unix/sysv/linux/libc-start.c: Likewise.
	* sysdeps/i386/elf/start.S: Remove most of the initialization code.

	* sysdeps/unix/sysv/linux/i386/profil-counter.h: No need for
	profil_counter to be public.

1998-03-08 13:06  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c (parse_arith): Now works for negative numbers too.
	(parse_param): Coded parameter length expansion (${#var}).
	(parse_param): Handling for "=", "+", "-", and the ":" versions added.
	(parse_param): Cleaned up (fixed) error handling.

	* posix/wordexp-test.c: IFS now includes non-whitespace character
	(comma).  Added more tests.

1998-03-07  Ulrich Drepper  <drepper@cygnus.com>

	* elf/link.h: Fix typos.
	Reported by Andreas Jaeger.

	* nscd/nscd_getpw_r.c (__nscd_getpw_r): Remove false comment.
	* nscd/nscd_getgr_r.c (__nscd_getgr_r): Likewise.

1998-03-06  Ulrich Drepper  <drepper@cygnus.com>

	* argp/argp-help.c: Remove last bits of using gettext instead of
	dgettext.

1998-03-06 17:04  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add _dl_debug_impcalls, _dl_debug_fd, _dl_sysdep_output,
	__libc_start_main.
	* csu/Makefile (routines): Add libc-start.
	* elf/dl-error.c: Remove declaration of _dl_argv.  Include <unitsd.h>.
	* elf/dl-lookup.c: Likewise.
	* elf/dl-version.c: Likewise.
	* sysdeps/i386/dl-machine.h: Likewise.
	* elf/link.h: Declare _dl_argv, _dl_debug_fd.
	Declare _dl_sysdep_output.  Make _dl_sysdep_fatal, _dl_sysdep_error and
	_dl_sysdep_message macros which use _dl_sysdep_output.
	* elf/dl-fini.c: Write out which destructor is called while debugging.
	* elf/dl-init.c: Likewise for constructor.
	* elf/dl-load.c: Use _dl_debug_message instead of _dl_sysdep_message.
	* elf/dl-misc.c: Remove _dl_sysdep_fatal, _dl_sysdep_error and
	_dl_sysdep_message.  Add _dl_sysdep_output.
	* elf/rtld.c: Recognize LD_DEBUG_OUTPUT.  Set _dl_debug_fd if
	this file can be opened.
	For LD_DEBUG=libs also set _dl_debug_impcalls.
	* sysdeps/generic/dl-cache.c: Include unistd.h.
	* sysdeps/generic/libc-start.c: New file.
	* sysdeps/unix/sysv/linux/libc-start.c: New file.
	* sysdeps/i386/elf/start.S: Don't call main directly, call
	__libc_start_main instead.

	* elf/Makefile ($(objpfx)ld.so): Add $(load-map-file) as dependency.

1998-03-06  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nsswitch.c (__nss_nscd_not_available): Removed.

1998-03-06 12:42  Ulrich Drepper  <drepper@cygnus.com>

	* argp/argp.h (struct argp): Add new field domain.
	* argp/argp-help.c: Change all gettext calls to dgettext and use
	domain field from appropriate argp in call.
	* argp/argp-parse.c: Likewise.

1998-03-06 11:35  Ulrich Drepper  <drepper@cygnus.com>

	* posix/wordexp-test.c: Change testsuite so that it can run even
	for ~root != /root.

1998-03-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (catanh_test): Change epsilon for gcc 2.8.1.

1998-03-05  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/i386/sysdep.h (SYSCALL_ERROR_HANDLER):
	Don't store into global errno if we already store through
	__errno_location.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/alpha/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.  Add
	missing return to SYSCALL_ERROR_HANDLER for (!_LIBC_REENTRANT &&
	PIC).

1998-03-05  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/sysdep.h (L): Remove definition.
	* sysdeps/i386/sysdep.h (L): Define it here instead.

1998-03-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nis/nis_call.c (__do_niscall): Safe and reset errno.

	* nis/ypclnt.c (do_ypcall, yp_all): Safe and reset errno.

1998-03-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/generic/getresuid.c (__getresuid): Use ISO C
	declaration style to avoid warnings.

1998-03-06 11:48  Mark M. Kettenis  <kettenis@hall.phys.uva.nl>

	* elf/rtld.c (process_dl_debug): Fix typo: "DL_DEBUG" ->
	"LD_DEBUG".

1998-03-05  Ulrich Drepper  <drepper@cygnus.com>

	* posix/Makefile (tests): Add wordexp-test.
	* posix/wordexp-test.c: New file.  Testsuite for wrodexp.
	Patches by Tim Waugh <tim@cyberelk.demon.co.uk>.

1998-03-05 16:04  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile ($(objpfx)rtldtbl.h): Add genrtldtbl.awk to the
	dependencies.

	* elf/link.h (struct r_search_path_elem): Add two new field for
	lib path debugging.
	* elf/rtld.c: Recognize LD_DEBUG environment variable and set
	variable accordingly.
	* elf/dl-load.c: If _dl_debug_libs is nonzero print what library
	is considered next along with information about load paths.
	* sysdeps/generic/dl-cache.c: Likewise.
	* elf/dl-support.c: Define _dl_debug_libs.
	* elf/genrtldtbl.awk: Add initializers for two new field in
	struct r_search_path_elem.

1998-03-06 10:40  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/add_n.S: Use ENTRY and END macros.
	* sysdeps/m68k/lshift.S: Likewise.
	* sysdeps/m68k/rshift.S: Likewise.
	* sysdeps/m68k/sub_n.S: Likewise.
	* sysdeps/m68k/m68020/addmul_1.S: Likewise.
	* sysdeps/m68k/m68020/mul_1.S: Likewise.
	* sysdeps/m68k/m68020/submul_1.S: Likewise.

	* sysdeps/unix/sysv/linux/m68k/sysdep.S: Use ENTRY macro.
	[_LIBC_REENTRANT]: Don't store into global errno.

	* sysdeps/m68k/sysdep.h: New file.
	* sysdeps/unix/sysv/linux/m68k/sysdep.h: Use it.  Use the macros
	ENTRY, CALL_MCOUNT, JUMPTARGET and syscall_error from there.
	(DO_CALL): Change to expect syscall name as argument.
	(PSEUDO): Pass syscall_name to DO_CALL.
	(SYSCALL_ERROR_HANDLER) [_LIBC_REENTRANT]: Don't store into global
	errno.

1998-03-05  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c: Speed up processing of environment variables.  Do
	only one run on the environment by avoiding to call getenv.
	* sysdeps/generic/dl-sysdep.c (_dl_next_ld_env_entry): New
	function.  Used by patch above.

1998-03-05  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nss/getXXbyYY_r.c: Check __nss_not_use_nscd_* variable for
	running nscd.
	* nscd/nscd_getgr_r.c: Set __nss_not_use_nscd_group variable.
	* nscd/nscd_getpw_r.c: Set __nss_not_use_nscd_passwd variable.
	* nscd/nscd_proto.h: Declare __nss_not_use_nscd_* variables.

1998-03-05  Ulrich Drepper  <drepper@cygnus.com>

	* nss/nsswitch.c (nss_lookup_function): Don't modify errno if NSS
	module cannot be found.  Reported by Andreas Jaeger.

1998-03-05 11:40  Franz Sirl <Franz.Sirl-kernel@lauterbach.com>

	* nscd/nscd_getgr_r.c: Change char to int to avoid compiler warning
	on platforms which default to unsigned chars.
	* nscd/nscd_getpw_r.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sysdep.h: Undefine L before
	defining it.

1998-03-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/Makefile (install-bin): Change = to += for sprof to install
	ldd also.

1998-03-04 16:12  H.J. Lu  <hjl@gnu.org>

	* libio/strops.c (_IO_str_seekoff): Handle MODE == 0.

1998-03-04 16:19  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/nscd_getgr_r.c: Follow nscd_getpw_r.c change.

1998-03-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nscd/nscd_getpw_r.c (nscd_open_socket): Safe and reset errno so
	that a failure to connect to nscd doesn't change errno.

1998-03-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/maint.texi (Reporting Bugs): Change
	bug-glibc@prep.ai.mit.edu to bug-glibc@gnu.org.

	* locale/iso-4217.def: Likewise

1998-03-04 12:43  Ulrich Drepper  <drepper@cygnus.com>

	* manual/texinfo.tex: Updated.

1998-03-03  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/posix/fpathconf.c: Don't modify errno for an undefined
	value.
	* sysdeps/posix/pathconf.c: Likewise.
	* posix/getconf.c: Print `undefined' if pathconf returns -1
	without setting errno.

1998-03-04  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c: Fix cut&paste
	problem.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: New file.
	Patches by Elliot Lee <sopwith@cuc.edu>.

1998-03-04 09:43  Ulrich Drepper  <drepper@cygnus.com>

	* elf/link.h (struct link_map): Add new field l_reloc_result.
	* elf/dl-reloc.c (_dl_relocate_object): Allocate array for results
	of relocation for the object to be profiled.
	* elf/dl-object.c (_dl_new_object): Initialize l_reloc_result field
	to NULL.
	* elf/rtld.c (_dl_start): Add comment that we must not allocate an
	array here.
	* elf/dl-runtime.c (profile_fixup): If l_reloc_result array already
	contains a result from a previous run use this instead of computing
	the value again.
	* elf/dl-minimal.c (malloc): Remove limit for size of allocation.

1998-03-04 11:32  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/dl-machine.h: (elf_machine_load_address): Use word
	offsets into the GOT.
	(RTLD_START): Likewise.

1998-03-03 17:55  Ulrich Drepper  <drepper@cygnus.com>

	* elf/sprof.c: Cleanup a bit.

1998-03-03 08:01  H.J. Lu  <hjl@gnu.org>

	* sysdeps/generic/sysdep.h (L): New. Define.

	* sysdeps/unix/sysv/linux/i386/sysdep.h (L): New. Define.

	* sysdeps/i386/i586/addmul_1.S: Fix a typo.

	* sysdeps/unix/sysv/linux/i386/clone.S: Follow Intel's advice
	to have only one exit point for functions.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/s_pread64.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/s_pwrite64.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/syscall.S: Likewise.

1998-03-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sigaction.c (__sigaction): Safe and
	reset errno so that errno isn't set to ENOSYS in the first call.
	* sysdeps/unix/sysv/linux/i386/sigaction.c (__sigaction): Likewise.
	* sysdeps/unix/sysv/linux/sigsuspend.c (__sigsuspend): Likewise.
	* sysdeps/unix/sysv/linux/sigprocmask.c (__sigprocmask): Likewise.
	* sysdeps/unix/sysv/linux/sigpending.c (sigpending): Likewise.

1998-03-02 17:55  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/add_n.S: Change to use ENTRY and END macro.
	* sysdeps/i386/addmul_1.S: Likewise.
	* sysdeps/i386/lshift.S: Likewise.
	* sysdeps/i386/mul_1.S: Likewise.
	* sysdeps/i386/rshift.S: Likewise.
	* sysdeps/i386/sub_n.S: Likewise.
	* sysdeps/i386/submul_1.S: Likewise.
	* sysdeps/i386/i586/add_n.S: Likewise.
	* sysdeps/i386/i586/addmul_1.S: Likewise.
	* sysdeps/i386/i586/lshift.S: Likewise.
	* sysdeps/i386/i586/mul_1.S: Likewise.
	* sysdeps/i386/i586/rshift.S: Likewise.
	* sysdeps/i386/i586/sub_n.S: Likewise.
	* sysdeps/i386/i586/submul_1.S: Likewise.

	* sysdeps/i386/sysdep.h: Extend last change.

	* sysdeps/unix/sysv/linux/i386/sysdep.h: Follow Intel's advice
	to have only one exit point for functions.

1998-03-02  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Fix msgfmt test.  Fix handling of //s in sysdeps
	search.

1998-03-02 13:28  Ulrich Drepper  <drepper@cygnus.com>

	* Makerules: Generate libc.so with absolute paths for the used
	shared objects.

	* config.make.in: Add MAKEINFO definition.

1998-03-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/sysdep.h (ASM_SIZE_DIRECTIVE): Add ; at the end.
	(ENTRY): Use STABS_FUN.
	(END): Use STABS_FUN_END.
	(STABS_FUN, STABS_FUN2, STABS_FUN_END): New macro to emit stabs info.

	* elf/Makefile: Add rules to build sprof program.
	* elf/sprof.c: New file.

1998-02-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* misc/syslog.c (openlog_internal): Insert missing closing brace.

1998-02-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Check for working msgfmt version (from GNU gettext
	0.10 or later).

1998-03-02  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Avoid //s in sysdirs.
	Patch by Roland McGrath.

	* stdlib/a64l.c (a64l): Rewrite by Joe Keane <jgk@jgk.org>.

1998-03-02 07:17  H.J. Lu  <hjl@gnu.org>

	* elf/dl-open.c (_dl_open): Update _dl_global_scope_end when
	setting _dl_global_scope for RTLD_GLOBAL.

1998-02-27  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/make-syscalls.sh: Fix last change so that all
	possible lists of object-suffixes are taken care of.

1998-03-02 10:16  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/private.h: Update from tzcode1998c.
	* timezone/zic.c: Likewise.
	* timezone/antarctica: Updated from tzdata1998c.
	* timezone/asia: Likewise.
	* timezone/australasia: Likewise.
	* timezone/europe: Likewise.
	* timezone/southamerica: Likewise.

1998-03-02  Ulrich Drepper  <drepper@cygnus.com>

	* posix/glob.c (glob_in_dir): Add support for cases insensitive
	VMS.  Patch by John W. Eaton <jwe@bevo.che.wisc.edu>.

1998-03-01 19:05  H.J. Lu  (hjl@gnu.org)

	* sysdeps/libm-ieee754/e_exp.c (__ieee754_exp): Use __isinf.
	Changed type of TWO43, TWO52 from float to double.
	* sysdeps/libm-ieee754/e_expf.c (__ieee754_expf): Use __isinff.
	* sysdeps/libm-ieee754/s_exp2.c (__ieee754_exp2): Use __isinf.
	Changed type of TWO43 from float to double.
	* sysdeps/libm-ieee754/s_exp2f.c (__ieee754_exp2f): Fix a typo.
	Use __isinff.

1998-03-01 18:52  H.J. Lu  (hjl@gnu.org)

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (osf_settimeofday,
	osf_getitimer, osf_setitimer, osf_utimes, osf_getrusage,
	osf_wait4): Removed __xxxx symbol for GLIBC_2.0.

1998-03-01 09:11  Richard Henderson  <rth@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/bits/ioctls.h: Don't include
	kernel_termios.h.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h (CBAUD, CIBAUD): Fix.
	Clean up random whitespace.
	* sysdeps/unix/sysv/linux/sparc/sparc32/brk.c: Tidy the asm.
	* sysdeps/unix/sysv/linux/sparc/sparc32/socket.S: Use std on the args.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.S: Fix use of .bss.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sys/ucontext.h: New file.

1998-03-01 08:31  Richard Henderson  <rth@cygnus.com>

	* shlib-versions: Match alpha*.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add adjtimex.
	* sysdeps/unix/sysv/linux/alpha/adjtimex.S: Remove.

	* sysdeps/alpha/fpu/bits/mathinline.h (isunordered et al): New.
	Implement copysign* with and without __ prefix.
	Likewise for fabs; use builtin for gcc 2.8.
	(floor*): New.
	(fdim*): New.

	* elf/elf.h (EF_SPARC*, EF_ALPHA*, SHT_ALPHA*, SHF_ALPHA*): New.
	(R_SPARC*): Match current v9 ABI.

	* sysdeps/wordsize-64/stdint.h (intptr_t): Is a long.

	* sunrpc/clnt_udp.c (clntudp_call): Use socklen_t.
	* sunrpc/pmap_rmt.c (clnt_broadcast): Likewise.
	* sunrpc/svc_tcp.c (svctcp_create, rendezvous_request): Likewise.
	* sysdeps/generic/getresgid.c: Use prototype form because of warning.
	* sysdeps/unix/sysv/linux/getdents.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/adjtime.c: Likewise.
	* sysdeps/unix/grantpt.c (argv): Fix consts.
	* sysdeps/unix/sysv/linux/getpt.c: Include <string.h>
	* sysdeps/unix/sysv/linux/sigaction.c: Likewise.

1998-02-27  Ulrich Drepper  <drepper@cygnus.com>

	* misc/syslog.c: Change to allow user the interpretation of the
	outcome even with syslog having no return value.

1998-02-05 20:41  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* elf/dl-addr.c: Fix search algorithms in dladdr(); don't assume
	that the number of program headers is >0 (which is wrong for the
	loader itself).

1998-02-27  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (distribute): Add README.libm.

1998-02-27  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* time/clocktest.c (main): Correct typo: "--" -> "==".

1998-02-25 20:53  H.J. Lu  <hjl@gnu.org>

	* sysdeps/alpha/fpu/bits/mathinline.h (atan): Removed the bogus
	inline function.
	(copysignf, __copysignf, copysign, fabsf, __fabsf, fabs): New
	inline functions.

	* math/libm.map (__atan2): Added.

1998-02-27  Ulrich Drepper  <drepper@cygnus.com>

	* misc/efgcvt_r.c (APPEND): Handle printing of 0.0 correctly.
	Reported by Gran Uddeborg <goeran@uddeborg.pp.se>.

	* misc/tst-efgcvt.c (ecvt_tests): Add new test case for reported
	bug.

1998-02-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/arith.texi (Old-style number conversion): Correct
	typo. Reported by Gran Uddeborg <goeran@uddeborg.pp.se>.

1998-02-27  Ulrich Drepper  <drepper@cygnus.com>

	* posix/execlp.c: POSIX.1 says that argv[0] *should* be provided,
	but does not require it.  Handle missing argv[] values gracefully.
	* posix/execl.c: Likewise.
	* posix/execle.c: Likewise.

1998-02-25  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/libm-ieee754/s_isnanl.c: Ignore the explicit integer
	bit.
	* sysdeps/libm-ieee754/s_isinfl.c: Likewise.

1998-02-27  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add __adjtimex.

1998-02-26  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_nisplus/nisplus-ethers.c (_nss_nisplus_getntohost_r):
	Remove memset.

1998-02-24 08:10  H.J. Lu  <hjl@gnu.org>

	* sysdeps/unix/sysv/linux/alpha/bits/signum.h (_NSIG): Changed
	to 64.

	* sysdeps/unix/alpha/sysdep.S (_errno): Add in addition to __errno.

	* sysdeps/alpha/s_fabs.S: Added ".set noat"/".set at".
	* sysdeps/unix/sysv/linux/alpha/wait4.S: Ditto.

	* sysdeps/unix/make-syscalls.sh: Make versioned symbols only
	for shared library.

	* libc.map (adjtime, adjtimex): Added for GLIBC_2.1.

	* sysdeps/unix/sysv/linux/alpha/Makefile (sysdep_routines):
	Added adjtimex and old_adjtimex.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (old_adjtimex):
	New.
	(osf_settimeofday, osf_getitimer, osf_setitimer, osf_utimes,
	osf_getrusage, osf_wait4): Added __xxxx symbol for GLIBC_2.0.

	* sysdeps/unix/sysv/linux/alpha/getitimer.S: Make versioned
	symbols only for shared library.
	* sysdeps/unix/sysv/linux/alpha/getrusage.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/gettimeofday.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/select.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/setitimer.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/settimeofday.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/utimes.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/wait4.S: Likewise.

	* sysdeps/unix/sysv/linux/alpha/getitimer.S: Fix ENOSYS branch.
	* sysdeps/unix/sysv/linux/alpha/getrusage.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/gettimeofday.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/select.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/setitimer.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/settimeofday.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/utimes.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/wait4.S: Likewise.

	* sysdeps/unix/sysv/linux/alpha/wait4.S: Check the correct
	rusage pointer.

	* sysdeps/unix/sysv/linux/adjtime.c (TIMEVAL, TIMEX, ADJTIMEX):
	New macros.
	(__adjtime): Use TIMEVAL, TIMEX and ADJTIMEX instead of timeval,
	timex and __adjtimex, respectively.

	* sysdeps/unix/sysv/linux/alpha/adjtime.c: New.

	* sysdeps/unix/sysv/linux/alpha/adjtimex.S: New.

1998-02-25 08:28  H.J. Lu  <hjl@gnu.org>

	* sysdeps/alpha/fpu/fraiseexcpt.c (feraiseexcept): Use a dummy
	for FE_DIVBYZERO. Kludge for FE_UNDERFLOW.

1998-02-26 14:59  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfscanf.c [!USE_IN_LIBIO] (inchar): Add missing braces.

1998-02-19 11:00  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* Makefile.in: Disable built-in rules.

1998-02-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/i386/fpu/t_exp.c: Move to ...
	* sysdeps/libm-i387/t_exp.c: ... here.

1998-02-21 13:51  H.J. Lu  <hjl@gnu.org>

	* sysdeps/libm-ieee754/s_exp2f.c (__exp2f_deltatable): Renamed
	from __exp2_deltatable.

1998-02-26  Ulrich Drepper  <drepper@cygnus.com>

	* nis/ypclnt.c (yp_master): Check result of strdup.
	Patch by Thorsten Kukuk.

1998-02-26  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c: Give clnt handle after error checking free, change
	return codes to fix problems with rpc.nisd in YP mode on Ultra's.

1998-02-26 09:00  Ulrich Drepper  <drepper@cygnus.com>

	* misc/fstab.c: Partly rewritten to use dynamically allocated buffer.
	Patch by Joe Keane <jgk@jgk.org>.

	* misc/fstab.h (struct fstab): Change fs_type member to be const.
	* misc/fstab.c: Remove casts in fs_type assignments.

1998-02-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/i386/fpu/bits/fenv.h: Correct typo.  ISO C 9X defines
	FE_TOWARDZERO and not FE_TOWARDSZERO.  Reported by H.J. Lu.
	* sysdeps/sparc/sparc64/fpu/bits/fenv.h: Likewise.
	* sysdeps/sparc/sparc32/fpu/bits/fenv.h: Likewise.
	* sysdeps/powerpc/bits/fenv.h: Likewise.
	* sysdeps/m68k/fpu/bits/fenv.h: Likewise.
	* sysdeps/generic/bits/fenv.h: Likewise.
	* sysdeps/alpha/fpu/bits/fenv.h: Likewise.
	* sysdeps/i386/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/powerpc/test-arith.c (main): Likewise.

1998-02-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/bits/mathinline.h: Also fix i386 versions of
	the comparison macros.

1998-02-21 20:14  H.J. Lu  <hjl@gnu.org>

	* sysdeps/libm-ieee754/s_log2.c (ln2): Added.
	(__log2): Fixed return values.
	* sysdeps/libm-ieee754/s_log2f.c: Likewise.

1998-02-25  Ulrich Drepper  <drepper@cygnus.com>

	* math/math.h (isunordered): Rename local variables to ensure
	correct code.  Reported by HJ Lu.

1998-02-25 10:34  Ulrich Drepper  <drepper@cygnus.com>

	* sysdpes/i386/fpu/bits/mathinline.h (isgreater, isgreaterequal,
	isless, islessequal, islessgreater, isunordered): Fix syntax for
	fucompip instruction.
	(isless, islessequal): Fix logic.

1998-02-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (sqrt_test): Add test for sqrt(2).
	(comparisons_test): New tests for comparison macros.

1998-02-24 15:12  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig: Filter out frame-pointer effecting options when
	compiling profiling or debugging code.
	* config.h.in (internal_function): Don't define here if PROF is
	defined.
	* gmon/gmon.c (__moncontrol): Don't change state if already in error
	state.
	(__monstartup): If calloc fails set error state and mark array as
	not allocated.
	(_mcleanup): Don't call write_gmon if in error state.  Don't try
	to free array if not  successfully allocated.

	* elf/dl-load.c (STRING): Define to __STRING to enble expansion.
	Include elf.h to get macro definitions.
	Use __ELF?NATIVE?CLASS in message, not __ELF_WORDSIZE.

1998-02-24 09:40  Ulrich Drepper  <drepper@cygnus.com>

	* elf/ldd.sh.in: Add compatibility for broken old shells.
	* elf/ldd.bash.in: Likewise.

1998-02-24 08:11  H.J. Lu  <hjl@gnu.org>

	* sunrpc/rpc_main.c (open_input): Check pipe return error.

	* time/clocktest.c (main): Check signal return error.

1998-02-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* iconv/Makefile ($(inst_bindir)/iconv): Correct typo, add
	"/" and use do-install-program. Reported by Mark M. Kettenis.
	(subdir_install):  Likewise.

1998-02-22  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/rpc_sample.c: Fix typo.

	* nscd/connections.c: Use locale.
	* nscd/grpcache.c: Add debug messages, gidtbl should get the
	  calloc result.
	* nscd/nscd.c: Check if init functions fails.
	* nscd/nscd_conf.c: Allow disabling of group cache.
	* nscd/nscd_getgr_r.c: Fix return code if group not found.
	* nscd/pwdcache.c: Fix debug messages.

1998-02-22  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libc.map: Add __monstartup and _mcleanup for profiling support.

1998-02-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libc.map: Export __getpagesize, for binary compatibility with
	2.0.

1998-02-21  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* posix/globtest.sh: Use --library-path instead of
	LD_LIBRARY_PATH.
	* localedata/sort-test.sh: Likewise.
	* localedata/tst-fmon.sh: Likewise.  Avoid useless use of cat.

1998-02-22  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sigaction.c: Translate between struct
	sigaction and struct kernel_sigaction for __syscall_rt_sigaction.
	* sysdeps/unix/sysv/linux/i386/sigaction.c: Likewise.

	* sysdeps/unix/sysv/linux/kernel_sigaction.h (struct
	kernel_sigaction): Define.
	* sysdeps/unix/sysv/linux/alpha/kernel_sigaction.h (struct
	kernel_sigaction): Define.

1998-02-23  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c: Change epsilons for libm-ieee754.

1998-02-23 12:33  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/__longjmp.S: Fix race condition.
	Reported by Bruno Haible <haible@ilog.fr>.

1998-02-20 18:43  Ulrich Drepper  <drepper@cygnus.com>

	* hesiod/hesiod.c: Pretty print.  Don't use __ protected names.
	* iconvdata/8bit-gap.c: Likewise.
	* iconvdata/8bit-generic.c: Likewise.
	* iconvdata/iso6937.c: Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/sjis.c: Likewise.
	* iconvdata/t61.c: Likewise.

1998-02-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/bits/termios.h: Replace all negative
	feature tests by positive feature tests.

1998-02-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/unlockpt.c: Always return a value.

1998-02-20  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dlvsym.c (dlvsym_doit): More corrections.
	Patch by Andreas Jaeger.

1998-02-19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sigqueue.c: Fix weak alias definition.

1998-02-19 17:16  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: More reordering for GLIBC_2.1 symbols.

1998-02-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libc.map: Move some functions from version GLIBC_2.0 to
	GLIBC_2.1, reorder declarations.

1998-02-19  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/gethnamaddr.c (addrsort): Make this function extern.
	Patch by zab@thebrain.grumblesmurf.net.

1998-02-19  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/libnsl.map: NIS+ support is new in glibc 2.1, add
	NIS+ functions with version GLIBC_2.1.

1998-02-19 14:05  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add __sbrk, __setpgid, __getpgid for binary compatibility
	with 2.0 binaries.  Reported by Thorsten Kukuk.

1998-02-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/dlvsym.c (dlvsym_doit): Correct last patch.

	* elf/dlsym.c (dlsym_doit): Likewise.

1998-02-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/link.h: Correct typos.

	* iconv/iconv_prog.c: Correct typo.

1998-02-18 17:57  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/Makefile: Add rules to build and install iconv program.
	* iconv/iconv_prog.c: New file.

1998-02-18 16:34  H.J. Lu  <hjl@gnu.org>

	* elf/dlsym.c (dlsym_doit): Fix scope and skip maps for
	_dl_lookup_symbol_skip call.
	* elf/dlvsym.c (dlvsym_doit): Likewise.

1998-02-18  Ulrich Drepper  <drepper@cygnus.com>

	* libio/iovsscanf.c: Do not include errno.h.

1998-02-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-load.c (add_name_to_object): Don't translate strings.
	* elf/dl-minimal.c (_strerror_internal): Define it here to avoid
	pulling in the whole error list.
	(__dcgettext, dcgettext): Removed.
	* libc.map: Export _strerror_internal.

1998-02-18 10:50  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/t_exp.c: New file.

1998-02-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nis/libnss_nisplus.map: NIS+ support is new in glibc 2.1, add
	everything with version GLIBC_2.1.
	* hesiod/libnss_hesiod.map: Likewise.

1998-02-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/arith.texi (Old-style number conversion): This node is a
	section, not a subsection.

1998-02-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-lookup.c (make_string): Use __stpcpy instead of stpcpy.

1998-02-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/rtld.c (dl_main): Make sure that the library search paths
	have been initialized before the first call to _dl_map_object.

1998-02-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules (common-generated): Add libc_pic.os.

1998-02-17  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/rtld.c (dl_main): Use PT_PHDR to figure out the load address
	of the executable.

1998-02-18 10:28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/fpu/t_exp.c: New file.

1998-02-17  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/errno.h (__set_errno): Don't assign
	to global errno variable anymore.

1998-02-17 17:41  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c (open_path): Take extra argument PRELOADED.
	If PRELOADED is nonzero check in case of an SUID application
	whether the shared object has the SUID bit set.
	Fix some other problems with handling shared objects in system
	specific directories.
	(_dl_map_object): Also take extra parameter and pass it to open_path.
	* elf/link.h (_dl_map_object): Correct prototype and comment.
	* elf/rtld.c (dl_main): Call _dl_map_object correctly.
	* elf/dl-open.c (_dl_open): Likewise.
	* elf/dl-deps.c (openaux, _dl_map_object_deps): Likewise.

	* sysdeps/libm-ieee754/s_modfl.c: Handle numbers > 1.0 correctly.

1998-02-17  Ulrich Drepper  <drepper@cygnus.com>

	* math/libm-test.c (modf_test): Add test for 1.5.

	* sysdeps/generic/bits/select.h (__FD_ISSET): Compare result with
	0 to get always an int.

1998-02-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm.map: Move all symbols that are new in glibc 2.1 to
	version GLIBC_2.1.

1998-02-17  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfscanf.c (inchar): Check c for being EOF before
	trying to read another character.

1998-02-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nis/nss_nis/nis-alias.c (_nss_nis_getaliasbyname_r): Convert
	name to lowercase.

	* nis/nss_nis/nis-network.c (_nss_nis_getnetbyname_r): Convert
	name to lowercase, add test for big enough buffer.

1998-02-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/alpha/rt_sigaction.S (rt_sigreturn):
	Make compatible with older kernels.  Patch by Richard Henderson.

1998-02-17 15:10  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c (open_path): Use __xstat instead of stat.

	* localedata/tst-locale.sh: Comment out first test for now.

1998-02-14 14:58  H.J. Lu  <hjl@gnu.org>

	* sysdeps/generic/_G_config.h (_G_HAVE_IO_GETLINE_INFO): Defined
	as 1.
	* sysdeps/unix/sysv/linux/_G_config.h (_G_HAVE_IO_GETLINE_INFO):
	Likewise.

	* libio/iogetline.c (_IO_getline_info): Renamed from
	_IO_getline.
	(_IO_getline): Just call _IO_getline_info.

	* libio/libioP.h (_IO_getline_info): New declaration.

	* libc.map (_IO_getline_info, __write): Added.

1998-02-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sunrpc/rpc_cout.c (inline_struct): Change typo of plus to
	const char* to shut up gcc.

1998-02-17 11:37  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-open.c (_dl_open): Assign correct value to new->l_global.
	Patch forwarded by Cristian Gafton <gafton@redhat.com>.

	* math/math.h: Define M_* constants always as `double' and add new
	macros M_*l which are of type `long double'.
	* sysdeps/libm-ieee754/s_cacoshl.c: Use M_*l constants now.
	* sysdeps/libm-ieee754/s_cacosl.c: Likewise.
	* sysdeps/libm-ieee754/s_casinhl.c: Likewise.
	* sysdeps/libm-ieee754/s_catanhl.c: Likewise.
	* sysdeps/libm-ieee754/s_catanl.c: Likewise.
	* sysdeps/libm-ieee754/s_clog10l.c: Likewise.
	* sysdeps/libm-ieee754/s_clogl.c: Likewise.
	* math/libm-tst.c: Likewise.

	* sysdeps/i386/fpu/bits/mathinline.h (__M_SQRT2): Don't use _Mdbl,
	define as long double unconditionally.

1998-02-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/arith.texi (Old-style number conversion): Correct some
	typos.

1998-02-16 16:28  H.J. Lu  <hjl@gnu.org>

	* time/Makefile (tz-cflags, CFLAGS-tzfile.c, CFLAGS-tzset.c):
	Restore.

	* timezone/Makefile (CFLAGS-tzfile.c, CFLAGS-tzset.c): Deleted.

1998-02-16  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile ($(objpfx)ld.so): Don't depend on rtld-script but
	on $(rtld-ldscript).

	* sysdeps/unix/sysv/linux/alpha/ioperm.c (_ioperm): Map all ports
	starting from 0 not only from `from'.
	Patch by Maciej W. Rozycki <macro@ds2.pg.gda.pl>.

1998-02-16 17:33  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (dl_main): Recognize --library-path parameter and
	pass value (or NULL) to _dl_init_paths.
	* elf/dl-load.c (_dl_init_paths): Change to take one parameter,
	replacing local variable llp.  If llp is NULL examine LD_LIBRARY_PATH
	environment variable.
	* elf/link.h: Change prototype for _dl_init_paths.
	* elf/dl-support.c: Pass NULL in _dl_init_paths call.

	* localedata/Makefile (distribute): Add test files.

1998-02-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* localedata/tests/{test1.cm, test2.cm, test3.cm, test4.cm,
	test1.def, test2.def, test3.def, test4.def}: Simple input files
	for localedef. Contributed by Yung-Ching Hsiao
	<yhsiao@cae.wisc.edu>.

	* localedata/Makefile (tests): Call tst-locale.sh.

	* localedata/tst-locale.sh: New file, regression tests for some
	localedef problems.

1998-02-15  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_nisplus/nisplus-alias.c: Use __stpncpy.

	* nis/nss_nisplus/nisplus-hosts.c: Make sure buffer is always NUL
	terminated.
	* nis/nss_nisplus/nisplus-network.c: Likewise.
	* nis/nss_nisplus/nisplus-proto.c: Likewise.
	* nis/nss_nisplus/nisplus-rpc.c: Likewise.
	* nis/nss_nisplus/nisplus-service.c: Likewise.

	Add more changes from TI-RPC 2.3 for rpcgen to fix include/C++ bug
	and support generating thread safe RPC code.
	* sunrpc/rpc_main.c: Add changes.
	* sunrpc/rpc_clntout.c: Likewise.
	* sunrpc/rpc_cout.c: Likewise.
	* sunrpc/rpc_hout.c: Likewise.
	* sunrpc/rpc_parse.c: Likewise.
	* sunrpc/rpc_sample.c: Likewise.
	* sunrpc/rpc_scan.c: Likewise.
	* sunrpc/rpc_svcout.c: Likewise.
	* sunrpc/rpc_util.c: Likewise.
	* sunrpc/rpc_util.h: Add new structs and prototypes.
	* sunrpc/proto.h: Remove prototypes for static functions.

1998-02-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* locale/programs/ld-messages.c (messages_finish): Don't skip
	error checking when being quiet.
	* locale/programs/ld-ctype.c (ctype_finish): Likewise.
	(set_class_defaults): Likewise.
	* locale/programs/charmap.c (parse_charmap): Likewise.
	* locale/programs/ld-collate.c (collate_finish): Likewise.
	* locale/programs/ld-monetary.c (monetary_finish): Likewise.
	* locale/programs/ld-time.c (time_finish): Likewise.
	* locale/programs/locfile.c (write_locale_data): Likewise.

	* locale/programs/ld-ctype.c (ctype_class_to): Silently ignore
	unknown characters and empty ranges.
	* locale/programs/ld-collate.c (collate_order_elem): When
	processing an ellipsis properly form a linked list in the result
	table, fix typo when allocating ordering array.
	[PR libc/419]

1998-02-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/Makefile (ld-map): Define.
	(rtld-ldscript): Define.  Change all `$(objpfx)rtld-ldscript' to
	`$(rtld-ldscript)'.
	($(objpfx)ld.so): Combine the two versions of this rule.  Depend
	on $(ld-map).
	(rtld-link): Combine the two versions of this definition.  Fixed
	to make it work when no symbol versioning is used.

1998-02-16  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (build-program-cmd): Use --library-path parameter to
	ld.so instead of environment variable.

	* sunrpc/Makefile (rpcgen-cmd): Don't use -$ parameter.
	* sunrpc/rpc_main.c: Remove support for -$$ option again.

1998-02-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Make-dist: Respect with-cvs setting.
	* MakeTAGS (all-pot): Likewise.
	* sysdeps/sparc/sparc32/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.
	* stdlib/Makefile: Likewise.
	* posix/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* po/Makefile (linguas): Likewise

1998-02-15  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c (yp_all): Remove error message, user should print it.

1998-02-15  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add __strcasecmp.

	* nss/nsswitch.c (__nss_lookup): Return 1 if this was the last
	module.

	* nss/getXXent_r.c: If no more module is found don't try to call
	setXXent functions but leave unsuccessfully.

	* malloc/obstack.h: Cleanups.

	* sysdeps/wordsize-32/stdint.h: New file.
	* sysdeps/wordsize-64/stdint.h: New file.
	* sysdeps/generic/stdint.h: New file.
	* sysdeps/wordsize-32/inttypes.h: Adopt to use stdint.h.
	* sysdeps/wordsize-64/inttypes.h: Likewise.
	* stdlib/Makefile (headers): Add stdint.h.

1998-02-03  Paul Eggert  <eggert@twinsun.com>

	* malloc/obstack.h (PTR_INT_TYPE): Use __PTRDIFF_TYPE__ if available.

1998-02-13 17:59  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* timezone: New directory.
	* time/README, time/africa, time/antarctica, time/asia,
	time/australasia, time/backward, time/checktab.awk,
	time/etcetera, time/europe, time/factory, time/ialloc.c,
	time/iso3166.tab, time/leapseconds, time/northamerica,
	time/pacificnew, time/private.h, time/scheck.c,
	time/solar87, time/solar88, time/solar89, time/southamerica,
	time/systemv, time/test-tz.c, time/tzfile.h,
	time/tzselect.ksh, time/yearistype, time/zdump.c,
	time/zic.c, time/zone.tab: Moved to timezone.
	* time/tzfile.c: Include tzfile.h from timezone subdir.
	* time/tzset.c: Likewise.
	* time/Makefile: Cut out all code relating to timezones...
	* timezone/Makefile: ...and paste it in here.
	* Makefile (subdirs): Add timezone.

1998-02-13 18:45  H.J. Lu  <hjl@gnu.org>

	* libc.map (_sys_nerr): Added.

	* sysdeps/unix/sysv/linux/errlist.c (_sys_nerr): Make it
	versioned symbol.

1998-02-15 17:16  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/socket.h: Define PF_KEY and
	pseudo_AF_KEY instead of pseudo_PF_KEY and AF_KEY.
	Reported by Craig Metz <cmetz@inner.net>.

1998-01-22  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* nss/nss_files/files-parse.c (LOOKUP_NAME_CASE): Use __strcasecmp
	instead of strcasecmp.
	* nss/nss_files/files-alias.c (get_next_alias): Likewise.

	* wctype/wctype.h (_ISwbit): Avoid warning with gcc before 2.8.

1998-02-15 16:55  Ulrich Drepper  <drepper@cygnus.com>

	* socket/sys/socket.h (setsockopt): Make OPTVAL parameter const.
	Patch by Dean Gaudet <dgaudet@arctic.org>.

1998-02-15 16:53  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/Dist: Add getresgid.c and getresuid.c.

1998-02-15 10:49  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* sysdeps/unix/sysv/linux/poll.c: If compiled against a kernel
	with no poll syscall, just include the BSD version.
	* sysdeps/unix/sysv/linux/getresuid.c: If compiled against a
	kernel without the syscall, include the stub version.
	* sysdeps/unix/sysv/linux/getresgid.c: Likewise.
	* sysdeps/generic/getresuid.c: New file.
	* sysdeps/generic/getresgid.c: New file.

1998-02-15  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfscanf.c: Correct last change a bit.

1998-02-13 17:39  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile: Don't use --version-script parameter to link ld.so
	unconditionally.

1998-01-02 04:19  Geoff Keating  <geoffk@ozemail.com.au>

	* math/Makefile: Add t_exp.
	* math/libm-test.c: Tighten accuracy bounds for exp(), correct
	constants.
	* math/test-reduce.c: Remove temporarily, it seems to be broken.
	* sysdeps/libm-ieee754/e_exp.c: Use accurate table method.
	* sysdeps/libm-ieee754/e_expf.c: Use table & double precision for
	better accuracy.
	* sysdeps/libm-ieee754/s_exp2.c: Use better polynomial; correct
	algorithm for very large/very small arguments.
	* sysdeps/libm-ieee754/s_exp2f.c: Use slightly better polynomial;
	correct algorithm for very large/very small arguments; adjust for
	new table.
	* sysdeps/libm-ieee754/t_exp.c: New file.
	* sysdeps/libm-ieee754/t_exp2f.h: Use table with smaller deltas.

	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c: Put 'strange test'
	back, with comment that explains what breaks when you remove it :-(.

	* localedata/xfrm-test.c: Avoid integer overflow.

	* stdlib/strfmon.c: char is unsigned, sometimes.

	* sysdeps/powerpc/Makefile: Remove quad float support.
	* sysdeps/powerpc/q_*.c: Remove, they will become an add-on.
	* sysdeps/powerpc/quad_float.h: Likewise.
	* sysdeps/powerpc/test-arith.c: Likewise.
	* sysdeps/powerpc/test-arithf.c: Likewise.

	* sysdeps/generic/s_exp2.c: Remove, we have this implemented now.
	* sysdeps/generic/s_exp2f.c: Likewise.

	* sysdeps/powerpc/bits/mathinline.h: Use underscores around __asm__,
	don't try anything if _SOFT_FLOAT.

1997-12-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* locale/C-ctype.c (_nl_C_LC_CTYPE_class32): Undo last change.
	* locale/programs/ld-ctype.c (CHAR_CLASS32_TRANS): Likewise.
	* wctype/wctype.c: Likewise.
	* wctype/wctype.h (_ISwxxx): Renamed from _ISxxx, all uses
	changed.  They are incompatible with the _ISxxx values from
	<ctype.h> on little endian machines.
	(_ISwbit) [__BYTE_ORDER == __LITTLE_ENDIAN]: Correctly transform
	bit number.  This fixes the real bug and restores the integrity of
	the ctype locale file.
	* wctype/wcfuncs.c: Change all _ISxxx to _ISwxxx.
	* wctype/wcfuncs_l.c: Likewise.
	* wctype/wcextra.c: Likewise.
	* wctype/wctype_l.c [__BYTE_ORDER == __LITTLE_ENDIAN]: Use correct
	byte swapping.

1998-02-09  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.S (errno): Put it
	into .bss segment instead of .common, so that aliases on it work.

	* sysdeps/unix/sysv/linux/i386/sysdep.S (errno): Add .type and
	.size directives, put into .bss segment instead of initializing it
	to 4.

1998-02-12 08:00  H.J. Lu  <hjl@gnu.org>

	* libc.map (gnu_get_libc_release, gnu_get_libc_version): Added.

	* version.c (__gnu_get_libc_release, __gnu_get_libc_version): New
	functions.
	Make names without __ weak aliases.
	(__libc_release, __libc_version): Make them static.

	* include/gnu/libc-version.h: New file.
	* Makefile (headers): Add gnu/libc-version.h.

1998-02-13  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/stdlib.h (struct drand48_data): Leave X to user macros
	and use x for member name.
	Reported by Daniel Lyddy <daniell@cs.berkeley.edu>.

	* stdlib/drand48.c: Change according to member name change.
	* stdlib/drand48_r.c: Likewise.
	* stdlib/lcong48_r.c: Likewise.
	* stdlib/lrand48.c: Likewise.
	* stdlib/lrand48_r.c: Likewise.
	* stdlib/mrand48.c: Likewise.
	* stdlib/mrand48_r.c: Likewise.
	* stdlib/seed48.c: Likewise.
	* stdlib/seed48_r.c: Likewise.
	* stdlib/srand48_r.c: Likewise.

1998-02-11  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/test-netdb.c: Add some more test cases.

1998-02-13 11:39  Ulrich Drepper  <drepper@cygnus.com>

	* libio/iovsscanf.c: Undo last change modifying errno.

1998-02-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* stdio-common/vfscanf.c: Never try to read another character
	after EOF.  Don't decrement read_in after EOF, it wasn't
	incremented in the first place.
	(NEXT_WIDE_CHAR): Set First, not first.

1998-02-06 07:48  H.J. Lu  <hjl@gnu.org>

	* db/Makefile ($(inst_libdir)/libndbm.a,
	$(inst_libdir)/libndbm.so): New targets.
	* db2/Makefile: Likewise.

1998-02-12 08:20  H.J. Lu  <hjl@gnu.org>

	* sysdeps/gnu/errlist.awk (sys_errlist, sys_nerr): Create weak
	aliases if HAVE_ELF or PIC or DO_VERSIONING is not defined.

1998-02-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/_G_config.h: Define _G_wchar_t, for C++
	<streambuf.h>.
	* sysdeps/unix/sysv/linux/_G_config.h: Likewise.

1998-02-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/make-syscalls.sh: Fix sed pattern when dealing with
	versioned symbols.

1998-02-13 08:14  H.J. Lu  <hjl@gnu.org>

	* libc.map (_dl_global_scope, _dl_lookup_symbol_skip,
	_dl_lookup_versioned_symbol, _dl_lookup_versioned_symbol_skip):
	Added for libdl.so.

1998-02-09  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/syscalls.list: Don't mark lchown as
	extra syscall.

	* grp/Makefile: Fix logic when checking for thread package.
	* pwd/Makefile: Likewise.

1998-02-11 08:23  H.J. Lu  <hjl@gnu.org>

	* elf/Makefile (rtld-map): Replaced by libc-map.

	* elf/rtld.map: Removed.

	* libc.map (__libc_enable_secure, _dl_catch_error,
	_dl_check_all_versions, _dl_debug_initialize, _dl_debug_state,
	_dl_default_scope, _dl_global_scope_end, _dl_init_next,
	_dl_lookup_symbol, _dl_map_object, _dl_map_object_deps,
	_dl_object_relocation_scope, _dl_relocate_object,
	_dl_signal_error, _dl_starting_up, _dl_sysdep_start,
	_r_debug): Added for ld.so.

1998-02-10 08:38  H.J. Lu  <hjl@gnu.org>

	* libio/iofclose.c: Check PIC && DO_VERSIONING instead of
	DO_VERSIONING.
	* libio/iofdopen.c: Ditto.
	* libio/iofopen.c: Ditto.
	* libio/oldfileops.c: Ditto.

	* libc.map (sys_nerr, _sys_errlist, sys_errlist): Added for
	version GLIBC_2.1.

	* sysdeps/unix/sysv/linux/Makefile (stdio-common): Removed
	oldsiglist from sysdep_routines and shared-only-routines.

	* sysdeps/unix/sysv/linux/errlist.c: New.
	* sysdeps/unix/sysv/linux/errlist.h: New.
	* sysdeps/unix/sysv/linux/sizes.h: New.
	* sysdeps/unix/sysv/linux/alpha/sizes.h: New.
	* sysdeps/unix/sysv/linux/sparc64/sizes.h: New.

	* sysdeps/unix/sysv/linux/oldsiglist.c: Removed.

	* sysdeps/unix/sysv/linux/siglist.c: Include <sizes.h>.
	(__old_sys_siglist, __old_sys_sigabbrev): Use ELF .size
	directive.

	* sysdeps/unix/sysv/linux/siglist.h (OLD_SIGLIST_SIZE_STR): New.

	* sysdeps/unix/sysv/linux/Dist (errlist.h, sizes.h.): Added.
	(oldsiglist.c): Removed.

	* sysdeps/gnu/errlist.awk (SYS_SIGLIST, SYS_NERR): New.
	(_sys_siglist): Use SYS_SIGLIST instead.
	(_sys_nerr): Use SYS_NERR instead.

	* sysdeps/gnu/errlist.c: Rebuilt.

1998-02-11 08:35  H.J. Lu  <hjl@gnu.org>

	* elf/Makefile (others-static): New, set to ldconfig.
	($(objpfx)ldconfig): Removed.

	* Rules (binaries-all, binaries-static, binaries-shared): New.
	Create targets for $(binaries-static) and $(binaries-shared).

	* Makeconfig (+link-static, link-libc-static,
	link-extra-libs-static): New for static linking.

1998-02-11  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/memory.texi (Using the Memory Debugger): Fix typo.

	* math/libm-test.c (modf_test): Add one more test for modf.

1998-02-11 14:39  Ulrich Drepper  <drepper@happy.cygnus.com>

	* sysdeps/unix/sysv/linux/i386/sigaction.c (__libc_missing_rt_sigs):
	Rename from __libc_have_rt_sigs and leave as COMMON data.

1998-02-11 08:30  H.J. Lu  <hjl@gnu.org>

	* sysdeps/libm-ieee754/w_powl.c (__powl): Use __finitel instead
	of __finite.

1998-02-11 19:16  Richard Henderson  <rth@cygnus.com>

	* stdlib/strtod.c (STRTOF): Don't call lshift with zero count.

1998-02-11 16:56  Ulrich Drepper  <drepper@happy.cygnus.com>

	* misc/tst-efgcvt.c: Add yet more tests.
	* misc/efgcvt_r.c: And correct for these tests again.
	Reported by HJ Lu.

	* isomac.c: Move to...
	* stdlib/isomac.c: ...here.
	* Makefile: Move rules for handling isomac...
	* stdlib/Makefile: ...to here.

1998-02-10 23:57  Ulrich Drepper  <drepper@happy.cygnus.com>

	* misc/tst-efgcvt.c: Add more tests.
	* misc/efgcvt_r.c: Correct result for above new tests.

1998-02-06 17:22  H.J. Lu  <hjl@gnu.org>

	* misc/efgcvt_r.c (fcvt_r, ecvt_r): Correctly handle
	NDIGIT <= 0.

1998-02-10 16:48  Philip Blundell  <pb@nexus.co.uk>

	* Makerules (install-no-libc.a-nosubdir): Don't install-bin (etc)
	if the programs weren't built.

1998-02-09 10:12  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/libm-ieee754/s_exp2.c (__ieee754_exp2): If we don't have
	FE_TONEAREST, soldier on regardless and do the best we can.
	* sysdeps/libm-ieee754/s_exp2f.c (__ieee754_exp2f): likewise.

1998-02-5 17:20  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/standalone/filedesc.h: Define __need_FOPEN_MAX, not
	_STDIO_H, before including <bits/stdio_lim.h>.

	* sysdeps/standalone/arm/bits/errno.h (EOVERFLOW): Added.

	* io/fts.c (fts_build): Don't try to use d_type if it doesn't
	exist.

	* sysdeps/arm/sys/ucontext.h: New file.

1998-02-04 10:11  Philip Blundell  <pb@nexus.co.uk>

	* manual/stdio.texi (Formatted Output Functions): Explicitly say
	that the return value from snprintf() does not count the
	terminating NUL as a character.

1998-02-10 16:57  Ulrich Drepper  <drepper@happy.cygnus.com>

	* manual/users.texi: Rewrite to describe correct POSIX behaviour,
	add description for sete[ug]id and general cleanup.
	Patch by Zack Weinberg <zack@rabi.phys.columbia.edu>.

1998-01-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (parent-clean): Don't remove makefile fragments here.
	(postclean): New variable.
	(clean): Remove makefile fragments here.
	(realclean distclean): Likewise.  Pass sysdep-subdirs to sub-make.
	(generated): Add isomac and isomanc.out.
	* Makeconfig ($(common-objpfx)soversions.mk): Don't generate if
	avoid-generated is set.
	(postclean-generated): Add soversion.mk.
	($(common-objpfx)version.mk): Don't include if avoid-generated is
	set.
	* Makerules: Still need to include $(+sysdir_pfx)sysd-Makefile if
	avoid-generated is set.
	(common-generated): Add libc.so and libc.so$(libc.so-version).
	(generated): Add versioned libraries.
	(common-mostlyclean): Also remove %.so and %_pic.a.
	* csu/Makefile (generated): Add abi-tag.h.
	* db2/Makefile (extra-objs): Add getlong.o.
	* elf/Makefile (generated): Add ld.so, ldd and
	$(rtld-installed-name).
	(others): Add ldconfig here instead of ldconfig.o to extra-objs.
	* malloc/Makefile (generated): Add mtrace.
	* po/Makefile: Don't include version.mk, not needed any more.
	* sunrpc/Makefile (generated): Add rpc-proto.d and rpcgen.
	* sysdeps/unix/Makefile: Fix local_lim.h -> bits/local_lim.h,
	syscall.h -> sys/syscall.h.
	(common-generated): Add s-proto.d.
	(postclean-generated): Add sysd-syscalls.
	* localedata/Makefile (test-output): Add all output files.
	(generated): Add test-input and test-output.
	(generated-dirs): Add all the dirs.

1998-01-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (test-output, generated, generated-dirs): New
	variables.

1998-02-10 16:57  Ulrich Drepper  <drepper@happy.cygnus.com>

	* resolv/nss_dns/dns-host.c: Various code cleanups.

1998-02-09 08:10  H.J. Lu  <hjl@gnu.org>

	* resolv/gethnamaddr.c (getanswer): Fix the PTR/CNAME bug.
	From Philip Blundell <pb@nexus.co.uk>.
	* resolv/nss_dns/dns-host.c (getanswer_r): Ditto.

1998-02-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libc.map: Add .rem, .div, .mul, .udiv, .umul, .urem for Sparc.
	Suggested by debian/sparc porters.

1998-02-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* misc/tst-efgcvt.c: Totally rewritten, added a lot of new tests
	for ecvt and fcvt.

1998-02-10 16:32  Ulrich Drepper  <drepper@happy.cygnus.com>

	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_r): Use __xstat and
	__fxstat instead of stat and fstat.  Use namespace clean __stpcpy.

	* signal/signal.h: Always define sigset_t if __need_sigset_t is
	defined even if __USE_POSIX is not defined.

1998-02-02 20:51  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_r): Correct last patch
	to support obsolete tty major numbers correctly.

1998-02-02 08:47  H.J. Lu  <hjl@gnu.org>

	* login/Makefile ($(inst_libexecdir)/pt_chown): Make the target
	directory first and ignore install error.

	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_r): Substract
	128 from ptyno and fix a typo for the BSD style pty.

1998-02-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/Makefile ($(common-objpfx)s-proto.d): Depend on all
	syscalls.list's.

1998-02-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add
	getresuid and getresgid.

	* sysdeps/unix/sysv/linux/getresuid.c: New file.
	* sysdeps/unix/sysv/linux/getresgid.c: New file.

	* sysdeps/unix/sysv/linux/syscalls.list: Remove getres[ug]id, add
	s_getres[ug]id.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add getres[ug]id.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/mips/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list: Likewise.

1998-02-02 08:11  H.J. Lu  <hjl@gnu.org>

	* nscd/grpcache.c: Include <stdlib.h>.

1998-02-01 16:01  H.J. Lu  <hjl@gnu.org>

	* stdlib/atoll.c: Fix comments.

	* sysdeps/posix/ttyname.c: Ignore stdin/stdout/stderr.
	* sysdeps/posix/ttyname_r.c: Ditto.

1998-02-03  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* io/sys/stat.h: Define S_IFLNK and S_IFSOCK if __USE_BSD or
	__USE_MISC, independent of __USE_UNIX98.

1998-02-10 19:18  Ulrich Drepper  <drepper@happy.cygnus.com>

	* sysdeps/unix/sysv/linux/i386/sigaction.c (__libc_missing_rt_sigs):
	Rename from __libc_have_rt_sigs and leave as COMMON data.

1998-02-04 11:58  Richard Henderson  <rth@twiddle.rth.home>

	* Makeconfig (CFLAGS-.os): Kill -fno-common.
	* Makerules (libc.so): Prelink libc_pic.a, allocating commons.

	* libc.map (GLIBC_2.1): Add Linux/Alpha tv64 symbols.
	* elf/rtld.map: New file.  Needed to define the GLIBC_2.*
	version symbols.
	* include/libc-symbols.h (symbol_version, default_symbol_version):
	Provide asm versions and correct !DO_VERSIONING versions.
	* sysdeps/unix/make-syscalls.sh: Recognize version symbols in
	the weak symbol list.

	* sysdeps/unix/sysv/linux/sigaction.c (__libc_missing_rt_sigs):
	Rename from __libc_have_rt_sigs and leave as COMMON data.
	* sysdeps/unix/sysv/linux/sigpending.c: Likewise.
	* sysdeps/unix/sysv/linux/sigprocmask.c: Likewise.
	* sysdeps/unix/sysv/linux/sigsuspend.c: Likewise.

1998-02-04 16:41  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* sunrpc/Makefile: Correct dependencies of rpcgen.

1998-02-10 03:00  Ulrich Drepper  <drepper@happy.cygnus.com>

	* nscd/Makefile: Fix test for available linuxthreads add-on.
	Patch by Zack Weinberg <zack@rabi.phys.columbia.edu>.

1998-02-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/syscalls.list: Fix typo in lchown.

1998-02-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/gnu/Makefile: Respect with-cvs variable.

	* manual/errno.texi (Error Messages): Correct description of
	strerror_r.  Pointed out by jonas@bagge.se.

1998-01-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/socket.texi (Host Address Functions): Clarify description
	of inet_network.

1998-02-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/grantpt.c (argv): Move const to toplevel.
	(grantpt): Delete superfluous cast.

1998-02-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile ($(inst_slibdir)/libc-$(version).so): Depend on
	elf/ldso_install instead of elf/subdir_install.
	(elf/ldso_install): New target.

	* elf/Makefile (ldso_install): New target.

1998-02-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/powerpc/socket.S: Really do the change
	of 1998-01-06.

1998-02-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* string/bits/string2.h (strcmp): Use __string2_1bptr_p only for
	constant expressions.

1998-02-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* nss/test-netdb.c: Include <unistd.h> for gethostname and "nss.h"
	for __nss_configure_lookup.
	(output_hostent): Remove unused variable.

1998-02-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* string/tst-inlcall.c: Fix format string.

1998-02-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* inet/netinet/in.h: Rename second parameter of bindresvport to
	avoid buggy gcc warning. [PR libc/412]

1998-02-04 18:04  Richard Henderson  <rth@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/clone.S: Elide terminal ldgp for PROF.
	* sysdeps/unix/sysv/linux/alpha/rt_sigaction.S: Fix typos.

	* sysdeps/unix/sysv/linux/alpha/bits/time.h (struct timeval):
	Follow POSIX and make tv_sec a time_t.
	* sysdeps/unix/sysv/linux/alpha/getitimer.S: New file to handle
	new tv64 syscall as well as fall back to tv32.
	* sysdeps/unix/sysv/linux/alpha/getrusage.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/gettimeofday.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/select.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/setitimer.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/settimeofday.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/utimes.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/wait4.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add tv32 entries.

	* include/rpcsvc/nis.h: New.  Bounce to nis/rpcsvc.
	* include/rpcsvc/nis_tags.h: Likewise.
	* include/rpcsvc/nislib.h: Likewise.

1998-02-02 01:12  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add _h_errno.
	* inet/herrno.c: Make _h_errno weak alias.

	* login/Makefile (distribute): Add pty-internal.h.

	* nscd/Makefile (distribute): Add all the files missing.

	* signal/allocrtsig.c: Fix problem with recognizing whether RT sigs
	are available.

	* stdio-common/tstscanf.c: Rewrite a bit to continue after errors
	and report status at the end.

	* sysdeps/unix/sysv/linux/syscalls.list: Add lchown.

	* sysdeps/unix/sysv/linux/i386/sysdep.S: Make errno an initialized
	variable.
	* sysdeps/unix/sysv/linux/powerpc/sysdep.c: Add alias _errno for errno.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.S: Likewise.

1998-01-03 20:47  Mark Kettenis  <kettenis@phys.uva.nl>

	* configure.in: Fix --enable-add-ons code.

1998-02-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/rtld.c (dl_main): Allow ":" as separator for LD_PRELOAD. Patch
	by Rudolf Leitgeb <leitgeb@leland.stanford.edu>.
	[PR libc/441]

	* sysdeps/generic/dl-cache.c (_dl_load_cache_lookup): Use first
	occurence in cache.  Reported by Rudolf Leitgeb
	<leitgeb@leland.stanford.edu>.
	[PR libc/440]

1998-02-01 21:18  Ulrich Drepper  <drepper@cygnus.com>

	* libio/iovsscanf.c: Set errno to 0 before calling _IO_vfscanf so
	that it never is EINTR (which is tested for in _IO_vfscanf).

	* Makefile.in: Call sub-make with CVSOPTS.

	* elf/Makefile (distribute): Add dl-procinfo.h.

	* sysdeps/unix/sysv/linux/alpha/Dist: Add rt_sigaction.S.

1998-02-01 15:54  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.0.92.

1998-01-31  Phil Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/siglist.c (_sys_siglist): Additional weak
	alias for __new_sys_siglist.

1998-02-01 00:53  Ulrich Drepper  <drepper@cygnus.com>

	* grp/Makefile: Define USE_NSCD in CFLAGS for getgrnam_r.c and
	getgrgid_r.c if thread package is available.
	* pwd/Makefile: Likewise.
	* grp/getgrnam_r.c: Remove USE_NSCD definition.
	* grp/getgrgid_r.c: Likewise.
	* pwd/getpwnam_r.c: Likewise.
	* pwd/getpwuid_r.c: Likewise.

1998-01-31 23:46  Ulrich Drepper  <drepper@cygnus.com>

	* nss/getXXbyYY_r.c: If NSS function reports too small buffer return
	with error to allow user intervention.
	* nss/getXXent_r.c: Likewise.

1998-01-31 21:18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/dl-sysdep.c (_dl_show_aux): Print newline after
	AT_PLATFORM string.  Pretty print AT_BASE info.

	* sysdeps/generic/dl-sysdep.c: Include <dl-procinfo.h>.
	(_dl_show_aux): Call _dl_procinfo to print AT_HWCAP info.
	* sysdeps/generic/dl-procinfo.h: New file.
	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h: New file.

1998-01-31 20:52  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/grpcache.c (cache_grpinit): Let calloc do the multiplication.

	* nscd/pwdcache.c (cache_pwdinit): Use thread attribute to detach
	thread and not pthread_detach.

	* nscd/nscd.c: Rewrite to use argp instead of getopt.

1998-01-31  Phil Blundell  <philb@gnu.org>

	* configure.in: Add --without-cvs option to suppress automatic
	checkin of regenerated files.
	* config.make.in: Likewise.
	* Makefile: Respect with-cvs setting.
	* Makerules: Likewise.

	* configure.in: Allow the standalone ARM port to be configured.

1998-01-31  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* grp/getgrgid_r.c: Define USE_NSCD.
	* grp/getgrnam_r.c: Likewise.
	* pwd/getpwuid_r.c: Likewise.
	* pwd/getpwnam_r.c: Likewise.

	* sysdeps/unix/inet/Subdirs: Add nscd subdir.

	* nss/getXXbyYY_r.c: Try at first nscd.

	* nscd/Makefile: New, for the Name Switch Cache Daemon (nscd).
	* nscd/connections.c: New file.
	* nscd/dbg_log.c: New file.
	* nscd/dbg_log.h: New file.
	* nscd/grpcache.c: New file.
	* nscd/nscd.c: New file.
	* nscd/nscd.h: New file.
	* nscd/nscd_conf.c: New file.
	* nscd/nscd_stat.c: New file.
	* nscd/pwdcache.c: New file.

	* nscd/nscd_getgr_r.c: New, client code, linked into libc.
	* nscd/nscd_getpw_r.c: Likewise.
	* nscd/nscd_proto.h: New, prototypes for client functions.

	* nscd/nscd.conf: New, example for a configuration file.
	* nscd/nscd.init: New, example for a startup script.

	* nscd/getgrgid_r.c: Old grp/getgrgid_r version, used from nscd to
	avoid deadlocks.
	* nscd/getgrnam_r.c: Likewise.
	* nscd/getpwnam_r.c: Likewise.
	* nscd/getpwuid_r.c: Likewise.

1998-01-31 11:44  Ulrich Drepper  <drepper@cygnus.com>

	* intl/Makefile: Use CVSOPTS in cvs invocation.
	* po/Makefile: Likewise.
	* posix/Makefile: Likewise.
	* stdlib/Makefile: Likewise.

1998-01-31 11:18  Ulrich Drepper  <drepper@cygnus.com>

	* misc/efgcvt_r.c (fcvt_r): Handle illegal NDIGIT correctly.
	[PR libc/410]
	* misc/Makefile (tests): Add tst-efgcvt.
	* misc/tst-efgcvt.c: New file.

1998-01-31 00:21  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regex.c: Add some more cleanups by Akim Demaille.

1998-01-30 23:55  Ulrich Drepper  <drepper@cygnus.com>

	* signal/signal.h: Revert last change.
	* string/strsignal.c: Regard signal number NSGI as illegal.
	* sysdeps/unix/sysv/linux/siglist.c: Define array only with NSIG
	members.

1998-01-30 23:37  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile.in: Add comment about CVSOPTS Makefile variable.
	* Makerules: Use CVSOPTS in cvs invocation.
	* Makefile: Likewise.
	* MakeTAGS: Likewise.
	* Make-dist: Likewise.

1998-01-30 22:37  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/memmem.c: Correct last change.

1998-01-30 22:12  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Makefile [$(subdir)==nis]: Define
	CFLAGS-ypclnt.c to -DUSE_BINDINGDIR=1.

1998-01-30  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c: Try at first to use the binding file from ypbind
	before using RPC.

1998-01-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/memory.texi (Heap Consistency Checking): mcheck is
	declared in <mcheck.h>.
	Suggested by Jochen Voss <voss@mathematik.uni-kl.de> [PR libc/438]

1998-01-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/generic/memmem.c (memmem): An empty needle is at the
	beginning of haystack.

1998-01-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nss_files/files-service.c: Correct last patch.

1998-01-30 21:29  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c: Define
	__libc_have_rt_sigs.
	* sysdeps/sparc/sparc32/__longjmp.S: Define _SETJMP_H before
	including <bits/setjmp.h>.
	* sysdeps/sparc/sparc32/setjmp.S: Likewise.
	Patch from the Debian glibc/SPARC package.

1997-12-12 07:57  H.J. Lu  <hjl@gnu.org>

	* sysdeps/alpha/bzero.S: Fix a typo.
	* sysdeps/alpha/htonl.S: Ditto.
	* sysdeps/alpha/htons.S: Ditto.

1998-01-30  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_nis/nis-hosts.c: Convert hostname to lowercase for NIS query.

1998-01-30 19:58  Ulrich Drepper  <drepper@cygnus.com>

	* include/cpio.h: Move to ...
	* posix/cpio.h: ...here.

	* locale/programs/ld-collate.c: Fix typo.

	* signal/signal.h: Declare _sys_siglist with NSIG+1 elements.

	* stdio-common/tiformat.c: Add checks for %#.0o and friends.

	* login/utmp_file.c (pututline_file): Don't always report success
	if similar entry is found.  Patch by Mark M. Kettenis.

1998-01-30 16:06  Philip Blundell  <pb@nexus.co.uk>

	* manual/Makefile: Don't try to install the info files if makeinfo
	is not available.

1998-01-30 12:05  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/unix/sysv/linux/bits/ioctls.h: Include a copy of the
	kernel's network ioctls, rather than using <linux/sockios.h> to
	get them.  This way we are sure of maintaining compatibility if
	the kernel interface should change.

1998-01-30 15:52  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Dist: Add netrose/rose.h.

1998-01-25 19:54  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/sysv/linux/netrose/rose.h: New file.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Install it.

1998-01-27 22:29  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	Implement System V pseudoterminal handling.

	* login/Makefile
	(routines): Add getpt, grantpt, unlockpt, ptsname.
	(libutil-routines): Remove pty. Add openpty, forkpty.
	(distribute): New internal header pty-internal.h.
	(others): Add the helper program, pt_chown.
	(install-others): Install it, in $(libexecdir), mode 4755.

	* login/pty-internal.h: New file.
	* login/openpty.c: New file.
	* login/forkpty.c: New file.
	* login/programs/pt_chown.c: New file.

	* libc.map: Add getpt, grantpt, unlockpt, ptsname, ptsname_r.
	* stdlib/stdlib.h: Prototype them.

	* config.make.in: Define $(libexecdir).
	* Makeconfig: Define $(inst_libexecdir).

	* sysdeps/generic/pty.c: Removed.
	* sysdeps/unix/sysv/linux/pty.c: Removed.

	* sysdeps/generic/getpt.c: Stub out.
	* sysdeps/generic/grantpt.c: Likewise.
	* sysdeps/generic/ptsname.c: Likewise.
	* sysdeps/generic/unlockpt.c: Likewise.

	* sysdeps/unix/grantpt.c: New file.
	* sysdeps/unix/bsd/getpt.c: New file.
	* sysdeps/unix/bsd/unlockpt.c: New file.
	* sysdeps/unix/sysv/linux/getpt.c: New file.
	* sysdeps/unix/sysv/linux/ptsname.c: New file.
	* sysdeps/unix/sysv/linux/unlockpt.c: New file.

1998-01-29 23:56  Ulrich Drepper  <drepper@cygnus.com>

	* localedata/locales/ru_RU: Fix YESEXPR.  Patch by lav@yars.free.net.

1998-01-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/Makefile (tests): Add rule for test-netdb.c.

	* nss/test-netdb.c: New file.

1998-01-29 02:38  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-open.c (_dl_open): Make sure the variable `reloc' is
	really kept as a variable.  Patch by Richard Henderson,
	reported by Jakub Jelinek <jj@sunsite.ms.mff.cuni.cz>.

	* elf/rtld.c (dl_main): Call _dl_init_paths before handling preloading.
	* elf/genrtldtbl.awk: Mark machine dependent directory of generated
	entries as not existing.

1998-01-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* stdio-common/vfprintf.c (process_arg): Fix printing of octal
	zero in alternate form with precision of zero, which must produce
	"0".  Add braces to avoid ambiguous `else'.

1998-01-26  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_compat/compat-grp.c: Fix memory leak and trailing null
	problem with strncpy.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/comapt-spwd.c: Likewise.

1998-01-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* assert/assert.h (assert_perror): Correct test for errnum.  Patch
	by uch@nop.or.jp. [PR libc/437]

1998-01-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nis/nis_cache.c: Include <unistd.h> for declaration of close.

1998-01-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* stdio-common/test-popen.c: Include <errno.h>.

	* sysdeps/unix/sysv/linux/if_index.c: Include <unistd.h> for
	close.

	* inet/getnetgrent_r.c: Include <errno.h>.

	* db2/db/db_conv.c: Include <string.h> for memcpy.

	* gmon/bb_exit_func.c: Include <string.h> instead of <strings.h>
	so that memcpy is declared.

	* iconv/iconv_open.c: Include <stdlib.h> for alloca.

	* misc/init-misc.c: Remove unneeded inclusion of <errno.h>.

1998-01-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* pwd/fgetpwent_r.c (__fgetpwent_r): Correctly handle buffer
	overflow while reading line with fgets.
	* grp/fgetgrent_r.c (__fgetgrent_r): Likewise.

1998-01-27 00:46  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/types.h (__ipc_pid_t): Change to
	unsigned short, not short.
	Reported by Andreas Jaeger.

1998-01-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/mips/syscalls.list: Correct typo
	(ccept->accept).

	* sysdeps/generic/inttypes.h: Fix spelling.

1998-01-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/arm/Dist: Add bits/mman.h.

	* sysdeps/unix/sysv/linux/alpha/Dist: Add net/route.h.

1998-01-27 00:30  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/printf.h (struct print_info): Add new bitfield is_char.
	* stdio-common/printf-parse.h (parse_one_spec): Fill in is_char
	field for hh modifier.
	* stdio-common/vfprint.c: Use is_char field and do not depend in
	is_short having the value 2.
	Bug reported by Andreas Jaeger.

1998-01-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libio/freopen.c (freopen): Call _IO_old_freopen only if defined
	PIC && DO_VERSIONING.

1998-01-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Rules: Add rules for $(common-objpfx)dummy$o.

1998-01-26  Richard Henderson  <rth@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/bits/mman.h: Dyke out the
	unimplemented OSF/1 definitions so that they are not accidentally seen.

	* sysdeps/alpha/dl-machine.h (TRAMPOLINE_TEMPLATE): Move declaration
	of the trampoline function into the macro.
	* sysdeps/unix/sysv/linux/alpha/clone.S: Fix ldgp for PROF.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Revert last change;
	kernel 2.1.82 has this fixed.

	* sysdeps/unix/sysv/linux/alpha/rt_sigaction.S: New file.
	* sysdeps/unix/sysv/linux/alpha/sys/ucontext.h: New file.

1998-01-26  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add change to
	support sigaction on kernels > 2.1.7x.

1998-01-01 13:52  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-misc.c (_dl_sysdep_read_whole_file): Don't map the file
	if it is empty.

	* elf/rtld.c (dl_main): Correct parsing of ld.so.preload file.
	Patch by David Engel <david@sw.ods.com>.

	* configure.in: Fix another typo in --enable-add-ons code.

1998-01-26 03:48  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/siglist.c: Add copyright text.

1998-01-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nss_files/files-network.c: Correct order of parameters for
	getnetbyaddr.

1998-01-26 00:57  Ulrich Drepper  <drepper@cygnus.com>

	* db2/Makefile (routines): Add os_alloc.
	* db2/db.h: Update from db-2.3.16.
	* db2/db_185.h: Likewise.
	* db2/db_int.h: Likewise.
	* db2/btree/bt_close.c: Likewise.
	* db2/btree/bt_cursor.c: Likewise.
	* db2/btree/bt_delete.c: Likewise.
	* db2/btree/bt_open.c: Likewise.
	* db2/btree/bt_page.c: Likewise.
	* db2/btree/bt_put.c: Likewise.
	* db2/btree/bt_rec.c: Likewise.
	* db2/btree/bt_recno.c: Likewise.
	* db2/btree/btree_auto.c: Likewise.
	* db2/common/db_appinit.c: Likewise.
	* db2/common/db_apprec.c: Likewise.
	* db2/common/db_err.c: Likewise.
	* db2/common/db_region.c: Likewise.
	* db2/common/db_shash.c: Likewise.
	* db2/db/db.c: Likewise.
	* db2/db/db_auto.c: Likewise.
	* db2/db/db_conv.c: Likewise.
	* db2/db/db_dispatch.c: Likewise.
	* db2/db/db_dup.c: Likewise.
	* db2/db/db_pr.c: Likewise.
	* db2/db/db_rec.c: Likewise.
	* db2/db185/db185.c: Likewise.
	* db2/dbm/dbm.c: Likewise.
	* db2/hash/hash.c: Likewise.
	* db2/hash/hash_auto.c: Likewise.
	* db2/hash/hash_dup.c: Likewise.
	* db2/hash/hash_page.c: Likewise.
	* db2/hash/hash_rec.c: Likewise.
	* db2/include/btree_ext.h: Likewise.
	* db2/include/clib_ext.h: Likewise.
	* db2/include/common_ext.h: Likewise.
	* db2/include/db.h.src: Likewise.
	* db2/include/db_185.h.src: Likewise.
	* db2/include/db_am.h: Likewise.
	* db2/include/db_ext.h: Likewise.
	* db2/include/db_int.h.src: Likewise.
	* db2/include/hash_ext.h: Likewise.
	* db2/include/lock_ext.h: Likewise.
	* db2/include/log.h: Likewise.
	* db2/include/log_auto.h: Likewise.
	* db2/include/log_ext.h: Likewise.
	* db2/include/mp.h: Likewise.
	* db2/include/mp_ext.h: Likewise.
	* db2/include/mutex_ext.h: Likewise.
	* db2/include/os_ext.h: Likewise.
	* db2/include/os_func.h: Likewise.
	* db2/include/txn_ext.h: Likewise.
	* db2/lock/lock.c: Likewise.
	* db2/lock/lock_util.c: Likewise.
	* db2/log/log.c: Likewise.
	* db2/log/log.src: Likewise.
	* db2/log/log_archive.c: Likewise.
	* db2/log/log_auto.c: Likewise.
	* db2/log/log_get.c: Likewise.
	* db2/log/log_put.c: Likewise.
	* db2/log/log_rec.c: Likewise.
	* db2/log/log_register.c: Likewise.
	* db2/mp/mp_bh.c: Likewise.
	* db2/mp/mp_fget.c: Likewise.
	* db2/mp/mp_fopen.c: Likewise.
	* db2/mp/mp_fput.c: Likewise.
	* db2/mp/mp_pr.c: Likewise.
	* db2/mp/mp_sync.c: Likewise.
	* db2/mutex/mutex.c: Likewise.
	* db2/os/os_alloc.c: Likewise.
	* db2/os/os_config.c: Likewise.
	* db2/os/os_stat.c: Likewise.
	* db2/progs/db_checkpoint/db_checkpoint.c: Likewise.
	* db2/progs/db_deadlock/db_deadlock.c: Likewise.
	* db2/progs/db_load/db_load.c: Likewise.
	* db2/progs/db_printlog/db_printlog.c: Likewise.
	* db2/progs/db_recover/db_recover.c: Likewise.
	* db2/progs/db_stat/db_stat.c: Likewise.
	* db2/txn/txn.c: Likewise.

	* elf/dl-close.c (_dl_close): Rename inner variable named map to imap.
	Unmap memory blocks in reverse order of allocation.
	Call munmap with load address added to offset.
	Bug reported by Miguel de Icaza.

	* locale/programs/ld-collate.c (collate_end_weight): Correctly fill
	up weight array.

	* localedata/locales/cs_CZ: Update by Michael Mraka
	<michael@informatics.muni.cz>.

	* misc/sys/syslog.h: Reformat a bit.  Don't declare vsyslog unless
	__USE_BSD.

	* nis/nss_compat/compat-grp.c: Correctly handle buffer overflow while
	reading line with fgets.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.
	* nss/nss_files/files-XXX.c: Likewise.
	* nss/nss_files/files-alias.c: Likewise.
	* shadow/fgetspent_r.c: Likewise.

	* string/strerror_r.c: Correct comment.  Patch by Andreas Jaeger.

	* sysdeps/unix/sysv/linux/bits/stat.h: Define _STATBUF_ST_RDEV.
	* sysdeps/unix/sysv/linux/alpha/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/stat.h: Likewise.

	* sysdeps/unix/sysv/linux/i386/sys/ucontext.h: Allocate room for
	FP register content in ucontext_t.

1998-01-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/libm-ieee754/s_modfl.c (modf): Correct
	calculation.  Patch by Markus Schoder
	<Markus.Schoder@dresdner-bank.de>.

	* math/libm-test.c (modf_test): Add more tests for modf.

	* sysdeps/unix/sysv/linux/sys/mman.h: Add const to mlock and
	munlock according to Unix98.

1998-01-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nss_files/files-network.c (LINE_PARSER): Set n_addrtype to
	AF_INET.

1998-01-21 07:22  H.J. Lu  <hjl@gnu.org>

	* sysdeps/posix/ttyname.c: Handle symbolic links.
	* sysdeps/posix/ttyname_r.c: Ditto.

1998-01-25 19:39  Ulrich Drepper  <drepper@cygnus.com>

	* db2/makedb.c (process_input): Write terminating \0 for value.
	(print_database): Simply print value string, don't use length.

1998-01-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nsswitch.c (__nss_configure_lookup): Correct test for early
	exit of loop.

1998-01-25  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/ypclnt.c: Don't set dom_client to NULL, or we will not
	close all sockets.

1998-01-25 14:54  Ulrich Drepper  <drepper@cygnus.com>

	* signal/Makefile (routines): Add sighold, sigrelse, sigignore, and
	sigset.
	* signal/sighold.c: New file.
	* signal/sigrelse.c: New file.
	* sysdeps/generic/sigignore.c: New file.
	* sysdeps/generic/sigset.c: New file.
	* sysdeps/posix/sigignore.c: New file.
	* sysdeps/posix/sigset.c: New file.
	* signal/signal.h: Add prototypes for new functions.

	* sysdeps/unix/sysv/linux/alpha/bits/signum.h: Define SIG_HOLD.
	* sysdeps/unix/sysv/linux/bits/signum.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/signum.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/signum.h: Likewise.

1998-01-23 00:16  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c: Added IFS field-splitting in parameter and
	command substitution.  Fixed an IFS-related bug that caused an
	infinite loop.

1998-01-25 12:38  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/Makefile (routines): Add getcontext, setcontext, makecontext,
	and swapcontext.
	* stdlib/ucontext.h: Correct prototypes.
	* sysdeps/generic/getcontext.c: New file.
	* sysdeps/generic/setcontext.c: New file.
	* sysdeps/generic/makecontext.c: New file.
	* sysdeps/generic/swapcontext.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile: Removed.

1998-01-25 04:07  Ulrich Drepper  <drepper@cygnus.com>

	* resource/sys/resource.h: Remove #include of ulimit.h which is
	not allowed by SUSv2 and not available on other systems.
	* sysdeps/unix/sysv/linux/ulimit.c: Include ulimit.h.

	* streams/Makefile: New file.
	* streams/stropts.h: New file.
	* sysdeps/generic/bits/stropts.h: New file.
	* sysdeps/generic/isastream.c: New file.
	* sysdeps/generic/getmsg.c: New file.
	* sysdeps/generic/getpmsg.c: New file.
	* sysdeps/generic/putmsg.c: New file.
	* sysdeps/generic/putpmsg.c: New file.
	* sysdeps/generic/fattach.c: New file.
	* sysdeps/generic/fdetach.c: New file.
	* sysdeps/unix/inet/Subdirs: Add streams.
	* sysdeps/generic/bits/types.h: Add definition of __t_scalar_t and
	__t_uscalar_t.
	* sysdeps/unix/sysv/linux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/types.h: Likewise.

	* sysdeps/mach/_strerror.c: Follow changes of generic version to
	handle small buffers correctly.

1998-01-24 17:31  H.J. Lu  <hjl@gnu.org>

	* sysdeps/alpha/dl-machine.h (ELF_MACHINE_RUNTIME_TRAMPOLINE):
	Remove the 3rd arg and add declaration for _dl_runtime_resolve
	and _dl_runtime_profile.

1998-01-25 02:42  Ulrich Drepper  <drepper@cygnus.com>

	* include/cpio.h: New file.  Mainly copied from GNU cpio.
	* posix/Makefile (headers): Add cpio.h.

1998-01-24  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/Makefile: Distribute nis_cache2.h, add nis cache functions
	to routines.
	* nis/nis_cache.c: New file.
	* nis/nis_cache2.h: New file.
	* nis/nis_cache2_xdr.c: New file.
	* nis/nis_call.c: Changes for cache2_info parameter.
	* nis/nis_checkpoint.c: Likewise.
	* nis/nis_intern.h: Likewise.
	* nis/nis_mkdir.c: Likewise.
	* nis/nis_ping.c: Likewise.
	* nis/nis_rmdir.c: Likewise.
	* nis/nis_server.c: Likewise.
	* nis/nis_util.c: Likewise.

1997-12-30  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_nisplus/nisplus-alias.c: Fix bogus if case and
	return/errnop codes.
	* nis/nss_nisplus/nisplus-ethers.c: Likewise.
	* nis/nss_nisplus/nisplus-grp.c: Likewise.
	* nis/nss_nisplus/nisplus-hosts.c: Likewise.
	* nis/nss_nisplus/nisplus-proto.c: Likewise.
	* nis/nss_nisplus/nisplus-publickey.c: Likewise.
	* nis/nss_nisplus/nisplus-pwd.c: Likewise.
	* nis/nss_nisplus/nisplus-rpc.c: Likewise
	* nis/nss_nisplus/nisplus-service.c: Likewise.
	* nis/nss_nisplus/nisplus-spwd.c: Likewise.

1997-12-28  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_nis/nis-alias.c: Use errnop, not __set_errno().
	* nis/nss_nis/nis-ethers.c: Likewise.
	* nis/nss_nis/nis-grp.c: Likewise.
	* nis/nss_nis/nis-hosts.c: Likewise.
	* nis/nss_nis/nis-network.c: Likewise.
	* nis/nss_nis/nis-proto.c: Likewise.
	* nis/nss_nis/nis-hosts.c: Likewise.
	* nis/nss_nis/nis-network.c: Likewise.
	* nis/nss_nis/nis-proto.c: Likewise.
	* nis/nss_nis/nis-publickey.c: Likewise.
	* nis/nss_nis/nis-pwd.c: Likewise.
	* nis/nss_nis/nis-rpc.c: Likewise.
	* nis/nss_nis/nis-service.c: Likewise.
	* nis/nss_nis/nis-spwd.c: Likewise.

1998-01-24  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/net/if.h (ifr_bandwidth, ifr_qlen):
	Added to follow latest kernel development.

1998-01-24 15:13  Ulrich Drepper  <drepper@happy.cygnus.com>

	* nss/db-Makefile: Handle empty and comment lines better.
	($(VAR_DB)/services.db): Generate entries with missing protocol
	value.

1998-01-23  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nss_files/files-service.c (getservbyport): Allow proto ==
	  NULL.
	  (getservbyname): Allow proto == NULL.
	  Pointed out by David N. Welton <davidw@gate.cks.com>.
	  [PR libc/430].

1998-01-24 11:34  Ulrich Drepper  <drepper@happy.cygnus.com>

	* nis/nislib/nislib.h: Finally removed.

	* lib/mktime.c (__mktime_internal): Work around bug in Irix4.0.5's
	C compiler.  From Kaveh Ghazi.
	(TYPE_MINIMUM): Define.
	(TYPE_MAXIMUM): Define.
	(TIME_T_MIN): Use TYPE_MINIMUM.
	(TIME_T_MAX): Use TYPE_MAXIMUM.
	Patch by Jim Meyering <meyering@ascend.com>.

1998-01-22 00:55  Ulrich Drepper  <drepper@happy.cygnus.com>

	* libc.map: Add __libc_uid, __libc_pid, __syscall_rt_sigqueueinfo,
	__pread64, __pwrite64, and __getpid.

	* rt/aio_misc.c: Use pread and pwrite instead of __ protected
	versions.

1998-01-06  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Define the
	cancelable socket functions as __libc_xxx with __xxx as weak
	alias.
	* sysdeps/unix/sysv/linux/mips/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.

	* sysdeps/unix/sysv/linux/m68k/socket.S: Allow __socket to be
	redefined.
	* sysdeps/unix/sysv/linux/i386/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/arm/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/socket.S: Likewise.

	* sysdeps/unix/sysv/linux/accept.S: Make __libc_xxx the main name
	and __xxx a weak alias.
	* sysdeps/unix/sysv/linux/connect.S: Likewise.
	* sysdeps/unix/sysv/linux/recv.S: Likewise.
	* sysdeps/unix/sysv/linux/recvfrom.S: Likewise.
	* sysdeps/unix/sysv/linux/recvmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/send.S: Likewise.
	* sysdeps/unix/sysv/linux/sendmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/sendto.S: Likewise.

1998-01-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* locale/langinfo.h: Add defines.

	* dirent/dirent.h: Add defines for DT_*, check also for
	_DIRENT_HAVE_D_TYPE.
	Suggested by Roland McGrath.

1998-01-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/netinet/ip_fw.h:
	Update from Linux 2.1.73+79.

	* README.template: Update information about possible
	configurations.

	* manual/mbyte.texi (Wide String Conversion): Fix declaration of
	wcstombs. Pointed out by Jochen Voss <voss@mathematik.uni-kl.de>.
	[PR libc/417].

	* manual/time.texi (Priority): Correct description of
	PRIO_MAX. Pointed out by Jochen Voss <voss@mathematik.uni-kl.de>.
	[PR libc/416].

11998-01-21 21:34  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/alpha/fpu/bits/mathdef.h: Add definition of FP_ILOGB0 and
	FP_ILOGNAN.   Patch by a sun <asun@zoology.washington.edu>.

1998-01-21 17:53  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/_strerror.c: Handle BUFLEN == 0.  Reported by
	Andreas Jaeger.

1998-01-20 18:13  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c: Little optimizations.

	* stdio-common/xbug.c: Unset LD_LIBRRARY_PATH variable.

	* string/Makefile (tests): Add tst-inlcall.
	* string/tst-inlcall.c: New file.

	* string/strsignal.c: Add support for real-time signals.

	* sysdeps/generic/_strerror.c: Fix Handling of unknown error in
	presense of small buffer.

	* sysdeps/i386/bits/string.h: Define _HAVE_STRING_ARCH_* macros.

	* sysdeps/i386/i486/bits/string.h: Correct strrchr implementation
	for i686.

	* sysdeps/unix/sysv/linux/siglist.c: Change length of arrays to
	_NSIG + 1.

1998-01-02 15:10  Matthias Urlichs   <urlichs@noris.de>

	* Rules: Add explicit rule for dummy.o; at least one library needs
	  it and it isn't autogenerated by the default rules.

1997-12-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* math/libm-test.c: Tweak epsilons.

1997-12-31  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* math/test-fenv.c (feenv_nomask_test): Avoid dumping core in the
	child.
	(feenv_mask_test): Likewise.

1998-01-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makeconfig: Don't export CPPFLAGS.

1998-01-01  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sunrpc/rpc_main.c (parseargs): Use perror to print error
	message.

1998-01-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* nss/nss_db/db-alias.c (_nss_db_getaliasent_r): Don't include
	terminating null in key size.

1998-01-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* nss/nss_files/files-service.c: Fix allocation size to include
	length of PROTO.

	* nss/nss_db/db-XXX.c (lookup): Always set errno and h_errno if
	applicable.  Fix return value and error checking.
	(CONCAT(_nss_db_get,ENTNAME_r)): Loop around to skip over
	unparsable lines.
	(DB_LOOKUP): Allocate space for terminating null byte.

	* nss/db-Makefile ($(VAR_DB)/passwd.db): Don't handle duplicate
	uids specially.

	* db2/makedb.c (process_input): Continue processing if a duplicate
	key is encountered.

1998-01-19 15:20  Ulrich Drepper  <drepper@cygnus.com>

	* time/tzfile.h: Updated from tzcode1998b.
	* time/zdump.c: Likewise.
	* time/zic.c: Likewise.
	* time/africa: Update from tzdata1998b.
	* time/antarctica: Likewise.
	* time/asia: Likewise.
	* time/australasia: Likewise.
	* time/etcetera: Likewise.
	* time/europe: Likewise.
	* time/leapseconds: Likewise.
	* time/northamerica: Likewise.
	* time/southamerica: Likewise.

1998-01-12  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/nss_files/files-alias.c (get_next_alias): Do mail alias
	lookups ignoring case.
	* nss/nss_files/files-network.c: Do network lookups ignoring
	case.
	* nss/nss_files/files-hosts.c: Do hostname lookups ignoring
	case.
	* nss/nss_files/files-parse.c (LOOKUP_NAME_CASE): New macro for
	case insensitive comparing.
	Patches by Cristian Gafton <gafton@redhat.com>.

1998-01-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/net/if.h: Add IFF_*defines.  Suggested
	by Roland McGrath. [PR libc/395]

1998-01-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/arith.texi (Parsing of Integers): Correct description of
	strtoul. Pointed out by Scott Snyder <snyder@fnald0.fnal.gov>.
	[PR libc/396]

1997-12-30 14:14  Matthias Urlichs  <urlichs@noris.de>

	* misc/lsearch.c (lsearch): Return a pointer to the new element
	if one was "allocated".

1997-12-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* string/strsignal.c: NSIG is not a valid index into
	_sys_siglist.  Don't zap the last character of the "Unknown
	signal" message.

1998-01-19 15:08  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/charmap.c (parse_charmap): Correct parsing of
	ellipsis expressions.

	* locale/programs/charset.c (insert_char): Correctly insert value
	of eliipsis expression.

1997-12-28 15:08  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/powerpc/__longjmp.S: Define _SETJMP_H before including
	<bits/setjmp.h>.
	* sysdeps/powerpc/setjmp.S: Likewise.
	Patches by Matt McLean <keys@keys.got.net>.

	* Make-dist (sysdep_dirs): Ignore bits dirs while searching.

	* Makefile: Undo last patch.
	(distribute): Add test-installation.pl.

	* configure.in: Correct handling of --enable-add-ons without parameter.
	Correct address of WWW pages.

	* libc.map: Add _nl_domain_bindings.

	* db2/mutex/tsl_parisc.s: New file.

	* iconvdata/Makefile (distribute): Add jis0201.c, jis0208.c, jis0212.c,
	and extra-module.mk.

	* localedata/Makefile (distribute): New.  Add all the files.

	* stdlib/Makefile (headers): Add inttypes.h.
	(routines): Add strtoimax, strtoumax, wcstoimax, and wcstoumax.
	* sysdeps/generic/inttypes.h: New file.
	* sysdeps/generic/strtoimax.c: New file.
	* sysdeps/generic/strtoumax.c: New file.
	* sysdeps/generic/wcstoimax.c: New file.
	* sysdeps/generic/wcstoumax.c: New file.
	* sysdeps/wordsize-32/Dist: Removed.
	* sysdeps/wordsize-32/Makefile: Removed.
	* sysdeps/wordsize-64/Dist: Removed.
	* sysdeps/wordsize-64/Makefile: Removed.
	* sysdeps/generic/bits/environments.h: New file.

	* include/limits.h: Define MB_LEN_MAX in any case to 6.  The gcc
	header is still not correct.

	* io/fcntl.h [__USE_FILE_OFFSET64]: We have to use the __*64 types.
	* posix/unistd.h: Likewise.
	* sysdeps/generic/sys/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/mman.h: Likewise.

	* manual/arith.texi: Change definition of mul macro.
	* manual/math.texi: Likewise.

	* misc/Makefile (routines): Add mmap64.
	* sysdeps/generic/mmap64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/mmap64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/mmap64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add __mmap64 and mmap64
	aliases to mmap.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.

	* sysdeps/generic/setrlimit64.c: Don't mark as stub.

	* nis/nss_nis/nis-hosts.c (internal_nis_gethostent_r): Pretty print.

	* nis(rpcsvc/nis_tags.h: Prevent warning by unknown pragma.

	* sysdeps/posix/mk-stdiolim.c: Generate correct file which defines
	FOPEN_MAX also when included by limits.h.
	* sysdeps/unix/sysv/linux/stdio_lim.h.in: Likewise.

	* sysdeps/unix/sysv/linux/Dist: Add oldsiglist.c, netax25/ax25.h,
	and netrom/netrom.h.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir)=stdio-common]: Add
	oldsiglist to sysdep_routines, not aux.
	[$(subdir)=inet] (sysdep_headers): Add netax25/ax25.h, netrom/netrom.h.

	* sysdeps/unix/sysv/linux/bits/socket.h: Remove SOL_AX25, SOL_ATALK,
	and SOL_NETROM definition.

	* sysdeps/unix/sysv/linux/i386/Dist: Add s_pwrite64.S and s_pread64.S.

	* sysdeps/unix/sysv/linux/net/route.h: Pretty print.
	* sysdeps/unix/sysv/linux/netatalk/at.h: Pretty print.

1997-12-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/net/route.h: New file.

	* sysdeps/unix/sysv/linux/alpha/kernel_sigaction.h: Replace
	sa_handler with k_sa_handler.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add __getrlimit as
	strong alias.
	Reported by a sun.

	* sysdeps/unix/sysv/linux/sigsuspend.c: Don't define
	__libc_have_rt_sigs here.
	* sysdeps/unix/sysv/linux/sigaction.c: Do it instead here.
	* sysdeps/unix/sysv/linux/i386/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sigpending.c: Correct comment.
	* sysdeps/unix/sysv/linux/sigprocmask.c: Likewise.

1997-12-11 07:51  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/powerpc/atomicity.h: New file.
	* sysdeps/mach/powerpc/machine-lock.h: New file.

	* Rules: Use -fpic to build anything that might end up in a users'
	shared library.

	* sysdeps/powerpc/s_fdim.c: New file.
	* sysdeps/powerpc/s_fdimf.c: New file.
	* sysdeps/powerpc/s_fmax.S: New file.
	* sysdeps/powerpc/s_fmaxf.S: New file.
	* sysdeps/powerpc/s_fmin.S: New file.
	* sysdeps/powerpc/s_fminf.S: New file.
	* sysdeps/powerpc/s_llrint.c: Now is for double.
	* sysdeps/powerpc/s_llrintf.c: New file.
	* sysdeps/powerpc/s_llround.c: Now is for double.
	* sysdeps/powerpc/s_llroundf.c: New file.
	* sysdeps/powerpc/s_lrint.c: Now is for double.
	* sysdeps/powerpc/s_lrintf.S: New file.
	* sysdeps/powerpc/s_lround.c: Now is for double.
	* sysdeps/powerpc/s_lroundf.c: New file.
	* sysdeps/powerpc/bits/mathinlines.h: Add inline versions of lrint,
	lrintf, fdim, fdimf.

	* sysdeps/unix/sysv/linux/powerpc/kernel_termios.h: Don't use bits/
	file directly, use its parent.

	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c: Re-instate '++'
	(for the third time).

1997-12-20 13:50  Richard Henderson  <rth@cygnus.com>

	* posix/sched.h: timespec is in <time.h>.

	* sysdeps/unix/sysv/linux/sys/kd.h: Don't redefine _LINUX_TYPES_H.

1997-12-22 18:10  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Stop with error if --disable-static is used when
	the shared lib uses this library.

	* gen-FAQ.pl: I've perl installed in /usr/bin.

	* include/bits/xopen_lim.h (STREAM_MAX): Define using FOPEN_MAX.

	Fix Unix98 conformance problems in the headers.
	* catgets/nl_types.h: Define nl_item.
	* grp/grp.h: Define gid_t.
	* include/features.h [_POSIX_C_SOURCE]: Don't define _XOPEN_SOURCE.
	* include/nl_types.h: New file.
	* include/ulimit.h: New file.
	* io/fcntl.h: Include sys/stat.h for Unix98.  Don't define locking
	constants in POSIX mode.
	* io/utime.h: Get definition for time_t.
	* io/sys/stat.h: Define dev_t, gid_t, ino_t, mode_t, nlink_t, off_t,
	uid_t, pid_t.  Define D_IFLNK and S_IFSOCK only if !__USE_UNIX98.
	* libio/stdio.h: Define va_list.  Make snprintf also available is
	__USE_UNIX98.  Declare getopt function and variables.
	* locale/langinfo.h: Include nl_types.h.  Don't define nl_item.
	Define CODESET, CRNCYSTR, RADIXCHAR and THOUSEP as aliases.
	* math/math.h: Defined M_* constants as double for Unix98 mode.
	* posix/fnmatch.h: Pretty print.  Define FNM_NOSYS.
	* posix/glob.h: Pretty print.  Define GLOB_NOSYS.
	* posix/regex.h: Define REG_NOSYS.
	* posix/wordexp.h: Define WRDE_NOSYS.
	* posix/unistd.h: Define _POSIX2_VERSION.  Define _XOPEN_VERSION to
	500 for Unix98.
	* posix/sys/types.h: Alloc dev_t, mode_t, nlink_t to be defined
	somewhere else as well.  Define clock_t for Unix98.
	* posix/sys/wait.h: Define pid_t.
	* pwd/pwd.h: Define gid_t, uid_t.
	* resource/Makefile (headers): Add ulimit.h.
	* resource/ulimit.h: New file.
	* sysdeps/generic/ulimit.c: Define according to X/Open using varargs
	instead of second argument.
	* sysdeps/unix/bsd/ulimit.c: Likewise.  Use UL_* constants.
	* sysdeps/unix/sysv/linux/ulimit.c: Likewise.
	* resource/sys/resource.h: Don't declare ulimit here, include ulimit.h.
	* signal/signal.h: Define pid_t.
	* string/string.h: Don't declare BSD string functions in POSIX mode.
	* sysdeps/generic/bits/confname.h: Define _PC_VDISABLE.  Add
	_SC_XOPEN_LEGACY, _SC_XOPEN_REALTIME and _SC_XOPEN_REALTIME_THREADS.
	* sysdeps/unix/sysv/linux/bits/termios.h: Clean namespace for Unix98
	and POSIX.

	* inet/test_ifindex.c: Change test so that it does not fail for
	interface aliases.

	* locale/programs/locale.c (show_info): Use correct cast sequence
	for 64bit machines.

	* malloc/malloc.c: __malloc_initialized now signals three states:
	uninitialized, initializing, initialized.  Used in mcheck.
	* malloc/mcheck.c (mabort): Add '\n' to messages.
	(mcheck): Allow installation when malloc is uninitialized or is
	just initializing.

	* manual/memory.texi: Explain mtrace output a bit more.

	* math/libm-test.c: Add more epsilons.

	* misc/regexp.h (compile): Remove __ prefix from parameter names.

	* nis/nss_nis/nis-ethers.c (internal_nis_getetherent_r): Use strncpy
	instead of strcpy for security.
	* nis/nss_nis/nis-proto.c (internal_nis_getprotoent_r): Likewise.
	* nis/nss_nis/nis-rpc.c (internal_nis_getrpcent_r): Likewise.
	* nis/nss_nis/nis-service.c (internal_nis_getservent_r): Likewise.

	* nss/digits_dots.c: Pretty print.

	* posix/getconf.c (vars): Add symbols for programming environment
	recognition.  Recognize --version.

	* sysdeps/generic/sysconf.c: Handle _SC_XBS5_*, _SC_XOPEN_LEGACY,
	_SC_XOPEN_REALTIME, and _SC_XOPEN_REALTIME_THREADS.
	* sysdeps/posix/sysconf.c: Handle _SC_XBS5_* and new _XOPEN_* symbols.

	* sysdeps/generic/bits/stdio_lim.h: Implement handling of
	__need_FOPEN_MAX.
	* sysdeps/unix/sysv/linux/stdio_lim.h.in: Likewise.
	* sysdeps/posix/mk-stdiolim.c: Change to generate file handling
	__need_FOPEN_MAX.

	* sysdeps/unix/sysv/linux/Dist: Add rt_sigpending.c.
	* sysdeps/unix/sysv/linux/rt_sigpending.c: New file.

	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Define __ipc_pid_t.
	* sysdeps/unix/sysv/linux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/msq.h: Use __ipc_pid_t.
	* sysdeps/unix/sysv/linux/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: New file.

	* sysdeps/wordsize-32/inttypes.h: Add SCNd8, SCNi8, SCNo8, SCNx8,
	SCNu*.
	* sysdeps/wordsize-64/inttypes.h: Likewise.

	* time/africa: Update from tzdata1997j.
	* time/antarctica: Likewise.
	* time/asia: Likewise.
	* time/australasia: Likewise.
	* time/backward: Likewise.
	* time/etcetera: Likewise.
	* time/europe: Likewise.
	* time/factory: Likewise.
	* time/northamerica: Likewise.
	* time/pacificnew: Likewise.
	* time/southamerica: Likewise.

	* time/tzfile.h: Update from tzcode1997h.
	* time/zic.c: Likewise.

	* wcsmbs/wchar.h: Get definition of FILE.  Define `struct tm' tag.
	Declare wcwidth and wcswidth for __USE_XOPEN.  Declare the
	isw*() functions for Unix98.
	* wctype/towctrans.c: Define as __towctrans, make towctrans weak alias.
	* wctype/wctype.h: Declare isw*() functions also if __need_iswxxx
	is defined.

1997-12-21  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* locale/duplocale.c: Increase usage_count only if less than
	MAX_USAGE_COUNT.
	* locale/freelocale.c: Test usage_count against UNDELETABLE, not
	MAX_USAGE_COUNT.
	* locale/setlocale.c: Likewise.

1997-12-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile ($(inst_includedir)/gnu/stubs.h): Use a more direct
	dependency to make it easier to install it selectively.

	* Makerules (.SUFFIXES): Don't define any suffixes.

1997-12-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/fstatfs64.c: Emulate using fstatfs.
	* sysdeps/generic/statfs64.c: Emulate using statfs.
	* sysdeps/generic/getrlimit64.c: Emulate using getrlimit.
	* sysdeps/generic/setrlimit64.c: Emulate using setrlimit.
	* sysdpes/generic/ftruncate64.c: New file.
	* sysdpes/generic/truncate64.c: New file.

	* sysdeps/generic/bits/stat.h: Add LFS support.
	* sysdeps/generic/bits/statfs.h: Likewise.

	* sysdeps/unix/bsd/sun/sunos4/bits/resource.h (RLIM_INFINITY)
	[__USE_FILE_OFFSET64]: Make long long constant.
	(RLIM64_INFINITY): Likewise.

	* sysdeps/unix/sysv/linux/bits/resource.h (RLIM_INFINITY): Correct
	for LFS support.
	(RLIM64_INFINITY) [__USE_LARGEFILE64]: Define.
	* sysdeps/generic/bits/resource.h: Likewise.

	* misc/Makefile (routines): Add truncate64 and ftruncate64.

	* include/features.h: Don't prevent LFS support from defining BSD
	and SYSV things.

	* dirent/dirent.h [__USE_FILE_OFFSET64]: Don't use xxx64 names.
	* io/ftw.h [__USE_FILE_OFFSET64]: Likewise.
	* io/sys/stat.h [__USE_FILE_OFFSET64]: Likewise.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add xxx64 alias for
	fstatfs, statfs, getrlimit, setrlimit, ftruncate and truncate.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.

	* sysdeps/unix/sysv/linux/alpha/fstatfs64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/statfs64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/getrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/setrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/ftruncate64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/truncate64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/readdir.c: New file.
	* sysdeps/unix/sysv/linux/alpha/readdir64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/readdir64_r.c: New file.
	* sysdeps/unix/sysv/linux/alpha/readdir_r.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/fstatfs64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/statfs64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/getrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/setrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/ftruncate64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/truncate64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/readdir.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/readdir64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/readdir64_r.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/readdir_r.c: New file.

	* sysdeps/unix/sysv/linux/fxstat64.c: New file.
	* sysdeps/unix/sysv/linux/lxstat64.c: New file.
	* sysdeps/unix/sysv/linux/xstat64.c: New file.
	* sysdeps/unix/sysv/linux/readdir64.c: New file.
	* sysdeps/unix/sysv/linux/readdir64_r.c: New file.

	* sysdeps/unix/sysv/linux/getdents64.c: New file.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines)
	[$(subdir)=dirent]: Add getdents64.
	* sysdeps/unix/sysv/linux/Dist: Add getdents64.c.

	* sysdeps/unix/sysv/linux/xstatconv.c: LFS support.

1997-12-18 12:07  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/generic/bits/statfs.h (struct statfs64): Added.

	* sysdeps/generic/getrlimit.c: Include <sys/types.h>.
	* sysdeps/generic/getrlimit64.c: Likewise.
	* sysdeps/generic/setrlimit.c: Likewise.
	* sysdeps/generic/setrlimit64.c: Likewise.

1997-12-17 13:57  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/unix/sysv/linux/siglist.c: Fix compile problem if not
	using versioning.

	* sysdeps/generic/waitid.c: Include <sys/types.h> for id_t.

	* sysdeps/standalone/arm/bits/errno.h (EBUSY): Added.

1997-12-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* locale/programs/ld-ctype.c (ctype_output): Clear out the padding
	after the codeset name.

1997-12-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libc.map: Add get_kernel_syms.

1997-12-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/testrtsig.h (kernel_has_rtsig): Make
	static.
	* sysdeps/unix/sysv/linux/testrtsig.h (kernel_has_rtsig):
	Likewise.  Fix condition.

1997-12-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* libio/Makefile (routines) [$(versioning)=yes]: Add oldiofdopen.

1997-12-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/fpu/bits/mathinline.h: Don't define exp2 inline.
	Define scalbln{,f,l} under __USE_ISOC9X, not __USE_MISC.

1997-12-15  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/powerpc/syscall.S: Put back.
	* sysdeps/unix/sysv/linux/powerpc/sigreturn.S: Delete this
	instead.  Oops.

1997-12-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in (libc_cv_gcc_alpha_ng_prefix): Correct quoting.

1997-12-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (catanh_test): Change epsilon.
	Reported by H.J. Lu.

1997-12-14 19:39  H.J. Lu  <hjl@gnu.org>

	* libc.map (__getpid): Added for linuxthreads.

1997-12-13 21:09  H.J. Lu  <hjl@gnu.org>

	* configure.in (HAVE_DWARF2_UNWIND_INFO_STATIC): Define
	it if gcc uses static variable in DWARF2 unwind information
	for exception support.

	* config.h.in (HAVE_DWARF2_UNWIND_INFO_STATIC): New.

	* elf/soinit.c (__libc_global_ctors, _fini): Handle
	HAVE_DWARF2_UNWIND_INFO_STATIC.

	* libc.map (__register_frame*, __deregister_frame*): Make them
	global.

1997-12-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c: Add more tests for "normal" values.

1997-12-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* stdio-common/printf_fphex.c: Fix printing of long double number
	with a biased exponent of zero.  Fix rounding.

1997-12-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sunrpc/rpc_main.c: Accept new flag -$.
	* sunrpc/Makefile (rpcgen-cmd): Pass it here.

1997-12-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile ($(inst_slibdir)/libc-$(version).so): Install the
	dynamic linker first, in case the interface has changed.

1997-12-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* nss/nss_files/files-alias.c (get_next_alias): Fix parameter
	order.

1997-12-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* math/tgmath.h: Check for double first, for architectures where
	sizeof (long double) == sizeof (double).

1997-12-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c: New tests for "normal" values added for most
	functions.

1997-12-14 21:33  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.0.91.

	* db2/makedb.c (process_input): Fix typo in message.
	* sunrpc/rpcinfo.c (pmapdump): Unify messages.

	* elf/dynamic-link.h: Pretty print.

	* elf/rtld.c: Allow multiple preloading of a shared object.

	* include/limits.h: Prevent multiple inclusion.

	* malloc/Makefile (headers): Add mcheck.h.
	(distribute): Remove it here.
	* malloc/mcheck.h: Pretty print.
	* malloc/mtrace.c (mallenv): Make `const'.
	* malloc/mtrace.pl: Don't print table head for memory leaks if there
	are none.
	* manual/memory.texi: Update descriptor of malloc hooks.

	* posix/Makefile (routines): Add waitid.
	* posix/sys/types.h [__USE_SVID || __USE_POSIX]: Define id_t based
	on __id_t.
	* posix/sys/wait.h: Define idtype_t type.
	Add prototype for waitid.
	* signal/signal.h: Move definition of sigval_t to <bits/siginfo.h>.
	* sysdeps/generic/waitid.c: Stub for waitid.
	* sysdeps/generic/bits/siginfo.h: Define sigval_t.  Arrange to work
	the __need_siginfo_t defined.
	* sysdeps/unix/sysv/linux/bits/siginfo: Likewise.
	* sysdeps/generic/bits/types.h: Define __id_t.
	Correct definition of __FDMASK.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/types.h: Likewise.

	* sysdeps/posix/waitid.c: New file.
	Provided by Zack Weinberg.

	* rt/aio_misc.c: Rename __aio_free_req to __aio_free_request.

	* sysdeps/alpha/dl-machine.h (ELF_MACHINE_RUNTIME_TRAMPOLINE):
	Add missing parameters.

	* sysdeps/generic/dl-sysdep.c: Don't call __libc_init_secure.
	* sysdeps/generic/enbl-secure.c: Don't define __libc_uid.
	* sysdeps/unix/sysv/linux/init-first.c: Define __libc_uid.
	* sysdeps/unix/sysv/linux/sigqueue.c: Make sure __libc_uid is
	initialized.

	* sysdeps/i386/dl-machine.h: Little cleanup.

	* sysdeps/i386/fpu/bits/mathinline.h: Use __signbit* inline functions.
	(__finite): Mark function as const.
	Add inline code for __ieee754_atan2.

	* sysdeps/libm-ieee754/s_cacoshf.c: Add alternate implementation
	(but don't use it now).
	* sysdeps/libm-ieee754/s_catan.c: Use __ieee754_atan2 instead of
	__atan.
	* sysdeps/libm-ieee754/s_catanf.c: Likewise.
	* sysdeps/libm-ieee754/s_catanl.c: Likewise.
	* sysdeps/libm-ieee754/s_catanh.c: Likewise.  Correct sign of
	real part.
	* sysdeps/libm-ieee754/s_catanhf.c: Likewise.
	* sysdeps/libm-ieee754/s_catanhl.c: Likewise.
	* sysdeps/libm-ieee754/s_clog10.c: Use factor to correct
	__ieee754_atan2 to base 10.
	* sysdeps/libm-ieee754/s_clog10f.c: Likewise.
	* sysdeps/libm-ieee754/s_clog10l.c: Likewise.

	* sysdeps/unix/sysv/linux/alpha/kernel_sigaction.h: Define as
	old_kernel_sigaction.

	* sysdeps/unix/sysv/linux/net/if_slip.h: Pretty print.

	* wctype/Makefile (routines): Add wctype_l.
	* wctype/wctype.h: Add declaration of __wctype_l.
	* wctype/wctype_l.c: New file.

1997-12-10 00:38  Ulrich Drepper  <drepper@cygnus.com>

	* locale/C-ctype.c: Correct data for isw* functions.
	* locale/programs/ld-ctype.c: Write 32bit char classes in correct
	byte order.
	* wctype/test_wctype.c: Add test for isw* functions.
	* wctype/wctype.c: Return value with expected byte order.

1997-12-13  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* libc-work/nis/ypclnt.c (do_ypcall): Don't free dom_binding twice.

1997-12-05 20:19  H.J. Lu  <hjl@gnu.org>

	* iconvdata/Makefile: Fix a typo.

	* sysdeps/unix/sysv/linux/Makefile (stdio-common): Add
	oldsiglist for shared library.

	* sysdeps/unix/sysv/linux/siglist.c (_sys_siglist, sys_siglist,
	sys_sigabbrev): Make them as the default version GLIBC_2.1.

	* sysdeps/unix/sysv/linux/oldsiglist.c (_sys_siglist,
	sys_siglist, sys_sigabbrev): New file. Make them as the old
	version GLIBC_2.0.

	* libc.map (_sys_siglist, sys_siglist, sys_sigabbrev): Added
	to GLIBC_2.1.

1997-11-20 18:02  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libio/iofgets.c (_IO_fgets): Return an error only if there
	is a new error.
	* libio/iogets.c (_IO_gets): Ditto.

1997-11-20 07:26  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libc.map (_IO_fdopen): Add support for GLIBC_2.0.

	* libio/Makefile (routines, shared-only-routines): Add
	oldiofdopen.

	* libio/fileops.c: Don't use _IO_FILE_complete.
	* libio/iofdopen.c: Ditto.
	* libio/iofopen.c: Ditto.
	* libio/iofopen64.c: Ditto.
	* libio/iopopen.c: Ditto.
	* libio/iovdprintf.c: Ditto.

	* libio/genops.c (_IO_init): Set _vtable_offset to 0.

	* libio/iofdopen.c (_IO_new_fdopen): Changed from _IO_fdopen
	and make it for _IO_fdopen/fdopen version GLIBC_2.1.

	* libio/iolibio.h (_IO_old_fclose, _IO_new_fclose,
	_IO_old_fdopen, _IO_new_fdopen): New declaration.

	* libio/libio.h (_IO_FILE): Add more fields.
	(_IO_FILE_complete): Defined and make _IO_FILE be the old
	one if _IO_USE_OLD_IO_FILE is defined
	(_IO_2_1_stdin_, _IO_2_1_stdout_, _IO_2_1_stderr_): Make
	them _IO_FILE_complete.

	* libio/libioP.h (_IO_JUMPS_FUNC): New, use _vtable_offset
	to adjust vtable.
	(JUMP0, JUMP1, JUMP2, JUMP3): Use _IO_JUMPS_FUNC instead of
	_IO_JUMPS.
	(_IO_FILE_complete): Commented out.

	* libio/oldfileops.c: Define _IO_USE_OLD_IO_FILE.
	* libio/oldiofclose.c: Ditto.
	* libio/oldiofopen.c: Ditto.
	* libio/oldstdfiles.c: Ditto.

	* libio/oldfileops.c (_IO_old_file_init): Set _vtable_offset
	for the old _IO_FILE.

	* libio/oldstdfiles.c (DEF_STDFILE): Remove INAME.
	(_IO_check_libio): Set _vtable_offset for old stdin, stdout
	and stderr.

	* libio/stdfiles.c (DEF_STDFILE): Don't use _IO_FILE_complete
	and remove INAME.

	* libio/stdio.c (stdin, stdout, stdin): Don't use
	_IO_FILE_complete.

	* libio/oldiofdopen.c: New.

	* stdio-common/vfprintf.c (buffered_vfprintf): Set
	hp->_vtable_offset to 0.

1997-11-18 08:03  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libc.map (_IO_file_open): Added.

	* libio/libioP.h (_IO_file_open): Declared.

	* libio/fileops.c (_IO_file_open): New.
	(_IO_file_fopen): Call _IO_file_open ().

	* sysdeps/generic/_G_config.h: Define _G_HAVE_IO_FILE_OPEN.
	* sysdeps/unix/sysv/linux/_G_config.h: Likewise.

1997-12-07  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* signal/signal.h: Fix selection of signal semantics to match
	comment.

1997-12-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sigreturn.c: Stub out.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove sigreturn and
	rt_sigreturn.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines)
	[$(subdir)=signal]: Remove rt_sigreturn.
	* sysdeps/unix/sysv/linux/powerpc/syscall.S: Deleted.
	* sysdeps/unix/sysv/linux/m68k/sigreturn.S: Deleted.
	* sysdeps/unix/sysv/linux/rt_sigreturn.c: Deleted.

1997-12-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sigaction.c: Include <errno.h>.  Fix
	declarations.

1997-12-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* iconvdata/extra-module.mk: Expand extra-objs now.

1997-12-09  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/fpu/bits/mathinline.h: Protect declarations of
	inline functions by feature tests to avoid warning about missing
	prototype declarations.

1997-12-09 15:08  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_compat/compat-grp.c: Reset the blacklist correct, fix
	return code for non existent +name entries.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.

1997-12-10 13:52  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/standalone/arm/bits/errno.h (EAGAIN): Added.
	(EIO): Likewise.
	(ENOSPC): Likewise.
	(EEXIST): Likewise.
	(__errno_location): Likewise.

	* sysdeps/generic/sys/param.h (MAXPATHLEN): Added.

	* sysdeps/generic/sigqueue.c: Include <sys/types.h> for pid_t.

1997-12-09 08:10  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/publickey.c: Use new NSS interface.

1997-12-09 03:08  Ulrich Drepper  <drepper@cygnus.com>

	* manual/malloc.texi: Document mtrace/muntrace and the concept.

1997-12-04  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/m68k/fpu/bits/fenv.h (fenv_t): Add member to hold fpiar
	value, to match spirit of the standard.
	* sysdeps/m68k/fpu/fegetenv.c: Save/restore fpiar.
	* sysdeps/m68k/fpu/feholdexcpt.c: Likewise.
	* sysdeps/m68k/fpu/fesetenv.c: Likewise.

1997-12-02  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/signal.texi (Signal Stack): Remove spurious @item.

1997-12-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* rt/aio.h: Remove double semicolon.

	* rt/librt.map: Add aio_init.

1997-12-08 03:24  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig: Define $(rt) to rt if linuxthreads is available.
	* Makefile (subdirs): Replace rt by $(rt).

	* shlib-versions: Use version .2 for NSS modules.

	* grp/fgetgrent_r.c (LINE_PARSER): Call parse_line with extra
	argument.
	* pwd/fgetpwent_r.c: Likewise.
	* spwd/fgetspent_r.c: Likewise.
	* spwd/sgetspent_r.c: Likewise.
	* hesiod/nss_hesiod/hesiod-grp.c (lookup): Add new argument.
	Store error number in *ERRNOP.  Little optimization.
	* hesiod/nss_hesiod/hesiod-pwd.c: Likewise.
	* hesiod/nss_hesiod/hesiod-service.c: Likewise.
	* inet/getnetgrent_r.c (__internal_setnetgrent_reuse): Likewise.
	(__internal_getnetgrent_r): New argument.
	Call __internal_setnetgrent_reuse with new argument.
	(__getnetgrent_r): Call __internal_getnetgrent_r with new argument.
	* inet/netgroup.h: Add argument to prototypes.
	* nis/nisplus-parser.h: Likewise.
	* nis/nss_compat/compat-grp.c: Change everything to store error
	code through provided pointer and not use errno.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.
	* nis/nss_nis/nis-alias.c: Likewise.
	* nis/nss_nis/nis-ethers.c: Likewise.
	* nis/nss_nis/nis-grp.c: Likewise.
	* nis/nss_nis/nis-hosts.c: Likewise.
	* nis/nss_nis/nis-netgrp.c: Likewise.
	* nis/nss_nis/nis-network.c: Likewise.
	* nis/nss_nis/nis-proto.c: Likewise.
	* nis/nss_nis/nis-publickey.c: Likewise.
	* nis/nss_nis/nis-pwd.c: Likewise.
	* nis/nss_nis/nis-rpc.c: Likewise.
	* nis/nss_nis/nis-service.c: Likewise.
	* nis/nss_nis/nis-spwd.c: Likewise.
	* nis/nss_nisplus/nisplus-alias.c: Likewise.
	* nis/nss_nisplus/nisplus-ethers.c: Likewise.
	* nis/nss_nisplus/nisplus-grp.c: Likewise.
	* nis/nss_nisplus/nisplus-hosts.c: Likewise.
	* nis/nss_nisplus/nisplus-netgrp.c: Likewise.
	* nis/nss_nisplus/nisplus-network.c: Likewise.
	* nis/nss_nisplus/nisplus-parser.c: Likewise.
	* nis/nss_nisplus/nisplus-proto.c: Likewise.
	* nis/nss_nisplus/nisplus-publickey.c: Likewise.
	* nis/nss_nisplus/nisplus-pwd.c: Likewise.
	* nis/nss_nisplus/nisplus-rpc.c: Likewise.
	* nis/nss_nisplus/nisplus-service.c: Likewise.
	* nis/nss_nisplus/nisplus-spwd.c: Likewise.
	* nss/nss_db/db-XXX.c: Likewise.
	* nss/nss_db/db-alias.c: Likewise.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_files/files-XXX.c: Likewise
	* nss/nss_files/files-alias.c: Likewise
	* nss/nss_files/files-netgrp.c: Likewise
	* nss/nss_files/files-parse.c: Likewise
	* nss/getXXbyYY_r.c: Call with __errno_location() as value for new
	parameter of get functions.
	* nss/getXXent_r.c: Likewise.

	* localedata/tst-fmon.c: Print debug info if test fails.

	* rt/Makefile (routines): Add aio_notify.
	* rt/aio.h: Remove non-public definitions.  Add aioinit stuff.
	* rt/aio_cancel.c: Rewrite to support lio_listio and aio_suspend.
	* rt/aio_fsync.c: Likewise.
	* rt/aio_misc.c: Likewise.
	* rt/aio_misc.h: Likewise.
	* rt/aio_read.c: Likewise.
	* rt/aio_read64.c: Likewise.
	* rt/aio_suspend.c: Likewise.
	* rt/aio_write.c: Likewise.
	* rt/aio_write64.c: Likewise.
	* rt/lio_listio.c: Likewise.
	* rt/lio_listio64.c: Likewise.
	* rt/aio_notify.c: New file.

	* sysdeps/generic/bits/sigset.h: Pretty print.

	* sysdeps/posix/pwrite.c: Define weak alias only if function is
	really defined as __pwrite.

	* sysdeps/unix/sysv/linux/pread.c: Rewrite to use syscall directly
	instead of pread64.
	* sysdeps/unix/sysv/linux/pwrite.c: Likewise.

	* sysdeps/unix/sysv/linux/Makefile [$(subdir)=signal]
	(sysdep_routines): Add rt_sigpending and rt_sigreturn.
	* sysdeps/unix/sysv/linux/sigaction.c: Use correct value for sigset_t
	size in syscall.
	* sysdeps/unix/sysv/linux/sigpending.c: Likewise.
	* sysdeps/unix/sysv/linux/sigprocmask.c: Likewise.
	* sysdeps/unix/sysv/linux/sigreturn.c: Likewise.
	* sysdeps/unix/sysv/linux/sigsuspend.c: Likewise.
	* sysdeps/unix/sysv/linux/sigtimedwait.c: Likewise.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/sigaction.c: Likewise.  Take care
	for ACT being NULL.
	* sysdeps/unix/sysv/linux/syscalls.list: Don't mention user for
	RT signals.
	* sysdeps/unix/sysv/linux/i386/s_pread64.s: Return ENOSYS if
	__NR_pread is not defined.
	* sysdeps/unix/sysv/linux/i386/s_pwrite64.s: Return ENOSYS if
	__NR_pwrite is not defined.

1997-12-07 11:15  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_compat/compat-grp.c: If buffer is to small, set the file
	handle for /etc/group back in some more cases.
	* nis/nss_compat/compat-pwd.c: If buffer is to small, set the file
	handle for /etc/passwd back in some more cases.
	* nis/nss_compat/compat-spwd.c: If buffer is to small, set the file
	handle for /etc/shadow back in some more cases.

1997-12-06 17:00  H.J. Lu  <hjl@gnu.org>

	* sysdeps/posix/sigblock.c (__sigblock): Don't check int mask
	beyound its size.
	* sysdeps/posix/sigsetmask.c (__sigsetmask): Ditto.
	* sysdeps/posix/sigvec.c (convert_mask, __sigvec): Ditto.

1997-12-06 04:38  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/wordsize-32/inttypes.h: Rewrite {str,wcs}to{i,u}max
	handling.  Don't use macros, we need functions.  Use inline functions
	for optimization.
	* sysdeps/wordsize-64/inttypes.h: Likewise.
	* sysdeps/wordsize-32/Makefile: Add strtoimax, stroumax, wcstoimax,
	and wcstoumax.
	* sysdeps/wordsize-64/Makefile: Likewise.
	* sysdeps/wordsize-32/Dist: Likewise.
	* sysdeps/wordsize-64/Dist: Likewise.
	* sysdeps/wordsize-32/strtoimax.c: New file.
	* sysdeps/wordsize-32/strtoumax.c: New file.
	* sysdeps/wordsize-32/wcstoimax.c: New file.
	* sysdeps/wordsize-32/wcstoumax.c: New file.
	* sysdeps/wordsize-64/strtoimax.c: New file.
	* sysdeps/wordsize-64/strtoumax.c: New file.
	* sysdeps/wordsize-64/wcstoimax.c: New file.
	* sysdeps/wordsize-64/wcstoumax.c: New file.

1997-12-04 10:40  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/generic/wait3.c (__wait3): Use ANSI-style definition so
	that transparent union works.
	* sysdeps/generic/wait4.c (__wait4): Likewise.
	* sysdeps/generic/wait.c (__wait): Likewise.

	* sysdeps/generic/getpeername.c (getpeername): Use socklen_t not
	size_t.

	* sysdeps/generic/syscall.c (syscall): Return value and arg are
	long, to match prototype.

	* malloc/malloc.c (HAVE_MREMAP): Set to 0 for ARM, as we don't
	have mremap() yet.

	* sysdeps/generic/usleep.c (usleep): Returns void, to match prototype.

	* sysdeps/unix/sysv/linux/arm/syscalls.list: New file.

	* sysdeps/generic/bits/time.h: Use __time_t not time_t.

	* sysdeps/generic/bits/resource.h: Include <bits/types.h> for
	__rlim_t.

	* sysdeps/standalone/arm/bits/errno.h (ENOTTY): Added.

	* sysdeps/generic/bits/dirent.h (struct dirent64): Added.

	* io/sys/stat.h (S_ISLNK): Always false if we don't have
	__S_IFLNK.

	* sysdeps/standalone/close.c (_STDIO_H): Define before including
	<bits/stdio_lim.h>.
	* sysdeps/standalone/filedesc.h (_STDIO_H): Likewise.

1997-12-06 01:09  Ulrich Drepper  <drepper@cygnus.com>

	* posix/sys/wait.h: Don't use transparent unions in C++.

1997-12-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* time/time.h: Add strfxtime.

	* libc.map: Add tcgetsid, strcasestr, wmemrtombs, wmemrtowcs,
	sysv_signal, strfxtime, pread64, pwrite64.

1997-11-30 21:57  Richard Henderson  <rth@cygnus.com>

	Alpha changes for EGCS:
	* config.h.in (ASM_ALPHA_NG_SYMBOL_PREFIX): New entry.
	* configure.in (libc_cv_gcc_alpha_ng_prefix): New check.
	* sysdeps/alpha/dl-machine.h (_dl_runtime_resolve): Care for prefix.
	(_start): Likewise.
	* sysdeps/unix/sysv/linux/alpha/init-first.h: Likewise.

1997-12-05 00:01  Ulrich Drepper  <drepper@cygnus.com>

	The kernel expects the arguments in a different order.
	* sysdeps/unix/sysv/linux/i386/s_pread64.S: New file.
	* sysdeps/unix/sysv/linux/i386/s_pwrite64.S: New file.

	* FAQ.in: New file.
	* gen-FAQ.pl: New file.
	* Makefile (FAQ): Add rule to generate from FAQ.in.

	* iconvdata/Makefile: Treat libJIS like the other modules.

	* rt/librt.map: New file.

	* sysdeps/wordsize-32/bits/environments.h: Add test for direct
	inclusion.
	* sysdeps/wordsize-64/bits/environments.h: Likewise.  Correct
	comment.

1997-12-04 22:29  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/rt_sigprocmask.c: Fix prototype.
	* sysdeps/unix/sysv/linux/rt_sigsuspend.c: Likewise.
	* sysdeps/unix/sysv/linux/rt_sigqueueinfo.c: Include <sys/types.h>.
	Patches by Thorsten Kukuk <kukuk@weber.uni-paderborn.de>.

1997-11-27  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* string/bits/string2.h: Fix spellings.

	* string/string.h: Fix spellings.

1997-12-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/i386/sigaction.c: Rename extern
	declaration to __syscall_rt_sigaction.

	* sysdeps/unix/sysv/linux/sigreturn.c: Remove inclusion of
	non-existant <sigcontext.h>.

1997-12-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/generic/enbl-secure.c (__libc_init_secure): Correct
	typo.

1997-12-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/wordsize-64/bits/environments.h: Correct spelling.

	* Makeconfig (shared-thread-library): Correct spelling.

	* sysdeps/unix/sysv/linux/sys/pci.h: Include <linux/pci.h> and not
	<asm/pci.h>.

1997-12-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/bits/socket.h: Add AF_* and PF_
	constants from Linux headers. Pointed out by
	csmall@scooter.o.i.net. [PR libc/369]

1997-12-04 10:21  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* sunrpc/xcrypt.c: Fix lower/upper characters in optimized hexval.

1997-12-04 00:06  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* configure.in: If --enable-add-ons is given without an
	argument, set the addons list to all subdirs with a configure
	script.

1997-12-03 23:50  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig: Add shared-thread-library variable.

	* math/Makfile (CPPFLAGS): Add -D__LIBC_INTERNAL_MATH_INLINES.
	* sysdeps/i386/Makefile: Don't define ___LIBC_INTERNAL_MATH_INLINES
	here.
	* sysdeps/m68k/fpu/e_acos.c: Likewise.
	* sysdeps/m68k/fpu/e_atan2.c: Likewise.
	* sysdeps/m68k/fpu/e_fmod.c: Likewise.
	* sysdeps/m68k/fpu/e_pow.c: Likewise.
	* sysdeps/m68k/fpu/e_scalb.c: Likewise.
	* sysdeps/m68k/fpu/k_cos.c: Likewise.
	* sysdeps/m68k/fpu/k_sin.c: Likewise.
	* sysdeps/m68k/fpu/k_tan.c: Likewise.
	* sysdeps/m68k/fpu/s_atan.c: Likewise.
	* sysdeps/m68k/fpu/s_ccos.c: Likewise.
	* sysdeps/m68k/fpu/s_ccosh.c: Likewise.
	* sysdeps/m68k/fpu/s_cexp.c: Likewise.
	* sysdeps/m68k/fpu/s_csin.c: Likewise.
	* sysdeps/m68k/fpu/s_csinh.c: Likewise.
	* sysdeps/m68k/fpu/s_frexp.c: Likewise.
	* sysdeps/m68k/fpu/s_ilogb.c: Likewise.
	* sysdeps/m68k/fpu/s_isinf.c: Likewise.
	* sysdeps/m68k/fpu/s_llrint.c: Likewise.
	* sysdeps/m68k/fpu/s_llrintf.c: Likewise.
	* sysdeps/m68k/fpu/s_llrintl.c: Likewise.
	* sysdeps/m68k/fpu/s_lrint.c: Likewise.
	* sysdeps/m68k/fpu/s_modf.c: Likewise.
	* sysdeps/m68k/fpu/s_remquo.c: Likewise.
	* sysdeps/m68k/fpu/s_scalbn.c: Likewise.
	* sysdeps/m68k/fpu/s_sincos.c: Likewise.

	* libc.map: Add __libc_current_sigrtmin, __libc_current_sigrtmax,
	__libc_allocate_rtsig, sigqueue, sigtimedwait, sigwaitinfo.
	* signal/Makefile (headers): Add bits/siginfo.h.
	(routines): Add allocrtsig, sigtimedwait, sigwaitinfo, sigqueue.
	(distribute): Add testrtsig.h.
	* signal/allocrtsig.c: New file.
	* signal/signal.h: Define `union sigval'.  Include <bits/siginfo.h>.
	Declare sigwaitinfo, sigtimedwait, sigqueue, __libc_current_sigrtmin,
	__libc_current_sigrtmax.
	* sysdeps/generic/sigqueue.c: New file.
	* sysdeps/generic/sigtimedwait.c: New file.
	* sysdeps/generic/sigwaitinfo.c: New file.
	* sysdeps/generic/testrtsig.h: New file.
	* sysdeps/generic/bits/siginfo.h: New file.
	* sysdeps/unix/sysv/linux/bits/siginfo.h: New file.
	* sysdeps/unix/sysv/linux/kernel_sigaction.h: Define struct as
	old_kernel_sigaction and rename sa_handler member to k_sa_handler.
	* sysdeps/unix/sysv/linux/rt_sigaction.c: New file.
	* sysdeps/unix/sysv/linux/rt_sigprocmask.c: New file.
	* sysdeps/unix/sysv/linux/rt_sigqueueinfo.c: New file.
	* sysdeps/unix/sysv/linux/rt_sigreturn.c: New file.
	* sysdeps/unix/sysv/linux/rt_sigsuspend.c: New file.
	* sysdeps/unix/sysv/linux/rt_sigtimedwait.c: New file.
	* sysdeps/unix/sysv/linux/sigpending.c: New file.
	* sysdeps/unix/sysv/linux/sigprocmask.c: New file.
	* sysdeps/unix/sysv/linux/sigqueue.c: New file.
	* sysdeps/unix/sysv/linux/sigreturn.c: New file.
	* sysdeps/unix/sysv/linux/sigtimedwait.c: New file.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c: New file.
	* sysdeps/unix/sysv/linux/testrtsig.h: New file.
	* sysdeps/unix/sysv/linux/sigsuspend.c: Update for AIO.
	* sysdeps/unix/sysv/linux/syscalls.list: Update for AIO.
	* sysdeps/unix/sysv/linux/sigaction.c: Update for AIO.
	* sysdeps/unix/sysv/linux/bits/local_lim.h: Define AIO_PRIO_DELTA_MAX.
	* sysdeps/unix/sysv/linux/bits/posix_opt.h: Define _XOPEN_REALTIME
	and _POSIX_REALTIME_SIGNALS.
	* sysdeps/unix/sysv/linux/bits/sigaction.h: Update for AIO.
	* sysdeps/unix/sysv/linux/bits/signum.h: Define SIGRTMIN/MAX and
	update _NSIG.
	* sysdeps/unix/sysv/linux/i386/sigaction.c: Update for AIO.
	* sysdeps/unix/sysv/linux/i386/sys/ucontext.h: Linux/i386 specific
	definitions.

	* Makefile (subdirs): Add rt.
	* shlib-versions: Add entry for librt.
	* rt/Makefile: New file.
	* rt/aio.h: New file.
	* rt/aio_cancel.c: New file.
	* rt/aio_error.c: New file.
	* rt/aio_fsync.c: New file.
	* rt/aio_misc.c: New file.
	* rt/aio_misc.h: New file.
	* rt/aio_read.c: New file.
	* rt/aio_read64.c: New file.
	* rt/aio_return.c: New file.
	* rt/aio_suspend.c: New file.
	* rt/aio_write.c: New file.
	* rt/aio_write64.c: New file.
	* rt/lio_listio.c: New file.
	* rt/lio_listio64.c: New file.
	* sysdeps/generic/aio_sigqueue.c: New file.
	* sysdeps/unix/sysv/linux/aio_sigqueue.c: New file.
	* sysdeps/unix/sysv/linux/Dist: Add new files
	* sysdeps/unix/sysv/linux/Makefile [$(subdir)=signal]
	(sysdep_routines): Add rt_sigsuspend, rt_sigprocmask, rt_sigtimedwait,
	rt_sigqueueinfo, rt_sigaction.

	* posix/Makefile (headers): Add bits/environments.h.
	* posix/confstr.c: Correctly handle _CS_XBS5_ILP32_OFFBIG_CFLAGS
	and _CS_LFS_CFLAGS on 64bit platforms.
	* posix/unistd.h: Define _XOPEN_LEGACY.  Explain _XOPEN_REALTIME
	and _XOPEN_REALTIME_THREADS.  Include bits/environments.h.
	* sysdeps/generic/bits/confname.h: Define _SC_* constants for
	compilation modules.
	* sysdeps/wordsize-32/bits/environments.h: New file.
	* sysdeps/wordsize-64/bits/environments.h: New file.

	* posix/getopt.c: Remove declaration of getpid and __libc_pid.
	* posix/getopt_init.c: Test for value 0xf00baa of uninitialized
	__libc_pid.
	* sysdeps/unix/sysv/linux/init-first.c: Initialize __libc_pid to
	0xf00baa.

	* string/string.h: Add declaration of __strverscmp.
	* string/strverscmp.c: Rename function ot __strverscmp and make old
	name weak alias.

	* sysdeps/generic/dl-sysdep.c: Declare and define __libc_uid.
	* sysdeps/generic/enbl-secure.c: Likewise.
	* sysdeps/mach/hurd/dl-sysdep.c: Likewise.

	* sysdeps/unix/sysv/linux/bits/sigset.h: Pretty print.

	* sysdeps/unix/sysv/linux/sys/pci.h: New file.

1997-12-03  Ulrich Drepper  <drepper@cygnus.com>

	* posix/sys/wait.h: Use __transparent_union__ instead of
	transparent_union.  Reported by Roland McGrath.

1997-12-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* resolv/inet_neta.c (inet_neta): Change type of first parameter
	to u_int32_t.  Suggested by John Lavagnino <John_Lavagnino@Brown.edu>
	[PR libc/366].

	* resolv/inet_addr.c (inet_addr): Change return type to u_int32_t.

	* inet/arpa/inet.h: Change types of inet_neta and inet_addr.

1997-12-03 20:40  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* grp/initgroups.c: Increase buffer if it is too small.

1997-12-03  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netinet/ip.h: Don't use u_int8_t for bit
	fields, this is no ISO C.  Reported by Andreas Jaeger.

1997-12-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/i386/sys/ucontext.h (enum): Add missing commata.

1997-12-03 08:58  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/generic/bits/utsname.h: <sys/utsname.h> defines
	_SYS_UTSNAME_H not _UTSNAME_H.

1997-11-28  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-profile.c (_dl_start_profile): Avoid overflow when
	computing s_scale.

1997-11-29  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/libm-ieee754/s_csqrt.c: Use different formula for now.
	* sysdeps/libm-ieee754/s_csqrtf.c: Likewise.
	* sysdeps/libm-ieee754/s_csqrtl.c: Likewise.

	* math/libm-test.c (csqrt_test): Add testcase.

1997-12-03 15:44  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sys/ultrasound.h: New file.
	* sysdeps/unix/sysv/linux/sys/Dist: Add it.
	* sysdeps/unix/sysv/linux/sys/Makefile [$(subdir)=misc]: Likewise.

1997-11-30  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sys/timex.h: Fix declaration.

1997-12-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (acos_test): Add more tests.
	(asin_test): Likewise.
	(atan_test): Likewise.
	(exp_test): Likewise.
	(sin_test): Likewise.
	(sqrt_test): Likewise.
	(cpow_test): Likewise.
	(csqrt_test): Likewise.
	(cexp_test): Correct typo in gcc version test.

1997-12-02 17:14  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/arm/__longjmp.S: Define _SETJMP_H before including
	<bits/setjmp.h>.
	* sysdeps/arm/setjmp.S: Likewise.

	* sysdeps/unix/sysv/linux/arm/bits/mman.h: New file.

1997-12-02 18:07  Philip Blundell  <pb@nexus.co.uk>

	* stdio/stdio.h: Add prototype for tmpfile64().

1997-12-02 17:47  Philip Blundell  <pb@nexus.co.uk>

	* stdio/stdio.h (__stdio_gen_tempname): Add extra argument to
	prototype to keep in step with libio version.

	* stdio-common/tmpfile64.c: Include <errno.h> for ENOSYS.

1997-12-02 17:41  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/generic/Makefile: Don't try to use make_siglist if
	cross-compiling.

1997-12-02 01:18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/clone.S: When cloned process returns
	load GOT ptr before jumping to _exit.
	Reported by Xavier Leroy.

1997-12-01 17:27  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (subdirs): Add iconvdata and localedata.

	* iconv/gconv.h: Define UNKNOWN_10646_CHAR as error value.

	* iconv/gconv_conf.c (read_conf_file): Little optimization.

	* iconvdata/8bit-gap.c: New file.
	* iconvdata/8bit-generic.c: Renamed from ...
	* iconvdata/iso8859-generic.c: ...this.
	* iconvdata/configure: Removed.
	* iconvdata/Makefile: Add new modules and better rules.
	* iconvdata/iso6937.c: Minor bug fixes.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/t61.c: Likewise.
	* iconvdata/iso8859-2.c: Change to use 8bit-generic.c.
	Minor bug fixes.
	* iconvdata/iso8859-3.c: Likewise.
	* iconvdata/iso8859-4.c: Likewise.
	* iconvdata/iso8859-5.c: Likewise.
	* iconvdata/iso8859-6.c: Likewise.
	* iconvdata/iso8859-7.c: Likewise.
	* iconvdata/iso8859-8.c: Likewise.
	* iconvdata/iso8859-9.c: Likewise.
	* iconvdata/iso8859-10.c: Likewise.
	* iconvdata/ebcdic-at-de-a.c: New file.
	* iconvdata/ebcdic-at-de.c: New file.
	* iconvdata/ebcdic-ca-fr.c: New file.
	* iconvdata/hp-roman8.c: New file.
	* iconvdata/koi-8.c: New file.
	* iconvdata/koi8-r.c: New file.
	* iconvdata/koi8-h.c: New file.
	* iconvdata/latin-greek-1.c: New file.
	* iconvdata/latin-greek-1.h: New file.
	* iconvdata/latin-greek.c: New file.
	* iconvdata/latin-greek.h: New file.
	* iconvdata/jis0201.c: New file.
	* iconvdata/jis0201.h: New file.
	* iconvdata/jis0208.c: New file.
	* iconvdata/jis0208.h: New file.
	* iconvdata/jis0212.c: New file.
	* iconvdata/jis0212.h: New file.
	* iconvdata/sjis.c: New file.
	* iconvdata/gap.pl: New file.  Script to generate table header.
	* iconvdata/gaptab.pl: New file.
	* iconvdata/gconv-modules: Add info about new modules.

	* locale/programs/charmap.c: Also examine alias names given in charmap
	files.

	* localedata/*: Add to here from add-on.  We need the information
	to generate tables for iconv.

	Update from db-2.3.14.
	* db2/Makefile: Updated.
	* db2/config.h: Likewise.
	* db2/db.h: Likewise.
	* db2/db_int.h: Likewise.
	* db2/btree/bt_cursor.c: Likewise.
	* db2/btree/bt_delete.c: Likewise.
	* db2/btree/bt_put.c: Likewise.
	* db2/btree/bt_search.c: Likewise.
	* db2/btree/bt_split.c: Likewise.
	* db2/btree/btree_auto.c: Likewise.
	* db2/common/db_appinit.c: Likewise.
	* db2/common/db_apprec.c: Likewise.
	* db2/common/db_err.c: Likewise.
	* db2/common/db_region.c: Likewise.
	* db2/db/db_auto.c: Likewise.
	* db2/db/db_dispatch.c: Likewise.
	* db2/db/db_ret.c: Likewise.
	* db2/dbm/dbm.c: Likewise.
	* db2/hash/hash_auto.c: Likewise.
	* db2/include/btree_ext.h: Likewise.
	* db2/include/common_ext.h: Likewise.
	* db2/include/db.h.src: Likewise.
	* db2/include/db_cxx.h: Likewise.
	* db2/include/db_ext.h: Likewise.
	* db2/include/db_int.h.src: Likewise.
	* db2/include/lock.h: Likewise.
	* db2/include/log.h: Likewise.
	* db2/include/mp.h: Likewise.
	* db2/include/mp_ext.h: Likewise.
	* db2/include/os_ext.h: Likewise.
	* db2/include/os_func.h: Likewise.
	* db2/lock/lock.c: Likewise.
	* db2/lock/lock_deadlock.c: Likewise.
	* db2/log/log.c: Likewise.
	* db2/log/log_archive.c: Likewise.
	* db2/log/log_auto.c: Likewise.
	* db2/log/log_get.c: Likewise.
	* db2/log/log_put.c: Likewise.
	* db2/mp/mp_bh.c: Likewise.
	* db2/mp/mp_fget.c: Likewise.
	* db2/mp/mp_fopen.c: Likewise.
	* db2/mp/mp_fput.c: Likewise.
	* db2/mp/mp_fset.c: Likewise.
	* db2/mp/mp_open.c: Likewise.
	* db2/mp/mp_pr.c: Likewise.
	* db2/mp/mp_region.c: Likewise.
	* db2/mp/mp_sync.c: Likewise.
	* db2/mutex/README: Likewise.
	* db2/mutex/mutex.c: Likewise.
	* db2/os/os_open.c: Likewise.
	* db2/os/os_func.c: Removed.
	* db2/os/os_config.c: New file.
	* db2/os/os_spin.c: New file.
	* db2/txn/txn.c: Likewise.
	* db2/txn/txn_auto.c: Likewise.

1997-11-30 06:01  Ulrich Drepper  <drepper@cygnus.com>

	* posix/sys/wait.h (__WAIT_INT): Don't use complex version with
	__typeof for C++ since this fails for class members.
	Reported by Neal Becker <neal@ctd.comsat.com>.

1997-11-28 11:21  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* configure.in: Check for a working makeinfo (3.11 or better).
	* config.make.in: Add MAKEINFO to be substituted.
	* manual/Makefile: Don't update info if makeinfo is too old.

1997-11-30 05:21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/alpha/setjmp.S: Define _ASM and _SETJMP_H to get definitions.
	* sysdeps/alpha/__longjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/kernel_termios.h: Include <termios.h>
	not <bits/termios.h>.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Define syscall as
	__llseek and make llseek and lseek64 weak aliases.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	Patches by a sun <asun@zoology.washington.edu>.

1997-11-29 19:19  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* misc/sys/syslog.h: Delete KERNEL preprocessor conditional.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h: Likewise.
	* misc/sys/syslog.h: Clean up BSD header.

1997-11-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/bits/in.h: Add changes from Linux 2.1.67.

	* sysdeps/libm-ieee754/s_ctan.c (__ctan): Raise invalid exception
	for ctan(+-inf,x).
	* sysdeps/libm-ieee754/s_ctanl.c (__ctanl): Likewise.
	* sysdeps/libm-ieee754/s_ctanf.c (__ctanf): Likewise.

	* math/libm-test.c (csqrt_test): Add tests for cabs, carg, ctan,
	csqrt (-1), ctanh(i*pi/4).

1997-11-26  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/bits/confname.h: Fix comma in enumerator.

1997-11-28 13:28  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/unix/sysv/linux/net/if_arp.h: Add more ARPHRD_ constants.

1997-11-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* wcsmbs/wcrtomb.c (__wcrtomb): Remove unused variable fake.

1997-11-26 21:28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/getcwd.c (GETCWD_STORYGE_CLASS): Remove definition
	and use.  Define GETCWD_RETURN_TYPE instead and use it.
	* sysdeps/unix/sysv/linux/getcwd.c: Define GETCWD_RETURN_TYPE instead
	of GETCWD_STORYGE_CLASS and put the return type and the
	`internal_function' in the right order for gcc 2.7.2.

1997-11-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sys/module.h: Remove file.  It's
	incompatible with Linux 2.1.x.  Packages using modules
	(e.g. modutils) should/do provide their own version.  Suggested by
	Richard Henderson.

	* sysdeps/unix/sysv/linux/Dist: Remove sys/module.h.

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers)
	[$(subdir)=socket]: Remove sys/module.h.

1997-11-26 04:28  Ulrich Drepper  <drepper@cygnus.com>

	* eld/dl-profile.c (_dl_start_profile): Avoid FP calculation when
	computing s_scale.  Patch by a sun <asun@zoology.washington.edu>.

	* iconv/gconv_close.c: Correct freeing of descriptor data.
	* iconv/gconv_simple.c: Return correct error values for illegal or
	incomplete characters.

	* Makefile (iconvdata/%): Special goal to simplify iconvdata
	development.
	* iconvdata/Makefile: New file.
	* iconvdata/configure: Likewise.
	* iconvdata/extra-module.mk: Likewise.
	* iconvdata/gconv-modules: Likewise.
	* iconvdata/iso6937.c: Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/iso8859-10.c: Likewise.
	* iconvdata/iso8859-10.h: Likewise.
	* iconvdata/iso8859-2.c: Likewise.
	* iconvdata/iso8859-2.h: Likewise.
	* iconvdata/iso8859-3.c: Likewise.
	* iconvdata/iso8859-3.h: Likewise.
	* iconvdata/iso8859-4.c: Likewise.
	* iconvdata/iso8859-4.h: Likewise.
	* iconvdata/iso8859-5.c: Likewise.
	* iconvdata/iso8859-5.h: Likewise.
	* iconvdata/iso8859-6.c: Likewise.
	* iconvdata/iso8859-6.h: Likewise.
	* iconvdata/iso8859-7.c: Likewise.
	* iconvdata/iso8859-7.h: Likewise.
	* iconvdata/iso8859-8.c: Likewise.
	* iconvdata/iso8859-8.h: Likewise.
	* iconvdata/iso8859-9.c: Likewise.
	* iconvdata/iso8859-9.h: Likewise.
	* iconvdata/iso8859-generic.c: Likewise.
	* iconvdata/t61.c: Likewise.

	* string/Makefile (routines): Add strcasestr.
	* string/string.h: Add prototype for strcasestr.
	* sysdeps/generic/strcasestr.c: New file.
	* wcsmbs/mbrtowc.c: Simplify special case a bit.
	* wcsmbs/wcrtomb.c: Likewise.
	* wcsmbs/mbsnrtowcs.c: Correctly handle incomplete characters.
	* wcsmbs/wcsnrtombs.c: Likewise.
	* wcsmbs/mbsrtowcs.c: Make sure SRC argument is correct when
	partial character is read.
	* wcsmbs/wcsrtombs.c: Likewise.
	* wcsmbs/wmemrtombs.c: Likewise.
	* wcsmbs/wmemrtowcs.c: Likewise.

	* io/ftw.h: Include <sys/stat.h> instead of <bits/stat.h>.
	* login/pty.h: Include <sys/ioctl.h> instead og <bits/ioctl-types.h>.
	* sysdeps/i386/__longjmp.S: Define _SETJMP_H.
	* sysdeps/i386/elf/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/kernel_termios.h: Do include
	<bits/termios.h>.

	* sysdeps/posix/mk-stdiolim.c: Output file with comment.
	* sysdeps/unix/sysv/linux/stdio_lim.h.in: Add comment.

	* sysdeps/unix/sysv/linux/sys/mman.h: Pretty print.
	* sysvipc/sys/ipc.h: Likewise.
	* sysvipc/sys/msg.h: Likewise.
	* sysvipc/sys/sem.h: Likewise.
	* sysvipc/sys/shm.h: Likewise.

	* sysdeps/alpha/bits/endian.h: Issue error message if the header is
	used directly.
	* sysdeps/alpha/bits/setjmp.h: Likewise.
	* sysdeps/alpha/fpu/bits/fenv.h: Likewise.
	* sysdeps/arm/bits/endian.h: Likewise.
	* sysdeps/arm/bits/setjmp.h: Likewise.
	* sysdeps/generic/bits/byteswap.h: Likewise.
	* sysdeps/generic/bits/confname.h: Likewise.
	* sysdeps/generic/bits/dirent.h: Likewise.
	* sysdeps/generic/bits/dlfcn.h: Likewise.
	* sysdeps/generic/bits/endian.h: Likewise.
	* sysdeps/generic/bits/fenv.h: Likewise.
	* sysdeps/generic/bits/huge_val.h: Likewise.
	* sysdeps/generic/bits/in.h: Likewise.
	* sysdeps/generic/bits/ioctl-types.h: Likewise.
	* sysdeps/generic/bits/ioctls.h: Likewise.
	* sysdeps/generic/bits/ipc.h: Likewise.
	* sysdeps/generic/bits/msq.h: Likewise.
	* sysdeps/generic/bits/poll.h: Likewise.
	* sysdeps/generic/bits/resource.h: Likewise.
	* sysdeps/generic/bits/sched.h: Likewise.
	* sysdeps/generic/bits/sem.h: Likewise.
	* sysdeps/generic/bits/setjmp.h: Likewise.
	* sysdeps/generic/bits/shm.h: Likewise.
	* sysdeps/generic/bits/sigaction.h: Likewise.
	* sysdeps/generic/bits/sigcontext.h: Likewise.
	* sysdeps/generic/bits/socket.h: Likewise.
	* sysdeps/generic/bits/stat.h: Likewise.
	* sysdeps/generic/bits/statfs.h: Likewise.
	* sysdeps/generic/bits/stdio_lim.h: Likewise.
	* sysdeps/generic/bits/termios.h: Likewise.
	* sysdeps/generic/bits/time.h: Likewise.
	* sysdeps/generic/bits/uio.h: Likewise.
	* sysdeps/generic/bits/utmp.h: Likewise.
	* sysdeps/generic/bits/utmpx.h: Likewise.
	* sysdeps/generic/bits/utsname.h: Likewise.
	* sysdeps/generic/bits/waitflags.h: Likewise.
	* sysdeps/generic/bits/waitstatus.h: Likewise.
	* sysdeps/gnu/bits/utmp.h: Likewise.
	* sysdeps/gnu/bits/utmpx.h: Likewise.
	* sysdeps/i386/bits/byteswap.h: Likewise.
	* sysdeps/i386/bits/endian.h: Likewise.
	* sysdeps/i386/bits/huge_val.h: Likewise.
	* sysdeps/i386/bits/setjmp.h: Likewise.
	* sysdeps/i386/fpu/bits/fenv.h: Likewise.
	* sysdeps/ieee754/bits/huge_val.h: Likewise.
	* sysdeps/m68k/bits/byteswap.h: Likewise.
	* sysdeps/m68k/bits/endian.h: Likewise.
	* sysdeps/m68k/bits/setjmp.h: Likewise.
	* sysdeps/m68k/fpu/bits/fenv.h: Likewise.
	* sysdeps/mach/hurd/alpha/bits/sigcontext.h: Likewise.
	* sysdeps/mach/hurd/bits/ioctls.h: Likewise.
	* sysdeps/mach/hurd/bits/stat.h: Likewise.
	* sysdeps/mach/hurd/hppa/bits/sigcontext.h: Likewise.
	* sysdeps/mach/hurd/i386/bits/sigcontext.h: Likewise.
	* sysdeps/mach/hurd/mips/bits/sigcontext.h: Likewise.
	* sysdeps/mips/bits/dlfcn.h: Likewise.
	* sysdeps/mips/bits/endian.h: Likewise.
	* sysdeps/mips/bits/setjmp.h: Likewise.
	* sysdeps/mips/dec/bits/endian.h: Likewise.
	* sysdeps/mips/mips64/bits/setjmp.h: Likewise.
	* sysdeps/mips/mipsel/bits/endian.h: Likewise.
	* sysdeps/mips/p40/bits/endian.h: Likewise.
	* sysdeps/powerpc/bits/endian.h: Likewise.
	* sysdeps/powerpc/bits/fenv.h: Likewise.
	* sysdeps/powerpc/bits/setjmp.h: Likewise.
	* sysdeps/sparc/sparc32/bits/endian.h: Likewise.
	* sysdeps/sparc/sparc32/bits/setjmp.h: Likewise.
	* sysdeps/sparc/sparc32/fpu/bits/fenv.h: Likewise.
	* sysdeps/sparc/sparc64/bits/endian.h: Likewise.
	* sysdeps/sparc/sparc64/fpu/bits/fenv.h: Likewise.
	* sysdeps/unix/bsd/bits/dirent.h: Likewise.
	* sysdeps/unix/bsd/bits/stat.h: Likewise.
	* sysdeps/unix/bsd/bits/waitflags.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/bits/dirent.h: Likewise.
	* sysdeps/unix/bsd/osf/alpha/bits/stat.h: Likewise.
	* sysdeps/unix/bsd/osf/bits/sigaction.h: Likewise.
	* sysdeps/unix/bsd/sun/m68k/bits/sigcontext.h: Likewise.
	* sysdeps/unix/bsd/sun/sparc/bits/sigcontext.h: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/bits/resource.h: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/bits/termios.h: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/bits/utsname.h: Likewise.
	* sysdeps/unix/bsd/ultrix4/bits/utsname.h: Likewise.
	* sysdeps/unix/bsd/ultrix4/mips/bits/sigcontext.h: Likewise.
	* sysdeps/unix/common/bits/dirent.h: Likewise.
	* sysdeps/unix/sysv/bits/dirent.h: Likewise.
	* sysdeps/unix/sysv/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/bits/utmp.h: Likewise.
	* sysdeps/unix/sysv/bits/utsname.h: Likewise.
	* sysdeps/unix/sysv/irix4/bits/confname.h: Likewise.
	* sysdeps/unix/sysv/irix4/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/ioctls.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/termios.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/dirent.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/in.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/ioctl-types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/ioctls.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/poll.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/resource.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sched.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigcontext.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/statfs.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/termios.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/uio.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/utsname.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/waitflags.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/bits/poll.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/endian.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/ioctl-types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/poll.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/statfs.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/termios.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/ioctl-types.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ioctls.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/poll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/setjmp.h: Likewise.
	* sysdeps/unix/sysv/minix/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/sco3.2.4/bits/confname.h: Likewise.
	* sysdeps/unix/sysv/sco3.2.4/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/sysv4/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/sysv4/bits/utsname.h: Likewise.
	* sysdeps/unix/sysv/sysv4/bits/waitflags.h: Likewise.
	* sysdeps/unix/sysv/sysv4/i386/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/sparc/bits/sigcontext.h: Likewise.
	* sysdeps/vax/bits/huge_val.h: Likewise.
	* sysdeps/vax/bits/setjmp.h: Likewise.
	* sysdeps/wordsize-32/bits/elfclass.h: Likewise.
	* sysdeps/wordsize-64/bits/elfclass.h: Likewise.

1997-11-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libio/stdio.h: Correct comment of sys_nerr/sys_errlist.

1997-11-25  Paul Eggert  <eggert@twinsun.com>

	* strftime.c (strftime):
	No longer any need to undef or declare if emacs is defined.
	(my_strftime): When checking a -1 returned by mktime, don't blow up
	if localtime_r returns NULL.

1997-11-24  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* README.template: Fix spelling.

1997-11-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Enhance --enable-add-ons description a wee bit.

1997-11-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* glibcbug.in: Add more information of build environment and flags.

1997-11-23  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/posix/getcwd.c: Recognize EOF from readdir and translate
	it into ENOENT.

1997-11-24 03:01  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-support.c: Call __libc_init_secure to make sure
	__libc_enable_secure is defined early.
	* sysdeps/generic/enbl-secure.c: Change function name to
	__libc_init_secure and make it global instead of a constructor.

	* iconv/gconv.c: Fix lots of bugs.
	* iconv/gconv.h: Likewise.
	* iconv/gconv_builtin.h: Likewise.
	* iconv/gconv_close.c: Likewise.
	* iconv/gconv_conf.c: Likewise.
	* iconv/gconv_db.c: Likewise.
	* iconv/gconv_dl.c: Likewise.
	* iconv/gconv_open.c: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconv/iconv.c: Likewise.
	* iconv/iconv_close.c: Likewise.
	* iconv/iconv_open.c: Likewise.

	* wcsmbs/Makefile (routines): Add wmemrtowcs and wmemrtombs.
	* wcsmbs/wchar.h: Add prototypes for wmemrtowcs and wmemrtombs.
	* wcsmbs/wmemrtombs.c: New file.
	* wcsmbs/wmemrtowcs.c: New file.

1997-11-22 19:28  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_simple.c: Fix lots of bugs.
	* iconv/iconv_open.c: Normalize names before passing them to
	__gconv_open.

	* libio/iolibio.h: Add prototypes for _IO_{new,old}_fclose.

	* libio/iopopen.c: Check for correct mode argument and punt otherwise.
	* stdio-common/test-popen.c: Add test for above change.

	* math/libm-test.c: Print test results also using %a format,
	specified in PRINTF_XEXPR macro.
	* math/test-double.c: Define PRINTF_XEXPR.
	* math/test-float.c: Likewise.
	* math/test-ldouble.c: Likewise.
	* math/test-idouble.c: Likewise.
	* math/test-ifloat.c: Likewise.
	* math/test-ildoubl.c: Likewise.

	* stdio-common/vfscanf.c: Recognize a in format specifier only as
	modifier if used before s, S, or [.  Otherwise it's the hexadecimal
	FP number format.

	* stdlib/strtod.c: Little code cleanup.

	* sysdeps/i386/Makefile: Define __LIBC_INTERNAL_MATH_INLINES for
	compiling in math subdir.

	* sysdeps/m68k/fpu/e_acos.c: Define __LIBC_INTERNAL_MATH_INLINES
	instead of __LIBC_M81_MATH_INLINES.
	* sysdeps/m68k/fpu/e_atan2.c: Likewise.
	* sysdeps/m68k/fpu/e_fmod.c: Likewise.
	* sysdeps/m68k/fpu/e_pow.c: Likewise.
	* sysdeps/m68k/fpu/e_scalb.c: Likewise.
	* sysdeps/m68k/fpu/k_cos.c: Likewise.
	* sysdeps/m68k/fpu/k_sin.c: Likewise.
	* sysdeps/m68k/fpu/k_tan.c: Likewise.
	* sysdeps/m68k/fpu/s_atan.c: Likewise.
	* sysdeps/m68k/fpu/s_ccos.c: Likewise.
	* sysdeps/m68k/fpu/s_ccosh.c: Likewise.
	* sysdeps/m68k/fpu/s_cexp.c: Likewise.
	* sysdeps/m68k/fpu/s_csin.c: Likewise.
	* sysdeps/m68k/fpu/s_csinh.c: Likewise.
	* sysdeps/m68k/fpu/s_frexp.c: Likewise.
	* sysdeps/m68k/fpu/s_ilogb.c: Likewise.
	* sysdeps/m68k/fpu/s_isinf.c: Likewise.
	* sysdeps/m68k/fpu/s_llrint.c: Likewise.
	* sysdeps/m68k/fpu/s_llrintf.c: Likewise.
	* sysdeps/m68k/fpu/s_llrintl.c: Likewise.
	* sysdeps/m68k/fpu/s_lrint.c: Likewise.
	* sysdeps/m68k/fpu/s_modf.c: Likewise.
	* sysdeps/m68k/fpu/s_remquo.c: Likewise.
	* sysdeps/m68k/fpu/s_scalbn.c: Likewise.
	* sysdeps/m68k/fpu/s_sincos.c: Likewise.
	* sysdeps/m68k/fpu/bits/mathinline.h: Define optimizations if
	__LIBC_INTERNAL_MATH_INLINES is defined.

	* sysdeps/i386/fpu/bits/mathinline.h: Define special i686 versions
	of compare macros from ISO C 9X.  Optimize generic versions a bit.
	Define __signbit inline functions and __ieee754_sqrt which can be
	used if the ompiler is fixed.

	* sysdeps/posix/sysv_signal.c: Define sysv_signal as weak alias.

1997-11-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makerules ($(common-objpfx)stub-$(subdir)): Look for
	sysdeps/generic in the whole dep file, not only in the first line.

1997-11-20  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/ieee754/bits/nan.h (__nan) [!__GNUC__]: Fix type.

1997-11-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* manual/arith.texi (Imaginary Unit): Move @end deftypevr to right
	place.

1997-11-19  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* elf/dl-error.c (_dl_signal_error): Only print colon if OBJNAME
	is non-empty.

1997-11-20 16:51  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c (malloc_update_mallinfo): Initialize struct for
	return value.

1997-11-19 21:36  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/getcwd.c: Free allocated buffer if
	readlink succeeds but the return value is too long.

	* stdio-common/printf_fphex.c: Determine sign of number correctly.

1997-11-19 02:45  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Export __divl, __reml, __divq, __remq, __divqu and
	__remqu for Alpha.

1997-11-18 23:08  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/sys/ucontext.h: Stub context file.

	* libio/iofprintf.c: Removed.  We use the stdio-common version.

	* manual/Makefile (distribute): Add stdio-fp.c.

	* sysdeps/powerpc/Dist: Add ppc-mcount.S.

	* db2/Makefile (distribute): Add include/os_func.h, README and
	mutex/tsl_parisc.s.

	* hesiod/Makefile (distribute): Add README.hesiod.

1997-11-18 22:14  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv.c: Correctly call transformation function.

	* manual/maint.texi: Document need of binutils 2.8.1.0.17.

1997-11-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/libm-ieee754/s_remquo.c (__remquo): Fix function (gave
	wrong results for e.g. remquo (3,2, &x)).
	* sysdeps/libm-ieee754/s_remquof.c (__remquof): Likewise.
	* sysdeps/libm-ieee754/s_remquol.c (__remquol): Likewise.

1997-11-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in (ld --version-script): Test if the same symbol
	maybe defined in all versions (needed by recent changes to
	libc.map and supported with binutils 2.8.1.0.17) and issue warning
	if versioning is not supported/enabled.
	(bash test): Correct test case.

	* math/libm-test.c: Added counting/reporting of number of test cases.

	* elf/Makefile ($(objpfx)rtldtbl.h): gawk is not longer required,
	use awk instead.

	* sysdeps/unix/sysv/linux/net/if.h: Add __BEGIN_DECLS/__END_DECLS.

1997-11-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/dl-load.c (_dl_init_paths): Correct __mempcpy logic.

1997-11-18 18:04  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/pty.c: Define REVOKE to use revoke function.
	Replace revoke call by use of REVOKE.
	* sysdeps/unix/sysv/linux/pty.c: New file.  Define REVOKE as
	empty and #include generic version.
	Suggested by Zack Weinberg <zack@rabi.phys.columbia.edu>.

1997-11-18 16:02  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add socket functions with __libc_* names.
	Reported by Andreas Jaeger.

1997-11-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libc.map: Tidy up (remove duplicates, sort entries).

1997-11-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* iconv/gconv.h: Add __BEGIN_DECLS/__END_DECLS.

1997-11-18 06:45  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/pty.c: Make thread safe.  Fix bug when calling
	again after successful call.
	Patch by Marc Lehmann <pcg@goof.com>.

1997-11-17  Paul Eggert  <eggert@twinsun.com>

	* time/mktime.c, time/strftime.c (_REENTRANT): #define,
	as some hosts need this to declare localtime_r properly.

1997-11-18 06:08  Ulrich Drepper  <drepper@cygnus.com>

	* libc.map: Add iconv_open, iconv, and iconv_close.

1997-11-18 02:31  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/Makefile: New file.
	* iconv/gconv.c: New file.
	* iconv/gconv.h: New file.
	* iconv/gconv_builtin.c: New file.
	* iconv/gconv_builtin.h: New file.
	* iconv/gconv_close.c: New file.
	* iconv/gconv_conf.c: New file.
	* iconv/gconv_db.c: New file.
	* iconv/gconv_dl.c: New file.
	* iconv/gconv_open.c: New file.
	* iconv/gconv_simple.c: New file.
	* iconv/iconv.c: New file.
	* iconv/iconv.h: New file.
	* iconv/iconv_close.c: New file.
	* iconv/iconv_open.c: New file.
	* include/gconv.h: New file.

	* Makeconfig: Define gconvdir.
	* Makefile (subdirs): Add iconv.

	* string/bits/string2.h: Add optimization for strtok_r.

	* sysdeps/generic/_G_config.h: Define __need_NULL to get definition
	for NULL.
	* sysdeps/unix/sysv/linux/_G_config.h: Likewise.
	Reported by H.J. Lu <hjl@gnu.ai.mit.edu>.

	* configure.in: Correct test for bash2.
	Patch by Zack Weinberg <zack@rabi.phys.columbia.edu>.

	* locale/Makefile (CFLAGS-charmap.c): Add -Wno-char-subscripts.
	(CFLAGS-locfile.c): Likewise.
	Suggested by Zack Weinberg <zack@rabi.phys.columbia.edu>.

	* misc/hsearch_r.c (hsearch_r): Avoid undefinitely search for
	non-existing entry if the table is full.

	* posix/regex.h: Pretty print.

	* stdio-common/printf_fp.c: Don't define NDEBUG if already defined.

	* sysdeps/posix/ctermid.c: Simplify a bit.

	* sysdeps/unix/sysv/linux/net/if.h: Pretty print.

1997-11-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sys/quota.h: Add include for
	<sys/types.h> instead of <asm/types.h>.

1997-11-16  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* math/libm-test.c (asin_test): Add epsilon for asin (0.5).

1997-11-16 17:09  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* libc.map (_IO_stdin_, _IO_stdout_, _IO_stderr_, _IO_fopen,
	fopen, freopen, _IO_fclose, fclose): Added to GLIBC_2.0.
	(_IO_stdin_, _IO_stdout_, _IO_stderr_): Removed from GLIBC_2.1.
	(_IO_2_1_stdin_, _IO_2_1_stdout_, _IO_2_1_stderr_, _IO_fclose,
	fclose): Added to GLIBC_2.1.

	* libio/Makefile (routines, shared-only-routines): Add
	oldiofclose.  Remove oldfreopen.

	* libio/freopen.c (freopen): When PIC is defined, call
	_IO_old_freopen () for old stdio.

	* libio/iofclose.c (_IO_new_fclose): Renamed from _IO_fclose.
	(_IO_fclose, fclose): Use _IO_new_fclose as default version
	for GLIBC_2.1.

	* libio/iolibio.h (_IO_old_freopen): Use _IO_old_file_close_it
	instead of _IO_file_close_it.

	* libio/libio.h (_IO_stdin_, _IO_stdout_, _IO_stderr_): Changed
	to _IO_2_1_stdxxx_.
	(_IO_stdin, _IO_stdout, _IO_stderr): Declare as extern if _LIBC
	is defined.

	* libio/libioP.h (_IO_old_do_flush): New.

	* libio/oldfileops.c (_IO_old_file_close_it,
	_IO_old_file_finish, _IO_old_file_overflow, _IO_old_file_sync):
	Call _IO_old_do_flush () instead of _IO_do_flush ().
	(_IO_old_file_xsputn): Call _IO_old_do_write () instead of
	_IO_do_write ().

	* libio/oldiofopen.c (_IO_old_fopen): Call _IO_old_file_init ()
	instead of _IO_file_init ().
	Bind old symbols to version GLIBC_2.0.

	* libio/oldstdfiles.c (DEF_STDFILE): Don't use symbol_version.
	(_IO_old_stdin_, _IO_old_stdout_, _IO_old_stderr_): Changed to
	_IO_stdxxx_.
	(_IO_check_libio): New function in .init.

	* libio/oldiofclose.c: New file.

	* libio/stdfiles.c (_IO_new_stdin_, _IO_new_stdout_,
	_IO_new_stderr_): Changed to _IO_2_1_stdxxx_.
	(DEF_STDFILE): Don't use default_symbol_version.

	* libio/stdio.c (stdin, stdout, stderr): Set to
	_IO_2_1_stdxxx_._
	(_IO_stdin, _IO_stdout, _IO_stderr): New, strong alias of
	stdxxx.

	* csu/Makefile (distribute): Add init.c.
	(extra-objs): Add init.o for ELF.
	(start-installed-name): Add $(objpfx)init.o.

	* csu/init.c: New file.

1997-11-12 08:02  H.J. Lu  <hjl@gnu.ai.mit.edu>

	* elf/dl-lookup.c (do_lookup): Don't use the hidden base
	definition as the default.

1997-08-27  Klaus Espenlaub  <kespenla@hydra.informatik.uni-ulm.de>

	* erand48_r.c (__erand48_r): Implement for 32 bit short int.

1997-11-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/genrtldtbl.awk: Replace gensub for compatibility with gawk2
	(PR 351).

1997-11-16 21:01  Philip Blundell  <Philip.Blundell@pobox.com>

	* sysdeps/arm/sysdep.h: Use __APCS_32__ to decide whether or not
	to preserve condition codes on function call.

1997-11-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/generic/s_exp2l.c: Change exp2l to __ieee754_exp2l.

1997-11-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (asin_test): Add epsilon for float.
	(tan_test): Add epsilon for float.
	(log1p_test): Add epsilon for float.
	(inverse_functions): Add epsilons.

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers) [socket]: Add
	net/if_packet.h.

	* sysdeps/unix/sysv/linux/Dist: Add net/if_packet.h.

1997-11-10  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* md5-crypt/Makefile (extra-objs): Make recursively expanded
	variable, since $(object-suffixes) is not defined yet.

1997-11-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* db2/Makefile (distribute): db185/db185_int.src ->
	db185/db185_int.h.

1997-11-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* misc/tst-fdset.c: Don't require the value of FD_ISSET to be
	exactly one.

1997-11-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* sysdeps/generic/e_acoshl.c: Fix stub_warning: use the user level
	name.
	* sysdeps/generic/e_acosl.c: Likewise.
	* sysdeps/generic/e_asinl.c: Likewise.
	* sysdeps/generic/e_atan2l.c: Likewise.
	* sysdeps/generic/e_expl.c: Likewise.
	* sysdeps/generic/e_fmodl.c: Likewise.
	* sysdeps/generic/e_j0l.c: Likewise.
	* sysdeps/generic/e_j1l.c: Likewise.
	* sysdeps/generic/e_jnl.c: Likewise.
	* sysdeps/generic/e_lgammal_r.c: Likewise.
	* sysdeps/generic/e_log10l.c: Likewise.
	* sysdeps/generic/e_logl.c: Likewise.
	* sysdeps/generic/e_powl.c: Likewise.
	* sysdeps/generic/e_sqrtl.c: Likewise.
	* sysdeps/generic/e_exp2l.c: Likewise.

1997-11-11  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Make-dist (+sysdep-names): Remove extra paren.
	* Makefile (distribute): Add stub-tag.h.
	* elf/Makefile (distribute): Add atomicity.h.
	* stdlib/Makefile (headers): Add ucontext.h and sys/ucontext.h.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers)
	[$(subdir)=socket]: Add net/if_packet.h.
	* sysdeps/alpha/Dist: Remove setjmp_aux.c.
	* sysdeps/unix/sysv/linux/Dist: Add s_pread64.c, s_pwrite64.c,
	net/if_packet.h, scsi/sg.h.

1997-11-13  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* Makefile (install): Quote $(CC) expansion.

1997-11-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/getcwd.c (__getcwd): Added caching of
	working /proc cwd and no restrictions on path length.  Following
	some ideas from Andi Kleen <ak@muc.de> (PR 350).

1997-11-14 19:14  Thorsten Kukuk  <kukuk@vt.uni-paderborn.de>

	* nis/nss_compat/compat-grp.c: Remove buggy assert call.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.

1997-11-14 22:23  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-i387/s_fdim.S: New file.
	* sysdeps/libm-i387/s_fdimf.S: New file.
	* sysdeps/libm-i387/s_fdiml.S: New file.
	* sysdeps/libm-i387/i686/s_fdim.S: New file.
	* sysdeps/libm-i387/i686/s_fdimf.S: New file.
	* sysdeps/libm-i387/i686/s_fdiml.S: New file.

1997-11-12  Andreas Schwab  <schwab@issan.informatik.uni-dortmund.de>

	* string/bits/string2.h (strstr): Avoid warning if HAYSTACK is a
	pointer to unsigned char.

1997-11-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/libm-ieee754/s_llrintf.c (__llrintf): Fix function.

	* sysdeps/libm-ieee754/s_lrintf.c (__lrintf): Fix function.

	* sysdeps/libm-ieee754/s_lrint.c (__lrint): Fix function.

1997-11-12  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/libm-ieee754/s_ilogbf.c: Correct return values for
	ilogb(0/NaN).
	* sysdeps/libm-ieee754/s_ilogbl.c: Likewise.
	* sysdeps/libm-ieee754/s_ilogb.c: Likewise.

1997-11-14 05:44  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-i387/s_fmin.S: New file.
	* sysdeps/libm-i387/s_fminf.S: New file.
	* sysdeps/libm-i387/s_fminl.S: New file.
	* sysdeps/libm-i387/s_fmax.S: New file.
	* sysdeps/libm-i387/s_fmaxf.S: New file.
	* sysdeps/libm-i387/s_fmaxl.S: New file.
	* sysdeps/libm-i387/i686/s_fmin.S: New file.
	* sysdeps/libm-i387/i686/s_fminf.S: New file.
	* sysdeps/libm-i387/i686/s_fminl.S: New file.
	* sysdeps/libm-i387/i686/s_fmax.S: New file.
	* sysdeps/libm-i387/i686/s_fmaxf.S: New file.
	* sysdeps/libm-i387/i686/s_fmaxl.S: New file.

1997-11-14 03:06  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/accept.S: Add __libc_accept as alias.
	* sysdeps/unix/sysv/linux/send.S: Likewise.
	* sysdeps/unix/sysv/linux/recvfrom.S: Likewise.
	* sysdeps/unix/sysv/linux/recvmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/sendmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/recv.S: Likewise.
	* sysdeps/unix/sysv/linux/sendto.S: Likewise.
	* sysdeps/unix/sysv/linux/connect.S: Likewise.
	Reported by Christopher Wiles <wileyc@ai.cs.fujitsu.co.jp>.

See ChangeLog.7 for earlier changes.
