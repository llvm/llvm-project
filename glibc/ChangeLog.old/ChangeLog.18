2017-08-02  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* version.h (RELEASE): Set to "development"
	(VERSION): Set to 2.26.90.
	* NEWS: Add 2.27 section.

	* version.h (RELEASE): Set to "stable"
	(VERSION): Set to 2.26.
	* include/features.h (__GLIBC_MINOR__): Set to 26.

	* manual/contrib.texi: Update contributors.
	* manual/install.texi: Update latest tested versions of gcc and
	binutils.
	* INSTALL: Regenerate.

	* NEWS: Add bugs fixed.

	* po/fr.po: Update translations.

2017-08-01  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* NEWS: Update security-related changes.

2017-07-30  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* po/be.po: Update translations.
	* po/ko.po: Likewise.
	* po/nl.po: Likewise.
	* po/ru.po: Likewise.

2017-07-29  Torvald Riegel  <triegel@redhat.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ 21778]
	* nptl/pthread_mutex_timedlock.c (__pthread_mutex_timedlock): Update
	oldval if the CAS fails.
	* nptl/pthread_mutex_lock.c (__pthread_mutex_lock_full): Likewise.
	* nptl/tst-mutex7.c: Add comments explaining template test.
	(ROBUST, DELAY_NSEC, ROUNDS, N): New.
	(tf, do_test): Use them.
	* nptl/tst-mutex7robust.c: New file.
	* nptl/Makefile (tests): Add new test.

2017-07-28  Nathan Rossi  <nathan@nathanrossi.com>

	[BZ #21779]
	* sysdeps/unix/sysv/linux/microblaze/pt-vfork.S: Branch using PLT.

	* sysdeps/microblaze/libm-test-ulps: Update.

2017-07-28  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/nios2/libm-test-ulps: Update.

2017-07-28  Torvald Riegel  <triegel@redhat.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #21298]
	* nptl/Makefile (tests-internal): Add tst-rwlock20.
	* nptl/pthread_rwlock_common.c (__pthread_rwlock_rdlock_full): Fix
	explicit hand-over.
	(__pthread_rwlock_wrlock_full): Likewise.
	* nptl/tst-rwlock20.c: New file.
	* support/Makefile (libsupport-routines): Add xpthread_rwlock_init,
	xpthread_rwlock_rdlock, xpthread_rwlock_unlock,
	xpthread_rwlock_wrlock, xpthread_rwlockattr_init, and
	xpthread_rwlockattr_setkind_np.
	* support/xpthread_rwlock_init.c: New file.
	* support/xpthread_rwlock_rdlock.c: New file.
	* support/xpthread_rwlock_unlock.c: New file.
	* support/xpthread_rwlock_wrlock.c: New file.
	* support/xpthread_rwlockattr_init.c: New file.
	* support/xpthread_rwlockattr_setkind_np.c: New file.
	* support/xthread.h: Add xpthread_rwlock_init, xpthread_rwlock_rdlock,
	xpthread_rwlock_unlock, xpthread_rwlock_wrlock,
	xpthread_rwlockattr_init, and xpthread_rwlockattr_setkind_np
	prototypes.

2017-07-27  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/alpha/fpu/libm-test-ulps: Update.

2017-07-27  Mike FABIAN  <mfabian@redhat.com>

	* locale/iso-639.def: add North and South Azerbaijani.

2017-07-27  Rical Jasan  <ricaljasan@pacific.net>

	* manual/lang.texi (CHAR_BIT): Convert from an @table to an
	@deftypevr.  Change standard from ISO to C90.  Mention the
	POSIX.1-2001 requirement of the value 8.

2017-07-27  Rical Jasan  <ricaljasan@pacific.net>

	* manual/creature.texi (_REENTRANT): Annotate as obsolete.
	(_THREAD_SAFE): Likewise.

2017-07-26  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* po/bg.po: Update translations.
	* po/cs.po: Likewise.
	* po/de.po: Likewise.
	* po/pl.po: Likewise.
	* po/uk.po: Likewise.
	* po/vi.po: Likewise.

2017-07-26  Mike FABIAN  <mfabian@redhat.com>

	[BZ #21828]
	* NEWS: Mention that the Unicode 10.0.0 update causes user visible changes.

2017-07-26  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* po/sv.po: Update Translation.

2017-07-25  Siddhesh Poyarekar  <siddhesh@sourceware.org>
	    Paul Eggert  <eggert@cs.ucla.edu>

	* timezone.zic (PRIdLINENO): Remove.
	(verror): Use PRIdMAX.
	* po/libc.pot: Regenerate.

2017-07-24  Adhemerval Zanella  <adhemerval.zanella@linaro.org>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21744]
	* elf/dl-tunables.c: Include not-errno.h header.
	* include/unistd.h (__access_noerrno): Remove definition.
	* sysdeps/unix/sysv/linux/access.c (__access_noerrno): Likewise.
	* sysdeps/generic/not-errno.h: New file.
	* sysdeps/unix/sysv/linux/not-errno.h: Likewise.

2017-07-24  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21752]
	* debug/fortify_fail.c (__fortify_fail_abort): Don't pass down
	__libc_argv[0] if we aren't doing backtrace.  Rename do_backtrace
	to need_backtrace.
	* sysdeps/posix/libc_fatal.c (__libc_message): Don't call
	__libc_secure_getenv if we aren't doing backtrace.

2017-07-24  Andreas Schwab  <schwab@suse.de>

	[BZ #21804]
	* sysdeps/nptl/bits/thread-shared-types.h (__PTHREAD_SPINS_DATA)
	[__PTHREAD_MUTEX_LOCK_ELISION && __WORDSIZE == 64]: Remove
	trailing semicolon.
	(struct __pthread_mutex_s): Remove semicolon after
	__PTHREAD_COMPAT_PADDING_MID and __PTHREAD_COMPAT_PADDING_END.
	* sysdeps/hppa/nptl/bits/pthreadtypes-arch.h
	(__PTHREAD_COMPAT_PADDING_MID, __PTHREAD_COMPAT_PADDING_END): Add
	semicolon.

2017-07-23  Dmitry V. Levin  <ldv@altlinux.org>

	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h [_LINUX_PTRACE_H ||
	_S390_PTRACE_H]: Undefine all PTRACE_* macro constants defined
	later as enum constants, except PTRACE_PEEKUSER, PTRACE_POKEUSER,
	and PTRACE_SEIZE_DEVEL that are not defined by Linux headers.

2017-07-23  John David Anglin  <danglin@gcc.gnu.org>

	[BZ 19170]
	* sysdeps/hppa/dl-trampoline.S (_dl_runtime_resolve): Revise comment.

2017-07-21  DJ Delorie  <dj@redhat.com>

	* nss/tst-nss-test5.c: Correct test configuration.

2017-07-21  Steve Ellcey  <sellcey@cavium.com>

	* localedata/Makefile (CFLAGS-tst_iswalnum.c, CFLAGS-tst_iswalpha.c
	CFLAGS-tst_iswcntrl.c, CFLAGS-tst_iswdigit.c, CFLAGS-tst_iswgraph.c,
	CFLAGS-tst_iswlower.c, CFLAGS-tst_iswprint.c, CFLAGS-tst_iswpunct.c,
	CFLAGS-tst_iswspace.c, CFLAGS-tst_iswupper.c, CFLAGS-tst_iswxdigit.c,
	CFLAGS-tst_towlower.c, CFLAGS-tst_towupper.c): New macros.

2017-07-21  Steve Ellcey  <sellcey@cavium.com>

	* nss/nss_test1.c (default_npwd_data): Fix definition.

2017-07-21  Steve Ellcey  <sellcey@cavium.com>

	* sysdeps/ieee754/ldbl-128/e_expl.c (__ieee754_expl): Call
	math_force_eval.

2017-07-19  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/unix/sysv/linux/alpha/clone.S (__clone): Fix argument
	passing to syscall exit.

2017-07-19  DJ Delorie  <dj@delorie.com>

	[BZ #21654]
	* grp/grp-merge.c (libc_hidden_def): Fix cast-after-dereference.

2017-07-19  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21741]
	* sysdeps/i386/i686/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Test memmove_chk and memset_chk only
	in libc.so.

2017-07-19  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21740]
	* debug/Makefile (elide-routines.o): New.

2017-07-19  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/unix/sysv/linux/aarch64/dl-procinfo.c:
	(_dl_aarch64_cap_flags): Update.
	* sysdeps/unix/sysv/linux/aarch64/dl-procinfo.h
	(_DL_HWCAP_COUNT, _DL_HWCAP_LAST): Update.

2017-07-18  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/unix/sysv/linux/aarch64/dl-procinfo.h (_dl_procinfo): Revert.
	(_dl_hwcap_string): Check range.

2017-07-17  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #21707]
	* csu/libc-start.c (LIBC_START_MAIN): Perform IREL{,A}
	relocations before or after initializing the TCB on statically
	linked executables.  That's a per-architecture definition.
	* elf/rtld.c (dl_main): Add a comment about thread-local
	variables initialization.
	* sysdeps/generic/libc-start.h: New file.  Define
	ARCH_APPLY_IREL and ARCH_SETUP_IREL.
	* sysdeps/powerpc/Makefile:
	[$(subdir) = elf && $(multi-arch) != no] (tests-static-internal): Add
	tst-tlsifunc-static.
	[$(subdir) = elf && $(multi-arch) != no && $(build-shared) == yes]
	(tests-internal): Add tst-tlsifunc.
	* sysdeps/powerpc/tst-tlsifunc.c: New file.
	* sysdeps/powerpc/tst-tlsifunc-static.c: Likewise.
	* sysdeps/powerpc/powerpc64le/Makefile (f128-loader-link): New
	variable.
	[$(subdir) = math] (test-float128% test-ifloat128%): Force
	linking to the loader after linking to libgcc.
	[$(subdir) = wcsmbs || $(subdir) = stdlib] (bug-strtod bug-strtod2)
	(bug-strtod2 tst-strtod-round tst-wcstod-round tst-strtod6 tst-strrom)
	(tst-strfrom-locale strfrom-skeleton): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.h: New file.  Define
	ARCH_APPLY_IREL and ARCH_SETUP_IREL.

2017-07-17  DJ Delorie  <dj@redhat.com>

	* nss/nss_test.h: New.
	* nss/nss_test1.h: Rewrite to use test-provided data.  Add group
	tests.  Parameterize to allow multiple instances.
	* nss/nss_test2.h: New.  Second instance.
	* nss/nss_test.ver: New.
	* nss/nss_test1.c: Update to use new framework.
	* nss/nss_test2.c: New.
	* nss/nss_test3.c: New.
	* nss/nss_test4.c: New.
	* nss/nss_test5.c: New.
	* nss/Makefile: Build new tests.
	* shlib-versions: Add libnss_test2.

2017-07-17  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21512]
	* sysdeps/unix/sysv/linux/hppa/clone.S (__clone): Fix argument
	passing to syscall exit.

2017-07-17  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/unix/sysv/linux/aarch64/bits/hwcap.h (HWCAP_FCMA): New macro.
	(HWCAP_JSCVT, HWCAP_LRCPC): Likewise.

2017-07-16  John David Anglin  <danglin@gcc.gnu.org>

	* sysdeps/hppa/dl-trampoline.S (_dl_runtime_resolve): Return to caller
	if _dl_fixup fails.

	* sysdeps/unix/sysv/linux/hppa/clone.S (__clone): Add .cfi annotation.
	* sysdeps/unix/sysv/linux/hppa/getcontext.S (__getcontext): Likewise.
	* sysdeps/unix/sysv/linux/hppa/pt-vfork.S (__vfork): Likewise.
	* sysdeps/unix/sysv/linux/hppa/setcontext.S (__setcontext): Likewise.

	* sysdeps/unix/sysv/linux/hppa/getcontext.S (__getcontext): Fix stack
	offset for r19 load.

	* sysdeps/unix/sysv/linux/hppa/setcontext.S (__setcontext): Return 0.

	* sysdeps/unix/sysv/linux/hppa/sysdep-cancel.h (PSEUDO): Fix CFA offset.
	Use .cfi_def_cfa_offset instead of .cfi_offset.  Don't record stack
	pointer offset.  Correct PIC register offset.  Don't mention frame
	related instructions in epilogue.
	(PUSHARGS_1): Correct offset.
	(PUSHARGS_2): Likewise.
	(PUSHARGS_3): Likewise.
	(PUSHARGS_4): Likewise.
	(PUSHARGS_5): Likewise.
	(PUSHARGS_6): Likewise.
	(POPARGS_1): Don't mention register restore.
	(POPARGS_2): Likewise.
	(POPARGS_3): Likewise.
	(POPARGS_4): Likewise.
	(POPARGS_5): Likewise.
	(POPARGS_6): Likewise.
	* sysdeps/unix/sysv/linux/hppa/sysdep.h (SAVE_PIC): Don't mention
	copy of PIC register.
	(LOAD_PIC): Likewise don't mention restore.
	(DO_CALL): Fix CFA offset.  Use .cfi_def_cfa_offset instead of
	.cfi_offset.  Don't record stack pointer offset.  Correct PIC register
	offset.  Don't mention frame related instructions in epilogue.

	* sysdeps/unix/sysv/linux/hppa/localplt.data: Remove _exit entry.

	* sysdeps/hppa/__longjmp.c (__longjmp): Remove extra braces.

	[BZ 20098]
	* sysdeps/hppa/dl-fptr.c (_dl_read_access_allowed): New.
	(_dl_lookup_address): Return address if it is not consistent with
	being a linker defined function pointer.  Likewise, return address
	if address and function descriptor addresses are not accessible.

2017-07-16  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* po/libc.pot: Regenerate.

2017-07-15  John David Anglin  <danglin@gcc.gnu.org>

	[BZ locale/19838]
	* sysdeps/unix/sysv/linux/hppa/bits/shm.h (SHMLBA): Set to page size.

	* nptl/allocatestack.c (allocate_stack): Align old and new guard
	addresses to page boundaries when the stack grows up.

	* sysdeps/hppa/math-tests.h: New.

2017-07-14  DJ Delorie  <dj@redhat.com>

	[BZ #21654]
	* grp/grp_merge.c (__copy_grp): Align char** to minimum pointer
	alignment not char alignment.
	(__merge_grp): Likewise.

2017-07-14  Szabolcs Nagy  <szabolcs.nagy@arm.com>
	    Florian Weimer  <fweimer@redhat.com>

	* libio/memstream.c (__open_memstream): Set _IO_FLAGS2_NEED_LOCK.
	* libio/wmemstream.c (open_wmemstream): Likewise.
	* nptl/tst-memstream.c: New.

2017-07-12  Jiong Wang  <jiong.wang@arm.com>

	* sysdeps/arm/dl-machine.h (elf_machine_load_address):  Also strip bit 0
	of pcrel_address under Thumb mode.

2017-07-12  Akhilesh Kumar <akhilesh.k@samsung.com>

	[BZ #21207]
	* locale/iso-639.def: Add Fiji Hindi (hif).

2017-07-12  John David Anglin  <danglin@gcc.gnu.org>

	* sysdeps/hppa/dl-machine.h (elf_machine_rela): Fix typo.

2017-07-12  H.J. Lu  <hongjiu.lu@intel.com>

	* debug/Makefile (CFLAGS-tst-ssp-1.c): Set to
	-fstack-protector-all.

2017-07-11  Chris Leonard <cjl@sugarlabs.org>

	[BZ #20496]
	* locale/iso-639.def: Add Awaj√∫n / Aguaruna (agr).

2017-07-11  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64le/Makefile: Use $(all-object-suffixes)
	to iterate over all possible object suffixes.  Add a comment
	explaining the use of sysdep-CFLAGS instead of CFLAGS.

2017-07-11  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12189]
	* debug/Makefile (CFLAGS-tst-ssp-1.c): New.
	(tests): Add tst-ssp-1 if -fstack-protector works.
	* debug/fortify_fail.c: Include <stdbool.h>.
	(_fortify_fail_abort): New function.
	(__fortify_fail): Call _fortify_fail_abort.
	(__fortify_fail_abort): Add a hidden definition.
	* debug/stack_chk_fail.c: Include <stdbool.h>.
	(__stack_chk_fail): Call __fortify_fail_abort, instead of
	__fortify_fail.
	* debug/tst-ssp-1.c: New file.
	* include/stdio.h (__libc_message_action): New enum.
	(__libc_message): Replace int with enum __libc_message_action.
	(__fortify_fail_abort): New hidden prototype.
	* malloc/malloc.c (malloc_printerr): Update __libc_message calls.
	* sysdeps/posix/libc_fatal.c (__libc_message): Replace int
	with enum __libc_message_action.  Call BEFORE_ABORT only if
	action includes do_backtrace.
	(__libc_fatal): Update __libc_message call.

2017-07-11  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21738]
	* manual/llio.texi (RWF_NOWAIT): New item.
	* misc/tst-preadvwritev2-common.c (do_test_with_invalid_flags):
	Add RWF_NOWAIT check.
	* sysdeps/unix/sysv/linux/bits/uio-ext.h (RWF_NOWAIT): New flag.

2017-07-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/tst-ptrace-singleblock.c:
	Support running on kernels without PTRACE_SINGLEBLOCK.

2017-07-10  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21742]
	* elf/Makefile (dl-routines): Move dl-conflict to ...
	(rtld-routines): Here.

2017-07-10  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21741]
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Test memmove_chk and memset_chk only
	in libc.so.

2017-07-09  John David Anglin  <danglin@gcc.gnu.org>

	* sysdeps/hppa/fpu/libm-test-ulps: Update.

	[BZ #21016]
	* sysdeps/nptl/bits/thread-shared-types.h (struct __pthread_mutex_s):
	Fix typo.
	* sysdeps/unix/sysv/linux/hppa/pthread.h: Include
	bits/types/struct_timespec.h.
	(PTHREAD_MUTEX_INITIALIZER): Revise define.
	(PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP): Likewise.
	(PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP): Likewise.
	(PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP): Likewise.
	(PTHREAD_RWLOCK_INITIALIZER): Likewise.
	(PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP): Likewise.
	(PTHREAD_COND_INITIALIZER): Likewise.
	Remove old definitions.
	* sysdeps/unix/sysv/linux/hppa/internaltypes.h: Delete.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_broadcast.c: Delete.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_destroy.c: Delete.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_init.c: Delete.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_signal.c: Delete.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_wait.c: Delete.

2017-07-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcmp.c: Update comments.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/memrchr.c: Likewise.
	* sysdeps/x86_64/multiarch/memset.c: Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr.c: Likewise.
	* sysdeps/x86_64/multiarch/strchrnul.c: Likewise.
	* sysdeps/x86_64/multiarch/strlen.c: Likewise.
	* sysdeps/x86_64/multiarch/strnlen.c: Likewise.
	* sysdeps/x86_64/multiarch/wcschr.c: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy.c: Likewise.
	* sysdeps/x86_64/multiarch/wcslen.c: Likewise.
	* sysdeps/x86_64/multiarch/wcsnlen.c: Likewise.
	* sysdeps/x86_64/multiarch/wmemchr.c: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp.c: Likewise.
	* sysdeps/x86_64/multiarch/wmemset.c: Likewise.
	* sysdeps/x86_64/multiarch/wmemset_chk.c: Likewise.

2017-07-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Update comments.

2017-07-09  Helge Deller  <deller@gmx.de>

	[BZ #21049]
	* sysdeps/hppa/__longjmp.c (__longjmp): Move call to CHECK_SP
	up to avoid clobbering r26.

2017-07-08  Andreas Schwab  <schwab@linux-m68k.org>

	* scripts/build-many-glibcs.py (Glibc.build_glibc): Also build
	profiled objects.

2017-07-06  DJ Delorie  <dj@redhat.com>

	* manual/tunables.texi: Add missing @end deftp.

2017-07-06  Florian Weimer  <fw@deneb.enyo.de>

	* resolv/tst-resolv-basic.c (test_bug_21295): New function.
	(do_test): Call it.

2017-07-06  DJ Delorie  <dj@redhat.com>

	* config.make.in: Enable experimental malloc option.
	* configure.ac: Likewise.
	* configure: Regenerate.
	* manual/install.texi: Document it.
	* INSTALL: Regenerate.
	* malloc/Makefile: Likewise.
	* malloc/malloc.c: Add per-thread cache (tcache).
	(tcache_put): New.
	(tcache_get): New.
	(tcache_thread_freeres): New.
	(tcache_init): New.
	(__libc_malloc): Use cached chunks if available.
	(__libc_free): Initialize tcache if needed.
	(__libc_realloc): Likewise.
	(__libc_calloc): Likewise.
	(_int_malloc): Prefill tcache when appropriate.
	(_int_free): Likewise.
	(do_set_tcache_max): New.
	(do_set_tcache_count): New.
	(do_set_tcache_unsorted_limit): New.
	* manual/probes.texi: Document new probes.
	* malloc/arena.c: Add new tcache tunables.
	* elf/dl-tunables.list: Likewise.
	* manual/tunables.texi: Document them.
	* NEWS: Mention the per-thread cache.

2017-07-06  Joseph Myers  <joseph@codesourcery.com>

	* iconvdata/tst-loading.c (TIMEOUT): Define to 30.
	* misc/tst-tsearch.c (TIMEOUT): Remove.
	* nptl/tst-create-detached.c (TIMEOUT): Define to 100.
	* nptl/tst-robust-fork.c (TIMEOUT): Likewise.
	* nptl/tst-rwlock19.c (TIMEOUT): Likewise.
	* string/tst-cmp.c (TIMEOUT): Define to 600.

2017-07-06  Matthew Krupcale  <mkrupcale@matthewkrupcale.com>

	[BZ #21715]
	* sysdeps/nptl/bits/pthreadtypes.h (__have_pthread_attr_t): Fix typo
	on definition.

2017-07-06  Florian Weimer  <fweimer@redhat.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21609]
	* sysdeps/x86_64/Makefile (sysdep-dl-routines): Add tls_get_addr.
	(gen-as-const-headers): Add rtld-offsets.sym.
	* sysdeps/x86_64/dl-tls.c: New file.
	* sysdeps/x86_64/rtld-offsets.sym: Likwise.
	* sysdeps/x86_64/tls_get_addr.S: Likewise.
	* sysdeps/x86_64/dl-tls.h: Add multiple inclusion guards.
	* sysdeps/x86_64/tlsdesc.sym (TI_MODULE_OFFSET): New.
	(TI_OFFSET_OFFSET): Likwise.

2017-07-05  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ# 21697]
	* sysdeps/posix/spawni.c (__spawni_child): Fix return value.

2017-07-05  Florian Weimer  <fweimer@redhat.com>

	* resolv/Makefile (tests-internal): Add tst-resolv-threads.
	(tst-resolv-threads): Link with -ldl, -lresolv, -lpthread.
	* resolv/tst-resolv-threads.c: New file.

2017-07-05  Florian Weimer  <fweimer@redhat.com>

	support: Add resolver testing mode which does not patch _res.
	* support/resolv_test.h (struct resolv_redirect_config): Add
	disable_redirect, server_address_overrides.
	* support/resolv_test.c (make_server_sockets_for_address): New
	function.
	(resolv_test_start): Call it.

2017-07-05  Florian Weimer  <fweimer@redhat.com>

	* support/namespace.h (struct support_chroot_configuration)
	(struct support_chroot): Define.
	(support_chroot_create, support_chroot_free): New functions.
	* support/support_chroot.c: New file.
	* support/Makefile (libsupport-routines): Add support_chroot.
	* resolv/tst-resolv-res_init-skeleton.c (path_chroot)
	(path_resolv_conf): Remove definitions.
	(chroot_env): New variable.
	(prepare): Call support_chroot_create.
	(check_chroot_working, setup_nss_dns_and_chroot, run_res_init)
	(special_test_callback, do_test): Likewise.

2017-07-05  Florian Weimer  <fweimer@redhat.com>

	Add subtest to check isolation of multiple loopback addresses.
	* support/tst-support-namespace.c (test_localhost_bind): New function.
	(do_test): Call it.

2017-07-04  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* libio/libio.h (_IO_FLAGS2_NEED_LOCK, _IO_need_lock): Define.
	* libio/libioP.h (_IO_enable_locks): Declare.
	* libio/Versions (_IO_enable_locks): New symbol.
	* libio/genops.c (_IO_enable_locks): Define.
	(_IO_old_init): Initialize flags2.
	* libio/feof.c.c (_IO_feof): Avoid locking when not needed.
	* libio/ferror.c (_IO_ferror): Likewise.
	* libio/fputc.c (fputc): Likewise.
	* libio/putc.c (_IO_putc): Likewise.
	* libio/getc.c (_IO_getc): Likewise.
	* libio/getchar.c (getchar): Likewise.
	* libio/ioungetc.c (_IO_ungetc): Likewise.
	* nptl/pthread_create.c (__pthread_create_2_1): Enable stdio locks.
	* libio/iofopncook.c (_IO_fopencookie): Enable locking for the file.
	* sysdeps/pthread/flockfile.c (__flockfile): Likewise.

2017-07-04  Florian Weimer  <fweimer@redhat.com>

	[BZ #21542]
	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Default to
	two if no accurate information is available.
	* posix/tst-sysconf-empty-chroot.c: New file.
	* posix/Makefile (tests): Add it.

2017-07-04  Florian Weimer  <fweimer@redhat.com>

	* resolv/resolv_conf.c (resolv_conf_matches): Tighten check for name
	server and sort list counts.  Fix improper check for empty search
	path (completely missing domain name) leading to assertion failure
	in update_from_conf.
	* resolv/tst-resolv-res_init-skeleton.c (struct test_case): Add
	hostname member.
	(run_res_init): Set host name if requested.
	(test_cases): Update.

2017-07-04  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Context.checkout): Default
	binutils version to 2.29 branch, GMP version to 6.1.2 and Linux
	kernel version to 4.12.

2017-07-04  Florian Weimer  <fweimer@redhat.com>

	* resolv/resolv_conf.c (struct resolv_conf_global): Clarify free
	list management and the role of free_list_start.
	(decrement_at_index): Put zero at the end of the free list.
	(__resolv_conf_attach): Fix bogus assert.
	* resolv/Makefile (tests): Add tst-resolv-res_init-multi.
	(tst-resolv-res_init-multi): Link with -lresolv, -lpthread.

2017-07-03  Florian Weimer  <fweimer@redhat.com>

	resolv: Introduce free list for resolv_conf index slosts.
	* resolv/resolv_conf.c (struct resolv_conf_array): Change element
	type to uintptr_t.
	(struct resolv_conf_global): Add free_list_start member.
	(resolv_conf_get_1): Check for free list entry.
	(decrement_at_index): Put freed slot on the free list.
	(__resolv_conf_attach): Obtain new slot from the free list.
	* resolv/tst-resolv-res_ninit.c: New file.
	* resolv/Makefile (tests-internal): Add tst-resolv-res_ninit.
	(tests-special): Add mtrace-tst-resolv-res_ninit.out.
	(generated): Add mtrace-tst-resolv-res_ninit.out,
	tst-resolv-res_ninit.mtrace.
	(mtrace-tst-resolv-res_ninit.out): Add target.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	[BZ #984]
	Reload /etc/resolv.conf if has been changed on disk.
	* resolv/resolv_conf.h (resolv_conf): Remove initstamp member.
	(__resolv_conf_load, __resolv_conf_get_current): Declare.
	* resolv/resolv_conf.c (struct resolv_conf_global): Add
	conf_current, conf_mtime, conf_ctime, conf_size, conf_ino members.
	(__resolv_conf_get_current): New function.
	(__resolv_conf_allocate): Do not initialize initstamp.
	(freeres): Deallocate global->conf_current.
	* resolv/resolv.h (RES_NORELOAD): Define.
	* resolv/res_debug.c (p_option): Add RES_NORELOAD.
	* resolv/resolv-internal.h (__res_initstamp): Remove declaration.
	* resolv/resolv_context.c (replicated_configuration_matches): New.
	(maybe_init): Call it.  Use __resolv_conf_get_current to obtain
	the current configration.
	* resolv/res_init.c (__res_initstamp): Remove variable definition.
	(has_preinit_values): New function.
	(__resolv_conf_load): Renamed from __res_vinit.  Drop res_state
	parameter and do not call __resolv_conf_attach.
	(__res_vinit): Reimplement based __resolv_conf_load.
	(res_options): Handle no-reload.
	* resolv/res_libc.c (atomicinclock, atomicincunlock, atomicinc)
	(lock): Remove.
	(res_int): Do not update __res_initstamp.
	* resolv/tst-resolv-res_init-skeleton.c (print_resp): Handle
	RES_NORELOAD.
	(test_cases): Test no-reload.
	(special_test_call_res_init): Remove.
	(special_test_callback): Rely on automated reloading.  Add tests
	for no-reload.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	Mirror the entire resolver configuration in struct resolv_conf.
	* resolv/resolv_context.h (__resolv_context_nameserver_count)
	(__resolv_context_nameserver): New functions.
	(__resolv_context_sort_count, __resolv_context_sort_entry):
	Likewise.
	* resolv/nss_dns/dns-host.c (getanswer_r): Add struct
	resolv_context parameter.
	(gethostbyname3_context, _nss_dns_gethostbyaddr2_r): Adjust.
	(addrsort): Switch to struct resolv_context.
	* resolv/resolv_conf.h (struct resolv_sortlist_entry): Define.
	(struct resolv_conf): Add nameserver_list, nameserver_list_size,
	sort_list, sort_list_size, options, retrans, retry, ndots members.
	* resolv/resolv_conf.c (same_address_v4, same_address_v6)
	(same_address): New functions.
	(resolv_conf_matches): Compare the new array members.
	(__resolv_conf_allocate): Allocate and copy the new array members.
	(update_from_conf): Copy the entire configuration.
	* resolv/res_init.c (struct nameserver_list, struct sort_list):
	Define using dynarray.
	(struct resolv_conf_parser): Add nameserver_list, sort_list,
	template members.
	(resolv_conf_parser_init): Add preinit argument.  Initialize the
	new members.
	(resolv_conf_parser_free): Deallocate the new arrays.
	(allocate_address_v4): New function.
	(res_setoptions): Switch to struct resolv_conf_parser * parameter.
	(res_vinit_1): Drop res_state parameter.  Write all parsed date to
	the parser object instead.  Use allocate_address_v4 to allocate
	IPv4 addresses.
	(__res_vinit): Adjust.
	* resolv/tst-resolv-res_init-skeleton.c (print_resp): Print the
	extended name server list.
	(test_cases): Adjust.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	[BZ #19569]
	[BZ #21475]
	Support an arbitrary number of search domains.
	* resolv/resolv_context.h (__resolv_context_search_list): New.
	* resolv/resolv_conf.h (struct resolv_conf): Add search_list,
	search_list_size members.
	* resolv/resolv_conf.c (resolv_conf_matches): Compare search list.
	(__resolv_conf_allocate): Allocate and and copy search list.
	(update_from_conf): Copy the search list.
	* resolv/res_init.c (struct search_list): Define using dynarray.
	(struct resolv_conf_parser): Define.
	(resolv_conf_parser_init, resolv_conf_parser_free)
	(domain_from_hostname): New functions.
	(res_vinit_1): Add struct resolv_conf_parser * parameter.  Use
	struct search_list to collect search list entries.  Call
	domain_from_hostname to obtain the fallback domain name.
	(__res_vinit): Create and destroy parser object.  Pass search list
	to __resolv_conf_allocate.
	* resolv/res_query.c (__res_context_search): Use
	__resolv_context_search_list to obtain search list entries.
	* resolv/tst-resolv-res_init-skeleton.c (print_resp): Print data
	from extended resolver context.
	(test_cases): Update.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	Add extended resolver state/configuration (struct resolv_conf).
	* resolv/resolv_conf.h, resolv/resolv_conf.c: New files.
	* resolv/res-close.c (__res_iclose): Call __resolv_conf_detach.
	* resolv/res_init.c (res_vinit_1): Do not initialize initstamp.
	(__res_vinit): Call __resolv_conf_allocate and
	__resolv_conf_attach.
	* resolv/resolv_context.h (struct resolv_context): Add conf member
	of type struct resolv_conf.
	* resolv/resolv_context.c (maybe_init): Get initstamp from struct
	resolv_conf.  Update conf member after initialization.
	* resolv/Makefile (routines): Add resolv_conf.
	* resolv/bits/types/res_state.h [_LIBC] (struct __res_state):
	Rename _u._ext.initstamp to _u._ext.__glibc_extension_index.
	[!_LIBC] (struct __res_state): Rename _u._ext._initstamp to
	_u._ext.__glibc_reserved.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	[BZ #21668]
	Introduce temporary resolver contexts (struct resolv_conf).
	* resolv/resolv-internal.h (__res_context_mkquery)
	(__res_context_searchl __res_context_query, __res_context_send)
	(__res_context_hostalias): Declare.
	(__res_nopt): Switch to struct resolv_context.
	* resolv/res_use_inet6.h: New file.
	* resolv/resolv_context.h: Likewise.
	* resolv/resolv_context.c: Likewise.
	* resolv/compat-gethnamaddr.c (res_gethostbyname2_context):
	Renamed from res_gethostbyname2.  Use struct resolv_context.
	(res_gethostbyname2): New function.  Implement using
	res_gethostbyname2_context.
	(res_gethostbyaddr_context): Renamed from res_gethostbyaddr.  Use
	struct resolv_context.
	(res_gethostbyaddr): New function.  Implement using
	res_gethostbyaddr_context.
	* resolv/nss_dns/dns-canon.c (_nss_dns_getcanonname_r): Use struct
	resolv_context.
	* resolv/nss_dns/dns-host.c (gethostbyname3_context): Renamed from
	_nss_dns_gethostbyname3_r.  Use struct resolv_context.
	(_nss_dns_gethostbyname3_r): Implement using gethostbyname3_context.
	(_nss_dns_gethostbyname_r, _nss_dns_gethostbyname4_r): Likewise.
	(_nss_dns_gethostbyaddr2_r): Use struct resolv_context.
	* resolv/nss_dns/dns-network.c (_nss_dns_getnetbyname_r)
	(_nss_dns_getnetbyaddr_r): Likewise.
	* resolv/res-close.c (res_thread_freeres): Call
	__resolv_context_freeres.
	* resolv/res_libc.c (__res_maybe_init): Remove function.  Moved to
	maybe_init in resolv/resolv_context.c.
	* resolv/res_mkquery.c (__res_context_mkquery): Rename from
	res_nmkquery.  Use struct resolv_context.
	(context_mkquery_common): New function.
	(res_nmkquery, res_mkquery): Use it.
	(res_nopt): Switch to struct resolv_context.
	* resolv/res_query.c (__res_context_querydomain): Renamed from
	__libc_res_nquerydomain.  Use struct resolv_context.
	(__res_context_query): Renamed from __libc_res_nquery.  Use struct
	resolv_context.
	(context_query_common): New function.
	(res_nquery, res_query): Use it.
	(__res_context_search): Renamed from __libc_res_nsearch.  Use
	struct resolv_context.
	(context_search_common): New function.
	(res_nsearch, res_search): Use it.
	(__res_context_querydomain): Rename from __libc_res_nquerydomain.
	Use struct resolv_context.
	(context_querydomain_common): New function.
	(res_nquerydomain, res_querydomain): Use it.
	(__res_context_hostalias): Rename from res_hostalias.  Use struct
	resolv_context.
	(context_hostalias_common): New function.
	(res_hostalias, hostalias): Use it.
	* resolv/res_send.c (__res_context_send): Renamed from
	__libc_res_nsend.  Use struct resolv_context.
	(context_send_common): New function.
	(res_nsend, res_send): Use it.
	* resolv/Makefile (routines): Add resolv_context.
	* resolv/Versions (libc): Export __resolv_context_get,
	__resolv_context_get_preinit, __resolv_context_get_override,
	__resolv_context_put.  Remove __res_maybe_init.
	(libresolv): Export __res_context_query, __res_context_search,
	__res_context_hostalias.  Remove __libc_res_nquery,
	__libc_res_nsearch.
	* include/resolv.h (__res_maybe_init, __libc_res_nquery)
	(__libc_res_nsearch, __libc_res_nsend): Remove declaration.
	(__hostalias, __res_nmkquery, __res_nquery, __res_nquerydomain)
	(__res_hostalias, __res_nsearch, __res_nsend): Remove hidden
	prototypes.
	* nss/nsswitch.h (__nss_hostname_digits_dots_context): Declare.
	* nss/digits_dots.c (__nss_hostname_digits_dots_context): Renamed
	from __nss_hostname_digits_dots.  Use struct resolv_context.
	(__nss_hostname_digits_dots): New function.
	* nss/getXXbyYY.c [HANDLE_DIGITS_DOTS] (FUNCTION_NAME): Acquire
	struct resolv_context object.  Call new function
	__nss_hostname_digits_dots_context.
	* nss/getXXbyYY_r.c (REENTRANT_NAME): Use struct resolv_context.
	* nss/getnssent_r.c (__nss_setent): Likewise.
	* nscd/aicache.c (addhstaiX): Use struct resolv_context,
	__resolv_context_disable_inet6 and __resolv_context_enable_inet6
	instead of direct _res manipulation.
	* sysdeps/posix/getaddrinfo.c (gethosts, gaih_inet): Likewise.

2017-07-03  Florian Weimer  <fweimer@redhat.com>

	* resolv/tst-resolv-res_init-skeleton.c
	(special_tests_count, special_test_call_res_init)
	(special_test_callback, special_test_thread_func)
	(run_special_test_on_thread, special_test): Define.
	(do_test): call special_test.
	(test_init_names): Fix typo.

2017-07-03  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/strlen.S: Remove unreachable code.
	* sysdeps/powerpc/powerpc64/power8/strnlen.S: Likewise.

2017-07-01  Florian Weimer  <fweimer@redhat.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21696]
	* posix/sched_cpucount.c: Don't include <limits.h>.
	(__sched_cpucount): Use __builtin_popcount.

2017-07-01  Ramana Radhakrishnan  <ramana.gcc@googlemail.com>

	* sysdeps/unix/sysv/aarch64/cpu-features.c (init_cpu_features):
	Fix typo.

2017-06-30  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* include/math.h (__signbitf128): Define as hidden.
	* sysdeps/ieee754/float128/s_signbitf128.c (__signbitf128):
	Reimplement without builtins.
	* sysdeps/ia64/bits/floatn.h [!__GNUC_PREREQ (6, 0)]
	(__builtin_signbitf128): Define to __signbitf128.
	* sysdeps/powerpc/bits/floatn.h: Likewise.
	* sysdeps/x86/bits/floatn.h: Likewise.

2017-06-30  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/arm/fcntl.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/hppa/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/fcntl.c (do_fcntl): Rename to
	fcntl_common and add check for F_GETOWN.
	(__libc_fcntl): Use SYSCALL_CANCEL macro.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fcntl.c: Refactor to
	use default implementation.

2017-06-30  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* elf/dl-tunables.h (tunable_is_name): Move from...
	* elf/dl-tunables.c (is_name): ... here.
	(parse_tunables, __tunables_init): Adjust.
	* manual/tunables.texi: Document glibc.tune.cpu.
	* sysdeps/aarch64/dl-tunables.list: New file.
	* sysdeps/unix/sysv/linux/aarch64/cpu-features.c (struct
	cpu_list): New type.
	(cpu_list): New list of CPU names and their MIDR.
	(get_midr_from_mcpu): New function.
	(init_cpu_features): Override MIDR if necessary.

	* sysdeps/aarch64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Unconditionally select thunderx
	routine for testing.

2017-06-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21120]
	* malloc/malloc-internal.h (MALLOC_ALIGNMENT): Moved to ...
	* sysdeps/generic/malloc-alignment.h: Here.  New file.
	* sysdeps/i386/malloc-alignment.h: Likewise.
	* sysdeps/generic/malloc-machine.h: Include <malloc-alignment.h>.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/tst-resolv-res_init-skeleton.c (test_init_names): New
	variable.
	(test_file_contents): Use it.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c (res_setoptions): Remove source argument.
	(res_vinit_1): Adjust.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_query.c (DEBUG): Remove preprocessor conditional.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_data.c: Reformat to GNU style.
	(res_close): Update comments.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_data.c (res_query, res_search, res_querydomain)
	(hostalias): Move to ...
	* resolv/res_Send.c (res_query, res_search, res_querydomain)
	(hostalias): here.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_data.c (res_isourserver, res_send): Move to ...
	* resolv/res_send.c (res_isourserver, res_send): here.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_debug.c (_res_opcodes): Rename ...
	(res_opcodes): ... as compatibility symbol.
	(fp_nquery): Use res_opcodes.
	* include/resolv.h (_res_opcodes): Remove declaration.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* include/resolv.h (res_pquery): Remove declaration.
	* resolv/res_data.c (fp_nquery, fp_query, p_query): Remove
	functions.
	(_res_opcodes): Remove variable.
	* resolv/res_debug.c (do_section): Receive pfcode instead of
	statp.
	(res_pquery): Rename ...
	(fp_nquery): to this function.  Skip unnecessary _res
	initialization.
	(fp_query, p_query, _res_opcodes): Copied from resolv/res_data.c.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_debug.h: Remove file.
	* resolv/README: Adjust.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_end.c (DEBUG): Remove macro and preprocessor
	conditionals.
	(Aerror, Perror): Remove function definitions.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_data.c (res_mkquery): Move ...
	* resolv/res_mkquery.c (res_mkquery): to here.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_mkquery.c: Reformat to GNU style.
	(T_OPT): Remove definition.  It is present in the header file.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_mkquery.c (DEBUG): Remove macro and preprocessor
	conditionals.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	* support/support_capture_subprocess_check.c
	(support_capture_subprocess_check): Report actual exit status.

2017-06-30  Florian Weimer  <fweimer@redhat.com>

	[BZ #19570]
	* resolv/res_send.c (nameserver_offset): New function.
	(__libc_res_nsend): Use it to implement RES_ROTATE.
	(get_nsaddr): Add assert with name server
	range check.
	* resolv/Makefile (xtests): Add tst-resolv-rotate.
	(tst-resolv-rotate): Link against libpthread.
	* resolv/tst-resolv-rotate.c: New file.

2017-06-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21457]
	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h (__ctx): New macro.
	[__WORDSIZE == 64] (MC_TSTATE): Define only for [__USE_MISC].
	[__WORDSIZE == 64] (MC_PC): Likewise.
	[__WORDSIZE == 64] (MC_NPC): Likewise.
	[__WORDSIZE == 64] (MC_Y): Likewise.
	[__WORDSIZE == 64] (MC_G1): Likewise.
	[__WORDSIZE == 64] (MC_G2): Likewise.
	[__WORDSIZE == 64] (MC_G3): Likewise.
	[__WORDSIZE == 64] (MC_G4): Likewise.
	[__WORDSIZE == 64] (MC_G5): Likewise.
	[__WORDSIZE == 64] (MC_G6): Likewise.
	[__WORDSIZE == 64] (MC_G7): Likewise.
	[__WORDSIZE == 64] (MC_O0): Likewise.
	[__WORDSIZE == 64] (MC_O1): Likewise.
	[__WORDSIZE == 64] (MC_O2): Likewise.
	[__WORDSIZE == 64] (MC_O3): Likewise.
	[__WORDSIZE == 64] (MC_O4): Likewise.
	[__WORDSIZE == 64] (MC_O5): Likewise.
	[__WORDSIZE == 64] (MC_O6): Likewise.
	[__WORDSIZE == 64] (MC_O7): Likewise.
	[__WORDSIZE == 64] (MC_NGREG): Rename to __MC_NGREG and define to
	__MC_NGREG if [__USE_MISC].
	[__WORDSIZE == 64] (MC_MAXFPQ): Define only for [__USE_MISC].
	[__WORDSIZE == 64] (mc_gregset_t): Define using __MC_NGREG.
	[__WORDSIZE == 64] (struct mc_fq): Rename to struct __mc_fq.
	Define fields using __ctx.
	[__WORDSIZE == 64] (mc_fpu_t): Remove struct tag.  Define fields
	using __ctx.
	[__WORDSIZE == 64] (mcontext_t): Define fields using __ctx.
	(REG_PSR): Define only for [__USE_MISC].
	(REG_PC): Likewise.
	(REG_nPC): Likewise.
	(REG_Y): Likewise.
	(REG_G1): Likewise.
	(REG_G2): Likewise.
	(REG_G3): Likewise.
	(REG_G4): Likewise.
	(REG_G5): Likewise.
	(REG_G6): Likewise.
	(REG_G7): Likewise.
	(REG_O0): Likewise.
	(REG_O1): Likewise.
	(REG_O2): Likewise.
	(REG_O3): Likewise.
	(REG_O4): Likewise.
	(REG_O5): Likewise.
	(REG_O6): Likewise.
	(REG_O7): Likewise.
	[__WORDSIZE == 64] (REG_ASI): Define only for [__USE_MISC].
	[__WORDSIZE == 64] (REG_FPRS): Likewise.
	(NGREG): Rename to __NGREG and define to __NGREG if [__USE_MISC].
	(gregset_t): Define using __NGREG.
	(SPARC_MAXREGWINDOW): Rename to __SPARC_MAXREGWINDOW and define to
	__SPARC_MAXREGWINDOW if [__USE_MISC].
	(struct rwindow): Rename to struct __rwindow.  Define fields using
	__ctx.
	(rw_fp): Define only for [__USE_MISC].
	(rw_rtn): Likewise.
	(gwindows_t): Remove struct tag.  Define fields using __ctx and
	__SPARC_MAXREGWINDOW.
	(MAXFPQ): Define only for [__USE_MISC].
	(struct fpq): Rename to struct __fpq.  Define fields using __ctx.
	(struct fq): Rename to struct __fq.  Define fields using __ctx.
	(FPU_REGS_TYPE): Define only for [__USE_MISC].
	(FPU_DREGS_TYPE): Likewise.
	(V7_FPU_FSR_TYPE): Likewise.
	(V9_FPU_FSR_TYPE): Likewise.
	(V9_FPU_FPRS_TYPE): Likewise.
	[__WORDSIZE == 64] (fpregset_t): Remove struct tag.  Define fields
	using __ctx.
	[__WORDSIZE != 64] (fpregset_t): Likewise.
	[__WORDSIZE != 64] (xrs_t): Define fields using __ctx.
	[__WORDSIZE != 64] (XRS_ID): Define only for [__USE_MISC].
	[__WORDSIZE != 64] (mcontext_t): Define fields using __ctx.
	Rename field filler to __glibc_reserved1.
	* sysdeps/unix/sysv/linux/sparc/sparc32/ucontext_i.sym
	(MC_FILLER): Remove.

2017-06-29  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/tst-vfprintf-user-type.c (my_printf_function):
	Adjust format string.
	* stdio-common/Makefile (tst-vfprintf-mbs-prec.out): Add locale
	dependency.

2017-06-29  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/posix/spawni.c (__spawni_child): New function.
	(__spawni): Rename to __spawnix.

2017-06-29  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfprintf.c (group_number): Add front_ptr argument.
	Use it to make the temporary copy at the start of the work buffer.
	(process_arg): Adjust call to group_number.

2017-06-29  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfprintf.c (printf_positional): Use struct
	scratch_buffer to allocate backing storage for the args_value,
	args_size, args_type arrays.

2017-06-29  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/_i18n_number.h (_i18n_number_rewrite): Use struct
	scratch_buffer.

2017-06-29  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfprintf.c (WORK_BUFFER_SIZE): Reduce size for
	wchar_t builds.

2017-06-29  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/tst-vfprintf-mbs-prec.c: New file.
	* stdio-common/Makefile (tests): Add tst-vfprintf-mbs-prec.

2017-06-29  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/tst-vfprintf-user-type.c: New file.
	* stdio-common/Makefile (tests): Add tst-vfprintf-user-type.

2017-06-28  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* posix/tst-spawn2.c (do_test): Use libsupport.
	* posix/tst-spawn3.c (do_test): Likewise.

2017-06-28  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-tgmath-tests.py (Tests.__init__): Define
	__STDC_WANT_IEC_60559_TYPES_EXT__ at start of generated file.

	* math/tgmath.h: Include <bits/libc-header-start.h> and
	<bits/floatn.h>.
	(__TGMATH_F128): New macro.
	(__TGMATH_CF128): Likewise.
	(__TGMATH_UNARY_REAL_ONLY): Use __TGMATH_F128.
	(__TGMATH_UNARY_REAL_RET_ONLY): Likewise.
	(__TGMATH_BINARY_FIRST_REAL_ONLY): Likewise.
	(__TGMATH_BINARY_FIRST_REAL_STD_ONLY): New macro.
	(__TGMATH_BINARY_REAL_ONLY): Use __TGMATH_F128.
	(__TGMATH_BINARY_REAL_STD_ONLY): New macro.
	(__TGMATH_BINARY_REAL_RET_ONLY): Use __TGMATH_F128.
	(__TGMATH_TERNARY_FIRST_SECOND_REAL_ONLY): Likewise.
	(__TGMATH_TERNARY_REAL_ONLY): Likewise.
	(__TGMATH_TERNARY_FIRST_REAL_RET_ONLY): Likewise.
	(__TGMATH_UNARY_REAL_IMAG): Use __TGMATH_CF128.
	(__TGMATH_UNARY_IMAG): Use __TGMATH_F128.
	(__TGMATH_UNARY_REAL_IMAG_RET_REAL): Use __TGMATH_CF128.
	(__TGMATH_BINARY_REAL_IMAG): Likewise.
	(nexttoward): Use __TGMATH_BINARY_FIRST_REAL_STD_ONLY.
	[__USE_MISC] (scalb): Use __TGMATH_BINARY_REAL_STD_ONLY.
	* math/gen-tgmath-tests.py (Type.init_types): Enable _FloatN and
	_FloatNx types if the corresponding HUGE_VAL macros are defined.

	* math/tgmath.h [__USE_GNU] (log10): Use clog10 not __clog10.
	* math/gen-tgmath-tests.py (Tests.add_all_tests): Test log10 for
	complex arguments.

	[BZ #21687]
	* math/tgmath.h (__TGMATH_BINARY_REAL_RET_ONLY): New macro.
	(totalorder): Use it.
	(totalordermag): Likewise.
	* math/gen-tgmath-tests.py (Tests.add_all_tests): Enable tests of
	totalorder and totalordermag.
	* math/test-tgmath.c (F(compile_test)): Do not call totalorder or
	totalordermag in arguments of calls to those functions.
	(NCALLS): Change to 134.

	* math/tgmath.h (__TGMATH_UNARY_REAL_RET_ONLY): Do not take or
	cast to return type argument.
	(__TGMATH_TERNARY_FIRST_REAL_RET_ONLY): Likewise.
	(lrint): Update call to __TGMATH_UNARY_REAL_RET_ONLY.
	(llrint): Likewise.
	(lround): Likewise.
	(llround): Likewise.
	(ilogb): Likewise.
	(llogb): Likewise.
	(fromfp): Update call to __TGMATH_TERNARY_FIRST_REAL_RET_ONLY.
	(ufromfp): Likewise.
	(fromfpx): Likewise.
	(ufromfpx): Likewise.

	[BZ #21607]
	* math/basic-test.c [!NO_LONG_DOUBLE]: Change conditionals to
	[LDBL_MANT_DIG > DBL_MANT_DIG].
	* math/bug-nextafter.c [!NO_LONG_DOUBLE]: Remove conditionals.
	* math/bug-nexttoward.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-math-isinff.cc [!NO_LONG_DOUBLE]: Likewise.
	* math/test-math-iszero.cc [!NO_LONG_DOUBLE]: Likewise.
	* math/test-nan-overflow.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-nan-payload.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-nearbyint-except-2.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-nearbyint-except.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-powl.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-signgam-finite-c99.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-signgam-finite.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-signgam-main.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-snan.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-tgmath-ret.c [!NO_LONG_DOUBLE]: Likewise.
	* math/test-tgmath.c: Include <float.h>.
	[!NO_LONG_DOUBLE]: Change conditionals to [LDBL_MANT_DIG >
	DBL_MANT_DIG].
	* math/test-tgmath2.c: Include <float.h>.
	[!NO_LONG_DOUBLE]: Change conditionals to [LDBL_MANT_DIG >
	DBL_MANT_DIG].

	* math/gen-tgmath-tests.py: New file.
	* math/Makefile [PYTHON] (tests): Add test-tgmath3.
	[PYTHON] (generated): Add test-tgmath3.c.
	[PYTHON] (CFLAGS-test-tgmath3.c): New variable.
	[PYTHON] ($(objpfx)test-tgmath3.c): New rule.

	* configure.ac (AS): Require binutils 2.25 or later.
	(LD): Likewise.
	* configure: Regenerated.
	* sysdeps/s390/configure.ac (AS): Remove version check.
	* sysdeps/s390/configure: Regenerated.
	* sysdeps/x86_64/configure.ac (AS): Remove version check.
	* sysdeps/x86_64/configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Document
	requirement for binutils 2.25 or later.
	* INSTALL: Regenerated.

2017-06-28  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14995]
	* configure.ac: Allow gold 1.14 or above to configire glibc
	* configure: Regenerated.

2017-06-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21457]
	* sysdeps/unix/sysv/linux/m68k/sys/ucontext.h (fpregset_t): Remove
	struct tag.
	* sysdeps/unix/sysv/linux/mips/sys/ucontext.h (fpregset_t):
	Likewise.
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h (mcontext_t):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h (pt_regs):
	Declare struct type with __ctx.
	[__WORDSIZE != 32] (mcontext_t): Use __ctx with pt_regs struct
	tag.
	(ucontext_t) [__WORDSIZE == 32]: Use __ctx with pt_regs struct tag
	and regs field name.

2017-06-27  Joseph Myers  <joseph@codesourcery.com>

	* elf/loadtest.c (OUT): Define using do { } while (0).

	* time/strftime_l.c (DO_NUMBER): Define using do { } while (0).
	(DO_NUMBER_SPACEPAD): Likewise.

2017-06-27  Prakhar Bahuguna  <prakhar.bahuguna@arm.com>

	* sysdeps/arm/armv7/multiarch/Makefile: Add memchr_neon to
	sysdep_routines.
	* sysdeps/arm/armv7/multiarch/ifunc-impl-list.c: Add define for
	__memchr_neon.
	Add ifunc definitions for __memchr_neon and __memchr_noneon.
	* sysdeps/arm/armv7/multiarch/memchr.S: New file.
	* sysdeps/arm/armv7/multiarch/memchr_impl.S: Likewise.
	* sysdeps/arm/armv7/multiarch/memchr_neon.S: Likewise.

2017-06-27  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/utf8-utf16-z9.c (__to_utf8_loop_vx_cu):
	Use vector and cu21 instruction.
	* sysdeps/s390/multiarch/utf8-utf16-z9.c:
	Add __to_utf8_loop_vx_cu in ifunc resolver.

2017-06-27  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/utf16-utf32-z9.c (__from_utf16_loop_vx_cu):
	Use vector and cu24 instruction.

2017-06-27  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/utf16-utf32-z9.c (__to_utf16_loop_vx_cu):
	Use vector and cu42 instruction.
	* sysdeps/s390/multiarch/utf16-utf32-z9.c:
	Add __to_utf16_loop_vx_cu in ifunc resolver.

2017-06-27  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/utf8-utf32-z9.c (__to_utf8_loop_vx_cu):
	Use vector and cu41 instruction.
	* sysdeps/s390/multiarch/utf8-utf32-z9.c: Add __to_utf8_loop_vx_cu
	in ifunc resolver.

2017-06-27  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/dl-procinfo.c (_dl_s390_cap_flags):
	Add vxd, vxe, gs flag.
	* sysdeps/s390/dl-procinfo.h: Add HWCAP_S390_VXD, HWCAP_S390_VXE,
	HWCAP_S390_GS capability.
	* sysdeps/unix/sysv/linux/s390/bits/hwcap.h
	(HWCAP_S390_VXD, HWCAP_S390_VXE, HWCAP_S390_GS): Define.

2017-06-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcmp-avx2-movbe.S (MEMCMP): Check
	the first 32 bytes before checking size when size >= 32 bytes.
	Replace vpmovmskb/subl/jnz with vptest/jnc.

2017-06-27  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/tls-macros.h (TLS_IE): Use r12 for GOT address.
	* sysdeps/s390/s390-64/tls-macros.h (TLS_IE): Likewise.

2017-06-27  Florian Weimer  <fweimer@redhat.com>

	Work around test timeouts with ICMP rate limiting on localhost.
	* resolv/tst-resolv-res_init-skeleton.c (start_dummy_server): New
	function.
	(do_test): Call it.

2017-06-27  Florian Weimer  <fweimer@redhat.com>

	Call _res_hconf_init from __res_vinit.
	* inet/gethstbyad_r.c (NEED__RES_HCONF): Remove.
	* inet/gethstbynm2_r.c (NEED__RES_HCONF): Likewise.
	(NEED__RES): Define.
	* inet/gethstbynm_r.c (NEED__RES_HCONF): Remove.
	(NEED__RES): Define.
	* nscd/aicache.c (addhstaiX): Remove call to _res_hconf_init.
	* nscd/gethstbyad_r.c (NEED__RES_HCONF): Remove.
	* nscd/gethstbynm3_r.c (NEED__RES_HCONF): Likewise.
	(NEED__RES): Define.
	* nss/getXXbyYY_r.c (REENTRANT_NAME): Remove call to
	_res_hconf_init.
	* resolv/res_hconf.h (_res_hconf_init): Declare as hidden.
	* resolv/res_init.c (__res_vinit): Call _res_hconf_init.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Remove call to
	_res_hconf_init.

2017-06-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ia64/Implies: Add ieee754/float128.
	* sysdeps/ia64/bits/floatn.h: New file.
	* sysdeps/ia64/float128-abi.h: Likewise.
	* manual/math.texi (Mathematics): Document support for _Float128
	on ia64.
	* sysdeps/ia64/Makefile [$(subdir) = math] (CPPFLAGS): Append to
	Makefile variable.
	* sysdeps/ia64/fpu/e_sqrtf128.c: New file.
	* sysdeps/ia64/fpu/k_rem_pio2.c: Remove file.
	* sysdeps/ia64/fpu/sfp-machine.h: New file.  Based on libgcc.
	* sysdeps/ia64/math-tests.h: New file.
	* math/libm-test-support.h (XFAIL_FLOAT128_PAYLOAD): Also define
	based on TEST_COND_binary128 for [__ia64__].
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise,

	[BZ #21457]
	* sysdeps/arm/sys/ucontext.h (struct ucontext): Rename to struct
	ucontext_t.
	* sysdeps/generic/sys/ucontext.h (struct ucontext): Likewise.
	* sysdeps/i386/sys/ucontext.h (struct ucontext): Likewise.
	* sysdeps/m68k/sys/ucontext.h (struct ucontext): Likewise.
	* sysdeps/mips/sys/ucontext.h (struct ucontext): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sys/ucontext.h (struct
	ucontext): Likewise.
	* sysdeps/unix/sysv/linux/alpha/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/hppa/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/m68k/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h (struct
	ucontext): Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h (struct ucontext):
	Likewise.
	* sysdeps/powerpc/powerpc32/backtrace.c (struct
	rt_signal_frame_32): Likewise.
	* sysdeps/powerpc/powerpc64/backtrace.c (struct signal_frame_64):
	Likewise.
	* sysdeps/unix/sysv/linux/aarch64/kernel_rt_sigframe.h (struct
	kernel_rt_sigframe): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sigcontextinfo.h (SIGCONTEXT):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/register-dump.h (register_dump):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/sigcontextinfo.h (SIGCONTEXT):
	Likewise.
	* sysdeps/unix/sysv/linux/hppa/profil-counter.h
	(__profil_counter): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/sigcontextinfo.h
	(SIGCONTEXT): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel_rt_sigframe.h (struct
	kernel_rt_sigframe): Likewise.
	* sysdeps/unix/sysv/linux/nios2/kernel_rt_sigframe.h (struct
	kernel_rt_sigframe): Likewise.
	* sysdeps/unix/sysv/linux/nios2/sigcontextinfo.h (SIGCONTEXT):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/makecontext.S (__makecontext):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/makecontext.c
	(__start_context): Likewise.
	* sysdeps/unix/sysv/linux/tile/sigcontextinfo.h (SIGCONTEXT):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/register-dump.h (register_dump):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sigcontextinfo.h (SIGCONTEXT):
	Likewise.

	* sysdeps/i386/Implies: Add ieee754/float128.
	* sysdeps/x86_64/Implies: Likewise.
	* sysdeps/x86/bits/floatn.h: New file.
	* sysdeps/x86/float128-abi.h: Likewise.
	* manual/math.texi (Mathematics): Document support for _Float128
	on x86_64 and x86.
	* sysdeps/i386/fpu/fenv_private.h: Include <bits/floatn.h>.
	(math_opt_barrier): Do not put _Float128 values in floating-point
	registers.
	(math_force_eval): Likewise.
	[__x86_64__] (SET_RESTORE_ROUNDF128): New macro.
	* sysdeps/x86/fpu/Makefile [$(subdir) = math] (CPPFLAGS): Append
	to Makefile variable.
	* sysdeps/x86/fpu/e_sqrtf128.c: New file.
	* sysdeps/x86/fpu/sfp-machine.h: Likewise.  Based on libgcc.
	* sysdeps/x86/math-tests.h: New file.
	* math/libm-test-support.h (XFAIL_FLOAT128_PAYLOAD): New macro.
	* math/libm-test-getpayload.inc (getpayload_test_data): Use
	XFAIL_FLOAT128_PAYLOAD.
	* math/libm-test-setpayload.inc (setpayload_test_data): Likewise.
	* math/libm-test-totalorder.inc (totalorder_test_data): Likewise.
	* math/libm-test-totalordermag.inc (totalordermag_test_data):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Likewise.
	* sysdeps/i386/i686/fpu/multiarch/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2017-06-26  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21512]
	* sysdeps/unix/sysv/linux/aarch64/clone.S (__clone): Call exit
	syscall instead of jump to _exit.
	(CLONE_VM_BIT): Remove unused define.
	(CLONE_VM): Likewise.
	(CLONE_THREAD_BIT): Likewise.
	(CLONE_THREAD): Likewise.
	* sysdeps/unix/sysv/linux/alpha/clone.S (__clone): Likewise.
	(CLONE_VM): Remove unused define.
	* sysdeps/unix/sysv/linux/arm/clone.S (__clone): Likewise.
	(CLONE_VM): Remove unused define.
	(CLONE_THREAD): Likewise.
	* sysdeps/unix/sysv/linux/i386/clone.S (CLONE_VM): Likewise.
	* sysdeps/unix/sysv/linux/ia64/clone2.S (__clone2): Call exit
	syscall instead of jump to _exit.
	* sysdeps/unix/sysv/linux/hppa/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/mips/clone.S (__clone): Likewise.
	(CLONE_VM): Remove unused define.
	(CLONE_THREAD): Likewise.
	* sysdeps/unix/sysv/linux/nios2/clone.S (__clone): Likewise.
	(CLONE_VM): Remove unused define.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S (__clone):
	Likewise.
	(CLONE_VM): Remove unused define.
	(CLONE_THREAD): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (__clone):
	Likewise.
	(CLONE_VM): Remove unused define.
	(CLONE_THREAD): Likewise.
	* sysdeps/unix/sysv/linux/sh/clone.S  (__clone): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/clone.S (__clone): Likewise.
	(CLONE_VM): Remove unused define.
	* sysdeps/unix/sysv/linux/sparc/sparc64/clone.S (__clone): Likewise.
	(CLONE_VM): Remove unused define.
	* sysdeps/unix/sysv/linux/tile/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/clone.S (__clone): Likewise.
	(CLONE_VM): Remove unused define.
	* sysdeps/unix/sysv/linux/Makefile (tests): Add tst-clone3.
	* sysdeps/unix/sysv/linux/tst-clone3.c: New file.

2017-06-26  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>
	    Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* manual/math.texi (Mathematics): Mention the enabling of float128
	for powerpc64le.
	* sysdeps/powerpc/bits/floatn.h: New file.
	* sysdeps/powerpc/fpu/libm-test-ulps: Regenerated.
	* sysdeps/powerpc/fpu/math_private.h:
	(__ieee754_sqrtf128): New inline override.
	* sysdeps/powerpc/powerpc64le/Implies-before: New file.
	* sysdeps/powerpc/powerpc64le/Makefile: New file.
	* sysdeps/powerpc/powerpc64le/fpu/e_sqrtf128.c: New file.
	* sysdeps/powerpc/powerpc64le/fpu/sfp-machine.h: New file.
	* sysdeps/powerpc/powerpc64le/power9/fpu/e_sqrtf128.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist:
	Updated.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64le/float128-abi.h:
	New file.

2017-06-26  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64le/configure.ac: Check for POWER8.
	* sysdeps/powerpc/powerpc64le/configure: Update.

2017-06-26  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>
	    Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* INSTALL: Regenerate.
	* manual/install.texi (Recommended Tools for Compilation): Mention
	the powerpc64le-specific requirement in the manual.
	* sysdeps/powerpc/powerpc64le/configure.ac: New file with checks
	for the compiler features required for building float128.
	* sysdeps/powerpc/powerpc64le/configure: New, auto-generated file.

2017-06-26  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* malloc/tst-alloc_buffer.c (test_misaligned): Cast to char
	before comparing with another char.

2017-06-25  Rical Jasan  <ricaljasan@pacific.net>

	* manual/math.texi: Fix a grammatical error.

2017-06-24  Florian Weimer  <fweimer@redhat.com>

	[BZ #21295]
	* resolv/tst-resolv-basic.c (do_test): Add new test cases.

2017-06-24  Dmitry Bilunov  <kmeaw@kmeaw.com>

	[BZ #21295]
	* sysdeps/posix/getaddrinfo.c (convert_hostent_to_gaih_addrtuple):
	Append addresses at the end of the list.

2017-06-23  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21666]
	* misc/regexp.c (loc1): Add __attribute__ ((nocommon));
	(loc2): Likewise.
	(locs): Likewise.

2017-06-23  Florian Weimer  <fweimer@redhat.com>

	[BZ #16637]
	inet_pton: Reject invalid IPv6 addresses with many leading zeros.
	* resolv/inet_pton.c (inet_pton6): Count number of hexadecimal
	digits between colons.
	* resolv/tst-inet_pton.c (test_cases): Adjust test expectations.

2017-05-23  Adhemerval Zanella  <adhemerval.zanella@linaro.org>
	    Juan Manuel Torres Palma  <jmtorrespalma@gmail.com>

	* include/sched.h (__sched_get_priority_max): Add libc hidden proto.
	(__sched_get_prioriry_min): Likewise.
	* include/sys/mman.h (__mmap): Likewise.
	(__mmap64): Likewise.
	(__munmap): Likewise.
	(__mprotect): Likewise.
	* include/termios.h (__tcsetattr): Likewise.
	* include/time.h (__nanosleep): Use hidden_proto instead of
	libc_hidden_proto.
	* posix/nanosleep.c (__nanosleep): Likewise.
	* misc/Versions (libc): Export __mmap, __munmap, __mprotect,
	__sched_get_priority_min, and __sched_get_priority_max under
	GLIBC_PRIVATE.
	* nptl/allocatestack.c (__free_stacks): Use internal definition for
	libc symbols.
	(change_stack_perm): Likewise.
	(change_stack_perm): Likewise.
	(allocate_stack): Likewise.
	* sysdeps/posix/gethostname.c: Likewise.
	* nptl/tpp.c (__init_sched_fifo_prio): Likewise.
	* sysdeps/unix/sysv/linux/i386/smp.h (is_smp_system): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/ioctl.c (__ioctl): Likewise.
	* nptl/pthreadP.h (__pthread_mutex_timedlock): Add definition.
	(__pthread_key_delete): Likewise.
	(__pthread_detach): Likewise.
	(__pthread_cancel): Likewise.
	(__pthread_mutex_trylock): Likewise.
	(__pthread_mutexattr_init): Likewise.
	(__pthread_mutexattr_settype): Likewise.
	* nptl/pthread_cancel.c (pthread_cancel): Change to internal name and
	create alias for exported one.
	* nptl/pthread_join.c (pthread_join): Likewise.
	* nptl/pthread_detach.c (pthread_detach): Likewise.
	* nptl/pthread_key_delete.c (pthread_key_delete): Likewise.
	* nptl/pthread_mutex_timedlock.c (pthread_mutex_timedlock): Likewise.
	* nptl/pthread_create.c: Change static requirements for pthread
	symbols.
	* nptl/pthread_equal.c (__pthread_equal): Change strong alias to weak
	for internal definition.
	* nptl/pthread_exit.c (__pthread_exit): Likewise.
	* nptl/pthread_getspecific.c (__pthread_getspecific): Likewise.
	* nptl/pthread_key_create.c (__pthread_key_create): Likewise.
	* nptl/pthread_mutex_destroy.c (__pthread_mutex_destroy): Likewise.
	* nptl/pthread_mutex_init.c (__pthread_mutex_init): Likewise.
	* nptl/pthread_mutex_lock.c (__pthread_mutex_lock): Likewise.
	* nptl/pthread_mutex_trylock.c (__pthread_mutex_trylock): Likewise.
	* nptl/pthread_mutex_unlock.c (__pthread_mutex_unlock): Likewise.
	* nptl/pthread_mutexattr_init.c (__pthread_mutexattr_init): Likwise.
	* nptl/pthread_mutexattr_settype.c (__pthread_mutexattr_settype):
	Likewise.
	* nptl/pthread_self.c (__pthread_self): Likewise.
	* nptl/pthread_setspecific.c (__pthread_setspecific): Likewise.
	* sysdeps/unix/sysv/linux/tcsetattr.c (tcsetattr): Likewise.
	* misc/mmap.c (__mmap): Add internal symbol definition.
	* misc/mmap.c (__mmap64): Likewise.
	* sysdeps/unix/sysv/linux/mmap.c (__mmap): Likewise.
	* sysdeps/unix/sysv/linux/mmap64.c (__mmap): Likewise.
	(__mmap64): Likewise.
	* sysdeps/unix/sysv/linux/i386/Versions (libc) [GLIBC_PRIVATE):
	Add __uname.

2017-06-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/i386/i686/fpu/multiarch/libm-test-ulps: Likewise.

	* libm-test-support.c (check_float_internal): Clear exceptions at
	end of function.
	(check_int): Likewise.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(check_intmax_t): Likewise.
	(check_uintmax_t): Likewise.

	* sysdeps/x86/fpu/bits/fenv.h [_LIBC] (__feraiseexcept_renamed):
	Do not declare.
	* sysdeps/x86/fpu/include/bits/fenv.h [_LIBC &&
	__USE_EXTERN_INLINES] (__feraiseexcept_renamed): Declare here,
	redirected to __GI_feraiseexcept if [SHARED && IS_IN (libm)].

2017-06-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcmp-avx2-movbe.S (between_2_3):
	Replace movzbl and orl with movb.

2017-06-23  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* manual/arith.texi (Infinity and NaN): Document SNANFN and SNANFNx.
	(Error Reporting by Mathematical Functions): Document HUGE_VAL_FN
	and HUGE_VAL_FNx.
	(Absolute Value): Document fabsfN, fabsfNx, cabsfN, cabsfNx.
	Rephrase the paragraph that mentions that fabs, fabsf, and fabsl
	are in math.h, to avoid having to list the _FloatN and _FloatNx
	variants as well.  Likewise for the cabs functions.
	(Normalization Functions): Document frexpfN, frexpfNx, ldexpfN,
	ldexpfNx, scalbnfN, scalbnfNx, scalblnfN, scalblnfNx.
	Mention that _FloatN and _FloatNx variants of scalbn and scalbln
	come from TS 18661-3, since this section explicitly states that
	these functions come from BSD.
	(Rounding Functions): Document ceilfN, ceilfNx, floorfN, floorfNx,
	truncfN, truncfNx, rintfN, rintfNx, nearbyintfN, nearbyintfNx,
	roundfN, roundfNx, roundevenfN, roundevenfNx, lrintfN, lrintfNx,
	llrintfN, llrintfNx, lroundfN, lroundfNx, llroundfN, llroundfNx,
	fromfpfN, fromfpfNx, ufromfpfN, ufromfpfNx, fromfpxfN, fromfpxfNx,
	ufromfpxfN, ufromfpxfNx, modffN, modffNx.
	(Remainder Functions): Document fmodfN, fmodfNx, remainderfN,
	remainderfNx.
	(Setting and modifying single bits of FP values): Document
	copysignfN, copysignfNx, nextafterfN, nextafterfNx, nextupfN,
	nextupfNx, nextdownfN, nextdownfNx, nanfN, nanfNx, canonicalizefN,
	canonicalizefNx, getpayloadfN, getpayloadfNx, setpayloadfN,
	setpayloadfNx, setpayloadsigfN, setpayloadsigfNx.
	(Floating-Point Comparison Functions): Document totalorderfN,
	totalorderfNx, totalordermagfN, totalordermagfNx.
	(Miscellaneous FP arithmetic functions): Document fminfN, fminfNx,
	fmaxfN, fmaxfNx, fminmagfN, fminmagfNx, fmaxmagfN, fmaxmagfNx,
	fdimfN, fdimfNx, fmafN, fmafNx.
	(Complex Numbers): Document the complex types: _FloatN complex and
	_FloatNx complex.
	(rojections, Conjugates, and Decomposing of Complex Numbers):
	Document crealfN, crealfNx, cimagfN, cimagfNx, conjfN, conjfNx,
	cargfN, cargfNx, cprojfN, cprojfNx.
	* manual/math.texi (Mathematics): Mention that the _FloatN and
	_FloatNx variants of the math functions come from TS 18661-3,
	unless otherwise stated.
	(Predefined Mathematical Constants): Document the _FloatN and
	_FloatNx variants of the macros prefixed with M_.
	(Trigonometric Functions): Document sinfN, sinfNx, cosfN, cosfNx,
	tanfN, tanfNx, sincosfN, sincosfNx, csinfN, csinfNx, ccosfN,
	ccosfNx, ctanfN, ctanfNx.
	(Inverse Trigonometric Functions): Document asinfN, asinfNx,
	acosfN, acosfNx, atanfN, atanfNx, atan2fN, atan2fNx.
	(Exponentiation and Logarithms): Document expfN, expfNx, exp2fN,
	exp2fNx, exp10fN, exp10fNx, logfN, logfNx, log10fN, log10fNx,
	log2fN, log2fNx, logbfN, logbfNx, ilogbfN, ilogbfNx, llogbfN,
	llogbfNx, powfN, powfNx, sqrtfN, sqrtfNx, cbrtfN, cbrtfNx, hypotfN,
	hypotfNx, expm1fN, expm1fNx, log1pfN, log1pfNx, cexpfN, cexpfNx,
	clogfN, clogfNx, clog10fN, clog10fNx, csqrtfN, csqrtfNx, cpowfN,
	cpowfNx.
	(Hyperbolic Functions): sinhfN, sinhfNx, coshfN, coshfNx, tanhfN,
	tanhfNx, csinhfN, csinhfNx, ccoshfN, ccoshfNx, ctanhfN, ctanhfNx,
	asinhfN, asinhfNx, acoshfN, acoshfNx, atanhfN, atanhfNx, casinhfN,
	casinhfNx, cacoshfN, cacoshfNx, catanhfN, catanhfNx.
	(Special Functions): Document erffN, erffNx, erfcfN, erfcfNx,
	lgammafN, lgammafNx, lgammarfN_r, lgammafNx_r, tgammafN, tgammafNx,
	j0fN, j0fNx, j1fN, j1fNx, jnfN, jnfNx, y0fN, y0fNx, y1fN, y1fNx,
	ynfN, ynfNx.

2017-06-23  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/x86_64/multiarch/memcmp-avx2-movbe.S (between_2_3): Fix typo in comment.

2017-06-23  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_libc.c: Reformat to GNU style.

2017-06-23  Florian Weimer  <fweimer@redhat.com>

	* resolv/resolv-internal.h (__res_initstamp): Declare.
	* resolv/res_init.c (__res_initstamp): Remove hidden attribute.
	It is implied by the declaration.
	* resolv/res_libc.c (__res_initstamp): Remove declaration.

2017-06-23  Florian Weimer  <fweimer@redhat.com>

	[BZ #21662]
	* sysdeps/x86_64/multiarch/memcmp-avx2-movbe.S (between_2_3):
	Use only 24 bits of the register before the subtraction.
	* string/test-memcmp.c (check1): Check with different lengths.

2017-06-23  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/ieee754/float128/Makefile (CFLAGS-strfromf128.c): Add
	$(libio-mtsafe) to get the value of IO_MTSAFE_IO.

2017-06-23  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* manual/libm-err-tab.pl (@all_floats, %suffices, parse_ulps):
	Enable generation of float128 entries on the error table.

2017-06-23  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* include/float.h: Include libc-header-start.h to get the
	definition of __GLIBC_USE.

2017-06-23  Paul A. Clarke  <pc@us.ibm.com>

	* sysdeps/ieee754/flt-32/e_powf.c: Optimized implementation utilizing
	rearranged code and doubles float types.

2017-06-23  Rogerio A. Cardoso  <rcardoso@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_sinf-ppc64.c: Change
	s_sinf.c from sysdeps/ieee754/flt-32/ to sysdeps/powerpc/fpu/.

2017-06-23  Paul A. Clarke  <pc@us.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/sysconf.c: Remove references
	to errno, and simplify remaining related code.

2017-06-23  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/bits/hwcap.h: Add PPC_FEATURE2_DARN and
	PPC_FEATURE2_SCV.
	* sysdeps/powerpc/dl-procinfo.c (_dl_powerpc_cap_flags): Add scv
	and darn.

2017-06-23  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/strchr-power8.S(STRRCHR): Define
	the implementation-specific function name and remove unneeded macros
	definition.
	* sysdeps/powerpc/powerpc64/power8/strrchr.S(STRRCHR): Set a default
	function name if not defined and pass as parameter to macros
	accordingly.

2017-06-23  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile
	(libm-sysdep_routines): Add s_llroundf-ppc64.
	* sysdeps/powerpc/powerpc64/power5+fpu/s_llround.S
	(__llroundf): Define as strong alias of __llround.
	(llroundf):  Define as weak alias of __llround.
	(__lroundf): Define as strong alias of __llround.
	(lroundf):  Define as weak alias of __llround.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_llround.S:  Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llroundf-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llroundf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_llroundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_llroundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llroundf.S: Likewise.

2017-06-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-96/bits/iscanonical.h
	[__HAVE_DISTINCT_FLOAT128] (__iscanonicalf128): New macro.

	* sysdeps/generic/math-tests.h: Include <bits/floatn.h>.
	(MATH_TESTS_TG): New macro.
	(SNAN_TESTS_float128): Likewise.
	(ROUNDING_TESTS_float128): Likewise.
	(EXCEPTION_TESTS_float128): Likewise.
	(SNAN_TESTS): Define using MATH_TESTS_TG.
	(ROUNDING_TESTS): Likewise.
	(EXCEPTION_TESTS): Likewise.

	* sysdeps/ieee754/float128/float128_private.h
	[SET_RESTORE_ROUNDF128] (SET_RESTORE_ROUNDL): Take an argument and
	pass it to SET_RESTORE_ROUNDF128.

	* sysdeps/ieee754/float128/float128_private.h: Include
	<ieee754.h>.

	* sysdeps/generic/math_private.h (__EXPR_FLT128): Do not apply
	typeof to argument passed to __builtin_types_compatible_p.
	(min_of_type): Pass type argument, not x, to __EXPR_FLT128.

	* math/w_acos_template.c [__USE_WRAPPER_TEMPLATE]: Include
	<errno.h>.
	* math/w_acosh_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_asin_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_atanh_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_cosh_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_exp10_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_exp2_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_exp_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_fmod_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_hypot_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_j0_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_j1_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_jn_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_lgamma_r_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_lgamma_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_log10_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_log2_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_log_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_pow_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_remainder_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_sinh_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_sqrt_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.
	* math/w_tgamma_template.c [__USE_WRAPPER_TEMPLATE]: Likewise.

	* sysdeps/ieee754/float128/strtof128_l.c: Include
	<bits/types/locale_t.h> instead of <xlocale.h>.
	* sysdeps/ieee754/float128/wcstof128.c: Likewise.
	* sysdeps/ieee754/float128/wcstof128_l.c: Likewise.

2017-06-22  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* benchtests/scripts/benchout_strings.schema.json: New file.
	* benchtests/scripts/compare_strings.py: New file.

	* benchtests/bench-memcpy-large.c: Include json-lib.h.
	(do_one_test): Print json.
	(do_test): Likewise.
	(test_main): Likewise.
	* benchtests/bench-memcpy-random.c: Include json-lib.h.
	(do_one_test): Print json.
	(do_test): Likewise.
	(test_main): Likewise.
	* benchtests/bench-memcpy.c: Include json-lib.h.
	(do_one_test): Print json.
	(do_test): Likewise.
	(test_main): Likewise.

	* benchtests/json-lib.h: Include inttypes.h.
	(json_attr_int, json_attr_int, json_element_string,
	json_element_int, json_element_uint): New functions.
	* benchtests/json-lib.c: (json_attr_int, json_attr_int,
	json_element_string, json_element_int, json_element_uint): New
	functions.

2017-06-22  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* manual/arith.texi (Remainder Functions): Describe remainder as
	primary and drem as an alternative name.  Change the comment on
	remainder to ISO, since it is defined in ISO C99.

2017-06-22  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* stdlib/tst-strtod.h (MMFUNC): New macro to provide an addition
	macro expansion.
	(GEN_TEST_STRTOD_FOREACH): Use MMFUNC for _Float128.

2017-06-22  Mike FABIAN  <mfabian@redhat.com>

	[BZ #21533]
	* include/stdc-predef.h (__STDC_ISO_10646__): Update to
	201706L for Unicode 10.0.

2017-06-21  Benjamin Cama  <b.cama@kerlink.fr>

	[BZ #21657]
	* inet/inet6_scopeid_pton.c (__inet6_scopeid_pton): Permit scopes
	on node-local addresses.
	* inet/tst-inet6_scopeid_pton.c (do_test): Adjust test.

2017-06-21  Florian Weimer  <fweimer@redhat.com>

	* intl/loadmsgcat.c: Remove alloca support.
	(_nl_load_domain): Use calloc instead of alloca.

2017-04-21  Florian Weimer  <fweimer@redhat.com>

	* malloc/Makefile (tests-internal): Add tst-alloc_buffer.
	(routines): Add alloc_buffer_alloc_array, alloc_buffer_allocate,
	alloc_buffer_copy_bytes, alloc_buffer_copy_string,
	alloc_buffer_create_failure.
	* malloc/Versions (__libc_alloc_buffer_alloc_array)
	(__libc_alloc_buffer_allocate, __libc_alloc_buffer_copy_bytes)
	(__libc_alloc_buffer_copy_string)
	(__libc_alloc_buffer_create_failure): Export as GLIBC_PRIVATE.
	* malloc/alloc_buffer_alloc_array.c: New file.
	* malloc/alloc_buffer_allocate.c: Likewise.
	* malloc/alloc_buffer_copy_bytes.c: Likewise.
	* malloc/alloc_buffer_copy_string.c: Likewise.
	* malloc/alloc_buffer_create_failure.c: Likewise.
	* malloc/tst-alloc_buffer.c: Likewise.

2017-06-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcmp-sse2, strcmp-sse4_2, strncmp-sse2, strncmp-sse4_2,
	strcasecmp_l-sse2, strcasecmp_l-sse4_2, strcasecmp_l-avx,
	strncase_l-sse2, strncase_l-sse4_2 and strncase_l-avx.
	* sysdeps/x86_64/multiarch/ifunc-strcasecmp.h: New file.
	* sysdeps/x86_64/multiarch/strcasecmp.c: Likewise.
	* sysdeps/x86_64/multiarch/strcasecmp_l-avx.S: Likewise.
	* sysdeps/x86_64/multiarch/strcasecmp_l-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strcasecmp_l-sse4_2.S: Likewise.
	* sysdeps/x86_64/multiarch/strcasecmp_l.c: Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse4_2.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp.c: Likewise.
	* sysdeps/x86_64/multiarch/strncase.c: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l-avx.S : Likewise.
	* sysdeps/x86_64/multiarch/strncase_l-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l-sse4_2.S: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l.c: Likewise.
	* sysdeps/x86_64/multiarch/strncmp-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strncmp-sse4_2.S: Likewise.
	* sysdeps/x86_64/multiarch/strncmp.c: Likewise.
	* sysdeps/x86_64/multiarch/strcasecmp_l.S: Removed.
	* sysdeps/x86_64/multiarch/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l.S: Likewise.
	* sysdeps/x86_64/multiarch/strncmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Include <sysdep.h>.
	(STRCMP_SSE42): New.  Defined to __strcmp_sse42 if not defined.
	[USE_AS_STRCASECMP_L || USE_AS_STRNCASECMP_L]: Include
	"locale-defines.h".
	(UPDATE_STRNCMP_COUNTER): New.
	(SECTION): Likewise.
	(GLABEL): Likewise.
	(LABEL): Likewise.
	* sysdeps/x86_64/multiarch/strncmp-ssse3.S: Rewrite and enable
	for libc.a.

2017-06-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21622]
	* sysdeps/unix/sysv/linux/tile/bits/sigaction.h (SA_RESTART):
	Define for [__USE_UNIX98 || __USE_XOPEN2K8], not [__USE_UNIX98 ||
	__USE_MISC].
	(SA_NODEFER): Likewise.
	(SA_RESETHAND): Likewise.

2017-06-21  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-tunables.list (glibc.tune.ifunc): Removed.
	* sysdeps/x86/dl-tunables.list (glibc.tune.hwcaps): New.
	Remove security_level on all fields.
	* manual/tunables.texi: Replace ifunc with hwcaps.
	* sysdeps/x86/cpu-features.c (TUNABLE_CALLBACK (set_ifunc)):
	Renamed to ..
	(TUNABLE_CALLBACK (set_hwcaps)): This.
	(init_cpu_features): Updated.
	* sysdeps/x86/cpu-features.h (cpu_features): Change type of
	data_cache_size, data_cache_size and non_temporal_threshold to
	unsigned long int.
	* sysdeps/x86/cpu-tunables.c (DEFAULT_STRLEN): Removed.
	(TUNABLE_CALLBACK (set_ifunc)): Renamed to ...
	(TUNABLE_CALLBACK (set_hwcaps)): This.  Update comments.  Don't
	use DEFAULT_STRLEN.

2017-06-21  Florian Weimer  <fweimer@redhat.com>

	* intl/dcigettext.c (DCIGETTEXT): Use getcwd (NULL, 0) and
	asprintf to construct an absolute pathname.

2017-06-21  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* misc/tst-preadvwritev2-common.c: New file.
	* misc/tst-preadvwritev2.c (do_test): Add test for invalid flag.
	* misc/tst-preadvwritev64v2.c (do_test): Likewise.

2017-06-21  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/dl-tlsdesc.S (_dl_tlsdesc_dynamic): Add cfi
	annotation.
	(_dl_tlsdesc_resolve_rela, _dl_tlsdesc_resolve_hold): Likewise.

2017-06-21  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/dl-machine.h (RTLD_START_1): Change _dl_argv to the
	hidden __GI__dl_argv symbol.

2017-06-21  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Call __inet_pton_length
	to parse addresses with IPv6 scope IDs.

2017-06-21  Florian Weimer  <fweimer@redhat.com>

	Add the __inet_pton_length helper function.
	* resolv/resolv-internal.h (__inet_pton_length): Declare.
	* resolv/inet_pton (__inet_pton_length): Rename from __inet_pton.
	Add length argument.
	(__inet_pton): New function.
	(inet_pton4): Add length argument.
	(hex_digit_value): New function.
	(inet_pton6): Add length argument.  Call hex_digit_value.  Use
	memmove and memset to fill :: gap.
	* resolv/Makefile (tests, tsts-static, tests-internal): Add
	tst-inet_pton.
	* resolv/tst-inet_pton.c: New file.
	* support/Makefile (libsupport-routines): Add xmprotect.
	* support/xunistd.h (xmprotect): Declare.
	* support/xmprotect.c: New file.

2017-06-21  Florian Weimer  <fweimer@redhat.com>

	Add IPv6 getaddrinfo coverage to tst-inet6_scopeid_pton.c.
	* inet/tst-inet6_scopeid_pton.c: Switch to <support/test-driver.c>.
	(call_gai, check_ai): New functions.
	(expect_failure, expect_success): Use them.  Add logging.

2017-06-21  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile
	(sysdep_routines): Add memchr_power8.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(memchr): Add __memchr_power8 to list of memchr functions.
	* sysdeps/powerpc/powerpc64/multiarch/memchr-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memchr.c
	(memchr): Add __memchr_power8 to ifunc list.
	* sysdeps/powerpc/powerpc64/power8/memchr.S: New file.

2017-06-21  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/s_llrint.S
	(__llrintf): Define as strong alias of __llrint.
	(llrintf):  Define as weak alias of __llrint.
	(__lrintf): Define as strong alias of __llrint.
	(lrintf):  Define as weak alias of __llrint.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_llrint.S:  Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llrintf.S:  Remove file content.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrintf.c: New file.

2017-06-20  Zack Weinberg  <zackw@panix.com>

	[BZ #2489]
	* bits/signum-generic.h: Renamed from bits/signum.h.
	Add proper multiple include guard and misuse check.
	Define __SIGRTMIN = __SIGRTMAX = 32, and define _NSIG = __SIGRTMAX+1.
	Move definition of SIGIO to "archaic names for compatibility" section.
	* bits/signum.h: New file which just includes bits/signum-generic.h.
	* sysdeps/unix/bsd/bits/signum.h
	* sysdeps/unix/sysv/linux/bits/signum.h
	* sysdeps/unix/sysv/linux/alpha/bits/signum.h
	* sysdeps/unix/sysv/linux/hppa/bits/signum.h
	* sysdeps/unix/sysv/linux/mips/bits/signum.h
	* sysdeps/unix/sysv/linux/sparc/bits/signum.h
	Just include <bits/signum-generic.h> and then add or adjust
	signal constants.  Do not define SIGUNUSED, SIGRTMIN, or SIGRTMAX.

	* signal/Makefile: Install bits/signum-generic.h.
	* signal/signal.h: Define SIGRTMIN and SIGRTMAX here.

	* sysdeps/generic/siglist.h: SIGSYS and SIGWINCH are
	universal.  Prefer SIGPOLL to SIGIO. Simplify #ifdeffage.

	* sysdeps/unix/sysv/linux/tst-signal-numbers.sh: New test.
	* sysdeps/unix/sysv/linux/Makefile: Run it.

2017-06-20  Zack Weinberg  <zackw@panix.com>

	* locale/xlocale.h: Rename to...
	* locale/bits/types/__locale_t.h: ...here.  Adjust commentary.
	Only define struct __locale_struct and __locale_t, not locale_t.
	* locale/bits/types/locale_t.h: New file; define locale_t here.
	* locale/Makefile (headers): Update to match.

	* include/xlocale.h: Delete wrapper.
	* include/bits/types/__locale_t.h: New wrapper.
	* include/bits/types/locale_t.h: New wrapper.

	* ctype/ctype.h, include/printf.h, include/time.h
	* locale/langinfo.h, locale/locale.h, stdlib/monetary.h
	* stdlib/stdlib.h, string/string.h, string/strings.h, time/time.h
	* wcsmbs/wchar.h, wctype/wctype.h: Use bits/types/locale_t.h.
	Correct outdated comments regarding the standardization status of
	the functions that take locale_t arguments.

	* stdlib/strtod_l.c, stdlib/strtof_l.c, stdlib/strtol_l.c
	* stdlib/strtold_l.c, stdlib/strtoul_l.c, stdlib/strtoull_l.c
	* sysdeps/ieee754/ldbl-128ibm/strtold_l.c
	* sysdeps/ieee754/ldbl-64-128/strtold_l.c
	* wcsmbs/wcstod.c, wcsmbs/wcstod_l.c, wcsmbs/wcstof.c
	* wcsmbs/wcstof_l.c, wcsmbs/wcstold.c, wcsmbs/wcstold_l.c:
	Don't include xlocale.h. If necessary, include locale.h instead.

	* stdlib/strtold_l.c: Unconditionally include wchar.h.

	* ctype/ctype-c99_l.c, ctype/ctype.h, ctype/ctype_l.c
	* include/monetary.h, include/stdlib.h, include/time.h
	* include/wchar.h, locale/duplocale.c, locale/freelocale.c
	* locale/global-locale.c, locale/langinfo.h, locale/locale.h
	* locale/localeinfo.h, locale/newlocale.c
	* locale/nl_langinfo_l.c, locale/uselocale.c
	* localedata/bug-usesetlocale.c, localedata/tst-xlocale2.c
	* stdio-common/vfscanf.c, stdlib/monetary.h, stdlib/stdlib.h
	* stdlib/strfmon_l.c, stdlib/strtod_l.c, stdlib/strtof_l.c
	* stdlib/strtol.c, stdlib/strtol_l.c, stdlib/strtold_l.c
	* stdlib/strtoll_l.c, stdlib/strtoul_l.c, stdlib/strtoull_l.c
	* string/strcasecmp.c, string/strcoll_l.c, string/string.h
	* string/strings.h, string/strncase.c, string/strxfrm_l.c
	* sysdeps/ieee754/float128/strtof128_l.c
	* sysdeps/ieee754/float128/wcstof128.c
	* sysdeps/ieee754/float128/wcstof128_l.c
	* sysdeps/ieee754/ldbl-128ibm/strtold_l.c
	* sysdeps/ieee754/ldbl-64-128/strtold_l.c
	* sysdeps/ieee754/ldbl-opt/nldbl-compat.c
	* sysdeps/ieee754/ldbl-opt/nldbl-strfmon_l.c
	* sysdeps/ieee754/ldbl-opt/nldbl-strtold_l.c
	* sysdeps/ieee754/ldbl-opt/nldbl-wcstold_l.c
	* sysdeps/powerpc/powerpc32/power7/strcasecmp.S
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S
	* sysdeps/x86_64/strcasecmp_l-nonascii.c
	* sysdeps/x86_64/strncase_l-nonascii.c, time/strftime_l.c
	* time/strptime_l.c, time/time.h, wcsmbs/mbsrtowcs_l.c
	* wcsmbs/wchar.h, wcsmbs/wcscasecmp.c, wcsmbs/wcsncase.c
	* wcsmbs/wcstod.c, wcsmbs/wcstod_l.c, wcsmbs/wcstof.c
	* wcsmbs/wcstof_l.c, wcsmbs/wcstol_l.c, wcsmbs/wcstold.c
	* wcsmbs/wcstold_l.c, wcsmbs/wcstoll_l.c, wcsmbs/wcstoul_l.c
	* wcsmbs/wcstoull_l.c, wctype/iswctype_l.c
	* wctype/towctrans_l.c, wctype/wcfuncs_l.c
	* wctype/wctrans_l.c, wctype/wctype.h, wctype/wctype_l.c:
	Change all uses of __locale_t to locale_t.

2017-06-20  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/openat.c (__libc_openat): Build only
	for !__OFF_T_MATCHES_OFF64_T.
	* sysdeps/unix/sysv/linux/openat64.c (__libc_openat64): New
	implementation based on open64.
	* sysdeps/unix/sysv/linux/wordsize-64/openat.c: Remove file.
	* sysdeps/unix/sysv/linux/wordsize-64/openat64.c: Likewise.

2017-06-20  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-tunables.list: Move x86 specific tunables to ...
	* sysdeps/x86/dl-tunables.list: Here.  New file.

2017-06-20  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21635]
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Makefile
	[$(subdir) = conform] (conformtest-xfail-conds): New variable.
	* conform/data/signal.h-data (uc_mcontext): XFAIL for
	powerpc32-linux.
	* conform/data/ucontext.h-data (uc_mcontext): Likewise.

	[BZ #21634]
	* sysdeps/unix/sysv/linux/ia64/Makefile [$(subdir) = conform]
	(conformtest-xfail-conds): New variable.
	* conform/data/signal.h-data (uc_sigmask): XFAIL for ia64-linux.
	* conform/data/ucontext.h-data (uc_sigmask): Likewise.

2017-06-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* benchtests/powf-inputs: Add reduced trace from wrf.

2017-06-20  H.J. Lu  <hongjiu.lu@intel.com>
	    Erich Elsen  <eriche@google.com>

	* elf/dl-tunables.list (tune): Add ifunc,
	x86_non_temporal_threshold,
	x86_data_cache_size and x86_shared_cache_size.
	* manual/tunables.texi: Document glibc.tune.ifunc,
	glibc.tune.x86_data_cache_size, glibc.tune.x86_shared_cache_size
	and glibc.tune.x86_non_temporal_threshold.
	* sysdeps/unix/sysv/linux/x86/dl-sysdep.c: New file.
	* sysdeps/x86/cpu-tunables.c: Likewise.
	* sysdeps/x86/cacheinfo.c
	(init_cacheinfo): Check and get data cache size, shared cache
	size and non temporal threshold from cpu_features.
	* sysdeps/x86/cpu-features.c [HAVE_TUNABLES] (TUNABLE_NAMESPACE):
	New.
	[HAVE_TUNABLES] Include <unistd.h>.
	[HAVE_TUNABLES] Include <elf/dl-tunables.h>.
	[HAVE_TUNABLES] (TUNABLE_CALLBACK (set_ifunc)): Likewise.
	[HAVE_TUNABLES] (init_cpu_features): Use TUNABLE_GET to set
	IFUNC selection, data cache size, shared cache size and non
	temporal threshold.
	* sysdeps/x86/cpu-features.h (cpu_features): Add data_cache_size,
	shared_cache_size and non_temporal_threshold.

2017-06-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* benchtests/README: Describe workload feature.
	* benchtests/bench-skeleton.c (main): Add support for
	benchmarking traces from workloads.

2017-06-20  Zack Weinberg  <zackw@panix.com>

	* string/string.h (__mempcpy_inline): Delete.
	* sysdeps/x86_64/multiarch/mempcpy.c
	* sysdeps/x86_64/multiarch/stpcpy.c:
	Define NO_MEMPCPY_STPCPY_REDIRECT and __NO_STRING_INLINES
	before including string.h.

2017-06-20  Paul A. Clarke  <pc@us.ibm.com>

	* benchtests/Makefile (bench-math): Add powf.
	* benchtests/powf-inputs: New file.

2017-06-20  Zack Weinberg  <zackw@panix.com>

	* bits/string.h, string/bits/string.h
	* sysdeps/aarch64/bits/string.h
	* sysdeps/m68k/m680x0/m68020/bits/string.h
	* sysdeps/s390/bits/string.h, sysdeps/sparc/bits/string.h
	* sysdeps/x86/bits/string.h: Delete file.

	* string/string.h: Don't include bits/string.h.
	* string/bits/string3.h: Rename to bits/string_fortified.h.
	No need to undef various symbols that the removed headers
	might have defined as macros.
	* string/Makefile (headers): Remove bits/string.h, change
	bits/string3.h to bits/string_fortified.h.
	* string/string-inlines.c: Update commentary.  Remove definitions
	of various macros that nothing looks at anymore.  Don't directly
	include bits/string.h. Set _STRING_INLINE_unaligned here, based on
	compiler-predefined macros.
	* string/strncat.c: If STRNCAT is not defined, or STRNCAT_PRIMARY
	_is_ defined, provide internal hidden alias __strncat.
	* include/string.h: Declare internal hidden alias __strncat.
	Only forward __stpcpy to __builtin_stpcpy if __NO_STRING_INLINES is
	not defined.
	* include/bits/string3.h: Rename to bits/string_fortified.h,
	update to match above.

	* sysdeps/i386/string-inlines.c: Define compat symbols for
	everything formerly defined by sysdeps/x86/bits/string.h.
	Make existing definitions into compat symbols as well.
	Remove some no-longer-necessary messing around with macros.

	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy.c
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy.c
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c
	* sysdeps/s390/multiarch/mempcpy.c
	No need to define _HAVE_STRING_ARCH_mempcpy.
	Do define __NO_STRING_INLINES and NO_MEMPCPY_STPCPY_REDIRECT.

	* sysdeps/i386/i686/multiarch/strncat-c.c
	* sysdeps/s390/multiarch/strncat-c.c
	* sysdeps/x86_64/multiarch/strncat-c.c
	Define STRNCAT_PRIMARY.  Don't change definition of libc_hidden_def.

2017-06-20  Rical Jasan  <ricaljasan@pacific.net>

	* manual/lang.texi (LDBL_MANT_DIG): Add annotation.
	(LDBL_DIG): Likewise.
	(LDBL_MIN_EXP): Likewise.
	(LDBL_MIN_10_EXP): Likewise.
	(LDBL_MAX_EXP): Likewise.
	(LDBL_MAX_10_EXP): Likewise.
	(LDBL_MAX): Likewise.
	(LDBL_MIN): Likewise.
	(LDBL_EPSILON): Likewise.
	(FLT_ROUNDS): Change standard from ISO to C90.
	(FLT_RADIX): Likewise.
	(FLT_MANT_DIG, DBL_MANT_DIG): Likewise.
	(FLT_DIG, DBL_DIG): Likewise.
	(FLT_MIN_EXP, DBL_MIN_EXP): Likewise.
	(FLT_MIN_10_EXP, DBL_MIN_10_EXP): Likewise.
	(FLT_MAX_EXP, DBL_MAX_EXP): Likewise.
	(FLT_MAX_10_EXP, DBL_MAX_10_EXP): Likewise.
	(FLT_MAX, DBL_MAX): Likewise.
	(FLT_MIN, DBL_MIN): Likewise.
	(FLT_EPSILON, DBL_EPSILON): Likewise.

2017-06-19  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/atomic-machine.h (R10K_BEQZ_INSN): Remove.
	[__GNUC_PREREQ (4, 8) || __mips16]: Make code unconditional.
	[!__GNUC_PREREQ (4, 8) && !__mips16]: Remove conditional code.
	* sysdeps/mips/math-tests.h
	[_MIPS_SIM != _ABIO32 && !__GNUC_PREREQ (4, 9)]: Remove
	conditional code.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* intl/dcigettext.c (DCIGETTEXT): Do not make copy of localename.
	It cannot change while __libc_setlocale_lock is acquired.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* elf/rtld.c (audit_list_string): New variable.
	(audit_list): Update comment.
	(struct audit_list_iter): Define.
	(audit_list_iter_init, audit_list_iter_next): New function.
	(dl_main): Use struct audit_list_iter to process audit modules.
	(process_dl_audit): Call dso_name_valid_for_suid.
	(process_envvars): Set audit_list_string instead of calling
	process_dl_audit.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* elf/rtld.c (SECURE_NAME_LIMIT, SECURE_PATH_LIMIT): Define.
	(dso_name_valid_for_suid): New function.
	(handle_ld_preload): Likewise.
	(dl_main): Call it.  Remove alloca.

2017-06-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21625]
	* posix/sys/wait.h (strust rusage forward declaration): Change
	[__USE_XOPEN_EXTENDED] conditional to [__USE_XOPEN_EXTENDED &&
	!__USE_XOPEN2K].
	(wait3): Likewise.

	* configure.ac (libc_cv_compiler_ok): Require GCC 4.9 or later.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Document
	requirement for GCC 4.9 or later.
	* INSTALL: Regenerated.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	[BZ #21624]
	CVE-2017-1000366
	* elf/rtld.c (process_envvars): Ignore LD_LIBRARY_PATH for
	__libc_enable_secure.

2017-06-19  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #21539]
	* NEWS: Mention s390 ptrace request changes.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h
	(PTRACE_GETREGS, PTRACE_SETREGS, PTRACE_GETFPREGS,
	PTRACE_SETFPREGS): Remove enum constant.
	(PT_GETREGS, PT_SETREGS, PT_GETFPREGS, T_SETFPREGS):
	Remove defines.
	(PTRACE_SINGLEBLOCK): New enum constant.
	(PT_STEPBLOCK): New define.
	(PTRACE_PEEKUSR_AREA, PTRACE_POKEUSR_AREA,
	PTRACE_GET_LAST_BREAK, PTRACE_ENABLE_TE, PTRACE_DISABLE_TE,
	PTRACE_TE_ABORT_RAND): New enum constant and define.
	* sysdeps/s390/fpu/fesetenv.c: Remove ptrace.h includes.
	* sysdeps/unix/sysv/linux/s390/tst-ptrace-singleblock.c:
	New file.
	* sysdeps/unix/sysv/linux/s390/Makefile: Add test.

2017-06-16  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c (res_vinit_1): Use getline to read from the
	configuration file.
	(__res_vinit): Adjust.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c (res_vinit_1): New function.
	(__res_vinit): Call it.  Handle file open and memory allocation
	failures.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname3_r): Propagate
	erno from __res_maybe_init failure.
	(_nss_dns_gethostbyname4_r): Likewise.
	(_nss_dns_gethostbyaddr2_r): Likewise.
	* resolv/nss_dns/dns-network.c (_nss_dns_getnetbyname_r): Likewise.
	(_nss_dns_getnetbyaddr_r): Likewise.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c: Reformat to GNU style.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c (sort_mask_chars, ISSORTMASK): Remove.
	(is_sort_mask): New function.
	(__res_vinit): Use it.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c (res_setoptions): Remove DEBUG preprocessor
	conditionals.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* resolv/res-close.c: New file.
	* resolv/res_init.c (__res_iclose, res_nclose)
	(res_thread_freeres): Remove definitions.
	* resolv/Makefile (routines): Add res-close.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_randomid.c: New file.
	* resolv/res_init.c (res_randomid): Remove definition.
	* resolv/Makefile (routines): Add res_randomid.

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* include/resolv.h (__res_vinit): Declare as hidden.
	* resolv/res_init.c (res_ninit): Remove __res_vinit declaration.
	* resolv/res_libc.c (res_init): Likewise.

2017-06-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21457]
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h [__x86_64__] (struct
	_libc_xmmreg): Use __ctx in defining field.

	[BZ #21597]
	* signal/signal.h (siginterrupt): Make declaration conditional on
	[__USE_XOPEN_EXTENDED || __USE_MISC].

	[BZ #21584]
	* signal/signal.h: Make includes of <bits/sigstack.h> and
	<bits/ss_flags.h> conditional on [__USE_XOPEN_EXTENDED ||
	__USE_MISC].
	(sigaltstack): Make declaration conditional on
	[__USE_XOPEN_EXTENDED || __USE_MISC].

	[BZ #21575]
	* resource/bits/types/struct_rusage.h: New file.
	* include/bits/types/struct_rusage.h: Likewise.
	* bits/resource.h (struct rusage): Include
	<bits/types/struct_rusage.h> instead of defining here.
	* sysdeps/unix/sysv/linux/bits/resource.h (struct rusage):
	Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/resource.h (struct rusage):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/resource.h (struct rusage):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/resource.h (struct rusage):
	Likewise.
	* resource/Makefile (headers): Add bits/types/struct_rusage.h.
	* posix/sys/wait.h [__USE_XOPEN_EXTENDED && !__USE_XOPEN2K8]:
	Include <bits/types/struct_rusage.h>

2017-06-19  Florian Weimer  <fweimer@redhat.com>

	* malloc/dynarray.h: Use libc_hidden_proto only for !_ISOMAC.

2017-06-19  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/x86_64/multiarch/rawmemchr-sse2.S: Fix typo.

2017-06-19  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* scripts/gen-tunables.awk: Avoid multi-dimensional arrays.

2017-06-19  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #21537]
	* sysdeps/s390/s390-32/sysdep.h (JUMPTARGET, SYSCALL_PIC_SETUP):
	Check SHARED instead of PIC.
	(SYSCALL_PIC_SETUP): Add missing semicolons.
	* sysdeps/s390/s390-64/sysdep.h (JUMPTARGET, SYSCALL_PIC_SETUP):
	Check SHARED instead of PIC.
	* sysdeps/unix/sysv/linux/s390/s390-32/__makecontext_ret.S
	(__makecontext_ret): Adjust code to jump to exit.

2017-06-19  Christian Borntraeger  <borntraeger@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/syscall.S (syscall):
	Simplify code by always using SVC 0 instead of EX.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscall.S: Likewise.

2017-06-16  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/Versions (ld): Remove _dl_out_of_memory.

2017-06-16  Joseph Myers  <joseph@codesourcery.com>

	* timezone/private.h: Update from tzcode 2017b.
	* timezone/tzfile.h: Likewise.
	* timezone/tzselect.ksh: Likewise.
	* timezone/zdump.c: Likewise.
	* timezone/zic.c: Likewise.
	* timezone/Makefile (tz-cflags): Add -D_ISOMAC
	-DTZ_DOMAIN='"libc"' -include $(common-objpfx)config.h.
	* time/tzset.c (SECSPERDAY): New macro.

2017-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/string.texi (strdup): Complete header and standards
	annotation.
	(strncpy): Likewise.

2017-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/arith.texi (FP_NAN): Add or complete header and standard
	annotations.
	(FP_INFINITE): Likewise.
	(FP_ZERO): Likewise.
	(FP_SUBNORMAL): Likewise.
	(FP_NORMAL): Likewise.
	(SNAN): Likewise.
	(SNANL): Likewise.
	(totalorderf): Likewise.
	(totalorderl): Likewise.
	(totalordermagf): Likewise.
	(totalordermagl): Likewise.
	(_Complex_I): Likewise.
	(I): Likewise.

2017-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/argp.texi (ARGP_HELP_USAGE): Add missing header and
	standard annotation.
	(ARGP_HELP_SHORT_USAGE): Likewise.
	(ARGP_HELP_SEE): Likewise.
	(ARGP_HELP_LONG): Likewise.
	(ARGP_HELP_PRE_DOC): Likewise.
	(ARGP_HELP_POST_DOC): Likewise.
	(ARGP_HELP_DOC): Likewise.
	(ARGP_HELP_BUG_ADDR): Likewise.
	(ARGP_HELP_LONG_ONLY): Likewise.
	(ARGP_HELP_EXIT_ERR): Likewise.
	(ARGP_HELP_EXIT_OK): Likewise.
	(ARGP_HELP_STD_ERR): Likewise.
	(ARGP_HELP_STD_USAGE): Likewise.
	(ARGP_HELP_STD_HELP): Likewise.

2017-06-15  Rical Jasan  <ricaljasan@pacific.net>

	* manual/Makefile: Generate summary.texi with summary.pl.  Force
	use of the C locale.  Update Perl dependency comment.
	* manual/header.texi: Update reference to summary.awk.
	* manual/macros.texi: Refer authors to `summary.pl --help'.
	* manual/summary.awk: Remove file.
	* manual/summary.pl: New file.  Generate summary.texi, and check
	for @standards-related syntax errors.
	* manual/argp.texi: Convert header and standards @comments to
	@standards.
	* manual/arith.texi: Likewise.
	* manual/charset.texi: Likewise.
	* manual/conf.texi: Likewise.
	* manual/creature.texi: Likewise.
	* manual/crypt.texi: Likewise.
	* manual/ctype.texi: Likewise.
	* manual/debug.texi: Likewise.
	* manual/errno.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/getopt.texi: Likewise.
	* manual/job.texi: Likewise.
	* manual/lang.texi: Likewise.
	* manual/llio.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/math.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/pattern.texi: Likewise.
	* manual/pipe.texi: Likewise.
	* manual/process.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/search.texi: Likewise.
	* manual/setjmp.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/socket.texi: Likewise.
	* manual/startup.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* manual/sysinfo.texi: Likewise.
	* manual/syslog.texi: Likewise.
	* manual/terminal.texi: Likewise.
	* manual/threads.texi: Likewise.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.

2017-06-15  Rical Jasan  <ricaljasan@pacific.net>

	* manual/macros.texi (@standards): New macro.  Provide placeholder
	for header and standards annotations.
	(@standardsx): New macro.  Likewise, for lists of @*x elements.

2017-06-15  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* io/Makefile (CFLAGS-sync_file_range.c): Remove rule.
	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-sync_file_range.c): New
	rule.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Remove
	sync_file_range.

	 * support/support_test_main.c (support_test_main):  Use optstring
	 member for option string in getopt_long.
	 * support/test-driver.c: Add comment about CMDLINE_OPTSTRING.
	 (CMDLINE_OPTSTRING): New define.
	 * support/test-driver.h (test_config): Add optstring member.

2017-06-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcspn-sse2, strpbrk-sse2 and strspn-sse2.
	* sysdeps/x86_64/strcspn.S (STRPBRK_P): Removed.
	Check USE_AS_STRPBRK instead of STRPBRK_P.
	* sysdeps/x86_64/strpbrk.S (USE_AS_STRPBRK): New.
	* sysdeps/x86_64/multiarch/ifunc-sse4_2.h: New file.
	* sysdeps/x86_64/multiarch/strcspn-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strcspn.c: Likewise.
	* sysdeps/x86_64/multiarch/strpbrk-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strpbrk.c: Likewise.
	* sysdeps/x86_64/multiarch/strspn-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strspn.c: Likewise.
	* sysdeps/x86_64/multiarch/strcspn.S: Removed.
	* sysdeps/x86_64/multiarch/strpbrk.S: Likewise.
	* sysdeps/x86_64/multiarch/strspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strpbrk-c.c: Remove "#ifdef SHARED"
	and "#endif".

2017-06-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/wcscpy.S: Removed.
	* sysdeps/x86_64/multiarch/wcscpy.c: New file.

2017-06-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcat-sse2.
	* sysdeps/x86_64/multiarch/strcat-sse2.S: New file.
	* sysdeps/x86_64/multiarch/strcat.c: Likewise.
	* sysdeps/x86_64/multiarch/strncat.c: Likewise.
	* sysdeps/x86_64/multiarch/strcat.S: Removed.
	* sysdeps/x86_64/multiarch/strncat.S: Likewise.

2017-06-15  H.J. Lu  <hongjiu.lu@intel.com>
	    Erich Elsen  <eriche@google.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memcmp-sse2.
	* sysdeps/x86_64/multiarch/ifunc-memcmp.h: New file.
	* sysdeps/x86_64/multiarch/memcmp-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp.c: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp.c: Likewise.
	* sysdeps/x86_64/multiarch/memcmp.S: Removed.
	* sysdeps/x86_64/multiarch/wmemcmp.S: Likewise.

2017-06-15  H.J. Lu  <hongjiu.lu@intel.com>
	    Erich Elsen  <eriche@google.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memset-sse2-unaligned-erms, and memset_chk-nonshared.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add test for __memset_chk_erms.
	Update comments.
	* sysdeps/x86_64/multiarch/ifunc-memset.h: New file.
	* sysdeps/x86_64/multiarch/memset-sse2-unaligned-erms.S: Likewise.
	* sysdeps/x86_64/multiarch/memset.c: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk-nonshared.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Removed.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S
	(__memset_chk_erms): New function.

2017-06-15  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* configure.ac(--enable-tunables): Enable by default.
	* configure: Regenerate.
	* NEWS: Mention change.
	* manual/install.texi (enable-tunables): Adjust documentation.
	* INSTALL: Regenerate.

2017-06-14  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #18988]
	* benchtests/thread_create-inputs: New file.
	* benchtests/thread_create-source.c: Likewise.
	* support/xpthread_attr_setguardsize.c: Likewise.
	* support/Makefile (libsupport-routines): Add
	xpthread_attr_setguardsize object.
	* support/xthread.h: Add xpthread_attr_setguardsize prototype.
	* benchtests/Makefile (bench-pthread): Add thread_create.
	* nptl/allocatestack.c (allocate_stack): Call mmap with PROT_NONE and
	then mprotect the required area.
	(guard_position): New function.
	(setup_stack_prot): Likewise.

2017-06-14  H.J. Lu  <hongjiu.lu@intel.com>
	    Erich Elsen  <eriche@google.com>
	    Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memmove-sse2-unaligned-erms, memcpy_chk-nonshared,
	mempcpy_chk-nonshared and memmove_chk-nonshared.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add tests for __memmove_chk_erms,
	__memcpy_chk_erms and __mempcpy_chk_erms.  Update comments.
	* sysdeps/x86_64/multiarch/ifunc-memmove.h: New file.
	* sysdeps/x86_64/multiarch/memcpy.c: Likewise.
	* sysdeps/x86_64/multiarch/memcpy_chk-nonshared.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/memmove-sse2-unaligned-erms.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk-nonshared.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.c: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk-nonshared.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S: Removed.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
	(__mempcpy_chk_erms): New function.
	(__memmove_chk_erms): Likewise.
	(__memcpy_chk_erms): New alias.

2017-06-14  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/i386/i686/multiarch/strcspn-c.c: Add IS_IN (libc) guard.
	* sysdeps/i386/i686/multiarch/varshift.c: Likewise.

2017-06-14  Zack Weinberg  <zackw@panix.com>

	* stdlib/errno.h: Remove __need_Emath and __need_error_t logic.
	Reorganize file.  Declare errno here.  When __ASSEMBLER__ is
	defined, don't declare anything other than the E-constants.

	* include/errno.h: Change conditional for exposing internal
	declarations to (not _ISOMAC and not __ASSEMBLER__).
	* bits/errno.h: Remove logic for __need_Emath.  Document
	requirements for a port-specific bits/errno.h.

	* sysdeps/unix/sysv/linux/bits/errno.h
	* sysdeps/unix/sysv/linux/alpha/bits/errno.h
	* sysdeps/unix/sysv/linux/hppa/bits/errno.h
	* sysdeps/unix/sysv/linux/mips/bits/errno.h
	* sysdeps/unix/sysv/linux/sparc/bits/errno.h:
	Add multiple-include guard and check against improper inclusion.
	Remove __need_Emath logic.  Don't declare errno here.  Ensure all
	constants are defined as simple integer literals.  Consistent
	formatting.
	* sysdeps/mach/hurd/errnos.awk: Likewise.  Only define error_t and
	enum __error_t_codes if __ASSEMBLER__ is not defined.
	* sysdeps/mach/hurd/bits/errno.h: Regenerate.

	* argp/argp.h, string/argz.h: Don't define __need_error_t before
	including errno.h.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf-sse2.S
	* sysdeps/i386/i686/fpu/multiarch/s_sincosf-sse2.S
	* sysdeps/i386/i686/fpu/multiarch/s_sinf-sse2.S
	* sysdeps/x86_64/fpu/s_cosf.S
	* sysdeps/x86_64/fpu/s_sincosf.S
	* sysdeps/x86_64/fpu/s_sinf.S:
	Just include errno.h; don't define __need_Emath or include
	bits/errno.h directly.

2017-06-14  Zack Weinberg  <zackw@panix.com>

	* bits/uio_lim.h, sysdeps/unix/sysv/linux/bits/uio_lim.h
	* bits/uio-ext.h, sysdeps/unix/sysv/linux/bits/uio-ext.h: New file.
	* bits/uio.h, sysdeps/unix/sysv/linux/bits/uio.h: Delete file.

	* include/bits/xopen_lim.h: Use bits/uio_lim.h to get the value
	for IOV_MAX.
	* misc/Makefile: Install bits/uio-ext.h and bits/uio_lim.h.
	Don't install bits/uio.h.
	* misc/sys/uio.h: Don't include bits/uio.h.  Do include
	bits/types/struct_iovec.h and bits/uio_lim.h.  Set UIO_MAXIOV
	based on __IOV_MAX. Under __USE_GNU, also include bits/uio-ext.h.

	* stdio-common/stdio_lim.h.in: Remove logic for __need_FOPEN_MAX
	and __need_IOV_MAX.  Don't define IOV_MAX at all.
	* Makerules (stdio_lim.h): Remove logic for setting IOV_MAX.

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h:
	Include bits/types/struct_iovec.h, not bits/uio.h.
	Use __ssize_t, not ssize_t, in function prototypes.
	Don't use hard TAB for double space after period in comments.

2017-06-14  Alan Modra  <amodra@gmail.com>

	* elf/elf.h (PPC64_OPT_LOCALENTRY): Define.
	* sysdeps/alpha/dl-machine.h (elf_machine_fixup_plt): Add
	refsym and sym parameters.  Adjust callers.
	* sysdeps/aarch64/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/arm/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/generic/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/hppa/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/i386/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/ia64/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/m68k/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/microblaze/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/mips/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/nios2/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h (elf_machine_fixup_plt):
	Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/sh/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/tile/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_fixup_plt): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.c (_dl_error_localentry): New.
	(_dl_reloc_overflow): Increase buffser size.  Formatting.
	* sysdeps/powerpc/powerpc64/dl-machine.h (ppc64_local_entry_offset):
	Delete reloc param, add refsym and sym.  Check optimized plt
	call stubs for localentry:0 functions.  Adjust callers.
	(elf_machine_fixup_plt, elf_machine_plt_conflict): Add refsym
	and sym parameters.  Adjust callers.
	(_dl_reloc_overflow): Move attribute.
	(_dl_error_localentry): Declare.
	* elf/dl-runtime.c (_dl_fixup): Save original sym.  Pass
	refsym and sym to elf_machine_fixup_plt.
	* elf/testobj6.c (preload): Call printf.

2017-06-14  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/sysdep.h: Formatting.
	(NOPS, ENTRY_3): New macros.
	(ENTRY): Rewrite.
	(ENTRY_TOCLESS): Define.
	(EALIGN, EALIGN_W_0, EALIGN_W_1, EALIGN_W_2, EALIGN_W_4, EALIGN_W_5,
	EALIGN_W_6, EALIGN_W_7, EALIGN_W_8): Delete.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Replace EALIGN with ENTRY.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_ceil.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_ceilf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floor.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floorf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyint.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rint.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_round.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_roundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_trunc.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_truncf.S: Likewise.
	* sysdeps/powerpc/powerpc64/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strstr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/e_expf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_cosf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_sinf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strcasestr.S: Likewise.
	* sysdeps/powerpc/powerpc64/addmul_1.S: Use ENTRY_TOCLESS.
	* sysdeps/powerpc/powerpc64/cell/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_copysignl.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_fabsl.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/lshift.S: Likewise.
	* sysdeps/powerpc/powerpc64/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/mul_1.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_ceil.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_ceilf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_floor.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_floorf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_round.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_roundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_trunc.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_truncf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/add_n.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memmove.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/mempcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/rawmemchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S (strcasecmp_l):
	Likewise.
	* sysdeps/powerpc/powerpc64/power7/strchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strchrnul.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strnlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strncpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strnlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strspn.S: Likewise.
	* sysdeps/powerpc/powerpc64/power9/strcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power9/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/strchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/strcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/strlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/ppc-mcount.S: Store LR earlier.  Don't
	add nop when SHARED.
	* sysdeps/powerpc/powerpc64/start.S: Fix comment.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-power8.S (ENTRY): Don't
	define.
	(ENTRY_TOCLESS): Define.
	* sysdeps/powerpc/powerpc32/sysdep.h (ENTRY_TOCLESS): Define.
	* sysdeps/powerpc/fpu/s_fma.S: Use ENTRY_TOCLESS.
	* sysdeps/powerpc/fpu/s_fmaf.S: Likewise.

2017-06-14  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/multiarch/strncpy-power7.S: Define
	MEMSET_is_local.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-power8.S: Likewise.
	Define MEMSET.
	* sysdeps/powerpc/powerpc64/multiarch/strstr-power7.S: Define
	STRLEN_is_local, STRNLEN_is_local, and STRCHR_is_local.
	* sysdeps/powerpc/powerpc64/power7/strstr.S: Likewise.  Don't add
	nop after local calls.
	* sysdeps/powerpc/powerpc64/power7/strncpy.S: Define MEMSET_is_local.
	Don't add nop after local call.
	* sysdeps/powerpc/powerpc64/power8/strncpy.S: Likewise.  Add missing
	CALL_MCOUNT.

2017-06-14  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/sysdep.h: Formatting.
	(FUNC_LABEL): Rename from DOT_LABEL.
	(ENTRY_1): Use FUNC_LABEL and remove leading space from label.
	Use .p2align rather than .align.
	(TRACEBACK, TRACEBACK_MASK): Use .p2align rather than .align.
	(ABORT_TRANSACTION): Likewise.
	(ENTRY_1, ENTRY_2, END_2, LOCALENTRY): Remove unnecessary semicolons,
	particularly at end.  Add semicolon at invocation as necessary.
	(TRACEBACK, TRACEBACK_MASK, PSEUDO, PSEUDO_NOERRNO): Likewise.
	(PSEUDO_ERRVAL, PPC64_LOAD_FUNCPTR, OPD_ENT): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-power8.S (ENTRY,
	END): Adjust to suit.

2017-06-14  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/sysdep.h: (FRAME_BACKCHAIN,
	FRAME_CR_SAVE, FRAME_LR_SAVE): Move out of conditional.
	(FRAME_PARM1_SAVE, FRAME_PARM2_SAVE, FRAME_PARM3_SAVE,
	FRAME_PARM4_SAVE, FRAME_PARM5_SAVE, FRAME_PARM6_SAVE,
	FRAME_PARM7_SAVE, FRAME_PARM8_SAVE, FRAME_PARM9_SAVE): Delete.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S: Replace
	uses of FRAME_PARM[1-9]_SAVE with FRAME_PARM_SAVE plus offset.

2017-06-14  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/sysdep.h: (call_mcount_parm_offset): Delete.
	(SAVE_ARG, REST_ARG, CFI_SAVE_ARG): Correct.

2017-06-13  Gordana Cmiljanovic  <gordana.cmiljanovic@imgtec.com>

	[BZ #21548]
	* sysdeps/unix/sysv/linux/mips/getcontext.S: Define MCONTEXT_SZGREG as
	8 and use it when copying general purpose registers.
	* sysdeps/unix/sysv/linux/mips/makecontext.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/Makefile: Include new test for
	mips o32.
	* sysdeps/unix/sysv/linux/mips/mips32/bug-getcontext-mips-gp.c: Added
	new test for mips o32.
	* sysdeps/unix/sysv/linux/mips/setcontext.S: Define MCONTEXT_SZGREG as
	8 and use it when copying general purpose registers.
	* sysdeps/unix/sysv/linux/mips/swapcontext.S: Likewise.

2017-06-13  Florian Weimer  <fweimer@redhat.com>

	* configure.ac (find_cxx_header): Suppress compiler error message.

2017-06-13  Florian Weimer  <fweimer@redhat.com>

	* malloc/dynarray-skeleton.c: List begin/end as defined functions.
	(DYNARRAY_PREFIX##begin, DYNARRAY_PREFIX##end): New functions.
	* malloc/tst-dynarray-shared.h (CHECK_EMPTY): Add tests for
	begin/end.
	* malloc/tst-dynarray.c (test_int): Test dynarray_int_begin,
	dynarray_int_end.
	(test_str): Test dynarray_str_begin, dynarray_str_end.

2017-06-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21573]
	* Makerules [$(c++-bits-std_abs-h) != ""] (before-compile): Add
	$(common-objpfx)bits/std_abs.h.
	[$(c++-bits-std_abs-h) != ""] ($(common-objpfx)bits/std_abs.h):
	New target.
	* config.make.in (c++-bits-std_abs-h): New.
	* configure.ac (find_cxx_header): Use "\,$1," with sed.
	(CXX_BITS_STD_ABS_H): New.
	(AC_SUBST(CXX_BITS_STD_ABS_H)): Likewise.
	* configure: Regenerated.

2017-06-13  Zack Weinberg  <zackw@panix.com>

	* posix/bits/cpu-set.h: Correct indentation of preprocessor
	directives.

2017-06-12  Zack Weinberg  <zackw@panix.com>

	* bits/sched.h: Remove __need_schedparam logic and replace with a
	normal multiple-include guard.  Change field name in struct
	sched_param from __sched_priority to sched_priority.  Delete
	everything under #ifndef __cpu_set_t_defined.
	* sysdeps/unix/sysv/linux/bits/sched.h: Likewise.  Also sync with
	kernel sched.h, adding SCHED_ISO and SCHED_DEADLINE constants.

	* posix/sched.h: Include bits/cpu-set.h as well as bits/sched.h.
	For compatibility, #define sched_priority to itself, and #define
	__sched_priority as sched_priority.
	* posix/bits/cpu-set.h: New file containing, verbatim, the code
	that was under #ifndef __cpu_set_t_defined in
	sysdeps/unix/sysv/linux/bits/sched.h.
	* include/bits/cpu-set.h: New wrapper.
	* posix/Makefile: Install bits/cpu-set.h.

2017-06-12  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>
	    Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>
	    Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* math/gen-libm-test.pl (@all_floats): Add ifloat128 and float128.
	(%all_floats_pfx): Add macro prefix for float128 (FLT128).
	* math/libm-test-exp10.inc (pow10_test): Do not test for _FloatN,
	* math/libm-test-isfinite.inc (finite_test): Likewise.
	* math/libm-test-lgamma.inc (gamma_test): Likewise.
	* math/libm-test-nexttoward.inc (nexttoward_test): Likewise.
	(nexttoward_test_data}: Likewise.
	* math/libm-test-remainder.inc (drem_test): Likewise.
	* math/libm-test-scalb.inc (scalb_test): Likewise.
	(scalb_test_data): Likewise.
	* math/libm-test-significand.inc (significand_test): Likewise.
	(significand_test_data): Likewise.
	* math/libm-test-support.c (check_complex): Replace __complex__
	FLOAT with CFLOAT to get the support for old compiler.
	* math/libm-test-support.h (check_complex): Likewise.
	* math/test-double.h (CFLOAT, TEST_FLOATN): New macros.
	* math/test-float.h (CFLOAT, TEST_FLOATN): Likewise.
	* math/test-ldouble.h (CFLOAT, TEST_FLOATN): Likewise.
	* math/test-float128.h: New file.
	* math/test-math-floatn.h: New file.

2017-06-12  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* include/float.h: Allow the definition of macros prefixed with
	FLT128 even if _ISOMAC is defined, but provided that
	__STDC_WANT_IEC_60559_TYPES_EXT__ is defined as a macro.

2017-06-12  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* manual/math.texi (Mathematics): Add description for _FloatN and
	_FloatNx types and mentions that they are not support in glibc for
	any architecture, so far.
	* manual/arith.texi (wcstof, wcstold): Replace the mention to
	stdlib.h with wchar.h.
	(Parsing of Floats): Add descriptions for strtofN and wcstofN.
	(Printing of Floats): Add description for strfromfN.

2017-06-12  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>
	    Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>
	    Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* include/gmp.h (__mpn_construct_float128): New declaration.
	* include/stdlib.h: Include bits/floatn.h for _Float128 tests.
	(__strtof128_l): New declaration.
	(__strtof128_nan): Likewise.
	(__wcstof128_nan): Likewise.
	(__strtof128_internal): Likewise.
	(____strtof128_l_internal): Likewise.
	* include/wchar.h: Include bits/floatn.h for _Float128 tests.
	(__wcstof128_l): New declaration.
	(__wcstof128_internal): Likewise.

	* stdlib/Makefile (bug-strtod2): Link libm too.

	* stdlib/stdlib.h (strtof128): New declaration.
	(strtof128_l): Likewise.

	* stdlib/tst-strtod-nan-locale-main.c: Updated to use
	tst-strtod.h macros to ensure float128 gets tested too.

	* stdlib/tst-strtod-round-skeleton.c (CHOOSE_f128): New macro.

	* stdlib/tst-strtod.h: Include bits/floatn.h for _Float128
	tests.
	(IF_FLOAT128): New macro.
	(GEN_TEST_STRTOD): Update to optionally include _Float128 in
	the tests.
	(STRTOD_TEST_FOREACH): Likewise.

	* sysdeps/ieee754/float128/Makefile: Insert new strtof128 and
	wcstof128 functions into libc.

	* sysdeps/ieee754/float128/Versions: Add exports for the above
	new functions.

	* sysdeps/ieee754/float128/mpn2float128.c: New file.
	* sysdeps/ieee754/float128/strtod_nan_float128.h: New file.
	* sysdeps/ieee754/float128/strtof128.c: New file.
	* sysdeps/ieee754/float128/strtof128_l.c: New file.
	* sysdeps/ieee754/float128/strtof128_nan.c: New file.
	* sysdeps/ieee754/float128/wcstof128.c: New file.
	* sysdeps/ieee754/float128/wcstof128_l.c: New file.
	* sysdeps/ieee754/float128/wcstof128_nan.c: New fike.
	* wcsmbs/Makefile: (CFLAGS-wcstof128.c): Append strtox-CFLAGS.
	(CFLAGS-wcstof128_l): Likewise.

	* wcsmbs/wchar.h: Include bits/floatn.h for _Float128 tests.
	(wcstof128): New declaration.
	(wcstof128_l): Likewise.

2017-06-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21552]
	* signal/signal.h (bsd_signal): Declare if [__USE_XOPEN_EXTENDED],
	not [__USE_XOPEN].
	* conform/Makefile (test-xfail-XPG4/signal.h/conform): Remove.

	[BZ #21550]
	* signal/signal.h (sigwait): Only declare if [__USE_POSIX199506].

2017-06-12  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcpy-sse2 and stpcpy-sse2.
	* sysdeps/x86_64/multiarch/ifunc-unaligned-ssse3.h: New file.
	* sysdeps/x86_64/multiarch/stpcpy-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/stpcpy.c: Likewise.
	* sysdeps/x86_64/multiarch/stpncpy.c: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy.c: Likewise.
	* sysdeps/x86_64/multiarch/strncpy.c: Likewise.
	* sysdeps/x86_64/multiarch/stpcpy.S: Removed.
	* sysdeps/x86_64/multiarch/stpncpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strncpy.S: Likewise.
	* sysdeps/x86_64/multiarch/stpncpy-c.c (weak_alias): New.
	(libc_hidden_def): Always defined as empty.
	* sysdeps/x86_64/multiarch/strncpy-c.c (libc_hidden_builtin_def):
	Always Defined as empty.

2017-06-12  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/string-inlines.c: Add undef of __stpcpy to fix build issue.

2017-06-12  Wilco Dijkstra  <wdijkstr@arm.com>

	[BZ #15105]
	[BZ #19463]
	* include/string.h: Add internal redirect for __stpcpy.
	* string/Makefile: Remove bits/string2.h.
	* string/string.h: Update comment.
	* string/string-inlines.c: Remove bits/string2.h include and comment.
	* string/bits/string2.h: Remove file.

2017-06-12  Wilco Dijkstra  <wdijkstr@arm.com>

	* sunrpc/bindrsvprt.c (bindresvport): Change __bzero to memset.
	* sunrpc/clnt_gen.c (clnt_create): Likewise.
	* sunrpc/des_impl.c (_des_crypt): Likewise.
	* sunrpc/key_call.c (key_gendes): Likewise.
	* sunrpc/pmap_rmt.c (clnt_broadcast): Likewise.
	* sunrpc/svc_simple.c (universal): Likewise.
	* sunrpc/svc_tcp.c (svctcp_create): Likewise.
	* sunrpc/svc_udp.c (svcudp_bufcreate): Likewise.
	* sysdeps/arm/aeabi_memclr.c (__aeabi_memclr): Likewise.

2017-06-10  Zack Weinberg  <zackw@panix.com>

	* stdlib/errno.h: Correct an outdated comment.

2017-06-09  Paul A. Clarke  <pc@us.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/sysconf.c: New file.
	Add powerpc-specific overrides for L1, L2, L3 CACHE_SIZEs,
	CACHE_ASSOCs, and CACHE_LINESIZEs, retrieving from auxv.
	* sysdeps/unix/sysv/linux/powerpc/test-powerpc-linux-sysconf.c:
	New file.  Invoke newly supported sysconf values for powerpc,
	and report results.  If none are supported, report so.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (tests):  Add new test,
	tst-sysconf.

2017-06-09  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* include/sys/auxv.h (__getauxval): Add a prototype and its
	libc_hidden_proto.
	* misc/getauxval.c (__getauxval): Use libc_hidden_def.

2017-06-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21561]
	* posix/sys/wait.h (idtype_t): Change [__USE_XOPEN] condition to
	[__USE_XOPEN_EXTENDED].
	(id_t): Likewise.
	(include of <bits/types/siginfo_t.h): Likewise.
	(waitid): Likewise.
	* sysdeps/unix/sysv/linux/bits/waitflags.h (WSTOPPED): Condition
	on [__USE_XOPEN_EXTENDED || __USE_XOPEN2K8].
	(WEXITED): Likewise.
	(WCONTINUED): Likewise.
	(WNOWAIT): Likewise.
	* conform/Makefile (test-xfail-XPG4/stdlib.h/conform): Remove.
	(test-xfail-XPG4/sys/wait.h/conform): Likewise.
	(test-xfail-POSIX/sys/wait.h/conform): Likewise.

	* sysdeps/unix/sysv/linux/nios2/localplt.data (__gtdf2): Mark
	libc.so PLT entry optional.
	(__gtsf2): Likewise.
	(__unorddf2): Likewise.
	(__unordsf2): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/localplt.data (_Q_fgt):
	New optional libc.so PLT entry.

	[BZ #21554]
	* signal/signal.h (sigpause):: Declare if [__USE_XOPEN_EXTENDED],
	not [__USE_XOPEN].

	[BZ #21560]
	* posix/sys/wait.h: Condition include of <signal.h> on
	[__USE_XOPEN_EXTENDED || __USE_XOPEN2K8].  Include <bits/types.h>
	unconditionally.
	[!__pid_t_defined] (pid_t): Define typedef.

2017-06-09  Zack Weinberg  <zackw@panix.com>

	* include/errno.h (__errno_location): Use __attribute_const__
	instead of bare __attribute__.

2017-06-09  Zack Weinberg  <zackw@panix.com>

	* Makeconfig (dl-tunable-list.h): Generate using a stamp file.
	(common-generated): Add libc-modules.h and libc-modules.stmp in a
	more appropriate location. Also add dl-tunable-list.h and
	dl-tunable-list.stmp.

2017-06-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Correct comments.

2017-06-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strrchr-sse2, strrchr-avx2, wcsrchr-sse2 and wcsrchr-avx2.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add tests for __strrchr_avx2,
	__strrchr_sse2, __wcsrchr_avx2 and __wcsrchr_sse2.
	* sysdeps/x86_64/multiarch/strrchr-avx2.S: New file.
	* sysdeps/x86_64/multiarch/strrchr-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strrchr.c: Likewise.
	* sysdeps/x86_64/multiarch/wcsrchr-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/wcsrchr-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/wcsrchr.c: Likewise.

2017-06-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memrchr-sse2 and memrchr-avx2.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add tests for __memrchr_avx2 and
	__memrchr_sse2.
	* sysdeps/x86_64/multiarch/memrchr-avx2.S: New file.
	* sysdeps/x86_64/multiarch/memrchr-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/memrchr.c: Likewise.

2017-06-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strchr-sse2, strchrnul-sse2, strchr-avx2, strchrnul-avx2,
	wcschr-sse2 and wcschr-avx2.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add tests for __strchr_avx2,
	__strchrnul_avx2, __strchrnul_sse2, __wcschr_avx2 and
	__wcschr_sse2.
	* sysdeps/x86_64/multiarch/strchr-avx2.S: New file.
	* sysdeps/x86_64/multiarch/strchr-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr.c: Likewise.
	* sysdeps/x86_64/multiarch/strchrnul-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/strchrnul-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strchrnul.c: Likewise.
	* sysdeps/x86_64/multiarch/wcschr-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/wcschr-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/wcschr.c: Likewise.
	* sysdeps/x86_64/multiarch/strchr.S: Removed.

2017-06-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strlen-sse2, strnlen-sse2, strlen-avx2, strnlen-avx2,
	wcslen-sse2, wcslen-avx2 and wcsnlen-avx2.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add tests for __strlen_avx2,
	__strlen_sse2, __strnlen_avx2, __strnlen_sse2, __wcslen_avx2,
	__wcslen_sse2 and __wcsnlen_avx2.
	* sysdeps/x86_64/multiarch/strlen-avx2.S: New file.
	* sysdeps/x86_64/multiarch/strlen-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen.c: Likewise.
	* sysdeps/x86_64/multiarch/strnlen-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/strnlen-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/strnlen.c: Likewise.
	* sysdeps/x86_64/multiarch/wcslen-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/wcslen-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/wcslen.c: Likewise.
	* sysdeps/x86_64/multiarch/wcsnlen-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/wcsnlen.c (OPTIMIZE (avx2)): New.
	(IFUNC_SELECTOR): Return OPTIMIZE (avx2) on AVX2 machines where
	vzeroupper is preferred and AVX unaligned load is fast.

2017-06-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memchr.S (MEMCHR): New.  Depending on if
	USE_AS_WMEMCHR is defined.
	(PCMPEQ): Likewise.
	(memchr): Renamed to ...
	(MEMCHR): This.  Support wmemchr if USE_AS_WMEMCHR is defined.
	Replace pcmpeqb with PCMPEQ.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memchr-sse2, rawmemchr-sse2, memchr-avx2, rawmemchr-avx2,
	wmemchr-sse4_1, wmemchr-avx2 and wmemchr-c.
	* sysdeps/x86_64/multiarch/ifunc-avx2.h: New file.
	* sysdeps/x86_64/multiarch/memchr-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/memchr-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/memchr.c: Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr.c: Likewise.
	* sysdeps/x86_64/multiarch/wmemchr-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/wmemchr-sse2.S: Likewise.
	* sysdeps/x86_64/multiarch/wmemchr.c: Likewise.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Test __memchr_avx2, __memchr_sse2,
	__rawmemchr_avx2, __rawmemchr_sse2, __wmemchr_avx2 and
	__wmemchr_sse2.

2017-06-09  Florian Weimer  <fweimer@redhat.com>

	* malloc/Makefile (test-srcs): Remove tst-dynarray,
	tst-dynarray-fail.

2017-06-09  Florian Weimer  <fweimer@redhat.com>

	Expose TEST_VERIFY_EXIT process termination to GCC optimizers.
	* support/support_test_verify_impl.c
	(support_test_verify_exit_impl): Split from
	support_test_verify_impl.
	* support/check.h (TEST_VERIFY): Drop status argument from
	support_test_verify_impl call.
	(TEST_VERIFY_EXIT): Call support_test_verify_exit_impl.
	(support_test_verify_impl): Remove status argument.
	(support_test_verify_exit_impl): Declare.

2017-06-09  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/unix/sysv/linux/aarch64/dl-procinfo.h: Remove
	mention of magic numbers in comments.
	(_dl_procinfo): Fix undefined behavior

2017-06-08  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/sys/wait.h-data (WIFCONTINUED): Do not expect for
	[XPG4].
	(WEXITED): Likewise.
	(WSTOPPED): Likewise.
	(WCONTINUED): Likewise.
	(WNOHANG): Likewise.
	(WNOWAIT): Likewise.
	(idtype_t): Likewise.
	(P_ALL): Likewise.
	(P_PID): Likewise.
	(P_PGID): Likewise.
	(id_t): Likewise.
	(siginfo_t): Likewise.
	(wait3): Likewise.
	(waitid): Likewise.
	(signal.h): Do not allow header for [XPG4].
	(sys/resource.h): Likewise.
	(si_*): Do not allow for [XPG4].
	(W*): Likewise.
	(P_*): Likewise.
	(BUS_): Likewise.
	(CLD_): Likewise.
	(FPE_): Likewise.
	(ILL_): Likewise.
	(POLL_): Likewise.
	(SEGV_): Likewise.
	(SI_): Likewise.
	(TRAP_): Likewise.
	* conform/Makefile (test-xfail-XPG4/stdlib.h/conform): New
	variable.

2017-06-08  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21528]
	* elf/dl-minimal.c (__strtoul_internal): Removed.
	(strtoul): Likewise.
	* elf/dl-misc.c (_dl_strtoul): New function.
	* elf/dl-tunables.c (tunables_strtoul): Removed.
	(tunable_initialize): Replace tunables_strtoul with _dl_strtoul.
	* elf/rtld.c (process_envvars): Likewise.
	* sysdeps/unix/sysv/linux/dl-librecon.h (_dl_osversion_init):
	Likewise.
	* sysdeps/generic/ldsodefs.h (_dl_strtoul): New prototype.

2017-06-08  Zack Weinberg  <zackw@panix.com>

	* libio/bits/types/FILE.h, libio/bits/types/__FILE.h
	* wcsmbs/bits/types/mbstate_t.h, wcsmbs/bits/types/__mbstate_t.h
	* wcsmbs/bits/types/wint_t.h: New single-type definition files.
	* wctype/bits/wctype-wchar.h: New file holding declarations shared
	between wctype.h and wchar.h.

	* libio/Makefile, wcsmbs/Makefile, wctype/Makefile:
	Install them.

	* include/bits/types/FILE.h, include/bits/types/__FILE.h
	* include/bits/types/mbstate_t.h, include/bits/types/__mbstate_t.h
	* include/bits/types/wint_t.h, include/bits/wcsmbs-wchar.h:
	New wrappers.
	* include/stdio.h, include/wchar.h, include/wctype.h:
	No need to handle __need macros.

	* grp/grp.h, gshadow/gshadow.h, hurd/hurd.h, iconv/gconv.h
	* libio/stdio.h, mach/mach.h, misc/mntent.h, pwd/pwd.h
	* shadow/shadow.h, stdio-common/printf.h, wcsmbs/uchar.h
	* wcsmbs/wchar.h, wctype/wctype.h
	* sysdeps/generic/_G_config.h, sysdeps/unix/sysv/linux/_G_config.h
	Use the new files instead of __need macros.

2017-06-08  H.J. Lu  <hongjiu.lu@intel.com>

	* string/test-memrchr.c (test_main): Add tests for len == 0
	and tests for positions close to the beginning, which are
	equivalent to positions close to the end for memchr.

2017-06-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Update
	comments.
	* sysdeps/x86_64/multiarch/wmemset.c: Include ifunc-wmemset.h
	instead of wmemset.h.
	* sysdeps/x86_64/multiarch/wmemset_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/wmemset.h: Renamed to ...
	* sysdeps/x86_64/multiarch/ifunc-wmemset.h: This.

2017-06-07  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* stdio-common/printf-parsemb.c (__parse_one_specmb): Initialize
	spec->info.is_binary128 to zero.
	* stdio-common/printf.h (printf_info): Add new member is_binary128
	to indicate that the number being converted to string is compatible
	with the IEC 60559 binary128 format.
	* stdio-common/printf_fp.c (__printf_fp_l): Add code to deal with
	_Float128 numbers.
	* stdio-common/printf_fphex.c: Include ieee754_float128.h and
	ldbl-128/printf_fphex_macros.h
	(__printf_fphex): Add code to deal with _Float128 numbers.
	* stdio-common/printf_size.c (__printf_size): Likewise.
	* stdio-common/vfprintf.c (process_arg): Initialize member
	info.is_binary128 to zero.
	* stdlib/fpioconst.h (FLT128_MAX_10_EXP_LOG): New macro.
	* stdlib/stdlib.h: Include bits/floatn.h for _Float128 support.
	(strfromf128): New declaration.
	* stdlib/strfrom-skeleton.c (STRFROM): Set member info.is_binary128
	to one.
	* sysdeps/ieee754/float128/Makefile: Add strfromf128.
	* sysdeps/ieee754/float128/Versions: Likewise.
	* sysdeps/ieee754/float128/strfromf128.c: New file.

2017-06-07  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128/printf_fphex.c: Include
	ldbl-128/printf_fphex_macros.h for the definition of PRINT_FPHEX.
	(PRINT_FPHEX_LONG_DOUBLE): Define based on PRINT_FPHEX.
	* sysdeps/ieee754/ldbl-128/printf_fphex_macros.h
	(PRINT_FPHEX): New function-like macro that can be used for long
	double, as well as for _Float128

2017-06-07  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* stdio-common/printf_fp.c (PRINTF_FP_FETCH): New macro.
	(__printf_fp_l): Use the new macro to avoid duplicating code.
	* stdio-common/printf_fphex.c (PRINTF_FPHEX_FETCH): New macro.
	(__printf_fphex): Use the new macro to avoid duplicating code.
	* stdio-common/printf_size.c (PRINTF_SIZE_FETCH): New macro.
	(__printf_size): Use the new macro to avoid duplicating code.

2017-06-07  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* include/gmp.h: Include bits/floatn.h
	(__mpn_extract_float128): Declare when __HAVE_DISTINCT_FLOAT128 is 1.
	* stdlib/gmp-impl.h: Also check if alloca is not defined before
	including stack-alloc.h.  It could have been defined by other header
	which not necessarily defines HAVE_ALLOCA.
	* sysdeps/ieee754/float128/Makefile: New file.
	* sysdeps/ieee754/float128/float1282mpn.c: New file.
	* sysdeps/ieee754/float128/float128_private.h: Include gmp.h before
	redefining __mpn_extract_long_double to __mpn_extract_float128, then
	redefine __mpn_extract_long_double to __mpn_extract_float128.
	* sysdeps/ieee754/ldbl-128/ldbl2mpn.c: Replace long double with
	_Float128 to allow float128_private.h overrides.

2017-06-07  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* stdlib/fpioconst.h: Include bits/floatn.h.
	(FPIOCONST_HAVE_EXTENDED_RANGE): New macro for testing how big the
	power of ten table should be.
	(FPIOCONST_POW10_ARRAY_SIZE): Use larger table if above is true.
	* stdlib/fpioconst.c (__tens): Use FPIOCONST_HAVE_EXTENDED_RANGE
	to include larger tables when _Float128 support is enabled.
	(_fpioconst_pow10): Likewise.

2017-06-07  Joseph Myers  <joseph@codesourcery.com>

	* include/bits/types/clock_t.h: Use #include <path> instead of
	#include "../../path".
	* include/bits/types/clockid_t.h: Likewise.
	* include/bits/types/struct_iovec.h: Likewise.
	* include/bits/types/struct_itimerspec.h: Likewise.
	* include/bits/types/struct_osockaddr.h: Likewise.
	* include/bits/types/struct_sigstack.h: Likewise.
	* include/bits/types/struct_timespec.h: Likewise.
	* include/bits/types/struct_timeval.h: Likewise.
	* include/bits/types/struct_tm.h: Likewise.
	* include/bits/types/time_t.h: Likewise.
	* include/bits/types/timer_t.h: Likewise.

	[BZ #14096]
	* timezone/Makefile ($(objpfx)tst-timezone.out): Depend on
	America/New_York.

2017-06-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/ifunc-sse4_1.h: Removed and folded
	into ...
	* sysdeps/x86_64/multiarch/wcsnlen.c: Here.  Don't include
	ifunc-sse4_1.h.

2017-06-07  Arjun Shankar  <arjun.is@lostca.se>

	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_internal):
	Remove check for NULL 'buf'.
	* login/tst-ptsname.c (do_test): Remove test with NULL 'buf'.

2017-06-07  Arjun Shankar  <arjun.is@lostca.se>

	* sysdeps/unix/sysv/linux/tst-clone2.c: Do not
	include test-skeleton.c.
	Include support/check.h and support/test-driver.c.

2017-06-07  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/unix/sysv/linux/aarch64/dl-procinfo.c
	(_dl_aarch64_cap_flags): New array.
	* sysdeps/unix/sysv/linux/aarch64/dl-procinfo.h
	(_dl_hwcap_string, _dl_string_hwcap, _dl_procinfo): Implement
	functions.

	* elf/dl-hwcaps.h [HAVE_TUNABLES]: Always read hwcap_mask.
	* sysdeps/sparc/sparc32/dl-machine.h [HAVE_TUNABLES]:
	Likewise.
	* sysdeps/x86/cpu-features.c (init_cpu_features): Always set
	up hwcap and hwcap_mask.

	* sysdeps/unix/sysv/linux/aarch64/cpu-features.c
	(init_cpu_features): Use glibc.tune.hwcap_mask.
	* sysdeps/unix/sysv/linux/aarch64/dl-procinfo.h: New file.

	* elf/dl-hwcaps.h: New file.
	* elf/dl-hwcaps.c: Include it.
	(_dl_important_hwcaps)[HAVE_TUNABLES]: Read and update
	glibc.tune.hwcap_mask.
	* elf/dl-cache.c: Include dl-hwcaps.h.
	(_dl_load_cache_lookup)[HAVE_TUNABLES]: Read
	glibc.tune.hwcap_mask.
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise.
	* elf/dl-support.c (_dl_hwcap2)[HAVE_TUNABLES]: Drop
	_dl_hwcap_mask.
	* elf/rtld.c (rtld_global_ro)[HAVE_TUNABLES]: Drop
	_dl_hwcap_mask.
	(process_envvars)[HAVE_TUNABLES]: Likewise.
	* sysdeps/generic/ldsodefs.h (rtld_global_ro)[HAVE_TUNABLES]:
	Likewise.
	* sysdeps/x86/cpu-features.c (init_cpu_features): Don't
	initialize dl_hwcap_mask when tunables are enabled.

	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h: Add include
	guard.
	* sysdeps/unix/sysv/linux/s390/dl-procinfo.h: Likewise.

	* elf/dl-tunables.list: Add glibc.tune.hwcap_mask.
	* scripts/gen-tunables.awk: Include dl-procinfo.h.
	* manual/tunables.texi: Document glibc.tune.hwcap_mask.

	* elf/Versions (__tunable_set_val): Rename to __tunable_get_val.
	* elf/dl-tunables.c: Likewise.
	(do_tunable_update_val): New function.
	(__tunable_set_val): New function.
	(__tunable_get_val): Call CB only if the tunable was externally
	initialized.
	(tunables_strtoul): Replace strval with initialized.
	* elf/dl-tunables.h (strval): Replace with a bool initialized.
	(TUNABLE_ENUM_NAME, TUNABLE_ENUM_NAME1): Adjust names to
	prevent collision.
	(__tunable_set_val): New function.
	(TUNABLE_GET, TUNABLE_GET_FULL): New macros.
	(TUNABLE_SET, TUNABLE_SET_FULL): Likewise.
	(TUNABLE_SET_VAL): Remove.
	(TUNABLE_SET_VAL_WITH_CALLBACK): Likewise.
	* README.tunables: Document the new macros.
	* malloc/arena.c (ptmalloc_init): Adjust.

2017-06-06  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	wcsnlen-sse4_1 and wcsnlen-c.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Test __wcsnlen_sse4_1 and
	__wcsnlen_sse2.
	* sysdeps/x86_64/multiarch/ifunc-sse4_1.h: New file.
	* sysdeps/x86_64/multiarch/wcsnlen-c.c: Likewise.
	* sysdeps/x86_64/multiarch/wcsnlen-sse4_1.S: Likewise.
	* sysdeps/x86_64/multiarch/wcsnlen.c: Likewise.
	* sysdeps/x86_64/wcsnlen.S: Removed.

2017-06-06  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/nptl/pthread_spin_init.c: Delete File.
	* sysdeps/s390/nptl/pthread_spin_lock.c: Likewise.
	* sysdeps/s390/nptl/pthread_spin_trylock.c: Likewise.
	* sysdeps/s390/nptl/pthread_spin_unlock.c: Likewise.

2017-06-06  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* NEWS: Mention new spinlock implementation.
	* include/atomic.h:
	(__atomic_val_bysize): Cast type to omit volatile qualifier.
	(atomic_exchange_acq): Likewise.
	(atomic_load_relaxed): Likewise.
	(ATOMIC_EXCHANGE_USES_CAS): Check definition.
	* nptl/pthread_spin_init.c (pthread_spin_init):
	Use atomic_store_relaxed.
	* nptl/pthread_spin_lock.c (pthread_spin_lock):
	Use C11-like atomic macros.
	* nptl/pthread_spin_trylock.c (pthread_spin_trylock):
	Likewise.
	* nptl/pthread_spin_unlock.c (pthread_spin_unlock):
	Use atomic_store_release.
	* sysdeps/aarch64/nptl/pthread_spin_lock.c: Delete File.
	* sysdeps/arm/nptl/pthread_spin_lock.c: Likewise.
	* sysdeps/hppa/nptl/pthread_spin_lock.c: Likewise.
	* sysdeps/m68k/nptl/pthread_spin_lock.c: Likewise.
	* sysdeps/microblaze/nptl/pthread_spin_lock.c: Likewise.
	* sysdeps/mips/nptl/pthread_spin_lock.c: Likewise.
	* sysdeps/nios2/nptl/pthread_spin_lock.c: Likewise.
	* sysdeps/aarch64/atomic-machine.h (ATOMIC_EXCHANGE_USES_CAS): Define.
	* sysdeps/alpha/atomic-machine.h: Likewise.
	* sysdeps/arm/atomic-machine.h: Likewise.
	* sysdeps/i386/atomic-machine.h: Likewise.
	* sysdeps/ia64/atomic-machine.h: Likewise.
	* sysdeps/m68k/coldfire/atomic-machine.h: Likewise.
	* sysdeps/m68k/m680x0/m68020/atomic-machine.h: Likewise.
	* sysdeps/microblaze/atomic-machine.h: Likewise.
	* sysdeps/mips/atomic-machine.h: Likewise.
	* sysdeps/powerpc/powerpc32/atomic-machine.h: Likewise.
	* sysdeps/powerpc/powerpc64/atomic-machine.h: Likewise.
	* sysdeps/s390/atomic-machine.h: Likewise.
	* sysdeps/sparc/sparc32/atomic-machine.h: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/atomic-machine.h: Likewise.
	* sysdeps/sparc/sparc64/atomic-machine.h: Likewise.
	* sysdeps/tile/tilegx/atomic-machine.h: Likewise.
	* sysdeps/tile/tilepro/atomic-machine.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/atomic-machine.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/atomic-machine.h: Likewise.
	* sysdeps/unix/sysv/linux/nios2/atomic-machine.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/atomic-machine.h: Likewise.
	* sysdeps/x86_64/atomic-machine.h: Likewise.

2017-06-05  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cacheinfo.c (intel_check_word): Accept cpu_features
	and use it instead of dl_x86_cpu_features.
	(handle_intel): Replace maxidx with cpu_features.  Pass
	cpu_features to intel_check_word.
	(__cache_sysconf): Pass cpu_features to handle_intel.
	(init_cacheinfo): Likewise.  Use cpu_features instead of
	dl_x86_cpu_features.

2017-06-05  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.h (index_cpu_MOVBE): New.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memcmp-avx2 and wmemcmp-avx2.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Test __memcmp_avx2 and __wmemcmp_avx2.
	* sysdeps/x86_64/multiarch/memcmp-avx2.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp.S: Use __memcmp_avx2 on AVX
	2 machines if AVX unaligned load is fast and vzeroupper is
	preferred.
	* sysdeps/x86_64/multiarch/wmemcmp.S: Use __wmemcmp_avx2 on AVX
	2 machines if AVX unaligned load is fast and vzeroupper is
	preferred.

2017-06-05  H.J. Lu  <hongjiu.lu@intel.com>

	* include/wchar.h (__wmemset_chk): New.
	* sysdeps/x86_64/memset.S (VDUP_TO_VEC0_AND_SET_RETURN): Renamed
	to MEMSET_VDUP_TO_VEC0_AND_SET_RETURN.
	(WMEMSET_VDUP_TO_VEC0_AND_SET_RETURN): New.
	(WMEMSET_CHK_SYMBOL): Likewise.
	(WMEMSET_SYMBOL): Likewise.
	(__wmemset): Add hidden definition.
	(wmemset): Add weak hidden definition.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	wmemset_chk-nonshared.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __wmemset_sse2_unaligned,
	__wmemset_avx2_unaligned, __wmemset_avx512_unaligned,
	__wmemset_chk_sse2_unaligned, __wmemset_chk_avx2_unaligned
	and __wmemset_chk_avx512_unaligned.
	* sysdeps/x86_64/multiarch/memset-avx2-unaligned-erms.S
	(VDUP_TO_VEC0_AND_SET_RETURN): Renamed to ...
	(MEMSET_VDUP_TO_VEC0_AND_SET_RETURN): This.
	(WMEMSET_VDUP_TO_VEC0_AND_SET_RETURN): New.
	(WMEMSET_SYMBOL): Likewise.
	* sysdeps/x86_64/multiarch/memset-avx512-unaligned-erms.S
	(VDUP_TO_VEC0_AND_SET_RETURN): Renamed to ...
	(MEMSET_VDUP_TO_VEC0_AND_SET_RETURN): This.
	(WMEMSET_VDUP_TO_VEC0_AND_SET_RETURN): New.
	(WMEMSET_SYMBOL): Likewise.
	* sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S: Updated.
	(WMEMSET_CHK_SYMBOL): New.
	(WMEMSET_CHK_SYMBOL (__wmemset_chk, unaligned)): Likewise.
	(WMEMSET_SYMBOL (__wmemset, unaligned)): Likewise.
	* sysdeps/x86_64/multiarch/memset.S (WMEMSET_SYMBOL): New.
	(libc_hidden_builtin_def): Also define __GI_wmemset and
	__GI___wmemset.
	(weak_alias): New.
	* sysdeps/x86_64/multiarch/wmemset.c: New file.
	* sysdeps/x86_64/multiarch/wmemset.h: Likewise.
	* sysdeps/x86_64/multiarch/wmemset_chk-nonshared.S: Likewise.
	* sysdeps/x86_64/multiarch/wmemset_chk.c: Likewise.
	* sysdeps/x86_64/wmemset.c: Likewise.
	* sysdeps/x86_64/wmemset_chk.c: Likewise.

2017-06-05  Adhemerval Zanella  <adhemerval.zanella@linaro.org>
	    H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/init-arch.h (PASTER1): New.
	(EVALUATOR1): Likewise.
	(PASTER2): Likewise.
	(EVALUATOR2): Likewise.
	(REDIRECT_NAME): Likewise.
	(OPTIMIZE): Likewise.
	(IFUNC_SELECTOR): Likewise.

2017-06-05  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/strlen.S (PMINU): New.
	(PCMPEQ): Likewise.
	(SHIFT_RETURN): Likewise.
	(FIND_ZERO): Replace pcmpeqb with PCMPEQ.
	(strlen): Add SHIFT_RETURN before ret.  Replace pcmpeqb and
	pminub with PCMPEQ and PMINU.
	* sysdeps/x86_64/wcsnlen.S: New file.

2017-06-05  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memrchr.S (__memrchr): Use 32-bit registers for
	the lower 32 bits.  Remove redundant instructions.

2017-06-05  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (LO_HI_LONG): Pass
	0 as the high part of offset.
	* sysdeps/unix/sysv/linux/x86_64/x32/sysdep.h (LO_HI_LONG): New.

2017-06-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21538]
	* bits/signum.h (SIG_HOLD): Define if [__USE_XOPEN], not
	[__USE_UNIX98].
	* sysdeps/unix/bsd/bits/signum.h (SIG_HOLD): Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/signum.h (SIG_HOLD):
	Likewise.
	* sysdeps/unix/sysv/linux/bits/signum.h (SIG_HOLD): Likewise.
	* sysdeps/unix/sysv/linux/hppa/bits/signum.h (SIG_HOLD): Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/signum.h (SIG_HOLD): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/signum.h (SIG_HOLD):
	Likewise.

	[BZ #21517]
	* bits/types/stack_t.h (stack_t): Remove struct tag.
	* sysdeps/unix/sysv/linux/bits/types/stack_t.h (stack_t):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types/stack_t.h (stack_t):
	Likewise.
	* debug/segfault.c (install_handler): Use stack_t instead of
	struct sigaltstack.
	* hurd/hurd/signal.h (struct hurd_sigstate): Likewise.
	* hurd/trampoline.c (_hurd_setup_sighandler): Likewise.
	* include/signal.h (__sigaltstack): Likwise.
	* signal/sigaltstack.c (__sigaltstack): Likewise.
	* signal/signal.h (sigaltstack): Likewise.
	* sysdeps/mach/hurd/i386/signal-defines.sym
	(SIGALTSTACK__SS_SP__OFFSET): Likewise.
	(SIGALTSTACK__SS_SIZE__OFFSET): Likewise.
	(SIGALTSTACK__SS_FLAGS__OFFSET): Likewise.
	* sysdeps/mach/hurd/sigaltstack.c (__sigaltstack): Likewise.
	* sysdeps/mach/hurd/sigstack.c (sigstack): Likewise.
	* sysdeps/unix/sysv/linux/alpha/sys/procfs.h (struct
	elf_prstatus): Likewise.
	* sysdeps/unix/sysv/linux/hppa/____longjmp_chk.c (CHECK_SP):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/sys/procfs.h (struct elf_prstatus):
	Likewise.
	* sysdeps/unix/sysv/linux/m68k/____longjmp_chk.c (CHECK_SP):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h (struct
	elf_prstatus): Likewise.
	* sysdeps/unix/sysv/linux/sh/sys/procfs.h (struct elf_prstatus):
	Likewise.
	* sysdeps/unix/sysv/linux/sys/procfs.h (struct elf_prstatus):
	Likewise.

2017-06-04  Zack Weinberg  <zackw@panix.com>

	* sysdeps/gnu/errlist.c: Regenerate.

2017-06-04  H.J. Lu  <hongjiu.lu@intel.com>

	* benchtests/bench-memchr.c (do_test): Print out both length
	and position.
	(test_main): Also test the position close to the beginning for
	memrchr.

2017-06-04  Zack Weinberg  <zackw@panix.com>

	* nis/nis_add.c, nis/nis_addmember.c, nis/nis_call.c
	* nis/nis_checkpoint.c, nis/nis_clone_dir.c, nis/nis_clone_obj.c
	* nis/nis_clone_res.c, nis/nis_creategroup.c, nis/nis_defaults.c
	* nis/nis_destroygroup.c, nis/nis_domain_of.c
	* nis/nis_domain_of_r.c, nis/nis_error.c, nis/nis_file.c
	* nis/nis_free.c, nis/nis_getservlist.c, nis/nis_ismember.c
	* nis/nis_local_names.c, nis/nis_lookup.c, nis/nis_mkdir.c
	* nis/nis_modify.c, nis/nis_ping.c, nis/nis_print.c
	* nis/nis_print_group_entry.c, nis/nis_remove.c
	* nis/nis_removemember.c, nis/nis_rmdir.c, nis/nis_server.c
	* nis/nis_subr.c, nis/nis_table.c, nis/nis_util.c
	* nis/nis_verifygroup.c, nis/nis_xdr.c, nis/yp_xdr.c
	* nis/ypclnt.c, nis/ypupdate_xdr.c, sunrpc/auth_des.c
	* sunrpc/auth_none.c, sunrpc/auth_unix.c, sunrpc/authdes_prot.c
	* sunrpc/authuxprot.c, sunrpc/clnt_gen.c, sunrpc/clnt_perr.c
	* sunrpc/clnt_raw.c, sunrpc/clnt_simp.c, sunrpc/clnt_tcp.c
	* sunrpc/clnt_udp.c, sunrpc/clnt_unix.c, sunrpc/des_crypt.c
	* sunrpc/des_soft.c, sunrpc/get_myaddr.c, sunrpc/key_call.c
	* sunrpc/key_prot.c, sunrpc/netname.c, sunrpc/pm_getmaps.c
	* sunrpc/pm_getport.c, sunrpc/pmap_clnt.c, sunrpc/pmap_prot.c
	* sunrpc/pmap_prot2.c, sunrpc/pmap_rmt.c, sunrpc/publickey.c
	* sunrpc/rpc_cmsg.c, sunrpc/rpc_dtable.c, sunrpc/rpc_prot.c
	* sunrpc/rpc_thread.c, sunrpc/rtime.c, sunrpc/svc.c
	* sunrpc/svc_auth.c, sunrpc/svc_raw.c, sunrpc/svc_run.c
	* sunrpc/svc_tcp.c, sunrpc/svc_udp.c, sunrpc/svc_unix.c
	* sunrpc/svcauth_des.c, sunrpc/xdr.c, sunrpc/xdr_array.c
	* sunrpc/xdr_float.c, sunrpc/xdr_intXX_t.c, sunrpc/xdr_mem.c
	* sunrpc/xdr_rec.c, sunrpc/xdr_ref.c, sunrpc/xdr_sizeof.c
	* sunrpc/xdr_stdio.c: Include shlib-compat.h.

	* sunrpc/des_crypt.c, sunrpc/des_soft.c: No need to include
	abi-versions.h as well as shlib-compat.h.
	* sunrpc/get_myaddr.c: Remove obsolete comment.
	* sunrpc/pmap_rmt.c: Remove obsolete comment and #undef.
	* sunrpc/rpc_thread.c: Include libc-lock.h only once.
	* resolv/res_libc.c: Include shlib-compat.h only once.

2017-06-03  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Call __strdup instead
	of strdup.

2017-06-02  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cacheinfo.c (__x86_shared_non_temporal_threshold):
	Set to the 3/4 of the total shared cache size.

2017-06-02  Rical Jasan  <ricaljasan@pacific.net>

	* manual/errno.texi: Remove redundant error strings.
	* manual/macros.texi (@errno): Render the error string in every
	description.

2017-06-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21543]
	* signal/signal.h: Only include <bits/types/sigevent_t.h> and
	<bits/sigevent-consts.h> if [__USE_POSIX199309], not if
	[__USE_XOPEN_EXTENDED].

2017-06-02  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gethosts): Eliminate another
	strdupa.
	(getcanonname): Use __strdup instead of strdup.

2017-06-02  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* misc/Makefile (CFLAGS-preadv2.c): New rule.
	(CFLAGS-preadv64v2.c): Likewise.
	(CFLAGS-pwritev2.c): Likewise.
	(CFLAGS-pwritev64v2.c): Likewise.

2017-06-02  Florian Weimer  <fweimer@redhat.com>

	Test res_init with several configuration files.
	* resolv/Makefile [build-shared] (tests-internal): Add
	tst-resolv-res_init, tst-resolv-res_init-thread.
	(tst-resolv-res_init): Link against libdl, libresolv.
	(tst-resolv-res_init-thread): Link against libdl, libresolv,
	libpthread.
	* resolv/tst-resolv-res_init.c: New file.
	* resolv/tst-resolv-res_init-skeleton.c: Likewise.
	* resolv/tst-resolv-res_init-thread.c: Likewise.
	* support/Makefile (libsupport-routines): Add support-xstat,
	support_can_chroot, support_capture_subprocess_check,
	support_isolate_in_subprocess, support_shared_allocate,
	support_write_file_string, xchroot, xmkdir, xopen.
	* support/capture_subprocess.h (enum support_capture_allow): Define.
	(support_capture_subprocess_check): Declare.
	* support/namespace.h (support_can_chroot)
	(support_isolate_in_subprocess): Declare.
	* support/support-xstat.c: New file.
	* support/support.h (support_shared_allocate, support_shared_free)
	(support_write_file_string): Declare.
	* support/support_can_chroot.c: New file.
	* support/support_capture_subprocess_check.c: Likewise.
	* support/support_isolate_in_subprocess.c: Likewise.
	* support/support_shared_allocate.c: Likewise.
	* support/support_write_file_string.c: Likewise.
	* support/xchroot.c: Likwise.
	* support/xmkdir.c: Likwise.
	* support/xopen.c: Likwise.
	* support/xunistd.h (xopen, xstat, xmkdir, xchroot): Declare.

2017-06-02  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/posix/getaddrinfo.c (getcanonname): New function.
	(gaih_inet): Remove malloc_canonbuf variable.  Call getcanonname.

2017-06-02  Florian Weimer  <fweimer@redhat.com>

	* malloc/Makefile (routines): Add dynarray_at_failure,
	dynarray_emplace_enlarge, dynarray_finalize.
	(tests-internal): Add tst-dynarray, tst-dynarray-fail,
	tst-dynarray-at-fail.
	(tests-srcs): Add tst-dynarray, tst-dynarray-fail.
	(tests-special): Add tst-dynarray-mem.out,
	tst-dynarray-mem-fail.out.
	(tst-dynarray-ENV, tst-dynarray-fail-ENV): Set.
	(tst-dynarray-mem.out, tst-dynarray-fail-mem.out): Generate using
	mtrace.
	* malloc/Versions (__libc_dynarray_at_failure)
	(__libc_dynarray_emplace_enlarge, __libc_dynarray_finalize)
	(__libc_dynarray_resize, __libc_dynarray_resize_clear): Export as
	GLIBC_PRIVATE.
	* malloc/dynarray.h: New file.
	* malloc/dynarray-skeleton.c: Likewise.
	* malloc/dynarray_at_failure.c: Likewise.
	* malloc/dynarray_emplace_enlarge.c: Likewise.
	* malloc/dynarray_finalize.c: Likewise.
	* malloc/dynarray_resize.c: Likewise.
	* malloc/dynarray_resize_clear.c: Likewise.
	* malloc/tst-dynarray.c: Likewise.
	* malloc/tst-dynarray-fail.c: Likewise.
	* malloc/tst-dynarray-at-fail.c: Likewise.
	* malloc/tst-dynarray-shared.h: Likewise.
	* support/Makefile (libsupport-routines): Add
	support_capture_subprocess, xdup2, xpipe.
	(tests): Add tst-support_capture_subprocess.
	* support/capture_subprocess.h: New file.
	* support/support_capture_subprocess.c: Likewise.
	* support/tst-support_capture_subprocess.c: Likewise.
	* support/xdup2.c: Likewise.
	* support/xpipe.c: Likewise.
	* support/xunistd.h (xdup2, xpipe): Declare.

2017-06-01  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* stdlib/gmp-impl.h: Include sys/param.h instead of redefining the
	macros MAX and MIN.

2017-06-01  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/signal.h-data (sa_sigaction): Do not expect for
	[XPG4].
	(SA_SIGINFO): Likewise.
	(SA_ONSTACK): Likewise.
	(SA_RESETHAND): Likewise.
	(SA_RESTART): Likewise.
	(SA_NOCLDWAIT): Likewise.
	(SA_NODEFER): Likewise.
	(SS_ONSTACK): Likewise.
	(SS_DISABLE): Likewise.
	(MINSIGSTKSZ): Likewise.
	(SIGSTKSZ): Likewise.
	(ucontext_t): Likewise.
	(stack_t): Likewise.
	(struct sigstack): Likewise.
	(SI_USER): Do not expect for [XPG4 || XPG42].
	(SI_QUEUE): Likewise.
	(SI_TIMER): Likewise.
	(SI_ASYNCIO): Likewise.
	(SI_MESGQ): Likewise.
	(bsd_signal): Do not expect for [XPG4].
	(killpg): Likewise.
	(sigaltstack): Likewise.
	(sighold): Likewise.
	(sigignore): Likewise.
	(siginterrupt): Likewise.
	(sigpause): Likewise.
	(sigrelse): Likewise.
	(sigset): Likewise.
	(sigwait): Do not expect for [XPG4 || XPG42].

2017-06-01  Zack Weinberg  <zackw@panix.com>

	[BZ #21514]
	* sysdeps/unix/sysv/linux/include/bits/syscall.h: New shim header
	pointing to the generated file in <builddir>/misc/bits/syscall.h.

2017-06-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21457]
	* sysdeps/arm/sys/ucontext.h (NGREG): Rename to __NGREG and define
	NGREG to __NGREG if [__USE_MISC].
	(gregset_t): Define using __NGREG.
	(__ctx): New macro.
	(mcontext_t): Use __ctx in defining fields.
	* sysdeps/i386/sys/ucontext.h (NGREG): Rename to __NGREG and
	define NGREG to __NGREG if [__USE_MISC].
	(gregset_t): Define using __NGREG.
	(__ctx): New macro.
	(__ctxt): Likewise.
	(fpregset_t): Use __ctx and __ctxt in defining fields.
	(mcontext_t): Likewise.
	* sysdeps/m68k/sys/ucontext.h (NGREG): Rename to __NGREG and
	define NGREG to __NGREG if [__USE_MISC].
	(gregset_t): Define using __NGREG.
	(__ctx): New macro.
	(mcontext_t): Use __ctx in defining fields.
	* sysdeps/mips/sys/ucontext.h (NGREG): Rename to __NGREG and
	define NGREG to __NGREG if [__USE_MISC].
	(gregset_t): Define using __NGREG.
	(__ctx): New macro.
	(fpregset_t): Use __ctx in defining fields.
	(mcontext_t): Likewise.
	* sysdeps/unix/sysv/linux/alpha/sys/ucontext.h (NGREG): Rename to
	__NGREG and define NGREG to __NGREG if [__USE_MISC].
	(gregset_t): Define using __NGREG.
	(NFPREG): Rename to __NFPREG and define NFPREG to __NFPREG if
	[__USE_MISC].
	(fpregset_t): Define using __NFPREG.
	* sysdeps/unix/sysv/linux/m68k/sys/ucontext.h (NGREG): Rename to
	__NGREG and define NGREG to __NGREG if [__USE_MISC].
	(gregset_t): Define using __NGREG.
	(__ctx): New macro.
	(fpregset_t): Use __ctx in defining fields.
	(mcontext_t): Likewise.
	* sysdeps/unix/sysv/linux/mips/sys/ucontext.h (NGREG): Rename to
	__NGREG and define NGREG to __NGREG if [__USE_MISC].
	(NFPREG): Rename to __NFPREG and define NFPREG to __NFPREG if
	[__USE_MISC].
	(gregset_t): Define using __NGREG.
	(__ctx): New macro.
	(fpregset_t): Use __ctx in defining fields.
	(mcontext_t): Likewise.
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h (__ctx): New macro.
	(mcontext_t): Use __ctx in defining fields.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h (__ctx): New
	macro.
	[__WORDSIZE == 32] (NGREG): Rename to __NGREG and define NGREG to
	__NGREG if [__USE_MISC].
	[__WORDSIZE == 32] (gregset_t): Define using __NGREG.
	[__WORDSIZE == 32] (fpregset_t): Use __ctx in defining fields.
	(mcontext_t): Likewise.
	[__WORDSIZE != 32] (NGREG): Rename to __NGREG and define NGREG to
	__NGREG if [__USE_MISC].
	[__WORDSIZE != 32] (NFPREG): Rename to __NFPREG and define NFPREG
	to __NFPREG if [__USE_MISC].
	[__WORDSIZE != 32] (NVRREG): Rename to __NVRREG and define NVRREG
	to __NVRREG if [__USE_MISC].
	[__WORDSIZE != 32] (gregset_t): Define using __NGREG.
	[__WORDSIZE != 32] (fpregset_t): Define using __NFPREG.
	[__WORDSIZE != 32] (vscr_t): Use __ctx in defining fields.
	[__WORDSIZE != 32] (vrregset_t): Likewise.
	[__WORDSIZE != 32] (mcontext_t): Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h (__ctx): New macro.
	(__psw_t): Use __ctx in defining fields.
	(NGREG): Rename to __NGREG and define NGREG to __NGREG if
	[__USE_MISC].
	(gregset_t): Define using __NGREG.
	(fpreg_t): Use __ctx in defining fields.
	(fpregset_t): Likewise.
	(mcontext_t): Likewise.
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h (NGREG): Rename to
	__NGREG and define NGREG to __NGREG if [__USE_MISC].
	(gregset_t): Define using __NGREG.
	(NFPREG): Rename to __NFPREG and define NFPREG to __NFPREG if
	[__USE_MISC].
	(fpregset_t): Define using __NFPREG.
	(__ctx): New macro.
	(mcontext_t): Use __ctx in defining fields.
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h (__ctx): New macro.
	[__x86_64__] (NGREG): Rename to __NGREG and define NGREG to
	__NGREG if [__USE_MISC].
	[__x86_64__] (gregset_t): Define using __NGREG.
	[__x86_64__] (struct _libc_fpxreg): Use __ctx in defining fields.
	[__x86_64__] (struct _libc_fpstate): Likewise.
	[__x86_64__] (mcontext_t): Likewise.
	[!__x86_64__] (NGREG): Rename to __NGREG and define NGREG to
	__NGREG if [__USE_MISC].
	[!__x86_64__] (gregset_t): Define using __NGREG.
	[!__x86_64__] (struct _libc_fpreg): Use __ctx in defining fields.
	[!__x86_64__] (struct _libc_fpstate): Likewise.
	[!__x86_64__] (mcontext_t): Likewise.

2017-06-01  Zack Weinberg  <zackw@panix.com>

	* sysdeps/unix/sysv/linux/microblaze/pt-vfork.S: Don't include
	alpha/pt-vfork.S.  Provide own compat shim for vfork and __vfork.
	* sysdeps/unix/sysv/linux/microblaze/vfork.S: Add __libc_vfork alias.
	* sysdeps/unix/sysv/linux/microblaze/localplt.data:
	libpthread.so no longer references __errno_location.

2017-05-31  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* NEWS: Add note about pwritev2 and preadv2 inclusion.
	* misc/Makefile (routines): Add preadv2, preadv64v2, pwritev2, and
	pwritev64v2.
	(tests): Add tst-preadvwritev2 and tst-preadvwritev64v2.
	* misc/Versions (GLIBC_2.26): Add preadv2, preadv64v2, pwritev2, and
	pwritev64v2.
	* misc/preadv2.c: New file.
	* misc/preadv64v2.c: Likewise.
	* misc/pwritev2.c: Likewise.
	* misc/pwritev64v2.c: Likewise.
	* misc/tst-preadvwritev2.c: Likewise.
	* misc/tst-preadvwritev64v2.c: Likewise.
	* manual/llio.texi: Add preadv2 and pwritev2 documentation.
	* misc/sys/uio.h [__USE_GNU && !__USE_FILE_OFFSET64] (preadv2): New
	prototype.
	[__USE_GNU && !__USE_FILE_OFFSET64] (pwritev2):	Likewise.
	[__USE_GNU && __USE_FILE_OFFSET64] (preadv64v2): Likewise.
	[__USE_GNU && __USE_FILE_OFFSET64] (pwritev64v2): Likewise.
	* misc/tst-preadvwritev-common.c (PREADV): Define if not defined.
	(PWRITEV): Likewise.
	(do_test_with_offset): Use PREADV and PWRITEV macros and check for
	ENOSYS.
	* nptl/tst-cancel4.c (tf_pwritev2): New test.
	(tf_preadv2): Likewise.
	(tf_fsync): Add tf_pwritev2 and tf_preadv2.
	* sysdeps/posix/preadv2.c: Likewise.
	* sysdeps/posix/preadv64v2.c: Likewise.
	* sysdeps/posix/pwritev2.c: Likewise.
	* sysdeps/posix/pwritev64v2.c: Likewise.
	* sysdeps/unix/sysv/linux/kernel-features.h: Add comment for syscall
	support in kernel.
	* sysdeps/unix/sysv/linux/preadv2.c: Likewise.
	* sysdeps/unix/sysv/linux/preadv64v2.c: Likewise.
	* sysdeps/unix/sysv/linux/pwritev2.c: Likewise.
	* sysdeps/unix/sysv/linux/pwritev64v2.c: Likewise.
	* sysdeps/unix/sysv/linux/preadv.c (preadv): Add libc_hidden_def.
	* sysdeps/unix/sysv/linux/preadv64.c (preadv64): Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c (pwritev): Likewise.
	* sysdeps/unix/sysv/linux/pwritev64.c (pwritev64): Likewise.
	* sysdeps/unix/sysv/linux/bits/uio.h: Add supported preadv2/pwritev2
	support flags on Linux.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist (GLIBC_2.26): Add
	preadv2, preadv64v2, pwritev2, pwritev64v2.
	* sysdeps/unix/sysv/linux/alpha/libc.abilist (GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/arm/libc.abilist (GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist (GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/i386/libc.abilist (GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/ia64/libc.abilist (GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist (GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist
	(GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist
	(GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist
	(GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/libc.abilist (GLIBC_2.26): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/sysv/linux/tile/tilegx/tilegx32/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/sysv/linux/tile/tilegx/tilegx64/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist (GLIBC_2.26):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist (GLIBC_2.26):
	Likewise.

2017-05-31  Andreas Schwab  <schwab@suse.de>

	* nptl/tst-fork3.c: Include <support/test-driver.c>.
	(main): Rename to do_test and make static.

2017-05-31  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* csu/libc-start.c [!ARCH_INIT_CPU_FEATURES]: Define
	ARCH_INIT_CPU_FEATURES.
	(LIBC_START_MAIN): Call it.
	* sysdeps/unix/sysv/linux/aarch64/libc-start.c
	(__libc_start_main): Remove.
	(ARCH_INIT_CPU_FEATURES): New macro.
	* sysdeps/x86/libc-start.c (__libc_start_main): Remove.
	(ARCH_INIT_CPU_FEATURES): New macro.

2017-05-30  Dennis W√∂lfing  <denniswoelfing@gmx.de>
	    R√ºdiger Sonderfeld  <ruediger@c-plusplus.de>

	* include/stdlib.h (__libc_reallocarray): New declaration.
	* malloc/Makefile (routines): Add reallocarray.
	(tests): Add tst-reallocarray.c.
	* malloc/Versions: Add reallocarray and __libc_reallocarray.
	* malloc/malloc-internal.h (check_mul_overflow_size_t): New inline
	function.
	* malloc/malloc.h (reallocarray): New declaration.
	* stdlib/stdlib.h (reallocarray): Likewise.
	* malloc/reallocarray.c: New file.
	* malloc/tst-reallocarray.c: New test file.
	* manual/memory.texi: Document reallocarray.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist: Add reallocarray.
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tilepro/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: Likewise.

2017-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memchr.S (memchr): Use 32-bit registers for
	the lower 32 bits.

2017-05-29  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/Makefile (ASFLAGS-.o) [$(subdir) = csu &&
	$(build-pie-default) = yes]: Define.

2017-05-25  H.J. Lu  <hongjiu.lu@intel.com>

	* string/test-memchr.c (test_main): Add tests for n == 0.

2017-05-25  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* nptl/Makefile (tests): Move nptl/tst-mutex8, nptl/tst-mutex8-static,
	nptl/tst-mutexpi8 and nptl/tst-mutexpi8-static to...
	(tests-internal): ... here.

2017-05-25   Siddhesh Poyarekar  <siddhesh@sourceware.org>
	     H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-tunables.c (__tunable_set_val): Make a hidden alias.
	* elf/dl-tunables.h (__tunables_init): Mark it hidden in rtld.
	(__tunable_set_val): Likewise.

2017-05-25  H.J. Lu  <hongjiu.lu@intel.com>

	* Makeconfig ($(common-objpfx)dl-tunable-list.h): Also check
	dl-tunables.list in subdirectories.

2017-05-25  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>
	    Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>
	    Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* math/math.h [__HAVE_FLOAT128 && __GLIBC_USE (IEC_60559_TYPES_EXT)]
	(SNANF128): New macro.
	* math/e_sqrtf128.c: New file.
	* math/s_fmaxmag_template.c: Include math_private.h in order to
	make inline expansion of fabs128().
	* math/s_fminmag_template.c: Likewise.

	* sysdeps/ieee754/float128/e_acosf128.c: New file.
	* sysdeps/ieee754/float128/e_acoshf128.c: New file.
	* sysdeps/ieee754/float128/e_asinf128.c: New file.
	* sysdeps/ieee754/float128/e_atan2f128.c: New file.
	* sysdeps/ieee754/float128/e_atanhf128.c: New file.
	* sysdeps/ieee754/float128/e_coshf128.c: New file.
	* sysdeps/ieee754/float128/e_exp10f128.c: New file.
	* sysdeps/ieee754/float128/e_expf128.c: New file.
	* sysdeps/ieee754/float128/e_fmodf128.c: New file.
	* sysdeps/ieee754/float128/e_gammaf128_r.c: New file.
	* sysdeps/ieee754/float128/e_hypotf128.c: New file.
	* sysdeps/ieee754/float128/e_ilogbf128.c: New file.
	* sysdeps/ieee754/float128/e_j0f128.c: New file.
	* sysdeps/ieee754/float128/e_j1f128.c: New file.
	* sysdeps/ieee754/float128/e_jnf128.c: New file.
	* sysdeps/ieee754/float128/e_lgammaf128_r.c: New file.
	* sysdeps/ieee754/float128/e_log10f128.c: New file.
	* sysdeps/ieee754/float128/e_log2f128.c: New file.
	* sysdeps/ieee754/float128/e_logf128.c: New file.
	* sysdeps/ieee754/float128/e_powf128.c: New file.
	* sysdeps/ieee754/float128/e_rem_pio2f128.c: New file.
	* sysdeps/ieee754/float128/e_remainderf128.c: New file.
	* sysdeps/ieee754/float128/e_scalbf128.c: New file.
	* sysdeps/ieee754/float128/e_sinhf128.c: New file.
	* sysdeps/ieee754/float128/float128_private.h: New file.
	* sysdeps/ieee754/float128/gamma_productf128.c: New file.
	* sysdeps/ieee754/float128/ieee754_float128.h: New file.
	* sysdeps/ieee754/float128/k_cosf128.c: New file.
	* sysdeps/ieee754/float128/k_sincosf128.c: New file.
	* sysdeps/ieee754/float128/k_sinf128.c: New file.
	* sysdeps/ieee754/float128/k_tanf128.c: New file.
	* sysdeps/ieee754/float128/lgamma_negf128.c: New file.
	* sysdeps/ieee754/float128/lgamma_productf128.c: New file.
	* sysdeps/ieee754/float128/s_asinhf128.c: New file.
	* sysdeps/ieee754/float128/s_atanf128.c: New file.
	* sysdeps/ieee754/float128/s_cbrtf128.c: New file.
	* sysdeps/ieee754/float128/s_ceilf128.c: New file.
	* sysdeps/ieee754/float128/s_copysignf128.c: New file.
	* sysdeps/ieee754/float128/s_cosf128.c: New file.
	* sysdeps/ieee754/float128/s_erff128.c: New file.
	* sysdeps/ieee754/float128/s_expm1f128.c: New file.
	* sysdeps/ieee754/float128/s_fabsf128.c: New file.
	* sysdeps/ieee754/float128/s_finitef128.c: New file.
	* sysdeps/ieee754/float128/s_floorf128.c: New file.
	* sysdeps/ieee754/float128/s_fmaf128.c: New file.
	* sysdeps/ieee754/float128/s_fpclassifyf128.c: New file.
	* sysdeps/ieee754/float128/s_frexpf128.c: New file.
	* sysdeps/ieee754/float128/s_fromfpf128.c: New file.
	* sysdeps/ieee754/float128/s_fromfpxf128.c: New file.
	* sysdeps/ieee754/float128/s_getpayloadf128.c: New file.
	* sysdeps/ieee754/float128/s_isinff128.c: New file.
	* sysdeps/ieee754/float128/s_isnanf128.c: New file.
	* sysdeps/ieee754/float128/s_issignalingf128.c: New file.
	* sysdeps/ieee754/float128/s_llrintf128.c: New file.
	* sysdeps/ieee754/float128/s_llroundf128.c: New file.
	* sysdeps/ieee754/float128/s_log1pf128.c: New file.
	* sysdeps/ieee754/float128/s_logbf128.c: New file.
	* sysdeps/ieee754/float128/s_lrintf128.c: New file.
	* sysdeps/ieee754/float128/s_lroundf128.c: New file.
	* sysdeps/ieee754/float128/s_modff128.c: New file.
	* sysdeps/ieee754/float128/s_nearbyintf128.c: New file.
	* sysdeps/ieee754/float128/s_nextafterf128.c: New file.
	* sysdeps/ieee754/float128/s_nexttowardf128.c: New file.
	* sysdeps/ieee754/float128/s_nextupf128.c: New file.
	* sysdeps/ieee754/float128/s_remquof128.c: New file.
	* sysdeps/ieee754/float128/s_rintf128.c: New file.
	* sysdeps/ieee754/float128/s_roundevenf128.c: New file.
	* sysdeps/ieee754/float128/s_roundf128.c: New file.
	* sysdeps/ieee754/float128/s_scalblnf128.c: New file.
	* sysdeps/ieee754/float128/s_scalbnf128.c: New file.
	* sysdeps/ieee754/float128/s_setpayloadf128.c: New file.
	* sysdeps/ieee754/float128/s_setpayloadsigf128.c: New file.
	* sysdeps/ieee754/float128/s_signbitf128.c: New file.
	* sysdeps/ieee754/float128/s_significandf128.c: New file.
	* sysdeps/ieee754/float128/s_sincosf128.c: New file.
	* sysdeps/ieee754/float128/s_sinf128.c: New file.
	* sysdeps/ieee754/float128/s_tanf128.c: New file.
	* sysdeps/ieee754/float128/s_tanhf128.c: New file.
	* sysdeps/ieee754/float128/s_totalorderf128.c: New file.
	* sysdeps/ieee754/float128/s_totalordermagf128.c: New file.
	* sysdeps/ieee754/float128/s_truncf128.c: New file.
	* sysdeps/ieee754/float128/s_ufromfpf128.c: New file.
	* sysdeps/ieee754/float128/s_ufromfpxf128.c: New file.
	* sysdeps/ieee754/float128/t_sincosf128.c: New file.
	* sysdeps/ieee754/float128/x2y2m1f128.c: New file.

	* sysdeps/ieee754/ldbl-128ibm/bits/iscanonical.h:
	(__iscanonicalf128): Define as a macro.

2017-05-24  Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/aarch64/memcpy.S (MEMMOVE, MEMCPY): New macros.
	(memmove): Use MEMMOVE for name.
	(memcpy): Use MEMCPY for name.  Change internal labels
	to external labels.
	* sysdeps/aarch64/multiarch/Makefile: New file.
	* sysdeps/aarch64/multiarch/ifunc-impl-list.c: Likewise.
	* sysdeps/aarch64/multiarch/init-arch.h: Likewise.
	* sysdeps/aarch64/multiarch/memcpy.c: Likewise.
	* sysdeps/aarch64/multiarch/memcpy_generic.S: Likewise.
	* sysdeps/aarch64/multiarch/memcpy_thunderx.S: Likewise.
	* sysdeps/aarch64/multiarch/memmove.c: Likewise.

2017-05-24  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/unix/sysv/linux/arm/dl-procinfo.c
	(_dl_arm_cap_flags): Fix array subscript.
	* sysdeps/unix/sysv/linux/arm/dl-procinfo.h (_DL_HWCAP_COUNT):
	Fix count.

2017-05-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cacheinfo.c: Skip if not in libc.

2017-05-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cacheinfo.c (is_intel): Removed.
	(is_amd): Likewise.
	(max_cpuid): Likewise.
	(__cache_sysconf): Use __get_cpu_features to get cpu_features.
	(init_cacheinfo): Likewise.

2017-05-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21511]
	* signal/signal.h: Include <bits/types/struct_sigstack.h> only if
	[(__USE_XOPEN_EXTENDED && !__USE_XOPEN2K8) || __USE_MISC].
	(sigstack): Declare only if [(__USE_XOPEN_EXTENDED &&
	!__USE_XOPEN2K) || __USE_MISC].
	* conform/data/signal.h-data (struct sigstack): Expect type only
	if [!XOPEN2K8 && !POSIX2008].
	(sigstack): Expect function only if [XPG42 || UNIX98].

	[BZ #21457]
	* sysdeps/arm/sys/ucontext.h: Do not include <signal.h>,
	<bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/generic/sys/ucontext.h: Do not include <signal.h>,
	<bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/i386/sys/ucontext.h: Do not include <signal.h>,
	<bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/m68k/sys/ucontext.h: Do not include <signal.h>,
	<bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/mips/sys/ucontext.h: Do not include <signal.h>,
	<bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/aarch64/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/alpha/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/arm/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/hppa/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/ia64/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h>.
	* sysdeps/unix/sysv/linux/m68k/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/mips/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: Do not include
	<bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/tile/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.
	* sysdeps/unix/sysv/linux/x86/bits/sigcontext.h: Include
	<bits/types.h>.
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h: Do not include
	<signal.h>, <bits/sigstack.h>, <bits/types/struct_sigstack.h> or
	<bits/ss_flags.h>.  Include <bits/types/sigset_t.h> instead of
	<bits/types/__sigset_t.h>.
	(ucontext_t): Use sigset_t instead of __sigset_t.

2017-05-22  Zack Weinberg  <zackw@panix.com>

	* sysdeps/unix/sysv/linux/bits/siginfo-consts.h
	(__SI_ASYNCIO_AFTER_SIGIO): Define default after including
	bits/siginfo-arch.h, only if not already defined.
	* sysdeps/unix/sysv/linux/bits/types/siginfo_t.h
	(__SI_ALIGNMENT, __SI_BAND_TYPE, __SI_CLOCK_T)
	(__SI_ERRNO_THEN_CODE, __SI_HAVE_SIGSYS, __SI_SEGFAULT_ADDL):
	Likewise.

	* sysdeps/unix/sysv/linux/ia64/bits/siginfo-arch.h
	* sysdeps/unix/sysv/linux/mips/bits/siginfo-arch.h
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo-arch.h
	* sysdeps/unix/sysv/linux/tile/bits/siginfo-arch.h
	* sysdeps/unix/sysv/linux/x86/bits/siginfo-arch.h:
	Unconditionally define __SI_* macros.

2017-05-22  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21393]
	* libio/freopen.c (freopen): Avoid dup already opened file descriptor
	and add a check for dup3 failure.
	* libio/freopen64.c (freopen64): Likewise.
	* libio/tst-freopen.c (do_test): Rename to do_test_basic and use
	libsupport.
	(do_test_bz21398): New test.
	* manual/stdio.texi (freopen): Add documentation of EBUSY failure.

2017-05-22  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_matches_host):
	Remove invalid comment.

2017-05-21  Zack Weinberg  <zackw@panix.com>

	* signal/Makefile (headers): Add bits/types/sigval_t.h.

2017-05-20  Zack Weinberg  <zackw@panix.com>

	* bits/sigevent-consts.h
	* bits/siginfo-consts.h
	* bits/types/__sigset_t.h
	* bits/types/sigevent_t.h
	* bits/types/siginfo_t.h
	* sysdeps/unix/sysv/linux/bits/sigevent-consts.h
	* sysdeps/unix/sysv/linux/bits/siginfo-consts.h
	* sysdeps/unix/sysv/linux/bits/types/__sigset_t.h
	* sysdeps/unix/sysv/linux/bits/types/sigevent_t.h
	* sysdeps/unix/sysv/linux/bits/types/siginfo_t.h:
	New system-dependent bits headers.

	* sysdeps/unix/sysv/linux/bits/siginfo-arch.h
	* sysdeps/unix/sysv/linux/bits/siginfo-consts-arch.h
	* sysdeps/unix/sysv/linux/ia64/bits/siginfo-arch.h
	* sysdeps/unix/sysv/linux/ia64/bits/siginfo-consts-arch.h
	* sysdeps/unix/sysv/linux/mips/bits/siginfo-arch.h
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo-arch.h
	* sysdeps/unix/sysv/linux/tile/bits/siginfo-arch.h
	* sysdeps/unix/sysv/linux/tile/bits/siginfo-consts-arch.h
	* sysdeps/unix/sysv/linux/x86/bits/siginfo-arch.h:
	New Linux-only system-dependent bits headers.

	* signal/bits/types/sig_atomic_t.h
	* signal/bits/types/sigset_t.h
	* signal/bits/types/sigval_t.h:
	New non-system-dependent bits headers.

	* sysdeps/generic/sigsetops.h
	* sysdeps/unix/sysv/linux/sigsetops.h:
	New internal headers.

	* include/bits/types/sig_atomic_t.h
	* include/bits/types/sigset_t.h
	* include/bits/types/sigval_t.h:
	New wrappers.

	* signal/sigsetops.h
	* bits/siginfo.h
	* bits/sigset.h
	* sysdeps/unix/sysv/linux/bits/siginfo.h
	* sysdeps/unix/sysv/linux/bits/sigset.h
	* sysdeps/unix/sysv/linux/ia64/bits/siginfo.h
	* sysdeps/unix/sysv/linux/mips/bits/siginfo.h
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h
	* sysdeps/unix/sysv/linux/tile/bits/siginfo.h
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h:
	Deleted.

	* signal/Makefile, sysdeps/unix/sysv/linux/Makefile:
	Update lists of installed headers.

	* posix/bits/types.h: Define __sig_atomic_t here.
	* signal/signal.h: Use the new bits headers; no need to handle
	__need_sig_atomic_t nor __need_sigset_t.  Don't use __sigmask
	to define sigmask.
	* include/signal.h: No need to handle __need_sig_atomic_t
	nor __need_sigset_t.  Don't define __sigemptyset.

	* io/sys/poll.h, setjmp/setjmp.h
	* sysdeps/arm/sys/ucontext.h, sysdeps/generic/sys/ucontext.h
	* sysdeps/i386/sys/ucontext.h, sysdeps/m68k/sys/ucontext.h
	* sysdeps/mach/hurd/i386/bits/sigcontext.h
	* sysdeps/mips/sys/ucontext.h, sysdeps/powerpc/novmxsetjmp.h
	* sysdeps/pthread/bits/sigthread.h
	* sysdeps/unix/sysv/linux/hppa/sys/ucontext.h
	* sysdeps/unix/sysv/linux/m68k/sys/ucontext.h
	* sysdeps/unix/sysv/linux/mips/sys/ucontext.h
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h
	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h
	* sysdeps/unix/sysv/linux/tile/sys/ucontext.h
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h:
	Use bits/types/__sigset_t.h.

	* misc/sys/select.h, posix/spawn.h
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h
	* sysdeps/unix/sysv/linux/sys/epoll.h
	* sysdeps/unix/sysv/linux/sys/signalfd.h:
	Use bits/types/sigset_t.h.

	* resolv/netdb.h, rt/mqueue.h: Use bits/types/sigevent_t.h.
	* rt/aio.h: Use bits/types/sigevent_t.h and bits/sigevent-consts.h.
	* socket/sys/socket.h: Don't include bits/sigset.h.

	* login/utmp_file.c, shadow/lckpwdf.c, signal/sigandset.c
	* signal/sigisempty.c, stdlib/abort.c, sysdeps/posix/profil.c
	* sysdeps/posix/sigignore.c, sysdeps/posix/sigintr.c
	* sysdeps/posix/signal.c, sysdeps/posix/sigset.c
	* sysdeps/posix/sprofil.c, sysdeps/posix/sysv_signal.c
	* sysdeps/unix/sysv/linux/nptl-signals.h:
	Include sigsetops.h.

	* signal/sigaddset.c, signal/sigandset.c, signal/sigdelset.c
	* signal/sigorset.c, stdlib/abort.c, sysdeps/posix/sigignore.c
	* sysdeps/posix/signal.c, sysdeps/posix/sigset.c:
	__sigaddset, __sigandset, __sigdelset, __sigemptyset, __sigorset
	now return no value.

	* signal/sigaddset.c, signal/sigdelset.c, signal/sigismem.c
	Include <errno.h>, <signal.h>, and <sigsetops.h> instead of
	"sigsetops.h".

	* signal/sigsetops.c: Explicitly define __sigismember,
	__sigaddset, and __sigdelset as compatibility symbols.

	* signal/Versions: Correct commentary on __sigpause,
	__sigaddset, __sigdelset, __sigismember.

	* inet/rcmd.c: Include sigsetops.h.  Convert old code using
	__sigblock/__sigsetmask to use __sigprocmask and friends.

	* resolv/resolv.h: Remove __need_res_state logic.
	Move definition of res_state and related constants to ...
	* resolv/bits/types/res_state.h: ...this new file.
	* resolv/Makefile: Install bits/types/res_state.h.
	* include/bits/types/res_state.h: New wrapper.
	* include/list.h: Remove __need_list_t logic.
	Move definition of list_t to ...
	* include/list_t.h: ...this new file.

	* nptl/descr.h: Include list_t.h and bits/types/res_state.h
	instead of list.h and resolv.h.

	* resolv/resolv.h: Remove __need_res_state logic.
	Move definition of res_state and related constants to ...
	* resolv/bits/types/res_state.h: ...this new file.
	* resolv/Makefile: Install bits/types/res_state.h.
	* include/bits/types/res_state.h: New wrapper.
	* include/list.h: Remove __need_list_t logic.
	Move definition of list_t to ...
	* include/list_t.h: ...this new file.

	* nptl/descr.h: Include list_t.h and bits/types/res_state.h
	instead of list.h and resolv.h.

2017-05-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/rawmemchr.S (L(return_null)): Removed.

2017-05-20  Zack Weinberg  <zackw@panix.com>

	* sysdeps/arm/sysdep.h
	(ARM_SFI_MACROS, sfi_breg, sfi_pld, sfi_sp): Delete definitions.

	* sysdeps/arm/__longjmp.S, sysdeps/arm/add_n.S
	* sysdeps/arm/addmul_1.S, sysdeps/arm/arm-mcount.S
	* sysdeps/arm/armv6/rawmemchr.S, sysdeps/arm/armv6/strchr.S
	* sysdeps/arm/armv6/strcpy.S, sysdeps/arm/armv6/strlen.S
	* sysdeps/arm/armv6/strrchr.S, sysdeps/arm/armv6t2/memchr.S
	* sysdeps/arm/armv6t2/strlen.S
	* sysdeps/arm/armv7/multiarch/memcpy_impl.S
	* sysdeps/arm/armv7/strcmp.S, sysdeps/arm/dl-tlsdesc.S
	* sysdeps/arm/memcpy.S, sysdeps/arm/memmove.S
	* sysdeps/arm/memset.S, sysdeps/arm/setjmp.S
	* sysdeps/arm/strlen.S, sysdeps/arm/submul_1.S:
	Remove all uses of sfi_breg, sfi_pld, and sfi_sp.

2017-05-20  Zack Weinberg  <zackw@panix.com>

	Remove the NaCl port.
	* sysdeps/arm/nacl: Remove directory and contents.
	* sysdeps/nacl: Remove directory and contents.
	* abi-tags: Remove .*-.*-nacl.* entry.

2017-05-19  Rical Jasan  <ricaljasan@pacific.net>

	* manual/errno.texi: Convert @comment-based errno documentation to
	@errno.
	* manual/macros.texi (@errno): New macro.  Consolidate errors,
	their values, and messages, adding the error string to the Concept
	Index.  Provide a warning in the comment about external (to the
	manual) dependencies.
	* sysdeps/gnu/errlist.awk: Use @errno instead of @comments.
	* sysdeps/mach/hurd/errnos.awk: Likewise.

2017-05-19  Joseph Myers  <joseph@codesourcery.com>

	* bits/ss_flags.h: New file.
	* bits/types/stack_t.h: Likewise.
	* include/bits/types/struct_sigstack.h: Likewise.
	* signal/bits/types/struct_sigstack.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/ss_flags.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/types/stack_t.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types/stack_t.h: Likewise.
	* signal/Makefile (headers): Add bits/types/struct_sigstack.h,
	bits/types/stack_t.h and bits/ss_flags.h.
	* signal/signal.h [__USE_XOPEN_EXTENDED || __USE_XOPEN2K8]:
	Include <bits/types/struct_sigstack.h>, <bits/types/stack_t.h> and
	<bits/ss_flags.h>.
	* bits/sigstack.h (struct sigstack): Remove.
	(stack_t): Likewise.
	(SS_ONSTACK): Likewise.
	(SS_DISABLE): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/bits/sigstack.h
	(struct sigstack): Likewise.
	(stack_t): Likewise.
	(SS_ONSTACK): Likewise.
	(SS_DISABLE): Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/sigstack.h (struct sigstack):
	Likewise.
	(stack_t): Likewise.
	(SS_ONSTACK): Likewise.
	(SS_DISABLE): Likewise.
	* sysdeps/unix/sysv/linux/bits/sigstack.h (struct sigstack):
	Likewise.
	(stack_t): Likewise.
	(SS_ONSTACK): Likewise.
	(SS_DISABLE): Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/sigstack.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/sigstack.h (struct sigstack):
	Likewise.
	(stack_t): Likewise.
	(SS_ONSTACK): Likewise.
	(SS_DISABLE): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/sigstack.h
	(struct sigstack): Likewise.
	(stack_t): Likewise.
	(SS_ONSTACK): Likewise.
	(SS_DISABLE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/sigstack.h (struct sigstack):
	Likewise.
	(stack_t): Likewise.
	(SS_ONSTACK): Likewise.
	(SS_DISABLE): Likewise.
	* sysdeps/arm/sys/ucontext.h: Include
	<bits/types/struct_sigstack.h>, <bits/types/stack_t.h> and
	<bits/ss_flags.h>.
	* sysdeps/generic/sys/ucontext.h: Likewise.
	* sysdeps/i386/sys/ucontext.h: Likewise.
	* sysdeps/m68k/sys/ucontext.h: Likewise.
	* sysdeps/mips/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/sigcontext.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h: Likewise.

2017-05-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/memchr-sse2.S (MEMCHR): Use
	"edx + ecx - 16" to avoid possible addition overflow.
	* sysdeps/x86_64/memchr.S (memchr): Likewise.

2017-05-19  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* misc/Makefile (CFLAGS-vmsplice.c): Remove rule.
	(CFLAGS-splice.c): Likewise.
	(CFLAGS-open_by_handle_at.c): Likewise.
	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-vmsplice.c): New rule.
	(CFLAGS-splice.c): Likewise.
	(CFLAGS-open_by_handle_at.c): Likewise.

2017-05-19  Joseph Myers  <joseph@codesourcery.com>

	* scripts/versions.awk: Generate ldbl-compat-choose.h.
	* sysdeps/ieee754/ldbl-opt/math-type-macros-ldouble.h: Include
	<ldbl-compat-choose.h>.
	(maybe_long_double_symbol): New macro.
	[!declare_mgen_alias] (declare_mgen_alias): Use
	maybe_long_double_symbol.
	* sysdeps/ieee754/ldbl-opt/s_canonicalizel.c: Remove.
	* sysdeps/ieee754/ldbl-opt/s_fmaxmagl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_fminmagl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_nextdownl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_llogbl.c: Likewise.
	* Makerules [$(build-shared) = yes && !avoid-generated]
	(before-compile): Add $(common-objpfx)ldbl-compat-choose.h.
	[$(build-shared) = yes && !avoid-generated]
	($(common-objpfx)ldbl-compat-choose.h): New target.

	* scripts/versions.awk: Generate first-versions.h.
	* sysdeps/ieee754/ldbl-opt/math-type-macros-double.h: Include
	<first-versions.h>.
	(LDOUBLE_cabsl_libm_version): Remove macro.
	(LDOUBLE_cargl_libm_version): Likewise.
	(LDOUBLE_cimagl_libm_version): Likewise.
	(LDOUBLE_conjl_libm_version): Likewise.
	(LDOUBLE_creall_libm_version): Likewise.
	(LDOUBLE_cacosl_libm_version): Likewise.
	(LDOUBLE_cacoshl_libm_version): Likewise.
	(LDOUBLE_ccosl_libm_version): Likewise.
	(LDOUBLE_ccoshl_libm_version): Likewise.
	(LDOUBLE_casinl_libm_version): Likewise.
	(LDOUBLE_csinl_libm_version): Likewise.
	(LDOUBLE_casinhl_libm_version): Likewise.
	(LDOUBLE_csinhl_libm_version): Likewise.
	(LDOUBLE_catanl_libm_version): Likewise.
	(LDOUBLE_catanhl_libm_version): Likewise.
	(LDOUBLE_ctanl_libm_version): Likewise.
	(LDOUBLE_ctanhl_libm_version): Likewise.
	(LDOUBLE_cexpl_libm_version): Likewise.
	(LDOUBLE_clogl_libm_version): Likewise.
	(LDOUBLE_cprojl_libm_version): Likewise.
	(LDOUBLE_csqrtl_libm_version): Likewise.
	(LDOUBLE_cpowl_libm_version): Likewise.
	(LDOUBLE_clog10l_libm_version): Likewise.
	(LDOUBLE___clog10l_libm_version): Likewise.
	(LDOUBLE_fdiml_libm_version): Likewise.
	(LDOUBLE_fmaxl_libm_version): Likewise.
	(LDOUBLE_fminl_libm_version): Likewise.
	(LDOUBLE_ilogbl_libm_version): Likewise.
	(LDOUBLE_nanl_libm_version): Likewise.
	[!M_LIBM_NEED_COMPAT] (M_LIBM_NEED_COMPAT): Use
	FIRST_VERSION_libm_* macros.
	[!declare_mgen_libm_compat] (declare_mgen_libm_compat): Likewise.
	* Makerules [$(build-shared) = yes && !avoid-generated]
	(before-compile): Add $(common-objpfx)first-versions.h.
	[$(build-shared) = yes && !avoid-generated]
	($(common-objpfx)first-versions.h): New target.
	($(common-objpfx)sysd-versions): Depend on and change to rule for
	building $(common-objpfx)versions.stmp.

2017-05-18  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* rt/Makefile (CFLAGS-mq_timedsend.c): New flag.
	* sysdeps/unix/sysv/linux/mq_timedsend.c: New file.
	* sysdeps/unix/sysv/linux/syscalls.list (mq_timedsend): Remove from
	auto-generation list.

	* rt/Makefile (CFLAGS-mq_timedreceive.c): New flag.
	* sysdeps/unix/sysv/linux/mq_timedreceive.c: New file.
	* sysdeps/unix/sysv/linux/syscalls.list (mq_timedreceive): Remove
	from auto-generation list.

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add
	open_by_handle_at.
	(CFLAGS-open_by_handle_at.c): New flag.
	* sysdeps/unix/sysv/linux/open_by_handle_at.c: New file.
	* sysdeps/unix/sysv/linux/syscalls.list (open_by_handle_at): New
	file.
	* misc/Makefile (CFLAGS-open_by_handle_at.c): New rule.

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add splice.
	(CFLAGS-splice.c): New flag.
	* sysdeps/unix/sysv/linux/splice.c: New file.
	* sysdeps/unix/sysv/linux/syscalls.list (splice): Remove from
	auto-generation syscall list.
	* misc/Makefile (CFLAGS-splice.c): New rule.

	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-vmsplice.c): New flag.
	* sysdeps/unix/sysv/linux/syscalls.list (vmsplice): Remove from
	auto-generation syscall list.
	* sysdeps/unix/sysv/linux/vmsplice.c: New file.
	* misc/Makefile (CFLAGS-vmsplice.c): New rule.

	* misc/Makefile (CFLAGS-fsync.c): New flag.
	* nptl/Makefile (CFLAGS-fsync.c): Likewise.
	* sysdeps/unix/syscalls.list (fsync): Remove from auto-generation
	syscall list.
	* sysdeps/unix/sysv/linux/fsync.c: New file.
	* sysdeps/unix/sysv/linux/arm/localplt.data [libpthread.so]
	(__errno_location): Remove.

	* misc/Makefile (CFLAGS-fdatasync.c): New rule.
	* nptl/Makefile (CFLAGS-fdatasync.c): Likewise.
	* sysdeps/unix/syscalls.list: Remove fdatasync from auto-generation
	list.
	* sysdeps/unix/sysv/linux/fdatasync.c: New file.

	* misc/Makefile (CFLAGS-msync.c): New rule.
	* nptl/Makefile (CFLAGS-msync.c): Likewise.
	* sysdeps/unix/syscalls.list: Remove msync from auto-generation list.
	* sysdeps/unix/sysv/linux/msync.c: New file.

	* sysdeps/unix/sysv/linux/alpha/sigsuspend.S: Remove file.
	* sysdeps/unix/sysv/linux/sigsuspend.c: Simplify include list.
	* nptl/Makefile (CFLAGS-sigsuspend.c): New rule.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile
	(CFLAGS-sigsuspend.c): Remove rule.

	* sysdeps/unix/sysv/linux/Makefile (sysdeps_routines): Add tee.
	(CFLAGS-tee.c): New rule.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove tee from
	auto-generated list.
	* sysdeps/unix/sysv/linux/tee.c: New file.

	* nptl/Makefile (CFLAGS-nanosleep.c): New rule.
	* posix/Makefile (CFLAGS-nanosleep.c): Likewise.
	* sysdeps/unix/sysv/linux/nanosleep.c: New file.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove nanosleep from
	auto-generated list.

	* sysdeps/unix/sysv/linux/sh/syscalls.list: Remove waitid from
	auto-generated list.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/syscalls.list: Remove file.
	* sysdeps/unix/sysv/linux/tile/waitpid.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list: Likewise.

	* sysdeps/unix/sysv/linux/generic/pause.c: Remove file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/pause.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h [__arch64__]
	(__NR_pause): Undefine.
	* sysdeps/unix/sysv/linux/pause.c: New file.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove pause from
	auto-generation list.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile (CFLAGS-pause.c):
	Remove rule.
	* posix/Makefile (CFLAGS-pause.c): Remove redundant rule.

2017-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcmp.S (__GI_memcmp): Correct
	comments.

2017-05-18  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* elf/Makefile (tst-env-setuid-ENV): Reduce value of
	LD_HWCAP_MASK.

2017-05-18  Rical Jasan  <ricaljasan@pacific.net>

	* manual/conf.texi: Convert @tables of annotated @items to
	@vtables.
	* manual/lang.texi: Likewise.
	* manual/pattern.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/socket.texi: Likewise.

2017-05-18  Rical Jasan  <ricaljasan@pacific.net>

	* manual/crypt.texi: Move a comment out of an @*x list.
	* manual/filesys.texi: Refactor some comments, one of which looks
	like a standard.  Fix incorrectly separated standards.
	* manual/locale.texi: Invert an annotation.
	* manual/resource.texi: Fix incorrectly separated standards.
	* manual/time.texi: Refactor a @vtable that obscures an
	annotation.
	* manual/users.texi: Refactor multiple headers to occupy a single
	@comment.

2017-05-18  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile
	(sysdep_routines): Add memcmp-power8.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(memcmp): Add __memcmp_power8 to list of memcmp functions.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp.c
	(memcmp): Add __memcmp_power8 to ifunc list.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-power8.S: New file.
	* sysdeps/powerpc/powerpc64/power8/memcmp.S: New file.

2017-05-17  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>
	    Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* math/math.h (__MATH_TG): Extend the conditions to add
	_Float128 support.
	* misc/sys/cdefs.h (__HAVE_GENERIC_SELECTION): New macro.

2017-05-17  Paul A. Clarke  <pc@us.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile
	[$(subdir) = math] (libm-sysdep_routines): Add s_cosf-power8 and
	s_cosf-ppc64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_cosf-power8.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_cosf-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_cosf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_cosf.S: Likewise.

2017-05-17  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/Makefile (libm-calls): Move e_exp2F to gen-libm-calls.
	(gen-libm-calls): Add e_exp2F to use the template.
	* math/e_exp2l.c: Rename to math/e_exp2_template.c.
	* math/e_exp2_template.c: New file, renamed from
	math/e_exp2l.c, and made into a template.
	* sysdeps/generic/math-type-macros.h (M_MIN_EXP): New macro.

2017-05-17  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* elf/dl-tunable-types.h (tunable_type_code_t): New type
	TUNABLE_TYPE_UINT_64.
	* elf/dl-tunables.c (tunables_strtoul): Return uint64_t.
	Simplify computation of overflow.
	(tunable_set_val_if_valid_range_signed,
	tunable_set_val_if_valid_range_unsigned): Remove and replace
	with this...
	(TUNABLE_SET_VAL_IF_VALID_RANGE): ... New macro.
	(tunable_initialize): Adjust.  Add uint64_t support.
	(__tunable_set_val): Add uint64_t support.
	* README.tunables: Document it.

	* scripts/gen-tunables.awk: Recognize 'default' keyword in
	dl-tunables.list.
	* README.tunables: Document it.

2017-05-15  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/posix/preadv.c: Use sysdeps/posix/preadv_common.c.
	* sysdeps/posix/preadv64.c: Likewise.
	* sysdeps/unix/sysv/linux/preadv.c: Likewise.
	* sysdeps/unix/sysv/linux/preadv64.c: Likewise.
	* sysdeps/posix/pwritev.c: Use sysdeps/posix/pwritev_common.c.
	* sysdeps/posix/pwritev64.c: Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c: Likewise.
	* sysdeps/unix/sysv/linux/pwritev64.c: Likewise.
	* sysdeps/posix/preadv_common.c: New file.
	* sysdeps/posix/pwritev_common.c: Likewise.

2017-05-14  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/generic/math-type-macros-float128.h
	(__USE_WRAPPER_TEMPLATE): Define to 1 to enable use of the
	wrapper templates.

2017-05-14  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>
	    Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* include/complex.h (__kernel_casinhf128): New declaration.
	* include/float.h: New file.
	* include/math.h (__finitef128): Add a hidden def.
	(__isinff128): Likewise.
	(__isnanf128): Likewise.
	(__fpclassify): Likewise.
	(__issignalling): Likewise.
	(__expf128): Likewise.
	(__expm1f128): Likewise.

	* sysdeps/generic/fix-fp-int-convert-overflow.h:
	(FIX_FLT128_LONG_CONVERT_OVERFLOW): New macro.
	(FIX_FLT128_LLONG_CONVERT_OVERFLOW): Likewise.

	* sysdeps/generic/math-type-macros-float128.h: New file.

	* sysdeps/generic/math_private.h: Include bits/floatn.h and
	math_private_calls.h for _Float128.
	(__isinff128): New inline implementation used when GCC < 7.0,
	since in this case __builtin_isinf_sign is broken.
	(fabsf128): New inline implementation that calls the builtin.
	(__EXPR_FLT128): New macro.
	(min_of_type): Optionally include _Float128 types too.

	* sysdeps/generic/math_private_calls.h (__kernel_sincos):
	Declare for _Float128.
	(__kernel_rem_pio2): Likewise.

	* sysdeps/ieee754/ldbl-opt/s_sin.c:
	(__DECL_SIMD_sincos_disablef128): New macro.

2017-05-14  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/math.h: Include bits/math-finite.h for float128.
	(__MATH_DECLARING_FLOATN): Define to control declaration of
	float128 functions.
	* math/bits/math-finite.h (pow10): Do not declare for float128.
	(gamma): Likewise.
	(scalb): Likewise.

2017-05-14  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>
	    Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* bits/floatn.h: New file.
	* bits/huge_val_flt128.h: Likewise.

	* bits/libm-simd-decl-stubs.h (__DECL_SIMD_cosf128): New macro.
	(__DECL_SIMD_sinf128): Likewise.
	(__DECL_SIMD_sincosf128): Likewise.
	(__DECL_SIMD_logf128): Likewise.
	(__DECL_SIMD_expf128): Likewise.
	(__DECL_SIMD_powf128): Likewise.

	* math/Makefile (headers): Install bits/floatn.h and
	bits/huge_val_flt128.h.

	* math/bits/cmathcalls.h (_Mdouble_complex_): Only define if not
	defined.

	* math/bits/mathcalls.h (pow10, isinf, finite, drem, significand)
	(isnan, gamma, nexttoward, scalb): Only define if not
	__MATH_DECLARING_FLOATN.
	(nextdown, nextup, llogb, roundeven, fromfp, ufromfp, fromfpx)
	(ufromfpx, fmaxmag, fminmag, totalorder, totalordermag)
	(canonicalize, getpayload, setpayload, setpayloadsig): Declare for
	_FloatN even if	__STDC_WANT_IEC_60559_BFP_EXT__ is not defined.

	* math/complex.h: Include bits/libc-header-start.h and bits/floatn.h.
	Include bits/cmathcalls.h to get the declarations of _Float128
	versions of complex functions.
	[__HAVE_FLOAT128 && __GLIBC_USE (IEC_60559_TYPES_EXT)] (CMPLXF128):
	Define macro.

	* math/math.h: Include bits/floatn.h and bits/huge_val_flt128.h.
	Include bits/mathcalls-helper-functions.h and bits/mathcalls.h to
	get the declarations of _Float128 versions of math functions.
	(__MATH_DECLARING_FLOATN): New macro to control declaration of
	_FloatN types.
	[__GNUC_PREREQ (6,0)] (signbit): Since GCC 6.0, __builtin_signbit
	is type-generic, so use it without __MATH_TG.
	[__HAVE_DISTINCT_FLOAT128] (isinf): This builtin is broken for
	_Float128 type on GCC < 7.0.  Explicitly call __isinff128 for
	_Float128 type and GCC < 7.0, otherwise use the builtin.
	[__HAVE_FLOAT128 && defined __USE_GNU] (M_Ef128, M_LOG2Ef128)
	(M_LOG10Ef128, M_LN2f128, M_LN10f128, M_PIf128, M_PI_2f128)
	(M_PI_4f128, M_1_PIf128, M_2_PIf128, M_SQRT2f128, M_SQRT1_2f128):
	New _GNU_SOURCE enabled macros.

2017-05-12  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/sparc/sparc32/fpu/s_signbit.S (signbit): Remove alias.
	(signbitf): Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit.S (signbit):
	Likewise.
	(signbitl): Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf.S (signbitf):
	Likewise.
	* sysdeps/sparc/sparc64/fpu/s_signbit.S (signbit): Likewise.
	(signbitl): Likewise.
	* sysdeps/sparc/sparc64/fpu/s_signbitf.S (signbitf): Likewise.

2017-05-12  Florian Weimer  <fweimer@redhat.com>

	[BZ #21386]
	* sysdeps/nptl/fork.c (__libc_fork): Remove assertions on the
	parent PID.  The assertion in the child is incorrect with PID
	namespaces.

2017-05-12  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_STATFS_F_FLAGS): Remove macro.
	* sysdeps/unix/sysv/linux/internal_statvfs.c
	[!__ASSUME_STATFS_F_FLAGS]: Remove conditional code.

2017-05-11  Zack Weinberg  <zackw@panix.com>

	* Makerules: New subdir configuration variables 'tests-internal'
	and 'test-internal-extras'.  Test files in these categories will
	still be compiled with MODULE_NAME=nonlib.  Test files in the
	existing categories (tests, xtests, test-srcs, test-extras) are
	now compiled with MODULE_NAME=testsuite.
	New subdir configuration variable 'modules-names-tests'.  Files
	which are in both 'modules-names' and 'modules-names-tests' will
	be compiled with MODULE_NAME=testsuite instead of
	MODULE_NAME=extramodules.
	(gen-as-const-headers): Move to tests-internal.
	(do-tests-clean, common-mostlyclean): Support tests-internal.
	* Makeconfig (built-modules): Add testsuite.
	* Makefile: Change libof-check-installed-headers-c and
	libof-check-installed-headers-cxx to 'testsuite'.
	* Rules: Likewise.  Support tests-internal.
	* benchtests/strcoll-inputs/filelist#en_US.UTF-8:
	Remove extra-modules.mk.

	* config.h.in: Don't check for __OPTIMIZE__ or __FAST_MATH__ here.
	* include/libc-symbols.h: Move definitions of _GNU_SOURCE,
	PASTE_NAME, PASTE_NAME1, IN_MODULE, IS_IN, and IS_IN_LIB to the
	very top of the file and rationalize their order.
	If MODULE_NAME is not defined at all, define IS_IN to always be
	false, and don't define _ISOMAC.
	If any of IS_IN (testsuite), IS_IN_build, or __cplusplus are
	true, define _ISOMAC and suppress everything else in this file,
	starting with the inclusion of config.h.
	Do check for inappropriate definitions of __OPTIMIZE__ and
	__FAST_MATH__ here, but only if _ISOMAC is not defined.
	Correct some out-of-date commentary.

	* include/math.h: If _ISOMAC is defined, undefine NO_LONG_DOUBLE
	and _Mlong_double_ before including math.h.
	* include/string.h: If _ISOMAC is defined, don't expose
	_STRING_ARCH_unaligned. Move a comment to a more appropriate
	location.

	* include/errno.h, include/stdio.h, include/stdlib.h, include/string.h
	* include/time.h, include/unistd.h, include/wchar.h: No need to
	check __cplusplus nor use __BEGIN_DECLS/__END_DECLS.

	* misc/sys/cdefs.h (__NTHNL): New macro.
	* sysdeps/m68k/m680x0/fpu/bits/mathinline.h
	(__m81_defun): Use __NTHNL to avoid errors with GCC 6.

	* elf/tst-env-setuid-tunables.c: Include config.h with _LIBC
	defined, for HAVE_TUNABLES.
	* inet/tst-checks-posix.c: No need to define _ISOMAC.
	* intl/tst-gettext2.c: Provide own definition of N_.
	* math/test-signgam-finite-c99.c: No need to define _ISOMAC.
	* math/test-signgam-main.c: No need to define _ISOMAC.
	* stdlib/tst-strtod.c: Convert to test-driver. Split locale_test to...
	* stdlib/tst-strtod1i.c: ...this new file.
	* stdlib/tst-strtod5.c: Convert to test-driver and add copyright notice.
	Split tests of __strtod_internal to...
	* stdlib/tst-strtod5i.c: ...this new file.
	* string/test-string.h: Include stdint.h. Duplicate definition of
	inhibit_loop_to_libcall here (from libc-symbols.h).
	* string/test-strstr.c: Provide dummy definition of
	libc_hidden_builtin_def when including strstr.c.
	* sysdeps/ia64/fpu/libm-symbols.h: Suppress entire file in _ISOMAC
	mode; no need to test __STRICT_ANSI__ nor __cplusplus as well.
	* sysdeps/x86_64/fpu/math-tests-arch.h: Include cpu-features.h.
	Don't include init-arch.h.
	* sysdeps/x86_64/multiarch/test-multiarch.h: Include cpu-features.h.
	Don't include init-arch.h.

	* elf/Makefile: Move tst-ptrguard1-static, tst-stackguard1-static,
	tst-tls1-static, tst-tls2-static, tst-tls3-static, loadtest,
	unload, unload2, circleload1, neededtest, neededtest2,
	neededtest3, neededtest4, tst-tls1, tst-tls2, tst-tls3,
	tst-tls6, tst-tls7, tst-tls8, tst-dlmopen2, tst-ptrguard1,
	tst-stackguard1, tst-_dl_addr_inside_object, and all of the
	ifunc tests to tests-internal.
	Don't add $(modules-names) to test-extras.
	* inet/Makefile: Move tst-inet6_scopeid_pton to tests-internal.
	Add tst-deadline to tests-static-internal.
	* malloc/Makefile: Move tst-mallocstate and tst-scratch_buffer to
	tests-internal.
	* misc/Makefile: Move tst-atomic and tst-atomic-long to tests-internal.
	* nptl/Makefile: Move tst-typesizes, tst-rwlock19, tst-sem11,
	tst-sem12, tst-sem13, tst-barrier5, tst-signal7, tst-tls3,
	tst-tls3-malloc, tst-tls5, tst-stackguard1, tst-sem11-static,
	tst-sem12-static, and tst-stackguard1-static to tests-internal.
	Link tests-internal with libpthread also.
	Don't add $(modules-names) to test-extras.
	* nss/Makefile: Move tst-field to tests-internal.
	* posix/Makefile: Move bug-regex5, bug-regex20, bug-regex33,
	tst-rfc3484, tst-rfc3484-2, and tst-rfc3484-3 to tests-internal.
	* stdlib/Makefile: Move tst-strtod1i, tst-strtod3, tst-strtod4,
	tst-strtod5i, tst-tls-atexit, and tst-tls-atexit-nodelete to
	tests-internal.
	* sunrpc/Makefile: Move tst-svc_register to tests-internal.
	* sysdeps/powerpc/Makefile: Move test-get_hwcap and
	test-get_hwcap-static to tests-internal.
	* sysdeps/unix/sysv/linux/Makefile: Move tst-setgetname to
	tests-internal.
	* sysdeps/x86_64/fpu/Makefile: Add all libmvec test modules to
	modules-names-tests.

2017-05-11  Zack Weinberg  <zackw@panix.com>

	* libio/libio.h: Condition dummy definition of _IO_lock_t on
	_IO_lock_t_defined, not _IO_MTSAFE_IO. Unconditionally use the
	non-_IO_MTSAFE_IO definitions for _IO_peekc, _IO_flockfile,
	_IO_funlockfile, and _IO_ftrylockfile.  Only define
	_IO_cleanup_region_start and _IO_cleanup_region_end if not
	already defined.
	* include/libio.h: If _IO_MTSAFE_IO is defined, redefine
	_IO_peekc, _IO_flockfile, _IO_funlockfile, and _IO_ftrylockfile
	appropriately.
	* sysdeps/generic/stdio-lock.h, sysdeps/nptl/stdio-lock.h:
	Define _IO_lock_t_defined after defining _IO_lock_t.

2016-05-10  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/powerpc/powerpc32/backtrace.c (is_sigtramp_address): Use
	void* for argument type and use VDSO_SYMBOL macro.
	(is_sigtramp_address_rt): Likewise.
	(__backtrace): Setup expected frame pointer address for signal
	handling.
	* sysdeps/powerpc/powerpc64/backtrace.c (is_sigtramp_address): Use
	void* for argumetn type and use VSDO_SYMBOL macro.
	(__backtrace): Setup expected frame pointer address for signal
	handling.

	* sysdeps/unix/sysv/linux/writev.c: New file.

	* sysdeps/unix/sysv/linux/readv.c: New file.

	* include/unistd.h (write): Add hidden proto.
	* io/Makefile (CFLAGS-write.c): New define.
	* nptl/Makefile (CFLAGS-write.c): Likewise.
	* sysdeps/unix/sysv/linux/write.c: New file.

	[BZ #21428]
	* include/unistd.h (read): Add hidden proto.
	* io/Makefile (CFLAGS-read.c): New define.
	* nptl/Makefile (CFLAGS-read.c): Likewise.
	* sysdeps/unix/sysv/linux/read.c: New file.

	* io/Makefile (CFLAGS-creat.c): New rule.
	(CFLAGS-creat64.c): Likewise.
	* sysdeps/unix/sysv/linux/alpha/creat.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/creat.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/creat64.c: Likewise.
	* sysdeps/unix/sysv/linux/creat.c: New file.
	* sysdeps/unix/sysv/linux/creat64.c: Likewise.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove create from
	auto-generated list.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.

	* sysdeps/unix/sysv/linux/generic/open.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/open64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/open64.c: Likewise.
	* sysdeps/unix/sysv/linux/open.c: New file.
	* sysdeps/unix/sysv/linux/open64.c (__libc_open64): Define symbol
	iff __WORDSIZE != 64 and use __NR_openat when available.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Remove open
	from auto-generated list.

	* nptl/Makefile (CFLAGS-close.c): New flag.
	* sysdeps/unix/sysv/linux/close.c: New file.

2017-05-11  DJ Delorie  <dj@redhat.com>

	* MAINTAINERS: New.  Points to wiki.

2017-05-11  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* scripts/gen-tunables.awk: Add attribute_relro to
	tunable_list.

2017-05-11  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21457]
	* sysdeps/arm/sys/ucontext.h (R0): Condition on [__USE_MISC].
	(R1): Likewise.
	(R2): Likewise.
	(R3): Likewise.
	(R4): Likewise.
	(R5): Likewise.
	(R6): Likewise.
	(R7): Likewise.
	(R8): Likewise.
	(R9): Likewise.
	(R10): Likewise.
	(R11): Likewise.
	(R12): Likewise.
	(R13): Likewise.
	(R14): Likewise.
	(R15): Likewise.
	* sysdeps/i386/sys/ucontext.h (REG_GS): Likewise.
	(REG_FS): Likewise.
	(REG_ES): Likewise.
	(REG_DS): Likewise.
	(REG_EDI): Likewise.
	(REG_ESI): Likewise.
	(REG_EBP): Likewise.
	(REG_ESP): Likewise.
	(REG_EBX): Likewise.
	(REG_EDX): Likewise.
	(REG_ECX): Likewise.
	(REG_EAX): Likewise.
	(REG_TRAPNO): Likewise.
	(REG_ERR): Likewise.
	(REG_EIP): Likewise.
	(REG_CS): Likewise.
	(REG_EFL): Likewise.
	(REG_UESP): Likewise.
	(REG_SS): Likewise.
	* sysdeps/m68k/sys/ucontext.h (R_D0): Likewise.
	(R_D1): Likewise.
	(R_D2): Likewise.
	(R_D3): Likewise.
	(R_D4): Likewise.
	(R_D5): Likewise.
	(R_D6): Likewise.
	(R_D7): Likewise.
	(R_A0): Likewise.
	(R_A1): Likewise.
	(R_A2): Likewise.
	(R_A3): Likewise.
	(R_A4): Likewise.
	(R_A5): Likewise.
	(R_A6): Likewise.
	(R_A7): Likewise.
	(R_SP): Likewise.
	(R_PC): Likewise.
	(R_PS): Likewise.
	(fpregset_t): Likewise.
	(MCONTEXT_VERSION): Likewise.
	* sysdeps/mips/sys/ucontext.h (CTX_R0): Likewise.
	(CTX_AT): Likewise.
	(CTX_V0): Likewise.
	(CTX_V1): Likewise.
	(CTX_A0): Likewise.
	(CTX_A1): Likewise.
	(CTX_A2): Likewise.
	(CTX_A3): Likewise.
	(CTX_T0): Likewise.
	(CTX_T1): Likewise.
	(CTX_T2): Likewise.
	(CTX_T3): Likewise.
	(CTX_T4): Likewise.
	(CTX_T5): Likewise.
	(CTX_T6): Likewise.
	(CTX_T7): Likewise.
	(CTX_S0): Likewise.
	(CTX_S1): Likewise.
	(CTX_S2): Likewise.
	(CTX_S3): Likewise.
	(CTX_S4): Likewise.
	(CTX_S5): Likewise.
	(CTX_S6): Likewise.
	(CTX_S7): Likewise.
	(CTX_T8): Likewise.
	(CTX_T9): Likewise.
	(CTX_K0): Likewise.
	(CTX_K1): Likewise.
	(CTX_GP): Likewise.
	(CTX_SP): Likewise.
	(CTX_S8): Likewise.
	(CTX_RA): Likewise.
	(CTX_MDLO): Likewise.
	(CTX_MDHI): Likewise.
	(CTX_CAUSE): Likewise.
	(CTX_EPC): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sys/ucontext.h: Condition
	inclusion of <sys/procfs.h> on [__USE_MISC].
	(greg_t): Condition on [__USE_MISC].
	(gregset_t): Likewise.
	(fpregset_t): Likewise.
	* sysdeps/unix/sysv/linux/arm/sys/ucontext.h (greg_t): Likewise.
	(NGREG): Likewise.
	(gregset_t): Likewise.
	(REG_R0): Likewise.
	(REG_R1): Likewise.
	(REG_R2): Likewise.
	(REG_R3): Likewise.
	(REG_R4): Likewise.
	(REG_R5): Likewise.
	(REG_R6): Likewise.
	(REG_R7): Likewise.
	(REG_R8): Likewise.
	(REG_R9): Likewise.
	(REG_R10): Likewise.
	(REG_R11): Likewise.
	(REG_R12): Likewise.
	(REG_R13): Likewise.
	(REG_R14): Likewise.
	(REG_R15): Likewise.
	(struct _libc_fpstate): Likewise.
	(fpregset_t): Likewise.
	* sysdeps/unix/sysv/linux/hppa/sys/ucontext.h (NGREG): Likewise.
	(NFPREG): Likewise.
	(gregset_t): Likewise.
	(fpregset_t): Likewise.
	* sysdeps/unix/sysv/linux/m68k/sys/ucontext.h (R_D0): Likewise.
	(R_D1): Likewise.
	(R_D2): Likewise.
	(R_D3): Likewise.
	(R_D4): Likewise.
	(R_D5): Likewise.
	(R_D6): Likewise.
	(R_D7): Likewise.
	(R_A0): Likewise.
	(R_A1): Likewise.
	(R_A2): Likewise.
	(R_A3): Likewise.
	(R_A4): Likewise.
	(R_A5): Likewise.
	(R_A6): Likewise.
	(R_A7): Likewise.
	(R_SP): Likewise.
	(R_PC): Likewise.
	(R_PS): Likewise.
	(fpregset_t): Likewise.
	(MCONTEXT_VERSION): Likewise.
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h (MCONTEXT_VERSION):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h (REG_R0): Likewise.
	(REG_R1): Likewise.
	(REG_R2): Likewise.
	(REG_R3): Likewise.
	(REG_R4): Likewise.
	(REG_R5): Likewise.
	(REG_R6): Likewise.
	(REG_R7): Likewise.
	(REG_R8): Likewise.
	(REG_R9): Likewise.
	(REG_R10): Likewise.
	(REG_R11): Likewise.
	(REG_R12): Likewise.
	(REG_R13): Likewise.
	(REG_R14): Likewise.
	(REG_R15): Likewise.
	* sysdeps/unix/sysv/linux/tile/sys/ucontext.h: Condition inclusion
	of <arch/abi.h> on [__USE_MISC].
	(greg_t): Condition on [__USE_MISC].
	(NGREG): Likewise.
	(gregset_t): Likewise.

2017-05-11  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/arm/nptl/bits/pthreadtypes-arch.h
	(__pthread_rwlock_arch_t): Remove __data definition.
	* sysdeps/hppa/nptl/bits/pthreadtypes-arch.h
	(__pthread_rwlock_arch_t): Likewise.

2017-05-11  Florian Weimer  <fweimer@redhat.com>

	* resolv/inet_pton.c: Reformat in GNU style.  Remove
	internal_function on static functions.

2017-05-11  Florian Weimer  <fweimer@redhat.com>

	* support/support_format_addrinfo.c (format_ai_flags_1): Renamed
	from format_ai_flags.
	(format_ai_flags): New function.  Incorporate flag formatting code
	from format_ai_one.
	(format_ai_canonname): New function.
	(format_ai_one): Remove flags parameter.
	(format_ai_family): Likewise.
	(support_format_addrinfo): Call format_ai_flags,
	format_ai_canonname.
	* resolv/tst-resolv-basic.c (check_ai_hints): Extracted from
	check_ai.
	(check_ai): Call check_ai_hints.
	(do_test): Add AI_CANONNAME tests.

2017-05-11  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gethosts): Remove malloc_addrmem.
	(gaih_inet): Likewise.

2017-05-10  Andreas Schwab  <schwab@suse.de>

	* nptl/tst-fork1.c: Include <support/test-driver.c>.
	(main): Rename to do_test and make static.

2017-05-10  Joseph Myers  <joseph@codesourcery.com>

	* string/rawmemchr.c: Include <libc-diag.h>.
	(RAWMEMCHR): Disable -Wstringop-overflow around call to memchr
	with size (size_t)-1.

2017-05-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/mips/mips32/accept4.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips32/recvmmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/sendmmsg.c: Likewise.

	* sysdeps/unix/sysv/linux/accept4.c (accept4): Use syscall if
	[__ASSUME_ACCEPT4_SYSCALL], otherwise socketcall.
	* sysdeps/unix/sysv/linux/recvmmsg.c (recvmmsg): Use syscall if
	[__ASSUME_RECVMMSG_SYSCALL], otherwise socketcall.
	* sysdeps/unix/sysv/linux/sendmmsg.c (__sendmmsg): Use syscall if
	[__ASSUME_SENDMMSG_SYSCALL], otherwise socketcall.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Move to general list of macros for
	socket syscalls.
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Remove.
	(__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Remove.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	(__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h
	(__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL_WITH_SOCKETCALL): Likewise.
	(__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.

2017-05-09  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* posix/Makefile (headers): Add pthreadtypes-arch.h and
	thread-shared-types.h.
	* sysdeps/aarch64/nptl/bits/pthreadtypes-arch.h: New file: arch
	specific thread definition.
	* sysdeps/alpha/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/arm/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/hppa/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/ia64/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/m68k/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/microblaze/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/mips/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/nios2/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/powerpc/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/s390/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/sh/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/sparc/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/tile/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/x86/nptl/bits/pthreadtypes-arch.h: Likewise.
	* sysdeps/nptl/bits/thread-shared-types.h: New file: shared
	thread definition between POSIX and C11.
	* sysdeps/aarch64/nptl/bits/pthreadtypes.h.: Remove file.
	* sysdeps/alpha/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/arm/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/hppa/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/m68k/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/microblaze/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/mips/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/nios2/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/ia64/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/powerpc/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/s390/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/sh/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/sparc/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/tile/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/x86/nptl/bits/pthreadtypes.h: Likewise.
	* sysdeps/nptl/bits/pthreadtypes.h: New file: common thread
	definitions shared across all architectures.

2017-05-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SENDMMSG_SYSCALL): Define unconditionally.
	(__ASSUME_SENDMMSG): Likewise.
	(__ASSUME_SENDMMSG_SOCKETCALL): Remove macro.
	* sysdeps/unix/sysv/linux/sendmmsg.c (__sendmmsg): Define using
	sendmmsg syscall if that can be assumed to be present, socketcall
	otherwise, with no fallback for runtime failure.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL): Define unconditionally.
	(__ASSUME_RECVMMSG_SOCKETCALL): Remove macro.
	(__ASSUME_RECVMMSG): Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c (recvmmsg): Define using
	recvmmsg syscall if it can be assumed to be present, socketcall
	otherwise, with no fallback for runtime failure.

2017-05-09  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>
	    Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* bits/libc-header-start.h:
	(__GLIBC_USE_IEC_60559_TYPES_EXT): New macro.
	* include/features.h: Describe __STDC_WANT_IEC_60559_TYPES_EXT__.
	* manual/creature.texi: Likewise.

2017-05-09  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>
	    Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/Makefile:
	(type-float128-suffix): New variable
	(type-float128-routines): Likewise
	(type-float128-yes): Likewise
	(types): Append float128 if supported
	(types-basic): New variable to control the use of templates for
	float, double, and long double, but not for float128 or newer types.
	(type-basic-foreach): Likewise.

	* sysdeps/ieee754/float128/Makeconfig: New file.
	* sysdeps/ieee754/float128/Versions: New file.

2017-05-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_PRLIMIT64):
	Remove macro.
	* sysdeps/unix/sysv/linux/getrlimit64.c (__getrlimit64): Assume
	prlimit64 is always available and does not give an ENOSYS error.
	* sysdeps/unix/sysv/linux/prlimit.c [__NR_prlimit64]: Make code
	unconditional.
	[!__NR_prlimit64]: Remove conditional code.
	* sysdeps/unix/sysv/linux/setrlimit.c (__setrlimit): Assume
	prlimit64 is always available and does not give an ENOSYS error.
	* sysdeps/unix/sysv/linux/setrlimit64.c (__setrlimit64): Likewise.

2017-05-09  Zack Weinberg  <zackw@panix.com>

	* sunrpc/tst-xdrmem2.c: Include stdint.h.

2017-05-09  Florian Weimer  <fweimer@redhat.com>

	[BZ #21474]
	* resolv/res_libc.c (res_init): Use RES_DFLRETRY.
	(__res_maybe_init): Likewise.

2017-05-09  Zack Weinberg  <zackw@panix.com>

	* extra-modules.mk: Delete file.
	* cppflags-iterator.mk: Rename to ...
	* libof-iterator.mk: ...this.  Adjust comments.

	* Makerules, extra-lib.mk, benchtests/Makefile, elf/Makefile
	* elf/rtld-Rules, iconv/Makefile, locale/Makefile, malloc/Makefile
	* nscd/Makefile, sunrpc/Makefile, sysdeps/s390/Makefile:
	Use libof-iterator.mk instead of cppflags-iterator.mk or
	extra-modules.mk.

	* benchtests/strcoll-inputs/filelist#en_US.UTF-8: Remove
	extra-modules.mk and cppflags-iterator.mk, add libof-iterator.mk.

2017-05-09  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerated.

2017-05-08  Carlos O'Donell  <carlos@redhat.com>

	* stdio-common/vfprintf.c (EXTSIZ): Define.
	(vfprintf): Use EXTSIZ.
	(printf_positional): Likewise.

2017-05-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_PROC_PID_TASK_COMM): Remove macro.
	* sysdeps/unix/sysv/linux/tst-setgetname.c: Do not include
	<kernel-features.h>.
	(do_test) [!__ASSUME_PROC_PID_TASK_COMM]: Remove conditional code.

	* sysdeps/unix/sysv/linux/x86_64/kernel-features.h
	(__ASSUME_GETCPU_SYSCALL): Remove macro.

2017-05-08  Florian Weimer  <fweimer@redhat.com>

	Prevent multiple deletion of temporary files.
	* support/temp_file.c (struct temp_name_list): Add owner member.
	(add_temp_file): Record owner.
	(support_delete_temp_files): Delete file only if owner matches.
	* posix/tst-exec.c (temp_fd1, temp_fd2): Define.
	(do_prepare): Use create_temp_file instead of add_temp_file.
	Initialize temp_fd1, temp_fd2.
	(do_test): Use global temp_fd1, temp_fd2 variables.  Let the test
	framework remove the temporary files.
	* posix/tst-exec.c (temp_fd1, temp_fd2, temp_fd3): Define.
	(do_prepare): Use create_temp_file instead of add_temp_file.
	Initialize temp_fd1, temp_fd2, temp_fd3.
	(do_test): Use global temp_fd1, temp_fd2, temp_fd3 variables.  Let
	the test framework remove the temporary files.
	* posix/tst-vfork3.c (do_prepare): Adjust for LIFO order of file
	deletion.
	* posix/tst-pathconf.c (do_test): Do not call rmdir on the
	temporary directory.  It is removed by the test framework.
	* dirent/tst-scandir.c (do_test): Likewise.

2017-05-08  Florian Weimer  <fweimer@redhat.com>

	Delete temporary files in LIFO order.
	* support/temp_file.c (struct temp_name_list): Replace q member
	with next.
	(add_temp_file): Add new file to front of linked list.
	(support_delete_temp_files): Use next member.
	(support_print_temp_files): Likewise.

2017-05-08  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Remove
	sys/ultrasound.h.
	* sysdeps/unix/sysv/linux/sys/ultrasound.h: Remove file.

2017-05-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/i386/configure.ac (arch_minimum_kernel):
	Remove.
	* sysdeps/unix/sysv/linux/i386/configure: Regenerated.
	* sysdeps/unix/sysv/linux/x86_64/64/configure.ac
	(arch_minimum_kernel): Remove.
	* sysdeps/unix/sysv/linux/x86_64/64/configure: Regenerated.
	* README: Update statement about Linux kernel requirements.

2017-05-04  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* manual/llio.texi: Add preadv and pwritev documentation.

2017-05-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21455]
	* bits/stdint-intn.h: New file.
	* bits/stdint-uintn.h: Likewise.
	* stdlib/Makefile (headers): Add bits/stdint-intn.h and
	bits/stdint-uintn.h.
	* inet/netinet/in.h: Include <bits/stdint-uintn.h> instead of
	<stdint.h>.
	* posix/sys/types.h: Include <bits/stdint-intn.h>.
	(__int8_t_defined): Do not define here.
	(int8_t): Likewise.
	(int16_t): Likewise.
	(int32_t): Likewise.
	(int64_t): Likewise.
	[__GNUC_PREREQ (2, 7)] (__intN_t): Likewise.
	* resolv/netdb.h: Include <bits/stdint-uintn.h> instead of
	<stdint.h>.
	* include/netdb.h [_ISOMAC]: Do not include <stdint.h>.
	* sysdeps/generic/stdint.h: Include <bits/stdint-intn.h> and
	<bits/stdint-uintn.h>.
	(int8_t): Do not define here.
	(int16_t): Likewise.
	(int32_t): Likewise.
	(int64_t): Likewise.
	(uint8_t): Likewise.
	(uint16_t): Likewise.
	(uint32_t): Likewise.
	(uint64_t): Likewise.
	* conform/Makefile (test-xfail-XPG42/arpa/inet.h/conform): Remove
	variable.
	(test-xfail-XPG42/netdb.h/conform): Likewise.
	(test-xfail-XPG42/netinet/in.h/conform): Likewise.
	(test-xfail-UNIX98/arpa/inet.h/conform): Likewise.
	(test-xfail-UNIX98/netdb.h/conform): Likewise.
	(test-xfail-UNIX98/netinet/in.h/conform): Likewise.

2017-05-04  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/generic/math_private.h (mathx_hidden_def): New macro.
	* sysdeps/ieee754/ldbl-128/s_finitel.c: Replace hidden_def with
	the above.
	* sysdeps/ieee754/ldbl-128/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isnanl.c: Likewise.

2017-05-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21445]
	* signal/signal.h [__USE_XOPEN2K8] (bsd_signal): Do not declare.

	[BZ #21457]
	* sysdeps/unix/sysv/linux/mips/sys/ucontext.h
	[_MIPS_SIM != _ABIO32] (mcontext_t): Rename field reserved to
	__glibc_reserved1.
	* sysdeps/unix/sysv/linux/x86/bits/sigcontext.h
	(struct _fpx_sw_bytes): Rename field padding to __glibc_reserved1.
	(struct _fpxreg): Likewise.
	[!__x86_64__] (struct _fpstate): Rename field reserved to
	__glibc_reserved1.  Rename field padding to __glibc_reserved2.
	[__x86_64__] (struct _fpstate): Rename field padding to
	__glibc_reserved1.
	(struct _xsave_hdr): Rename field reserved1 to __glibc_reserved1.
	Rename field reserved2 to __glibc_reserved2.
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h
	[__x86_64__] (struct _libc_fpxreg): Rename field padding to
	__glibc_reserved1.
	[__x86_64__] (struct _libc_fpstate): Rename field padding to
	__glibc_reserved1.

2017-05-03  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/strncat.c: Correct hwcap
	variable name.

2017-05-03  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21391]
	* sysdeps/i386/dl-machine.h (dl_platform_init) [IS_IN (rtld)]:
	Only call init_cpu_features.
	[!IS_IN (rtld)]: Only set GLRO(dl_platform) to NULL if needed.
	* sysdeps/x86_64/dl-machine.h (dl_platform_init): Likewise.
	* sysdeps/i386/dl-procinfo.h: Removed.
	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h: Don't include
	<sysdeps/i386/dl-procinfo.h> nor <ldsodefs.h>.  Include
	<sysdeps/x86/dl-procinfo.h>.
	(_dl_procinfo): Replace _DL_HWCAP_COUNT with 32.
	* sysdeps/unix/sysv/linux/x86_64/dl-procinfo.h [!IS_IN (ldconfig)]:
	Include <sysdeps/x86/dl-procinfo.h> instead of
	 <sysdeps/generic/dl-procinfo.h>.
	* sysdeps/x86/cpu-features.c: Include <dl-hwcap.h>.
	(init_cpu_features): Set dl_platform, dl_hwcap and dl_hwcap_mask.
	* sysdeps/x86/cpu-features.h (bit_cpu_LZCNT): New.
	(bit_cpu_MOVBE): Likewise.
	(bit_cpu_BMI1): Likewise.
	(bit_cpu_BMI2): Likewise.
	(index_cpu_BMI1): Likewise.
	(index_cpu_BMI2): Likewise.
	(index_cpu_LZCNT): Likewise.
	(index_cpu_MOVBE): Likewise.
	(index_cpu_POPCNT): Likewise.
	(reg_BMI1): Likewise.
	(reg_BMI2): Likewise.
	(reg_LZCNT): Likewise.
	(reg_MOVBE): Likewise.
	(reg_POPCNT): Likewise.
	* sysdeps/x86/dl-hwcap.h: New file.
	* sysdeps/x86/dl-procinfo.h: Likewise.
	* sysdeps/x86/dl-procinfo.c (_dl_x86_hwcap_flags): New.
	(_dl_x86_platforms): Likewise.

2017-05-03  DJ Delorie  <dj@redhat.com>

	[BZ #21411]
	* malloc/malloc.c: Tweak realloc/MREMAP comment to be more accurate.

2017-05-03  Phil Blundell  <pb@pbcl.net>

	* inet/netinet/in.h (struct ip_mreq_source): Correct misplaced
	comments.

2017-05-03  Carlos O'Donell  <carlos@redhat.com>

	[BZ #20116]
	* nptl/pthread_create.c: Expand comments to describe
	semaphore-like and mutex-like uses of PD->lock.

2017-04-03  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/epoll_wait.c: New file.
	* sysdeps/unix/sysv/linux/generic/epoll_wait.c: Remove file.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove epoll_wait from
	auto-generation list.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add
	epoll_wait.
	* sysdeps/unix/sysv/linux/generic/Makefile (sysdep_routines):
	Remove epoll_wait.

	* sysdeps/unix/sysv/linux/alpha/Makefile (sysdep_routines): Add
	osf_select.
	* sysdeps/unix/sysv/linux/alpha/select.c: New file.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Remove select and
	osf_select from auto-generation list.
	* sysdeps/unix/sysv/linux/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/generic/select.c: Remove file.
	* sysdeps/unix/sysv/linux/select.c: New file.

	* sysdeps/unix/sysv/linux/generic/poll.c: Remove file.
	* sysdeps/unix/sysv/linux/poll.c: New file.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove poll from
	auto-generation list.

2017-05-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/aarch64/bits/hwcap.h (HWCAP_ASIMDRDM):
	New macro.

2017-05-02  Vladimir Mezentsev <vladimir.mezentsev@oracle.com>

	[BZ #21179]
	* sysdeps/sparc/sparc64/dl-machine.h: Handle R_SPARC_DISP64 and
	R_SPARC_REGISTER relocations.

2017-05-02  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* include/unistd.h (__pread): Add libc_hidden_proto.
	(__pread64): Likewise.
	(__pwrite): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/localplt.data [libc.so]
	(__pread64): Remove.
	* sysdeps/unix/sysv/linux/pread.c (__pread64): Add libc_hidden_weak.
	* sysdeps/unix/sysv/linux/pread64.c (__pread64): Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c (__pwrite): Likewise.

2017-05-02  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2017-04-26  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/tst-cancel4-common.c: Use libsupport.
	* nptl/tst-cancel4-common.h: Likewise.
	* nptl/tst-cancel4.c (tf_read): Likewise.
	(tf_readv): Likewise.
	(tf_write): Likewise.
	(tf_writev): Likewise.
	(tf_sleep): Likewise.
	(tf_usleep): Likewise.
	(tf_nanosleep): Likewise.
	(tf_select): Likewise.
	(tf_pselect): Likewise.
	(tf_poll): Likewise.
	(tf_ppoll): Likewise.
	(tf_wait): Likewise.
	(tf_waitpid): Likewise.
	(tf_waitid): Likewise.
	(tf_sigpause): Likewise.
	(tf_sigsuspend): Likewise.
	(tf_sigwait): Likewise.
	(tf_sigwaitinfo): Likewise.
	(tf_sigtimedwait): Likewise.
	(tf_pause): Likewise.
	(tf_accept): Likewise.
	(tf_send): Likewise.
	(tf_recv): Likewise.
	(tf_recvfrom): Likewise.
	(tf_recvmsg): Likewise.
	(tf_open): Likewise.
	(tf_close): Likewise.
	(tf_pread): Likewise.
	(tf_pwrite): Likewise.
	(tf_preadv): Likewise.
	(tf_pwritev): Likewise.
	(tf_fsync): Likewise.
	(tf_fdatasync): Likewise.
	(tf_msync): Likewise.
	(tf_sendto): Likewise.
	(tf_sendmsg): Likewise.
	(tf_creat): Likewise.
	(tf_connect): Likewise.
	(tf_tcdrain): Likewise.
	(tf_msgrcv): Likewise.
	(tf_msgsnd): Likewise.
	* nptl/tst-cancel4_1.c (tf_sendmmsg): Likewise.
	* nptl/tst-cancel4_2.c (tf_recvmmsg): Likewise.

	* misc/tst-preadvwritev-common.c (do_prepare): Use libsupport
	expected arguments.
	(do_test): Adapt to use libsupport.

2017-05-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/gnu/netinet/tcp.h (TCP_FASTOPEN_CONNECT): New macro.

	* sysdeps/unix/sysv/linux/bits/socket.h (PF_SMC): New macro.
	(PF_MAX): Set to 44.
	(AF_SMC): New macro.

	* scripts/build-many-glibcs.py (Context.checkout): Default Linux
	kernel version to 4.11.

2017-04-28  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #21280]
	* sysdeps/powerpc/power7/fpu/s_logbl.c (__logbl): Ignore the
	signal of subnormals and adjust the exponent of power of 2 down
	when low part has opposite sign.

2017-04-28  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64le/Implies: New file.
	* sysdeps/powerpc/powerpc64le/fpu/Implies: New file.
	* sysdeps/powerpc/powerpc64le/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64le/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power7/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power7/fpu/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power7/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power7/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power8/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power8/fpu/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power8/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power8/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power9/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power9/fpu/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power9/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64le/power9/multiarch/Implies: New file.
	* sysdeps/powerpc/preconfigure: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64le/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64le/fpu/Implies: New file.

2017-04-28  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/semaphore.h-data [XOPEN2K] (time.h): Allow header
	inclusion.
	* conform/Makefile (test-xfail-XOPEN2K/semaphore.h/conform):
	Remove.

2017-04-27  Joseph Myers  <joseph@codesourcery.com>

	* conform/GlibcConform.pm (XPG4): Rename standard to XPG42.
	(XPG3): Rename standard to XPG4.
	* conform/Makefile: Likewise.
	* conform/list-header-symbols.pl: Likewise.
	* conform/data/aio.h-data: Likewise.
	* conform/data/arpa/inet.h-data: Likewise.
	* conform/data/complex.h-data: Likewise.
	* conform/data/ctype.h-data: Likewise.
	* conform/data/dlfcn.h-data: Likewise.
	* conform/data/fcntl.h-data: Likewise.
	* conform/data/fenv.h-data: Likewise.
	* conform/data/float.h-data: Likewise.
	* conform/data/fmtmsg.h-data: Likewise.
	* conform/data/ftw.h-data: Likewise.
	* conform/data/grp.h-data: Likewise.
	* conform/data/inttypes.h-data: Likewise.
	* conform/data/iso646.h-data: Likewise.
	* conform/data/langinfo.h-data: Likewise.
	* conform/data/libgen.h-data: Likewise.
	* conform/data/limits.h-data: Likewise.
	* conform/data/locale.h-data: Likewise.
	* conform/data/math.h-data: Likewise.
	* conform/data/mqueue.h-data: Likewise.
	* conform/data/ndbm.h-data: Likewise.
	* conform/data/net/if.h-data: Likewise.
	* conform/data/netdb.h-data: Likewise.
	* conform/data/netinet/in.h-data: Likewise.
	* conform/data/poll.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* conform/data/pwd.h-data: Likewise.
	* conform/data/sched.h-data: Likewise.
	* conform/data/search.h-data: Likewise.
	* conform/data/semaphore.h-data: Likewise.
	* conform/data/signal.h-data: Likewise.
	* conform/data/spawn.h-data: Likewise.
	* conform/data/stdbool.h-data: Likewise.
	* conform/data/stdint.h-data: Likewise.
	* conform/data/stdio.h-data: Likewise.
	* conform/data/stdlib.h-data: Likewise.
	* conform/data/string.h-data: Likewise.
	* conform/data/strings.h-data: Likewise.
	* conform/data/stropts.h-data: Likewise.
	* conform/data/sys/mman.h-data: Likewise.
	* conform/data/sys/resource.h-data: Likewise.
	* conform/data/sys/select.h-data: Likewise.
	* conform/data/sys/socket.h-data: Likewise.
	* conform/data/sys/stat.h-data: Likewise.
	* conform/data/sys/statvfs.h-data: Likewise.
	* conform/data/sys/time.h-data: Likewise.
	* conform/data/sys/timeb.h-data: Likewise.
	* conform/data/sys/types.h-data: Likewise.
	* conform/data/sys/uio.h-data: Likewise.
	* conform/data/sys/un.h-data: Likewise.
	* conform/data/sys/wait.h-data: Likewise.
	* conform/data/syslog.h-data: Likewise.
	* conform/data/termios.h-data: Likewise.
	* conform/data/tgmath.h-data: Likewise.
	* conform/data/time.h-data: Likewise.
	* conform/data/ucontext.h-data: Likewise.
	* conform/data/unistd.h-data: Likewise.
	* conform/data/utmpx.h-data: Likewise.
	* conform/data/varargs.h-data: Likewise.
	* conform/data/wchar.h-data: Likewise.
	* conform/data/wctype.h-data: Likewise.

2017-04-26  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Context.checkout): Default gcc
	version to 7 branch.

2017-04-25  Uro≈° Bizjak  <ubizjak@gmail.com>

	* sysdeps/alpha/fpu/math_private.h (__ieee754_sqrt): Add
	earlyclobber to output operand of sqrt insn.
	(__ieee754_sqrtf): Ditto.

2017-04-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21426]
	* misc/bits/types/struct_iovec.h: New file.
	* misc/Makefile (headers): Add bits/types/struct_iovec.h.
	* include/bits/types/struct_iovec.h: New file.
	* bits/uio.h (struct iovec): Replace by inclusion of
	<bits/types/struct_iovec.h>.
	* sysdeps/unix/sysv/linux/bits/uio.h (struct iovec): Likewise.
	* socket/sys/socket.h: Include <bits/types/struct_iovec.h> instead
	of <sys/uio.h>.
	* nptl/tst-cancel4.c: Include <sys/uio.h>
	* posix/test-errno.c: Likewise.
	* support/resolv_test.c: Likewise.
	* conform/Makefile (test-xfail-POSIX2008/arpa/inet.h/conform):
	Remove.
	(test-xfail-POSIX2008/netdb.h/conform): Likewise.
	(test-xfail-POSIX2008/netinet/in.h/conform): Likewise.
	(test-xfail-POSIX2008/sys/socket.h/conform): Likewise.

	* conform/data/sys/socket.h-data (*_t): Allow.

2017-04-24  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/spawni.c (__spawni_child): Remove ununsed
	assignment.

2017-04-24  Daurnimator  <quae@daurnimator.com>
	    Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21340]
	* posix/Makefile (tests): Add tst-posix_spawn-setsid to list of tests.
	* posix/spawn.h: define POSIX_SPAWN_SETSID flag.
	* posix/spawnattr_setflags.c (ALL_FLAGS): Add POSIX_SPAWN_SETSID to
	valid flags.
	* posix/tst-posix_spawn-setsid.c: Add test for POSIX_SPAWN_SETSID.
	* sysdeps/mach/hurd/spawni.c (__spawni): Implementation of
	POSIX_SPAWN_SETSID.
	* sysdeps/posix/spawni.c (__spawni): Likewise.
	* sysdeps/unix/sysv/linux/spawni.c (__spawni_child): Likewise.
	* NEWS: Add note about POSIX_SPAWN_SETSID support.

2017-04-24  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/generic/math_private.h: Move the declaration of many
	functions to sysdeps/generic/math_private_calls.h.
	* sysdeps/generic/math_private_calls.h: New file with the
	declarations of the functions removed from math_private.h
	macroized by floating-point type.

2017-04-21  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/multiarch/utf8-utf32-z9.c: New File.
	* sysdeps/s390/utf8-utf32-z9.c: Move ifunc resolvers to multiarch
	folder and define ifunc versions depending on HAVE_[FROM|TO]_[C|CU|VX].
	(HAVE_FROM_C, HAVE_FROM_CU, HAVE_FROM_VX, HAVE_TO_C, HAVE_TO_VX,
	FROM_LOOP_DEFAULT, FROM_LOOP_C, FROM_LOOP_CU, FROM_LOOP_VX,
	TO_LOOP_DEFAULT, TO_LOOP_C, TO_LOOP_VX): New Define.

2017-04-21  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/multiarch/utf16-utf32-z9.c: New File.
	* sysdeps/s390/utf16-utf32-z9.c: Move ifunc resolvers to multiarch
	folder and define ifunc versions depending on HAVE_[FROM|TO]_[C|VX].
	(HAVE_FROM_C, HAVE_FROM_VX, HAVE_TO_C, HAVE_TO_VX, FROM_LOOP_DEFAULT,
	FROM_LOOP_C, FROM_LOOP_VX, TO_LOOP_DEFAULT, TO_LOOP_C, TO_LOOP_VX):
	New Define.

2017-04-21  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/multiarch/utf8-utf16-z9.c: New File.
	* sysdeps/s390/utf8-utf16-z9.c: Move ifunc resolvers to multiarch
	folder and define ifunc versions depending on HAVE_[FROM|TO]_[C|CU|VX].
	(HAVE_FROM_C, HAVE_FROM_CU, HAVE_FROM_VX, HAVE_TO_C, HAVE_TO_VX,
	FROM_LOOP_DEFAULT, FROM_LOOP_C, FROM_LOOP_CU, FROM_LOOP_VX,
	TO_LOOP_DEFAULT, TO_LOOP_C, TO_LOOP_VX): New Define.

2017-04-21  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/multiarch/ifunc-resolve.h
	(s390_libc_ifunc_expr_init, s390_libc_ifunc_expr): New Define.
	* sysdeps/s390/multiarch/8bit-generic.c
	(__to_generic, __from_generic): Use s390_libc_ifunc_expr to
	define ifunc resolvers.

2017-04-21  Florian Weimer  <fweimer@redhat.com>

	[BZ #20424]
	* manual/memory.texi (Replacing malloc): New section.
	(Allocating Storage For Program Data): Reference it.
	(The GNU Allocator): Likewise.

2017-04-20  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/Versions (__strtod_internal): List explicitly, not as
	wildcard.
	(__strtof_internal): Likewise.
	(__strtold_internal): Likewise.
	(__strtol_internal): Likewise.
	(__strtoll_internal): Likewise.
	(__strtoul_internal): Likewise.
	(__strtoull_internal): Likewise.
	(__strtoq_internal): Likewise.
	(__strtouq_internal): Likewise.
	* wcsmbs/Versions (__wcstod_internal): Likewise.
	(__wcstof_internal): Likewise.
	(__wcstold_internal): Likewise.
	(__wcstol_internal): Likewise.
	(__wcstoll_internal): Likewise.
	(__wcstoul_internal): Likewise.
	(__wcstoull_internal): Likewise.

2017-04-20  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* io/sys/stat.h: Use __USE_XOPEN2K8 insteaf of __USE_ATFILE for
	struct timespec definition.

2017-04-19  Florian Weimer  <fweimer@redhat.com>

	* resolv/nss_dns/dns-host.c (getanswer_r): Fix parentheses.

2017-04-19  Florian Weimer  <fweimer@redhat.com>

	* inet/rcmd.c (rresvport_af): Fix typo in comment.
	* inet/rexec.c (rexec_af): Likewise.

2017-04-19  Zack Weinberg  <zackw@panix.com>

	* posix/tst-mmap-offset.c: Include stdint.h.
	* resolv/tst-ns_name_compress.c: Include string.h.
	* resolv/tst-resolv-edns.c: Include resolv.h.

2017-04-19  Florian Weimer  <fweimer@redhat.com>

	* resolv/gai_suspend.c (gai_suspend): Replace __builtin_expect
	with __glibc_likely.
	* resolv/nss_dns/dns-host.c (getanswer_r, gaih_getanswer_slice):
	Replace __builtin_expect with __glibc_unlikely.
	* resolv/res_init.c (__res_vinit): Likewise.
	* resolv/res_query.c (__libc_res_nquery): Likewise.
	* resolv/res_send.c (__libc_res_nsend): Likewise.

2017-04-19  Florian Weimer  <fweimer@redhat.com>

	[BZ #15722]
	* resolv/res_hconf.c (_res_hconf_reorder_addrs): Create socket
	with SOCK_CLOEXEC.
	* resolv/res_send.c (send_vc, reopen): Likewise.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Likewise.
	* sysdeps/unix/sysv/linux/check_native.c (__check_native):
	Likewise.
	* sysdeps/unix/sysv/linux/ifaddrs.c (__netlink_open): Likewise.
	* inet/rexec.c (rexec_af): Add comment.
	* inet/rcmd.c (rresvport_af): Likewise.

2017-04-19  Florian Weimer  <fweimer@redhat.com>

	* nscd/connections.c (have_accept4): Removed definition.
	(nscd_run_worker, main_loop_poll, main_loop_epolll): Assume that
	accept4 works.
	* manual/install.texi (Linux): Require at least kernel 3.2.18 for
	ia64 because that was the first version with accept4 support.
	* support/Makefile (libsupport-routines): Add xaccept4.
	* support/xsocket.h (xaccept4): Declare.
	* support/xaccept4.c: New file.
	* socket/tst-accept4.c: New file.
	* socket/Makefile (tests): Add tst-accept4.
	* sysdeps/mach/hurd/kernel-features.h (__ASSUME_ACCEPT4): Remove
	definition.
	* sysdeps/nacl/kernel-features.h (__ASSUME_ACCEPT4): Remove
	comment.
	* sysdeps/unix/sysv/linux/accept4.c: Assume that an accept4
	implementation is available.
	(accept4): Use the system call if available, otherwise use the
	socket call.
	* sysdeps/unix/sysv/linux/ia64/configure.ac (arch_minimum_kernel):
	Set to 3.2.18.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL, __ASSUME_ACCEPT4): Do not undefine.
	accept4 is unconditionally available in later 3.2 stable kernels.
	(__ASSUME_ACCEPT4_SYSCALL): Define.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_ACCEPT4_SOCKETCALL, __ASSUME_ACCEPT4): Remove
	definitions.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Define for Linux 4.3 or later.

2017-04-18  Joseph Myers  <joseph@codesourcery.com>

	* conform/Makefile (tests-special): Do not make addition of
	$(conformtest-header-tests) conditional on [$(cross-compiling) = no].
	(generated): Do not make addition of $(conformtest-header-base)
	conditional on [$(cross-compiling) = no].

	[BZ #21267]
	* sysdeps/unix/sysv/linux/bits/socket.h (IOCSIZE_MASK): Undefine
	if defined by <asm/socket.h> and not previously defined.
	(IOCSIZE_SHIFT): Likewise.
	(IOC_IN): Likewise.
	(IOC_INOUT): Likewise.
	(IOC_OUT): Likewise.

2017-04-18  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21396]
	* sysdeps/x86/cpu-features.c (init_cpu_features): Set
	Prefer_No_AVX512 if AVX512ER isn't available.
	* sysdeps/x86/cpu-features.h (bit_arch_Prefer_No_AVX512): New.
	(index_arch_Prefer_No_AVX512): Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S (__new_memcpy): Don't use
	AVX512 version if Prefer_No_AVX512 is set.
	* sysdeps/x86_64/multiarch/memcpy_chk.S (__memcpy_chk):
	Likewise.
	* sysdeps/x86_64/multiarch/memmove.S (__libc_memmove): Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.S (__memmove_chk):
	Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S (__mempcpy): Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S (__mempcpy_chk):
	Likewise.
	* sysdeps/x86_64/multiarch/memset.S (memset): Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S (__memset_chk):
	Likewise.

2017-04-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.c (init_cpu_features): Set
	Prefer_No_VZEROUPPER if AVX512ER is available.
	* sysdeps/x86/cpu-features.h
	(bit_cpu_AVX512PF): New.
	(bit_cpu_AVX512ER): Likewise.
	(bit_cpu_AVX512CD): Likewise.
	(bit_cpu_AVX512BW): Likewise.
	(bit_cpu_AVX512VL): Likewise.
	(index_cpu_AVX512PF): Likewise.
	(index_cpu_AVX512ER): Likewise.
	(index_cpu_AVX512CD): Likewise.
	(index_cpu_AVX512BW): Likewise.
	(index_cpu_AVX512VL): Likewise.
	(reg_AVX512PF): Likewise.
	(reg_AVX512ER): Likewise.
	(reg_AVX512CD): Likewise.
	(reg_AVX512BW): Likewise.
	(reg_AVX512VL): Likewise.

2017-04-18  Florian Weimer  <fweimer@redhat.com>

	* elf/dl-misc.c (_dl_sysdep_read_whole_file): Assume that
	O_CLOEXEC is defined.
	* include/fcntl.h (__have_o_cloexec): Remove declaration.
	* io/Makefile (aux): Remove.
	* io/have_o_cloexec.c: Remove file.
	* libio/fileops.c (_IO_new_file_fopen): Assume that O_CLOEXEC is
	defined and works.
	* libio/iopopen.c (_IO_new_proc_open): Assume that O_CLOEXEC is
	defined.
	* login/utmp_file.c (O_flags): Remove definition.
	(setutent_file): Use O_CLOEXEC instead of O_flags.  Assume that
	O_CLOEXEC works.
	(pututline_file): Likewise.
	* malloc/mtrace.c: Assume that O_CLOEXEC works.
	* nis/nss_compat/compat-grp.c (__compat_have_cloexec): Remove
	definition.
	(internal_setgrent): Assume that O_CLOEXEC works.
	* nis/nss_compat/compat-initgroups.c (__compat_have_cloexec):
	Remove definition.
	(internal_setgrent): Assume that O_CLOEXEC works.
	* nis/nss_compat/compat-pwd.c (__compat_have_cloexec): Remove
	definition.
	(internal_setpwent): Assume that O_CLOEXEC works.
	* nis/nss_compat/compat-spwd.c (__compat_have_cloexec): Remove
	definition.
	(internal_setspent): Assume that O_CLOEXEC works.
	* nscd/connections.c (EXTRA_O_FLAGS): Remove definition.
	(nscd_init): Use O_CLOEXEC instead of EXTRA_O_FLAGS.  Assume that
	O_CLOEXEC is defined and works.
	* nss/Makefile (libnss_files-routines): Remove
	files-have_o_cloexec.
	* nss/nss_db/db-open.c (internal_setent): Assume that O_CLOEXEC is
	defined.
	* nss/nss_files/files-XXX.c (internal_setent): Assume that
	O_CLOEXEC is defined and works.
	* nss/nss_files/files-alias.c (internal_setent): Likewise.
	* nss/nss_files/files-have_o_cloexec.c: Remove.
	* posix/wordexp.c (exec_comm_child): Assume that O_CLOEXEC is
	defined.
	* shadow/lckpwdf.c (__lckpwdf): Assume that O_CLOEXEC is defined
	and works.
	* sysdeps/mach/hurd/kernel-features.h (__ASSUME_O_CLOEXEC): Remove
	definition.
	* sysdeps/nacl/kernel-features.h (__ASSUME_O_CLOEXEC): Likewise.
	* sysdeps/posix/getcwd.c (__getcwd): Assume that O_CLOEXEC works.
	* sysdeps/posix/opendir.c (opendir_oflags): Turn into enum constant.
	(__opendirat, __opendir): Adjust opendir_oflags call.
	(check_have_o_cloexec): Remove.
	(__alloc_dir): Assume that O_CLOEXEC is defined and works.
	* sysdeps/posix/shm_open.c (shm_open): Assume that O_CLOEXEC is
	defined.
	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_O_CLOEXEC):
	Remove definition.

2017-04-18  Florian Weimer  <fweimer@redhat.com>

	* include/unistd.h (__have_dup3): Remove declaration.
	* libio/freopen.c (freopen): Assume that O_CLOEXEC is defined and
	dup3 is available.
	* libio/freopen64.c (freopen64): Likewise.
	* socket/Makefile (aux): Remove have_sock_cloexec.
	* socket/have_sock_cloexec.c: Remove file.
	* sysdeps/mach/hurd/kernel-features.h (__ASSUME_DUP3): Remove
	definition.
	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_DUP3):
	Likewise.
	* sysdeps/nacl/kernel-features.h: Update comment.

2017-04-18  Florian Weimer  <fweimer@redhat.com>

	* include/unistd.h (__have_pipe2): Remove declaration.
	* socket/have_sock_cloexec.c (__have_pipe2): Remove definition.
	* libio/iopopen.c (_IO_new_proc_open): Assume that pipe2 is
	available.
	* posix/wordexp.c (exec_comm_child, exec_comm): Likewise.
	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_PIPE2):
	Remove definition.

2017-04-18  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc.c (cfree): Turn into compat symbol.
	(__cfree): Remove alias.
	* stdlib/stdlib.h (cfree): Remove declaration.
	* malloc/malloc.h (cfree): Likewise.
	* manual/memory.texi (Freeing after Malloc): Remove cfree.
	* malloc/Versions (GLIBC_2.26): Add.

2017-04-18  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile
	(sysdep_routines): Add strrchr-power8.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(strrchr): Add __strrchr_power8 to list of strrchr functions.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr.c
	(strrchr): Add __strrchr_power8 to ifunc list.
	* sysdeps/powerpc/powerpc64/power8/strrchr.S: New file.

2017-04-17  Rabin Vincent  <rabinv@axis.com>

	[BZ #21357]
	* sysdeps/generic/unwind-dw2-fde.c (__deregister_frame_info_bases):
	Call free() outside of mutex.

2017-04-13  Florian Weimer  <fweimer@redhat.com>

	* csu/check_fds.c (__libc_check_standard_fds): Assume O_NOFOLLOW
	is defined.
	* elf/rtld.c (process_envvars): Likewise.
	* sysdeps/posix/shm_open.c (shm_open): Likewise.
	* elf/dl-profile.c (EXTRA_FLAGS): Remove definition.  Use
	O_NOFOLLOW directly.
	* gmon/gmon.c (O_NOFOLLOW): Remove definition.

2017-04-13  Florian Weimer  <fweimer@redhat.com>

	[BZ #21369]
	Remove EDNS fallback.
	* resolv/res_query.c (__libc_res_nquery): Remove RES_F_EDNS0ERR
	handling.
	* resolv/res_send.c (send_dg): Likewise.
	* resolv/tst-resolv-edns.c (response): Handle "formerr." and
	"tcp." prefixes.
	(do_test): Send a "formerr."-prefixed query in an attempt to
	trigger EDNS fallback.

2017-04-13  Florian Weimer  <fweimer@redhat.com>

	[BZ #21361]
	Limit EDNS buffer size to 1200 bytes.
	* include/resolv.h (__res_nopt): Remove declaration.
	* resolv/Makefile (tests): tst-resolv-edns.
	(tst-resolv-edns): Link with -lresolv, -lpthread.
	* resolv/res_mkquery.c (__res_ntop): Limit EDNS buffer size to the
	interval [512, 1200].
	* resolv/res_query.c (__libc_res_nquery): Use 1200 buffer size if
	we can resize the buffer.
	* resolv/resolv-internal.h (RESOLV_EDNS_BUFFER_SIZE): Define.
	(__res_nopt): Declare.
	* resolv/tst-resolv-edns.c: New file.
	* resolv/resolv_test.h (struct resolv_edns_info): Define.
	(struct resolv_response_context): Add edns member.
	* resolv/resolv_test.c (struct query_info): Add edns member.
	(parse_query): Extract EDNS information from the query.
	(server_thread_udp_process_one): Propagate EDNS data.
	(server_thread_tcp_client): Likewise.

2017-04-13  Florian Weimer  <fweimer@redhat.com>

	[BZ #21359]
	* resolv/ns_name.c (ns_name_pack): Do not require an additional
	byte in the destination buffer.  Avoid out-of-bounds pointer
	arithmetic.
	* resolv/Makefile (tests): Add tst-ns_name_compress.
	(tst-ns_name_compress): Link with -lresolv.
	* resolv/tst-ns_name_compress.c: New file.
	* resolv/tst-resolv-basic.c (LONG_NAME): Define.
	(response): Recognize LONG_NAME.
	(do_test): Add LONG_NAME tests.
	* resolv/tst-ns_name.c (run_test_case): Fix expected data check
	for ns_name_unpack.  Add tests for ns_name_pton and
	ns_name_compress.

2017-04-13  Florian Weimer  <fweimer@redhat.com>

	* resolv/resolv.h (RES_EXHAUSTIVE, p_section, res_npquery)
	(res_nisourserver): Remove definition.
	(p_section, res_npquery, res_nisourserver): Remove declaration.
	(RES_F_VC, RES_F_CONN, RES_F_EDNS0ERR): Move ...
	* resolv/resolv-internal.h (RES_F_VC, RES_F_CONN, RES_F_EDNS0ERR):
	... here.
	* resolv/res_send.c: Include <resolv/resolv-internal.h> instead of
	<resolv.h>.
	* resolv/res_query.c: Likewise.
	* resolv/res_debug.c (p_section): Define as static.

2017-04-13  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile (sysdep_routines): Add
	strncat-power8.
	* sysdeps/powerpc/powerpc64/multiarch/strncat.c (strncat): Add
	__strncat_power8 to ifunc list.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(strncat): Add __strncat_power8 to list of strncat functions.
	* sysdeps/powerpc/powerpc64/multiarch/strncat-power8.c: New file.

2017-04-11  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21270]
	* posix/tst-mmap-offset.c (do_prepare): New function.
	(do_test): Rename to do_test_bz18877 and use FAIL_RET.
	(do_test_bz21270): New function.
	* sysdeps/unix/sysv/linux/aarch64/mmap.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/mmap.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/mmap.c: Likewise.
	* sysdeps/unix/sysv/linux/hppa/mmap.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/m68k/mmap64.c: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/mmap.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/mmap.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/mmap64.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap64.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/mmap.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/mmap64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/mmap.c: Likewise.
	* sysdeps/unix/sysv/linux/mmap_internal.h: New file.
	* sysdeps/unix/sysv/linux/m68k/mmap_internal.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/mmap_internal.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/mmap_internal.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/mmap_internal.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/syscalls.list: Remove mmap
	from auto-generation list.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/mmap.c: New file.
	* sysdeps/unix/sysv/linux/mmap64.c (__mmap64): Add check for invalid
	offsets and support for mmap2 syscall.

	* posix/globtest.sh: Add cleanup routine on trap 0.

2017-04-11  Wainer dos Santos Moschetta  <wainersm@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/memcmp-power4.S: Define the
	implementation-specific function name and remove unneeded
	macros definition.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Set a default function
	name if not defined and pass as parameter to macros accordingly.
	* sysdeps/powerpc/powerpc64/power7/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memmove.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/memcpy-a2.S: Define the
	implementation-specific function name and remove unneeded
	macros definition.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-cell.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-power4.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-power6.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Set a default function
	name if not defined and pass as parameter to macros accordingly.
	* sysdeps/powerpc/powerpc64/cell/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/mempcpy.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/memchr-power7.S: Define the
	implementation-specific function name and remove unneeded macros
	definition.
	* sysdeps/powerpc/powerpc64/multiarch/memrchr-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: Set a default
	function name if not defined and pass as parameter to macros
	accordingly.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/rawmemchr.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/memset-power4.S: Define the
	implementation-specific function name and remove unneeded macros
	definition.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power6.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/memset.S: Set a default function name if
	not defined and pass as parameter to macros accordingly.
	* sysdeps/powerpc/powerpc64/power4/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/memset.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/strcasestr-power8.S: Define the
	strcasestr implementation name and remove unneeded macros definition.
	* sysdeps/powerpc/powerpc64/multiarch/strstr-power7.S: Define
	strstr implementation name and remove unneeded macros definition.
	* sysdeps/powerpc/powerpc64/power7/strstr.S: Set a default function
	name if not defined and pass as parameter to macros accordingly.
	* sysdeps/powerpc/powerpc64/power8/strcasestr.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/strchr-power7.S: Define the
	implementation-specific function name and remove unneeded macros
	definition.
	* sysdeps/powerpc/powerpc64/multiarch/strchr-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchr-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strchr.S: Set a default
	function name if not defined and pass as parameter to macros
	accordingly.
	* sysdeps/powerpc/powerpc64/power7/strchrnul.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/strchr.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/strlen-power7.S: Define
	the strlen implementation name and remove unneeded macros definition.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen-power7.S: Define
	the strnlen implementation name and remove unneeded macros definition.
	* sysdeps/powerpc/powerpc64/power7/strlen.S: Set a default function
	name if not defined and pass as parameter to macros accordingly.
	* sysdeps/powerpc/powerpc64/power7/strnlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/strlen.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp_l-power7.S: Define
	the implementation-specific function name and remove unneeded
	macros definition.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-power8.S Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-power9.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power4.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power9.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Set a default function
	name if not defined and pass as parameter to macros accordingly.
	* sysdeps/powerpc/powerpc64/power7/strcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power9/strcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power9/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/strcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/strncmp.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-power8.S: Define the
	implementation-specific function name and remove unneeded macros
	definition.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncpy.S: Set a default
	function name if not defined.
	* sysdeps/powerpc/powerpc64/power8/strcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strncpy.S: Likewise.

2017-04-11  Paul Clarke  <pc@us.ibm.com>

	* elf/elf.h (AT_L1I_CACHESIZE, AT_L1I_CACHEGEOMETRY, AT_L1D_CACHESIZE,
	AT_L1D_CACHEGEOMETRY, AT_L2_CACHESIZE, AT_L2_CACHEGEOMETRY,
	AT_L3_CACHESIZE, AT_L3_CACHEGEOMETRY): New.  Add auxvec
	identifiers from kernel arch/powerpc/include/uapi/asm/auxvec.h.

2017-04-11  Florian Weimer  <fweimer@redhat.com>
	    Zack Weinberg  <zackw@panix.com>

	* manual/filesys.texi (Reading/Closing Directory): Mark readdir,
	readdir64 as thread-safe.  Update warning about readdir_r.

2017-04-10  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/x86/Implies: New file.
	* sysdeps/unix/sysv/linux/alpha/bits/pthreadtypes.h: Move to ...
	* sysdeps/alpha/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h: Move to ...
	* sysdeps/powerpc/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/x86/bits/pthreadtypes.h: Move to ...
	* sysdeps/x86/nptl/bits/pthreadtypes.h: ... here.

2017-04-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/dl-procinfo.c: Include
	<sysdeps/x86/dl-procinfo.c>.
	* sysdeps/x86_64/dl-procinfo.c: Likewise.
	* sysdeps/x86/dl-procinfo.c: New file.

2017-04-10  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/generic/math_private.h: Remove declarations of
	many functions that are already declared in math.h.
	* sysdeps/ieee754/ldbl-128/e_logl.c: Include math.h to get the
	declaration for __frexpl.
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c: Include math.h to get
	the declarations for __scalbnl and fabsl.

2017-04-09  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #20831]
	* elf/dl-map-segments.h (_dl_map_segments): Check for failure
	of __mprotect to change protection on the excess portion
	to disallow all access.

2017-04-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/fpu/fclrexcpt.c (__feclearexcept): Use
	HAS_CPU_FEATURE to check for SSE.
	* sysdeps/i386/fpu/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/i386/fpu/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/i386/fpu/fegetenv.c (__fegetenv): Likewise.
	* sysdeps/i386/fpu/fegetmode.c (fegetmode): Likewise.
	* sysdeps/i386/fpu/feholdexcpt.c (__feholdexcept): Likewise.
	* sysdeps/i386/fpu/fesetenv.c (__fesetenv): Likewise.
	* sysdeps/i386/fpu/fesetmode.c (fesetmode): Likewise.
	* sysdeps/i386/fpu/fesetround.c (__fesetround): Likewise.
	* sysdeps/i386/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/i386/fpu/fgetexcptflg.c (__fegetexceptflag): Likewise.
	* sysdeps/i386/fpu/fsetexcptflg.c (__fesetexceptflag): Likewise.
	* sysdeps/i386/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/i386/setfpucw.c (__setfpucw): Likewise.
	* sysdeps/x86/cpu-features.h (bit_cpu_SSE): New.
	(index_cpu_SSE): Likewise.
	(reg_SSE): Likewise.

2017-04-07  Paul Eggert  <eggert@cs.ucla.edu>

	* posix/getopt1.c: Include <config.h>, not "config.h".

2017-04-07  Zack Weinberg  <zackw@panix.com>

	* posix/bits/getopt_core.h, posix/bits/getopt_ext.h
	* posix/getopt.c, posix/getopt1.c, posix/getopt_int.h:
	Mention in top-of-file boilerplate that these files are shared
	with gnulib.
	* posix/getopt.h, posix/bits/getopt_posix.h:
	Mention in top-of-file boilerplate that these files are NOT shared
	with gnulib, unlike the rest of the getopt implementation.

	* posix/bits/getopt_core.h, posix/bits/getopt_ext.h:
	New files, intended to be shared with gnulib.
	* posix/bits/getopt_posix.h:
	New file, not intended to be shared with gnulib.
	* posix/getopt.h: Now just includes features.h,
	bits/getopt_core.h, and bits/getopt_ext.h.  Will
	no longer be shared with gnulib.
	* include/bits/getopt_core.h, include/bits/getopt_ext.h
	* include/bits/getopt_posix.h: New wrappers.
	* posix/Makefile: Install new headers.
	* posix/unistd.h, libio/stdio.h:
	Include bits/getopt_posix.h instead of getopt.h.

	* include/libc-symbols.h: For gnulib compatibility, define
	_GL_UNUSED, _GL_UNUSED_LABEL, _GL_ATTRIBUTE_PURE, and
	_GL_ATTRIBUTE_CONST.
	* posix/getopt.c (_getopt_initialize): Mark argc and argv
	parameters with _GL_UNUSED.

	* posix/getopt.c: When used standalone, define __libc_use_alloca
	as always false and alloca to abort if called.
	(process_long_option): Rewrite handling of ambiguous long options
	to use a single boolean vector, not a linked list; use
	__libc_use_alloca to decide whether to allocate this using alloca.
	* posix/tst-getopt_long1.c: Adjust text of expected error message.

	* posix/getopt.c (process_long_option): New function split out
	from _getopt_internal_r.
	(_getopt_internal_r): Replace both copies of the long-option
	processing code with calls to process_long_option.
	* posix/bug-getopt4.c (one_test): Print argv[0] in error messages.
	(do_test): Differentiate argv[0] in the two subtests.

	* posix/getopt_int.h (_getopt_data): Remove __posixly_correct field.
	* posix/getopt.c (_getopt_internal_r): Move some initialization code...
	(_getopt_initialize): ...here. Don't set d->__posixly_correct.

	* posix/getopt.h: Add backup definition of __nonnull for
	consistency with gnulib.  Define __getopt_argv_const to const
	if not already defined.
	(getopt): Update doc comment from gnulib.  Prototype
	unconditionally.  Add __nonnull annotation.
	(__posix_getopt): Add __nonnull annotation.
	(getopt_long, getopt_long_only): Use __getopt_argv_const in
	prototypes for consistency with gnulib.  Add __nonnull
	annotations.
	* posix/getopt.c (_getopt_initialize, _getopt_internal_r)
	(getopt_internal): Change 'argv' argument to type 'char **'.
	Remove now-unnecessary casts.
	(getopt, __posix_getopt): Eliminate repetition with a macro.
	Cast 'argv' to 'char **' when calling _getopt_internal.
	* posix/getopt1.c (getopt_long, getopt_long_only):
	Use __getopt_argv_const for consistency with gnulib.
	Cast 'argv' to 'char **' when calling _getopt_internal.
	(_getopt_long_r, _getopt_long_only_r):
	Change 'argv' argument to type 'char **'.
	(main): Constify 'long_options'.
	* posix/getopt_int.h (getopt_internal, _getopt_internal_r)
	(_getopt_long_r, _getopt_long_only_r):
	Change 'argv' argument to type 'char **'.

	* stdio-common/fxprintf.c (__fxprintf_nocancel): New function.
	(locked_vfxprintf): New helper function. Handle arbitrary
	multibyte strings, not just ASCII.
	* include/stdio.h: Declare __fxprintf_nocancel.
	* posix/getopt.c: When _LIBC is defined, define fprintf to
	__fxprintf_nocancel, flockfile to _IO_flockfile, and funlockfile
	to _IO_funlockfile.  When neither _LIBC nor
	_POSIX_THREAD_SAFE_FUNCTIONS is defined, define flockfile and
	funlockfile as no-ops.
	(_getopt_internal_r): Remove all internal #ifdef _LIBC blocks;
	the standalone error-printing code can now be used for libc as
	well.  Add an flockfile/funlockfile pair around one case where
	the error message is printed in several chunks.  Don't use fputc.
	* posix/tst-getopt-cancel.c: New test.
	* posix/Makefile: Run it.

	* posix/getopt.c (_getopt_internal_r): Don't increment
	d->optind a second time when reporting ambiguous -W options.

	* posix/getopt_int.h: Include getopt.h.
	Use impl-namespace names for all arguments to _getopt_internal and
	_getopt_internal_r.
	Declare __ordering enum outside the struct.
	Harmonize comments with gnulib.
	* posix/getopt1.c: Simplify #ifdeffage at top of file. Remove
	ELIDE_CODE logic entirely.  Move inclusion of stdlib.h to
	#ifdef TEST block and make unconditional.  Do not define NULL.
	* posix/getopt.c: Partial merge from gnulib, covering the
	initial includes and global declarations, commentary, and
	a couple of semantically-neutral code changes.

	* posix/getopt.c, posix/getopt.h, posix/getopt1.c, posix/getopt_int.h:
	Use '...' instead of `...' for quotation marks inside
	comments and strings.

	* config.h.in (USE_NONOPTION_FLAGS): Remove.
	* csu/init-first.c: Remove all #ifdef USE_NONOPTION_FLAGS blocks.
	* sysdeps/mach/hurd/i386/init-first.c: Likewise.
	* posix/getopt_int.h: Likewise.
	* posix/getopt.c: Likewise. Also remove SWAP_FLAGS and the
	__libc_argc and __libc_argv externs, which were only used by
	#ifdef USE_NONOPTION_FLAGS blocks.
	* posix/getopt_init.c: Remove file.
	* posix/Makefile (routines): Remove getopt_init.
	* include/getopt.h: Don't declare __getopt_initialize_environment.
	* manual/getopt.texi: Remove mention of USE_NONOPTION_FLAGS in
	a comment.

2017-04-07  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_mkquery.c (res_nmkquery): Remove IQUERY support.

2017-04-05  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/sparc/sparc32/Makefile (libc.so-gnulib): New rule.
	* sysdeps/sparc/sparc32/sparcv8/udiv.S (.udiv): Make a strong_alias
	to __wrap_.udiv.
	* sysdeps/sparc/sparc32/sparcv9/udiv.S (.udiv): Likewise.
	* sysdeps/sparc/sparc32/udiv.S (.udiv): Likewise.

	* sysdeps/i386/symbol-hacks.h: New file.
	* sysdeps/m68k/symbol-hacks.h: New file.
	* sysdeps/powerpc/powerpc32/symbol-hacks.h: New file.
	* sysdeps/s390/s390-32/symbol-hacks.h: New file.
	* sysdeps/unix/sysv/linux/i386/Makefile
	[$(subdir) = csu] (sysdep_routines): New rule: divdi3 object.
	[$(subdir) = csu] (sysdep-only-routines): Likewise.
	[$(subdir) = csu] (CFLAGS-divdi3.c): Likewise.
	* sysdeps/unix/sysv/linux/m68k/Makefile
	[$(subdir) = csu] (sysdep_routines): Likewise.
	[$(subdir) = csu] (sysdep-only-routines): Likewise.
	[$(subdir) = csu] (CFLAGS-divdi3.c): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Makefile
	[$(subdir) = csu] (sysdep_routines): Likewise.
	[$(subdir) = csu] (sysdep-only-routines): Likewise.
	[$(subdir) = csu] (CFLAGS-divdi3.c): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/Makefile
	[$(subdir) = csu] (sysdep_routines): Likewise.
	[$(subdir) = csu] (sysdep-only-routines): Likewise.
	[$(subdir) = csu] (CFLAGS-divdi3.c): Likewise.
	* sysdeps/wordsize-32/Makefile: Remove file.
	* sysdeps/wordsize-32/symbol-hacks.h: Definitions move to ...
	* sysdeps/wordsize-32/divdi3-symbol-hacks.h: ... here.

2017-04-05  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-dlopen-aout.c (TEST_FUNCTION): Removed.
	(TEST_FUNCTION_ARGV): New.

2017-04-05  Wainer dos Santos Moschetta  <wainersm@linux.vnet.ibm.com>

	* elf/next.c: Import support/test-driver.c instead of
	test-skeleton.c and delete TEST_FUNCTION macro definition.
	* elf/nodelete.c: Likewise.
	* elf/order2.c: Likewise.
	* elf/tst-_dl_addr_inside_object.c: Likewise.
	* elf/tst-addr1.c: Likewise.
	* elf/tst-align.c: Likewise.
	* elf/tst-align2.c: Likewise.
	* elf/tst-audit11.c: Likewise.
	* elf/tst-audit12.c: Likewise.
	* elf/tst-audit2.c: Likewise.
	* elf/tst-audit9.c: Likewise.
	* elf/tst-auxv.c: Likewise and define TEST_FUNCTION_ARGV macro.
	* elf/tst-deep1.c: Likewise.
	* elf/tst-dl-iter-static.c: Likewise.
	* elf/tst-dlmodcount.c: Likewise.
	* elf/tst-dlmopen1.c: Likewise.
	* elf/tst-dlmopen2.c: Likewise.
	* elf/tst-dlmopen3.c: Likewise.
	* elf/tst-dlopen-aout.c: Likewise.
	* elf/tst-dlopenrpath.c: Likewise.
	* elf/tst-dlsym-error.c: Likewise.
	* elf/tst-execstack-needed.c: Likewise.
	* elf/tst-execstack-prog.c: Likewise.
	* elf/tst-execstack.c: Likewise.
	* elf/tst-global1.c: Likewise.
	* elf/tst-gnu2-tls1.c: Likewise.
	* elf/tst-latepthread.c: Likewise.
	* elf/tst-leaks1.c: Likewise.
	* elf/tst-linkall-static.c: Likewise.
	(do_test): New function.
	* elf/tst-nodelete-opened.c: Likewise.
	* elf/tst-nodelete.cc: Likewise.
	* elf/tst-nodelete2.c: Likewise.
	* elf/tst-noload.c: Likewise.
	* elf/tst-null-argv.c: Likewise and define TEST_FUNCTION_ARGV marcro.
	* elf/tst-order-main.c: Likewise.
	* elf/tst-pathopt.c: Likewise.
	* elf/tst-pie2.c: Likewise.
	* elf/tst-piemod1.c: Likewise.
	* elf/tst-prelink.c: Likewise.
	* elf/tst-protected1a.c: Likewise.
	* elf/tst-protected1b.c: Likewise.
	* elf/tst-ptrguard1.c: Likewise, import getopt.h,
	and define _GNU_SOURCE macro.
	(cmdline_process_function): New function.
	* elf/tst-relsort1.c: Likewise.
	* elf/tst-stackguard1.c: Likewise, import getopt.h,
	and define _GNU_SOURCE macro.
	(cmdline_process_function): New function.
	* elf/tst-thrlock.c: Likewise.
	* elf/tst-tls-dlinfo.c: Likewise.
	* elf/tst-tls-manydynamic.c: Likewise and import support/xthread.h.
	* elf/tst-tls1.c: Likewise.
	* elf/tst-tls10.c: Likewise.
	* elf/tst-tls11.c: Likewise.
	* elf/tst-tls12.c: Likewise.
	* elf/tst-tls13.c: Likewise.
	* elf/tst-tls14.c: Likewise.
	* elf/tst-tls15.c: Likewise.
	* elf/tst-tls16.c: Likewise.
	* elf/tst-tls17.c: Likewise.
	* elf/tst-tls18.c: Likewise.
	* elf/tst-tls19.c: Likewise.
	* elf/tst-tls2.c: Likewise.
	* elf/tst-tls3.c: Likewise.
	* elf/tst-tls4.c: Likewise.
	* elf/tst-tls5.c: Likewise.
	* elf/tst-tls6.c: Likewise.
	* elf/tst-tls7.c: Likewise.
	* elf/tst-tls8.c: Likewise.
	* elf/tst-tls9.c: Likewise.
	* elf/tst-tlsalign-extern.c: Likewise.
	* elf/tst-tlsalign.c: Likewise.
	* elf/tst-unique1.c: Likewise.
	* elf/tst-unique2.c: Likewise.
	* elf/vismain.c: Likewise.

2017-04-05  Wainer dos Santos Moschetta  <wainersm@linux.vnet.ibm.com>

	* string/test-strnlen.c (do_page_tests): New function
	to check length of strings ending at the page boundary.
	(test_main): Added call to the do_page_tests function.

2017-04-05  Wainer dos Santos Moschetta  <wainersm@linux.vnet.ibm.com>
	    Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile
	(sysdep_routines): Add strnlen-power8.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(strnlen): Add __strnlen_power8 to list of strnlen functions.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen.c
	(__strnlen): Add __strnlen_power8 to ifunc list.
	* sysdeps/powerpc/powerpc64/power8/strnlen.S: New file.

2017-04-04  Wainer dos Santos Moschetta  <wainersm@linux.vnet.ibm.com>

	* wcsmbs/tst-btowc.c: Import support/test-driver.c and remove
	the TEST_FUNCTION macro definition.
	* wcsmbs/tst-mbrtowc2.c: Likewise.
	* wcsmbs/tst-mbsrtowcs.c: Likewise.
	* wcsmbs/tst-wchar-h.c: Likewise.
	* wcsmbs/tst-wcpncpy.c: Likewise.
	* wcsmbs/tst-wcrtomb.c: Likewise.
	* wcsmbs/tst-wcsnlen.c: Likewise.
	* wcsmbs/tst-wcstof.c: Likewise.

2017-04-04  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/pthread_create.c (START_THREAD_DEFN): Remove
	CALL_THREAD_FCT macro usage.
	* sysdeps/i386/nptl/tls.h (CALL_THREAD_FCT): Remove definition.
	* sysdeps/x86_64/nptl/tls.h (CALL_THREAD_FCT): Likewise.
	* sysdeps/x86_64/32/nptl/tls.h: Remove file.

	* nptl/pthreadP.h (USE_REQUEUE_PI): Remove ununsed macro.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_REQUEUE_PI): Likewise.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_REQUEUE_PI): Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_REQUEUE_PI): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_REQUEUE_PI): Likewise.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h
	(__ASSUME_REQUEUE_PI): Likewise.

2017-04-04  Florian Weimer  <fweimer@redhat.com>

	* resolv/tst-resolv-canonname.c: New file.
	* resolv/Makefile (tests): Add tst-resolv-canonname.
	(tst-resolv-canonname): Link with -ldl, -lresolv, -lpthread.

2017-04-04  Florian Weimer  <fweimer@redhat.com>

	* include/arpa/nameser.h (__ns_name_ntop, __ns_name_unpack):
	Declare.
	* resolv/nss_dns/dns-network.c: Include <arpa/nameser.h>.
	(NS_MAXCDNAME): Remove definition.
	(__ns_name_ntop, __ns_name_unpack): Remove declaration.
	* resolv/nss_dns/dns-host.c: Include <arpa/nameser.h>.
	(NS_MAXCDNAME): Remove definition.
	(__ns_name_ntop, __ns_name_unpack): Remove declaration.

2017-04-04  Florian Weimer  <fweimer@redhat.com>

	* resolv/nss_dns/dns-network.c (getanswer_r): Remove __dn_expand
	call whose result is not used.

2017-04-04  Florian Weimer  <fweimer@redhat.com>

	* resolv/tst-ns_name.c, resolv/tst-ns_name.data: New file.
	* resolv/Makefile (tests): Add tst-ns_name.
	(tst-ns_name): Link with -lresolv.
	(tst-ns_name.out): Depend on the input data file.

2017-04-04  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/tls-macros.h (TLS_LD, TLS_GD):
	Clobber also r14.

2017-04-03  Mike Frysinger  <vapier@gentoo.org>

	[BZ #21253]
	* sysdeps/unix/sysv/linux/spawni.c (__spawnix): Increase argv_size
	slack space by 32KiB.

2017-04-01  Wladimir van der Laan  <laanwj@gmail.com>

	[BZ #21338]
	* malloc/malloc.c: Call do_set_arena_max for M_ARENA_MAX
	instead of incorrect do_set_arena_test

2017-03-31  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/math.h: Fix check for __MATH_DECLARE_LDOUBLE.
	* math/bits/math-finite.h: Likewise.

2017-03-31  Slava Barinov  <v.barinov@samsung.com>

	[BZ #21289]
	* io/fts.h (fts_set): Replace __REDIRECT with __REDIRECT_NTH.

2017-03-30  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/test-errno-linux.c (do_test): Handle
	non expected inotify_add_watch and quotactl return.

2017-03-30  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/e_rem_pio2l.c (__ieee754_rem_pio2l): Change return type
	to int32_t.
	* sysdeps/generic/math_private.h: Declare __ieee754_rem_pio2l
	as returning int32_t.

2017-03-30  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/math.h: Include bits/math-finite.h once per
	floating-point type.
	* math/bits/math-finite.h: Macroize all declarations by
	floating-point type.

2017-03-29  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21182]
	* string/test-memchr.c (do_test): Add BZ#21182 checks for address
	near end of a page.
	* sysdeps/i386/i686/multiarch/memchr-sse2.S (__memchr): Fix
	overflow calculation.

2017-03-28  Steve Ellcey  <sellcey@caviumnetworks.com>

	* benchtests/bench-memcpy-random.c (TEST_NAME): Change to memcpy.
	(IMPL) Call with 1 instead of 0 as argument.

2017-03-28  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/arm/setegid.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/setegid.c (setegid): Use
	INLINE_SYSCALL_ERROR_RETURN_VALUE.
	* sysdeps/unix/sysv/linux/seteuid.c (seteuid): Likewise.
	* sysdeps/unix/sysv/linux/setgid.c (setgid): Use __NR_setgid32 if
	defined.
	* sysdeps/unix/sysv/linux/setgroups.c (setgroups): Use
	__NR_setgroups32 if defined.
	* sysdeps/unix/sysv/linux/setregid.c (__setregid): Use __NR_setregid32
	if defined.
	* sysdeps/unix/sysv/linux/setresgid.c (__setresgid): Use
	__NR_setresgid32 is defined.
	* sysdeps/unix/sysv/linux/setresuid.c (__setresuid): Use
	__NR_setresuid32 if defined.
	* sysdeps/unix/sysv/linux/setreuid.c (__setreuid): Use
	__NR_setreuid32 if defined.
	* sysdeps/unix/sysv/linux/setuid.c (__setuid): Use __NR_setuid32 if
	defined.
	* sysdeps/unix/sysv/linux/arm/setegid.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/setegid.c (setegid): Use
	INLINE_SYSCALL_ERROR_RETURN_VALUE.
	* sysdeps/unix/sysv/linux/seteuid.c (seteuid): Likewise.
	* sysdeps/unix/sysv/linux/setgid.c (setgid): Use __NR_setgid32 if
	defined.
	* sysdeps/unix/sysv/linux/setgroups.c (setgroups): Use
	__NR_setgroups32 if defined.
	* sysdeps/unix/sysv/linux/setregid.c (__setregid): Use __NR_setregid32
	if defined.
	* sysdeps/unix/sysv/linux/setresgid.c (__setresgid): Use
	__NR_setresgid32 is defined.
	* sysdeps/unix/sysv/linux/setresuid.c (__setresuid): Use
	__NR_setresuid32 if defined.
	* sysdeps/unix/sysv/linux/setreuid.c (__setreuid): Use
	__NR_setreuid32 if defined.
	* sysdeps/unix/sysv/linux/setuid.c (__setuid): Use __NR_setuid32 if
	defined.

2017-03-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21277]
	* sysdeps/unix/sysv/linux/alpha/bits/termios.h (IUCLC): Define
	unconditionally.
	(IMAXBEL): Likewise.
	(IUTF8): Likewise.

2017-03-27  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Update.

2017-03-24  Sunyeop Lee  <sunyeop97@gmail.com>

	* README.tunables: Updated descriptions.
	* elf/dl-tunables.list: Fixed typo: SXID_NONE -> NONE.
	* scripts/gen-tunables.awk: Updated the code related to the
	commit.

2017-03-23  Wilco Dijkstra  <wdijkstr@arm.com>

	* benchtests/Makefile (string-benchset): Add memcpy-random.
	* benchtests/bench-memcpy-random.c: New file.

2017-03-23  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* stdio-common/printf.h (register_printf_modifier): Change the
	order of __wur and __THROW.
	(register_printf_type): Likewise.

2017-03-23  Wainer dos Santos Moschetta  <wainersm@linux.vnet.ibm.com>

	* string/test-string.h (TEST_FUNCTION): Use test_main instead of
	test_main ().
	(CMDLINE_PROCESS): Use function instead of defined macro.
	* debug/test-strcpy_chk.c: Import support/test-driver.c and also
	<suppport/support.h> to use set_fortify_handler().
	* string/bug-envz1.c: Import support/test-driver.c instead of
	test-skeleton.c.
	* string/bug-strcoll2.c: Likewise.
	* string/bug-strtok1.c: Likewise.
	* string/stratcliff.c: Likewise.
	* string/test-ffs.c: Likewise.
	* string/test-memccpy.c: Likewise.
	* string/test-memchr.c: Likewise.
	* string/test-memcmp.c: Likewise.
	* string/test-memcpy.c: Likewise.
	* string/test-memmem.c: Likewise.
	* string/test-memmove.c: Likewise.
	* string/test-memrchr.c: Likewise.
	* string/test-memset.c: Likewise.
	* string/test-rawmemchr.c: Likewise.
	* string/test-strcasecmp.c: Likewise.
	* string/test-strcasestr.c: Likewise.
	* string/test-strcat.c: Likewise.
	* string/test-strchr.c: Likewise.
	* string/test-strcmp.c: Likewise.
	* string/test-strcpy.c: Likewise.
	* string/test-string.h: Likewise.
	* string/test-strlen.c: Likewise.
	* string/test-strncasecmp.c: Likewise.
	* string/test-strncat.c: Likewise.
	* string/test-strncmp.c: Likewise.
	* string/test-strncpy.c: Likewise.
	* string/test-strnlen.c: Likewise.
	* string/test-strpbrk.c: Likewise.
	* string/test-strrchr.c: Likewise.
	* string/test-strspn.c: Likewise.
	* string/test-strstr.c: Likewise.
	* string/tst-bswap.c: Likewise.
	* string/tst-cmp.c: Likewise.
	* string/tst-endian.c: Likewise.
	* string/tst-inlcall.c: Likewise.
	* string/tst-strcoll-overflow.c: Likewise.
	* string/tst-strfry.c: Likewise.
	* string/tst-strlen.c: Likewise.
	* string/tst-strtok.c: Likewise.
	* string/tst-strtok_r.c: Likewise.
	* string/tst-strxfrm.c: Likewise.
	* string/tst-strxfrm2.c: Likewise.
	* string/tst-svc.c: Likewise.
	* string/tst-svc2.c: Likewise.

2017-03-22  Zack Weinberg  <zackw@panix.com>

	* stdio-common/bug25.c: Include stdlib.h.
	* support/tst-support_format_dns_packet.c: Include stdio.h,
	stdlib.h, and string.h.
	* support/tst-support_record_failure.c: Include string.h.
	* support/tst-support_record_failure-2.sh: Adjust line number
	expectations and correct a typo in an error message.

2017-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21258]
	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_resolve_opt):
	Define only if _dl_runtime_resolve is defined to
	_dl_runtime_resolve_sse_vex.
	* sysdeps/x86_64/dl-trampoline.h (_dl_runtime_resolve_opt):
	Fallthrough to _dl_runtime_resolve_sse_vex.

2017-03-21  Joseph Myers  <joseph@codesourcery.com>

	* INSTALL: Regenerated.

2017-03-21  Thorsten Kukuk  <kukuk@suse.com>

	* config.h.in: Add LINK_OBSOLETE_NSL.
	* config.make.in: Add build-obsolete-nsl.
	* configure.ac: Add obsolete-nsl option.
	* include/libc-symbols.h: Define libnsl_hidden_nolink_def.
	* include/rpcsvc/yp.h: Add missing functions as libnsl_hidden_proto.
	* include/rpcsvc/nislib.h: Likewise.
	* include/rpcsvc/ypclnt.h: Likewise.
	* manual/install.texi: Document --enable-obsolete-nsl.
	* nis/Makefile: Build only libnsl by default (add build-obsolete-nsl).
	* nis/nis_add.c: Replace libnsl_hidden_def with
	libnsl_hidden_nolink_def.
	* nis/nis_addmember.c: Likewise.
	* nis/nis_call.c: Likewise.
	* nis/nis_clone_obj.c: Likewise.
	* nis/nis_defaults.c: Likeise.
	* nis/nis_domain_of_r.c: Likewise.
	* nis/nis_error.c: Likewise.
	* nis/nis_file.c: Likewise.
	* nis/nis_free.c: Likewise.
	* nis_local_names.c: Likewise.
	* nis/nis_lookup.c: Likewise.
	* nis/nis_modify.c: Likewise.
	* nis/nis_print.c: Likewise.
	* nis/nis_remove.c: Likewise.
	* nis/nis_table.c: Likewise.
	* nis/nis_util.c: Likewise.
	* nis/nis_xdr.c: Likewise.
	* nis/yp_xdr.c: Likewise.
	* nis/ypclnt.c: Likewise.
	* nis/ypupdate_xdr.c: Likewise.
	* nis/nis_checkpoint.c: Add libnsl_hidden_nolink_def to all functions.
	* nis/nis_clone_dir.c: Likewise.
	* nis/nis_clone_res.c: Likewise.
	* nis/nis_creategroup.c: Likewise.
	* nis/nis_destroygroup.c: Likewise.
	* nis/nis_domain_of.c: Likewise.
	* nis/nis_getservlist.c: Likewise.
	* nis/nis_ismember.c: Likewise.
	* nis/nis_mkdir.c: Likewise.
	* nis/nis_ping.c: Likewise.
	* nis/nis_print_group_entry.c: Likewise.
	* nis/nis_removemember.c: Likewise.
	* nis/nis_rmdir.c: Likewise.
	* nis/nis_server.c: Likewise.
	* nis/nis_subr.c: Likewise.
	* nis/nis_verifygroup.c: Likewise.

2017-03-21  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* malloc/tst-interpose-aux.c (check_for_allocations):
	Move compiler barrier before free.

2017-03-20  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21279]
	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile
	[$(subdir) = conform] (conformtest-xfail-conds): Update comment.
	* conform/data/mqueue.h-data (mq_attr.mq_flags): XFAIL for
	x86_64-x32-linux.
	(mq_attr.mq_maxmsg): Likewise.
	(mq_attr.mq_msgsize): Likewise.
	(mq_attr.mq_curmsgs): Likewise.

	[BZ #21278]
	* sysdeps/unix/sysv/linux/mips/mips32/Makefile
	[$(subdir) = conform] (conformtest-xfail-conds): Update comment.
	* conform/data/sys/stat.h-data (stat.st_rdev): XFAIL for
	mips-o32-linux.

	[BZ #21268]
	* sysdeps/unix/sysv/linux/alpha/bits/termios.h (NL2): Define only
	if [__USE_MISC]
	(NL3): Likewise.

2017-03-20  Mike Frysinger  <vapier@gentoo.org>

	[BZ #21275]
	* sysdeps/unix/sysv/linux/spawni.c [__ia64__] (CLONE): Rename
	__stack to __stackbase.
	(STACK): Invert _STACK_GROWS_DOWN and _STACK_GROWS_UP order of
	checks so we can include defined(__ia64__) first.

2017-03-19  Christian Brauner  <christian.brauner@ubuntu.com>

	* sysdeps/unix/sysv/linux/ttyname.h: New file.
	* sysdeps/unix/sysv/linux/ttyname.c: Include "ttyname.h".
	(ttyname) [!_STATBUF_ST_RDEV]: Make code unconditional.
	Call is_pty when the link does not exist or does not match, fail
	with ENODEV when it returns true.
	* sysdeps/unix/sysv/linux/ttyname_r.c: Include "ttyname.h".
	(__ttyname_r) [!_STATBUF_ST_RDEV]: Make code unconditional.
	Call is_pty when the link does not exist or does not match, fail
	with ENODEV when it returns true.

2017-03-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16437]
	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile
	[$(subdir) = conform] (conformtest-xfail-conds): New variable.
	* conform/data/signal.h-data (timespec.tv_nsec): XFAIL for
	x86_64-x32-linux.
	* conform/data/sys/select.h-data (timespec.tv_nsec): Likewise.
	* conform/data/sys/stat.h-data (timespec.tv_nsec): Likewise.
	* conform/data/time.h-data (timespec.tv_nsec): Likewise.

	[BZ #21261]
	* sysdeps/unix/sysv/linux/sparc/bits/setjmp.h
	[__WORDSIZE == 64 && !_ASM] (__sparc64_jmp_buf): Use reserved
	names for all fields.
	* sysdeps/sparc/sparc64/jmpbuf-unwind.h (_JMPBUF_UNWINDS): Update
	for jmp_buf field renaming.
	(_JMPBUF_UNWINDS_ADJ): Likewise.

	* conform/conformtest.pl: Handle xfail[cond]- in header mentioned
	with allow-header.

2017-03-17  Chris Evans  <scarybeasts@gmail.com>

	* malloc/malloc.c (unlink): Add consistency check between size and
	next->prev->size, to further harden against 1-byte overflows.

2017-03-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.c (init_cpu_features): Check AVX with
	CPU_FEATURES_CPU_P.

2017-03-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21259]
	* sysdeps/unix/sysv/linux/alpha/bits/termios.h (IXANY): Define
	unconditionally, not just for [__USE_MISC].

	[BZ #17786]
	* sysdeps/unix/sysv/linux/mips/mips32/Makefile: New file.
	* conform/data/sys/stat.h-data (stat.st_dev): XFAIL for
	mips-o32-linux.

	[BZ #21260]
	* sysdeps/unix/sysv/linux/alpha/Makefile
	[$(subdir) = conform] (conformtest-xfail-conds): New variable.
	* conform/data/netdb.h-data (netent.n_net): XFAIL for alpha-linux.

	* conform/conformtest.pl ($cross): New variable.
	(--cross): New command-line option.
	(runtest): Skip test execution when cross-compiling.
	* conform/Makefile (conformtest-cross): New variable.
	($(conformtest-header-tests)): Pass $(conformtest-cross) to
	conformtest.pl.

	* conform/conformtest.pl ($xfail_str): New variable.
	(--xfail=): New command-line option.
	(top level): Handle expectations starting xfail[cond]-.
	* conform/Makefile (conformtest-xfail): New variable.
	($(conformtest-header-tests)): Pass $(conformtest-xfail) to
	conformtest.pl.

2017-03-16  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl: Use compilation instead of execution
	tests for testing values of constants and usability in #if.

2017-03-16  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* math/auto-libm-test-in: Mark some catan and catanh as
	xfail-rounding:ibm128-libgcc.
	* math/auto-libm-test-out-catan: Regenerate.
	* math/auto-libm-test-out-catanh: Likewise.

2017-03-16  Joseph Myers  <joseph@codesourcery.com>

	* misc/sys/cdefs.h (__BEGIN_NAMESPACE_STD): Remove macro.
	(__END_NAMESPACE_STD): Likewise.
	(__USING_NAMESPACE_STD): Likewise.
	(__BEGIN_NAMESPACE_C99): Likewise.
	(__END_NAMESPACE_C99): Likewise.
	(__USING_NAMESPACE_C99): Likewise.
	* math/math.h (_Mdouble_BEGIN_NAMESPACE): Do not define and
	undefine macro.
	(_Mdouble_END_NAMESPACE): Likewise.
	* ctype/ctype.h: Do not handle C++ namespaces.
	* libio/bits/stdio-ldbl.h: Likewise.
	* libio/stdio.h: Likewise.
	* locale/locale.h: Likewise.
	* math/bits/mathcalls.h: Likewise.
	* setjmp/setjmp.h: Likewise.
	* signal/signal.h: Likewise.
	* stdlib/bits/stdlib-float.h: Likewise.
	* stdlib/bits/stdlib-ldbl.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* string/string.h: Likewise.
	* sysdeps/x86/fpu/bits/mathinline.h: Likewise.
	* time/bits/types/clock_t.h: Likewise.
	* time/bits/types/struct_tm.h: Likewise.
	* time/bits/types/time_t.h: Likewise.
	* time/time.h: Likewise.
	* wcsmbs/bits/wchar-ldbl.h: Likewise.
	* wcsmbs/uchar.h: Likewise.
	* wcsmbs/wchar.h: Likewise.
	[_GLIBCPP_USE_NAMESPACES] (wint_t): Remove conditional definition.
	* wctype/wctype.h: Do not handle C++ namespaces.
	* scripts/begin-end-check.pl: Remove.
	* Makefile (installed-headers): Likewise.
	(tests-special): Do not add $(objpfx)begin-end-check.out.
	($(objpfx)begin-end-check.out): Remove.

2017-03-15  Steve Ellcey  <sellcey@caviumnetworks.com>
	    Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/aarch64/dl-machine.h: Include cpu-features.c.
	(DL_PLATFORM_INIT): New define.
	(dl_platform_init): New function.
	* sysdeps/aarch64/ldsodefs.h: Include cpu-features.h.
	* sysdeps/unix/sysv/linux/aarch64/cpu-features.c: New file.
	* sysdeps/unix/sysv/linux/aarch64/cpu-features.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/dl-procinfo.c: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/libc-start.c: Likewise.

2017-03-15  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/x86_64/mempcpy_chk.S (__mempcpy_chk): Check for SHARED
	instead of PIC.

2017-03-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21094]
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c (__ieee754_rem_pio2f): Use
	24+24+24-bit pi for wider range of values around pi/2.
	* math/auto-libm-test-in: Add more tests of cos and tan.
	* math/auto-libm-test-out-cos: Regenerated.
	* math/auto-libm-test-out-tan: Likewise.

2017-03-15  John David Anglin  <danglin@gcc.gnu.org>

	* sysdeps/hppa/dl-machine.h (DL_STACK_END): Define.
	(RTLD_START): Don't record stack end address in _dl_start_user.

2017-03-15  Alexey Neyman  <stilor@att.net>

	[BZ #21088]
	* nss/nsswitch.c (nscd_init_cb, is_nscd): Make the #if check
	around definitions match those around use.

2017-03-15  Alexey Neyman  <stilor@att.net>

	* configure.ac: Avoid empty subexpression in grep.
	* configure: Regenerate.

2017-03-13  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* posix/test-errno.c (do_test): Initialize setsockopt optlen.
	* sysdeps/unix/sysv/linux/test-errno.c: Move to ...
	* sysdeps/unix/sysv/linux/test-errno-linux.c: ... here.
	(test_wrp_rv): Fix format.
	(test_wrp_rv2): New macro.
	(do_test): Handle mlock return on 64 bits kernels with 32 bits
	binaries.

2017-03-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86/fpu/test-math-vector-sincos.h (INIT_VEC_PTRS_LOOP):
	Use a union when storing pointers.
	(VECTOR_WRAPPER_fFF_2): Do not take address of integer vector and
	cast result when passing to INIT_VEC_PTRS_LOOP.
	(VECTOR_WRAPPER_fFF_3): Likewise.
	(VECTOR_WRAPPER_fFF_4): Likewise.

2017-03-14  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* include/bits/mathcalls-helper-functions.h: New file.
	* math/Makefile (headers): Add bits/mathcalls-helper-functions.h.
	* math/bits/mathcalls.h (__finite, __fpclassify, __iseqsig)
	(__isinf, __isnan, __issignaling, __signbit): Move declarations to
	math/bits/mathcalls-helper-functions.h.
	* math/bits/mathcalls-helper-functions.h: New file.
	* math/math.h: Include bits/mathcalls-helper-functions.h for
	float, double, and long double.

2017-03-15  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/s_iseqsig_template.c (__iseqsig): Use __feraiseexcept
	instead of feraiseexcept.

2017-03-15  Florian Weimer  <fweimer@redhat.com>

	[BZ #21243]
	* support/temp_file.c (support_delete_temp_files): Add comment
	about ignored errors.

2017-03-15  Florian Weimer  <fweimer@redhat.com>

	[BZ #21244]
	* support/xclose.c: New file.
	* support/Makefile (libsupport-routines): Add xclose.
	* support/xunistd.h (xclose): Declare.
	* support/resolv_test.c (server_thread_tcp_client)
	(server_thread_tcp, make_server_sockets, resolv_test_start)
	(resolv_test_end): Call xclose instead of close.
	* support/support_enter_network_namespace.c
	(support_enter_network_namespace): Likewise.
	* support/support_run_diff.c (write_to_temp_file): Likewise.

2017-03-15  Florian Weimer  <fweimer@redhat.com>

	* support/support_format_dns_packet.c (support_format_dns_packet):
	Handle CNAME records in the response.  Extract RDATA names from
	rdata, not the whole packet.  Check AAAA record length.
	* support/tst-support_format_dns_packet.c: New file.
	* support/Makefile (tests): Add tst-support_format_dns_packet.
	(tst-support_format_dns_packet): Link against libresolv.

2017-03-14  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21232]
	* sysdeps/unix/sysv/linux/mips/mips64/n64/posix_fadvise64.c: Add
	posix_fadvise64 weak_alias for static build.

2017-03-14  Andreas Schwab  <schwab@suse.de>

	* sysdeps/generic/dl-procinfo.h (_dl_platform_string): Remove.
	* sysdeps/alpha/dl-procinfo.h (_dl_platform_string): Remove.
	(_dl_string_platform): Use GLRO(dl_alpha_platforms) directly.
	* sysdeps/i386/dl-procinfo.h (_dl_platform_string): Remove.
	* sysdeps/mips/dl-procinfo.h (_dl_platform_string): Remove.
	(_dl_string_platform): Use GLRO(dl_mips_platforms) directly.
	* sysdeps/s390/dl-procinfo.h (_dl_platform_string): Remove.
	* sysdeps/sparc/dl-procinfo.h (_dl_platform_string): Remove.

2017-03-13  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/send.c (__send): Convert hurdish error code into
	posix error code.
	* sysdeps/mach/hurd/recv.c (__recv): Likewise.

2017-03-13  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* scripts/build-many-glibcs.py (Context.add_all_configs): Remove
	no_isolate usage for SH.

2017-03-13  Wilco Dijkstra  <wdijkstr@arm.com>

	[BZ #15105]
	[BZ #19463]
	* elf/dl-cache.c (_dl_load_cache_lookup): Use __strdup.
	* inet/rcmd.c (rcmd_af): Likewise.
	* inet/rexec.c   (rexec_af): Likewise.
	* intl/dcigettext.c (_LIBC): Likewise.
	* intl/finddomain.c (_nl_find_domain): Use strdup expansion.
	* locale/loadarchive.c (_nl_load_locale_from_archive): Use __strdup.
	* locale/setlocale.c (setlocale): Likewise.
	* posix/spawn_faction_addopen.c
	(posix_spawn_file_actions_addopen): Likewise.
	* stdlib/putenv.c (putenv): Use __strndup.
	* sunrpc/svc_simple.c (__registerrpc): Use __strdup.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Use __strdup/__strndup.
	* include/stdlib.h (__need_malloc_and_calloc): Remove uses.
	(__Need_M_And_C) Remove define/undef.
	* stdlib/stdlib.h (__need_malloc_and_calloc): Remove uses.
	(__malloc_and_calloc_defined): Remove define.
	* string/bits/string2.h (__strdup): Remove define.
	(strdup): Likewise.
	(__strndup): Likewise.
	(strndup): Likewise.

2017-03-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/in.h (IPV6_AUTOFLOWLABEL): New
	macro.
	(IPV6_ADDR_PREFERENCES): Likewise.
	(IPV6_MINHOPCOUNT): Likewise.
	(IPV6_ORIGDSTADDR): Likewise.
	(IPV6_RECVORIGDSTADDR): Likewise.
	(IPV6_TRANSPARENT): Likewise.
	(IPV6_UNICAST_IF): Likewise.
	(IPV6_RECVFRAGSIZE): Likewise.

2017-03-13  Thorsten Kukuk  <kukuk@suse.com>

	* sunrpc/Makefile: only run rpcgen tests if we build rpcgen.

2017-03-12  Alexey Neyman <stilor@att.net>

	* sysdeps/sh/dl-machine.h (elf_machine_rela): The condition
	in R_SH_DIR32 case is always false when inlined from
	dl-conflict.c. Ifdef out to prevent GCC from insertin an

2016-03-12  Marko Myllynen  <myllynen@redhat.com>

	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Replace duplicate by
	__ASSUME_SEND_SYSCALL.

2017-03-11  Thorsten Kukuk  <kukuk@suse.com>

	* sunrpc/Makefile: don't build and install rpcsvc header
	files, rpcgen and librpcsvc.a by default.

2017-03-10  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* math/auto-libm-test-out-catan: Regenerated.
	* math/auto-libm-test-out-catanh: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.

2017-03-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/mips64/libm-test-ulps: Update catan and catanh ulps
	for long double with corrected test expectations.

2016-03-08  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/sysdep.h (HAVE_INTERNAL_SEND_SYMBOL):
	Define.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h
	(HAVE_INTERNAL_SEND_SYMBOL): Undefine.
	* sysdeps/unix/sysv/linux/nios2/sysdep.h
	(HAVE_INTERNAL_SEND_SYMBOL): Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h
	(HAVE_INTERNAL_SEND_SYMBOL): Likewise.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Define.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	(__ASSUME_SENDTO_FOR_SEND_SYSCALL): Remove define.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_SENDTO_FOR_SEND_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/s390/kernel-features.h
	(__ASSUME_SENDTO_FOR_SEND_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Remove send from
	auto-generation list.
	* sysdeps/unix/sysv/linux/arm/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list: Likewike.
	* sysdeps/unix/sysv/linux/mips/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/send.c: Simplify includes.
	(__ASSUME_SENDTO_FOR_SEND_SYSCALL): Replace by
	__ASSUME_SENDTO_SYSCALL.
	* sysdeps/unix/sysv/linux/x86_64/send.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips64/send.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/send.c: Likewise.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Remove sendto from
	auto-generation list.
	* sysdeps/unix/sysv/linux/arm/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/mips/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SENDTO_SYSCALL): Define by default.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	(__ASSUME_SENDTO_SYSCALL): Undef it is kernel does not support
	__NR_sendto.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_SENDTO_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/s390/kernel-features.h
	(__ASSUME_SENDTO_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_SENDTO_SYSCALL): Remove definition.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	(__ASSUME_SENDTO_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h:
	(__ASSUME_SENDTO_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/sendto.c: Simplify includes.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Remove recv from
	auto-generation list.
	* sysdeps/unix/sysv/linux/arm/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/mips/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_RECV_SYSCALL): New define.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_RECV_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	(__ASSUME_RECVFROM_FOR_RECV_SYSCALL): Remove define.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_RECVFROM_FOR_RECV_SYSCALL): Remove define.
	* sysdeps/unix/sysv/linux/s390/kernel-features.h
	(__ASSUME_RECVFROM_FOR_RECV_SYSCALL): Remove define.
	* sysdeps/unix/sysv/linux/generic/recv.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips64/recv.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/recv.c: Likewise.
	* sysdeps/unix/sysv/linux/recv.c: Simplify includes.
	(__libc_recv): Use __ASSUME_RECVFROM_SYSCALL instead of
	__ASSUME_RECVFROM_FOR_RECV_SYSCALL to issue recvfrom syscall.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Remove recvfrom from
	auto-generation list.
	* sysdeps/unix/sysv/linux/arm/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/mips/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	(__ASSUME_RECVFROM_SYSCALL): Define by default.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_RECVFROM_SYSCALL): Undef it if kernel does not support
	__NR_recvfrom.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_RECVFROM_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/s390/kernel-features.h
	(__ASSUME_RECVFROM_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_RECVFROM_SYSCALL): Remove definition.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	(__ASSUME_RECVFROM_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h
	(__ASSUME_RECVFROM_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h
	(__ASSUME_RECVFROM_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/recvfrom.c: Simplify includes.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Remove connect from
	auto-generation list.
	* sysdeps/unix/sysv/linux/arm/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/mips/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/connect.c: Simplify include list.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_CONNECT_SYSCALL): Define.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	(__ASSUME_CONNECT_SYSCALL): Undef if kernel does not support it.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_CONNECT_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/s390/kernel-features.h
	(__ASSUME_CONNECT_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h
	(__ASSUME_CONNECT_SYSCALL): Likewise.

	* sysdeps/unix/sysv/linux/accept.c (__libc_accept): Replace
	__ASSUME_ACCEPT4_FOR_ACCEPT_SYSCALL by __ASSUME_ACCEPT4_SYSCALL.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list?: Remove accept from
	auto-generation list.
	* sysdeps/unix/sysv/linux/arm/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/mips/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	(__ASSUME_ACCEPT4_FOR_ACCEPT_SYSCALL): Remove define.
	(__ASSUME_ACCEPT_SYSCALL): Undefine.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_ACCEPT_SYSCALL): New define.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_ACCEPT4_FOR_ACCEPT_SYSCALL): Remove define.
	(__ASSUME_ACCEPT_SYSCALL): Define wheter kernel version supports.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_ACCEPT_SYSCALL): Define.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	(__ASSUME_ACCEPT_SYSCALL): Undefine.
	* sysdeps/unix/sysv/linux/s390/kernel-features.h
	(__ASSUME_ACCEPT4_FOR_ACCEPT_SYSCALL): Remove define.
	(__ASSUME_ACCEPT_SYSCALL): Undefine.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h
	(__ASSUME_ACCEPT_SYSCALL): Undefine.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h
	(__ASSUME_ACCEPT_SYSCALL): Undefine for 32 bits.

2017-03-08  Yury Norov <ynorov@caviumnetworks.com>
	    Zack Weinberg  <zackw@panix.com>

	* posix/test-errno.c: New file.
	* posix/Makefile (tests): Add test-errno.
	* sysdeps/unix/sysv/linux/test-errno.c: New file.
	* sysdeps/unix/sysv/linux/Makefile (tests): Add test-errno.

2017-03-08  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerated.

2017-03-07  Florian Weimer  <fweimer@redhat.com>

	* time/tzset.c (compute_offset): Open-code min macro.
	(min, max, sign): Remove.

2017-03-07  Florian Weimer  <fweimer@redhat.com>

	[BZ #15576]
	Remove TZNAME_MAX limit from sysconf.
	* include/time.h (__tzname_cur_max, __tzname_max): Remove
	declaration.
	* time/tzfile.c (__tzfile_read, __tzfile_default): Do not call
	compute_tzname_max.
	(compute_tzname_max): Remove.
	* time/tzset.c (__tzname_cur_max, __tzname_max): Remove.
	(update_vars): Do not update __tzname_cur_max.
	(tzset_internal): Remove argument.
	(__tzset): Adjust call to tzset_internal.
	(__tz_convert): Likewise.

	* posix/sysconf.c (__sysconf): Return -1 for _SC_TZNAME_MAX.
	* sysdeps/posix/sysconf.c (__sysconf): Likewise.
	* manual/conf.texi (Sysconf Definition): Update comment.

2017-03-07  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	[BZ #21209]
	* elf/rtld.c (process_envvars): Ignore LD_HWCAP_MASK for
	AT_SECURE processes.
	* sysdeps/generic/unsecvars.h: Add LD_HWCAP_MASK.
	* elf/tst-env-setuid.c (test_parent): Test LD_HWCAP_MASK.
	(test_child): Likewise.
	* elf/Makefile (tst-env-setuid-ENV): Add LD_HWCAP_MASK.

2017-03-07  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/hppa/ipc_priv.h: New file.

2017-03-06  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/atomic-machine.h
	(USE_ATOMIC_COMPILER_BUILTINS): Define to 1.
	(__arch_compare_and_exchange_val_8_acq,
	__arch_compare_and_exchange_val_16_acq,
	__arch_compare_and_exchange_val_32_acq,
	__arch_compare_and_exchange_val_64_acq):
	Delete macro.
	(atomic_compare_and_exchange_val_acq,
	atomic_compare_and_exchange_val_rel,
	atomic_compare_and_exchange_bool_acq,
	catomic_compare_and_exchange_bool_acq,
	atomic_exchange_acq, atomic_exchange_rel,
	atomic_exchange_and_add_acq,
	atomic_exchange_and_add_rel,
	catomic_exchange_and_add, atomic_or_val,
	atomic_or, catomic_or, atomic_bit_test_set,
	atomic_and_val, atomic_and, catomic_and):
	Define macros with help of C11 atomic builtins.

2017-03-03  Justus Winter <justus@gnupg.org>

	* sysdeps/mach/hurd/ftruncate64.c: New file.
	* sysdeps/mach/hurd/truncate64.c: Likewise.

2017-03-03  Florian Weimer  <fweimer@redhat.com>

	* time/tzfile.c (NOID): Do not define.
	* time/tzset.c (NOID): Likewise.

2017-03-03  Florian Weimer  <fweimer@redhat.com>

	* time/tzset.c (compute_offset): Remove __attribute_noinline__.

2017-03-02  Florian Weimer  <fweimer@redhat.com>

	* elf/get-dynamic-info.h: Remove header file inclusion guard.

2017-03-02  Florian Weimer  <fweimer@redhat.com>

	[BZ #21015]
	* manual/install.texi (Configuring and compiling): Document
	--enable-bind-now.
	* Makeconfig [bind-now] (LDFLAGS-lib.so): Set.
	(build-shlib-helper): Use $(LDFLAGS-lib.so).
	(format.lds): Likewise.
	[bind-now] (LDFLAGS-c.so): Remove.
	* sysdeps/x86_64/localplt.data (libm.so): matherr relocation can
	be R_X86_64_GLOB_DAT.
	* sysdeps/unix/sysv/linux/i386/localplt.data (libm.so): matherr
	relocation can be R_386_GLOB_DAT.
	* sysdeps/unix/sysv/linux/alpha/localplt.data (libm.so): matherr
	relocaiton can be R_ALPHA_GLOB_DAT.
	* iconvdata/Makefile [bind-now] (LDFLAGS.so): Add -Wl,-z,now.

2017-03-01  Zack Weinberg  <zackw@panix.com>

	* include/libc-pointer-arith.h: New file.  Define
	cast_to_integer, ALIGN_UP, ALIGN_DOWN, PTR_ALIGN_UP, and
	PTR_ALIGN_DOWN here.
	* include/libc-internal.h: Definitions of above macros
	moved from here.  Don't include libc-diag.h anymore either.
	* posix/wordexp-test.c: Include stdint.h and libc-pointer-arith.h.
	Don't include libc-internal.h.

	* debug/pcprofile.c, elf/dl-tunables.c, elf/soinit.c, io/openat.c
	* io/openat64.c, misc/ptrace.c, nptl/pthread_clock_gettime.c
	* nptl/pthread_clock_settime.c, nptl/pthread_cond_common.c
	* string/strcoll_l.c, sysdeps/nacl/brk.c
	* sysdeps/unix/clock_settime.c
	* sysdeps/unix/sysv/linux/i386/get_clockfreq.c
	* sysdeps/unix/sysv/linux/ia64/get_clockfreq.c
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c
	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c:
	Don't include libc-internal.h.

	* elf/get-dynamic-info.h, iconv/loop.c
	* iconvdata/iso-2022-cn-ext.c, locale/weight.h, locale/weightwc.h
	* misc/reboot.c, nis/nis_table.c, nptl_db/thread_dbP.h
	* nscd/connections.c, resolv/res_send.c, soft-fp/fmadf4.c
	* soft-fp/fmasf4.c, soft-fp/fmatf4.c, stdio-common/vfscanf.c
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c
	* sysdeps/ieee754/ldbl-128/k_tanl.c
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c
	* sysdeps/ieee754/ldbl-96/k_tanl.c, sysdeps/nptl/futex-internal.h:
	Include libc-diag.h instead of libc-internal.h.

	* elf/dl-load.c, elf/dl-reloc.c, locale/programs/locarchive.c
	* nptl/nptl-init.c, string/strcspn.c, string/strspn.c
	* malloc/malloc.c, sysdeps/i386/nptl/tls.h
	* sysdeps/nacl/dl-map-segments.h, sysdeps/x86_64/atomic-machine.h
	* sysdeps/unix/sysv/linux/spawni.c
	* sysdeps/x86_64/nptl/tls.h:
	Include libc-pointer-arith.h instead of libc-internal.h.

	* elf/get-dynamic-info.h, sysdeps/nacl/dl-map-segments.h
	* sysdeps/x86_64/atomic-machine.h:
	Add multiple include guard.

	* nss/tst-cancel-getpwuid_r.c: Include nss.h.
	* string/strcasestr.c: No need to include config.h.
	* sysdeps/powerpc/fpu/tst-setcontext-fpscr.c: Include
	sys/auxv.h. Don't include sysdep.h.
	* sysdeps/powerpc/tst-set_ppr.c: Don't include dl-procinfo.h.

	* dlfcn/tst-dladdr.c: Don't include ldsodefs.h.	 Don't use
	DL_LOOKUP_ADDRESS.
	* math/test-misc.c: Instead of testing NO_LONG_DOUBLE, test whether
	LDBL_MANT_DIG is greater than DBL_MANT_DIG.
	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-tst-writev.c): Use
	sysconf (_SC_PAGESIZE) instead of __getpagesize in definition
	of ARTIFICIAL_LIMIT.
	* sysdeps/unix/sysv/linux/tst-clone.c [__ia64__]: Add extern
	declaration of __clone2.

2017-02-28  Florian Weimer  <fweimer@redhat.com>

	* scripts/backport-support.sh (latest_commit): New file.

2017-02-28  Florian Weimer  <fweimer@redhat.com>

	[BZ #20257]
	* inet/Makefile (routines): Add deadline.
	(tests-static): Add tst-deadline.
	* inet/net-internal.h (struct deadline_current_time)
	(__deadline_current_time, struct deadline, __deadline_is_infinite)
	(__deadline_elapsed, __deadline_first, __deadline_from_timeval)
	(__deadline_to_ms, __is_timeval_valid_timeout): Declare.
	* inet/deadline.c: New file.
	* inet/tst-deadline.c: Likewise.
	* sunrpc/Makefile (tests): Add tst-udp-nonblocking,
	tst-udp-timeout, tst-udp-garbage.
	(tst-udp-nonblocking, tst-udp-timeout): Link against libc.so
	explicitly.
	(tst-udp-garbage): Likewise.  Also link against thread library.
	* sunrpc/clnt_udp.c (struct cu_data): Mention in comment that the
	struct layout is part of the ABI.
	(clntudp_call): Rework timeout handling.
	* sunrpc/tst-udp-garbage.c: New file.
	* sunrpc/tst-udp-nonblocking.c: Likewise.
	* sunrpc/tst-udp-timeout.c: Likewise.

2017-02-28  Florian Weimer  <fweimer@redhat.com>

	[BZ #5010]
	* sunrpc/svc.c (svc_is_mapped): Remove.
	(svc_unregister): Obtain mapped status while the service is still
	registered.
	* sunrpc/Makefile [have-thread-library] (tests): Add
	tst-svc_register.
	(tst-svc_register): Link against libc.so explicitly and the thread
	library.
	* sunrpc/tst-svc_register.c: New file.

2017-02-28  Andreas Schwab  <schwab@linux-m68k.org>

	* bits/sigthread.h: Refer to <signal.h>, not <pthread.h>.
	* sysdeps/pthread/bits/sigthread.h: Likewise.

2017-02-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #21115]
	* sunrpc/clnt_udp.c (clntudp_call): Free ancillary data later.
	* sunrpc/Makefile (tests): Add tst-udp-error.
	(tst-udp-error): Link against libc.so explicitly.
	* sunrpc/tst-udp-error: New file.

2017-02-25  Zack Weinberg  <zackw@panix.com>

	* sysdeps/generic/math_private.h: Use __BIG_ENDIAN and
	__LITTLE_ENDIAN, not BIG_ENDIAN and LITTLE_ENDIAN.

	* sysdeps/generic/math_ldbl.h
	* sysdeps/ia64/fpu/math_ldbl.h
	* sysdeps/ieee754/ldbl-128/math_ldbl.h
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h
	* sysdeps/ieee754/ldbl-96/math_ldbl.h
	* sysdeps/powerpc/fpu/math_ldbl.h
	* sysdeps/x86_64/fpu/math_ldbl.h:
	Allow direct inclusion.  Use uintNN_t instead of u_intNN_t.
	Use __BIG_ENDIAN and __LITTLE_ENDIAN, not BIG_ENDIAN and
	LITTLE_ENDIAN.  Include endian.h and/or stdint.h if necessary.
	Add copyright notices.

	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_canonicalize_int):
	Don't use EXTRACT_WORDS64.

	* sysdeps/ieee754/ldbl-96/test-canonical-ldbl-96.c
	* sysdeps/ieee754/ldbl-96/test-totalorderl-ldbl-96.c
	* sysdeps/ieee754/ldbl-128ibm/test-canonical-ldbl-128ibm.c
	* sysdeps/ieee754/ldbl-128ibm/test-totalorderl-ldbl-128ibm.c:
	Include math_ldbl.h, not math_private.h.

2017-02-25  Zack Weinberg  <zackw@panix.com>

	* include/libc-diag.h: New file.  Define ignore_value,
	DIAG_PUSH_NEEDS_COMMENT, DIAG_POP_NEEDS_COMMENT,
	DIAG_IGNORE_NEEDS_COMMENT, and DIAG_IGNORE_Os_NEEDS_COMMENT here.

	* include/libc-internal.h: Definitions of above macros moved from
	here.  Include libc-diag.h.  Add copyright notice.

	* malloc/tst-malloc.c, malloc/tst-memcheck.c, malloc/tst-realloc.c
	* misc/tst-error1.c, posix/tst-dir.c, stdio-common/bug21.c
	* stdio-common/scanf14.c, stdio-common/scanf4.c, stdio-common/scanf7.c
	* stdio-common/test-vfprintf.c, stdio-common/tst-printf.c
	* stdio-common/tst-printfsz.c, stdio-common/tst-sprintf.c
	* stdio-common/tst-unlockedio.c, stdio-common/tstdiomisc.c
	* stdlib/bug-getcontext.c, string/tester.c, string/tst-endian.c
	* time/tst-strptime2.c, wcsmbs/tst-wcstof.c:
	Include libc-diag.h instead of libc-internal.h.

	* stdlib/tst-environ.c: Include libc-diag.h.  Suppress -Wnonnull for
	call to unsetenv (NULL).
	* nptl/tst-mutex1.c: Include libc-diag.h.  Suppress -Wnonnull for
	call to pthread_mutexattr_destroy (NULL).

2017-02-25  Zack Weinberg  <zackw@panix.com>

	* include/features.h (__GLIBC_USE_DEPRECATED_GETS): New macro.
	* libio/stdio.h, libio/bits/stdio2.h: Condition gets on
	__GLIBC_USE (DEPRECATED_GETS).  Update comments to indicate
	gets was removed from C++ in C++14.
	* include/stdio.h: Remove redundant declaration of gets.
	* debug/tst-chk1.c, stdio-common/tst-gets.c: Force gets to
	be declared, since we are testing it.
	* stdio-common/Makefile (tst-gets.c): Compile with
	-Wno-deprecated-declarations.
	* debug/Makefile (tst-chk1.c, tst-chk2.c, tst-chk3.c, tst-chk4.cc)
	(tst-chk5.cc, tst-chk6.cc, tst-lfschk1.c, tst-lfschk2.c)
	(tst-lfschk3.c, tst-lfschk4.cc, tst-lfschk5.cc, tst-lfschk6.cc):
	Compile with -Wno-deprecated-declarations.

2017-02-24  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* math/libm-test-support.c (check_ulp): Use LIT() around literal
	numbers.

2017-02-24  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* resolv/tst-resolv-qtypes.c (domain):
	Change type to const pointer to const char.

2017-02-24  Joseph Myers  <joseph@codesourcery.com>

	* math/Makefile (libm-tests-generated): Remove variable.
	(libm-tests-base-normal): New variable.
	(libm-tests-base-finite): Likewise.
	(libm-tests-base-inline): Likewise.
	(libm-tests-base): Likewise.
	(libm-tests-normal): Likewise.
	(libm-tests-finite): Likewise.
	(libm-tests-inline): Likewise.
	(libm-tests-vector): Likewise.
	(libm-tests): Define in terms of these new variables.
	(libm-tests-for-type): New variable.
	(libm-tests.o): Move definition.
	(tests): Move addition of $(libm-tests).
	(generated): Update for new and removed libm test files.
	($(objpfx)libm-test.c): Remove target.
	($(objpfx)libm-have-vector-test.h): Likewise.
	(CFLAGS-test-double-vlen2.c): Remove variable.
	(CFLAGS-test-double-vlen4.c): Likewise.
	(CFLAGS-test-double-vlen8.c): Likewise.
	(CFLAGS-test-float-vlen4.c): Likewise.
	(CFLAGS-test-float-vlen8.c): Likewise.
	(CFLAGS-test-float-vlen16.c): Likewise.
	(CFLAGS-test-float.c): Likewise.
	(CFLAGS-test-float-finite.c): Likewise.
	(CFLAGS-libm-test-support-float.c): Likewise.
	(CFLAGS-test-double.c): Likewise.
	(CFLAGS-test-double-finite.c): Likewise.
	(CFLAGS-libm-test-support-double.c): Likewise.
	(CFLAGS-test-ldouble.c): Likewise.
	(CFLAGS-test-ldouble-finite.c): Likewise.
	(CFLAGS-libm-test-support-ldouble.c): Likewise.
	(libm-test-inline-cflags): New variable.
	(CFLAGS-test-ifloat.c): Remove variable.
	(CFLAGS-test-idouble.c): Likewise.
	(CFLAGS-test-ildouble.c): Likewise.
	($(addprefix $(objpfx), $(libm-tests.o))): Move target and update
	dependencies.
	($(foreach t,$(libm-tests-normal),$(objpfx)$(t).c)): New rule.
	($(foreach t,$(libm-tests-finite),$(objpfx)$(t).c)): Likewise.
	($(foreach t,$(libm-tests-inline),$(objpfx)$(t).c)): Likewise.
	($(foreach t,$(libm-tests-vector),$(objpfx)$(t).c)): Likewise.
	($(foreach t,$(types),$(objpfx)libm-test-support-$(t).c)):
	Likewise.
	(dependencies on libm-test-support-*.o): Remove.
	($(foreach f,$(libm-test-funcs-all),$(objpfx)$(o)-$(f).o)): New
	rules using iterators.
	($(addprefix $(objpfx),$(call libm-tests-for-type,$(o)))):
	Likewise.
	($(objpfx)libm-test-support-$(o).o): Likewise.
	($(addprefix $(objpfx),$(filter-out $(tests-static)
	$(libm-vec-tests),$(tests)))): Filter out $(libm-tests-vector)
	instead.
	($(addprefix $(objpfx), $(libm-vec-tests))): Use iterator to
	define rule instead.
	* math/README.libm-test: Update.
	* math/libm-test-acos.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-acosh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-asin.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-asinh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-atan.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-atan2.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-atanh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cabs.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cacos.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cacosh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-canonicalize.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-carg.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-casin.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-casinh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-catan.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-catanh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cbrt.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-ccos.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-ccosh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-ceil.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cexp.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cimag.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-clog.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-clog10.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-conj.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-copysign.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cos.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cosh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cpow.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-cproj.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-creal.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-csin.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-csinh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-csqrt.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-ctan.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-ctanh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-erf.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-erfc.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-exp.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-exp10.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-exp2.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-expm1.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fabs.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fdim.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-floor.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fma.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fmax.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fmaxmag.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fmin.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fminmag.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fmod.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fpclassify.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-frexp.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fromfp.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-fromfpx.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-getpayload.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-hypot.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-ilogb.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-iscanonical.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-iseqsig.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-isfinite.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-isgreater.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-isgreaterequal.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-isinf.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-isless.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-islessequal.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-islessgreater.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-isnan.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-isnormal.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-issignaling.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-issubnormal.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-isunordered.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-iszero.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-j0.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-j1.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-jn.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-lgamma.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-llogb.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-llrint.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-llround.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-log.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-log10.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-log1p.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-log2.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-logb.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-lrint.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-lround.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-modf.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-nearbyint.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-nextafter.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-nextdown.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-nexttoward.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-nextup.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-pow.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-remainder.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-remquo.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-rint.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-round.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-roundeven.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-scalb.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-scalbln.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-scalbn.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-setpayload.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-setpayloadsig.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-signbit.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-significand.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-sin.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-sincos.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-sinh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-sqrt.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-tan.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-tanh.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-tgamma.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-totalorder.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-totalordermag.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-trunc.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-ufromfp.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-ufromfpx.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-y0.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-y1.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-yn.inc: Include libm-test-driver.c.
	(do_test): New function.
	* math/libm-test-driver.c: Do not include libm-have-vector-test.h.
	(HAVE_VECTOR): Remove macro.
	(START): Do not call HAVE_VECTOR.
	* math/test-double-vlen2.h (FUNC_TEST): Remove macro.
	* math/test-double-vlen4.h (FUNC_TEST): Remove macro.
	* math/test-double-vlen8.h (FUNC_TEST): Remove macro.
	* math/test-float-vlen16.h (FUNC_TEST): Remove macro.
	* math/test-float-vlen4.h (FUNC_TEST): Remove macro.
	* math/test-float-vlen8.h (FUNC_TEST): Remove macro.
	* math/test-math-vector.h (FUNC_TEST): New macro.
	(WRAPPER_DECL): Rename to WRAPPER_DECL_f.
	* sysdeps/x86_64/fpu/Makefile (double-vlen2-funcs): New variable.
	(double-vlen4-funcs): Likewise.
	(double-vlen4-avx2-funcs): Likewise.
	(double-vlen8-funcs): Likewise.
	(float-vlen4-funcs): Likewise.
	(float-vlen8-funcs): Likewise.
	(float-vlen8-avx2-funcs): Likewise.
	(float-vlen16-funcs): Likewise.
	(CFLAGS-test-double-vlen4-avx2.c): Remove variable.
	(CFLAGS-test-float-vlen8-avx2.c): Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4.h (TEST_VECTOR_cos): Remove
	macro.
	(TEST_VECTOR_sin): Likewise.
	(TEST_VECTOR_sincos): Likewise.
	(TEST_VECTOR_log): Likewise.
	(TEST_VECTOR_exp): Likewise.
	(TEST_VECTOR_pow): Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8.h (TEST_VECTOR_cos):
	Likewise.
	(TEST_VECTOR_sin): Likewise.
	(TEST_VECTOR_sincos): Likewise.
	(TEST_VECTOR_log): Likewise.
	(TEST_VECTOR_exp): Likewise.
	(TEST_VECTOR_pow): Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen16.h (TEST_VECTOR_cosf):
	Likewise.
	(TEST_VECTOR_sinf): Likewise.
	(TEST_VECTOR_sincosf): Likewise.
	(TEST_VECTOR_logf): Likewise.
	(TEST_VECTOR_expf): Likewise.
	(TEST_VECTOR_powf): Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8.h (TEST_VECTOR_cosf):
	Likewise.
	(TEST_VECTOR_sinf): Likewise.
	(TEST_VECTOR_sincosf): Likewise.
	(TEST_VECTOR_logf): Likewise.
	(TEST_VECTOR_expf): Likewise.
	(TEST_VECTOR_powf): Likewise.
	* math/gen-libm-have-vector-test.sh: Remove file.
	* math/libm-test.inc: Likewise.
	* math/libm-test-support-double.c: Likewise.
	* math/libm-test-support-float.c: Likewise.
	* math/libm-test-support-ldouble.c: Likewise.
	* math/test-double-finite.c: Likewise.: Likewise.
	* math/test-double.c: Likewise.
	* math/test-float-finite.c: Likewise.
	* math/test-float.c: Likewise.
	* math/test-idouble.c: Likewise.
	* math/test-ifloat.c: Likewise.
	* math/test-ildouble.c: Likewise.
	* math/test-ldouble-finite.c: Likewise.
	* math/test-ldouble.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen2.h: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen16.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4.h: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8.c: Likewise.

2017-02-23 Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>
	   Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile: Add wrappers to gen-libm-calls.
	* math/w_acos_template.c: New file.
	* math/w_acosh_template.c: Likewise.
	* math/w_asin_template.c: Likewise.
	* math/w_atan2_template.c: Likewise.
	* math/w_atanh_template.c: Likewise.
	* math/w_cosh_template.c: Likewise.
	* math/w_exp10_template.c: Likewise.
	* math/w_exp2_template.c: Likewise.
	* math/w_exp_template.c: Likewise.
	* math/w_fmod_template.c: Likewise.
	* math/w_hypot_template.c: Likewise.
	* math/w_j0_template.c: Likewise.
	* math/w_j1_template.c: Likewise.
	* math/w_jn_template.c: Likewise.
	* math/w_lgamma_r_template.c: Likewise.
	* math/w_lgamma_template.c: Likewise.
	* math/w_log10_template.c: Likewise.
	* math/w_log2_template.c: Likewise.
	* math/w_log_template.c: Likewise.
	* math/w_pow_template.c: Likewise.
	* math/w_remainder_template.c: Likewise.
	* math/w_sinh_template.c: Likewise.
	* math/w_sqrt_template.c: Likewise.
	* math/w_tgamma_template.c: Likewise.: Likewise.
	* sysdeps/generic/math-type-macros-double.h
	(__USE_WRAPPER_TEMPLATE): New macro to control inclusion of
	the new wrappers.
	* sysdeps/generic/math-type-macros-float.h: Likewise.
	* sysdeps/generic/math-type-macros-ldouble.h: Likewise.

2017-02-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/sys/timerfd.h (TFD_TIMER_CANCEL_ON_SET):
	New enum constant and macro.

	* scripts/build-many-glibcs.py (Context.checkout): Default Linux
	kernel version to 4.10.

2017-02-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/in.h (IP_RECVFRAGSIZE): New macro.

2017-02-21  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2017-02-21  Wainer dos Santos Moschetta  <wainersm@linux.vnet.ibm.com>

	* sysdeps/powerpc/tst-set_ppr.c: New file.
	Implement test cases for __ppc_set_ppr_* functions.
	* sysdeps/powerpc/Makefile ($(subdir),misc): Add tst-set_ppr
	in the list of tests.

2017-02-21  Wainer dos Santos Moschetta  <wainersm@linux.vnet.ibm.com>

	* sysdeps/powerpc/test-get_hwcap.c: Use <support/test-driver.c>
	instead of test-skeleton.c.
	(do_test): Replaced pthread_create and pthread_join with
	xpthread_create and xpthread_join.  Use TEST_VERIFY_EXIT macro.
	Removed unneeded status variable.
	* sysdeps/powerpc/test-gettimebase.c: Use <support/test-driver.c>
	instead of test-skeleton.c.
	* sysdeps/powerpc/tst-tlsopt-powerpc.c: Likewise.

2017-02-20  Mike FABIAN  <mfabian@redhat.com>

	[BZ #20313]
	* include/stdc-predef.h (__STDC_ISO_10646__): Update to
	201605L, for Unicode 9.

2017-02-20  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test-support.h (EXCEPTIONS_OK): Remove macro.
	(UNDERFLOW_EXCEPTION_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_OK_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_DOUBLE): Likewise.
	(UNDERFLOW_EXCEPTION_OK_DOUBLE): Likewise.
	(UNDERFLOW_EXCEPTION_LDOUBLE_IBM): Likewise.

2017-02-19  Zack Weinberg  <zackw@panix.com>

	* rt/tst-mqueue4.c: Include stdint.h.

2017-02-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/arm/libm-test-ulps: Update.
	* sysdeps/mips/mips32/libm-test-ulps: Likewise.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.
	* sysdeps/powerpc/nofpu/libm-test-ulps: Likewise.

2017-01-17  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21029]
	* config.h.in [CAN_USE_REGISTER_ASM_EBP]: New define.
	* sysdeps/unix/sysv/linux/i386/Makefile
	[$(subdir) = elf] (sysdep-dl-routines): Add libc-do-syscall.
	(uses-6-syscall-arguments): Remove.
	[$(subdir) = misc] (CFLAGS-epoll_pwait.o): Likewise.
	[$(subdir) = misc] (CFLAGS-epoll_pwait.os): Likewise.
	[$(subdir) = misc] (CFLAGS-mmap.o): Likewise.
	[$(subdir) = misc] (CFLAGS-mmap.os): Likewise.
	[$(subdir) = misc] (CFLAGS-mmap64.o): Likewise.
	[$(subdir) = misc] (CFLAGS-mmap64.os): Likewise.
	[$(subdir) = misc] (CFLAGS-pselect.o): Likewise.
	[$(subdir) = misc] (cflags-pselect.o): Likewise.
	[$(subdir) = misc] (cflags-pselect.os): Likewise.
	[$(subdir) = misc] (cflags-rtld-mmap.os): Likewise.
	[$(subdir) = sysvipc] (cflags-semtimedop.o): Likewise.
	[$(subdir) = sysvipc] (cflags-semtimedop.os): Likewise.
	[$(subdir) = io] (CFLAGS-posix_fadvise64.o): Likewise.
	[$(subdir) = io] (CFLAGS-posix_fadvise64.os): Likewise.
	[$(subdir) = io] (CFLAGS-posix_fallocate.o): Likewise.
	[$(subdir) = io] (CFLAGS-posix_fallocate.os): Likewise.
	[$(subdir) = io] (CFLAGS-posix_fallocate64.o): Likewise.
	[$(subdir) = io] (CFLAGS-posix_fallocate64.os): Likewise.
	[$(subdir) = io] (CFLAGS-sync_file_range.o): Likewise.
	[$(subdir) = io] (CFLAGS-sync_file_range.os): Likewise.
	[$(subdir) = io] (CFLAGS-fallocate.o): Likewise.
	[$(subdir) = io] (CFLAGS-fallocate.os): Likewise.
	[$(subdir) = io] (CFLAGS-fallocate64.o): Likewise.
	[$(subdir) = io] (CFLAGS-fallocate64.os): Likewise.
	[$(subdir) = nptl] (CFLAGS-pthread_rwlock_timedrdlock.o):
	Likewise.
	[$(subdir) = nptl] (CFLAGS-pthread_rwlock_timedrdlock.os):
	Likewise.
	[$(subdir) = nptl] (CFLAGS-pthread_rwlock_timedrwlock.o):
	Likewise.
	[$(subdir) = nptl] (CFLAGS-pthread_rwlock_timedrwlock.os):
	Likewise.
	[$(subdir) = nptl] (CFLAGS-sem_wait.o): Likewise.
	[$(subdir) = nptl] (CFLAGS-sem_wait.os): Likewise.
	[$(subdir) = nptl] (CFLAGS-sem_timedwait.o): Likewise.
	[$(subdir) = nptl] (CFLAGS-sem_timedwait.os): Likewise.
	* sysdeps/unix/sysv/linux/i386/configure.ac: Add check if compiler allows
	ebp on inline assembly.
	* sysdeps/unix/sysv/linux/i386/configure: Regenerate.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (OPTIMIZE_FOR_GCC_5):
	Set if CAN_USE_REGISTER_ASM_EBP is set.

2017-02-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.c (init_cpu_features): Use
	index_cpu_RTM and reg_RTM to clear the bit_cpu_RTM bit.

2017-02-17  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of catan and catanh.
	* math/auto-libm-test-out-catan: New generated file.
	* math/auto-libm-test-out-catanh: Likewise.
	* math/libm-test-catan.inc (catan_test_data): Use AUTO_TESTS_c_c.
	Move tests with finite inputs, except divide-by-zero cases, to
	auto-libm-test-in.
	* math/libm-test-catanh.inc (catanh_test_data): Likewise.
	* math/Makefile (libm-test-funcs-auto): Add catan and catanh.
	(libm-test-funcs-noauto): Remove catan and catanh.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/i386/i686/fpu/multiarch/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add tests of casin and casinh.
	* math/auto-libm-test-out-casin: New generated file.
	* math/auto-libm-test-out-casinh: Likewise.
	* math/libm-test-casin.inc (casin_test_data): Use AUTO_TESTS_c_c.
	Move tests with finite inputs to auto-libm-test-in.
	* math/libm-test-casinh.inc (casinh_test_data): Likewise.
	* math/Makefile (libm-test-funcs-auto): Add casin and casinh.
	(libm-test-funcs-noauto): Remove casin and casinh.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/i386/i686/fpu/multiarch/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add tests of cacos and cacosh.
	* math/auto-libm-test-out-cacos: New generated file.
	* math/auto-libm-test-out-cacosh: Likewise.
	* math/libm-test-cacos.inc (cacos_test_data): Use AUTO_TESTS_c_c.
	Move tests with finite inputs to auto-libm-test-in.
	* math/libm-test-cacosh.inc (cacosh_test_data): Likewise.
	* math/Makefile (libm-test-funcs-auto): Add cacos and cacosh.
	(libm-test-funcs-noauto): Remove cacos and cacosh.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/i386/i686/fpu/multiarch/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	Revert:
	2017-02-16  Zack Weinberg  <zackw@panix.com>

	* sysdeps/x86_64/fpu/math-tests-arch.h: Include cpu-features.h.
	Don't include init-arch.h.
	* sysdeps/x86_64/multiarch/test-multiarch.h: Include cpu-features.h.
	Don't include init-arch.h.

2017-02-17  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #21171]
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c (__ieee754_lgamma_r): Return
	+Inf and raise divide-by-zero when x is negative.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c (__ieee754_lgammaf_r): Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c (__ieee754_lgammal_r): Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c (__ieee754_log10):  Return
	-Inf and raise divide-by-zero when x = +-0.
	* sysdeps/ieee754/dbl-64/e_log2.c (__ieee754_log2): Likewise.
	* sysdeps/ieee754/flt-32/e_log10f.c (__ieee754_log10f):	Likewise.
	* sysdeps/ieee754/flt-32/e_log2f.c (__ieee754_log2f): Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c (__ieee754_log10l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c (__ieee754_log2l): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c (__ieee754_log10l): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c (__ieee754_log2l): Likewise.

2017-02-16  Zack Weinberg  <zackw@panix.com>

	* scripts/build-many-glibcs.py (bot_build_mail): If the
	bot_config does not contain all of the necessary email-
	related settings, just print a warning and continue.

2017-02-16  Zack Weinberg  <zackw@panix.com>

	* crypt/md5.h: Test _LIBC with #if defined, not #if.
	* dirent/opendir-tst1.c: Include sys/stat.h.
	* dirent/tst-fdopendir.c: Include sys/stat.h.
	* dirent/tst-fdopendir2.c: Include stdlib.h.
	* dirent/tst-scandir.c: Include stdbool.h.
	* elf/tst-auditmod1.c: Include link.h and stddef.h.
	* elf/tst-tls15.c: Include stdlib.h.
	* elf/tst-tls16.c: Include stdlib.h.
	* elf/tst-tls17.c: Include stdlib.h.
	* elf/tst-tls18.c: Include stdlib.h.
	* iconv/tst-iconv6.c: Include endian.h.
	* iconvdata/bug-iconv11.c: Include limits.h.
	* io/test-utime.c: Include stdint.h.
	* io/tst-faccessat.c: Include sys/stat.h.
	* io/tst-fchmodat.c: Include sys/stat.h.
	* io/tst-fchownat.c: Include sys/stat.h.
	* io/tst-fstatat.c: Include sys/stat.h.
	* io/tst-futimesat.c: Include sys/stat.h.
	* io/tst-linkat.c: Include sys/stat.h.
	* io/tst-mkdirat.c: Include sys/stat.h and stdbool.h.
	* io/tst-mkfifoat.c: Include sys/stat.h and stdbool.h.
	* io/tst-mknodat.c: Include sys/stat.h and stdbool.h.
	* io/tst-openat.c: Include stdbool.h.
	* io/tst-readlinkat.c: Include sys/stat.h.
	* io/tst-renameat.c: Include sys/stat.h.
	* io/tst-symlinkat.c: Include sys/stat.h.
	* io/tst-unlinkat.c: Include stdbool.h.
	* libio/bug-memstream1.c: Include stdlib.h.
	* libio/bug-wmemstream1.c: Include stdlib.h.
	* libio/tst-fwrite-error.c: Include stdlib.h.
	* libio/tst-memstream1.c: Include stdlib.h.
	* libio/tst-memstream2.c: Include stdlib.h.
	* libio/tst-memstream3.c: Include stdlib.h.
	* malloc/tst-interpose-aux.c: Include stdint.h.
	* misc/tst-preadvwritev-common.c: Include sys/stat.h.
	* nptl/tst-basic7.c: Include limits.h.
	* nptl/tst-cancel25.c: Include pthread.h, not pthreadP.h.
	* nptl/tst-cancel4.c: Include stddef.h, limits.h, and sys/stat.h.
	* nptl/tst-cancel4_1.c: Include stddef.h.
	* nptl/tst-cancel4_2.c: Include stddef.h.
	* nptl/tst-cond16.c: Include limits.h.
	Use sysconf(_SC_PAGESIZE) instead of __getpagesize.
	* nptl/tst-cond18.c: Include limits.h.
	Use sysconf(_SC_PAGESIZE) instead of __getpagesize.
	* nptl/tst-cond4.c: Include stdint.h.
	* nptl/tst-cond6.c: Include stdint.h.
	* nptl/tst-stack2.c: Include limits.h.
	* nptl/tst-stackguard1.c: Include stddef.h.
	* nptl/tst-tls4.c: Include stdint.h. Don't include tls.h.
	* nptl/tst-tls4moda.c: Include stddef.h.
	Don't include stdio.h, unistd.h, or tls.h.
	* nptl/tst-tls4modb.c: Include stddef.h.
	Don't include stdio.h, unistd.h, or tls.h.
	* nptl/tst-tls5.h: Include stddef.h. Don't include stdlib.h or tls.h.
	* posix/tst-getaddrinfo2.c: Include stdio.h.
	* posix/tst-getaddrinfo5.c: Include stdio.h.
	* posix/tst-pathconf.c: Include sys/stat.h.
	* posix/tst-posix_fadvise-common.c: Include stdint.h.
	* posix/tst-preadwrite-common.c: Include sys/stat.h.
	* posix/tst-regex.c: Include stdint.h.
	Don't include spawn.h or spawn_int.h.
	* posix/tst-regexloc.c: Don't include spawn.h or spawn_int.h.
	* posix/tst-vfork3.c: Include sys/stat.h.
	* resolv/tst-bug18665-tcp.c: Include stdlib.h.
	* resolv/tst-res_hconf_reorder.c: Include stdlib.h.
	* resolv/tst-resolv-search.c: Include stdlib.h.
	* stdio-common/tst-fmemopen2.c: Include stdint.h.
	* stdio-common/tst-vfprintf-width-prec.c: Include stdlib.h.
	* stdlib/test-canon.c: Include sys/stat.h.
	* stdlib/tst-tls-atexit.c: Include stdbool.h.
	* string/test-memchr.c: Include stdint.h.
	* string/tst-cmp.c: Include stdint.h.
	* sysdeps/pthread/tst-timer.c: Include stdint.h.
	* sysdeps/unix/sysv/linux/tst-sync_file_range.c: Include stdint.h.
	* sysdeps/wordsize-64/tst-writev.c: Include limits.h and stdint.h.
	* sysdeps/x86_64/fpu/math-tests-arch.h: Include cpu-features.h.
	Don't include init-arch.h.
	* sysdeps/x86_64/multiarch/test-multiarch.h: Include cpu-features.h.
	Don't include init-arch.h.
	* sysdeps/x86_64/tst-auditmod10b.c: Include link.h and stddef.h.
	* sysdeps/x86_64/tst-auditmod3b.c: Include link.h and stddef.h.
	* sysdeps/x86_64/tst-auditmod4b.c: Include link.h and stddef.h.
	* sysdeps/x86_64/tst-auditmod5b.c: Include link.h and stddef.h.
	* sysdeps/x86_64/tst-auditmod6b.c: Include link.h and stddef.h.
	* sysdeps/x86_64/tst-auditmod6c.c: Include link.h and stddef.h.
	* sysdeps/x86_64/tst-auditmod7b.c: Include link.h and stddef.h.
	* time/clocktest.c: Include stdint.h.
	* time/tst-posixtz.c: Include stdint.h.
	* timezone/tst-timezone.c: Include stdint.h.

2017-02-16  Zack Weinberg  <zackw@panix.com>

	* string/string.h [__USE_MISC]: Include strings.h.
	(__bzero, bcmp, bcopy, bzero, index, rindex)
	(strcasecmp, strncasecmp, strcasecmp_l, strncasecmp_l)
	(ffs, ffsl, ffsll): Don't declare.
	* string/strings.h: Do not suppress the file if string.h has
	already been included.
	(bcmp, bcopy, bzero, strcasecmp, strncasecmp): Add __nonnull
	annotations.
	(index, rindex): Define inline forwarders even if
	__CORRECT_ISO_CPP_STRING_H_PROTO is defined.
	(ffs): Use __attribute_const__.
	(ffsl, ffsll): Declare here.
	(strcasecmp_l, strncasecmp_l): Correct comments; these functions
	have now been standardized.
	* include/string.h (__bzero): Declare here.

	* bits/types.h: Move to posix/bits.
	* include/bits/types.h: New wrapper.

2017-02-15  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/bits/string2.h (strcmp): Remove define.
	(__strcmp_cg): Likewise.
	(strncmp): Likewise.

2017-02-15  Wilco Dijkstra  <wdijkstr@arm.com>

	* include/string.h: Add __cplusplus check.

2017-02-15  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	[BZ #21134]
	* sysdeps/ieee754/dbl-64/e_j0.c (__ieee754_y0): Raise the
	"divide by zero" exception when the input is zero.
	* sysdeps/ieee754/dbl-64/e_j1.c (__ieee754_y1): Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c (__ieee754_y0f): Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c (__ieee754_y1f): Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c (__ieee754_y0l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_y1l): Likewise.

2017-02-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86_64/fpu/test-double-vlen2.c: Move most contents to,
	and include ...
	* sysdeps/x86_64/fpu/test-double-vlen2.h: ... here.  New file.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2.c: Move most contents
	to, and include ...
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2.h: ... here.  New
	file.
	* sysdeps/x86_64/fpu/test-double-vlen4.c: Move most contents to,
	and include ...
	* sysdeps/x86_64/fpu/test-double-vlen4.h: ... here.  New file.
	* sysdeps/x86_64/fpu/test-double-vlen8.c: Move most contents to,
	and include ...
	* sysdeps/x86_64/fpu/test-double-vlen8.h: ... here.  New file.
	* sysdeps/x86_64/fpu/test-float-vlen16.c: Move most contents to,
	and include ...
	* sysdeps/x86_64/fpu/test-float-vlen16.h: ... here.  New file.
	* sysdeps/x86_64/fpu/test-float-vlen4.c: Move most contents to,
	and include ...
	* sysdeps/x86_64/fpu/test-float-vlen4.h: ... here.  New file.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2.c: Move most contents
	to, and include ...
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2.h: ... here.  New file.
	* sysdeps/x86_64/fpu/test-float-vlen8.c: Move most contents to,
	and include ...
	* sysdeps/x86_64/fpu/test-float-vlen8.h: ... here.  New file.

2017-02-14  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test-support.h: Do not include <math-tests-arch.h>
	here.
	* math/libm-test-support.c (libm_test_init): Do not call
	INIT_ARCH_EXT here.
	* math/libm-test-driver.c: Include <math-tests-arch.h>.
	(main): Call INIT_ARCH_EXT.

2017-02-12  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	[BZ #21130]
	* sysdeps/ieee754/ldbl-128/e_j0l.c (__ieee754_y0l): Return NAN
	with the "invalid" exception raised when x is -Inf.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_y1l): Likewise.

2017-02-10  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/bits/string2.h (strchr): Remove define.

2017-02-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Makefile (tests): Add tst-sse, tst-avx and
	tst-avx512.
	(test-extras): Add tst-avx-aux and tst-avx512-aux.
	(extra-test-objs): Add tst-avx-aux.o and tst-avx512-aux.o.
	(modules-names): Add tst-ssemod, tst-avxmod and tst-avx512mod.
	($(objpfx)tst-sse): New rule.
	($(objpfx)tst-avx): Likewise.
	($(objpfx)tst-avx512): Likewise.
	(CFLAGS-tst-avx-aux.c): New.
	(CFLAGS-tst-avxmod.c): Likewise.
	(CFLAGS-tst-avx512-aux.c): Likewise.
	(CFLAGS-tst-avx512mod.c): Likewise.
	* sysdeps/x86_64/tst-avx-aux.c: New file.
	* sysdeps/x86_64/tst-avx.c: Likewise.
	* sysdeps/x86_64/tst-avx512-aux.c: Likewise.
	* sysdeps/x86_64/tst-avx512.c: Likewise.
	* sysdeps/x86_64/tst-avx512mod.c: Likewise.
	* sysdeps/x86_64/tst-avxmod.c: Likewise.
	* sysdeps/x86_64/tst-sse.c: Likewise.
	* sysdeps/x86_64/tst-ssemod.c: Likewise.

2017-02-09  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of csin and csinh.
	* math/auto-libm-test-out-csin: Regenerated.
	* math/auto-libm-test-out-csinh: Likewise.
	* math/libm-test-csin.inc (csin_test_data): Remove tests moved to
	auto-libm-test-in.
	* math/libm-test-csinh.inc (csinh_test_data): Likewise.

2017-02-09  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/Makefile (libm-compat-calls-ldouble-yes): Merge into
	libm-compat-calls-auto.
	(libm-compat-calls): Likewise.
	(libm-compat-calls-auto): Rename to libm-compat-calls and add
	w_lgamma_compatF and k_standardF (merged from the items above).
	(libm-routines): Use libm-compat-calls, instead of
	libm-compat-calls-auto, with type-foreach.

2017-02-09  Joseph Myers  <joseph@codesourcery.com>

	* math/test-math-inline.h (__LIBC_INTERNAL_MATH_INLINES): Undefine
	macro.
	* math/Makefile (CPPFLAGS-test-ifloat.c): Rename to ...
	(CFLAGS-test-ifloat.c): ... this.  Remove
	-U__LIBC_INTERNAL_MATH_INLINES.
	* math/Makefile (CPPFLAGS-test-idouble.c): Rename to ...
	(CFLAGS-test-idouble.c): ... this.  Remove
	-U__LIBC_INTERNAL_MATH_INLINES.
	* math/Makefile (CPPFLAGS-test-ildouble.c): Rename to ...
	(CFLAGS-test-ildouble.c): ... this.  Remove
	-U__LIBC_INTERNAL_MATH_INLINES.

2017-02-08  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test-support.c: New file.  Content from
	math/libm-test-driver.c.
	* math/libm-test-support.h: Likewise.
	* math/libm-test-support-double.c: New file.
	* math/libm-test-support-float.c: Likewise.
	* math/libm-test-support-ldouble.c: Likewise.
	* math/libm-test-driver.c: Remove main comment and header
	includes.  Include libm-test-support.h.
	[!_GNU_SOURCE] (_GNU_SOURCE): Do not define.
	(flag_test_errno): Remove static.
	(flag_test_exceptions): Likewise.
	(flag_test_finite): Likewise.
	(flag_test_inline): Likewise.
	(flag_test_mathvec): Likewise.
	(test_msg): Likewise.
	(NO_EXCEPTION): Remove.
	(INVALID_EXCEPTION): Likewise.
	(DIVIDE_BY_ZERO_EXCEPTION): Likewise.
	(OVERFLOW_EXCEPTION): Likewise.
	(UNDERFLOW_EXCEPTION): Likewise.
	(INEXACT_EXCEPTION): Likewise.
	(INVALID_EXCEPTION_OK): Likewise.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(UNDERFLOW_EXCEPTION_OK): Likewise.
	(NO_INEXACT_EXCEPTION): Likewise.
	(EXCEPTIONS_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(TEST_NAN_SIGN): Likewise.
	(TEST_NAN_PAYLOAD): Likewise.
	(NO_TEST_INLINE): Likewise.
	(XFAIL_TEST): Likewise.
	(ERRNO_UNCHANGED): Likewise.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(IGNORE_RESULT): Likewise.
	(NON_FINITE): Likewise.
	(TEST_SNAN): Likewise.
	(NO_TEST_MATHVEC): Likewise.
	(__CONCATX): Likewise.
	(TYPE_MIN): Likewise.
	(TYPE_TRUE_MIN): Likewise.
	(TYPE_MAX): Likewise.
	(MIN_EXP): Likewise.
	(MAX_EXP): Likewise.
	(MANT_DIG): Likewise.
	(FSTR_MAX): Likewise.
	(ulp_idx): Likewise.
	(qtype_str): Remove static.
	(TEST_COND_binary32): Remove.
	(TEST_COND_binary64): Likewise.
	(TEST_COND_binary128): Likewise.
	(TEST_COND_ibm128): Likewise.
	(TEST_COND_intel96): Likewise.
	(TEST_COND_m68k96): Likewise.
	(TEST_COND_ibm128_libgcc): Likewise.
	(XFAIL_IBM128_LIBGCC): Likewise.
	(PAYLOAD_DIG): Likewise.
	(UNDERFLOW_EXCEPTION_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_OK_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_DOUBLE): Likewise.
	(UNDERFLOW_EXCEPTION_OK_DOUBLE): Likewise.
	(UNDERFLOW_EXCEPTION_LDOUBLE_IBM): Likewise.
	(UNDERFLOW_EXCEPTION_BEFORE_ROUNDING): Likewise.
	(TEST_COND_long32): Likewise.
	(TEST_COND_long64): Likewise.
	(TEST_COND_before_rounding): Likewise.
	(TEST_COND_after_rounding): Likewise.
	(ulps_file_name): Likewise.
	(ulps_file): Likewise.
	(output_ulps): Likewise.
	(output_dir): Likewise.
	(noErrors): Likewise.
	(noTests): Likewise.
	(noExcTests): Likewise.
	(noErrnoTests): Likewise.
	(verbose): Likewise.
	(output_max_error): Likewise.
	(output_points): Likewise.
	(ignore_max_ulp): Likewise.
	(max_error): Likewise.
	(real_max_error): Likewise.
	(imag_max_error): Likewise.
	(prev_max_error): Likewise.
	(prev_real_max_error): Likewise.
	(prev_imag_max_error): Likewise.
	(max_valid_error): Likewise.
	(TYPE_DECIMAL_DIG): Likewise.
	(TYPE_HEX_DIG): Likewise.
	(fmt_ftostr): Likewise.
	(compare_ulp_data): Likewise.
	(find_ulps): Likewise.
	(init_max_error): Likewise.
	(set_max_error): Likewise.
	(print_float): Likewise.
	(print_screen): Likewise.
	(print_screen_max_error): Likewise.
	(update_stats): Likewise.
	(print_function_ulps): Likewise.
	(print_complex_function_ulps): Likewise.
	(fpstack_test): Likewise.
	(print_max_error): Likewise.
	(print_complex_max_error): Likewise.
	(test_single_exception): Likewise.
	(test_exceptions): Likewise.
	(test_single_errno): Likewise.
	(test_errno): Likewise.
	(ULPDIFF): Likewise.
	(ulp): Likewise.
	(check_float_internal): Likewise.
	(check_float): Likewise.
	(check_complex): Likewise.
	(check_int): Likewise.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(check_intmax_t): Likewise.
	(check_uintmax_t): Likewise.
	(enable_test): Likewise.
	(matherr): Likewise.
	(initialize): Likewise.
	(options): Likewise.
	(doc): Remove static.
	(argp): Likewise.
	(parse_opt): Remove.
	(check_ulp): Likewise.
	(libm_test_init): Likewise.
	(libm_test_finish): Likewise.
	* math/Makefile (libm-test-support): New variable.
	(test-extras): Add libm-test-support files.
	(extra-test-objs): Likewise.
	(CFLAGS-libm-test-support-float.c): New variable.
	(CFLAGS-libm-test-support-double.c): Likewise.
	(CFLAGS-libm-test-support-ldouble.c): Likewise.
	($(addprefix $(objpfx),$(libm-tests)): Depend on appropriate
	libm-test-support objects.

2017-02-08  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/Makefile (libm-calls): Move w_exp...
	(libm-compat-calls-auto): Here.

	* math/w_expl.c: Add suffix "_compat" to filename.
	* sysdeps/ia64/fpu/w_expl.c: Likewise.
	* sysdeps/ia64/fpu/w_expf.c: Likewise.
	* sysdeps/ia64/fpu/w_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/w_exp.c: Likewise.
	* sysdeps/ieee754/flt-32/w_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c: Likewise.

	* math/w_expl_compat.c: New file, copied from above.
	* sysdeps/ia64/fpu/w_exp_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_expf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_expl_compat.c: Likewise.
	* sysdeps/ieee754/dbl-64/w_exp_compat.c: Likewise.
	* sysdeps/ieee754/flt-32/w_expf_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/w_expl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl_compat.c: Likewise.

	* sysdeps/ieee754/ldbl-64-128/w_expl.c: Add suffix "_compat"
	to filename.
	* sysdeps/ieee754/ldbl-opt/w_exp.c: Likewise.

	* sysdeps/ieee754/ldbl-64-128/w_expl_compat.c: New file,
	copied from above and adjusted for the new filenames.
	* sysdeps/ieee754/ldbl-opt/w_exp_compat.c: Likewise.

2017-02-08  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/Makefile (libm-calls): Move w_lgammaF...
	(libm-compat-calls-auto): Here.

	* math/w_lgamma.c: Add suffix "_compat2" to filename.
	* math/w_lgammaf.c: Likewise.
	* math/w_lgammal.c: Likewise.

	* math/w_lgamma_compat2.c: New file, copied from above.
	* math/w_lgammaf_compat2.c: Likewise.
	* math/w_lgammal_compat2.c: Likewise.

2017-02-08  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/Makefile (libm-calls): Move w_lgammaF_r...
	(libm-compat-calls-auto): Here.

	* math/w_lgamma_r.c: Add suffix "_compat" to filename.
	* math/w_lgammaf_r.c: Likewise.
	* math/w_lgammal_r.c: Likewise.
	* sysdeps/ia64/fpu/w_lgammal_r.c: Likewise.
	* sysdeps/ia64/fpu/w_lgammaf_r.c: Likewise.
	* sysdeps/ia64/fpu/w_lgamma_r.c: Likewise.

	* math/w_lgamma_r_compat.c: New file, copied from above.
	* math/w_lgammaf_r_compat.c: Likewise.
	* math/w_lgammal_r_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_lgamma_r_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_lgammaf_r_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_lgammal_r_compat.c: Likewise.

	* sysdeps/ieee754/ldbl-opt/w_lgamma_r.c: Add suffix "_compat"
	to filename.
	* sysdeps/ieee754/ldbl-opt/w_lgammal_r.c: Likewise.

	* sysdeps/ieee754/ldbl-opt/w_lgamma_r_compat.c: New file
	copied from above and adjusted for the new filenames.
	* sysdeps/ieee754/ldbl-opt/w_lgammal_r_compat.c: Likewise.

2017-02-08  Yury Norov  <ynorov@caviumnetworks.com>

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: use PTR_REG() for offset
	calculation in SYSCALL_ERROR_HANDLER().

2017-02-08  Rical Jasan  <ricaljasan@pacific.net>

	* manual/contrib.texi: Fix typo.

2017-02-08  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	[BZ #21109]
	* elf/dl-tunable-types.h (tunable_callback_t): Accept
	tunable_val_t as argument.
	* elf/dl-tunables.c (__tunable_set_val): Add comment.
	* malloc/arena.c (set_mallopt_check): Take tunable_val_t as
	argument.
	(DL_TUNABLE_CALLBACK_FNDECL): Likewise.

2017-02-08  Kir Kolyshkin  <kir@openvz.org>

	* sysdeps/unix/sysv/linux/aarch64/sys/ptrace.h (__ptrace_eventcodes):
	Add PTRACE_EVENT_STOP.
	* sysdeps/unix/sysv/linux/ia64/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sys/ptrace.h: Likewise.

2017-02-07  Joseph Myers  <joseph@codesourcery.com>

	* math/test-math-finite.h (TEST_EXCEPTIONS): New macro.
	* math/test-math-no-finite.h (TEST_EXCEPTIONS): Likewise.
	* math/test-math-vector.h (TEST_EXCEPTIONS): Likewise.
	* math/test-math-no-inline.h (TEST_EXCEPTIONS): Remove macro.
	* math/test-double-vlen2.h (EXCEPTION_TESTS_double): Likewise.
	* math/test-double-vlen4.h (EXCEPTION_TESTS_double): Likewise.
	* math/test-double-vlen8.h (EXCEPTION_TESTS_double): Likewise.
	* math/test-float-vlen4.h (EXCEPTION_TESTS_float): Likewise.
	* math/test-float-vlen8.h (EXCEPTION_TESTS_float): Likewise.
	* math/test-float-vlen16.h (EXCEPTION_TESTS_float): Likewise.

	[BZ #21112]
	* sysdeps/ieee754/flt-32/e_powf.c (cp_h): Use value with trailing
	12 bits zero.
	(cp_l): Update for new value of cp_h.
	* math/auto-libm-test-in: Add another test of pow.
	* math/auto-libm-test-out-pow: Regenerated.

2017-02-07  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* manual/contrib.texi: Fix typo.

2017-02-07  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	[BZ #15998]
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure.ac
	(arch_minimum_kernel): Set as 3.10.0 for ppc64le.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure: Regenerate.

2017-02-07  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/strcasestr-power8.S: Redefine
	STRCHR as __strchr_power8.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-power8.c: Redefine
	strlen as __strlen_power8.

2017-02-07  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/strcmp.S: Adjust address for
	unaligned load for shorter strings.
	* sysdeps/powerpc/powerpc64/power9/strcmp.S: Likewise.

2017-02-06  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test-driver.c (flag_test_errno): New variable.
	(flag_test_exceptions): Likewise.
	(flag_test_finite): Likewise.
	(flag_test_inline): Likewise.
	(flag_test_mathvec): Likewise.
	(test_msg): Likewise.
	(ulp_idx): Likewise.
	(qtype_str): Likewise.
	(ULP_IDX): Remove macro.
	(QTYPE_STR): Likewise.
	(find_ulps): Use ulp_idx not ULP_IDX.
	(print_function_ulps): Use qtype_str, printed with %s, not
	QTYPE_STR, printed with concatentation to format string.
	(print_complex_function_ulps): Likewise.
	(test_exceptions): Use flag_test_exceptions not TEST_EXCEPTIONS.
	(test_errno): Use flag_test_errno not TEST_ERRNO.
	(enable_test): Use flag_test_inline, flag_test_finite and
	flag_test_mathvec instead of TEST_INLINE, TEST_FINITE and
	TEST_MATHVEC.
	(libm_test_init): New function.  Factored out of main.
	(libm_test_finish): Likewise.
	(main): Call libm_test_init and libm_test_finish and move most
	code to those functions.

	* math/libm-test-driver.c (STRX): New macro.
	(STR): Likewise.
	(STR_FLOAT): Likewise.
	(STR_VEC_LEN): Likewise.
	(TEST_MSG): Likewise.  Define here instead of expecting to be
	defined by including file.
	* math/test-double-finite.c (TEST_MSG): Remove macro.
	* math/test-double-vlen2.h (TEST_MSG): Likewise.
	* math/test-double-vlen4.h (TEST_MSG): Likewise.
	* math/test-double-vlen8.h (TEST_MSG): Likewise.
	* math/test-double.c (TEST_MSG): Likewise.
	* math/test-float-finite.c (TEST_MSG): Likewise.
	* math/test-float-vlen16.h (TEST_MSG): Likewise.
	* math/test-float-vlen4.h (TEST_MSG): Likewise.
	* math/test-float-vlen8.h (TEST_MSG): Likewise.
	* math/test-float.c (TEST_MSG): Likewise.
	* math/test-idouble.c (TEST_MSG): Likewise.
	* math/test-ifloat.c (TEST_MSG): Likewise.
	* math/test-ildouble.c (TEST_MSG): Likewise.
	* math/test-ldouble-finite.c (TEST_MSG): Likewise.
	* math/test-ldouble.c (TEST_MSG): Likewise.

	* math/libm-test.inc: Move all tests of individual functions to
	libm-test-*.inc and #include libm-test-*.c files.
	(acos_test_data): Remove.
	(acos_test): Likewise.
	(acosh_test_data): Likewise.
	(acosh_test): Likewise.
	(asin_test_data): Likewise.
	(asin_test): Likewise.
	(asinh_test_data): Likewise.
	(asinh_test): Likewise.
	(atan_test_data): Likewise.
	(atan_test): Likewise.
	(atanh_test_data): Likewise.
	(atanh_test): Likewise.
	(atan2_test_data): Likewise.
	(atan2_test): Likewise.
	(cabs_test_data): Likewise.
	(cabs_test): Likewise.
	(cacos_test_data): Likewise.
	(cacos_test): Likewise.
	(cacosh_test_data): Likewise.
	(cacosh_test): Likewise.
	(canonicalize_test_data): Likewise.
	(canonicalize_test): Likewise.
	(carg_test_data): Likewise.
	(carg_test): Likewise.
	(casin_test_data): Likewise.
	(casin_test): Likewise.
	(casinh_test_data): Likewise.
	(casinh_test): Likewise.
	(catan_test_data): Likewise.
	(catan_test): Likewise.
	(catanh_test_data): Likewise.
	(catanh_test): Likewise.
	(cbrt_test_data): Likewise.
	(cbrt_test): Likewise.
	(ccos_test_data): Likewise.
	(ccos_test): Likewise.
	(ccosh_test_data): Likewise.
	(ccosh_test): Likewise.
	(ceil_test_data): Likewise.
	(ceil_test): Likewise.
	(cexp_test_data): Likewise.
	(cexp_test): Likewise.
	(cimag_test_data): Likewise.
	(cimag_test): Likewise.
	(clog_test_data): Likewise.
	(clog_test): Likewise.
	(clog10_test_data): Likewise.
	(clog10_test): Likewise.
	(conj_test_data): Likewise.
	(conj_test): Likewise.
	(copysign_test_data): Likewise.
	(copysign_test): Likewise.
	(cos_test_data): Likewise.
	(cos_test): Likewise.
	(cosh_test_data): Likewise.
	(cosh_test): Likewise.
	(cpow_test_data): Likewise.
	(cpow_test): Likewise.
	(cproj_test_data): Likewise.
	(cproj_test): Likewise.
	(creal_test_data): Likewise.
	(creal_test): Likewise.
	(csin_test_data): Likewise.
	(csin_test): Likewise.
	(csinh_test_data): Likewise.
	(csinh_test): Likewise.
	(csqrt_test_data): Likewise.
	(csqrt_test): Likewise.
	(ctan_test_data): Likewise.
	(ctan_test): Likewise.
	(ctanh_test_data): Likewise.
	(ctanh_test): Likewise.
	(erf_test_data): Likewise.
	(erf_test): Likewise.
	(erfc_test_data): Likewise.
	(erfc_test): Likewise.
	(exp_test_data): Likewise.
	(exp_test): Likewise.
	(exp10_test_data): Likewise.
	(exp10_test): Likewise.
	(pow10_test): Likewise.
	(exp2_test_data): Likewise.
	(exp2_test): Likewise.
	(expm1_test_data): Likewise.
	(expm1_test): Likewise.
	(fabs_test_data): Likewise.
	(fabs_test): Likewise.
	(fdim_test_data): Likewise.
	(fdim_test): Likewise.
	(floor_test_data): Likewise.
	(floor_test): Likewise.
	(fma_test_data): Likewise.
	(fma_test): Likewise.
	(fmax_test_data): Likewise.
	(fmax_test): Likewise.
	(fmaxmag_test_data): Likewise.
	(fmaxmag_test): Likewise.
	(fmin_test_data): Likewise.
	(fmin_test): Likewise.
	(fminmag_test_data): Likewise.
	(fminmag_test): Likewise.
	(fmod_test_data): Likewise.
	(fmod_test): Likewise.
	(fpclassify_test_data): Likewise.
	(fpclassify_test): Likewise.
	(frexp_test_data): Likewise.
	(frexp_test): Likewise.
	(fromfp_test_data): Likewise.
	(fromfp_test): Likewise.
	(fromfpx_test_data): Likewise.
	(fromfpx_test): Likewise.
	(getpayload_test_data): Likewise.
	(getpayload_test): Likewise.
	(hypot_test_data): Likewise.
	(hypot_test): Likewise.
	(ilogb_test_data): Likewise.
	(ilogb_test): Likewise.
	(iscanonical_test_data): Likewise.
	(iscanonical_test): Likewise.
	(iseqsig_test_data): Likewise.
	(iseqsig_test): Likewise.
	(isfinite_test_data): Likewise.
	(isfinite_test): Likewise.
	(finite_test): Likewise.
	(isgreater_test_data): Likewise.
	(isgreater_test): Likewise.
	(isgreaterequal_test_data): Likewise.
	(isgreaterequal_test): Likewise.
	(isinf_test_data): Likewise.
	(isinf_test): Likewise.
	(isless_test_data): Likewise.
	(isless_test): Likewise.
	(islessequal_test_data): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test_data): Likewise.
	(islessgreater_test): Likewise.
	(isnan_test_data): Likewise.
	(isnan_test): Likewise.
	(isnormal_test_data): Likewise.
	(isnormal_test): Likewise.
	(issignaling_test_data): Likewise.
	(issignaling_test): Likewise.
	(issubnormal_test_data): Likewise.
	(issubnormal_test): Likewise.
	(isunordered_test_data): Likewise.
	(isunordered_test): Likewise.
	(iszero_test_data): Likewise.
	(iszero_test): Likewise.
	(j0_test_data): Likewise.
	(j0_test): Likewise.
	(j1_test_data): Likewise.
	(j1_test): Likewise.
	(jn_test_data): Likewise.
	(jn_test): Likewise.
	(lgamma_test_data): Likewise.
	(lgamma_test): Likewise.
	(gamma_test): Likewise.
	(llogb_test_data): Likewise.
	(llogb_test): Likewise.
	(lrint_test_data): Likewise.
	(lrint_test): Likewise.
	(llrint_test_data): Likewise.
	(llrint_test): Likewise.
	(log_test_data): Likewise.
	(log_test): Likewise.
	(log10_test_data): Likewise.
	(log10_test): Likewise.
	(log1p_test_data): Likewise.
	(log1p_test): Likewise.
	(log2_test_data): Likewise.
	(log2_test): Likewise.
	(logb_test_data): Likewise.
	(logb_test): Likewise.
	(lround_test_data): Likewise.
	(lround_test): Likewise.
	(llround_test_data): Likewise.
	(llround_test): Likewise.
	(modf_test_data): Likewise.
	(modf_test): Likewise.
	(nearbyint_test_data): Likewise.
	(nearbyint_test): Likewise.
	(nextafter_test_data): Likewise.
	(nextafter_test): Likewise.
	(nextup_test_data): Likewise.
	(nextup_test): Likewise.
	(nextdown_test_data): Likewise.
	(nextdown_test): Likewise.
	(nexttoward_test_data): Likewise.
	(nexttoward_test): Likewise.
	(pow_test_data): Likewise.
	(pow_test): Likewise.
	(remainder_test_data): Likewise.
	(remainder_test): Likewise.
	(drem_test): Likewise.
	(remquo_test_data): Likewise.
	(remquo_test): Likewise.
	(rint_test_data): Likewise.
	(rint_test): Likewise.
	(round_test_data): Likewise.
	(round_test): Likewise.
	(roundeven_test_data): Likewise.
	(roundeven_test): Likewise.
	(scalb_test_data): Likewise.
	(scalb_test): Likewise.
	(scalbn_test_data): Likewise.
	(scalbn_test): Likewise.
	(ldexp_test): Likewise.
	(scalbln_test_data): Likewise.
	(scalbln_test): Likewise.
	(setpayload_test_data): Likewise.
	(setpayload_test): Likewise.
	(setpayloadsig_test_data): Likewise.
	(setpayloadsig_test): Likewise.
	(signbit_test_data): Likewise.
	(signbit_test): Likewise.
	(sin_test_data): Likewise.
	(sin_test): Likewise.
	(sincos_test_data): Likewise.
	(sincos_test): Likewise.
	(sinh_test_data): Likewise.
	(sinh_test): Likewise.
	(sqrt_test_data): Likewise.
	(sqrt_test): Likewise.
	(tan_test_data): Likewise.
	(tan_test): Likewise.
	(tanh_test_data): Likewise.
	(tanh_test): Likewise.
	(tgamma_test_data): Likewise.
	(tgamma_test): Likewise.
	(totalorder_test_data): Likewise.
	(totalorder_test): Likewise.
	(totalordermag_test_data): Likewise.
	(totalordermag_test): Likewise.
	(trunc_test_data): Likewise.
	(trunc_test): Likewise.
	(ufromfp_test_data): Likewise.
	(ufromfp_test): Likewise.
	(ufromfpx_test_data): Likewise.
	(ufromfpx_test): Likewise.
	(y0_test_data): Likewise.
	(y0_test): Likewise.
	(y1_test_data): Likewise.
	(y1_test): Likewise.
	(yn_test_data): Likewise.
	(yn_test): Likewise.
	(significand_test_data): Likewise.
	(significand_test): Likewise.
	* math/Makefile (auto-libm-test-out-files): Remove variable.
	(libm-test-funcs-noauto): New variable.
	(libm-test-funcs-all): Likewise.
	(libm-test-c-auto): Likewise.
	(libm-test-c-noauto): Likewise.
	(libm-tests-generated): Add $(libm-test-c-auto) and
	$(libm-test-c-noauto).
	(generated): Do not add auto-libm-test-out.
	(libm-test-c-auto-obj): New variable.
	(libm-test-c-noauto-obj): Likewise.
	($(objpfx)libm-test.c): Do not generate or use auto-libm-test-out.
	($(libm-test-c-noauto-obj)): New static pattern rule.
	($(libm-test-c-auto-obj)): Likewise.
	(libm-test-incs): New variable.
	($(objpfx)libm-have-vector-test.h): Depend on $(libm-test-incs)
	and pass it to gen-libm-have-vector-test.sh.
	* math/gen-libm-have-vector-test.sh: Expect list of .inc files to
	be passed on command line.
	* math/libm-test-acos.inc: New file.  Content from
	math/libm-test.inc.
	* math/libm-test-acosh.inc: Likewise.
	* math/libm-test-asin.inc: Likewise.
	* math/libm-test-asinh.inc: Likewise.
	* math/libm-test-atan.inc: Likewise.
	* math/libm-test-atan2.inc: Likewise.
	* math/libm-test-atanh.inc: Likewise.
	* math/libm-test-cabs.inc: Likewise.
	* math/libm-test-cacos.inc: Likewise.
	* math/libm-test-cacosh.inc: Likewise.
	* math/libm-test-canonicalize.inc: Likewise.
	* math/libm-test-carg.inc: Likewise.
	* math/libm-test-casin.inc: Likewise.
	* math/libm-test-casinh.inc: Likewise.
	* math/libm-test-catan.inc: Likewise.
	* math/libm-test-catanh.inc: Likewise.
	* math/libm-test-cbrt.inc: Likewise.
	* math/libm-test-ccos.inc: Likewise.
	* math/libm-test-ccosh.inc: Likewise.
	* math/libm-test-ceil.inc: Likewise.
	* math/libm-test-cexp.inc: Likewise.
	* math/libm-test-cimag.inc: Likewise.
	* math/libm-test-clog.inc: Likewise.
	* math/libm-test-clog10.inc: Likewise.
	* math/libm-test-conj.inc: Likewise.
	* math/libm-test-copysign.inc: Likewise.
	* math/libm-test-cos.inc: Likewise.
	* math/libm-test-cosh.inc: Likewise.
	* math/libm-test-cpow.inc: Likewise.
	* math/libm-test-cproj.inc: Likewise.
	* math/libm-test-creal.inc: Likewise.
	* math/libm-test-csin.inc: Likewise.
	* math/libm-test-csinh.inc: Likewise.
	* math/libm-test-csqrt.inc: Likewise.
	* math/libm-test-ctan.inc: Likewise.
	* math/libm-test-ctanh.inc: Likewise.
	* math/libm-test-erf.inc: Likewise.
	* math/libm-test-erfc.inc: Likewise.
	* math/libm-test-exp.inc: Likewise.
	* math/libm-test-exp10.inc: Likewise.
	* math/libm-test-exp2.inc: Likewise.
	* math/libm-test-expm1.inc: Likewise.
	* math/libm-test-fabs.inc: Likewise.
	* math/libm-test-fdim.inc: Likewise.
	* math/libm-test-floor.inc: Likewise.
	* math/libm-test-fma.inc: Likewise.
	* math/libm-test-fmax.inc: Likewise.
	* math/libm-test-fmaxmag.inc: Likewise.
	* math/libm-test-fmin.inc: Likewise.
	* math/libm-test-fminmag.inc: Likewise.
	* math/libm-test-fmod.inc: Likewise.
	* math/libm-test-fpclassify.inc: Likewise.
	* math/libm-test-frexp.inc: Likewise.
	* math/libm-test-fromfp.inc: Likewise.
	* math/libm-test-fromfpx.inc: Likewise.
	* math/libm-test-getpayload.inc: Likewise.
	* math/libm-test-hypot.inc: Likewise.
	* math/libm-test-ilogb.inc: Likewise.
	* math/libm-test-iscanonical.inc: Likewise.
	* math/libm-test-iseqsig.inc: Likewise.
	* math/libm-test-isfinite.inc: Likewise.
	* math/libm-test-isgreater.inc: Likewise.
	* math/libm-test-isgreaterequal.inc: Likewise.
	* math/libm-test-isinf.inc: Likewise.
	* math/libm-test-isless.inc: Likewise.
	* math/libm-test-islessequal.inc: Likewise.
	* math/libm-test-islessgreater.inc: Likewise.
	* math/libm-test-isnan.inc: Likewise.
	* math/libm-test-isnormal.inc: Likewise.
	* math/libm-test-issignaling.inc: Likewise.
	* math/libm-test-issubnormal.inc: Likewise.
	* math/libm-test-isunordered.inc: Likewise.
	* math/libm-test-iszero.inc: Likewise.
	* math/libm-test-j0.inc: Likewise.
	* math/libm-test-j1.inc: Likewise.
	* math/libm-test-jn.inc: Likewise.
	* math/libm-test-lgamma.inc: Likewise.
	* math/libm-test-llogb.inc: Likewise.
	* math/libm-test-llrint.inc: Likewise.
	* math/libm-test-llround.inc: Likewise.
	* math/libm-test-log.inc: Likewise.
	* math/libm-test-log10.inc: Likewise.
	* math/libm-test-log1p.inc: Likewise.
	* math/libm-test-log2.inc: Likewise.
	* math/libm-test-logb.inc: Likewise.
	* math/libm-test-lrint.inc: Likewise.
	* math/libm-test-lround.inc: Likewise.
	* math/libm-test-modf.inc: Likewise.
	* math/libm-test-nearbyint.inc: Likewise.
	* math/libm-test-nextafter.inc: Likewise.
	* math/libm-test-nextdown.inc: Likewise.
	* math/libm-test-nexttoward.inc: Likewise.
	* math/libm-test-nextup.inc: Likewise.
	* math/libm-test-pow.inc: Likewise.
	* math/libm-test-remainder.inc: Likewise.
	* math/libm-test-remquo.inc: Likewise.
	* math/libm-test-rint.inc: Likewise.
	* math/libm-test-round.inc: Likewise.
	* math/libm-test-roundeven.inc: Likewise.
	* math/libm-test-scalb.inc: Likewise.
	* math/libm-test-scalbln.inc: Likewise.
	* math/libm-test-scalbn.inc: Likewise.
	* math/libm-test-setpayload.inc: Likewise.
	* math/libm-test-setpayloadsig.inc: Likewise.
	* math/libm-test-signbit.inc: Likewise.
	* math/libm-test-significand.inc: Likewise.
	* math/libm-test-sin.inc: Likewise.
	* math/libm-test-sincos.inc: Likewise.
	* math/libm-test-sinh.inc: Likewise.
	* math/libm-test-sqrt.inc: Likewise.
	* math/libm-test-tan.inc: Likewise.
	* math/libm-test-tanh.inc: Likewise.
	* math/libm-test-tgamma.inc: Likewise.
	* math/libm-test-totalorder.inc: Likewise.
	* math/libm-test-totalordermag.inc: Likewise.
	* math/libm-test-trunc.inc: Likewise.
	* math/libm-test-ufromfp.inc: Likewise.
	* math/libm-test-ufromfpx.inc: Likewise.
	* math/libm-test-y0.inc: Likewise.
	* math/libm-test-y1.inc: Likewise.
	* math/libm-test-yn.inc: Likewise.
	* math/README.libm-test: Update.

	* math/gen-auto-libm-tests.c: Update comment about use of program.
	(generate_output): Add argument FUNCTION.
	(main): Require extra argument.  Pass function name to
	generate_output.
	* math/Makefile (generated): Add auto-libm-test-out.
	(libm-test-funcs-auto): New variable.
	(auto-libm-test-out-files): New variable.
	($(objpfx)libm-test.c): Depend on $(auto-libm-test-out-files).
	Concatenate those files to form $(objpfx)auto-libm-test-out and
	use it as input to gen-libm-test.pl.
	* math/README.libm-test: Update.
	* math/auto-libm-test-out: Remove.
	* math/auto-libm-test-out-acos: New generated file.
	* math/auto-libm-test-out-acosh: Likewise.
	* math/auto-libm-test-out-asin: Likewise.
	* math/auto-libm-test-out-asinh: Likewise.
	* math/auto-libm-test-out-atan: Likewise.
	* math/auto-libm-test-out-atan2: Likewise.
	* math/auto-libm-test-out-atanh: Likewise.
	* math/auto-libm-test-out-cabs: Likewise.
	* math/auto-libm-test-out-carg: Likewise.
	* math/auto-libm-test-out-cbrt: Likewise.
	* math/auto-libm-test-out-ccos: Likewise.
	* math/auto-libm-test-out-ccosh: Likewise.
	* math/auto-libm-test-out-cexp: Likewise.
	* math/auto-libm-test-out-clog: Likewise.
	* math/auto-libm-test-out-clog10: Likewise.
	* math/auto-libm-test-out-cos: Likewise.
	* math/auto-libm-test-out-cosh: Likewise.
	* math/auto-libm-test-out-cpow: Likewise.
	* math/auto-libm-test-out-csin: Likewise.
	* math/auto-libm-test-out-csinh: Likewise.
	* math/auto-libm-test-out-csqrt: Likewise.
	* math/auto-libm-test-out-ctan: Likewise.
	* math/auto-libm-test-out-ctanh: Likewise.
	* math/auto-libm-test-out-erf: Likewise.
	* math/auto-libm-test-out-erfc: Likewise.
	* math/auto-libm-test-out-exp: Likewise.
	* math/auto-libm-test-out-exp10: Likewise.
	* math/auto-libm-test-out-exp2: Likewise.
	* math/auto-libm-test-out-expm1: Likewise.
	* math/auto-libm-test-out-fma: Likewise.
	* math/auto-libm-test-out-hypot: Likewise.
	* math/auto-libm-test-out-j0: Likewise.
	* math/auto-libm-test-out-j1: Likewise.
	* math/auto-libm-test-out-jn: Likewise.
	* math/auto-libm-test-out-lgamma: Likewise.
	* math/auto-libm-test-out-log: Likewise.
	* math/auto-libm-test-out-log10: Likewise.
	* math/auto-libm-test-out-log1p: Likewise.
	* math/auto-libm-test-out-log2: Likewise.
	* math/auto-libm-test-out-pow: Likewise.
	* math/auto-libm-test-out-sin: Likewise.
	* math/auto-libm-test-out-sincos: Likewise.
	* math/auto-libm-test-out-sinh: Likewise.
	* math/auto-libm-test-out-sqrt: Likewise.
	* math/auto-libm-test-out-tan: Likewise.
	* math/auto-libm-test-out-tanh: Likewise.
	* math/auto-libm-test-out-tgamma: Likewise.
	* math/auto-libm-test-out-y0: Likewise.
	* math/auto-libm-test-out-y1: Likewise.
	* math/auto-libm-test-out-yn: Likewise.

	* math/Makefile (generated): Do not include libm-test.stmp.
	($(addprefix $(objpfx), $(libm-tests-generated))): Do not depend
	on $(objpfx)libm-test.stmp.
	($(objpfx)libm-test.stmp): Remove rule.
	($(objpfx)libm-test-ulps.h): New rule.
	($(objpfx)libm-test.c): Likewise.
	($(objpfx)libm-have-vector-test.h): Likewise.
	($(addprefix $(objpfx), $(libm-tests.o)): Depend directly on
	individual generated files, not libm-test.stmp.

	* math/gen-libm-test.pl ($output_dir): Remove variable.
	($srcdir): Likewise.
	($opt_a): New variable.
	($opt_c): Likewise.
	($opt_C): Likewise.
	($opt_H): Likewise.
	(-n): Make option take argument and use it as NewUlps output.
	(-a): New option.  Use its argument for auto-libm-test-out input.
	(-c): New option.  Use its argument for libm-test.inc input.
	(-C): New option.  Use its argument for libm-test.c output.
	(-H): New option.  Use its argument for libm-test-ulps.h output.
	(top level): Only process inputs needed to generate outputs
	specified by command-line options.  Only generate outputs
	specified by command-line options.
	* math/README.libm-test: Update example gen-libm-test.pl command.
	* math/Makefile ($(objpfx)libm-test.stmp): Update gen-libm-test.pl
	commands.
	(regen-ulps): Likewise.

2017-02-06  Wilco Dijkstra  <wdijkstr@arm.com>

	* hurd/path-lookup.c (file_name_path_scan): Rename index to strchr.
	* include/string.h (index): Remove define.
	(rindex): Likewise.
	* misc/getttyent.c (__getttyent): Rename index to strchr.
	* misc/ttyslot.c (ttyslot): Rename rindex to strrchr.
	* sunrpc/rpc_main.c (mkfile_output): Likewise.

2017-02-06  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test-driver.c: New file.  Based on math/libm-test.inc.
	* math/libm-test.inc: Move all contents, other than tests of
	individual functions, to libm-test-driver.c.
	[!FE_TONEAREST] (FE_TONEAREST): Move to libm-test-driver.c.
	[!FE_TOWARDZERO] (FE_TOWARDZERO): Likewise.
	[!FE_UPWARD] (FE_UPWARD): Likewise.
	[!FE_DOWNWARD] (FE_DOWNWARD): Likewise.
	(NO_EXCEPTION): Likewise.
	(INVALID_EXCEPTION): Likewise.
	(DIVIDE_BY_ZERO_EXCEPTION): Likewise.
	(OVERFLOW_EXCEPTION): Likewise.
	(UNDERFLOW_EXCEPTION): Likewise.
	(INEXACT_EXCEPTION): Likewise.
	(INVALID_EXCEPTION_OK): Likewise.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(UNDERFLOW_EXCEPTION_OK): Likewise.
	(NO_INEXACT_EXCEPTION): Likewise.
	(EXCEPTIONS_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(TEST_NAN_SIGN): Likewise.
	(TEST_NAN_PAYLOAD): Likewise.
	(NO_TEST_INLINE): Likewise.
	(XFAIL_TEST): Likewise.
	(ERRNO_UNCHANGED): Likewise.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(IGNORE_RESULT): Likewise.
	(NON_FINITE): Likewise.
	(TEST_SNAN): Likewise.
	(NO_TEST_MATHVEC): Likewise.
	(TEST_NAN_PAYLOAD_CANONICALIZE): Likewise.
	(__CONCATX): Likewise.
	(TYPE_MIN): Likewise.
	(TYPE_TRUE_MIN): Likewise.
	(TYPE_MAX): Likewise.
	(MIN_EXP): Likewise.
	(MAX_EXP): Likewise.
	(MANT_DIG): Likewise.
	(FSTR_MAX): Likewise.
	(ULP_IDX): Likewise.
	(QTYPE_STR): Likewise.
	(TEST_COND_binary32): Likewise.
	(TEST_COND_binary64): Likewise.
	(TEST_COND_binary128): Likewise.
	(TEST_COND_ibm128): Likewise.
	(TEST_COND_intel96): Likewise.
	(TEST_COND_m68k96): Likewise.
	(TEST_COND_ibm128_libgcc): Likewise.
	(XFAIL_IBM128_LIBGCC): Likewise.
	(PAYLOAD_DIG): Likewise.
	(UNDERFLOW_EXCEPTION_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_OK_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_DOUBLE): Likewise.
	(UNDERFLOW_EXCEPTION_OK_DOUBLE): Likewise.
	(UNDERFLOW_EXCEPTION_LDOUBLE_IBM): Likewise.
	(UNDERFLOW_EXCEPTION_BEFORE_ROUNDING): Likewise.
	(TEST_COND_long32): Likewise.
	(TEST_COND_long64): Likewise.
	(TEST_COND_before_rounding): Likewise.
	(TEST_COND_after_rounding): Likewise.
	(lit_pi_3_m_4_d): Likewise.
	(lit_pi_3_m_4_ln10_m_d): Likewise.
	(lit_pi_2_ln10_m_d): Likewise.
	(lit_pi_4_ln10_m_d): Likewise.
	(lit_pi_ln10_d): Likewise.
	(lit_pi_2_d): Likewise.
	(lit_pi_4_d): Likewise.
	(lit_pi): Likewise.
	(lit_e): Likewise.
	(ulps_file_name): Likewise.
	(ulps_file): Likewise.
	(output_ulps): Likewise.
	(output_dir): Likewise.
	(noErrors): Likewise.
	(noTests): Likewise.
	(noExcTests): Likewise.
	(noErrnoTests): Likewise.
	(verbose): Likewise.
	(output_max_error): Likewise.
	(output_points): Likewise.
	(ignore_max_ulp): Likewise.
	(plus_zero): Likewise.
	(minus_zero): Likewise.
	(plus_infty): Likewise.
	(minus_infty): Likewise.
	(qnan_value_pl): Likewise.
	(qnan_value): Likewise.
	(snan_value_pl): Likewise.
	(snan_value): Likewise.
	(max_value): Likewise.
	(min_value): Likewise.
	(min_subnorm_value): Likewise.
	(snan_value_ld): Likewise.
	(max_error): Likewise.
	(real_max_error): Likewise.
	(imag_max_error): Likewise.
	(prev_max_error): Likewise.
	(prev_real_max_error): Likewise.
	(prev_imag_max_error): Likewise.
	(max_valid_error): Likewise.
	(TYPE_DECIMAL_DIG): Likewise.
	(TYPE_HEX_DIG): Likewise.
	(fmt_ftostr): Likewise.
	(compare_ulp_data): Likewise.
	(find_ulps): Likewise.
	(init_max_error): Likewise.
	(set_max_error): Likewise.
	(print_float): Likewise.
	(print_screen): Likewise.
	(print_screen_max_error): Likewise.
	(update_stats): Likewise.
	(print_function_ulps): Likewise.
	(print_complex_function_ulps): Likewise.
	(fpstack_test): Likewise.
	(print_max_error): Likewise.
	(print_complex_max_error): Likewise.
	(test_single_exception): Likewise.
	(test_exceptions): Likewise.
	(test_single_errno): Likewise.
	(test_errno): Likewise.
	(ULPDIFF): Likewise.
	(ulp): Likewise.
	(check_float_internal): Likewise.
	(check_float): Likewise.
	(check_complex): Likewise.
	(check_int): Likewise.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(check_intmax_t): Likewise.
	(check_uintmax_t): Likewise.
	(enable_test): Likewise.
	(struct test_f_f_data): Likewise.
	(struct test_ff_f_data): Likewise.
	(struct test_fj_f_data): Likewise.
	(struct test_fi_f_data): Likewise.
	(struct test_fl_f_data): Likewise.
	(struct test_if_f_data): Likewise.
	(struct test_fff_f_data): Likewise.
	(struct test_fiu_M_data): Likewise.
	(struct test_fiu_U_data): Likewise.
	(struct test_c_f_data): Likewise.
	(struct test_f_f1_data): Likewise.
	(struct test_fF_f1_data): Likewise.
	(struct test_ffI_f1_data): Likewise.
	(struct test_c_c_data): Likewise.
	(struct test_cc_c_data): Likewise.
	(struct test_f_i_data): Likewise.
	(struct test_ff_i_data): Likewise.
	(struct test_f_l_data): Likewise.
	(struct test_f_L_data): Likewise.
	(struct test_fFF_11_data): Likewise.
	(struct test_Ff_b1_data): Likewise.
	(IF_ROUND_INIT_): Likewise.
	(IF_ROUND_INIT_FE_DOWNWARD): Likewise.
	(IF_ROUND_INIT_FE_TONEAREST): Likewise.
	(IF_ROUND_INIT_FE_TOWARDZERO): Likewise.
	(IF_ROUND_INIT_FE_UPWARD): Likewise.
	(ROUND_RESTORE_): Likewise.
	(ROUND_RESTORE_FE_DOWNWARD): Likewise.
	(ROUND_RESTORE_FE_TONEAREST): Likewise.
	(ROUND_RESTORE_FE_TOWARDZERO): Likewise.
	(ROUND_RESTORE_FE_UPWARD): Likewise.
	(RM_): Likewise.
	(RM_FE_DOWNWARD): Likewise.
	(RM_FE_TONEAREST): Likewise.
	(RM_FE_TOWARDZERO): Likewise.
	(RM_FE_UPWARD): Likewise.
	(COMMON_TEST_SETUP): Likewise.
	(EXTRA_OUTPUT_TEST_SETUP): Likewise.
	(COMMON_TEST_CLEANUP): Likewise.
	(EXTRA_OUTPUT_TEST_CLEANUP): Likewise.
	(RUN_TEST_f_f): Likewise.
	(RUN_TEST_LOOP_f_f): Likewise.
	(RUN_TEST_fp_f): Likewise.
	(RUN_TEST_LOOP_fp_f): Likewise.
	(RUN_TEST_2_f): Likewise.
	(RUN_TEST_LOOP_2_f): Likewise.
	(RUN_TEST_ff_f): Likewise.
	(RUN_TEST_LOOP_ff_f): Likewise.
	(RUN_TEST_LOOP_fj_f): Likewise.
	(RUN_TEST_fi_f): Likewise.
	(RUN_TEST_LOOP_fi_f): Likewise.
	(RUN_TEST_fl_f): Likewise.
	(RUN_TEST_LOOP_fl_f): Likewise.
	(RUN_TEST_if_f): Likewise.
	(RUN_TEST_LOOP_if_f): Likewise.
	(RUN_TEST_fff_f): Likewise.
	(RUN_TEST_LOOP_fff_f): Likewise.
	(RUN_TEST_fiu_M): Likewise.
	(RUN_TEST_LOOP_fiu_M): Likewise.
	(RUN_TEST_fiu_U): Likewise.
	(RUN_TEST_LOOP_fiu_U): Likewise.
	(RUN_TEST_c_f): Likewise.
	(RUN_TEST_LOOP_c_f): Likewise.
	(RUN_TEST_f_f1): Likewise.
	(RUN_TEST_LOOP_f_f1): Likewise.
	(RUN_TEST_fF_f1): Likewise.
	(RUN_TEST_LOOP_fF_f1): Likewise.
	(RUN_TEST_fI_f1): Likewise.
	(RUN_TEST_LOOP_fI_f1): Likewise.
	(RUN_TEST_ffI_f1_mod8): Likewise.
	(RUN_TEST_LOOP_ffI_f1_mod8): Likewise.
	(RUN_TEST_Ff_b1): Likewise.
	(RUN_TEST_LOOP_Ff_b1): Likewise.
	(RUN_TEST_Ffp_b1): Likewise.
	(RUN_TEST_LOOP_Ffp_b1): Likewise.
	(RUN_TEST_c_c): Likewise.
	(RUN_TEST_LOOP_c_c): Likewise.
	(RUN_TEST_cc_c): Likewise.
	(RUN_TEST_LOOP_cc_c): Likewise.
	(RUN_TEST_f_i): Likewise.
	(RUN_TEST_LOOP_f_i): Likewise.
	(RUN_TEST_f_i_tg): Likewise.
	(RUN_TEST_LOOP_f_i_tg): Likewise.
	(RUN_TEST_ff_b): Likewise.
	(RUN_TEST_LOOP_ff_b): Likewise.
	(RUN_TEST_ff_i_tg): Likewise.
	(RUN_TEST_LOOP_ff_i_tg): Likewise.
	(RUN_TEST_f_b): Likewise.
	(RUN_TEST_LOOP_f_b): Likewise.
	(RUN_TEST_f_b_tg): Likewise.
	(RUN_TEST_LOOP_f_b_tg): Likewise.
	(RUN_TEST_f_l): Likewise.
	(RUN_TEST_LOOP_f_l): Likewise.
	(RUN_TEST_f_L): Likewise.
	(RUN_TEST_LOOP_f_L): Likewise.
	(RUN_TEST_fFF_11): Likewise.
	(RUN_TEST_LOOP_fFF_11): Likewise.
	(VEC_SUFF): Likewise.
	(STR_CONCAT): Likewise.
	(STR_CON3): Likewise.
	(HAVE_VECTOR): Likewise.
	(START): Likewise.
	(END): Likewise.
	(END_COMPLEX): Likewise.
	(ALL_RM_TEST): Likewise.
	(matherr): Likewise.
	(initialize): Likewise.
	(options): Likewise.
	(doc): Likewise.
	(parse_opt): Likewise.
	(argp): Likewise.
	(check_ulp): Likewise.
	(main): Likewise.
	(do_test): New function.  Call tests of individual functions
	previously called from main.

	* math/libm-test.inc: Remove comment listing functions tested and
	not tested.

2016-02-06  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/allocatestack.c [COLORING_INCREMENT] (nptl_ncreated): Remove.
	(allocate_stack): Remove COLORING_INCREMENT usage.
	* nptl/stack-aliasing.h (COLORING_INCREMENT). Likewise.
	* sysdeps/i386/i686/stack-aliasing.h (COLORING_INCREMENT): Likewise.

2017-02-06  Joseph Myers  <joseph@codesourcery.com>

	* manual/libm-err-tab.pl (@all_functions): Change to
	%all_functions.  Initialize as empty.
	(parse_ulps): Add to %all_functions based on functions found in
	ulps files.  Ignore results for non-default rounding modes and
	vector functions.
	(print_platforms): Use %all_platforms.
	* manual/math.texi (Errors in Math Functions): Document omissions
	from the table.

	* math/Makefile (before-compile): Remove.

2017-02-06  Ivo Raisr <ivo.raisr@oracle.com>

	[BZ #21075]
	* sysdeps/unix/sysv/linux/sparc/sparc64/clone.S (__clone): Remove
	unused assignment.
	* sysdeps/unix/sysv/linux/sparc/sparc32/clone.S (__clone): Likewise.

2017-02-06  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/nptl/lowlevellock.h (lll_trylock, lll_cond_trylock):
	Add __glibc_unlikely hint.

2017-02-06  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #16640]
	* sysdeps/i386/i686/strtok.S: Remove file.
	* sysdeps/i386/i686/strtok_r.S: Likewise.
	* sysdeps/i386/strtok.S: Likewise.
	* sysdeps/i386/strtok_r.S: Likewise.
	* sysdeps/powerpc/powerpc64/strtok.S: Likewise.
	* sysdeps/powerpc/powerpc64/strtok_r.S: Likewise.
	* sysdeps/x86_64/strtok.S: Likewise.
	* sysdeps/x86_64/strtok_r.S: Likewise.

	* sysdeps/unix/sysv/linux/arm/posix_fadvise.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips32/posix_fadvise.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_FADVISE64_AS_64_64): Define.
	* sysdeps/unix/sysv/linux/posix_fadvise.c [__NR_fadvise64]: Add
	!defined __ASSUME_FADVISE64_AS_64_64 to use syscall issue.
	[!__NR_fadvise64 && __ASSUME_FADVISE64_64_6ARG]: Remove
	__ALIGNMENT_ARG usage.
	[!__NR_fadvise64 && !__ASSUME_FADVISE64_64_6ARG]: Define
	__NR_fadvise64_64 if it is not defined.

2017-02-05  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* version.h (RELEASE): Set to "development"
	(VERSION): Set to 2.25.90.
	* NEWS: Add 2.26 section.

	* version.h (RELEASE): Set to "stable"
	(VERSION): Set to 2.25.
	* include/features.h (__GLIBC_MINOR__): Set to 25.

	* manual/contrib.texi: Add more contributors from this release
	and past releases.

	* NEWS (2.25): Add list of bugs fixed.

	* NEWS: Add missing news items.

2017-02-04  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* elf/tst-env-setuid.c (do_execve): Return EXIT_UNSUPPORTED in
	parent if child exited in that manner.  Print WEXITSTATUS
	instead of the raw status.
	(do_test_prep): Rename to do_test.
	(do_test): Return the result of run_executable_sgid.
	(TEST_FUNCTION_ARGV): Adjust.

2017-02-03  Alexandre Oliva  <aoliva@redhat.com>
	    Florian Weimer  <fweimer@redhat.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #20915]
	* elf/dl-reloc.c (_dl_nothread_init_static_tls):
	Do not initialize DTV.
	* nptl/allocatestack.c (init_one_static_tls): Likewise.

2017-02-03  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmax-vis3.S: Remove file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile
	(libm-sysdep_routines): Update.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmax.S: Remove file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile
	(libm-sysdep_routines): Update.

2017-02-02  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/dl-machine.h (elf_machine_rel): Replace
	_dl_fatal_printf with _dl_error_printf for IFUNC relocation
	against unrelocated shared library.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Likewise.

2017-02-02  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/generic/unsecvars.h: Add GLIBC_TUNABLES.
	* elf/tst-env-setuid-tunables.c
	(test_child_tunables)[!HAVE_TUNABLES]: Verify that
	GLIBC_TUNABLES is removed in a setgid process.

	[BZ #21073]
	* elf/dl-tunable-types.h (tunable_seclevel_t): New enum.
	* elf/dl-tunables.c (tunables_strdup): Remove.
	(get_next_env): Also return the previous envp.
	(parse_tunables): Erase tunables of category
	TUNABLES_SECLEVEL_SXID_ERASE.
	(maybe_enable_malloc_check): Make MALLOC_CHECK_
	TUNABLE_SECLEVEL_NONE if /etc/setuid-debug is accessible.
	(__tunables_init)[TUNABLES_FRONTEND ==
	TUNABLES_FRONTEND_valstring]: Update GLIBC_TUNABLES envvar
	after parsing.
	[TUNABLES_FRONTEND != TUNABLES_FRONTEND_valstring]: Erase
	tunable envvars of category TUNABLES_SECLEVEL_SXID_ERASE.
	* elf/dl-tunables.h (struct _tunable): Change member is_secure
	to security_level.
	* elf/dl-tunables.list: Add security_level annotations for all
	tunables.
	* scripts/gen-tunables.awk: Recognize and generate enum values
	for security_level.
	* elf/tst-env-setuid.c: New test case.
	* elf/tst-env-setuid-tunables: new test case.
	* elf/Makefile (tests-static): Add them.

2017-02-01  Richard Henderson  <rth@twiddle.net>

	* sysdeps/alpha/memchr.c (__memchr): Use saturating arithmetic
	adjusting the byte count.

2017-02-01  Andreas Schwab  <schwab@linux-m68k.org>

	* conform/Makefile (linknamespace-libs): Define.

	* sysdeps/m68k/m680x0/m68020/atomic-machine.h
	(__arch_compare_and_exchange_val_64_acq, atomic_exchange_acq)
	(atomic_exchange_and_add, atomic_add): Add casts to 64 bit asm
	operands.

2017-01-31  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/unix/sysv/linux/nios2/ipc_priv.h: New file.

2017-01-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #21081]
	* sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S
	(L(stosb)): Add VZEROUPPER before ret.

2016-01-28  Carlos O'Donell  <carlos@redhat.com>
	    Alexey Makhalov <amakhalov@vmware.com>
	    Florian Weimer <fweimer@redhat.com>

	[BZ #20116]
	* nptl/pthread_create.c: Document concurrency notes.
	Enhance thread creation notes.
	(create_thread): Use bool *stopped_start.
	(START_THREAD_DEFN): Comment ownership of PD.
	(__pthread_create_2_1): Add local bool stopped_start and use
	that instead of pd->stopped_start where appropriate.
	* nptl/createthread.c (create_thread): Use bool *stopped_start.
	* sysdeps/nacl/createthread.c (create_thread): Use bool *stopped_start.
	* sysdeps/unix/sysv/linux/createthread.c (create_thread): Likewise.
	* nptl/tst-create-detached.c: New file.
	* nptl/Makefile (tests): Add tst-create-detached.
	* nptl/pthread_getschedparam.c (__pthread_getschedparam):
	Reference the enhanced thread creation notes.
	* nptl/pthread_setschedparam.c (__pthread_setschedparam): Likewise.
	* nptl/pthread_setschedprio.c (pthread_setschedprio): Likewise.
	* nptl/tpp.c (__pthread_tpp_change_priority): Likewise.
	(__pthread_current_priority): Likewise.
	* support/Makefile (libsupport-routines): Add xpthread_attr_destroy
	xpthread_attr_init, xpthread_attr_setdetachstate, and
	xpthread_attr_setstacksize.
	* support/xpthread_attr_destroy.c: New file.
	* support/xpthread_attr_init.c: New file.
	* support/xpthread_attr_setdetachstate.c: New file.
	* support/xpthread_attr_setstacksize.c: New file.
	* support/xthread.h: Define prototypes for xpthread_attr_destroy
	xpthread_attr_init, xpthread_attr_setdetachstate, and
	xpthread_attr_setstacksize.

2017-01-27  Florian Weimer  <fweimer@redhat.com>

	* nptl/Makefile (tests): Add tst-robust-fork.
	* nptl/tst-robust-fork.c: New file.
	* support/Makefile (libsupport-routines): Add xmmap, xmunmap,
	xpthread_mutex_consistent, xpthread_mutex_destroy,
	xpthread_mutex_init, xpthread_mutexattr_destroy,
	xpthread_mutexattr_init, xpthread_mutexattr_setprotocol,
	xpthread_mutexattr_setpshared, xpthread_mutexattr_setrobust,
	xpthread_mutexattr_settype.
	* support/xmmap.c: New file.
	* support/xmunmap.c: Likewise.
	* support/xpthread_mutex_consistent.c: Likewise.
	* support/xpthread_mutex_destroy.c: Likewise.
	* support/xpthread_mutex_init.c: Likewise.
	* support/xpthread_mutexattr_destroy.c: Likewise.
	* support/xpthread_mutexattr_init.c: Likewise.
	* support/xpthread_mutexattr_setprotocol.c: Likewise.
	* support/xpthread_mutexattr_setpshared.c: Likewise.
	* support/xpthread_mutexattr_setrobust.c: Likewise.
	* support/xpthread_mutexattr_settype.c: Likewise.
	* support/xthread.h (xpthread_mutexattr_destroy)
	(xpthread_mutexattr_init, xpthread_mutexattr_setprotocol)
	(xpthread_mutexattr_setpshared, xpthread_mutexattr_setrobust)
	(xpthread_mutexattr_settype, xpthread_mutex_init)
	(xpthread_mutex_destroy, xpthread_mutex_consistent): Declare.
	* support/xunistd.h (xmmap, xmunmap): Likewise.

2017-01-25  Florian Weimer  <fweimer@redhat.com>

	* string/Makefile (xtests): Add comment.
	(LOCALES): Add en_GB.UTF-8.
	(tst-strcoll-overflow.out): Depend on generated locales.
	* string/tst-strcoll-overflow.c: Convert to support/test-driver.c.
	(SIZE, TIMEOUT): Update comments.
	(do_test): Define as static.  Fail test if setlocale fails.
	Return EXIT_UNSUPPORTED if insufficient memory.  Enhance output
	messages.
	(EXPECTED_SIGNAL, EXPECTED_STATUS, TEST_FUNCTION): Remove.
	TIMEOUT at 300 seconds should be enough to run this test
	successfully.

2017-01-24  Jakub Jelinek  <jakub@redhat.com>

	* soft-fp/op-common.h (_FP_MUL, _FP_FMA, _FP_DIV): Add
	/* FALLTHRU */ comments.

2017-01-24  James Clarke  <jrtc27@jrtc27.com>

	[BZ #21053]
	* sysdeps/unix/sysv/linux/sh/sh3/ucontext_i.sym: Use new REG_R*
	constants instead of the old R* ones.
	* sysdeps/unix/sysv/linux/sh/sh4/ucontext_i.sym: Likewise.
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h (NGPREG): Rename...
	(NGREG): ... to this, to fit in with other architectures.
	(gpregset_t): Use new NGREG macro.
	[__USE_GNU]: Remove condition; all architectures other than tile
	are unconditional.
	(R*): Rename to REG_R*.

2017-01-20  DJ Delorie  <dj@redhat.com>

	* elf/dl-tunables.c (tunable_set_val_if_valid_range): Split into ...
	(tunable_set_val_if_valid_range_signed) ... this, and ...
	(tunable_set_val_if_valid_range_unsigned) ... this.
	(tunable_initialize): Call the correct one of the above based on type.

2017-01-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/hppa/fpu/libm-test-ulps: Remove *_tonearest entries.
	* sysdeps/ia64/fpu/libm-test-ulps: Likewise.
	* sysdeps/m68k/m680x0/fpu/libm-test-ulps: Likewise.
	* sysdeps/microblaze/libm-test-ulps: Likewise.
	* sysdeps/sh/libm-test-ulps: Likewise.

	* math/README.libm-test: Update list of characters for input and
	output types.

2017-01-20  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/elision-unlock.c
	(__lll_unlock_elision): Fix adapt_count decrement.

2017-01-14  Martin Galvan  <martingalvan@sourceware.org>

	* README.pretty-printers (Known issues): Warn about printers not
	always covering everything.
	* nptl/nptl-printers.py (MutexPrinter): Change output.
	* nptl/test-mutex-printers.py: Fix test and adapt to changed output.

2017-01-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/htm.h: Adjust comments.
	* sysdeps/unix/sysv/linux/s390/elision-unlock.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/elision-lock.c: Adjust comments.
	(__lll_lock_elision): Do not test futex before starting a
	transaction.  Use __glibc_likely instead of __builtin_expect.
	* sysdeps/unix/sysv/linux/s390/elision-trylock.c: Adjust comments.
	(__lll_trylock_elision): Do not test futex before starting a
	transaction.  Use __glibc_likely instead of __builtin_expect.

2017-01-20  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* po/Makefile (update-translations): New target.

2017-01-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21061]
	* sysdeps/unix/sysv/linux/microblaze/clock-compat.c: New file.

2017-01-19  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* elf/dl-tunables (get_next_env): Always advance envp.
	* stdlib/tst-empty-env.c: New test case.
	* stdlib/Makefile (tests): Use it.

2017-01-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21047]
	* sysdeps/arm/fpu_control.h [!__SOFTFP__] (_FPU_GETCW): Use VFP
	name for instruction.
	[!__SOFTFP__] (_FPU_SETCW): Likewise.

2017-01-18  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Config.build_cross_tool): Use -j1
	for make install.

2017-01-18  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* po/bg.po: Merge from Translation Project.
	* po/fr.po: Likewise.
	* po/ko.po: Likewise.
	* po/nl.po: Likewise.
	* po/sv.po: Likewise.

2017-01-18  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi (Tools for Compilation): Update GCC version
	known to work to build glibc.
	* INSTALL: Regenerated.

2017-01-17  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #21006]
	* string/Makefile (LDFLAGS-tst-xbzero-opt): New variable.

2017-01-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21045]
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S
	(__CONTEXT_FUNC_NAME): Pass address of signal mask to be restored
	to __sigprocmask.

2017-01-16  Chris Metcalf  <cmetcalf@mellanox.com>

	* sysdeps/tile/tilegx/memchr.c (__memchr): Handle pointer
	wrap-around.
	* sysdeps/tile/tilepro/memchr.c (__memchr): Likewise.

	* sysdeps/unix/sysv/linux/tile/ipc_priv.h: New file.

2016-01-14  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* NEWS: Fix typo.

2016-01-13  Torvald Riegel  <triegel@redhat.com>

	* nptl/descr.h (ENQUEUE_MUTEX_BOTH, DEQUEUE_MUTEX): Add compiler
	barriers and comments.
	* nptl/pthread_mutex_lock.c (__pthread_mutex_lock_full): Likewise.
	* nptl/pthread_mutex_timedlock.c (pthread_mutex_timedlock): Likewise.
	* nptl/pthread_mutex_unlock.c (__pthread_mutex_unlock_full): Likewise.

2016-01-13  Torvald Riegel  <triegel@redhat.com>

	[BZ #19402]
	* sysdeps/nptl/fork.c (__libc_fork): Clear list of acquired robust
	mutexes.

2016-01-13  Torvald Riegel  <triegel@redhat.com>

	[BZ #20985]
	* nptl/Makefile: Adapt.
	* nptl/pthread_mutex_cond_lock.c (LLL_ROBUST_MUTEX_LOCK): Remove.
	(LLL_ROBUST_MUTEX_LOCK_MODIFIER): New.
	* nptl/pthread_mutex_lock.c (LLL_ROBUST_MUTEX_LOCK): Remove.
	(LLL_ROBUST_MUTEX_LOCK_MODIFIER): New.
	(__pthread_mutex_lock_full): Inline lll_robust* functions and adapt.
	* nptl/pthread_mutex_timedlock.c (pthread_mutex_timedlock): Inline
	lll_robust* functions and adapt.
	* nptl/pthread_mutex_unlock.c (__pthread_mutex_unlock_full): Likewise.
	* sysdeps/nptl/lowlevellock.h (__lll_robust_lock_wait,
	__lll_robust_lock, lll_robust_cond_lock, __lll_robust_timedlock_wait,
	__lll_robust_timedlock, __lll_robust_unlock): Remove.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h (lll_robust_lock,
	lll_robust_cond_lock, lll_robust_timedlock, lll_robust_unlock): Remove.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h (lll_robust_lock,
	lll_robust_cond_lock, lll_robust_timedlock, lll_robust_unlock): Remove.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h (__lll_robust_lock_wait,
	__lll_robust_lock, lll_robust_cond_lock, __lll_robust_timedlock_wait,
	__lll_robust_timedlock, __lll_robust_unlock): Remove.
	* nptl/lowlevelrobustlock.c: Remove file.
	* nptl/lowlevelrobustlock.sym: Likewise.
	* sysdeps/unix/sysv/linux/i386/lowlevelrobustlock.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevelrobustlock.S: Likewise.

2017-01-13  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Regenerated.

2017-01-12  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* po/cs.po: Merge translations from the Translation Project.
	* po/de.po: Likewise.
	* po/pl.po: Likewise.
	* po/ru.po: Likewise.
	* po/tr.po: Likewise.
	* po/uk.po: Likewise.
	* po/vi.po: Likewise.
	* po/zh_CN.po: Likewise.

2017-01-12  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/mips/mips32/posix_fadvise.c: New file.

	* math/fgetexcptflg.c (__fegetexceptflag): Store 0 in fexcept_t
	object.

2017-01-11  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16458]
	* bits/uintn-identity.h: New file.
	* inet/netinet/in.h: Include <bits/uintn-identity.h>.
	[__BYTE_ORDER == __BIG_ENDIAN] (ntohl): Use __uint32_identity.
	[__BYTE_ORDER == __BIG_ENDIAN] (ntohs): Use __uint16_identity.
	[__BYTE_ORDER == __BIG_ENDIAN] (htonl): Use __uint32_identity.
	[__BYTE_ORDER == __BIG_ENDIAN] (htohs): Use __uint16_identity.
	* string/endian.h: Include <bits/uintn-identity.h>.
	[__BYTE_ORDER == __LITTLE_ENDIAN] (htole16): Use
	__uint16_identity.
	[__BYTE_ORDER == __LITTLE_ENDIAN] (le16toh): Likewise.
	[__BYTE_ORDER == __LITTLE_ENDIAN] (htole32): Use
	__uint32_identity.
	[__BYTE_ORDER == __LITTLE_ENDIAN] (le32toh): Likewise.
	[__BYTE_ORDER == __LITTLE_ENDIAN] (htole64): Use
	__uint64_identity.
	[__BYTE_ORDER == __LITTLE_ENDIAN] (le64toh): Likewise.
	[__BYTE_ORDER != __LITTLE_ENDIAN] (htobe16): Use
	__uint16_identity.
	[__BYTE_ORDER != __LITTLE_ENDIAN] (be16toh): Likewise.
	[__BYTE_ORDER != __LITTLE_ENDIAN] (htobe32): Use
	__uint32_identity.
	[__BYTE_ORDER != __LITTLE_ENDIAN] (be32toh): Likewise.
	[__BYTE_ORDER != __LITTLE_ENDIAN] (htobe64): Use
	__uint64_identity.
	[__BYTE_ORDER != __LITTLE_ENDIAN] (be64toh): Likewise.
	* string/Makefile (headers): Add bits/uintn-identity.h.
	(tests): Add test-endian-types.
	* string/test-endian-types.c: New file.
	* inet/Makefile (tests): Add test-hnto-types.
	* inet/test-hnto-types.c: New file.

2016-01-11  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* po/be.po: Update from Translation Project.
	* po/bg.po: Likewise.
	* po/ca.po: Likewise.
	* po/cs.po: Likewise.
	* po/da.po: Likewise.
	* po/de.po: Likewise.
	* po/el.po: Likewise.
	* po/eo.po: Likewise.
	* po/es.po: Likewise.
	* po/fi.po: Likewise.
	* po/fr.po: Likewise.
	* po/gl.po: Likewise.
	* po/hr.po: Likewise.
	* po/hu.po: Likewise.
	* po/ia.po: Likewise.
	* po/id.po: Likewise.
	* po/it.po: Likewise.
	* po/ja.po: Likewise.
	* po/ko.po: Likewise.
	* po/lt.po: Likewise.
	* po/nb.po: Likewise.
	* po/nl.po: Likewise.
	* po/pl.po: Likewise.
	* po/pt_BR.po: Likewise.
	* po/ru.po: Likewise.
	* po/rw.po: Likewise.
	* po/sk.po: Likewise.
	* po/sl.po: Likewise.
	* po/sv.po: Likewise.
	* po/tr.po: Likewise.
	* po/uk.po: Likewise.
	* po/vi.po: Likewise.
	* po/zh_CN.po: Likewise.
	* po/zh_TW.po: Likewise.

2017-01-11  Joseph Myers  <joseph@codesourcery.com>

	* stdio-common/tst-printf.c [__GNUC_PREREQ (7, 0)]: Ignore
	-Wformat-truncation instead of -Wformat-length.
	* time/tst-strptime2.c (mkbuf) [__GNUC_PREREQ (7, 0)]: Likewise.
	* stdio-common/tstdiomisc.c (F): Ignore -Wformat-truncation for
	GCC 7.
	* wcsmbs/tst-wcstof.c: Include <libc-internal.h>.
	(do_test): Ignore -Wformat-truncation for GCC 7.

	* locale/programs/ld-address.c (INT_STR_ELEM): Increase size of
	buffer used to print long int value.

	* elf/sotruss-lib.c (init): Increase space allocated for pid by
	one byte.  Print it with %ld, cast to long int.

2017-01-11  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* scripts/build-many-glibcs.py (os.cpu_count): Add compatibility definition.
	(re.fullmatch, subprocess.run): Likewise.

2016-01-11  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* po/libc.pot: Regenerate.

2016-01-10  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* elf/dl-tunables.c (tunables_unsetenv): Remove function.
	(min_strlen): Likewise.
	(disable_tunable): Likewise.
	(maybe_disable_malloc_check): Rename to
	maybe_enable_malloc_check.
	(maybe_enable_malloc_check): Enable glibc.malloc.check tunable
	if /etc/suid-debug file exists.
	(__tunables_init): Update caller.
	* elf/dl-tunables.list (glibc.malloc.check): Don't mark as
	secure.

2016-01-10  Torvald Riegel  <triegel@redhat.com>

	* nptl/DESIGN-rwlock.txt: Remove.
	* nptl/lowlevelrwlock.sym: Remove.
	* nptl/Makefile: Add new tests.
	* nptl/pthread_rwlock_common.c: New file.  Contains the new rwlock.
	* nptl/pthreadP.h (PTHREAD_RWLOCK_PREFER_READER_P): Remove.
	(PTHREAD_RWLOCK_WRPHASE, PTHREAD_RWLOCK_WRLOCKED,
	PTHREAD_RWLOCK_RWAITING, PTHREAD_RWLOCK_READER_SHIFT,
	PTHREAD_RWLOCK_READER_OVERFLOW, PTHREAD_RWLOCK_WRHANDOVER,
	PTHREAD_RWLOCK_FUTEX_USED): New.
	* nptl/pthread_rwlock_init.c (__pthread_rwlock_init): Adapt to new
	implementation.
	* nptl/pthread_rwlock_rdlock.c (__pthread_rwlock_rdlock_slow): Remove.
	(__pthread_rwlock_rdlock): Adapt.
	* nptl/pthread_rwlock_timedrdlock.c
	(pthread_rwlock_timedrdlock): Adapt.
	* nptl/pthread_rwlock_timedwrlock.c
	(pthread_rwlock_timedwrlock): Adapt.
	* nptl/pthread_rwlock_trywrlock.c (pthread_rwlock_trywrlock): Adapt.
	* nptl/pthread_rwlock_tryrdlock.c (pthread_rwlock_tryrdlock): Adapt.
	* nptl/pthread_rwlock_unlock.c (pthread_rwlock_unlock): Adapt.
	* nptl/pthread_rwlock_wrlock.c (__pthread_rwlock_wrlock_slow): Remove.
	(__pthread_rwlock_wrlock): Adapt.
	* nptl/tst-rwlock10.c: Adapt.
	* nptl/tst-rwlock11.c: Adapt.
	* nptl/tst-rwlock17.c: New file.
	* nptl/tst-rwlock18.c: New file.
	* nptl/tst-rwlock19.c: New file.
	* nptl/tst-rwlock2b.c: New file.
	* nptl/tst-rwlock8.c: Adapt.
	* nptl/tst-rwlock9.c: Adapt.
	* sysdeps/aarch64/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/arm/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/hppa/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/ia64/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/m68k/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/microblaze/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/mips/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/nios2/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/s390/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/sh/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/sparc/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/tile/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* sysdeps/unix/sysv/linux/alpha/bits/pthreadtypes.h
	(pthread_rwlock_t): Adapt.
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	(pthread_rwlock_t): Adapt.
	* sysdeps/x86/bits/pthreadtypes.h (pthread_rwlock_t): Adapt.
	* nptl/nptl-printers.py (): Adapt.
	* nptl/nptl_lock_constants.pysym: Adapt.
	* nptl/test-rwlock-printers.py: Adapt.
	* nptl/test-rwlockattr-printers.c: Adapt.
	* nptl/test-rwlockattr-printers.py: Adapt.

2017-01-10  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (XFAIL_IBM128_LIBGCC): New macro.
	(fdim_test_data): Use XFAIL_ROUNDING_IBM128_LIBGCC for some tests.
	(fma_test_data): Likewise.
	(hypot_test_data): Likewise.
	(log1p_test_data): Likewise.
	(modf_test_data): Likewise.
	(pow_test_data): Likewise.
	(remainder_test_data): Likewise.
	(remquo_test_data): Likewise.
	(scalb_test_data): Likewise.
	(scalbn_test_data): Likewise.
	(scalbln_test_data): Likewise.
	* math/gen-libm-test.pl (parse_args): Transform
	XFAIL_ROUNDING_IBM128_LIBGCC to XFAIL_IBM128_LIBGCC or 0 depending
	on the rounding mode.

2017-01-09  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-auto-libm-tests.c (output_for_one_input_case): Apply
	xfail-rounding:ibm128-libgcc automatically to tests overflowing
	and those that can underflow to zero.
	* math/auto-libm-test-in: Remove most XFAILs for ibm128-libgcc and
	add others.
	* math/auto-libm-test-out: Regenerated.

	* math/test-fenv.c (fe_tests): Skip most tests when exceptions not
	supported.
	(feholdexcept_tests): Skip tests requiring exceptions or rounding
	modes support if not supported.

	* sysdeps/unix/sysv/linux/microblaze/localplt.data (__pread64):
	Add libc.so PLT entry.
	(__tls_get_addr): Make ld.so PLT entry optional.

2017-01-09  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* string/bits/strings_fortified.h (explicit_bzero): Move back to ..
	* string/bits/string3.h: ... here.

2017-01-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21028]
	* math/fsetexcptflg.c (__fesetexceptflag): Always return 0.
	* math/test-fexcept.c (test_set): Allow failure of feraiseexcept
	if EXCEPTION_TESTS returns false.

2017-01-05  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #20558]
	* string/bits/string3.h [__USE_MISC] (bcopy): Move to
	strings_fortified.h.
	[__USE_MISC] (bzero): Likewise.
	[__USE_MISC] (explicit_bzero): Likewise.
	* string/strings.h: Include strings_fortified.h.
	* string/Makefile (headers): Add strings_fortified.h.
	* string/bits/strings_fortified.h: New file.
	* include/bits/strings_fortified.h: Likewise.

2017-01-05  Joseph Myers  <joseph@codesourcery.com>

	* elf/tst-tls13.c (TIMEOUT): Remove.
	* iconvdata/tst-loading.c (TIMEOUT): Likewise.
	* malloc/tst-malloc-thread-fail.c (TIMEOUT): Increase to 100.
	* malloc/tst-mallocfork2.c (TIMEOUT): Define to 100.
	* nss/tst-cancel-getpwuid_r.c (TIMEOUT): Define to 900.
	* nss/tst-nss-getpwent.c (TIMEOUT): Define to 300.

	[BZ #21026]
	* sysdeps/unix/sysv/linux/mips/mips64/n64/syscalls.list
	(readahead): New syscall entry.

2017-01-04  Joseph Myers  <joseph@codesourcery.com>

	* string/tester.c (test_strncat): Disable -Wstringop-overflow=
	around tests of strncat with large sizes.

	* malloc/tst-malloc.c: Include <libc-internal.h>.
	(do_test): Disable -Walloc-size-larger-than= around tests of
	malloc with negative sizes.
	* malloc/tst-mcheck.c: Include <libc-internal.h>.
	(do_test): Disable -Walloc-size-larger-than= around tests of
	malloc and realloc with negative sizes.
	* malloc/tst-realloc.c: Include <libc-internal.h>.
	(do_test): Disable -Walloc-size-larger-than= around tests of
	realloc with negative sizes.

	* math/libm-test.inc (TEST_COND_ibm128_libgcc): New macro.
	(init_max_error) [TEST_COND_ibm128]: Increase maximum error
	allowed to 16 ulps.
	* math/auto-libm-test-in: Change most XFAILs for ibm128 to use
	ibm128-libgcc.  XFAIL more tests for ibm128-libgcc.
	* math/auto-libm-test-out: Regenerated.

2017-01-04  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/Makefile (libm-calls): Move wrappers...
	(libm-compat-call-auto): Here.
	(libm-routines): Add items in libm-compat-calls-auto.
	* sysdeps/powerpc/nofpu/Makefile: Add suffix ("_compat") to
	the filenames of the wrappers that have been renamed.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Likewise.

	* math/w_acos.c: Add _compat suffix to filename.
	* math/w_acosf.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atan2.c: Likewise.
	* math/w_atan2f.c: Likewise.
	* math/w_atan2l.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_cosh.c: Likewise.
	* math/w_coshf.c: Likewise.
	* math/w_coshl.c: Likewise.
	* math/w_exp10.c: Likewise.
	* math/w_exp10f.c: Likewise.
	* math/w_exp10l.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_hypot.c: Likewise.
	* math/w_hypotf.c: Likewise.
	* math/w_hypotl.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_jnl.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* math/w_scalb.c: Likewise.
	* math/w_scalbf.c: Likewise.
	* math/w_scalbl.c: Likewise.
	* math/w_sinh.c: Likewise.
	* math/w_sinhf.c: Likewise.
	* math/w_sinhl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* math/w_tgamma.c: Likewise.
	* math/w_tgammaf.c: Likewise.
	* math/w_tgammal.c: Likewise.

	* math/w_acos_compat.c: New file copied from above and
	adjusted for new #includes path
	* math/w_acosf_compat.c: Likewise.
	* math/w_acosh_compat.c: Likewise.
	* math/w_acoshf_compat.c: Likewise.
	* math/w_acoshl_compat.c: Likewise.
	* math/w_acosl_compat.c: Likewise.
	* math/w_asin_compat.c: Likewise.
	* math/w_asinf_compat.c: Likewise.
	* math/w_asinl_compat.c: Likewise.
	* math/w_atan2_compat.c: Likewise.
	* math/w_atan2f_compat.c: Likewise.
	* math/w_atan2l_compat.c: Likewise.
	* math/w_atanh_compat.c: Likewise.
	* math/w_atanhf_compat.c: Likewise.
	* math/w_atanhl_compat.c: Likewise.
	* math/w_cosh_compat.c: Likewise.
	* math/w_coshf_compat.c: Likewise.
	* math/w_coshl_compat.c: Likewise.
	* math/w_exp10_compat.c: Likewise.
	* math/w_exp10f_compat.c: Likewise.
	* math/w_exp10l_compat.c: Likewise.
	* math/w_exp2_compat.c: Likewise.
	* math/w_exp2f_compat.c: Likewise.
	* math/w_exp2l_compat.c: Likewise.
	* math/w_fmod_compat.c: Likewise.
	* math/w_fmodf_compat.c: Likewise.
	* math/w_fmodl_compat.c: Likewise.
	* math/w_hypot_compat.c: Likewise.
	* math/w_hypotf_compat.c: Likewise.
	* math/w_hypotl_compat.c: Likewise.
	* math/w_j0_compat.c: Likewise.
	* math/w_j0f_compat.c: Likewise.
	* math/w_j0l_compat.c: Likewise.
	* math/w_j1_compat.c: Likewise.
	* math/w_j1f_compat.c: Likewise.
	* math/w_j1l_compat.c: Likewise.
	* math/w_jn_compat.c: Likewise.
	* math/w_jnf_compat.c: Likewise.
	* math/w_jnl_compat.c: Likewise.
	* math/w_log10_compat.c: Likewise.
	* math/w_log10f_compat.c: Likewise.
	* math/w_log10l_compat.c: Likewise.
	* math/w_log2_compat.c: Likewise.
	* math/w_log2f_compat.c: Likewise.
	* math/w_log2l_compat.c: Likewise.
	* math/w_log_compat.c: Likewise.
	* math/w_logf_compat.c: Likewise.
	* math/w_logl_compat.c: Likewise.
	* math/w_pow_compat.c: Likewise.
	* math/w_powf_compat.c: Likewise.
	* math/w_powl_compat.c: Likewise.
	* math/w_remainder_compat.c: Likewise.
	* math/w_remainderf_compat.c: Likewise.
	* math/w_remainderl_compat.c: Likewise.
	* math/w_scalb_compat.c: Likewise.
	* math/w_scalbf_compat.c: Likewise.
	* math/w_scalbl_compat.c: Likewise.
	* math/w_sinh_compat.c: Likewise.
	* math/w_sinhf_compat.c: Likewise.
	* math/w_sinhl_compat.c: Likewise.
	* math/w_sqrt_compat.c: Likewise.
	* math/w_sqrtf_compat.c: Likewise.
	* math/w_sqrtl_compat.c: Likewise.
	* math/w_tgamma_compat.c: Likewise.
	* math/w_tgammaf_compat.c: Likewise.
	* math/w_tgammal_compat.c: Likewise.

	* sysdeps/i386/fpu/w_sqrt.c: Add _compat suffix to filename.
	* sysdeps/ia64/fpu/w_sqrtl.c: Likewise.
	* sysdeps/ia64/fpu/w_acosl.c: Likewise.
	* sysdeps/ia64/fpu/w_sqrtf.c: Likewise.
	* sysdeps/ia64/fpu/w_sqrt.c: Likewise.
	* sysdeps/ia64/fpu/w_sinhl.c: Likewise.
	* sysdeps/ia64/fpu/w_acosf.c: Likewise.
	* sysdeps/ia64/fpu/w_sinhf.c: Likewise.
	* sysdeps/ia64/fpu/w_sinh.c: Likewise.
	* sysdeps/ia64/fpu/w_scalbl.c: Likewise.
	* sysdeps/ia64/fpu/w_scalbf.c: Likewise.
	* sysdeps/ia64/fpu/w_scalb.c: Likewise.
	* sysdeps/ia64/fpu/w_remainderl.c: Likewise.
	* sysdeps/ia64/fpu/w_remainderf.c: Likewise.
	* sysdeps/ia64/fpu/w_remainder.c: Likewise.
	* sysdeps/ia64/fpu/w_powl.c: Likewise.
	* sysdeps/ia64/fpu/w_powf.c: Likewise.
	* sysdeps/ia64/fpu/w_pow.c: Likewise.
	* sysdeps/ia64/fpu/w_logl.c: Likewise.
	* sysdeps/ia64/fpu/w_logf.c: Likewise.
	* sysdeps/ia64/fpu/w_log2l.c: Likewise.
	* sysdeps/ia64/fpu/w_log2f.c: Likewise.
	* sysdeps/ia64/fpu/w_log2.c: Likewise.
	* sysdeps/ia64/fpu/w_log10l.c: Likewise.
	* sysdeps/ia64/fpu/w_log10f.c: Likewise.
	* sysdeps/ia64/fpu/w_log10.c: Likewise.
	* sysdeps/ia64/fpu/w_log.c: Likewise.
	* sysdeps/ia64/fpu/w_hypotl.c: Likewise.
	* sysdeps/ia64/fpu/w_hypotf.c: Likewise.
	* sysdeps/ia64/fpu/w_hypot.c: Likewise.
	* sysdeps/ia64/fpu/w_fmodl.c: Likewise.
	* sysdeps/ia64/fpu/w_fmodf.c: Likewise.
	* sysdeps/ia64/fpu/w_fmod.c: Likewise.
	* sysdeps/ia64/fpu/w_exp2l.c: Likewise.
	* sysdeps/ia64/fpu/w_exp2f.c: Likewise.
	* sysdeps/ia64/fpu/w_exp2.c: Likewise.
	* sysdeps/ia64/fpu/w_exp10l.c: Likewise.
	* sysdeps/ia64/fpu/w_exp10f.c: Likewise.
	* sysdeps/ia64/fpu/w_exp10.c: Likewise.
	* sysdeps/ia64/fpu/w_coshl.c: Likewise.
	* sysdeps/ia64/fpu/w_coshf.c: Likewise.
	* sysdeps/ia64/fpu/w_cosh.c: Likewise.
	* sysdeps/ia64/fpu/w_atanhl.c: Likewise.
	* sysdeps/ia64/fpu/w_atanhf.c: Likewise.
	* sysdeps/ia64/fpu/w_atanh.c: Likewise.
	* sysdeps/ia64/fpu/w_atan2l.c: Likewise.
	* sysdeps/ia64/fpu/w_atan2f.c: Likewise.
	* sysdeps/ia64/fpu/w_atan2.c: Likewise.
	* sysdeps/ia64/fpu/w_asinl.c: Likewise.
	* sysdeps/ia64/fpu/w_asinf.c: Likewise.
	* sysdeps/ia64/fpu/w_asin.c: Likewise.
	* sysdeps/ia64/fpu/w_acoshl.c: Likewise.
	* sysdeps/ia64/fpu/w_acoshf.c: Likewise.
	* sysdeps/ia64/fpu/w_acosh.c: Likewise.
	* sysdeps/ia64/fpu/w_acos.c: Likewise.
	* sysdeps/ia64/fpu/w_tgamma.S: Likewise.
	* sysdeps/ia64/fpu/w_tgammaf.S: Likewise.
	* sysdeps/ia64/fpu/w_tgammal.S: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_acos.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_acosh.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_asin.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_atan2.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_atanh.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_cosh.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_exp10.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_fmod.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_hypot.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_j0.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_j1.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_jn.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log10.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log2.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_pow.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_remainder.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_scalb.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_scalbl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_sinh.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_sqrt.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_sqrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_tgamma.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_tgammal.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt-power5.S:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt-ppc32.S:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf-power5.S:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf-ppc32.S:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrtf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrtf.S: Likewise.

	* sysdeps/i386/fpu/w_sqrt_compat.c: New file copied from above
	and adjusted for new #includes path
	* sysdeps/ia64/fpu/w_acos_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_acosf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_acosh_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_acoshf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_acoshl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_acosl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_asin_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_asinf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_asinl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_atan2_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_atan2f_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_atan2l_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_atanh_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_atanhf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_atanhl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_cosh_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_coshf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_coshl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_exp10_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_exp10f_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_exp10l_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_exp2_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_exp2f_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_exp2l_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_fmod_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_fmodf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_fmodl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_hypot_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_hypotf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_hypotl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_log10_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_log10f_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_log10l_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_log2_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_log2f_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_log2l_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_log_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_logf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_logl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_pow_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_powf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_powl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_remainder_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_remainderf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_remainderl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_scalb_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_scalbf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_scalbl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_sinh_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_sinhf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_sinhl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_sqrt_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_sqrtf_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_sqrtl_compat.c: Likewise.
	* sysdeps/ia64/fpu/w_tgamma_compat.S: Likewise.
	* sysdeps/ia64/fpu/w_tgammaf_compat.S: Likewise.
	* sysdeps/ia64/fpu/w_tgammal_compat.S: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_acos_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_acosh_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_acoshl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_acosl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_asin_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_asinl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_atan2_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_atan2l_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_atanh_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_atanhl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_cosh_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_coshl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_exp10_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_exp10l_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_fmod_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_fmodl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_hypot_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_hypotl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_j0_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_j0l_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_j1_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_j1l_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_jn_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_jnl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log10_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log10l_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log2_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log2l_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_log_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_logl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_pow_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_powl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_remainder_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_remainderl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_scalb_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_scalbl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_sinh_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_sinhl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_sqrt_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_sqrtl_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_tgamma_compat.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_tgammal_compat.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt_compat-power5.S:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt_compat-ppc32.S:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt_compat.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf_compat-power5.S:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf_compat-ppc32.S:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf_compat.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrt_compat.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrtf_compat.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrt_compat.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrtf_compat.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrt_compat.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrtf_compat.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt_compat-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt_compat.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf_compat-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf_compat.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrt_compat.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrtf_compat.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrt_compat.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrtf_compat.S: Likewise.

2017-01-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/microblaze/bits/setjmp.h (__jmp_buf): Give struct tag
	__jmp_buf_internal_tag.

	* sysdeps/mips/mips32/sfp-machine.h (_FP_CHOOSENAN): Always
	preserve NaN payload if [__mips_nan2008].
	* sysdeps/mips/mips64/sfp-machine.h (_FP_CHOOSENAN): Likewise.

	[BZ #21022]
	* sysdeps/microblaze/backtrace.c (get_frame_size): Make static.

2017-01-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2017-01-03  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/ia64/strcat.c: Remove file.
	* sysdeps/powerpc/strcat.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-power7.c: Use default
	C implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-power8.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-ppc64.c: Likewise.

2017-01-03  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>
	    Steven Munroe  <sjmunroe@us.ibm.com>
	    Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #20822]
	* sysdeps/unix/sysv/linux/powerpc/elision-lock.c
	(__lll_lock_elision): Access adapt_count via C11 atomics.
	* sysdeps/unix/sysv/linux/powerpc/elision-trylock.c
	(__lll_trylock_elision): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/elision-unlock.c
	(__lll_unlock_elision):  Update adapt_count variable inside the
	critical section using C11 atomics.

2017-01-03  Joseph Myers  <joseph@codesourcery.com>

	* math/test-fenvinline.c (do_test): Disable tests of raised
	exceptions if !EXCEPTION_TESTS (FLOAT).

2017-01-03  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #19390]
	* string/test-strncat.c (test_main): Add tests with SIZE_MAX as
	maximum string size.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S (STRCAT): Avoid overflow
	in pointer addition.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S (STRCPY):
	Likewise.

2017-01-03  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile ($(objpfx)tst-ldconfig-X.out): Correct arguments
	passed to tst-ldconfig-X.sh.

2017-01-03  Martin Galvan  <martingalvan@sourceware.org>

	* nptl/nptl-printers.py: Fix tabs/spaces mismatches.

2017-01-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #21019]
	* sysdeps/unix/sysv/linux/mips/mips64/n32/syscalls.list (lseek64):
	New syscall entry.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/lseek.c: New file.
	* io/test-lfs.c (do_test): Test offset returned from lseek64 and
	lseek.

	* scripts/build-many-glibcs.py (Context.add_all_configs): Add
	power4 glibc for powerpc-linux-gnu.

2017-01-02  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysvipc/test-sysvsem.c (do_test): Define and use union semun on
	semctl.

2017-01-02  Joseph Myers  <joseph@codesourcery.com>

	* math/test-nearbyint-except.c: Include <stdbool.h>.
	(any_supported): New variable.
	(TEST_FUNC): Return early if !EXCEPTION_TESTS (FLOAT).  Otherwise
	set any_supported.
	(do_test): Return 77 if no floating-point type supported
	exceptions.

	* sysdeps/mips/math-tests.h (SNAN_TESTS_PRESERVE_PAYLOAD): Do not
	condition on [__mips_hard_float].

2017-01-02  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #21014]
	* sysdeps/i386/i686/multiarch/memchr-sse2-bsf.S (MEMCHR): Avoid overflow
	in pointer addition.
	* sysdeps/i386/i686/multiarch/memchr-sse2.S (MEMCHR): Likewise.

2017-01-02  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/sparc/nptl/bits/pthreadtypes.h (pthread_cond_t): Adapt to
	new condvar.

2017-01-02  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Context.checkout): Default
	binutils version to 2.28 branch.

2017-01-01  Florian Weimer  <fweimer@redhat.com>

	* support/support_format_netent.c (support_format_netent): Work
	around alpha struct netent definition difference.

2017-01-01  Florian Weimer  <fweimer@redhat.com>

	* support/xwrite.c (xwrite): Use %td for pointer difference.

2017-01-01  Florian Weimer  <fweimer@redhat.com>

	* malloc/Makefile (tests): Add tst-malloc-usable-tunables for
	have-tunables only.
	(tests-static): Add tst-malloc-usable-static-tunables for
	have-tunables only.

2017-01-01  Joseph Myers  <joseph@codesourcery.com>

	* scripts/config.guess: Update to version 2017-01-01.
	* scripts/config.sub: Update to version 2017-01-01.

	* NEWS: Update copyright dates.
	* catgets/gencat.c (print_version): Likewise.
	* csu/version.c (banner): Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/pcprofiledump.c (print_version): Likewise.
	* debug/xtrace.sh (do_version): Likewise.
	* elf/ldconfig.c (print_version): Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/pldd.c (print_version): Likewise.
	* elf/sotruss.sh: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* iconv/iconv_prog.c (print_version): Likewise.
	* iconv/iconvconfig.c (print_version): Likewise.
	* locale/programs/locale.c (print_version): Likewise.
	* locale/programs/localedef.c (print_version): Likewise.
	* login/programs/pt_chown.c (print_version): Likewise.
	* malloc/memusage.sh (do_version): Likewise.
	* malloc/memusagestat.c (print_version): Likewise.
	* malloc/mtrace.pl: Likewise.
	* manual/libc.texinfo: Likewise.
	* nptl/version.c (banner): Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* nss/getent.c (print_version): Likewise.
	* nss/makedb.c (print_version): Likewise.
	* posix/getconf.c (main): Likewise.
	* scripts/test-installation.pl: Likewise.
	* sysdeps/unix/sysv/linux/lddlibc4.c (main): Likewise.

	* All files with FSF copyright notices: Update copyright dates
	using scripts/update-copyrights.
	* intl/plural.c: Regenerated.
	* locale/programs/charmap-kw.h: Likewise.
	* locale/programs/locfile-kw.h: Likewise.

2016-12-31  Florian Weimer  <fweimer@redhat.com>

	[BZ #20593]
	Update DNS RR type definitions.
	* scripts/gen-rrtypes.py: New file.
	* resolv/arpa/nameser.h (ns_type): Remove ns_t_zxfr, a
	BIND-internal RR type not used on the Internet.  Add ns_t_ds,
	ns_t_sshfp, ns_t_ipseckey, ns_t_rrsig, ns_t_nsec, ns_t_dnskey,
	ns_t_dhcid, ns_t_nsec3, ns_t_nsec3param, ns_t_tlsa, ns_t_smimea,
	ns_t_hip, ns_t_ninfo, ns_t_rkey, ns_t_talink, ns_t_cds,
	ns_t_cdnskey, ns_t_openpgpkey, ns_t_csync, ns_t_spf, ns_t_uinfo,
	ns_t_uid, ns_t_gid, ns_t_unspec, ns_t_nid, ns_t_l32, ns_t_l64,
	ns_t_lp, ns_t_eui48, ns_t_eui64, ns_t_uri, ns_t_caa, ns_t_avc,
	ns_t_ta, ns_t_dlv.
	* resolv/arpa/nameser_compat.h (T_KX, T_CERT, T_SINK, T_OPT)
	(T_APL, T_DS, T_SSHFP, T_IPSECKEY, T_RRSIG, T_NSEC, T_DNSKEY)
	(T_DHCID, T_NSEC3, T_NSEC3PARAM, T_TLSA, T_SMIMEA, T_HIP, T_NINFO)
	(T_RKEY, T_TALINK, T_CDS, T_CDNSKEY, T_OPENPGPKEY, T_CSYNC, T_SPF)
	(T_UINFO, T_UID, T_GID, T_UNSPEC, T_NID, T_L32, T_L64, T_LP)
	(T_EUI48, T_EUI64, T_TKEY, T_URI, T_CAA, T_AVC, T_TA, T_DLV):
	Define.
	* resolv/res_debug.c (__p_type_syms): Update comment.  Remove
	entry for ns_t_zxfr.

2016-12-31  Florian Weimer  <fweimer@redhat.com>

	[BZ #18784]
	CVE-2015-5180
	* include/arpa/nameser_compat.h (T_QUERY_A_AND_AAAA): Rename from
	T_UNSPEC.  Adjust value.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname4_r): Use it.
	* resolv/res_query.c (__libc_res_nquery): Likewise.
	* resolv/res_mkquery.c (res_nmkquery): Check for out-of-range
	QTYPEs.
	* resolv/tst-resolv-qtypes.c: New file.
	* resolv/Makefile (xtests): Add tst-resolv-qtypes.
	(tst-resolv-qtypes): Link against libresolv and libpthread.

2016-12-31  Florian Weimer  <fweimer@redhat.com>

	* elf/dl-tunables.h (__tunables_init): Fix unused attribute.

2016-12-31  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* manual/tunables.texi: New chapter.
	* manual/Makefile (chapters): Add it.
	* manual/probes.texi (@node): Point to the Tunables chapter.

	* Makeconfig (have-tunables): Check for non-negative instead
	of positive.
	* configure.ac: Add 'valstring' as a valid value for
	--enable-tunables.
	* configure: Regenerate.
	* elf/Makefile (have-tunables): Check for non-negative instead
	of positive.
	(CPPFLAGS-dl-tunables.c): Define TUNABLES_FRONTEND for
	dl-tunables.c.
	* elf/dl-tunables.c (GLIBC_TUNABLES): Define only when
	TUNABLES_FRONTEND == TUNABLES_FRONTEND_valstring.
	(tunables_strdup): Likewise.
	(disable_tunables): Likewise.
	(parse_tunables): Likewise.
	(__tunables_init): Process GLIBC_TUNABLES envvar only when.
	TUNABLES_FRONTEND == TUNABLES_FRONTEND_valstring.
	* elf/dl-tunables.h (TUNABLES_FRONTEND_valstring): New macro.
	(TUNABLES_FRONTEND_yes): New macro, define as
	TUNABLES_FRONTEND_valstring by default.
	* manual/install.texi: Document new acceptable values for
	--enable-tunables.
	* INSTALL: Regenerate.

	* config.make.in (have-loop-to-function): Define.
	* elf/Makefile (CFLAGS-dl-tunables.c): Add
	-fno-tree-loop-distribute-patterns.
	* elf/dl-tunables.c: Include libc-internals.h.
	(GLIBC_TUNABLES): New macro.
	(tunables_strdup): New function.
	(parse_tunables): New function.
	(min_strlen): New function.
	(__tunables_init): Use the new functions and macro.
	(disable_tunable): Disable tunable from GLIBC_TUNABLES.
	* malloc/tst-malloc-usable-tunables.c: New test case.
	* malloc/tst-malloc-usable-static-tunables.c: New test case.
	* malloc/Makefile (tests, tests-static): Add tests.

	* manual/install.texi: Add --enable-tunables option.
	* INSTALL: Regenerate.
	* README.tunables: New file.
	* Makeconfig (CPPFLAGS): Define TOP_NAMESPACE.
	(before-compile): Generate dl-tunable-list.h early.
	* config.h.in: Add HAVE_TUNABLES.
	* config.make.in: Add have-tunables.
	* configure.ac: Add --enable-tunables option.
	* configure: Regenerate.
	* csu/init-first.c (__libc_init_first): Move
	__libc_init_secure earlier...
	* csu/init-first.c (LIBC_START_MAIN):... to here.
	Include dl-tunables.h, libc-internal.h.
	(LIBC_START_MAIN) [!SHARED]: Initialize tunables for static
	binaries.
	* elf/Makefile (dl-routines): Add dl-tunables.
	* elf/Versions (ld): Add __tunable_set_val to GLIBC_PRIVATE
	namespace.
	* elf/dl-support (_dl_nondynamic_init): Unset MALLOC_CHECK_
	only when !HAVE_TUNABLES.
	* elf/rtld.c (process_envvars): Likewise.
	* elf/dl-sysdep.c [HAVE_TUNABLES]: Include dl-tunables.h
	(_dl_sysdep_start): Call __tunables_init.
	* elf/dl-tunable-types.h: New file.
	* elf/dl-tunables.c: New file.
	* elf/dl-tunables.h: New file.
	* elf/dl-tunables.list: New file.
	* malloc/tst-malloc-usable-static.c: New test case.
	* malloc/Makefile (tests-static): Add it.
	* malloc/arena.c [HAVE_TUNABLES]: Include dl-tunables.h.
	Define TUNABLE_NAMESPACE.
	(DL_TUNABLE_CALLBACK (set_mallopt_check)): New function.
	(DL_TUNABLE_CALLBACK_FNDECL): New macro.  Use it to define
	callback functions.
	(ptmalloc_init): Set tunable values.
	* scripts/gen-tunables.awk: New file.
	* sysdeps/mach/hurd/dl-sysdep.c: Include dl-tunables.h.
	(_dl_sysdep_start): Call __tunables_init.

2016-12-31  Florian Weimer  <fweimer@redhat.com>

	* resolv/resolv.h (RES_BLAST): Deprecate.
	* resolv/res_debug.c (p_option): Remove RES_BLAST.
	* resolv/res_send.c (__libc_res_nsend): Remove vestigial reference
	to RES_BLAST.

2016-12-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #19582]
	Deprecate RES_USE_INET6.
	* nis/nss_nis/nis-hosts.c (_nss_nis_gethostent_r)
	(_nss_nis_gethostbyname2_r, _nss_nis_gethostbyname_r)
	(_nss_nis_gethostbyaddr_r): Use res_use_inet6 instead of
	RES_USE_INET6.
	* nis/nss_nisplus/nisplus-hosts.c (internal_nisplus_gethostent_r)
	(_nss_nisplus_gethostbyname2_r, _nss_nisplus_gethostbyname_r)
	(_nss_nisplus_gethostbyaddr_r): Likewise.
	* nscd/aicache.c (addhstaiX): Use DEPRECATED_RES_USE_INET6 instead
	of res_use_inet6.
	* nscd/nscd_gethst_r.c (__nscd_gethostbyname_r): Use res_use_inet6
	instead of RES_USE_INET6.
	* nss/digits_dots.c (__nss_hostname_digits_dots): Likewise.
	* nss/nss_files/files-hosts.c (EXTRA_ARGS_VALUE)
	(_nss_files_gethostbyname3_r, _nss_files_gethostbyname_r):
	Likewise.
	* resolv/compat-gethnamaddr.c (getanswer, res_gethostbyname)
	(res_gethostbyname2, res_gethostbyaddr, _gethtent, _gethtbyname):
	Likewise.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname3_r)
	(_nss_dns_gethostbyname_r): Likewise.
	(_nss_dns_gethostbyaddr2_r): Remove commented-out code for
	alternate RES_USE_INET6 handling.
	* resolv/res_debug.c (p_option): Use DEPRECATED_RES_USE_INET6
	instead of RES_USE_INET6.
	* resolv/res_init.c (res_setoptions): Likewise.
	* resolv/resolv.h (RES_USE_INET6): Mark as deprecated.
	* resolv/resolv-internal.h: New file.
	* resolv/Makefile (CFLAGS-tst-res_use_inet6.c): Use -Wno-error to
	make the deprecation warning non-fatal.
	* resolv/README (Using the resolver in multi-threaded code): Drop
	reference to RES_USE_INET6.
	* sysdeps/posix/getaddrinfo.c (gethosts, gaih_inet): Use
	DEPRECATED_RES_USE_INET6 instead of res_use_inet6.

2016-12-31  Florian Weimer  <fweimer@redhat.com>

	* resolv/Makefile (tests): Add tst-bug18665, tst-bug18665-tcp,
	tst-res_use_inet6, tst-resolv-basic, tst-resolv-network,
	tst-resolv-search.
	(tst-bug18665, tst-bug18665-tcp, tst-res_use_inet6)
	(tst-resolv-basic, tst-resolv-network, tst-resolv-search): Link
	with libresolv and libpthread.
	* resolv/tst-bug18665.c: New file.
	* resolv/tst-bug18665-tcp: Likewise.
	* resolv/tst-res_use_inet6: Likewise.
	* resolv/tst-resolv-basic: Likewise.
	* resolv/tst-resolv-network: Likewise.
	* resolv/tst-resolv-search: Likewise.
	* support/Makefile (libsupport-routines): Add check_addrinfo,
	check_dns_packet, check_hostent, check_netent, resolv_test,
	support_format_address_family, support_format_addrinfo,
	support_format_dns_packet, support_format_herrno,
	support_format_hostent, support_format_netent, support_run_diff,
	xaccept, xbind, xconnect, xfclose, xfopen, xgetsockname, xlisten,
	xmemstream, xpoll, xpthread_once, xrecvfrom, xsendto, xsetsockopt,
	xstrdup, xwrite.
	* support/check_addrinfo.c: New file.
	* support/check_dns_packet.c: Likewise.
	* support/check_hostent.c: Likewise.
	* support/check_netent.c: Likewise.
	* support/check_nss.h: Likewise.
	* support/format_nss.h: Likewise.
	* support/resolv_test.c: Likewise.
	* support/resolv_test.h: Likewise.
	* support/run_diff.h: Likewise.
	* support/support_format_address_family.c: Likewise.
	* support/support_format_addrinfo.c: Likewise.
	* support/support_format_dns_packet.c: Likewise.
	* support/support_format_herrno.c: Likewise.
	* support/support_format_hostent.c: Likewise.
	* support/support_format_netent.c: Likewise.
	* support/support_run_diff.c: Likewise.
	* support/xaccept.c: Likewise.
	* support/xbind.c: Likewise.
	* support/xconnect.c: Likewise.
	* support/xfclose.c: Likewise.
	* support/xfopen.c: Likewise.
	* support/xgetsockname.c: Likewise.
	* support/xlisten.c: Likewise.
	* support/xmemstream.c: Likewise.
	* support/xmemstream.h: Likewise.
	* support/xpoll.c: Likewise.
	* support/xpthread_once.c: Likewise.
	* support/xrecvfrom.c: Likewise.
	* support/xsendto.c: Likewise.
	* support/xsetsockopt.c: Likewise.
	* support/xstdio.h: Likewise.
	* support/xstrdup.c: Likewise.
	* support/support.h (xstrdup): Declare.
	* support/xsocket.h (xsetsockopt, xgetsockname, xconnect, xbind)
	(xlisten, xaccept, xsendto, xrecvfrom, xpoll): Likewise.
	* support/xthread.h (xpthread_once): Likwise.
	* support/xunistd.h (xwrite): Declare.

2016-12-31  Florian Weimer  <fweimer@redhat.com>

	* support/test-driver.h (TEST_DEFAULT_OPTIONS): Add --verbose.
	(test_verbose): Declare.
	* support/test-driver.c (main): Use TEST_DEFAULT_OPTIONS.
	* support/support_test_main.c (default_options): Likewise.
	(usage, support_test_main): Handle 'v'.
	(test_verbose): Define.
	* support/tst-support_record_failure.c (do_test): Use
	test_verbose.
	* support/tst-support_record_failure-2.sh (different_status): Add
	--verbose test.

2016-12-31  Florian Weimer  <fweimer@redhat.com>

	* support/check.h (FAIL_RET, FAIL_EXIT, FAIL_EXIT1): Document that
	test failures are recorded.
	* support/check.c (support_print_failure_impl): Call
	support_record_failure.
	(support_exit_failure_impl): Call support_record_failure if status
	indicates failure.
	* support/delayed_exit.c (delayed_exit_thread): Use FAIL_EXIT1.
	* support/xasprintf.c (xasprintf): Likewise.
	* support/xfork.c (xfork): Likewise.
	* support/xpthread_check_return.c (xpthread_check_return):
	Likewise.
	* support/xsocket.c (xsocket): Likeweise.
	* support/xwaitpid.c (xwaitpid): Likewise.
	* support/support_record_failure.c (struct test_failures): Adjust
	to coding style.
	* support/support_test_verify_impl.c (support_test_verify_impl):
	Adjust error messages.
	* support/tst-support_record_failure-2.sh (different_status):
	Adjust error messages.

2016-12-31  Florian Weimer  <fweimer@redhat.com>

	* support/namespace.h: New file.
	* support/support_become_root.c: Likewise.
	* support/support_enter_network_namespace.c: Likewise.
	* support/tst-support-namespace.c: Likewise.
	* support/xsocket.c: Likewise.
	* support/xsocket.h: Likewise.
	* support/Makefile (libsupport-routines): Add support_become_root,
	support_enter_network_namespace, xsocket.
	(tests): Add tst-support-namespace.

2016-12-31  Florian Weimer  <fweimer@redhat.com>

	[BZ #17252]
	* posix/unistd.h (getentropy): Declare for __USE_MISC, not just
	__USE_GNU.

2016-12-31  Torvald Riegel  <triegel@redhat.com>

	[BZ #13165]
	* nptl/pthread_cond_broadcast.c (__pthread_cond_broadcast): Rewrite to
	use new algorithm.
	* nptl/pthread_cond_destroy.c (__pthread_cond_destroy): Likewise.
	* nptl/pthread_cond_init.c (__pthread_cond_init): Likewise.
	* nptl/pthread_cond_signal.c (__pthread_cond_signal): Likewise.
	* nptl/pthread_cond_wait.c (__pthread_cond_wait): Likewise.
	(__pthread_cond_timedwait): Move here from pthread_cond_timedwait.c.
	(__condvar_confirm_wakeup, __condvar_cancel_waiting,
	__condvar_cleanup_waiting, __condvar_dec_grefs,
	__pthread_cond_wait_common): New.
	(__condvar_cleanup): Remove.
	* npt/pthread_condattr_getclock.c (pthread_condattr_getclock): Adapt.
	* npt/pthread_condattr_setclock.c (pthread_condattr_setclock):
	Likewise.
	* npt/pthread_condattr_getpshared.c (pthread_condattr_getpshared):
	Likewise.
	* npt/pthread_condattr_init.c (pthread_condattr_init): Likewise.
	* nptl/tst-cond1.c: Add comment.
	* nptl/tst-cond20.c (do_test): Adapt.
	* nptl/tst-cond22.c (do_test): Likewise.
	* sysdeps/aarch64/nptl/bits/pthreadtypes.h (pthread_cond_t): Adapt
	structure.
	* sysdeps/arm/nptl/bits/pthreadtypes.h (pthread_cond_t): Likewise.
	* sysdeps/ia64/nptl/bits/pthreadtypes.h (pthread_cond_t): Likewise.
	* sysdeps/m68k/nptl/bits/pthreadtypes.h (pthread_cond_t): Likewise.
	* sysdeps/microblaze/nptl/bits/pthreadtypes.h (pthread_cond_t):
	Likewise.
	* sysdeps/mips/nptl/bits/pthreadtypes.h (pthread_cond_t): Likewise.
	* sysdeps/nios2/nptl/bits/pthreadtypes.h (pthread_cond_t): Likewise.
	* sysdeps/s390/nptl/bits/pthreadtypes.h (pthread_cond_t): Likewise.
	* sysdeps/sh/nptl/bits/pthreadtypes.h (pthread_cond_t): Likewise.
	* sysdeps/tile/nptl/bits/pthreadtypes.h (pthread_cond_t): Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/pthreadtypes.h (pthread_cond_t):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h (pthread_cond_t):
	Likewise.
	* sysdeps/x86/bits/pthreadtypes.h (pthread_cond_t): Likewise.
	* sysdeps/nptl/internaltypes.h (COND_NWAITERS_SHIFT): Remove.
	(COND_CLOCK_BITS): Adapt.
	* sysdeps/nptl/pthread.h (PTHREAD_COND_INITIALIZER): Adapt.
	* nptl/pthreadP.h (__PTHREAD_COND_CLOCK_MONOTONIC_MASK,
	__PTHREAD_COND_SHARED_MASK): New.
	* nptl/nptl-printers.py (CLOCK_IDS): Remove.
	(ConditionVariablePrinter, ConditionVariableAttributesPrinter): Adapt.
	* nptl/nptl_lock_constants.pysym: Adapt.
	* nptl/test-cond-printers.py: Adapt.
	* sysdeps/unix/sysv/linux/hppa/internaltypes.h (cond_compat_clear,
	cond_compat_check_and_clear): Adapt.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_timedwait.c: Remove file ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_wait.c
	(__pthread_cond_timedwait): ... and move here.
	* nptl/DESIGN-condvar.txt: Remove file.
	* nptl/lowlevelcond.sym: Likewise.
	* nptl/pthread_cond_timedwait.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_broadcast.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_signal.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_timedwait.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_wait.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_broadcast.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_signal.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_timedwait.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_wait.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_broadcast.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_signal.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_timedwait.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_wait.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_broadcast.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_signal.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S: Likewise.

2016-12-31  Joseph Myers  <joseph@codesourcery.com>

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(fromfp): New declaration.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (fromfpx): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (ufromfp): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (ufromfpx): Likewise.
	* math/tgmath.h (__TGMATH_TERNARY_FIRST_REAL_RET_ONLY): New macro.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (fromfp): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (ufromfp): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (fromfpx): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (ufromfpx): Likewise.
	* math/math.h: Include <bits/types.h>.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FP_INT_UPWARD): New enum
	constant and macro.
	(FP_INT_DOWNWARD): Likewise.
	(FP_INT_TOWARDZERO): Likewise.
	(FP_INT_TONEARESTFROMZERO): Likewise.
	(FP_INT_TONEAREST): Likewise.
	* math/Versions (fromfp): New libm symbol at version GLIBC_2.25.
	(fromfpf): Likewise.
	(fromfpl): Likewise.
	(ufromfp): Likewise.
	(ufromfpf): Likewise.
	(ufromfpl): Likewise.
	(fromfpx): Likewise.
	(fromfpxf): Likewise.
	(fromfpxl): Likewise.
	(ufromfpx): Likewise.
	(ufromfpxf): Likewise.
	(ufromfpxl): Likewise.
	* math/Makefile (libm-calls): Add s_fromfpF, s_ufromfpF,
	s_fromfpxF and s_ufromfpxF.
	* math/gen-fromfp-tests.py: New file.
	* math/gen-fromfp-tests-inputs: Likewise.
	* math/libm-test.inc: Include <stdint.h>
	(check_intmax_t): New function.
	(check_uintmax_t): Likewise.
	(struct test_fiu_M_data): New type.
	(struct test_fiu_U_data): Likewise.
	(RUN_TEST_fiu_M): New macro.
	(RUN_TEST_LOOP_fiu_M): Likewise.
	(RUN_TEST_fiu_U): Likewise.
	(RUN_TEST_LOOP_fiu_U): Likewise.
	(fromfp_test_data): New array.
	(fromfp_test): New function.
	(fromfpx_test_data): New array.
	(fromfpx_test): New function.
	(ufromfp_test_data): New array.
	(ufromfp_test): New function.
	(ufromfpx_test_data): New array.
	(ufromfpx_test): New function.
	(main): Call fromfp_test, fromfpx_test, ufromfp_test and
	ufromfpx_test.
	* math/gen-libm-test.pl (parse_args): Handle u, M and U descriptor
	characters.
	* math/test-tgmath-ret.c: Include <stdint.h>.
	(rm): New variable.
	(width): Likewise.
	(CHECK_RET_CONST_TYPE): Take extra arguments and pass them to
	called function.
	(CHECK_RET_CONST_FLOAT): Take extra arguments and pass them to
	CHECK_RET_CONST_TYPE.
	(CHECK_RET_CONST_DOUBLE): Likewise.
	(CHECK_RET_CONST_LDOUBLE): Likewise.
	(CHECK_RET_CONST): Take extra arguments and pass them to calls
	macros.
	(fromfp): New CHECK_RET_CONST call.
	(ufromfp): Likewise.
	(fromfpx): Likewise.
	(ufromfpx): Likewise.
	(do_test): Call check_return_fromfp, check_return_ufromfp,
	check_return_fromfpx and check_return_ufromfpx.
	* math/test-tgmath.c: Include <stdint.h>
	(NCALLS): Increase to 138.
	(F(compile_test)): Initialize i.  Call fromfp functions.
	(F(fromfp)): New function.
	(F(fromfpx)): Likewise.
	(F(ufromfp)): Likewise.
	(F(ufromfpx)): Likewise.
	* manual/arith.texi (Rounding Functions): Document FP_INT_UPWARD,
	FP_INT_DOWNWARD, FP_INT_TOWARDZERO, FP_INT_TONEARESTFROMZERO,
	FP_INT_TONEAREST, fromfp, fromfpf, fromfpl, ufromfp, ufromfpf,
	ufromfpl, fromfpx, fromfpxf, fromfpxl, ufromfpx, ufromfpxf and
	ufromfpxl.
	* manual/libm-err-tab.pl (@all_functions): Add fromfp, fromfpx,
	ufromfp and ufromfpx.
	* math/fromfp.h: New file.
	* sysdeps/ieee754/dbl-64/s_fromfp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fromfp_main.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fromfpx.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ufromfp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ufromfpx.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fromfpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fromfpf_main.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fromfpxf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ufromfpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ufromfpxf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fromfpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fromfpl_main.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fromfpxl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ufromfpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ufromfpxl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fromfpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fromfpl_main.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fromfpxl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ufromfpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ufromfpxl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fromfpl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fromfpl_main.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fromfpxl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ufromfpl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ufromfpxl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add fromfp,
	ufromfp, fromfpx and ufromfpx.
	(CFLAGS-nldbl-fromfp.c): New variable.
	(CFLAGS-nldbl-fromfpx.c): Likewise.
	(CFLAGS-nldbl-ufromfp.c): Likewise.
	(CFLAGS-nldbl-ufromfpx.c): Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-compat.h: Include <stdint.h>.
	* sysdeps/ieee754/ldbl-opt/nldbl-fromfp.c: New file.
	* sysdeps/ieee754/ldbl-opt/nldbl-fromfpx.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-ufromfp.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-ufromfpx.c: Likewise.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-12-30  Florian Weimer  <fweimer@redhat.com>

	* resolv/Makefile (libresolv-routines): Rename gethnamaddr to
	compat-gethnamaddr.
	(CPPFLAGS): Remove.
	* resolv/gethnamaddr.c: Rename ...
	* resolv/compat-gethnamaddr.c: ... to this file.
	(_endhtent): Make static.
	(res_gethostbyname): Renamed from gethostbyname.  Turn into compat
	symbol.
	(res_gethostbyname2): Renamed from gethostbyname2.  Turn into
	compat symbol.
	(res_gethostbyaddr): Renamed from gethostbyaddr.  Turn into compat
	symbol.
	(_sethtent, _gethtent, _gethtbyname, gethtbyname2, _gethtbyaddr):
	Turn into compat symbol.
	* include/resolv.h (_endhtent): Remove declaration.

2016-12-30  Joseph Myers  <joseph@codesourcery.com>

	* bits/types.h (__intmax_t): New typedef.
	(__uintmax_t): Likewise.
	* sysdeps/generic/stdint.h: Include <bits/types.h>.
	(intmax_t): Define using __intmax_t.
	(uintmax_t): Define using __uintmax_t.

	* support/Makefile (tests-special): Make definition conditional on
	[$(run-built-tests) = yes].
	($(objpfx)tst-support_record_failure-2.out): Make rule conditional
	on [$(run-built-tests) = yes].

2016-12-30  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* Rules (tests): Add tests-printers-programs to tests to be
	built.

2016-12-28  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysvipc/Makefile (tests): Add test-sysvshm.
	* sysvipc/test-sysvshm.c: New file.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (shmget): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (shmget): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (shmget): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (shmget): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (shmget): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (shmget): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (shmget):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (shmget):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (shmget): Likewise.
	* sysdeps/unix/sysv/linux/shmget.c (shmget): Use shmget syscall if it
	is defined.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (shmdt): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (shmdt): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (shmdt): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (shmdt): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (shmdt): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (shmdt): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (shmdt):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (shmdt):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (shmdt): Likewise.
	* sysdeps/unix/sysv/linux/shmdt.c (shmdt): Use shmdt syscall if it is
	defined.

	* sysdeps/unix/sysv/linux/alpha/Makefile (sysdeps_routines): Remove
	oldshmctl.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list (shmctl): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (shmctl): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (shmctl): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (shmctl): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (shmctl): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (shmctl): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (shmctl):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (shmctl):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (shmctl): Likewise.
	* sysdeps/unix/sysv/linux/alpha/shmctl.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/shmctl.c: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/shmctl.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/shmctl.c: Use default
	implementation.
	* sysdeps/unix/sysv/linux/shmctl.c (__new_shmctl): Use shmctl syscall
	if it is defined.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (shmat): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (shmat): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (shmat): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (shmat): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (shmat): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (shmat): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (shmat):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (shmat):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (shmat): Likewise.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h (__NR_shmat):
	Define to __NR_osf_shmat.
	* sysdeps/unix/sysv/linux/shmat.c (shmat): Use shmat syscall if it is
	defined.

	* sysvipc/Makefile (tests): Add test-sysvsem.
	* sysvipc/test-sysvsem.c: New file.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (semtimedop): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (semtimedop): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (semtimedop):
	Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (semtimedop): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (semtimedop): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (semtimedop):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (semtimedop):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (semtimedop): Likewise.
	* sysdeps/unix/sysv/linux/m68k/semtimedop.S: Remove file.
	* sysdeps/unix/sysv/linux/s390/semtimedop.c: Reorganize headers and
	add a comment about s390 syscall difference from default one.
	* sysdeps/unix/sysv/linux/semtimedop.c (semtimedop): Use semtimedop
	syscall if it is defined.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (semop): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (semop): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (semop): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (semop): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (semop): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (semop): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (semop):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (semop):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (semop): Likewise.
	* sysdeps/unix/sysv/linux/semop.c (semop): Use semop syscall if it is
	defined.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (semget): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (semget): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (semget): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (semget): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (semget): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (semget): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (semget):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (semget):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (semget): Likewise.
	* sysdeps/unix/sysv/linux/semget.c (semget): Use semget syscall
	if it is defined.

	* sysdeps/unix/sysv/linux/alpha/Makefile (sysdeps_routines): Remove
	oldsemctl.
	* sysdeps/unix/sysv/linux/alpha/semctl.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/semctl.c: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/semctl.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/semctl.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/semctl.c: Use defaulf
	implementation.
	* sysdeps/unix/sysv/linux/semctl.c (__new_semctl): Use semctl
	syscall if it is defined.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (semctl): Remove.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list (semctl): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (semctl): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (semctl): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (semctl):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (semctl): Likewise.

	* sysvipc/Makefile (tests): Add test-sysvmsg.
	* sysvipc/test-sysvmsg.c: New file.
	* support/check.h (FAIL_UNSUPPORTED): New define.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (msgget): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (msgget): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (msgget): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (msgget): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (msgget): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (msgget): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (msgget):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (msgget):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (msgget): Likewise.
	* sysdeps/unix/sysv/linux/msgget.c (msgget): Use msgget syscall if
	define.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (msgsnd): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (msgsnd): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (msgsnd): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (msgsnd): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (msgsnd): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (msgsnd): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (msgsnd):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (msgsnd):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (msgsnd): Likewise.
	* sysdeps/unix/sysv/linux/msgsnd.c (__libc_msgsnd): Use msgsnd syscall
	if defined.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (msgctl): Remove.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (msgctl): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (msgctl): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (msgctl): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (msgctl): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (msgctl): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (msgctl):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (msgctl): Likewise,
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (msgctl):
	Likewise.
	* sysdeps/unix/sysv/linux/msgrcv.c (__libc_msgrcv): Use msgrcv syscall
	if defined.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgrcv.c: Remove file.

	* sysdeps/unix/sysv/linux/alpha/Makefile (sysdeps_routines): Remove
	oldmsgctl.
	* sysdeps/unix/sysv/linux/alpha/msgctl.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/msgctl.c: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/msgctl.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list (oldmsgctl): Remove.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (msgctl): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (msgctl): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (msgctl): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list (msgctl):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (msgctl): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/msgctl.c: Use default
	implementation.
	* sysdeps/unix/sysv/linux/msgctl.c (__new_msgctl): Use msgctl syscall
	if defined.

	* sysdeps/unix/sysv/linux/aarch64/ipc_priv.h: New file.
	* sysdeps/unix/sysv/linux/alpha/ipc_priv.h: Avoid included other arch
	definition and define its own.
	* sysdeps/unix/sysv/linux/ipc_ops.h: New file.
	* sysdeps/unix/sysv/linux/x86_64/ipc_priv.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/ipc_priv.h: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips64/ipc_priv.h: New file.
	* sysdeps/unix/sysv/linux/ipc_priv.h: Move ipc syscall operation
	definitions to common header.
	* sysdeps/unix/sysv/linux/powerpc/ipc_priv.h: Use common syscall
	operation from ipc_ops.h.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_DIRECT_SYSVIPC_SYSCALLS): New define.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	(__ASSUME_DIRECT_SYSVIPC_SYSCALLS): Undef.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_DIRECT_SYSVIPC_SYSCALLS): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_DIRECT_SYSVIPC_SYSCALLS): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	(__ASSUME_DIRECT_SYSVIPC_SYSCALLS): Likewise.
	* sysdeps/unix/sysv/linux/s390/kernel-features.h
	(__ASSUME_DIRECT_SYSVIPC_SYSCALLS): Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h
	(__ASSUME_DIRECT_SYSVIPC_SYSCALLS): Likewise.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h
	(__ASSUME_DIRECT_SYSVIPC_SYSCALLS): Likewise.

2016-12-28  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memchr.S (__memchr): Avoid an
	overflow in pointer addition.

2016-12-28  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile
	(sysdep_routines): Add strchr-power8 and strchrnul_power8.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(strchr): Add __strchr_power8 to list of strchr functions.
	(strchrnul): Add __strchrnul_power8 to list of strchr functions.
	* sysdeps/powerpc/powerpc64/multiarch/strchr-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchr.c
	(strchr): Add __strchr_power8 to ifunc list.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul.c
	(__strchrnul): Add __strchrnul_power8 to ifunc list.
	* sysdeps/powerpc/powerpc64/power8/strchr.S: New file.
	* sysdeps/powerpc/powerpc64/power8/strchrnul.S: New file.

2016-12-28  Florian Weimer  <fweimer@redhat.com>

	* support/Makefile (libsupport-routines): Add
	support_test_verify_impl, support_record_failure, xfork, xwaitpid.
	(tests): Add tst-support_record_failure.
	(tests-special): tst-support_record_failure-2.
	(tst-support_record_failure-2.out): Depend on
	tst-support_record_failure-2.sh and tst-support_record_failure.
	* support/check.h (TEST_VERIFY, TEST_VERIFY_EXIT): Define.
	(support_test_verify_impl, support_record_failure)
	(support_report_failure, support_report_failure_reset): Declare.
	* support/support_test_main.c (adjust_exit_status): New function.
	(support_test_main): Call it to incorporate record test failures.
	* support/support_test_verify_impl.c: New file.
	* support/support_record_failure.c: Likewise.
	* support/tst-support_record_failure.c: Likewise.
	* support/tst-support_record_failure-2.sh: Likewise.
	* support/xunistd.h: Likewise.
	* support/xfork.c: Likewise.
	* support/xwaitpid.c: Likewise.

2016-12-27  Steve Ellcey  <sellcey@caviumnetworks.com>

	* scripts/check-c++-types.sh: Add comments.

2016-12-27  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #19514]
	* resolv/res_send.c: Fix typo in comment.
	* sysdeps/i386/i386-mcount.S: Likewise.
	* sysdeps/s390/s390-32/s390-mcount.S: Likewise.
	* sysdeps/s390/s390-64/s390x-mcount.S: Likewise.
	* sysdeps/sparc/sparc-mcount.S: Likewise.

2016-12-27  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/powerpc/fpu/s_fmaxf.S: Remove file.
	* sysdeps/powerpc/fpu/s_fminf.S: Likewise.
	* sysdeps/powerpc/fpu/s_fmax.S: Likewise.
	* sysdeps/powerpc/fpu/s_fmin.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_fmax.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_fmin.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_fmax.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_fmin.S: Likewise.

2016-12-27  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* manual/arith.texi (FP Comparison Functions): Fix typo in iseqsig.

2016-12-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #17252]
	* posix/unistd.h (getentropy): Declare.

2016-12-27  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_hconf.h (HCONF_FLAG_SPOOF, HCONF_FLAG_SPOOFALERT):
	Remove.
	* resolv/res_hconf.c (ENV_SPOOF, arg_spoof): Remove.
	(cmd): Remove spoof, nospoof, spoofalert.
	(parse_line): Ignore spoof-related lines.
	(do_init): Do not process RESOLV_SPOOF_CHECK.

2016-12-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #20964]
	sunrpc: Always obtain AF_INET addresses from NSS.
	* include/rpc/rpc.h (__libc_rpc_gethostbyname): Declare.
	* sunrpc/rpc_gethostbyname.c: New file.
	* sunrpc/Makefile (routines): Add it.
	* sunrpc/clnt_gen.c (clnt_create): Use __libc_rpc_gethostbyname.
	* sunrpc/clnt_simp.c (callrpc): Likewise.
	* sunrpc/getrpcport.c (getrpcport): Likewise.

2016-12-27  Florian Weimer  <fweimer@redhat.com>

	* sunrpc/rpcinfo.c: Remove.
	* sunrpc/Makefile: Remove comments referring to rpcinfo.

2016-12-27  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #19387]
	* sysdeps/x86_64/memchr.S (memchr): Avoid overflow in pointer
	addition.
	* string/test-memchr.c (do_test): Remove alignment limitation.
	(test_main): Add test that trigger BZ #19387.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	Enable stack protectore if requested by ./configure.
	* Makeconfig (+stack-protector): New variable.
	(+cflags): Use it.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	* signal/Makefile (CFLAGS-sigreturn.c): Use $(no-stack-protector).
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c:
	(__rt_sigreturn_stub): Use inhibit_stack_protector.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c
	(__rt_sigreturn_stub, __sigreturn_stub): Likewise.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	* login/Makefile (pt_chown-cflags): Remove.
	* nscd/Makefile (CFLAGS-nscd): Likewise.
	* resolv/Makefile (CFLAGS-libresolv): Likewise.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	* elf/Makefile (CFLAGS-filtmod1.c): Use $(no-stack-protector) for
	non-libc-linking testcase.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>
	    Adhemerval Zanella  <adhemerval.zanella@linaro.org>
	    Florian Weimer  <fweimer@redhat.com>

	[BZ #7065]
	PLT avoidance for __stack_chk_fail*.
	* debug/Makefile (CFLAGS-stack_chk_fail.c)
	(CFLAGS-stack_chk_fail_local.c): Build without stack protector.
	* debug/stack_chk_fail.c (__stack_chk_fail): Add
	__stack_chk_fail_local alias.
	* sysdeps/generic/symbol-hacks.h [IS_IN (libc)]
	(__stack_chk_fail): Turn into hidden reference to
	__stack_chk_fail_local.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	* configure.ac: Add check for unsupported stack-protection level.
	(libc_cv_predef_stack_protector): Remove.
	(no_ssp): New variable.
	(STACK_PROTECTOR_LEVEL): Set to zero when --disable-stack-protector.
	(stack_protector): Set to -fno-stack-protector similarly.
	(libc_cv_ld_gnu_indirect_function): Use no_ssp.
	(libc_cv_asm_set_directive): Likewise.
	(libc_cv_protected_data): Likewise.
	(libc_cv_z_combreloc): Likewise.
	(libc_cv_hashstyle): Likewise.
	(libc_cv_has_glob_dat): Likewise.
	(libc_cv_output_format): Likewise.
	(libc_cv_output_format): Likewise.
	(libc_cv_ehdr_start): Likewise.
	* aclocal.m4 (LIBC_TRY_LINK_STATIC): Likewise.
	(LIBC_LINKER_FEATURE): Likewise.
	(LIBC_COMPILER_BUILTIN_INLINED): Likewise.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	* elf/Makefile (dummy-stack-chk-fail): New.
	(librtld.map): Use it.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	Compile the dynamic linker without stack protection.
	* elf/Makefile (elide-stack-protector): New.
	(CFLAGS-.os): Use it, eliding $(all-rtld-routines).
	(CFLAGS-.o, CFLAGS-.op): Likewise, but for $(elide-routines.os).
	* elf/rtld-Rules (rtld-CFLAGS): Add $(no-stack-protector).
	* sysdeps/i386/Makefile (rtld-CFLAGS): Use +=, not =.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	* config.make.in (have-ssp, no-stack-protector): New.
	* csu/Makefile (CFLAGS-.o, CFLAGS-.op, CFLAGS-.os): Use it.
	* misc/Makefile (CFLAGS-sbrk.o): Likewise.
	(CFLAGS-sbrk.op): Likewise.
	(CFLAGS-brk.o): Likewise.
	(CFLAGS-brk.op): Likewise.
	* string/Makefile (CFLAGS-memcpy.c): Likewise.
	(CFLAGS-wordcopy.c): Likewise.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	* configure.ac (HAVE_CC_NO_STACK_PROTECTOR): Define.
	* config.h.in (HAVE_CC_NO_STACK_PROTECTOR): New macro.
	* include/libc-symbols.h (inhibit_stack_protector): New macro.
	(__ifunc_resolver): Use it.
	* elf/ifuncdep2.c (foo1_ifunc, foo2_ifunc, foo3_ifunc): Apply
	inhibit_stack_protector.
	* elf/ifuncmain6pie.c (foo_ifunc): Likewise.
	* elf/ifuncmain7.c (foo_ifunc): Likewise.
	* elf/ifuncmod1.c (foo_ifunc, foo_hidden_ifunc)
	(foo_protected_ifunc): Likewise.
	* elf/ifuncmod5.c (foo_ifunc, foo_hidden_ifunc)
	(foo_protected_ifunc): Likewise.
	* sysdeps/generic/ifunc-sel.h (ifunc_sel, ifunc_one): Likewise.
	* sysdeps/nacl/nacl_interface_query.c
	(nacl_interface_query_ifunc): Likewise.
	* sysdeps/powerpc/ifunc-sel.h (ifunc_sel, ifunc_one): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/getcpu.c (getcpu_ifunc):
	Likewise.
	* sysdeps/x86_64/ifuncmod8.c (foo_ifunc): Likewise.
	* sysdeps/unix/make-syscalls.sh: Apply inhibit_stack_protector to
	the generated vDSO syscall resolver.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>
	    Florian Weimer  <fweimer@redhat.com>

	[BZ #7065]
	Initialize the stack guard earlier when linking statically.
	* sysdeps/generic/ldsodefs.h (__libc_setup_tls)
	(__pthread_initialize_minimal): Declare.
	* csu/libc-start.c (__pthread_initialize_minimal): Remove
	declaration.
	(LIBC_START_MAIN): Call __libc_setup_tls early and directly.  Move
	stack canary and apply_irel initialization up.  Call
	__pthread_initialize_minimal only if linked in.
	* csu/libc-tls.c (__libc_setup_tls): Replace arguments with their
	constant values.
	(__pthread_initialize_minimal): Remove.
	* nptl/nptl-init.c (__libc_setup_tls): Remove declaration.
	(__pthread_initialize_minimal_internal): Do not call
	__libc_setup_tls.

2016-12-26  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7065]
	* configure.ac (libc_cv_ssp): Move up.
	(libc_cv_ssp_strong): Likewise.
	(libc_cv_ssp_all): New.
	(stack_protector): Augment, adding -fstack-protector-all.
	(no_stack_protector): New.
	(STACK_PROTECTOR_LEVEL): New.
	(AC_ARG_ENABLE(stack-protector)): New configure flag.
	* manual/install.texi (--enable-stack-protector): Document it.
	* config.h.in (STACK_PROTECTOR_LEVEL): New macro.

2016-12-24  Carlos O'Donell  <carlos@redhat.com>

	* README.pretty-printers: Must specify CPPFLAGS-* also.
	* nptl/Makefile (CPPFLAGS-test-mutexattr-printers.c): Define.
	(CPPFLAGS-test-mutex-printers.c): Define.
	(CPPFLAGS-test-condattr-printers.c): Define.
	(CPPFLAGS-test-cond-printers.c): Define.
	(CPPFLAGS-test-rwlockattr-printers.c): Define.
	(CPPFLAGS-test-rwlock-printers.c): Define.

	* nss/Makefile [ifeq (yes,$(have-thread-library))]
	(tests): Add tst-cancel-getpwuid_r.
	* nss/tst-cancel-getpwuid_r.c: New file.

	[BZ #11941]
	* elf/dl-close.c (_dl_close): Take dl_load_lock to examine map.
	Remove assert (map->l_init_called); if DF_1_NODELETE is set.
	* elf/Makefile [ifeq (yes,$(build-shared))] (tests): Add
	tst-nodelete-dlclose.
	(modules-names): Add tst-nodelete-dlclose-dso and
	tst-nodelete-dlclose-plugin.
	($(objpfx)tst-nodelete-dlclose-dso.so): Define.
	($(objpfx)tst-nodelete-dlclose-plugin.so): Define.
	($(objpfx)tst-nodelete-dlclose): Define.
	($(objpfx)tst-nodelete-dlclose.out): Define.

2016-12-23  Florian Weimer  <fweimer@redhat.com>

	* scripts/test_printers_common.py: Log GDB output in case of
	Python detection failure.

2016-12-22  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* configure.ac: Check for python3 or python.
	* configure: Regenerated.
	* config.make.in (PYTHON): New variable.
	* benchtests/Makefile: Don't define PYTHON.
	(bench): Define target only if PYTHON was defined.
	* Rules: Don't define PYTHON.
	Define pretty printer targets only if PYTHON was defined.
	(tests-printers): Add to tests-unsupported if PYTHON is not
	found.
	(python-flags, python-invoke): Remove.
	(tests-printers-out): Use PYTHON instead of python-invoke.

2016-12-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20978]
	* nis/nss_nisplus/nisplus-alias.c (_nss_nisplus_getaliasbyname_r):
	Compare name == NULL, not name != NULL.

	* manual/texinfo.tex: Update to version 2016-09-18.18 with
	trailing whitespace removed.
	* scripts/config.guess: Update to version 2016-10-02.
	* scripts/config.sub: Update to version 2016-11-19.
	* scripts/install-sh: Update to version 2016-01-11.22.
	* scripts/mkinstalldirs: Update to version 2016-01-11.22.
	* scripts/move-if-change: Update to version 2016-01-11 22:04.

2015-12-21  Wilco Dijkstra  <wdijkstr@arm.com>

	* benchtests/bench-strsep.c (oldstrsep): Add old implementation.
	(do_one_test) Restore original string so iteration works.
	* string/string-inlines.c (do_test): Create better input strings.
	(test_main) Reduce number of testruns.
	* string/string-inlines.c (__old_strsep_1c): New function.
	(__old_strsep_2c): Likewise.
	(__old_strsep_3c): Likewise.
	* string/strsep.c (__strsep): Remove case of small delim string.
	Call strcspn directly rather than strpbrk.
	* string/bits/string2.h (__strsep): Remove define.
	(__strsep_1c): Remove.
	(__strsep_2c): Remove.
	(__strsep_3c): Remove.
	(strsep): Remove.
	* sysdeps/unix/sysv/linux/internal_statvfs.c
	(__statvfs_getflags): Rename to __strsep.

2016-12-21  Florian Weimer  <fweimer@redhat.com>

	* csu/libc-tls.c (_dl_tls_setup): Remove.
	* elf/dl-tls.c (_dl_tls_setup): Likewise.
	* elf/Versions (GLIBC_PRIVATE): Remove _dl_tls_setup.
	* sysdeps/generic/ldsodefs.h (_dl_tls_setup): Remove declaration.

2016-12-21  Nick Alcock <nick.alcock@oracle.com>

	[BZ #7065]
	* sysdeps/x86_64/Makefile [$(subdir) = elf]
	(CFLAGS-tst-quad1pie.c, CFLAGS-tst-quad2pie.c): Add $(PIE-ccflag).

2016-12-21  Nick Alcock <nick.alcock@oracle.com>
	    Florian Weimer  <fweimer@redhat.com>

	[BZ #7065]
	* csu/Makefile (tests): Empty assignment and document it.
	(tests-static): Remove.
	* csu/tst-empty.c: Move to...
	* misc/tst-empty.c: ... here.  Switch to new test driver.
	* csu/tst-atomic.c: Move to...
	* misc/tst-atomic.c: ... here.  Switch to new test driver.
	* csu/tst-atomic-long.c: Move to...
	* misc/tst-atomic-long.c: ... here.
	* misc/Makefile (tests): Add tst-empty, tst-atomic,
	tst-atomic-long.
	(tests-static): Add tst-empty.

2016-12-21  Rical Jasan  <ricaljasan@pacific.net>

	* manual/nss.texi: Change incorrect @vtable to @table.
	* manual/arith.texi: Convert @tables of variables to @vtables
	and remove unnecessary indexing.
	* manual/filesys.texi: Likewise.
	* manual/llio.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/process.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/search.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/socket.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/sysinfo.texi: Likewise.
	* manual/syslog.texi: Likewise.
	* manual/terminal.texi: Likewise.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.

2016-12-21  Joseph Myers  <joseph@codesourcery.com>

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(roundeven): New declaration.
	* math/tgmath.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (roundeven): New
	macro.
	* math/Versions (roundeven): New libm symbol at version
	GLIBC_2.25.
	(roundevenf): Likewise.
	(roundevenl): Likewise.
	* math/Makefile (libm-calls): Add s_roundevenF.
	* math/libm-test.inc (roundeven_test_data): New array.
	(roundeven_test): New function.
	(main): Call roundeven_test.
	* math/test-tgmath.c (NCALLS): Increase to 134.
	(F(compile_test)): Call roundeven.
	(F(roundeven)): New function.
	* manual/arith.texi (Rounding Functions): Document roundeven,
	roundevenf and roundevenl.
	* manual/libm-err-tab.pl (@all_functions): Add roundeven.
	* include/math.h (roundeven): Use libm_hidden_proto.
	* sysdeps/ieee754/dbl-64/s_roundeven.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_roundeven.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundevenf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_roundevenl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_roundevenl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_roundevenl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add
	roundeven.
	(CFLAGS-nldbl-roundeven.c): New variable.
	* sysdeps/ieee754/ldbl-opt/nldbl-roundeven.c: New file.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-12-20  Joseph Myers  <joseph@codesourcery.com>

	* math/tgmath.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (llogb): Add
	preprocessor indentation inside #if.

2016-12-20  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/libm-test.inc (fmt_ftostr): New function.
	(print_float, check_float_internal): Replace some uses of
	FTOSTR with uses of fmt_ftostr.
	(print_max_error, print_complex_max_error, print_function_ulps)
	(print_complex_function_ulps): Remove uses of the macros
	PRINTF_EXPR, PRINTF_NEXPR, and PRINTF_XEXPR.
	* math/test-double.h (FTOSTR): Define to strfromd.
	(PRINTF_EXPR): Delete.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	* math/test-float.h (FTOSTR): Define to strfromf.
	(PRINTF_EXPR): Delete.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	* math/test-ldouble.h (FTOSTR): Define to strfroml.
	(PRINTF_EXPR): Delete.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.

2016-12-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/lowlevellock.h
	(__lll_unlock_elision, lll_unlock_elision): Add adapt_count argument.
	* sysdeps/unix/sysv/linux/s390/elision-lock.c:
	(__lll_lock_elision): Decrement adapt_count while unlocking
	instead of before locking.
	* sysdeps/unix/sysv/linux/s390/elision-trylock.c
	(__lll_trylock_elision): Likewise.
	* sysdeps/unix/sysv/linux/s390/elision-unlock.c:
	(__lll_unlock_elision): Likewise.

2016-12-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/htm.h(__libc_tbegin_retry): New macro.
	* sysdeps/unix/sysv/linux/s390/elision-lock.c (__lll_lock_elision):
	Use __libc_tbegin_retry macro.

2016-12-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/Makefile (elision-CFLAGS):
	Add -msoft-float.
	* sysdeps/unix/sysv/linux/s390/htm.h: New File.
	* sysdeps/unix/sysv/linux/s390/elision-lock.c:
	Use __libc_t* transaction macros instead of __builtin_t*.
	* sysdeps/unix/sysv/linux/s390/elision-trylock.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/elision-unlock.c: Likewise.

2016-12-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/elision-lock.c
	(__lll_lock_elision): Use atomics to load / store adapt_count.
	* sysdeps/unix/sysv/linux/s390/elision-trylock.c
	(__lll_trylock_elision): Likewise.

2016-12-20  Florian Weimer  <fweimer@redhat.com>

	Do not require memset elimination in explicit_bzero test.
	* string/tst-xbzero-opt.c (prepare_test_buffer): Force inlining.
	(enum test_expectation): Add NO_EXPECTATIONS.
	(subtests): NO_EXPECTATIONS for ordinary clear.
	(check_test_buffer): Handle NO_EXPECTATIONS.
	* string/Makefile (CFLAGS-tst-xbzero-opt.c): Compile with -O3.

2016-12-20  Joseph Myers  <joseph@codesourcery.com>

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(fmaxmag): New declaration.
	(fminmag): Likewise.
	* math/tgmath.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (fmaxmag): New
	macro.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (fminmag): Likewise.
	* math/Versions (fmaxmag): New libm symbol at version GLIBC_2.25.
	(fmaxmagf): Likewise.
	(fmaxmagl): Likewise.
	(fminmag): Likewise.
	(fminmagf): Likewise.
	(fminmagl): Likewise.
	* math/Makefile (gen-libm-calls): Add s_fmaxmagF and s_fminmagF.
	* math/s_fmaxmag_template.c: New file.
	* math/s_fminmag_template.c: Likewise.
	* math/libm-test.inc (fmaxmag_test_data): New array.
	(fmaxmag_test): New function.
	(fminmag_test_data): New array.
	(fminmag_test): New function.
	(main): Call fmaxmag_test and fminmag_test.
	* math/test-tgmath.c (NCALLS): Increase to 132.
	(F(compile_test)): Call fmaxmag and fminmag.
	(F(fminmag)): New function.
	(F(fmaxmag)): Likewise.
	* manual/arith.texi (Misc FP Arithmetic): Document fminmag,
	fminmagf, fminmagl, fmaxmag, fmaxmagf and fmaxmagl.
	* manual/libm-err-tab.pl (@all_functions): Add fmaxmag and
	fminmag.
	* sysdeps/ieee754/ldbl-opt/nldbl-fmaxmag.c: New file.
	* sysdeps/ieee754/ldbl-opt/nldbl-fminmag.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_fmaxmagl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_fminmagl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add fmaxmag
	and fminmag.
	(CFLAGS-nldbl-fmaxmag.c): New variable.
	(CFLAGS-nldbl-fminmag.c): Likewise.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-12-19  Torvald Riegel  <triegel@redhat.com>

	[BZ #20973]
	* nptl/pthread_mutex_lock.c (__pthread_mutex_lock_full): Fix lost
	wake-up in robust mutexes.
	* nptl/pthread_mutex_timedlock.c (pthread_mutex_timedlock): Likewise.

2016-12-19  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* benchtests/Makefile (bench-math): Add fminf and fmaxf.
	(CFLAGS-bench-fmaxf.c): New rule.
	(CFLAGS-bench-fminf.c): Likewise.
	* benchtests/fmaxf-inputs: New file.
	* benchtests/fminf-inputs: Likewise.

	* benchtests/Makefile (bench-math): Add fmin and fmax.
	(CFLAGS-bench-fmax.c): New rule.
	(CFLAGS-bench-fmin.c): Likewise.
	* benchtests/fmax-inputs: New file.
	* benchtests/fmin-inputs: Likewise.

	* benchtests/bench-string.h (TEST_FUNCTION): Use name without
	parenthesis.
	(CMDLINE_PROCESS): Define using function instead of macro.
	* benchtests/bench-memccpy.c: Include <support/test-driver.c> instead
	of test-skeleton.
	* benchtests/bench-memchr.c: Likewise.
	* benchtests/bench-memcmp.c: Likewise.
	* benchtests/bench-memcpy-large.c: Likewise.
	* benchtests/bench-memcpy.c: Likewise.
	* benchtests/bench-memmem.c: Likewise.
	* benchtests/bench-memmove-large.c: Likewise.
	* benchtests/bench-memmove.c: Likewise.
	* benchtests/bench-memset-large.c: Likewise.
	* benchtests/bench-memset.c: Likewise.
	* benchtests/bench-rawmemchr.c: Likewise.
	* benchtests/bench-strcasecmp.c: Likewise.
	* benchtests/bench-strcasestr.c: Likewise.
	* benchtests/bench-strcat.c: Likewise.
	* benchtests/bench-strchr.c: Likewise.
	* benchtests/bench-strcmp.c: Likewise.
	* benchtests/bench-strcpy.c: Likewise.
	* benchtests/bench-strcpy_chk.c: Likewise.
	* benchtests/bench-strlen.c: Likewise.
	* benchtests/bench-strncasecmp.c: Likewise.
	* benchtests/bench-strncmp.c: Likewise.
	* benchtests/bench-strncpy.c: Likewise.
	* benchtests/bench-strnlen.c: Likewise.
	* benchtests/bench-strpbrk.c: Likewise.
	* benchtests/bench-strrchr.c: Likewise.
	* benchtests/bench-strsep.c: Likewise.
	* benchtests/bench-strspn.c: Likewise.
	* benchtests/bench-strstr.c: Likewise.
	* benchtests/bench-strtok.c: Likewise.

2016-12-19  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86/cpu-features.c (get_common_indeces): Add
	stepping identification.
	(init_cpu_features): Add handle of Haswell.

2016-11-25  Jim Meyering  <meyering@fb.com>

	[BZ #20386]
	Let gcc detect assert(a = 1) errors.
	* assert/assert.h (assert): Rewrite, retaining the old definintion
	when required, but otherwise putting the expression as-is in an "if"
	expression (hence, with no added parentheses) within a statement
	expression.

2016-12-17  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* benchtests/Makefile (binaries-benchset): Depend on libsupport
	DSO.

2016-12-17  Martin Galvan  <martingalvan@sourceware.org>

	* Rules (python-flags, python-invoke): New.
	($(test-printers-out)): Use $(python-flags).

2016-12-16  Joseph Myers  <joseph@codesourcery.com>

	* manual/arith.texi (Math Error Reporting): Document that sNaN
	arguments are not considered domain errors.

2016-12-16  Zack Weinberg <zackw@panix.com>
	    Florian Weimer <fweimer@redhat.com>
	    Nick Mathewson <nickm@torproject.org>

	* string/explicit_bzero.c: New routine.
	* string/test-explicit_bzero.c, string/tst-xbzero-opt.c: New tests.
	* string/Makefile (routines, strop-tests, tests): Add them.
	* string/test-memset.c: Add ifdeffage for testing explicit_bzero.
	* string/string.h [__USE_MISC]: Declare explicit_bzero.

	* debug/explicit_bzero_chk.c: New routine.
	* debug/Makefile (routines): Add it.
	* debug/tst-chk1.c: Test fortification of explicit_bzero.
	* string/bits/string3.h: Fortify explicit_bzero.

	* manual/string.texi: Document explicit_bzero.
	* NEWS: Mention addition of explicit_bzero.

	* crypt/crypt-entry.c (__crypt_r): Clear key-dependent intermediate
	data before returning, using explicit_bzero.
	* crypt/md5-crypt.c (__md5_crypt_r): Likewise.
	* crypt/sha256-crypt.c (__sha256_crypt_r): Likewise.
	* crypt/sha512-crypt.c (__sha512_crypt_r): Likewise.

	* include/string.h: Redirect internal uses of explicit_bzero
	to __explicit_bzero_chk[_internal].
	* string/Versions [GLIBC_2.25]: Add explicit_bzero.
	* debug/Versions [GLIBC_2.25]: Add __explicit_bzero_chk.
	* sysdeps/arm/nacl/libc.abilist
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist
	* sysdeps/unix/sysv/linux/alpha/libc.abilist
	* sysdeps/unix/sysv/linux/arm/libc.abilist
	* sysdeps/unix/sysv/linux/hppa/libc.abilist
	* sysdeps/unix/sysv/linux/i386/libc.abilist
	* sysdeps/unix/sysv/linux/ia64/libc.abilist
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist
	* sysdeps/unix/sysv/linux/nios2/libc.abilist
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist
	* sysdeps/unix/sysv/linux/sh/libc.abilist
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist:
	Add entries for explicit_bzero and __explicit_bzero_chk.

2016-12-16  Joseph Myers  <joseph@codesourcery.com>

	* math/fenv.h
	[__GLIBC_USE (IEC_60559_BFP_EXT) && FE_INVALID && __SUPPORT_SNAN__]
	(FE_SNANS_ALWAYS_SIGNAL): New macro.
	* math/test-fe-snans-always-signal.c: New file.
	* math/Makefile (tests): Add test-fe-snans-always-signal.
	(CFLAGS-test-fe-snans-always-signal.c): New variable.
	* manual/arith.texi (Infinity and NaN): Document
	FE_SNANS_ALWAYS_SIGNAL.

2016-12-16  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* string/test-memchr.c (do_test): Typo on ‚Äòbyte‚Äô and missing closing
	bracket.

2016-12-16  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Context.exec_self): Flush stdout
	before calling execv.

2016-12-16  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #20971]
	* sysdeps/powerpc/powerpc64/power7/memchr.S (__memchr): Avoid
	overflow in pointer addition.
	* string/test-memchr.c (do_test): Add an argument to pass as
	the size on memchr.
	(test_main): Add check for SIZE_MAX.

2016-12-16  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/Makefile (gen-libm-calls): Remove w_scalblnF.
	(libm-calls): Add w_scalblnF.
	* math/w_scalbln.c: Remove.
	* math/w_scalblnf.c: Likewise.
	* math/w_scalblnl.c: Likewise.
	* math/w_scalbln_template.c: New file with type-generic
	implementation based on math/w_scalbln.c.
	* sysdeps/ieee754/ldbl-128ibm/w_scalblnl.c: Remove.
	* sysdeps/ieee754/ldbl-64-128/w_scalblnl.c: Use new template.

2016-12-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20947]
	* sysdeps/i386/fpu/s_fmaxl.S (__fmaxl): Add the arguments when
	either is a signaling NaN.
	* sysdeps/i386/fpu/s_fminl.S (__fminl): Likewise.  Make code
	follow fmaxl more closely.
	* sysdeps/i386/i686/fpu/s_fmaxl.S (__fmaxl): Add the arguments
	when either is a signaling NaN.
	* sysdeps/i386/i686/fpu/s_fminl.S (__fminl): Likewise.
	* sysdeps/x86_64/fpu/s_fmax.S (__fmax): Likewise.
	* sysdeps/x86_64/fpu/s_fmaxf.S (__fmaxf): Likewise.
	* sysdeps/x86_64/fpu/s_fmaxl.S (__fmaxl): Likewise.
	* sysdeps/x86_64/fpu/s_fmin.S (__fmin): Likewise.
	* sysdeps/x86_64/fpu/s_fminf.S (__fminf): Likewise.
	* sysdeps/x86_64/fpu/s_fminl.S (__fminl): Likewise.
	* math/libm-test.inc (fmax_test_data): Add tests of sNaN inputs.
	(fmin_test_data): Likewise.

2016-12-15  Andreas Schwab  <schwab@suse.de>

	* support/support_test_main.c (support_test_main): Don't shadow
	file-local variable test_pid.

2016-12-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20947]
	* sysdeps/powerpc/fpu/s_fmax.S (__fmax): Add the arguments when
	either is a signaling NaN.
	* sysdeps/powerpc/fpu/s_fmin.S (__fmin): Likewise.

2016-12-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20947]
	* math/s_fmax_template.c (M_DECL_FUNC (__fmax)): Add the arguments
	when either is a signaling NaN.
	* math/s_fmin_template.c (M_DECL_FUNC (__fmin)): Likewise.

	* bits/long-double.h: New file.
	* sysdeps/ieee754/ldbl-128/bits/long-double.h: Likewise.
	* sysdeps/ieee754/ldbl-96/bits/long-double.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/bits/long-double.h: Likewise.
	* sysdeps/mips/bits/long-double.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/long-double.h: Likewise.
	* math/Makefile (headers): Add bits/long-double.h.
	* misc/sys/cdefs.h: Include <bits/long-double.h>.
	* stdlib/strtold.c: Include <bits/long-double.h> instead of
	<bits/wordsize.h>.
	* bits/mathdef.h [!_COMPLEX_H]: Do not allow inclusion.
	[!__NO_LONG_DOUBLE_MATH]: Remove conditional code.
	* math/math.h: Do not include <bits/mathdef.h>.
	* sysdeps/aarch64/bits/mathdef.h: Remove file.
	* sysdeps/alpha/bits/mathdef.h [!_COMPLEX_H]: Do not allow
	inclusion.
	* sysdeps/ia64/bits/mathdef.h: Remove file.
	* sysdeps/m68k/m680x0/bits/mathdef.h: Likewise.
	* sysdeps/mips/bits/mathdef.h: Likewise.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.
	* sysdeps/s390/bits/mathdef.h: Likewise.
	* sysdeps/sparc/bits/mathdef.h: Likewise.
	* sysdeps/x86/bits/mathdef.h: Likewise.
	* sysdeps/s390/s390-32/bits/wordsize.h
	[!__NO_LONG_DOUBLE_MATH && !__LONG_DOUBLE_MATH_OPTIONAL]: Remove
	conditional code.
	* sysdeps/s390/s390-64/bits/wordsize.h
	[!__NO_LONG_DOUBLE_MATH && !__LONG_DOUBLE_MATH_OPTIONAL]:
	Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/wordsize.h
	[!__NO_LONG_DOUBLE_MATH && !__LONG_DOUBLE_MATH_OPTIONAL]:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/wordsize.h
	[!__NO_LONG_DOUBLE_MATH && !__LONG_DOUBLE_MATH_OPTIONAL]:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/wordsize.h
	[!__NO_LONG_DOUBLE_MATH && !__LONG_DOUBLE_MATH_OPTIONAL]:
	Likewise.

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h [__USE_GNU]: Include
	<linux/falloc.h>.
	(FALLOC_FL_KEEP_SIZE): Remove.
	(FALLOC_FL_PUNCH_HOLE): Likewise.
	(FALLOC_FL_COLLAPSE_RANGE): Likewise.
	(FALLOC_FL_ZERO_RANGE): Likewise.

2016-12-14  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* stdlib/tst-strfrom.h (ENTRY): Replace use of CSUF with LSUF.

2016-12-14  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/renameat.c: New file.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove renameat.

	* sysdeps/unix/sysv/linux/rename.c: New file.
	* sysdeps/unix/sysv/linux/generic/rename.c: Remove file.

2015-12-14  Wilco Dijkstra  <wdijkstr@arm.com>

	* benchtests/bench-strtok.c (oldstrtok): Add old implementation.
	* string/strtok.c (strtok): Change to tailcall __strtok_r.
	* string/strtok_r.c (__strtok_r): Optimize for performance.
	* string/string-inlines.c (__old_strtok_r_1c): New function.
	* string/bits/string2.h (__strtok_r): Move to string-inlines.c.

2016-12-14  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* math/Makefile (gen-libm-calls): Add w_log1pF.
	(libm-calls): Remove w_log1pF.
	* math/w_log1p.c: Remove.
	* math/w_log1pf.c: Likewise.
	* math/w_log1pl.c: Likewise.
	* math/w_log1p_template.c: New file with type-generic
	implementation based on math/w_log1p.c.
	* sysdeps/ieee754/ldbl-128ibm/w_log1pl.c: Remove.
	* sysdeps/ieee754/ldbl-64-128/w_log1pl.c: Likewise.

2015-12-14  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/rawmemchr.c (RAWMEMCHR): Use faster memchr/strlen.

2016-12-14  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Context.checkout): Default Linux
	kernel version to 4.9.

2016-12-12  Andrew Senkevich  <andrew.senkevich@intel.com>

	* math/Makefile ($(inst_libdir)/libm-$(version).a): New target.
	($(inst_libdir)/libm.a): Fix rule to create the target only.

2016-12-13  Andreas Schwab  <schwab@suse.de>

	* sysdeps/powerpc/dl-procinfo.c: Don't define
	_dl_powerpc_platforms.
	* sysdeps/powerpc/dl-procinfo.h (_dl_string_platform): Use string
	constants instead of referencing _dl_powerpc_platforms.
	(_dl_platform_string): Remove.

2016-12-13  Florian Weimer  <fweimer@redhat.com>

	* nptl/tst-cancel7.c (cmdline_process): Add missing case label.

2016-12-13  Florian Weimer  <fweimer@redhat.com>

	* Rules (binaries-shared-tests, binaries-pie-tests)
	(binaries-static-tests): Link with $(link-extra-libs-tests).
	* Makeconfig (+link-pie-tests, +link-static-tests, +link-tests):
	Remove $(link-extra-libs-tests).

2016-12-13  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile
	(sysdep_routines): Add strncmp_power9.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(strncmp): Add __strncmp_power9 to list of strncmp functions.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power9.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp.c
	(strncmp): Add __strncmp_power9 to ifunc list.
	* sysdeps/powerpc/powerpc64/power9/strncmp.S: New file.

2016-12-12  Florian Weimer  <fweimer@redhat.com>

	[BZ #17252]
	Add getentropy, getrandom.
	* stdlib/sys/random.h: New file.
	(headers): Add it.
	* stdlib/Makefile (routines): Add getentropy, getrandom.
	(tests): Add tst-getrandom.
	* stdlib/Versions (GLIBC_2.25): Add getrandom, getentropy.
	* stdlib/getentropy.c: New file.
	* stdlib/getrandom.c: Likewise.
	* stdlib/tst-getrandom.c: Likewise.
	* sysdeps/unix/sysv/linux/getentropy.c: Likewise.
	* sysdeps/unix/sysv/linux/getrandom.c: Likewise.
	* manual/crypt.texi (Unpredictable Bytes): New section.
	* manual/math.texi (Pseudo-Random Numbers): Add cross-reference.
	* sysdeps/arm/nacl/libc.abilist: Add getrandom, getentropy.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: Likewise.

2016-12-10  Florian Weimer  <fweimer@redhat.com>

	[BZ #20956]
	* debug/tst-backtrace.h (NO_INLINE): Add noclone, weak attributes
	as additional compiler barriers.
	* debug/tst-backtrace2.c: Switch to <support/test-driver.c>.
	(fn2, do_test): Declare with external linkage.
	* debug/tst-backtrace3.c: Switch to <support/test-driver.c>.
	(do_test): Declare with external linkage.
	* debug/tst-backtrace4.c: Switch to <support/test-driver.c>.
	(do_test): Declare with external linkage.
	* debug/tst-backtrace5.c: Switch to <support/test-driver.c>.
	(do_test): Declare with external linkage.

2016-12-10  Andreas Schwab  <schwab@linux-m68k.org>

	* support/support_test_main.c (support_test_main): Use correct
	timeout.

2016-12-09  Carlos O'Donell  <carlos@redhat.com>
	    Florian Weimer  <fweimer@redhat.com>

	[BZ #16421]
	* inet/netinet/in.h (struct in6_addr): Always define __u6_addr16
	and __u6_addr32 members.
	(IN6_IS_ADDR_UNSPECIFIED, IN6_IS_ADDR_LOOPBACK)
	(IN6_IS_ADDR_LINKLOCAL, IN6_IS_ADDR_SITELOCAL)
	(IN6_IS_ADDR_V4MAPPED, IN6_IS_ADDR_V4COMPAT, IN6_ARE_ADDR_EQUAL):
	Use __u6_addr32.
	* inet/tst-checks.c: Use <support/test-driver.c>
	* inet/tst-checks-posix.c: New file.
	* inet/Makefile (tests): Add it.
	(CFLAGS-tst-checks-posix.c): Compile in C99 mode.

2016-12-09  Florian Weimer  <fweimer@redhat.com>

	New subdirectory support for build and test infrastructure.
	* extra-libs.mk (extra-libs-noinstall): Add variable.  Use it when
	setting install-lib.
	* Makeconfig (link-extra-libs-tests): Define.
	(+link-pie-tests, +link-static-tests, +link-tests): Use
	link-extra-libs-tests.
	(rpath-dirs, all-subdirs): Add support.
	(built-modules): Add libsupport.
	(libsupport): Define.
	* support: New directory.
	* support/Makefile: New file.
	* support/check.c: Likewise.
	* support/check.h: Likewise.
	* support/delayed_exit.c: Likewise.
	* support/ignore_stderr.c: Likewise.
	* support/oom_error.c: Likewise.
	* support/set_fortify_handler.c: Likewise.
	* support/support.h: Likewise.
	* support/temp_file-internal.h: Likewise.
	* support/temp_file.c: Likewise.
	* support/test-driver.c: Likewise.
	* support/test-driver.h: Likewise.
	* support/test_main.c: Likewise.
	* support/write_message.c: Likewise.
	* support/xasprintf.c: Likewise.
	* support/xcalloc.c: Likewise.
	* support/xmalloc.c: Likewise.
	* support/xpthread_barrier_destroy.c: Likewise.
	* support/xpthread_barrier_init.c: Likewise.
	* support/xpthread_barrier_wait.c: Likewise.
	* support/xpthread_cancel.c: Likewise.
	* support/xpthread_check_return.c: Likewise.
	* support/xpthread_cond_wait.c: Likewise.
	* support/xpthread_create.c: Likewise.
	* support/xpthread_detach.c: Likewise.
	* support/xpthread_join.c: Likewise.
	* support/xpthread_mutex_lock.c: Likewise.
	* support/xpthread_mutex_unlock.c: Likewise.
	* support/xpthread_sigmask.c: Likewise.
	* support/xpthread_spin_lock.c: Likewise.
	* support/xpthread_spin_unlock.c: Likewise.
	* support/xrealloc.c: Likewise.
	* support/xsignal.h: Likewise.
	* support/xthread.h: Likewise.
	* support_tempfile.h: Likewise.
	* test-skeleton.c: Include <support/support.h>, <support/xsignal.h>.
	(TEST_DATA_LIMIT): Remove unused macro.
	(_FAIL, FAIL_RET, FAIL_EXIT, FAIL_EXIT1): Remove.  Now in
	<support/check.h>.
	(oom_error, xmalloc, xcalloc, xrealloc, xasprintf, write_message)
	(ignore_stderr, set_fortify_handler): Remove.  Now in
	<support/support.h>.
	(xpthread_sigmask): Remove.  Now in <support/xsignal.h>.
	(xpthread_mutex_lock, xpthread_spin_lock, xpthread_cond_wait)
	(xpthread_barrier_wait, xpthread_create, xpthread_detach)
	(xpthread_join): Remove.  Now in <support/xthread.h>.
	(TEST_FUNCTION, PREPARE, CLEANUP_HANDLER, CMDLINE_PROCESS):
	Introduce legacy wrappers.
	* dlfcn/Makefile (bug-atexit3-lib.so): Link with $(libsupport).
	* dlfcn/bug-atexit3-lib.cc: Include <support/support.h>.
	(write_message): Remove.
	* dirent/opendir-tst1.c: Use <support/test-driver.h> instead of
	test-skeleton.c.
	* io/test-open-tmpfile: Likewise.
	* io/tst-posix_fallocate-common.c: Likewise.
	* libio/tst-fseek.c: Likewise.
	* malloc/tst-malloc-backtrace.c: Likewise.
	* malloc/tst-malloc-fork-deadlock.c: Likewise.
	* malloc/tst-malloc-thread-exit.c: Likewise.
	* nptl/tst-cancel7.c: Likewise.
	* nptl/tst-cleanup0.c: Likewise.
	* posix/tst-posix_fadvise-common.c: Likewise.
	* rt/tst-shm.c: Likewise.
	* time/bug-getdate1.c: Likewise.
	* sysdeps/unix/sysv/linux/tst-fallocate-common.c: Likewise.
	* sysdeps/unix/sysv/linux/tst-sync_file_range.c: Likewise.
	* elf/Makefile (tst-piemod1.so): Link against libsupport.

2016-12-08  Joseph Myers  <joseph@codesourcery.com>

	* Rules [$(run-built-tests) != no] (tests-expected): Add
	$(tests-printers).
	(tests): Do not pass $(tests-printers) to merge-test-results.sh.

2016-12-08  Andrew Senkevich  <andrew.senkevich@intel.com>

	[BZ #20539]
	* math/Makefile (install-lib-ldscripts): Add libm.a.
	(install_subdir): Remove.
	(install-others): Add.
	($(inst_libdir)/libm.a): Add rule for installation as
	linker script.
	* Makerules (install-lib.a): Filter out install-lib-ldscripts.

2016-12-08  Martin Galvan  <martin.galvan@tallertechnologies.com>

	* INSTALL: Regenerated.
	* Makeconfig: Add comments and whitespace to make the control flow
	clearer.
	(+link-printers-tests, +link-pie-printers-tests,
	CFLAGS-printers-tests, installed-rtld-LDFLAGS,
	built-rtld-LDFLAGS, link-libc-rpath,
	link-libc-tests-after-rpath-link,
	link-libc-printers-tests): New.
	(rtld-LDFLAGS, rtld-tests-LDFLAGS, link-libc-tests-rpath-link,
	link-libc-tests): Use the new variables as required.
	* Makerules ($(py-const)): New rule.
	generated: Add $(py-const).
	* README.pretty-printers: New file.
	* Rules (tests-printers-programs, tests-printers-out, py-env): New.
	(others): Depend on $(py-const).
	(tests): Depend on $(tests-printers-programs) or
	$(tests-printers-out),
	as required.  Pass $(tests-printers) to merge-test-results.sh.
	* manual/install.texi: Add requirements for testing the pretty
	printers.
	* nptl/Makefile (gen-py-const-headers, pretty-printers,
	tests-printers, CFLAGS-test-mutexattr-printers.c
	CFLAGS-test-mutex-printers.c, CFLAGS-test-condattr-printers.c,
	CFLAGS-test-cond-printers.c, CFLAGS-test-rwlockattr-printers.c
	CFLAGS-test-rwlock-printers.c, tests-printers-libs): Define.
	* nptl/nptl-printers.py: New file.
	* nptl/nptl_lock_constants.pysym: Likewise.
	* nptl/test-cond-printers.c: Likewise.
	* nptl/test-cond-printers.py: Likewise.
	* nptl/test-condattr-printers.c: Likewise.
	* nptl/test-condattr-printers.py: Likewise.
	* nptl/test-mutex-printers.c: Likewise.
	* nptl/test-mutex-printers.py: Likewise.
	* nptl/test-mutexattr-printers.c: Likewise.
	* nptl/test-mutexattr-printers.py: Likewise.
	* nptl/test-rwlock-printers.c: Likewise.
	* nptl/test-rwlock-printers.py: Likewise.
	* nptl/test-rwlockattr-printers.c: Likewise.
	* nptl/test-rwlockattr-printers.py: Likewise.
	* scripts/gen-py-const.awk: Likewise.
	* scripts/test_printers_common.py: Likewise.
	* scripts/test_printers_exceptions.py: Likewise.

2016-12-07  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Context.__init__): Take strip
	argument.
	(Glibc.build_glibc): Strip installed shared libraries if
	requested.
	(get_parser): Add --strip option.
	(main): Update Context call.

2016-12-07  Adhemerval Zanella  <adhemerval.zanella@linaro.org>
	    Dominik Vogt  <vogt@linux.vnet.ibm.com>

	[BZ #20847]
	* posix/execvpe.c (maybe_script_execute): Remove write past allocated
	array bounds for else branch.
	(__execvpe): Style fixes.
	* posix/tst-vfork3.c (run_script): New function.
	(create_script): Likewise.
	(do_test): Use run_script internal function.
	(do_prepare): Use create_script internal function.

2016-12-07  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/x86/elision-conf.h
	(__elision_available): Don't declare.
	* sysdeps/unix/sysv/linux/x86/elision-conf.c
	(__elision_available): Don't define.
	(elision_init): Don't set __elision_available.

2016-12-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20940]
	* sysdeps/ieee754/dbl-64/e_hypot.c (__ieee754_hypot): Do not
	return Inf for arguments Inf and sNaN.
	* sysdeps/ieee754/flt-32/e_hypotf.c (__ieee754_hypotf): Likewise.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c (__ieee754_hypotl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c (__ieee754_hypotl): Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c (TEST_INF_NAN): Do not return Inf
	for arguments Inf and sNaN.  When returning a NaN, compute it by
	arithmetic on the arguments.
	* sysdeps/powerpc/fpu/e_hypotf.c (TEST_INF_NAN): Likewise.
	* math/libm-test.inc (hypot_test_data): Add tests of sNaN
	arguments.

2016-12-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20916]
	* sysdeps/i386/fpu/e_powl.S (__ieee754_powl): Do not return 1 for
	arguments (sNaN, 0) or (1, sNaN).  Do arithmetic on NaN arguments
	to compute result.
	* sysdeps/x86_64/fpu/e_powl.S (__ieee754_powl): Likewise.
	* math/libm-test.inc (pow_test_data): Add tests of sNaN arguments.

2016-12-05  Torvald Riegel  <triegel@redhat.com>

	* include/atomic.h (__atomic_check_size_ls): New.
	(atomic_load_relaxed, atomic_load_acquire, atomic_store_relaxed,
	atomic_store_release): Use it.
	* sysdeps/x86/elide.h (ACCESS_ONCE): Remove.
	(elision_adapt, ELIDE_LOCK): Use atomics.
	* sysdeps/unix/sysv/linux/x86/elision-lock.c (__lll_lock_elision): Use
	atomics and improve code comments.
	* sysdeps/unix/sysv/linux/x86/elision-trylock.c
	(__lll_trylock_elision): Likewise.

2016-12-04  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurd.h: Cast errno constants to error_t to fix usage in C++
	programs.

2016-12-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20916]
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Do not return 1
	for arguments (sNaN, 0) or (1, sNaN).  Do arithmetic on NaN
	arguments to compute result.
	* sysdeps/ieee754/flt-32/e_powf.c (__ieee754_powf): Do not return
	1 for arguments (sNaN, 0) or (1, sNaN).
	* sysdeps/ieee754/ldbl-128/e_powl.c (__ieee754_powl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Likewise.

	[BZ #20919]
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Do not return
	NaN first argument when raised to power 0.
	* math/w_pow.c (__pow): Do not check for NaN or zero results from
	raising to power zero.
	* math/w_powf.c (__powf): Likewise.
	* math/w_powl.c (__powl): Likewise.
	* sysdeps/ieee754/k_standard.c (__kernel_standard): Do not handle
	pow (0, 0) or pow (NaN, 0).

2016-12-02  Carlos O'Donell  <carlos@redhat.com>

	[BZ #20918]
	* configure.ac: Test for static NSS cryptographic libraries and set
	libc_cv_static_nss_crypt.
	* configure: Regenerate.
	* config.make.in (static-nss-crypt): Define.
	* elf/Makefile (CFLAGS-tst-linkall-static.c): Define.
	[ifeq (yesno,$(nss-crypt)$(static-nss-crypt))]
	(CFLAGS-tst-linkall-static.c): Define.
	($(objpfx)tst-linkall-static): Remove libcrypt.a.
	[ifeq (yesyes,$(nss-crypt)$(static-nss-crypt))]
	($(objpfx)tst-linkall-static): Define.
	[ifeq (no,$(nss-crypt))] ($(objpfx)tst-linkall-static): Define.
	* elf/tst-linkall-static.c [USE_CRYPT](references): Reference crypt().

2016-12-02  Florian Weimer  <fweimer@redhat.com>

	* elf/Makefile [build-shared] (tests): Add tst-latepthread.
	(one-hundred, tst-tls-many-dynamic-modules): Define.
	(modules-names): Add $(tst-tls-many-dynamic-modules).
	(tst-tls-manydynamic%mod.os): Build with special preprocessor
	macros.
	(tst-tls-manydynamic): Link against libdl, libpthread.
	(tst-tls-manydynamic.out): The test needs the test modules at run
	time.
	* elf/tst-tls-manydynamic.c: New file.
	* elf/tst-tls-manydynamic.h: Likewise.
	* elf/tst-tls-manydynamicmod.c: Likewise.

2016-12-02  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/aarch64/tlsdesc.sym (TCBHEAD_DTV, DTV_COUNTER)
	(TLS_DTV_UNALLOCATED): Add.
	* sysdeps/aarch64/dl-tlsdesc.S (_dl_tlsdesc_dynamic): Use explicit
	offsets.

2016-12-02  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerated.

2016-12-02  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* elf/Makefile (CFLAGS-tst-latepthreadmod.c):
	Add -fno-optimize-sibling-calls.

2016-12-02  Joseph Myers  <joseph@codesourcery.com>

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (llogb):
	New declaration.
	* math/tgmath.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (llogb): New
	macro.
	* math/math.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (__FP_LONG_MAX):
	New macro.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FP_LLOGB0): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FP_LLOGBNAN): Likewise.
	* math/Versions (llogb): New libm symbol at version GLIBC_2.25.
	(llogbf): Likewise.
	(llogbl): Likewise.
	* math/Makefile (gen-libm-calls): Add w_llogbF.
	(tests): Add test-fp-llogb-constants.
	* math/w_llogb_template.c: New file.  Based on
	math/w_ilogb_template.c.
	* math/libm-test.inc (llogb_test_data): New array.
	(llogb_test): New function.
	(main): Call llogb_test.
	* math/test-fp-llogb-constants.c: New file.  Based on
	math/test-fp-ilogb-constants.c.
	* math/test-tgmath-ret.c (llogb): New CHECK_RET_CONST call.
	(do_test): Call check_return_llogb.
	* math/test-tgmath.c (NCALLS): Increase to 126.
	(F(compile_test)): Call llogb.
	(F(llogb)): New function.
	* manual/math.texi (Exponents and Logarithms): Document llogb,
	llogbf, llogbl, FP_LLOGB0 and FP_LLOGBNAN.
	* manual/libm-err-tab.pl (@all_functions): Add llogb.
	* sysdeps/ieee754/ldbl-opt/nldbl-llogb.c: New file.
	* sysdeps/ieee754/ldbl-opt/w_llogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add llogb.
	(CFLAGS-nldbl-llogb.c): New variable.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-12-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-128/s_getpayloadl.c (getpayloadl): Use
	_Float128 instead of long double.
	* sysdeps/ieee754/ldbl-128/s_setpayloadl_main.c (FUNC): Likewise.

	* sysdeps/alpha/setjmp.S (__sigsetjmp): Use hidden_def.
	* sysdeps/hppa/setjmp.S (__sigsetjmp): Likewise.
	* sysdeps/mips/mips64/setjmp.S (__sigsetjmp): Likewise.
	* sysdeps/mips/setjmp.S (__sigsetjmp): Likewise.
	* sysdeps/sh/sh3/setjmp.S (__sigsetjmp): Likewise.
	* sysdeps/sh/sh4/setjmp.S (__sigsetjmp): Likewise.
	* sysdeps/sparc/sparc32/setjmp.S (__sigsetjmp): Likewise.
	* sysdeps/tile/setjmp.S (__sigsetjmp): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/setjmp.S (__sigsetjmp):
	Likewise.

2016-12-01  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/powerpc/powerpc64/multiarch/strrchr-ppc64.c (weak_alias):
	Remove redirection to __strrchr_ppc.

2016-12-01  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile
	(sysdep_routines): Add strcmp_power9.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(strcmp): Add __strcmp_power9 to list of strcmp functions.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-power9.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp.c
	(strcmp): Add __strcmp_power9 to ifunc list.
	* sysdeps/powerpc/powerpc64/power9/strcmp.S: New file.

2016-12-01  Joseph Myers  <joseph@codesourcery.com>

	* bits/fp-logb.h: New file.
	* sysdeps/ia64/bits/fp-logb.h: Likewise.
	* sysdeps/m68k/m680x0/bits/fp-logb.h: Likewise.
	* sysdeps/x86/bits/fp-logb.h: Likewise.
	* math/Makefile (headers): Add bits/fp-logb.h.
	* math/math.h: Include <bits/fp-logb.h>.
	[__USE_ISOC99] (FP_ILOGB0): Define based on __FP_LOGB0_IS_MIN.
	[__USE_ISOC99] (FP_ILOGBNAN): Define based on __FP_LOGBNAN_IS_MIN.
	* bits/mathdef.h (FP_ILOGB0): Remove.
	(FP_ILOGBNAN): Likewise.
	* sysdeps/aarch64/bits/mathdef.h (FP_ILOGB0): Likewise.
	(FP_ILOGBNAN): Likewise.
	* sysdeps/alpha/bits/mathdef.h (FP_ILOGB0): Likewise.
	(FP_ILOGBNAN): Likewise.
	* sysdeps/ia64/bits/mathdef.h (FP_ILOGB0): Likewise.
	(FP_ILOGBNAN): Likewise.
	* sysdeps/m68k/m680x0/bits/mathdef.h (FP_ILOGB0): Likewise.
	(FP_ILOGBNAN): Likewise.
	* sysdeps/mips/bits/mathdef.h (FP_ILOGB0): Likewise.
	(FP_ILOGBNAN): Likewise.
	* sysdeps/powerpc/bits/mathdef.h (FP_ILOGB0): Likewise.
	(FP_ILOGBNAN): Likewise.
	* sysdeps/s390/bits/mathdef.h (FP_ILOGB0): Likewise.
	(FP_ILOGBNAN): Likewise.
	* sysdeps/sparc/bits/mathdef.h (FP_ILOGB0): Likewise.
	(FP_ILOGBNAN): Likewise.
	* sysdeps/x86/bits/mathdef.h (FP_ILOGB0): Likewise.
	(FP_ILOGBNAN): Likewise.

	* scripts/build-many-glibcs.py: Add bot to usage message.  Import
	time module.
	(Context.__init__): Initialize self.logsdir_old.
	(Context.run_builds): Handle bot action.
	(Context.bot_cycle): Copy logs directory before running builds.
	(Context.bot_run_self): Take argument for whether to check
	subprocess result.  Flush stdout before running subprocess.
	(Context.bot): New function.
	(get_parser): Allow bot action.

2016-11-30  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py: Add bot-cycle to usage message.
	Import email.mime.text, email.utils and smtplib modules.
	(Context.__init__): Initialize self.bot_config_json.
	(Context.run_builds): Handle bot-cycle action.
	(Context.load_bot_config_json): New function.
	(Context.part_build_old): Likewise.
	(Context.bot_cycle): Likewise.
	(Context.bot_build_mail): Likewise.
	(Context.bot_run_self): Likewise.
	(get_parser): Allow bot-cycle action.

2016-11-30  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-ppc64.c (weak_alias):
	Remove redirection to __stpcpy_ppc.

2016-11-30  Florian Weimer  <fweimer@redhat.com>

	Remove __libc_memalign from ld.so because it is unused.
	* elf/dl-minimal.c: Update comment on the malloc implementation.
	(malloc): Renamed from __libc_memalign, replacing the original
	malloc implementation.  Replace the align parameter with
	MALLOC_ALIGNMENT.
	* elf/Versions (ld): Update comment and remove __libc_memalign.
	* sysdeps/nacl/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld-le.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ld.abilist: Likewise.
	* sysdeps/generic/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/alpha/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/arm/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/hppa/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/i386/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/ia64/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/m68k/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/nios2/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/localplt.data
	(ld.so): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/localplt.data
	(ld.so): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/localplt.data (ld.so):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/sh/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/localplt.data (ld.so): Likewise.
	* sysdeps/x86_64/localplt.data (ld.so): Likewise.

2016-11-30  Florian Weimer  <fweimer@redhat.com>

	[BZ #16628]
	Implement _dl_catch_error, _dl_signal_error in libc.so.
	* elf/dl-error-skeleton.c: Rename from elf/dl-error.c.
	(catch_hook): Define as thread-local or regular variable,
	depending on DL_ERROR_BOOTSTRAP.
	(CATCH_HOOK): Remove.
	(dl_signal_error, _dl_catch_error): Use
	catch_hook.  Add hidden definition for libc.
	(_dl_receive_error, _dl_signal_cerror): Use catch_hook.  Compile
	for DL_ERROR_BOOTSTRAP only.
	* elf/dl-error.c: New file.
	* elf/dl-error-minimal.c: Likewise.
	* elf/tst-latepthread.c: Likewise.
	* elf/tst-latepthreadmod.c: Likewise.
	* elf/Makefile (routines): Add dl-error.
	(dl-routines): Remove dl-error.
	(rtld-routines): Add dl-error-minimal.
	[build-shared] (tests): Add tst-latepthread.
	(module-names): Add tst-latepthreadmod.
	(LDFLAGS-tst-latepthreadmod.so): Enable lazy binding to undefined
	symbol.
	(tst-latepthreadmod.so): Link against libpthread.
	(tst-latepthread): Link against libdbl.
	* elf/Versions [libc] (GLIBC_PRIVATE): Add _dl_signal_error,
	_dl_catch_error.
	[ld] (GLIBC_PRIVATE): Likewise.
	* elf/dl-close.c (_dl_cose): Call _dl_signal_error directly.
	* elf/dl-libc.c (dlerror_run): Call _dl_catch_error directly.
	* elf/dl-sym.c (do_sym): Call _dl_signal_error, _dl_catch_error
	directly.
	* elf/dl-tsd.c: Remove file.
	* elf/rtld.c (_rtld_global_ro): Remove initializers for
	_dl_catch_error, _dl_signal_error.
	(_dl_initial_error_catch_tsd): Remove definition.
	(do_preload): Remove initialization of dl_error_catch_tsd.
	* dlfcn/dlerror.c (_dlerror_run): Call _dl_catch_error directly.
	* dlfcn/dlinfo.c (dlinfo_doit): Call _dl_signal_error directly.
	* dlfcn/dlmopen.c (dlmopen_doit): Likewise.
	* dlfcn/dlopen.c (dlopen_doit): Likewise.
	* nptl/nptl-init.c (__pthread_initialize_minimal_internal): Do not
	set dl_error_catch_tsd.
	* sysdeps/generic/ldsodefs.h (struct rtld_global): Remove
	_dl_error_catch_tsd member.
	(struct rtld_global_ro): Remove _dl_catch_error, _dl_signal_error
	members.
	(_dl_initial_error_catch_tsd): Remove declaration.
	(_dl_dprintf): Provide definition for use outside of ld.so.
	[!rtld] (_dl_signal_cerror): Redirect to _dl_signal_error.
	(_dl_signal_error, _dl_catch_error): Make public.  Add hidden
	prototype for libc.
	* sysdeps/generic/localplt.data (ld.so): Add _dl_signal_error,
	_dl_catch_error.
	* sysdeps/unix/sysv/linux/aarch64/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/alpha/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/arm/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/hppa/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/i386/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/ia64/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/m68k/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/localplt.data (ld.so):
	Likewise.
	* sysdeps/unix/sysv/linux/nios2/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/localplt.data
	(ld.so): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/localplt.data
	(ld.so): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/localplt.data (ld.so):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/sh/localplt.data (ld.so): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/localplt.data (ld.so):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/localplt.data (ld.so):
	Likewise.
	* sysdeps/x86_64/localplt.data (ld.so): Likewise.

2016-11-30  Florian Weimer  <fweimer@redhat.com>

	[BZ #4099]
	* libio/filedoalloc.c (_IO_file_doallocate): Limit buffer size to
	_IO_BUFSIZ (8192).

2016-11-30  Carlos O'Donell  <carlos@redhat.com>

	* PROJECTS: Remove file.

2016-11-29  Florian Weimer  <fweimer@redhat.com>

	* iconvdata/gbk.c (BODY): Add Euro sign support (both directions).

2016-11-29  Yury Norov  <ynorov@caviumnetworks.com>
	    Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/unix/sysv/linux/generic/wordsize-32/fxstat.c: Do not define
	fxstat if XSTAT_IS_XSTAT64 is set to non-zero.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/fxstatat.c: Ditto for
	fxstatat.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/lxstat.c: Ditto for
	lxstat.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/xstat.c: Ditto for xstat.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/fxstat64.c: New file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/fxstatat64.c: New file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/lxstat64.c: Make __lxstat
	an alias of __lxstat64 if XSTAT_IS_XSTAT64 is set to non-zero.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/xstat64.c: Ditto for
	__xstat.

2016-11-29  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/powerpc/powerpc64/setjmp-common.S (__GI___sigsetjmp):
	Define.
	* sysdeps/powerpc/powerpc32/setjmp.S (__sigsetjmp): Add hidden
	definition.

2016-11-29  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/powerpc/powerpc32/fpu/__longjmp.S (__longjmp): Remove
	version and turn into strong alias.  Remove compat symbol.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist
	(__longjmp): Remove.

2016-11-29  Joseph Myers  <joseph@codesourcery.com>

	* bits/fp-fast.h: New file.
	* sysdeps/aarch64/bits/fp-fast.h: Likewise.
	* sysdeps/powerpc/bits/fp-fast.h: Likewise.
	* math/Makefile (headers): Add bits/fp-fast.h.
	* math/math.h: Include <bits/fp-fast.h>.
	* bits/mathdef.h (FP_FAST_FMA): Remove.
	(FP_FAST_FMAF): Likewise.
	(FP_FAST_FMAL): Likewise.
	* sysdeps/aarch64/bits/mathdef.h (FP_FAST_FMA): Likewise.
	(FP_FAST_FMAF): Likewise.
	* sysdeps/powerpc/bits/mathdef.h (FP_FAST_FMA): Likewise.
	(FP_FAST_FMAF): Likewise.
	* sysdeps/x86/bits/mathdef.h (FP_FAST_FMA): Likewise.
	(FP_FAST_FMAF): Likewise.
	(FP_FAST_FMAL): Likewise.
	* sysdeps/arm/bits/mathdef.h: Remove file.
	* sysdeps/hppa/fpu/bits/mathdef.h: Likewise.
	* sysdeps/sh/sh4/bits/mathdef.h: Likewise.
	* sysdeps/tile/bits/mathdef.h: Likewise.

2016-11-28  Joseph Myers  <joseph@codesourcery.com>

	* math/w_ilogb_template.c: New file.  Based on math/w_ilogb.c.
	* math/w_ilogb.c: Remove.
	* math/w_ilogbf.c: Likewise.
	* math/w_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_ilogb.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_ilogbl.c: Likewise.
	* math/Makefile (gen-libm-calls): Add w_ilogbF.
	(libm-calls): Remove w_ilogbF.
	* sysdeps/ieee754/ldbl-opt/math-type-macros-double.h
	(LDOUBLE_ilogbl_libm_version): New macro.

	* sysdeps/unix/sysv/linux/ia64/tst-setcontext2.c: New file.

	* sysdeps/ia64/fpu/libm-symbols.h: Make contents conditional on
	[!__STRICT_ANSI__ && !__cplusplus].

2016-11-28  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20750]
	* sysdeps/x86_64/sysdep.h (JUMPTARGET): Check SHARED instead
	of PIC.

2016-11-28  Andrew Pinski  <andrew.pinski@caviumnetworks.com>
	    Yury Norov  <ynorov@caviumnetworks.com>
	    Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/aarch64/crti.S: Add include of sysdep.h.
	(call_weak_fn): Use PTR_REG to get correct reg name in ILP32.
	* sysdeps/aarch64/dl-irel.h: Add include of sysdep.h.
	(elf_irela): Use AARCH64_R macro to get correct relocation in ILP32.
	* sysdeps/aarch64/dl-machine.h: Add include of sysdep.h.
	(elf_machine_load_address, RTLD_START, RTLD_START_1, RTLD_START,
	elf_machine_type_class, ELF_MACHINE_JMP_SLOT, elf_machine_rela,
	elf_machine_lazy_rel): Add ifdef's for ILP32 support.
	* sysdeps/aarch64/dl-tlsdesc.S (_dl_tlsdesc_return,
	_dl_tlsdesc_return_lazy, _dl_tlsdesc_dynamic,
	_dl_tlsdesc_resolve_hold): Extend pointers in ILP32, use PTR_REG
	to get correct reg name for ILP32.
	* sysdeps/aarch64/dl-trampoline.S (ip01): New Macro.
	(RELA_SIZE): New Macro.
	(_dl_runtime_resolve, _dl_runtime_profile): Use new macros and PTR_REG
	to support ILP32.
	* sysdeps/aarch64/jmpbuf-unwind.h (_JMPBUF_CFA_UNWINDS_ADJ): Add
	cast for ILP32 mode.
	* sysdeps/aarch64/memcmp.S (memcmp): Extend arg pointers for ILP32 mode.
	* sysdeps/aarch64/memcpy.S (memmove, memcpy): Ditto.
	* sysdeps/aarch64/memset.S (__memset): Ditto.
	* sysdeps/aarch64/strchr.S (strchr): Ditto.
	* sysdeps/aarch64/strchrnul.S (__strchrnul): Ditto.
	* sysdeps/aarch64/strcmp.S (strcmp): Ditto.
	* sysdeps/aarch64/strcpy.S (strcpy): Ditto.
	* sysdeps/aarch64/strlen.S (__strlen): Ditto.
	* sysdeps/aarch64/strncmp.S (strncmp): Ditto.
	* sysdeps/aarch64/strnlen.S (strnlen): Ditto.
	* sysdeps/aarch64/strrchr.S (strrchr): Ditto.
	* sysdeps/unix/sysv/linux/aarch64/clone.S: Ditto.
	* sysdeps/unix/sysv/linux/aarch64/setcontext.S (__setcontext): Ditto.
	* sysdeps/unix/sysv/linux/aarch64/swapcontext.S (__swapcontext): Ditto.
	* sysdeps/aarch64/__longjmp.S (__longjmp): Extend pointers in ILP32,
	change PTR_MANGLE call to use register numbers instead of names.
	* sysdeps/unix/sysv/linux/aarch64/getcontext.S (__getcontext): Ditto.
	* sysdeps/aarch64/setjmp.S (__sigsetjmp): Extend arg pointers for
	ILP32 mode, change PTR_MANGLE calls to use register numbers.
	* sysdeps/aarch64/start.S (_start): Ditto.
	* sysdeps/aarch64/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_INT_FLAGS_SHARED): New define.
	(__SIZEOF_PTHREAD_ATTR_T, __SIZEOF_PTHREAD_MUTEX_T,
	__SIZEOF_PTHREAD_MUTEXATTR_T, __SIZEOF_PTHREAD_COND_T,
	__SIZEOF_PTHREAD_COND_COMPAT_T, __SIZEOF_PTHREAD_CONDATTR_T,
	__SIZEOF_PTHREAD_RWLOCK_T, __SIZEOF_PTHREAD_RWLOCKATTR_T,
	__SIZEOF_PTHREAD_BARRIER_T, __SIZEOF_PTHREAD_BARRIERATTR_T):
	Make defined values dependent on __ILP32__.
	* sysdeps/aarch64/nptl/bits/semaphore.h (__SIZEOF_SEM_T): Change define.
	(sem_t): Change __align type.
	* sysdeps/aarch64/sysdep.h (AARCH64_R, PTR_REG, PTR_LOG_SIZE, DELOUSE,
	PTR_SIZE): New Macros.
	(LDST_PCREL, LDST_GLOBAL) Update to use PTR_REG.
	* sysdeps/unix/sysv/linux/aarch64/bits/fcntl.h (O_LARGEFILE):
	Set when in ILP32 mode.
	(F_GETLK64, F_SETLK64, F_SETLKW64): Only set in LP64 mode.
	* sysdeps/unix/sysv/linux/aarch64/dl-cache.h (DL_CACHE_DEFAULT_ID):
	Set elf flags for ILP32.
	(add_system_dir): Set ILP32 library directories.
	* sysdeps/unix/sysv/linux/aarch64/init-first.c
	(_libc_vdso_platform_setup): Set minimum kernel version for ILP32.
	* sysdeps/unix/sysv/linux/aarch64/ldconfig.h
	(SYSDEP_KNOWN_INTERPRETER_NAMES): Add ILP32 names.
	* sysdeps/unix/sysv/linux/aarch64/sigcontextinfo.h (GET_PC, SET_PC):
	New Macros.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Handle ILP32 pointers.

2016-11-28  Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/unix/sysv/linux/fstatfs64.c: Reorder include files,
	only alias fstatfs and __fstatfs if STATFS_IS_STATFS64 is non-zero.
	* sysdeps/unix/sysv/linux/statfs64.c: Ditto for statfs and __statfs.

2016-11-28  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/nios2/sys/cachectl.h: Do not include
	<asm/cachectl.h>.

2016-11-27  Zack Weinberg  <zackw@panix.com>

	* libio/libio.h: Use __USE_GNU, not _GNU_SOURCE, in a conditional.
	* test-skeleton.c: Include stdint.h to ensure uintptr_t is available.

2016-11-27  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurd/signal.h (HURD_MSGPORT_RPC): Cast expressions results to
	error_t to fix usage in C++ programs.

2016-11-26  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py: Import datetime module.
	(Context.__init__): Load JSON build state.  Initialize list of
	status logs.
	(Context.run_builds): Update saved build state.
	(Context.add_makefile_cmdlist): Update list of status logs.
	(Context.load_build_state_json): New function.
	(Context.store_build_state_json): Likewise.
	(Context.clear_last_build_state): Likewise.
	(Context.update_build_state): Likewise.
	(CommandList.status_logs): Likewise.

2016-11-25  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Context.__init__): Save text of
	script being executed.
	(Context.get_script_text): New function.
	(Context.exec_self): Likewise.
	(Context.checkout): Re-exec script if changed by checkout process.

2016-11-24  Joseph Myers  <joseph@codesourcery.com>

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(setpayloadsig): New declaration.
	* math/Versions (setpayloadsig): New libm symbol at version
	GLIBC_2.25.
	(setpayloadsigf): Likewise.
	(setpayloadsigl): Likewise.
	* math/Makefile (libm-calls): Add s_setpayloadsigF.
	* math/libm-test.inc (RUN_TEST_Ff_b1): Call feclearexcept
	(FE_ALL_EXCEPT) after initializing EXTRA_VAR.
	(setpayloadsig_test_data): New array.
	(setpayloadsig_test): New function.
	(main): Call setpayloadsig_test.
	* manual/arith.texi (FP Bit Twiddling): Document setpayloadsig,
	setpayloadsigf and setpayloadsigl.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.
	* sysdeps/ieee754/dbl-64/s_setpayloadsig.c: New file.
	* sysdeps/ieee754/flt-32/s_setpayloadsigf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_setpayloadsigl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_setpayloadsigl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_setpayloadsigl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-setpayloadsig.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add
	setpayloadsig.
	(CFLAGS-nldbl-setpayloadsig.c): New variable.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

	* scripts/build-many-glibcs.py: Import json module.
	(Context.__init__): Take replace_sources argument.  Load
	versions.json.
	(Context.load_versions_json): New function.
	(Context.store_json): Likewise.
	(Context.store_versions_json): Likewise.
	(Context.set_component_version): Likewise.
	(Context.checkout): Update versions.json.  Check for and handle
	changes of version.  Prefer previously explicitly specified
	version to default version.
	(Context.checkout_vcs): Return a revision identifier.
	(Context.git_checkout): Likewise.
	(Context.gcc_checkout): Likewise.
	(get_parser): Add --replace-sources option.
	(main): Pass replace_sources argument to Context call.

2016-11-24  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #651]
	* sysdeps/nptl/fork.c (__libc_fork): Remove pid cache setting.
	* nptl/allocatestack.c (allocate_stack): Likewise.
	(__reclaim_stacks): Likewise.
	(setxid_signal_thread): Obtain pid through syscall.
	* nptl/nptl-init.c (sigcancel_handler): Likewise.
	(sighandle_setxid): Likewise.
	* nptl/pthread_cancel.c (pthread_cancel): Likewise.
	* sysdeps/unix/sysv/linux/pthread_kill.c (__pthread_kill): Likewise.
	* sysdeps/unix/sysv/linux/pthread_sigqueue.c (pthread_sigqueue):
	Likewise.
	* sysdeps/unix/sysv/linux/createthread.c (create_thread): Likewise.
	* sysdeps/unix/sysv/linux/raise.c (raise): Remove old behaviour
	comment.
	* sysdeps/unix/sysv/linux/getpid.c: Remove file.
	* nptl/descr.h (struct pthread): Change comment about pid value.
	* nptl/pthread_getattr_np.c (pthread_getattr_np): Remove thread
	pid assert.
	* sysdeps/unix/sysv/linux/pthread-pids.h (__pthread_initialize_pids):
	Do not set pid value.
	* nptl_db/td_ta_thr_iter.c (iterate_thread_list): Remove thread
	pid cache check.
	* nptl_db/td_thr_validate.c (td_thr_validate): Likewise.
	* sysdeps/aarch64/nptl/tcb-offsets.sym: Remove pid offset.
	* sysdeps/alpha/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/arm/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/hppa/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/i386/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/ia64/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/m68k/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/microblaze/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/mips/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/nios2/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/powerpc/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/s390/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/sh/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/sparc/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/tile/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/x86_64/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/clone.S: Remove pid and tid caching.
	* sysdeps/unix/sysv/linux/alpha/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/arm/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/hppa/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/ia64/clone2.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/nios2/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/tile/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/vfork.S: Remove pid set and reset.
	* sysdeps/unix/sysv/linux/alpha/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/arm/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/ia64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/m68k/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/m68k/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/nios2/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/tile/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/hppa/pt-vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/tst-clone2.c (f): Remove direct pthread
	struct access.
	(clone_test): Remove function.
	(do_test): Rewrite to take in consideration pid is not cached anymore.

2016-11-24  Joseph Myers  <joseph@codesourcery.com>

	* bits/flt-eval-method.h: New file.
	* sysdeps/m68k/m680x0/bits/flt-eval-method.h: Likewise.
	* sysdeps/s390/bits/flt-eval-method.h: Likewise.
	* sysdeps/x86/bits/flt-eval-method.h: Likewise.
	* math/Makefile (headers): Add bits/flt-eval-method.h.
	* math/math.h: Include <bits/flt-eval-method.h>.
	[__USE_ISOC99] (float_t): Define based on __GLIBC_FLT_EVAL_METHOD.
	[__USE_ISOC99] (double_t): Likewise.
	* bits/mathdef.h (float_t): Remove.
	(double_t): Likewise.
	* sysdeps/aarch64/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/alpha/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/arm/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/hppa/fpu/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/ia64/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/m68k/m680x0/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/mips/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/powerpc/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/s390/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/sh/sh4/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/sparc/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/tile/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.
	* sysdeps/x86/bits/mathdef.h (float_t): Likewise.
	(double_t): Likewise.

2016-11-24  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/x86_64/memcpy_chk.S (__memcpy_chk): Check for SHARED
	instead of PIC.

2016-11-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20859]
	* sysdeps/sh/sh4/bits/mathdef.h (FP_ILOGB0): Define to
	(-0x7fffffff) instead of 0x80000001.
	* math/test-fp-ilogb-constants.c: New file.
	* math/Makefile (tests): Add test-fp-ilogb-constants.

2016-11-23  Maciej W. Rozycki  <macro@imgtec.com>

	* sysdeps/mips/mips32/crti.S (JALR_RELOC): New macro.
	(_init): Use it in place of hardcoded R_MIPS_JALR.
	* sysdeps/mips/mips64/n32/crti.S (JALR_RELOC): New macro.
	(_init): Use it in place of hardcoded R_MIPS_JALR.
	* sysdeps/mips/mips64/n64/crti.S (JALR_RELOC): New macro.
	(_init): Use it in place of hardcoded R_MIPS_JALR.

2016-11-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20787]
	* sysdeps/x86/bits/mathdef.h (float_t): Do not define to float if
	[__x86_64__] when __FLT_EVAL_METHOD__ is nonzero.
	(double_t): Do not define to double if [__x86_64__] when
	__FLT_EVAL_METHOD__ is nonzero.
	* sysdeps/x86/fpu/test-flt-eval-method-387.c: New file.
	* sysdeps/x86/fpu/test-flt-eval-method-sse.c: Likewise.
	* sysdeps/x86/fpu/Makefile [$(subdir) = math] (tests): Add
	test-flt-eval-method-387 and test-flt-eval-method-sse.
	[$(subdir) = math] (CFLAGS-test-flt-eval-method-387.c): New
	variable.
	[$(subdir) = math] (CFLAGS-test-flt-eval-method-sse.c): Likewise.

2016-11-23  Chris Metcalf  <cmetcalf@mellanox.com>

	* scripts/build-many-glibcs.py (Context.add_all_configs): Revert
	use of -fno-isolate-erroneous-paths options for tilepro.

2016-11-23  Florian Weimer  <fweimer@redhat.com>

	* elf/dl-load.c (_dl_map_object_from_fd): Delayed TLS data
	structure initialization is no longer needed.

2016-11-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20855]
	* bits/mathdef.h (float_t): Define to float.
	* math/test-flt-eval-method.c: New file.
	* math/Makefile (tests): Add test-flt-eval-method.
	(CFLAGS-test-flt-eval-method.c): New variable.

2016-11-22  Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/unix/sysv/linux/fstatfs64.c: Hide prototypes for fstatfs
	and __fstatfs.  Make them aliases of __fstatfs64 if
	STATFS_IS_STATFS64 is set to non-zero.
	* sysdeps/unix/sysv/linux/statfs64.c: Ditto for __statfs, statfs,
	and __statfs64.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/fstatfs.c: Do not
	define __fstatfs and fstatfs if STATFS_IS_STATFS64 is non-zero.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/statfs.c: Ditto
	for __statfs and statfs.
	* sysdeps/unix/sysv/linux/alpha/kernel_stat.h: Set STATFS_IS_STATFS64
	to 0.
	* sysdeps/unix/sysv/linux/generic/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/hppa/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/ia64/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/microblaze/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/mips/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/s390/s390-64/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/sparc/sparc32/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/sparc/sparc64/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/x86_64/kernel_stat.h: Ditto.

2016-11-22  Andreas Schwab  <schwab@suse.de>

	* misc/mkstemp.c: Include <fcntl.h>.
	* misc/mkstemps.c: Likewise.
	* misc/mkostemp.c: Likewise.
	* misc/mkostemps.c: Likewise.

2016-11-22  Adhemerval Zanella  <adhemerva.zanella@linaro.org>

	[BZ #20847]
	* posix/execvpe.c (maybe_script_execute): Remove write past allocated
	array bounds.
	(__execvpe): Likewise.

2016-11-22  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Context.add_all_configs): Also use
	-fno-isolate-erroneous-paths options for tilepro.

2016-11-21  Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/unix/sysv/linux/generic/kernel_stat.h: Set XSTAT_IS_XSTAT64
	to 0 when in 32 bit mode.
	* sysdeps/unix/sysv/linux/hppa/kernel_stat.h: Set XSTAT_IS_XSTAT64 to 0.
	* sysdeps/unix/sysv/linux/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/microblaze/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/mips/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/sparc/sparc32/kernel_stat.h: Ditto.
	* sysdeps/unix/sysv/linux/fxstat.c: Replace #ifdef with #if on
	XSTAT_IS_XSTAT64 test.
	* sysdeps/unix/sysv/linux/fxstatat.c: Ditto.
	* sysdeps/unix/sysv/linux/generic/lxstat.c: Ditto.
	* sysdeps/unix/sysv/linux/generic/xstat.c: Ditto.
	* sysdeps/unix/sysv/linux/i386/fxstat.c: Ditto.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c: Ditto.
	* sysdeps/unix/sysv/linux/i386/lxstat.c: Ditto.
	* sysdeps/unix/sysv/linux/i386/xstat.c: Ditto.
	* sysdeps/unix/sysv/linux/lxstat.c: Ditto.
	* sysdeps/unix/sysv/linux/mips/xstatconv.c: Ditto.
	* sysdeps/unix/sysv/linux/xstat.c: Ditto.
	* sysdeps/unix/sysv/linux/xstatconv.c: Ditto.

2016-11-19  Joseph Myers  <joseph@codesourcery.com>

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(setpayload): New declaration.
	* math/Versions (setpayload): New libm symbol at version
	GLIBC_2.25.
	(setpayloadf): Likewise.
	(setpayloadl): Likewise.
	* math/Makefile (libm-calls): Add s_setpayloadF.
	* math/libm-test.inc (struct test_Ffp_b1_data): Rename to struct
	test_Ff_b1_data.
	(RUN_TEST_Ff_b1): New macro.
	(RUN_TEST_LOOP_Ff_b1): Likewise.
	(canonicalize_test_data): Update type.
	(setpayload_test_data): New array.
	(setpayload_test): New function.
	(main): Call setpayload_test.
	* manual/arith.texi (FP Bit Twiddling): Document setpayload,
	setpayloadf and setpayloadl.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.
	* sysdeps/ieee754/dbl-64/s_setpayload.c: New file.
	* sysdeps/ieee754/dbl-64/s_setpayload_main.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_setpayload_main.c:
	Likewise.
	* sysdeps/ieee754/flt-32/s_setpayloadf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_setpayloadf_main.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_setpayloadl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_setpayloadl_main.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_setpayloadl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_setpayloadl_main.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_setpayloadl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_setpayloadl_main.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-setpayload.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add
	setpayload.
	(CFLAGS-nldbl-setpayload.c): New variable.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-11-18  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* hurd/hurd.h (__hurd_fail_noerrno): Remove function.
	* include/unistd.h: Extend comment about __access_noerrno return
	semantics.
	* sysdeps/match/hurd/access.c (__hurd_fail_noerrno): Return -1.
	(access_common): Correct typo for EACCES.

2016-11-18  Chris Metcalf  <cmetcalf@mellanox.com>

	* sysdeps/tile/math-tests.h: New file.

	* sysdeps/unix/sysv/linux/tile/set_dataplane.c
	(__old_set_dataplane): Rename from set_dataplane and make a
	compatibility symbol.
	* sysdeps/unix/sysv/linux/tile/sys/dataplane.h: Remove file.
	* sysdeps/unix/sysv/linux/tile/Makefile (sysdep_headers): Remove
	sys/dataplane.h.

2016-11-18  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Context.write_files): Make wrapper
	script quote words in command output to log suitably for input to
	the shell.

2016-11-18  Matthew Fortune  <Matthew.Fortune@imgtec.com>
	    Maciej W. Rozycki  <macro@imgtec.com>

	* sysdeps/mips/mips32/crti.S (_init): Add `.insn' pseudo-op at
	`.Lno_weak_fn' label.
	* sysdeps/mips/mips64/n32/crti.S (_init): Likewise.
	* sysdeps/mips/mips64/n64/crti.S (_init): Likewise.

2016-11-17  Adhemerval Zanella  <adhemerval.zanella@linaro.org>
	    Yury Norov  <ynorov@caviumnetworks.com>

	* bits/typesizes.h (__RLIM_T_MATCHES_RLIM64_T): define.
	* sysdeps/unix/sysv/linux/alpha/bits/typesizes.h
	(__RLIM_T_MATCHES_RLIM64_T): Likewise.
	* sysdeps/unix/sysv/linux/generic/bits/typesizes.h
	(__RLIM_T_MATCHES_RLIM64_T): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h [__s390x__]
	(__RLIM_T_MATCHES_RLIM64_T): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	[__arch64__ || __sparcv9] (__RLIM_T_MATCHES_RLIM64_T): Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h [__86_64__]
	(__RLIM_T_MATCHES_RLIM64_T): Likewise.
	* sysdeps/unix/sysv/linux/arm/Makefile [$(subdir) = resource]
	(sysdep_routines): Remove oldgetrlimit64.
	* sysdeps/unix/sysv/linux/i386/Makefile [$(subdir) = resource]
	(sysdep_routines): Likewise.
	* sysdeps/unix/sysv/linux/m68k/Makefile [$(subdir) = resource]
	(sysdep_routines): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Makefile
	[$(subdir) = resource] (sysdep_routines): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/Makefile
	[$(subdir) = resource] (sysdep_routines): Likewise.
	* sysdeps/unix/sysv/linux/arm/getrlimit64.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/oldgetrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/oldgetrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/oldsetrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/hppa/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/oldgetrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/oldgetrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/oldgetrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/oldgetrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/setrlimit64.c: Likewise.
	* sysdeps/sysv/linux/generic/wordsize-32/syscalls.list: Remove
	setrlimit and getrlimit.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/getrlimit.c: New file.
	* sysdeps/unix/sysv/linux/sparc/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/getrlimit64.c (__getrlimit64): Handle
	__RLIM_T_MATCHES_RLIM64_T and add alias if defined.
	(__old_getrlimit64): Add compatibility symbol.
	* sysdeps/unix/sysv/linux/setrlimit64.c (__setrlimit): Likewise.

2016-11-17  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (Config.build_gcc): Configure with
	newly built gmp, mpfr and mpc.

	* sysdeps/unix/sysv/linux/alpha/sys/user.h: Include <stddef.h>.

2016-11-16  Joseph Myers  <joseph@codesourcery.com>

	* conform/Makefile (linknamespace-libs): Rename to
	linknamespace-libs-thr.
	(linknamespace-libs-posix): New variable.
	(linknamespace-libs-xsi): Likewise.
	(linknamespace-libs-XPG3): Include libcrypt.a.
	(linknamespace-libs-XPG4): Use $(linknamespace-libs-XPG3).
	(linknamespace-libs-POSIX): Use $(linknamespace-libs-thr).
	(linknamespace-libs-UNIX98): Use $(linknamespace-libs-xsi).
	(linknamespace-libs-XOPEN2K): Likewise.
	(linknamespace-libs-XOPEN2K8): Likewise.
	(linknamespace-libs-POSIX2008): Use $(linknamespace-libs-posix).

	[BZ #20829]
	* stdio-common/Versions (__snprintf): Add to version
	GLIBC_PRIVATE.
	* include/stdio.h (__snprintf): Use libc_hidden_proto.
	* stdio-common/snprintf.c (__snprintf): Use libc_hidden_def.
	* crypt/sha256-crypt.c (__sha256_crypt_r): Use __snprintf instead
	of snprintf.
	* crypt/sha512-crypt.c (__sha512_crypt_r): Likewise.

2016-11-16  Zack Weinberg  <zackw@panix.com>

	* string/string.h: Remove obsolete comment stating that
	strcoll_l and strxfrm_l have not yet been standardized.

2016-11-16  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* hurd/hurd.h (__hurd_fail_noerrno): New function.
	* include/unistd.h [IS_IN (rtld) || !defined SHARED]: Declare
	__access_noerrno.
	* io/access.c (__access_noerrno): New function.
	* sysdeps/mach/hurd/access.c (hurd_fail_seterrno): New function.
	(hurd_fail_seterrno): Likewise.
	(access_common): Likewise.
	(__access_noerrno): Likewise.
	* sysdeps/nacl/access.c (__access_noerrno): Likewise.
	* sysdeps/unix/sysv/linux/access.c (__access_noerrno): Likewise.
	* sysdeps/nacl/nacl-interfaces.h (NACL_CALL_NOERRNO): New
	macro.

2016-11-16  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/sh4/register-dump.h (register_dump):
	Only declare fpregs if [__SH_FPU_ANY__].

2016-11-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h [__SH4__ || __SH4A__]:
	Make code unconditional.
	[!(__SH4__ || __SH4A__)]: Remove conditional code.

2016-11-15  Rical Jasan  <ricaljasan@pacific.net>

	* manual/sysinfo.texi (S_APPEND): Delete.
	(S_IMMUTABLE): Likewise.

2016-11-15  Denis Kaganovich  <mahatma@eu.by>
	    Magnus Granberg  <zorry@gentoo.org>
	    Mike Frysinger  <vapier@gentoo.org>

	[BZ #20662]
	* configure.ac (libc_cv_predef_stack_protector): Also check for
	__stack_chk_fail_local symbols.
	* configure: Regenerated.

2016-11-15  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/s390/s390-64/setjmp.S (NEED_COMPAT_SYMBOLS): New macro.
	(libc_hidden_def): Remove redefinition.
	(__sigsetjmp): Add hidden definition.
	* sysdeps/s390/s390-32/setjmp.S (NEED_COMPAT_SYMBOLS): New macro.
	(libc_hidden_def): Remove redefinition.
	(__sigsetjmp): Add hidden definition.

2016-11-14  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py (os.path): Do not import.
	(Context): Inherit explicitly from object.  Remove blank line
	between class and docstring.
	(Config): Likewise.
	(Glibc): Likewise.
	(Command): Likewise.
	(CommandList): Likewise.
	(Context.write_files): Store chmod mode in a variable.

	* sysdeps/unix/sysv/linux/tile/tilegx/configure.ac: Use
	LIBC_SLIBDIR_RTLDDIR for tilegx32.
	* sysdeps/unix/sysv/linux/tile/tilegx/configure: Regenerated.

2016-11-14  Zack Weinberg  <zackw@panix.com>

	* sunrpc/Makefile (rpcgen-tests): Delete the .out file before
	creating or re-creating it.

	* string/bits/string2.h: Fix typo in comment.

2016-11-14  Zack Weinberg  <zackw@panix.com>

	* misc/sys/sysmacros.h (__SYSMACROS_DM, __SYSMACROS_DM1): New macros.
	(__SYSMACROS_DEPRECATION_MSG, __SYSMACROS_FST_DECL_TEMPL)
	(__SYSMACROS_FST_IMPL_TEMPL): Delete.
	(major, minor, makedev): Use __SYSMACROS_DM in definition, instead
	of redirected function names.

	* misc/sys/cdefs.h (__glibc_macro_warning): Activate for clang >= 3.5
	as well.  Document that MESSAGE must be a single string literal.

2016-11-11  Joseph Myers  <joseph@codesourcery.com>

	* scripts/build-many-glibcs.py: New file.

	* stdlib/bug-getcontext.c: Include <libc-internal.h>.
	(do_test): Disable -Wmaybe-uninitialized around uses of
	except_mask.

	* sysdeps/unix/sysv/linux/sh/sys/user.h: Include <stddef.h>.

2016-11-10  Chris Metcalf  <cmetcalf@mellanox.com>

	* sysdeps/tile/tilepro/atomic-machine.h (atomic_store_relaxed)
	(atomic_store_release): Provide tilepro-specific implementations.

2016-11-10  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h (__MATH_TG): New macro.
	[__USE_ISOC99] (fpclassify): Define using __MATH_TG.
	[__USE_ISOC99] (signbit): Likewise.
	[__USE_ISOC99] (isfinite): Likewise.
	[__USE_ISOC99] (isnan): Likewise.
	[__USE_ISOC99] (isinf): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (issignaling): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (__MATH_EVAL_FMT2): New macro.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (iseqsig): Define using
	__MATH_TG and __MATH_EVAL_FMT2.
	* sysdeps/generic/math_private.h (fabs_tg): Define using
	__MATH_TG.
	* sysdeps/ieee754/ldbl-128ibm/bits/iscanonical.h
	[!__NO_LONG_DOUBLE_MATH] (__iscanonicalf): New macro.
	[!__NO_LONG_DOUBLE_MATH] (__iscanonical): Likewise.
	[!__NO_LONG_DOUBLE_MATH] (iscanonical): Define using __MATH_TG.
	* sysdeps/ieee754/ldbl-96/bits/iscanonical.h (__iscanonicalf): New
	macro.
	(__iscanonical): Likewise.
	(iscanonical): Define using __MATH_TG.

2016-11-10  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/sh/kernel-features.h: Add include
	guards.

	* sysdeps/unix/sysv/linux/access.c: New file.
	* sysdeps/unix/sysv/linux/generic/access.c: Remove file.

2016-11-10  Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/tile/tilepro/bits/wordsize.h: Define __WORDSIZE32_SIZE_ULONG
	and __WORDSIZE32_PTRDIFF_LONG.

2016-11-10  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/aarch64/libm-test-ulps: Regenerated.

2016-11-09  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/arm/truncate64.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/truncate.c: Likewise.
	* sysdeps/sysv/linux/generic/wordsize-32/truncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/truncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/truncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/truncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/truncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/truncate.c: New file.
	* sysdeps/unix/sysv/linux/truncate64.c (truncate64): Use
	INLINE_SYSCALL_CALL, __ALIGNMENT_ARG and SYSCALL_LL64 macros.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (truncate):
	Remove.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list (truncate):
	Likewise.

	* posix/tst-truncate-common.c: New file.
	* posix/tst-truncate.c: Use tst-truncate-common.c.
	* posix/tst-truncate64.c: Likewise and add LFS tests.
	* sysdeps/unix/sysv/linux/arm/ftruncate64.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/ftruncate.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/ftruncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/ftruncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/ftruncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ftruncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/ftruncate64.c: Likewise.
	* sysdeps/unix/sysv/linux/ftruncate.c: New file.
	* sysdeps/unix/sysv/linux/ftruncate64.c (__ftruncate64): Use
	INLINE_SYSCALL_CALL, __ALIGNMENT_ARG and SYSCALL_LL64 macros.
	[__OFF_T_MATCHES_OFF64_T] (ftruncate): Add alias.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (ftruncate):
	Remove.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list (ftruncate):
	Likewise.

2016-11-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20790]
	* sunrpc/rpc_parse.c (get_prog_declaration): Increase buffer size
	to MAXLINESIZE.
	* sunrpc/bug20790.x: New file.
	* sunrpc/Makefile [$(run-built-tests) = yes] (rpcgen-tests): New
	variable.
	[$(run-built-tests) = yes] (tests-special): Add $(rpcgen-tests).
	[$(run-built-tests) = yes] ($(rpcgen-tests)): New rule.

	* sysdeps/unix/sysv/linux/sh/localplt.data: New file.

	* sysdeps/unix/sysv/linux/hppa/localplt.data: New file.

	* sysdeps/unix/sysv/linux/alpha/localplt.data: Make __tls_get_addr
	optional in ld.so.  Allow R_ALPHA_GLOB_DAT relocation for malloc,
	calloc, realloc, free, memalign and __libc_memalign rather than
	making them optional.

	* sysdeps/unix/sysv/linux/nios2/localplt.data: Add __extendsfdf2
	for libc.so.

2016-11-08  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/Makefile (libpthread-routines): Remove ptw-llseek and add
	ptw-lseek64.
	* sysdeps/unix/sysv/linux/Makefile (sysdeps_routines): Remove llseek.
	* sysdeps/unix/sysv/linux/alpha/Makefile  (sysdeps_routines):
	Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/llseek.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/lseek.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips64/llseek.c: Likewise.
	* sysdeps/unix/sysv/linux/llseek.c: Remove file.
	* sysdeps/unix/sysv/linux/lseek.c: New file.
	* sysdeps/unix/sysv/linux/lseek64.c: Add default Linux implementation.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list: Remove lseek and
	__libc_lseek64 from auto-generation.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/lseek64.S: New file.

2016-11-07  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* nptl/tst-basic1.c (tf, do_test): Use write_message.
	* nptl/tst-cleanup1.c (do_test): Likewise.
	* nptl/tst-cleanup3.c (do_test): Likewise.
	* nptl/tst-key1.c (do_test): Likewise.
	* nptl/tst-key2.c (tf, do_test): Likewise.
	* nptl/tst-key3.c (tf, do_test): Likewise.
	* nptl/tst-stdio1.c (do_test): Likewise.
	* nptl/tst-stdio2.c (do_test): Likewise.

	* nptl/tst-kill3.c (handler): Use write_message in place of write.
	* nptl/tst-kill6.c (handler): Likewise.
	* nptl/tst-tls2.c (CB): Likewise.
	* nptl/tst-tls3.c (CB): Likewise.

2016-11-07  Joseph Myers  <joseph@codesourcery.com>

	* scripts/check-installed-headers.sh: Ignore sys/sysctl.h for x32.

2016-11-07  Yury Norov  <ynorov@caviumnetworks.com>
	    Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/unix/sysv/linux/alpha/kernel-features.h: #define
	  __ASSUME_ST_INO_64_BIT as 0
	* sysdeps/unix/sysv/linux/sh/kernel-features.h: Likewise.
	* sysdeps/unix/sysv/linux/fxstat64.c: Replace #ifdef with #if
	  over the code where __ASSUME_ST_INO_64_BIT is used.
	* sysdeps/unix/sysv/linux/lxstat64.c: Likewise.
	* sysdeps/unix/sysv/linux/xstat64.c: Likewise.
	* sysdeps/unix/sysv/linux/xstatconv.c: Likewise.

2016-11-07  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/aarch64/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Document ABI exposure of the __kind offset.
	* sysdeps/arm/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Mention reason for the __kind offset exposure in the ABI.
	* sysdeps/hppa/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.
	* sysdeps/ia64/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.
	* sysdeps/m68k/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.
	* sysdeps/microblaze/nptl/bits/pthreadtypes.h
	(struct __pthread_mutex_s): Likewise.
	* sysdeps/mips/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.
	* sysdeps/nios2/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.
	* sysdeps/s390/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.
	* sysdeps/sh/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.
	* sysdeps/sparc/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.
	* sysdeps/tile/nptl/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/pthreadtypes.h
	(struct __pthread_mutex_s): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	(struct __pthread_mutex_s): Likewise.
	* sysdeps/x86/bits/pthreadtypes.h (struct __pthread_mutex_s):
	Likewise.

2016-11-07  Steve Ellcey  <sellcey@caviumnetworks.com>

	* test-skeleton.c: Document do_test usage.

2016-11-06  Aurelien Jarno  <aurelien@aurel32.net>

	* iconv/gconv.h (__gconv_info): Define __data element using a
	zero-length array.

2016-11-04  Steve Ellcey  <sellcey@caviumnetworks.com>

	* math/test-tgmath2.c: Split up test function.

2016-11-04  Joseph Myers  <joseph@codesourcery.com>

	* Rules (tests-expected): New variable, depending on
	$(run-built-tests).
	(tests): Pass $(tests-expected) to merge-test-results.sh, not
	$(tests).

	* Rules [$(run-built-tests) = no] (tests): Do not depend on
	$(tests-unsupported).

2016-11-04  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/sparc/bits/wordsize.h
	(__WORDSIZE_TIME64_COMPAT32): Define for both 32 and  64 bits.

2016-11-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20768]
	* sysdeps/alpha/fpu/feholdexcpt.c (__feholdexcept): Call
	__fegetenv instead of fegetenv.

	[BZ #14139]
	* manual/libm-err-tab.pl (%pplatforms): Initialize to empty.
	(find_files): Obtain platform name from libm-test-ulps-name and
	store in %pplatforms.
	(canonicalize_platform): Remove.
	(print_platforms): Use $pplatforms directly.
	(by_platforms): Do not allow for platforms missing from
	%pplatforms.
	* sysdeps/aarch64/libm-test-ulps-name: New file.
	* sysdeps/alpha/fpu/libm-test-ulps-name: Likewise.
	* sysdeps/arm/libm-test-ulps-name: Likewise.
	* sysdeps/generic/libm-test-ulps-name: Likewise.
	* sysdeps/hppa/fpu/libm-test-ulps-name: Likewise.
	* sysdeps/i386/fpu/libm-test-ulps-name: Likewise.
	* sysdeps/i386/i686/fpu/multiarch/libm-test-ulps-name: Likewise.
	* sysdeps/ia64/fpu/libm-test-ulps-name: Likewise.
	* sysdeps/m68k/coldfire/fpu/libm-test-ulps-name: Likewise.
	* sysdeps/m68k/m680x0/fpu/libm-test-ulps-name: Likewise.
	* sysdeps/microblaze/libm-test-ulps-name: Likewise.
	* sysdeps/mips/mips32/libm-test-ulps-name: Likewise.
	* sysdeps/mips/mips64/libm-test-ulps-name: Likewise.
	* sysdeps/nios2/libm-test-ulps-name: Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps-name: Likewise.
	* sysdeps/powerpc/nofpu/libm-test-ulps-name: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps-name: Likewise.
	* sysdeps/sh/libm-test-ulps-name: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps-name: Likewise.
	* sysdeps/tile/libm-test-ulps-name: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps-name: Likewise.

	* sysdeps/unix/sysv/linux/mips/sys/user.h: Include <stddef.h>.

	* sysdeps/unix/sysv/linux/mips/Makefile [$(subdir) = elf]
	(test-xfail-check-execstack): New variable.

	* sysdeps/mips/localplt.data: New file.

2016-11-04  Yury Norov  <ynorov@caviumnetworks.com>
	    Steve Ellcey  <sellcey@caviumnetworks.com>

	* bits/wordsize.h: Add documentation.
	* sysdeps/aarch64/bits/wordsize.h : New file
	* sysdeps/generic/stdint.h (PTRDIFF_MIN, PTRDIFF_MAX): Update
	definitions.
	(SIZE_MAX): Change ifdef to if in __WORDSIZE32_SIZE_ULONG check.
	* sysdeps/gnu/bits/utmp.h (__WORDSIZE_TIME64_COMPAT32): Check
	with #if instead of #ifdef.
	* sysdeps/gnu/bits/utmpx.h (__WORDSIZE_TIME64_COMPAT32): Ditto.
	* sysdeps/mips/bits/wordsize.h (__WORDSIZE32_SIZE_ULONG,
	__WORDSIZE32_PTRDIFF_LONG, __WORDSIZE_TIME64_COMPAT32):
	Add or change defines.
	* sysdeps/powerpc/powerpc32/bits/wordsize.h: Likewise.
	* sysdeps/powerpc/powerpc64/bits/wordsize.h: Likewise.
	* sysdeps/s390/s390-32/bits/wordsize.h: Likewise.
	* sysdeps/s390/s390-64/bits/wordsize.h: Likewise.
	* sysdeps/sparc/sparc32/bits/wordsize.h: Likewise.
	* sysdeps/sparc/sparc64/bits/wordsize.h: Likewise.
	* sysdeps/tile/tilegx/bits/wordsize.h: Likewise.
	* sysdeps/tile/tilepro/bits/wordsize.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/wordsize.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/wordsize.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/wordsize.h: Likewise.
	* sysdeps/wordsize-32/bits/wordsize.h: Likewise.
	* sysdeps/wordsize-64/bits/wordsize.h: Likewise.
	* sysdeps/x86/bits/wordsize.h: Likewise.

2016-11-04  Wilco Dijkstra  <wdijkstr@arm.com>
	    Kevin Petit  <kevin.petit@arm.com>

	* sysdeps/aarch64/memchr.S (__memchr): New file.

2016-11-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/tile/preconfigure: Accept tilegx* instead of tilegx.

2016-11-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19398]
	* conform/Makefile ($(linknamespace-header-tests)): Also depend on
	$(linknamespace-symlists-tests).

2016-11-02  Steve Ellcey  <sellcey@caviumnetworks.com>

	* time/tst-strptime2.c: Ignore -Wformat-length warning.

2016-11-02  Florian Weimer  <fweimer@redhat.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[Bug #20729]
	* resolv/res_send.c (send_vc): Revert DIAG_IGNORE_Os_NEEDS_COMMENT
	change to non -Os related diagnostic.  Use DIAG_IGNORE_Os_NEEDS_COMMENT
	for -Os related change.

2016-11-01  Steve Ellcey  <sellcey@caviumnetworks.com>

	* stdio-common/tst-printf.c: Ignore -Wformat-length warning.

2016-11-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19673]
	* manual/math.texi (Exponents and Logarithms): Correct description
	of clog10.

2016-10-31  Carlos O'Donell  <carlos@redhat.com>

	[Bz #20729]
	* locale/weight.h: Include libc-internal.h.
	* locale/weightwc.h: Likewise.
	* nptl/nptl_dbP.h: Likewise.

2016-10-31  Brent W. Baccala  <cosine@freesoft.org>

	* sysdeps/mach/hurd/dl-sysdep.c (__mmap): Do not deallocate memobj_wr
	when it is MACH_PORT_NULL.

2016-10-31  Andreas Schwab  <schwab@suse.de>

	[BZ #20707]
	* posix/glob.c (glob): Initialize pglob before checking for
	GLOB_BRACE.  Don't call glob recursively if pattern contains no
	valid brace expression despite GLOB_BRACE.
	* posix/globtest.sh: Test it.

2016-10-28  Carlos O'Donell  <carlos@redhat.com>

	[BZ #20729]
	* include/libc-internal.h (DIAG_IGNORE_Os_NEEDS_COMMENT):
	Define.
	* iconvdata/iso-2022-cn-ext.c: Include libc-internal.h and ignore
	-Wmaybe-uninitialized for BODY macro only for -Os compiles.
	* locale/weight.h (findix): Ignore -Wmaybe-uninitialized error
	for seq2.back_us and seq1.back_us only for -Os compiles.
	* locale/weightwc.h (findix): Likewise.
	* nptl_db/thread_dbP.h: Ignore -Wmaybe-uninitialized error for
	DB_GET_FIELD_ADDRESS only for -Os compiles.
	* resolv/res_send (reopen): Ignore -Wmaybe-uninitialized error
	for slen only for -Os compiles.
	* string/strcoll_l.c (get_next_seq): Ignore
	-Wmaybe-uninitialized for seq2.save_idx and seq1.save_idx only
	for -Os compiles.

	* elf/Makefile (CFALGS-tst-linkall-static): Remove.
	* include/crypt.h: New file.

2016-10-28  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* dlfcn/bug-atexit3-lib.cc (write_message): New function, copied
	from test-skeleton.c.
	(statclass): Replace calls to write with calls to write_message.

2016-10-28  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h
	[__GLIBC_USE (IEC_60559_BFP_EXT) && __GNUC_PREREQ (3, 3)] (SNANF):
	New macro.
	[__GLIBC_USE (IEC_60559_BFP_EXT) && __GNUC_PREREQ (3, 3)] (SNAN):
	Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT) && __GNUC_PREREQ (3, 3)] (SNANL):
	Likewise.
	* manual/arith.texi (Infinity and NaN): Document SNANF, SNAN and
	SNANL.
	* math/test-double.h (snan_value_MACRO): New macro.
	* math/test-float.h (snan_value_MACRO): Likewise.
	* math/test-ldouble.h (snan_value_MACRO): Likewise.
	* math/libm-test.inc (issignaling_test_data): Add tests of
	snan_value_MACRO.

2016-10-28  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* nptl/pthread_rwlock_unlock.c: Add a comment explaining its
	behavior when eliding a lock not held by the current thread.
	* sysdeps/powerpc/nptl/elide.h: Likewise.

2016-10-28  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #20728]
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S: Replace a
	branch to _exit() by a function call.

2016-10-28  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc.c: Update chunk layout comments.
	(chunk_main_arena): Update comment.

2016-10-28  Florian Weimer  <fweimer@redhat.com>

	* crypt/sha256.c, crypt/sha256-block.c,
	sysdeps/sparc/sparc64/multiarch/sha256-block.c: Rename
	sha256_process_block to __sha256_process_block.
	* crypt/sha512.c, crypt/sha512-block.c,
	sysdeps/sparc/sparc64/multiarch/sha512-block.c: Rename
	sha512_process_block to __sha512_process_block.

2016-10-28  Carlos O'Donell  <carlos@redhat.com>

	* elf/Makefile (CFLAGS-tst-linkall-static): Define.

	* math/test-nan-overflow.c: Include stdlib.h for malloc.

2016-10-28  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20019]
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Check IFUNC
	definition in unrelocated shared library.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Likewise.

2016-10-28  Florian Weimer  <fweimer@redhat.com>

	[BZ #20729]
	Support i386 builds with CFLAGS which imply -fno-omit-frame-pointer.
	* sysdeps/unix/sysv/linux/i386/Makefile
	(uses-6-syscall-arguments): Define.
	[subdir == misc] (CFLAGS-epoll_pwait.o, CFLAGS-epoll_pwait.os)
	(CFLAGS-mmap.o, CFLAGS-mmap.os, CFLAGS-mmap64.o, CFLAGS-mmap64.os)
	(CFLAGS-pselect.o, CFLAGS-pselect.os, CFLAGS-rtld-mmap.os): Use it.
	[subdir = sysvipc] (CFLAGS-semtimedop.o, CFLAGS-semtimedop.os):
	Likewise.
	[subdir = io] (CFLAGS-posix_fadvise64.o, CFLAGS-posix_fadvise64.os)
	(CFLAGS-posix_fallocate.o, CFLAGS-posix_fallocate.os)
	(CFLAGS-posix_fallocate64.o, CFLAGS-posix_fallocate64.os)
	(CFLAGS-sync_file_range.o, CFLAGS-sync_file_range.os)
	(CFLAGS-fallocate.o, CFLAGS-fallocate.os, CFLAGS-fallocate64.o)
	(CFLAGS-fallocate64.os): Likewise.
	[subdir = nptl] (CFLAGS-pthread_rwlock_timedrdlock.o)
	(CFLAGS-pthread_rwlock_timedrdlock.os)
	(CFLAGS-pthread_rwlock_timedwrlock.o)
	(CFLAGS-pthread_rwlock_timedwrlock.os, CFLAGS-sem_wait.o)
	(CFLAGS-sem_wait.os, CFLAGS-sem_timedwait.o)
	(CFLAGS-sem_timedwait.os): Likewise.

2016-10-28  Florian Weimer  <fweimer@redhat.com>

	* elf/tst-linkall-static.c: New file.
	* elf/Makefile (tests-static): Add tst-linkall-static.
	(tst-linkall-static): Link against static libraries.

2016-10-27  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc.c (sysmalloc): Initialize previous size field of
	mmaped chunks.

2016-10-28  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc.c (struct malloc_chunk): Rename prev_size, size
	members to mchunk_prev_size, mchunk_size.
	(chunk_main_arena): Reverse sense and rename from
	chunk_non_main_arena.
	(prev_inuse, chunk_is_mmapped, chunk_main_arena): Use
	mchunk_size instead of size.
	(set_non_main_arena): Define.
	(chunksize): Use chunksize_nomask instead of direct member access.
	(chunksize_nomask): Define.
	(next_chunk): Use chunksize instead of direct member access.
	(prev_size, set_prev_size): Define.
	(prev_chunk): Use prev_size instead of direct member access.
	(inuse, set_inuse, clear_inuse): Use chunksize and mchunk_size member.
	(inuse_bit_at_offset, set_inuse_bit_at_offset)
	(clear_inuse_bit_at_offset): Use mchunk_size member instead of size.
	(mchunk_prev_size, mchunk_size): Poison tokens.
	(unlink): Use chunksize_nomask, prev_size accessors.
	(do_check_remalloced_chunk): Use chunk_main_arena accessor.
	(do_check_free_chunk): Use prev_size accessor.
	(sysmalloc): Use set_prev_size, set_head accessors.
	(munmap_chunk, mremap_chunk): Use prev_size accessor.
	(__libc_free): Use chunksize_nomask accessor.
	(_int_malloc): Use set_non_main_arena, chunksize_nomask,
	chunk_main_arena accessors.
	(_int_free): Use chunksize_nomask, prev_size accessors.
	(malloc_consolidate): Use chunksize, prev_size accessors.
	(_int_realloc): Use chunksize_nomask accessor.
	(_int_memalign): Use set_prev_size accessor.
	(__malloc_info): Use chunksize_nomask accessor.
	* malloc/hooks.c (mem2chunk_check): Use prev_size, prev_inuse
	accessors.
	* malloc/arena.c (arena_for_chunk): Use chunk_main_arena accessor.
	(heap_trim): Use chunksize_nomask, prev_size accessors.

2016-10-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19380]
	* stdlib/strtod_l.c (round_and_return): Force "inexact" exception
	for inexact results.
	* stdlib/gen-tst-strtod-round.c (string_to_fp): Return indication
	of inexact result where mpfr_subnormalize is the only inexact
	step.
	* stdlib/tst-strtod-round-data.h: Regenerated.
	* stdlib/tst-strtod-round-skeleton.c [!FE_INEXACT] (FE_INEXACT):
	Define to 0.
	(GEN_ONE_TEST): Test inexact exceptions raised are as expected.

2016-10-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sys/user.h: Include stddef.h

2016-10-27  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* malloc/malloc.c (do_set_mallopt_check): New function.
	(do_set_mmap_threshold): Likewise.
	(do_set_mmaps_max): Likewise.
	(do_set_top_pad): Likewise.
	(do_set_perturb_byte): Likewise.
	(do_set_trim_threshold): Likewise.
	(do_set_arena_max): Likewise.
	(do_set_arena_test): Likewise.
	(__libc_mallopt): Use them.

2016-10-26  Joseph Myers  <joseph@codesourcery.com>

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(canonicalize): New declaration.
	* math/Versions (canonicalize): New libm symbol at version
	GLIBC_2.25.
	(canonicalizef): Likewise.
	(canonicalizel): Likewise.
	* math/Makefile (gen-libm-calls): Add s_canonicalizeF.
	* math/s_canonicalize_template.c: New file.
	* math/libm-test.inc: Update comment on functions tested and
	testing of NaN payloads.
	(TEST_NAN_PAYLOAD): New macro.
	(NO_TEST_INLINE): Update value.
	(XFAIL_TEST): Likewise.
	(ERRNO_UNCHANGED): Likewise.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(IGNORE_RESULT): Likewise.
	(NON_FINITE): Likewise.
	(TEST_SNAN): Likewise.
	(NO_TEST_MATHVEC): Likewise.
	(TEST_NAN_PAYLOAD_CANONICALIZE): New macro.
	(check_float_internal): Check NaN payloads if TEST_NAN_PAYLOAD.
	(struct test_Ffp_b1_data): New type.
	(RUN_TEST_Ffp_b1): New macro.
	(RUN_TEST_LOOP_Ffp_b1): Likewise.
	(canonicalize_test_data): New array.
	(canonicalize_test): New function.
	(main): Call canonicalize_test.
	* manual/arith.texi (FP Bit Twiddling): Document canonicalize,
	canonicalizef and canonicalizel.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.
	* sysdeps/ieee754/ldbl-opt/nldbl-canonicalize.c: New file.
	* sysdeps/ieee754/ldbl-opt/s_canonicalizel.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add
	canonicalize.
	(CFLAGS-nldbl-canonicalize.c): New variable.
	* sysdeps/ieee754/ldbl-128ibm/test-iscanonical-ldbl-128ibm.c: Move
	to ...
	* sysdeps/ieee754/ldbl-128ibm/test-canonical-ldbl-128ibm.c:
	... here.
	(do_test): Also test canonicalizel.
	* sysdeps/ieee754/ldbl-128ibm/Makefile (tests): Change
	test-iscanonical-ldbl-128ibm to test-canonical-ldbl-128ibm.
	* sysdeps/ieee754/ldbl-128ibm/include/bits/iscanonical.h: New
	file.
	* sysdeps/ieee754/ldbl-128ibm/s_iscanonicall.c (__iscanonicall):
	Use libm_hidden_def.
	* sysdeps/ieee754/ldbl-96/test-iscanonical-ldbl-96.c: Move to ...
	* sysdeps/ieee754/ldbl-96/test-canonical-ldbl-96.c: ... here.
	(do_test): Also test canonicalizel.
	* sysdeps/ieee754/ldbl-96/Makefile (tests): Change
	test-iscanonical-ldbl-96 to test-canonical-ldbl-96.
	* sysdeps/ieee754/ldbl-96/include/bits/iscanonical.h: New file.
	* sysdeps/ieee754/ldbl-96/s_iscanonicall.c (__iscanonicall): Use
	libm_hidden_def.
	* sysdeps/generic/math-tests.h (SNAN_TESTS_PRESERVE_PAYLOAD): New
	macro.
	* sysdeps/mips/math-tests.h [__mips_hard_float && !__mips_nan2008]
	(SNAN_TESTS_PRESERVE_PAYLOAD): Likewise.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

	* sysdeps/ieee754/ldbl-opt/nldbl-getpayload.c: New file.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add
	getpayload.
	(CFLAGS-nldbl-getpayload.c): New variable.

2016-10-26  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* stdio-common/vfscanf.c (_IO_vfwscanf): Use read_int to parse
	integer from the format string.

2016-10-26  Florian Weimer  <fweimer@redhat.com>

	[BZ #19473]
	* malloc/malloc.h (malloc_get_state, malloc_set_state): Remove
	declarations.
	* malloc/malloc.c (malloc_get_state, malloc_set_state): Remove
	weak aliases.
	* malloc/hooks.c (__malloc_get_state): Remove definition.
	(malloc_get_state): New stub implementation as
	compatibility symbol.
	(malloc_set_state): Rename from __malloc_set_state.  Turn into
	compat symbol.
	* malloc/tst-mallocstate.c: Rewrite to approximate how Emacs uses
	malloc_set_state.
	* malloc/Makefile (LDFLAGS-tst-mallocstate): Link with -rdynamic.

2016-10-26  Florian Weimer  <fweimer@redhat.com>

	* iconvdata/iso646.c (enum variant): Drop illegal_var.
	(names): Turn into concatenation of strings.
	(gconv_init): Adapt iteration over names.

2016-10-26  Florian Weimer  <fweimer@redhat.com>

	* iconvdata/ibm930.h (__ucs4_to_ibm930sb): Remove indirection and
	make const.
	* iconvdata/ibm933.h (__ucs4_to_ibm933sb): Likewise.
	* iconvdata/ibm935.h (__ucs4_to_ibm935sb): Likewise.
	* iconvdata/ibm939.h (__ucs4_to_ibm939sb): Likewise.
	* iconvdata/ibm930.c [TO_LOOP] (BODY): Store converted single-byte
	character in sbconv.
	* iconvdata/ibm933.c [TO_LOOP] (BODY): Likewise.
	* iconvdata/ibm935.c [TO_LOOP] (BODY): Likewise.
	* iconvdata/ibm939.c [TO_LOOP] (BODY): Likewise.

2016-10-26  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* malloc/malloc.c (M_ARENA_TEST, M_ARENA_MAX): Remove.

	* manual/memory.texi (M_TOP_PAD): Remove reference to sbrk.
	(M_TRIM_THRESHOLD): Likewise.

	* manual/memory.texi (M_ARENA_TEST): Add documentation.
	(M_ARENA_MAX): Likewise.
	* malloc/malloc.c: Remove obsolete comment.

	* manual/memory.texi: Add environment variable alternatives to
	setting mallopt parameters.

2016-10-26  Carlos O'Donell  <carlos@redhat.com>

	* include/atomic.h
	[USE_COMPILER_ATOMIC_BUILTINS && !atomic_fetch_xor_release]
	(atomic_fetch_xor_release): Use	atomic_compare_exchange_weak_release.

2016-10-25  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* stdlib/Makefile (tests): Add tst-strfrom and tst-strfrom-locale.
	* stdlib/tst-strfrom.h: New file.
	* stdlib/tst-strfrom.c: New file.
	* stdlib/tst-strfrom-locale.c: New file.

	* stdlib/bug-strtod.c: Refactor based on GEN_TEST_STRTOD_FOREACH.
	* stdlib/bug-strtod2.c: Likewise.
	* stdlib/tst-strtod-round-skeleton.c: Likewise.
	* stdlib/tst-strtod6.c: Likewise.
	* stdlib/tst-strtod.h (GEN_TEST_STRTOD_FOREACH): Use strfrom.

2016-10-25  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* NEWS: Mention the addition of strfromd, strfromf, and strfroml.
	* manual/arith.texi: Document strfromd, strfromf, strfroml.
	* stdlib/Makefile: Add strfromd, strfromf, and strfroml.
	* stdlib/Versions (GLIBC_2.25): Add strfromd, strfromf, and strfroml.
	* stdlib/stdlib.h (strfromd): New declaration.
	(strfromf): Likewise.
	(strfroml): Likewise.
	* stdlib/strfrom-skeleton.c: New file.  Generic implementation for
	strfrom.
	* stdlib/strfromd.c: New file.
	* stdlib/strfromf.c: Likewise.
	* stdlib/strfroml.c: Likewise.
	* stdlib/bits/stdlib-ldbl.h: Add redirection from strfroml to strfromd.
	* sysdeps/ieee754/ldbl-opt/Makefile: Add rule for nldbl-strfroml.c.
	* sysdeps/ieee754/ldbl-opt/nldbl-strfroml.c: New file;
	* sysdeps/arm/nacl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: Likewise.

2016-10-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/powerpc32/power6/memset.S (memset): Use cmplwi
	instead of cmpli.
	* sysdeps/powerpc/powerpc64/power6/memset.S (memset): Use cmpldi
	instead of cmpli.

2016-10-24  Yury Norov  <ynorov@caviumnetworks.com>

	* sysdeps/unix/sysv/linux/fxstat.c: Remove useless cast.
	* sysdeps/unix/sysv/linux/lxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/xstat.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/lxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c: Likewise.

2016-10-24  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/pread.c (__libc_pread): Use SYSCALL_LL_PRW.
	* sysdeps/unix/sysv/linux/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/pread64.c (__libc_pread64): Use
	SYSCALL_LL64_PRW.
	* sysdeps/unix/sysv/linux/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h: Define
	__ASSUME_PRW_DUMMY_ARG.
	* sysdeps/unix/sysv/linux/sh/pread.c: Remove file.
	* sysdeps/unix/sysv/linux/sh/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/sysdep.h: Define SYSCALL_LL_PRW and
	SYSCALL_LL_PRW64 based on __ASSUME_PRW_DUMMY_ARG.

2016-10-24  Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/unix/sysv/linux/tst-setgetname.c: Increase buffer size.

2016-10-22  Florian Weimer  <fweimer@redhat.com>

	* math/math.h [__cplusplus] (iszero): Wrap C++ bits in extern
	"C++", to override a potential extern "C" directive around the
	header file inclusion.

2016-10-21  Joseph Myers  <joseph@codesourcery.com>

	* benchtests/Makefile (CFLAGS-bench-sqrt.c): New variable.

2016-10-21  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/fenv_private.h:
	(_FPU_MASK_ALL): Rename to...
	(_FPU_ALL_TRAPS): New macro representing ISA VE OE UE ZE and
	XE FPSCR bits.

	(_FPU_MASK_RN): New macro to mask out ISA RN bits in FPSCR.

	(_FPU_MASK_ROUNDING): Rename to...
	(_FPU_MASK_NOT_RN_NI): New macro to mask out all but ISA RN and
	NI bits.

	(_FPU_MASK_EXCEPT_ROUND): Rename to...
	(_FPU_MASK_TRAPS_RN): New macro to mask out exception enable
	bits and rounding bits.

	(__libc_feholdbits_ppc): New inline function to mask, set,
	and pontentially clear FSPCR bits, and change MSR[FE] bits.
	(libc_feholdexcept_ppc): Redefine using __libc_feholdbits_ppc.
	(libc_feholdexcept_setround_ppc): Likewise.

	(__libc_femergeenv_ppc): New function to dynamically mask both
	old and new FP environments and merge.
	(libc_fesetenv_ppc): Redefine in terms of __libc_femergeenv_ppc.
	(libc_feresetround_ppc): Likewise.
	(libc_feupdateenv_test_ppc): Likewise.
	(libc_feupdateenv_ppc): Likewise.

	(libc_feholdsetround_ppc_ctx): Fix usage to include masking
	of ISA RN bits, and update macro names.
	(libc_feholdexcept_setround_ppc_ctx): Remove as it is
	effectively the same as the previously mentioned function.

	(libc_feupdateenv_ppc_ctx): Replace libc_feupdatedenv_test_ppc
	usage with fe_resetround_ppc.

	(libc_feholdexcept_setround_ctx): Remove, this doesn't appear
	to be used.
	(libc_feholdexcept_setround_ctxf): Likewise.
	(libc_feholdexcept_setround_ctxl): Likewise.

2016-10-21  Florian Weimer  <fweimer@redhat.com>

	[BZ #20715]
	* math/math.h [__cplusplus] (iszero): Define as function template.
	* math/Makefile [CXX] (tests): Add test-math-iszero.
	(CFLAGS-test-math-iszero.cc): Set.
	* math/test-math-iszero.cc: New file.

2016-10-20  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20660]
	* sysdeps/arm/e_sqrt.c: New file.
	* sysdeps/arm/e_sqrtf.c: Likewise.

2016-10-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20718]
	* sysdeps/powerpc/powerpc32/fpu/s_copysignl.S (__copysignl): Do
	not use floating-point comparisons to test sign.
	* sysdeps/powerpc/powerpc64/fpu/s_copysignl.S (__copysignl):
	Likewise.

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(getpayload): New declaration.
	* math/Versions (getpayload): New libm symbol at version
	GLIBC_2.25.
	(getpayloadf): Likewise.
	(getpayloadl): Likewise.
	* math/Makefile (libm-calls): Add s_getpayloadF.
	* math/libm-test.inc: Include <nan-high-order-bit.h>.
	(struct test_f_f_data): Add comment.
	(RUN_TEST_fp_f): New macro.
	(RUN_TEST_LOOP_fp_f): Likewise.
	(getpayload_test_data): New array.
	(getpayload_test): New function.
	(main): Call getpayload_test.
	* math/gen-libm-test.pl (parse_args): Handle 'p' in argument
	descriptor.
	* manual/arith.texi (FP Bit Twiddling): Document getpayload,
	getpayloadf and getpayloadl.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.
	* sysdeps/ieee754/dbl-64/s_getpayload.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_getpayload.c: Likewise.
	* sysdeps/ieee754/flt-32/s_getpayloadf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_getpayloadl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_getpayloadl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_getpayloadl.c: Likewise.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-10-18  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/Makefile [$(subdir) = math] (tests): Move
	tst-fallocate{64}.
	* sysdeps/unix/sysv/linux/tst-fallocate-common.c: Check for EOPNOTSUPP
	on syscall return.

2016-10-17  Carlos O'Donell  <carlos@redhat.com>

	[BZ #20689]
	* sysdeps/x86/cpu-features.c: Only enable FMA and AVX2 if AVX is
	usable.

2016-10-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/nan-high-order-bit.h: New file.
	* sysdeps/hppa/nan-high-order-bit.h: Likewise.
	* sysdeps/mips/nan-high-order-bit.h: Likewise.
	* sysdeps/hppa/math_private.h: Remove file.
	* sysdeps/mips/math_private.h (HIGH_ORDER_BIT_IS_SET_FOR_SNAN): Do
	not define here.
	* sysdeps/ieee754/dbl-64/s_issignaling.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/dbl-64/s_totalorder.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/dbl-64/s_totalordermag.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_issignaling.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_totalorder.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_totalordermag.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/flt-32/s_issignalingf.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/flt-32/s_totalorderf.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/flt-32/s_totalordermagf.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/ldbl-128/s_issignalingl.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/ldbl-128/s_totalorderl.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/ldbl-128/s_totalordermagl.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/ldbl-128ibm/s_issignalingl.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/ldbl-128ibm/s_totalorderl.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/ldbl-128ibm/s_totalordermagl.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/ldbl-96/s_issignalingl.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/ldbl-96/s_totalorderl.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.
	* sysdeps/ieee754/ldbl-96/s_totalordermagl.c: Include
	<nan-high-order-bit.h>.
	[HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Test with #if not #ifdef.

2016-10-17  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/fix-fp-int-compare-invalid.h: New file.

2016-09-22  John David Anglin  <dave.anglin@bell.net>

	* sysdeps/unix/sysv/linux/hppa/atomic-machine.h: Don't include
	abort-instr.h.
	(EFAULT): Remove conditional define.
	(ENOSYS): Likewise.
	(atomic_compare_and_exchange_val_acq): Use instruction nullification
	instead of conditional branch instructions.

2016-10-15  Joseph Myers  <joseph@codesourcery.com>

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(totalordermag): New declaration.
	* math/tgmath.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (totalordermag):
	New macro.
	* math/Versions (totalordermag): New libm symbol at version
	GLIBC_2.25.
	(totalordermagf): Likewise.
	(totalordermagl): Likewise.
	* math/Makefile (libm-calls): Add s_totalordermagF.
	* math/libm-test.inc (totalordermag_test_data): New array.
	(totalordermag_test): New function.
	(main): Call totalordermag_test.
	* math/test-tgmath.c (NCALLS): Increase to 125.
	(F(compile_test)): Call totalordermag.
	(F(totalordermag)): New function.
	* manual/arith.texi (FP Comparison Functions): Document
	totalordermag, totalordermagf and totalordermagl.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.
	* sysdeps/ieee754/dbl-64/s_totalordermag.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_totalordermag.c: Likewise.
	* sysdeps/ieee754/flt-32/s_totalordermagf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_totalordermagl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_totalordermagl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_totalordermagl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-totalordermag.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add
	totalordermag.
	(CFLAGS-nldbl-totalordermag.c): New variable.
	* sysdeps/ieee754/ldbl-128ibm/test-totalorderl-ldbl-128ibm.c
	(do_test): Also test totalordermagl.
	* sysdeps/ieee754/ldbl-96/test-totalorderl-ldbl-96.c (do_test):
	Likewise.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-10-14  Steve Ellcey  <sellcey@caviumnetworks.com>

	* sysdeps/ieee754/dbl-64/e_pow.c (checkint) Make conditions explicitly
	boolean.

2016-10-13  Joseph Myers  <joseph@codesourcery.com>

	* math/s_ccosh_template.c (M_DECL_FUNC (__ccosh)): Instead of
	raising FE_INVALID with feraisexcept in case where part of
	argument is infinite, subtract that part of argument from itself.
	* math/s_cexp_template.c (M_DECL_FUNC (__cexp)): Likewise.
	* math/s_csin_template.c (M_DECL_FUNC (__csin)): Likewise.
	* math/s_csinh_template.c (M_DECL_FUNC (__csinh)): Likewise.

2016-10-12  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (totalorder_test_data): Add more tests.

2016-10-12  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/mips/mips64/n64/posix_fadvise64.c:
	Undefine weak_alias and add a comment why mips64 require
	versioning.

2016-10-12  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20647]
	* sysdeps/x86/cacheinfo.c (handle_intel): Return -1 if the
	maximum CPUID level is less than 2.

2016-10-12  Joseph Myers  <joseph@codesourcery.com>

	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(totalorder): New declaration.
	* math/tgmath.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (totalorder):
	New macro.
	* math/Versions (totalorder): New libm symbol at version
	GLIBC_2.25.
	(totalorderf): Likewise.
	(totalorderl): Likewise.
	* math/Makefile (libm-calls): Add s_totalorderF.
	* math/gen-libm-test.pl (parse_args): Escape quotes in test name
	string.
	* math/libm-test.inc (PAYLOAD_DIG): New macro.
	(qnan_value_pl): Likewise.
	(snan_value_pl): Likewise.
	(qnan_value): Define using qnan_value_pl.
	(snan_value): Define using snan_value_pl.
	(struct test_ff_i_data): Add comment about which tests use this
	structure.
	(RUN_TEST_ff_b): New macro.
	(RUN_TEST_LOOP_ff_b): Likewise.
	(totalorder_test_data): New array.
	(totalorder_test): New function.
	(main): Call totalorder_test.
	* math/test-tgmath.c (NCALLS): Increase to 122.
	(F(compile_test)): Call totalorder.
	(F(totalorder)): New function.
	* manual/arith.texi (FP Comparison Functions): Document
	totalorder, totalorderf and totalorderl.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.
	* sysdeps/ieee754/dbl-64/s_totalorder.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_totalorder.c: Likewise.
	* sysdeps/ieee754/flt-32/s_totalorderf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_totalorderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_totalorderl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_totalorderl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-totalorder.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Add
	totalorder.
	(CFLAGS-nldbl-totalorder.c): New variable.
	* sysdeps/ieee754/ldbl-128ibm/test-totalorderl-ldbl-128ibm.c: New
	file.
	* sysdeps/ieee754/ldbl-128ibm/Makefile [$(subdir) = math] (tests):
	Add test-totalorderl-ldbl-128ibm.
	* sysdeps/ieee754/ldbl-96/test-totalorderl-ldbl-96.c: New file.
	* sysdeps/ieee754/ldbl-96/Makefile [$(subdir) = math] (tests): Add
	test-totalorderl-ldbl-96.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-10-11  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/Makefile (tests): Add tst-sync_file_range.
	* sysdeps/unix/sysv/linux/mips/mips32/sync_file_range.c: Remove file.
	* sysdeps/sysv/linux/powerpc/powerpc64/sync_file_range.c: Likewise.
	* sysdeps/unix/sysv/linux/sync_file_range.c: Use SYSCALL_LL64 and
	remove ENOSYS implementation.
	* sysdeps/unix/sysv/linux/tst-sync_file_range.c (sync_file_range):
	Consolidate all Linux implementations.

2016-10-11  Florian Weimer  <fweimer@redhat.com>

	* resolv/Makefile (+cflags): Do not set -Wno-write-strings.
	* resolv/herror.c (herror): Cast away const-ness.
	* resolv/res_debug.c (__p_class_syms, __p_default_section_syms)
	(__p_update_section_syms, __p_type_syms, __p_rcode_syms): Likewise.

2016-10-11  Joseph Myers  <joseph@codesourcery.com>

	* math/s_ccosh_template.c (M_DECL_FUNC (__ccosh)): Use M_NAN
	instead of M_NAN + M_NAN.
	* math/s_csinh_template.c (M_DECL_FUNC (__csinh)): Likewise.

2016-10-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* misc/getauxval.c [!HAVE_AUX_VECTOR] (__getauxval): Do not define
	unused variable 'p'.

2016-10-09  Alan Modra  <amodra@gmail.com>
	    Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #20554]
	* sysdeps/powerpc/powerpc32/ppc-mcount.S (_mcount)
	[PIC && !SHARED]: Set up PIC register for PLT call.

2016-10-07  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (iseqsig): Define
	conditional on value of [__FLT_EVAL_METHOD__].
	* math/test-iseqsig-excess-precision.c: New file.
	* math/Makefile (tests): Add test-iseqsig-excess-precision.

2016-10-07  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* math/s_iseqsig_template.c: Include math-private.h.

	* posix/Makefile (tests): Add tst-posix_fadvise and tst-posix_fadvise64.
	* posix/tst-posix_fadvise.c: New file.
	* posix/tst-posix_fadvise64.c: Likewise.
	* posix/tst-posix_fadvise-common.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_FADVISE64_64_6ARG): Define.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	[!__powerpc64__] (__ASSUME_FADVISE64_64_6ARG): Define.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	[!LP64] (__ASSUME_FADVISE64_64_NO_ALIGN): Define.
	* sysdeps/unix/sysv/linux/arm/posix_fadvise64.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/posix_fadvise.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/posix_fadvise64.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/posix_fadvise.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/posix_fadvise64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/posix_fadvise.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/posix_fadvise64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/posix_fadvise.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/posix_fadvise.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/posix_fadvise64.c:
	Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fadvise.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fadvise64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/posix_fadvise64.c
	(SHLIB_COMPAT(libc, GLIBC_2_2, GLIBC_2_3_3) [__posix_fadvise64_l64]:
	Alias to __posix_fadvise64_l32.
	(SHLIB_COMPAT(libc, GLIBC_2_2, GLIBC_2_3_3) [__posix_fadvise64_l32]:
	Add compat definition to posix_fadvise64.
	(SHLIB_COMPAT(libc, GLIBC_2_2, GLIBC_2_3_3) [__posix_fadvise64_l64]:
	Add versioned definition to posix_fadvise64.
	* sysdeps/unix/sysv/linux/posix_fadvise.c (posix_fadvise): Build iff
	__OFF_T_MATCHES_OFF64_T is defined, use INTERNAL_SYSCALL_CALL, add
	__ASSUME_FADVISE64_64_6ARG/__ASSUME_FADVISE64_64_NO_ALIGN support.
	* sysdeps/unix/sysv/linux/posix_fadvise64.c (posix_fadvise64): Add
	__ASSUME_FADVISE64_64_NO_ALIGN support and use INTERNAL_SYSCALL_CALL.

	* io/Makefile (tests): Add tst-posix_fallocate and
	tst-posix_fallocate64.
	* io/tst-posix_fallocate-common.c: New file.
	* io/tst-posix_fallocate.c: Likewise.
	* io/tst-posix_fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/posix_fallocate.c: Remove
	file.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/posix_fallocate64.c:
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/posix_fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/posix_fallocate64.c:
	Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/posix_fallocate.c (posix_fallocate): Use
	SYSCALL_LL to pass both offset and len arguments.
	* sysdeps/unix/sysv/linux/posix_fallocate64.c (posix_fallocate64):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (pwrite64): Add
	__libc_pwrite64 alias used by posix_fallocate64.

	* sysdeps/unix/sysv/linux/Makefile (test): Add tst-fallocate and
	tst-fallocate64.
	* sysdeps/unix/sysv/linux/tst-fallocate.c: New file.
	* sysdeps/unix/sysv/linux/tst-fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/tst-fallocate-common.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/fallocate.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/fallocate.c (fallocate): Use SYSCALL_LL
	macro on offset argument.
	* sysdeps/unix/sysv/linux/fallocate64.c (fallocate64): Use
	SYSCALL_LL64 on offset argument.

	* sysdeps/unix/sysv/linux/Makefile (test): Add tst-fallocate and
	tst-fallocate64.
	* sysdeps/unix/sysv/linux/tst-fallocate.c: New file.
	* sysdeps/unix/sysv/linux/tst-fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/tst-fallocate-common.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/fallocate.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/fallocate.c (fallocate): Use SYSCALL_LL
	macro on offset argument.
	* sysdeps/unix/sysv/linux/fallocate64.c (fallocate64): Use
	SYSCALL_LL64 on offset argument.
	* test-skeleton.c (FAIL_RET): Add macro.
	(FAIL_EXIT): Likewise.
	(FAIL_EXIT1): Likewise.
	(_FAIL): Likewise.

2016-10-07  Florian Weimer  <fweimer@redhat.com>

	[BZ #20629]
	resolv: Remove RES_USEBSTRING and its implementation.
	* resolv/resolv.h (RES_USEBSTRING): Remove.
	* resolv/ns_name.c (NS_TYPE_ELT, DNS_LABELTYPE_BITSTRING)
	(digitvalue, encode_bitstring, decode_bitstring): Remove.
	(ns_name_ntop, ns_name_pton, ns_name_unpack, ns_name_skip)
	(labellen): Remove extended label types support.
	* resolv/res_debug.c (p_option): Remove RES_USEBSTRING handling.
	* resolv/res_init.c (res_setoptions): Likewise.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyaddr2_r): Likewise.

2016-10-07  Florian Weimer  <fweimer@redhat.com>

	resolv: Remove RES_NOIP6DOTINT and its implementation.
	* resolv/resolv.h (RES_DEFAULT): Remove RES_NOIP6DOTINT.
	(RES_NOIP6DOTINT): Remove.
	* resolv/gethnamaddr.c (gethostbyaddr): Remove RES_NOIP6DOTINT
	handling.
	* resolv/res_debug.c (p_option): Likewise.
	* resolv/res_init.c (res_setoptions): Likewise.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyaddr2_r): Likewise.

2016-10-07  Florian Weimer  <fweimer@redhat.com>

	resolv: Deprecate unimplemented flags.
	* misc/sys/cdefs.h (__glibc_macro_warning1)
	(__glibc_macro_warning): Define.
	* resolv/resolv.h (RES_AAONLY, RES_PRIMARY, RES_NOCHECKNAME)
	(RES_KEEPTSIG): Mark as deprecated.
	* resolv/res_debug.c (p_option): Remove RES_AAONLY, RES_PRIMARY,
	RES_NOCHECKNAME, RES_KEEPTSIG.
	* resolv/res_init.c (res_setoptions): Remove RES_NOCHECKNAME handling.

2016-10-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/pt-longjmp.c (DEFINE_LONGJMP): Use libc_ifunc macro.
	* sysdeps/unix/sysv/linux/s390/pt-longjmp.c (longjmp, siglongjmp):
	Use strong_alias to create symbols for glibc verison 2.19.

2016-10-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/pt-vfork.c (DEFINE_VFORK): Use libc_ifunc macro.

2016-10-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/pt-system.c (system_ifunc): Use libc_ifunc macro.

2016-10-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* rt/clock-compat.c (COMPAT_REDIRECT): Use libc_ifunc macro.

2016-10-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c (__gettimeofday):
	Use libc_ifunc_hidden and libc_hidden_def macro. Redirect ifunced function
	in header for using it as type for ifunc function because __GI_* symbols
	for ppc32 do not target the ifunc symbols.
	* sysdeps/unix/sysv/linux/powerpc/time.c (time): Likewise.

2016-10-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/x86/gettimeofday.c (__gettimeofday):
	Use libc_ifunc_hidden macro. Use libc_hidden_def instead of
	libc_ifunc_hidden_def.
	* sysdeps/unix/sysv/linux/x86/time.c (time): Likewise.
	* sysdeps/unix/sysv/linux/i386/gettimeofday.c (__gettimeofday):
	Redirect ifunced function in header for using it as type of ifunc'ed
	function. Redefine libc_hidden_def to use fallback non ifunc'ed
	function for __GI_* symbol.
	* sysdeps/unix/sysv/linux/i386/time.c (time): Likewise.
	* include/libc-symbols.h
	(libc_ifunc_hidden_def, libc_ifunc_hidden_def1): Delete macro.

2016-10-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #20478]
	* sysdeps/s390/multiarch/ifunc-resolve.h
	(s390_vx_libc_ifunc2, s390_libc_ifunc): Use __ifunc from libc-symbols.h
	to create ifunc symbols.
	(s390_vx_libc_ifunc_init, s390_vx_libc_ifunc_redirected
	, s390_vx_libc_ifunc2_redirected, s390_libc_ifunc_init): New define.
	* sysdeps/s390/multiarch/memchr.c: Redirect ifunced function in header
	for using it as type for ifunc function.
	* sysdeps/s390/multiarch/mempcpy.c: Likewise.
	* sysdeps/s390/multiarch/rawmemchr.c: Likewise.
	* sysdeps/s390/multiarch/stpcpy.c: Likewise.
	* sysdeps/s390/multiarch/stpncpy.c: Likewise.
	* sysdeps/s390/multiarch/strcat.c: Likewise.
	* sysdeps/s390/multiarch/strchr.c: Likewise.
	* sysdeps/s390/multiarch/strcmp.c: Likewise.
	* sysdeps/s390/multiarch/strcpy.c: Likewise.
	* sysdeps/s390/multiarch/strcspn.c: Likewise.
	* sysdeps/s390/multiarch/strlen.c: Likewise.
	* sysdeps/s390/multiarch/strncmp.c: Likewise.
	* sysdeps/s390/multiarch/strncpy.c: Likewise.
	* sysdeps/s390/multiarch/strnlen.c: Likewise.
	* sysdeps/s390/multiarch/strpbrk.c: Likewise.
	* sysdeps/s390/multiarch/strrchr.c: Likewise.
	* sysdeps/s390/multiarch/strspn.c: Likewise.
	* sysdeps/s390/multiarch/wcschr.c: Likewise.
	* sysdeps/s390/multiarch/wcscmp.c: Likewise.
	* sysdeps/s390/multiarch/wcspbrk.c: Likewise.
	* sysdeps/s390/multiarch/wcsspn.c: Likewise.
	* sysdeps/s390/multiarch/wmemchr.c: Likewise.
	* sysdeps/s390/multiarch/wmemset.c: Likewise.
	* sysdeps/s390/s390-32/multiarch/memcmp.c: Likewise.
	* sysdeps/s390/s390-32/multiarch/memcpy.c: Likewise.
	* sysdeps/s390/s390-32/multiarch/memset.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/memcmp.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/memcpy.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/memset.c: Likewise.

2016-10-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* include/libc-symbols.h (__ifunc_resolver):
	New macro is used by __ifunc* macros.
	(__ifunc): New macro uses gcc attribute ifunc or inline assembly
	depending on HAVE_GCC_IFUNC.
	(libc_ifunc, libm_ifunc): Use __ifunc as base macro.
	(libc_ifunc_redirected, libc_ifunc_hidden, libm_ifunc_init): New macro.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finite.c:
	Redirect ifunced function in header for using as type for ifunc function.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finitef.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinf.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinff.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rawmemchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strnlen.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finitef.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinff.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcat.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strstr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnanf.c:
	Add libc_hidden_def() and use libc_ifunc_hidden() macro
	instead of libc_ifunc() macro.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnanf.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c: Likewise.

2016-10-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* config.h.in (HAVE_GCC_IFUNC): New undef.
	* configure.ac: Add check if gcc supports attribute ifunc feature.
	* configure: Regenerated.
	* manual/install.texi: Add recommendation for gcc with
	indirect-function support.
	* INSTALL: Regenerated.

2016-10-06  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (iseqsig): New
	macro.
	* math/bits/mathcalls.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(__iseqsig): New declaration.
	* math/s_iseqsig_template.c: New file.
	* math/Versions (__iseqsigf): New libm symbol at version
	GLIBC_2.25.
	(__iseqsig): Likewise.
	(__iseqsigl): Likewise.
	* math/libm-test.inc (iseqsig_test_data): New array.
	(iseqsig_test): New function.
	(main): Call iseqsig_test.
	* math/Makefile (gen-libm-calls): Add s_iseqsigF.
	* manual/arith.texi (FP Comparison Functions): Document iseqsig.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.
	* sysdeps/generic/fix-fp-int-compare-invalid.h: New file.
	* sysdeps/powerpc/fpu/fix-fp-int-compare-invalid.h: Likewise.
	* sysdeps/x86/fpu/fix-fp-int-compare-invalid.h: Likewise.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-10-06  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/ieee754/dbl-64/s_sin.c (reduce_and_compute, do_sincos_1,
	do_sincos_2, sloww, sloww1): Update comments.

	* sysdeps/ieee754/dbl-64/s_sincos.c (__sincos): Adjust calls to
	do_sincos_1 and do_sincos_2 to pass a boolean shift_quadrant.

	* sysdeps/ieee754/dbl-64/s_sin.c (reduce_and_compute): Make
	K boolean and rename it.
	(__sin): Adjust.
	(__cos): Adjust.

2016-10-06  Rical Jasan  <ricaljasan@pacific.net>
	    Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* manual/nss.texi: Fix typos in the manual.

2016-10-06  Rical Jasan  <ricaljasan@pacific.net>

	* manual/contrib.texi: Fix typos in the manual.

	* manual/maint.texi: Fix typos in the manual.

	* manual/install.texi: Fix typos in the manual.
	* INSTALL: Regenerated.

	* manual/lang.texi: Fix typos in the manual.

	* manual/probes.texi: Fix typos in the manual.

	* manual/threads.texi: Fix typos in the manual.

	* manual/debug.texi: Fix typos in the manual.

	* manual/crypt.texi: Fix typos in the manual.

	* manual/conf.texi: Fix typos in the manual.

	* manual/sysinfo.texi: Fix typos in the manual.

	* manual/users.texi: Fix typos in the manual.

	* manual/job.texi: Fix typos in the manual.

	* manual/process.texi: Fix typos in the manual.

	* manual/argp.texi: Fix typos in the manual.
	* manual/getopt.texi: Likewise.
	* manual/startup.texi: Likewise.

	* manual/signal.texi: Fix typos in the manual.

	* manual/setjmp.texi: Fix typos in the manual.

	* manual/resource.texi: Fix typos in the manual.

	* manual/time.texi: Fix typos in the manual.

	* manual/arith.texi: Fix typos in the manual.

	* manual/math.texi: Fix typos in the manual.

	* manual/syslog.texi: Fix typos in the manual.

	* manual/terminal.texi: Fix typos in the manual.

	* manual/socket.texi: Fix typos in the manual.

	* manual/filesys.texi: Fix typos in the manual.

	* manual/llio.texi: Fix typos in the manual.

	* manual/stdio.text: Fix typos in the manual.

2016-10-05  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/ieee754/dbl-64/s_sin.c (do_sincos_1): Check N
	instead of K1.

	* sysdeps/ieee754/dbl-64/s_sin.c (do_sincos_1): Rename K to
	SHIFT_QUADRANT and make it bool.
	(do_sincos_2): Likewise.
	(sloww): Likewise.
	(sloww1): Likewise.
	(__sin): Adjust calls to do_sincos_1 and do_sincos_2.
	(__cos): Likewise.

2016-10-05  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Regenerated.

2016-10-04  Joseph Myers  <joseph@codesourcery.com>

	* include/limits.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (LONG_WIDTH):
	Define to __WORDSIZE, not conditional on [LONG_MAX ==
	0x7fffffffL].
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (ULONG_WIDTH): Likewise.

2016-10-04  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/sys/platform/ppc.h (__ppc_get_timebase): Replace
	inline by __inline__.
	(__ppc_yield, __ppc_mdoio, __ppc_mdoom, __ppc_set_ppr_med): Likewise.
	(__ppc_set_ppr_med_low, __ppc_set_ppr_low): Likewise.
	(__ppc_set_ppr_very_low, __ppc_set_ppr_med_high): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: Require
	sigset_t from signal.h.
	* sysdeps/unix/sysv/linux/powerpc/sys/user.h: Include stddef.h,
	which is already required.

2016-10-04  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerated.

2016-10-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/gnu/netinet/tcp.h (TCP_REPAIR_WINDOW): New macro.
	(struct tcp_repair_window): New type.

2016-10-02  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* libio/tst-memstream3.c: Include string.h.

2016-09-30  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #18241]
	[BZ #20181]
	* libio/Makefile (test): Add tst-memstream3 and tst-wmemstream3.
	* libio/memstream.c (_IO_mem_sync): Only append a null byte if
	write position is at the end the buffer.
	* libio/wmemstream.c (_IO_wmem_sync): Likewise.
	* libio/strops.c (_IO_str_switch_to_get_mode): New function.
	(_IO_str_seekoff): Set correct offset from negative displacement and
	set EINVAL for invalid ones.
	* libio/wstrops.c (enlarge_userbuf): Use correct function to calculate
	buffer length.
	(_IO_wstr_switch_to_get_mode): New function.
	(_IO_wstr_seekoff): Set correct offset from negative displacement and
	set EINVAL for invalid ones.
	* libio/tst-memstream3.c: New file.
	* libio/tst-wmemstream3.c: Likewise.
	* manual/examples/memstrm.c: Remove warning when priting size_t.

2016-09-30  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/dbl-64/dla.h [__FP_FAST_FMA] (DLA_FMS): Define
	macro to use __builtin_fma.
	* sysdeps/x86_64/fpu/dla.h: Remove file.

	* sysdeps/ieee754/ldbl-128ibm/bits/iscanonical.h
	[__NO_LONG_DOUBLE_MATH] (__iscanonicall): Do not declare.
	[__NO_LONG_DOUBLE_MATH] (iscanonical): Define to evaluate to 1.

2016-09-30  Carlos O'Donell  <carlos@redhat.com>

	[BZ #20292]
	* elf/Makefile (routines): Add dl-addr-obj.
	[ifeq (yesyes,$(have-fpie)$(build-shared))] (tests): Add
	tst-_dl_addr_inside_object.
	[ifeq (yesyes,$(have-fpie)$(build-shared))] (tests-pie): Likewise.
	[ifeq (yesyes,$(have-fpie)$(build-shared))]
	($(objpfx)tst-_dl_addr_inside_object): Add $(objpfx)dl-addr-obj.os.
	[ifeq (yesyes,$(have-fpie)$(build-shared))]
	(CFLAGS-tst-_dl_addr_inside_object.c): Add $(PIE-ccflag).
	* elf/dl-addr.c: Remove _dl_addr_inside_object function.
	* elf/dl-open.c: Likewise.
	* elf/dl-addr-obj.c: New file.
	* elf/tst-_dl_addr_inside_object.c: New file.

2016-09-30  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h [__GLIBC_USE (IEC_60559_BFP_EXT)]: Include
	<bits/iscanonical.h>.
	* bits/iscanonical.h: New file.
	* math/s_iscanonicall.c: Likewise.
	* math/Versions (__iscanonicall): New libm symbol at version
	GLIBC_2.25.
	* math/libm-test.inc (iscanonical_test_data): New array.
	(iscanonical_test): New function.
	(main): Call iscanonical_test.
	* math/Makefile (headers): Add bits/iscanonical.h.
	(type-ldouble-routines): Add s_iscanonicall.
	* manual/arith.texi (Floating Point Classes): Document
	iscanonical.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.
	* sysdeps/ieee754/ldbl-128ibm/bits/iscanonical.h: New file.
	* sysdeps/ieee754/ldbl-128ibm/s_iscanonicall.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/test-iscanonical-ldbl-128ibm.c:
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/Makefile (tests): Add
	test-iscanonical-ldbl-128ibm.
	* sysdeps/ieee754/ldbl-96/bits/iscanonical.h: New file.
	* sysdeps/ieee754/ldbl-96/s_iscanonicall.c: Likewise.
	* sysdeps/ieee754/ldbl-96/test-iscanonical-ldbl-96.c: Likewise.
	* sysdeps/ieee754/ldbl-96/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-09-29  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* string/bits/string3.h: Remove C++ style comments.

2016-09-29  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/ieee754/dbl-64/s_sin.c (do_sincos_1): Use copysign
	instead of ternary condition.
	(do_sincos_2): Likewise.
	(__sin): Likewise.
	(__cos): Likewise.
	(slow): Likewise.
	(sloww): Likewise.
	(sloww1): Likewise.
	(bsloww): Likewise.
	(bsloww1): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (do_cos_slow): use copysign
	instead of ternary condition.
	(do_sin_slow): Likewise.
	(do_sincos_1): Likewise.
	(do_sincos_2): Likewise.
	(__cos): Likewise.
	(sloww): Likewise.
	(sloww1): Likewise.
	(sloww2): Likewise.
	(bsloww): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (slow1): Consolidate sign
	check from here...
	(slow2): ... and here...
	(__sin): ... to here.

2016-09-28  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h
	[__GLIBC_USE (IEC_60559_BFP_EXT) && !__SUPPORT_SNAN__] (iszero):
	Cast argument to its own type.
	* math/test-iszero-excess-precision.c: New file.
	* math/Makefile (tests): Add test-iszero-excess-precision.
	(CFLAGS-test-iszero-excess-precision.c): New variable.

2016-09-28  Rasmus Villemoes <rv@rasmusvillemoes.dk>

	* sysdeps/unix/sysv/linux/spawni.c (posix_spawn_args): Remove pipe
	field, add err field.
	(__spawni_child): Report error through err member instead of pipe.
	(__spawnix): Likewise.

2016-09-28  Zack Weinberg  <zackw@panix.com>

	* scripts/check-installed-headers.sh: Generalize treatment of
	sys/elf.h to all target architectures.

	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h: Restore accidentally-
	deleted typedef ucontext_t.

2016-09-26  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysdep.h (__INTERNAL_SYSCALL0): New macro.
	(__INTERNAL_SYSCALL1): Likewise.
	(__INTERNAL_SYSCALL2): Likewise.
	(__INTERNAL_SYSCALL3): Likewise.
	(__INTERNAL_SYSCALL4): Likewise.
	(__INTERNAL_SYSCALL5): Likewise.
	(__INTERNAL_SYSCALL6): Likewise.
	(__INTERNAL_SYSCALL7): Likewise.
	(__INTERNAL_SYSCALL_NARGS_X): Likewise.
	(__INTERNAL_SYSCALL_NARGS): Likewise.
	(__INTERNAL_SYSCALL_DISP): Likewise.
	(INTERNAL_SYSCALL_CALL): Likewise.
	(__SYSCALL0): Rename to __INLINE_SYSCALL0.
	(__SYSCALL1): Rename to __INLINE_SYSCALL1.
	(__SYSCALL2): Rename to __INLINE_SYSCALL2.
	(__SYSCALL3): Rename to __INLINE_SYSCALL3.
	(__SYSCALL4): Rename to __INLINE_SYSCALL4.
	(__SYSCALL5): Rename to __INLINE_SYSCALL5.
	(__SYSCALL6): Rename to __INLINE_SYSCALL6.
	(__SYSCALL7): Rename to __INLINE_SYSCALL7.
	(__SYSCALL_NARGS_X): Rename to __INLINE_SYSCALL_NARGS_X.
	(__SYSCALL_NARGS): Rename to __INLINE_SYSCALL_NARGS.
	(__SYSCALL_DISP): Rename to __INLINE_SYSCALL_DISP.
	(__SYSCALL_CALL): Rename to INLINE_SYSCALL_CALL.
	(SYSCALL_CANCEL): Replace __SYSCALL_CALL with INLINE_SYSCALL_CALL.

2016-09-23  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (iszero): New
	macro.
	* math/libm-test.inc (iszero_test_data): New array.
	(iszero_test): New function.
	(main): Call iszero_test.
	* manual/arith.texi (Floating Point Classes): Document iszero.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.

2016-09-23  Zack Weinberg  <zackw@panix.com>

	* scripts/check-installed-headers.sh: New script.
	* Rules: In each directory that defines header files to be installed,
	run check-installed-headers.sh on them as a special test.
	* Makefile: Likewise for the headers installed at top level.

	* include/aliases.h, include/alloca.h, include/argz.h
	* include/arpa/nameser.h, include/arpa/nameser_compat.h
	* include/elf.h, include/envz.h, include/err.h
	* include/execinfo.h, include/fpu_control.h, include/getopt.h
	* include/gshadow.h, include/ifaddrs.h, include/libintl.h
	* include/link.h, include/malloc.h, include/mcheck.h
	* include/mntent.h, include/netinet/ether.h
	* include/nss.h, include/obstack.h, include/printf.h
	* include/pty.h, include/resolv.h, include/rpc/auth.h
	* include/rpc/auth_des.h, include/rpc/auth_unix.h
	* include/rpc/clnt.h, include/rpc/des_crypt.h
	* include/rpc/key_prot.h, include/rpc/netdb.h
	* include/rpc/pmap_clnt.h, include/rpc/pmap_prot.h
	* include/rpc/pmap_rmt.h, include/rpc/rpc.h
	* include/rpc/rpc_msg.h, include/rpc/svc.h
	* include/rpc/svc_auth.h, include/rpc/xdr.h
	* include/rpcsvc/nis_callback.h, include/rpcsvc/nislib.h
	* include/rpcsvc/yp.h, include/rpcsvc/ypclnt.h
	* include/rpcsvc/ypupd.h, include/shadow.h
	* include/stdio_ext.h, include/sys/epoll.h
	* include/sys/file.h, include/sys/gmon.h, include/sys/ioctl.h
	* include/sys/prctl.h, include/sys/profil.h
	* include/sys/statfs.h, include/sys/sysctl.h
	* include/sys/sysinfo.h, include/ttyent.h, include/utmp.h
	* sysdeps/arm/nacl/include/bits/setjmp.h
	* sysdeps/mips/include/sys/asm.h
	* sysdeps/unix/sysv/linux/include/sys/sysinfo.h
	* sysdeps/unix/sysv/linux/include/sys/timex.h
	* sysdeps/x86/fpu/include/bits/fenv.h:
	Add #ifndef _ISOMAC guard around internal declarations.
	Add multiple-inclusion guard if not already present.

2016-09-23  Zack Weinberg  <zackw@panix.com>

	* sysdeps/generic/sys/ucontext.h
	* sysdeps/arm/sys/ucontext.h
	* sysdeps/i386/sys/ucontext.h
	* sysdeps/m68k/sys/ucontext.h
	* sysdeps/mips/sys/ucontext.h
	* sysdeps/unix/sysv/linux/aarch64/sys/ucontext.h
	* sysdeps/unix/sysv/linux/alpha/sys/ucontext.h
	* sysdeps/unix/sysv/linux/arm/sys/ucontext.h
	* sysdeps/unix/sysv/linux/hppa/sys/ucontext.h
	* sysdeps/unix/sysv/linux/ia64/sys/ucontext.h
	* sysdeps/unix/sysv/linux/m68k/sys/ucontext.h
	* sysdeps/unix/sysv/linux/mips/sys/ucontext.h
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h
	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h
	* sysdeps/unix/sysv/linux/tile/sys/ucontext.h
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h:
	Include both bits/sigcontext.h and bits/sigstack.h.
	Fix grammar error in comment, if present.

	* bits/sigstack.h
	* sysdeps/unix/sysv/linux/aarch64/bits/sigstack.h
	* sysdeps/unix/sysv/linux/alpha/bits/sigstack.h
	* sysdeps/unix/sysv/linux/bits/sigstack.h
	* sysdeps/unix/sysv/linux/ia64/bits/sigstack.h
	* sysdeps/unix/sysv/linux/mips/bits/sigstack.h
	* sysdeps/unix/sysv/linux/powerpc/bits/sigstack.h
	* sysdeps/unix/sysv/linux/sparc/bits/sigstack.h
	* bits/sigcontext.h
	* sysdeps/mach/hurd/i386/bits/sigcontext.h
	* sysdeps/unix/sysv/linux/bits/sigcontext.h
	* sysdeps/unix/sysv/linux/ia64/bits/sigcontext.h
	* sysdeps/unix/sysv/linux/sparc/bits/sigcontext.h:
	Add multiple inclusion guard.  Permit inclusion by sys/ucontext.h
	as well as signal.h, if this was not already allowed.  Request
	definition of size_t if necessary.  Minimize semantically-null
	differences across files.

2016-09-23  Zack Weinberg  <zackw@panix.com>

	* time/time.h, bits/time.h, sysdeps/unix/sysv/linux/bits/time.h:
	Remove all logic conditional on __need macros.	Move all the
	conditionally defined types to their own headers...
	* time/bits/types/clock_t.h: Define clock_t here.
	* time/bits/types/clockid_t.h: Define clockid_t here.
	* time/bits/types/struct_itimerspec.h: Define struct itimerspec here.
	* time/bits/types/struct_timespec.h: Define struct timespec here.
	* time/bits/types/struct_timeval.h: Define struct timeval here.
	* time/bits/types/struct_tm.h: Define struct tm here.
	* time/bits/types/time_t.h: Define time_t here.
	* time/bits/types/timer_t.h: Define timer_t here.
	* time/Makefile: Install the new headers.

	* bits/resource.h, io/fcntl.h, io/sys/poll.h, io/sys/stat.h
	* io/utime.h, misc/sys/select.h, posix/sched.h, posix/sys/times.h
	* posix/sys/types.h, resolv/netdb.h, rt/aio.h, rt/mqueue.h
	* signal/signal.h, pthread/semaphore.h, sysdeps/nptl/pthread.h
	* sysdeps/unix/sysv/linux/alpha/bits/resource.h
	* sysdeps/unix/sysv/linux/alpha/sys/acct.h
	* sysdeps/unix/sysv/linux/bits/resource.h
	* sysdeps/unix/sysv/linux/bits/timex.h
	* sysdeps/unix/sysv/linux/mips/bits/resource.h
	* sysdeps/unix/sysv/linux/net/ppp_defs.h
	* sysdeps/unix/sysv/linux/sparc/bits/resource.h
	* sysdeps/unix/sysv/linux/sys/acct.h
	* sysdeps/unix/sysv/linux/sys/timerfd.h
	* sysvipc/sys/msg.h, sysvipc/sys/sem.h, sysvipc/sys/shm.h
	* time/sys/time.h, time/sys/timeb.h
	Use the new bits/types headers.

	* include/time.h: Remove __need logic.
	* include/bits/time.h
	* include/bits/types/clock_t.h, include/bits/types/clockid_t.h
	* include/bits/types/time_t.h, include/bits/types/timer_t.h
	* include/bits/types/struct_itimerspec.h
	* include/bits/types/struct_timespec.h
	* include/bits/types/struct_timeval.h
	* include/bits/types/struct_tm.h:
	New wrapper headers.

2016-09-23  Zack Weinberg  <zackw@panix.com>

	* sysdeps/mach/hurd/net/if_ppp.h
	* sysdeps/unix/sysv/linux/net/if_ppp.h:
	Only define struct ifpppstatsreq and struct ifpppcstatsreq
	if __USE_MISC is defined, to ensure struct ifreq is declared.

	* inet/netinet/ether.h: Condition all function prototypes
	on __USE_MISC, to ensure struct ether_addr is declared.

	* socket/bits/types/struct_osockaddr.h: New header.
	* include/bits/types/struct_osockaddr.h: New wrapper.
	* socket/Makefile: Install the new header.
	* socket/sys/socket.h, inet/protocols/talkd.h:
	Refer to bits/types/struct_osockaddr.h for the definition of
	struct osockaddr.

2016-09-23  Zack Weinberg  <zackw@panix.com>

	* bits/in.h, gmon/sys/gmon.h, inet/netinet/igmp.h
	* inet/protocols/routed.h, inet/protocols/talkd.h
	* inet/protocols/timed.h, io/fts.h, nptl_db/thread_db.h
	* resolv/arpa/nameser.h, resolv/resolv.h, sunrpc/rpc/rpc_des.h
	* sysdeps/generic/netinet/if_ether.h
	* sysdeps/generic/netinet/in_systm.h
	* sysdeps/generic/netinet/ip.h, sysdeps/generic/netinet/tcp.h
	* sysdeps/gnu/netinet/ip_icmp.h, sysdeps/gnu/netinet/tcp.h
	* sysdeps/gnu/netinet/udp.h, sysdeps/mach/hurd/net/ethernet.h
	* sysdeps/mach/hurd/net/if_arp.h
	* sysdeps/mach/hurd/net/if_ppp.h
	* sysdeps/mach/hurd/net/route.h, sysdeps/mach/sys/reboot.h
	* sysdeps/unix/sysv/linux/bits/in.h
	* sysdeps/unix/sysv/linux/net/ethernet.h
	* sysdeps/unix/sysv/linux/net/if_arp.h
	* sysdeps/unix/sysv/linux/net/if_ppp.h
	* sysdeps/unix/sysv/linux/net/if_shaper.h
	* sysdeps/unix/sysv/linux/net/route.h
	* sysdeps/unix/sysv/linux/netinet/if_ether.h
	* sysdeps/unix/sysv/linux/netinet/if_fddi.h
	* sysdeps/unix/sysv/linux/netinet/if_tr.h
	* sysdeps/unix/sysv/linux/netipx/ipx.h
	* sysdeps/unix/sysv/linux/sys/acct.h
	* include/arpa/nameser.h, include/resolv.h:
	Change all uses of u_char to unsigned char,
	u_short and ushort to unsigned short, u_int and uint to unsigned int,
	u_long and ulong to unsigned long, u_int8_t to uint8_t,
	u_int16_t to uint16_t, u_int32_t to uint32_t, quad_t to int64_t,
	and u_int64_t and u_quad_t to uint64_t.

	* mach/sys/reboot.h: Remove two casts of integer literals
	to the types they already have.

	* bits/in.h: Correct error in description of IP_MULTICAST_LOOP.
	* sysdeps/unix/sysv/linux/bits/in.h: Likewise.
	* sysdeps/unix/sysv/linux/netinet/if_ether.h: Change a comment
	from referring to 'unsigned char' to 'uint8_t' for consistency with
	the macro definition below.

	* gmon/sys/gmon.h, inet/netinet/igmp.h, inet/protocols/talkd.h
	* io/fts.h, resolv/arpa/nameser.h, resolv/resolv.h
	* sunrpc/rpc/rpc_des.h, sysdeps/generic/netinet/ip.h
	* sysdeps/gnu/netinet/tcp.h, sysdeps/gnu/netinet/udp.h
	* sysdeps/mach/hurd/net/if_ppp.h, sysdeps/unix/sysv/linux/net/if_ppp.h
	* sysdeps/unix/sysv/linux/sys/acct.h
	* include/arpa/nameser.h, include/resolv.h:
	Fix indentation disrupted by mechanical edits.

	* inet/protocols/talkd.h, resolv/arpa/nameser.h
	* sysdeps/generic/netinet/in_systm.h
	* sysdeps/gnu/netinet/ip_icmp.h, sysdeps/gnu/netinet/tcp.h
	* sysdeps/gnu/netinet/udp.h
	* sysdeps/unix/sysv/linux/net/ethernet.h
	* sysdeps/unix/sysv/linux/net/if_arp.h
	* sysdeps/unix/sysv/linux/net/if_ppp.h
	* sysdeps/unix/sysv/linux/net/if_shaper.h
	* sysdeps/unix/sysv/linux/netinet/if_fddi.h
	* sysdeps/unix/sysv/linux/netinet/if_tr.h
	* sysdeps/unix/sysv/linux/netipx/ipx.h
	* sysdeps/unix/sysv/linux/sys/acct.h
	Include stdint.h for uintNN_t definitions.
	Don't include sys/cdefs.h, features.h, or asm/types.h directly.

2016-09-23  Zack Weinberg  <zackw@panix.com>

	* rpcsvc/nislib.h: Include rpcsvc/nis.h.
	* sysdeps/unix/sysv/linux/netrose/rose.h:
	Include sys/socket.h and netax25/ax25.h.

	* inet/netinet/icmp6.h, inet/netinet/ip6.h
	* resolv/arpa/nameser_compat.h:
	Use __BYTE_ORDER etc. instead of BYTE_ORDER etc.

	* sysdeps/unix/sysv/linux/sys/quota.h:
	Use __caddr_t instead of caddr_t.
	* sysdeps/unix/sysv/linux/sys/timerfd.h:
	Use __clockid_t instead of clockid_t.

	* sysvipc/sys/ipc.h: Remove unnecessary #warning.

	* argp/argp.h: Check whether _LIBC is defined before expanding it.
	* posix/glob.h: Check whether __USE_XOPEN2K8 is defined instead of
	expanding it.

	* misc/sys/cdefs.h: Tidy up conditional nest defining __flexarr.
	Define __glibc_c99_flexarr_available to 1 when the compiler
	supports C99-compatible flexible array members, 0 otherwise.
	* sysdeps/unix/sysv/linux/bits/socket.h
	* sysdeps/mach/hurd/bits/socket.h
	* bits/socket.h: Use __glibc_c99_flexarr_available in
	definitions of struct cmsghdr and CMSG_DATA.

2016-09-23  Florian Weimer  <fweimer@redhat.com>

	* manual/nss.texi (NSS Modules Interface): Adjust function return
	type to enum nss_status.  Document errnop argument.  Clarify
	h_errnop semantics.  Fix cross-reference formatting.
	(NSS Module Function Internals): Mention that *errnop needs to be
	set on failure, but not to zero.

2016-09-23  Florian Weimer  <fweimer@redhat.com>

	* io/tst-open-tmpfile.c (wrap_open64, wrap_openat64)
	(get_random_name): New functions.
	(check_wrapper_flags_mode): Use linkat to give the new file a name
	determined by get_random_name.
	(do_test): Add calls to test open64 and openat64.

2016-09-23  Florian Weimer  <fweimer@redhat.com>

	* test-skeleton.c: Remove #include <stdarg.h>.

2016-09-21  Alexandre Oliva <aoliva@redhat.com>

	[BZ #19826]
	* elf/dl-tls.c (_dl_allocate_tls_init): Restore DTV early
	initialization of static TLS entries.
	* elf/dl-reloc.c (_dl_nothread_init_static_tls): Likewise.
	* nptl/allocatestack.c (init_one_static_tls): Likewise.

2016-09-22  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurdmalloc.c (malloc_fork_prepare): Rename to
	_hurd_malloc_fork_prepare.
	(malloc_fork_parent): Rename to _hurd_malloc_fork_parent.
	(malloc_fork_child): Rename to _hurd_malloc_fork_child.
	(_hurd_fork_prepare_hook): Drop malloc_fork_prepare.
	(_hurd_fork_parent_hook): Drop malloc_fork_parent.
	(_hurd_fork_child_hook): Drop malloc_fork_child.
	* hurd/hurdmalloc.h (_hurd_malloc_fork_prepare,
	_hurd_malloc_fork_parent, _hurd_malloc_fork_child): Add declarations.
	* sysdeps/mach/hurd/fork.c (__fork): Call __malloc_fork_lock_parent
	after locking locks (notably hurd_dtable_lock). Call
	_hurd_malloc_fork_prepare after that. Call _hurd_malloc_fork_parent
	before __malloc_fork_unlock_parent and _hurd_malloc_fork_child before
	__malloc_fork_unlock_child.
	* sysdeps/mach/i386/syscall.S (syscall): Push back syscall number.

2016-09-21  James Greenhalgh  <james.greenhalgh@arm.com>

	* soft-fp/extendhftf2.c: New.
	* soft-fp/fixhfti.c: Likewise.
	* soft-fp/fixunshfti.c: Likewise.
	* soft-fp/floattihf.c: Likewise.
	* soft-fp/floatuntihf.c: Likewise.
	* soft-fp/half.h: Likewise.
	* soft-fp/trunctfhf2.c: Likewise.

2016-09-21  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (issubnormal): New
	macro.
	* math/libm-test.inc (issubnormal_test_data): New array.
	(issubnormal_test): New function.
	* manual/arith.texi (Floating Point Classes): Document
	issubnormal.
	* manual/libm-err-tab.pl: Update comment on interfaces without
	ulps tabulated.

	* sysdeps/generic/stdint.h: Define
	__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION and include
	<bits/libc-header-start.h> instead of including <features.h>.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT8_WIDTH): New macro.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT8_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT16_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT16_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT32_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT32_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT64_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT64_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT_LEAST8_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT_LEAST8_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT_LEAST16_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT_LEAST16_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT_LEAST32_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT_LEAST32_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT_LEAST64_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT_LEAST64_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT_FAST8_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT_FAST8_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT_FAST16_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT_FAST16_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT_FAST32_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT_FAST32_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT_FAST64_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT_FAST64_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INTPTR_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINTPTR_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INTMAX_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINTMAX_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (PTRDIFF_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (SIG_ATOMIC_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (SIZE_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (WCHAR_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (WINT_WIDTH): Likewise.
	* manual/arith.texi (Integers): Document these macros for types
	specified by width properties.
	* manual/lang.texi (Width of Type): Document these macros for
	other standard typedefs.
	* stdlib/tst-width-stdint.c: New file.
	* stdlib/Makefile (tests): Add tst-width-stdint.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	[BZ #20016]
	* resolv/res_send.c (__libc_res_nsend): Remove USE_HOOK code.
	* resolv/res_data.c (res_send_setqhook, res_send_setrhook):
	Move ...
	* resolv/compat-hooks.c (res_send_setqhook, res_send_setrhook):
	... here, as compatibility symbols in a new file.
	* resolv/Makefile (libresolv-routines): Add compat-hooks.
	* resolv/res_init.c (__res_vinit): Adjust member names.
	* include/resolv.h (res_send_setqhook, res_send_setrhook): Remove.
	* resolv/resolv.h (res_sendhookact, res_send_qhook)
	(res_send_rhook): Remove.
	(struct __res_state): Rename qhook, rhook members.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	malloc: Use __libc_lock wrappers.
	* malloc/arena.c (list_lock, free_list_lock): Define using
	__libc_lock_define_initialized.
	(arena_lock): Adjust formatting.
	* malloc/malloc.c (struct malloc_state): Define mutex using
	__libc_lock_define.
	* sysdeps/generic/malloc-machine.h (mutex_t, mutex_init)
	(mutex_lock, mutex_trylock, mutex_unlock): Remove.
	* sysdeps/mach/hurd/malloc-machine.h (mutex_t, mutex_lock)
	(mutex_unlock, mutex_trylock): Remove.
	(__pthread_initialize): Remove unused macro.
	* sysdeps/nptl/malloc-machine.h (mutex_t, mutex_lock)
	(mutex_unlock, mutex_trylock): Remove.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	[BZ #20592]
	Remove RR type classification macros.
	* resolv/arpa/nameser.h (ns_t_qt_p, ns_t_mrr_p, ns_t_rr_p)
	(ns_t_udp_p, ns_t_xfr_p): Remove.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	Remove misleading version information.
	* resolv/arpa/nameser.h (__NAMESER): Remove.
	* resolv/arpa/nameser_compat.h (__BIND): Remove.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	Remove the always-defined BIND_4_COMPAT macro.
	* resolv/arpa/nameser.h: Unconditionally include
	<arpa/nameser_compat.h>.
	(BIND_4_COMPAT): Remove.
	* resolv/res_comp.c: Do not check BIND_4_COMPAT.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	[BZ #20591]
	Remove obsolete DNSSEC support.
	* resolv/arpa/nameser.h (ns_key_types, NS_KEY_*, NS_ALG_*)
	(NS_MD5_RSA_*, NS_DSA_*, NS_NXT_*, ns_sign, ns_sign2, ns_sign_tcp)
	(ns_sign_tcp2, ns_sign_tcp_init, ns_find_tsig, ns_verify)
	(ns_verify_tcp, ns_verify_tcp_init): Remove.
	(ns_cert_types): Add comment.
	* resolv/ns_print.c (ns_sprintrrf): Do not handle DNSSEC records
	separately.
	(KEY_RSA, KEY_HMAC_MD5, dst_s_id_calc, dst_s_get_int16)
	(dst_s_dns_key_id): Remove.
	* resolv/res_debug.c (__p_key_syms, __p_cert_syms): Remove unused
	variables.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	[BZ #20524]
	* manual/string.texi (String/Array Comparison): Clarify the
	strverscmp behavior.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	* test-skeleton.c (xasprintf): Add function.
	* io/tst-open-tmpfile.c: New test.
	* io/Makefile (tests): Add it.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	Avoid running $(CXX) during build to obtain header file paths.
	* configure.ac (CXX_SYSINCLUDES, CXX_CMATH_HEADER): Set.
	* config.make.in (c++-cstdlib-header, c++-cmath-header): Define.
	* Makerules (cstdlib, cmath): Remove variables.  Use
	$(c++-cstdlib-header), $(c++-cmath-header) instead.
	* configure: Regenerate.

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	* Makeconfig (all-object-suffixes): Include .op only if
	$(build-profile).

2016-09-21  Florian Weimer  <fweimer@redhat.com>

	* elf/sln.c: Remove HAVE_CONFIG_H, S_ISDIR, S_ISLNK preprocessor
	conditionals.  Do not define PATH_MAX.

2016-09-20  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* posix/Makefile (tests): Add tst-spawn3.
	* posix/tst-spawn3.c: New file.
	* sysdeps/unix/sysv/linux/spawni.c (__spawni_child): Close file descriptor
	if it is already opened for open action.

	* sysdeps/unix/sysv/linux/spawni.c (__spawnix): Correctly block and unblock
	all signals when executing the clone vfork child.
	(SIGALL_SET): Remove macro.

	* nptl/Makefile (tests): Add tst-exec5.
	* nptl/tst-exec5.c: New file.
	* sysdeps/unix/sysv/linux/spawni.c (__spawni): Correctly enable and disable
	asynchronous cancellation.

2016-09-20  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/exc2signal.c: #include <hurd/signal.h>
	(_hurd_exception2signal): Replace 'exception', 'code', 'subcode',
	'sigcode', 'error' parameters with 'detail' parameter.  Fix code
	accordingly.
	* mach/mach_error.c (mach_error): Fix old-style function definition.
	* mach/errstring.c (mach_error_type, mach_error_string): Likewise.

2016-09-20  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (libm-calls): Remove s_nanF.
	(gen-libm-calls): Add s_nanF.

	* math/s_nan.c: Refactor into ...
	* math/s_nan_template.c: New file.

	* math/s_nanf.c: Removed.
	* math/s_nanl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_nan.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_nanl.c: Removed.

	* sysdeps/ieee754/ldbl-opt/math-type-macros-double.h:
	(LDOUBLE_nanl_libm_version): New macro.

	* sysdeps/generic/math-type-macros-double.h:
	(M_STRTO_NAN): New macro.
	* sysdeps/generic/math-type-macros-float.h: Likewise.
	* sysdeps/generic/math-type-macros-ldouble.h: Likewise.

	* sysdeps/generic/math-type-macros.h: Document
	M_STRTO_NAN.

2016-09-20  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/s_nanf.c: Remove __nanf undef.
	* math/s_nan.c: Remove __nan undef.
	* math/s_nanl.c: Remove __nanl undef.

	* sysdeps/generic/math_private.h (__nan): Remove macro
	override.
	(__nanf): Likewise.
	(__nanl): Likewise.

2016-09-20  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (gen-all-calls): New variable.
	(generated): Replace gen-libm-calls with gen-all-calls.
	(gen-libm-templates.stmp): Likewise.  Also, ensure
	the output directory exists or is created and add
	dependency on the Makefile.
	(calls): Move s_ldexpF into gen-calls.
	(gen-calls): New variable.

	* math/s_ldexpf.c: Removed.
	* math/s_ldexpl.c: Removed.
	* math/s_ldexp.c: Refactored into ...
	* math/s_ldexp_template.c: New file.

	* sysdeps/generic/math-type-macros-double.h: Remove
	redundant fall-through definition of declare_mgen_alias.
	(declare_mgen_alias_2): New macro.

	* sysdeps/generc/math-type-macros.h (declare_mgen_alias_2):
	New macro for function aliased to two exported symbols.

	* sysdeps/ieee754/ldbl-opt/s_ldexp.c: Update to use
	new template file.
	sysdeps/ieee754/ldbl-opt/s_ldexpl.c: Likewise.

2016-09-20  Florian Weimer  <fweimer@redhat.com>

	* Makeconfig (all-object-suffixes): Remove .og.
	* Makerules (elide-routines.og): Remove.
	* sysdeps/i386/i686/Makefile (CFLAGS-.og, ASFLAGS-.og): Remove.
	* sysdeps/sparc/sparc32/sparcv9/Makefile (ASFLAGS-.og): Remove.
	* sysdeps/sparc/sparc64/Makefile (ASFLAGS-.op): Remove.

2016-09-20  Florian Weimer  <fweimer@redhat.com>

	* scripts/sysd-rules.awk (BEGIN): Only generate rtld patterns for
	.os objects.

2016-09-19  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #20615]
	* sysdeps/powerpc/powerpc32/power9/multiarch/Implies: Replace
	fpu directory by non-fpu.
	* sysdeps/powerpc/powerpc64/power9/fpu/Implies: Remove dependency
	on non-fpu directory from a fpu directory.

2016-09-19  Joseph Myers  <joseph@codesourcery.com>

	* include/limits.h: Define
	__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION and include
	<bits/libc-header-start.h> instead of including <features.h>.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (CHAR_WIDTH): New macro.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (SCHAR_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UCHAR_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (SHRT_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (USHRT_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (INT_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (UINT_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (LONG_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (ULONG_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (LLONG_WIDTH): Likewise.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (ULLONG_WIDTH): Likewise.
	* manual/lang.texi (Width of Type): Document these macros.
	* stdlib/tst-width.c: New file.
	* stdlib/Makefile (tests): Add tst-width.

2016-09-18  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* intl/dcigettext.c (PATH_MAX): Call __pathconf instead of pathconf.
	* sysdeps/posix/dup.c (__dup): Call __fcntl instead of fcntl.

2016-09-15  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/sem_init.c (__new_sem_init): Init pad value to 0.
	* sysdeps/sparc/sparc32/sem_open.c: Remove file.
	* sysdeps/sparc/sparc32/sparcv9/sem_open.c: Likewise.

2016-09-15  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #18243]
	* rt/Makefile (test): Add tst-shm-cancel.
	* rt/tst-shm-cancel.c: New file.
	* sysdeps/posix/shm_open.c: Disable asynchronous cancellation.

	[BZ #18243]
	* nptl/pthreadP.h (__pthread_testcancel): Add prototype and hidden_proto.
	* nptl/pthread_testcancel.c (pthread_cancel): Add internal aliais
	definition.
	* nptl/sem_timedwait.c (sem_timedwait): Add cancellation check for
	uncontended case.
	* nptl/sem_wait.c (__new_sem_wait): Likewise.
	* nptl/tst-cancel12.c (cleanup): Remove wrong cancellation point.
	(tf): Fix check for uncontended case.
	(do_test): Likewise.
	* nptl/tst-cancel13.c (cleanup): Remove wrong cancellation point.
	(tf): Fix check for uncontended case.
	(do_test): Likewise.
	* nptl/tst-cancel14.c (cleanup): Remove wrong cancellation point.
	(tf): Fix check for uncontended case.
	(do_test): Likewise.
	* nptl/tst-cancel15.c (cleanup): Remove wrong cancellation point.
	(tf): Fix check for uncontended case.
	(do_test): Likewise.

	* sysdeps/sparc/sparc32/sem_wait.c: Remove file.
	* sysdeps/sparc/sparc32/sparcv9/sem_wait.c: Likewise.

	[BZ #15765]
	* nptl/Makefile (tests): Add tst-sem16.
	* nptl/tst-sem16.c: New file.
	* nptl/sem_open.c (sem_open): Disable asynchronous cancellation.

	* nptl/sem_open.c (sem_open): Init pad value to 0.
	* sysdeps/sparc/sparc32/sem_open.c: Remove file.
	* sysdeps/sparc/sparc32/sparcv9/sem_open.c: Likewise.

2016-09-15  Florian Weimer  <fweimer@redhat.com>

	[BZ #20611]
	* inet/Makefile (routines): Add inet6_scopeid_pton.
	(tests): Add tst-inet6_scopeid_pton.
	* inet/inet6_scopeid_pton.c: New file.
	* inet/net-internal.h: Likewise.
	* inet/tst-inet6_scopeid_pton.c: New test.
	* inet/Versions (GLIBC_PRIVATE): Add __inet6_scopeid_pton.
	* resolv/res_init.c (__res_vinit): Use __inet6_scopeid_pton.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Likewise.

2016-09-14  Florian Weimer  <fweimer@redhat.com>

	Remove support for compiling wrappers with PTW.
	* sysdeps/nptl/Makeconfig: Drop ptw- support.
	* nptl/Makefile (pthread-compat-wrappers): Define.
	(libpthread-routines): Use pthread-compat-wrappers.
	* sysdeps/unix/sysv/linux/alpha/Makefile
	(libpthread-routines, libpthread-shared-only-routines): Remove
	ptw- prefix.
	* sysdeps/s390/nptl/Makefile
	(libpthread-routines, libpthread-shared-only-routines): Likewise.
	* sysdeps/ia64/nptl/Makefile
	(libpthread-routines, libpthread-shared-only-routines): Likewise.
	* sysdeps/nacl/Makefile (libpthread-routines): Use
	pthread-compat-wrappers to filter the routines list instead of the
	ptw- prefix.

2016-09-13  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128/e_acoshl.c: Wrap long double literals
	with L() and remove explicit suffix, convert real literals
	which can be equivalentally substituted with integers, and
	transform -L(x) to L(-x).

	* sysdeps/ieee754/ldbl-128/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/lgamma_negl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cbrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/t_expl.h: Likewise.
	* sysdeps/ieee754/ldbl-128/t_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/x2y2m1l.c: Likewise.

2016-09-13  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c: Remove _LIBC_REENTRANT; it is always defined.

2016-09-10  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* malloc/Makefile (tests): Remove individual static test names
	and just add all of tests-static.

	* csu/libc-start.c (__libc_csu_irel): Remove declaration.

2016-09-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/powerpc32/e500/nofpu/fetestexceptflag.c: New
	file.

	* sysdeps/sparc/fpu/fegetmode.c: New file.
	* sysdeps/sparc/fpu/fesetmode.c: Likewise.

	* sysdeps/sh/sh4/fpu/fegetmode.c: New file.
	* sysdeps/sh/sh4/fpu/fesetmode.c: Likewise.

	* sysdeps/s390/fpu/fegetmode.c: New file.
	* sysdeps/s390/fpu/fesetmode.c: Likewise.

	* sysdeps/powerpc/fpu/fegetmode.c: New file.
	* sysdeps/powerpc/fpu/fesetmode.c: Likewise.
	* sysdeps/powerpc/nofpu/fegetmode.c: Likewise.
	* sysdeps/powerpc/nofpu/fesetmode.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetmode.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetmode.c: Likewise.

	* sysdeps/mips/fpu/fegetmode.c: New file.
	* sysdeps/mips/fpu/fesetmode.c: Likewise.

	* sysdeps/m68k/fpu/fegetmode.c: New file.
	* sysdeps/m69k/fpu/fesetmode.c: Likewise.

	* sysdeps/ia64/fpu/fegetmode.c: New file.
	* sysdeps/ia64/fpu/fesetmode.c: Likewise.

	* sysdeps/hppa/fpu/fegetmode.c: New file.
	* sysdeps/hppa/fpu/fesetmode.c: Likewise.

	* sysdeps/arm/fegetmode.c: New file.
	* sysdeps/arm/fesetmode.c: Likewise.

	* sysdeps/alpha/fpu/fegetmode.c: New file.
	* sysdeps/alpha/fpu/fesetmode.c: Likewise.

	* sysdeps/aarch64/fpu/fegetmode.c: New file.
	* sysdeps/aarch64/fpu/fesetmode.c: Likewise.

	* math/fegetmode.c: New file.
	* math/fesetmode.c: Likewise.
	* sysdeps/i386/fpu/fegetmode.c: Likewise.
	* sysdeps/i386/fpu/fesetmode.c: Likewise.
	* sysdeps/x86_64/fpu/fegetmode.c: Likewise.
	* sysdeps/x86_64/fpu/fesetmode.c: Likewise.
	* math/fenv.h: Update comment on inclusion of <bits/fenv.h>.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (fegetmode): New function
	declaration.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (fesetmode): Likewise.
	* bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)] (femode_t): New
	typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/aarch64/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/alpha/fpu/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/arm/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/hppa/fpu/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/ia64/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/m68k/fpu/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/microblaze/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/mips/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/nios2/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/powerpc/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (__fe_dfl_mode): New variable
	declaration.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/s390/fpu/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/sh/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/sparc/fpu/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/tile/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* sysdeps/x86/fpu/bits/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(femode_t): New typedef.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (FE_DFL_MODE): New macro.
	* manual/arith.texi (FE_DFL_MODE): Document macro.
	(fegetmode): Document function.
	(fesetmode): Likewise.
	* math/Versions (fegetmode): New libm symbol at version
	GLIBC_2.25.
	(fesetmode): Likewise.
	* math/Makefile (libm-support): Add fegetmode and fesetmode.
	(tests): Add test-femode and test-femode-traps.
	* math/test-femode-traps.c: New file.
	* math/test-femode.c: Likewise.
	* sysdeps/powerpc/fpu/fenv_const.c (__fe_dfl_mode): Declare as
	alias for __fe_dfl_env.
	* sysdeps/powerpc/nofpu/fenv_const.c (__fe_dfl_mode): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_const.c
	(__fe_dfl_mode): Likewise.
	* sysdeps/powerpc/Versions (__fe_dfl_mode): New libm symbol at
	version GLIBC_2.25.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20495]
	[BZ #20508]
	* sysdeps/x86/cpu-features.c (init_cpu_features): For Intel
	processors, set Use_dl_runtime_resolve_slow and set
	Use_dl_runtime_resolve_opt if XGETBV suports ECX == 1.
	* sysdeps/x86/cpu-features.h (bit_arch_Use_dl_runtime_resolve_opt):
	New.
	(bit_arch_Use_dl_runtime_resolve_slow): Likewise.
	(index_arch_Use_dl_runtime_resolve_opt): Likewise.
	(index_arch_Use_dl_runtime_resolve_slow): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_runtime_setup): Use
	_dl_runtime_resolve_avx512_opt and _dl_runtime_resolve_avx_opt
	if Use_dl_runtime_resolve_opt is set.  Use
	_dl_runtime_resolve_slow if Use_dl_runtime_resolve_slow is set.
	* sysdeps/x86_64/dl-trampoline.S: Include <cpu-features.h>.
	(_dl_runtime_resolve_opt): New.  Defined for AVX and AVX512.
	(_dl_runtime_resolve): Add one for _dl_runtime_resolve_sse_vex.
	* sysdeps/x86_64/dl-trampoline.h (_dl_runtime_resolve_avx_slow):
	New.
	(_dl_runtime_resolve_opt): Likewise.
	(_dl_runtime_profile): Define only if _dl_runtime_profile is
	defined.

2016-09-06  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/localplt.data: Mark ld.so:
	__libc_memalign with "+ RELA R_390_GLOB_DAT".

2016-09-06  Florian Weimer  <fweimer@redhat.com>

	Convert malloc to __libc_lock.  Automated part, using this Perl
	s/// command:
	  s/(?:\(void\)\s*)?mutex_((?:|un|try)lock|init)
	    \s*\(\&([^\)]+)\)/__libc_lock_$1\ ($2)/gx;
	* malloc/malloc.c, malloc/arena.c, malloc/hooks.c: Perform
	conversion.

2016-09-05  Aurelien Jarno  <aurelien@aurel32.net>

	* conform/Makefile (conformtest-header-tests): Pass -I. to $(PERL).
	(linknamespace-symlists-tests): Likewise.
	(linknamespace-header-tests): Likewise.

2016-09-03  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #19810]
	* elf/dl-open.c (dl_open_worker): Set DF_1_NODELETE flag later.
	* elf/tst-noload.c: New test case.
	* elf/Makefile (tests): Add tst-noload.

2016-09-02  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/dup.c: Add libc_hidden_def.

	* sysdeps/posix/wait3.c: Don't treat STAT_LOC as a union, since it's
	not any more.

	* sysdeps/nacl/clock.c (clock): nacl_abi_clock_t -> nacl_irt_clock_t

2016-09-02  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/ieee754/dbl-64/s_sin.c (do_cos): Mark as inline.
	(do_cos_slow): Likewise.
	(do_sin): Likewise.
	(do_sin_slow): Likewise.
	(slow): Likewise.
	(slow1): Likewise.
	(slow2): Likewise.
	(sloww): Likewise.
	(sloww1): Likewise.
	(sloww2): Likewise.
	(bsloww): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.
	(cslow2): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Use do_sin.

	* sysdeps/ieee754/dbl-64/s_sin.c (do_cos): Accept X and DX as input
	arguments.  Consolidate input partitioning from callers here.
	(do_cos_slow): Likewise.
	(do_sin): Likewise.
	(do_sin_slow): Likewise.
	(do_sincos_1): Remove the no longer necessary input partitioning.
	(do_sincos_2): Likewise.
	(__sin): Likewise.
	(__cos): Likewise.
	(slow1): Likewise.
	(slow2): Likewise.
	(sloww1): Likewise.
	(sloww2): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.
	(cslow2): Likewise.

2016-09-02  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfscanf.c (_IO_vfwscanf): Use MB_LEN_MAX instead of
	MB_CUR_MAX to avoid race condition.  Avoid pointer arithmetic
	outside of allocated array.

2016-09-02  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfprintf.c (process_string_arg): Use MB_LEN_MAX
	instead of MB_CUR_MAX to avoid variable-length array.

2016-09-01  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (libm-calls): Remove k_rem_pio2F.
	(type-double-routines): Add k_rem_pio2.
	(type-float-routines): Add k_rem_pio2f.

	* sysdeps/generic/math_private.h:
	(__kernel_rem_pio2l): Removed.

	* math/k_rem_pio2l.c: Removed.
	* sysdeps/i386/fpu/k_rem_pio2l.c: Removed.
	* sysdeps/ia64/fpu/k_rem_pio2l.c: Removed.
	* sysdeps/m68k/m680x0/fpu/k_rem_pio2l.c: Removed.
	* sysdeps/x86_64/fpu/k_rem_pio2l.c: Removed.

2016-09-01  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (gen-libm-calls): Add s_fmin
	(libm-calls): Remove above.

	* math/s_fmin.c: Refactor into ...
	* math/s_fmin_template.c: New file.

	* math/s_fminf.c: Removed.
	* math/s_fminl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/math-type-macros-double.h:
	(LDOUBLE_fmin_libm_version): New macro.

	* sysdeps/ieee754/ldbl-opt/s_fmin.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_fminl.c: Removed.

2016-09-01  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile: (gen-libm-calls): Add s_fmax.
	(libm-calls): Remove above.

	* math/s_fmax.c: Refactor into ...
	* math/s_fmax_template.c: New file.
	* math/s_fmaxf.c: Removed.
	* math/s_fmaxl.c: Removed.

	* sysdeps/ieee754/ldbl-opt/math-type-macros-double.h:
	(LDOUBLE_fmaxl_libm_version): New macro.

	* sysdeps/ieee754/ldbl-opt/s_fmax.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_fmaxl.c: Removed.

	* sysdeps/aarch64/fpu/s_fmax.c: Append fpu/ to include of
	s_fmin.c to pick the aarch64 version of the file.
	* sysdeps/aarch64/fpu/s_fmaxf.c: Likewise.
	* sysdeps/aarch64/fpu/s_fminf.c: Likewise.

2016-09-01  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile: (gen-libm-calls): Add s_nextdown.
	(libm-calls): Remove above.

	* math/s_nextdown.c: Refactor into ...
	* math/s_nextdown_template.c: New file.
	* math/s_nextdownf.c: Removed.
	* math/s_nextdownl.c: Removed.

	* sysdeps/ieee754/ldbl-opt/s_nextdownl.c: New file.

2016-09-01  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (gen-libm-calls): Add s_fdim.
	(libm-calls): Move to above.

	* math/s_fdim.c: Renamed and refactored into to ...
	* math/s_fdim_template.c: New file.
	* math/s_fdiml.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_fdim.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_fdiml.c: Removed.

	* sysdeps/generic/math-type-macros-double.h:
	(declare_mgen_alias): Don't declare if already declared.
	* sysdeps/ieee754/ldbl-opt/math-type-macros-ldouble.h:
	Likewise.

	* sysdeps/ieee754/ldbl-opt/math-type-macros-double.h:
	(declare_mgen_alias): Don't declare if already declared.
	(M_LIBM_NEED_COMPAT): Likewise.
	(declare_mgen_libm_compat): Likewise.
	(LDOUBLE_fdiml_libm_version): New macro.

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim.c:
	Include math/s_fdim.c now that ldbl-opt version is not needed.
	(declare_mgen_alias): New macro to disable aliasing.

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdimf-vis3.c:
	(declare_mgen_alias): Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdimf.c:
	(declare_mgen_alias): Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim-vis3.c:
	(declare_mgen_alias): Likewise.
	(M_LIBM_NEED_COMPAT): Likewise.

2016-09-01  Florian Weimer  <fweimer@redhat.com>

	[BZ #20525]
	* sysdeps/unix/sysv/linux/sys/quota.h: Update copyright.
	Include <linux/quota.h>.
	(fs_to_dq_blocks): Hard-code BLOCK_SIZE as 1024, to match dbtob
	and btodb.
	(_LINUX_QUOTA_VERSION, MAXQUOTAS, USRQUOTA, GRPQUOTA, INITQFNAMES)
	(SUBCMDMASK, SUBCMDSHIFT, QCMD, Q_QUOTAON, Q_QUOTAOFF, Q_GETQUOTA)
	(Q_SETQUOTA, Q_SETUSE, Q_SYNC, Q_SETQLIM, Q_GETSTATS, Q_RSQUASH)
	(Q_GETFMT, Q_GETINFO, Q_SETINFO, Q_GETNEXTQUOTA, QIF_BLIMITS)
	(QIF_SPACE, QIF_ILIMITS, QIF_INODES, QIF_BTIME, QIF_ITIME)
	(QIF_LIMITS, QIF_USAGE, QIF_TIMES, QIF_ALL, IIF_BGRACE)
	(IIF_IGRACE, IIF_FLAGS, IIF_ALL): Remove.
	(struct dqblock, struct dqinfo): Use __uint64_t and __uint32_t
	types.
	* sysdeps/unix/sysv/linux/tst-quota.c: New test.
	* sysdeps/unix/sysv/linux/Makefile (tests): Add it.

2016-08-31  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128/e_gammal_r.c:
	(gammal_positive): Fix spacing.
	(__ieee754_gammal_r): Likewise.

2016-08-31  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128/math_ldbl.h:
	(_Float128): Define as long double, always.
	(L): Apply long double type suffix, always.

	* sysdeps/ieee754/ldbl-128/e_acoshl.c: Rename long double
	_Float128, excepting comments.

	* sysdeps/ieee754/ldbl-128/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/gamma_productl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/lgamma_negl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/lgamma_productl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cbrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_issignalingl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextupl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_truncl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/t_expl.h: Likewise.
	* sysdeps/ieee754/ldbl-128/x2y2m1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.

	* sysdeps/ieee754/ldbl-128/s_signbitl.c: Rename long double
	_Float128, and include math_private.h.
	* sysdeps/ieee754/ldbl-128/t_sincosl.c: Likewise.

	* sysdeps/ieee754/ldbl-128ibm/e_expl.c (L): Define using
	long double semantics.
	(_Float128): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_cbrtl.c: Likewise.

2016-08-31  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* config.h.in (HAVE_S390_MIN_Z196_ZARCH_ASM_SUPPORT): New undefine.
	* sysdeps/s390/configure.ac: Add test for z196 zarch support.
	* sysdeps/s390/configure: Regenerated.
	* sysdeps/s390/fpu/fraiseexcpt.c (__feraiseexcept): Use ledbra
	instruction for raising over-/underflow if z196 zarch is supported
	by default.
	* sysdeps/s390/fpu/fsetexcptflg.c (fesetexceptflag): Correct comment.

2016-08-30  Svante Signell  <svante.signell@gmail.com>

	* sysdeps/mach/hurd/adjtime.c (__adjtime): When OLDDELTA is NULL, make
	it point to a dumb buffer for RPC to fill it.

2016-08-30  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* sysdeps/ieee754/dbl-64/s_sin.c (do_cos_slow): Use ternary
	instead of if/else.
	(do_sin_slow): Likewise.
	(do_sincos_1): Use fabs instead of if/else.
	(do_sincos_2): Likewise.
	(__sin): Likewise.
	(__cos): Likewise.
	(slow2): Likewise.
	(sloww): Likewise.
	(sloww1): Likewise.  Drop argument M.
	(sloww2): Use fabs instead of if/else.
	(bsloww): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (reduce_and_compute): Add
	fall through comment.
	(do_sincos_1): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (reduce_and_compute):
	Consolidate switch cases 0 and 2.

2016-08-29  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (libm-gen-calls): Add cpow, clog, clog10, cexp, cproj.
	(libm-calls): Remove the above.

	* math/s_cexp_template.c: Update using type-generic macros.
	* math/s_clog10_template.c: Likewise.
	* math/s_cpow_template.c: Likewise.
	* math/s_clog_template.c: Likewise.
	* math/s_cproj_template.c: Likewise.
	* math/s_csqrt_template.c: Likewise.

	* math/s_cexp.c: Removed.
	* math/s_cexpf.c: Removed.
	* math/s_cexpl.c: Removed.
	* math/s_clog10.c: Removed.
	* math/s_clog10f.c: Removed.
	* math/s_clog10l.c: Removed.
	* math/s_cpow.c: Removed.
	* math/s_cpowf.c: Removed.
	* math/s_cpowl.c: Removed.
	* math/s_clog.c: Removed.
	* math/s_clogf.c: Removed.
	* math/s_clogl.c: Removed.
	* math/s_cproj.c: Removed.
	* math/s_cprojf.c: Removed.
	* math/s_cprojl.c: Removed.
	* math/s_csqrt.c: Removed.
	* math/s_csqrtf.c: Removed.
	* math/s_csqrtl.c: Removed.

	* sysdeps/alpha/fpu/s_cexpf.c: Update using templated version.
	* sysdeps/alpha/fpu/s_clog10f.c: Update using templated version.
	* sysdeps/alpha/fpu/s_clogf.c: Update using templated version.
	* sysdeps/alpha/fpu/s_cpowf.c: Update using templated version.
	* sysdeps/alpha/fpu/s_cprojf.c: Update using templated version.
	* sysdeps/alpha/fpu/s_csqrtf.c: Update using templated version.

	* sysdeps/ieee754/ldbl-opt/s_cexp.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_cexpl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_clog.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_clog10.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_clog10l.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_cpow.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_cpowl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_cproj.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_cprojl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_csqrt.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_csqrtl.c: Removed.

	* sysdeps/ieee754/ldbl-opt/s_clogl.c: Update using templated
	version.

	* sysdeps/m68k/m680x0/fpu/s_cexp.c: Refactor into.
	* sysdeps/m68k/m680x0/fpu/s_cexp_template.c: New file.
	* sysdeps/m68k/m680x0/fpu/s_cexpf.c: Removed.
	* sysdeps/m68k/m680x0/fpu/s_cexpl.c: Removed.

2016-08-29  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* s_cexp_template.c: Copy of s_cexp.c.
	* s_clog_template.c: Copy of s_clog.c.
	* s_clog10_template.c: Copy of s_clog10.c.
	* s_cpow_template.c: Copy of s_cpow.c.
	* s_cproj_template.c: Copy of s_cproj.c.
	* s_csqrt_template.c: Copy of s_csqrt.c.

2016-08-29  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	[BZ #20517]
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim.c:
	Include ldbl-opt/s_fdim.c to ensure fdiml@GLIBC_2.1 is
	exported.

2016-08-29  Joseph Myers  <joseph@codesourcery.com>

	* math/fetestexceptflag.c: New file.
	* sysdeps/s390/fpu/fetestexceptflag.c: Likewise.  Comment by
	Stefan Liebler.
	* math/fenv.h [__GLIBC_USE (IEC_60559_BFP_EXT)]
	(fetestexceptflag): New function declaration.
	* manual/arith.texi (fetestexceptflag): Document function.
	* math/Versions (fetestexceptflag): New libm symbol at version
	GLIBC_2.25.
	* math/Makefile (libm-support): Add fetestexceptflag.
	(tests): Add test-fetestexceptflag.
	* math/test-fetestexceptflag.c: New file.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-08-26  Florian Weimer  <fweimer@redhat.com>

	[BZ #20432]
	Avoid strong references to malloc-internal symbols when linking
	statically, to support statically interposed mallocs.
	* include/libc-symbols.h (call_function_static_weak): New macro.
	* malloc/Makefile (tests): Add tst-interpose-nothread,
	tst-interpose-thread, tst-interpose-static-nothread,
	tst-interpose-static-thread.
	(tests-static): Add tst-interpose-static-nothread,
	tst-interpose-static-thread.
	(extra-tests-objs): Add tst-interpose-aux-nothread.o,
	tst-interpose-aux-thread.o.
	(test-extras): Add tst-interpose-aux-nothread,
	tst-interpose-aux-thread.
	(tst-interpose-nothread, tst-interpose-static-nothread): Link with
	tst-interpose-aux-nothread.o.
	(tst-interpose-thread, tst-interpose-static-thread): Link with
	tst-interpose-aux-thread.o and libthread.
	* malloc/tst-interpose-aux-nothread.c: New file.
	* malloc/tst-interpose-aux-thread.c: Likewise.
	* malloc/tst-interpose-aux.c: Likewise.
	* malloc/tst-interpose-aux.h: Likewise.
	* malloc/tst-interpose-nothread.c: Likewise.
	* malloc/tst-interpose-skeleton.c: Likewise.
	* malloc/tst-interpose-static-nothread.c: Likewise.
	* malloc/tst-interpose-static-thread.c: Likewise.
	* malloc/tst-interpose-thread.c: Likewise.
	* nptl/tst-tls3-malloc.c: Use new interposed malloc.
	* sysdeps/mach/hurd/fork.c (__fork): Only call
	__malloc_fork_lock_parent, __malloc_fork_unlock_parent,
	__malloc_fork_unlock_child if defined.
	* sysdeps/nptl/fork.c (__libc_fork): Likewise.

2016-08-26  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* test-skeleton.c (delayed_exit_thread): Add initializer on struct
	timespec C99 designated initialization.

2016-08-26  Florian Weimer  <fweimer@redhat.com>

	[BZ #19946]
	Avoid expected SIGALRM signals.
	* test-skeleton.c (xpthread_sigmask, xpthread_mutex_lock)
	(xpthread_spin_lock, xpthread_cond_wait, xpthread_barrier_wait)
	(xpthread_create, xpthread_detach, xpthread_join)
	(delayed_exit_thread, delayed_exit): New functions.
	* nptl/tst-cond3 (EXPECTED_SIGNAL): Remove.
	(tf): Use xpthread_cond_wait.
	(do_test): Likewise.  Replace alarm with delayed_exit.
	* nptl/tst-eintr1.c (EXPECTED_SIGNAL, TIMEOUT): Remove.
	(do_test): Call delayed_exit.  Report failure.
	* nptl/tst-eintr2.c (EXPECTED_SIGNAL, TIMEOUT): Remove.
	(do_test): Call delayed_exit.
	* nptl/tst-eintr3.c (EXPECTED_SIGNAL, TIMEOUT): Remove.
	(do_test): Call delayed_exit.  Use xpthread_join.  Report error.
	* nptl/tst-eintr4.c (EXPECTED_SIGNAL, TIMEOUT): Remove.
	(do_test): Call delayed_exit.  Use xpthread_barrier_wait.  Report
	error.
	* nptl/tst-eintr5.c (EXPECTED_SIGNAL, TIMEOUT): Remove.
	(do_test): Call delayed_exit.  Use xpthread_cond_wait.  Report
	error.
	* nptl/tst-exit2.c (EXPECTED_SIGNAL): Remove.
	(do_test): Call delayed_exit.
	* nptl/tst-exit3.c (EXPECTED_SIGNAL): Remove.
	(do_test): Call delayed_exit.
	* nptl/tst-mutex6.c (EXPECTED_SIGNAL): Remove.
	(do_test): Call delayed_exit instead of alarm.  Use
	xpthread_mutex_lock.
	* nptl/tst-rwlock5.c (EXPECTED_SIGNAL): Remove.
	(do_test): Call delayed_exit instead of alarm.  Use
	xpthread_mutex_lock.
	* nptl/tst-sem2.c (EXPECTED_SIGNAL): Remove.
	(do_test): Call delayed_exit instead of alarm.
	* nptl/tst-spin3.c (EXPECTED_SIGNAL): Remove.
	(do_test): Call delayed_exit instead of alarm.  Use
	xpthread_spin_lock.
	* nptl/tst-stdio1.c (EXPECTED_SIGNAL): Remove.
	(do_test): Call delayed_exit instead of alarm.  Use
	xpthread_join.

2016-08-26  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.h (_dl_runtime_resolve): Don't
	adjust CFA when allocating register save area on re-aligned
	stack.

2016-08-26  Florian Weimer  <fweimer@redhat.com>

	* string/tst-cmp.c: New test.
	* string/Makefile (tests): Add it.

2016-08-25  Mark Wielaard  <mark@klomp.org>

	* misc/tsearch.c (struct node_t): Reduce to 3 pointers if
	USE_MALLOC_LOW_BIT.  Define pointer/value accessors.
	(check_tree_recurse): Use newly defined accessors.
	(check_tree): Likewise.
	(maybe_split_for_insert): Likewise.
	(__tfind): Likewise.
	(__tdelete): Likewise.
	(trecurse): Likewise.
	(tdestroy_recurse): Likewise.
	(__tsearch): Likewise. And add asserts for malloc alignment.
	(__twalk): Cast root to node in case CHECK_TREE is defined.

2016-08-21  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* scripts/check-local-headers.sh (exclude): Add mach_debug/.

2016-08-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (libm-gen-calls): Add
	catan, catanh, ctan, ctanh.
	(libm-calls): Remove the above.

	* math/s_catan_template.c: Update using type-generic macros.
	* math/s_catanh_template.c: Likewise.
	* math/s_ctan_template.c: Likewise.
	* math/s_ctanh_template.c: Likewise.

	* math/s_catanf.c: Removed.
	* math/s_catan.c: Removed.
	* math/s_catanl.c: Removed.
	* math/s_catanhf.c: Removed.
	* math/s_catanh.c: Removed.
	* math/s_catanhl.c: Removed.
	* math/s_ctanf.c: Removed.
	* math/s_ctan.c: Removed.
	* math/s_ctanl.c: Removed.
	* math/s_ctanhf.c: Removed.
	* math/s_ctanh.c: Removed.
	* math/s_ctanhl.c: Removed.

	* sysdeps/ieee754/ldbl-opt/s_catanhl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_catanl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_ctan.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_ctanh.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_ctanhl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_ctanl.c: Removed.

	* sysdeps/alpha/fpu/s_catanf.c: Update to use template file.
	* sysdeps/alpha/fpu/s_catanhf.c: Likewise.
	* sysdeps/alpha/fpu/s_ctanf.c: Likewise.
	* sysdeps/alpha/fpu/s_ctanhf.c: Likewise.

2016-08-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* s_catan_template.c: Copy of s_catan.c.
	* s_catanh_template.c: Copy of s_catanh.c.
	* s_ctan_template.c: Copy of s_ctan.c.
	* s_ctanh_template.c: Copy of s_ctanh.c.

2016-08-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (gen-libm-calls): Move
	casin, casinh, csin, csinh here.
	(libm-calls): Remove the above.

	* math/s_casin_template.c: Update using type-generic macros.
	* math/s_casinh_template.c: Likewise.
	* math/s_csin_template.c: Likewise.
	* math/s_csinh_template.c: Likewise.
	* math/k_casinh_template.c: Likewise.

	* math/s_casinf.c: Removed.
	* math/s_casin.c: Removed.
	* math/s_casinl.c: Removed.
	* math/s_casinh.c: Removed.
	* math/s_casinhf.c: Removed.
	* math/s_casinhl.c: Removed.
	* math/s_csin.c: Removed.
	* math/s_csinf.c: Removed.
	* math/s_csinl.c: Removed.
	* math/s_csinh.c: Removed.
	* math/s_csinhf.c: Removed.
	* math/s_csinhl.c: Removed.
	* math/k_casinh.c: Removed.
	* math/k_casinhf.c: Removed.
	* math/k_casinhl.c: Removed.

	* sysdeps/alpha/fpu/s_casinf.c: Refactor using templated version.
	* sysdeps/alpha/fpu/s_casinhf.c: Likewise.
	* sysdeps/alpha/fpu/s_csinf.c: Likewise.
	* sysdeps/alpha/fpu/s_csinhf.c: Likewise.

	* sysdeps/ieee754/ldbl-opt/s_casin.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_casinh.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_casinhl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_casinl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_csin.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_csinh.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_csinhl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_csinl.c: Removed.

	* sysdeps/m68k/m680x0/fpu/s_csin.c: Refactor into ...
	* sysdeps/m68k/m680x0/fpu/s_csin_template.c: New file.
	* sysdeps/m68k/m680x0/fpu/s_csinf.c: Removed.
	* sysdeps/m68k/m680x0/fpu/s_csinl.c: Removed.

	* sysdeps/m68k/m680x0/fpu/s_csinh.c: Refactor into.
	* sysdeps/m68k/m680x0/fpu/s_csinh_template.c: New file.
	* sysdeps/m68k/m680x0/fpu/s_csinhf.c: Removed.
	* sysdeps/m68k/m680x0/fpu/s_csinhl.c: Removed.

2016-08-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* s_casin_template.c: Copy of s_casin.c.
	* s_casinh_template.c: Copy of s_casinh.c.
	* s_csin_template.c: Copy of s_csin.c.
	* s_csinh_template.c: Copy of s_csinh.c.
	* k_casinh_template.c: Copy of k_casinh.c.

2016-08-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.h (bit_YMM_state): Set to (1 << 2).

2016-08-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128/gamma_productl.c:
	(mul_split) Remove, rename as mul_splitl, remove
	redundant float.h include, and include via mul_splitl.h

	* sysdeps/ieee754/ldbl-128/lgamma_productl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/x2y2m1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/gamma_product.c: Likewise.
	* sysdeps/ieee754/ldbl-96/lgamma_product.c: Likewise.
	* sysdeps/ieee754/ldbl-96/x2y2m1.c: Likewise.

	* math/mul_splitl.h: New file.

	* sysdeps/ieee754/dbl-64/gamma_product.c (mul_split):
	Move into mul_split.h, and remove redundant float.h include.

	* sysdeps/ieee754/dbl-64/lgamma_product.c: Likewise.
	* sysdeps/ieee754/dbl-64/x2y2m1.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/x2y2m1.c: Likewise.

	* math/mul_split.h: New file.

2016-08-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (libm-gen-calls): Move
	s_cacos, s_cacosh, s_ccos, s_ccosh from ...
	(libm-calls): Remove above.

	* math/s_cacos_template.c: Update using type-generic macros.
	* math/s_cacosh_template.c: Likewise.
	* math/s_ccos_template.c: Likewise.
	* math/s_ccosh_template.c: Likewise.

	* math/s_cacosf.c: Removed.
	* math/s_cacos.c: Removed.
	* math/s_cacosl.c: Removed.
	* math/s_cacoshf.c: Removed.
	* math/s_cacosh.c: Removed.
	* math/s_cacoshl.c: Removed.
	* math/s_ccosf.c: Removed.
	* math/s_ccos.c: Removed.
	* math/s_ccosl.c: Removed.
	* math/s_ccoshf.c: Removed.
	* math/s_ccosh.c: Removed.
	* math/s_ccoshl.c: Removed.

	* sysdeps/ieee754/ldbl-opt/s_cacoshl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_cacosl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_ccos.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_ccosh.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_ccoshl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/s_ccosl.c: Removed.

	* sysdeps/m68k/m680x0/fpu/s_ccosh.c: Refactor into.
	* sysdeps/m68k/m680x0/fpu/s_ccosh_template.c: New file.
	* sysdeps/m68k/m680x0/fpu/s_ccoshf.c: Removed.
	* sysdeps/m68k/m680x0/fpu/s_ccoshl.c: Removed.

	* sysdeps/alpha/fpu/s_cacosf.c: Update to use template file.
	* sysdeps/alpha/fpu/s_cacoshf.c: Likewise.
	* sysdeps/alpha/fpu/s_ccosf.c: Likewise.
	* sysdeps/alpha/fpu/s_ccoshf.c: Likewise.

2016-08-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* s_cacos_template.c: Copy of s_cacos.c.
	* s_cacosh_template.c: Copy of s_cacosh.c.
	* s_ccos_template.c: Copy of s_ccos.c.
	* s_ccosh_template.c: Copy of s_ccosh.c.

2016-08-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* stdlib/tst-strtod-round-skeleton.c:
	Refactored from tst-strtod-round.c.

	(L_): New macro to apply literal modifier.
	(FNPFX): New macro to select str or wcs prefix.
	(CHAR): New macro to choose wchar_t or char.
	(STRM): New macro to choose printf for tested character type.

	(STRTO): New macro to choose appropriate string -> real function.
	(FNPFXS): Stringitized version of FNPFX.
	(STR): Support for above macro.
	(STRX): Likewise.

	(TEST): Update with above macros.
	(test): Likewise.
	(GEN_ONE_TEST): Likewise.
	(test_in_one_mode): Likewise.

	* stdlib/tst-strtod-round.c: New file.
	* wcsmbs/tst-wcstod-round.c: New file.

	* wcsmbs/Makefile: (tests): Add tst-wcstod-round
	(tst-wcstod-round): Add libm depencency for fesetround.

2016-08-19  Zack Weinberg  <zackw@panix.com>

	* debug/tst-chk1.c: Add tests for fortification of bcopy and bzero.

2016-08-18  Torvald Riegel  <triegel@redhat.com>

	[BZ #20477]
	* resolv/res_hconf.c (do_init): Use atomic access.
	* resolv/res_hconf.h: Add comments.
	* nscd/aicache.c (addhstaiX): Call _res_hconf_init unconditionally.
	* nss/getXXbyYY_r.c (REENTRANT_NAME): Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Likewise.

2016-08-18  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/ieee754/dbl-64/k_rem_pio2.c (__kernel_rem_pio2):
	Use DIAG_*_NEEDS_COMMENT macro to get rid of array-bounds warning.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c (__kernel_rem_pio2f):
	Likewise.

2016-08-18  Florian Weimer  <fweimer@redhat.com>

	[BZ #16907]
	* argp/argp.h: Switch to __BEGIN_DECLS and __END_DECLS.
	(__THROW, __NTH, __attribute__, __restrict): Remove definitions.
	* argp/argp-fmtstream.h: Add __BEGIN_DECLS and __END_DECLS.
	(__attribute__): Remove definition.

2016-08-17  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128/e_asinl.c:
	Remove unused sqrtl declaration.

2016-08-17  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile: (gen-libm-templates.stmp): New rule.
	(libm-calls): Move carg conj cimag and cabs into ...
	(gen-libm-calls): New variable.
	(generated): Inform Make objects from gen-libm-calls
	may be generated.

	* sysdeps/generic/math-type-macros.h: New file.
	* sysdeps/generic/math-type-macros-float.h: Likewise.
	* sysdeps/generic/math-type-macros-double.h: Likewise.
	* sysdeps/generic/math-type-macros-ldouble.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/math-type-macros-double.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/math-type-macros-ldouble.h: Likewise.

	* math/cabs.c: Refactor into
	* math/cabs_template.c: new file.
	* math/cabsf.c: Removed.
	* math/cabsl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/cabsf.c: Removed.
	* sysdeps/ieee754/ldbl-opt/cabsl.c: Removed.

	* math/carg.c: Refactor into
	* math/carg_template.c: new file.
	* math/cargf.c: Removed.
	* math/cargl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/cargf.c: Removed.
	* sysdeps/ieee754/ldbl-opt/cargl.c: Removed.

	* math/conj.c: Refactor into
	* math/conj_template.c: new file.
	* math/conjf.c: Removed.
	* math/conjl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/conjf.c: Removed.
	* sysdeps/ieee754/ldbl-opt/conjl.c: Removed.

	* math/cimag.c: Refactor into
	* math/cimag_template.c: new file.
	* math/cimagf.c: Removed.
	* math/cimagl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/cimagf.c: Removed.
	* sysdeps/ieee754/ldbl-opt/cimagl.c: Removed.

	* math/cimag.c: Refactor into
	* math/cimag_template.c: new file.
	* math/cimagf.c: Removed.
	* math/cimagl.c: Removed.
	* sysdeps/ieee754/ldbl-opt/cimagf.c: Removed.
	* sysdeps/ieee754/ldbl-opt/cimagl.c: Removed.

2016-08-17  Florian Weimer  <fweimer@redhat.com>

	Reduce time to expected nptl/tst-once5 failure.
	* nptl/tst-once5.cc (TIMEOUT): Define.

2016-08-17  Florian Weimer  <fweimer@redhat.com>

	[BZ #20452]
	Avoid additional copies of objects in libc.a in static libraries.
	* sysdeps/ia64/nptl/Makefile (libpthread-shared-only-routines):
	Add ptw-sysdep, ptw-sigblock, ptw-sigprocmask.
	* sysdeps/mips/Makefile (librt-shared-only-routines): Add
	rt-sysdep.
	* sysdeps/mips/nptl/Makefile (libpthread-shared-only-routines):
	Add nptl-sysdep.
	* sysdeps/s390/nptl/Makefile (libpthread-shared-only-routines):
	Add ptw-sysdep.
	* sysdeps/unix/alpha/Makefile (librt-shared-only-routines): Add
	rt-sysdep.
	* sysdeps/unix/sysv/linux/alpha/Makefile
	(libpthread-shared-only-routines): Add ptw-sysdep,
	ptw-sigprocmask, ptw-rt_sigaction.
	* sysdeps/unix/sysv/linux/ia64/Makefile
	(librt-shared-only-routines): Add rt-sysdep.
	* sysdeps/unix/sysv/linux/i386/Makefile
	(libpthread-shared-only-routines): Add libc-do-syscall.
	* sysdeps/unix/sysv/linux/microblaze/Makefile
	(libpthread-shared-only-routines): Add sysdep.
	* sysdeps/unix/sysv/linux/powerpc/Makefile
	(librt-shared-only-routines): Add rt-sysdep.
	(libpthread-shared-only-routines): Add sysdep.
	* sysdeps/unix/sysv/linux/s390/Makefile
	(librt-shared-only-routines): Add rt-sysdep.
	* sysdeps/unix/sysv/linux/sparc/Makefile
	(librt-shared-only-routines): Add rt-sysdep.
	(libpthread-shared-only-routines): Add sysdep.
	* sysdeps/unix/sysv/linux/tile/Makefile
	(libpthread-shared-only-routines): Likewise.

2016-08-16  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/extended.h [_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_E):
	Mask implicit bit out of unpacked value.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_EP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_EP): Likewise.

	* sysdeps/sparc/fpu/fesetexcept.c: New file.

	* sysdeps/sh/sh4/fpu/fesetexcept.c: New file.

	* sysdeps/s390/fpu/fesetexcept.c: New file.

	* sysdeps/powerpc/fpu/fesetexcept.c: New file.
	* sysdeps/powerpc/nofpu/fesetexcept.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetexcept.c: Likewise.

	* sysdeps/mips/fpu/fesetexcept.c: New file.

	* sysdeps/m68k/fpu/fesetexcept.c: New file.

	* sysdeps/ia64/fpu/fesetexcept.c: New file.

	* sysdeps/hppa/fpu/fesetexcept.c: New file.

	* sysdeps/arm/fesetexcept.c: New file.

	* sysdeps/alpha/fpu/fesetexcept.c: New file.

	* sysdeps/aarch64/fpu/fesetexcept.c: New file.

	* math/fesetexcept.c: New file.
	* sysdeps/i386/fpu/fesetexcept.c: Likewise.
	* sysdeps/x86_64/fpu/fesetexcept.c: Likewise.
	* math/fenv.h: Define
	__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION and include
	<bits/libc-header-start.h> instead of including <features.h>.
	[__GLIBC_USE (IEC_60559_BFP_EXT)] (fesetexcept): New function
	declaration.
	* manual/arith.texi (fesetexcept): Document function.
	* math/Versions (fesetexcept): New libm symbol at version
	GLIBC_2.25.
	* math/Makefile (libm-support): Add fesetexcept.
	(tests): Add test-fesetexcept and test-fesetexcept-traps.
	* math/test-fesetexcept.c: New file.
	* math/test-fesetexcept-traps.c: Likewise.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-08-16  Florian Weimer  <fweimer@redhat.com>

	* nptl/tst-tls3.c (default_stack_size_in_mb, stack_size_in_mb):
	New.
	(do_test): Apply default_stack_size_in_mb if not set.
	* nptl/tst-tls3-malloc.c (stack_size_in_mb): Override default.

2016-08-15  Andreas Schwab  <schwab@suse.de>

	[BZ #20435]
	CVE-2016-6323
	* sysdeps/unix/sysv/linux/arm/setcontext.S (__startcontext): Mark
	as .cantunwind.

2016-08-12  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/fpu/fsetexcptflg.c (__fesetexceptflag): Add
	comment from fraiseexcpt.c.

	* math/test-fexcept.c (feraiseexcept_exact): New function.
	(test_set): Call feraiseexcept_exact instead of feraiseexcept.
	(test_except): Likewise.

2016-08-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20455]
	* sysdeps/powerpc/fpu/fsetexcptflg.c (__fesetexceptflag): Mask out
	all FE_INVALID sub-exceptions from FPSCR when FE_INVALID specified
	to be restored.

	* math/test-fexcept-traps.c: New file.
	* math/test-fexcept.c: Likewise.
	* math/Makefile (tests): Add test-fexcept and test-fexcept-traps.
	* sysdeps/generic/math-tests.h (EXCEPTION_SET_FORCES_TRAP): New
	macro.
	* sysdeps/powerpc/math-tests.h [!__NO_FPRS__]
	(EXCEPTION_SET_FORCES_TRAP): Likewise.

2016-08-09  Torvald Riegel  <triegel@redhat.com>

	* include/atomic.h (atomic_fetch_and_relaxed,
	atomic_fetch_and_release, atomic_fetch_or_release,
	atomic_fetch_xor_release): New.

2016-08-06  Christian Seiler  <christian@iwakd.de>

	[BZ #20444]
	* sysdeps/mach/hurd/recvmsg.c (__libc_recvmsg): Cope with aport being
	MACH_PORT_NULL.

2016-08-05  Aurelien Jarno  <aurelien@aurel32.net>

	* math/s_fdim.c: Avoid alias renamed.
	* math/s_fdimf.c: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile
	[$(subdir) = math && $(have-as-vis3) = yes] (libm-sysdep_routines):
	Add s_fdimf-vis3, s_fdim-vis3.
	(CFLAGS-s_fdimf-vis3.c): New. Set to -Wa,-Av9d -mvis3.
	(CFLAGS-s_fdim-vis3.c): Likewise.
	sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim-vis3.c: New file.
	sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim.c: Likewise.

2016-08-05  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile
	[$(subdir) = math && $(have-as-vis3) = yes] (libm-sysdep_routines):
	Remove s_fdimf-vis3, s_fdim-vis3.
	* sysdeps/sparc/sparc32/fpu/s_fdim.S: Delete file.
	* sysdeps/sparc/sparc32/fpu/s_fdimf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdimf-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdimf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fdim.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fdimf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_fdim.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_fdimf.S: Likewise.

2016-08-05  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/sparc/sparc32/sparcv9/Makefile (sysdep-CFLAGS): Add -mvis.
	* sysdeps/sparc/sparc64/Makefile (sysdep-CFLAGS): New. Define to
	-Wa,-Av9a -mvis.

2016-08-05  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/gen-libm-test.pl (apply_lit): Rewrite to apply
	LIT() to individual constants in simple expressions
	after splitting on spaces.
	(_apply_lit): Rename replaced version, and use it to
	apply to what appears to be a token.

	* math/libm-test.inc: Fix many, many issues with
	spacing.

2016-08-05  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h: Move comment about <bits/mathdef.h> definitions
	above inclusion of <bits/mathdef.h>.  Do not mention
	FLT_EVAL_METHOD, INFINITY or DECIMAL_DIG in that comment.

2016-08-05  Torvald Riegel  <triegel@redhat.com>

	* include/atomic.h (atomic_exchange_relaxed): New.

2016-08-04  Joseph Myers  <joseph@codesourcery.com>

	* math/e_scalb.c: Do not include <fenv.h>.
	(invalid_fn): Do calculation resulting in NaN instead of raising
	FE_INVALID and returning a NaN explicitly.
	* math/e_scalbf.c: Do not include <fenv.h>.
	(invalid_fn): Do calculation resulting in NaN instead of raising
	FE_INVALID and returning a NaN explicitly.
	* math/e_scalbl.c: Do not include <fenv.h>.
	(invalid_fn): Do calculation resulting in NaN instead of raising
	FE_INVALID and returning a NaN explicitly.

2016-08-04  Carlos O'Donell  <carlos@redhat.com>

	* po/de.po: Updated from Translation Project.
	* po/fi.po: Likewise.
	* po/sv.po: Likewise.

2016-08-04  Florian Weimer  <fweimer@redhat.com>

	[BZ #20452]
	Use sysdep.o from libc.a in static libraries.
	* sysdeps/unix/sysv/linux/i386/Makefile
	(libpthread-shared-only-routines): Add sysdep.
	(librt-shared-only-routines): Likewise.

2016-08-03  Joseph Myers  <joseph@codesourcery.com>

	* math/tgmath.h (nextdown): Define if
	[__GLIBC_USE (IEC_60559_BFP_EXT)], not if [__USE_GNU].
	(nextup): Likewise.

	* bits/libc-header-start.h (__GLIBC_USE_IEC_60559_FUNCS_EXT): New
	macro.
	* include/features.h (__STDC_WANT_IEC_60559_FUNCS_EXT__):
	Document.
	* manual/creature.texi (__STDC_WANT_IEC_60559_FUNCS_EXT__):
	Document macro.
	* manual/math.texi (exp10): Document as ISO from TS 18661-4:2015.
	(exp10f): Likewise.
	(exp10l): Likewise.
	* math/bits/mathcalls.h (exp10): Declare if
	[__GLIBC_USE (IEC_60559_FUNCS_EXT)], not [__USE_GNU].

	* manual/arith.texi (nextup): Fix typo in last change.

2016-08-03  Zack Weinberg  <zackw@panix.com>

	[BZ #19239]
	* NEWS: Inclusion of <sys/sysmacros.h> by <sys/types.h> is deprecated.
	* misc/sys/sysmacros.h: If __SYSMACROS_DEPRECATED_INCLUSION is defined,
	define major, minor, and makedev to issue deprecation warnings on use.
	If __SYSMACROS_DEPRECATED_INCLUSION is *not* defined, suppress
	previously-activated deprecation warnings for these macros and prevent
	subsequent inclusions of this header from having any effect.
	* posix/sys/types.h: Define __SYSMACROS_DEPRECATED_INCLUSION before
	including <sys/sysmacros.h>, and undefine it again afterward.

2016-08-03  Zack Weinberg  <zackw@panix.com>

	* sysdeps/generic/sys/sysmacros.h: Delete file.
	* sysdeps/unix/sysv/linux/makedev.c: Delete file.
	* sysdeps/unix/sysv/linux/sys/sysmacros.h: Move file ...
	* bits/sysmacros.h: ... here; this encoding is now the generic
	encoding.  Now defines only the following macros:
	__SYSMACROS_DECLARE_MAJOR, __SYSMACROS_DEFINE_MAJOR,
	__SYSMACROS_DECLARE_MINOR, __SYSMACROS_DEFINE_MINOR,
	__SYSMACROS_DECLARE_MAKEDEV, __SYSMACROS_DEFINE_MAKEDEV.

	* misc/sys/sysmacros.h, misc/makedev.c: New files that use
	bits/sysmacros.h and the above new macros to generate the
	public implementations of major, minor, and makedev.
	* misc/tst-makedev.c: New test.
	* include/sys/sysmacros.h: New wrapper.

	* misc/Makefile (headers): Add sys/sysmacros.h, bits/sysmacros.h.
	(routines): Add makedev.
	(tests): Add tst-makedev.
	* misc/Versions [GLIBC_2.25]: Add gnu_dev_major, gnu_dev_minor,
	gnu_dev_makedev.
	* posix/Makefile (headers): Remove sys/sysmacros.h.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Remove makedev.

	* sysdeps/arm/nacl/libc.abilist: Add GLIBC_2.25,
	gnu_dev_major, gnu_dev_makedev, gnu_dev_minor.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist
	* sysdeps/unix/sysv/linux/alpha/libc.abilist
	* sysdeps/unix/sysv/linux/arm/libc.abilist
	* sysdeps/unix/sysv/linux/hppa/libc.abilist
	* sysdeps/unix/sysv/linux/i386/libc.abilist
	* sysdeps/unix/sysv/linux/ia64/libc.abilist
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist
	* sysdeps/unix/sysv/linux/nios2/libc.abilist
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist
	* sysdeps/unix/sysv/linux/sh/libc.abilist
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist:
	Add GLIBC_2.25.

	* include/features.h (__glibc_clang_prereq): New macro.
	* misc/sys/cdefs.h (__glibc_clang_has_extension)
	(__attribute_deprecated_msg__): New macros.

2016-08-03  Joseph Myers  <joseph@codesourcery.com>

	* bits/libc-header-start.h (__GLIBC_USE_IEC_60559_BFP_EXT): New
	macro.
	* include/features.h (__STDC_WANT_IEC_60559_BFP_EXT__): Document.
	* manual/arith.texi (issignaling): Document as ISO from TS
	18661-1:2014.
	(nextup): Likewise.
	(nextupf): Likewise.
	(nextupl): Likewise.
	(nextdown): Likewise.
	(nextdownf): Likewise.
	(nextdownl): Likewise.
	* manual/creature.texi (__STDC_WANT_IEC_60559_BFP_EXT__): Document
	macro.
	* math/math.h: Define
	__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION and include
	<bits/libc-header-start.h> instead of including <features.h>.
	(issignaling): Define if [__GLIBC_USE (IEC_60559_BFP_EXT)], not
	[__USE_GNU].
	* math/bits/mathcalls.h (nextdown): Declare if
	[__GLIBC_USE (IEC_60559_BFP_EXT)], not [__USE_GNU].
	(nextup): Likewise.
	(__issignaling): Likewise.

2016-08-03  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* s_ccoshf.c (__ccoshf): Remove FE_INVALID
	check, and remove __glibc_likely hint
	from FP_INFINITE check.
	* s_csinhf.c (__csinhf): Likewise.

	* s_ccoshl.c (__ccoshl): Remove __glibc_likely
	hint from FP_INFINITE check.
	* s_csinhl.c (__csinhl): Likewise.

2016-08-03  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/Makefile (libm-calls): Insert F placeholder into
	object names.  Move w_lgamma_compat* routines into
	(libm-compat-calls): New variable.
	(libm-compat-calls-ldouble-yes): New variable.
	(calls): Insert F placeholder.
	(generated): Redefine using new type-foreach macro call.
	(routines): Likewise.

	(types): New variable to hold a list of symbolic names
	for each type supported by the target machine.
	(libm-routines): Redefine using new types variable.
	(type-foreach): macro to replace fooF with the
	appropriately suffixed foo for each types.

	(type-ldouble-suffix): New variable.
	(type-ldouble-routines): Likewise.
	(type-ldouble-yes): Likewise.
	(type-double-suffix): Likewise.
	(type-double-routines): Likewise.
	(type-float-suffix): Likewise.
	(type-float-routines): Likewise.

	(dbl-only-routines): Remove.
	(long-c-yes): Likewise.
	(long-m-routines): Likewise.
	(long-m-support): Likewise.
	(long-m-yes): Likewise.
	(test-longdouble-yes): Likewise.

	(test-float.o): Simplify by increasing the scope of the
	recipe which adds libm-test.stmp to the vector types.
	(test-ifloat.o): Likewise.
	(test-float-finite.o): Likewise.
	(test-double.o): Likewise
	(test-idouble.o): Likewise.
	(test-double-finite.o): Likewise.
	(test-ldouble.o): Likewise
	(test-ildoubl.o): Likewise.
	(test-ldouble-finite.o): Likewise.

	(libm-tests): Redefine type tests using foreach and the
	list of types in types.

	(CPPFLAGS-test-ildoubl.c): Rename to
	(CPPFLAGS-test-ildouble.c): New variable

	* math/test-ildoubl.c: Rename to
	* math/test-ildouble.c: New file.

2016-08-03  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128/k_tanl.c (__kernal_tanl):
	Use fabsl instead of fabs.
	* sysdeps/ieee754/ldbl-128/s_logbl.c (__logbl):
	Likewise.
	* sysdeps/ieee754/ldbl-128/s_atanl.c (__kernel_tanl):
	Add long double suffix to constant to ensure proper
	promotion to long double.

2016-08-03  Tom Tromey  <tom@tromey.com>

	[BZ #20311]
	* nptl_db/Makefile (headers): Add proc_service.h.
	* nptl_db/proc_service.h: Add include guard.  Use
	__BEGIN/__END_DECLS.
	(ps_get_thread_area, ps_pstop, ps_pcontinue, ps_lstop)
	(ps_lcontinue): Remove "const" from "struct ps_prochandle *"
	arguments.


2016-08-03  Florian Weimer  <fweimer@redhat.com>

	[BZ #17730]
	Avoid using memalign for TCB allocations.
	* elf/dl-tls.c (tcb_to_pointer_to_free_location): New.
	(_dl_allocate_tls_storage): Use malloc and manual alignment.
	Avoid alignment gap in the TLS_DTV_AT_TP case.
	(_dl_deallocate_tls): Use tcb_to_pointer_to_free_location to
	determine the pointer to free.
	* nptl/tst-tls3-malloc.c: New test.
	* nptl/Makefile (tests): Add it.
	(tst-tls3-malloc): Link with libdl, libpthread.
	(LDFLAGS-tst-tls3-malloc): Set.
	(tst-tls3-malloc.out): Depend on DSO used in test.

2016-08-03  Florian Weimer  <fweimer@redhat.com>

	[BZ #17730]
	Avoid using memalign for TLS allocations.
	* sysdeps/generic/dl-dtv.h (struct dtv_pointer): New.  Replaces
	is_static member with to_free member.
	(union dtv): Use struct dtv_pointer.
	* csu/libc-tls.c (__libc_setup_tls): Set to_free member of struct
	dtv_pointer instead of is_static.
	* elf/dl-tls.c (_dl_allocate_tls_init): Likewise.
	(_dl_deallocate_tls): Free to_free member of struct dtv_pointer
	instead of val.
	(allocate_dtv_entry): New function.
	(allocate_and_init): Return struct dtv_pointer.  Call
	allocate_dtv_entry instead of __libc_memalign.
	(_dl_update_slotinfo): Free to_free member of struct dtv_pointer
	instead of val.
	(tls_get_addr_tail): Set to_free member of struct dtv_pointer
	instead of is_static.  Adjust call to allocate_and_init.
	* nptl/allocatestack.c (get_cached_stack): Free to_free member of
	struct dtv_pointer instead of val.

2016-08-03  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc.c (INTERNAL_SIZE_T, SIZE_SZ, MALLOC_ALIGNMENT)
	(MALLOC_ALIGN_MASK): Move ...
	* malloc/malloc-internal.h: ... to here.
	* elf/dl-minimal.c (malloc): Allocate with MALLOC_ALIGNMENT.

2016-08-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/gnu/netinet/udp.h (UDP_ENCAP_GTP0): New macro.
	(UDP_ENCAP_GTP1U): Likewise.

	* sysdeps/unix/sysv/linux/bits/socket.h (PF_QIPCRTR): New macro.
	(PF_MAX): Update value.
	(AF_QIPCRTR): New macro.

2016-08-03  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/ieee754/dbl-64/s_trunc.c: Avoid alias renamed.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_trunc.c: Likewise.
	* sysdeps/ieee754/flt-32/s_truncf.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile
	[$(subdir) = math && $(have-as-vis3) = yes] (libm-sysdep_routines):
	Add s_ceilf-vis3, s_ceil-vis3, s_floorf-vis3, s_floor-vis3,
	s_truncf-vis3, s_trunc-vis3.
	(CFLAGS-s_ceilf-vis3.c): New. Set to -Wa,-Av9d -mvis3.
	(CFLAGS-s_ceil-vis3.c): Likewise.
	(CFLAGS-s_floorf-vis3.c): Likewise.
	(CFLAGS-s_floor-vis3.c): Likewise.
	(CFLAGS-s_truncf-vis3.c): Likewise.
	(CFLAGS-s_trunc-vis3.c): Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis3.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis3.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis3.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis3.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_trunc-vis3.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_trunc.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_truncf-vis3.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_truncf.c: Likewise.

2016-08-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyint-vis3.S
	(__nearbyint_vis3): Don't check for sNaN before float register is
	loaded with the incoming argument.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyintf-vis3.S
	(__nearbyintf_vis3): Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_nearbyint.S (__nearbyint):
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_nearbyintf.S (__nearbyintf):
	Likewise.

	* string/test-strncmp.c (do_test_limit): Make sure the test data
	stream is aligned as required for the type "CHAR".
	(do_test): Likewise.

2016-08-03  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/powerpc/ifunc-sel.h (ifunc_sel): Replace beqlr instructions
	by beq instructions jumping to the end of the function.
	* sysdeps/powerpc/ifunc-sel.h (ifunc_sel): Add "11", "12", "cr0" to the
	clobber list. Use "i" constraint instead of "X".
	(ifunc_one): Add "12" to the clobber list. Use "i" constraint instead
	of "X".

2016-08-02  Joseph Myers  <joseph@codesourcery.com>

	* bits/libc-header-start.h: New file.
	* Makefile (headers): Add bits/libc-header-start.h.
	* include/features.h (__STDC_WANT_LIB_EXT2__): Document.
	(__GLIBC_USE): New macro.
	* libio/stdio.h: Define
	__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION and include
	<bits/libc-header-start.h> instead of including <features.h>.
	(fmemopen): Declare also if [__GLIBC_USE (LIB_EXT2)].
	(open_memstream): Likewise.
	(vasprintf): Declare if [__GLIBC_USE (LIB_EXT2)], not [__USE_GNU].
	(__asprintf): Likewise.
	(asprintf): Likewise.
	(__getdelim): Declare also if [__GLIBC_USE (LIB_EXT2)].
	(getdelim): Likewise.
	(getline): Likewise.
	* string/string.h: Define
	__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION and include
	<bits/libc-header-start.h> instead of including <features.h>.
	(strdup): Declare also if [__GLIBC_USE (LIB_EXT2)]
	(strndup): Likewise.
	* wcsmbs/wchar.h: Define
	__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION and include
	<bits/libc-header-start.h> instead of including <features.h>.
	(open_wmemstream): Declare also if [__GLIBC_USE (LIB_EXT2)].
	* manual/creature.texi (__STDC_WANT_LIB_EXT2__): Document macro.

2016-08-02  Florian Weimer  <fweimer@redhat.com>

	Support linking against compatibility symbols, for use in tests.
	* include/libc-symbols.h (symbol_version_reference): New macro.
	(symbol_version): Use it.
	* include/shlib-compat.h: Unconditionally include <abi-versions.h>.
	(compat_symbol): Use compat_symbol_reference.
	(compat_symbol_1, compat_symbol_2): Remove.
	(compat_symbol_reference, compat_symbol_reference_1)
	(compat_symbol_reference_2): New macro.  Use
	symbol_version_reference.

2016-08-02  Florian Weimer  <fweimer@redhat.com>

	[BZ #19469]
	* malloc/Makefile (CPPFLAGS): Compile tests with
	-DTEST_NO_MALLOPT.
	* test-skeleton.c (main): Only call mallopt if !TEST_NO_MALLOPT.

2016-08-02  Andrew Senkevich  <andrew.senkevich@intel.com>

	[BZ #20033]
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp2_core_sse4.S: Call
	finite version.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp4_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp8_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log2_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log4_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log8_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow2_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow4_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow8_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf16_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf4_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf8_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf16_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf4_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf8_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf16_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf4_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf8_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_exp2_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_log2_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_pow2_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_expf4_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_logf4_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_powf4_core.S: Likewise.
	* math/libm-test.inc (pow_test_data): Exclude tests for qNaN
	in zero power.

2016-08-02  Florian Weimer  <fweimer@redhat.com>

	[BZ #20370]
	* malloc/arena.c (get_free_list): Update comment.  Assert that
	arenas on the free list have no attached threads.
	(remove_from_free_list): New function.
	(reused_arena): Call it.

2016-08-02  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/alpha/fpu/s_ceil.c (__ceil): Add argument with itself
	when it is a NaN.
	[_IEEE_FP_INEXACT] Remove.
	* sysdeps/alpha/fpu/s_ceilf.c (__ceilf): Likewise.
	* sysdeps/alpha/fpu/s_floor.c (__floor): Add argument with itself
	when it is a NaN.
	[_IEEE_FP_INEXACT] Remove.
	* sysdeps/alpha/fpu/s_floorf.c (__floorf): Likewise.
	* sysdeps/alpha/fpu/s_rint.c (__rint): Add argument with itself
	when it is a NaN.
	* sysdeps/alpha/fpu/s_rintf.c (__rintf): Likewise.
	* sysdeps/alpha/fpu/s_trunc.c (__trunc): Return the input value
	when its absolute value is greater than 0x1.0p52.
	[_IEEE_FP_INEXACT] Remove.
	* sysdeps/alpha/fpu/s_truncf.c (__truncf): Return the input value
	when its absolute value is greater than 0x1.0p23.
	[_IEEE_FP_INEXACT] Remove.

2016-08-01  Carlos O'Donell  <carlos@redhat.com>

	* version.h (RELEASE): Set to "development"
	(VERSION): Set to 2.24.90.
	* NEWS: Add 2.25 section.

	* version.h (RELEASE): Set to "stable"
	(VERSION): Set to 2.24.
	* include/features.h (__GLIBC_MINOR__): Set to 24.

	* NEWS: Add 2.24 fixed bugs.
	* po/libc.pot: Regenerate.

2016-08-01  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile
	[$(subdir) = math] (libm-sysdep_routines): Remove.
	[$(subdir) = math && $(have-as-vis3) = yes] (libm-sysdep_routines):
	Remove s_ceilf-vis3, s_ceil-vis3, s_floorf-vis3, s_floor-vis3,
	s_truncf-vis3, s_trunc-vis3.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil-vis2.S: Delete
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf-vis2.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis2.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf-vis2.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_trunc-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_trunc.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_truncf-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_truncf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floorf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_trunc.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_truncf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis2.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis2.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis2.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis2.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_trunc-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_trunc.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_truncf-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_truncf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_floor.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_floorf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_trunc.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_truncf.S: Likewise.

2016-07-27  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20384]
	* sysdeps/x86_64/fpu/Makefile (extra-test-objs): Add
	test-double-libmvec-sincos-avx-main.o,
	test-double-libmvec-sincos-avx2-main.o,
	test-double-libmvec-sincos-main.o,
	test-float-libmvec-sincosf-avx-main.o,
	test-float-libmvec-sincosf-avx2-main.o and
	test-float-libmvec-sincosf-main.o.
	test-float-libmvec-sincosf-avx512-main.o.
	($(objpfx)test-double-libmvec-sincos): Also link with
	$(objpfx)test-double-libmvec-sincos-main.o.
	($(objpfx)test-double-libmvec-sincos-avx): Also link with
	$(objpfx)test-double-libmvec-sincos-avx-main.o.
	($(objpfx)test-double-libmvec-sincos-avx2): Also link with
	$(objpfx)test-double-libmvec-sincos-avx2-main.o.
	($(objpfx)test-float-libmvec-sincosf): Also link with
	$(objpfx)test-float-libmvec-sincosf-main.o.
	($(objpfx)test-float-libmvec-sincosf-avx): Also link with
	$(objpfx)test-float-libmvec-sincosf-avx2-main.o.
	[$(config-cflags-avx512) == yes] (extra-test-objs): Add
	test-double-libmvec-sincos-avx512-main.o and
	($(objpfx)test-double-libmvec-sincos-avx512): Also link with
	$(objpfx)test-double-libmvec-sincos-avx512-main.o.
	($(objpfx)test-float-libmvec-sincosf-avx512): Also link with
	$(objpfx)test-float-libmvec-sincosf-avx512-main.o.
	(CFLAGS-test-double-libmvec-sincos.c): Removed.
	(CFLAGS-test-float-libmvec-sincosf.c): Likewise.
	(CFLAGS-test-double-libmvec-sincos-main.c): New.
	(CFLAGS-test-double-libmvec-sincos-avx-main.c): Likewise.
	(CFLAGS-test-double-libmvec-sincos-avx2-main.c): Likewise.
	(CFLAGS-test-float-libmvec-sincosf-main.c): Likewise.
	(CFLAGS-test-float-libmvec-sincosf-avx-main.c): Likewise.
	(CFLAGS-test-float-libmvec-sincosf-avx2-main.c): Likewise.
	(CFLAGS-test-float-libmvec-sincosf-avx512-main.c): Likewise.
	(CFLAGS-test-double-libmvec-sincos-avx.c): Set to -DREQUIRE_AVX.
	(CFLAGS-test-float-libmvec-sincosf-avx.c ): Likewise.
	(CFLAGS-test-double-libmvec-sincos-avx2.c): Set to
	-DREQUIRE_AVX2.
	(CFLAGS-test-float-libmvec-sincosf-avx2.c ): Likewise.
	(CFLAGS-test-double-libmvec-sincos-avx512.c): Set to
	-DREQUIRE_AVX512F.
	(CFLAGS-test-float-libmvec-sincosf-avx512.c): Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-sincos.c: Rewritten.
	* sysdeps/x86_64/fpu/test-float-libmvec-sincosf.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-sincos-avx-main.c: New
	file.
	* sysdeps/x86_64/fpu/test-double-libmvec-sincos-avx2-main.c:
	Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-sincos-avx512-main.c:
	Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-sincos-main.c:
	Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-sincosf-avx-main.c:
	Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-sincosf-avx2-main.c:
	Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-sincosf-avx512-main.c:
	Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-sincosf-main.c:
	Likewise.

2016-07-27  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/unix/sysv/linux/nios2/localplt.data (__eqsf2): Remove.

2016-07-21  Gustavo Romero  <gromero@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: Fix missing verb
	and typo in a comment about AT_HWCAP entry.

2016-07-21  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Updated.

2016-07-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/memcpy.S (memcpy): Eliminate the usage
	of r13 as it is not restored in mvcle case.

2016-07-19  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/microblaze/sysdep.h (inline_syscall0):
	Rename "ret" to "__ret".
	(inline_syscall1, inline_syscall2, inline_syscall3, inline_syscall4,
	inline_syscall5, inline_syscall6): Likewise.

2016-07-19   Will Newton  <will.newton@gmail.com>

	* elf/elf.h (R_METAG_REL8, R_METAG_REL16, R_METAG_TLS_GD
	R_METAG_TLS_LDM, R_METAG_TLS_LDO_HI16, R_METAG_TLS_LDO_LO16,
	R_METAG_TLS_LDO, R_METAG_TLS_IE, R_METAG_TLS_IENONPIC,
	R_METAG_TLS_IENONPIC_HI16, R_METAG_TLS_IENONPIC_LO16,
	R_METAG_TLS_LE, R_METAG_TLS_LE_HI16, R_METAG_TLS_LE_LO16): New.

2016-07-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/Makefile (rtld-CFLAGS): New.
	[subdir == elf] (CFLAGS-.os): Replace -mno-sse -mno-mmx
	-mfpmath=387 with $(rtld-CFLAGS).
	[subdir != elf] (CFLAGS-.os): Compile rtld-*.os with
	$(rtld-CFLAGS).

2016-07-18   Ross Burton  <ross.burton@intel.com>
	     Khem Raj  <raj.khem@gmail.com>

	* elf/elf.h (R_METAG_HIADDR16, R_METAG_LOADDR16,
	R_METAG_ADDR32, R_METAG_NONE, R_METAG_RELBRANCH,
	R_METAG_GETSETOFF, R_METAG_REG32OP1, R_METAG_REG32OP2,
	R_METAG_REG32OP3, R_METAG_REG16OP1, R_METAG_REG16OP2,
	R_METAG_REG16OP3, R_METAG_REG32OP4, R_METAG_HIOG,
	R_METAG_LOOG, R_METAG_GNU_VTINHERIT, R_METAG_GNU_VTENTRY,
	R_METAG_HI16_GOTOFF, R_METAG_LO16_GOTOFF,
	R_METAG_GETSET_GOTOFF, R_METAG_GETSET_GOT, R_METAG_HI16_GOTPC,
	R_METAG_LO16_GOTPC, R_METAG_HI16_PLT, R_METAG_LO16_PLT,
	R_METAG_RELBRANCH_PLT, R_METAG_GOTOFF, R_METAG_PLT,
	R_METAG_COPY, R_METAG_JMP_SLOT, R_METAG_RELATIVE,
	R_METAG_GLOB_DAT, R_METAG_TLS_TPOFF, R_METAG_TLS_DTPMOD,
	R_METAG_TLS_DTPOFF): New.

2016-07-18  Siddhesh Poyarekar  <siddhesh@sourceware.org>
	    Matt Clay  <mclay@lycos.com>

	[BZ #20357]
	* sysdeps/ieee754/dbl-64/s_sin.c (sloww): Fix up condition
	to call __mpsin/__mpcos and to negate values.
	* math/auto-libm-test-in: Add test.
	* math/auto-libm-test-out: Regenerate.

2016-07-18  Zack Weinberg  <zackw@panix.com>

	* grp/Makefile: Don't install the internal header grp-merge.h.

2016-07-18  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Regenerated.

2016-07-13  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/termios.h (TABDLY): Change macro to include TAB3 bit too.

2016-07-13  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #15368]
	* sysdeps/unix/sysv/linux/nptl-signals.h
	(__nptl_clear_internal_signals): New function.
	(__libc_signal_block_all): Likewise.
	(__libc_signal_block_app): Likewise.
	(__libc_signal_restore_set): Likewise.
	* sysdeps/unix/sysv/linux/pt-raise.c (raise): Use Linux raise.c
	implementation.
	* sysdeps/unix/sysv/linux/raise.c (raise): Reimplement to not use
	the cached pid/tid value in pthread structure.

2016-07-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20347]
	* sysdeps/i386/i686/fpu/multiarch/libm-test-ulps: Regenerated.

2016-07-12  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20348]
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Add pread64,
	preadv64, pwrite64 and pwritev64.

2016-07-12  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20350]
	* posix/tst-preadwrite.c: Renamed to ...
	* posix/tst-preadwrite-common.c: This.
	(PREAD): Removed.
	(PWRITE): Likewise.
	(STRINGIFY): Likewise.
	(STRINGIFY2): Likewise.
	(do_prepare): Make it static and remove function arguments.
	(do_test): Likewise.
	(PREPARE): Updated.
	(TEST_FUNCTION): New.
	(name): Make it static.
	(fd): Likewise.
	(do_prepare): Use create_temp_file.
	(do_test): Renamed to ...
	(do_test_with_offset): This.  Make it static and accept offset.
	Properly check return value of PWRITE and PREAD.  Return bytes
	read.  Don't close fd nor unlink name.
	* posix/tst-preadwrite.c: Rewrite.
	* posix/tst-preadwrite64.c: Likewise.

2016-07-12  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20309]
	* configure.ac (have-mtls-dialect-gnu2): Set to yes if
	-mtls-dialect=gnu2 works.
	* configure: Regenerated.
	* elf/Makefile [have-mtls-dialect-gnu2 = yes]
	(tests): Add tst-gnu2-tls1.
	(modules-names): Add tst-gnu2-tls1mod.
	($(objpfx)tst-gnu2-tls1): New.
	(tst-gnu2-tls1mod.so-no-z-defs): Likewise.
	(CFLAGS-tst-gnu2-tls1mod.c): Likewise.
	* elf/tst-gnu2-tls1.c: New file.
	* elf/tst-gnu2-tls1mod.c: Likewise.
	* sysdeps/x86_64/dl-tlsdesc.S (_dl_tlsdesc_dynamic): Add 8
	bytes for push in the PLT entry to align the stack.

2016-07-11  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20349]
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (LO_HI_LONG): New.

2016-07-11  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	[BZ #18707]
	* sysdeps/aarch64/Makefile (CFLAGS-mcount.c): Add -mgeneral-regs-only.
	* sysdeps/aarch64/sysdep.h (CALL_MCOUNT): Save argument registers.

2016-07-08  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/sysdep.h
	[__WORDSIZE == 64 || __ASSUME_WORDSIZE64_ILP32] (LO_HI_LONG): Remove
	guards.
	* misc/tst-preadvwritev-common.c: New file.
	* misc/tst-preadvwritev.c: Use tst-preadvwritev-common.c.
	* misc/tst-preadvwritev64.c: Use tst-preadwritev-common.c and add
	a check for files larger than 2GB.

	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_OFF_DIFF_OFF64): Remove define.
	* sysdeps/unix/sysv/linux/pread.c
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (pread): Replace by
	__OFF_T_MATCHES_OFF64_T.
	* sysdeps/unix/sysv/linux/pread64.c
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (pread64): Likewise.
	* sysdeps/unix/sysv/linux/preadv.c
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (preadv): Likewise.
	* sysdeps/unix/sysv/linux/preadv64.c
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (preadv64): Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (pwrite): Likewise.
	* sysdeps/unix/sysv/linux/pwrite64.c
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (pwritev): Likewise.
	* sysdeps/unix/sysv/linux/pwritev64.c
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (pwritev64): Likewise.

2016-07-08  Chris Metcalf  <cmetcalf@mellanox.com>

	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_ALIGNED_REGISTER_PAIRS): Only define if !_LP64.

2016-07-08  Aurelien Jarno  <aurelien@aurel32.net>

	* bits/in.h (__USE_KERNEL_IPV6_DEFS): Define to 0.

2016-07-08  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #20240]
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile
	(CFLAGS-s_modf-ppc32.c): New variable.
	(CFLAGS-s_modff-ppc32.c): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile
	(CFLAGS-s_modf-ppc64.c): Likewise.
	(CFLAGS-s_modff-ppc64.c): Likewise.

2016-07-07  Andreas Schwab  <schwab@suse.de>

	[BZ #20263]
	* nptl/tst-robust10.c: New test.
	* nptl/Makefile (tests): Add tst-robust10.

2016-07-07  Jiyoung Yun  <t2wish@gmail.com>

	[BZ #20263]
	* nptl/lowlevelrobustlock.c: Implement ETIMEDOUT logic.

2016-07-06  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/linkmap.h (struct link_map_machine):
	Remove member gotplt and add member jmprel.
	* sysdeps/s390/s390-32/dl-machine.h
	(elf_machine_runtime_setup): Setup member jmprel with DT_JMPREL
	instead of gotplt with &got[3].
	(elf_machine_lazy_rel): Calculate address with reloc and jmprel.
	* sysdeps/s390/s390-64/dl-machine.h: Likewise.

2016-07-06  John David Anglin  <danglin@gcc.gnu.org>

	* sysdeps/hppa/fpu/libm-test-ulps: Regenerate.

2016-07-06  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* libio/iofopncook.c (_IO_cookie_read, _IO_cookie_write,
	_IO_cookie_seek, _IO_cookie_close, _IO_old_cookie_seek)
	[!PTR_DEMANGLE]: Do not call PTR_DEMANGLE.
	(set_callbacks) [!PTR_MANGLE]: Do not call PTR_MANGLE.
	* libio/vtables.c (_IO_vtable_check)
	[!PTR_DEMANGLE]: Do not call PTR_DEMANGLE.
	* libio/libioP.h (IO_set_accept_foreign_vtables)
	[!PTR_MANGLE]: Do not call PTR_MANGLE.

2016-07-05  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20314]
	* Makeconfig (CXXFLAGS): Prepend -I$(common-objpfx).
	* Makerules (before-compile): Add $(common-objpfx)cstdlib and
	$(common-objpfx)cmath.
	($(common-objpfx)cstdlib): New target.
	($(common-objpfx)cmath): Likewise.

2016-07-05  Chris Metcalf  <cmetcalf@mellanox.com>

	* malloc/tst-malloc-thread-fail.c (TIMEOUT): Bump up to 30s.

2016-07-05  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	[BZ #20327]
	* sysdeps/powerpc/powerpc64/power8/strcasecmp.S: Mask bits that
	are not part of the string.

2016-07-05  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/tst-cancel4-common.c (do_test): Add temporary fifo creation.
	* nptl/tst-cancel4-common.h (fifoname): New variable.
	(fifofd): Likewise.
	(cl_fifo): New function.
	* nptl/tst-cancel4.c (tf_sigpause): Replace SIGCANCEL usage by
	SIGINT.
	(tf_open): Add early cancel test.

2016-07-04  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/Makefile (CFLAGS-mcount.c): Define.

2016-07-01  Maciej W. Rozycki  <macro@imgtec.com>

	* sysdeps/generic/ldsodefs.h
	(dl_symbol_visibility_binds_local_p): New inline function.
	* elf/dl-addr.c (determine_info): Treat hidden and internal
	symbols as local.
	* elf/dl-lookup.c (do_lookup_x): Likewise.
	* elf/dl-reloc.c (RESOLVE_MAP): Likewise.

2016-07-01  Aurelien Jarno  <aurelien@aurel32.net>

	* sparc/sparc32/sparcv9/fpu/s_nearbyint.S (__nearbyint): Trigger an
	invalid exception for a sNaN input.
	* sparc/sparc32/sparcv9/fpu/s_nearbyintf.S (__nearbyintf): Likewise.
	* sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyint-vis3.S
	(__nearbyint_vis3): Likewise
	* sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyintf-vis3.S
	(__nearbyintf_vis3): Likewise
	* sparc/sparc64/fpu/s_nearbyint.S (__nearbyint): Likewise.
	* sparc/sparc64/fpu/s_nearbyintf.S (__nearbyintf): Likewise.
	* sparc/sparc64/fpu/multiarch/s_nearbyint-vis3.S (__nearbyint_vis3):
	Likewise.
	* sparc/sparc64/fpu/multiarch/s_nearbyintf-vis3.S (__nearbyintf_vis3):
	Likewise.

2016-07-01  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20139]
	* config.h.in (HAVE_AVX512_ASM_SUPPORT): Renamed to ...
	(HAVE_AVX512DQ_ASM_SUPPORT): This.
	* sysdeps/x86_64/configure.ac: Require assembler from binutils
	2.24 or above.
	(HAVE_AVX512_ASM_SUPPORT): Removed.
	(HAVE_AVX512DQ_ASM_SUPPORT): New.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/dl-trampoline.S: Make HAVE_AVX512_ASM_SUPPORT
	check unconditional.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove-avx512-no-vzeroupper.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memmove-avx512-unaligned-erms.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memmove.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memset-avx512-no-vzeroupper.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memset-avx512-unaligned-erms.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos8_core_avx512.S: Check
	HAVE_AVX512DQ_ASM_SUPPORT instead of HAVE_AVX512_ASM_SUPPORT.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp8_core_avx512.S:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log8_core_avx512.S:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow8_core_avx512.S:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin8_core_avx512.S:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos8_core_avx512.:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf16_core_avx512.S:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf16_core_avx512.S:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf16_core_avx512.S:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf16_core_avx512.S:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf16_core_avx51:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf16_core_avx512.S:
	Likewise.

2016-07-01  Andrew Senkevich  <andrew.senkevich@intel.com>

	[BZ #20024]
	* sysdeps/x86/fpu/test-math-vector-sincos.h: New.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos2_core_sse4.S: Fixed ABI
	of this implementation of vector function.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos4_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos8_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf16_core_avx512.S:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf4_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf8_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_sincos2_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_sincos4_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_sincos4_core_avx.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_sincos8_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_sincosf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_sincosf4_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_sincosf8_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_sincosf8_core_avx.S: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen2-wrappers.c: Use another wrapper
	for testing vector sincos with fixed ABI.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen16-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-sincos-avx.c: New test.
	* sysdeps/x86_64/fpu/test-double-libmvec-sincos-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-sincos-avx512.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-sincos.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-sincosf-avx.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-sincosf-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-sincosf-avx512.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-sincosf.c: Likewise.
	* sysdeps/x86_64/fpu/Makefile: Added new tests.

2016-06-30  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/localplt.data: Add _Qp_cmp.

2016-06-30  Anton Blanchard  <anton@samba.org>

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile
	[$(subdir) = math] (libm-sysdep_routines): Add s_sinf-power8 and
	s_sinf-ppc64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_sinf-power8.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_sinf-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_sinf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_sinf.S: Likewise.

2016-06-30  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile
	[$(subdir) = math] (libm-sysdep_routines): Add e_expf-power8 and
	e_expf-ppc64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_expf-power8.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_expf-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_expf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/e_expf.S: Likewise.

2016-06-30  John David Anglin  <danglin@gcc.gnu.org>

	[BZ #20277]
	* sysdeps/hppa/start.S (_start): Correct loading of global pointer
	when SHARED is defined.

2016-06-30  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.h (bit_arch_Prefer_ERMS): New.
	(index_arch_Prefer_ERMS): Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S (__new_memcpy): Return
	__memcpy_erms for Prefer_ERMS.
	* sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
	(__memmove_erms): Enabled for libc.a.
	* ysdeps/x86_64/multiarch/memmove.S (__libc_memmove): Return
	__memmove_erms or Prefer_ERMS.
	* sysdeps/x86_64/multiarch/mempcpy.S (__mempcpy): Return
	__mempcpy_erms for Prefer_ERMS.
	* sysdeps/x86_64/multiarch/memset.S (memset): Return
	__memset_erms for Prefer_ERMS.

2016-06-30  Andreas Schwab  <schwab@suse.de>

	[BZ #20262]
	* nis/nss_nis/nis-initgroups.c (_nss_nis_initgroups_dyn): Return
	NSS_STATUS_SUCCESS when done.  Return NSS_STATUS_TRYAGAIN when out
	of memory.

2016-06-29  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18645]
	* nptl/Makefile (extra-test-objs): Add tst-cleanupx4aux.o.
	(test-extras): Add tst-cleanupx4aux.
	(CFLAGS-tst-cleanupx4aux.c): New.  Set to -fexceptions.
	($(objpfx)tst-cleanupx4): Replace tst-cleanup4aux.o with
	tst-cleanupx4aux.o.
	* nptl/tst-cleanupx4aux.c: New file.

2016-06-30  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/i386/i686/fpu/multiarch/libm-test-ulps: Regenerated.

2016-06-29  Andreas Schwab  <schwab@suse.de>

	[BZ #20260]
	* sysdeps/x86/bits/string.h (__strncat_g) [!__i686__]: Compute the
	address before the beginning of the string as an integer to avoid
	array-bounds warning.

2016-06-28  Richard Henderson  <rth@redhat.com>

	* elf/elf.h (EM_BPF): New.
	(EM_NUM): Update.
	(R_BPF_NONE, R_BPF_MAP_FD): New.

	* elf/elf.h (EM_IAMCU, EM_SPU, EM_PDP10, EM_PDP11, EM_ARC_COMPACT,
	EM_VIDEOCORE, EM_TMM_GPP, EM_NS32K, EM_TPC, EM_SNP1K, EM_ST200,
	EM_IP2K, EM_MAX, EM_CR, EM_F2MC16, EM_MSP430, EM_BLACKFIN, EM_SE_C33,
	EM_SEP, EM_ARCA, EM_UNICORE, EM_EXCESS, EM_DXP, EM_ALTERA_NIOS2,
	EM_CRX, EM_XGATE, EM_C166, EM_M16C, EM_DSPIC30F, EM_CE, EM_M32C,
	EM_TSK3000, EM_RS08, EM_SHARC, EM_ECOG2, EM_SCORE7, EM_DSP24,
	EM_VIDEOCORE3, EM_LATTICEMICO32, EM_SE_C17, EM_TI_C6000, EM_TI_C2000,
	EM_TI_C5500, EM_TI_ARP32, EM_TI_PRU, EM_MMDSP_PLUS, EM_CYPRESS_M8C,
	EM_R32C, EM_TRIMEDIA, EM_QDSP6, EM_8051, EM_STXP7X, EM_NDS32,
	EM_ECOG1X, EM_MAXQ30, EM_XIMO16, EM_MANIK, EM_CRAYNV2, EM_RX,
	EM_METAG, EM_MCST_ELBRUS, EM_ECOG16, EM_CR16, EM_ETPU, EM_SLE9X,
	EM_L10M, EM_K10M, EM_AVR32, EM_STM8, EM_TILE64, EM_CUDA,
	EM_CLOUDSHIELD, EM_COREA_1ST, EM_COREA_2ND, EM_ARC_COMPACT2,
	EM_OPEN8, EM_RL78, EM_VIDEOCORE5, EM_78KOR, EM_56800EX, EM_BA1,
	EM_BA2, EM_XCORE, EM_MCHP_PIC, EM_KM32, EM_KMX32, EM_EMX16, EM_EMX8,
	EM_KVARC, EM_CDP, EM_COGE, EM_COOL, EM_NORC, EM_CSR_KALIMBA, EM_Z80,
	EM_VISIUM, EM_FT32, EM_MOXIE, EM_AMDGPU, EM_RISCV, EM_BPF): New.
	(EM_NUM): Update.

2016-06-28  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #18960]
	* locale/localeinfo.h (_NL_CURRENT_DEFINE):
	Set _nl_current_LC_CATEGORY_used to two instead of one.

2016-06-27  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/mips/tst-mode-switch-1.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	 Include test-skeleton.c.
	* sysdeps/mips/tst-mode-switch-2.c (main): Likewise.
	* sysdeps/mips/tst-mode-switch-3.c (main): Likewise.

2016-06-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15479]
	* sysdeps/i386/fpu/s_trunc.S (__trunc): Save and restore
	floating-point environment rather than just control word.
	* sysdeps/i386/fpu/s_truncf.S (__truncf): Likewise.
	* sysdeps/i386/fpu/s_truncl.S (__truncl): Save and restore
	floating-point environment, with "invalid" exceptions merged in,
	rather than just control word.
	* sysdeps/x86_64/fpu/s_truncl.S (__truncl): Likewise.
	* math/libm-test.inc (trunc_test_data): Do not allow spurious
	"inexact" exceptions.

	[BZ #15479]
	* sysdeps/i386/fpu/s_floor.S (__floor): Save and restore
	floating-point environment rather than just control word.
	* sysdeps/i386/fpu/s_floorf.S (__floorf): Likewise.
	* sysdeps/i386/fpu/s_floorl.S (__floorl): Save and restore
	floating-point environment, with "invalid" exceptions merged in,
	rather than just control word.
	* sysdeps/x86_64/fpu/s_floorl.S (__floorl): Likewise.
	* math/libm-test.inc (floor_test_data): Do not allow spurious
	"inexact" exceptions.

	[BZ #15479]
	* sysdeps/i386/fpu/s_ceil.S (__ceil): Save and restore
	floating-point environment rather than just control word.
	* sysdeps/i386/fpu/s_ceilf.S (__ceilf): Likewise.
	* sysdeps/i386/fpu/s_ceill.S (__ceill): Save and restore
	floating-point environment, with "invalid" exceptions merged in,
	rather than just control word.
	* sysdeps/x86_64/fpu/s_ceill.S (__ceill): Likewise.
	* math/libm-test.inc (ceil_test_data): Do not allow spurious
	"inexact" exceptions.

2016-06-21  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/sysv/linux/mips/vfork.S (__vfork): Rename into
	__libc_vfork.
	(__vfork) [IS_IN (libc)]: Remove alias.
	(__libc_vfork) [IS_IN (libc)]: Define as an alias.
	* sysdeps/unix/sysv/linux/sparc/sparc32/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/vfork.S: Likewise.

2016-06-24  Torvald Riegel  <triegel@redhat.com>

	* nscd/cache.c (cache_add): Use new C11-like atomic operation instead
	of atomic_compare_and_exchange_bool_rel.
	* nptl/pthread_mutex_unlock.c (__pthread_mutex_unlock_full): Likewise.
	* include/atomic.h (atomic_compare_and_exchange_bool_rel,
	catomic_compare_and_exchange_bool_rel): Remove.
	* sysdeps/aarch64/atomic-machine.h
	(atomic_compare_and_exchange_bool_rel): Likewise.
	* sysdeps/alpha/atomic-machine.h
	(atomic_compare_and_exchange_bool_rel): Likewise.
	* sysdeps/arm/atomic-machine.h
	(atomic_compare_and_exchange_bool_rel): Likewise.
	* sysdeps/mips/atomic-machine.h
	(atomic_compare_and_exchange_bool_rel): Likewise.
	* sysdeps/microblaze/atomic-machine.h
	( __arch_compare_and_exchange_bool_8_rel,
	__arch_compare_and_exchange_bool_16_rel): Likewise.
	* sysdeps/powerpc/atomic-machine.h
	( __arch_compare_and_exchange_bool_8_rel,
	__arch_compare_and_exchange_bool_16_rel): Likewise.
	* sysdeps/powerpc/powerpc32/atomic-machine.h
	( __arch_compare_and_exchange_bool_32_rel,
	__arch_compare_and_exchange_bool_64_rel): Likewise.
	* sysdeps/powerpc/powerpc64/atomic-machine.h
	( __arch_compare_and_exchange_bool_32_rel,
	__arch_compare_and_exchange_bool_64_rel): Likewise.
	* sysdeps/tile/atomic-machine.h
	(atomic_compare_and_exchange_bool_rel): Likewise.

2016-06-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20296]
	* sysdeps/i386/fpu/e_scalbl.S (__ieee754_scalbl): Add arguments
	when either argument is a NaN.
	* sysdeps/x86_64/fpu/e_scalbl.S (__ieee754_scalbl): Likewise.
	* math/libm-test.inc (scalb_test_data): Add sNaN tests.

	* math/libm-test.inc (snan_value_ld): New macro.
	(isgreater_test_data): Add sNaN tests.
	(isgreaterequal_test_data): Likewise.
	(isless_test_data): Likewise.
	(islessequal_test_data): Likewise.
	(islessgreater_test_data): Likewise.
	(isunordered_test_data): Likewise.
	(nextafter_test_data): Likewise.
	(nexttoward_test_data): Likewise.
	(remainder_test_data): Likewise.
	(remquo_test_data): Likewise.
	(significand_test_data): Likewise.
	* math/gen-libm-test.pl (%beautify): Add snan_value_ld.

2016-06-23  Siddhesh Poyarekar  <siddhesh@sourceware.org>

	* posix/getconf.c: Define ALL_ENVIRONMENTS_DEFINED if all
	environment macros are defined.
	(main): Avoid execve if ALL_ENVIRONMENTS_DEFINED is defined.

2016-06-23  Florian Weimer  <fweimer@redhat.com>

	[BZ #20191]
	Implement vtable verification in libio.
	* Makerules (shlib.lds): Place __libc_IO_vtables section.
	* debug/obprintf_chk.c (_IO_obstack_jumps): Define as vtable.
	* debug/vdprintf_chk.c (__vdprintf_chk): Call
	_IO_new_file_init_internal instead of _IO_file_init.
	* debug/vsnprintf_chk.c (_IO_strn_jumps): Define as vtable.
	* debug/vsprintf_chk.c (_IO_str_chk_jumps): Likewise.
	* libio/Makefile (routines): Add vtables.
	* libio/libioP.h (_IO_JUMPS_FUNC): Call IO_validate_vtable.
	(_IO_init): Remove, not for internal use.
	(_IO_init_internal): Declare, internal replacement for _IO_init.
	(_IO_file_init): Remove, not for internal use.
	(_IO_new_file_init): Remove, not for internal use.
	(_IO_new_file_init_internal): Declare, internal replacement for
	_IO_new_file_init.
	(_IO_old_file_init): Remove, not for internal use.
	(_IO_old_file_init_internal): Declare, internal replacement for
	_IO_old_file_init.
	(_IO_str_init_static, _IO_str_init_readonly): Remove, not for
	internal use.
	(__libc_IO_vtables, IO_accept_foreign_vtables, _IO_vtable_check):
	Declare.
	(libio_vtable): New macro.
	(IO_set_accept_foreign_vtables, _IO_validate_vtable): New inline
	functions.
	* libio/fileops.c (_IO_new_file_init_internal): Rename from
	_IO_new_file_init.
	(_IO_new_file_init): New externally visible wrapper which disables
	vtable verification.
	(_IO_file_jumps, _IO_file_jumps_mmap, _IO_file_jumps_maybe_mmap):
	Define as vtables.
	* libio/genops.c (_IO_init_internal): Rename from _IO_init.
	(_IO_init): New externally visible wrapper which disables
	vtable verification.
	* libio/iofdopen.c (_IO_new_fdopen): Call
	_IO_new_file_init_internal instead of _IO_file_init.  Adjust
	comment.
	* libio/iofopen.c (__fopen_internal): Call
	_IO_new_file_init_internal instead of _IO_file_init.
	* libio/iofopncook.c (_IO_cookie_jumps, _IO_old_cookie_jumps):
	Define as vtables.
	(_IO_cookie_init): Call _IO_init_internal instead of _IO_init,
	_IO_new_file_init_internal instead of _IO_file_init.
	* libio/iopopen.c (_IO_new_popen): Likewise.
	(_IO_proc_jumps): Define as vtable.
	* libio/iovdprintf.c (_IO_vdprintf): Call
	_IO_new_file_init_internal instead of _IO_file_init.
	* libio/memstream.c (_IO_mem_jumps): Define as vtable.
	(__open_memstream): Call _IO_init_internal instead of _IO_init.
	* libio/obprintf.c (_IO_obstack_jumps): Define as vtable.
	* libio/oldfileops.c (_IO_old_file_init_internal): Rename from
	_IO_old_file_init.
	(_IO_old_file_init): New externally visible wrapper which disables
	vtable verification.
	(_IO_old_file_jumps): Define as vtable.
	* libio/oldiofdopen.c (_IO_old_fdopen): Call
	_IO_old_file_init_internal instead of _IO_old_file_init.
	* libio/oldiofopen.c (_IO_old_fopen): Likewise.
	* libio/oldiopopen.c (_IO_old_popen): Likewise.
	(_IO_old_proc_jumps): Define as vtable.
	* libio/strops.c (_IO_str_jumps, _IO_strn_jumps, _IO_wstrn_jumps):
	Define as vtables.
	* libio/vtables.c: New file.
	* libio/wfileops.c (_IO_wfile_jumps, _IO_wfile_jumps_mmap)
	(_IO_wfile_jumps_maybe_mmap): Define as vtables.
	* libio/wmemstream.c (_IO_wmem_jumps): Define as vtable.
	* libio/wstrops.c (_IO_wstr_jumps): Likewise.
	* stdio-common/vfprintf.c (_IO_helper_jumps): Likewise.
	* stdlib/strfmon_l.c (__vstrfmon_l): Call _IO_init_internal
	instead of _IO_init.

2016-06-23  Florian Weimer  <fweimer@redhat.com>

	* test-skeleton.c (xrealloc): Support deallocation with n == 0.

2016-06-23  Florian Weimer  <fweimer@redhat.com>

	* test-skeleton.c (xmalloc, xcalloc, xrealloc): Mark as
	potentially unused.

2016-06-22  Florian Weimer  <fweimer@redhat.com>

	* test-skeleton.c (write_message): New function.
	* malloc/tst-mallocfork2.c (write_message): Remove.
	* debug/tst-longjmp_chk2.c (write_indented): New function.
	(write_message): Remove.
	(stackoverflow_handler): Call write_indented.

2016-06-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/s_nearbyint.S (__nearbyint): Do not mask
	"inexact" exceptions after fnstenv.
	* sysdeps/i386/fpu/s_nearbyintf.S (__nearbyintf): Likewise.
	* sysdeps/i386/fpu/s_nearbyintl.S (__nearbyintl): Likewise.
	* sysdeps/x86_64/fpu/s_nearbyintl.S (__nearbyintl): Likewise.

2015-06-22  Zack Weinberg  <zackw@panix.com>

	* sysdeps/generic/bits/hwcap.h: Moved to ...
	* bits/hwcap.h: Here.

2016-06-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/memcpy.S (memcpy):
	Further tuning for performance.

2016-06-21  Florian Weimer  <fweimer@redhat.com>

	[BZ #20284]
	* malloc/arena.c (reused_arena): Do not return NULL if we start
	out with a non-corrupted arena.

2016-06-21 Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* misc/Makefile (tests): Add tst-preadvwritev and tst-preadvwritev64.
	* misc/tst-preadvwritev.c: New file.
	* misc/tst-preadvwritev64.c: Likewise.
	* sysdeps/unix/sysv/linux/preadv.c (preadv): Remove SYSCALL_LL{64}
	usage.
	* sysdeps/unix/sysv/linux/preadv64.c (preadv64): Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c (pwritev): Likewise.
	* sysdeps/unix/sysv/linux/pwritev64.c (pwritev64): Likewise.
	* sysdeps/unix/sysv/linux/sysdep.h (LO_HI_LONG): New macro.

2016-06-20  Andrew Senkevich  <andrew.senkevich@intel.com>

	[BZ #19654]
	* sysdeps/x86_64/fpu/Makefile: Added new tests.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-avx-main.c: New.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-avx-mod.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-avx.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-avx2-main.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-avx2-mod.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-avx512-main.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-avx512-mod.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-avx512.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-main.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias-mod.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-libmvec-alias.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-avx-main.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-avx-mod.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-avx.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-avx2-main.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-avx2-mod.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-avx512-main.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-avx512-mod.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-avx512.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-main.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias-mod.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-libmvec-alias.c: Likewise.
	* sysdeps/x86_64/fpu/test-libmvec-alias-mod.c: Likewise.

2016-06-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/rawmemchr.S (__rawmemchr): New file.
	* sysdeps/aarch64/strlen.S (__strlen): Change to __strlen to avoid PLT.

2016-06-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/memcpy.S (memcpy):
	Rewrite of optimized memcpy and memmove.
	* sysdeps/aarch64/memmove.S (memmove): Remove
	memmove code (merged into memcpy.S).

2016-06-20  Florian Weimer  <fweimer@redhat.com>

	Consolidate machine-agnostic DTV definitions in <dl-dtv.h>.
	* sysdeps/generic/dl-dtv.h: New file.
	* sysdeps/aarch64/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/aarch64/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/alpha/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/alpha/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/arm/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/arm/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/hppa/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/hppa/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/i386/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/i386/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/ia64/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/ia64/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/m68k/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/m68k/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/mach/hurd/i386/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/microblaze/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/microblaze/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/mips/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/mips/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/nios2/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/nios2/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/powerpc/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/powerpc/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/s390/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/s390/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/sh/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/sh/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/sparc/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/sparc/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.
	* sysdeps/x86_64/dl-tls.h (TLS_DTV_UNALLOCATED): Remove.
	* sysdeps/x86_64/nptl/tls.h: Include <dl-dtv.h>.
	(dtv_t): Remove.

2016-06-20  Florian Weimer  <fweimer@redhat.com>

	Revert symbol poisoning of  __malloc_initialize_hook.
	* include/stdc-predef.h (__malloc_initialize_hook): Remove
	poisoning.
	* malloc/Makefile: Remove un-poisoning.
	* malloc/arena.c (ptmalloc_init): Use __malloc_initialize_hook
	instead of old__malloc_initialize_hook.
	* malloc/malloc-hooks.h: Likewise.
	* malloc/malloc.c: Likewise.
	* malloc/mcheck-init.c: Likewise.

2016-06-19  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/unix/sysv/linux/times.c (__times): Expand comments.

2016-06-18  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/sysv/linux/mips/vfork.S (__vfork): Conditionalize
	hidden_def, weak_alias and strong_alias on [IS_IN (libc)].
	* sysdeps/unix/sysv/linux/sparc/sparc32/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/vfork.S: Likewise.

2016-06-16  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* NEWS: Mention addition of nextup and nextdown.
	* manual/arith.texi: Document nextup and nextdown.
	* manual/libm-err-tab.pl: Add nextup and nextdown.
	* math/Makefile (libm-calls): Add s_nextdown and s_nextup.
	* math/Versions (libm): Add GLIBC_2.24.
	* math/bits/mathcalls.h: Add nextup and nextdown declaration.
	* math/libm-test.inc (nextafter_test_data) [TEST_COND_intel96]:
	Add new test.
	(nextafter_test_data) [TEST_COND_binary32]: Likewise.
	(nextafter_test_data) [TEST_COND_m68k96]: Likewise.
	(nextafter_test_data) [TEST_COND_binary64]: Likewise.
	(nextafter_test_data) [TEST_COND_binary128]: Likewise.
	(nextup_test_data): Likewise.
	(nextdown_test_data): Likewise.
	* math/s_nextdown.c: New file.
	* math/s_nextdownf.c: Likewise.
	* math/s_nextdownl.c: Likewise.
	* math/test-tgmath.c F(compile_test)): Add nextup and nextdown tests.
	F(nextup): New function.
	F(nextdown): Likewise.
	* math/tgmath.h: Add nextup and nextdown.
	* sysdeps/ieee754/flt-32/s_nextupf.c: New file.
	* sysdeps/ieee754/dbl-64/s_nextup.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextupl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextupl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nextupl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls):
	Add nextup and nextdown.
	(CFLAGS-nldbl-nextup.c): New variable.
	(CFLAGS-nldbl-nextdown.c): Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-nextdown.c: New file.
	* sysdeps/ieee754/ldbl-opt/nldbl-nextup.c: Likewise.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2016-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/pattern.texi: Fix typos & grammar errors.

2016-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/search.texi: Fix typos & grammar errors.

2016-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/message.texi: Fix typos & grammar errors.

2016-06-16  Mike Frysinger  <vapier@gentoo.org>

	* manual/contrib.texi: Fix spelling typos.
	* manual/crypt.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/nss.texi: Likewise.
	* manual/string.texi: Likewise.

2016-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/locale.texi: Fix typos & grammar errors.

2016-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/charset.texi: Fix typos & grammar errors.

2016-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/string.texi: Fix typos.

2016-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/ctype.texi: Fix typos.

2016-06-16  Rical Jasan  <ricaljasan@pacific.net>

	* manual/memory.texi: Fix various typos & grammar errors.

2016-06-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20255]
	* sysdeps/i386/fpu/s_fdim.c: New file.  Based on math/s_fdim.c.
	* math/libm-test.inc (fdim_test_data): Add another test.

	[BZ #6796]
	[BZ #20255]
	[BZ #20256]
	* math/s_fdim.c: Include <math_private.h>.
	(__fdim): Use math_narrow_eval on result.
	* math/s_fdimf.c: Include <math_private.h>.
	(__fdimf): Use math_narrow_eval on result.
	* sysdeps/i386/fpu/s_fdim.S: Remove file.
	* sysdeps/i386/fpu/s_fdimf.S: Likewise.
	* sysdeps/i386/fpu/s_fdiml.S: Likewise.
	* sysdeps/i386/i686/fpu/s_fdim.S: Likewise.
	* sysdeps/i386/i686/fpu/s_fdimf.S: Likewise.
	* sysdeps/i386/i686/fpu/s_fdiml.S: Likewise.
	* sysdeps/powerpc/fpu/s_fdim.c: Likewise.
	* sysdeps/powerpc/fpu/s_fdimf.c: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_fdim.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_fdim.c: Likewise.
	* sysdeps/x86_64/fpu/s_fdiml.S: Likewise.
	* math/libm-test.inc (fdim_test_data): Expect errno setting on
	overflow.  Add sNaN tests.

	* math/s_fdim.c (__fdim): Use islessequal and isinf instead of
	fpclassify.
	* math/s_fdimf.c (__fdimf): Likewise.
	* math/s_fdiml.c (__fdiml): Likewise.

2016-06-14  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile:
	(sysdep_routines): Add P8 and PPC64 strcasecmp/strncasecmp targets.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Add entries for P8 and PPC64
	ifunc'ed strcasecmp/strncasecmp.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp-power7.S:
	[EALIGN]: Removed.
	[END]: Likewise.
	[__strcasecmp]: Define instead of the above to control symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp.c: Add IFUNC selector
	for __strcasecmp_power8.
	* sysdeps/powerpc/powerpc64/multiarch/strncase.c: Add IFUNC selector
	for __strncasecmp_power8.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp-power8.S: New File.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncase-power8.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncase-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strcasecmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/strncase.S: Likewise.

2016-06-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20252]
	* sysdeps/ieee754/dbl-64/e_atan2.c (__ieee754_atan2): Add both
	arguments when second argument is a NaN.
	* math/libm-test.inc (atan2_test_data): Add sNaN tests and more
	qNaN tests.

	* math/libm-test.inc (cimag_test_data): Add sNaN tests.
	(conj_test_data): Likewise.
	(copysign_test_data): Likewise.
	(creal_test_data): Likewise.
	(fma_test_data): Likewise.
	(fmod_test_data): Likewise.

	[BZ #20250]
	* sysdeps/i386/fpu/s_frexpl.S (__frexpl): Add non-finite input to
	itself.
	* sysdeps/ieee754/dbl-64/s_frexp.c (__frexp): Add non-finite or
	zero input to itself.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_frexp.c (__frexp):
	Likewise.
	* sysdeps/ieee754/flt-32/s_frexpf.c (__frexpf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c (__frexpl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c (__frexpl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_frexpl.c (__frexpl): Likewise.
	* math/libm-test.inc (frexp_test_data): Add sNaN tests.

2016-06-13  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/Makefile (test): Add tst-cancel4_1 and tst-cancel4_2.
	* nptl/tst-cancel4-common.c: New file.
	* nptl/tst-cancel4-common.h: Likewise.
	* nptl/tst-cancel4.c: Move common definitions to
	tst-cancel4-common.{c,h} file.
	* nptl/tst-cancel4_1.c: New test.
	* nptl/tst-cancel4_2.c: New test.

2016-06-13  Florian Weimer  <fweimer@redhat.com>

	[BZ #20248]
	* debug/tst-longjmp_chk2.c (pass): Use volatile sig_atomic_t.
	(write_message): New function.
	(stackoverflow_handler): Call it instead of printf, to avoid
	excessive stack usage by printf.
	(do_test): Restore SIGSEGV, SIGBUS default handlers.

2016-06-13  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/pthread_mutex_init.c [__ASSUME_FUTEX_LOCK_PI]
	(prio_inherit_missing): Remove define.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_FUTEX_LOCK_PI): Likewise.
	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_FUTEX_LOCK_PI):
	Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_FUTEX_LOCK_PI): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_FUTEX_LOCK_PI): Likewise.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h
	(__ASSUME_FUTEX_LOCK_PI): Likewise.

2016-06-11  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #19670]
	[BZ #19672]

	* io/test-lfs.c (do_prepare): Use xmalloc.
	* io/tst-fcntl.c (do_prepare): Likewise.
	* libio/tst-fopenloc.c (do_bz17916): Likewise.
	* libio/tst-mmap2-eofsync.c (do_prepare): Likewise.
	* login/tst-utmp.c (do_prepare): Likewise.
	* posix/tst-exec.c (do_prepare): Likewise.
	* posix/tst-pathconf.c (prepare): Likewise.
	* posix/tst-spawn.c (do_prepare): Likewise.
	* posix/tst-truncate.c (do_prepare): Likewise.
	* rt/tst-aio.c (do_prepare): Likewise.
	* rt/tst-aio64.c (do_prepare): Likewise.

2016-06-11  Florian Weimer  <fweimer@redhat.com>

	[BZ #20237]
	* nss/nss_db/db-XXX.c (set*ent): Reset entidx to NULL.
	(get*ent): Set entidx to NULL during initialization.  If entidx is
	NULL, start iteration from the beginning.

2016-06-11  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc.c (musable): Return correct size for dumped fake
	mmapped chunk.

2016-06-11  Florian Weimer  <fweimer@redhat.com>

	[BZ #20222]
	* libio/iofopncook.c (_IO_cookie_read): Demangle callback pointer.
	(_IO_cookie_write): Likewise.
	(_IO_cookie_seek): Likewise.
	(_IO_cookie_close): Likewise.
	(_IO_old_cookie_seek): Likewise.
	(set_callbacks): New function.
	(_IO_cookie_init): Call set_callbacks to copy callbacks.

2016-06-11  Marko Myllynen  <myllynen@redhat.com>

	* locale/programs/localedef.c (oldstyle_tables): Remove.
	* locale/programs/localedef.h (oldstyle_tables): Likewise.

2016-06-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20240]
	* math/Makefile (CFLAGS-s_modf.c): New variable.
	(CFLAGS-s_modff.c): Likewise.
	(CFLAGS-s_modfl.c): Likewise.
	* math/libm-test.inc (modf_test_data): Add sNaN tests.

2016-06-09  Carlos O'Donell  <carlos@redhat.com>

	[BZ #20215]
	* misc/sys/cdefs.h [__GNUC_PREREQ (3,2)]: Undef __always_inline first.
	[!__GNUC_PREREQ (3,2)]: Likewise.

2016-06-10  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* conform/data/sys/socket.h-data (msghdr.msg_iovlen): Add xfail-.
	(msghdr.msg_controllen): Likewise.
	(cmsghdr.cmsg_len): Likewise.
	* nptl/Makefile (libpthread-routines): Remove ptw-oldrecvmsg and
	ptw-oldsendmsg.
	(CFLAGS-oldrecvmsg.c): Remove rule.
	(CFLAGS-oldsendmsg.c): Likewise.
	(CFLAGS-recvmsg.c): Add rule.
	(CFLAGS-sendmsg.c): Likewise.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Remove
	oldrecvmsg, oldsendmsg, oldrecvmmsg, oldsendmmsg.
	(CFLAGS-recvmsg.c): Remove rule.
	(CFLAGS-sendmsg.c): Likewise.
	(CFLAGS-oldrecvmsg.c): Likewise.
	(CFLAGS-oldsendmsg.c): Likewise.
	(CFLAGS-recvmmsg.c): Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h (msghdr.msg_iovlen): Revert
	to kernel defined interfaces.
	(msghdr.msg_controllen): Likewise.
	(cmsghdr.cmsg_len): Likewise.
	(msghdr.__glibc_reserved1): Remove member.
	(msghdr.__glibc_reserved2): Likewise.
	(cmsghdr.__glibc_reserved1): Likewise.
	* sysdeps/unix/sysv/linux/oldrecvmmsg.c: Remove file.
	* sysdeps/unix/sysv/linux/oldrecvmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/oldsendmmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/oldsendmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c: Revert back to previous
	version.
	* sysdeps/unix/sysv/linux/recvmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/sendmmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/sendmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/Versions [libc] (GLIBC_2.24):
	Remove recvmsg and sendmsg.
	* sysdeps/unix/sysv/linux/alpha/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/hppa/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/Versions [libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/m68k/Versions [libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/Versions
	[libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/nios2/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions
	[libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/Versions [libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/sparc/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/Versions: Remove file
	* sysdeps/unix/sysv/linux/x86_64/64/Versions: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/Versions: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist: Remove new 2.24
	version for {recv,send,recm,sendm}msg.
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: Likewise.

2016-06-10  Florian Weimer  <fweimer@redhat.com>

	[BZ #19564]
	Remove __malloc_initialize_hook from the API.
	* malloc/malloc.h (__malloc_initialize_hook): Remove.
	* include/stdc-predef.h (__malloc_initialize_hook): Poison with
	#pragma GCC poison.
	* malloc/malloc-hooks.h: New file.
	* malloc/arena.c (ptmalloc_init): Use old__malloc_initialize_hook.
	* malloc/malloc.c (HAVE_MALLOC_INIT_HOOK): New.
	(old__malloc_initialize_hook): Rename from
	__malloc_initialize_hook to evade poisoning.  Turn into compat
	symbol.
	* malloc/mcheck-init.c (old__malloc_initialize_hook): Rename from
	__malloc_initialize_hook.
	* malloc/Makefile (poisoned_apis, unpoisoned_api_defines): New.
	(mallo.c, mcheck-init.c): Compile with unpoisoned symbol.
	* manual/memory.texi (Hooks for Malloc): Remove
	__malloc_initialize_hook.  Adjust hook example.

2016-06-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20235]
	* sysdeps/i386/fpu/e_log2l.S (__ieee754_log2l): Add NaN input to
	itself.
	* sysdeps/x86_64/fpu/e_log2l.S (__ieee754_log2l): Likewise.
	* math/libm-test.inc (log2_test_data): Add sNaN tests.

	[BZ #20234]
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c (__log1pl): Add positive
	infinity or NaN input to itself.

	[BZ #20233]
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c (__expm1l): Add NaN input
	to itself.

	[BZ #20232]
	* sysdeps/ieee754/ldbl-128/s_expm1l.c (__expm1l): Add NaN input to
	itself.

2016-06-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/start.S (_start): Always indirect branch to
	__libc_start_main via GOT.

2016-06-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memcopy.h: New file.
	* sysdeps/x86_64/wordcopy.c: Likewise.

2016-06-09  Florian Weimer  <fweimer@redhat.com>

	Prevent GCC 6 <cstdlib> from including /usr/include/stdlib.h.
	* stdlib/tst-quick_exit.cc: Include <stdlib.h> instead of
	<cstdlib>.
	(optimization_barrier): New.
	(do_test): Use it.  Call quick_exit in the global namespace.
	* stdlib/tst-thread-quick_exit.cc: Include <stdlib.h>, <pthread.h>
	instead of <cstdlib>, <thread>.
	(optimization_barrier): New.
	(non_main_thread): Adjust declaration.  Call optimization_barrier.
	Call quick_exit in the global namespace.
	(do_test): Call optimization_barrier.  Use pthread_create,
	pthread_join instead of std::thread.

2016-06-09  Andreas Schwab  <schwab@suse.de>

	[BZ #19755]
	* nscd/pwdcache.c (cache_addpw): Lock prune_run_lock while adding
	new entries in auto-propagate mode.
	* nscd/grpcache.c (cache_addgr): Likewise.

2016-06-09  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* test-skeleton.c (oom_error, xmalloc, xcalloc, xrealloc):
	New functions.
	(add_temp_file): Use them.

2016-06-09  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* mach/mach/mach_traps.h (mach_print): Add syscall declaration.

2016-06-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20229]
	* sysdeps/i386/fpu/s_log1pl.S (__log1pl): Add NaN input to itself.
	* sysdeps/x86_64/fpu/s_log1pl.S (__log1pl): Likewise.
	* math/libm-test.inc (log1p_test_data): Add sNaN tests.

	[BZ #20228]
	* sysdeps/i386/fpu/e_log10l.S (__ieee754_log10l): Add NaN input to
	itself.
	* sysdeps/x86_64/fpu/e_log10l.S (__ieee754_log10l): Likewise.
	* math/libm-test.inc (log10_test_data): Add sNaN tests.

	[BZ #20227]
	* sysdeps/i386/fpu/e_logl.S (__ieee754_logl): Add NaN input to
	itself.
	* sysdeps/i386/i686/fpu/e_logl.S (__ieee754_logl): Likewise.
	* sysdeps/x86_64/fpu/e_logl.S (__ieee754_logl): Likewise.
	* math/libm-test.inc (log_test_data): Add sNaN tests.

	[BZ #20226]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL): Add NaN argument to
	itself.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL): Likewise.
	* math/libm-test.inc (exp_test_data): Add sNaN tests.
	(exp10_test_data): Likewise.
	(expm1_test_data): Likewise.

	[BZ #20225]
	* math/s_ldexp.c (__ldexp): Add non-finite or zero argument to
	itself.
	* math/s_ldexpf.c (__ldexpf): Likewise.
	* math/s_ldexpl.c (__ldexpl): Likewise.
	* math/w_scalbln.c (__w_scalbln): Likewise.
	* math/w_scalblnf.c (__w_scalblnf): Likewise.
	* math/w_scalblnl.c (__w_scalblnl): Likewise.
	* math/libm-test.inc (scalbn_test_data): Add sNaN tests.
	(scalbln_test_data): Likewise.

	[BZ #20224]
	* sysdeps/i386/fpu/s_cbrtl.S (__cbrtl): Add non-finite or zero
	argument to itself.
	* math/libm-test.inc (cbrt_test_data): Add sNaN tests.

2016-06-08  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19776]
	* sysdeps/x86_64/memcpy.S: Make it dummy.
	* sysdeps/x86_64/mempcpy.S: Likewise.
	* sysdeps/x86_64/memmove.S: New file.
	* sysdeps/x86_64/memmove_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.S: Likewise.
	* sysdeps/x86_64/memmove.c: Removed.
	* sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove-avx-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove-sse2-unaligned-erms.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Remove
	memcpy-sse2-unaligned, memmove-avx-unaligned,
	memcpy-avx-unaligned and memmove-sse2-unaligned-erms.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Replace
	__memmove_chk_avx512_unaligned_2 with
	__memmove_chk_avx512_unaligned.  Remove
	__memmove_chk_avx_unaligned_2.  Replace
	__memmove_chk_sse2_unaligned_2 with
	__memmove_chk_sse2_unaligned.  Remove __memmove_chk_sse2 and
	__memmove_avx_unaligned_2.  Replace __memmove_avx512_unaligned_2
	with __memmove_avx512_unaligned.  Replace
	__memmove_sse2_unaligned_2 with __memmove_sse2_unaligned.
	Remove __memmove_sse2.  Replace __memcpy_chk_avx512_unaligned_2
	with __memcpy_chk_avx512_unaligned.  Remove
	__memcpy_chk_avx_unaligned_2.  Replace
	__memcpy_chk_sse2_unaligned_2 with __memcpy_chk_sse2_unaligned.
	Remove __memcpy_chk_sse2.  Remove __memcpy_avx_unaligned_2.
	Replace __memcpy_avx512_unaligned_2 with
	__memcpy_avx512_unaligned.  Remove __memcpy_sse2_unaligned_2
	and __memcpy_sse2.  Replace __mempcpy_chk_avx512_unaligned_2
	with __mempcpy_chk_avx512_unaligned.  Remove
	__mempcpy_chk_avx_unaligned_2.  Replace
	__mempcpy_chk_sse2_unaligned_2 with
	__mempcpy_chk_sse2_unaligned.  Remove __mempcpy_chk_sse2.
	Replace __mempcpy_avx512_unaligned_2 with
	__mempcpy_avx512_unaligned.  Remove __mempcpy_avx_unaligned_2.
	Replace __mempcpy_sse2_unaligned_2 with
	__mempcpy_sse2_unaligned.  Remove __mempcpy_sse2.
	* sysdeps/x86_64/multiarch/memcpy.S (__new_memcpy): Support
	__memcpy_avx512_unaligned_erms and __memcpy_avx512_unaligned.
	Use __memcpy_avx_unaligned_erms and __memcpy_sse2_unaligned_erms
	if processor has ERMS.  Default to __memcpy_sse2_unaligned.
	(ENTRY): Removed.
	(END): Likewise.
	(ENTRY_CHK): Likewise.
	(libc_hidden_builtin_def): Likewise.
	Don't include ../memcpy.S.
	* sysdeps/x86_64/multiarch/memcpy_chk.S (__memcpy_chk): Support
	__memcpy_chk_avx512_unaligned_erms and
	__memcpy_chk_avx512_unaligned.  Use
	__memcpy_chk_avx_unaligned_erms and
	__memcpy_chk_sse2_unaligned_erms if if processor has ERMS.
	Default to __memcpy_chk_sse2_unaligned.
	* sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
	Change function suffix from unaligned_2 to unaligned.
	* sysdeps/x86_64/multiarch/mempcpy.S (__mempcpy): Support
	__mempcpy_avx512_unaligned_erms and __mempcpy_avx512_unaligned.
	Use __mempcpy_avx_unaligned_erms and __mempcpy_sse2_unaligned_erms
	if processor has ERMS.  Default to __mempcpy_sse2_unaligned.
	(ENTRY): Removed.
	(END): Likewise.
	(ENTRY_CHK): Likewise.
	(libc_hidden_builtin_def): Likewise.
	Don't include ../mempcpy.S.
	(mempcpy): New.  Add a weak alias.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S (__mempcpy_chk): Support
	__mempcpy_chk_avx512_unaligned_erms and
	__mempcpy_chk_avx512_unaligned.  Use
	__mempcpy_chk_avx_unaligned_erms and
	__mempcpy_chk_sse2_unaligned_erms if if processor has ERMS.
	Default to __mempcpy_chk_sse2_unaligned.

2016-06-08  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19881]
	* sysdeps/x86_64/multiarch/memset-sse2-unaligned-erms.S: Folded
	into ...
	* sysdeps/x86_64/memset.S: This.
	(__bzero): Removed.
	(__memset_tail): Likewise.
	(__memset_chk): Likewise.
	(memset): Likewise.
	(MEMSET_CHK_SYMBOL): New. Define only if MEMSET_SYMBOL isn't
	defined.
	(MEMSET_SYMBOL): Define only if MEMSET_SYMBOL isn't defined.
	* sysdeps/x86_64/multiarch/memset-avx2.S: Removed.
	(__memset_zero_constant_len_parameter): Check SHARED instead of
	PIC.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Remove
	memset-avx2 and memset-sse2-unaligned-erms.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Remove __memset_chk_sse2,
	__memset_chk_avx2, __memset_sse2 and __memset_avx2_unaligned.
	* sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S
	(__bzero): Enabled.
	* sysdeps/x86_64/multiarch/memset.S (memset): Replace
	__memset_sse2 and __memset_avx2 with __memset_sse2_unaligned
	and __memset_avx2_unaligned.  Use __memset_sse2_unaligned_erms
	or __memset_avx2_unaligned_erms if processor has ERMS.  Support
	__memset_avx512_unaligned_erms and __memset_avx512_unaligned.
	(memset): Removed.
	(__memset_chk): Likewise.
	(MEMSET_SYMBOL): New.
	(libc_hidden_builtin_def): Replace __memset_sse2 with
	__memset_sse2_unaligned.
	* sysdeps/x86_64/multiarch/memset_chk.S (__memset_chk): Replace
	__memset_chk_sse2 and __memset_chk_avx2 with
	__memset_chk_sse2_unaligned and __memset_chk_avx2_unaligned_erms.
	Use __memset_chk_sse2_unaligned_erms or
	__memset_chk_avx2_unaligned_erms if processor has ERMS.  Support
	__memset_chk_avx512_unaligned_erms and
	__memset_chk_avx512_unaligned.

2016-06-08  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/gen-auto-libm-test.c (fp_format_desc): remove
	suffix member.
	(output_generic_value): Remove usage of suffix member,
	and the resulting unuse of the fp_format argument.
	(output_for_one_input_case): Remove unused fp_format
	parameter.

	* math/auto-libm-test-out: Regenerate.

	* math/libm-test.inc (TEST_COND_ldbl_128ibm): replace
	usage with TEST_COND_ibm128.
	(TEST_COND_flt_32): Remove.
	(TEST_COND_dbl_64): Remove.
	(TEST_COND_ldbl_96_intel): Remove.
	(TEST_COND_ldbl_96_m68k): Remove.
	(TEST_COND_ldbl_128): Remove.

2016-06-08  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* auto-libm-test-in:
	Replace flt-32 usage with binary32.
	Replace dbl-64 usage with binary64.
	Replace ldbl-intel-96 usage with intel96.
	Replace ldbl-m68k-96 usage with m68k96.
	Replace ldbl-128ibm usage with ibm128.
	Replace ldbl-128 usage with binary128.

	* auto-libm-test-out: Regenerate.

2016-06-08  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/gen-libm-test.pl (all_floats_pfx): New lookup table.
	(parse_ulps): Dynamically generate type name matching
	string from all_floats.
	(get_ulps): Generate the ulps as an array instead.
	(output_ulps): Dynamically compose the type based
	on the number of supported formats, and print
	the indices as type specific helper macros.

	* math/libm-test.inc: Remove comment about CHOOSE.
	(ulp_data): Generate the type in libm-test-ulps.h.
	(ULP_IDX): New macro.
	(find_ulps): Update usage of max_ulp.

	* math/test-double-vlen2.h (CHOOSE): Remove.
	* math/test-double-vlen4.h (CHOOSE): Likewise.
	* math/test-double-vlen8.h (CHOOSE): Likewise.
	* math/test-float.c (CHOOSE): Likewise.
	* math/test-float-finite.c (CHOOSE): Likewise.
	* math/test-double.c (CHOOSE): Likewise.
	* math/test-double-finite.c (CHOOSE): Likewise.
	* math/test-idouble.c (CHOOSE): Likewise.
	* math/test-ifloat.c (CHOOSE): Likewise.
	* math/test-ildoubl.c (CHOOSE): Likewise.
	* math/test-ldouble-finite.c (CHOOSE): Likewise.
	* math/test-ldouble.c (CHOOSE): Likewise.

	* math/test-float.h (TEST_FLOAT): Remove.
	* math/test-double.h (TEST_DOUBLE): Likewise.
	* math/test-ldouble.h (TEST_LDOUBLE): Likewise.

2016-06-08  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/gen-libm-test.pl: (apply_lit): New subroutine.
	(parse_args): Strip C suffix from floating point literals
	typed with 'f' and wrap them with LIT().

	* math/libm-tests.inc (RUN_TEST_LOOP_fj_f): New macro.
	(test_ff_f_data_nexttoward): Rename to
	(test_fj_f_data): New struct.
	(nexttoward_test_data): Relabel tests as
	TEST_fj_f instead of TEST_ff_f.

2016-06-08  Florian Weimer  <fweimer@redhat.com>

	Emacs bug 23726.
	* malloc/malloc.c (dumped_main_arena_start): Update comment.
	(__libc_realloc): Correct size computation for dumped fake mmapped
	chunks.

2016-06-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20219]
	* sysdeps/i386/fpu/e_atanhl.S (__ieee754_atanhl): Add NaN argument
	to itself.
	* math/libm-test.inc (atanh_test_data): Add sNaN tests.

	[BZ #20218]
	* sysdeps/i386/fpu/s_asinhl.S (__asinhl): Add non-finite argument
	to itself.
	* math/libm-test.inc (asinh_test_data): Add sNaN tests.

2016-06-07  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20195]
	* sysdeps/x86/cpu-features.c (get_common_indeces): Move FMA4
	check to ...
	(init_cpu_features): Here.

2016-06-07  Carlos O'Donell  <carlos@redhat.com>

	[BZ #20214]
	* sysdeps/unix/sysv/linux/bits/in.h
	[defined _UAPI_LINUX_IN6_H || defined _UAPI_IPV6_H
	 || defined _LINUX_IN6_H || defined _IPV6_H] (__USE_KERNEL_IPV6_DEFS):
	Define to 1.
	[!(defined _UAPI_LINUX_IN6_H || defined _UAPI_IPV6_H
	 || defined _LINUX_IN6_H || defined _IPV6_H)] (__USE_KERNEL_IPV6_DEFS):
	Define to 0.
	[!__USE_KERNEL_IPV6_DEFS] (IPV6_ADD_MEMBERSHIP): Define.
	[!__USE_KERNEL_IPV6_DEFS] (IPV6_DROP_MEMBERSHIP): Define.

2016-06-06  Carlos O'Donell  <carlos@redhat.com>

	[BZ #20198]
	* stdlib/Makefile (tests): Add tst-quick_exit, and
	tst-thread-quick_exit.
	[ifeq ($(have-cxx-thread_local),yes)]
	(CFLAGS-tst-quick_exit.o): Use -stdc=c++11.
	(CFLAGS-tst-thread-quick_exit.o): Likewise.
	(LDLIBS-tst-quick_exit): Use -lstdc++ for C++ program.
	(LDLIBS-tst-thread-quick_exit): Likewise.
	[ifneq ($(have-cxx-thread_local),yes)]
	(tests-unsupported): Add tst-quick_exit, and tst-thread-quick_exit.
	* stdlib/exit.c (__run_exit_handlers): Add run_dtors argument.
	If run_dtors is true call __call_tls_dtors.
	(exit): Call __run_exit_handlers with run_dtors set to true.
	* stdlib/exit.h: Add run_dtors argument to __run_exit_handlers
	definition.
	* stdlib/quick_exit.c (quick_exit): Remove function.
	(__new_quick_exit): New function.
	[SHLIB_COMPAT(libc, GLIBC_2_10, GLIBC_2_24)] (__old_quick_exit): New
	function.
	* stdlib/tst-quick_exit.cc: New file.
	* stdlib/tst-thread-quick_exit.cc: New file.
	* stdlib/Versions: Add quick_exit@GLIBC_2.24.
	* sysdeps/arm/nacl/libc.abilist: Add 'GLIBC_2.24 quick_exit F'.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/arm/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/hppa/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/i386/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/nios2/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist: Likewise
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/sh/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: Likewise

2016-06-06  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S: Fix
	a typo in comments.

2016-06-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20213]
	* sysdeps/ieee754/dbl-64/e_asin.c (__ieee754_asin): Add NaN
	argument to itself.
	* math/libm-test.inc (asin_test_data): Add sNaN tests.

2016-06-06  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* misc/Makefile (CFLAGS-pwritev.c): New variable: add cancellation
	required flags.
	(CFLAGS-pwritev64.c): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwritev.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwritev64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/pwritev64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/pwritev.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/pwritev64.: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/syscalls.list (pwritev): Remove
	syscall from auto-generation.
	* sysdeps/unix/sysv/linux/pwritev.c: Rewrite implementation.
	[WORDSIZE == 64] (pwritev64): Remove macro.
	[!PWRITEV] (PWRITEV): Likewise.
	[!PWRITEV] (PWRITEV_REPLACEMENT): Likewise.
	[!PWRITEV] (PWRITE): Likewise.
	[!PWRITEV] (OFF_T): Likewise.
	[!__ASSUME_PWRITEV] (PWRITEV_REPLACEMENT): Likewise.
	(LO_HI_LONG): Remove macro.
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (pwritev): Add function.
	* sysdeps/unix/sysv/linux/pwritev64.c: Rewrite implementation.
	(PWRITEV): Remove macro.
	(PWRITEV_REPLACEMENTE): Likewise.
	(PWRITE): Likewise.
	(OFF_T): Likewise.
	(pwritev64): New function.
	* nptl/tst-cancel4.c (tf_writev): Add test.

	* misc/Makefile (CFLAGS-preadv.c): New variable: add cancellation
	required flags.
	(CFLAGS-preadv64.c): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/preadv.c: Remove file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/preadv64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/preadv64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/preadv.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/preadv64.: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/syscalls.list (preadv): Remove
	syscall from auto-generation.
	* sysdeps/unix/sysv/linux/preadv.c: Rewrite implementation.
	[WORDSIZE == 64] (preadv64): Remove macro.
	[!PREADV] (PREADV): Likewise.
	[!PREADV] (PREADV_REPLACEMENT): Likewise.
	[!PREADV] (PREAD): Likewise.
	[!PREADV] (OFF_T): Likewise.
	[!__ASSUME_PREADV] (PREADV_REPLACEMENT): Likewise.
	(LO_HI_LONG): Remove macro.
	[__WORDSIZE != 64 || __ASSUME_OFF_DIFF_OFF64] (preadv): Add function.
	* sysdeps/unix/sysv/linux/preadv64.c: Rewrite implementation.
	(PREADV): Remove macro.
	(PREADV_REPLACEMENTE): Likewise.
	(PREAD): Likewise.
	(OFF_T): Likewise.
	(preadv64): New function.
	* nptl/tst-cancel4.c (tf_preadv): Add test.

2016-06-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20212]
	* sysdeps/ieee754/dbl-64/e_asin.c (__ieee754_acos): Add NaN
	argument to itself.
	* math/libm-test.inc (acos_test_data): Add sNaN tests.

2016-06-06  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/strcasestr.S (__strcasestr):
	New symbol defined as libc_hidden_def.
	(strcasestr): Became a weak alias to __strcasestr.
	* sysdeps/powerpc/powerpc64/power8/strncpy.S: Handle memset calls
	according to multi-arch support.  Move __stpncpy hidden
	definition from here to...
	* sysdeps/powerpc/powerpc64/power8/stpncpy.S: ...here.  Add
	symbol stpncpy.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-power8.S: Undefine
	libc_hidden_builtin_def.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-power8.S: Specify which
	memset symbol to use when multi-arch support is available.

2016-06-06  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* dlfcn/tst-rec-dlopen.c: Include string.h.

2016-06-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* manual/install.texi: Remove mention of --without-tls
	* INSTALL: Regenerate.

2016-06-05  Florian Weimer  <fweimer@redhat.com>

	* dlfcn/tst-rec-dlopen.c (custom_malloc_hook, old_malloc_hook):
	Remove.
	(call_function, interposed_malloc_called): New variables.
	(malloc): New function.
	(do_test): Do not change malloc hooks.  Initialize malloc.  Set
	and clear call_function as needed.

2016-06-04  Andreas Schwab  <schwab@linux-m68k.org>

	* include/wchar.h (__wmemset): Use __typeof.

2016-06-03  Carlos O'Donell  <carlos@redhat.com>

	* include/wchar.h (__wmemset): Declare function without typeof.

2016-06-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20205]
	* sysdeps/i386/fpu/s_nextafterl.c (__nextafterl): Do not adjust
	exponent when incrementing negative subnormal with low mantissa
	word zero.
	* math/libm-test.inc (nextafter_test_data) [TEST_COND_intel96]:
	Add another test.

2016-06-03  Florian Weimer  <fweimer@redhat.com>

	* libio/wstrops.c (_IO_wstr_overflow, enlarge_userbuf): Use
	__wmemset instead of wmemset.

2016-06-02  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/unix/sysv/linux/bits/in.h [defined _UAPI_LINUX_IN6_H ||
	defined _UAPI_IPV6_H]: Define __USE_KERNEL_IPV6_DEFS to 1.
	[!(defined _UAPI_LINUX_IN6_H || defined _UAPI_IPV6_H)]: Define
	__USE_KERNEL_IPV6_DEFS to 0.
	* inet/netinet/in.h: Use '#if !__USE_KERNEL_IPV6_DEFS'.
	Update comment.

2016-06-01  Florian Weimer  <fweimer@redhat.com>

	[BZ #19861]
	Do not use IFUNC resolver with potentially unrelocated symbol.
	* nptl/pt-fork.c [HAVE_IFUNC]: Remove.
	(DEFINE_FORK): Remove macro and inline definition.
	(fork_alias): Renamed from fork_ifunc.
	(__fork_alias): Renamed from __fork_ifunc.

2016-05-30  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ 19653]
	* inet/if_index.c (__protocol_available): Delete #if 0'd code.
	* inet/ruserpass.c (ruserpass): Delete #if 0'd code.

2016-05-30  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* scripts/check-local-headers.sh (exclude): Add hurd/ihash.h, and
	include .*-.*/ in addition to .*-.*-.*/ (i.e. i386-gnu in addition to
	i386-linux-gnu).
	* sysdeps/mach/hurd/configure.ac (libc_cv_ld_gnu_indirect_function):
	Set to no.
	* sysdeps/mach/hurd/configure: Refresh.

2016-05-30  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #20178]
	* sysdeps/unix/sysv/linux/spawni.c (__spawni_child): Call _exit
	on failure instead of exit.

2016-05-30  Roland McGrath  <roland@hack.frob.com>

	[BZ #3629]
	* manual/string.texi (Copying Strings and Arrays): stpcpy is part
	of POSIX.1-2008.

2016-05-30  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/i386/____longjmp_chk.S (____longjmp_chk) [PIC]:
	  Use PLT entry for calling _hurd_self_sigstate.

2016-05-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cacheinfo.c (init_cacheinfo): Count number of
	available logical processors with SMT level type sharing L2
	cache for Intel processors.

2016-05-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20160]
	* sysdeps/powerpc/powerpc64/fpu/s_ceil.S (__ceil): Add NaN
	argument to itself before returning the result.
	* sysdeps/powerpc/powerpc64/fpu/s_ceilf.S (__ceilf): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floor.S (__floor): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floorf.S (__floorf): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyint.S (__nearbyint):
	Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintf.S (__nearbyintf):
	Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rint.S (__rint): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rintf.S (__rintf): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_round.S (__round): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_roundf.S (__roundf): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_trunc.S (__trunc): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_truncf.S (__truncf): Likewise.

	[BZ #20160]
	* sysdeps/powerpc/powerpc32/fpu/s_ceil.S (__ceil): Add NaN
	argument to itself before returning the result.
	* sysdeps/powerpc/powerpc32/fpu/s_ceilf.S (__ceilf): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_floor.S (__floor): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_floorf.S (__floorf): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S (__nearbyint):
	Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyintf.S (__nearbyintf):
	Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_rint.S (__rint): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_rintf.S (__rintf): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_round.S (__round): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_roundf.S (__roundf): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_trunc.S (__trunc): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_truncf.S (__truncf): Likewise.

2016-05-27  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* libm-test.inc: Replace usage of M_El with
	(lit_e): New macro.

2016-05-27  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* libm-test.inc: Replace usage of M_PI_4l with
	(lit_pi_4_d): New macro.

2016-05-27  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* libm-test.inc: Replace usage of M_PIl with
	(lit_pi): New macro.

2016-05-27  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* libm-test.inc: Replace usage of M_PI2l with
	(lit_pi_2_d): New macro.

	* math/test-double.h (LITM): New macro.
	* math/test-float.h (LITM): Likewise.
	* math/test-ldouble.h (LITM): Likewise.

2016-05-27  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* libm-test.inc (M_PI_34l): Rename to
	(lit_pi_3_m_4_d): New Macro.
	(M_PI_34_LOG10El): Rename to
	(lit_pi_3_m_4_ln10_m_d): New Macro.
	(M_PI2_LOG10El): Rename to
	(lit_pi_2_ln10_m_d):  New Macro.
	(M_PI4_LOG10El): Rename to
	(lit_pi_4_ln10_m_d):  New Macro.
	(M_PI_LOG10El): Rename to
	(lit_pi_ln10_d):  New Macro.

2016-05-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20157]
	* sysdeps/powerpc/powerpc32/fpu/s_fabsl.S (__fabsl): Use fsel to
	determine whether to negate low half if [_ARCH_PPCGR], and integer
	comparison otherwise.
	* sysdeps/powerpc/powerpc64/fpu/s_fabsl.S (__fabsl): Use fsel to
	determine whether to negate low half.

	* math/libm-test.inc (NO_TEST_INLINE_FLOAT): Remove macro.
	(NO_TEST_INLINE_DOUBLE): Likewise.
	(TEST_COND_x86_64): Likewise.
	(TEST_COND_x86): Likewise.
	(M_PI_6l): Likewise.

2016-05-27  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/libm-test.inc:
	(TEST_FLOAT): Change usage to TEST_COND_binary32.
	(TEST_DOUBLE): Change usage to TEST_COND_binary64.
	(TEST_LDOUBLE): Update usage to evaluate as true if
	the guarded tests match the property being tested.
	(LDBL_MAX_EXP): Change to MAX_EXP.
	(LDBL_MIN_EXP): Change to MIN_EXP.
	(LDBL_MANT_DIG): Change to MANT_DIG, except for
	nexttoward tests.

2016-05-27  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/libm-test.inc:
	(TYPE_DECIMAL_DIG): Redefine using type supplied PREFIX macro.
	(TYPE_MIN): Likewise.
	(TYPE_TRUE_MIN): Likewise.
	(TYPE_MAX): Likewise.
	(MIN_EXP): Likewise.
	(MAX_EXP): Likewise.
	(MANT_DIG): Likewise.

	(FSTR_MAX): New macro.
	(__CONCATX): Likewise.
	(QTYPE_STR): Likewise.
	(TEST_COND_binary32): Likewise.
	(TEST_COND_binary64): Likewise.
	(TEST_COND_binary128): Likewise.
	(TEST_COND_ibm128): Likewise.
	(TEST_COND_intel96): Likewise.
	(TEST_COND_m68k96): Likewise.

	(TEST_COND_flt_32): Redefine as equivalent format test macro.
	(TEST_COND_dbl_64): Likewise.
	(TEST_COND_ldbl_96_intel): Likewise.
	(TEST_COND_ldbl_96_m68k): Likewise.
	(TEST_COND_ldbl_128): Likewise.
	(TEST_COND_ldbl_128ibm): Likewise.

	(plus_zero): Redefine using LIT macro.
	(minus_zero): Likewise.
	(plus_infty): Redefine as (INF).
	(minux_infty): Redefine as (-INF).
	(max_value): Redefine as TYPE_MAX.
	(min_value): Redefine as TYPE_MIN.
	(min_subnorm_value): Redefine as TYPE_TRUE_MIN.

	(print_float): Refactor to use snprintf to convert FLOAT values
	to string. This brings it closer to dropin replacement of strtof
	for the TS 18661 defined types.
	(update_stats): Likewise.
	(print_complex_function_ulps): Likewise.
	(print_max_error): Likewise.
	(print_complex_max_error): Likewise.
	(check_float_internal): Likewise.

	* math/test-float.h (PREFIX): New macro.
	(LIT): Likewise.
	(TYPE_STR): Likewise.
	(FTOSTR): Likewise.

	* math/test-double.h (PREFIX): New macro.
	(LIT): Likewise.
	(TYPE_STR): Likewise.
	(FTOSTR): Likewise.

	* math/test-ldouble.h (PREFIX): New macro.
	(LIT): Likewise.
	(TYPE_STR): Likewise.
	(FTOSTR): Likewise.

2016-05-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20156]
	* sysdeps/ieee754/ldbl-128ibm/s_ceill.c (__ceill): Add high part
	to itself when zero or not finite.
	* sysdeps/ieee754/ldbl-128ibm/s_floorl.c (__floorl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_rintl.c (__rintl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_roundl.c (__roundl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_truncl.c (__truncl): Likewise.

2016-05-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20153]
	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c (__ieee754_sqrtl): Return
	x * x + x for infinities and NaNs.

	[BZ #20151]
	* sysdeps/ieee754/ldbl-128/e_j0l.c (__ieee754_j0l): Add NaN
	argument to itself before returning result.
	(__ieee754_y0l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_j1l): Likewise.
	(__ieee754_y1l).

	* math/libm-test.inc (acosh_test_data): Add sNaN tests.
	(atan_test_data): Likewise.
	(ceil_test_data): Likewise.
	(cos_test_data): Likewise.
	(cosh_test_data): Likewise.
	(erf_test_data): Likewise.
	(exp2_test_data): Likewise.
	(fabs_test_data): Likewise.
	(floor_test_data): Likewise.
	(ilogb_test_data): Likewise.
	(j0_test_data): Likewise.
	(j1_test_data): Likewise.
	(jn_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(lrint_test_data): Likewise.
	(llrint_test_data): Likewise.
	(logb_test_data): Likewise.
	(lround_test_data): Likewise.
	(llround_test_data): Likewise.
	(nearbyint_test_data): Likewise.
	(rint_test_data): Likewise.
	(round_test_data): Likewise.
	(sin_test_data): Likewise.
	(sincos_test_data): Likewise.
	(sinh_test_data): Likewise.
	(sqrt_test_data): Likewise.
	(tan_test_data): Likewise.
	(tanh_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(trunc_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.

	* math/libm-test.inc: Update comment about NaN testing.
	(TEST_SNAN): New macro.
	(snan_value): Likewise.
	(enable_test): Disable tests of sNaNs when SNAN_TESTS fails.
	(fpclassify_test_data): Add sNaN tests.
	(isfinite_test_data): Likewise.
	(isinf_test_data): Likewise.
	(isnan_test_data): Likewise.
	(isnormal_test_data): Likewise.
	(issignaling_test_data): Likewise.
	(signbit_test_data): Likewise.
	* math/gen-libm-test.pl (%beautify): Add snan_value.
	(show_exceptions): Add argument $test_snan.
	(parse_args): Handle snan_value as non-finite.  Update call to
	show_exceptions.
	* math/Makefile (libm-test-no-inline-cflags): Add
	-fsignaling-nans.

2016-05-26  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/Makefile (CFLAGS-oldrecvfrom.c): Remove rule.
	(CFLAGS-oldsendmsg.c): Add rule.
	* sysdeps/unix/sysv/linux/hppa/Versions [libc] (GLIBC_2.24):
	Correct recvmsg symbol name.
	* sysdeps/unix/sysv/linux/i386/Versions [libc] (GLIBC_2.24):
	Likewise.

2016-05-25  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/Makefile
	[$(subdir) = socket] (sysdep_routines): Add oldrecvmmsg and
	oldsendmmsg.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist: Add recvmmsg and
	sendmmsg.
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: Likewise.
	* sysdeps/sysv/linux/powerpc/powerpc64/libc-le.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/oldrecvmmsg.c: New file.
	* sysdeps/unix/sysv/linux/oldsendmmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c (__recvmmsg): Adjust msghdr
	iovlen and controllen fields to adjust to POSIX specification.
	* sysdeps/unix/sysv/linux/sendmmsg.c (__sendmmsg): Likewise.

	* conform/data/sys/socket.h-data (msghdr.msg_iovlen): Remove xfail-
	and change to correct expected type.
	(msghdr.msg_controllen): Likewise.
	(cmsghdr.cmsg_len): Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h (msghdr.msg_iovlen): Fix
	expected POSIX assumption about the size.
	(msghdr.msg_controllen): Likewise.
	(msghdr.__glibc_reserved1): Likewise.
	(msghdr.__glibc_reserved2): Likewise.
	(cmsghdr.cmsg_len): Likewise.
	(cmsghdr.__glibc_reserved1): Likewise.
	* nptl/Makefile (libpthread-routines): Remove ptw-recvmsg and ptw-sendmsg.
	Add ptw-oldrecvmsg and ptw-oldsendmsg.
	(CFLAGS-sendmsg.c): Remove rule.
	(CFLAGS-recvmsg.c): Likewise.
	(CFLAGS-oldsendmsg.c): Add rule.
	(CFLAGS-oldrecvmsg.c): Likewise.
	* sysdeps/unix/sysv/linux/alpha/Versions [libc] (GLIBC_2.24): Add
	recvmsg and sendmsg.
	* sysdeps/unix/sysv/linux/aarch64/Version [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/Versions [libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/hppa/Versions [libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/i386/Versions [libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/ia64/Versions [libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/m68k/Versions [libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/nios2/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions [libc]
	(GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/Versions [libc] (GLIBC_2.24): Likewise.
	* sysdeps/unix/sysv/linux/sparc/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Versions [libc] (GLIBC_2.24):
	Likewise.
	( sysdeps/unix/sysv/linux/tile/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/Versions [libc]
	(GLIBC_2.24): Likewise.
	( sysdeps/unix/sysv/linux/x86_64/64/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/x84_64/Versions [libc] (GLIBC_2.24):
	Likewise.
	* sysdeps/unix/sysv/linux/Makefile
	[$(subdir) = socket)] (sysdep_headers): Add oldrecvmsg and oldsendmsg.
	(CFLAGS-sendmsg.c): Add rule.
	(CFLAGS-recvmsg.c): Likewise.
	(CFLAGS-oldsendmsg.c): Likewise.
	(CFLAGS-oldrecvmsg.c): Likewise.
	* sysdeps/unix/sysv/linux/check_native.c (__check_native): Fix msghdr
	initialization.
	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Likewise.
	* sysdeps/unix/sysv/linux/ifaddrs.c (__netlink_request): Likewise.
	* sysdeps/unix/sysv/linux/oldrecvmsg.c: New file.
	* sysdeps/unix/sysv/linux/oldsendmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/recvmsg.c (__libc_recvmsg): Adjust msghdr
	iovlen and controllen fields to adjust to POSIX specification.
	* sysdeps/unix/sysv/linux/sendmsg.c (__libc_sendmsg): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist: New version and
	added recvmsg and sendmsg.
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist: Likewise
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist:
	Likewise.
	* sysdeps/unix/linux/powerpc/powerpc32/nofpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist: Likewise.
	* sysdepe/unix/sysv/linux/powerpc/powerpc64/libc.abilist: Likewise.
	Likewise.
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist: Likewise.
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: Likewise.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list (recvmsg): Remove
	from auto-generation.
	(sendmsg): Likewise.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (recvmsg): Likewise.
	(sendmsg): Likewise.
	* sysdeps/unix/sysv/linux/generic/syscalls.list (recvmsg): Likewise.
	(sendmsg): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (recvmsg): Likewise.
	(sendmsg): Likewise.
	* sysdeps/unix/sysv/linux/ia64/syscalls.list (recvmsg): Likewise.
	(sendmsg): Likewise.
	* sysdeps/unix/sysv/linux/mips/syscalls.list (recvmsg): Likewise.
	(sendmsg): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list (recvmsg):
	Likewise.
	(sendmsg): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list (recvmsg): Likewise.
	(sendmsg): Likewise.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SENDMSG_SYSCALL):
	Remove.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_RECVMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION < 0x040300] (__ASSUME_SENDMSG_SYSCALL):
	Undefine.
	[__LINUX_KERNEL_VERSION < 0x040300] (__ASSUME_RECVMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SENDMSG_SYSCALL): Define.
	(__ASSUME_RECVMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SENDMSG_SYSCALL):
	Remove.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_RECVMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION < 0x040300] (__ASSUME_SENDMSG_SYSCALL):
	Undefine.
	[__LINUX_KERNEL_VERSION < 0x040300] (__ASSUME_RECVMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SENDMSG_SYSCALL):
	Remove.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_RECVMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION < 0x040300] (__ASSUME_SENDMSG_SYSCALL):
	Undefine.
	[__LINUX_KERNEL_VERSION < 0x040300] (__ASSUME_RECVMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_SENDMSG_SYSCALL): Undefine.
	(__ASSUME_RECVMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	(__ASSUME_SENDMSG_SYSCALL): Likewise.
	(__ASSUME_RECVMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h
	(__ASSUME_SENDMSG_SYSCALL): Likewise.
	(__ASSUME_RECVMSG_SYSCALL): Likewise.

2016-05-25  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* stdlib/gen-tst-strtod-round.c: Add backslash to
	compile command in comment.
	(printfp): Remove the literal suffix, and define an infinite
	value as INF to avoid expansion clash with INFINITY.
	(round_str): Remove the literal suffix.
	(round_for_all): Likewise, remove the now duplicate ldbl-64
	entry, and remove some magic constants.

	* stdlib/tst-strtod-round.c: (TEST): Redefine to reduce
	duplication.  Remove duplicate dbl-64 and ldbl-64 entries.
	(ROUNDING_TESTS_long_double): Define as 0 for ibm128.
	(_CONCAT): New macro.
	(CONCAT): Likewise.
	(CHOOSE_ld): Likewise.
	(CHOOSE_f): Likewise.
	(CHOOSE_d): Likewise.
	(FTYPE_MEMBER): Likewise.
	(BOOL_MEMBER): Likewise.
	(STRUCT_FOREACH_FLOAT_FTYPE): Likewise.
	(STRUCT_FOREACH_FLOAT_BOOL): Likewise.
	(_XNTRY): Likewise.
	(XNTRY): Likewise.
	(_ENTRY): Likewise.
	(ENTRY): Likewise.
	(test_exactness): Generate members via macro.
	(test_results): Likewise.
	(test): Update members.
	(TEST): Redefine using new macros.
	(INF): New macro.
	(fetestmodes): New structure.
	(do_test): Refactor to be type generic.
	(test_in_one_mode): Refactor duplicate code into
	(GEN_ONE_TEST): New macro.

	* stdlib/tst-strtod-round-data.h: Regenerate.

	* stdlib/tst-strtod.h (GEN_TEST_STRTOD_FOREACH):
	Extend to pass additional arbitrary parameters to
	generators.

2016-05-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15479]
	* sysdeps/powerpc/powerpc64/fpu/s_ceil.S (__ceil): Move save of
	floating-point state after first floating-point operation on
	input.  Restore full floating-point state instead of just rounding
	mode.
	* sysdeps/powerpc/powerpc64/fpu/s_ceilf.S (__ceilf): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floor.S (__floor): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floorf.S (__floorf): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_trunc.S (__trunc): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_truncf.S (__truncf): Likewise.

	[BZ #15479]
	* sysdeps/powerpc/powerpc32/fpu/s_ceil.S (__ceil): Move save of
	floating-point state after first floating-point operation on
	input.  Restore full floating-point state instead of just rounding
	mode.
	* sysdeps/powerpc/powerpc32/fpu/s_ceilf.S (__ceilf): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_floor.S (__floor): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_floorf.S (__floorf): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_trunc.S (__trunc): Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_truncf.S (__truncf): Likewise.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #19727]
	* iconvdata/utf-16.c (BODY): Report an error if first word is not a
	valid high surrogate.
	* iconvdata/utf-32.c (BODY): Report an error if the value is in range
	of an utf16 surrogate.
	* iconv/gconv_simple.c (BODY): Likewise.
	* iconvdata/bug-iconv12.c: New file.
	* iconvdata/Makefile (tests): Add bug-iconv12.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #19726]
	* iconv/gconv_simple.c (ucs4le_internal_loop): Update inptrp and
	outptrp in case of an illegal input.
	* iconv/tst-iconv6.c: New file.
	* iconv/Makefile (tests): Add tst-iconv6.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/utf16-utf32-z9.c: Disable cu42 instruction and report
	an error in case of a value in range of an utf16 low surrogate.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/utf8-utf32-z9.c: Disable cu41 instruction and report
	an error in case of a value in range of an utf16 low surrogate.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/Makefile (iconvdata-subdirectory):
	Move to ...
	* sysdeps/s390/Makefile: ... here.
	* sysdeps/s390/s390-64/iso-8859-1_cp037_z900.c: Move to ...
	* sysdeps/s390/iso-8859-1_cp037_z900.c: ... here.
	(BRANCH_ON_COUNT): New define.
	(TR_LOOP): Use BRANCH_ON_COUNT instead of brctg.
	* sysdeps/s390/s390-64/utf16-utf32-z9.c: Move to ...
	* sysdeps/s390/utf16-utf32-z9.c: ... here and adjust to
	run on s390-32, too.
	* sysdeps/s390/s390-64/utf8-utf16-z9.c: Move to ...
	* sysdeps/s390/utf8-utf16-z9.c: ... here and adjust to
	run on s390-32, too.
	* sysdeps/s390/s390-64/utf8-utf32-z9.c: Move to ...
	* sysdeps/s390/utf8-utf32-z9.c: ... here and adjust to
	run on s390-32, too.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/utf16-utf32-z9.c: Use ifunc to select c,
	etf3eh or new vector loop-variant.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/utf8-utf16-z9.c: Use ifunc to select c,
	etf3eh or new vector loop-variant.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/utf8-utf32-z9.c: Use ifunc to select c, etf3eh
	or new vector loop-variant.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/iso-8859-1_cp037_z900.c (TROO_LOOP):
	Rename to TR_LOOP and usage of tr instead of troo instruction.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/multiarch/gconv_simple.c: New File.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add gconv_simple.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/multiarch/8bit-generic.c: New File.
	* sysdeps/s390/multiarch/gen-8bit.sh: New File.
	* sysdeps/s390/multiarch/Makefile (generate-8bit-table):
	New override define.
	* sysdeps/s390/multiarch/iconv/skeleton.c: Likewise.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* config.h.in (HAVE_S390_VX_GCC_SUPPORT): New macro undefine.
	* sysdeps/s390/configure.ac: Add test for S390 vector register
	support in gcc.
	* sysdeps/s390/configure: Regenerated.

2016-05-25  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* iconvdata/Makefile ($(inst_gconvdir)/gconv-modules):
	Install file from $(objpfx)gconv-modules.
	($(objpfx)gconv-modules): Concatenate architecture specific file
	in variable sysdeps-gconv-modules and gconv-modules in src dir.
	* sysdeps/s390/gconv-modules: New file.
	* sysdeps/s390/s390-64/Makefile: ($(inst_gconvdir)/gconv-modules):
	Deleted.
	($(objpfx)gconv-modules-s390): Deleted.
	(sysdeps-gconv-modules): New variable.

2016-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15479]
	* sysdeps/x86_64/fpu/multiarch/s_ceil.S (__ceil_sse41): Set bit 3
	of immediate operand to rounding instruction.
	* sysdeps/x86_64/fpu/multiarch/s_ceilf.S (__ceilf_sse41):
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_floor.S (__floor_sse41):
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_floorf.S (__floorf_sse41):
	Likewise.

2016-05-24  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/libm-test.inc (MIN_EXP): Directly define as
	(DBL|LDBL|FLT)_MIN_EXP and fixup usage.

2016-05-24  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* math/libm-test.inc (MANT_DIG): Directly define as
	(DBL|LDBL|FLT)_MANT_DIG and fixup usage.

2016-05-24  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* stdlib/gen-tst-strtod-round.c (main):
	  Change usage to more closely match the generated
	  output.  Add usage and compilation instructions.
	  (string_to_fp): Add and use FILE* parameter as
	  output target.
	  (print_fp): Likewise.
	  (round_str): Likewise.
	  (round_for_all): Likewise.
	* stdlib/tst-strtod-round.c (tests): Move into
	* stdlib/tst-strtod-round-data.h: New file.

2016-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15479]
	* sysdeps/ieee754/dbl-64/s_round.c (huge): Remove variable.
	(__round): Do not force "inexact" exception.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c (huge): Remove
	variable.
	(__round): Do not force "inexact" exception.
	* sysdeps/ieee754/flt-32/s_roundf.c (huge): Remove variable.
	(__roundf): Do not force "inexact" exception.
	* sysdeps/ieee754/ldbl-128/s_roundl.c (huge): Remove variable.
	(__roundl): Do not force "inexact" exception.
	* sysdeps/ieee754/ldbl-96/s_roundl.c (huge): Remove variable.
	(__roundl): Do not force "inexact" exception.
	* math/libm-test.inc (round_test_data): Do not allow spurious
	"inexact" exceptions.

	[BZ #15479]
	* sysdeps/ieee754/dbl-64/s_floor.c: Do not mention "inexact"
	exception in comment.
	(huge): Remove variable.
	(__floor): Do not force "inexact" exception.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Do not mention
	"inexact" exception in comment.
	(huge): Remove variable.
	(__floor): Do not force "inexact" exception.
	* sysdeps/ieee754/flt-32/s_floorf.c: Do not mention "inexact"
	exception in comment.
	(huge): Remove variable.
	(__floorf): Do not force "inexact" exception.
	* sysdeps/ieee754/ldbl-128/s_floorl.c: Do not mention "inexact"
	exception in comment.
	(huge): Remove variable.
	(__floorl): Do not force "inexact" exception.

	[BZ #15479]
	* sysdeps/ieee754/dbl-64/s_ceil.c: Do not mention "inexact"
	exception in comment.
	(huge): Remove variable.
	(__ceil): Do not force "inexact" exception.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Do not mention
	"inexact" exception in comment.
	(huge): Remove variable.
	(__ceil): Do not force "inexact" exception.
	* sysdeps/ieee754/flt-32/s_ceilf.c (huge): Remove variable.
	(__ceilf): Do not force "inexact" exception.
	* sysdeps/ieee754/ldbl-128/s_ceill.c: Do not mention "inexact"
	exception in comment.
	(huge): Remove variable.
	(__ceill): Do not force "inexact" exception.

2016-05-24  H.J. Lu  <hongjiu.lu@intel.com>

	* config.h.in (BIND_NOW): New.
	* configure.ac (BIND_NOW): New.  Defined for --enable-bind-now.
	* configure: Regenerated.
	* sysdeps/x86_64/sysdep.h (JUMPTARGET)[BIND_NOW]: Defined to
	indirect branch via the GOT slot.

2016-05-24  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #19765]
	* sysdeps/s390/mempcpy.S: New File.
	* sysdeps/s390/multiarch/mempcpy.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add mempcpy.
	* sysdeps/s390/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Add mempcpy variants.
	* sysdeps/s390/s390-32/memcpy.S: Add mempcpy entry point.
	(memcpy): Adjust to be usable from mempcpy entry point.
	(__memcpy_mvcle): Likewise.
	* sysdeps/s390/s390-64/memcpy.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memcpy-s390.S: Add entry points
	____mempcpy_z196, ____mempcpy_z10 and add __GI_ symbols for mempcpy.
	(__memcpy_z196): Adjust to be usable from mempcpy entry point.
	(__memcpy_z10): Likewise.
	* sysdeps/s390/s390-64/multiarch/memcpy-s390x.S: Likewise.

2016-05-24  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/multiarch/ifunc-resolve.h (s390_libc_ifunc):
	Remove __GI_ symbol.
	* sysdeps/s390/s390-32/multiarch/memcmp-s390.S: Add __GI_memcmp symbol.
	* sysdeps/s390/s390-64/multiarch/memcmp-s390x.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memcpy-s390.S: Add __GI_memcpy symbol.
	* sysdeps/s390/s390-64/multiarch/memcpy-s390x.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memset-s390.S: Add __GI_memset symbol.
	* sysdeps/s390/s390-64/multiarch/memset-s390x.S: Likewise.

2016-05-24  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/memcpy.S (memcpy):
	Use cghi instead of chi to compare 64bit value.

2016-05-24  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/memcpy.S (memcpy):
	Jump to 1MB check before executing mvc-loop.

2016-05-24  Florian Weimer  <fweimer@redhat.com>

	[BZ #6527]
	* malloc/malloc.c (MALLOC_ALIGNMENT): Use correct alignment
	unconditionally.
	* malloc/hooks.c (MALLOC_STATE_VERSION): Increase state version.

2016-05-23  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* stdlib/tst-strtod6.c (do_test): Use new type generic
	invocation of the test function.
	(test): Refactor into ...
	(TEST_STRTOD): New macro base function.

2016-05-23  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* stdlib/bug-strtod2.c (do_test): Refactor strtod usage into ...
	(TEST_STRTOD): New macro.
	(TEST_FUNCTION): Redefine to use STRTOD_TEST_FOREACH

2016-05-23  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* stdlib/tst-strtod6.c (do_test): Use new type generic
	invocation of the test function.
	(test): Refactor into ...
	(TEST_STRTOD): New macro base function.

2016-05-23  Florian Weimer  <fweimer@redhat.com>

	CVE-2016-4429
	[BZ #20112]
	* sunrpc/clnt_udp.c (clntudp_call): Use malloc/free for the error
	payload.

2016-05-23  Florian Weimer  <fweimer@redhat.com>

	[BZ #20111]
	* bits/sockaddr.h (_SS_SIZE): Define.
	* bits/socket.h (_SS_SIZE): Remove.
	(_SS_PADSIZE): Adjust to account for all padding.
	(struct sockaddr_storage): Update comment.  Avoid implicit
	padding.
	* sysdeps/mach/hurd/bits/socket.h (_SS_SIZE): Remove.
	(_SS_PADSIZE): Adjust to account for all padding.
	(struct sockaddr_storage): Update comment.  Avoid implicit
	padding.
	* sysdeps/unix/bsd/bits/sockaddr.h (_SS_SIZE): Define.
	* sysdeps/unix/sysv/linux/bits/socket.h (_SS_SIZE): Remove.
	(_SS_PADSIZE): Adjust to account for all padding.
	(struct sockaddr_storage): Update comment.  Avoid implicit
	padding.
	* sysdeps/unix/sysv/linux/m68k/bits/sockaddr.h: New file.
	__SS_SIZE is 126 in this version.
	* inet/tst-sockaddr.c: New file.
	* inet/Makefile (tests): Add tst-sockaddr.c
	(tst-sockaddr.c): Compile with non-strict aliasing.

2016-05-23  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/limits.h-data (CHARCLASS_NAME_MAX): Also expect for
	[XPG3 || XPG4].
	(NL_ARGMAX): Also expect for [XPG3].
	(NL_LANGMAX): Likewise.
	(NL_MSGMAX): Likewise.
	(NL_NMAX): Likewise.
	(NL_SETMAX): Likewise.
	(NL_TEXTMAX): Likewise.
	(NZERO): Likewise.
	(TMP_MAX): Likewise.
	* conform/Makefile (test-xfail-XPG3/limits.h/conform): Remove
	variable.

	* sysdeps/unix/sysv/linux/bits/socket.h (PF_KCM): New macro.
	(PF_MAX): Update value.
	(AF_KCM): New macro.
	(SOL_NETBEUI): Likewise.
	(SOL_LLC): Likewise.
	(SOL_DCCP): Likewise.
	(SOL_NETLINK): Likewise.
	(SOL_TIPC): Likewise.
	(SOL_RXRPC): Likewise.
	(SOL_PPPOL2TP): Likewise.
	(SOL_BLUETOOTH): Likewise.
	(SOL_PNPIPE): Likewise.
	(SOL_RDS): Likewise.
	(SOL_IUCV): Likewise.
	(SOL_CAIF): Likewise.
	(SOL_ALG): Likewise.
	(SOL_NFC): Likewise.
	(SOL_KCM): Likewise.
	(MSG_BATCH): New enum value and macro.

2016-05-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18185]
	* sysdeps/x86/cacheinfo.c (init_cacheinfo): Don't limit threads
	sharing L2 cache to 2 for Knights Landing.

2016-05-20  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/ftw.h-data (struct FTW): Do not expect for [XPG3].
	(FTW_DP): Do not expect for [XPG3 || XPG4].
	(FTW_SL): Do not expect for [XPG3].
	(FTW_SLN): Likewise.
	(FTW_PHYS): Likewise.
	(FTW_MOUNT): Likewise.
	(FTW_DEPTH): Likewise.
	(FTW_CHDIR): Likewise.
	(nftw): Likewise.
	* conform/Makefile (test-xfail-XPG3/ftw.h/conform): Remove
	variable.

2016-05-19  Rical Jasan  <ricaljasan@pacific.net>

	* manual/errno.texi: Fix various typos & grammar errors.

2016-05-19  Rical Jasan  <ricaljasan@pacific.net>

	* manual/intro.texi: Fix duplicated typo.

2016-05-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13304]
	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c: Include <fenv.h>,
	<float.h>, <math_private.h> and <stdlib.h>.
	(add_split): New function.
	(mul_split): Likewise.
	(ext_val): New typedef.
	(store_ext_val): New function.
	(mul_ext_val): New function.
	(compare): New function.
	(add_split_ext): New function.
	(__fmal): After checking for Inf, NaN and zero, compute result as
	an exact sum of scaled double values in round-to-nearest before
	adding those up and adjusting for other rounding modes.
	* math/auto-libm-test-in: Remove xfail-rounding:ldbl-128ibm from
	tests of fma.
	* math/auto-libm-test-out: Regenerated.

2016-05-19  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20119]
	* sysdeps/x86/cacheinfo.c (init_cacheinfo): Correct Intel
	processor level type mask for CPUID with EAX == 11.

2016-05-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cacheinfo.c (init_cacheinfo): Skip counting
	logical threads if the HTT bit is 0.
	* sysdeps/x86/cpu-features.h (bit_cpu_HTT): New.
	(index_cpu_HTT): Likewise.
	(reg_HTT): Likewise.

2016-05-19  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20115]
	* sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S (__memset):
	Remove alignments on jump targets.

2016-05-19  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/pwd.h-data (endpwent): Do not expect for [XPG3].
	(getpwent): Likewise.
	(setpwent): Likewise.
	* conform/Makefile (test-xfail-XPG3/pwd.h/conform): Remove
	variable.

	* conform/data/search.h-data (insque): Do not expect for [XPG3].
	(remque): Likewise.
	* conform/Makefile (test-xfail-XPG3/search.h/conform): Remove
	variable.

2016-05-18  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc: Update comment not to refer to signs of NaNs
	not being tested.

2016-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S
	(__condvar_cleanup2): Remove JUMPTARGET from  _Unwind_Resume
	call.
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S
	(__condvar_cleanup1): Likewise.

2016-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/cancellation.S (PTHREAD_UNWIND):
	New
	(__pthread_unwind): Renamed to ...
	(PTHREAD_UNWIND): This.
	(__pthread_enable_asynccancel): Replace
	JUMPTARGET(__pthread_unwind) with PTHREAD_UNWIND.

2016-05-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/sched.h [__USE_GNU]
	(CLONE_NEWCGROUP): New macro.

	* sysdeps/unix/sysv/linux/sys/quota.h [_LINUX_QUOTA_VERSION >= 2]
	(Q_GETNEXTQUOTA): New macro.

2016-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19907]
	* benchtests/bench-memcpy.c (do_one_test): Clear the destination
	buffer updated by the previous run.
	* string/test-memcpy.c (do_one_test): Likewise.
	* benchtests/bench-memmove.c (do_one_test): Add a comment.
	* string/test-memmove.c (do_one_test): Likewise.

2016-05-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20094]
	* stdlib/stdlib.h (grantpt): Declare if [__USE_XOPEN_EXTENDED],
	not [__USE_XOPEN].
	(unlockpt): Likewise.
	(ptsname): Likewise.
	* conform/Makefile (test-xfail-XPG3/stdlib.h/conform): Remove
	variable.

	[BZ #20076]
	* io/sys/stat.h (S_IFSOCK): Define for [__USE_XOPEN_EXTENDED]
	instead of [__USE_UNIX98].
	(S_ISSOCK): Likewise.
	* conform/Makefile (test-xfail-XPG4/sys/stat.h/conform): Remove
	variable.

	[BZ #20074]
	* stdlib/stdlib.h (rand_r): Declare if [__USE_POSIX199506], not if
	[__USE_POSIX].
	* conform/Makefile (test-xfail-XPG4/stdlib.h/conform): Remove
	variable.

	[BZ #20051]
	* posix/unistd.h [__USE_XOPEN_EXTENDED && !__USE_UNIX98]
	(ttyslot): Do not declare.
	* stdlib/stdlib.h [__USE_XOPEN_EXTENDED && !__USE_XOPEN2K]
	(ttyslot): New prototype.
	* conform/Makefile (test-xfail-XPG4/unistd.h/conform): Remove
	variable.
	(test-xfail-UNIX98/stdlib.h/conform): Likewise.

2016-05-17  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/tst-cancel17.c (do_test): Wait for finishing aio_read(&a).

2016-05-13  Florian Weimer  <fweimer@redhat.com>

	Fix race condition in tst-mallocfork2, use fewer resources.
	* malloc/tst-mallocfork2.c (sigusr1_handler): Do not send SIGSTOP
	to current process group.
	(signal_sender): Yield in the non-sleeping case.

2016-05-13  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/stdlib.h-data (a64l): Do not expect for [XPG3].
	(ecvt): Likewise.
	(fcvt): Likewise.
	(gcvt): Likewise.
	(getsubopt): Likewise.
	(grantpt): Likewise.
	(initstate): Likewise.
	(l64a): Likewise.
	(mktemp): Likewise.
	(mkstemp): Likewise.
	(ptsname): Likewise.
	(random): Likewise.
	(realpath): Likewise.
	(setstate): Likewise.
	(srandom): Likewise.
	(ttyslot): Likewise.
	(unlockpt): Likewise.
	(valloc): Likewise.

	* conform/data/string.h-data (strdup): Do not expect for [XPG3].
	* conform/Makefile (test-xfail-XPG3/string.h/conform): Remove
	variable.

2016-05-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #20072]
	* sysdeps/i386/dl-machine.h (dl_platform_init): Call
	init_cpu_features only if SHARED is defined.
	* sysdeps/x86_64/dl-machine.h (dl_platform_init): Likewise.

2016-05-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cacheinfo.c (init_cacheinfo): Check and support
	non-inclusive caches on Intel processors.

2016-05-13  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc.c (dumped_main_arena_start)
	(dumped_main_arena_end): New variables.
	(DUMPED_MAIN_ARENA_CHUNK): New macro.
	(do_check_chunk): Skip dumped fake mmapped chunks.
	(munmap_chunk): Likewise.
	(__libc_free): Do not adjust statistics for fake mmapped chunks.
	(__libc_realloc): Adjust hardening check.  Always copy dumped fake
	mmapped chunks.
	* malloc/hooks.c (__malloc_set_state): Do not update main_arena.
	Mark dumped chunks as using mmap.  Update dumped_main_arena_start
	and dumped_main_arena_end to cover the dumped heap.

2016-05-12  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/time.h-data (getdate_err): Do not expect for
	[XPG3].
	(getdate): Likewise.
	* conform/Makefile (test-xfail-XPG3/time.h/conform): Remove
	variable.

	* conform/data/unistd.h-data (F_LOCK): Do not expect for [XPG3].
	(F_ULOCK): Likewise.
	(F_TEST): Likewise.
	(F_TLOCK): Likewise.
	(useconds_t): Likewise.
	(intptr_t): Do not expect for [XPG3] or [XPG4].
	(brk): Do not expect for [XPG3]
	(fchown): Likewise.
	(fchdir): Likewise.
	(ftruncate): Likewise.
	(getdtablesize): Likewise.
	(gethostid): Likewise.
	(getpagesize): Likewise.
	(getpgid): Likewise.
	(getsid): Likewise.
	(getwd): Likewise.
	(lchown): Likewise.
	(lockf): Likewise.
	(readlink): Likewise.
	(sbrk): Likewise.
	(setpgrp): Likewise.
	(setregid): Likewise.
	(setreuid): Likewise.
	(symlink): Likewise.
	(sync): Likewise.
	(truncate): Likewise.
	(ualarm): Likewise.
	(usleep): Likewise.
	(vfork): Likewise.
	* conform/Makefile (test-xfail-XPG3/unistd.h/conform): Remove
	variable.

	[BZ #20054]
	* posix/unistd.h (gethostname): Declare if [__USE_XOPEN_EXTENDED],
	not [__USE_UNIX98].
	* conform/data/unistd.h-data (gethostname): Do not expect for
	[XPG3].

	* conform/data/fcntl.h-data [!POSIX] (S_IFMT): Do not expect.
	[!POSIX] (S_IFBLK): Likewise.
	[!POSIX] (S_IFCHR): Likewise.
	[!POSIX] (S_IFIFO): Likewise.
	[!POSIX] (S_IFREG): Likewise.
	[!POSIX] (S_IFDIR): Likewise.
	[!POSIX] (S_IFLNK): Likewise.
	[!POSIX] (S_IFSOCK): Likewise.
	* conform/Makefile (test-xfail-XPG3/fcntl.h/conform): Remove
	variable.
	(test-xfail-XPG4/fcntl.h/conform): Likewise.

2016-05-12  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/memset.S (__memset):
	Rewrite of optimized memset.

2016-05-12  Florian Weimer  <fweimer@redhat.com>

	[BZ #19703]
	Partially async-signal-safe fork for single-threaded processes.
	* sysdeps/nptl/fork.c (__libc_fork): Introduce multiple_threads
	variable.  Do not acquire and reset/release malloc and libio locks
	in single-threaded processes.
	* malloc/tst-mallocfork2.c: New file.
	* malloc/Makefile (tests): Add it.

2016-05-12  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet_serv): Add tmpbuf
	argument.  Use scratch buffer instead of extend_alloca.
	(gethosts): Use scratch buffer instead of extend_alloca.
	(gaih_inet): Add tmpbuf argument.  Use scratch buffer instead of
	extend_alloca.
	(getaddrinfo): Allocate scratch buffer and pass it to gaih_inet.

2016-05-11  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20055]
	* termios/termios.h (pid_t): Define for [__USE_XOPEN_EXTENDED]
	instead of [__USE_UNIX98].
	(tcgetsid): Declare for [__USE_XOPEN_EXTENDED] instead of
	[__USE_UNIX98].
	* conform/data/termios.h-data (tcgetsid): Do not expect for
	[XPG3].
	* conform/Makefile (test-xfail-XPG3/termios.h/conform): Remove
	variable.
	(test-xfail-XPG4/termios.h/conform): Likewise.

2016-05-11  Florian Weimer  <fweimer@redhat.com>

	Do not use mcheck in localedef.
	* locale/programs/localedef.c (turn_on_mcheck)
	(__malloc_initialize_hook): Remove.

2016-05-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/Makefile (pic-ccflag): Remove.
	* sysdeps/s390/s390-64/Makefile: Likewise.

2016-05-11  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (gen-as-const-headers):
	Remove ifunc-defines.sym.
	* sysdeps/x86_64/multiarch/Makefile (gen-as-const-headers):
	Likewise.
	* sysdeps/i386/i686/multiarch/ifunc-defines.sym: Removed.
	* sysdeps/x86/rtld-global-offsets.sym: Likewise.
	* sysdeps/x86_64/multiarch/ifunc-defines.sym: Likewise.
	* sysdeps/x86/Makefile (gen-as-const-headers): Remove
	rtld-global-offsets.sym.
	* sysdeps/x86_64/multiarch/ifunc-defines.sym: Merged with ...
	* sysdeps/x86/cpu-features-offsets.sym: This.
	* sysdeps/x86/cpu-features.h: Include <cpu-features-offsets.h>
	instead of <ifunc-defines.h> and <rtld-global-offsets.h>.

2016-05-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20073]
	* io/sys/stat.h (fchmod): Declare for
	[__USE_POSIX199309 || __USE_XOPEN_EXTENDED], not [__USE_POSIX].
	* conform/Makefile (test-xfail-XPG3/sys/stat.h/conform): Remove
	variable.

	* conform/data/sys/stat.h-data [XPG3] (S_IFLNK): Do not expect.
	[XPG3] (S_IFSOCK): Likewise.
	[XPG3] (S_ISVTX): Likewise.
	[XPG3] (S_ISLNK): Likewise.
	[XPG3] (S_ISSOCK): Likewise.
	[XPG3] (fchmod): Likewise.
	[XPG3] (lstat): Likewise.
	[XPG3] (mknod): Likewise.

	* conform/data/sys/stat.h-data (st_blksize): Do not expect for
	[XPG3].  Expect type long and XFAIL for [XPG4].
	(st_blocks): Likewise.

	[BZ #20044]
	* posix/unistd.h [__USE_UNIX98 && !__USE_XOPEN2K]
	(pthread_atfork): New prototype.
	* conform/Makefile (test-xfail-UNIX98/unistd.h/conform): Remove
	variable.

	[BZ #20043]
	* posix/unistd.h [__USE_XOPEN && !__USE_XOPEN2K] (cuserid): New
	prototype.

2016-05-10  Florian Weimer  <fweimer@redhat.com>

	[BZ #20017]
	* resolv/res_debug.c (p_secstodate): Call __gmtime_r instead of
	gmtime.

2016-05-10  Florian Weimer  <fweimer@redhat.com>

	[BZ #19994]
	* sysdeps/posix/getaddrinfo.c (gethosts): Restore RES_USE_INET6
	flag in _res.options.

2016-05-09  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/sys/types.h-data (blkcnt_t): Do not expect for
	[XPG3 || XPG4].
	(blksize_t): Likewise.
	(clockid_t): Likewise.
	* conform/Makefile (test-xfail-XPG3/sys/types.h/conform): Remove
	variable.
	(test-xfail-XPG4/sys/types.h/conform): Likewise.

2016-05-09  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/init-first.c:
	Add VDSO_SYMBOL(getcpu).
	(_libc_vdso_platform_setup): Initialize VDSO_SYMBOL(getcpu).
	* sysdeps/unix/sysv/linux/s390/libc-vdso.h:
	Add VDSO_SYMBOL(getcpu).
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h:
	New define HAVE_GETCPU_VSYSCALL.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.

2016-05-08  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/cacheinfo.c: Include <sysdeps/x86/cacheinfo.c>
	instead of <sysdeps/x86_64/cacheinfo.c>.
	* sysdeps/x86_64/cacheinfo.c: Moved to ...
	* sysdeps/x86/cacheinfo.c: Here.

2016-05-04  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc-internal.h: Adjust header file guard.

2016-05-04  Florian Weimer  <fweimer@redhat.com>

	[BZ #19787]
	* inet/getnameinfo.c (check_sprintf_result): New function.
	(CHECKED_SNPRINTF): New macro.
	(gni_host_inet_numeric): Use CHECKED_SNPRINTF to write the scope
	to the host buffer.
	(gni_host_local): Use checked_copy to copy the host name.
	(gni_serv_inet): Use CHECKED_SNPRINTF to write the service name.
	(gni_serv_local): Use checked_copy to copy the service name.
	(getnameinfo): Remove unnecessary truncation of result buffers.

2016-05-04  Florian Weimer  <fweimer@redhat.com>

	* inet/getnameinfo.c (gni_host_inet_numeric): Return EAI_OVERFLOW
	in case of inet_ntop failure.

2016-05-04  Florian Weimer  <fweimer@redhat.com>

	* inet/getnameinfo.c (gni_host_inet_name): Use temporaries to
	avoid long lines.
	(gni_host_inet_numeric): Likewise.  Reduce scope of local
	variables.
	(gni_host_inet, gni_host_local): Add comment.
	(gni_host): Add comment.  Use temporary to avoid long lines.

2016-05-04  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/strncpy.S: Fix use of condition
	registers specifiers where general purpose registers specifiers should
	have been used.

2016-05-04  Florian Weimer  <fweimer@redhat.com>

	[BZ #19779]
	CVE-2016-1234
	Avoid copying names of directory entries.
	* posix/glob.c (DIRENT_MUST_BE, DIRENT_MIGHT_BE_SYMLINK)
	(DIRENT_MIGHT_BE_DIR, CONVERT_D_INO, CONVERT_D_TYPE)
	(CONVERT_DIRENT_DIRENT64, REAL_DIR_ENTRY): Remove macros.
	(struct readdir_result): New type.
	(D_TYPE_TO_RESULT, D_INO_TO_RESULT, READDIR_RESULT_INITIALIZER)
	(GL_READDIR): New macros.
	(readdir_result_might_be_symlink, readdir_result_might_be_dir)
	(convert_dirent, convert_dirent64): New functions.
	(glob_in_dir): Use struct readdir_result.  Call convert_dirent or
	convert_dirent64.  Adjust references to the readdir result.
	* sysdeps/unix/sysv/linux/i386/glob64.c:
	(convert_dirent, GL_READDIR): Redefine for second file inclusion.
	* posix/bug-glob2.c (LONG_NAME): Define.
	(filesystem): Add LONG_NAME.
	(my_DIR): Increase the size of room_for_dirent.

2016-05-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20041]
	* misc/sys/select.h (__need_timespec): Only define if
	[__USE_XOPEN2K].
	* conform/Makefile (test-xfail-XPG4/sys/time.h/conform): Remove
	variable.
	(test-xfail-XPG4/utmpx.h/conform): Likewise.
	(test-xfail-UNIX98/sys/time.h/conform): Likewise.
	(test-xfail-UNIX98/utmpx.h/conform): Likewise.

2016-05-03  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>
	    Segher Boessenkool  <segher@gcc.gnu.org>

	[BZ #20004]
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/swapcontext.S:
	(__novec_swapcontext): Add missing load.

2016-05-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20023]
	* io/fcntl.h [__USE_XOPEN && !__USE_XOPEN2K8]: Do not include
	<time.h>.
	* conform/Makefile (test-xfail-UNIX98/fcntl.h/conform): Remove
	variable.
	(test-xfail-XOPEN2K/fcntl.h/conform): Likewise.

2016-05-02  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S (__clone): Fix
	flags CLONE_VM compare.

2016-05-02  Florian Weimer  <fweimer@redhat.com>

	[BZ #20031]
	* hesiod/hesiod.c (get_txt_records): Return error if TXT record is
	completely empty.

2016-05-02  Florian Weimer  <fweimer@redhat.com>

	[BZ #19573]
	* hesiod/Makefile (libnss_hesiod-routines): Remove hesiod-init.
	* hesiod/nss_hesiod/hesiod-init.c: Remove file.
	* hesiod/nss_hesiod/nss_hesiod.h: Likewise.
	* hesiod/hesiod.h (__hesiod_res_get, __hesiod_res_set): Remove.
	(hesiod_init, hesiod_end, hesiod_to_bind, hesiod_resolve)
	(hesiod_free_list): Mark as hidden.
	* hesiod/hesiod_p (struct hesiod_p): Remove res, free_res,
	res_set, res_get.
	* hesiod/hesiod.c: Remove unnecessary forward declarations.
	(init, __hesiod_res_get, __hesiod_res_set): Remove.
	(hesiod_init): Remove obsolete res_ninit call.
	(hesiod_end): Do not free resolver state.  Do not invoke callback.
	(hesiod_bind): Do not call init.
	(get_txt_records): Use res_mkquery, res_send instead of
	res_nmkquery, res_nsend.
	* hesiod/nss_hesiod/hesiod-grp.c (lookup): Call hesiod_init
	instead of _nss_hesiod_init.
	(_nss_hesiod_initgroups_dyn): Likewise.
	* hesiod/nss_hesiod/hesiod-proto.c (lookup): Likewise.
	* hesiod/nss_hesiod/hesiod-pwd.c (lookup): Likewise.
	* hesiod/nss_hesiod/hesiod-service.c (lookup): Likewise.

2016-05-02  Florian Weimer  <fweimer@redhat.com>

	* hesiod/hesiod_p.h (DEF_RHS): Remove.
	* hesiod/hesiod.c (hesiod_init): Remove code for handling DEF_RHS.

2016-05-02  Florian Weimer  <fweimer@redhat.com>

	* hesiod/hesiod.h: Remove RCS keyword.
	* hesiod/hesiod_p.h: Likewise.

	* hesiod/hesiod.c: Likewise.

2016-05-01  Arnas Udoviƒçius  <arnas.udovicius@gmail.com>

	[BZ #12450]
	* locale/iso-639.def: Add Samogitian/sgs.

2016-04-30  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/Makefile (CFLAGS-gmon-start.c): Define.

	* sysdeps/unix/sysv/linux/m68k/clone.S: Localize labels.

2016-04-29  Stephen Gallagher  <sgallagh@redhat.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #19072]
	* grp/Makefile (headers): Add grp-merge.h
	(routines): Add grp-merge.
	* grp/getgrgid_r.c: Include grp-merge.h.
	(DEEPCOPY_FN): Define.
	(MERGE_FN): Define.
	* grp/getgrname_r.c: Include grp-merge.h.
	(DEEPCOPY_FN): Define.
	(MERGE_FN): Define.
	* grp/grp-merge.c: New file.
	* grp/grp-merge.h: New file.
	* include/grp-merge.h: New file.
	* grp/Versions: Define __merge_grp@GLIBC_PRIVATE, and
	__copy_grp@GLIBC_PRIVATE.
	* manual/nss.texi (Actions in the NSS configuration): Describe
	return, continue, and merge.
	* nscd/getgrgid_r.c: Include grp/grp-merge.h.
	(DEEPCOPY_FN): Define.
	(MERGE_FN): Define.
	* nscd/getgrnam_r.c: Include grp/grp-merge.h.
	(DEEPCOPY_FN): Define.
	(MERGE_FN): Define.
	* nss/getXXbyYY_r.c [!DEEPCOPY_FN]: Define __copy_einval.
	[!MERGE_FN]: Define __merge_einval.
	(CHECK_MERGE): Define.
	(REENTRANT_NAME): Process merge if do_merge is true.
	* nss/getnssent_r.c (__nss_setent): Process NSS_ACTION_MERGE.
	(__nss_getent_r): Likewise.
	* nss/nsswitch.c (nss_parse_service_list): Likewise.
	* nss/nsswitch.h (lookup_actions): Define NSS_ACTION_MERGE.

2016-04-29  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #20012]
	* libio/fmemopen.c (fmemopen_read): Use buffer maximum position, not
	length to calculate the buffer to read.
	(fmemopen_write): Set the buffer position based on bytes written.
	(fmemopen_seek): Return EINVAL for invalid whence modes.

	[BZ #19957]
	* sysdeps/unix/sysv/linux/Makefile [$(subdir) == nptl] (test): Remove
	tst-getpid2.
	(test): Add tst-clone2.
	* sysdeps/unix/sysv/linux/tst-clone2.c: New file.
	* sysdeps/unix/sysv/linux/aarch64/clone.S (__clone): Do not change
	pid/tid fields for CLONE_VM.
	* sysdeps/unix/sysv/linux/alpha/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/arm/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/hppa/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/ia64/clone2.S (__clone): Likewise,
	* sysdeps/unix/sysv/linux/i386/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/mips/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/m68k/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/nios2/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S (__clone):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (__clone):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/sh/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/tile/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/tst-getpid2.c: Remove file.

2016-04-29  Florian Weimer  <fweimer@redhat.com>

	[BZ #19642]
	* inet/getnameinfo.c (gni_host_inet_name, gni_host_inet_numeric)
	(gni_host_inet, gni_host_local, gni_host, gni_serv_inet)
	(gni_serv_local, gni_serv): New functions extracted from
	getnameinfo.
	(getnameinfo): Call gni_host and gni_serv to perform the
	processing.  Always free scratch buffer.

2016-04-29  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/strncpy.S: Call memset to pad the
	remaining bytes in the dest string, with zeros.

2016-04-29  Florian Weimer  <fweimer@redhat.com>

	[BZ #20010]
	CVE-2016-3706
	* sysdeps/posix/getaddrinfo.c
	(convert_hostent_to_gaih_addrtuple): New function.
	(gethosts): Call convert_hostent_to_gaih_addrtuple.
	(gaih_inet): Use convert_hostent_to_gaih_addrtuple to convert
	AF_INET data.

2016-04-29  Florian Weimer  <fweimer@redhat.com>

	glob: Simplify and document the interface for the GLOB_ALTDIRFUNC
	callback function gl_readdir.
	* posix/glob.c (NAMELEN, CONVERT_D_NAMLEN): Remove.
	(CONVERT_DIRENT_DIRENT64): Use strcpy instead of memcpy.
	(glob_in_dir): Remove len.  Use strdup instead of malloc and
	memcpy to copy the name.
	* manual/pattern.texi (Calling Glob): Document requirements for
	implementations of the gl_readdir callback function.
	* manual/examples/mkdirent.c: New example.
	* posix/bug-glob2.c (my_readdir): Set d_ino to 1 unconditionally,
	per the manual guidance.
	* posix/tst-gnuglob.c (my_readdir): Likewise.

2016-04-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #20014]
	* libio/stdio.h (getc_unlocked): Declare if [__USE_POSIX199506],
	not [__USE_POSIX].
	(getchar_unlocked): Likewise.
	(putc_unlocked): Likewise.
	(putchar_unlocked): Likewise.
	(flockfile): Likewise.
	(ftrylockfile): Likewise.
	(funlockfile): Likewise.
	* conform/Makefile (test-xfail-XPG3/stdio.h/conform): Remove
	variable.
	(test-xfail-XPG4/stdio.h/conform): Likewise.

	* conform/data/langinfo.h-data [XPG3 || XPG4 || UNIX98] (YESSTR):
	Expect constant.
	[XPG3 || XPG4 || UNIX98] (NOSTR): Likewise.
	* conform/Makefile (test-xfail-XPG3/langinfo.h/conform): Remove
	variable.
	(test-xfail-XPG4/langinfo.h/conform): Likewise.
	(test-xfail-UNIX98/langinfo.h/conform): Likewise.

	* libio/stdio.h (off_t): Also define if [__USE_UNIX98].
	[__USE_LARGEFILE64] (off64_t): Likewise.
	* conform/Makefile (test-xfail-UNIX98/stdio.h/conform): Remove
	variable.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* inet/getnameinfo.c (getnameinfo): Do not preserve errno.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/inet_addr.c: Reindent preprocessor conditionals.
	* resolv/res_init.c: Likewise.
	* resolv/res_mkquery.c: Likewise.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c (isascii): Do not define.  Use definition in
	<ctype.h>.
	* resolv/gethnamaddr.c: Remove USE_OPTIONS_H conditional.
	(LOG_AUTH): Remove.
	(SPRINTF): Remove, adjust caller.
	(MULTI_PTRS_ARE_ALIASES): Remove, always defined.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyaddr2_r): Remove
	SUNSECURITY conditional.
	* resolv/gethnamaddr.c (gethostbyaddr): Likewise.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/arpa/nameser.h: Include <sys/types.h> unconditionally.
	* resolv/gethnamaddr.c: Use include files from conf/portability.h.
	Remove BSD-related preprocessor conditionals.
	* conf/portability.h: Remove.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/resolv.h: Remove __BIND_NOSTATIC conditional.
	* resolv/res_data.c: Likewise.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_comp.c: Remove code conditional on __ultrix__.
	* resolv/res_data.c: Remove code conditional on ultrix.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c (RFC1535): Do not define.  Remove
	RFC1535 preprocessor conditionals.
	* resolv/README: Update.  Do not claim strict RFC 1535 compliance
	because there configuration options which make the resolver
	behavior different.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/gethnamaddr.c (RESOLVSORT): Do not define.  Remove
	RESOLVSORT preprocessor conditionals.
	* resolv/nss_dns/dns-host.c: Likewise.
	* resolv/res_init.c: Likewise.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_data.c: Remove code conditional on BIND_UPDATE.  It
	is never defined.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* inet/inet_lnaof.c: Remove SCSS keyword.
	* inet/inet_mkadr.c: Likewise.
	* inet/inet_net.c: Likewise.
	* inet/inet_netof.c: Likewise.
	* inet/rcmd.c: Likewise.
	* inet/rexec.c: Likewise.
	* inet/ruserpass.c: Likewise.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/inet_addr.c: Remove _LIBC conditionals.
	* resolv/res_data.c: Likewise.
	* resolv/res_init.c: Likewise.
	* resolv/res_mkquery.c: Likewise.
	* resolv/res_libc.c: Update comment.
	* resolv/README: Update.

2016-04-28  Florian Weimer  <fweimer@redhat.com>

	* resolv/gethnamaddr.c: Remove SCSS keyword.
	* resolv/herror.c: Likewise.
	* resolv/inet_addr.c: Likewise.
	* resolv/inet_net_ntop.c: Likewise.
	* resolv/inet_net_pton.c: Likewise.
	* resolv/inet_neta.c: Likewise.
	* resolv/inet_ntop.c: Likewise.
	* resolv/inet_pton.c: Likewise.
	* resolv/ns_date.c: Remove RCS keyword.
	* resolv/ns_name.c: Likewise.
	* resolv/ns_netint.c: Likewise.
	* resolv/ns_parse.c: Likewise.
	* resolv/ns_print.c: Likewise.
	* resolv/ns_samedomain.c: Likewise.
	* resolv/ns_ttl.c: Likewise.
	* resolv/nsap_addr.c: Likewise.
	* resolv/res_comp.c: Remove SCSS and RCS keyword.
	* resolv/res_data.c: Remove RCS keyword.
	* resolv/res_debug.c: Remove SCSS and RCS keyword.
	* resolv/res_init.c: Likewise.
	* resolv/res_mkquery.c: Likewise.
	* resolv/res_query.c: Likewise.
	* resolv/res_send.c: Likewise.

2016-04-27  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/stdio.h-data (fdopen): Expect also for
	[XPG3 || XPG4].

	* conform/data/stdio.h-data (flockfile): Also expect for [UNIX98].
	(fseeko): Likewise.
	(ftello): Likewise.
	(ftrylockfile): Likewise.
	(funlockfile): Likewise.
	(getc_unlocked): Likewise.
	(getchar_unlocked): Likewise.
	(putc_unlocked): Likewise.
	(putchar_unlocked): Likewise.

2016-04-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #19868]
	* resolv/nss_dns/dns-network.c (getanswer_r): Implement additional
	DNS packet syntax checks (which were not needed before).  Skip
	over non-PTR records.

2016-04-27  Florian Weimer  <fweimer@redhat.com>

	* resolv/nss_dns/dns-network.c (offsetof): Remove macro
	definition.  Include <stddef.h> instead.

2016-04-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #19831]
	* resolv/nss_dns/dns-host.c (rrtype_to_rdata_length): New
	function.
	(getanswer_r): Check RDATA length against RRTYPE and QTYPE.
	(gaih_getanswer_slice): Check RDATA length against RRTYPE.

2016-04-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #19862]
	* resolv/nss_dns/dns-host.c (AskedForGot): Remove.
	(getanswer_r): Do not call syslog.
	(gaih_getanswer_slice): Likewise.
	* resolv/gethnamaddr.c (AskedForGot): Remove.
	(getanswer): Do not call syslog.
	(gethostbyaddr): Likewise.

2016-04-27  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/signal.h-data (union sigval): Expect also if
	[XOPEN2K].
	(struct sigevent): Likewise.
	(SIGEV_NONE): Likewise.
	(SIGEV_SIGNAL): Likewise.
	(SIGEV_THREAD): Likewise.
	(SIGRTMIN): Likewise.
	(SIGRTMAX): Likewise.
	* conform/Makefile (test-xfail-XOPEN2K/aio.h/conform): Remove
	variable.
	(test-xfail-XOPEN2K/mqueue.h/conform): Likewise.

2016-04-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #19830]
	* resolv/nss_dns/dns-host.c (getanswer_r): Check RDATA length.
	(gaih_getanswer_slice): Likewise.
	* resolv/nss_dns/dns-canon.c (_nss_dns_getcanonname_r): Likewise.
	Also check for availability of RR metadata.

2016-04-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #19825]
	* resolv/res_send.c (send_vc): Remove early *resplen2
	initialization.  Set *resplen2 on socket error.  Call
	close_and_return_error for other errors.

2016-04-27  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/netiucv/iucv.h
	(SOL_IUCV, SO_IPRMDATA_MSG, SO_MSGLIMIT, SO_MSGSIZE)
	(SCM_IUCV_TRGCLS): New define.

2016-04-26  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #20005]
	* libio/fmemopen.c (fmemopen_write): Update internal position after
	write.
	* stdio-common/Makefile (tests): Add tst-fmemopen4.c.
	* stdio-common/tst-fmemopen4.c: New file..

2016-04-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19996]
	* locale/langinfo.h (nl_langinfo_l): Declare if [__USE_XOPEN2K8],
	not [__USE_XOPEN2K].
	* conform/Makefile (test-xfail-XOPEN2K/langinfo.h/conform): Remove
	variable.

	* conform/data/stdarg.h-data [XOPEN2K] (va_copy): Require macro.
	* conform/Makefile (test-xfail-XOPEN2K/stdarg.h/conform): Remove
	variable.

	* libio/stdio.h (off_t): Define if [__USE_XOPEN2K], not
	[__USE_XOPEN2K8].
	[__USE_LARGEFILE64] (off64_t): Likewise.
	* conform/Makefile (test-xfail-XOPEN2K/stdio.h/conform): Remove
	variable.

2016-04-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19989]
	* libio/stdio.h (cuserid): Do not declare if
	[__USE_XOPEN2K && !__USE_GNU].
	* conform/Makefile (test-xfail-XOPEN2K8/stdio.h/conform): Remove
	variable.

2016-04-25  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile:
	(sysdep_routines): Add P8 and PPC64 strcspn targets.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Add entries for P8 and PPC64
	ifunc'ed strcspn.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-power8.S:
	[EALIGN]: Removed.
	[END]: Likewise
	[STRSPN]: Define instead of the above to control symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn-power8.S:
	New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn-ppc64.c:
	Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn.c:
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/strcspn.S:
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/strspn.S:
	[INITIAL_MASK]: New macro.
	[STRCSPN]: Likewise.
	[UPDATE_MASK]: Likewise.
	[USE_AS_STRCSPN]: Likewise.

2016-04-25  Florian Weimer  <fweimer@redhat.com>

	[BZ #19931]
	* stdio-common/tst-vfprintf-width-prec.c: New file.
	* stdio-common/Makefile (tests): Add tst-vfprintf-width-prec.
	(tests-special): Add tst-vfprintf-width-prec-mem.out.
	(generated): Add mtrace-related files.
	(tst-vfprintf-width-prec-ENV): Set MALLOC_TRACE.
	(tst-%-mem.out): New pattern rule, replaces
	tst-printf-bz18872-mem.out.
	* stdio-common/vfprintf.c (vfprintf): When handling a precision
	specifier, deallocate any previously allocated work buffer.

2016-04-25  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/unix/sysv/linux/nios2/setcontext.S (__startcontext):
	Add nop before __startcontext, add explaining comments.

2016-04-25  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	RFC2292 macros were obsoleted by RFC3542, and should not be exposed
	any more. Notably since IPV6_PKTINFO has been reintroduced with a
	completely different API.

	* bits/in.h (IPV6_PKTINFO): Rename to IPV6_2292PKTINFO.
	(IPV6_HOPOPTS): Rename to IPV6_2292HOPOPTS.
	(IPV6_DSTOPTS): Rename to IPV6_2292DSTOPTS.
	(IPV6_RTHDR): Rename to IPV6_2292RTHDR.
	(IPV6_PKTOPTIONS): Rename to IPV6_2292PKTOPTIONS.
	(IPV6_HOPLIMIT): Rename to IPV6_2292HOPLIMIT.
	(IPV6_RECVPKTINFO, IPV6_PKTINFO, IPV6_RECVHOPLIMIT, IPV6_HOPLIMIT,
	IPV6_RECVHOPOPTS, IPV6_HOPOPTS, IPV6_RTHDRDSTOPTS, IPV6_RECVRTHDR,
	IPV6_RTHDR, IPV6_RECVDSTOPTS, IPV6_DSTOPTS, IPV6_RECVPATHMTU,
	IPV6_PATHMTU, IPV6_DONTFRAG): New macros.

2016-04-23  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-minimal.c (__libc_memalign): Mmap one extra page.

2016-04-23  Mike Frysinger  <vapier@gentoo.org>

	* locale/programs/ld-time.c (time_finish): Set week_1stweek to 7
	when it is the default of 0.

2016-04-22  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/locale-defines.sym:  Add new macros.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile:
	(sysdep_routines): Add new strcasestr targets.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcasestr-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcasestr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcasestr.c: New file.
	* sysdeps/powerpc/powerpc64/power8/Makefile:
	New file to add strcasestr-ppc64 to sysdep_routines.
	* sysdeps/powerpc/powerpc64/power8/strcasestr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/power8/strcasestr.S: New file.

2016-04-20  Siddhesh Poyarekar  <sid@reserved-bit.com>

	* benchtests/Makefile (wcsmbs-benchset): Include only for
	native builds and runs.
	(LOCALES): Likewise.
	(bench-build): Build timing-type here instead of the bench
	target.  Generate locale only for native builds.
	* benchtests/README: Add note for cross-building.

	* benchtests/Makefile (bench-clean): Clean up extra-objs.

	* benchtests/README: Update README to include instructions on
	using bench-build.

	* Makefile.in (bench-build): New target.
	* Rules (PHONY): Add bench-build target.
	* benchtests/Makefile (bench): Depend on bench-build.
	(bench-build): New target.

2016-04-19  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/profil.c (update_waiter): Initialize
	profil_reply_port.
	(profile_waiter): Do not initialize profil_reply_port.
	* sysdeps/mach/hurd/profil.c (__profile_frequency): Return tick
	frequency instead of tick length in us.

2016-04-18  Wilco Dijkstra  <wdijkstr@arm.com>

	[BZ #18712]
	* string/string-inlines.c (__STRING2_COPY_TYPE): Add, moved from string2.h.
	(__old_mempcpy_small): Likewise.
	(__old_strcpy_small): Likewise.
	(__old_stpcpy_small): Likewise.
	(__old_strpbrk_c2): Fix compat symbol name.
	(__old_strpbrk_c3): Likewise.
	* string/bits/string2.h (__STRING2_COPY_TYPE): Remove.
	(__mempcpy_small): Remove.
	(__strcpy_small): Remove.
	(__stpcpy_small): Remove.

2016-04-16  Robin van der Vliet <info@robinvandervliet.com>

	[BZ #19400]
	* locale/iso-639.def: Add the Talossan/tzl language.

2016-04-16  Mike Frysinger  <vapier@gentoo.org>

	[BZ #16983]
	* locale/programs/ld-address.c (address_finish): Update postal_fmt
	comment.  Add "ln" to strchr check on postal_fmt.

2016-04-16  Mike Frysinger  <vapier@gentoo.org>

	* locale/programs/ld-telephone.c (telephone_finish): Add %t to the
	default tel_int_fmt.  Add "Cet" to strchr check on tel_int_fmt and
	tel_dom_fmt.

2016-04-15  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile:
	(sysdep_routines): Added __strlen_power8.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c: Added
	__strlen_power8 entry.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-power8.S: New file.
	Implementation for POWER8.
	* sysdeps/powerpc/powerpc64/multiarch/strlen.c: Added IFUNC selector
	for __strlen_power8.
	* sysdeps/powerpc/powerpc64/power8/strlen.S: New file.
	Implementation for POWER8.

2016-04-15  Mike Frysinger  <vapier@gentoo.org>

	* locale/iso-4217.def: Add SSP and change ZMK to ZMW.

2016-04-15   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.c (init_cpu_features): Detect Intel
	Goldmont and Airmont processors.

2016-04-15  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/string.h: Use __GNUC_PREREQ(3,4) for bits/string2.h.
	* string/bits/string2.h (__STRING2_SMALL_GET16): Remove.
	(__STRING2_SMALL_GET32): Remove.
	(memset): Remove.
	(__memset_1): Remove.
	(__memset_gc): Remove.
	(__mempcpy): Remove.
	(mempcpy): Remove.
	(__mempcpy_args): Remove.
	(strchr): Remove.
	(strcpy): Remove.
	(strcpy_args): Remove.
	(__stpcpy_args): Remove.
	(__strcmp_cc): Remove.
	(__strcmp_gc): Remove.
	(strstr): Remove.

2016-04-15  Yvan Roux  <yvan.roux@linaro.org>

	* stdlib/setenv.c (unsetenv): Fix ambiguous 'else'.
	* nis/nis_call.c (nis_server_cache_add): Likewise.

2016-04-14  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/sysdep.h: Include kernel-features.h.

2016-04-14  Florian Weimer  <fweimer@redhat.com>

	* malloc/arena.c (__malloc_fork_lock_parent)
	(__malloc_fork_unlock_parent, __malloc_fork_unlock_child): Add
	internal_function attribute.

2016-04-14  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* stdio-common/printf_fp.c (__printf_fp_l):
	Rename ___printf_fp_l to __printf_fp_l and
	remove strong alias. Use libc_hidden_def instead
	of ldbl_hidden_def macro.

2016-04-14  Florian Weimer  <fweimer@redhat.com>

	Remove malloc hooks from fork handler.  They are no longer needed
	because malloc runs right before fork, and no malloc calls from
	other fork handlers are not possible anymore.
	* malloc/malloc.c (malloc_atfork, free_atfork): Remove
	declarations.
	* malloc/arena.c (save_malloc_hook, save_free_hook, save_arena)
	(ATFORK_ARENA_PTR, malloc_atfork, free_atfork)
	(atfork_recursive_cntr): Remove.
	(__malloc_fork_lock_parent): Do not override malloc hooks and
	thread_arena.
	(__malloc_fork_unlock_parent): Do not restore malloc hooks and
	thread_arena.
	(__malloc_fork_unlock_child): Do not restore malloc hooks.  Use
	thread_arena instead of save_arena.

2016-04-14  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/nptl/malloc-machine.h (ATFORK_MEM, __dso_handle)
	(thread_atfork, thread_atfork_static): Remove.
	* sysdeps/mach/hurd/malloc-machine.h:
	(thread_atfork, thread_atfork_static): Remove.

2016-04-14  Florian Weimer  <fweimer@redhat.com>

	[BZ #19431]
	Run the malloc fork handler as late as possible to avoid deadlocks.
	* malloc/malloc-internal.h: New file.
	* malloc/malloc.c: Include it.
	* malloc/arena.c (ATFORK_MEM): Remove.
	(__malloc_fork_lock_parent): Rename from ptmalloc_lock_all.
	Update comment.
	(__malloc_fork_unlock_parent): Rename from ptmalloc_unlock_all.
	(__malloc_fork_unlock_child): Rename from ptmalloc_unlock_all2.
	Remove outdated comment.
	(ptmalloc_init): Do not call thread_atfork.  Remove
	thread_atfork_static.
	* malloc/tst-malloc-fork-deadlock.c: New file.
	* Makefile (tests): Add tst-malloc-fork-deadlock.
	(tst-malloc-fork-deadlock): Link against libpthread.
	* manual/memory.texi (Aligned Memory Blocks): Update safety
	annotation comments.
	* sysdeps/nptl/fork.c (__libc_fork): Call
	__malloc_fork_lock_parent, __malloc_fork_unlock_parent,
	__malloc_fork_unlock_child.
	* sysdeps/mach/hurd/fork.c (__fork): Likewise.

2016-04-14  Florian Weimer  <fweimer@redhat.com>

	[BZ #19613]
	Remove union wait.
	* bits/waitstatus.h (union wait, w_termsig, w_coredump, w_retcode)
	(w_stopsig, w_stopval): Remove.
	* include/sys/wait.h (__wait, __wait3, __wait4): Use int * for the
	stat_loc argument.
	* posix/sys/wait.h (__WAIT_INT, __WAIT_STATUS)
	(__WAIT_STATUS_DEFN): Remove.
	(WEXITSTATUS, WTERMSIG, WSTOPSIG, WIFEXITED, WIFSIGNALED)
	(WIFSTOPPED, WIFCONTINUED, WCOREDUMP): Remove __WAIT_INT.
	(wait, wait3, wait4): Use int * for the stat_loc argument.
	* posix/wait.c (__wait): Likewise.
	* posix/wait3.c (__wait3): Likewise.
	* posix/wait4.c (__wait4): Likewise.
	* stdlib/stdlib.h (__WAIT_INT, __WAIT_STATUS)
	(__WAIT_STATUS_DEFN): Remove.
	(WEXITSTATUS, WTERMSIG, WSTOPSIG, WIFEXITED, WIFSIGNALED)
	(WIFSTOPPED, WIFCONTINUED): Remove __WAIT_INT.
	* sysdeps/mach/hurd/wait4.c (__wait4): Use int * for the stat_loc
	argument.
	* sysdeps/posix/wait.c (__libc_wait): Likewise.
	* sysdeps/posix/wait3.c (__wait3): Likewise.
	* sysdeps/unix/bsd/wait.c (__libc_wait): Likewise.
	* sysdeps/unix/bsd/wait3.c (__wait3): Likewise.
	* sysdeps/unix/bsd/waitpid.c (__waitpid): Remove cast.
	* sysdeps/unix/sysv/linux/wait.c (__libc_wait): Use int * for the
	stat_loc argument.
	* manual/process.texi (BSD Wait Functions): Remove union wait.

2016-04-13  Andreas Schwab  <schwab@suse.de>

	* elf/Makefile (extra-test-objs): Add tst-tlsalign-vars.o.
	(test-extras): Add tst-tlsalign-vars.
	* math/Makefile: Wrap long lines.
	(libm-vec-test-wrappers): Define.
	(test-extras): Add $(libm-vec-test-wrappers).
	(extra-test-objs): Add $(libm-vec-test-wrappers) objects.
	* nss/Makefile (extra-test-objs): Add nss_test1.os.
	* stdlib/Makefile (extra-test-objs): Add $(modules-names) objects.
	* sysdeps/x86_64/Makefile (test-extras): Add tst-quadmod1pie
	tst-quadmod2pie tst-audit4-aux tst-audit10-aux.
	(extra-test-objs): Add corresponding objects.

2016-04-12   H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19928]
	* sysdeps/x86_64/cacheinfo.c (__x86_shared_non_temporal_threshold):
	New.
	(init_cacheinfo): Set __x86_shared_non_temporal_threshold to 6
	times of shared cache size.
	* sysdeps/x86_64/multiarch/memmove-avx-unaligned-erms.S
	(VMOVNT): New.
	* sysdeps/x86_64/multiarch/memmove-avx512-unaligned-erms.S
	(VMOVNT): Likewise.
	* sysdeps/x86_64/multiarch/memmove-sse2-unaligned-erms.S
	(VMOVNT): Likewise.
	(VMOVU): Changed to movups for smaller code sizes.
	(VMOVA): Changed to movaps for smaller code sizes.
	* sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S: Update
	comments.
	(PREFETCH): New.
	(PREFETCH_SIZE): Likewise.
	(PREFETCHED_LOAD_SIZE): Likewise.
	(PREFETCH_ONE_SET): Likewise.
	Rewrite to use forward and backward loops, which move 4 vector
	registers at a time, to support overlapping addresses and use
	non temporal store if size is above the threshold and there is
	no overlap between destination and source.

2016-04-12  Alex Smith  <alex.smith@imgtec.com>

	* sysdeps/unix/sysv/linux/mips/Makefile (sysdep_routines):
	Include dl-vdso.
	* sysdeps/unix/sysv/linux/mips/Versions: Add
	__vdso_clock_gettime.
	* sysdeps/unix/sysv/linux/mips/init-first.c: New file.
	* sysdeps/unix/sysv/linux/mips/libc-vdso.h: New file.
	* sysdeps/unix/sysv/linux/mips/mips32/sysdep.h:
	(INTERNAL_VSYSCALL_CALL): Define to be compatible with MIPS
	definitions of INTERNAL_SYSCALL_{ERROR_P,ERRNO}.
	(HAVE_CLOCK_GETTIME_VSYSCALL): Define.
	(HAVE_GETTIMEOFDAY_VSYSCALL): Define.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/sysdep.h: Likewise.

2016-04-11  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/arm/pwrite.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list (prite): Remove
	syscalls generation.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	[__NR_pwrite64] (__NR_write): Remove define.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h
	[__NR_pwrite64] (__NR_write): Remove define.
	* sysdeps/unix/sysv/linux/pwrite.c [__NR_pwrite64] (__NR_pwrite):
	Remove define.
	(__libc_pwrite): Use SYSCALL_LL macro on offset argument.
	* sysdeps/unix/sysv/linux/pwrite64.c [__NR_pwrite64] (__NR_pwrite):
	Remove define.
	(__libc_pwrite64): Use SYSCALL_LL64 macro on offset argument.
	* sysdeps/unix/sysv/linux/sh/pwrite.c: Rewrite using default
	Linux implementation as base.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c: Likewise.

	* sysdeps/unix/sysv/linux/arm/pread.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c: Likewise,
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list (pread): Remove
	syscall generation.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	[__NR_pread64] (__NR_pread): Remove define.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h:
	[__NR_pread64] (__NR_pread): Likewise.
	* sysdeps/unix/sysv/linux/pread.c [__NR_pread64] (__NR_pread): Remove
	define.
	(__libc_pread): Use SYSCALL_LL macro on offset argument.
	* sysdeps/unix/sysv/linux/pread64.c [__NR_pread64] (__NR_pread):
	Remove define.
	(__libc_pread64): Use SYSCALL_LL64 macro on offset argument.
	* sysdeps/unix/sysv/linux/sh/pread.c: Rewrite using default
	Linux implementation as base.
	* sysdeps/unix/sysv/linux/sh/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pread64.c: Likewise.

	* sysdeps/unix/sysv/linux/generic/sysdep.h (__ALIGNMENT_ARG): Move
	definition.
	(__ALIGNMENT_COUNT): Likewise.
	* sysdeps/unix/sysv/linux/sysdep.h (__ALIGNMENT_ARG): To here.
	(__ALIGNMENT_COUNT): Likewise.
	(SYSCALL_LL): New define.
	(SYSCALL_LL64): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h:
	[_MIPS_SIM == _ABIO32] (__ASSUME_WORDSIZE64_ILP32): Define.
	* sysdeps/unix/sysv/linux/x86_64/kernel-features.h:
	[ILP32] (__ASUME_WORDSIZE64_ILP32): Likewise.

	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_ALIGNED_REGISTER_PAIRS): Define.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[_MIPS_SIM == _ABIO32] (__ASSUME_ALIGNED_REGISTER_PAIRS): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	[!__powerpc64__] (__ASSUME_ALIGNED_REGISTER_PAIRS): Likewise.

2016-04-11  Florian Weimer  <fweimer@redhat.com>

	[BZ #19865]
	* resolv/nss_dns/dns-canon.c (_nss_dns_getcanonname_r): Restore
	original buffer before retry.

2016-04-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro)
	[!HAVE_AUX_VECTOR]: Do not define _dl_auxv field.
	* misc/getauxval.c (__getauxval) [!HAVE_AUX_VECTOR]: Do not go through
	GLRO(dl_auxv) list.
	* sysdeps/unix/sysv/linux/ldsodefs.h (HAVE_AUX_VECTOR): Define before
	including <ldsodefs.h>.
	* sysdeps/nacl/ldsodefs.h (HAVE_AUX_VECTOR): Likewise.

2016-04-09  Nick Alcock  <nick.alcock@oracle.com>

	* elf/rtld-Rules (rtld-compile-command.c): Add $(rtld-CFLAGS).
	* scripts/sysd-rules.awk: Substitute in $(CFLAGS) as well as
	$(CPPFLAGS).

2016-04-09  Khem Raj  <raj.khem@gmail.com>

	[BZ #17950]
	* sysdeps/i386/Makefile [$(subdir) == elf] (CFLAGS-.os):
	Add -mfpmath=387.

2016-04-09  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/i386/configure.ac: Change == to = when calling test.
	* sysdeps/x86_64/configure.ac: Likewise.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure: Likewise.

2016-04-08  Mike Frysinger  <vapier@gentoo.org>

	[BZ #16137]
	* benchtests/Makefile (LOCALES): Change iw_IL to he_IL.
	* benchtests/bench-strcoll.c (input_files): Likewise.
	* benchtests/strcoll-inputs/filelist#en_US.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#iw_IL.UTF-8: Rename to ...
	* benchtests/strcoll-inputs/lorem_ipsum#he_IL.UTF-8: ... here.

2016-04-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19929]
	* include/bits/xopen_lim.h (NL_NMAX): Do not define if
	[__USE_XOPEN2K8 && !__USE_GNU].
	* conform/Makefile (test-xfail-XOPEN2K8/limits.h/conform): Remove
	variable.

	[BZ #19925]
	* sysdeps/unix/sysv/linux/alpha/bits/termios.h (XCASE): Do not
	define if [!__USE_MISC && __USE_XOPEN2K].
	* sysdeps/unix/sysv/linux/bits/termios.h (XCASE): Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/termios.h (XCASE): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h (XCASE):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h (XCASE): Likewise.
	* conform/Makefile (test-xfail-XOPEN2K/termios.h/conform): Remove
	variable.
	(test-xfail-XOPEN2K8/termios.h/conform): Likewise.

2016-04-07  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile:
	(sysdep_routines): Add new strspn targets.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Add strspn.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-power8.S:
	New file.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-ppc64.c:
	Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strspn.c:
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/strspn.S:
	Likewise.

2016-04-07  Florian Weimer  <fweimer@redhat.com>

	* misc/hsearch_r.c: Include <limits.h>.

2016-04-07  Florian Weimer  <fweimer@redhat.com>

	* malloc/scratch_buffer_set_array_size.c: Include <limits.h>.

2016-04-06   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S
	(MEMCPY_SYMBOL): New.
	(MEMPCPY_SYMBOL): Likewise.
	(MEMMOVE_CHK_SYMBOL): Likewise.
	Replace MEMMOVE_SYMBOL with MEMMOVE_CHK_SYMBOL on __mempcpy_chk
	symbols.  Replace MEMMOVE_SYMBOL with MEMPCPY_SYMBOL on
	__mempcpy symbols.  Provide alias for __memcpy_chk in libc.a.
	Provide alias for memcpy in libc.a and ld.so.

2016-04-06   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S
	(MEMSET_CHK_SYMBOL): New.  Define if not defined.
	(__bzero): Check VEC_SIZE == 16 instead of USE_MULTIARCH.
	Disabled fro now.
	Replace MEMSET_SYMBOL with MEMSET_CHK_SYMBOL on __memset_chk
	symbols.  Properly check USE_MULTIARCH on __memset symbols.

2016-04-06   H.J. Lu  <hongjiu.lu@intel.com>

	* benchtests/Makefile (string-benchset): Add memcpy-large,
	memmove-large and memset-large.
	* benchtests/bench-memcpy-large.c: New file.
	* benchtests/bench-memmove-large.c: Likewise.
	* benchtests/bench-memmove-large.c: Likewise.
	* benchtests/bench-string.h (TIMEOUT): Don't redefine.

2016-04-05   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S: Force
	32-bit displacement to avoid long nop between instructions.

2016-04-05   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memset-sse2-unaligned-erms.S: Add
	a comment on VMOVU and VMOVA.

2016-04-04  Florian Weimer  <fweimer@redhat.com>

	[BZ #19633]
	Use specified locale for number formatting in strfmon_l.
	* locale/localeinfo.h (__nl_lookup, _nl_lookup_wstr)
	(__nl_lookup_word): New inline functions.
	* include/printf.h (__print_fp_l): Declare.
	* stdio-common/printf_fp.c (___printf_fp_l): Renamed from
	___printf_fp.  Add locale argument.  Replace _NL_CURRENT with
	_nl_lookup and _NL_CURRENT_WORD with _nl_lookup_word.
	(___printf_fp): New function.
	* stdlib/strfmon_l.c (__printf_fp): Remove declaration.
	(__vstrfmon_l): Call __printf_fp_l instead of printf_fp.
	* stdlib/tst-strfmon_l.c (do_test): New test.
	* stdlib/Makefile (tests): Add kt.
	(LOCALES): Build additional locales.
	(tst-strfmon_l.out): Require locales.

2016-04-03   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memmove-avx-unaligned-erms.S: Skip
	if not in libc.
	* sysdeps/x86_64/multiarch/memmove-avx512-unaligned-erms.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memset-avx2-unaligned-erms.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memset-avx512-unaligned-erms.S:
	Likewise.

2016-04-03   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S:
	(__mempcpy_erms, __memmove_erms): Moved before __mempcpy_chk
	with unaligned_erms.
	(__memmove_erms): Skip if source == destination.
	(__memmove_unaligned_erms): Don't check source == destination
	first.

2016-04-01   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.c (init_cpu_features): Don't set
	bit_arch_Fast_Copy_Backward for Intel Core proessors.

2016-04-01  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* string/strcspn.c (strcspn): Use PTR_ALIGN_DOWN.
	* string/strspn.c (strspn): Likewise.

2016-04-01   H.J. Lu  <hongjiu.lu@intel.com>

	* benchtests/bench-memset.c (do_test): Support 64-byte
	alignment.
	(test_main): Test 64-byte alignment.

2016-04-01   H.J. Lu  <hongjiu.lu@intel.com>

	* benchtests/bench-memmove.c (test_main): Test 64-byte
	alignment.

2016-04-01   H.J. Lu  <hongjiu.lu@intel.com>

	* benchtests/bench-memcpy.c (test_main): Test 64-byte alignment.

2016-04-01  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/powerpc/powerpc64/strcspn.S: Remove file.
	* sysdeps/powerpc/powerpc64/strpbrk.S: Remove file.
	* sysdeps/powerpc/powerpc64/strspn.S: Remove file.

	* string/strpbrk.c (strpbrk): Rewrite function.
	* string/bits/string2.h (strpbrk): Use __builtin_strpbrk.
	(__strpbrk_c2): Likewise.
	(__strpbrk_c3): Likewise.
	* string/string-inlines.c
	[SHLIB_COMPAT(libc, GLIBC_2_1_1, GLIBC_2_24)] (__strpbrk_c2):
	Likewise.
	[SHLIB_COMPAT(libc, GLIBC_2_1_1, GLIBC_2_24)] (__strpbrk_c3):
	Likewise.

	* string/strspn.c (strcspn): Rewrite function.
	* string/bits/string2.h (strspn): Use __builtin_strcspn.
	(__strspn_c1): Remove inline function.
	(__strspn_c2): Likewise.
	(__strspn_c3): Likewise.
	* string/string-inlines.c
	[SHLIB_COMPAT(libc, GLIBC_2_1_1, GLIBC_2_24)] (__strspn_c1): Add
	compatibility symbol.
	[SHLIB_COMPAT(libc, GLIBC_2_1_1, GLIBC_2_24)] (__strspn_c2):
	Likewise.
	[SHLIB_COMPAT(libc, GLIBC_2_1_1, GLIBC_2_24)] (__strspn_c3):
	Likewise.
	* string/string-inlines.c: Include generic version.

2016-04-01  Wilco Dijkstra  <wdijkstr@arm.com>
	    Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* string/Version (libc): Add GLIBC_2.24.
	* string/strcspn.c (strcspn): Rewrite function.
	* string/bits/string2.h (strcspn): Use __builtin_strcspn.
	(__strcspn_c1): Remove inline function.
	(__strcspn_c2): Likewise.
	(__strcspn_c3): Likewise.
	* string/string-inline.c
	[SHLIB_COMPAT(libc, GLIBC_2_1_1, GLIBC_2_24)] (__strcspn_c1): Add
	compatibility symbol.
	[SHLIB_COMPAT(libc, GLIBC_2_1_1, GLIBC_2_24)] (__strcspn_c2):
	Likewise.
	[SHLIB_COMPAT(libc, GLIBC_2_1_1, GLIBC_2_24)] (__strcspn_c3):
	Likewise.
	* sysdeps/i386/string-inlines.c: Include generic string-inlines.c.

2016-04-01  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/dl-trampoline.h (_dl_runtime_resolve):
	Use ahi instead of aghi to adjust stack pointer.

2016-03-31  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	[BZ #19853]
	* stdio-common/tst-sprintf3.c [TEST_N]: Refactor
	TEST to take significant digits as second parameter.
	[TEST]: Redefine in terms of TEST_N taking 30
	significant digits.
	(do_test): Add test case to demonstrate precision
	failure in the ldbl-128ibm printf.
	* sysdeps/ieee754/ldbl-128ibm/ldbl2pm.c:
	(__mpn_extract_long_double): Carry 7 extra intermediate
	bits of precision to aide computing difference when
	signs differ.

2016-03-31   H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19881]
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memset-sse2-unaligned-erms, memset-avx2-unaligned-erms and
	memset-avx512-unaligned-erms.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Test __memset_chk_sse2_unaligned,
	__memset_chk_sse2_unaligned_erms, __memset_chk_avx2_unaligned,
	__memset_chk_avx2_unaligned_erms, __memset_chk_avx512_unaligned,
	__memset_chk_avx512_unaligned_erms, __memset_sse2_unaligned,
	__memset_sse2_unaligned_erms, __memset_erms,
	__memset_avx2_unaligned, __memset_avx2_unaligned_erms,
	__memset_avx512_unaligned_erms and __memset_avx512_unaligned.
	* sysdeps/x86_64/multiarch/memset-avx2-unaligned-erms.S: New
	file.
	* sysdeps/x86_64/multiarch/memset-avx512-unaligned-erms.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memset-sse2-unaligned-erms.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memset-vec-unaligned-erms.S:
	Likewise.

2016-03-31   H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19776]
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memmove-sse2-unaligned-erms, memmove-avx-unaligned-erms and
	memmove-avx512-unaligned-erms.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Test
	__memmove_chk_avx512_unaligned_2,
	__memmove_chk_avx512_unaligned_erms,
	__memmove_chk_avx_unaligned_2, __memmove_chk_avx_unaligned_erms,
	__memmove_chk_sse2_unaligned_2,
	__memmove_chk_sse2_unaligned_erms, __memmove_avx_unaligned_2,
	__memmove_avx_unaligned_erms, __memmove_avx512_unaligned_2,
	__memmove_avx512_unaligned_erms, __memmove_erms,
	__memmove_sse2_unaligned_2, __memmove_sse2_unaligned_erms,
	__memcpy_chk_avx512_unaligned_2,
	__memcpy_chk_avx512_unaligned_erms,
	__memcpy_chk_avx_unaligned_2, __memcpy_chk_avx_unaligned_erms,
	__memcpy_chk_sse2_unaligned_2, __memcpy_chk_sse2_unaligned_erms,
	__memcpy_avx_unaligned_2, __memcpy_avx_unaligned_erms,
	__memcpy_avx512_unaligned_2, __memcpy_avx512_unaligned_erms,
	__memcpy_sse2_unaligned_2, __memcpy_sse2_unaligned_erms,
	__memcpy_erms, __mempcpy_chk_avx512_unaligned_2,
	__mempcpy_chk_avx512_unaligned_erms,
	__mempcpy_chk_avx_unaligned_2, __mempcpy_chk_avx_unaligned_erms,
	__mempcpy_chk_sse2_unaligned_2, __mempcpy_chk_sse2_unaligned_erms,
	__mempcpy_avx512_unaligned_2, __mempcpy_avx512_unaligned_erms,
	__mempcpy_avx_unaligned_2, __mempcpy_avx_unaligned_erms,
	__mempcpy_sse2_unaligned_2, __mempcpy_sse2_unaligned_erms and
	__mempcpy_erms.
	* sysdeps/x86_64/multiarch/memmove-avx-unaligned-erms.S: New
	file.
	* sysdeps/x86_64/multiarch/memmove-avx512-unaligned-erms.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memmove-sse2-unaligned-erms.S:
	Likewise.
	* sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S:
	Likewise.

2016-03-31  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/bits/link.h: (La_s390_vr) New typedef.
	(La_s390_32_regs): Append vector register lr_v24-lr_v31.
	(La_s390_64_regs): Likewise.
	(La_s390_32_retval): Append vector register lrv_v24.
	(La_s390_64_retval): Likeweise.
	* sysdeps/s390/s390-32/dl-trampoline.h (_dl_runtime_profile):
	Handle extended structs La_s390_32_regs and La_s390_32_retval.
	* sysdeps/s390/s390-64/dl-trampoline.h (_dl_runtime_profile):
	Handle extended structs La_s390_64_regs and La_s390_64_retval.

2016-03-31  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #19916]
	* sysdeps/s390/s390-32/dl-trampoline.S: Include dl-trampoline.h twice
	to create a non-vector/vector version for _dl_runtime_resolve and
	_dl_runtime_profile. Move implementation to ...
	* sysdeps/s390/s390-32/dl-trampoline.h: ... here.
	(_dl_runtime_resolve) Save and restore fpr/vrs.
	(_dl_runtime_profile) Save and restore vrs and fix some issues
	if _dl_call_pltexit is called.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_runtime_setup):
	Choose the correct resolver function if running on a machine with vx.
	* sysdeps/s390/s390-64/dl-trampoline.S: Include dl-trampoline.h twice
	to create a non-vector/vector version for _dl_runtime_resolve and
	_dl_runtime_profile. Move implementation to ...
	* sysdeps/s390/s390-64/dl-trampoline.h: ... here.
	(_dl_runtime_resolve) Save and restore fpr/vrs.
	(_dl_runtime_profile) Save and restore vrs and fix some issues
	* sysdeps/s390/s390-64/dl-machine.h: (elf_machine_runtime_setup):
	Choose the correct resolver function if running on a machine with vx.

2016-03-31  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* elf/tst-dlsym-error.c: Include <string.h> for strchrnul.

2016-03-31  Florian Weimer  <fweimer@redhat.com>

	[BZ #19509]
	* elf/dl-lookup.c (_dl_lookup_symbol_x): Report error even if
	skip_map != NULL.
	* elf/tst-dlsym-error.c: New file.
	* elf/Makefile (tests): Add tst-dlsym-error.
	(tst-dlsym-error): Link against libdl.

2016-03-29  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_FUTIMESAT): Remove macro.
	* sysdeps/unix/sysv/linux/microblaze/futimesat.c: Remove file.

2016-03-29  Florian Weimer  <fweimer@redhat.com>

	[BZ #19879]
	CVE-2016-3075
	* resolv/nss_dns/dns-network.c (_nss_dns_getnetbyname_r): Do not
	copy name.

2016-03-29  Florian Weimer  <fweimer@redhat.com>

	[BZ #19837]
	* nss/nss_db/db-XXX.c (_nss_db_getENTNAME_r): Propagate ERANGE
	error if parse_line fails.

2016-03-28   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.h (bit_cpu_ERMS): New.
	(index_cpu_ERMS): Likewise.
	(reg_ERMS): Likewise.

2016-03-28  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/sysv/linux/sys/personality.h (UNAME26, FDPIC_FUNCPTRS,
	PER_LINUX_FDPIC): Add.

2016-03-28   H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Remove
	memcpy-avx512-no-vzeroupper.
	* sysdeps/x86_64/multiarch/memcpy-avx512-no-vzeroupper.S: Renamed
	to ...
	* sysdeps/x86_64/multiarch/memmove-avx512-no-vzeroupper.S: This.
	(MEMCPY): Don't define.
	(MEMCPY_CHK): Likewise.
	(MEMPCPY): Likewise.
	(MEMPCPY_CHK): Likewise.
	(MEMPCPY_CHK): Renamed to ...
	(__mempcpy_chk_avx512_no_vzeroupper): This.
	(MEMPCPY_CHK): Renamed to ...
	(__mempcpy_chk_avx512_no_vzeroupper): This.
	(MEMCPY_CHK): Renamed to ...
	(__memmove_chk_avx512_no_vzeroupper): This.
	(MEMCPY): Renamed to ...
	(__memmove_avx512_no_vzeroupper): This.
	(__memcpy_avx512_no_vzeroupper): New alias.
	(__memcpy_chk_avx512_no_vzeroupper): Likewise.

2016-03-28   H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18858]
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Remove
	mempcpy-ssse3, mempcpy-ssse3-back, mempcpy-avx-unaligned
	and mempcpy-avx512-no-vzeroupper.
	* sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S (MEMPCPY_CHK):
	New.
	(MEMPCPY): Likewise.
	* sysdeps/x86_64/multiarch/memcpy-avx512-no-vzeroupper.S
	(MEMPCPY_CHK): New.
	(MEMPCPY): Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S (MEMPCPY_CHK): New.
	(MEMPCPY): Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S (MEMPCPY_CHK): New.
	(MEMPCPY): Likewise.
	* sysdeps/x86_64/multiarch/mempcpy-avx-unaligned.S: Removed.
	* sysdeps/x86_64/multiarch/mempcpy-avx512-no-vzeroupper.S:
	Likewise.
	* sysdeps/x86_64/multiarch/mempcpy-ssse3-back.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy-ssse3.S: Likewise.

2016-03-28   H.J. Lu  <hongjiu.lu@intel.com>
	     Amit Pawar  <Amit.Pawar@amd.com>

	[BZ #19583]
	* sysdeps/x86/cpu-features.c (init_cpu_features): Set
	Fast_Unaligned_Copy with Fast_Unaligned_Load for Intel
	processors.  Set Fast_Copy_Backward for AMD Excavator
	processors.
	* sysdeps/x86/cpu-features.h (bit_arch_Fast_Unaligned_Copy):
	New.
	(index_arch_Fast_Unaligned_Copy): Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S (__new_memcpy): Check
	Fast_Unaligned_Copy instead of Fast_Unaligned_Load.

2016-03-25  Florian Weimer  <fweimer@redhat.com>

	[BZ #19791]
	* resolv/res_send.c (close_and_return_error): New function.
	(send_dg): Initialize *resplen2 after reopen failure.  Call
	close_and_return_error for error returns.  On error paths without
	__res_iclose, initialze *resplen2 explicitly.  Update comment for
	successful return.

2016-03-25  Florian Weimer  <fweimer@redhat.com>

	[BZ #19860]
	* sysdeps/x86_64/tst-audit10.c (avx512_enabled): Always return
	zero if the compiler does not provide the AVX512F bit.

2016-03-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19848]
	* sysdeps/i386/fpu/e_powl.S (p3): Rename to p2 and change value
	from 8 to 4.
	(__ieee754_powl): Compare integer exponent against 4 not 8.
	* sysdeps/x86_64/fpu/e_powl.S (p3): Rename to p2 and change value
	from 8 to 4.
	(__ieee754_powl): Compare integer exponent against 4 not 8.
	* math/auto-libm-test-in: Add more tests of pow.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/i686/fpu/multiarch/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2016-03-23  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/sysv/linux/futimens.c (futimens) [__NR_utimensat]:
	Make code unconditional.
	[!__NR_utimensat]: Remove conditional code.
	* sysdeps/unix/sysv/linux/lutimes.c (lutimes) [__NR_utimensat]:
	Make code unconditional.
	[!__NR_utimensat]: Remove conditional code.
	* sysdeps/unix/sysv/linux/utimensat.c (utimensat) [__NR_utimensat]:
	Make code unconditional.
	[!__NR_utimensat]: Remove conditional code.

2016-03-23  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/sysv/linux/dl-openat64.c (openat64) [__NR_openat]:
	Make code unconditional.

2016-03-23  Nick Alcock  <nick.alcock@oracle.com>

	* sysdeps/unix/sysv/linux/i386/pthread_cond_timedwait.S: Reload
	call-clobbered %eax on retry path.
	* sysdeps/unix/sysv/linux/i386/pthread_cond_wait.S: Likewise.

2016-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S (MEMCPY):
	Don't set %rcx twice before "rep movsb".

2016-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19583]
	* sysdeps/x86/cpu-features.c (get_common_indeces): Remove
	inline.  Check family before setting family, model and
	extended_model.  Set AVX, AVX2, AVX512, FMA and FMA4 usable
	bits here.
	(init_cpu_features): Replace HAS_CPU_FEATURE and
	HAS_ARCH_FEATURE with CPU_FEATURES_CPU_P and
	CPU_FEATURES_ARCH_P.  Set index_arch_AVX_Fast_Unaligned_Load
	for Intel processors with usable AVX2.  Call get_common_indeces
	for other processors with family == NULL.
	* sysdeps/x86/cpu-features.h (CPU_FEATURES_CPU_P): New macro.
	(CPU_FEATURES_ARCH_P): Likewise.
	(HAS_CPU_FEATURE): Use CPU_FEATURES_CPU_P.
	(HAS_ARCH_FEATURE): Use CPU_FEATURES_ARCH_P.

2016-03-22  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* malloc/Makefile ($(objpfx)tst-malloc-backtrace,
	$(objpfx)tst-malloc-thread-exit, $(objpfx)tst-malloc-thread-fail): Use
	$(shared-thread-library) instead of hardcoding the path to libpthread.

2016-03-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_GETDENTS64_SYSCALL): Remove macro.
	* sysdeps/unix/sysv/linux/getdents.c
	[!__ASSUME_GETDENTS64_SYSCALL]: Remove conditional code.
	[!have_no_getdents64_defined]: Likewise.
	(__GETDENTS): Remove __have_no_getdents64 conditional.

2016-03-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_SIGNALFD4):
	Remove macro.
	* sysdeps/unix/sysv/linux/signalfd.c: Do not include
	<kernel-features.h>.
	(signalfd) [__NR_signalfd4]: Make code unconditional.
	(signalfd) [!__ASSUME_SIGNALFD4]: Remove conditional code.

2016-03-21  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/spawni.c (__spawnix): Fix implict checks
	style.

2016-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/cancellation.S
	(__pthread_enable_asynccancel): Use JUMPTARGET to call
	__pthread_unwind.
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S
	(__condvar_cleanup2): Use JUMPTARGET to call _Unwind_Resume.
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S
	(__condvar_cleanup1): Likewise.

2016-03-21  Dylan Alex Simon  <dylan-sourceware@dylex.net>

	[BZ #19822]
	* math/Makefile ($(inst_libdir)/libm.so): Write output to $@.tmp and
	move it to the final $@ location.

2016-03-20  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/spawni.c (__spawnix): Fix invalid memory
	access where posix_spawn success and pid argument is null.
	* posix/tst-spawn.c (do_test): Add posix_spawn null pid argument for
	success case.

2016-03-20  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/i386/c++-types.data: New file.

	* sysdeps/mach/hurd/libc-lock.h (_IO_lock_inexpensive): Define to 1.

	* sysdeps/generic/dl-fcntl.h: New file, adds attribute_hidden to __open
	and __fcntl.
	* sysdeps/mach/hurd/dl-fcntl.h: New file, adds attribute_hidden to
	__fcntl only.
	* include/fcntl.h [IS_IN (rtld)]: Include <dl-fcntl.h> instead of
	adding attribute_hidden to __open and __fcntl.

	* sysdeps/mach/hurd/Makefile ($(common-objpfx)errnos.d): Strip
	"-include $(common-objpfx)libc-modules.h" from CPPFLAGS, and do not
	depend on libc-modules.h,
	* mach/Makefile ($(objpfx)mach-syscalls.mk): Depend on libc-modules.h.

2016-03-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_EVENTFD2):
	Remove macro.
	* sysdeps/unix/sysv/linux/eventfd.c: Remove file.
	* sysdeps/unix/sysv/linux/syscalls.list (eventfd): New syscall
	entry.

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_FALLOCATE):
	Remove macro.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c: Do not
	include <kernel-features.h>.
	[!__ASSUME_FALLOCATE]: Remove conditional code.
	(posix_fallocate) [__NR_fallocate]: Make code unconditional.

2016-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/multiarch/svml_d_cos2_core_sse4.S
	(_ZGVbN2v_cos_sse4): Use JUMPTARGET to call cos.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos4_core_avx2.S
	(_ZGVdN4v_cos_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos8_core_avx512.S
	(_ZGVdN4v_cos): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp2_core_sse4.S
	(_ZGVbN2v_exp_sse4): Use JUMPTARGET to call exp.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp4_core_avx2.S
	(_ZGVdN4v_exp_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp8_core_avx512.S
	(_ZGVdN4v_exp): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log2_core_sse4.S
	(_ZGVbN2v_log_sse4): Use JUMPTARGET to call log.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log4_core_avx2.S
	(_ZGVdN4v_log_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log8_core_avx512.S
	(_ZGVdN4v_log): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow2_core_sse4.S
	(_ZGVbN2vv_pow_sse4): Use JUMPTARGET to call pow.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow4_core_avx2.S
	(_ZGVdN4vv_pow_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow8_core_avx512.S
	(_ZGVdN4vv_pow): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin2_core_sse4.S
	(_ZGVbN2v_sin_sse4): Use JUMPTARGET to call sin.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin4_core_avx2.S
	(_ZGVdN4v_sin_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin8_core_avx512.S
	(_ZGVdN4v_sin): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos2_core_sse4.S
	(_ZGVbN2vvv_sincos_sse4): Use JUMPTARGET to call sin and cos.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos4_core_avx2.S
	(_ZGVdN4vvv_sincos_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos8_core_avx512.S
	(_ZGVdN4vvv_sincos): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf16_core_avx512.S
	(_ZGVdN8v_cosf): Use JUMPTARGET to call cosf.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf4_core_sse4.S
	(_ZGVbN4v_cosf_sse4): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf8_core_avx2.S
	(_ZGVdN8v_cosf_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf16_core_avx512.S
	(_ZGVdN8v_expf): Use JUMPTARGET to call expf.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf4_core_sse4.S
	(_ZGVbN4v_expf_sse4): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf8_core_avx2.S
	(_ZGVdN8v_expf_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf16_core_avx512.S
	(_ZGVdN8v_logf): Use JUMPTARGET to call logf.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf4_core_sse4.S
	(_ZGVbN4v_logf_sse4): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf8_core_avx2.S
	(_ZGVdN8v_logf_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf16_core_avx512.S
	(_ZGVdN8vv_powf): Use JUMPTARGET to call powf.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf4_core_sse4.S
	(_ZGVbN4vv_powf_sse4): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf8_core_avx2.S
	(_ZGVdN8vv_powf_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf16_core_avx512.S
	(_ZGVdN8vv_powf): Use JUMPTARGET to call sinf and cosf.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf4_core_sse4.S
	(_ZGVbN4vvv_sincosf_sse4): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf8_core_avx2.S
	(_ZGVdN8vvv_sincosf_avx2): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf16_core_avx512.S
	(_ZGVdN8v_sinf): Use JUMPTARGET to call sinf.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf4_core_sse4.S
	(_ZGVbN4v_sinf_sse4): Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf8_core_avx2.S
	(_ZGVdN8v_sinf_avx2): Likewise.
	* sysdeps/x86_64/fpu/svml_d_wrapper_impl.h (WRAPPER_IMPL_SSE2):
	Use JUMPTARGET to call callee.
	(WRAPPER_IMPL_SSE2_ff): Likewise.
	(WRAPPER_IMPL_SSE2_fFF): Likewise.
	(WRAPPER_IMPL_AVX): Likewise.
	(WRAPPER_IMPL_AVX_ff): Likewise.
	(WRAPPER_IMPL_AVX_fFF): Likewise.
	(WRAPPER_IMPL_AVX512): Likewise.
	(WRAPPER_IMPL_AVX512_ff): Likewise.
	* sysdeps/x86_64/fpu/svml_s_wrapper_impl.h (WRAPPER_IMPL_SSE2):
	Likewise.
	(WRAPPER_IMPL_SSE2_ff): Likewise.
	(WRAPPER_IMPL_SSE2_fFF): Likewise.
	(WRAPPER_IMPL_AVX): Likewise.
	(WRAPPER_IMPL_AVX_ff): Likewise.
	(WRAPPER_IMPL_AVX_fFF): Likewise.
	(WRAPPER_IMPL_AVX512): Likewise.
	(WRAPPER_IMPL_AVX512_ff): Likewise.
	(WRAPPER_IMPL_AVX512_fFF): Likewise.

2016-03-16  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/openat.c (__openat): Add missing ellipsis.
	* resolv/gai_sigqueue.c (__gai_sigqueue): Add missing internal_function
	qualifier.
	* /rt/aio_sigqueue.c (__aio_sigqueue): Add missing attribute_hidden
	internal_function qualifiers.

2016-03-15  Carlos O'Donell <carlos@redhat.com>

	* catgets/tst-catgets.c (do_bz17905): Mark result unused.
	* dlfcn/bug-dl-leaf-lib.c (check_val_fini): Mark ret unused.
	* math/atest-exp.c (exp_mpn): Mark chk unused.
	* math/atest-exp2.c (exp_mpn): Likewise.
	* sysdeps/arm/dl-machine.h (elf_machine_rela): Mark td unused.
	* sysdeps/i386/i686/dl-hash.h: Mark _dl_elf_hash unused.

2016-03-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_PPOLL):
	Remove macro.
	* sysdeps/unix/sysv/linux/ppoll.c: Do not include
	<kernel-features.h>.
	[__NR_ppoll]: Make code unconditional.
	[!__ASSUME_PPOLL]: Remove conditional code.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Define unconditionally.
	(__ASSUME_ACCEPT4): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Define.
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG):
	Likewise.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h: Remove file.
	* sysdeps/unix/sysv/linux/nios2/kernel-features.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL): Do not define.
	(__ASSUME_ACCEPT4_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_ACCEPT4_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Likewise.
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	(__ASSUME_ACCEPT4_SYSCALL): Undefine if [__LINUX_KERNEL_VERSION <
	0x040300] instead of defining if [__LINUX_KERNEL_VERSION >=
	0x040300].
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL): Do not define.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	(__ASSUME_ACCEPT4_SYSCALL): Undefine if [__LINUX_KERNEL_VERSION <
	0x030300] instead of defining if [__LINUX_KERNEL_VERSION >=
	0x030300].
	[__LINUX_KERNEL_VERSION < 0x030300] (__ASSUME_ACCEPT4): Undefine.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Undefine if [__LINUX_KERNEL_VERSION <
	0x040300] instead of defining if [__LINUX_KERNEL_VERSION >=
	0x040300].
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Do not define.
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Undefine if [__LINUX_KERNEL_VERSION <
	0x030300] instead of defining if [__LINUX_KERNEL_VERSION >=
	0x030300].
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Do not define.
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Likewise.
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/s390/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Undefine if [__LINUX_KERNEL_VERSION <
	0x040300] instead of defining if [__LINUX_KERNEL_VERSION >=
	0x040300].
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Do not define.
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Likewise.
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Likewise.
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/kernel-features.h
	(__ASSUME_ACCEPT4_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.

2016-03-15  Andreas Schwab  <schwab@suse.de>

	[BZ #19257]
	* resolv/res_init.c (__res_iclose): Use statp->nscount instead of
	statp->_u._ext.nscount as loop count.

2016-03-14  Andreas Schwab  <schwab@linux-m68k.org>

	* math/test-signgam-finite-c99.c: Also #undef
	__LIBC_INTERNAL_MATH_INLINES.
	* math/test-signgam-main.c: Likewise.

2016-03-14  Joseph Myers  <joseph@codesourcery.com>

	* bits/mman-linux.h [__USE_MISC] (MADV_FREE): New macro.
	* sysdeps/unix/sysv/linux/hppa/bits/mman.h [__USE_MISC]
	(MADV_FREE): Likewise.
	* sysdeps/unix/sysv/linux/bits/in.h (IPV6_HDRINCL): Likewise.
	* sysdeps/unix/sysv/linux/sys/epoll.h (enum EPOLL_EVENTS): Add
	EPOLLEXCLUSIVE.

2016-03-14  Carlos O'Donell  <carlos@redhat.com>

	* timezone/README: Remove mention of checktab.awk. Mention wiki
	SharedSourceFiles.

2016-03-13  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/posix/waitid.c (OUR_WAITID): Test against WSTOPPED instead of
	WUNTRACED.

2016-03-11  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* malloc/malloc.c (malloc_consolidate): Replace 0 by NULL in
	order to match the type of p when calling atomic_exchange_acq().

2016-03-11  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/memcmp.S (memcmp): Rearrange
	cfi_offset calls.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S (memcpy): Likewise.
	* sysdeps/powerpc/powerpc32/power7/memcmp.S (memcmp): Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S (memcmp): Likewise.
	* sysdeps/powerpc/powerpc64/power7/memcmp.S (memcmp): Likewise.
	* sysdeps/powerpc/powerpc64/power7/strstr.S (strstr): Likewise.

2016-03-10  Carlos O'Donell  <carlos@redhat.com>

	* timezone/checktab.awk: Removed.

2016-03-10  Joseph Myers  <joseph@codesourcery.com>

	* manual/math.texi (Errors in Math Functions): Document relaxed
	accuracy goals for IBM long double.
	* math/libm-test.inc (test_exceptions): Always allow spurious
	"underflow" and "inexact" exceptions for IBM long double.

2016-03-10  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19762]
	* sysdeps/unix/sysv/linux/x86_64/64/dl-librecon.h
	(EXTRA_LD_ENVVARS): Add _arch_ to index_*/bit_*.
	* sysdeps/x86/cpu-features.c (init_cpu_features): Likewise.
	* sysdeps/x86/cpu-features.h (bit_*): Renamed to ...
	(bit_arch_*): This for feature array.
	(bit_*): Renamed to ...
	(bit_cpu_*): This for cpu array.
	(index_*): Renamed to ...
	(index_arch_*): This for feature array.
	(index_*): Renamed to ...
	(index_cpu_*): This for cpu array.
	[__ASSEMBLER__] (HAS_FEATURE): Add and use field.
	[__ASSEMBLER__] (HAS_CPU_FEATURE)): Pass cpu to HAS_FEATURE.
	[__ASSEMBLER__] (HAS_ARCH_FEATURE)): Pass arch to HAS_FEATURE.
	[!__ASSEMBLER__] (HAS_CPU_FEATURE): Replace index_##name and
	bit_##name with index_cpu_##name and bit_cpu_##name.
	[!__ASSEMBLER__] (HAS_ARCH_FEATURE): Replace index_##name and
	bit_##name with index_arch_##name and bit_arch_##name.

2016-03-09  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #19792]
	* sysdeps/unix/sysv/linux/mips/makecontext.S (__makecontext):
	Terminate FDE before return label.

2016-03-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19790]
	* sysdeps/ieee754/ldbl-128ibm/s_rintl.c [USE_AS_NEARBYINTL]
	(rintl): Define as macro.
	[USE_AS_NEARBYINTL] (__rintl): Likewise.
	(__rintl) [USE_AS_NEARBYINTL]: Use SET_RESTORE_ROUND_NOEX instead
	of fesetround.  Ensure results are evaluated before end of scope.
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Define
	USE_AS_NEARBYINTL and include s_rintl.c.
	* sysdeps/powerpc/fpu/fenv_private.h (libc_feholdsetround_ppc):
	Disable exception traps in new environment.
	(libc_feholdsetround_ppc_ctx): Likewise.

2016-03-08  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/tst-audit10.c: #include <cpu-features.h>.
	* sysdeps/x86_64/tst-audit10-aux.c: Move audit_test extern decl ...
	(tst_audit10_aux) [__AVX512F__]: ... here.

2016-03-08  Aurelien Jarno  <aurelien@aurel32.net>

	* include/sys/auxv.h: New file.

2016-03-08  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19759]
	* sysdeps/x86/bits/string.h (_HAVE_STRING_ARCH_mempcpy): New.

2016-03-08  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/powerpc/bits/fenvinline.h (feraiseexcept): Remove use of %s
	operand modifier.
	(feclearexcept): Likewise.

2016-03-08  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c (_dl_powerpc_cap_flags): Updated
	to reflect the entire 32-bit HWCAP.
	* sysdeps/powerpc/dl-procinfo.h: Code cleanup.
	(_DL_HWCAP_FIRST): Removed.  Replaced by 0 accordingly.

2016-03-08  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19783]
	* benchtests/Makefile (run-bench): Replace $(rtld-prefix) with
	$(test-via-rtld-prefix).
	($(binaries-bench)): Replace $(+link) with $(+link-tests).

2016-03-08  Florian Weimer  <fweimer@redhat.com>

	* sunrpc/key_call.c (key_call_keyenvoy): Use int status instead of
	union wait.  Report any non-zero exit status as error.

2016-03-07  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* posix/tst-execvpe5.c (do_test): Fix fix test invocation when
	configured with --enable-hardcoded-path-in-tests.

2016-03-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19677]
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c
	(__ieee754_remainderl): Put zero low parts in canonical form.
	* sysdeps/ieee754/ldbl-128ibm/test-fmodrem-ldbl-128ibm.c: New
	file.  Based on
	sysdeps/ieee754/ldbl-128ibm/test-fmodl-ldbl-128ibm.c.
	* sysdeps/ieee754/ldbl-128ibm/test-fmodl-ldbl-128ibm.c: Replace
	with wrapper round test-fmodrem-ldbl-128ibm.c.
	* sysdeps/ieee754/ldbl-128ibm/test-remainderl-ldbl-128ibm.c: New
	file.
	* sysdeps/ieee754/ldbl-128ibm/test-remquol-ldbl-128ibm.c:
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/Makefile (tests): Add
	test-remainderl-ldbl-128ibm and test-remquol-ldbl-128ibm.

2016-03-07  Florian Weimer  <fweimer@redhat.com>

	[BZ #19610]
	* elf/ldconfig.c (opt_link): Update comment.
	(options): Update help string for option -X.
	(search_dir): Unlink stale symbolic link only if updating symbolic
	links.
	* elf/tst-ldconfig-X.sh: New file.
	* elf/Makefile (tests-special): Add tst-ldconfig-X.out.
	(tst-ldconfig-X.out): New rule to run tst-ldconfig-X.sh.

2016-03-07  Andreas Schwab  <schwab@suse.de>

	* iconv/gconv_builtin.h ("=ascii->INTERNAL"): Correct min/max
	needed arguments.

2016-03-07  Hongjiu Zhang  <noctuorare@gmail.com>

	[BZ #15333]
	* elf/sln.c (makesymlink): Change struct stat to stat64, and lstat
	to lstat64.

2016-03-07  Florian Weimer  <fweimer@redhat.com>

	* libio/filedoalloc.c (isatty): Remove.
	(local_isatty): Add comment.  Call __isatty directly.
	(_IO_file_doallocate): Update comment.  Assume _LIBC.
	* libio/wfiledoalloc.c (isatty): Remove.
	(_IO_wfile_doallocate): Update comment.

2016-03-07  Florian Weimer  <fweimer@redhat.com>

	[BZ #19269]
	* sysdeps/x86_64/Makefile (tst-audit4): Depend on
	tst-audit4-aux.o.
	(tst-audit10): Depend on tst-audit10-aux.o.
	(CFLAGS-tst-audit4-aux.c): Compile with AVX enabled.
	(CFLAGS-tst-audit10-aux.c): Compile with AVX512 enabled.
	* sysdeps/x86_64/tst-audit4.c (do_test): Call tst_audit4_aux
	instead of inline AVX code.
	* sysdeps/x86_64/tst-audit10.c (do_test): Call tst_audit10_aux
	instead of inline AVX512 code.
	* sysdeps/x86_64/tst-audit4-aux.c: New file
	* sysdeps/x86_64/tst-audit10-aux.c: New file

	[BZ #19648]
	* test-skeleton.c (main): Do not set RLIMIT_DATA.

2016-03-07  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #14750]
	[BZ #10354]
	[BZ #18433]
	* include/sched.h (__clone): Add hidden prototype.
	(__clone2): Likewise.
	* include/unistd.h (__dup): Likewise.
	* posix/Makefile (tests): Add tst-spawn2.
	* posix/tst-spawn2.c: New file.
	* sysdeps/posix/dup.c (__dup): Add hidden definition.
	* sysdeps/unix/sysv/linux/aarch64/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/alpha/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/arm/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/hppa/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/i386/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/ia64/clone2.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/m68k/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/mips/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/nios2/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S (__clone):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (__clone):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/sh/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/tile/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/clone.S (__clone): Likewise.
	* sysdeps/unix/sysv/linux/nptl-signals.h
	(____nptl_is_internal_signal): New function.
	* sysdeps/unix/sysv/linux/spawni.c: New file.

	* posix/execvpe.c (__execvpe): Remove dynamic allocation.
	* posix/Makefile (tests): Add tst-execvpe{1,2,3,4,5,6}.
	* posix/tst-execvp1.c (do_test): Use a macro to call execvp.
	* posix/tst-execvp2.c (do_test): Likewise.
	* posix/tst-execvp3.c (do_test): Likewise.
	* posix/tst-execvp4.c (do_test): Likewise.
	* posix/tst-execvpe1.c: New file.
	* posix/tst-execvpe2.c: Likewise.
	* posix/tst-execvpe3.c: Likewise.
	* posix/tst-execvpe4.c: Likewise.
	* posix/tst-execvpe5.c: Likewise.
	* posix/tst-execvpe6.c: Likewise.

	[BZ #19534]
	* posix/execl.c (execl): Remove dynamic memory allocation.
	* posix/execle.c (execle): Likewise.
	* posix/execlp.c (execlp): Likewise.

2016-03-06  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcpy-avx512-no-vzeroupper.S:
	Replace .text with .text.avx512.
	* sysdeps/x86_64/multiarch/memset-avx512-no-vzeroupper.S:
	Likewise.

2016-03-07  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/generic/libnsl.abilist: New file.
	* sysdeps/generic/libutil.abilist: New file.

2016-03-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19762]
	* sysdeps/i386/i686/multiarch/bcopy.S (bcopy): Use
	HAS_ARCH_FEATURE with Fast_Rep_String.
	* sysdeps/i386/i686/multiarch/bzero.S (__bzero): Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S (memcpy): Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S (__memcpy_chk):
	Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S (__memmove_chk):
	Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S (__mempcpy): Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S (__mempcpy_chk):
	Likewise.
	* sysdeps/i386/i686/multiarch/memset.S (memset): Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S (__memset_chk):
	Likewise.

2016-03-04  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19745]
	* sysdeps/x86_64/crti.S (_init): Replace PREINIT_FUNCTION@PLT
	with *%rax in call.

2016-03-04  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19745]
	* sysdeps/x86_64/start.S (_start): Replace __libc_start_main@PLT
	with *__libc_start_main@GOTPCREL(%rip) in call.

2016-03-04  Roland McGrath  <roland@hack.frob.com>

	* Makefile (tests-special): Add $(objpfx)c++-types-check.out only
	inside conditional for nonempty $(CXX).

	* math/Makefile (tests): Add test-math-isinff only if $(CXX) is
	nonempty.

	* Makefile ($(objpfx)c++-types-check.out): Fix conditionalization
	to test for empty $(CXX) rather than $(CXX) of "no".

2016-03-04  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Makefile (sysdep_noprof): Add comments.

2016-03-04  Amit Pawar  <Amit.Pawar@amd.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18880]
	* sysdeps/x86_64/multiarch/memcpy.S: Check Fast_Unaligned_Load,
	instead of Slow_BSF, and also check for Fast_Copy_Backward to
	enable __memcpy_ssse3_back.

2016-03-03  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19758]
	* sysdeps/unix/sysv/linux/x86_64/64/dl-librecon.h
	(EXTRA_LD_ENVVARS): Or in bit_Prefer_MAP_32BIT_EXEC.

2016-03-03  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #19490]
	* sysdeps/x86_64/_mcount.S (_mcount): Add unwind descriptor.
	(__fentry__): Likewise.

2016-03-03  H.J. Lu  <hongjiu.lu@intel.com>

	* gmon/Makefile (noprof): Add $(sysdep_noprof).
	* sysdeps/x86_64/Makefile (sysdep_noprof): Add _mcount.

2016-03-01  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/_mcount.S (C_LABEL(_mcount)): Call
	__mcount_internal directly.
	(C_LABEL(__fentry__)): Likewise.
	* sysdeps/x86_64/setjmp.S __sigsetjmp): Call __sigjmp_save
	directly.

2016-03-01  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/__start_context.S
	(__start_context): Call __setcontext directly.

2016-02-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621]: Make code unconditional.
	[__LINUX_KERNEL_VERSION >= 0x030200]: Likewise.
	[__LINUX_KERNEL_VERSION < 0x020621]: Remove conditional code.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621]: Make code unconditional.
	[__LINUX_KERNEL_VERSION >= 0x020624]: Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000]: Likewise.
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020622]: Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030100]: Likewise.
	[__LINUX_KERNEL_VERSION < 0x020625]: Remove conditional code.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621]: Make code unconditional.
	[__LINUX_KERNEL_VERSION >= 0x030000]: Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x030000]: Remove conditional code.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621]: Make code unconditional.
	[__LINUX_KERNEL_VERSION < 0x020621]: Remove conditional code.
	[__LINUX_KERNEL_VERSION < 0x020625]: Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621]: Make code unconditional.
	[__LINUX_KERNEL_VERSION >= 0x030100]: Likewise.
	[_MIPS_SIM == _ABIN32 && __LINUX_KERNEL_VERSION < 0x020623]:
	Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020625]: Make code unconditional.
	[__LINUX_KERNEL_VERSION >= 0x030000]: Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020625]: Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000]: Likewise.
	[__LINUX_KERNEL_VERSION < 0x020625]: Remove conditional code.
	* sysdeps/unix/sysv/linux/sparc/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621]: Make code unconditional.
	[__LINUX_KERNEL_VERSION >= 0x030000]: Likewise.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030000]: Likewise.

2016-02-24  Marko Myllynen  <myllynen@redhat.com>

	* NEWS (2.23): Fix typo in bug 19048 text.

2016-02-24  Carlos O'Donell  <carlos@redhat.com>

	[BZ #14259]
	* Makeconfig: Rename msgcatdir to localedir.
	Rename inst_msgcatdir to inst_localedir.
	* catgets/Makefile (catgets-CPPFLAGS): Use localedir.
	* config.make.in: Add localedir.
	* elf/Makefile ($(objpfx)sotruss): Use localedir.
	(ldd-rewrite): Likewise.
	* intl/Makefile: Rename inst_msgcatdir to inst_localedir.
	(install-others): Use inst_localedir.
	(CPPFLAGS): Use localedir.
	* locale/Makefile (locale-CPPFLAGS): Likewise.
	* po/Makefile (mo-installed): Use inst_localedir.

	[BZ #19575]
	* localedata/charmaps/GB18030: Update comments regarding PAU to
	non-PUA mappings.

2016-02-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/configure.ac (linux/fanotify.h): Do not
	test for header.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* config.h.in (HAVE_LINUX_FANOTIFY_H): Remove #undef.
	* sysdeps/unix/sysv/linux/tst-fanotify.c [!HAVE_LINUX_FANOTIFY_H]:
	Remove conditional code.
	[HAVE_LINUX_FANOTIFY_H]: Make code unconditional.

	* sysdeps/unix/sysv/linux/configure.ac (LIBC_LINUX_VERSION):
	Define to 3.2.0.
	(arch_minimum_kernel): Likewise.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/i386/configure.ac (arch_minimum_kernel):
	Define to 2.6.32.
	* sysdeps/unix/sysv/linux/i386/configure: Regenerated.
	* sysdeps/unix/sysv/linux/x86_64/64/configure.ac
	(arch_minimum_kernel): Define to 2.6.32.
	* sysdeps/unix/sysv/linux/x86_64/64/configure: Regenerated.
	* README: Document Linux 3.2 requirement.
	* manual/install.texi (Linux): Document Linux 3.2 headers
	requirement.
	* INSTALL: Regenerated.

2016-02-24  Andreas Schwab  <schwab@suse.de>

	* math/test-math-isinff.cc (do_test): Only call isinfl and isnanl
	if !NO_LONG_DOUBLE.

2016-02-22  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/nacl/libc.abilist (GLIBC_2.23): Add GLIBC_2.23,
	fts64_children, fts64_close, fts64_open, fts64_read and fts64_set.

2016-02-22  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #19512]
	* config.h.in (HAVE_BUILTIN_EXPECT): New macro.

2016-02-22  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* posix/tst-dir.c: Include libc-internal.h.

2016-02-20  Florian Weimer  <fweimer@redhat.com>

	[BZ #19056]
	* dirent/dirent.h (readdir_r, readdir64_r): Mark as deprecated.
	* manual/filesys.texi (Reading/Closing Directory): Mention
	deprecaion.
	* posix/tst-dir.c (main): Disable deprecation warning in test.

2016-02-19  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19679]
	* sysdeps/x86_64/dl-trampoline.S (DL_RUNIME_UNALIGNED_VEC_SIZE):
	Renamed to ...
	(DL_RUNTIME_UNALIGNED_VEC_SIZE): This.  Set to 8.
	(DL_RUNIME_RESOLVE_REALIGN_STACK): Renamed to ...
	(DL_RUNTIME_RESOLVE_REALIGN_STACK): This.  Updated.
	(DL_RUNIME_RESOLVE_REALIGN_STACK): Renamed to ...
	(DL_RUNTIME_RESOLVE_REALIGN_STACK): This.
	* sysdeps/x86_64/dl-trampoline.h
	(DL_RUNIME_RESOLVE_REALIGN_STACK): Renamed to ...
	(DL_RUNTIME_RESOLVE_REALIGN_STACK): This.

2016-02-19  Mark Wielaard  <mjw@redhat.com>

	* elf/elf.h: Add NT_ARM_SYSTEM_CALL.

2016-02-19  Mark Wielaard  <mjw@redhat.com>

	* elf/elf.h (R_386_GOT32X): New.
	(R_386_NUM): Update.
	(R_X86_64_GOTPCRELX: New.
	(R_X86_64_REX_GOTPCRELX): New.
	(R_X86_64_NUM): Update.

2016-02-19  Mike Frysinger  <vapier@gentoo.org>

	* test-skeleton.c (TIMEOUT): Change to 20 and adjust comment.

2016-02-19  Carlos O'Donell  <carlos@systemhalted.org>

	* nptl/allocatestack.c (allocate_stack): Declare new stackaddr,
	assign attr->stackaddr to it, and adjust it down when
	_STACK_GROWS_UP.  Change all attr->stackaddr to stackaddr.
	[_STACK_GROWS_UP]: Delete assert.
	* nptl/pthread_create.c (START_THREAD_DEFN) [!_STACK_GROWS_DOWN]:
	Implement stack grows up logic.
	* nptl/pthread_getattr_np.c (pthread_getattr_np): Implement
	stack grows up logic.

2016-02-19  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* NEWS: Update with 2.24 template.

2016-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19678]
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c (__nextafterl):
	Ensure +0.0 is returned when taking the next value below the least
	positive value.

2016-02-19  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/generic/malloc-machine.h: Assume mutex_init is always
	available.  Do not define NO_THREADS.
	* malloc/malloc.c: Do not check NO_THREADS.
	* malloc/arena.c: Likewise.

2016-02-19  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc.c (__libc_mallinfo): Update comment.
	(struct malloc_par): Remove max_total_mem member, it was always 0.
	(int_mallinfo): Store 0 into usmblks (no functional change).
	* malloc/hooks.c (struct malloc_state): Document that
	max_total_mem is always 0.
	* malloc/malloc.h (struct mallinfo): Dcoument that usmblks is
	always 0.
	* manual/memory.texi (Statistics of Malloc): Likewise.

2016-02-19  Florian Weimer  <fweimer@redhat.com>

	* malloc/malloc.c (sysmalloc): Do not update arena_max.
	* malloc/arena.c (arena_max): Remove.
	(heap_trim, _int_new_arena): Do not update arena_max.

2016-02-19  Florian Weimer  <fweimer@redhat.com>

	* resolv/res_init.c (res_ninit): Update comment.

2016-02-19  Florian Weimer  <fweimer@redhat.com>

	[BZ #19505]
	* posix/spawn_int.h: Add headers and include guard.
	(__spawn_valid_fd): New function.
	* posix/spawn_faction_addopen.c
	(posix_spawn_file_actions_addopen): Use __spawn_valid_fd.
	* posix/spawn_faction_addclose.c
	(posix_spawn_file_actions_addclose): Likewise.
	* posix/spawn_faction_adddup2.c
	(posix_spawn_file_actions_adddup2): Likewise.  Add check for
	second file descriptor.
	* posix/spawn_valid_fd.c: New file.
	* posix/tst-posix_spawn-fd.c: New file.
	* posix/Makefile (routines): Add spawn_valid_fd.
	(tests): Add tst-posix_spawn-fd.

2016-02-19  Florian Weimer  <fweimer@redhat.com>

	* malloc/tst-malloc-thread-exit.c: Include test-skeleton.c early.
	(do_test): Limit the number of arenas, so that we can use fewer
	outer threads.  Limit timeout to 3 seconds, in preparation for a
	larger TIMEOUT value.

2016-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19674]
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Include
	sign in overflowing and underflowing results when overflow or
	underflow is detected early.  Include sign in result before rather
	than after scaling.

	[BZ #19603]
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c
	(__ieee754_remainderl): Adjust sign of integer version of low part
	when taking absolute value of high part.
	* sysdeps/ieee754/ldbl-128ibm/s_remquol.c (__remquol): Likewise.
	* math/libm-test.inc (remainder_test_data): Add another test.
	(remquo_test_data): Likewise.

2016-02-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19602]
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c (__ieee754_fmodl): Handle
	equal high parts and both low parts zero specially.
	* sysdeps/ieee754/ldbl-128ibm/test-fmodl-ldbl-128ibm.c: New test.
	* sysdeps/ieee754/ldbl-128ibm/Makefile [$(subdir) = math] (tests):
	Add test-fmodl-ldbl-128ibm.

	[BZ #19595]
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c (__ieee754_fmodl): Use
	common logic for all cases of shifting subnormal results.  Do not
	insert sign bit in shifted mantissa.  Always pass -1023 as biased
	exponent to ldbl_insert_mantissa in subnormal case.

	[BZ #19594]
	* sysdeps/ieee754/ldbl-128ibm/s_roundl.c (__roundl): Use __round
	on high and low parts then adjust result and use
	ldbl_canonicalize_int if needed.

	[BZ #19593]
	* sysdeps/ieee754/ldbl-128ibm/s_truncl.c (__truncl): Use __trunc
	on high part and __floor or __ceil on low part then use
	ldbl_canonicalize_int if needed.

	[BZ #19592]
	* sysdeps/ieee754/ldbl-128ibm/s_ceill.c (__ceill): Use __ceil on
	high and low parts then use ldbl_canonicalize_int if needed.

	[BZ #17899]
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_canonicalize_int):
	New function.
	* sysdeps/ieee754/ldbl-128ibm/s_floorl.c (__floorl): Use __floor
	on high and low parts then use ldbl_canonicalize_int if needed.

2016-02-18  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* configure: Regenerated.

	* po/libc.pot: Regenerated.

	* po/be.po: Updated translation.
	* po/bg.po: Likewise.
	* po/ca.po: Likewise.
	* po/cs.po: Likewise.
	* po/da.po: Likewise.
	* po/el.po: Likewise.
	* po/eo.po: Likewise.
	* po/es.po: Likewise.
	* po/fi.po: Likewise.
	* po/fr.po: Likewise.
	* po/gl.po: Likewise.
	* po/hr.po: Likewise.
	* po/hu.po: Likewise.
	* po/ia.po: Likewise.
	* po/id.po: Likewise.
	* po/it.po: Likewise.
	* po/ja.po: Likewise.
	* po/lt.po: Likewise.
	* po/nb.po: Likewise.
	* po/nl.po: Likewise.
	* po/pt_BR.po: Likewise.
	* po/rw.po: Likewise.
	* po/sk.po: Likewise.
	* po/sl.po: Likewise.
	* po/sv.po: Likewise.
	* po/tr.po: Likewise.
	* po/zh_CN.po: Likewise.
	* po/zh_TW.po: Likewise.

	* version.h (RELEAES): Set to "development".
	(VERSION): Set to 2.23.90.

	* version.h (RELEASE): Set to "stable".
	(VERSION): Set to 2.23.
	* include/feature.h (__GLIBC_MINOR__): Set to 23.

	* NEWS: Updated fixed bugs.

2016-02-18  H.J. Lu  <hongjiu.lu@intel.com>
	    Wilco Dijkstra  <wdijkstr@arm.com>

	[BZ #19462]
	* bits/string.h (_STRING_ARCH_unaligned): Renamed to ...
	(_STRING_INLINE_unaligned): This.
	* include/string.h: Include <string_private.h>.
	* string/bits/string2.h: Replace _STRING_ARCH_unaligned with
	_STRING_INLINE_unaligned.
	* sysdeps/aarch64/bits/string.h (_STRING_ARCH_unaligned): Removed.
	(_STRING_INLINE_unaligned): New.
	* sysdeps/aarch64/string_private.h: New file.
	* sysdeps/generic/string_private.h: Likewise.
	* sysdeps/m68k/m680x0/m68020/string_private.h: Likewise.
	* sysdeps/s390/string_private.h: Likewise.
	* sysdeps/x86/string_private.h: Likewise.
	* sysdeps/m68k/m680x0/m68020/bits/string.h
	(_STRING_ARCH_unaligned): Renamed to ...
	(_STRING_INLINE_unaligned): This.
	* sysdeps/s390/bits/string.h (_STRING_ARCH_unaligned): Renamed
	to ...
	(_STRING_INLINE_unaligned): This.
	* sysdeps/sparc/bits/string.h (_STRING_ARCH_unaligned): Renamed
	to ...
	(_STRING_INLINE_unaligned): This.
	* sysdeps/x86/bits/string.h (_STRING_ARCH_unaligned): Renamed
	to ...
	(_STRING_INLINE_unaligned): This.

2016-02-17  Andrew Senkevich  <andrew.senkevich@intel.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19590]
	* sysdeps/x86_64/fpu/svml_finite_alias.S (ALIAS_IMPL): Use PIC
	relocation.

2016-02-15  Carlos O'Donell  <carlos@redhat.com>

	[BZ #18665]
	* resolv/nss_dns/dns-host.c (gaih_getanswer_slice): Always set
	*herrno_p.
	(gaih_getanswer): Document functional behviour. Return tryagain
	if any result is tryagain.
	* resolv/res_query.c (__libc_res_nsearch): Set buffer size to zero
	when freed.
	* resolv/res_send.c: Add copyright text.
	(__libc_res_nsend): Document that MAXPACKET is expected.
	(send_vc): Document. Remove buffer reuse.
	(send_dg): Document. Remove buffer reuse. Set *thisanssizp to set the
	size of the buffer. Add Dprint for truncated UDP buffer.

2016-02-14  Carlos O'Donell  <carlos@redhat.com>

	* manual/install.texi: Latest tested is GCC 5.3, texinfo 6.0, gawk
	4.1.3, and sed 4.2.2. Remove po2test.sed comments.
	* INSTALL: Regenerate.

2016-02-14  Jakub Jelinek  <jakub@redhat.com>
	    Jonathan Wakely  <jwakely@redhat.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ 19439]
	* math/Makefile (tests): Add test-math-isinff.
	(CFLAGS-test-math-isinff.cc): Use -std=gnu++11.
	* math/bits/mathcalls.h [__USE_MISC]: Use
	'|| __MATH_DECLARING_DOUBLE == 0' to relax definition of
	functions not in C++11 and which don't conflict e.g. isinff,
	isinfl etc.
	* math/test-math-isinff.cc: New file.

2016-02-12  Florian Weimer  <fweimer@redhat.com>

	* misc/bug18240.c (do_test): Set RLIMIT_AS.

2016-02-11  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	[BZ #19529]
	* stdlib/Makefile (CFLAGS-tst-makecontext.c): Add -funwind-tables.

2016-02-04  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Regenerated.

2016-02-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19550]
	* sysdeps/unix/sysv/linux/mips/mips32/mmap.c: New file.
	* sysdeps/unix/sysv/linux/mips/mips64/mmap64.c: Move to ....
	* sysdeps/unix/sysv/linux/mips/mips64/n64/mmap64.c: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/mmap.c: New file.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/syscalls.list (mmap64):
	New syscall entry.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/syscalls.list (mmap):
	New syscall entry.
	* sysdeps/unix/sysv/linux/mips/mips64/syscalls.list (mmap): Remove
	syscall entry.

2016-01-27  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #18240]
	* misc/hsearch_r.c (isprime, __hcreate_r): Protect against
	unsigned int wraparound.

2016-01-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #18240]
	* misc/bug18240.c: New test.
	* misc/Makefile (tests): Add it.

2016-01-28  Steve Ellcey  <sellcey@imgtec.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/memcpy.S (MEMCPY_NAME) [USE_DOUBLE]: Avoid word
	load in branch delay slot when less than a word of input left.

2016-01-27  Andreas Schwab  <schwab@suse.de>

	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c (half): Remove.
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c (maxlog, big): Remove.
	* sysdeps/powerpc/fpu/s_cosf.c (one): Remove.
	* sysdeps/powerpc/fpu/e_hypotf.c (two30): Remove.

2016-01-26  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/localplt.data: Add _Q_cmp.

2016-01-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/Versions (GLIBC_2.23): Add entry for
	__sqrtl_finite.
	* sysdeps/sparc/sparc32/fpu/e_sqrtl.c (__sqrtl_finite): Define
	instead using versioned_symbol.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Fix ordering
	of entries.

	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Move
	__sqrtl_finite to GLIBC_2.23

2016-01-25  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha/fpu/libm-test-ulps: Update.

2016-01-25  Andreas Schwab  <schwab@suse.de>

	[BZ #17514]
	* nptl/pthread_mutex_timedlock.c (pthread_mutex_timedlock)
	<case PTHREAD_MUTEX_ERRORCHECK_NP>: Don't do lock elision.
	* nptl/Makefile (tests): Add tst-mutex-errorcheck.
	* nptl/tst-mutex-errorcheck.c: New file.

2016-01-25  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	[BZ #18560]
	* sysdeps/unix/sysv/linux/powerpc/bits/ipc.h (__ipc): Remove.
	(IPCOP_semop): Likewise.
	(IPCOP_semget): Likewise.
	(IPCOP_semctl): Likewise.
	(IPCOP_msgsnd): Likewise.
	(IPCOP_msgrcv): Likewise.
	(IPCOP_msgget): Likewise.
	(IPCOP_msgctl): Likewise.
	(IPCOP_shmat): Likewise.
	(IPCOP_shmdt): Likewise.
	(IPCOP_shmget): Likewise.
	(IPCOP_shmctl): Likewise.

2016-01-22  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* string/tst-endian.c: Include <libc-internal.h>.
	(do_test): Ignore tautological-compare warnings around
	"htobeXX (beXXtoh (i)) != i" and
	"htoleXX (leXXtoh (i)) != i" if-statements.

2016-01-24  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/e_sqrtl.c: New file.
	* sysdeps/sparc/sparc32/soft-fp/q_sqrt.c (__ieee754_sqrtl): Remove
	alias.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Add
	__sqrtl_finite.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2016-01-25  Maciej W. Rozycki  <macro@imgtec.com>

	* sysdeps/unix/sysv/linux/mips/configure.ac: Set
	`arch_minimum_kernel' to 4.5.0 if 2008 NaN encoding is used.
	* sysdeps/unix/sysv/linux/mips/configure: Regenerate.

2016-01-22  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* nptl/tst-setuid3.c (is_invalid_barrier_ret): New function.
	(thread_func): Use new function to simplify barrier check.
	(do_test): Use new function to simplify checking barrier exit
	code, and actually join the child thread.

2016-01-22  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/htm.h	(__libc_tbegin): Remove
	semicolon.
	(__libc_tend): Likewise.
	(__libc_tabort): Likewise.

2016-01-22  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/nios2/libm-test-ulps: Update.
	* sysdeps/unix/sysv/linux/nios2/localplt.data (__gtdf2): Add.
	(__gtsf2): Likewise.
	(__unorddf2): Likewise.
	(__unordsf2): Likewise.
	(__ledf2): Likewise.

2016-01-20  Chris Metcalf  <cmetcalf@ezchip.com>

	* nis/nis_table.c (__follow_path): Disable diagnostic for
	uninitialized variable that is a false positive for gcc 4.7.
	* stdio-common/vfscanf.c (_IO_vfwscanf): Likewise.

2016-01-20  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/lowlevellock-futex.h
	(lll_futex_wait, lll_futex_timed_wait, lll_futex_wake):
	Always evaluate	PRIVATE argument.

2016-01-20  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #19490]
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_broadcast.S
	(pthread_cond_broadcast): Use ENTRY/END
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_signal.S
	(pthread_cond_signal): Likewise.
	* sysdeps/x86_64/nptl/pthread_spin_lock.S (pthread_spin_lock):
	Likewise.
	* sysdeps/x86_64/nptl/pthread_spin_trylock.S (pthread_spin_trylock):
	Likewise.
	* sysdeps/x86_64/nptl/pthread_spin_unlock.S (pthread_spin_unlock):
	Likewise.

2016-01-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/dbl-64/s_finite.c
	[NO_LONG_DOUBLE && LDBL_CLASSIFY_COMPAT] (__finitel): Define
	compat symbol at version GLIBC_2_1 and use GLIBC_2_1 in
	SHLIB_COMPAT condition for libm, not GLIBC_2_0.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c
	[NO_LONG_DOUBLE && LDBL_CLASSIFY_COMPAT] (__finitel): Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/localplt.data
	(__gtsf2): Add as optional for libc.so.
	(__unordsf2): Likewise.
	(__signbit): Remove for libc.so.
	(__signbitl): Likewise.

2016-01-19  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* iconvdata/bug-iconv11.c (test_ibm93x):
	Use %zu printf format specifier for size_t argument.

2016-01-19  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_ulps): Do not reduce
	already-recorded ulps.
	* sysdeps/arm/libm-test-ulps: Regenerated.
	* sysdeps/mips/mips32/libm-test-ulps: Likewise.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.
	* sysdeps/powerpc/nofpu/libm-test-ulps: Likewise.

2016-01-19  Andrew Senkevich  <andrew.senkevich@intel.com>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Fixed build with
	assembler not supporting AVX-512.

2016-01-18  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerated.

2016-01-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/mips32/libm-test-ulps: Regenerated.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.

	* sysdeps/powerpc/nofpu/libm-test-ulps: Regenerated.

	* sysdeps/arm/libm-test-ulps: Regenerated.

2016-01-18  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #19451]
	* math/Makefile (libm-vec-tests): Move libraries after wrappers.o

2016-01-15  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #19486]
	* sysdeps/s390/fix-fp-int-convert-overflow.h: New File.
	* sysdeps/generic/fix-fp-int-convert-overflow.h
	(FIX_LDBL_LONG_CONVERT_OVERFLOW,
	FIX_LDBL_LLONG_CONVERT_OVERFLOW): New define.
	* sysdeps/arm/fix-fp-int-convert-overflow.h: Likewise.
	* sysdeps/mips/mips32/fpu/fix-fp-int-convert-overflow.h:
	Likewise.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c (__lrintl):
	Avoid conversions to long int where inexact exceptions
	could be raised.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c (__lroundl):
	Likewise.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c (__llrintl):
	Avoid conversions to long long int where inexact exceptions
	could be raised.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c (__llroundl):
	Likewise.

2016-01-17  Mike Frysinger  <vapier@gentoo.org>

	* configure.ac: Rewrite error comment and use AC_MSG_ERROR.
	* configure: Regenerated.

2016-01-16  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86_64/multiarch/memcpy_chk.S: Fixed typos.

2016-01-16  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/sparc/bits/mman.h (MCL_ONFAULT): Move
	outside of comment.

2016-01-15  Torvald Riegel  <triegel@redhat.com>

	* nptl/tst-barrier1.c: Add description on first line.
	* nptl/tst-barrier2.c: Likewise.
	* nptl/tst-barrier3.c: Likewise.
	* nptl/tst-barrier4.c: Likewise.
	* nptl/tst-barrier5.c: Likewise.

2016-01-15  Torvald Riegel  <triegel@redhat.com>

	[BZ #18868]
	* nptl/pthread_barrier_init.c (__pthread_barrier_init): Apply fix.

2016-01-16  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Added new files.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Added new tests.
	* sysdeps/x86_64/multiarch/memcpy-avx512-no-vzeroupper.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy-avx512-no-vzeroupper.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove-avx512-no-vzeroupper.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S: Added new IFUNC branch.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Likewise.

2016-01-15  Torvald Riegel  <triegel@redhat.com>

	[BZ #13065]
	* nptl/pthread_barrier_wait.c (__pthread_barrier_wait): Replace with
	new implementation.
	* nptl/pthread_barrier_destroy.c (pthread_barrier_destroy): Likewise.
	* nptl/pthread_barrier_init.c (__pthread_barrier_init): Adapt.
	* sysdeps/nptl/internaltypes.h (pthread_barrier): Adapt.
	(BARRIER_IN_THRESHOLD): New macro.
	* nptl/pthread_barrierattr_setpshared.c
	(pthread_barrierattr_setpshared): Clean up.
	* nptl/tst-barrier4.c: Correct comment.
	* nptl/tst-barrier5.c: New file.
	* nptl/Makefile (tests): Add nptl/tst-barrier5.c.
	(gen-as-const-headers): Remove lowlevelbarrier.sym.
	* sysdeps/unix/sysv/linux/i386/pthread_barrier_wait.S: Remove.
	* sysdeps/unix/sysv/linux/x86_64/pthread_barrier_wait.S: Remove.
	* nptl/lowlevelbarrier.sym: Remove.
	* nptl/DESIGN-barrier.txt: Remove.
	* sysdeps/sparc/nptl/pthread_barrier_destroy.c: Remove.
	* sysdeps/sparc/nptl/pthread_barrier_init.c: Remove.
	* sysdeps/sparc/nptl/pthread_barrier_wait.c: Remove.
	* sysdeps/sparc/sparc32/pthread_barrier_wait.c: Replace with build
	error.
	* sysdeps/sparc/sparc32/sparcv9/pthread_barrier_wait.c: Use generic
	implementation.

2016-01-15  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* rt/tst-mqueue5.c (thr): Cleanup misleading comment.
	(do_child): Mask SIGRTMIN while thr is running.

2016-01-15  Martin Sebor  <msebor@redhat.com>

	[BZ #19432]
	* iconvdata/Makefile: Add bug-iconv11.
	* iconvdata/bug-iconv11.c: New test.
	* iconvdata/ibm930.c: Do not reject redundant shift sequences.
	* iconvdata/ibm933.c: Same.
	* iconvdata/ibm935.c: Same.
	* iconvdata/ibm937.c: Same.
	* iconvdata/ibm939.c: Same.

2016-01-15  Martin Sebor  <msebor@redhat.com>

	[BZ #19443]
	* crypt/crypt_util.c [DEBUG] (_ufc_prbits): Correct format string.
	[DEBUG] (_ufc_set_bits): Declare used.
	* iconv/gconv_dl.c [DEBUG]: Add a missing include directive.
	[DEBUG] (print_all): Declare used.
	* resolv/res_send.c [DEBUG] (__libc_res_nsend): Explicitly convert
	operands of the ternary ?: expression to target type.
	* stdlib/rshift.c [DEBUG] (mpn_rshift): Use assert() instead of
	calling the undeclared abort.
	* time/mktime.c [DEBUG] (DEBUG): Rename to DEBUG_MKTIME.

2016-01-15  Martin Sebor  <msebor@redhat.com>

	[BZ #18755]
	* iconv/skeleton.c (FUNCTION_NAME): Suppress -Wunused-but-set-variable
	warnings.
	* sysdeps/nptl/gai_misc.h (__gai_start_notify_thread): Same.
	(__gai_create_helper_thread): Same.
	* nscd/nscd.c (do_exit): Suppress -Wunused-variable.
	* iconvdata/iso-2022-cn-ext.c (BODY): Initialize local variable
	to suppress -Wmaybe-uninitialized warnings.

2016-01-15  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19465]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Call math_opt_barrier
	inside if.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.

2016-01-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19466]
	* time/tst-mktime2.c (time_t_max): Removed.
	(time_t_min): Likewise.
	(TYPE_SIGNED): New.
	(TYPE_MINIMUM): Likewise.
	(TYPE_MAXIMUM): Likewise.
	(TIME_T_MIN): Likewise.
	(TIME_T_MAX): Likewise.
	(mktime_test): Replace time_t_max and time_t_min with TIME_T_MAX
	and TIME_T_MIN.
	(do_test): Likewise.

2016-01-14  Amit Pawar  <amit.pawar@amd.com>

	[BZ #19467]
	* sysdeps/x86/cpu-features.c (init_cpu_features): Set
	index_Fast_Unaligned_Load flag for Excavator family CPUs.

2016-01-02  Marcin Ko≈õcielnicki  <koriakin@0x04.net>

	* sysdeps/s390/nptl/tls.h (struct tcbhead_t): Add __private_ss field.

2016-01-13  Carlos O'Donell  <carlos@redhat.com>

	* benchtests/Makefile (PYTHON): Define.
	(bench-func): Use $(PYTHON) to run python scripts.
	($(objpfx)bench-%.c): Likewise.

2016-01-13  Flavio Cruz  <flaviocruz@gmail.com>

	* hurd/lookup-retry.c (__hurd_file_name_lookup_retry): Do not remove
	leading slash when `file_name' is "/".

2016-01-12  Joseph Myers  <joseph@codesourcery.com>

	* bits/mman-linux.h [!MCL_CURRENT] (MCL_ONFAULT): New macro.
	* sysdeps/unix/sysv/linux/alpha/bits/mman.h (MCL_ONFAULT):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h (MCL_ONFAULT):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h (MCL_ONFAULT):
	Likewise.
	* sysdeps/unix/sysv/linux/sys/ptrace.h (PTRACE_GETSIGMASK): New
	enum constant and macro.
	(PTRACE_SETSIGMASK): Likewise.
	(PTRACE_SECCOMP_GET_FILTER): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sys/ptrace.h
	(PTRACE_GETSIGMASK): Likewise.
	(PTRACE_SETSIGMASK): Likewise.
	(PTRACE_SECCOMP_GET_FILTER): Likewise.
	* sysdeps/unix/sysv/linux/ia64/sys/ptrace.h (PTRACE_GETSIGMASK):
	Likewise.
	(PTRACE_SETSIGMASK): Likewise.
	(PTRACE_SECCOMP_GET_FILTER): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h
	(PTRACE_GETSIGMASK): Likewise.
	(PTRACE_SETSIGMASK): Likewise.
	(PTRACE_SECCOMP_GET_FILTER): Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h (PTRACE_GETSIGMASK):
	Likewise.
	(PTRACE_SETSIGMASK): Likewise.
	(PTRACE_SECCOMP_GET_FILTER): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h (PTRACE_GETSIGMASK):
	Likewise.
	(PTRACE_SETSIGMASK): Likewise.
	(PTRACE_SECCOMP_GET_FILTER): Likewise.
	* sysdeps/unix/sysv/linux/tile/sys/ptrace.h (PTRACE_GETSIGMASK):
	Likewise.
	(PTRACE_SETSIGMASK): Likewise.
	(PTRACE_SECCOMP_GET_FILTER): Likewise.

2016-01-11  Jonathan Wakely  <jwakely.gcc@gmail.com>
	    Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #19439]
	* math/bits/mathcalls.h
	[!__cplusplus || __cplusplus < 201103L] (isinf): Do not declare
	prototype.
	[!__cplusplus || __cplusplus < 201103L] (isnan): Likewise.

2016-01-11  Andreas Schwab  <schwab@suse.de>

	[BZ #19253]
	* time/tzfile.c (__tzfile_default): Invalidate tzfile attribute
	cache when TZDEFRULES was used.
	* time/tst-tzname.c: New file.
	* time/Makefile (test): Add tst-tzname.
	(tst-tzname-ENV, CPPFLAGS-tst-tzname.c): Define.
	* timezone/Makefile (test-zones): Add $(posixrules-file).
	($(testdata)/$(posixrules-file)): New rule.

2016-01-10  Paul Eggert  <eggert@cs.ucla.edu>

	Fix doc quoting problems with Texinfo 5
	Without this change, in the info file output, Texinfo 5 quotes code
	in text with undirected single quotes 'like this' and generates
	code examples that with many PDF readers cannot be cut out of PDFs
	and pasted into code.
	* manual/libc.texinfo: Configure the libc manual like the GNU
	Emacs manual, by using @documentencoding and setting
	txicodequoteundirected and txicodequotebacktick.  This way,
	Texinfo 5 quotes code in text with directed single quotes ‚Äòlike
	this‚Äô and produces examples that can be cut out of PDFs.  This
	change causes Texinfo 5 to generate info files that contain UTF-8
	characters in the set {'‚Äò', '‚Äô', '‚Äú', '‚Äù', '√Ñ', '√§', '√∂', '‚àí',
	'‚Äì', '‚Äî', '¬©', '‚áí', '‚Ä¢', '‚Ä¶'}, which is OK nowadays.

2016-01-08  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/htm.h (__libc_tbegin,
	__libc_tabort, __libc_tend): New wrappers that enforce compiler
	barriers to their respective compiler built-ins.
	* sysdeps/powerpc/nptl/elide.h (__get_new_count, ELIDE_LOCK,
	ELIDE_TRYLOCK, __elide_unlock): Use the new wrappers.
	* sysdeps/powerpc/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/elision-lock.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/elision-trylock.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/elision-unlock.c: Likewise.

2016-01-08  Marko Myllynen  <myllynen@redhat.com>

	* scripts/config.guess: Revert previous shebang change.
	* scripts/config.sub: Likewise.
	* scripts/mkinstalldirs: Likewise.

2016-01-08  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/bits/hwcap.h: Add PPC_FEATURE2_ARCH_3_00 and
	PPC_FEATURE2_HAS_IEEE128.
	* sysdeps/powerpc/dl-procinfo.c:
	(_dl_powerpc_cap_flags): Add corresponding names to new capabilities.

2016-01-08  John David Anglin  <danglin@gcc.gnu.org>

	[BZ #19415]
	* sysdeps/hppa/dl-fptr.c (_dl_fixup): Declare.
	(elf_machine_resolve): New.  Return address of _dl_runtime_resolve.
	(_dl_lookup_address): Rewrite using function resolver trampoline.
	* sysdeps/hppa/dl-lookupcfg.h (DL_LOOKUP_ADDRESS): Don't clear bottom
	two bits in address.

2016-01-07  Mike Frysinger  <vapier@gentoo.org>

	* longlong.h: Change !__SHMEDIA__ to
	(!defined (__SHMEDIA__) || !__SHMEDIA__).
	Change __SHMEDIA__ to defined (__SHMEDIA__) && __SHMEDIA__.

2016-01-07  Daniel Jacobowitz  <dan@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Mark Shinwell  <shinwell@codesourcery.com>
	    Andrew Stubbs  <ams@codesourcery.com>
	    Rich Felker <dalias@libc.org>

	* longlong.h (udiv_qrnnd): Add FDPIC compatible version for SH.

2016-01-07  Richard Henderson  <rth@redhat.com>

	* longlong.h [__alpha] (umul_ppmm): Disable for c++.

2016-01-07  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/fxstat64.c (___fxstat64): Change
	__ASSUME_ST_INO_64_BIT == 0 to !defined __ASSUME_ST_INO_64_BIT.
	* sysdeps/unix/sysv/linux/lxstat64.c (___lxstat64): Likewise.
	* sysdeps/unix/sysv/linux/xstat64.c (___xstat64): Likewise.
	* sysdeps/unix/sysv/linux/xstatconv.c (__xstat32_conv): Likewise.

2016-01-07  Paul Eggert  <eggert@cs.ucla.edu>
	    Joseph Myers  <joseph@codesourcery.com>

	* timezone/private.h: Update from tzcode 2015g.
	* timezone/tzfile.h: Likewise.
	* timezone/tzselect.ksh: Likewise.
	* timezone/zdump.c: Likewise.
	* timezone/zic.c: Likewise.
	* timezone/ialloc.c: Remove file.
	* timezone/scheck.c: Likewise.
	* timezone/Makefile (extra-objs): Remove variable.
	($(objpfx)zic): Do not depend on scheck.o and ialloc.o.
	(tz-cflags): Add -DHAVE_GETTEXT -DUSE_LTZ=0
	-Wno-maybe-uninitialized.
	(CFLAGS-zdump.c): Remove -fwrapv -DNOID -DHAVE_GETTEXT.
	(CFLAGS-zic.c): Remove -DNOID -DHAVE_GETTEXT.
	(CFLAGS-ialloc.c): Remove variable.
	(CFLAGS-scheck.c): Likewise.
	* timezone/README: Update list of files from tzcode.

2016-01-07  Khem Raj  <raj.khem@gmail.com>

	* argp/argp-fmtstream.c (__argp_fmtstream_free): Use fwrite_unlocked
	instead of __fxprintf when _LIBC is undefined.

2016-01-07  Marko Myllynen  <myllynen@redhat.com>

	* catgets/test-gencat.sh: Remove space after shebang.
	* conform/GlibcConform.pm: Likewise.
	* conform/check-header-lists.sh: Likewise.
	* conform/conformtest.pl: Likewise.
	* conform/linknamespace.pl: Likewise.
	* conform/list-header-symbols.pl: Likewise.
	* debug/catchsegv.sh: Likewise.
	* elf/genrtldtbl.awk: Likewise.
	* elf/tst-pathopt.sh: Likewise.
	* elf/tst-rtld-load-self.sh: Likewise.
	* grp/tst_fgetgrent.sh: Likewise.
	* iconvdata/gen-8bit-gap-1.sh: Likewise.
	* iconvdata/gen-8bit-gap.sh: Likewise.
	* iconvdata/gen-8bit.sh: Likewise.
	* iconvdata/run-iconv-test.sh: Likewise.
	* intl/tst-gettext.sh: Likewise.
	* intl/tst-gettext2.sh: Likewise.
	* intl/tst-gettext4.sh: Likewise.
	* intl/tst-gettext6.sh: Likewise.
	* intl/tst-translit.sh: Likewise.
	* io/ftwtest-sh: Likewise.
	* libio/test-freopen.sh: Likewise.
	* locale/gen-translit.pl: Likewise.
	* malloc/tst-mtrace.sh: Likewise.
	* manual/check-safety.sh: Likewise.
	* manual/libc-texinfo.sh: Likewise.
	* manual/tsort.awk: Likewise.
	* manual/xtract-typefun.awk: Likewise.
	* nptl/tst-cancel-wrappers.sh: Likewise.
	* nptl/tst-tls6.sh: Likewise.
	* posix/globtest.sh: Likewise.
	* posix/tst-getconf.sh: Likewise.
	* posix/wordexp-tst.sh: Likewise.
	* scripts/check-c++-types.sh: Likewise.
	* scripts/check-local-headers.sh: Likewise.
	* scripts/config.guess: Likewise.
	* scripts/config.sub: Likewise.
	* scripts/cpp: Likewise.
	* scripts/cross-test-ssh.sh: Likewise.
	* scripts/documented.sh: Likewise.
	* scripts/evaluate-test.sh: Likewise.
	* scripts/gen-libc-abis: Likewise.
	* scripts/gen-sorted.awk: Likewise.
	* scripts/list-fixed-bugs.py: Likewise.
	* scripts/merge-test-results.sh: Likewise.
	* scripts/mkinstalldirs: Likewise.
	* scripts/rellns-sh: Likewise.
	* scripts/test-installation.pl: Likewise.
	* scripts/update-copyrights: Likewise.
	* stdio-common/tst-printf.sh: Likewise.
	* stdio-common/tst-unbputc.sh: Likewise.
	* stdlib/tst-fmtmsg.sh: Likewise.
	* stdlib/tst-setcontext3.sh: Likewise.
	* sysdeps/i386/tst-ld-sse-use.sh: Likewise.
	* sysdeps/unix/make-syscalls.sh: Likewise.

2016-01-06  John David Anglin  <dave.anglin@bell.net>

	* sysdeps/hppa/nptl/pthread_spin_init.c (pthread_spin_init): Replace
	asm stw with atomic_exchange_rel.  Add explanatory comment.
	* sysdeps/hppa/nptl/pthread_spin_unlock.c (pthread_spin_unlock):
	Likewise.

2016-01-05  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19122]
	* include/unistd.h [IS_IN (rtld)]: Include <dl-unistd.h>.
	* sysdeps/generic/dl-unistd.h: New file.
	* sysdeps/mach/hurd/dl-unistd.h: Likewise.

2016-01-05  H.J. Lu  <hongjiu.lu@intel.com>

	 [BZ #19122]
	 * include/sys/mman.h [IS_IN (rtld)]: Include <dl-mman.h>.
	 * sysdeps/generic/dl-mman.h: New file.
	 * sysdeps/mach/hurd/dl-mman.h: Likewise.

2016-01-05  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2016-01-04.21 with
	trailing whitespace removed.
	* scripts/config.guess: Update to version 2016-01-01.
	* scripts/config.sub: Update to version 2016-01-01.
	* scripts/move-if-change: Update from gnulib.

2016-01-04  Anton Blanchard  <anton@samba.org>

	* sysdeps/ieee754/dbl-64/e_pow.c (log1): Use unsigned int
	for array indices.
	* sysdeps/ieee754/dbl-64/e_pow.c (my_log2): Likewise.

2016-01-04  Joseph Myers  <joseph@codesourcery.com>

	* NEWS: Update copyright dates.
	* catgets/gencat.c (print_version): Likewise.
	* csu/version.c (banner): Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/pcprofiledump.c (print_version): Likewise.
	* debug/xtrace.sh (do_version): Likewise.
	* elf/ldconfig.c (print_version): Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/pldd.c (print_version): Likewise.
	* elf/sotruss.sh: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* iconv/iconv_prog.c (print_version): Likewise.
	* iconv/iconvconfig.c (print_version): Likewise.
	* locale/programs/locale.c (print_version): Likewise.
	* locale/programs/localedef.c (print_version): Likewise.
	* login/programs/pt_chown.c (print_version): Likewise.
	* malloc/memusage.sh (do_version): Likewise.
	* malloc/memusagestat.c (print_version): Likewise.
	* malloc/mtrace.pl: Likewise.
	* manual/libc.texinfo: Likewise.
	* nptl/version.c (banner): Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* nss/getent.c (print_version): Likewise.
	* nss/makedb.c (print_version): Likewise.
	* posix/getconf.c (main): Likewise.
	* scripts/test-installation.pl: Likewise.
	* sysdeps/unix/sysv/linux/lddlibc4.c (main): Likewise.

	* All files with FSF copyright notices: Update copyright dates
	using scripts/update-copyrights.
	* intl/plural.c: Regenerated.
	* locale/programs/charmap-kw.h: Likewise.
	* locale/programs/locfile-kw.h: Likewise.

2016-01-02  Helge Deller  <deller@gmx.de>

	[BZ #19285]
	* sysdeps/unix/sysv/linux/hppa/bits/mman.h (MAP_STACK): Define.
	(MAP_HUGETLB, MCL_ONFAULT): Likewise.
	(MADV_HUGEPAGE, MADV_NOHUGEPAGE, MADV_DONTDUMP, MADV_DODUMP): Likewise.
	(MADV_xxK_PAGES): Remove.

2016-01-01  Mike Frysinger  <vapier@gentoo.org>

	[BZ #15421]
	* sysdeps/ia64/fpu/w_lgamma_main.c: Include math.h & math_private.h.
	[BUILD_LGAMMA]: Wrap all code by define.  Re-indent sub-preprocessor.
	* sysdeps/ia64/fpu/w_lgammaf_main.c: Likewise.
	* sysdeps/ia64/fpu/w_lgammal_main.c: Likewise.

2015-12-30  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #19408]
	* sysdeps/unix/sysv/linux/personality.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/personality.c: Likewise.
	* sysdeps/unix/sysv/linux/tst-personality.c: Likewise.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir) == misc]
	(sysdep_routines): Add personality.
	(tests): Add tst-personality.
	* sysdeps/unix/sysv/linux/syscalls.list (personality): Move ...
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: ... here.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (personality): New entry.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (personality): Likewise.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (personality): Likewise.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list (personality): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/syscalls.list (personality):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/syscalls.list (personality):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list (personality):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list (personality): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/syscalls.list (personality):
	Likewise.

2015-12-30  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/sysv/linux/arm/ioperm.c: Do not include <string.h>.
	(PATH_ARM_SYSTYPE): Remove.
	(PATH_CPUINFO): Likewise.
	(IO_BASE_FOOTBRIDGE): Likewise.
	(IO_SHIFT_FOOTBRIDGE): Likewise.
	(struct platform): Likewise.
	(init_iosys): Remove compatibility code for 2.4 kernels.
	* sysdeps/unix/sysv/linux/arm/localplt.data: Remove fscanf.

2015-12-29  Florian Weimer  <fweimer@redhat.com>

	* malloc/tst-malloc-thread-fail.c: New file.
	* malloc/Makefile (tests): Add tst-malloc-thread-fail.
	(tst-malloc-thread-fail): Link against libpthread.

2015-12-29  Mike Frysinger  <vapier@gentoo.org>

	* scripts/list-fixed-bugs.py: Import argparse.  Call main instead.
	(get_parser): New function.
	(main): New function.

2015-12-29  Rob Wu  <rob@robwu.nl>

	[BZ #19369]
	* resolv/res_init.c (__res_vinit): Reset defdname before use.

2015-12-29  John David Anglin  <danglin@gcc.gnu.org>

	[BZ #19270]
	* sysdeps/hppa/fpu/bits/mathdef.h (__NO_LONG_DOUBLE_MATH): Define.

2015-12-28  Mike Frysinger  <vapier@gentoo.org>

	[BZ #15421]
	* sysdeps/ia64/fpu/w_lgamma_main.c: Change gammaf to gamma.

2015-12-23  Torvald Riegel  <triegel@redhat.com>

	[BZ #13690]
	* sysdeps/nptl/lowlevellock.h (__lll_unlock): Do not access the lock
	after releasing it.
	(__lll_robust_unlock): Likewise.
	* nptl/pthread_mutex_unlock.c (__pthread_mutex_unlock_full): Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h (lll_unlock): Likewise.
	(lll_robust_unlock): Likewise.
	* sysdeps/unix/sysv/linux/lowlevellock-futex.h (__lll_private_flag):
	Prevent warnings in callers.

2015-12-23  Florian Weimer  <fweimer@redhat.com>

	* malloc/arena.c (list_lock): Update comment.

2015-12-22  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/hwcapinfo.c: Export symbol
	__parse_hwcap_and_convert_at_platform to libc.a.

2015-12-22  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c (_dl_powerpc_platforms): Added
	platform and feature support for POWER9.
	* sysdeps/powerpc/dl-procinfo.h: Likewise.
	* sysdeps/powerpc/powerpc32/power9/Implies: New file.
	* sysdeps/powerpc/powerpc32/power9/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power9/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc64/power9/Implies: Likewise, for powerpc64.
	* sysdeps/powerpc/powerpc64/power9/fpu/Implies: Likewise.
	* sysdeps/powerpc/powerpc64/power9/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc64/power9/multiarch/Implies: Likewise.

2015-12-22  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Harmonize generic stdio-lock support with nptl

	This fixes build when _IO_funlockfile is a macro, fixes build where
	_IO_acquire_lock_clear_flags2 is used, and fixes unlocking on unexpected
	stack unwind.

	* sysdeps/generic/stdio-lock.h [__EXCEPTIONS] (_IO_acquire_lock,
	_IO_release_lock ): Use cleanup attribute on new
	_IO_acquire_lock_file variable instead of assuming that
	_IO_release_lock will be called.
	[!__EXCEPTIONS] (_IO_acquire_lock): Define to non-existing
	_IO_acquire_lock_needs_exceptions_enabled.
	(_IO_acquire_lock_clear_flags2): New macro.

2015-12-22  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Regenerated.

2015-12-21  Florian Weimer  <fweimer@redhat.com>

	[BZ #19182]
	* malloc/arena.c (list_lock): Document lock ordering requirements.
	(free_list_lock): New lock.
	(ptmalloc_lock_all): Comment on free_list_lock.
	(ptmalloc_unlock_all2): Reinitialize free_list_lock.
	(detach_arena): Update comment.  free_list_lock is now needed.
	(_int_new_arena): Use free_list_lock around detach_arena call.
	Acquire arena lock after list_lock.  Add comment, including FIXME
	about incorrect synchronization.
	(get_free_list): Switch to free_list_lock.
	(reused_arena): Acquire free_list_lock around detach_arena call
	and attached threads counter update.  Add two FIXMEs about
	incorrect synchronization.
	(arena_thread_freeres): Switch to free_list_lock.
	* malloc/malloc.c (struct malloc_state): Update comments to
	mention free_list_lock.

2015-12-21  Siddhesh Poyarekar  <siddhesh.poyarekar@linaro.org>

	* sysdeps/ieee754/dbl-64/s_sin.c (csloww, csloww1, csloww2):
	Remove functions.
	(sloww, sloww1): Accept argument to offset quadrant.
	(sloww, sloww1, sloww2): Call __mpsin or __mpcos based on
	quadrant.
	(__sin, __cos): Consolidate common code into new functions.
	(reduce_sincos_1, do_sincos_1): New functions.
	* sysdeps/ieee754/dbl-64/s_sincos.c (__sincos): Use them.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin, __cos): Move common
	code to new functions.
	(reduce_sincos_2, do_sincos_2): New functions.
	* sysdeps/ieee754/dbl-64/s_sincos.c (__sincos): Use them.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin) [!IN_SINCOS]: Skip
	common code for sincos.
	(__cos) [!IN_SINCOS]: Likewise.
	* sysdeps/ieee754/dbl-64/s_sincos.c (reduce_and_compute_sincos):
	New function.
	(__sincos): Use it.

2015-12-20  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/i386/fpu/libm-test-ulps: Move to ....
	* sysdeps/i386/i686/multiarch/fpu/libm-test-ulps: ...here.
	* sysdeps/i386/fpu/libm-test-ulps: Regenerate.

2015-12-19  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86_64/multiarch/memset-avx512-no-vzeroupper.S: New file.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Added new file.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Added new tests.
	* sysdeps/x86_64/multiarch/memset.S: Added new IFUNC branch.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86/cpu-features.h (bit_Prefer_No_VZEROUPPER,
	index_Prefer_No_VZEROUPPER): New feature.
	* sysdeps/x86/cpu-features.c (init_cpu_features): Set the
	Prefer_No_VZEROUPPER for Knights Landing.

015-12-18  Torvald Riegel  <triegel@redhat.com>

	* math/atest-exp2.c (mp_exp_m1): Remove.

2015-12-17  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysdep.h (SYSCALL_CANCEL): Fix macro for zero argument
	syscalls.
	(__SYSCALL0): New macro.
	(__SYSCALL1): Likewise.
	(__SYSCALL2): Likewise.
	(__SYSCALL3): Likewise.
	(__SYSCALL4): Likewise.
	(__SYSCALL5): Likewise.
	(__SYSCALL6): Likewise.
	(__SYSCALL_CONCAT_X): Likewise.
	(__SYSCALL_CONCAT): Likewise.
	(__SYSCALL_DIST): Likewise.
	(__SYSCALL_CALL): Likewise.

2015-12-17  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19363]
	* sysdeps/unix/sysv/linux/x86_64/x32/times.c: New file.

2015-12-17  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #19375]
	* sysdeps/powerpc/power7/fpu/s_logb.c (__logb): Fix return for
	negative subnormals.

2015-12-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h
	(REGISTERS_CLOBBERED_BY_SYSCALL): New.
	(INTERNAL_SYSCALL_NCS): Use it.
	(INTERNAL_SYSCALL_NCS_TYPES): Likewise.

2015-12-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #19243]
	* malloc/arena.c (get_free_list): Remove assert and adjust
	reference count handling.  Add comment about reused_arena
	interaction.
	(reused_arena): Add comments abount get_free_list interaction.
	* malloc/tst-malloc-thread-exit.c: New file.
	* malloc/Makefile (tests): Add tst-malloc-thread-exit.
	(tst-malloc-thread-exit): Link against libpthread.

2015-12-15  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19367]
	* sysdeps/unix/sysv/linux/wordsize-64/mmap.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/64/dl-librecon.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/mmap.c: Likewise.
	* sysdeps/x86/cpu-features.h (bit_Prefer_MAP_32BIT_EXEC): New.
	(index_Prefer_MAP_32BIT_EXEC): Likewise.

2015-12-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.c (init_cpu_features): Enable
	Silvermont optimizations for Knights Landing.

2015-12-15  Andreas Schwab  <schwab@suse.de>

	[BZ #17197]
	* iconvdata/ibm930.c (BODY for TO_LOOP): Record current DBCS state
	immediately after emitting SI.
	* iconvdata/ibm933.c (BODY for TO_LOOP): Likewise.
	* iconvdata/ibm935.c (BODY for TO_LOOP): Likewise.
	* iconvdata/ibm937.c (BODY for TO_LOOP): Likewise.
	* iconvdata/ibm939.c (BODY for TO_LOOP): Likewise.
	* iconvdata/bug-iconv10.c: New file.
	* iconvdata/Makefile (tests): Add bug-iconv10.
	($(objpfx)bug-iconv10.out): New rule.

2015-12-15  Florian Weimer  <fweimer@redhat.com>

	* dlfcn/tst-rec-dlopen.c (call_func): Cast dlsym result, fixing an
	aliasing violation.

2015-12-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18472]
	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Handle entries
	for the form NAME@VERSION:OBSOLETED and generate SHLIB_COMPAT
	conditionals for them.
	* sysdeps/unix/make-syscalls.sh (emit_weak_aliases): Likewise.
	* sysdeps/unix/sysv/linux/sys/kdaemon.h: Remove file.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Remove
	sys/kdaemon.h.
	* sysdeps/unix/sysv/linux/syscalls.list (bdflush): Make into
	compat-only syscall, obsoleted in glibc 2.23.
	(create_module): Likewise.
	(get_kernel_syms): Likewise.
	(query_module): Likewise.
	(uselib): Likewise.
	* manual/sysinfo.texi (System Parameters): Do not mention bdflush.

2015-12-11  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/sysv/linux/arm/ioperm.c: Do not include
	<linux/version.h>.
	[LINUX_VERSION_CODE >= KERNEL_VERSION(2,4,23)]: Remove
	conditional code.
	(init_iosys): Use CTL_BUS_ISA instead of BUS_ISA in iobase_name
	and ioshift_name initialization.

2015-12-11  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/ieee754/flt-32/k_rem_pio2f.c (__kernel_rem_pio2f):
	Fix indentation.

2015-12-11  Steve Ellcey  <sellcey@imgtec.com>

	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Fix indentation.

2015-12-11  Steve Ellcey  <sellcey@imgtec.com>

	* stdlib/strtol_l.c (__strtol_l): Fix indentation.

2015-12-10  Aurelien Jarno  <aurelien@aurel32.net>
	    Jakub Wilk  <jwilk@debian.org>

	[BZ #19347]
	* sysdeps/unix/grantpt.c [!HAVE_PT_CHOWN] (grantpt): Do not try
	to change the group of the device to the tty group.

2015-12-10  Paul Eggert  <eggert@cs.ucla.edu>

	Split large string section; add truncation advice
	* manual/examples/strncat.c: Remove.
	This example was misleading, as the code would have undefined
	behavior if "hello" was longer than SIZE.  Anyway, the manual
	shouldn't encourage strncpy+strncat for this sort of thing.
	* manual/string.texi (Copying Strings and Arrays): Split into
	three sections Copying Strings and Arrays, Concatenating Strings,
	and Truncating Strings, as this section was way too long.  All
	cross-referenced changed.  Add advice about string-truncation
	functions.  Remove misleading strncat example.

2015-12-10  Carlos O'Donell  <carlos@redhat.com>

	* manual/nss.texi (NSS Modules Interface): Document
	NSS_STATUS_NOTFOUND and SUCCESS.

2015-12-09  Mike FABIAN  <mfabian@redhat.com>

	[BZ 18568]
	* include/stdc-predef.h (__STDC_ISO_10646__): Update to
	201505L, for Unicode 8.

2015-12-09  Carlos O'Donell  <carlos@redhat.com>

	* locale/C-translit.h: Regenerate.

2015-12-09  Mike FABIAN  <mfabian@redhat.com>

	* locale/C-translit.h.in: Remove duplicate transliterations for U+0152
	and U+0153.

2015-12-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19351]
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c (__ieee754_logl): When
	expanding log(1+z), compare z rather than its square with epsilon
	to determine when to avoid evaluating the expansion.

	[BZ #19350]
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c (__ieee754_sinhl):
	Increase overflow threshold.

	[BZ #19349]
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c (__tanhl): Return argument
	when small.

	* sysdeps/unix/sysv/linux/i386/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SOCKET_SYSCALL):
	New macro.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_SOCKETPAIR_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_BIND_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_CONNECT_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_LISTEN_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_ACCEPT4_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_ACCEPT4_FOR_ACCEPT_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_GETSOCKOPT_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_SETSOCKOPT_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_GETSOCKNAME_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_GETPEERNAME_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SENDTO_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_SENDTO_FOR_SEND_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SENDMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_RECVFROM_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_RECVFROM_FOR_RECV_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_RECVMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SHUTDOWN_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SOCKET_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_SOCKETPAIR_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_BIND_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_CONNECT_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_LISTEN_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_ACCEPT4_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_ACCEPT4_FOR_ACCEPT_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_GETSOCKOPT_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_SETSOCKOPT_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_GETSOCKNAME_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_GETPEERNAME_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SENDTO_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_SENDTO_FOR_SEND_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SENDMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_RECVFROM_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300]
	(__ASSUME_RECVFROM_FOR_RECV_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_RECVMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x040300] (__ASSUME_SHUTDOWN_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_SOCKET_SYSCALL): Likewise.
	(__ASSUME_BIND_SYSCALL): Likewise.
	(__ASSUME_CONNECT_SYSCALL): Likewise.
	(__ASSUME_LISTEN_SYSCALL): Likewise.
	(__ASSUME_ACCEPT_SYSCALL): Likewise.
	(__ASSUME_GETSOCKNAME_SYSCALL): Likewise.
	(__ASSUME_GETPEERNAME_SYSCALL): Likewise.
	(__ASSUME_SOCKETPAIR_SYSCALL): Likewise.
	(__ASSUME_SEND_SYSCALL): Likewise.
	(__ASSUME_SENDTO_SYSCALL): Likewise.
	(__ASSUME_RECV_SYSCALL): Likewise.
	(__ASSUME_RECVFROM_SYSCALL): Likewise.
	(__ASSUME_SHUTDOWN_SYSCALL): Likewise.
	(__ASSUME_GETSOCKOPT_SYSCALL): Likewise.
	(__ASSUME_SETSOCKOPT_SYSCALL): Likewise.
	(__ASSUME_SENDMSG_SYSCALL): Likewise.
	(__ASSUME_RECVMSG_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_SOCKET_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_BIND_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_CONNECT_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_LISTEN_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_ACCEPT_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625]
	(__ASSUME_GETSOCKNAME_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625]
	(__ASSUME_GETPEERNAME_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625]
	(__ASSUME_SOCKETPAIR_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_SEND_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_SENDTO_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_RECV_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_RECVFROM_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_SHUTDOWN_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625]
	(__ASSUME_GETSOCKOPT_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625]
	(__ASSUME_SETSOCKOPT_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_SENDMSG_SYSCALL):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x020625] (__ASSUME_RECVMSG_SYSCALL):
	Likewise.

2015-12-09  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/sysv/linux/mips/configure.ac (has-mpf64): Define to
	record the current if the current ABI and CPU support the FP64
	extension.
	(has-modd-spreg): Define to record the current if the current ABI and
	CPU support 32-bit floating point values in odd FPU registers.
	* sysdeps/unix/sysv/linux/mips/configure: Regenerate.
	* sysdeps/mips/Makefile (tst-abi-fpxxomod): Only build when
	$(has-modd-spreg) equals yes.
	(tst-abi-fp64amod): Only build when $(has-mpf64) equals yes.
	(tst-abi-fp64mod): Only build when both $(has-mpf64) and
	$(has-modd-spreg) equal yes.

2015-12-09  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/unix/grantpt.c (grantpt): Call__basename instead of
	basename.

2015-12-08  Siddhesh Poyarekar  <sid@reserved-bit.com>

	* benchtests/Makefile (bench-math): Move ffs and ffsll...
	(bench-string): ... here.
	(bench): Add bench-string.
	(string-bench, wcsmbs-bench, stdlib-bench, stdio-common-bench): Rename
	to *-benchset to reflect what they are.
	(benchset): Adjust.

	* benchtests/sincos-inputs: Add inputs from sin-inputs and
	cos-inputs.

2015-12-07  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86/fpu/bits/math-vector.h: W/o -fopenmp use GCC 6.*
	__attribute__ ((__simd__)) for vector math function declarations.

2015-12-04  Paul Eggert  <eggert@cs.ucla.edu>

	Fix typo in strncat, wcsncat manual entries
	* manual/string.texi (Copying and Concatenation): Fix typos in
	sample implementations of strncat and wcsncat, by having them use
	the old value of the destination length, not the new one.

2015-12-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16961]
	[BZ #16962]
	* math/s_nan.c (__nan): Use __strtod_nan instead of constructing a
	string on the stack for strtod.
	* math/s_nanf.c (__nanf): Use __strtof_nan instead of constructing
	a string on the stack for strtof.
	* math/s_nanl.c (__nanl): Use __strtold_nan instead of
	constructing a string on the stack for strtold.
	* stdlib/Versions (libc): Add __strtof_nan, __strtod_nan and
	__strtold_nan to GLIBC_PRIVATE.
	* math/test-nan-overflow.c: New file.
	* math/test-nan-payload.c: Likewise.
	* math/Makefile (tests): Add test-nan-overflow and
	test-nan-payload.

2015-12-04  Paul Eggert  <eggert@cs.ucla.edu>

	Consistency about byte vs character in string.texi
	* manual/string.texi (String and Array Utilities):
	Distinguish more carefully among bytes, multibyte characters,
	and wide characters.  Use "byte" when talking about C 'char',
	to distinguish it more clearly from multibyte characters.
	Say "wide character" or "multibyte character" instead of
	"character", when a wide or multibyte character is intended.
	Similarly for "multibyte string" versus "string".
	Define these terms more carefully.

2015-12-03  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/arm/math_private.h (LDBL_CLASSIFY_COMPAT): New symbol.
	* sysdeps/microblaze/math_private.h (LDBL_CLASSIFY_COMPAT):
	Likewise.
	* sysdeps/mips/math_private.h (LDBL_CLASSIFY_COMPAT): Likewise.
	* sysdeps/nios2/math_private.h (LDBL_CLASSIFY_COMPAT): Likewise.
	* sysdeps/sh/math_private.h: New file.
	* sysdeps/m68k/coldfire/fpu/math_private.h: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c [defined NO_LONG_DOUBLE &&
	defined LDBL_CLASSIFY_COMPAT]: Create compat symbol for internal
	long double function name.
	* sysdeps/ieee754/dbl-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist:
	Remove __finitel, __isinfl, and __isnanl.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Remove __finitel.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.

2015-12-03  Andrew Senkevich  <andrew.senkevich@intel.com>

	* math/Makefile ($(inst_libdir)/libm.so): Corrected path to
	installed libmvec_nonshared.a.

2015-12-03  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile (sysdep-dl-routines): Add hwcapinfo.
	(sysdep_routines): Likewise.
	(sysdep-rtld-routines): Likewise.
	[$(subdir) = nptl](tests): Add test-get_hwcap and test-get_hwcap-static
	[$(subdir) = nptl](tests-static): test-get_hwcap-static
	* sysdeps/powerpc/Versions: Added new
	__parse_hwcap_and_convert_at_platform symbol to GLIBC-2.23.
	* sysdeps/powerpc/hwcapinfo.c: New file.
	(__tcb_parse_hwcap_and_convert_at_platform): New function to initialize
	and parse hwcap, hwcap2 and platform number information.
	* sysdeps/powerpc/hwcapinfo.h: New file.  Creates global variables
	to store HWCAP+HWCAP2 and platform number.
	* sysdeps/powerpc/nptl/tcb-offsets.sym: Added new offsets
	for HWCAP+HWCAP2 and platform number in the TCB.
	* sysdeps/powerpc/nptl/tls.h: New functionality.  Stores
	the HWCAP, HWCAP2 and platform number in the TCB.
	(dtv): Added new fields for HWCAP+HWCAP2 and platform number.
	(TLS_INIT_TP): Included calls to add the hwcap and
	at_platform values in the TCB in TP initialization.
	(TLS_DEFINE_INIT_TP): Likewise.
	(THREAD_GET_HWCAP): New macro.
	(THREAD_SET_HWCAP): Likewise.
	(THREAD_GET_AT_PLATFORM): Likewise.
	(THREAD_SET_AT_PLATFORM): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h:
	(dl_platform_init): New function that calls
	__parse_hwcap_and_convert_at_platform for the dymanic linking case for
	powerpc32.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Likewise, for powerpc64.
	* sysdeps/powerpc/test-get_hwcap-static.c: New file.  Testcase for
	this functionality, static linking case.
	* sysdeps/powerpc/test-get_hwcap.c: New file.  Likewise, dynamic
	linking case.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.c: Added call to
	__parse_hwcap_and_convert_at_platform for the static linking case.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ld.abilist:
	Included the new __parse_hwcap_and_convert_at_platform symbol in the
	ABI list for GLIBC 2.23.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld.abilist:
	Likewise.

2015-12-02  Ludovic Court√®s  <ludo@gnu.org>

	* configure.ac: Use 'pwd -P' instead of '/bin/pwd'.
	* configure: Regenerate.
	* io/ftwtest-sh: Use 'pwd -P' instead of '/bin/pwd'.
	* scripts/rellns-sh: Likewise.  Remove 'pwd' variable.

2015-12-02  Carlos O'Donell  <carlos@redhat.com>

	* iconvdata/ibm930.c: Add comment explaining encoding uses.
	* iconvdata/ibm933.c: Likewise.
	* iconvdata/ibm935.c: Likewise.
	* iconvdata/ibm937.c: Likewise.
	* iconvdata/ibm939.c: Likewise.

2015-12-02  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/tst-cancel20.c (do_one_test): Move the pipe closing after
	pthread_join.
	* nptl/tst-cancel21.c (tf): Likewise.

2015-12-01  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19313]
	* bits/typesizes.h (__CPU_MASK_TYPE): New.
	* sysdeps/mach/hurd/bits/typesizes.h (__CPU_MASK_TYPE): Likewise.
	* sysdeps/nacl/bits/typesizes.h (__CPU_MASK_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/typesizes.h (__CPU_MASK_TYPE):
	Likewise.
	* sysdeps/unix/sysv/linux/generic/bits/typesizes.h (__CPU_MASK_TYPE):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h (__CPU_MASK_TYPE):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h (__CPU_MASK_TYPE):
	Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h (__CPU_MASK_TYPE):
	* sysdeps/unix/sysv/linux/bits/sched.h (__cpu_mask): Replace
	unsigned long int with __CPU_MASK_TYPE.

2015-12-01  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Regenerated.

2015-12-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/dbl-64/e_sqrt.c: Do not include uroot.h.
	(__ieee754_sqrt): Use hex float constants instead of tm256.x and
	t512.x.
	* sysdeps/ieee754/dbl-64/uroot.h: Remove file.

2015-11-30  Amit Pawar  <amit.pawar@amd.com>

	[BZ #19214]
	* sysdeps/x86/cpu-features.c (get_common_indeces): Add an
	argument to return extended model.  Update family and model
	with extended family and model when family == 0x0f.
	(init_cpu_features): Updated.

2015-11-29  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	The RPC interface used by mmap uses the unsigned vm_offset_t, not the
	signed off_t, so 32bit bigger than 2GiB values are fine actually.

	* sysdeps/mach/hurd/mmap64.c: New file.

2015-11-29  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/hurd/fork.c (__fork): Install correct number of send
	rights for its main user thread in NEWTASK.

2015-11-28  Maciej W. Rozycki  <macro@imgtec.com>

	* sysdeps/mips/fpu_control.h (_FPU_RESERVED): Include ABS2008.
	(_FPU_DEFAULT, _FPU_IEEE) [__mips_nan2008]: Set ABS2008.

2015-11-27  Carlos O'Donell  <carlos@redhat.com>

	[BZ #14259]
	* Makeconfig: Rename localedir to complocaledir.
	Rename inst_localedir to inst_complocaledir.
	* aclocal.m4: Rename libc_cv_localedir to libc_cv_complocaledir.
	* config.make.in: Use complocaledir and libc_cv_complocaledir.
	* configure.ac: Use libc_cv_complocaledir.
	* configure: Regenerate.
	* locale/Makefile: Use complocaledir. Rename define -DLOCALEDIR to
	-DCOMPLOCALEDIR.
	* locale/findlocale.c: Use COMPLOCALEDIR.
	* locale/loadarchive.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* locale/programs/locarchive.c: Likewise.
	* localedata/Makefile: Use inst_complocaledir.
	* sysdeps/gnu/configure: Regenerate.
	* sysdeps/hppa/configure: Regenerate.
	* sysdeps/unix/sysv/linux/aarch64/configure: Regenerate.
	* sysdeps/unix/sysv/linux/mips/configure: Regenerate.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure: Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-64/configure: Regenerate.
	* sysdeps/unix/sysv/linux/sparc/sparc64/configure: Regenerate.
	* sysdeps/unix/sysv/linux/x86_64/64/configure: Regenerate.
	* sysdeps/unix/sysv/linux/x86_64/x32/configure: Regenerate.

2015-11-27  Andrew Senkevich  <andrew.senkevich@intel.com>

	[BZ #19058]
	* math/Makefile ($(inst_libdir)/libm.so): Added libmvec_nonshared.a to
	AS_NEEDED.
	* sysdeps/x86/fpu/bits/math-vector.h: Removed code with asm aliases
	workaround.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support,
	libmvec-static-only-routines): Added new file.
	* sysdeps/x86_64/fpu/svml_finite_alias.S: New file.

2015-11-25  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/sigunwind.c (_hurdsig_longjmp_from_handler): Destroy reply port
	of interrupted RPC instead of restoring it.

	* sysdeps/i386/setjmp.S (__sigsetjmp): Add hidden_def.
	* sysdeps/mach/hurd/accept4.c (__libc_accept4): Remove
	libc_hidden_def.
	* sysdeps/mach/hurd/dl-sysdep.c (__libc_stack_end): Initialize to get
	into initialized data instead of common. Define rtld_hidden_data_def.
	* sysdeps/mach/hurd/fxstatat64.c (__fxstatat64): Add libc_hidden_def.
	* sysdeps/mach/hurd/if_index.c (__if_freenameindex): Add
	libc_hidden_def.
	(if_freenameindex): Add libc_hidden_weak.
	(if_nameindex): Add libc_hidden_weak.
	* sysdeps/mach/hurd/open.c (_open64): Rename libc_hidden_weak into
	__open64.
	* sysdeps/mach/hurd/sigwait.c (__sigwait): Add libc_hidden_def.
	* sysdeps/mach/hurd/xmknodat.c (__xmknodat): Add libc_hidden_def.
	* sysdeps/mach/nanosleep.c: Include <time.h>
	(__nanosleep): Rename to __libc_nanosleep.
	(__nanosleep): Add weak_alias.
	(nanosleep): Update alias.

2015-11-24  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/strtod_nan.c: New file.
	* stdlib/strtod_nan_double.h: Likewise.
	* stdlib/strtod_nan_float.h: Likewise.
	* stdlib/strtod_nan_main.c: Likewise.
	* stdlib/strtod_nan_narrow.h: Likewise.
	* stdlib/strtod_nan_wide.h: Likewise.
	* stdlib/strtof_nan.c: Likewise.
	* stdlib/strtold_nan.c: Likewise.
	* sysdeps/ieee754/ldbl-128/strtod_nan_ldouble.h: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/strtod_nan_ldouble.h: Likewise.
	* sysdeps/ieee754/ldbl-96/strtod_nan_ldouble.h: Likewise.
	* wcsmbs/wcstod_nan.c: Likewise.
	* wcsmbs/wcstof_nan.c: Likewise.
	* wcsmbs/wcstold_nan.c: Likewise.
	* stdlib/Makefile (routines): Add strtof_nan, strtod_nan and
	strtold_nan.
	* wcsmbs/Makefile (routines): Add wcstod_nan, wcstold_nan and
	wcstof_nan.
	* include/stdlib.h (__strtof_nan): Declare and use
	libc_hidden_proto.
	(__strtod_nan): Likewise.
	(__strtold_nan): Likewise.
	(__wcstof_nan): Likewise.
	(__wcstod_nan): Likewise.
	(__wcstold_nan): Likewise.
	* include/wchar.h (____wcstoull_l_internal): Declare.
	* stdlib/strtod_l.c: Do not include <ieee754.h>.
	(____strtoull_l_internal): Remove declaration.
	(STRTOF_NAN): Define macro.
	(SET_MANTISSA): Remove macro.
	(STRTOULL): Likewise.
	(____STRTOF_INTERNAL): Use STRTOF_NAN to parse NaN payload.
	* stdlib/strtof_l.c (____strtoull_l_internal): Remove declaration.
	(STRTOF_NAN): Define macro.
	(SET_MANTISSA): Remove macro.
	* sysdeps/ieee754/ldbl-128/strtold_l.c (STRTOF_NAN): Define macro.
	(SET_MANTISSA): Remove macro.
	* sysdeps/ieee754/ldbl-128ibm/strtold_l.c (STRTOF_NAN): Define
	macro.
	(SET_MANTISSA): Remove macro.
	* sysdeps/ieee754/ldbl-64-128/strtold_l.c (STRTOF_NAN): Define
	macro.
	(SET_MANTISSA): Remove macro.
	* sysdeps/ieee754/ldbl-96/strtold_l.c (STRTOF_NAN): Define macro.
	(SET_MANTISSA): Remove macro.
	* wcsmbs/wcstod_l.c (____wcstoull_l_internal): Remove declaration.
	* wcsmbs/wcstof_l.c (____wcstoull_l_internal): Likewise.
	* wcsmbs/wcstold_l.c (____wcstoull_l_internal): Likewise.

	[BZ #19266]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Check directly for
	upper case and lower case letters inside NAN(), not using TOLOWER.
	* stdlib/tst-strtod-nan-locale-main.c: New file.
	* stdlib/tst-strtod-nan-locale.c: Likewise.
	* stdlib/Makefile (tests): Add tst-strtod-nan-locale.
	[$(run-built-tests) = yes] ($(objpfx)tst-strtod-nan-locale.out):
	Depend on $(gen-locales).
	($(objpfx)tst-strtod-nan-locale): Depend on $(libm).
	* wcsmbs/tst-wcstod-nan-locale.c: New file.
	* wcsmbs/Makefile (tests): Add tst-wcstod-nan-locale.
	[$(run-built-tests) = yes] ($(objpfx)tst-wcstod-nan-locale.out):
	Depend on $(gen-locales).
	($(objpfx)tst-wcstod-nan-locale): Depend on $(libm).

2015-11-24  Chris Metcalf  <cmetcalf@ezchip.com>

	* misc/tst-tsearch.c (TIMEOUT): Set to 10.

	* sysdeps/tile/bits/mathdef.h (__NO_LONG_DOUBLE_MATH): Define.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: Add
	__finitel, __isinfl, and __isnanl.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist: Add
	__finitel.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.

2015-11-24  Gleb Fotengauer-Malinovskiy  <glebfm@altlinux.org>

	* malloc/memusage.c (me): Remove redundant getenv call.

2015-10-24  Florian Weimer  <fweimer@redhat.com>

	[BZ #19143]
	[BZ #19164]
	* nptl/check-cpuset.h: Remove.
	* nptl/pthread_attr_setaffinity.c (__pthread_attr_setaffinity_new):
	Remove CPU set size check.
	* nptl/pthread_setattr_default_np.c (pthread_setattr_default_np):
	Likewise.
	* sysdeps/unix/sysv/linux/check-cpuset.h: Remove.
	* sysdeps/unix/sysv/linux/pthread_setaffinity.c
	(__kernel_cpumask_size, __determine_cpumask_size): Remove.
	(__pthread_setaffinity_new): Remove CPU set size check.
	* sysdeps/unix/sysv/linux/sched_setaffinity.c
	(__kernel_cpumask_size): Remove.
	(__sched_setaffinity_new): Remove CPU set size check.
	* manual/threads.texi (Default Thread Attributes): Remove stale
	reference to check_cpuset_attr, determine_cpumask_size in comment.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir) == posix] (tests):
	Remove tst-getcpu.  Add tst-affinity, tst-affinity-pid.
	[$(subdir) == nptl] (tests): Add tst-thread-affinity-pthread,
	tst-thread-affinity-pthread2, tst-thread-affinity-sched.
	* sysdeps/unix/sysv/linux/tst-affinity.c: New file.
	* sysdeps/unix/sysv/linux/tst-affinity-pid.c: New file.
	* sysdeps/unix/sysv/linux/tst-skeleton-affinity.c: New skeleton test file.
	* sysdeps/unix/sysv/linux/tst-thread-affinity-sched.c: New file.
	* sysdeps/unix/sysv/linux/tst-thread-affinity-pthread.c: New file.
	* sysdeps/unix/sysv/linux/tst-thread-affinity-pthread2.c: New file.
	* sysdeps/unix/sysv/linux/tst-thread-skeleton-affinity.c: New
	skeleton test file.
	* sysdeps/unix/sysv/linux/tst-getcpu.c: Remove.  Superseded by
	tst-affinity-pid.

2015-11-24  Florian Weimer  <fweimer@redhat.com>

	* scripts/update-abilist.sh: New file.
	* Makefile (+subdir_targets): Add subdir_update-all-abi.
	* Makerules (update-all-abi-%, update-all-abi)
	(subdir_update-all-abi): New targets.
	* elf/Makefile (update-all-abi): New target.

2015-11-24  Florian Weimer  <fweimer@redhat.com>

	Replace MUTEX_INITIALIZER with _LIBC_LOCK_INITIALIZER in generic code.
	* sysdeps/mach/hurd/libc-lock.h (_LIBC_LOCK_INITIALIZER): Define.
	(__libc_lock_define_initialized): Use it.
	* sysdeps/nptl/libc-lockP.h (_LIBC_LOCK_INITIALIZER): Define.
	* malloc/arena.c (list_lock): Use _LIBC_LOCK_INITIALIZER.
	* malloc/malloc.c (main_arena): Likewise.
	* sysdeps/generic/malloc-machine.h (MUTEX_INITIALIZER): Remove.
	* sysdeps/nptl/malloc-machine.h (MUTEX_INITIALIZER): Remove.

2015-11-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/aarch64/sys/ptrace.h
	(PTRACE_O_EXITKILL): New value in enum __ptrace_setoptions.
	(PTRACE_O_SUSPEND_SECCOMP): Likewise.
	(PTRACE_O_MASK): Update value.
	* sysdeps/unix/sysv/linux/ia64/sys/ptrace.h (PTRACE_O_EXITKILL):
	New value in enum __ptrace_setoptions.
	(PTRACE_O_SUSPEND_SECCOMP): Likewise.
	(PTRACE_O_MASK): Update value.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h
	(PTRACE_O_SUSPEND_SECCOMP): New value in enum __ptrace_setoptions.
	(PTRACE_O_MASK): Update value.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h
	(PTRACE_O_SUSPEND_SECCOMP): New value in enum __ptrace_setoptions.
	(PTRACE_O_MASK): Update value.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h
	(PTRACE_O_SUSPEND_SECCOMP): New value in enum __ptrace_setoptions.
	(PTRACE_O_MASK): Update value.
	* sysdeps/unix/sysv/linux/sys/ptrace.h (PTRACE_O_SUSPEND_SECCOMP):
	New value in enum __ptrace_setoptions.
	(PTRACE_O_MASK): Update value.
	* sysdeps/unix/sysv/linux/tile/sys/ptrace.h (PTRACE_O_EXITKILL):
	New value in enum __ptrace_setoptions.
	(PTRACE_O_SUSPEND_SECCOMP): Likewise.
	(PTRACE_O_MASK): Update value.

	* sysdeps/unix/sysv/linux/netpacket/packet.h (PACKET_COPY_THRESH):
	New macro.
	(PACKET_AUXDATA): Likewise.
	(PACKET_ORIGDEV): Likewise.
	(PACKET_VERSION): Likewise.
	(PACKET_HDRLEN): Likewise.
	(PACKET_RESERVE): Likewise.
	(PACKET_TX_RING): Likewise.
	(PACKET_LOSS): Likewise.
	(PACKET_VNET_HDR): Likewise.
	(PACKET_TX_TIMESTAMP): Likewise.
	(PACKET_TIMESTAMP): Likewise.
	(PACKET_FANOUT): Likewise.
	(PACKET_TX_HAS_OFF): Likewise.
	(PACKET_QDISC_BYPASS): Likewise.
	(PACKET_ROLLOVER_STATS): Likewise.
	(PACKET_FANOUT_DATA): Likewise.
	(PACKET_MR_UNICAST): Likewise.

	[BZ #19242]
	* stdlib/strtol_l.c (ISALPHA): Use _nl_C_locobj_ptr for locale.
	(TOUPPER): Likewise.
	* stdlib/tst-strtol-locale-main.c: New file.
	* stdlib/tst-strtol-locale.c: Likewise.
	* stdlib/Makefile (tests): Add tst-strtol-locale.
	[$(run-built-tests) = yes] (LOCALES): Add tr_TR.ISO-8859-9.
	[$(run-built-tests) = yes] ($(objpfx)tst-strtol-locale.out):
	Depend on $(gen-locales).
	* wcsmbs/tst-wcstol-locale.c: New file.
	* wcsmbs/Makefile (tests): Add tst-wcstol-locale.
	[$(run-built-tests) = yes] (LOCALES): Add tr_TR.UTF-8 and
	tr_TR.ISO-8859-9.
	[$(run-built-tests) = yes] ($(objpfx)tst-wcstol-locale.out):
	Depend on $(gen-locales).

2015-11-20  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/dl-map-segments.h (_dl_map_segments): Use
	__glibc_likely instead of __builtin_expect.  After falling back to
	dyncode_create in a non-ET_DYN case, use the allocate_code_data
	system interface to register the code pages as occupied.

2015-11-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/arm/math_private.h [!_MATH_PRIVATE_H]: Change guard to
	[!ARM_MATH_PRIVATE_H].
	[!ARM_MATH_PRIVATE_H] (ARM_MATH_PRIVATE_H): Define macro.
	* sysdeps/hppa/math_private.h [!_MATH_PRIVATE_H]: Change guard to
	[!HPPA_MATH_PRIVATE_H].
	[!HPPA_MATH_PRIVATE_H] (HPPA_MATH_PRIVATE_H): Define macro.
	* sysdeps/i386/fpu/math_private.h [!_MATH_PRIVATE_H]: Change guard
	to [!I386_MATH_PRIVATE_H].
	[!I386_MATH_PRIVATE_H] (I386_MATH_PRIVATE_H): Define macro.
	* sysdeps/m68k/m680x0/fpu/math_private.h [!_MATH_PRIVATE_H]:
	Change guard to [!M68K_MATH_PRIVATE_H].
	[!M68K_MATH_PRIVATE_H] (M68K_MATH_PRIVATE_H): Define macro.
	* sysdeps/microblaze/math_private.h [!_MATH_PRIVATE_H]: Change
	guard to [!MICROBLAZE_MATH_PRIVATE_H].
	[!MICROBLAZE_MATH_PRIVATE_H] (MICROBLAZE_MATH_PRIVATE_H): Define
	macro.
	* sysdeps/mips/math_private.h [!_MATH_PRIVATE_H]: Change guard to
	[!MIPS_MATH_PRIVATE_H].
	[!MIPS_MATH_PRIVATE_H] (MIPS_MATH_PRIVATE_H): Define macro.
	* sysdeps/nios2/math_private.h [!_MATH_PRIVATE_H]: Change guard to
	[!NIO2_MATH_PRIVATE_H].
	[!NIO2_MATH_PRIVATE_H] (NIO2_MATH_PRIVATE_H): Define macro.
	* sysdeps/tile/math_private.h [!_MATH_PRIVATE_H]: Change guard to
	[!TILE_MATH_PRIVATE_H].
	[!TILE_MATH_PRIVATE_H] (TILE_MATH_PRIVATE_H): Define macro.

	[BZ #15421]
	* sysdeps/ieee754/s_signgam.c (signgam): Rename to __signgam,
	initialize with 0 and define as weak alias of __signgam.
	* include/math.h [!_ISOMAC] (__signgam): Declare.
	* math/Makefile (libm-calls): Add w_lgamma_compat.
	(tests): Add test-signgam-uchar, test-signgam-uchar-init,
	test-signgam-uint, test-signgam-uint-init, test-signgam-ullong and
	test-signgam-ullong-init.
	(tests-static): Add test-signgam-uchar-static,
	test-signgam-uchar-init-static, test-signgam-uint-static,
	test-signgam-uint-init-static, test-signgam-ullong-static and
	test-signgam-ullong-init-static.
	(CFLAGS-test-signgam-uchar.c): New variable.
	(CFLAGS-test-signgam-uchar-init.c): Likewise.
	(CFLAGS-test-signgam-uchar-static.c): Likewise.
	(CFLAGS-test-signgam-uchar-init-static.c): Likewise.
	(CFLAGS-test-signgam-uint.c): Likewise.
	(CFLAGS-test-signgam-uint-init.c): Likewise.
	(CFLAGS-test-signgam-uint-static.c): Likewise.
	(CFLAGS-test-signgam-uint-init-static.c): Likewise.
	(CFLAGS-test-signgam-ullong.c): Likewise.
	(CFLAGS-test-signgam-ullong-init.c): Likewise.
	(CFLAGS-test-signgam-ullong-static.c): Likewise.
	(CFLAGS-test-signgam-ullong-init-static.c): Likewise.
	* math/Versions (libm): Add GLIBC_2.23.
	* math/lgamma-compat.h: New file.
	* math/test-signgam-main.c: Likewise.
	* math/test-signgam-uchar-init-static.c: Likewise.
	* math/test-signgam-uchar-init.c: Likewise.
	* math/test-signgam-uchar-static.c: Likewise.
	* math/test-signgam-uchar.c: Likewise.
	* math/test-signgam-uint-init-static.c: Likewise.
	* math/test-signgam-uint-init.c: Likewise.
	* math/test-signgam-uint-static.c: Likewise.
	* math/test-signgam-uint.c: Likewise.
	* math/test-signgam-ullong-init-static.c: Likewise.
	* math/test-signgam-ullong-init.c: Likewise.
	* math/test-signgam-ullong-static.c: Likewise.
	* math/test-signgam-ullong.c: Likewise.
	* math/w_lgamma.c: Rename to w_lgamma_main.c and replace by
	wrapper of w_lgamma_main.c.
	* math/w_lgamma_compat.c: New file.
	* math/w_lgamma_compatf.c: Likewise.
	* math/w_lgamma_compatl.c: Likewise.
	* math/w_lgamma_main.c: New file.  Based on w_lgamma.c.  Include
	<lgamma-compat.h>.  Condition contents on [BUILD_LGAMMA].  Support
	defining compatibility symbols.
	(__lgamma): Change to LGFUNC (__lgamma).  Use CALL_LGAMMA.
	* math/w_lgammaf.c: Rename to w_lgammaf_main.c and replace by
	wrapper of w_lgammaf_main.c.
	* math/w_lgammaf_main.c: New file.  Based on w_lgammaf.c.  Include
	<lgamma-compat.h>.  Condition contents on [BUILD_LGAMMA].  Support
	defining compatibility symbols.
	(__lgammaf): Change to LGFUNC (__lgammaf).  Use CALL_LGAMMA.
	* math/w_lgammal.c: Rename to w_lgammal_main.c and replace by
	wrapper of w_lgammal_main.c.
	* math/w_lgammal_main.c: New file.  Based on w_lgammal.c.  Include
	<lgamma-compat.h>.  Condition contents on [BUILD_LGAMMA].  Support
	defining compatibility symbols.
	(__lgammal): Change to LGFUNC (__lgammal).  Use CALL_LGAMMA.
	* sysdeps/ia64/fpu/lgamma-compat.h: New file.
	* sysdeps/ia64/fpu/w_lgamma.c: Move to ....
	* sysdeps/ia64/fpu/w_lgamma_main.c: ...here.  Include
	<lgamma-compat.h>.
	(__ieee754_lgamma): Change to LGFUNC (lgamma).  Use CALL_LGAMMA.
	(__ieee754_gamma): Define as alias.
	* sysdeps/ia64/fpu/w_lgammaf.c: Move to ....
	* sysdeps/ia64/fpu/w_lgammaf_main.c: ...here.  Include
	<lgamma-compat.h>.
	(__ieee754_lgammaf): Change to LGFUNC (lgammaf).  Use CALL_LGAMMA.
	(__ieee754_gammaf): Define as alias.
	* sysdeps/ia64/fpu/w_lgammal.c: Move to ....
	* sysdeps/ia64/fpu/w_lgammal_main.c: ...here.  Include
	<lgamma-compat.h>.
	(__ieee754_lgammal): Change to LGFUNC (lgammal).  Use CALL_LGAMMA.
	(__ieee754_gammal): Define as alias.
	* sysdeps/ieee754/ldbl-opt/w_lgamma.c: Move to ....
	* sysdeps/ieee754/ldbl-opt/w_lgamma_compat.c: ...here.  Include
	<math/w_lgamma_compat.c>.
	[LONG_DOUBLE_COMPAT(libm, GLIBC_2_0)] (__lgammal_dbl_compat):
	Define as alias of __lgamma_compat and use in defining lgammal.
	* sysdeps/ieee754/ldbl-opt/w_lgammal.c: Move to ....
	* sysdeps/ieee754/ldbl-opt/w_lgamma_compatl.c: ...here.  Include
	<math/lgamma-compat.h> and <math/w_lgamma_compatl.c>.
	(USE_AS_COMPAT): New macro.
	(LGAMMA_OLD_VER): Undefine and redefine.
	(lgammal): Do not define here.
	(gammal): Only define here if [GAMMA_ALIAS].
	* conform/linknamespace.pl (@whitelist): Remove signgam.
	* sysdeps/nacl/libm.abilist: Update.
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: Likewise.

2015-11-20  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #16364]
	* sysdeps/unix/sysv/linux/sleep.c: Remove file.
	* sysdeps/posix/sleep.c (__sleep): Simplify cancellation handling.

2015-11-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/bits/mathinline.h:
	Use __asm__ [__volatile__] instead of asm [volatile].
	* sysdeps/s390/abort-instr.h: Likewise.
	* sysdeps/s390/atomic-machine.h: Likewise.
	* sysdeps/s390/bits/string.h: Likewise.
	* sysdeps/s390/dl-tls.h: Likewise.
	* sysdeps/s390/fpu/e_sqrt.c: Likewise.
	* sysdeps/s390/fpu/e_sqrtf.c: Likewise.
	* sysdeps/s390/fpu/e_sqrtl.c: Likewise.
	* sysdeps/s390/fpu/fesetround.c: Likewise.
	* sysdeps/s390/fpu/fpu_control.h: Likewise.
	* sysdeps/s390/fpu/s_fma.c: Likewise.
	* sysdeps/s390/fpu/s_fmaf.c: Likewise.
	* sysdeps/s390/memusage.h: Likewise.
	* sysdeps/s390/multiarch/ifunc-resolve.h: Likewise.
	* sysdeps/s390/nptl/pthread_spin_lock.c: Likewise.
	* sysdeps/s390/nptl/pthread_spin_trylock.c: Likewise.
	* sysdeps/s390/nptl/pthread_spin_unlock.c: Likewise.
	* sysdeps/s390/nptl/tls.h: Likewise.
	* sysdeps/s390/s390-32/__longjmp.c: Likewise.
	* sysdeps/s390/s390-32/backtrace.c: Likewise.
	* sysdeps/s390/s390-32/dl-machine.h: Likewise.
	* sysdeps/s390/s390-32/multiarch/memcmp.c: Likewise.
	* sysdeps/s390/s390-32/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-32/tls-macros.h: Likewise.
	* sysdeps/s390/s390-64/__longjmp.c: Likewise.
	* sysdeps/s390/s390-64/backtrace.c: Likewise.
	* sysdeps/s390/s390-64/dl-machine.h: Likewise.
	* sysdeps/s390/s390-64/iso-8859-1_cp037_z900.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/memcmp.c: Likewise.
	* sysdeps/s390/s390-64/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-64/tls-macros.h: Likewise.
	* sysdeps/s390/s390-64/utf16-utf32-z9.c: Likewise.
	* sysdeps/s390/s390-64/utf8-utf16-z9.c: Likewise.
	* sysdeps/s390/s390-64/utf8-utf32-z9.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/brk.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/elision-trylock.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/____longjmp_chk.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/____longjmp_chk.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sysconf.c: Likewise.

2015-11-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>
	    Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/powerpc/nptl/pthread_spin_lock.c (pthread_spin_lock):
	Add lwarx hint, and use macro for acquire instruction.
	* sysdeps/powerpc/nptl/pthread_spin_trylock.c (pthread_spin_trylock):
	Likewise.
	* sysdep/unix/sysv/linux/powerpc/pthread_spin_unlock.c: Move to ...
	* sysdeps/powerpc/nptl/pthread_spin_unlock.c: ... here, and
	update to use new atomic macros.

2015-11-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/elision-trylock.c
	(__lll_trylock_elision): Fix setting of adapt_count.
	* sysdeps/unix/sysv/linux/powerpc/htm.h
	(_ABORT_PERSISTENT): Define to clarify persistent aborts.
	(_ABORT_NESTED_TRYLOCK): Renumber, and make persistent.
	(_ABORT_SYSCALL): Renumber, and clarify definition.
	(_ABORT_LOCK_BUSY): Renumber, make non-persistent.

2015-11-19  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/mpn2ldl.c: Include gmp headers
	after system headers to prevent MIN/MAX redefinition.  Define
	HAVE_ALLOCA to preserve builtin alloca usage.

2015-11-17  Siddhesh Poyarekar  <siddhesh.poyarekar@linaro.org>

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin)[IN_SINCOS]: Mark function
	static and don't set or restore rounding.
	(__cos)[IN_SINCOS]: Likewise.
	* sysdeps/ieee754/dbl-64/s_sincos.c: Include s_sin.c.
	(__sincos): Set and restore rounding mode.  Remove check for infinite
	or NaN input.

	* sysdeps/ieee754/dbl-64/s_sin.c: Remove redundant else clauses.

	* benchtests/scripts/bench.py (_print_arg_data): Mark output variables
	as used.

2015-11-16  Florian Weimer  <fweimer@redhat.com>

	* math/test-signgam-finite-c99.c (_Mlong_double_): Undefine.

2015-11-14  H.J. Lu  <hongjiu.lu@intel.com>

	* config.make.in (have-glob-dat-reloc): New.
	* configure.ac (libc_cv_has_glob_dat): New.  Set to yes if
	target supports GLOB_DAT relocaton. AC_SUBST.
	* configure: Regenerated.
	* elf/Makefile (tests): Add tst-prelink.
	(tests-special): Add $(objpfx)tst-prelink-cmp.out.
	(tst-prelink-ENV): New.
	($(objpfx)tst-prelink-conflict.out): Likewise.
	($(objpfx)tst-prelink-cmp.out): Likewise.
	* sysdeps/x86/tst-prelink.c: Moved to ...
	* elf/tst-prelink.c: Here.
	* sysdeps/x86/tst-prelink.exp: Moved to ...
	* elf/tst-prelink.exp: Here.
	* sysdeps/x86/Makefile (tests): Don't add tst-prelink.
	(tst-prelink-ENV): Removed.
	($(objpfx)tst-prelink-conflict.out): Likewise.
	($(objpfx)tst-prelink-cmp.out): Likewise.
	(tests-special): Don't add $(objpfx)tst-prelink-cmp.out.

2015-11-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14551]
	* sysdeps/ieee754/ldbl-128ibm/mpn2ldbl.c: Include <errno.h>.
	(__mpn_construct_long_double): If high part overflows to infinity,
	set errno and recompute overflowed result of the correct sign.
	* sysdeps/ieee754/ldbl-128ibm/Makefile
	[$(subdir) = stdlib] (tests): Add tst-strtold-ldbl-128ibm.
	[$(subdir) = stdlib] ($(objpfx)tst-strtold-ldbl-128ibm): Depend on
	$(libm).
	* sysdeps/ieee754/ldbl-128ibm/tst-strtold-ldbl-128ibm.c: New file.

2015-11-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15479]
	[BZ #19238]
	* sysdeps/powerpc/powerpc32/fpu/s_round.S (__round): Save
	floating-point state after first operation on input.  Restore full
	state rather than just rounding mode.
	* sysdeps/powerpc/powerpc32/fpu/s_roundf.S (__roundf): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_round.S (__round): Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_roundf.S (__roundf): Likewise.

	[BZ #19235]
	* sysdeps/powerpc/powerpc64/fpu/s_llround.S (__llround): Do not
	add 0.5 to integer arguments.
	* sysdeps/powerpc/powerpc64/fpu/s_llroundf.S (__llroundf):
	Likewise.
	(.LC2): New object.

2015-11-11  Mike Frysinger  <vapier@gentoo.org>

	* scripts/pylintrc (reports): Set to no.

2015-11-10  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-load.c (open_verify): Take new argument FD.
	Skip __open call if passed FD is not -1.
	(_dl_map_object, open_path): Update callers.
	* elf/dl-sysdep-open.h: New file.
	* elf/dl-load.c: Include it.
	(_dl_map_object): Try _dl_sysdep_open_object before ldconfig cache.
	* sysdeps/nacl/dl-sysdep.c (_dl_sysdep_open_object): New function.
	* sysdeps/nacl/dl-sysdep-open.h: New file.
	* sysdeps/nacl/nacl-interface-list.h: Move nacl_irt_resource_open
	from libc to rtld.

2015-11-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19228]
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S (__nearbyint): Save
	and restore full floating-point state.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyintf.S (__nearbyintf):
	Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyint.S (__nearbyint):
	Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintf.S (__nearbyintf):
	Likewise.
	* math/test-nearbyint-except-2.c: New file.
	* math/Makefile (tests): Add test-nearbyint-except-2.

2015-11-10  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19178]
	* sysdeps/x86/Makefile (tests): Add tst-prelink.
	(tst-prelink-ENV): New.
	($(objpfx)tst-prelink-conflict.out): Likewise.
	($(objpfx)tst-prelink-cmp.out): Likewise.
	(tests-special): Add $(objpfx)tst-prelink-cmp.out.
	* sysdeps/x86/tst-prelink.c: New file.
	* sysdeps/x86/tst-prelink.exp: Likewise.

2015-11-10  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add another test of pow.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (pow_test_data): Add another test.

2015-11-10  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #19219]
	* sysdeps/ia64/fpu/s_nearbyintl.S (__nearbyint): Define and
	weak_alias to nearbyintl.

2015-11-10  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/bits/string.h: New file.
	(_STRING_ARCH_unaligned): Define.

2015-11-10  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/unix/sysv/linux/aarch64/localplt.data: Remove __signbit*.
	* sysdeps/unix/sysv/linux/arm/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/nios2/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/localplt.data: Likewise.

2015-11-09  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (_dl_map_object_from_fd): Add additional parameter
	for original name of the DSO.  Add it to the name list of the DSO
	if it is actually given.
	(_dl_map_object): Keep track of whether an audit module rewrote
	the file name.  If yes, pass the original name to
	_dl_map_object_from_fd in a new parameter, otherwise NULL.  When
	debugging is enabled, log the change of the file name.
	* sysdeps/mach/hur/dl-sysdep.c: Adjust commented-out call to
	_dl_map_object_from_fd.
	* elf/Makefile: Build and run tst-audit11 and tst-audit12.
	* elf/tst-audit11.c: New file
	* elf/tst-auditmod11.c: New file.
	* elf/tst-audit11mod1.c: New file.
	* elf/tst-audit11mod2.c: New file.
	* elf/tst-audit11mod2.map: New file.
	* elf/tst-audit12.c: New file
	* elf/tst-auditmod12.c: New file.
	* elf/tst-audit12mod1.c: New file.
	* elf/tst-audit12mod2.c: New file.
	* elf/tst-audit12mod2.map: New file.
	* elf/tst-audit12mod3.c: New file.

2015-11-09  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/longjmp.c (longjmp, _longjmp, siglongjmp):
	Don't create weak aliases,
	because versioned symbols are created later.
	* sysdeps/s390/s390-32/setjmp.S
	(setjmp, _setjmp): Remove weak and rename to an unique name
	in SHARED case due to existing versioned symbols.
	* sysdeps/s390/s390-64/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext.S
	(getcontext): Create weak alias only in non SHARED case.
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext.S: Likewise.

2015-11-09  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/kernel-features.h:
	(__ASSUME_*_SYSCALL) Define new macros.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list:
	Remove socketcall syscalls.
	* sysdeps/unix/sysv/linux/accept.c (__libc_accept):
	Use accept4 if defined __ASSUME_ACCEPT4_FOR_ACCEPT_SYSCALL.
	* sysdeps/unix/sysv/linux/recv.c (__libc_recv):
	Use recvfrom if defined __ASSUME_RECVFROM_FOR_RECV_SYSCALL.
	* sysdeps/unix/sysv/linux/send.c (__libc_send):
	Use sendto if defined __ASSUME_SENDTO_FOR_SEND_SYSCALL.

2015-11-09  Florian Weimer  <fweimer@redhat.com>

	[BZ #12926]
	Terminate process on invalid netlink response.
	* sysdeps/unix/sysv/linux/netlinkaccess.h
	(__netlink_assert_response): Declare.
	* sysdeps/unix/sysv/linux/netlink_assert_response.c: New file.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir) == inet]
	(sysdep_routines): Add netlink_assert_response.
	* sysdeps/unix/sysv/linux/check_native.c (__check_native): Call
	__netlink_assert_response.
	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Likewise.
	* sysdeps/unix/sysv/linux/ifaddrs.c (__netlink_request): Likewise.
	* sysdeps/unix/sysv/linux/Versions (GLIBC_PRIVATE): Add
	__netlink_assert_response.

2015-11-07  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19178]
	* elf/dl-lookup.c (RTYPE_CLASS_VALID): New.
	(RTYPE_CLASS_PLT): Likewise.
	(RTYPE_CLASS_COPY): Likewise.
	(RTYPE_CLASS_TLS): Likewise.
	(_dl_debug_bindings): Use RTYPE_CLASS_TLS and RTYPE_CLASS_VALID
	to set relocation type class for DL_DEBUG_PRELINK.  Keep only
	ELF_RTYPE_CLASS_PLT and ELF_RTYPE_CLASS_COPY bits for
	DL_DEBUG_PRELINK.

2015-11-06  Joseph Myers  <joseph@codesourcery.com>

	* math/test-signgam-finite.c (RUN_TESTS): Correct messages about
	calls with argument -0.5.
	* math/test-signgam-finite-c99.c (RUN_TESTS): Likewise.

	* configure.ac (libc_cv_z_nodelete): Remove configure test.
	(libc_cv_z_nodlopen): Likewise.
	(libc_cv_z_initfirst): Likewise.
	* configure: Regenerated.

2015-11-06  Florian Weimer  <fweimer@redhat.com>

	Simplify abilist format to be line-based.
	* scripts/abilist.awk: Collect descriptors in the descs variable.
	(emit): Write descs variable and sort it
	externally, with sort.
	* sysdeps/**/*.abilist: Convert to new format.

2015-11-06  Mark Wielaard  <mjw@redhat.com>

	[BZ #11460]
	* io/Makefile (routines): Add fts64.
	(tests): Add tst-fts and tst-fts-lfs.
	(CFLAGS-fts64.c): New.
	* io/Versions (GLIBC_2.23): New.
	* io/fts.c: Replace FTS with FTSOBJ, FTSENT with FTSENTRY. Use
	function defines FTS_OPEN, FTS_CLOSE, FTS_READ, FTS_SET and
	FTS_CHILDREN. Define FTSOBJ, FTSENTRY, FTS_OPEN, FTS_CLOSE,
	FTS_READ, FTS_SET, FTS_CHILDREN, INO_T, STAT and LSTAT if necessary.
	* io/fts.h (FTS64): New if _USE_LARGEFILE64.
	(FTSENT64): Likewise.
	(fts64_children): Likewise.
	(fts64_close): Likewise.
	(fts64_open): Likewise.
	(fts64_read): Likewise.
	(fts64_set): Likewise.
	* io/fts64.c: New file.
	* io/tst-fts.c: New test.
	* io/tst-fts-lfs.c: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist (GLIBC_2.23): Add
	GLIBC_2.23, fts64_children, fts64_close, fts64_open, fts64_read and
	fts64_set.
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/arm/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/i386/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: Likewise.
	* sysdeps/wordsize-64/fts.c: New file.
	* sysdeps/wordsize-64/fts64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/fts.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/fts64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/fts.c: likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/fts64.c: likewise.

2015-11-05  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (NON_FINITE): New macro.
	(enable_test): Do not run tests flagged NON_FINITE if TEST_FINITE.
	* math/gen-libm-test.pl (show_exceptions): Add argument
	$non_finite.
	(parse_args): Update call to show_exceptions.
	* math/test-math-finite.h: New file.
	* math/test-math-no-finite.h: Likewise.
	* math/test-double-finite.c: Likewise.
	* math/test-float-finite.c: Likewise.
	* math/test-ldouble-finite.c: Likewise.
	* math/test-double.c: Include "test-math-no-finite.h".
	* math/test-float.c: Include "test-math-no-finite.h".
	* math/test-ldouble.c: Include "test-math-no-finite.h".
	* math/test-math-inline.h (TEST_FINITE): New macro.
	* math/test-math-vector.h (TEST_FINITE): Likewise.
	* math/Makefile (test-longdouble-yes): Add test-ldouble-finite.
	(libm-tests): Add test-float-finite and test-double-finite.
	($(objpfx)test-float-finite.o): New dependency on
	$(objpfx)libm-test.stmp.
	($(objpfx)test-double-finite.o): Likewise.
	($(objpfx)test-ldouble-finite.o): Likewise.
	(libm-test-no-inline-cflags): New variable.
	(libm-test-finite-cflags): Likewise.
	(CFLAGS-test-float-finite.c): Likewise.
	(CFLAGS-test-double-finite.c): Likewise.
	(CFLAGS-test-ldouble-finite.c): Likewise.
	(CFLAGS-test-float.c): Use $(libm-test-no-inline-cflags).
	(CFLAGS-test-double.c): Likewise.
	(CFLAGS-test-ldouble.c): Likewise.

2015-11-05  Roland McGrath  <roland@hack.frob.com>

	* io/fcntl.c (__fcntl): Add ... to prototype.
	* misc/ioctl.c (__ioctl): Likewise.
	* misc/syscall.c (syscall): Likewise.

2015-11-05  Joseph Myers  <joseph@codesourcery.com>

	* scripts/list-fixed-bugs.py: New file.

	[BZ #19213]
	* sysdeps/i386/fpu/e_log.S (__log_finite): Ensure +0 is always
	returned for argument 1.
	* sysdeps/i386/fpu/e_logf.S (__logf_finite): Likewise.
	* sysdeps/i386/fpu/e_logl.S (__logl_finite): Likewise.
	* sysdeps/i386/i686/fpu/e_logl.S (__logl_finite): Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S (__log10l_finite): Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S (__log2l_finite): Likewise.
	* sysdeps/x86_64/fpu/e_logl.S (__logl_finite): Likewise.

	[BZ #19211]
	* math/bits/math-finite.h (lgamma): Set signgam if [__USE_MISC ||
	__USE_XOPEN], not if [!__USE_ISOC99].
	(lgammaf): Likewise.
	(lgammal): Likewise.
	(gamma): Set signgam unconditionally, not if [!__USE_ISOC99].
	(gammaf): Likewise.
	(gammal): Likewise.
	* math/test-signgam-finite-c11.c: New file.
	* math/test-signgam-finite-c99.c: Likewise.
	* math/test-signgam-finite.c: Likewise.
	* math/Makefile (tests): Add test-signgam-finite,
	test-signgam-finite-c99 and test-signgam-finite-c11.
	(CFLAGS-test-signgam-finite.c): New variable.
	(CFLAGS-test-signgam-finite-c99.c): Likewise.
	(CFLAGS-test-signgam-finite-c11.c): Likewise.

	[BZ #19212]
	* include/features.h [(_XOPEN_SOURCE - 0) >= 500]: Change
	conditional to [defined _XOPEN_SOURCE && (_XOPEN_SOURCE - 0) >=
	500].
	[_POSIX_C_SOURCE >= 1]: Change conditional to [defined
	_POSIX_C_SOURCE && _POSIX_C_SOURCE >= 1].
	[(_POSIX_C_SOURCE - 0) >= 199309L]: Change conditional to [defined
	_POSIX_C_SOURCE && (_POSIX_C_SOURCE - 0) >= 199309L].
	[(_POSIX_C_SOURCE - 0) >= 199506L]: Change conditional to [defined
	_POSIX_C_SOURCE && (_POSIX_C_SOURCE - 0) >= 199506L].
	[(_POSIX_C_SOURCE - 0) >= 200112L]: Change conditional to [defined
	_POSIX_C_SOURCE && (_POSIX_C_SOURCE - 0) >= 200112L].
	[(_POSIX_C_SOURCE - 0) >= 200809L]: Change conditional to [defined
	_POSIX_C_SOURCE && (_POSIX_C_SOURCE - 0) >= 200809L].

	[BZ #19209]
	* math/bits/math-finite.h (ldexp): Remove declaration.
	(ldexpf): Likewise.
	(ldexpl): Likewise.

	[BZ #19205]
	* math/bits/math-finite.h (acosf): Condition declaration on
	[__USE_ISOC99].
	(acosl): Likewise.
	(acoshf): Likewise.
	(acoshl): Likewise.
	(asinf): Likewise.
	(asinl): Likewise.
	(atan2f): Likewise.
	(atan2l): Likewise.
	(atanhf): Likewise.
	(atanhl): Likewise.
	(coshf): Likewise.
	(coshl): Likewise.
	(expf): Likewise.
	(expl): Likewise.
	(fmodf): Likewise.
	(fmodl): Likewise.
	(hypot): Change condition to [__USE_XOPEN || __USE_ISOC99].
	(j0f): Change condition to [__USE_MISC && __USE_ISOC99].
	(j0l): Likewise.
	(y0f): Likewise.
	(y0l): Likewise.
	(j1f): Likewise.
	(j1l): Likewise.
	(y1f): Likewise.
	(y1l): Likewise.
	(jnf): Likewise.
	(jnl): Likewise.
	(ynf): Likewise.
	(ynl): Likewise.
	(lgammaf_r): Condition declaration on [__USE_ISOC99].
	(lgammal_r): Likewise.
	(__lgamma_r_finite): New declaration.
	(__lgammaf_r_finite): Likewise.
	(__lgammal_r_finite): Likewise.
	(lgamma): Use __lgamma_r_finite.
	(lgammaf): Condition definition on [__USE_ISOC99].  Use
	__lgammaf_r_finite.
	(lgammal): Condition definition on [__USE_ISOC99].  Use
	__lgammal_r_finite.
	(gamma): Do not define for [!__USE_MISC && __USE_XOPEN2K].  Use
	__lgamma_r_finite.
	(gammaf): Condition definition on [__USE_ISOC99].  Use
	__lgammaf_r_finite.
	(gammal): Condition definition on [__USE_ISOC99].  Use
	__lgammal_r_finite.
	(logf): Condition declaration on [__USE_ISOC99].
	(logl): Likewise.
	(log10f): Likewise.
	(log10l): Likewise.
	(ldexpf): Likewise.
	(ldexpl): Likewise.
	(powf): Likewise.
	(powl): Likewise.
	(remainder): Condition declaration on [__USE_XOPEN_EXTENDED ||
	__USE_ISOC99].
	(remainderf): Condition declaration on [__USE_ISOC99].
	(remainderl): Likewise.
	(scalb): Do not declare for [!__USE_MISC && __USE_XOPEN2K8].
	(scalbf): Change condition to [__USE_MISC && __USE_ISOC99].
	(scalbl): Likewise.
	(sinhf): Condition declaration on [__USE_ISOC99].
	(sinhl): Likewise.
	(sqrtf): Likewise.
	(sqrtl): Likewise.

2015-11-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/arm/atomic-machine.h
	[__GNUC_PREREQ (4, 7) && __GCC_HAVE_SYNC_COMPARE_AND_SWAP_4]:
	Change conditional to [__GCC_HAVE_SYNC_COMPARE_AND_SWAP_4].
	[__GCC_HAVE_SYNC_COMPARE_AND_SWAP_4 && !__GNUC_PREREQ (4, 7)]:
	Remove conditional code.
	[!__GNUC_PREREQ (4, 7) || !__GCC_HAVE_SYNC_COMPARE_AND_SWAP_4]:
	Change conditional to [!__GCC_HAVE_SYNC_COMPARE_AND_SWAP_4].
	* sysdeps/i386/sysdep.h [__ASSEMBLER__ && __GNUC_PREREQ (4, 7)]:
	Change conditional to [__ASSEMBLER__].
	[__ASSEMBLER__ && !__GNUC_PREREQ (4, 7)]: Remove conditional code.
	[!__ASSEMBLER__ && __GNUC_PREREQ (4, 7)]: Change conditional to
	[!__ASSEMBLER__].
	[!__ASSEMBLER__ && !__GNUC_PREREQ (4, 7)]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/sh/atomic-machine.h (rNOSP): Remove
	conditional macro definitions.
	(__arch_compare_and_exchange_val_8_acq): Use "u" instead of rNOSP.
	(__arch_compare_and_exchange_val_16_acq): Likewise.
	(__arch_compare_and_exchange_val_32_acq): Likewise.
	(atomic_exchange_and_add): Likewise.
	(atomic_add): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.
	(atomic_bit_set): Likewise.
	(atomic_bit_test_set): Likewise.
	* sysdeps/x86_64/atomic-machine.h [__GNUC_PREREQ (4, 7)]: Make
	code unconditional.
	[!__GNUC_PREREQ (4, 7)]: Remove conditional code.

	* math/test-math-errno.h: New file.
	* math/test-math-inline.h (TEST_INLINE): Define to 1 instead of
	empty.
	(TEST_ERRNO): New macro.
	(TEST_EXCEPTIONS): Likewise.
	* math/test-math-no-inline.h (TEST_INLINE): Likewise.
	(TEST_EXCEPTIONS): Likewise.
	* math/test-math-vector.h (TEST_ERRNO): Likewise.
	* math/test-double.c: Include "test-math-errno.h".
	* math/test-float.c: Likewise.
	* math/test-ldouble.c: Likewise.
	* math/libm-test.inc (test_single_exception) [!TEST_INLINE]: Make
	code unconditional.
	(test_exceptions): Only run code if TEST_EXCEPTIONS.
	(test_single_errno) [!TEST_INLINE && !TEST_MATHVEC]: Make code
	unconditional.
	(test_errno): Only run code if TEST_ERRNO.
	(enable_test): Use "if" conditional on TEST_INLINE, not #ifdef.

2015-11-04  Florian Weimer  <fweimer@redhat.com>

	* nptl/tst-once5.cc: Remove attribution.

2015-11-04  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of sin, sincos, sinh,
	sqrt, tan, tanh, y0, y1 and yn.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (scalb_test_data): Add more tests.
	(scalbn_test_data): Likewise.
	(scalbln_test_data): Likewise.
	(signbit_test_data): Likewise.
	(sin_test_data): Likewise.
	(sincos_test_data): Likewise.
	(sinh_test_data): Likewise.
	(sqrt_test_data): Likewise.
	(tan_test_data): Likewise.
	(tanh_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.
	(significand_test_data): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2015-11-03  David Kastrup  <dak@gnu.org>

	[BZ #18604]
	* assert/assert.h (assert): Don't macro-expand failed assertion
	expression in error message.
	* malloc/malloc.c (assert): Likewise.

2015-11-03  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (libc_cv_ld_no_whole_archive): Remove configure
	test.
	* configure: Regenerated.

2015-11-02  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (modf_test_data): Add more tests.
	(nearbyint_test_data): Likewise.
	(nextafter_test_data): Likewise.
	(nexttoward_test_data): Likewise.
	(pow_test_data): Likewise.
	(remainder_test_data): Likewise.
	(remquo_test_data): Likewise.
	(rint_test_data): Likewise.

	[BZ #19201]
	* sysdeps/ieee754/dbl-64/e_remainder.c (__ieee754_remainder):
	Check for zero remainder in case of large exponents and ensure
	correct sign of result in that case.
	* math/libm-test.inc (remainder_test_data): Add more tests.

	[BZ #6799]
	* math/s_nextafter.c: Include <errno.h>.
	(__nextafter): Set errno on overflow and underflow.
	* math/s_nexttowardf.c: Include <errno.h>.
	(__nexttowardf): Set errno on overflow and underflow.
	* sysdeps/i386/fpu/s_nextafterl.c: Include <errno.h>.
	(__nextafterl): Set errno on overflow and underflow.
	* sysdeps/i386/fpu/s_nexttoward.c: Include <errno.h>.
	(__nexttoward): Set errno on overflow and underflow.
	* sysdeps/i386/fpu/s_nexttowardf.c: Include <errno.h>.
	(__nexttowardf): Set errno on overflow and underflow.
	* sysdeps/ieee754/flt-32/s_nextafterf.c: Include <errno.h>.
	(__nextafterf): Set errno on overflow and underflow.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: Include <errno.h>.
	(__nextafterl): Set errno on overflow and underflow.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: Include <errno.h>.
	(__nexttoward): Set errno on overflow and underflow.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: Include <errno.h>.
	(__nexttowardf): Set errno on overflow and underflow.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Include <errno.h>.
	(__nextafterl): Set errno on overflow and underflow.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Include <errno.h>.
	(__nexttoward): Set errno on overflow and underflow.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c: Include <errno.h>.
	(__nexttowardf): Set errno on overflow and underflow.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c: Include <errno.h>.
	(__nexttoward): Set errno on overflow and underflow.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c: Include <errno.h>.
	(__nexttowardf): Set errno on overflow and underflow.
	* sysdeps/ieee754/ldbl-opt/s_nexttowardfd.c: Include <errno.h>.
	(__nldbl_nexttowardf): Set errno on overflow and underflow.
	* sysdeps/m68k/m680x0/fpu/s_nextafterl.c: Include <errno.h>.
	(__nextafterl): Set errno on overflow and underflow.
	* math/libm-test.inc (nextafter_test_data): Do not allow errno
	setting to be missing on overflow.  Add more tests.
	(nexttoward_test_data): Likewise.

	* configure.ac (libc_cv_initfini_array): Remove configure test.
	* configure: Regenerated.

2015-10-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19189]
	* sysdeps/ieee754/ldbl-128/s_log1pl.c (__log1pl): Make check for
	non-finite argument handle arguments with negative sign.

	* math/libm-test.inc (j0_test_data): Do not test sign of zero
	result from infinite argument.
	(j1_test_data): Likewise.
	(jn_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.

	[BZ #16171]
	* math/w_remainder.c (drem): Define as weak alias of __remainder.
	[NO_LONG_DOUBLE] (dreml): Define as weak alias of __remainder.
	* math/w_remainderf.c (dremf): Define as weak alias of
	__remainderf.
	* math/w_remainderl.c (dreml): Define as weak alias of
	__remainderl.
	* sysdeps/ia64/fpu/e_remainder.S (drem): Define as weak alias of
	__remainder.
	* sysdeps/ia64/fpu/e_remainderf.S (dremf): Define as weak alias of
	__remainderf.
	* sysdeps/ia64/fpu/e_remainderl.S (dreml): Define as weak alias of
	__remainderl.
	* sysdeps/ieee754/ldbl-opt/nldbl-remainder.c (dreml): Define as
	weak alias of remainderl.
	* sysdeps/ieee754/ldbl-opt/w_remainder.c
	[LONG_DOUBLE_COMPAT(libm, GLIBC_2_0)] (__drem): Define as strong
	alias of __remainder.
	[LONG_DOUBLE_COMPAT(libm, GLIBC_2_0)] (dreml): Use compat_symbol.
	* sysdeps/ieee754/ldbl-opt/w_remainderl.c (__dreml): Define as
	strong alias of __remainderl.
	(dreml): Use long_double_symbol.
	* math/Makefile (libm-calls): Remove w_drem.
	* sysdeps/ieee754/ldbl-opt/Makefile (libnldbl-calls): Remove drem.
	(CFLAGS-nldbl-drem.c): Remove variable.
	(CFLAGS-nldbl-remainder.c): Add -fno-builtin-dreml.
	* math/w_drem.c: Remove file.
	* math/w_dremf.c: Likewise.
	* math/w_dreml.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-drem.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_drem.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/w_dreml.c: Likewise.

	* sysdeps/i386/configure.ac (cpuid.h): Do not test for header.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure.ac (cpuid.h): Do not test for header.
	* sysdeps/x86_64/configure: Regenerated.

	* configure.ac (libc_cv_asm_protected_directive): Remove configure
	test.
	(libc_cv_visibility_attribute): Likewise.
	(libc_cv_protected_data): Test unconditionally.
	(libc_cv_broken_visibility_attribute): Remove configure test.
	(libc_cv_have_sdata_section): Test unconditionally.
	* configure: Regenerated.

	* include/libc-internal.h (libc_max_align_t): Remove typedef.
	* include/scratch_buffer.h: Include <stddef.h> instead of
	<libc-internal.h>.
	(struct scratch_buffer): Use max_align_t instead of
	libc_max_align_t.

2015-10-29  Florian Weimer  <fweimer@redhat.com>

	* elf/dl-fini.c (_dl_fini): Rewrite to use variable-length array
	instead of extend_alloca.  Change control flow to avoid a goto.
	Remove assert which is trivially always true.

2015-10-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16068]
	* sysdeps/i386/fpu/fesetenv.c: Include <fpu_control.h>.
	(FE_ALL_EXCEPT_X86): New macro.
	(__fesetenv): Use FE_ALL_EXCEPT_X86 in most places instead of
	FE_ALL_EXCEPT.  Ensure precision control is included in
	floating-point state.  Ensure that FE_DFL_ENV and FE_NOMASK_ENV
	handle "denormal operand exception" and clear FZ and DAZ bits.
	* sysdeps/x86_64/fpu/fesetenv.c: Include <fpu_control.h>.
	(FE_ALL_EXCEPT_X86): New macro.
	(__fesetenv): Use FE_ALL_EXCEPT_X86 in most places instead of
	FE_ALL_EXCEPT.  Ensure precision control is included in
	floating-point state.  Ensure that FE_DFL_ENV and FE_NOMASK_ENV
	handle "denormal operand exception" and clear FZ and DAZ bits.
	* sysdeps/x86/fpu/test-fenv-sse-2.c: New file.
	* sysdeps/x86/fpu/test-fenv-x87.c: Likewise.
	* sysdeps/x86/fpu/Makefile [$(subdir) = math] (tests): Add
	test-fenv-x87 and test-fenv-sse-2.
	[$(subdir) = math] (CFLAGS-test-fenv-sse-2.c): New variable.

	* math/libm-test.inc (BUILD_COMPLEX): Remove macro.
	* math/test-double.h (BUILD_COMPLEX): New macro.
	* math/test-float.h (BUILD_COMPLEX): Likewise.
	* math/test-ldouble.h (BUILD_COMPLEX): Likewise.

	* math/libm-test.inc (min_subnorm_value): Use LDBL_TRUE_MIN,
	DBL_TRUE_MIN and FLT_TRUE_MIN instead of __LDBL_DENORM_MIN__,
	__DBL_DENORM_MIN__ and __FLT_DENORM_MIN__.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Refer to DBL_TRUE_MIN
	instead of DBL_DENORM_MIN in comment.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Refer to
	LDBL_TRUE_MIN instead of LDBL_DENORM_MIN in comment.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Include <float.h>.
	(__nextafterl): Use LDBL_TRUE_MIN instead of __LDBL_DENORM_MIN__.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Refer to
	LDBL_TRUE_MIN instead of LDBL_DENORM_MIN in comment.

2015-10-28  Florian Weimer  <fweimer@redhat.com>

	[BZ #19048]
	* malloc/malloc.c (struct malloc_state): Update comment.  Add
	attached_threads member.
	(main_arena): Initialize attached_threads.
	* malloc/arena.c (list_lock): Update comment.
	(ptmalloc_lock_all, ptmalloc_unlock_all): Likewise.
	(ptmalloc_unlock_all2): Reinitialize arena reference counts.
	(deattach_arena): New function.
	(_int_new_arena): Initialize arena reference count and deattach
	replaced arena.
	(get_free_list, reused_arena): Update reference count and deattach
	replaced arena.
	(arena_thread_freeres): Update arena reference count and only put
	unreferenced arenas on the free list.

2015-10-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19181]
	* sysdeps/i386/fpu/fesetenv.c (__fesetenv): Clear already-raised
	SSE exceptions when argument is FE_DFL_ENV or FE_NOMASK_ENV.
	* sysdeps/x86_64/fpu/fesetenv.c (__fesetenv): Likewise.
	* math/test-fenv-clear-main.c: New file.
	* math/test-fenv-clear.c: Likewise.
	* math/Makefile (tests): Add test-fenv-clear.
	* sysdeps/x86/fpu/test-fenv-clear-sse.c: New file.
	* sysdeps/x86/fpu/Makefile [$(subdir) = math] (tests): Add
	test-fenv-clear-sse.
	[$(subdir) = math] (CFLAGS-test-fenv-clear-sse.c): New variable.

	* math/libm-test.inc (TYPE_DECIMAL_DIG): Use LDBL_DECIMAL_DIG,
	DBL_DECIMAL_DIG and FLT_DECIMAL_DIG instead of __DECIMAL_DIG__,
	__DBL_DECIMAL_DIG__ and __FLT_DECIMAL_DIG__.

2015-10-28  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/libc-tls.c: New file. Provides __tls_get_addr () in
	static libc.

2015-10-28  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/configure.ac (libc_cv_cc_avx2): Remove configure
	test.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure.ac (libc_cv_cc_avx2): Remove configure
	test.
	* sysdeps/x86_64/configure: Regenerated.
	* config.h.in (HAVE_AVX2_SUPPORT): Remove #undef.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memset-avx2 unconditionally instead of conditionally on
	[$(config-cflags-avx2) = yes].
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list) [HAVE_AVX2_SUPPORT]: Make code
	unconditional.
	* sysdeps/x86_64/multiarch/memset.S [HAVE_AVX2_SUPPORT]: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S
	[IS_IN (libc) && SHARED && HAVE_AVX2_SUPPORT]: Change conditional
	to [IS_IN (libc) && SHARED].

2015-10-27  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/arm/configure.ac (libc_cv_arm_tls_desc): Remove
	configure test.
	* sysdeps/arm/configure: Regenerated.
	* sysdeps/arm/Makefile [!have-arm-tls-desc] (have-arm-tls-desc):
	Define variable if not already defined.

	[BZ #17404]
	* sysdeps/mips/atomic-machine.h
	[__GNUC_PREREQ (4, 8) || (__mips16 && __GNUC_PREREQ (4, 7))]:
	Change conditional to [__GNUC_PREREQ (4, 8) || __mips16].
	[__mips16 && !__GNUC_PREREQ (4, 7)]: Remove conditional code.

	* resolv/res_send.c (send_vc) [__GNUC_PREREQ (4, 7)]: Make code
	unconditional.
	* soft-fp/fmadf4.c [__GNUC_PREREQ (4, 7)]: Likewise.
	[!__GNUC_PREREQ (4, 7)]: Remove conditional code.
	* soft-fp/fmasf4.c [__GNUC_PREREQ (4, 7)]: Make code
	unconditional.
	[!__GNUC_PREREQ (4, 7)]: Remove conditional code.
	* soft-fp/fmatf4.c [__GNUC_PREREQ (4, 7)]: Make code
	unconditional.
	[!__GNUC_PREREQ (4, 7)]: Remove conditional code.
	* stdlib/setenv.c
	[((__GNUC__ << 16) + __GNUC_MINOR__) >= ((4 << 16) + 7)]: Make
	code unconditional.
	[!(((__GNUC__ << 16) + __GNUC_MINOR__) >= ((4 << 16) + 7))]:
	Remove conditional code.
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c
	(__ieee754_lgamma_r) [__GNUC_PREREQ (4, 7)]: Make code
	unconditional.
	(__ieee754_lgamma_r) [!__GNUC_PREREQ (4, 7)]: Remove conditional
	code.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c
	(__ieee754_lgammaf_r) [__GNUC_PREREQ (4, 7)]: Make code
	unconditional.
	(__ieee754_lgammaf_r) [!__GNUC_PREREQ (4, 7)]: Remove conditional
	code.
	* sysdeps/ieee754/ldbl-128/k_tanl.c
	(__kernel_tanl) [__GNUC_PREREQ (4, 7)]: Make code unconditional.
	(__kernel_tanl) [!__GNUC_PREREQ (4, 7)]: Remove conditional code.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c
	(__kernel_tanl) [__GNUC_PREREQ (4, 7)]: Make code unconditional.
	(__kernel_tanl) [!__GNUC_PREREQ (4, 7)]: Remove conditional code.
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c
	(__ieee754_lgammal_r) [__GNUC_PREREQ (4, 7)]: Make code
	unconditional.
	(__ieee754_lgammal_r) [!__GNUC_PREREQ (4, 7)]: Remove conditional
	code.
	* sysdeps/ieee754/ldbl-96/k_tanl.c
	(__kernel_tanl) [__GNUC_PREREQ (4, 7)]: Make code unconditional.
	(__kernel_tanl) [!__GNUC_PREREQ (4, 7)]: Remove conditional code.

	* nptl/tst-initializers1-c11.c: New file.
	* nptl/tst-initializers1-gnu11.c: Likewise.
	* nptl/Makefile (tests): Add these new tests.
	(CFLAGS-tst-initializers1-c11.c): New variable.
	(CFLAGS-tst-initializers1-gnu11.c): Likewise.

	* Makeconfig (CFLAGS): Use -std=gnu11 instead of -std=gnu99.
	* Makefile ($(objpfx)c++-types-check.out): Filter out -std=gnu11
	instead of -std=gnu99.
	* configure.ac (systemtap): Test with -std=gnu11 instead of
	-std=gnu99.
	* configure: Regenerated.
	* math/gen-auto-libm-tests.c: Use -std=gnu11 instead of -std=gnu99
	in compilation command in comment.

	* sysdeps/nptl/configure.ac: Remove file.
	* sysdeps/nptl/configure: Remove generated file.
	* configure.ac (libc_cv_forced_unwind): Do not substitute.
	* configure: Regenerated.
	* config.h.in (HAVE_FORCED_UNWIND): Remove #undef.
	* config.make.in (have-forced-unwind): Remove variable.
	* nptl/Makefile [$(have-forced-unwind) = yes]: Make code
	unconditional.
	* nptl/descr.h [HAVE_FORCED_UNWIND]: Likewise.
	* nptl/unwind.c [HAVE_FORCED_UNWIND]: Likewise.
	(__pthread_unwind) [!HAVE_FORCED_UNWIND]: Remove conditional code.
	* nptl/version.c [HAVE_FORCED_UNWIND]: Make code unconditional.
	* sysdeps/nptl/Makefile [$(have-forced-unwind) = yes]: Make code
	unconditional.

2015-10-27  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	[BZ #19174]
	* sysdeps/powerpc/nptl/elide.h (__elide_lock): Fix usage of
	.skip_lock_out_of_tbegin_retries.
	* sysdeps/unix/sysv/linux/powerpc/elision-lock.c
	(__lll_lock_elision): Likewise, and respect a value of
	try_tbegin <= 0.

2015-10-27  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* elf/dl-support.c (_dl_aux_init): Added AT_PLATFORM to the case
	statement.

2015-10-27  Joseph Myers  <joseph@codesourcery.com>

	* conform/Makefile (test-xfail-ISO11/complex.h/conform): Remove
	variable.
	(test-xfail-ISO11/stdalign.h/conform): Likewise.
	(test-xfail-ISO11/stdnoreturn.h/conform): Likewise.

	* conform/GlibcConform.pm ($CFLAGS{"ISO11"}): Use -std=c11 instead
	of -std=c1x -D_ISOC11_SOURCE.

	* configure.ac (libc_cv_compiler_ok): Require GCC 4.7 or later.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Document
	requirement for GCC 4.7 or later.
	* INSTALL: Regenerated.

2015-10-27  Ludovic Court√®s  <ludo@gnu.org>

	* locale/loadlocale.c (_nl_intern_locale_data): Change assertion
	on CNT to a conditional jump to 'puntdata'.

2015-10-27  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (libc_cv_gcc___thread): Remove configure test.
	(libc_cv_gcc_tls_model_attr): Likewise.
	* configure: Regenerated.

	* configure.ac (libc_cv_need_minus_P): Remove configure test.
	* configure: Regenerated.
	* Makeconfig (asm-CPPFLAGS): Remove reference to -P in comment.

2015-10-26  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (old_glibc_headers): Remove configure test.
	* configure: Regenerated.
	* config.make.in (old-glibc-headers): Remove variable.
	* Makefile [!$(install_root) && $(old-glibc-headers) = yes]
	(install): Remove dependency on remove-old-headers.
	(headers2_0): Remove variable.
	(remove-old-headers): Remove rule.

	* configure.ac (libc_cv_dot_text): Remove configure test.
	(libc_cv_asm_set_directive): Use .text instead of
	${libc_cv_dot_text} in configure test.
	* configure: Regenerated.

2015-10-26  Florian Weimer  <fweimer@redhat.com>

	[BZ #19168]
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.

2015-10-26  Florian Weimer  <fweimer@redhat.com>

	* configure.ac (CXX): Clear the variable if the C++ toolchain does
	not support static linking.
	* configure: Regenerate.

2015-10-23  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (check_float_internal): Do not special-case
	errors up to 0.5 ulp.

	* math/auto-libm-test-in: Add more tests of log, log10, log1p and
	log2.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (MAX_EXP): New macro.
	(ilogb_test_data): Add more tests.
	(isfinite_test_data): Likewise.
	(isgreater_test_data): Likewise.
	(isgreaterequal_test_data): Likewise.
	(isinf_test_data): Likewise.
	(isless_test_data): Likewise.
	(islessequal_test_data): Likewise.
	(islessgreater_test_data): Likewise.
	(isnan_test_data): Likewise.
	(isnormal_test_data): Likewise.
	(issignaling_test_data): Likewise.
	(isunordered_test_data): Likewise.
	(j0_test_data): Likewise.
	(j1_test_data): Likewise.
	(jn_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(logb_test_data): Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	[BZ #18611]
	* sysdeps/ieee754/dbl-64/e_j1.c (__ieee754_j1): Set errno and
	avoid excess range and precision on underflow.
	* sysdeps/ieee754/dbl-64/e_jn.c (__ieee754_jn): Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c (__ieee754_j1f): Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c (__ieee754_jnf): Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_j1l): Set errno on
	underflow.
	* sysdeps/ieee754/ldbl-128/e_jnl.c (__ieee754_jnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_jnl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c (__ieee754_j1l): Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_jnl): Likewise.
	* math/auto-libm-test-in: Do not allow missing errno setting for
	tests of j1 and jn.
	* math/auto-libm-test-out: Regenerated.

2015-10-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15491]
	* sysdeps/i386/fpu/s_nearbyint.S (__nearbyint): Save and restore
	floating-point environment instead of clearing all exceptions.
	* sysdeps/i386/fpu/s_nearbyintf.S (__nearbyintf): Likewise.
	* sysdeps/i386/fpu/s_nearbyintl.S (__nearbyintl): Likewise,
	merging in "invalid" exceptions from frndint.
	* sysdeps/x86_64/fpu/s_nearbyintl.S (__nearbyintl): Likewise.
	* math/test-nearbyint-except.c: New file.
	* math/Makefile (tests): Add test-nearbyint-except.

2015-10-22  Chris Metcalf  <cmetcalf@ezchip.com>

	* NEWS: Mention bug 18699 fixed by commit fe8c2b33aed0.

	* sysdeps/tile/libm-test-ulps: Regenerated.

2015-10-22  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sync_file_range.c
	(__NR_sync_file_range2): Assume it is always defined.
	* sysdeps/unix/sysv/linux/mips/mips32/sync_file_range.c
	(__NR_sync_file_range): Assume it is always defined.

2015-10-22  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/i386/fxstat.c (__fxstat): Use
	INTERNAL_SYSCALL_ERRNO.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/i386/lockf64.c (lockf64): Likewise.
	* sysdeps/unix/sysv/linux/i386/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/i386/sigaction.c (__libc_sigaction):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c (__xstat): Likewise.

2015-10-21  Joseph Myers  <joseph@codesourcery.com>

	* io/tst-fcntl.c (fd): New static variable.
	(do_prepare): Open temporary file here....
	(do_test): ...not here.

	* io/ftwtest-sh: Also trap on exit to remove temporary files.

2015-10-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/i386/libc-do-syscall.S: Replace
	__GNUC_PREREQ (5,0) with OPTIMIZE_FOR_GCC_5.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (OPTIMIZE_FOR_GCC_5):
	Moved before "#ifdef __ASSEMBLER__".

2015-10-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19156]
	* sysdeps/ieee754/ldbl-128/e_j0l.c (__ieee754_j0l): Return 1 for
	arguments very close to 0.

2015-10-21  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/tile/sysdep.h (PSEUDO_END)
	(PSEUDO_NOERRNO, PSEUDO_END_NOERRNO): Undef before defining.

2015-10-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/i386/sysdep.h (OPTIMIZE_FOR_GCC_5):
	New.  Defined for GCC 5 and above when not compiling for
	profiling.
	Replace __GNUC_PREREQ (5,0) with OPTIMIZE_FOR_GCC_5.

	* sysdeps/unix/sysv/linux/i386/Makefile (CFLAGS-epoll_pwait.c):
	Renamed to ...
	(CFLAGS-epoll_pwait.o): This.
	(CFLAGS-mmap.c): Renamed to ...
	(CFLAGS-mmap.o): This.
	(CFLAGS-mmap64.c): Renamed to ...
	(CFLAGS-mmap64.o): This.
	(CFLAGS-epoll_pwait.os): New.
	(CFLAGS-mmap.os): Likewise.
	(CFLAGS-mmap64.os): Likewise.
	(CFLAGS-semtimedop.os): Likewise.
	(CFLAGS-semtimedop.c): Renamed to ...
	(CFLAGS-semtimedop.o): This.

2015-10-21  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* debug/tst-backtrace4.c (handle_signal): Fix a comment and
	warning message.

2015-10-21  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (+gccwarn-c): Add -Wold-style-definition.
	* Makefile ($(objpfx)c++-types-check.out): Filter out
	$(+gccwarn-c) instead of -Wstrict-prototypes.

	* io/fts.c (fts_open): Convert to prototype-style function
	definition.
	* malloc/mcheck.c (mcheck): Likewise.
	(mcheck_pedantic): Likewise.
	* posix/regexec.c (re_search_2_stub): Likewise.  Use
	internal_function.
	(re_search_internal): Likewise.
	* resolv/res_init.c [RESOLVSORT] (net_mask): Convert to
	prototype-style function definition.
	* sunrpc/clnt_udp.c (clntudp_call): Likewise.
	* sunrpc/pmap_rmt.c (clnt_broadcast): Likewise.
	* sunrpc/rpcsvc/rusers.x (xdr_utmp): Likewise.
	(xdr_utmpptr): Likewise.
	(xdr_utmparr): Likewise.
	(xdr_utmpidle): Likewise.
	(xdr_utmpidleptr): Likewise.
	(xdr_utmpidlearr): Likewise.

	* math/auto-libm-test-in: Add more tests of hypot, j0, j1, jn,
	log, log10 and log2.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (fmod_test_data): Add more tests.
	(fpclassify_test_data): Likewise.
	(frexp_test_data): Likewise.
	(hypot_test_data): Likewise.
	(ilogb_test_data): Likewise.

2015-10-20  Joseph Myers  <joseph@codesourcery.com>

	* debug/fortify_fail.c (__fortify_fail): Convert to
	prototype-style function definition.  Use internal_function.
	* libio/genops.c (save_for_backup): Convert to prototype-style
	function definition.
	* libio/wgenops.c (save_for_wbackup): Likewise.
	* login/grantpt.c (grantpt): Likewise.
	* login/ptsname.c (ptsname): Likewise.
	(__ptsname_r): Likewise.
	* login/unlockpt.c (unlockpt): Likewise.
	* mach/msgserver.c (__mach_msg_server): Likewise.
	* misc/efgcvt.c (__APPEND (FUNC_PREFIX, fcvt)): Likewise.
	(__APPEND (FUNC_PREFIX, ecvt)): Likewise.
	(__APPEND (FUNC_PREFIX, gcvt)): Likewise.
	* misc/efgcvt_r.c (__APPEND (FUNC_PREFIX, fcvt_r)): Likewise.
	(__APPEND (FUNC_PREFIX, ecvt_r)): Likewise.
	* nptl/cleanup_compat.c (_pthread_cleanup_push): Likewise.
	* nptl/cleanup_defer_compat.c (_pthread_cleanup_push_defer):
	Likewise.
	* nptl/libc_pthread_init.c (__libc_pthread_init): Likewise.  Use
	internal_function.
	* nptl/pthread_atfork.c (__pthread_atfork): Convert to
	prototype-style function definition.
	* nptl/pthread_create.c (__pthread_create_2_1): Likewise.
	[SHLIB_COMPAT(libpthread, GLIBC_2_0, GLIBC_2_1)]
	(__pthread_create_2_0): Likewise.
	* nptl/pthread_key_create.c (__pthread_key_create): Likewise.
	* nptl/register-atfork.c (__register_atfork): Likewise.
	* posix/glob.c (glob): Likewise.
	* posix/regcomp.c (re_comp): Likewise.
	* posix/regexec.c (re_exec): Likewise.
	* stdlib/add_n.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* stdlib/cmp.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* stdlib/divmod_1.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* stdlib/divrem.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* stdlib/lshift.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* stdlib/mod_1.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* stdlib/mul.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* stdlib/mul_n.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* stdlib/rshift.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* stdlib/strtod.c (INTERNAL (STRTOF)): Convert to prototype-style
	function definition.
	(STRTOF): Likewise.
	* stdlib/strtod_l.c (__STRTOF): Likewise.
	* stdlib/strtol.c (INTERNAL (strtol)): Likewise.
	* stdlib/strtol_l.c (INTERNAL (__strtol_l)): Likewise.
	(__strtol_l): Likewise.
	* stdlib/sub_n.c [__STDC__]: Make code unconditional.
	[!__STDC__]: Remove conditional code.
	* string/memrchr.c (MEMRCHR): Convert to prototype-style function
	definition.
	* string/strcasecmp.c (LOCALE_PARAM_DECL): Remove macro.
	[USE_IN_EXTENDED_LOCALE_MODEL] (LOCALE_PARAM): Include argument
	type.
	(__strcasecmp): Convert to prototype-style function definition.
	* string/strncase.c (LOCALE_PARAM_DECL): Remove macro.
	[USE_IN_EXTENDED_LOCALE_MODEL] (LOCALE_PARAM): Include argument
	type.
	(__strncasecmp): Convert to prototype-style function definition.
	* sunrpc/pm_getport.c (__libc_rpc_getport): Likewise.
	* sunrpc/xdr.c (xdr_union): Likewise.
	* sunrpc/xdr_array.c (xdr_array): Likewise.
	* sunrpc/xdr_ref.c (xdr_reference): Likewise.
	* sysdeps/m68k/m680x0/fpu/s_atan.c (__CONCATX(__,FUNC)): Likewise.
	* sysdeps/m68k/m680x0/fpu/s_isinf.c (__CONCATX(__,FUNC)):
	Likewise.
	* sysdeps/m68k/m680x0/fpu/s_scalbn.c (__CONCATX(__scalbn,suffix):
	Likewise.
	* sysdeps/m68k/m680x0/fpu/s_sincos.c (CONCATX(__,FUNC)): Likewise.
	* sysdeps/unix/sysv/linux/i386/scandir64.c (__old_scandir64):
	Likewise.
	* time/strftime_l.c (LOCALE_PARAM_DECL): Remove macro.
	(LOCALE_PARAM_PROTO): Likewise.
	[_LIBC && USE_IN_EXTENDED_LOCALE_MODEL] (LOCALE_PARAM): Include
	argument type.
	(ut_argument_spec): Remove macro.
	(ut_argument_spec_iso): Rename to ut_argument_spec.
	(memcpy_lowcase): Use LOCALE_PARAM in declaration.  Convert to
	prototype-style function definition.
	(memcpy_uppcase): Likewise.
	(__strftime_internal): Likewise.
	(my_strftime): Likewise.
	* time/strptime_l.c (LOCALE_PARAM_PROTO): Remove macro.
	(LOCALE_PARAM_DECL): Likewise.
	[_LIBC] (LOCALE_PARAM): Include argument type.
	(__strptime_internal): Convert to prototype-style function
	definition.
	(strptime): Likewise.
	* wcsmbs/wcscasecmp.c (LOCALE_PARAM_DECL): Remove macro.
	[USE_IN_EXTENDED_LOCALE_MODEL] (LOCALE_PARAM): Include argument
	type.
	(__wcscasecmp): Convert to prototype-style function definition.
	* wcsmbs/wcsncase.c (LOCALE_PARAM_DECL): Remove macro.
	[USE_IN_EXTENDED_LOCALE_MODEL] (LOCALE_PARAM): Include argument
	type.
	(__wcsncasecmp): Convert to prototype-style function definition.

	* crypt/md5-crypt.c (__md5_crypt_r): Convert to prototype-style
	function definition.
	* crypt/sha256-crypt.c (__sha256_crypt_r): Likewise.
	* crypt/sha512-crypt.c (__sha512_crypt_r): Likewise.
	* debug/backtracesyms.c (__backtrace_symbols): Likewise.
	* elf/dl-minimal.c (_itoa): Likewise.
	* hurd/hurdmalloc.c (malloc): Likewise.
	(free): Likewise.
	(realloc): Likewise.
	* inet/inet6_option.c (inet6_option_space): Likewise.
	(inet6_option_init): Likewise.
	(inet6_option_append): Likewise.
	(inet6_option_alloc): Likewise.
	(inet6_option_next): Likewise.
	(inet6_option_find): Likewise.
	* io/ftw.c (FTW_NAME): Likewise.
	(NFTW_NAME): Likewise.
	(NFTW_NEW_NAME): Likewise.
	(NFTW_OLD_NAME): Likewise.
	* libio/iofwide.c (_IO_fwide): Likewise.
	* libio/strops.c (_IO_str_init_static_internal): Likewise.
	(_IO_str_init_static): Likewise.
	(_IO_str_init_readonly): Likewise.
	(_IO_str_overflow): Likewise.
	(_IO_str_underflow): Likewise.
	(_IO_str_count): Likewise.
	(_IO_str_seekoff): Likewise.
	(_IO_str_pbackfail): Likewise.
	(_IO_str_finish): Likewise.
	* libio/wstrops.c (_IO_wstr_init_static): Likewise.
	(_IO_wstr_overflow): Likewise.
	(_IO_wstr_underflow): Likewise.
	(_IO_wstr_count): Likewise.
	(_IO_wstr_seekoff): Likewise.
	(_IO_wstr_pbackfail): Likewise.
	(_IO_wstr_finish): Likewise.
	* locale/programs/localedef.c (normalize_codeset): Likewise.
	* locale/programs/locarchive.c (add_locale_to_archive): Likewise.
	(add_locales_to_archive): Likewise.
	(delete_locales_from_archive): Likewise.
	* malloc/malloc.c (__libc_mallinfo): Likewise.
	* math/gen-auto-libm-tests.c (init_fp_formats): Likewise.
	* misc/tsearch.c (__tfind): Likewise.
	* nptl/pthread_attr_destroy.c (__pthread_attr_destroy): Likewise.
	* nptl/pthread_attr_getdetachstate.c
	(__pthread_attr_getdetachstate): Likewise.
	* nptl/pthread_attr_getguardsize.c (pthread_attr_getguardsize):
	Likewise.
	* nptl/pthread_attr_getinheritsched.c
	(__pthread_attr_getinheritsched): Likewise.
	* nptl/pthread_attr_getschedparam.c
	(__pthread_attr_getschedparam): Likewise.
	* nptl/pthread_attr_getschedpolicy.c
	(__pthread_attr_getschedpolicy): Likewise.
	* nptl/pthread_attr_getscope.c (__pthread_attr_getscope):
	Likewise.
	* nptl/pthread_attr_getstack.c (__pthread_attr_getstack):
	Likewise.
	* nptl/pthread_attr_getstackaddr.c (__pthread_attr_getstackaddr):
	Likewise.
	* nptl/pthread_attr_getstacksize.c (__pthread_attr_getstacksize):
	Likewise.
	* nptl/pthread_attr_init.c (__pthread_attr_init_2_1): Likewise.
	(__pthread_attr_init_2_0): Likewise.
	* nptl/pthread_attr_setdetachstate.c
	(__pthread_attr_setdetachstate): Likewise.
	* nptl/pthread_attr_setguardsize.c (pthread_attr_setguardsize):
	Likewise.
	* nptl/pthread_attr_setinheritsched.c
	(__pthread_attr_setinheritsched): Likewise.
	* nptl/pthread_attr_setschedparam.c
	(__pthread_attr_setschedparam): Likewise.
	* nptl/pthread_attr_setschedpolicy.c
	(__pthread_attr_setschedpolicy): Likewise.
	* nptl/pthread_attr_setscope.c (__pthread_attr_setscope):
	Likewise.
	* nptl/pthread_attr_setstack.c (__pthread_attr_setstack):
	Likewise.
	* nptl/pthread_attr_setstackaddr.c (__pthread_attr_setstackaddr):
	Likewise.
	* nptl/pthread_attr_setstacksize.c (__pthread_attr_setstacksize):
	Likewise.
	* nptl/pthread_condattr_setclock.c (pthread_condattr_setclock):
	Likewise.
	* nptl/pthread_create.c (__find_in_stack_list): Likewise.
	* nptl/pthread_getattr_np.c (pthread_getattr_np): Likewise.
	* nptl/pthread_mutex_cond_lock.c (__pthread_mutex_lock): Define to
	use internal_function.
	* nptl/pthread_mutex_init.c (__pthread_mutex_init): Convert to
	prototype-style function definition.
	* nptl/pthread_mutex_lock.c (__pthread_mutex_lock): Likewise.
	(__pthread_mutex_cond_lock_adjust): Likewise.  Use
	internal_function.
	* nptl/pthread_mutex_timedlock.c (pthread_mutex_timedlock):
	Convert to prototype-style function definition.
	* nptl/pthread_mutex_trylock.c (__pthread_mutex_trylock):
	Likewise.
	* nptl/pthread_mutex_unlock.c (__pthread_mutex_unlock_usercnt):
	Likewise.
	(__pthread_mutex_unlock): Likewise.
	* nptl_db/td_ta_clear_event.c (td_ta_clear_event): Likewise.
	* nptl_db/td_ta_set_event.c (td_ta_set_event): Likewise.
	* nptl_db/td_thr_clear_event.c (td_thr_clear_event): Likewise.
	* nptl_db/td_thr_event_enable.c (td_thr_event_enable): Likewise.
	* nptl_db/td_thr_set_event.c (td_thr_set_event): Likewise.
	* nss/makedb.c (process_input): Likewise.
	* posix/fnmatch.c (__strchrnul): Likewise.
	(__wcschrnul): Likewise.
	(fnmatch): Likewise.
	* posix/fnmatch_loop.c (FCT): Likewise.
	* posix/glob.c (globfree): Likewise.
	(__glob_pattern_type): Likewise.
	(__glob_pattern_p): Likewise.
	* posix/regcomp.c (re_compile_pattern): Likewise.
	(re_set_syntax): Likewise.
	(re_compile_fastmap): Likewise.
	(regcomp): Likewise.
	(regerror): Likewise.
	(regfree): Likewise.
	* posix/regexec.c (regexec): Likewise.
	(re_match): Likewise.
	(re_search): Likewise.
	(re_match_2): Likewise.
	(re_search_2): Likewise.
	(re_search_stub): Likewise.  Use internal_function
	(re_copy_regs): Likewise.
	(re_set_registers): Convert to prototype-style function
	definition.
	(prune_impossible_nodes): Likewise.  Use internal_function.
	* resolv/inet_net_pton.c (inet_net_pton): Convert to
	prototype-style function definition.
	(inet_net_pton_ipv4): Likewise.
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Likewise.
	* sysdeps/pthread/aio_cancel.c (aio_cancel): Likewise.
	* sysdeps/pthread/aio_suspend.c (aio_suspend): Likewise.
	* sysdeps/pthread/timer_delete.c (timer_delete): Likewise.
	* sysdeps/unix/sysv/linux/dl-openat64.c (openat64): Likewise.
	Make variadic.
	* time/strptime_l.c (localtime_r): Convert to prototype-style
	function definition.
	* wcsmbs/mbsnrtowcs.c (__mbsnrtowcs): Likewise.
	* wcsmbs/mbsrtowcs_l.c (__mbsrtowcs_l): Likewise.
	* wcsmbs/wcsnrtombs.c (__wcsnrtombs): Likewise.
	* wcsmbs/wcsrtombs.c (__wcsrtombs): Likewise.

	* crypt/crypt.c (_ufc_doit_r): Convert to prototype-style function
	definition.
	(_ufc_doit_r): Likewise.
	* crypt/crypt_util.c (_ufc_copymem): Likewise.
	(_ufc_output_conversion_r): Likewise.
	* inet/inet_mkadr.c (__inet_makeaddr): Likewise.
	* inet/rcmd.c (rcmd_af): Likewise.
	(rcmd): Likewise.
	(ruserok_af): Likewise.
	(ruserok): Likewise.
	(ruserok2_sa): Likewise.
	(ruserok_sa): Likewise.
	(iruserok_af): Likewise.
	(iruserok): Likewise.
	(__ivaliduser): Likewise.
	(__validuser2_sa): Likewise.
	* inet/rexec.c (rexec_af): Likewise.
	(rexec): Likewise.
	* inet/ruserpass.c (ruserpass): Likewise.
	* locale/programs/xmalloc.c (xcalloc): Likewise.
	* manual/examples/timeval_subtract.c (timeval_subtract): Likewise.
	* math/w_drem.c (__drem): Likewise.
	* math/w_dremf.c (__dremf): Likewise.
	* math/w_dreml.c (__dreml): Likewise.
	* misc/daemon.c (daemon): Likewise.
	* resolv/res_debug.c (p_fqnname): Likewise.
	* stdlib/div.c (div): Likewise.
	* string/memcmp.c (memcmp_bytes): Likewise.
	* sunrpc/pmap_rmt.c (pmap_rmtcall): Likewise.
	* sunrpc/svc_udp.c (svcudp_bufcreate): Likewise.

	* crypt/cert.c (main): Convert to prototype-style function
	definition.
	* io/pipe.c (__pipe): Likewise.
	* io/pipe2.c (__pipe2): Likewise.
	* misc/futimesat.c (futimesat): Likewise.
	* misc/utimes.c (__utimes): Likewise.
	* posix/execve.c (__execve): Likewise.
	* posix/execvp.c (execvp): Likewise.
	* posix/execvpe.c (__execvpe): Likewise.
	* posix/fexecve.c (fexecve): Likewise.
	* socket/socketpair.c (socketpair): Likewise.
	* stdlib/drand48-iter.c (__drand48_iterate): Likewise.
	* stdlib/erand48.c (erand48): Likewise.
	* stdlib/erand48_r.c (__erand48_r): Likewise.
	* stdlib/jrand48.c (jrand48): Likewise.
	* stdlib/jrand48_r.c (__jrand48_r): Likewise.
	* stdlib/lcong48.c (lcong48): Likewise.
	* stdlib/lcong48_r.c (__lcong48_r): Likewise.
	* stdlib/nrand48.c (nrand48): Likewise.
	* stdlib/nrand48_r.c (__nrand48_r): Likewise.
	* stdlib/seed48.c (seed48): Likewise.
	* stdlib/seed48_r.c (__seed48_r): Likewise.
	* sysdeps/mach/hurd/execve.c (__execve): Likewise.
	* sysdeps/mach/hurd/utimes.c (__utimes): Likewise.
	* sysdeps/unix/sysv/linux/fexecve.c (fexecve): Likewise.

2015-10-19  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (libc_cv_asm_unique_object): Remove configure test.
	* configure: Regenerated.
	* config.h.in (HAVE_ASM_UNIQUE_OBJECT): Remove #undef.
	* elf/tst-unique1.c (do_test) [HAVE_ASM_UNIQUE_OBJECT]: Make code
	unconditional.
	* elf/tst-unique1mod1.c [HAVE_ASM_UNIQUE_OBJECT]: Likewise.
	* elf/tst-unique1mod2.c [HAVE_ASM_UNIQUE_OBJECT]: Likewise.
	* elf/tst-unique2.c (do_test) [HAVE_ASM_UNIQUE_OBJECT]: Likewise.
	(do_test) [!HAVE_ASM_UNIQUE_OBJECT]: Remove conditional code.
	* elf/tst-unique2mod1.c [HAVE_ASM_UNIQUE_OBJECT]: Make code
	unconditional.
	* elf/tst-unique2mod2.c [HAVE_ASM_UNIQUE_OBJECT]: Likewise.

	* posix/Makefile (CFLAGS-regex.c): Remove variable.
	* resolv/Makefile (+cflags): Do not use -Wno-strict-prototypes.

	* crypt/crypt-entry.c (__crypt_r): Convert to prototype-style
	function definition.
	* crypt/crypt_util.c (__encrypt_r): Likewise.
	* libio/genops.c (_IO_no_init): Likewise.
	* libio/iofopncook.c (_IO_fopencookie): Likewise.
	(_IO_old_fopencookie): Likewise.
	* libio/iofwrite_u.c (fwrite_unlocked): Likewise.
	* libio/iogetline.c (_IO_getline): Likewise.
	(_IO_getline_info): Likewise.
	* libio/iogetwline.c (_IO_getwline): Likewise.
	(_IO_getwline_info): Likewise.
	* libio/vsnprintf.c (_IO_vsnprintf): Likewise.
	* libio/vswprintf.c (_IO_vswprintf): Likewise.
	* locale/programs/simple-hash.c (insert_entry_2): Likewise.
	(find_entry): Likewise.
	(iterate_table): Likewise.
	(lookup): Likewise.
	* login/forkpty.c (forkpty): Likewise.
	* misc/hsearch_r.c (__hsearch_r): Likewise.
	* misc/select.c (__select): Likewise.
	* nptl/cleanup_defer_compat.c (_pthread_cleanup_pop_restore):
	Likewise.
	* nptl/old_pthread_cond_init.c (__pthread_cond_init_2_0):
	Likewise.
	* nptl/old_pthread_cond_timedwait.c
	(__pthread_cond_timedwait_2_0): Likewise.
	* nptl/pthread_barrier_init.c (__pthread_barrier_init): Likewise.
	* nptl/pthread_barrierattr_getpshared.c
	(pthread_barrierattr_getpshared): Likewise.
	* nptl/pthread_getschedparam.c (__pthread_getschedparam):
	Likewise.
	* nptl/pthread_mutex_setprioceiling.c
	(pthread_mutex_setprioceiling): Likewise.
	* nptl/pthread_mutexattr_getprioceiling.c
	(pthread_mutexattr_getprioceiling): Likewise.
	* nptl/pthread_rwlock_init.c (__pthread_rwlock_init): Likewise.
	* nptl/pthread_rwlock_timedrdlock.c (pthread_rwlock_timedrdlock):
	Likewise.
	* nptl/pthread_rwlock_timedwrlock.c (pthread_rwlock_timedwrlock):
	Likewise.
	* nptl/pthread_setschedparam.c (__pthread_setschedparam):
	Likewise.
	* socket/recvfrom.c (__recvfrom): Likewise.
	* socket/sendto.c (__sendto): Likewise.
	* socket/setsockopt.c (__setsockopt): Likewise.
	* stdio-common/_itoa.c (_itoa): Likewise.
	* stdio-common/_itowa.c (_itowa): Likewise.
	* stdio-common/reg-printf.c (__register_printf_specifier):
	Likewise.
	(__register_printf_function): Likewise.
	* stdio-common/tempname.c (__path_search): Likewise.
	* stdlib/addmul_1.c (mpn_addmul_1): Likewise.
	* stdlib/mul_1.c (mpn_mul_1): Likewise.
	* stdlib/random_r.c (__initstate_r): Likewise.
	* stdlib/setenv.c (__add_to_environ): Likewise.
	* stdlib/submul_1.c (mpn_submul_1): Likewise.
	* streams/getpmsg.c (getpmsg): Likewise.
	* streams/putmsg.c (putmsg): Likewise.
	* streams/putpmsg.c (putpmsg): Likewise.
	* sunrpc/clnt_raw.c (clntraw_call): Likewise.
	* sunrpc/clnt_tcp.c (clnttcp_call): Likewise.
	* sunrpc/clnt_udp.c (clntudp_create): Likewise.
	* sunrpc/clnt_unix.c (clntunix_call): Likewise.
	* sunrpc/pm_getport.c (pmap_getport): Likewise.
	* sunrpc/svc_udp.c (cache_get): Likewise.
	* sunrpc/xdr_array.c (xdr_vector): Likewise.
	* sysdeps/mach/hurd/getcwd.c
	(__canonicalize_directory_name_internal): Likewise.
	* sysdeps/mach/hurd/pselect.c (__pselect): Likewise.
	* sysdeps/mach/hurd/recvfrom.c (__recvfrom): Likewise.
	* sysdeps/mach/hurd/select.c (__select): Likewise.
	* sysdeps/posix/ttyname_r.c (getttyname_r): Likewise.
	* sysdeps/pthread/timer_settime.c (timer_settime): Likewise.
	* sysdeps/sparc/nptl/pthread_barrier_init.c
	(__pthread_barrier_init): Likewise.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_timedwait.c
	(__pthread_cond_timedwait): Likewise.
	* sysdeps/unix/sysv/linux/i386/putmsg.c (putmsg): Likewise.
	* sysdeps/unix/sysv/linux/s390/semtimedop.c (semtimedop):
	Likewise.
	* sysdeps/unix/sysv/linux/semtimedop.c (semtimedop): Likewise.
	* sysdeps/unix/sysv/linux/timer_settime.c (timer_settime):
	Likewise.
	* sysvipc/semtimedop.c (semtimedop): Likewise.
	* time/setitimer.c (__setitimer): Likewise.
	* time/strftime_l.c (emacs_strftime): Likewise.

2015-10-19  Mike Frysinger  <vapier@gentoo.org>

	* config.make.in (have-ssp): Delete.
	(stack-protector): New variable.
	* configure.ac: Delete libc_cv_ssp export.  Add libc_cv_ssp_strong
	cache test for -fstack-protector-strong.  Export stack_protector to
	the best ssp flag.
	* configure: Regenerated.
	* login/Makefile (pt_chown-cflags): Always add $(stack-protector).
	* nscd/Makefile (CFLAGS-nscd): Likewise.
	* resolv/Makefile (CFLAGS-libresolv): Likewise.

2015-10-16  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19122]
	* include/sys/stat.h [IS_IN (rtld)] (__fxstatat64): Add
	attribute_hidden.

2015-10-19  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #18743]
	* sysdeps/powerpc/nptl/elide.h (__elide_lock): Move most of this
	code to...
	(ELIDE_LOCK): ...here.
	(__get_new_count): New function with part of the code from
	__elide_lock that updates the value of adapt_count after a
	transaction abort.
	(__elided_trylock): Moved this code to...
	(ELIDE_TRYLOCK): ...here.

2015-10-19  Mike Frysinger  <vapier@gentoo.org>

	* configure.ac (AC_ARG_ENABLE(timezone-tools)): Tweak help phrasing.
	* configure: Regenerate.
	* INSTALL: Regenerate.
	* manual/install.texi (--disable-timezone-tools): Use @theglibc{}
	and tweak grammar.

2015-10-19  Geoffrey Thomas  <geofft@ldpreload.com>

	* login/programs/pt_chown.c: Include signal.h
	(main): Clear any signal mask from the parent process.

2015-10-19  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (libc_cv_gnu89_inline): Remove configure test.
	* configure: Regenerated.
	* config.make.in (gnu89-inline-CFLAGS): Remove variable.
	* Makeconfig (CFLAGS): Use -fgnu89-inline instead of
	$(gnu89-inline-CFLAGS).

	* configure.ac (libc_cv_asm_weak_directive): Remove configure
	test.
	(libc_cv_asm_weakext_directive): Likewise.
	* configure: Regenerated.
	* config.h.in (HAVE_ASM_WEAK_DIRECTIVE): Remove #undef.
	(HAVE_ASM_WEAKEXT_DIRECTIVE): Likewise.
	* include/libc-symbols.h
	[!HAVE_ASM_WEAK_DIRECTIVE && !HAVE_ASM_WEAKEXT_DIRECTIVE]: Remove
	#error.
	[HAVE_ASM_WEAKEXT_DIRECTIVE]: Remove conditional code.
	[!HAVE_ASM_WEAKEXT_DIRECTIVE]: Make code unconditional.

	* sysdeps/arm/backtrace.c (__backtrace): Convert to
	prototype-style function definition.
	* sysdeps/i386/backtrace.c (__backtrace): Likewise.
	* sysdeps/i386/ffs.c (__ffs): Likewise.
	* sysdeps/i386/i686/ffs.c (__ffs): Likewise.
	* sysdeps/ia64/nptl/pthread_spin_lock.c (pthread_spin_lock):
	Likewise.
	* sysdeps/ia64/nptl/pthread_spin_trylock.c (pthread_spin_trylock):
	Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c (__ieee754_log2l): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c (__ieee754_log2l):
	Likewise.
	* sysdeps/m68k/ffs.c (__ffs): Likewise.
	* sysdeps/m68k/m680x0/fpu/e_acos.c (FUNC): Likewise.
	* sysdeps/m68k/m680x0/fpu/e_fmod.c (FUNC): Likewise.
	* sysdeps/mach/adjtime.c (__adjtime): Likewise.
	* sysdeps/mach/gettimeofday.c (__gettimeofday): Likewise.
	* sysdeps/mach/hurd/_exit.c (_exit): Likewise.
	* sysdeps/mach/hurd/access.c (__access): Likewise.
	* sysdeps/mach/hurd/adjtime.c (__adjtime): Likewise.
	* sysdeps/mach/hurd/chdir.c (__chdir): Likewise.
	* sysdeps/mach/hurd/chmod.c (__chmod): Likewise.
	* sysdeps/mach/hurd/chown.c (__chown): Likewise.
	* sysdeps/mach/hurd/cthreads.c (cthread_keycreate): Likewise.
	(cthread_getspecific): Likewise.
	(cthread_setspecific): Likewise.
	(__libc_getspecific): Likewise.
	* sysdeps/mach/hurd/euidaccess.c (__euidaccess): Likewise.
	* sysdeps/mach/hurd/faccessat.c (faccessat): Likewise.
	* sysdeps/mach/hurd/fchdir.c (__fchdir): Likewise.
	* sysdeps/mach/hurd/fchmod.c (__fchmod): Likewise.
	* sysdeps/mach/hurd/fchmodat.c (fchmodat): Likewise.
	* sysdeps/mach/hurd/fchown.c (__fchown): Likewise.
	* sysdeps/mach/hurd/fchownat.c (fchownat): Likewise.
	* sysdeps/mach/hurd/flock.c (__flock): Likewise.
	* sysdeps/mach/hurd/fsync.c (fsync): Likewise.
	* sysdeps/mach/hurd/ftruncate.c (__ftruncate): Likewise.
	* sysdeps/mach/hurd/getgroups.c (__getgroups): Likewise.
	* sysdeps/mach/hurd/gethostname.c (__gethostname): Likewise.
	* sysdeps/mach/hurd/getitimer.c (__getitimer): Likewise.
	* sysdeps/mach/hurd/getlogin_r.c (__getlogin_r): Likewise.
	* sysdeps/mach/hurd/getpgid.c (__getpgid): Likewise.
	* sysdeps/mach/hurd/getrusage.c (__getrusage): Likewise.
	* sysdeps/mach/hurd/getsockname.c (__getsockname): Likewise.
	* sysdeps/mach/hurd/group_member.c (__group_member): Likewise.
	* sysdeps/mach/hurd/isatty.c (__isatty): Likewise.
	* sysdeps/mach/hurd/lchown.c (__lchown): Likewise.
	* sysdeps/mach/hurd/link.c (__link): Likewise.
	* sysdeps/mach/hurd/linkat.c (linkat): Likewise.
	* sysdeps/mach/hurd/listen.c (__listen): Likewise.
	* sysdeps/mach/hurd/mkdir.c (__mkdir): Likewise.
	* sysdeps/mach/hurd/mkdirat.c (mkdirat): Likewise.
	* sysdeps/mach/hurd/openat.c (__openat): Likewise.
	* sysdeps/mach/hurd/poll.c (__poll): Likewise.
	* sysdeps/mach/hurd/readlink.c (__readlink): Likewise.
	* sysdeps/mach/hurd/readlinkat.c (readlinkat): Likewise.
	* sysdeps/mach/hurd/recv.c (__recv): Likewise.
	* sysdeps/mach/hurd/rename.c (rename): Likewise.
	* sysdeps/mach/hurd/renameat.c (renameat): Likewise.
	* sysdeps/mach/hurd/revoke.c (revoke): Likewise.
	* sysdeps/mach/hurd/rewinddir.c (__rewinddir): Likewise.
	* sysdeps/mach/hurd/rmdir.c (__rmdir): Likewise.
	* sysdeps/mach/hurd/seekdir.c (seekdir): Likewise.
	* sysdeps/mach/hurd/send.c (__send): Likewise.
	* sysdeps/mach/hurd/setdomain.c (setdomainname): Likewise.
	* sysdeps/mach/hurd/setegid.c (setegid): Likewise.
	* sysdeps/mach/hurd/seteuid.c (seteuid): Likewise.
	* sysdeps/mach/hurd/setgid.c (__setgid): Likewise.
	* sysdeps/mach/hurd/setgroups.c (setgroups): Likewise.
	* sysdeps/mach/hurd/sethostid.c (sethostid): Likewise.
	* sysdeps/mach/hurd/sethostname.c (sethostname): Likewise.
	* sysdeps/mach/hurd/setlogin.c (setlogin): Likewise.
	* sysdeps/mach/hurd/setpgid.c (__setpgid): Likewise.
	* sysdeps/mach/hurd/setregid.c (__setregid): Likewise.
	* sysdeps/mach/hurd/setreuid.c (__setreuid): Likewise.
	* sysdeps/mach/hurd/settimeofday.c (__settimeofday): Likewise.
	* sysdeps/mach/hurd/setuid.c (__setuid): Likewise.
	* sysdeps/mach/hurd/shutdown.c (shutdown): Likewise.
	* sysdeps/mach/hurd/sigaction.c (__sigaction): Likewise.
	* sysdeps/mach/hurd/sigaltstack.c (__sigaltstack): Likewise.
	* sysdeps/mach/hurd/sigpending.c (sigpending): Likewise.
	* sysdeps/mach/hurd/sigprocmask.c (__sigprocmask): Likewise.
	* sysdeps/mach/hurd/sigsuspend.c (__sigsuspend): Likewise.
	* sysdeps/mach/hurd/socket.c (__socket): Likewise.
	* sysdeps/mach/hurd/symlink.c (__symlink): Likewise.
	* sysdeps/mach/hurd/symlinkat.c (symlinkat): Likewise.
	* sysdeps/mach/hurd/telldir.c (telldir): Likewise.
	* sysdeps/mach/hurd/truncate.c (__truncate): Likewise.
	* sysdeps/mach/hurd/umask.c (__umask): Likewise.
	* sysdeps/mach/hurd/unlink.c (__unlink): Likewise.
	* sysdeps/mach/hurd/unlinkat.c (unlinkat): Likewise.
	* sysdeps/mips/mips64/__longjmp.c (__longjmp): Likewise.
	* sysdeps/posix/alarm.c (alarm): Likewise.
	* sysdeps/posix/cuserid.c (cuserid): Likewise.
	* sysdeps/posix/dirfd.c (dirfd): Likewise.
	* sysdeps/posix/dup.c (__dup): Likewise.
	* sysdeps/posix/dup2.c (__dup2): Likewise.
	* sysdeps/posix/euidaccess.c (euidaccess): Likewise.
	(main): Likewise.
	* sysdeps/posix/flock.c (__flock): Likewise.
	* sysdeps/posix/fpathconf.c (__fpathconf): Likewise.
	* sysdeps/posix/getcwd.c (__getcwd): Likewise.
	* sysdeps/posix/gethostname.c (__gethostname): Likewise.
	* sysdeps/posix/gettimeofday.c (__gettimeofday): Likewise.
	* sysdeps/posix/isatty.c (__isatty): Likewise.
	* sysdeps/posix/killpg.c (killpg): Likewise.
	* sysdeps/posix/libc_fatal.c (__libc_fatal): Likewise.
	* sysdeps/posix/mkfifoat.c (mkfifoat): Likewise.
	* sysdeps/posix/raise.c (raise): Likewise.
	* sysdeps/posix/remove.c (remove): Likewise.
	* sysdeps/posix/rename.c (rename): Likewise.
	* sysdeps/posix/rewinddir.c (__rewinddir): Likewise.
	* sysdeps/posix/seekdir.c (seekdir): Likewise.
	* sysdeps/posix/sigblock.c (__sigblock): Likewise.
	* sysdeps/posix/sigignore.c (sigignore): Likewise.
	* sysdeps/posix/sigintr.c (siginterrupt): Likewise.
	* sysdeps/posix/signal.c (__bsd_signal): Likewise.
	* sysdeps/posix/sigset.c (sigset): Likewise.
	* sysdeps/posix/sigsuspend.c (__sigsuspend): Likewise.
	* sysdeps/posix/sysconf.c (__sysconf): Likewise.
	* sysdeps/posix/sysv_signal.c (__sysv_signal): Likewise.
	* sysdeps/posix/time.c (time): Likewise.
	* sysdeps/posix/ttyname.c (getttyname): Likewise.
	(ttyname): Likewise.
	* sysdeps/posix/ttyname_r.c (__ttyname_r): Likewise.
	* sysdeps/posix/utime.c (utime): Likewise.
	* sysdeps/powerpc/fpu/s_isnan.c (__isnan): Likewise.
	* sysdeps/powerpc/nptl/pthread_spin_lock.c (pthread_spin_lock):
	Likewise.
	* sysdeps/powerpc/nptl/pthread_spin_trylock.c
	(pthread_spin_trylock): Likewise.
	* sysdeps/pthread/aio_error.c (aio_error): Likewise.
	* sysdeps/pthread/aio_read.c (aio_read): Likewise.
	* sysdeps/pthread/aio_read64.c (aio_read64): Likewise.
	* sysdeps/pthread/aio_write.c (aio_write): Likewise.
	* sysdeps/pthread/aio_write64.c (aio_write64): Likewise.
	* sysdeps/pthread/flockfile.c (__flockfile): Likewise.
	* sysdeps/pthread/ftrylockfile.c (__ftrylockfile): Likewise.
	* sysdeps/pthread/funlockfile.c (__funlockfile): Likewise.
	* sysdeps/pthread/timer_create.c (timer_create): Likewise.
	* sysdeps/pthread/timer_getoverr.c (timer_getoverrun): Likewise.
	* sysdeps/pthread/timer_gettime.c (timer_gettime): Likewise.
	* sysdeps/s390/ffs.c (__ffs): Likewise.
	* sysdeps/s390/nptl/pthread_spin_lock.c (pthread_spin_lock):
	Likewise.
	* sysdeps/s390/nptl/pthread_spin_trylock.c (pthread_spin_trylock):
	Likewise.
	* sysdeps/sh/nptl/pthread_spin_lock.c (pthread_spin_lock):
	Likewise.
	* sysdeps/sparc/nptl/pthread_barrier_destroy.c
	(pthread_barrier_destroy): Likewise.
	* sysdeps/sparc/nptl/pthread_barrier_wait.c
	(__pthread_barrier_wait): Likewise.
	* sysdeps/sparc/sparc32/e_sqrt.c (__ieee754_sqrt): Likewise.
	* sysdeps/sparc/sparc32/pthread_barrier_wait.c
	(__pthread_barrier_wait): Likewise.
	* sysdeps/sparc/sparc32/sem_init.c (__old_sem_init): Likewise.
	* sysdeps/tile/memcmp.c (memcmp_common_alignment): Likewise.
	(memcmp_not_common_alignment): Likewise.
	(MEMCMP): Likewise.
	* sysdeps/tile/wordcopy.c (_wordcopy_fwd_aligned): Likewise.
	(_wordcopy_fwd_dest_aligned): Likewise.
	(_wordcopy_bwd_aligned): Likewise.
	(_wordcopy_bwd_dest_aligned): Likewise.
	* sysdeps/unix/bsd/ftime.c (ftime): Likewise.
	* sysdeps/unix/bsd/gtty.c (gtty): Likewise.
	* sysdeps/unix/bsd/stty.c (stty): Likewise.
	* sysdeps/unix/bsd/tcflow.c (tcflow): Likewise.
	* sysdeps/unix/bsd/tcflush.c (tcflush): Likewise.
	* sysdeps/unix/bsd/tcgetattr.c (__tcgetattr): Likewise.
	* sysdeps/unix/bsd/tcgetpgrp.c (tcgetpgrp): Likewise.
	* sysdeps/unix/bsd/tcsendbrk.c (tcsendbreak): Likewise.
	* sysdeps/unix/bsd/tcsetattr.c (tcsetattr): Likewise.
	* sysdeps/unix/bsd/tcsetpgrp.c (tcsetpgrp): Likewise.
	* sysdeps/unix/bsd/ualarm.c (ualarm): Likewise.
	* sysdeps/unix/bsd/wait3.c (__wait3): Likewise.
	* sysdeps/unix/getlogin_r.c (__getlogin_r): Likewise.
	* sysdeps/unix/sockatmark.c (sockatmark): Likewise.
	* sysdeps/unix/stime.c (stime): Likewise.
	* sysdeps/unix/sysv/linux/_exit.c (_exit): Likewise.
	* sysdeps/unix/sysv/linux/aio_sigqueue.c (__aio_sigqueue):
	Likewise.  Use internal_function.
	* sysdeps/unix/sysv/linux/arm/sigaction.c (__libc_sigaction):
	Convert to prototype-style function definition.
	* sysdeps/unix/sysv/linux/faccessat.c (faccessat): Likewise.
	* sysdeps/unix/sysv/linux/fchmodat.c (fchmodat): Likewise.
	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Likewise.
	* sysdeps/unix/sysv/linux/gai_sigqueue.c (__gai_sigqueue):
	Likewise.  Use internal_function.
	* sysdeps/unix/sysv/linux/gethostid.c (sethostid): Convert to
	prototype-style function definition
	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid):
	Likewise.
	(__getlogin_r): Likewise.
	* sysdeps/unix/sysv/linux/getpt.c (__posix_openpt): Likewise.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_broadcast.c
	(__pthread_cond_broadcast): Likewise.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_destroy.c
	(__pthread_cond_destroy): Likewise.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_init.c
	(__pthread_cond_init): Likewise.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_signal.c
	(__pthread_cond_signal): Likewise.
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_wait.c
	(__pthread_cond_wait): Likewise.
	* sysdeps/unix/sysv/linux/i386/getmsg.c (getmsg): Likewise.
	* sysdeps/unix/sysv/linux/i386/setegid.c (setegid): Likewise.
	* sysdeps/unix/sysv/linux/ia64/sigaction.c (__libc_sigaction):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/sigpending.c (sigpending):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/sigprocmask.c (__sigprocmask):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/sigaction.c (__libc_sigaction):
	Likewise.
	* sysdeps/unix/sysv/linux/msgget.c (msgget): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ftruncate64.c
	(__ftruncate64): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/truncate64.c
	(truncate64): Likewise.
	* sysdeps/unix/sysv/linux/pt-raise.c (raise): Likewise.
	* sysdeps/unix/sysv/linux/pthread_getcpuclockid.c
	(pthread_getcpuclockid): Likewise.
	* sysdeps/unix/sysv/linux/pthread_getname.c (pthread_getname_np):
	Likewise.
	* sysdeps/unix/sysv/linux/pthread_setname.c (pthread_setname_np):
	Likewise.
	* sysdeps/unix/sysv/linux/pthread_sigmask.c (pthread_sigmask):
	Likewise.
	* sysdeps/unix/sysv/linux/pthread_sigqueue.c (pthread_sigqueue):
	Likewise.
	* sysdeps/unix/sysv/linux/raise.c (raise): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sigaction.c
	(__libc_sigaction): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sigpending.c (sigpending):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sigprocmask.c
	(__sigprocmask): Likewise.
	* sysdeps/unix/sysv/linux/semget.c (semget): Likewise.
	* sysdeps/unix/sysv/linux/semop.c (semop): Likewise.
	* sysdeps/unix/sysv/linux/setrlimit64.c (setrlimit64): Likewise.
	* sysdeps/unix/sysv/linux/shmat.c (shmat): Likewise.
	* sysdeps/unix/sysv/linux/shmdt.c (shmdt): Likewise.
	* sysdeps/unix/sysv/linux/shmget.c (shmget): Likewise.
	* sysdeps/unix/sysv/linux/sigaction.c (__libc_sigaction):
	Likewise.
	* sysdeps/unix/sysv/linux/sigpending.c (sigpending): Likewise.
	* sysdeps/unix/sysv/linux/sigprocmask.c (__sigprocmask): Likewise.
	* sysdeps/unix/sysv/linux/sigqueue.c (__sigqueue): Likewise.
	* sysdeps/unix/sysv/linux/sigstack.c (sigstack): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigpending.c (sigpending):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigprocmask.c
	(__sigprocmask): Likewise.
	* sysdeps/unix/sysv/linux/speed.c (cfgetospeed): Likewise.
	(cfgetispeed): Likewise.
	(cfsetospeed): Likewise.
	(cfsetispeed): Likewise.
	* sysdeps/unix/sysv/linux/tcflow.c (tcflow): Likewise.
	* sysdeps/unix/sysv/linux/tcflush.c (tcflush): Likewise.
	* sysdeps/unix/sysv/linux/tcgetattr.c (__tcgetattr): Likewise.
	* sysdeps/unix/sysv/linux/tcsetattr.c (tcsetattr): Likewise.
	* sysdeps/unix/sysv/linux/time.c (time): Likewise.
	* sysdeps/unix/sysv/linux/timer_create.c (timer_create): Likewise.
	* sysdeps/unix/sysv/linux/timer_delete.c (timer_delete): Likewise.
	* sysdeps/unix/sysv/linux/timer_getoverr.c (timer_getoverrun):
	Likewise.
	* sysdeps/unix/sysv/linux/timer_gettime.c (timer_gettime):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sigpending.c (sigpending):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sigprocmask.c (__sigprocmask):
	Likewise.
	* sysdeps/x86_64/backtrace.c (__backtrace): Likewise.

2015-10-17  Florian Weimer  <fweimer@redhat.com>

	sunrpc: Rewrite with explicit TLS access using __thread.
	* sunrpc/rpc_thread.c (thread_rpc_vars): New TLS variable.
	(__rpc_thread_destroy, rpc_thread_multi): Access thread_rpc_vars
	directly.
	(__rpc_thread_variables): Access thread_rpc_vars directly.
	Eliminate redundant assignment of the tvp variable.

2015-10-17  Florian Weimer  <fweimer@redhat.com>

	malloc: Rewrite with explicit TLS access using __thread.
	* sysdeps/generic/malloc-machine.h (tsd_key_t, tsd_key_create)
	(tsd_setspecific, tsd_getspecific): Remove.
	* sysdeps/mach/hurd/malloc-machine.h (tsd_key_t, tsd_key_create)
	(tsd_setspecific, tsd_getspecific): Likewise.
	* sysdeps/nptl/malloc-machine.h (tsd_key_t, tsd_key_create)
	(tsd_setspecific, tsd_getspecific): Likewise.
	* malloc/arena.c (thread_arena): New TLS variable.
	(arena_key): Remove variable.
	(arena_get): Use thread_arena.
	(arena_lookup): Remove macro.
	(malloc_atfork, free_atfork, ptmalloc_lock_all)
	(ptmalloc_unlock_all, ptmalloc_unlock_all2, ptmalloc_init)
	(_int_new_arena, get_free_list, reused_arena)
	(arena_thread_freeres): Use thread_arena.
	* manual/memory.texi (Basic Allocation): Remove arena_lookup,
	tsd_getspecific, tsd_setspecific from safety annotations.
	(Allocating Cleared Space): Remove arena_lookup from safety
	annotations.

2015-10-17  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfprintf.c (printf_positional): Rewrite to use
	struct scratch_buffer instead of extend_alloca.

2015-10-17  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SOCK_CLOEXEC): Remove.
	* include/sys/socket.h (__have_sock_cloexec): Remove declaration.
	(__have_paccept): Remove unused macro.
	* include/unistd.h (__have_sock_cloexec): Remove declaration.
	* misc/syslog.c (openlog_internal): Remove fallback code for
	!__ASSUME_SOCK_CLOEXEC.
	* nis/ypclnt.c (yp_bind_client_create): Remove fallback code for
	missing SOCK_CLOEXEC.
	* nscd/connections.c (have_sock_cloexec): Remove definition.
	(nscd_init): Remove fallback code for !__ASSUME_SOCK_CLOEXEC.
	* nscd/nscd_helper.c (open_socket): Remove fallback code for
	!__ASSUME_SOCK_CLOEXEC.
	* resolv/res_send.c (__have_o_nonblock): Remove definition.
	(reopen): Remove fallback code for !__ASSUME_SOCK_CLOEXEC.
	* socket/have_sock_cloexec.c (__have_sock_cloexec): Remove
	definition.
	* sunrpc/clnt_udp.c (__libc_clntudp_bufcreate): Remove fallback
	code for !__ASSUME_SOCK_CLOEXEC.

2015-10-17  Florian Weimer  <fweimer@redhat.com>

	[BZ #18982]
	* manual/stdio.texi (Variable Arguments Output): Add portability
	note, explaining that vfprintf clobbers the va_list pointer.

2015-10-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (fabs_test_data): Add more tests.
	(fdim_test_data): Likewise.
	(fma_test_data): Likewise.
	(fmax_test_data): Likewise.
	(fmin_test_data): Likewise.
	(fmod_test_data): Likewise.

2015-10-16  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/memcpy.S (memcpy):  Add word copies for small aligned
	data.

2015-10-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (ceil_test_data): Add more tests and more
	expectations for "inexact".
	(floor_test_data): Add more tests.
	(round_test_data): Likewise.
	(trunc_test_data): Likewise.

	* crypt/cert.c (good_bye): Convert to prototype-style function
	definition.
	(get8): Likewise.
	(put8): Likewise.
	* crypt/crypt-entry.c (crypt): Likewise.
	(__fcrypt): Likewise.
	* crypt/crypt_util.c (_ufc_prbits): Likewise.
	(_ufc_set_bits): Likewise.
	(_ufc_clearmem): Likewise.
	(__init_des_r): Likewise.
	(shuffle_sb): Likewise.
	(shuffle_sb): Likewise.
	(_ufc_setup_salt_r): Likewise.
	(_ufc_mk_keytab_r): Likewise.
	(_ufc_dofinalperm_r): Likewise.
	(encrypt): Likewise.
	(__setkey_r): Likewise.
	(setkey): Likewise.
	* crypt/md5.c (md5_init_ctx): Likewise.
	(md5_read_ctx): Likewise.
	(md5_finish_ctx): Likewise.
	(md5_stream): Likewise.
	(md5_buffer): Likewise.
	(md5_process_bytes): Likewise.
	* crypt/sha256.c (__sha256_init_ctx): Likewise.
	(__sha256_finish_ctx): Likewise.
	(__sha256_process_bytes): Likewise.
	* crypt/sha512.c (__sha512_init_ctx): Likewise.
	(__sha512_finish_ctx): Likewise.
	(__sha512_process_bytes): Likewise.
	* ctype/isctype.c (__isctype): Likewise.
	* debug/backtrace.c (__backtrace): Likewise.
	* debug/backtracesymsfd.c (__backtrace_symbols_fd): Likewise.
	* debug/fgets_chk.c (__fgets_chk): Likewise.
	* debug/fgets_u_chk.c (__fgets_unlocked_chk): Likewise.
	* debug/memcpy_chk.c (__memcpy_chk): Likewise.
	* debug/memmove_chk.c (MEMMOVE_CHK): Likewise.
	* debug/mempcpy_chk.c (__mempcpy_chk): Likewise.
	* debug/memset_chk.c (__memset_chk): Likewise.
	* debug/strcat_chk.c (__strcat_chk): Likewise.
	* debug/strncat_chk.c (__strncat_chk): Likewise.
	* debug/strncpy_chk.c (__strncpy_chk): Likewise.
	* debug/vsprintf_chk.c (_IO_str_chk_overflow): Likewise.
	* dirent/dirfd.c (dirfd): Likewise.
	* dirent/getdents.c (__getdirentries): Likewise.
	* dirent/getdents64.c (getdirentries64): Likewise.
	* dirent/rewinddir.c (__rewinddir): Likewise.
	* dirent/seekdir.c (seekdir): Likewise.
	* dirent/telldir.c (telldir): Likewise.
	* elf/sln.c (makesymlinks): Likewise.
	(makesymlink): Likewise.
	* gmon/gmon.c (__moncontrol): Likewise.
	(__monstartup): Likewise.
	(write_hist): Likewise.
	(write_call_graph): Likewise.
	(write_bb_counts): Likewise.
	* grp/setgroups.c (setgroups): Likewise.
	* inet/inet_lnaof.c (inet_lnaof): Likewise.
	* inet/inet_net.c (inet_network): Likewise.
	* inet/inet_netof.c (inet_netof): Likewise.
	* inet/rcmd.c (rresvport_af): Likewise.
	(rresvport): Likewise.
	* io/access.c (__access): Likewise.
	* io/chdir.c (__chdir): Likewise.
	* io/chmod.c (__chmod): Likewise.
	* io/chown.c (__chown): Likewise.
	* io/close.c (__close): Likewise.
	* io/creat.c (creat): Likewise.
	* io/creat64.c (creat64): Likewise.
	* io/dup.c (__dup): Likewise.
	* io/dup2.c (__dup2): Likewise.
	* io/dup3.c (__dup3): Likewise.
	* io/euidaccess.c (__euidaccess): Likewise.
	* io/faccessat.c (faccessat): Likewise.
	* io/fchmod.c (__fchmod): Likewise.
	* io/fchmodat.c (fchmodat): Likewise.
	* io/fchown.c (__fchown): Likewise.
	* io/fchownat.c (fchownat): Likewise.
	* io/fcntl.c (__fcntl): Likewise.
	* io/flock.c (__flock): Likewise.
	* io/fts.c (fts_load): Likewise.
	(fts_close): Likewise.
	(fts_read): Likewise.
	(fts_set): Likewise.
	(fts_children): Likewise.
	(fts_build): Likewise.
	(fts_stat): Likewise.
	(fts_sort): Likewise.
	(fts_alloc): Likewise.
	(fts_lfree): Likewise.
	(fts_palloc): Likewise.
	(fts_padjust): Likewise.
	(fts_maxarglen): Likewise.
	(fts_safe_changedir): Likewise.
	* io/getwd.c (getwd): Likewise.
	* io/isatty.c (__isatty): Likewise.
	* io/lchown.c (__lchown): Likewise.
	* io/link.c (__link): Likewise.
	* io/linkat.c (linkat): Likewise.
	* io/lseek.c (__libc_lseek): Likewise.
	* io/mkdir.c (__mkdir): Likewise.
	* io/mkdirat.c (mkdirat): Likewise.
	* io/mkfifo.c (mkfifo): Likewise.
	* io/mkfifoat.c (mkfifoat): Likewise.
	* io/open.c (__libc_open): Likewise.
	* io/open64.c (__libc_open64): Likewise.
	* io/readlink.c (__readlink): Likewise.
	* io/readlinkat.c (readlinkat): Likewise.
	* io/rmdir.c (__rmdir): Likewise.
	* io/symlink.c (__symlink): Likewise.
	* io/symlinkat.c (symlinkat): Likewise.
	* io/ttyname.c (ttyname): Likewise.
	* io/ttyname_r.c (__ttyname_r): Likewise.
	* io/umask.c (__umask): Likewise.
	* io/unlink.c (__unlink): Likewise.
	* io/unlinkat.c (unlinkat): Likewise.
	* io/utime.c (utime): Likewise.
	* libio/clearerr.c (clearerr): Likewise.
	* libio/clearerr_u.c (clearerr_unlocked): Likewise.
	* libio/feof.c (_IO_feof): Likewise.
	* libio/feof_u.c (feof_unlocked): Likewise.
	* libio/ferror.c (_IO_ferror): Likewise.
	* libio/ferror_u.c (ferror_unlocked): Likewise.
	* libio/filedoalloc.c (_IO_file_doallocate): Likewise.
	* libio/fileno.c (__fileno): Likewise.
	* libio/fputc.c (fputc): Likewise.
	* libio/fputc_u.c (fputc_unlocked): Likewise.
	* libio/fputwc.c (fputwc): Likewise.
	* libio/fputwc_u.c (fputwc_unlocked): Likewise.
	* libio/freopen.c (freopen): Likewise.
	* libio/freopen64.c (freopen64): Likewise.
	* libio/fseek.c (fseek): Likewise.
	* libio/fseeko.c (fseeko): Likewise.
	* libio/fseeko64.c (fseeko64): Likewise.
	* libio/ftello.c (__ftello): Likewise.
	* libio/ftello64.c (ftello64): Likewise.
	* libio/fwide.c (fwide): Likewise.
	* libio/genops.c (_IO_un_link): Likewise.
	(_IO_link_in): Likewise.
	(_IO_least_marker): Likewise.
	(_IO_switch_to_main_get_area): Likewise.
	(_IO_switch_to_backup_area): Likewise.
	(_IO_switch_to_get_mode): Likewise.
	(_IO_free_backup_area): Likewise.
	(_IO_switch_to_put_mode): Likewise.
	(__overflow): Likewise.
	(__underflow): Likewise.
	(__uflow): Likewise.
	(_IO_setb): Likewise.
	(_IO_doallocbuf): Likewise.
	(_IO_default_underflow): Likewise.
	(_IO_default_uflow): Likewise.
	(_IO_default_xsputn): Likewise.
	(_IO_sgetn): Likewise.
	(_IO_default_xsgetn): Likewise.
	(_IO_sync): Likewise.
	(_IO_default_setbuf): Likewise.
	(_IO_default_seekpos): Likewise.
	(_IO_default_doallocate): Likewise.
	(_IO_init): Likewise.
	(_IO_old_init): Likewise.
	(_IO_default_sync): Likewise.
	(_IO_default_finish): Likewise.
	(_IO_default_seekoff): Likewise.
	(_IO_sputbackc): Likewise.
	(_IO_sungetc): Likewise.
	(_IO_set_column): Likewise.
	(_IO_set_column): Likewise.
	(_IO_adjust_column): Likewise.
	(_IO_get_column): Likewise.
	(_IO_init_marker): Likewise.
	(_IO_remove_marker): Likewise.
	(_IO_marker_difference): Likewise.
	(_IO_marker_delta): Likewise.
	(_IO_seekmark): Likewise.
	(_IO_unsave_markers): Likewise.
	(_IO_nobackup_pbackfail): Likewise.
	(_IO_default_pbackfail): Likewise.
	(_IO_default_seek): Likewise.
	(_IO_default_stat): Likewise.
	(_IO_default_read): Likewise.
	(_IO_default_write): Likewise.
	(_IO_default_showmanyc): Likewise.
	(_IO_default_imbue): Likewise.
	(_IO_iter_next): Likewise.
	(_IO_iter_file): Likewise.
	* libio/getc.c (_IO_getc): Likewise.
	* libio/getwc.c (_IO_getwc): Likewise.
	* libio/iofclose.c (_IO_new_fclose): Likewise.
	* libio/iofdopen.c (_IO_new_fdopen): Likewise.
	* libio/iofflush.c (_IO_fflush): Likewise.
	* libio/iofflush_u.c (__fflush_unlocked): Likewise.
	* libio/iofgetpos.c (_IO_new_fgetpos): Likewise.
	* libio/iofgetpos64.c (_IO_new_fgetpos64): Likewise.
	* libio/iofgets.c (_IO_fgets): Likewise.
	* libio/iofgets_u.c (__fgets_unlocked): Likewise.
	* libio/iofgetws.c (fgetws): Likewise.
	* libio/iofgetws_u.c (fgetws_unlocked): Likewise.
	* libio/iofopen64.c (_IO_fopen64): Likewise.
	* libio/iofopncook.c (_IO_cookie_read): Likewise.
	(_IO_cookie_write): Likewise.
	(_IO_cookie_seek): Likewise.
	(_IO_cookie_close): Likewise.
	(_IO_cookie_seekoff): Likewise.
	(_IO_old_cookie_seek): Likewise.
	* libio/iofputs.c (_IO_fputs): Likewise.
	* libio/iofputs_u.c (__fputs_unlocked): Likewise.
	* libio/iofputws.c (fputws): Likewise.
	* libio/iofputws_u.c (fputws_unlocked): Likewise.
	* libio/iofread.c (_IO_fread): Likewise.
	* libio/iofread_u.c (__fread_unlocked): Likewise.
	* libio/iofsetpos.c (_IO_new_fsetpos): Likewise.
	* libio/iofsetpos64.c (_IO_new_fsetpos64): Likewise.
	* libio/ioftell.c (_IO_ftell): Likewise.
	* libio/iofwrite.c (_IO_fwrite): Likewise.
	* libio/iogetdelim.c (_IO_getdelim): Likewise.
	* libio/iogets.c (_IO_gets): Likewise.
	* libio/iopadn.c (_IO_padn): Likewise.
	* libio/iopopen.c (_IO_new_proc_open): Likewise.
	(_IO_new_popen): Likewise.
	(_IO_new_proc_close): Likewise.
	* libio/ioputs.c (_IO_puts): Likewise.
	* libio/ioseekoff.c (_IO_seekoff_unlocked): Likewise.
	(_IO_seekoff): Likewise.
	* libio/ioseekpos.c (_IO_seekpos_unlocked): Likewise.
	(_IO_seekpos): Likewise.
	* libio/iosetbuffer.c (_IO_setbuffer): Likewise.
	* libio/iosetvbuf.c (_IO_setvbuf): Likewise.
	* libio/ioungetc.c (_IO_ungetc): Likewise.
	* libio/ioungetwc.c (ungetwc): Likewise.
	* libio/iovdprintf.c (_IO_vdprintf): Likewise.
	* libio/iovsscanf.c (_IO_vsscanf): Likewise.
	* libio/iowpadn.c (_IO_wpadn): Likewise.
	* libio/libc_fatal.c (__libc_fatal): Likewise.
	* libio/memstream.c (__open_memstream): Likewise.
	(_IO_mem_sync): Likewise.
	(_IO_mem_finish): Likewise.
	* libio/oldfileops.c (_IO_old_file_init): Likewise.
	(_IO_old_file_close_it): Likewise.
	(_IO_old_file_finish): Likewise.
	(_IO_old_file_fopen): Likewise.
	(_IO_old_file_attach): Likewise.
	(_IO_old_file_setbuf): Likewise.
	(_IO_old_do_write): Likewise.
	(old_do_write): Likewise.
	(_IO_old_file_underflow): Likewise.
	(_IO_old_file_overflow): Likewise.
	(_IO_old_file_sync): Likewise.
	(_IO_old_file_seekoff): Likewise.
	(_IO_old_file_write): Likewise.
	(_IO_old_file_xsputn): Likewise.
	* libio/oldiofclose.c (_IO_old_fclose): Likewise.
	* libio/oldiofdopen.c (_IO_old_fdopen): Likewise.
	* libio/oldiofgetpos.c (_IO_old_fgetpos): Likewise.
	* libio/oldiofgetpos64.c (_IO_old_fgetpos64): Likewise.
	* libio/oldiofopen.c (_IO_old_fopen): Likewise.
	* libio/oldiofsetpos.c (_IO_old_fsetpos): Likewise.
	* libio/oldiofsetpos64.c (_IO_old_fsetpos64): Likewise.
	* libio/oldiopopen.c (_IO_old_proc_open): Likewise.
	(_IO_old_popen): Likewise.
	(_IO_old_proc_close): Likewise.
	* libio/oldpclose.c (__old_pclose): Likewise.
	* libio/pclose.c (__new_pclose): Likewise.
	* libio/peekc.c (_IO_peekc_locked): Likewise.
	* libio/putc.c (_IO_putc): Likewise.
	* libio/putc_u.c (putc_unlocked): Likewise.
	* libio/putchar.c (putchar): Likewise.
	* libio/putchar_u.c (putchar_unlocked): Likewise.
	* libio/putwc.c (putwc): Likewise.
	* libio/putwc_u.c (putwc_unlocked): Likewise.
	* libio/putwchar.c (putwchar): Likewise.
	* libio/putwchar_u.c (putwchar_unlocked): Likewise.
	* libio/rewind.c (rewind): Likewise.
	* libio/setbuf.c (setbuf): Likewise.
	* libio/setlinebuf.c (setlinebuf): Likewise.
	* libio/vasprintf.c (_IO_vasprintf): Likewise.
	* libio/vscanf.c (_IO_vscanf): Likewise.
	* libio/vsnprintf.c (_IO_strn_overflow): Likewise.
	* libio/vswprintf.c (_IO_wstrn_overflow): Likewise.
	* libio/wfiledoalloc.c (_IO_wfile_doallocate): Likewise.
	* libio/wgenops.c (_IO_least_wmarker): Likewise.
	(_IO_switch_to_main_wget_area): Likewise.
	(_IO_switch_to_wbackup_area): Likewise.
	(_IO_wsetb): Likewise.
	(_IO_wdefault_pbackfail): Likewise.
	(_IO_wdefault_finish): Likewise.
	(_IO_wdefault_uflow): Likewise.
	(__woverflow): Likewise.
	(__wuflow): Likewise.
	(__wunderflow): Likewise.
	(_IO_wdefault_xsputn): Likewise.
	(_IO_wdefault_xsgetn): Likewise.
	(_IO_wdoallocbuf): Likewise.
	(_IO_wdefault_doallocate): Likewise.
	(_IO_switch_to_wget_mode): Likewise.
	(_IO_free_wbackup_area): Likewise.
	(_IO_switch_to_wput_mode): Likewise.
	(_IO_sputbackwc): Likewise.
	(_IO_sungetwc): Likewise.
	(_IO_adjust_wcolumn): Likewise.
	(_IO_init_wmarker): Likewise.
	(_IO_wmarker_delta): Likewise.
	(_IO_seekwmark): Likewise.
	(_IO_unsave_wmarkers): Likewise.
	* libio/wmemstream.c (open_wmemstream): Likewise.
	(_IO_wmem_sync): Likewise.
	(_IO_wmem_finish): Likewise.
	* locale/nl_langinfo.c (nl_langinfo): Likewise.
	* locale/nl_langinfo_l.c (__nl_langinfo_l): Likewise.
	* locale/programs/simple-hash.c (init_hash): Likewise.
	(delete_hash): Likewise.
	(insert_entry): Likewise.
	(set_entry): Likewise.
	(next_prime): Likewise.
	(is_prime): Likewise.
	* locale/programs/xmalloc.c (fixup_null_alloc): Likewise.
	(xmalloc): Likewise.
	(xrealloc): Likewise.
	* locale/programs/xstrdup.c (xstrdup): Likewise.
	* localedata/collate-test.c (xstrcoll): Likewise.
	* localedata/xfrm-test.c (xstrcmp): Likewise.
	* login/getlogin_r.c (__getlogin_r): Likewise.
	* login/getpt.c (__posix_openpt): Likewise.
	* login/login_tty.c (login_tty): Likewise.
	* login/setlogin.c (setlogin): Likewise.
	* mach/msg-destroy.c (__mach_msg_destroy): Likewise.
	(mach_msg_destroy_port): Likewise.
	(mach_msg_destroy_memory): Likewise.
	* malloc/mcheck.c (flood): Likewise.
	* misc/acct.c (acct): Likewise.
	* misc/brk.c (__brk): Likewise.
	* misc/chflags.c (chflags): Likewise.
	* misc/chroot.c (chroot): Likewise.
	* misc/fchflags.c (fchflags): Likewise.
	* misc/fstab.c (getfsspec): Likewise.
	(getfsfile): Likewise.
	* misc/fsync.c (fsync): Likewise.
	* misc/ftruncate.c (__ftruncate): Likewise.
	* misc/ftruncate64.c (__ftruncate64): Likewise.
	* misc/getdomain.c (getdomainname): Likewise.
	(getdomainname): Likewise.
	* misc/gethostname.c (__gethostname): Likewise.
	* misc/getpass.c (getpass): Likewise.
	* misc/getttyent.c (skip): Likewise.
	(value): Likewise.
	* misc/gtty.c (gtty): Likewise.
	* misc/hsearch.c (hsearch): Likewise.
	(hcreate): Likewise.
	* misc/hsearch_r.c (__hcreate_r): Likewise.
	(__hdestroy_r): Likewise.
	* misc/ioctl.c (__ioctl): Likewise.
	* misc/mkdtemp.c (mkdtemp): Likewise.
	* misc/mkostemp.c (mkostemp): Likewise.
	* misc/mkostemp64.c (mkostemp64): Likewise.
	* misc/mkostemps.c (mkostemps): Likewise.
	* misc/mkostemps64.c (mkostemps64): Likewise.
	* misc/mkstemp.c (mkstemp): Likewise.
	* misc/mkstemp64.c (mkstemp64): Likewise.
	* misc/mkstemps.c (mkstemps): Likewise.
	* misc/mkstemps64.c (mkstemps64): Likewise.
	* misc/mktemp.c (__mktemp): Likewise.
	* misc/preadv.c (preadv): Likewise.
	* misc/preadv64.c (preadv64): Likewise.
	* misc/pwritev.c (pwritev): Likewise.
	* misc/pwritev64.c (pwritev64): Likewise.
	* misc/readv.c (__readv): Likewise.
	* misc/revoke.c (revoke): Likewise.
	* misc/setdomain.c (setdomainname): Likewise.
	* misc/setegid.c (setegid): Likewise.
	* misc/seteuid.c (seteuid): Likewise.
	* misc/sethostid.c (sethostid): Likewise.
	* misc/sethostname.c (sethostname): Likewise.
	* misc/setregid.c (__setregid): Likewise.
	* misc/setreuid.c (__setreuid): Likewise.
	* misc/sstk.c (sstk): Likewise.
	* misc/stty.c (stty): Likewise.
	* misc/syscall.c (syscall): Likewise.
	* misc/syslog.c (setlogmask): Likewise.
	* misc/truncate.c (__truncate): Likewise.
	* misc/truncate64.c (truncate64): Likewise.
	* misc/ualarm.c (ualarm): Likewise.
	* misc/usleep.c (usleep): Likewise.
	* misc/ustat.c (ustat): Likewise.
	* misc/writev.c (__writev): Likewise.
	* nptl/cleanup_compat.c (_pthread_cleanup_pop): Likewise.
	* nptl/old_pthread_cond_broadcast.c
	(__pthread_cond_broadcast_2_0): Likewise.
	* nptl/old_pthread_cond_destroy.c (__pthread_cond_destroy_2_0):
	Likewise.
	* nptl/old_pthread_cond_signal.c (__pthread_cond_signal_2_0):
	Likewise.
	* nptl/old_pthread_cond_wait.c (__pthread_cond_wait_2_0):
	Likewise.
	* nptl/pt-raise.c (raise): Likewise.
	* nptl/pthread_barrier_destroy.c (pthread_barrier_destroy):
	Likewise.
	* nptl/pthread_barrier_wait.c (__pthread_barrier_wait): Likewise.
	* nptl/pthread_barrierattr_destroy.c
	(pthread_barrierattr_destroy): Likewise.
	* nptl/pthread_barrierattr_init.c (pthread_barrierattr_init):
	Likewise.
	* nptl/pthread_barrierattr_setpshared.c
	(pthread_barrierattr_setpshared): Likewise.
	* nptl/pthread_cond_broadcast.c (__pthread_cond_broadcast):
	Likewise.
	* nptl/pthread_cond_destroy.c (__pthread_cond_destroy): Likewise.
	* nptl/pthread_cond_init.c (__pthread_cond_init): Likewise.
	* nptl/pthread_cond_signal.c (__pthread_cond_signal): Likewise.
	* nptl/pthread_condattr_destroy.c (__pthread_condattr_destroy):
	Likewise.
	* nptl/pthread_condattr_getclock.c (pthread_condattr_getclock):
	Likewise.
	* nptl/pthread_condattr_getpshared.c
	(pthread_condattr_getpshared): Likewise.
	* nptl/pthread_condattr_init.c (__pthread_condattr_init):
	Likewise.
	* nptl/pthread_condattr_setpshared.c
	(pthread_condattr_setpshared): Likewise.
	* nptl/pthread_detach.c (pthread_detach): Likewise.
	* nptl/pthread_equal.c (__pthread_equal): Likewise.
	* nptl/pthread_getcpuclockid.c (pthread_getcpuclockid): Likewise.
	* nptl/pthread_getspecific.c (__pthread_getspecific): Likewise.
	* nptl/pthread_key_delete.c (pthread_key_delete): Likewise.
	* nptl/pthread_mutex_consistent.c (pthread_mutex_consistent):
	Likewise.
	* nptl/pthread_mutex_destroy.c (__pthread_mutex_destroy):
	Likewise.
	* nptl/pthread_mutex_getprioceiling.c
	(pthread_mutex_getprioceiling): Likewise.
	* nptl/pthread_mutexattr_destroy.c (__pthread_mutexattr_destroy):
	Likewise.
	* nptl/pthread_mutexattr_getprotocol.c
	(pthread_mutexattr_getprotocol): Likewise.
	* nptl/pthread_mutexattr_getpshared.c
	(pthread_mutexattr_getpshared): Likewise.
	* nptl/pthread_mutexattr_getrobust.c
	(pthread_mutexattr_getrobust): Likewise.
	* nptl/pthread_mutexattr_gettype.c (pthread_mutexattr_gettype):
	Likewise.
	* nptl/pthread_mutexattr_init.c (__pthread_mutexattr_init):
	Likewise.
	* nptl/pthread_mutexattr_setprioceiling.c
	(pthread_mutexattr_setprioceiling): Likewise.
	* nptl/pthread_mutexattr_setprotocol.c
	(pthread_mutexattr_setprotocol): Likewise.
	* nptl/pthread_mutexattr_setpshared.c
	(pthread_mutexattr_setpshared): Likewise.
	* nptl/pthread_mutexattr_setrobust.c
	(pthread_mutexattr_setrobust): Likewise.
	* nptl/pthread_mutexattr_settype.c (__pthread_mutexattr_settype):
	Likewise.
	* nptl/pthread_rwlock_destroy.c (__pthread_rwlock_destroy):
	Likewise.
	* nptl/pthread_rwlockattr_destroy.c (pthread_rwlockattr_destroy):
	Likewise.
	* nptl/pthread_rwlockattr_getkind_np.c
	(pthread_rwlockattr_getkind_np): Likewise.
	* nptl/pthread_rwlockattr_getpshared.c
	(pthread_rwlockattr_getpshared): Likewise.
	* nptl/pthread_rwlockattr_init.c (pthread_rwlockattr_init):
	Likewise.
	* nptl/pthread_rwlockattr_setkind_np.c
	(pthread_rwlockattr_setkind_np): Likewise.
	* nptl/pthread_rwlockattr_setpshared.c
	(pthread_rwlockattr_setpshared): Likewise.
	* nptl/pthread_setcancelstate.c (__pthread_setcancelstate):
	Likewise.
	* nptl/pthread_setcanceltype.c (__pthread_setcanceltype):
	Likewise.
	* nptl/pthread_setconcurrency.c (pthread_setconcurrency):
	Likewise.
	* nptl/pthread_setschedprio.c (pthread_setschedprio): Likewise.
	* nptl/pthread_setspecific.c (__pthread_setspecific): Likewise.
	* nptl/pthread_spin_destroy.c (pthread_spin_destroy): Likewise.
	* nptl/pthread_tryjoin.c (pthread_tryjoin_np): Likewise.
	* nptl/sem_close.c (sem_close): Likewise.
	* nptl/sem_destroy.c (__new_sem_destroy): Likewise.
	* nptl/sem_init.c (__old_sem_init): Likewise.
	* nptl/sigaction.c (__sigaction): Likewise.
	* nptl/unregister-atfork.c (__unregister_atfork): Likewise.
	* posix/_exit.c (_exit): Likewise.
	* posix/alarm.c (alarm): Likewise.
	* posix/confstr.c (confstr): Likewise.
	* posix/fpathconf.c (__fpathconf): Likewise.
	* posix/getgroups.c (__getgroups): Likewise.
	* posix/getpgid.c (__getpgid): Likewise.
	* posix/group_member.c (__group_member): Likewise.
	* posix/pathconf.c (__pathconf): Likewise.
	* posix/sched_getaffinity.c (sched_getaffinity): Likewise.
	* posix/sched_setaffinity.c (sched_setaffinity): Likewise.
	* posix/setgid.c (__setgid): Likewise.
	* posix/setpgid.c (__setpgid): Likewise.
	* posix/setuid.c (__setuid): Likewise.
	* posix/sleep.c (__sleep): Likewise.
	* posix/sysconf.c (__sysconf): Likewise.
	* posix/times.c (__times): Likewise.
	* posix/uname.c (__uname): Likewise.
	* posix/waitid.c (__waitid): Likewise.
	* pwd/getpw.c (__getpw): Likewise.
	* resolv/base64.c (b64_pton): Likewise.
	* resolv/gai_sigqueue.c (__gai_sigqueue): Likewise.
	* resolv/gethnamaddr.c (Dprintf): Likewise.
	(gethostbyname): Likewise.
	(gethostbyname2): Likewise.
	(gethostbyaddr): Likewise.
	(_sethtent): Likewise.
	(_gethtbyname): Likewise.
	(_gethtbyname2): Likewise.
	(_gethtbyaddr): Likewise.
	(map_v4v6_address): Likewise.
	(map_v4v6_hostent): Likewise.
	(addrsort): Likewise.
	(ht_sethostent): Likewise.
	(ht_gethostbyname): Likewise.
	(ht_gethostbyaddr): Likewise.
	* resolv/inet_net_ntop.c (inet_net_ntop): Likewise.
	(inet_net_ntop_ipv4): Likewise.
	* resolv/inet_neta.c (inet_neta): Likewise.
	* resolv/inet_ntop.c (inet_ntop): Likewise.
	(inet_ntop4): Likewise.
	(inet_ntop6): Likewise.
	* resolv/inet_pton.c (__inet_pton): Likewise.
	(inet_pton4): Likewise.
	(inet_pton6): Likewise.
	* resolv/res_debug.c (loc_aton): Likewise.
	(loc_ntoa): Likewise.
	* resource/getpriority.c (__getpriority): Likewise.
	* resource/getrusage.c (__getrusage): Likewise.
	* resource/nice.c (nice): Likewise.
	* resource/setpriority.c (__setpriority): Likewise.
	* resource/setrlimit64.c (setrlimit64): Likewise.
	* resource/vlimit.c (vlimit): Likewise.
	* resource/vtimes.c (vtimes): Likewise.
	* rt/aio_error.c (aio_error): Likewise.
	* rt/aio_return.c (aio_return): Likewise.
	* rt/aio_sigqueue.c (__aio_sigqueue): Likewise.
	* signal/kill.c (__kill): Likewise.
	* signal/killpg.c (killpg): Likewise.
	* signal/raise.c (raise): Likewise.
	* signal/sigaction.c (__sigaction): Likewise.
	* signal/sigaddset.c (sigaddset): Likewise.
	* signal/sigaltstack.c (sigaltstack): Likewise.
	* signal/sigandset.c (sigandset): Likewise.
	* signal/sigblock.c (__sigblock): Likewise.
	* signal/sigdelset.c (sigdelset): Likewise.
	* signal/sigempty.c (sigemptyset): Likewise.
	* signal/sigfillset.c (sigfillset): Likewise.
	* signal/sighold.c (sighold): Likewise.
	* signal/sigignore.c (sigignore): Likewise.
	* signal/sigintr.c (siginterrupt): Likewise.
	* signal/sigisempty.c (sigisemptyset): Likewise.
	* signal/sigismem.c (sigismember): Likewise.
	* signal/signal.c (signal): Likewise.
	* signal/sigorset.c (sigorset): Likewise.
	* signal/sigpause.c (__sigpause): Likewise.
	* signal/sigpending.c (sigpending): Likewise.
	* signal/sigprocmask.c (__sigprocmask): Likewise.
	* signal/sigrelse.c (sigrelse): Likewise.
	* signal/sigreturn.c (__sigreturn): Likewise.
	* signal/sigset.c (sigset): Likewise.
	* signal/sigsetmask.c (__sigsetmask): Likewise.
	* signal/sigstack.c (sigstack): Likewise.
	* signal/sigsuspend.c (__sigsuspend): Likewise.
	* signal/sigvec.c (sigvec_wrapper_handler): Likewise.
	* signal/sysv_signal.c (__sysv_signal): Likewise.
	* socket/accept.c (accept): Likewise.
	* socket/accept4.c (__libc_accept4): Likewise.
	* socket/bind.c (__bind): Likewise.
	* socket/connect.c (__connect): Likewise.
	* socket/getpeername.c (getpeername): Likewise.
	* socket/getsockname.c (__getsockname): Likewise.
	* socket/getsockopt.c (getsockopt): Likewise.
	* socket/listen.c (__listen): Likewise.
	* socket/recv.c (__recv): Likewise.
	* socket/recvmsg.c (__recvmsg): Likewise.
	* socket/send.c (__send): Likewise.
	* socket/sendmsg.c (__sendmsg): Likewise.
	* socket/shutdown.c (shutdown): Likewise.
	* socket/sockatmark.c (sockatmark): Likewise.
	* socket/socket.c (__socket): Likewise.
	* stdio-common/ctermid.c (ctermid): Likewise.
	* stdio-common/cuserid.c (cuserid): Likewise.
	* stdio-common/printf-prs.c (parse_printf_format): Likewise.
	* stdio-common/remove.c (remove): Likewise.
	* stdio-common/rename.c (rename): Likewise.
	* stdio-common/renameat.c (renameat): Likewise.
	* stdio-common/tempname.c (__gen_tempname): Likewise.
	* stdio-common/xbug.c (InitBuffer): Likewise.
	(AppendToBuffer): Likewise.
	(ReadFile): Likewise.
	* stdlib/a64l.c (a64l): Likewise.
	* stdlib/drand48_r.c (drand48_r): Likewise.
	* stdlib/getcontext.c (getcontext): Likewise.
	* stdlib/getenv.c (getenv): Likewise.
	* stdlib/l64a.c (l64a): Likewise.
	* stdlib/llabs.c (llabs): Likewise.
	* stdlib/lldiv.c (lldiv): Likewise.
	* stdlib/lrand48_r.c (lrand48_r): Likewise.
	* stdlib/mrand48_r.c (mrand48_r): Likewise.
	* stdlib/putenv.c (putenv): Likewise.
	* stdlib/random.c (__srandom): Likewise.
	(__initstate): Likewise.
	(__setstate): Likewise.
	* stdlib/random_r.c (__srandom_r): Likewise.
	(__setstate_r): Likewise.
	(__random_r): Likewise.
	* stdlib/secure-getenv.c (__libc_secure_getenv): Likewise.
	* stdlib/setcontext.c (setcontext): Likewise.
	* stdlib/setenv.c (setenv): Likewise.
	(unsetenv): Likewise.
	* stdlib/srand48.c (srand48): Likewise.
	* stdlib/srand48_r.c (__srand48_r): Likewise.
	* stdlib/swapcontext.c (swapcontext): Likewise.
	* stdlib/system.c (__libc_system): Likewise.
	* stdlib/tst-strtod.c (expand): Likewise.
	* stdlib/tst-strtol.c (expand): Likewise.
	* stdlib/tst-strtoll.c (expand): Likewise.
	* streams/fattach.c (fattach): Likewise.
	* streams/fdetach.c (fdetach): Likewise.
	* streams/getmsg.c (getmsg): Likewise.
	* streams/isastream.c (isastream): Likewise.
	* string/ffs.c (__ffs): Likewise.
	* string/ffsll.c (ffsll): Likewise.
	* string/memcmp.c (memcmp_common_alignment): Likewise.
	(memcmp_not_common_alignment): Likewise.
	(MEMCMP): Likewise.
	* string/memcpy.c (memcpy): Likewise.
	* string/memmove.c (MEMMOVE): Likewise.
	* string/memset.c (memset): Likewise.
	* string/rawmemchr.c (RAWMEMCHR): Likewise.
	* string/strchrnul.c (STRCHRNUL): Likewise.
	* string/strerror.c (strerror): Likewise.
	* string/strndup.c (__strndup): Likewise.
	* string/strverscmp.c (__strverscmp): Likewise.
	* sunrpc/clnt_raw.c (clntraw_freeres): Likewise.
	* sunrpc/clnt_tcp.c (clnttcp_geterr): Likewise.
	(clnttcp_freeres): Likewise.
	* sunrpc/clnt_unix.c (clntunix_freeres): Likewise.
	* sunrpc/pmap_prot.c (xdr_pmap): Likewise.
	* sunrpc/pmap_prot2.c (xdr_pmaplist): Likewise.
	* sunrpc/pmap_rmt.c (xdr_rmtcallres): Likewise.
	* sunrpc/rpc_prot.c (xdr_replymsg): Likewise.
	(xdr_callhdr): Likewise.
	* sunrpc/rpcinfo.c (udpping): Likewise.
	(tcpping): Likewise.
	(pstatus): Likewise.
	(pmapdump): Likewise.
	(brdcst): Likewise.
	(deletereg): Likewise.
	(getprognum): Likewise.
	(getvers): Likewise.
	(get_inet_address): Likewise.
	* sunrpc/svc_raw.c (svcraw_recv): Likewise.
	* sunrpc/svc_udp.c (svcudp_create): Likewise.
	(svcudp_stat): Likewise.
	(svcudp_recv): Likewise.
	(svcudp_reply): Likewise.
	(svcudp_getargs): Likewise.
	(svcudp_freeargs): Likewise.
	(svcudp_destroy): Likewise.
	* sunrpc/xdr.c (xdr_bytes): Likewise.
	(xdr_netobj): Likewise.
	(xdr_string): Likewise.
	(xdr_wrapstring): Likewise.
	* sunrpc/xdr_float.c (xdr_float): Likewise.
	(xdr_double): Likewise.
	* sunrpc/xdr_mem.c (xdrmem_setpos): Likewise.
	* sunrpc/xdr_ref.c (xdr_pointer): Likewise.
	* sysvipc/ftok.c (ftok): Likewise.
	* sysvipc/msgctl.c (msgctl): Likewise.
	* sysvipc/msgget.c (msgget): Likewise.
	* sysvipc/msgrcv.c (msgrcv): Likewise.
	* sysvipc/msgsnd.c (msgsnd): Likewise.
	* sysvipc/semget.c (semget): Likewise.
	* sysvipc/semop.c (semop): Likewise.
	* sysvipc/shmat.c (shmat): Likewise.
	* sysvipc/shmctl.c (shmctl): Likewise.
	* sysvipc/shmdt.c (shmdt): Likewise.
	* sysvipc/shmget.c (shmget): Likewise.
	* termios/cfmakeraw.c (cfmakeraw): Likewise.
	* termios/speed.c (cfgetospeed): Likewise.
	(cfgetispeed): Likewise.
	(cfsetospeed): Likewise.
	(cfsetispeed): Likewise.
	* termios/tcflow.c (tcflow): Likewise.
	* termios/tcflush.c (tcflush): Likewise.
	* termios/tcgetattr.c (__tcgetattr): Likewise.
	* termios/tcgetpgrp.c (tcgetpgrp): Likewise.
	* termios/tcgetsid.c (tcgetsid): Likewise.
	* termios/tcsendbrk.c (tcsendbreak): Likewise.
	* termios/tcsetpgrp.c (tcsetpgrp): Likewise.
	* time/adjtime.c (__adjtime): Likewise.
	* time/dysize.c (dysize): Likewise.
	* time/ftime.c (ftime): Likewise.
	* time/getitimer.c (__getitimer): Likewise.
	* time/gettimeofday.c (__gettimeofday): Likewise.
	* time/gmtime.c (__gmtime_r): Likewise.
	(gmtime): Likewise.
	* time/localtime.c (__localtime_r): Likewise.
	(localtime): Likewise.
	* time/offtime.c (__offtime): Likewise.
	* time/settimeofday.c (__settimeofday): Likewise.
	* time/stime.c (stime): Likewise.
	* time/strftime_l.c (tm_diff): Likewise.
	(iso_week_days): Likewise.
	* time/strptime.c (strptime): Likewise.
	* time/time.c (time): Likewise.
	* time/timespec_get.c (timespec_get): Likewise.
	* time/tzset.c (tzset_internal): Likewise.
	(compute_change): Likewise.
	(__tz_compute): Likewise.
	* wcsmbs/btowc.c (__btowc): Likewise.
	* wcsmbs/mbrlen.c (__mbrlen): Likewise.
	* wcsmbs/mbsinit.c (__mbsinit): Likewise.
	* wcsmbs/mbsrtowcs.c (__mbsrtowcs): Likewise.
	* wcsmbs/wcpcpy.c (__wcpcpy): Likewise.
	* wcsmbs/wcpncpy.c (__wcpncpy): Likewise.
	* wcsmbs/wcscat.c (__wcscat): Likewise.
	* wcsmbs/wcschrnul.c (__wcschrnul): Likewise.
	* wcsmbs/wcscmp.c (WCSCMP): Likewise.
	* wcsmbs/wcscpy.c (WCSCPY): Likewise.
	* wcsmbs/wcscspn.c (wcscspn): Likewise.
	* wcsmbs/wcsdup.c (wcsdup): Likewise.
	* wcsmbs/wcslen.c (__wcslen): Likewise.
	* wcsmbs/wcsncat.c (WCSNCAT): Likewise.
	* wcsmbs/wcsncmp.c (WCSNCMP): Likewise.
	* wcsmbs/wcsncpy.c (__wcsncpy): Likewise.
	* wcsmbs/wcsnlen.c (__wcsnlen): Likewise.
	* wcsmbs/wcspbrk.c (wcspbrk): Likewise.
	* wcsmbs/wcsrchr.c (WCSRCHR): Likewise.
	* wcsmbs/wcsspn.c (wcsspn): Likewise.
	* wcsmbs/wcsstr.c (wcsstr): Likewise.
	* wcsmbs/wcstok.c (wcstok): Likewise.
	* wcsmbs/wctob.c (wctob): Likewise.
	* wcsmbs/wmemchr.c (__wmemchr): Likewise.
	* wcsmbs/wmemcmp.c (WMEMCMP): Likewise.
	* wcsmbs/wmemcpy.c (__wmemcpy): Likewise.
	* wcsmbs/wmemmove.c (__wmemmove): Likewise.
	* wcsmbs/wmempcpy.c (__wmempcpy): Likewise.
	* wcsmbs/wmemset.c (__wmemset): Likewise.
	* wctype/wcfuncs.c (__towlower): Likewise.
	(__towupper): Likewise.

	* sysdeps/unix/sysv/linux/i386/lowlevellock.h
	(lll_unlock_elision): Add adapt_count parameter.

2015-10-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/nptl/configure.ac: Do not give errors based on the
	results of top-level configure tests.
	* sysdeps/nptl/configure: Regenerated.

	* configure.ac (libc_cv_Bgroup): Remove configure test.
	* configure: Regenerated.
	* config.make.in (have-Bgroup): Remove variable.

	* configure.ac (sizeof_long_double): Remove configure test.
	* configure: Regenerated.
	* config.make.in (sizeof-long-double): Remove variable.

	* configure.ac (libc_cv_gcc_exceptions): Remove configure test.
	* configure: Regenerated.
	* sysdeps/arm/configure.ac (libc_cv_gcc_exceptions): Do not set
	variable.
	(exceptions): Likewise.
	* sysdeps/arm/configure: Regenerated.
	* config.make.in (exceptions): Remove variable.
	* Makeconfig (uses-callbacks): Use -fexceptions instead of
	$(exceptions).
	* debug/Makefile (CFLAGS-dprintf_chk.c): Likewise.
	(CFLAGS-vdprintf_chk.c): Likewise.
	(CFLAGS-printf_chk.c): Likewise.
	(CFLAGS-fprintf_chk.c): Likewise.
	(CFLAGS-vprintf_chk.c): Likewise.
	(CFLAGS-vfprintf_chk.c): Likewise.
	(CFLAGS-gets_chk.c): Likewise.
	(CFLAGS-fgets_chk.c): Likewise.
	(CFLAGS-fgets_u_chk.c): Likewise.
	(CFLAGS-fread_chk.c): Likewise.
	(CFLAGS-fread_u_chk.c): Likewise.
	(CFLAGS-wprintf_chk.c): Likewise.
	(CFLAGS-fwprintf_chk.c): Likewise.
	(CFLAGS-vwprintf_chk.c): Likewise.
	(CFLAGS-vfwprintf_chk.c): Likewise.
	(CFLAGS-fgetws_chk.c): Likewise.
	(CFLAGS-fgetws_u_chk.c): Likewise.
	* libio/Makefile (CFLAGS-fileops.c): Likewise.
	(CFLAGS-fputc.c): Likewise.
	(CFLAGS-fputwc.c): Likewise.
	(CFLAGS-freopen64.c): Likewise.
	(CFLAGS-freopen.c): Likewise.
	(CFLAGS-fseek.c): Likewise.
	(CFLAGS-fseeko64.c): Likewise.
	(CFLAGS-fseeko.c): Likewise.
	(CFLAGS-ftello64.c): Likewise.
	(CFLAGS-ftello.c): Likewise.
	(CFLAGS-fwide.c): Likewise.
	(CFLAGS-genops.c): Likewise.
	(CFLAGS-getc.c): Likewise.
	(CFLAGS-getchar.c): Likewise.
	(CFLAGS-getwc.c): Likewise.
	(CFLAGS-getwchar.c): Likewise.
	(CFLAGS-iofclose.c): Likewise.
	(CFLAGS-iofflush.c): Likewise.
	(CFLAGS-iofgetpos64.c): Likewise.
	(CFLAGS-iofgetpos.c): Likewise.
	(CFLAGS-iofgets.c): Likewise.
	(CFLAGS-iofgetws.c): Likewise.
	(CFLAGS-iofputs.c): Likewise.
	(CFLAGS-iofputws.c): Likewise.
	(CFLAGS-iofread.c): Likewise.
	(CFLAGS-iofsetpos64.c): Likewise.
	(CFLAGS-iofsetpos.c): Likewise.
	(CFLAGS-ioftell.c): Likewise.
	(CFLAGS-iofwrite.c): Likewise.
	(CFLAGS-iogetdelim.c): Likewise.
	(CFLAGS-iogetline.c): Likewise.
	(CFLAGS-iogets.c): Likewise.
	(CFLAGS-iogetwline.c): Likewise.
	(CFLAGS-ioputs.c): Likewise.
	(CFLAGS-ioseekoff.c): Likewise.
	(CFLAGS-ioseekpos.c): Likewise.
	(CFLAGS-iosetbuffer.c): Likewise.
	(CFLAGS-iosetvbuf.c): Likewise.
	(CFLAGS-ioungetc.c): Likewise.
	(CFLAGS-ioungetwc.c): Likewise.
	(CFLAGS-oldfileops.c): Likewise.
	(CFLAGS-oldiofclose.c): Likewise.
	(CFLAGS-oldiofgetpos64.c): Likewise.
	(CFLAGS-oldiofgetpos.c): Likewise.
	(CFLAGS-oldiofsetpos64.c): Likewise.
	(CFLAGS-oldiofsetpos.c): Likewise.
	(CFLAGS-peekc.c): Likewise.
	(CFLAGS-putc.c): Likewise.
	(CFLAGS-putchar.c): Likewise.
	(CFLAGS-putwc.c): Likewise.
	(CFLAGS-putwchar.c): Likewise.
	(CFLAGS-rewind.c): Likewise.
	(CFLAGS-wfileops.c): Likewise.
	(CFLAGS-wgenops.c): Likewise.
	(CFLAGS-oldiofopen.c): Likewise.
	(CFLAGS-iofopen.c): Likewise.
	(CFLAGS-iofopen64.c): Likewise.
	(CFLAGS-oldtmpfile.c): Likewise.
	* stdio-common/Makefile (CFLAGS-vfprintf.c): Likewise.
	(CFLAGS-fprintf.c): Likewise.
	(CFLAGS-printf.c): Likewise.
	(CFLAGS-vfwprintf.c): Likewise.
	(CFLAGS-vfscanf.c): Likewise.
	(CFLAGS-vfwscanf.c): Likewise.
	(CFLAGS-fscanf.c): Likewise.
	(CFLAGS-scanf.c): Likewise.
	(CFLAGS-isoc99_vfscanf.c): Likewise.
	(CFLAGS-isoc99_vscanf.c): Likewise.
	(CFLAGS-isoc99_fscanf.c): Likewise.
	(CFLAGS-isoc99_scanf.c): Likewise.
	* wcsmbs/Makefile (CFLAGS-isoc99_wscanf.c): Likewise.
	(CFLAGS-isoc99_fwscanf.c): Likewise.
	(CFLAGS-isoc99_vwscanf.c): Likewise.
	(CFLAGS-isoc99_vfwscanf.c): Likewise.

	* io/test-lfs.c (do_prepare): Do not call add_temp_file until
	after mkstemp64.
	* login/tst-utmp.c (do_prepare): Likewise.
	* rt/tst-aio.c (do_prepare): Likewise.
	* rt/tst-aio64.c (do_prepare): Likewise.

2015-10-15  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/elision-lock.c
	(__lll_lock_elision): Remove adapt_count decrement...
	* sysdeps/unix/sysv/linux/powerpc/elision-trylock.c
	(__lll_trylock_elision): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/elision-unlock.c
	(__lll_unlock_elision): ... to here. And utilize
	new adapt_count parameter.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h
	(__lll_unlock_elision): Update to include adapt_count
	parameter.
	(lll_unlock_elision): Pass pointer to adapt_count
	variable.

2015-10-15  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* nptl/pthread_mutex_unlock.c (lll_unlock_elision):
	Add elision adapt_count parameter to list of arguments.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h
	(lll_unlock_elision): Update with new parameter list
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h
	(lll_unlock_elision): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h
	(lll_unlock_elision): Likewise.

2015-10-15  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19122]
	* include/sys/utsname.h [IS_IN (rtld)] (__uname): Add
	attribute_hidden.

	* include/string.h [IS_IN (rtld)] (__stpcpy): Add
	attribute_hidden.
	[IS_IN (rtld)] (__strdup): Likewise.
	[IS_IN (rtld)] (__strerror_r): Likewise.
	[IS_IN (rtld)] (__strsep_g): Likewise.
	[IS_IN (rtld)] (memchr): Likewise.
	[IS_IN (rtld)] (memcmp): Likewise.
	[IS_IN (rtld)] (memcpy): Likewise.
	[IS_IN (rtld)] (memmove): Likewise.
	[IS_IN (rtld)] (memset): Likewise.
	[IS_IN (rtld)] (rawmemchr): Likewise.
	[IS_IN (rtld)] (stpcpy): Likewise.
	[IS_IN (rtld)] (strchr): Likewise.
	[IS_IN (rtld)] (strcmp): Likewise.
	[IS_IN (rtld)] (strlen): Likewise.
	[IS_IN (rtld)] (strnlen): Likewise.
	[IS_IN (rtld)] (strsep): Likewise.

	* include/stdlib.h [IS_IN (rtld)] (unsetenv): Add
	attribute_hidden.
	[IS_IN (rtld)] (__strtoul_internal): Likewise.

	* include/signal.h [IS_IN (rtld)] (__sigaction): Add
	attribute_hidden.
	[IS_IN (rtld)] (__libc_sigaction): Likewise.

	* include/setjmp.h (__longjmp): Add attribute_hidden.
	[IS_IN (rtld)] (__sigsetjmp): Likewise.

	* include/libc-internal.h [IS_IN (rtld)] (__profile_frequency):
	Add attribute_hidden.

	* include/fcntl.h (__libc_fcntl): Add attribute_hidden.
	[IS_IN (rtld)] (__open): Likewise.
	[IS_IN (rtld)] (__fcntl): Likewise.

	* include/dirent.h (__opendirat): Add attribute_hidden.
	(__getdents): Likewise.
	(__getdents64): Likewise.
	(__alloc_dir): Likewise.
	[IS_IN (rtld)] (__closedir): Likewise.
	[IS_IN (rtld)] (__fdopendir): Likewise.
	[IS_IN (rtld)] (__readdir): Likewise.
	[IS_IN (rtld)] (__readdir64): Likewise.
	[IS_IN (rtld)] (__rewinddir): Likewise.

	* include/dlfcn.h (_dl_catch_error): Moved to ...
	* sysdeps/generic/ldsodefs.h (_dl_catch_error): Add
	attribute_hidden.

	* sysdeps/generic/_itoa.h (_itoa): Add attribute_hidden.
	(_itoa_word): Likewise.

	* elf/dl-runtime.c (_dl_fixup): Add attribute_hidden.
	* elf/dynamic-link.h (_dl_try_allocate_static_tls): Likewise.
	* sysdeps/generic/dl-cache.h (_dl_cache_libcmp): Likewise.
	* sysdeps/generic/ldsodefs.h (_dl_name_match_p): Likewise.
	(_dl_higher_prime_number): Likewise.
	(_dl_debug_printf_c): Likewise.
	(_dl_signal_cerror): Likewise.
	(_dl_receive_error): Likewise.
	(_dl_reloc_bad_type): Likewise.
	(_dl_resolve_conflicts): Likewise.
	(_dl_check_all_versions): Likewise.
	(_dl_check_map_versions): Likewise.
	(_dl_sort_fini): Likewise.
	(_dl_debug_initialize): Likewise.
	(_dl_init_paths): Likewise.
	(_dl_show_auxv): Likewise.
	(_dl_next_ld_env_entry): Likewise.
	(_dl_important_hwcaps): Likewise.
	(_dl_load_cache_lookup): Likewise.
	(_dl_update_slotinfo): Likewise.
	(_dl_show_scope): Likewise.

	* sysdeps/generic/memcopy.h (_wordcopy_fwd_aligned): Add
	attribute_hidden.
	(_wordcopy_fwd_dest_aligned): Likewise.
	(_wordcopy_bwd_aligned): Likewise.
	(_wordcopy_bwd_dest_aligned): Likewise.

	* sysdeps/i386/dl-lookupcfg.h (_dl_unmap): Add attribute_hidden.
	* sysdeps/i386/dl-tlsdesc.h (_dl_make_tlsdesc_dynamic):
	Likewise.
	* sysdeps/x86_64/dl-tlsdesc.h (_dl_make_tlsdesc_dynamic):
	Likewise.
	* sysdeps/x86_64/dl-lookupcfg.h (_dl_unmap): Likewise.

2015-10-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/i386/sysdep.h: Add comments for
	GCC 5 requirement.

2015-10-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/configure.ac (libc_cv_as_i686): Remove configure
	test.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/i386/i686/Makefile [$(config-asflags-i686) = yes]: Make
	code unconditional.

	* configure.ac (libc_cv_asm_previous_directive): Remove configure
	test.
	(libc_cv_asm_popsection_directive): Likewise.
	* configure: Regenerated.
	* config.h.in (HAVE_ASM_PREVIOUS_DIRECTIVE): Remove #undef.
	(HAVE_ASM_POPSECTION_DIRECTIVE): Likewise.
	* include/libc-symbols.h [HAVE_ASM_PREVIOUS_DIRECTIVE]
	(__make_section_unallocated): Make definition unconditional.
	[HAVE_ASM_POPSECTION_DIRECTIVE] (__make_section_unallocated):
	Remove conditional definition.
	[!HAVE_ASM_PREVIOUS_DIRECTIVE && !HAVE_ASM_POPSECTION_DIRECTIVE]
	(__make_section_unallocated): Likewise.

	* configure.ac (libc_cv_gcc_static_libgcc): Remove configure test.
	* configure: Regenerated.
	* config.make.in (static-libgcc): Remove variable.
	* Makerules (build-shlib-helper): Use -static-libgcc instead of
	$(static-libgcc).
	(build-module-helper): Likewise.

	* configure.ac (libc_cv_friendly_stddef): Remove configure test.
	* configure: Regenerated.

2015-10-15  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfscanf.c (MEMCPY): Remove macro.
	(struct char_buffer): New type.
	(char_buffer_start, char_buffer_size, char_buffer_error)
	(char_buffer_rewind, char_buffer_add): New functions.
	(ADDW): Remove macro, replaced by the char_buffer_add function.
	(_IO_vfscanf_internal): Rewrite using struct char_buffer instead
	of extend_alloca.  Make control flow more explicit.

2015-10-15  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19137]
	* sysdeps/unix/sysv/linux/i386/Makefile (CFLAGS-epoll_pwait.c):
	Add -fomit-frame-pointer.
	* sysdeps/unix/sysv/linux/i386/epoll_pwait.S: Remove file.

2015-10-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/i386/libc-do-syscall.S
	(__libc_do_syscall): Defined only if !__GNUC_PREREQ (5,0).
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Define assembler macros
	only if !__GNUC_PREREQ (5,0).
	(INTERNAL_SYSCALL_MAIN_6): Optimize for GCC 5.
	(INTERNAL_SYSCALL_MAIN_INLINE): Likewise.
	(INTERNAL_SYSCALL_NCS): Likewise.
	(LOADREGS_0): New macro for GCC 5.
	(ASMARGS_0): Likewise.
	(LOADREGS_1): Likewise.
	(ASMARGS_1): Likewise.
	(LOADREGS_2): Likewise.
	(ASMARGS_2): Likewise.
	(LOADREGS_3): Likewise.
	(ASMARGS_3): Likewise.
	(LOADREGS_4): Likewise.
	(ASMARGS_4): Likewise.
	(LOADREGS_5): Likewise.
	(ASMARGS_5): Likewise.
	(LOADREGS_6): Likewise.
	(ASMARGS_6): Likewise.

2015-10-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/i386/Makefile (CFLAGS-mmap.c): Add
	-fomit-frame-pointer.
	(CFLAGS-mmap64.c): Likewise.
	(CFLAGS-semtimedop.c): Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap.c: New file.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Remove file.
	* sysdeps/unix/sysv/linux/i386/mmap64.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/semtimedop.S: Likewise.

2015-10-15  Florian Weimer  <fweimer@redhat.com>

	[BZ #18928]
	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro): Remove
	_dl_pointer_guard member.
	* elf/rtld.c (_rtld_global_ro): Remove _dl_pointer_guard
	initializer.
	(security_init): Always set up pointer guard.
	(process_envvars): Do not process LD_POINTER_GUARD.

2015-10-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19134]
	* sysdeps/powerpc/powerpc32/fpu/s_lround.S (.LC1): New object.
	(.LC2): Likewise.
	(.LC3): Likewise.
	(__lround): Do not add 0.5 to integer or out-of-range arguments.

2015-10-14  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	[BZ #19129]
	* sysdeps/arm/dl-tlsdesc.S (_dl_tlsdesc_resolve_hold): Save and restore
	r0 and r1.

2015-10-14  Namhyung Kim  <namhyung@gmail.com>

	* manaual/argp.texi (Specifying Argp Parsers): Fix typo.

2015-10-14  Carlos O'Donell  <carlos@redhat.com>

	* include/stap-probe.h: Fix macro definition formatting.

2015-10-14  Florian Weimer  <fweimer@redhat.com>

	[BZ #19074]
	* resolv/res_hconf.c (_res_hconf_reorder_addrs): Use atomics to
	load and store num_ifs.

2015-10-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18822]
	* sysdeps/unix/sysv/linux/sched_getaffinity.c
	(__sched_getaffinity_new): Add libc_hidden_proto and
	libc_hidden_def.

2015-10-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19007]
	* scripts/localplt.awk: Also allow GOT references.
	* sysdeps/unix/sysv/linux/i386/localplt.data: Mark
	_Unwind_Find_FDE, calloc, memalign, realloc and __libc_memalign
	with "+ REL R_386_GLOB_DAT".
	* sysdeps/x86_64/localplt.data: Mark calloc, memalign, realloc
	and __libc_memalign with "+ RELA R_X86_64_GLOB_DAT".

2015-10-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/i386/brk.c (__brk): Use
	INLINE_SYSCALL_ERROR_RETURN_VALUE.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c (__fxstatat):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/setegid.c (setegid): Likewise.
	* sysdeps/unix/sysv/linux/i386/seteuid.c (seteuid): Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstat.c (__fxstat): Use
	INTERNAL_SYSCALLINTERNAL_SYSCALL and
	INLINE_SYSCALL_ERROR_RETURN_VALUE.
	* sysdeps/unix/sysv/linux/i386/lockf64.c (lockf64): Likewise.
	* sysdeps/unix/sysv/linux/i386/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/i386/sigaction.c (__libc_sigaction):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c (__xstat): Likewise.

2015-10-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19125]
	* sysdeps/powerpc/powerpc32/fpu/s_llround.c: Include <limits.h>,
	<math_private.h> and <stdint.h>.
	(__llround): Avoid conversions to and from long long int, and
	subtractions, where those might raise spurious exceptions.
	* sysdeps/powerpc/powerpc32/fpu/s_llroundf.c: Include
	<math_private.h> and <stdint.h>.
	(__llroundf): Avoid conversions to and from long long int, and
	subtractions, where those might raise spurious exceptions.

2015-10-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/adjtime.c (ADJTIME): Use
	INLINE_SYSCALL_ERROR_RETURN_VALUE.
	* sysdeps/unix/sysv/linux/dl-openat64.c (openat64): Likewise.
	* sysdeps/unix/sysv/linux/eventfd.c (eventfd): Likewise.
	* sysdeps/unix/sysv/linux/faccessat.c (faccessat): Likewise.
	* sysdeps/unix/sysv/linux/fchmodat.c (fchmodat): Likewise.
	* sysdeps/unix/sysv/linux/fcntl.c (do_fcntl): Likewise.
	* sysdeps/unix/sysv/linux/futimens.c (futimens): Likewise.
	* sysdeps/unix/sysv/linux/futimes.c (__futimes): Likewise.
	* sysdeps/unix/sysv/linux/fxstat.c (__fxstat): Likewise.
	* sysdeps/unix/sysv/linux/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/fxstatat64.c (__fxstatat64): Likewise.
	* sysdeps/unix/sysv/linux/lutimes.c (lutimes): Likewise.
	* sysdeps/unix/sysv/linux/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/lxstat64.c (___lxstat64): Likewise.
	* sysdeps/unix/sysv/linux/mmap64.c (__mmap64): Likewise.
	* sysdeps/unix/sysv/linux/mq_open.c (__mq_open): Likewise.
	* sysdeps/unix/sysv/linux/mq_unlink.c (mq_unlink): Likewise.
	* sysdeps/unix/sysv/linux/prlimit.c (prlimit): Likewise.
	* sysdeps/unix/sysv/linux/readahead.c (__readahead): Likewise.
	* sysdeps/unix/sysv/linux/shmat.c (shmat): Likewise.
	* sysdeps/unix/sysv/linux/signalfd.c (signalfd): Likewise.
	* sysdeps/unix/sysv/linux/speed.c (cfsetospeed): Likewise.
	* sysdeps/unix/sysv/linux/tcsetattr.c (tcsetattr): Likewise.
	* sysdeps/unix/sysv/linux/ustat.c (ustat): Likewise.
	* sysdeps/unix/sysv/linux/utimensat.c (utimensat): Likewise.
	* sysdeps/unix/sysv/linux/xmknod.c (__xmknod): Likewise.
	* sysdeps/unix/sysv/linux/xmknodat.c (__xmknodat): Likewise.
	* sysdeps/unix/sysv/linux/xstat.c (__xstat): Likewise.
	* sysdeps/unix/sysv/linux/xstatconv.c (__xstat_conv): Likewise.
	(__xstat64_conv): Likewise.
	(__xstat32_conv): Likewise.

2015-10-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/sysdep.h: New file.
	* sysdeps/unix/sysv/linux/i386/sysdep.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sysdep.h: Include
	<sysdeps/unix/sysv/linux/sysdep.h>.
	* sysdeps/unix/sysv/linux/arm/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/generic/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/Makefile [$(subdir) == csu]
	(sysdep-dl-routines): Add sysdep.
	[$(subdir) == nptl] (libpthread-routines): Likewise.
	[$(subdir) == rt] (librt-routines): Likewise.
	* sysdeps/unix/sysv/linux/i386/clone.S (__clone): Don't check
	PIC when branching to SYSCALL_ERROR_LABEL.
	* sysdeps/unix/sysv/linux/i386/sysdep.S: Removed.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Include
	<sysdeps/unix/sysv/linux/sysdep.h>.
	(SYSCALL_ERROR_LABEL): Changed to __syscall_error.
	(SYSCALL_ERROR_ERRNO): Removed.
	(SYSCALL_ERROR_HANDLER): Changed to empty.
	(SYSCALL_ERROR_HANDLER_TLS_STORE): Likewise.
	(__syscall_error): New prototype.
	[IS_IN (libc)] (INLINE_SYSCALL): New macro.
	(INLINE_SYSCALL_ERROR_RETURN_VALUE): Likewise.

2015-10-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19124]
	* sysdeps/x86_64/dl-trampoline.S [!HAVE_AVX512_ASM_SUPPORT]
	(_dl_runtime_resolve_avx512): Make it a hidden alias of
	_dl_runtime_resolve_avx.
	(_dl_runtime_profile_avx512): Make it a hidden alias of
	_dl_runtime_profile_avx.

2015-10-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/fpu/s_llround.c: Move to ....
	* sysdeps/powerpc/powerpc32/fpu/s_llround.c: ...here.
	* sysdeps/powerpc/fpu/s_llroundf.c: Move to ....
	* sysdeps/powerpc/powerpc32/fpu/s_llroundf.c: ...here.

	[BZ #16422]
	* sysdeps/powerpc/powerpc32/fpu/configure.ac (libc_cv_ppc_fctidz):
	New configure test.
	* sysdeps/powerpc/powerpc32/fpu/configure: Regenerated.
	* config.h.in [_LIBC] (HAVE_PPC_FCTIDZ): New macro.
	* sysdeps/powerpc/powerpc32/fpu/s_llrint.c: Include <limits.h>,
	<math_private.h> and <stdint.h>.
	(__llrint): Avoid conversions to long long int where those might
	raise spurious exceptions.
	* sysdeps/powerpc/powerpc32/fpu/s_llrintf.c: Include
	<math_private.h> and <stdint.h>.
	(__llrintf): Avoid conversions to long long int where those might
	raise spurious exceptions.

2015-10-12  Andreas Schwab  <schwab@suse.de>

	[BZ #18969]
	* debug/Makefile (LOCALES): Define.  Include gen-locales.mk.
	($(objpfx)tst-chk1.out): Depend on $(gen-locales).
	* iconvdata/Makefile (LOCALES): Define.  Include gen-locales.mk.
	($(objpfx)bug-iconv6.out, $(objpfx)tst-iconv7.out): Depend on
	$(gen-locales).
	* intl/Makefile (LOCALES): Define.  Include gen-locales.mk.
	($(objpfx)tst-codeset.out, $(objpfx)tst-gettext.out)
	($(objpfx)tst-gettext2.out, $(objpfx)tst-gettext3.out)
	($(objpfx)tst-gettext4.out, $(objpfx)tst-gettext5.out)
	($(objpfx)tst-gettext6.out, $(objpfx)tst-translit.out): Depend on
	$(gen-locales).
	* libio/Makefile (LOCALES): Define.  Include gen-locales.mk.
	($(objpfx)bug-ftell.out, $(objpfx)bug-ungetwc1.out)
	($(objpfx)bug-ungetwc2.out, $(objpfx)tst-fgetwc.out)
	($(objpfx)tst-fgetws.out, $(objpfx)tst-fopenloc.out)
	($(objpfx)tst-fputws.out, $(objpfx)tst-fseek.out)
	($(objpfx)tst-ftell-active-handler.out)
	($(objpfx)tst-ftell-append.out)
	($(objpfx)tst-ftell-partial-wide.out, $(objpfx)tst-setvbuf1.out)
	($(objpfx)tst-swscanf.out, $(objpfx)tst-ungetwc1.out)
	($(objpfx)tst-ungetwc2.out, $(objpfx)tst-widetext.out)
	($(objpfx)tst_wprintf2.out): Depend on $(gen-locales).
	* posix/Makefile (LOCALES): Define.  Include gen-locales.mk.
	($(objpfx)bug-regex1.out, $(objpfx)bug-regex4.out)
	($(objpfx)bug-regex5.out, $(objpfx)bug-regex6.out)
	($(objpfx)bug-regex17.out, $(objpfx)bug-regex18.out)
	($(objpfx)bug-regex19.out, $(objpfx)bug-regex20.out)
	($(objpfx)bug-regex22.out, $(objpfx)bug-regex23.out)
	($(objpfx)bug-regex25.out, $(objpfx)bug-regex26.out)
	($(objpfx)bug-regex30.out, $(objpfx)bug-regex32.out)
	($(objpfx)bug-regex33.out, $(objpfx)bug-regex34.out)
	($(objpfx)bug-regex35.out, $(objpfx)tst-fnmatch.out)
	($(objpfx)tst-fnmatch4.out, $(objpfx)tst-fnmatch5.out)
	($(objpfx)tst-regex.out, $(objpfx)tst-regex2.out)
	($(objpfx)tst-regexloc.out, $(objpfx)tst-rxspencer.out)
	($(objpfx)tst-rxspencer-no-utf8.out): Depend on $(gen-locales).
	* stdio-common/Makefile (LOCALES): Define.  Include gen-locales.mk.
	($(objpfx)bug14.out, $(objpfx)scanf13.out)
	($(objpfx)test-vfprintf.out, $(objpfx)tst-grouping.out)
	($(objpfx)tst-sprintf.out, $(objpfx)tst-sscanf.out)
	($(objpfx)tst-swprintf.out): Depend on $(gen-locales).
	* stdlib/Makefile (LOCALES): Define.  Include gen-locales.mk.
	($(objpfx)bug-strtod2.out, $(objpfx)testmb2.out)
	($(objpfx)tst-strtod.out, $(objpfx)tst-strtod3.out)
	($(objpfx)tst-strtod4.out, $(objpfx)tst-strtod5.out): Depend on
	$(gen-locales).
	* time/Makefile (LOCALES): Define.  Include gen-locales.mk.
	($(objpfx)tst-ftime_l.out, $(objpfx)tst-strptime.out): Depend on
	$(gen-locales).
	* wcsmbs/Makefile (LOCALES): Define.  Include gen-locales.mk.
	($(objpfx)tst-btowc.out, $(objpfx)tst-c16c32-1.out)
	($(objpfx)tst-mbrtowc.out, $(objpfx)tst-mbrtowc2.out)
	($(objpfx)tst-wcrtomb.out, $(objpfx)wcsmbs-tst1.out): Depend on
	$(gen-locales).
	* libio/tst_wprintf2.c (main): Use explicit locale.
	* wcsmbs/wcsmbs-tst1.c (main): Likewise.

2015-10-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurd-raise.c (_hurd_raise_signal): Return error returned by
	__msg_sig_post.
	* hurd/hurd/signal.h (_hurd_raise_signal): Add int return type.

2015-10-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/mips32/libm-test-ulps: Regenerated.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.

	* sysdeps/arm/libm-test-ulps: Regenerated.

	[BZ #15470]
	* sysdeps/arm/fix-fp-int-convert-overflow.h: New file.

	[BZ #16399]
	* sysdeps/generic/fix-fp-int-convert-overflow.h: New file.
	* sysdeps/ieee754/dbl-64/s_llrint.c: Include <fenv.h>, <limits.h>
	and <fix-fp-int-convert-overflow.h>.
	(__llrint) [FE_INVALID]: Force FE_INVALID exception as needed if
	FIX_DBL_LLONG_CONVERT_OVERFLOW.
	* sysdeps/ieee754/dbl-64/s_llround.c: Include <fenv.h>, <limits.h>
	and <fix-fp-int-convert-overflow.h>.
	(__llround) [FE_INVALID]: Force FE_INVALID exception as needed if
	FIX_DBL_LLONG_CONVERT_OVERFLOW.
	* sysdeps/ieee754/dbl-64/s_lrint.c: Include
	<fix-fp-int-convert-overflow.h>.
	(__lrint) [FE_INVALID]: Force FE_INVALID exception as needed if
	FIX_DBL_LLONG_CONVERT_OVERFLOW.
	* sysdeps/ieee754/dbl-64/s_lround.c: Include
	<fix-fp-int-convert-overflow.h>.
	(__lround) [FE_INVALID]: Force FE_INVALID exception as needed if
	FIX_DBL_LLONG_CONVERT_OVERFLOW.
	* sysdeps/ieee754/flt-32/s_llrintf.c: Include <fenv.h>, <limits.h>
	and <fix-fp-int-convert-overflow.h>.
	(__llrintf) [FE_INVALID]: Force FE_INVALID exception as needed if
	FIX_DBL_LLONG_CONVERT_OVERFLOW.
	* sysdeps/ieee754/flt-32/s_llroundf.c: Include <fenv.h>,
	<limits.h> and <fix-fp-int-convert-overflow.h>.
	(__llroundf) [FE_INVALID]: Force FE_INVALID exception as needed if
	FIX_DBL_LLONG_CONVERT_OVERFLOW.
	* sysdeps/ieee754/flt-32/s_lrintf.c: Include <fenv.h>, <limits.h>
	and <fix-fp-int-convert-overflow.h>.
	(__lrintf) [FE_INVALID]: Force FE_INVALID exception as needed if
	FIX_DBL_LLONG_CONVERT_OVERFLOW.
	* sysdeps/ieee754/flt-32/s_lroundf.c: Include <fenv.h>, <limits.h>
	and <fix-fp-int-convert-overflow.h>.
	(__lroundf) [FE_INVALID]: Force FE_INVALID exception as needed if
	FIX_DBL_LLONG_CONVERT_OVERFLOW.
	* sysdeps/mips/mips32/fpu/fix-fp-int-convert-overflow.h: New file.

2015-10-09  Carlos O'Donell  <carlos@redhat.com>

	[BZ #18589]
	* string/bug-strcoll2.c: Adjust copyright, and remove contributed by.
	* string/Makefile ($(objpfx)bug-strcoll2.out): Depend on
	$(gen-locales).

2015-10-09  Adhemerval Zanella  <adhemerval.zanella@linaro.org>
	    Phil Blundell <pb@pbcl.net>

	* nptl/Makefile (tests): Add tst-cancel26.c and tst-cancel27.c.
	* nptl/tst-cancel26.c: New file.
	* nptl/tst-cancel27.c: Likewise.

2015-10-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/s_llrint.S (__lrint): Add alias only if
	__ILP32__ isn't defined.
	(lrint): Likewise.
	* sysdeps/x86_64/fpu/s_llrintf.S (__lrintf): Likewise.
	(lrintf): Likewise.
	* sysdeps/x86_64/fpu/s_llrintl.S (__lrintl): Likewise.
	(lrintl): Likewise.
	* sysdeps/x86_64/x32/fpu/s_lrint.S: New file.
	* sysdeps/x86_64/x32/fpu/s_lrintf.S: Likewise.
	* sysdeps/x86_64/x32/fpu/s_lrintl.S: Likewise.

2015-10-09  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S

	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_timedwait.S: Remove
	file.
	* sysdeps/unix/sysv/linux/i386/pthread_cond_timedwait.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/pthread_cond_wait.S: Likewise.

2015-10-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/configure.ac (libc_cv_cc_novzeroupper): Remove
	configure test.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure.ac (libc_cv_cc_novzeroupper): Remove
	configure test.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/Makefile [$(config-cflags-novzeroupper) = yes]:
	Make code unconditional.

	* sysdeps/i386/configure.ac (libc_cv_cc_fma4): Remove configure
	test.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure.ac (libc_cv_cc_fma4): Remove configure
	test.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile [$(have-mfma4) = yes]:
	Make code unconditional.
	* sysdeps/x86_64/fpu/multiarch/e_asin.c [HAVE_FMA4_SUPPORT]:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c [HAVE_FMA4_SUPPORT]:
	Likewise.
	[!HAVE_FMA4_SUPPORT]: Remove conditional code.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c [HAVE_FMA4_SUPPORT]: Make
	code unconditional.
	[!HAVE_FMA4_SUPPORT]: Remove conditional code.
	* sysdeps/x86_64/fpu/multiarch/e_log.c [HAVE_FMA4_SUPPORT]: Make
	code unconditional.
	[!HAVE_FMA4_SUPPORT]: Remove conditional code.
	* sysdeps/x86_64/fpu/multiarch/e_pow.c [HAVE_FMA4_SUPPORT]: Make
	code unconditional.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c [HAVE_FMA4_SUPPORT]: Make
	code unconditional.
	[!HAVE_FMA4_SUPPORT]: Remove conditional code.
	* sysdeps/x86_64/fpu/multiarch/s_fma.c [HAVE_FMA4_SUPPORT]: Make
	code unconditional.
	[!HAVE_FMA4_SUPPORT]: Remove conditional code.
	* sysdeps/x86_64/fpu/multiarch/s_fmaf.c [HAVE_FMA4_SUPPORT]: Make
	code unconditional.
	[!HAVE_FMA4_SUPPORT]: Remove conditional code.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c [HAVE_FMA4_SUPPORT]: Make
	code unconditional.
	[!HAVE_FMA4_SUPPORT]: Remove conditional code.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c [HAVE_FMA4_SUPPORT]: Make
	code unconditional.
	[!HAVE_FMA4_SUPPORT]: Remove conditional code.
	* config.h.in (HAVE_FMA4_SUPPORT): Remove #undef.

	[BZ #19095]
	* sysdeps/ieee754/dbl-64/s_lrint.c (__lrint): Cast low part of
	mantissa to long int before shifting left.

2015-10-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19094]
	* sysdeps/ieee754/dbl-64/s_lrint.c: Include <fenv.h> and
	<limits.h>.
	(__lrint) [FE_INVALID || FE_INEXACT]: Force FE_INVALID exception
	when result overflows but exception would not result from cast.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c: Include <fenv.h> and
	<limits.h>.
	(__llrintl) [FE_INVALID || FE_INEXACT]: Force FE_INVALID exception
	when result overflows but exception would not result from cast.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c: Include <fenv.h> and
	<limits.h>.
	(__lrintl) [FE_INVALID || FE_INEXACT]: Force FE_INVALID exception
	when result overflows but exception would not result from cast.
	* sysdeps/ieee754/ldbl-96/s_llrintl.c: Include <fenv.h> and
	<limits.h>.
	(__llrintl) [FE_INVALID || FE_INEXACT]: Force FE_INVALID exception
	when result overflows but exception would not result from cast.
	* sysdeps/ieee754/ldbl-96/s_lrintl.c: Include <fenv.h> and
	<limits.h>.
	(__lrintl) [FE_INVALID || FE_INEXACT]: Force FE_INVALID exception
	when result overflows but exception would not result from cast.
	* math/libm-test.inc (lrint_test_data): Add more tests.
	(llrint_test_data): Likewise.

2015-10-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #18872]
	* stdio-common/Makefile ($(objpfx)tst-unbputc.out):
	Move out from under [$(run-built-tests) = yes] conditional.
	($(objpfx)tst-printf.out, $(objpfx)tst-printf-bz18872.c): Likewise.
	($(objpfx)tst-printf-bz18872-mem.out): Likewise.

2015-10-08  Carlos O'Donell  <carlos@redhat.com>

	[BZ #18589]
	* string/Makefile (tests): Add bug-strcoll2.
	(LOCALES): Add cs_CZ.UTF-8.
	* string/bug-strcoll2.c (test_cs_CZ): Fix typo in FAIL string.

	[BZ #18589]
	* string/bug-strcoll2.c: New file.
	* locale/categories.def: Revert commit
	f13c2a8dff2329c6692a80176262ceaaf8a6f74e.
	* locale/langinfo.h: Likewise.
	* locale/localeinfo.h: Likewise.
	* locale/C-collate.c: Likewise.
	* locale/programs/ld-collate.c (collate_output): Likewise.
	* string/strcoll_l.c (STRDIFF): Likewise.
	(STRCOLL): Likewise.
	* wcsmbs/wcscoll_l.c: Likewise.

2015-10-08  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (lround_test_data): Do not expect the absence
	of "inexact" for some tests with non-integer arguments.
	(llround_test_data): Likewise.

	* sysdeps/i386/configure.ac (libc_cv_cc_avx): Remove configure
	test.
	(libc_cv_cc_sse2avx): Likewise.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/i386/i686/multiarch/Makefile
	[$(subdir)$(config-cflags-avx) = mathyes]: Change conditional to
	[$(subdir) = math].
	* sysdeps/i386/i686/multiarch/s_fma-fma.c [HAVE_AVX_SUPPORT]: Make
	code unconditional.
	* sysdeps/i386/i686/multiarch/s_fma.c [HAVE_AVX_SUPPORT]:
	Likewise.
	* sysdeps/i386/i686/multiarch/s_fmaf-fma.c [HAVE_AVX_SUPPORT]:
	Likewise.
	* sysdeps/i386/i686/multiarch/s_fmaf.c [HAVE_AVX_SUPPORT]:
	Likewise.
	* sysdeps/x86_64/configure.ac (libc_cv_cc_avx): Remove configure
	test.
	(libc_cv_cc_sse2avx): Likewise.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/Makefile [$(config-cflags-avx) = yes]: Make code
	unconditional.
	* sysdeps/x86_64/dl-trampoline.h (_dl_runtime_profile)
	[HAVE_AVX_SUPPORT || HAVE_AVX512_ASM_SUPPORT]: Make code
	unconditional.
	(_dl_runtime_profile)
	[!(HAVE_AVX_SUPPORT || HAVE_AVX512_ASM_SUPPORT)]: Remove
	conditional code.
	* sysdeps/x86_64/fpu/multiarch/Makefile
	[$(config-cflags-sse2avx) = yes]: Make code unconditional.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c
	[HAVE_FMA4_SUPPORT || HAVE_AVX_SUPPORT]: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c
	[HAVE_FMA4_SUPPORT || HAVE_AVX_SUPPORT]: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c
	[HAVE_FMA4_SUPPORT || HAVE_AVX_SUPPORT]: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c
	[HAVE_FMA4_SUPPORT || HAVE_AVX_SUPPORT]: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_fma.c [HAVE_AVX_SUPPORT]:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_fmaf.c [HAVE_AVX_SUPPORT]:
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c
	[HAVE_FMA4_SUPPORT || HAVE_AVX_SUPPORT]: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c
	[HAVE_FMA4_SUPPORT || HAVE_AVX_SUPPORT]: Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S [HAVE_AVX_SUPPORT]: Likewise.
	* config.h.in (HAVE_AVX_SUPPORT): Remove #undef.
	(HAVE_SSE2AVX_SUPPORT): Likewise.

2015-10-07  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* stdio-common/tst-printf-bz18872.sh: Use attribute optimize
	instead of #pragma optimize.

2015-10-07  Carlos O'Donell  <carlos@redhat.com>

	[BZ #17195]
	* malloc/arena.c (heap_trim): Apply trim_treshold to top_chunck size,
	as is similarly done in systrim and _int_free already.

2015-10-08  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/configure.ac (mach_interface_list): Add task_notify.

2015-10-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19088]
	* sysdeps/ieee754/dbl-64/s_lround.c: Include <fenv.h> and
	<limits.h>.
	(__lround) [FE_INVALID]: Force FE_INVALID exception when result
	overflows but exception would not result from cast.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Include <fenv.h>
	and <limits.h>.
	(__lround) [FE_INVALID]: Force FE_INVALID exception when result
	overflows but exception would not result from cast.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c: Include <fenv.h> and
	<limits.h>.
	(__llroundl) [FE_INVALID]: Force FE_INVALID exception when result
	overflows but exception would not result from cast.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c: Include <fenv.h> and
	<limits.h>.
	(__lroundl) [FE_INVALID]: Force FE_INVALID exception when result
	overflows but exception would not result from cast.
	* sysdeps/ieee754/ldbl-96/s_llroundl.c: Include <fenv.h> and
	<limits.h>.
	(__llroundl) [FE_INVALID]: Force FE_INVALID exception when result
	overflows but exception would not result from cast.
	* sysdeps/ieee754/ldbl-96/s_lroundl.c: Include <fenv.h> and
	<limits.h>.
	(__lroundl) [FE_INVALID]: Force FE_INVALID exception when result
	overflows but exception would not result from cast.
	* math/libm-test.inc (lround_test_data): Add more tests.
	(llround_test_data): Likewise.

2015-10-07  Steve Ellcey  <sellcey@imgtec.com>

	* timezone/Makefile (CFLAGS-zic.c): Add -Wno-unused-variable.
	(CFLAGS-ialloc.c): Ditto.
	(CFLAGS-scheck.c): Ditto.

2015-10-07  Carlos O'Donell  <carlos@redhat.com>

	[BZ #19086]
	* manual/filesys.texi (Storage Allocation): Fix argument order for
	posix_fallocate64.

2015-10-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19085]
	* sysdeps/ieee754/ldbl-128/s_lrintl.c (__lrintl): Move test for
	exponent below 48 inside case for non-overflowing exponent.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c (__lroundl): Likewise.

2015-10-07  Florian Weimer  <fweimer@redhat.com>

	* iconvdata/cp737.h (from_idx): Add const.
	* iconvdata/cp775.h (from_idx): Likewise.

2015-10-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/mips64/Implies: Use ieee754/dbl-64/wordsize-64.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_issignaling.c
	(__issignaling) [HIGH_ORDER_BIT_IS_SET_FOR_SNAN]: Remove #error.

	[BZ #19079]
	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Restore previous
	file, conditioned on [!_LP64].
	* sysdeps/ieee754/dbl-64/wordsize-64/s_llround.c
	[!_LP64] (__lround): Do not define as function or alias.
	[!_LP64] (lround): Likewise.
	[!_LP64] (__lroundl): Likewise.
	[!_LP64] (lroundl): Likewise.
	* sysdeps/tile/sysdep.h (REGISTER_CAST_INT32_TO_INT64): Remove
	macro.
	* sysdeps/x86_64/x32/sysdep.h (REGISTER_CAST_INT32_TO_INT64):
	Likewise.

2015-10-06  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (lrint_test_data): Add more tests.
	(llrint_test_data): Likewise.
	(lround_test_data): Likewise.
	(llround_test_data): Likewise.

	* math/libm-test.inc (lrint_test_data): Add tests used for llrint.
	(llrint_test_data): Add tests used for lrint.

	* sysdeps/i386/configure.ac (libc_cv_cc_sse4): Remove configure
	test.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/i386/i686/multiarch/Makefile
	[$(config-cflags-sse4) = yes]: Make code unconditional.
	* sysdeps/i386/i686/multiarch/strcspn.S [HAVE_SSE4_SUPPORT]:
	Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S [HAVE_SSE4_SUPPORT]:
	Likewise.
	* sysdeps/x86_64/configure.ac (libc_cv_cc_sse4): Remove configure
	test.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/multiarch/Makefile [$(config-cflags-sse4) = yes]:
	Make code unconditional.
	* sysdeps/x86_64/multiarch/strcspn.S [HAVE_SSE4_SUPPORT]:
	Likewise.
	* sysdeps/x86_64/multiarch/strspn.S [HAVE_SSE4_SUPPORT]: Likewise.
	* config.h.in (HAVE_SSE4_SUPPORT): Remove #undef.

	* scripts/rpm2dynsym.sh: Remove file.

2015-10-06  Florian Weimer  <fweimer@redhat.com>

	* configure.ac (libc_cv_cxx_thread_local): Define.
	* configure: Regenerate.
	* config.make.in (have-cxx-thread_local): Define.
	* nptl/Makefile (CFLAGS-tst-thread_local1.o):
	(LDLIBS-tst-thread_local1): Define.
	(tests): Add tst-thread_local1.
	[have-cxx-thread_local != yes] (tests-unsupported): Add
	tst-thread_local1.
	* nptl/tst-thread_local1.cc: New file.

2015-10-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19078]
	* sysdeps/ieee754/ldbl-128ibm/w_expl.c (o_thres): Remove variable.
	(u_thres): Likewise.
	(__expl): Determine whether to call __kernel_standard_l based on
	value of result, not argument.

	* math/libm-test.inc (scalb_test_data): Add more expectations for
	the "inexact" exception.

	[BZ #19077]
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c (__ieee754_logl): Return
	0.0L for argument 1.0L.

	[BZ #19076]
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c (__log1pl): Divide by
	constant 0.0L when computing infinite result.

2015-10-06  Florian Weimer  <fweimer@redhat.com>

	[BZ #10432]
	* nis/nss_nis/nis-netgrp.c (_nss_nis_setnetgrent): Remove call to
	malloc_usable_size.

2015-10-06  Florian Weimer  <fweimer@redhat.com>

	[BZ #19018]
	* stdlib/cxa_thread_atexit_impl.c (__cxa_thread_atexit_impl):
	Mangle function pointer before storing it.
	(__call_tls_dtors): Demangle function pointer before calling it.

2015-10-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #19012]
	* iconv/gconv_db.c (gen_steps): Check for additional errors.
	Clean up on failure.

2015-10-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19071]
	* sysdeps/ieee754/ldbl-96/s_lroundl.c (__lroundl): Use unsigned
	long int variable to store possibly incremented high part of
	mantissa.
	* math/libm-test.inc (lround_test_data): Add tests used for
	llround.  Use [LONG_MAX > 0x7fffffff] consistently as condition
	for tests requiring 64-bit long.  Do not condition tests on
	[TEST_FLOAT] unnecessarily.
	(llround_test_data): Add tests used for lround.  Add another
	expectation for the "inexact" exception.  Do not condition tests
	on [TEST_FLOAT] unnecessarily.

	[BZ #887]
	[BZ #19049]
	[BZ #19050]
	* sysdeps/generic/fix-int-fp-convert-zero.h: New file.
	* sysdeps/ieee754/dbl-64/e_log10.c: Include
	<fix-int-fp-convert-zero.h>.
	(__ieee754_log10): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/ieee754/dbl-64/e_log2.c: Include
	<fix-int-fp-convert-zero.h>.
	(__ieee754_log2): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/ieee754/dbl-64/s_erf.c: Include
	<fix-int-fp-convert-zero.h>.
	(__erfc): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/ieee754/dbl-64/s_logb.c: Include
	<fix-int-fp-convert-zero.h>.
	(__logb): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/ieee754/flt-32/e_log10f.c: Include
	<fix-int-fp-convert-zero.h>.
	(__ieee754_log10f): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/ieee754/flt-32/e_log2f.c: Include
	<fix-int-fp-convert-zero.h>.
	(__ieee754_log2f): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/ieee754/flt-32/s_erff.c: Include
	<fix-int-fp-convert-zero.h>.
	(__erfcf): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/ieee754/flt-32/s_logbf.c: Include
	<fix-int-fp-convert-zero.h>.
	(__logbf): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Include
	<fix-int-fp-convert-zero.h>.
	(__erfcl): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c: Include
	<fix-int-fp-convert-zero.h>.
	(__logbl): Adjust signs as needed if FIX_INT_FP_CONVERT_ZERO.
	* sysdeps/powerpc/powerpc32/fpu/configure.ac: New file.
	* sysdeps/powerpc/powerpc32/fpu/configure: New generated file.
	* sysdeps/powerpc/powerpc32/fpu/fix-int-fp-convert-zero.h: New
	file.
	* config.h.in [_LIBC] (HAVE_PPC_FCFID): New macro.

2015-10-03  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.

2015-10-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19059]
	* math/s_nexttowardf.c (__nexttowardf): Do not return value from
	overflowing computation.
	* sysdeps/i386/fpu/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c (__nexttowardf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c (__nexttoward):
	Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c (__nexttoward):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-opt/s_nexttowardfd.c (__nldbl_nexttowardf):
	Likewise.
	* math/libm-test.inc (nexttoward_test_data): Add more tests.

	* nss/rewrite_field.c (__nss_rewrite_field): Use
	internal_function.
	* nss/valid_field.c (__nss_valid_field): Likewise.
	* nss/valid_list_field.c (__nss_valid_list_field): Likewise.

2015-10-02  Florian Weimer  <fweimer@redhat.com>

	[BZ #18724]
	* include/nss.h (NSS_INVALID_FIELD_CHARACTERS): Define.
	(__nss_invalid_field_characters, __nss_valid_field)
	(__nss_valid_list_field, __nss_rewrite_field): Declare.
	* nss/valid_field.c, nss/valid_list_field, nss/rewrite_field.c,
	tst-field.c: New file.
	* nss/Makefile (routines): Add valid_field, rewrite_field.
	(tests-static): Define unconditionally.
	(tests): Include tests-static.
	[build-static-nss] (tests-static): Use append.
	[build-static-nss] (tests): Remove modification.
	* nss/getent.c (print_group): Call putgrent.  Report error.
	(print_gshadow): Call putsgent.  Report error.
	(print_passwd): Call putpwent.  Report error.
	(print_shadow): Call putspent.  Report error.
	* include/pwd.h: Include <nss.h> instead of <nss/nss.h>.
	* pwd/pwd.h (putpwent): Remove incorrect nonnull attribute.
	* pwd/putpwent.c (putpwent): Use ISO function definition.  Check
	name, password, directory, shell fields for valid syntax.  Rewrite
	GECOS field to match syntax.
	* pwd/Makefile (tests): Add tst-putpwent.
	* pwd/tst-putpwent.c: New file.
	* grp/putgrent.c (putgrent): Convert to ISO function definition.
	Check grName, grpasswd, gr_mem fields for valid syntax.
	Change loop variable i to size_t.
	* grp/Makefile (tests): Add tst-putgrent.
	* grp/tst-putgrent.c: New file.
	* shadow/putspent.c (putspent): Check sp_namp, sp_pwdp fields for
	valid syntax.
	* shadow/Makefile (tests): Add tst-putspent.
	* shadow/tst-putspent.c: New file.
	* gshadow/putsgent.c (putsgent): Check sg_namp, sg_passwd, sg_adm,
	sg_mem fields for valid syntax.
	* gshadow/Makefile (tests): Add tst-putsgent.
	* gshadow/tst-putsgent.c: New file.

2015-10-01  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/strncpy.S: Added comments to some
	assembly instructions.

2015-10-01  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/strncpy.S: Remove or add register
	prefix from operands.

2015-10-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16347]
	[BZ #19046]
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Do not include
	<libc-internal.h>.
	(MAXLGM): Do not use diagnostic control macros.
	[LDBL_MANT_DIG == 106] (MAXLGM): Change value to overflow
	threshold for ldbl-128ibm.
	(__ieee754_lgammal_r): For large arguments, multiply by log - 1
	instead of multiplying by log then subtracting.
	* math/auto-libm-test-in: Add more tests of lgamma.
	* math/auto-libm-test-out: Regenerated.

	* math/libm-test.inc (TYPE_DECIMAL_DIG): New macro.
	(TYPE_HEX_DIG): Likewise.
	(print_float): Use TYPE_DECIMAL_DIG - 1 and TYPE_HEX_DIG - 1 as
	precisions when printing floating-point numbers.
	(check_float_internal): Likewise.

2015-09-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16620]
	* sysdeps/ieee754/ldbl-128ibm/e_exp10l.c (log10_high): Use value
	of log (10) rounded downward to 48 bits.
	(log10_low): Use corresponding low part of log (10).

	[BZ #19032]
	* sysdeps/i386/fpu/e_acosh.S (__ieee754_acosh): For arguments < 1,
	compute result as (x - x) / (x - x) not as 0 / 0.
	* sysdeps/i386/fpu/e_acoshf.S (__ieee754_acoshf): Likewise.
	* math/libm-test.inc (acosh_test_data): Add another test of acosh.

	* math/auto-libm-test-in: Add more tests of acos, acosh, asin,
	atan, atan2, atanh, cbrt, cos, cosh, erf, erfc, exp, exp10, exp2
	and expm1.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (acos_test_data): Add more tests.
	(asin_test_data): Likewise.
	(asinh_test_data): Likewise.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(atan2_test_data): Likewise.
	(cbrt_test_data): Likewise.
	(ceil_test_data): Likewise.
	(copysign_test_data): Likewise.
	(cos_test_data): Likewise.
	(cosh_test_data): Likewise.
	(erf_test_data): Likewise.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2015-09-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #19006]
	* sysdeps/unix/sysv/linux/i386/i486/libc-lowlevellock.S: Moved
	to ...
	* sysdeps/unix/sysv/linux/i386/libc-lowlevellock.S: Here.
	* sysdeps/unix/sysv/linux/i386/i486/lll_timedlock_wait.c: Moved
	to ...
	* sysdeps/unix/sysv/linux/i386/lll_timedlock_wait.c: Here.
	* sysdeps/unix/sysv/linux/i386/i486/lll_timedwait_tid.c: Moved
	to ...
	* sysdeps/unix/sysv/linux/i386/lll_timedwait_tid.c: Here.
	* sysdeps/unix/sysv/linux/i386/i486/lowlevellock.S: Moved to ...
	* sysdeps/unix/sysv/linux/i386/lowlevellock.S: Here.
	* sysdeps/unix/sysv/linux/i386/i486/lowlevelrobustlock.S: Moved
	to ...
	* sysdeps/unix/sysv/linux/i386/lowlevelrobustlock.S: Here.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_barrier_wait.S:
	Moved to ...
	* sysdeps/unix/sysv/linux/i386/pthread_barrier_wait.S: Here.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_broadcast.S:
	Moved to ...
	* sysdeps/unix/sysv/linux/i386/pthread_cond_broadcast.S: Here.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_signal.S: Moved
	to ...
	* sysdeps/unix/sysv/linux/i386/pthread_cond_signal.S: Here.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_timedwait.S:
	Moved to ...
	* sysdeps/unix/sysv/linux/i386/pthread_cond_timedwait.S: Here.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_wait.S: Moved
	to ...
	* sysdeps/unix/sysv/linux/i386/pthread_cond_wait.S: Here.
	* sysdeps/unix/sysv/linux/i386/i586/libc-lowlevellock.S:
	Removed.
	* sysdeps/unix/sysv/linux/i386/i586/lll_timedlock_wait.c:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/lll_timedwait_tid.c:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/lowlevelrobustlock.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_barrier_wait.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_broadcast.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_signal.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_timedwait.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_wait.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/libc-lowlevellock.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/lll_timedlock_wait.c:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/lll_timedwait_tid.c:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/lowlevelrobustlock.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_barrier_wait.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_broadcast.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_signal.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_wait.S:
	Likewise.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_timedwait.S:
	Replace ../i486/pthread_cond_timedwait.S with
	../pthread_cond_timedwait.S.

2015-09-30  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (acos_test_data): Refine expectations for
	errno and "inexact" exceptions.
	(acosh_test_data): Likewise.
	(asin_test_data): Likewise.
	(asinh_test_data): Likewise.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(atan2_test_data): Likewise.
	(cbrt_test_data): Likewise.
	(ceil_test_data): Likewise.
	(copysign_test_data): Likewise.
	(cosh_test_data): Likewise.
	(erf_test_data): Likewise.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	(fabs_test_data): Likewise.
	(floor_test_data): Likewise.
	(fma_test_data): Likewise.
	(fmax_test_data): Likewise.
	(fmin_test_data): Likewise.
	(fmod_test_data): Likewise.
	(fpclassify_test_data): Likewise.
	(frexp_test_data): Likewise.
	(hypot_test_data): Likewise.
	(ilogb_test_data): Likewise.
	(isgreater_test_data): Likewise.
	(isgreaterequal_test_data): Likewise.
	(isinf_test_data): Likewise.
	(isless_test_data): Likewise.
	(islessequal_test_data): Likewise.
	(islessgreater_test_data): Likewise.
	(isnan_test_data): Likewise.
	(isnormal_test_data): Likewise.
	(issignaling_test_data): Likewise.
	(isunordered_test_data): Likewise.
	(j0_test_data): Likewise.
	(j1_test_data): Likewise.
	(jn_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(lrint_test_data): Likewise.
	(llrint_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(logb_test_data): Likewise.
	(lround_test_data): Likewise.
	(llround_test_data): Likewise.
	(modf_test_data): Likewise.
	(nearbyint_test_data): Likewise.
	(nextafter_test_data): Likewise.
	(nexttoward_test_data): Likewise.
	(pow_test_data): Likewise.
	(remainder_test_data): Likewise.
	(remquo_test_data): Likewise.
	(rint_test_data): Likewise.
	(round_test_data): Likewise.
	(signbit_test_data): Likewise.
	(sinh_test_data): Likewise.
	(sqrt_test_data): Likewise.
	(tanh_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(trunc_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.
	(significand_test_data): Likewise.

2015-09-29  Carlos O'Donell  <carlos@redhat.com>

	* manual/filesys.texi (Storage Allocation): Document that
	posix_fallocate emulation fails when fd is open with O_WRONLY.

2015-09-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #19016]
	* sysdeps/generic/math_private.h (__x2y2m1f): Update comment to
	allow more cases with X^2 + Y^2 >= 0.5.
	* sysdeps/ieee754/dbl-64/x2y2m1.c (__x2y2m1): Likewise.  Add -1 as
	normal element in sum instead of special-casing based on values of
	arguments.
	* sysdeps/ieee754/dbl-64/x2y2m1f.c (__x2y2m1f): Update comment.
	* sysdeps/ieee754/ldbl-128/x2y2m1l.c (__x2y2m1l): Likewise.  Add
	-1 as normal element in sum instead of special-casing based on
	values of arguments.
	* sysdeps/ieee754/ldbl-128ibm/x2y2m1l.c (__x2y2m1l): Likewise.
	* sysdeps/ieee754/ldbl-96/x2y2m1.c [FLT_EVAL_METHOD != 0]
	(__x2y2m1): Update comment.
	* sysdeps/ieee754/ldbl-96/x2y2m1l.c (__x2y2m1l): Likewise.  Add -1
	as normal element in sum instead of special-casing based on values
	of arguments.
	* math/s_clog.c (__clog): Handle more cases using log1p without
	hypot.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/auto-libm-test-in: Add more tests of clog and clog10.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-09-28  Martin Sebor  <msebor@redhat.com>

	[BZ #18969]
	* string/Makefile (LOCALES): Define.
	(gen-locales.mk): Include.
	(test-strcasecmp.out, test-strncasecmp.out, tst-strxfrm.out)
	(tst-strxfrm2.out): Add deppendency on $(gen-locales).
	* string/tst-strxfrm2.c (do_test): Print the name of the locale
	on setlocale failure.

2015-09-26  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18985]
	* time/strftime_l.c (a_wkday, f_wkday, a_month, f_month): Range check.
	(__strftime_internal): Likewise.
	* time/tst-strftime.c (do_bz18985): New test.
	(do_test): Call it.

2015-09-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18956]
	* sysdeps/ieee754/flt-32/e_powf.c (__ieee754_powf): Add 0x00400000
	not 0x0040000 for high bit of mantissa.  Mask with 0xfffff000 when
	extracting high part.
	* math/auto-libm-test-in: Add another test of pow.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2015-09-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18825]
	* sysdeps/i386/fpu/i386-math-asm.h (FLT_NARROW_EVAL_UFLOW_NONNAN):
	New macro.
	(DBL_NARROW_EVAL_UFLOW_NONNAN): Likewise.
	(LDBL_CHECK_FORCE_UFLOW_NONNAN): Likewise.
	* sysdeps/i386/fpu/e_pow.S: Use DEFINE_DBL_MIN.
	(__ieee754_pow): Use DBL_NARROW_EVAL_UFLOW_NONNAN instead of
	DBL_NARROW_EVAL, reloading the PIC register as needed.
	* sysdeps/i386/fpu/e_powf.S: Use DEFINE_FLT_MIN.
	(__ieee754_powf): Use FLT_NARROW_EVAL_UFLOW_NONNAN instead of
	FLT_NARROW_EVAL.  Use separate return path for case when first
	argument is NaN.
	* sysdeps/i386/fpu/e_powl.S: Include <i386-math-asm.h>.  Use
	DEFINE_LDBL_MIN.
	(__ieee754_powl): Use LDBL_CHECK_FORCE_UFLOW_NONNAN, reloading the
	PIC register.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Use
	math_check_force_underflow_nonneg.
	* sysdeps/ieee754/flt-32/e_powf.c (__ieee754_powf): Force
	underflow for subnormal result.
	* sysdeps/ieee754/ldbl-128/e_powl.c (__ieee754_powl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Use
	math_check_force_underflow_nonneg.
	* sysdeps/x86/fpu/powl_helper.c (__powl_helper): Use
	math_check_force_underflow.
	* sysdeps/x86_64/fpu/x86_64-math-asm.h
	(LDBL_CHECK_FORCE_UFLOW_NONNAN): New macro.
	* sysdeps/x86_64/fpu/e_powl.S: Include <x86_64-math-asm.h>.  Use
	DEFINE_LDBL_MIN.
	(__ieee754_powl): Use LDBL_CHECK_FORCE_UFLOW_NONNAN.
	* math/auto-libm-test-in: Add more tests of pow.
	* math/auto-libm-test-out: Regenerated.

2015-09-25  Florian Weimer  <fweimer@redhat.com>

	* nss/bug17079.c (init_test_items): Add diagnostic for
	inconsistent entries.
	(test_buffer_size): Skip inconsistent entries.

2015-09-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13304]
	* sysdeps/m68k/coldfire/nofpu/s_fma.c: New file.
	* sysdeps/m68k/coldfire/nofpu/s_fmaf.c: Likewise.
	* sysdeps/m68k/coldfire/nofpu/sfp-machine.h: Likewise.

	[BZ #13304]
	* sysdeps/microblaze/s_fma.c: New file.
	* sysdeps/microblaze/s_fmaf.c: Likewise.
	* sysdeps/microblaze/sfp-machine.h: Likewise.

2015-09-25  Maciej W. Rozycki  <macro@imgtec.com>

	[BZ #17250]
	* elf/dl-support.c (_dl_main_map): Don't initialize l_flags_1
	member.

2015-09-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18803]
	* sysdeps/i386/fpu/e_hypot.S: Use DEFINE_DBL_MIN.
	(MO): New macro.
	(__ieee754_hypot) [PIC]: Load PIC register.
	(__ieee754_hypot): Use DBL_NARROW_EVAL_UFLOW_NONNEG instead of
	DBL_NARROW_EVAL.
	* sysdeps/ieee754/dbl-64/e_hypot.c (__ieee754_hypot): Use
	math_check_force_underflow_nonneg in case where result might be
	tiny.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c (__ieee754_hypotl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c (__ieee754_hypotl): Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c (__ieee754_hypot): Likewise.
	* math/auto-libm-test-in: Add more tests of hypot.
	* math/auto-libm-test-out: Regenerated.

2015-09-24  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/math_private.h (libc_fesetenv_mips): Mark cw as unused.

2015-09-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86_64/fpu/x86_64-math-asm.h: New file.
	* sysdeps/x86_64/fpu/e_exp2l.S: Include <x86_64-math-asm.h>.
	(ldbl_min): Replace with use of DEFINE_LDBL_MIN.
	(__ieee754_exp2l): Use LDBL_CHECK_FORCE_UFLOW_NONNEG_NAN.
	* sysdeps/x86_64/fpu/e_expl.S: Include <x86_64-math-asm.h>.
	[!USE_AS_EXPM1L] (cmin): Replace with use of DEFINE_LDBL_MIN.
	(IEEE754_EXPL): Use LDBL_CHECK_FORCE_UFLOW_NONNEG.

	* sysdeps/i386/fpu/e_atanh.S (__ieee754_atanh) [PIC]: Use
	LOAD_PIC_REG.

	* sysdeps/i386/fpu/i386-math-asm.h (DEFINE_LDBL_MIN): New macro.
	(FLT_CHECK_FORCE_UFLOW): Likewise.
	(DBL_CHECK_FORCE_UFLOW): Likewise.
	(FLT_CHECK_FORCE_UFLOW_NARROW): Likewise.
	(DBL_CHECK_FORCE_UFLOW_NARROW): Likewise.
	(LDBL_CHECK_FORCE_UFLOW_NONNEG_NAN): Likewise.
	(FLT_CHECK_FORCE_UFLOW_NONNAN): Likewise.
	(DBL_CHECK_FORCE_UFLOW_NONNAN): Likewise.
	(FLT_CHECK_FORCE_UFLOW_NONNEG): Likewise.
	(DBL_CHECK_FORCE_UFLOW_NONNEG): Likewise.
	(LDBL_CHECK_FORCE_UFLOW_NONNEG): Likewise.
	* sysdeps/i386/fpu/e_asin.S: Include <i386-math-asm.h>.
	(dbl_min): Replace with use of DEFINE_DBL_MIN.
	(__ieee754_asin): Use DBL_CHECK_FORCE_UFLOW.
	* sysdeps/i386/fpu/e_asinf.S: Include <i386-math-asm.h>.
	(flt_min): Replace with use of DEFINE_FLT_MIN.
	(__ieee754_asinf): Use FLT_CHECK_FORCE_UFLOW.
	* sysdeps/i386/fpu/e_atan2.S: Include <i386-math-asm.h>.
	(dbl_min): Replace with use of DEFINE_DBL_MIN.
	(__ieee754_atan2): Use DBL_CHECK_FORCE_UFLOW_NARROW.
	* sysdeps/i386/fpu/e_atan2f.S: Include <i386-math-asm.h>.
	(flt_min): Replace with use of DEFINE_FLT_MIN.
	(__ieee754_atan2f): Use FLT_CHECK_FORCE_UFLOW_NARROW.
	* sysdeps/i386/fpu/e_atanh.S: Include <i386-math-asm.h>.
	(dbl_min): Replace with use of DEFINE_DBL_MIN.
	(__ieee754_atanh): Use DBL_CHECK_FORCE_UFLOW_NONNEG.
	* sysdeps/i386/fpu/e_atanhf.S: Include <i386-math-asm.h>.
	(flt_min): Replace with use of DEFINE_FLT_MIN.
	(__ieee754_atanhf): Use FLT_CHECK_FORCE_UFLOW_NONNEG.
	* sysdeps/i386/fpu/e_exp2l.S: Include <i386-math-asm.h>.
	(ldbl_min): Replace with use of DEFINE_LDBL_MIN.
	(__ieee754_exp2l): Use LDBL_CHECK_FORCE_UFLOW_NONNEG_NAN.
	* sysdeps/i386/fpu/e_expl.S: Include <i386-math-asm.h>.
	[!USE_AS_EXPM1L] (cmin): Replace with use of DEFINE_LDBL_MIN.
	(IEEE754_EXPL): Use LDBL_CHECK_FORCE_UFLOW_NONNEG.
	* sysdeps/i386/fpu/s_atan.S: Include <i386-math-asm.h>.
	(dbl_min): Replace with use of DEFINE_DBL_MIN.
	(__atan): Use DBL_CHECK_FORCE_UFLOW.
	* sysdeps/i386/fpu/s_atanf.S: Include <i386-math-asm.h>.
	(flt_min): Replace with use of DEFINE_FLT_MIN.
	(__atanf): Use FLT_CHECK_FORCE_UFLOW.
	* sysdeps/i386/fpu/s_expm1.S: Include <i386-math-asm.h>.
	(dbl_min): Replace with use of DEFINE_DBL_MIN.
	(__expm1): Use DBL_CHECK_FORCE_UFLOW.  Move underflow check after
	main computation.
	* sysdeps/i386/fpu/s_expm1f.S: Include <i386-math-asm.h>.
	(flt_min): Replace with use of DEFINE_FLT_MIN.
	(__expm1f): Use FLT_CHECK_FORCE_UFLOW.  Move underflow check after
	main computation.
	* sysdeps/i386/fpu/s_log1p.S: Include <i386-math-asm.h>.
	(dbl_min): Replace with use of DEFINE_DBL_MIN.
	(MO): New macro.
	(__log1p): Use MO.  Use DBL_CHECK_FORCE_UFLOW_NONNAN.
	* sysdeps/i386/fpu/s_log1pf.S: Include <i386-math-asm.h>.
	(flt_min): Replace with use of DEFINE_FLT_MIN.
	(MO): New macro.
	(__log1pf): Use MO.  Use FLT_CHECK_FORCE_UFLOW_NONNAN.
	* sysdeps/i386/fpu/s_log1pl.S (MO): New macro.
	(__log1pl): Use MO.

	[BZ #19003]
	* sysdeps/x86_64/fpu/multiarch/Makefile (CFLAGS-e_pow-fma4.c): Add
	$(config-cflags-nofma).

2015-09-24  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Regenerated.

2015-09-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/flt-32/e_exp2f.c (TWOM100): Remove volatile.
	(TWO127): Likewise.

	* sysdeps/generic/math_private.h (fabs_tg): New macro.
	(min_of_type): Likewise.
	(math_check_force_underflow): Likewise.
	(math_check_force_underflow_nonneg): Likewise.
	(math_check_force_underflow_complex): Likewise.
	* math/e_exp2l.c (__ieee754_exp2l): Use
	math_check_force_underflow_nonneg.
	* math/k_casinh.c (__kernel_casinh): Likewise.
	* math/k_casinhf.c (__kernel_casinhf): Likewise.
	* math/k_casinhl.c (__kernel_casinhl): Likewise.
	* math/s_catan.c (__catan): Use
	math_check_force_underflow_complex.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* math/s_ccosh.c (__ccosh): Likewise.
	* math/s_ccoshf.c (__ccoshf): Likewise.
	* math/s_ccoshl.c (__ccoshl): Likewise.
	* math/s_cexp.c (__cexp): Likewise.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/s_clog.c (__clog): Use math_check_force_underflow_nonneg.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/s_csin.c (__csin): Use math_check_force_underflow_complex.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/s_csqrt.c (__csqrt): Use math_check_force_underflow.
	* math/s_csqrtf.c (__csqrtf): Likewise.
	* math/s_csqrtl.c (__csqrtl): Likewise.
	* math/s_ctan.c (__ctan): Use math_check_force_underflow_complex.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanh.c (__ctanh): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* stdlib/strtod_l.c (round_and_return): Use math_force_eval
	instead of volatile.
	* sysdeps/ieee754/dbl-64/e_asin.c (__ieee754_asin): Use
	math_check_force_underflow.
	* sysdeps/ieee754/dbl-64/e_atanh.c (__ieee754_atanh): Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c (__ieee754_exp): Do not use
	volatile when forcing underflow.
	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Use
	math_check_force_underflow_nonneg.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c (__ieee754_gamma_r):
	Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c (__ieee754_j1): Use
	math_check_force_underflow.
	* sysdeps/ieee754/dbl-64/e_jn.c (__ieee754_jn): Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c (__ieee754_sinh): Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c (__asinh): Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c (atan): Use
	math_check_force_underflow_nonneg.
	* sysdeps/ieee754/dbl-64/s_erf.c (__erf): Use
	math_check_force_underflow.
	* sysdeps/ieee754/dbl-64/s_expm1.c (__expm1): Likewise.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Use math_force_eval
	instead of volatile.
	* sysdeps/ieee754/dbl-64/s_log1p.c (__log1p): Use
	math_check_force_underflow.
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Use
	math_check_force_underflow_nonneg.
	* sysdeps/ieee754/dbl-64/s_tanh.c (__tanh): Use
	math_check_force_underflow.
	* sysdeps/ieee754/flt-32/e_asinf.c (__ieee754_asinf): Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c (__ieee754_atanhf): Likewise.
	* sysdeps/ieee754/flt-32/e_exp2f.c (__ieee754_exp2f): Use
	math_check_force_underflow_nonneg.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c (__ieee754_gammaf_r):
	Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c (__ieee754_j1f): Use
	math_check_force_underflow.
	* sysdeps/ieee754/flt-32/e_jnf.c (__ieee754_jnf): Likewise.
	* sysdeps/ieee754/flt-32/e_sinhf.c (__ieee754_sinhf): Likewise.
	* sysdeps/ieee754/flt-32/k_sinf.c (__kernel_sinf): Likewise.
	* sysdeps/ieee754/flt-32/k_tanf.c (__kernel_tanf): Likewise.
	* sysdeps/ieee754/flt-32/s_asinhf.c (__asinhf): Likewise.
	* sysdeps/ieee754/flt-32/s_atanf.c (__atanf): Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c (__erff): Likewise.
	* sysdeps/ieee754/flt-32/s_expm1f.c (__expm1f): Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c (__log1pf): Likewise.
	* sysdeps/ieee754/flt-32/s_tanhf.c (__tanhf): Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c (__ieee754_asinl): Likewise.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c (__ieee754_atanhl):
	Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c (__ieee754_expl): Use
	math_check_force_underflow_nonneg.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c (__ieee754_gammal_r):
	Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_j1l): Use
	math_check_force_underflow.
	* sysdeps/ieee754/ldbl-128/e_jnl.c (__ieee754_jnl): Likewise.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c (__ieee754_sinhl): Likewise.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c (__kernel_sincosl):
	Likewise.
	* sysdeps/ieee754/ldbl-128/k_sinl.c (__kernel_sinl): Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c (__kernel_tanl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c (__asinhl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_atanl.c (__atanl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c (__erfl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_expm1l.c (__expm1l): Likewise.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Use math_force_eval
	instead of volatile.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c (__log1pl): Use
	math_check_force_underflow.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c (__tanhl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c (__ieee754_asinl): Use
	math_check_force_underflow.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c (__ieee754_atanhl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c (__ieee754_gammal_r):
	Use math_check_force_underflow_nonneg.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_jnl): Use
	math_check_force_underflow.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c (__ieee754_sinhl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c (__kernel_sincosl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c (__kernel_sinl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c (__kernel_tanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c (__asinhl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c (__atanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c (__erfl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c (__tanhl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c (__ieee754_asinl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c (__ieee754_atanhl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c (__ieee754_gammal_r): Use
	math_check_force_underflow_nonneg.
	* sysdeps/ieee754/ldbl-96/e_j1l.c (__ieee754_j1l): Use
	math_check_force_underflow.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_jnl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_sinhl.c (__ieee754_sinhl): Likewise.
	* sysdeps/ieee754/ldbl-96/k_sinl.c (__kernel_sinl): Likewise.
	* sysdeps/ieee754/ldbl-96/k_tanl.c (__kernel_tanl): Use
	math_check_force_underflow_nonneg.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c (__asinhl): Use
	math_check_force_underflow.
	* sysdeps/ieee754/ldbl-96/s_erfl.c (__erfl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Use math_force_eval
	instead of volatile.
	* sysdeps/ieee754/ldbl-96/s_tanhl.c (__tanhl): Use
	math_check_force_underflow.

	* math/s_nexttowardf.c (__nexttowardf): Use math_narrow_eval.
	* stdlib/strtod_l.c: Include <math_private.h>.
	(overflow_value): Use math_narrow_eval.
	(underflow_value): Likewise.
	* sysdeps/i386/fpu/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c (__nexttowardf): Likewise.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c (gamma_positive): Likewise.
	(__ieee754_gamma_r): Likewise.
	* sysdeps/ieee754/dbl-64/gamma_productf.c (__gamma_productf):
	Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c (__kernel_rem_pio2):
	Likewise.
	* sysdeps/ieee754/dbl-64/lgamma_neg.c (__lgamma_neg): Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c (__erfc): Likewise.
	* sysdeps/ieee754/dbl-64/s_llrint.c (__llrint): Likewise.
	* sysdeps/ieee754/dbl-64/s_lrint.c (__lrint): Likewise.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c (gammaf_positive): Likewise.
	(__ieee754_gammaf_r): Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c (__kernel_rem_pio2f):
	Likewise.
	* sysdeps/ieee754/flt-32/lgamma_negf.c (__lgamma_negf): Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c (__erfcf): Likewise.
	* sysdeps/ieee754/flt-32/s_llrintf.c (__llrintf): Likewise.
	* sysdeps/ieee754/flt-32/s_lrintf.c (__lrintf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c (__llrintl): Do not use
	volatile.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c (__lrintl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c (__nexttoward): Use
	math_narrow_eval.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c (__nexttoward):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-96/gamma_product.c (__gamma_product):
	Likewise.
	* sysdeps/ieee754/ldbl-96/s_llrintl.c (__llrintl): Do not use
	volatile.
	* sysdeps/ieee754/ldbl-96/s_lrintl.c (__lrintl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c (__nexttoward): Use
	math_narrow_eval.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-opt/s_nexttowardfd.c (__nldbl_nexttowardf):
	Likewise.

2015-09-22  H.J. Lu  <hongjiu.lu@intel.com>

	* nptl/Versions: Remove ignored symbols.

2015-09-22  Florian Weimer  <fweimer@redhat.com>

	* nss/bug17079.c: Renamed from nss/bug18287.c.  Add description.
	* nss/Makefile (tests): Update.

2015-09-22  Florian Weimer  <fweimer@redhat.com>

	* nss/bug18287.c: New file.
	* nss/Makefile (tests): Add bug18287.

2015-09-22  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* mach/Versions (__mach_host_self_): Add symbol.

2015-09-21  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/mmap.c (__mmap): Use __vm_page_size instead of
	vm_page_size.

2015-09-19  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Really fix sysdeps/i386/fpu/s_scalbn.S build

	* math/Versions (libc: GLIBC_2_20): New (empty) version set.
	(libc: GLIBC_2_22): Remove unused version set.

2015-09-18  Mike Frysinger  <vapier@gentoo.org>

	* config.make.in (enable-timezone-tools): New variable.
	* configure.ac (AC_ARG_ENABLE(timezone-tools)): New configure flag.
	(enable_timezone_tools): Export to generated files.
	* configure: Regenerate.
	* INSTALL: Regenerate.
	* manual/install.texi (--disable-timezone-tools): Document new flag.
	* timezone/Makefile (install-sbin, install-bin-script): Wrap in a
	ifeq ($(enable-timezone-tools),yes) check.

2015-09-18  Joseph Myers  <joseph@codesourcery.com>

	* timezone/Makefile: Revert previous change.

	[BZ #18980]
	* sysdeps/i386/fpu/i386-math-asm.h (DEFINE_FLT_MIN): New macro.
	(DEFINE_DBL_MIN): Likewise.
	(FLT_NARROW_EVAL_UFLOW_NONNEG_NAN): Likewise.
	(DBL_NARROW_EVAL_UFLOW_NONNEG_NAN): Likewise.
	(FLT_NARROW_EVAL_UFLOW_NONNEG): Likewise.
	(DBL_NARROW_EVAL_UFLOW_NONNEG): Likewise.
	* sysdeps/i386/fpu/e_exp.S: Include <i386-math-asm.h>.
	(dbl_min): Replace with use of DEFINE_DBL_MIN.
	(__ieee754_exp): Use DBL_NARROW_EVAL_UFLOW_NONNEG_NAN.
	(__exp_finite): Use DBL_NARROW_EVAL_UFLOW_NONNEG.
	* sysdeps/i386/fpu/e_exp10.S: Include <i386-math-asm.h>.
	(dbl_min): Replace with use of DEFINE_DBL_MIN.
	(__ieee754_exp10): Use DBL_NARROW_EVAL_UFLOW_NONNEG_NAN.
	* sysdeps/i386/fpu/e_exp10f.S: Include <i386-math-asm.h>.
	(flt_min): Replace with use of DEFINE_FLT_MIN.
	(__ieee754_exp10f): Use FLT_NARROW_EVAL_UFLOW_NONNEG_NAN.
	* sysdeps/i386/fpu/e_exp2.S: Include <i386-math-asm.h>.
	(dbl_min): Replace with use of DEFINE_DBL_MIN.
	(__ieee754_exp2): Use DBL_NARROW_EVAL_UFLOW_NONNEG_NAN.
	* sysdeps/i386/fpu/e_exp2f.S: Include <i386-math-asm.h>.
	(flt_min): Replace with use of DEFINE_FLT_MIN.
	(__ieee754_exp2f): Use FLT_NARROW_EVAL_UFLOW_NONNEG_NAN.
	* sysdeps/i386/fpu/e_expf.S: Include <i386-math-asm.h>.
	(flt_min): Replace with use of DEFINE_FLT_MIN.
	(__ieee754_expf): Use FLT_NARROW_EVAL_UFLOW_NONNEG_NAN.
	(__expf_finite): Use FLT_NARROW_EVAL_UFLOW_NONNEG.
	* sysdeps/i386/fpu/e_hypot.S: Include <i386-math-asm.h>.
	(__ieee754_hypot): Use DBL_NARROW_EVAL.
	* sysdeps/i386/fpu/e_hypotf.S: Include <i386-math-asm.h>.
	(__ieee754_hypotf): Use FLT_NARROW_EVAL.
	* sysdeps/i386/fpu/e_pow.S: Include <i386-math-asm.h>.
	(__ieee754_pow): Use DBL_NARROW_EVAL.
	* sysdeps/i386/fpu/e_powf.S: Include <i386-math-asm.h>.
	(__ieee754_powf): Use FLT_NARROW_EVAL.
	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S
	(__ieee754_expf_sse2): Convert double-precision result to single
	precision.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2015-09-18  Wilco Dijkstra  <wdijkstr@arm.com>

	* timezone/Makefile: Ignore unused variable errors due to private.h
	(time_t_min) and (time_t_max).
	* timezone/private.h (time_t_min): Revert removal.  (time_t_max):
	Likewise.

2015-09-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18981]
	* sysdeps/i386/fpu/i386-math-asm.h: New file.
	* sysdeps/i386/fpu/e_scalb.S: Include <i386-math-asm.h>.
	(__ieee754_scalb): Use DBL_NARROW_EVAL.
	* sysdeps/i386/fpu/e_scalbf.S: Include <i386-math-asm.h>.
	(__ieee754_scalbf): Use FLT_NARROW_EVAL.
	* sysdeps/i386/fpu/s_scalbn.S: Include <i386-math-asm.h>.
	(__scalbn): Use DBL_NARROW_EVAL.
	* sysdeps/i386/fpu/s_scalbnf.S: Include <i386-math-asm.h>.
	(__scalbnf): Use FLT_NARROW_EVAL.

2015-09-18  Wilco Dijkstra  <wdijkstr@arm.com>

	* math/w_tgamma.c (__ieee754_gamma_r): Use explicit sign check.
	* math/w_tgammaf.c (__ieee754_gammaf_r): Likewise.
	* math/w_tgammal.c (__ieee754_gammal_r): Likewise.
	* stdio-common/printf_fp.c (___printf_fp):
	Use signbit to get the sign. Use isinf macro to allow inlining.
	* stdio-common/printf_fphex.c (__printf_fphex): Likewise.
	* stdio-common/printf_size.c (__printf_size): Likewise.

2015-09-18  Mike Frysinger  <vapier@gentoo.org>

	* timezone/Makefile ($(testdata)/XT%): Call $(make-target-directory).

2015-09-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18980]
	* sysdeps/generic/math_private.h: Include <float.h>.
	(math_narrow_eval): New macro.
	[FLT_EVAL_METHOD != 0] (excess_precision): Likewise.
	* sysdeps/ieee754/dbl-64/e_cosh.c (__ieee754_cosh): Use
	math_narrow_eval on overflowing return value.
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c (__ieee754_lgamma_r):
	Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c (__ieee754_sinh): Likewise.
	* sysdeps/ieee754/flt-32/e_coshf.c (__ieee754_coshf): Likewise.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c (__ieee754_lgammaf_r):
	Likewise.
	* sysdeps/ieee754/flt-32/e_sinhf.c (__ieee754_sinhf): Likewise.

2015-09-18  Wilco Dijkstra  <wdijkstr@arm.com>

	* include/math.h: Remove __isinf_ns, __isinf_nsf, __isinf_nsl.
	* math/Makefile: Remove isinf_ns.c.
	* math/divtc3.c (__divtc3): Replace __isinf_nsl with isinf.
	* math/multc3.c (__multc3): Likewise.
	* math/s_casin.c (__casin): Likewise.
	* math/s_casinf.c (__casinf): Likewise.
	* math/s_casinl.c (__casinl): Likewise.
	* math/s_cproj.c (__cproj): Likewise.
	* math/s_cprojf.c (__cprojf): Likewise.
	* math/s_cprojl.c (__cprofl): Likewise.
	* math/s_ctan.c (__ctan): Likewise.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanh.c (__ctanh): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/w_fmod.c (__fmod): Likewise.
	* math/w_fmodf.c (__fmodf): Likewise.
	* math/w_fmodl.c (_fmodl): Likewise.
	* math/w_remainder.c (__remainder): Likewise.
	* math/w_remainderf.c (__remainderf): Likewise.
	* math/w_remainderl.c (__remainderl): Likewise.
	* math/w_scalb.c (__scalb): Likewise.
	* math/w_scalbf.c (__scalbf): Likewise.
	* math/w_scalbl.c (__scalbl): Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf_ns.c: Deleted file.
	* sysdeps/ieee754/dbl-64/s_sincos.c (__sincos): Replace __isinf_ns
	with isinf.
	* sysdeps/ieee754/dbl-64/wordsize-64/math_private.h: Deleted file.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf_ns.c: Deleted file.
	* sysdeps/ieee754/flt-32/e_exp2f.c (__ieee754_exp2f): Replace
	__isinf_nsf with isinf.
	* sysdeps/ieee754/flt-32/math_private.h: Deleted file.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: Deleted file.
	* sysdeps/ieee754/ldbl-128/s_isinf_nsl.c: Deleted file.
	* sysdeps/ieee754/ldbl-128/s_sincosl.c (__sincosl): Replace __isinf_nsl
	with isinf.
	* sysdeps/ieee754/ldbl-128ibm/s_cprojl.c(__cprojll): Replace
	__isinf_nsl with isinf.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c(__ctanl): Replace __isinf_nsl
	with isinf.
	* sysdeps/ieee754/ldbl-128ibm/s_isinf_nsl.c: Deleted file.
	* sysdeps/ieee754/ldbl-128ibm/s_sincosl.c (__sincosl): Replace
	__isinf_nsl with isinf.
	* sysdeps/ieee754/ldbl-96/s_isinf_nsl.c: Deleted file.
	* sysdeps/ieee754/ldbl-96/s_sincosl.c (__sincosl): Replace __isinf_nsl
	with isinf.

2015-09-18  Wilco Dijkstra  <wdijkstr@arm.com>

	* resolv/base64.c (rcsid): Remove unused static.
	* sysdeps/ieee754/dbl-64/atnat2.h (qpi1): Remove unused
	static.  (tqpi1): Likewise.
	* sysdeps/ieee754/dbl-64/uexp.h (one): Likewise.
	* sysdeps/ieee754/dbl-64/upow.h (sqrt_2): Likewise.
	* sysdeps/ieee754/flt-32/e_log10f.c (one): Likewise.
	* sysdeps/ieee754/flt-32/s_cosf.c (one): Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c (zero): Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c (half): Likewise.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c (maxlog): Likewise.
	* timezone/private.h (time_t_min): Likewise.  (time_t_max):
	Likewise.

2015-09-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/nptl/jmp-unwind.c: Include <libc-lock.h> instead of
	<nptl/pthreadP.h>.
	(_longjmp_unwind): Use __libc_ptf_call.
	* sysdeps/unix/sysv/linux/s390/jmp-unwind.c: Likewise.

2015-09-18  David Lamparter  <equinox-gentoo@diac24.net>

	* sysdeps/arm/setjmp.S: Change PIC to SHARED.
	* sysdeps/arm/__longjmp.S: Likewise.

2015-09-18  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/ieee754/dbl-64/s_signbit.c (__signbit):
	Use __builtin_signbit.
	* sysdeps/ieee754/flt-32/s_signbitf.c (__signbitf):
	Use __builtin_signbitf.
	* sysdeps/ieee754/ldbl-128/s_signbitl.c (__signbitl):
	Use __builtin_signbitl.
	* sysdeps/ieee754/ldbl-128ibm/s_signbitl.c (___signbitl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_signbitl.c (__signbitl): Likewise.

2015-09-18  Wilco Dijkstra  <wdijkstr@arm.com>

	[BZ #15367]
	[BZ #17441]

	* math/Makefile: Build test-snan.c with -fsignaling-nans.
	* math/math.h (fpclassify): Use __builtin_fpclassify when
	available.  (signbit): Use __builtin_signbit(f/l).
	(isfinite): Use__builtin_isfinite.  (isnormal): Use
	__builtin_isnormal.  (isnan): Use __builtin_isnan.
	(isinf): Use __builtin_isinf_sign.

2015-09-18  Wilco Dijkstra  <wdijkstr@arm.com>

	* benchtests/Makefile: Add bench-math-inlines, link with libm.
	* benchtests/bench-math-inlines.c: New benchmark.
	* benchtests/bench-util.h: New file.
	* benchtests/bench-util.c: New file.
	* benchtests/bench-skeleton.c: Add include of bench-util.c/h.

2015-09-18  Carlos O'Donell  <carlos@redhat.com>

	* elf/tst-dlmopen1.c: Define TEST_SO.
	(do_test): Use TEST_SO.

	* elf/dl-load.c: Include libc-internal.h.
	(_dl_map_object_from_fd): Use ALIGN_UP and ALIGN_DOWN.

2015-09-18  Vincent Bernat  <vincent@bernat.im>

	[BZ #17887]
	* time/strptime_l.c (__strptime_internal): Make %z accept
	[+-]HH:MM time zones.

2015-09-18  Vincent Bernat  <vincent@bernat.im>

	[BZ #17886]
	* time/strptime_l.c (__strptime_internal): Make %z accept Z as a
	valid time zone.

2015-09-17  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/alpha/Makefile (CFLAGS-fdatasync.c): Delete.
	* sysdeps/unix/sysv/linux/alpha/fdatasync.c: Delete.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_FDATASYNC): Delete.

2015-09-17  Joseph Myers  <joseph@codesourcery.com>

	* conform/linknamespace.pl: Require weak undefined symbols to be
	in the standard namespace.
	(%strong_syms): Rename to %seen_syms.
	(%strong_seen): Rename to %seen_where.

2015-09-17  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18970]
	* misc/error.c (error): Replace pthread_setcancelstate with
	__pthread_setcancelstate.
	(error_at_line): Likewise.
	* posix/wordexp.c (parse_comm): Likewise.
	* stdlib/fmtmsg.c (fmtmsg): Likewise.
	* nptl/forward.c (pthread_setcancelstate): Renamed to ...
	(__pthread_setcancelstate): This.
	(pthread_setcancelstate): Add an alias.
	* nptl/nptl-init.c (pthread_functions): Replace
	ptr_pthread_setcancelstate with ptr___pthread_setcancelstate.
	* sysdeps/nptl/pthread-functions.h (pthread_functions): Likewise.
	* nptl/pthreadP.h (__pthread_setcancelstate): Mark it with
	hidden_proto.
	* nptl/pthread_setcancelstate.c (__pthread_setcancelstate): Mark
	it with hidden_def.
	* sysdeps/nptl/libc-lockP.h (__pthread_setcancelstate): New.
	(pthread_setcancelstate): Renamed to ...
	(__pthread_setcancelstate): This.
	* sysdeps/unix/sysv/linux/fatal-prepare.h (FATAL_PREPARE): Use
	__libc_ptf_call with __pthread_setcancelstate.

2015-09-17  Joseph Myers  <joseph@codesourcery.com>
	    Andreas Schwab  <schwab@suse.de>

	[BZ #17118]
	* math/s_ctan.c (__ctan): Determine sign of zero real part of
	result when imaginary part of argument is infinite using sine and
	cosine.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/s_ctanh.c (__ctanh): Determine sign of zero imaginary part
	of result when real part of argument is infinite using sine and
	cosine.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/libm-test.inc (ctan_test_data): Add more tests of ctan.
	(ctanh_test_data): Add more tests of ctanh.

2015-09-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15384]
	* sysdeps/ieee754/dbl-64/s_finite.c (FINITE): Use same constant as
	bit-mask as in subtraction.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c (__finite):
	Likewise.
	* sysdeps/ieee754/flt-32/s_finitef.c (FINITEF): Likewise.
	* sysdeps/ieee754/ldbl-128/s_finitel.c (__finitel): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_finitel.c (__finitel): Likewise.

	[BZ #18951]
	* sysdeps/ieee754/dbl-64/e_gamma_r.c (__ieee754_gamma_r): Force
	underflow exception for small results.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c (__ieee754_gammaf_r):
	Likewise.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c (__ieee754_gammal_r):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c (__ieee754_gammal_r):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c (__ieee754_gammal_r):
	Likewise.
	* math/auto-libm-test-in: Add more tests of tgamma.
	* math/auto-libm-test-out: Regenerated.

2015-09-17  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/sparc/sparc64/semctl.c: Readd.

2015-09-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18977]
	* math/bits/mathcalls.h
	[!__USE_MISC && __USE_XOPEN && !__MATH_DECLARING_DOUBLE] (j0): Do
	not declare.
	[!__USE_MISC && __USE_XOPEN && !__MATH_DECLARING_DOUBLE] (j1):
	Likewise.
	[!__USE_MISC && __USE_XOPEN && !__MATH_DECLARING_DOUBLE] (jn):
	Likewise.
	[!__USE_MISC && __USE_XOPEN && !__MATH_DECLARING_DOUBLE] (y0):
	Likewise.
	[!__USE_MISC && __USE_XOPEN && !__MATH_DECLARING_DOUBLE] (y1):
	Likewise.
	[!__USE_MISC && __USE_XOPEN && !__MATH_DECLARING_DOUBLE] (yn):
	Likewise.
	* conform/data/math.h-data
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (j0f): Do not expect
	function.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (j1f): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (jnf): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (y0f): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (y1f): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (ynf): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (j0l): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (j1l): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (jnl): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (y0l): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (y1l): Likewise.
	[!ISO99 && !ISO11 && !POSIX && !POSIX2008] (ynl): Likewise.

	[BZ #6803]
	* math/s_ldexp.c (scalbn): Define as weak alias of __ldexp.
	[NO_LONG_DOUBLE] (scalbnl): Define as weak alias of __ldexp.
	* math/s_ldexpf.c (scalbnf): Define as weak alias of __ldexpf.
	* math/s_ldexpl.c (scalbnl): Define as weak alias of __ldexpl.
	* sysdeps/i386/fpu/s_scalbn.S (scalbn): Remove alias.
	* sysdeps/i386/fpu/s_scalbnf.S (scalbnf): Likewise.
	* sysdeps/i386/fpu/s_scalbnl.S (scalbnl): Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbn.c (scalbn): Likewise.
	[NO_LONG_DOUBLE] (scalbnl): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c (scalbn):
	Likewise.
	[NO_LONG_DOUBLE] (scalbnl): Likewise.
	* sysdeps/ieee754/flt-32/s_scalbnf.c (scalbnf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c (scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c (scalbnl): Remove
	long_double_symbol calls.
	* sysdeps/ieee754/ldbl-64-128/s_scalbnl.c (scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-opt/s_ldexpl.c (__ldexpl_2): Define as
	strong alias of __ldexpl.
	(scalbnl): Define using long_double_symbol.
	* sysdeps/m68k/m680x0/fpu/s_scalbn.c (__CONCATX(scalbn,suffix)):
	Remove alias.
	* sysdeps/sparc/sparc64/soft-fp/s_scalbnl.c (scalbnl): Likewise.
	* sysdeps/x86_64/fpu/s_scalbnl.S (scalbnl): Likewise.
	* math/libm-test.inc (scalbn_test_data): Add errno expectations.
	(scalbln_test_data): Add more errno expectations.

2015-09-16  Justus Winter  <4winter@informatik.uni-hamburg.de>

	Cache the host port like we cache the task port.  This way we do not
	need to call the kernel just to get the port.  Furthermore, we no
	longer increase the reference count on every invocation of
	`mach_host_self'.

	* mach/mach/mach_traps.h (__mach_host_self, mach_host_self):
	Protect declarations against the macro expansion.
	* mach/mach_init.c (__mach_host_self_): New variable.
	(mach_init): Initialize `__mach_host_self_'.
	* mach/mach_init.h (__mach_host_self_): New declaration.
	(__mach_host_self, mach_host_self): New macros.
	* sysdeps/mach/hurd/dl-sysdep.c (_dl_sysdep_start_cleanup):
	Release reference.

2015-09-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #4404]
	* po/de.po: Update from Translation Project.

	[BZ #16415]
	* sysdeps/ieee754/ldbl-128/s_expm1l.c (maxlog): Remove variable.
	(__expm1l): Remove code to handle positive infinity and overflow.
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c (maxlog): Remove
	variable.
	(__expm1l): Remove code to handle positive infinity and overflow.

2015-09-16  Paul Eggert  <eggert@cs.ucla.edu>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18872]
	* stdio-common/Makefile (tst-printf-bz18872): New test.
	(tst-printf-bz18872-mem.out): Likewise.
	* stdio-common/tst-printf-bz18872.sh: Generate new test.
	* stdio-common/vfprintf.c: Fix memory leaks.

2015-09-16  Andreas Schwab  <schwab@suse.de>

	[BZ #17244]
	* sysdeps/unix/sysv/linux/semctl.c (__old_semctl, __new_semctl):
	Remove extra va_start/va_end calls.

	[BZ #17243]
	* posix/execl.c (execl): Add missing va_end.
	* posix/execle.c (execle): Likewise.
	* posix/execlp.c (execlp): Likewise.

2015-09-15  Roland McGrath  <roland@hack.frob.com>

	* misc/sys/param.h [!MAXHOSTNAMELEN && HOST_NAME_MAX]
	(MAXHOSTNAMELEN): Define it to HOST_NAME_MAX.

2015-09-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18967]
	* math/math.h (__MATH_DECLARING_DOUBLE): New macro.  Define and
	undefine around includes of <bits/mathcalls.h>.
	* math/bits/mathcalls.h [!__USE_MISC && __USE_XOPEN2K] (isnan): Do
	not declare function.
	[!__USE_MISC && __USE_XOPEN2K] (gamma): Likewise.
	[!__USE_MISC && (!__MATH_DECLARING_DOUBLE || __USE_XOPEN2K8)]
	(scalb): Likewise.
	* math/tgmath.h [!__USE_MISC && __USE_XOPEN_EXTENDED] (scalb): Do
	not define macro.
	* conform/Makefile (test-xfail-XOPEN2K/math.h/conform): Remove
	variable.
	(test-xfail-XOPEN2K/tgmath.h/conform): Likewise.
	(test-xfail-XOPEN2K8/math.h/conform): Likewise.
	(test-xfail-XOPEN2K8/tgmath.h/conform): Likewise.

	[BZ #18857]
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c (__nearbyintl): Just
	return non-finite argument without doing ordered comparisons on
	it.

	[BZ #16296]
	* math/fenv.h (fegetround): Use __attribute_pure__.
	* include/fenv.h (__fegetround): Likewise.

	[BZ #18595]
	* math/s_ctan.c (__ctan): Force underflow exception for results
	whose real or imaginary part has small absolute value.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanh.c (__ctanh): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/auto-libm-test-in: Do not allow missing underflow for ctan
	and ctanh.  Add more tests of ctan and ctanh.

	[BZ #15918]
	* sysdeps/ieee754/flt-32/e_hypotf.c (__ieee754_hypotf): Simplify
	handling of cases where one argument is an infinity.

	[BZ #18875]
	[BZ #18966]
	* sysdeps/i386/fpu/e_exp10.S (dbl_min): New object.
	(MO): New macro.
	(__ieee754_exp10): For small results, force underflow exception
	and remove excess range and precision from return value.
	* sysdeps/i386/fpu/e_exp10f.S (flt_min): New object.
	(MO): New macro.
	(__ieee754_exp10f): For small results, force underflow exception
	and remove excess range and precision from return value.
	* math/auto-libm-test-in: Add more tests of exp10.
	* math/auto-libm-test-out: Regenerated.

2015-09-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18875]
	[BZ #18961]
	* sysdeps/i386/fpu/e_exp.S (dbl_min): New object.
	(MO): New macro.
	(__ieee754_exp): For small results, force underflow exception and
	remove excess range and precision from return value.
	(__exp_finite): Likewise.
	* sysdeps/i386/fpu/e_expf.S (flt_min): New object.
	(MO): New macro.
	(__ieee754_expf): For small results, force underflow exception and
	remove excess range and precision from return value.
	(__expf_finite): Likewise.
	* math/auto-libm-test-in: Add more tests of exp.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16521]
	[BZ #18875]
	* math/e_exp2l.c (__ieee754_exp2l): Force underflow exception for
	small results.
	* sysdeps/i386/fpu/e_exp2.S (dbl_min): New object.
	(MO): New macro.
	(__ieee754_exp2): For small results, force underflow exception and
	remove excess range and precision from return value.
	* sysdeps/i386/fpu/e_exp2f.S (flt_min): New object.
	(MO): New macro.
	(__ieee754_exp2f): For small results, force underflow exception
	and remove excess range and precision from return value.
	* sysdeps/i386/fpu/e_exp2l.S (ldbl_min): New object.
	(MO): New macro.
	(__ieee754_exp2l): Force underflow exception for small results.
	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Likewise.
	* sysdeps/ieee754/flt-32/e_exp2f.c (__ieee754_exp2f): Likewise.
	* sysdeps/x86_64/fpu/e_exp2l.S (ldbl_min): New object.
	(MO): New macro.
	(__ieee754_exp2l): Force underflow exception for small results.
	* math/auto-libm-test-in: Add more tests or exp2.
	* math/auto-libm-test-out: Regenerated.

2015-09-14  Carlos O'Donell  <carlos@redhat.com>

	* malloc/malloc.c (systrim): Use ALIGN_DOWN.

	* Makefile ($(objpfx)check-local-headers.out): Redirect stdin from
	/dev/null.

2015-09-13  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/Makefile ($(patsubst %,$(hurd-objpfx)hurd/%.%,auth
	io fs process)): Drop spurious backslash.

2015-09-12  Rasmus Villemoes  <rv@rasmusvillemoes.dk>

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_phys_pages):
	Use sysinfo system call instead of parsing /proc/meminfo.
	* sysdeps/unix/sysv/linux/getsysstats.c (__get_avphys_pages):
	Likewise.

2015-09-11  Mike Frysinger  <vapier@gentoo.org>

	[BZ #16985]
	* programs/localedef.c (main): Display argv[remaining] when
	output_path is NULL.

2015-09-11  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of acos, acosh, asin,
	asinh, atan, atan2, atanh, cabs, carg, cos, csqrt, erfc, exp,
	exp10, exp2, log, log1p, log2, pow, sin, sincos, sinh, tan and
	tanh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/mips/mips32/libm-test-ulps: Likewise.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-09-11  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/Makefile [$(subdir) = misc] (sysdep_headers):
	Use 'override' keyword to freeze the value here, preventing
	the addition of sys/mtio.h by sysdeps/gnu/Makefile.

2015-09-11  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14912]
	* sysdeps/aarch64/bits/atomic.h: Move to ...
	* sysdeps/aarch64/atomic-machine.h: ...here.
	(_AARCH64_BITS_ATOMIC_H): Rename macro to
	_AARCH64_ATOMIC_MACHINE_H.
	* sysdeps/alpha/bits/atomic.h: Move to ...
	* sysdeps/alpha/atomic-machine.h: ...here.
	* sysdeps/arm/bits/atomic.h: Move to ...
	* sysdeps/arm/atomic-machine.h: ...here.  Update comments.
	* bits/atomic.h: Move to ...
	* sysdeps/generic/atomic-machine.h: ...here.
	(_BITS_ATOMIC_H): Rename macro to _ATOMIC_MACHINE_H.
	* sysdeps/i386/bits/atomic.h: Move to ...
	* sysdeps/i386/atomic-machine.h: ...here.
	* sysdeps/ia64/bits/atomic.h: Move to ...
	* sysdeps/ia64/atomic-machine.h: ...here.
	* sysdeps/m68k/coldfire/bits/atomic.h: Move to ...
	* sysdeps/m68k/coldfire/atomic-machine.h: ...here.
	(_BITS_ATOMIC_H): Rename macro to _ATOMIC_MACHINE_H.
	* sysdeps/m68k/m680x0/m68020/bits/atomic.h: Move to ...
	* sysdeps/m68k/m680x0/m68020/atomic-machine.h: ...here.
	* sysdeps/microblaze/bits/atomic.h: Move to ...
	* sysdeps/microblaze/atomic-machine.h: ...here.
	* sysdeps/mips/bits/atomic.h: Move to ...
	* sysdeps/mips/atomic-machine.h: ...here.
	(_MIPS_BITS_ATOMIC_H): Rename macro to _MIPS_ATOMIC_MACHINE_H.
	* sysdeps/powerpc/bits/atomic.h: Move to ...
	* sysdeps/powerpc/atomic-machine.h: ...here.  Update comments.
	* sysdeps/powerpc/powerpc32/bits/atomic.h: Move to ...
	* sysdeps/powerpc/powerpc32/atomic-machine.h: ...here.  Update
	comments.  Include <atomic-machine.h> instead of <bits/atomic.h>.
	* sysdeps/powerpc/powerpc64/bits/atomic.h: Move to ...
	* sysdeps/powerpc/powerpc64/atomic-machine.h: ...here.  Include
	<atomic-machine.h> instead of <bits/atomic.h>.
	* sysdeps/s390/bits/atomic.h: Move to ...
	* sysdeps/s390/atomic-machine.h: ...here.
	* sysdeps/sparc/sparc32/bits/atomic.h: Move to ...
	* sysdeps/sparc/sparc32/atomic-machine.h: ...here.
	(_BITS_ATOMIC_H): Rename macro to _ATOMIC_MACHINE_H.
	* sysdeps/sparc/sparc32/sparcv9/bits/atomic.h: Move to ...
	* sysdeps/sparc/sparc32/sparcv9/atomic-machine.h: ...here.
	* sysdeps/sparc/sparc64/bits/atomic.h: Move to ...
	* sysdeps/sparc/sparc64/atomic-machine.h: ...here.
	* sysdeps/tile/bits/atomic.h: Move to ...
	* sysdeps/tile/atomic-machine.h: ...here.
	* sysdeps/tile/tilegx/bits/atomic.h: Move to ...
	* sysdeps/tile/tilegx/atomic-machine.h: ...here.  Include
	<sysdeps/tile/atomic-machine.h> instead of
	<sysdeps/tile/bits/atomic.h>.
	(_BITS_ATOMIC_H): Rename macro to _ATOMIC_MACHINE_H.
	* sysdeps/tile/tilepro/bits/atomic.h: Move to ...
	* sysdeps/tile/tilepro/atomic-machine.h: ...here.  Include
	<sysdeps/tile/atomic-machine.h> instead of
	<sysdeps/tile/bits/atomic.h>.
	(_BITS_ATOMIC_H): Rename macro to _ATOMIC_MACHINE_H.
	* sysdeps/unix/sysv/linux/arm/bits/atomic.h: Move to ...
	* sysdeps/unix/sysv/linux/arm/atomic-machine.h: ...here.  Include
	<sysdeps/arm/atomic-machine.h> instead of
	<sysdeps/arm/bits/atomic.h>.
	* sysdeps/unix/sysv/linux/hppa/bits/atomic.h: Move to ...
	* sysdeps/unix/sysv/linux/hppa/atomic-machine.h: ...here.
	(_BITS_ATOMIC_H): Rename macro to _ATOMIC_MACHINE_H.
	* sysdeps/unix/sysv/linux/m68k/coldfire/bits/atomic.h: Move to ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/atomic-machine.h: ...here.
	(_BITS_ATOMIC_H): Rename macro to _ATOMIC_MACHINE_H.
	* sysdeps/unix/sysv/linux/nios2/bits/atomic.h: Move to ...
	* sysdeps/unix/sysv/linux/nios2/atomic-machine.h: ...here.
	(_NIOS2_BITS_ATOMIC_H): Rename macro to _NIOS2_ATOMIC_MACHINE_H.
	* sysdeps/unix/sysv/linux/sh/bits/atomic.h: Move to ...
	* sysdeps/unix/sysv/linux/sh/atomic-machine.h: ...here.
	* sysdeps/x86_64/bits/atomic.h: Move to ...
	* sysdeps/x86_64/atomic-machine.h: ...here.
	* include/atomic.h: Include <atomic-machine.h> instead of
	<bits/atomic.h>.

	* sysdeps/mips/mips32/libm-test-ulps: Update.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.

	[BZ #18952]
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c (__ieee754_lgammal_r): Do
	not convert non-integer negative arguments to int to determine the
	value of signgam.
	* math/auto-libm-test-in: Add more tests of lgamma.
	* math/auto-libm-test-out: Regenerated.

	* math/auto-libm-test-in: Add more tests of acosh, atanh, cbrt,
	cosh, csqrt, erfc, expm1 and lgamma.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-09-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2542]
	[BZ #2543]
	[BZ #2558]
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c (__ieee754_lgamma_r): Call
	__lgamma_neg for arguments from -28.0 to -2.0.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c (__ieee754_lgammaf_r): Call
	__lgamma_negf for arguments from -15.0 to -2.0.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c (__ieee754_lgammal_r):
	Call __lgamma_negl for arguments from -48.0 or -50.0 to -2.0.
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c (__ieee754_lgammal_r):
	Call __lgamma_negl for arguments from -33.0 to -2.0.
	* sysdeps/ieee754/dbl-64/lgamma_neg.c: New file.
	* sysdeps/ieee754/dbl-64/lgamma_product.c: Likewise.
	* sysdeps/ieee754/flt-32/lgamma_negf.c: Likewise.
	* sysdeps/ieee754/flt-32/lgamma_productf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/lgamma_negl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/lgamma_productl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/lgamma_negl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/lgamma_productl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/lgamma_negl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/lgamma_product.c: Likewise.
	* sysdeps/ieee754/ldbl-96/lgamma_productl.c: Likewise.
	* sysdeps/generic/math_private.h (__lgamma_negf): New prototype.
	(__lgamma_neg): Likewise.
	(__lgamma_negl): Likewise.
	(__lgamma_product): Likewise.
	(__lgamma_productl): Likewise.
	* math/Makefile (libm-calls): Add lgamma_neg and lgamma_product.
	* math/auto-libm-test-in: Add more tests of lgamma.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-09-09  Justin Maggard  <jmaggard@netgear.com>

	[BZ #18675]
	* sysdeps/posix/fpathconf.c (__fpathconf): Use __fstatvfs64.

2015-09-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14912]
	* bits/libc-lock.h: Move to ...
	* sysdeps/generic/libc-lock.h: ...here.
	(_BITS_LIBC_LOCK_H): Rename macro to _LIBC_LOCK_H.
	* sysdeps/mach/hurd/bits/libc-lock.h: Move to ...
	* sysdeps/mach/hurd/libc-lock.h: ...here.
	(_BITS_LIBC_LOCK_H): Rename macro to _LIBC_LOCK_H.
	[_LIBC]: Include <libc-lockP.h> instead of <bits/libc-lockP.h>.
	* sysdeps/mach/bits/libc-lock.h: Move to ...
	* sysdeps/mach/libc-lock.h: ...here.
	(_BITS_LIBC_LOCK_H): Rename macro to _LIBC_LOCK_H.
	* sysdeps/nptl/bits/libc-lock.h: Move to ...
	* sysdeps/nptl/libc-lock.h: ...here.
	(_BITS_LIBC_LOCK_H): Rename macro to _LIBC_LOCK_H.
	* sysdeps/nptl/bits/libc-lockP.h: Move to ...
	* sysdeps/nptl/libc-lockP.h: ...here.
	(_BITS_LIBC_LOCKP_H): Rename macro to _LIBC_LOCKP_H.
	* crypt/crypt_util.c: Include <libc-lock.h> instead of
	<bits/libc-lock.h>.
	* dirent/scandir-tail.c: Likewise.
	* dlfcn/dlerror.c: Likewise.
	* elf/dl-close.c: Likewise.
	* elf/dl-iteratephdr.c: Likewise.
	* elf/dl-lookup.c: Likewise.
	* elf/dl-open.c: Likewise.
	* elf/dl-support.c: Likewise.
	* elf/dl-writev.h: Likewise.
	* elf/rtld.c: Likewise.
	* grp/fgetgrent.c: Likewise.
	* gshadow/fgetsgent.c: Likewise.
	* gshadow/sgetsgent.c: Likewise.
	* iconv/gconv_conf.c: Likewise.
	* iconv/gconv_db.c: Likewise.
	* iconv/gconv_dl.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_trans.c: Likewise.
	* include/link.h: Likewise.
	* inet/getnameinfo.c: Likewise.
	* inet/getnetgrent.c: Likewise.
	* inet/getnetgrent_r.c: Likewise.
	* intl/bindtextdom.c: Likewise.
	* intl/dcigettext.c: Likewise.
	* intl/finddomain.c: Likewise.
	* intl/gettextP.h: Likewise.
	* intl/loadmsgcat.c: Likewise.
	* intl/localealias.c: Likewise.
	* intl/textdomain.c: Likewise.
	* libidn/idn-stub.c: Likewise.
	* libio/libioP.h: Likewise.
	* locale/duplocale.c: Likewise.
	* locale/freelocale.c: Likewise.
	* locale/newlocale.c: Likewise.
	* locale/setlocale.c: Likewise.
	* login/getutent_r.c: Likewise.
	* login/getutid_r.c: Likewise.
	* login/getutline_r.c: Likewise.
	* login/utmp-private.h: Likewise.
	* login/utmpname.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* misc/efgcvt.c: Likewise.
	* misc/error.c: Likewise.
	* misc/fstab.c: Likewise.
	* misc/getpass.c: Likewise.
	* misc/mntent.c: Likewise.
	* misc/syslog.c: Likewise.
	* nis/nis_call.c: Likewise.
	* nis/nis_callback.c: Likewise.
	* nis/nss-default.c: Likewise.
	* nis/nss_compat/compat-grp.c: Likewise.
	* nis/nss_compat/compat-initgroups.c: Likewise.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.
	* nis/nss_nis/nis-alias.c: Likewise.
	* nis/nss_nis/nis-ethers.c: Likewise.
	* nis/nss_nis/nis-grp.c: Likewise.
	* nis/nss_nis/nis-hosts.c: Likewise.
	* nis/nss_nis/nis-network.c: Likewise.
	* nis/nss_nis/nis-proto.c: Likewise.
	* nis/nss_nis/nis-pwd.c: Likewise.
	* nis/nss_nis/nis-rpc.c: Likewise.
	* nis/nss_nis/nis-service.c: Likewise.
	* nis/nss_nis/nis-spwd.c: Likewise.
	* nis/nss_nisplus/nisplus-alias.c: Likewise.
	* nis/nss_nisplus/nisplus-ethers.c: Likewise.
	* nis/nss_nisplus/nisplus-grp.c: Likewise.
	* nis/nss_nisplus/nisplus-hosts.c: Likewise.
	* nis/nss_nisplus/nisplus-initgroups.c: Likewise.
	* nis/nss_nisplus/nisplus-network.c: Likewise.
	* nis/nss_nisplus/nisplus-proto.c: Likewise.
	* nis/nss_nisplus/nisplus-pwd.c: Likewise.
	* nis/nss_nisplus/nisplus-rpc.c: Likewise.
	* nis/nss_nisplus/nisplus-service.c: Likewise.
	* nis/nss_nisplus/nisplus-spwd.c: Likewise.
	* nis/ypclnt.c: Likewise.
	* nptl/libc_pthread_init.c: Likewise.
	* nss/getXXbyYY.c: Likewise.
	* nss/getXXent.c: Likewise.
	* nss/getXXent_r.c: Likewise.
	* nss/nss_db/db-XXX.c: Likewise.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_db/nss_db.h: Likewise.
	* nss/nss_files/files-XXX.c: Likewise.
	* nss/nss_files/files-alias.c: Likewise.
	* nss/nsswitch.c: Likewise.
	* posix/regex_internal.h: Likewise.
	* posix/wordexp.c: Likewise.
	* pwd/fgetpwent.c: Likewise.
	* resolv/res_hconf.c: Likewise.
	* resolv/res_libc.c: Likewise.
	* shadow/fgetspent.c: Likewise.
	* shadow/lckpwdf.c: Likewise.
	* shadow/sgetspent.c: Likewise.
	* socket/opensock.c: Likewise.
	* stdio-common/reg-modifier.c: Likewise.
	* stdio-common/reg-printf.c: Likewise.
	* stdio-common/reg-type.c: Likewise.
	* stdio-common/vfprintf.c: Likewise.
	* stdio-common/vfscanf.c: Likewise.
	* stdlib/abort.c: Likewise.
	* stdlib/cxa_atexit.c: Likewise.
	* stdlib/fmtmsg.c: Likewise.
	* stdlib/random.c: Likewise.
	* stdlib/setenv.c: Likewise.
	* string/strsignal.c: Likewise.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/bindrsvprt.c: Likewise.
	* sunrpc/create_xid.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sysdeps/arm/backtrace.c: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.
	* sysdeps/generic/stdio-lock.h: Likewise.
	* sysdeps/generic/unwind-dw2-fde.c: Likewise.
	* sysdeps/i386/backtrace.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-compat.c: Likewise.
	* sysdeps/m68k/backtrace.c: Likewise.
	* sysdeps/mach/hurd/cthreads.c: Likewise.
	* sysdeps/mach/hurd/dirstream.h: Likewise.
	* sysdeps/mach/hurd/malloc-machine.h: Likewise.
	* sysdeps/nptl/malloc-machine.h: Likewise.
	* sysdeps/nptl/stdio-lock.h: Likewise.
	* sysdeps/posix/dirstream.h: Likewise.
	* sysdeps/posix/getaddrinfo.c: Likewise.
	* sysdeps/posix/system.c: Likewise.
	* sysdeps/pthread/aio_suspend.c: Likewise.
	* sysdeps/s390/s390-32/backtrace.c: Likewise.
	* sysdeps/s390/s390-64/backtrace.c: Likewise.
	* sysdeps/unix/sysv/linux/check_pf.c: Likewise.
	* sysdeps/unix/sysv/linux/if_index.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutent_r.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutid_r.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutline_r.c: Likewise.
	* sysdeps/unix/sysv/linux/shm-directory.c: Likewise.
	* sysdeps/unix/sysv/linux/system.c: Likewise.
	* sysdeps/x86_64/backtrace.c: Likewise.
	* time/alt_digit.c: Likewise.
	* time/era.c: Likewise.
	* time/tzset.c: Likewise.
	* wcsmbs/wcsmbsload.c: Likewise.
	* nptl/tst-initializers1.c (do_test): Refer to <libc-lock.h>
	instead of <bits/libc-lock.h> in comment.

2015-09-08  Andrew Bennett  <andrew.bennett@imgtec.com>

	* sysdeps/mips/bits/atomic.h [_MIPS_SIM == _ABIO32] (MIPS_PUSH_MIPS2):
	Only use .set mips2 if the current ISA is below mips2.
	* sysdeps/mips/sys/tas.h [_MIPS_SIM == _ABIO32] (_test_and_set):
	Likewise.
	* sysdeps/mips/nptl/tls.h (READ_THREAD_POINTER): Only use .set
	mips32r2 if the current ISA is below mips32r2.
	* sysdeps/mips/tls-macros.h (TLS_RDHWR): New define.
	(TLS_IE): Updated to use the TLD_RDHWR macro.
	(TLS_LE): Likewise.
	* sysdeps/unix/mips/sysdep.h (__mips_isa_rev): Moved out of #ifdef
	__ASSEMBLER__ condition.

2015-09-08  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix parallel build of before-compile targets.

	* sysdeps/mach/Makefile ($(patsubst
	mach%,m\%h%,$(mach-before-compile))): Move rule to dedicated
	mach-before-compile target.
	* sysdeps/mach/hurd/Makefile ($(patsubst %,$(hurd-objpfx)hurd/%.%,auth
	io fs process)): Move rule to dedicated hurd-before-compile target.

2015-09-06  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix rules generating headers in hurd/ and mach/ when initial make call
	has subdir= explicitly set.

	* sysdeps/mach/Makefile ($(patsubst
	mach%,m\%h%,$(mach-before-compile))): Force subdir to mach when
	calling $(MAKE).
	* sysdeps/mach/hurd/Makefile ($(patsubst %,$(hurd-objpfx)hurd/%.%,auth
	io fs process)): Force subdir to hurd when calling $(MAKE).
	($(common-objpfx)hurd/../mach/RPC_task_get_sampled_pcs.c): Force
	subdir to mach when calling $(MAKE).

2015-09-06  Manolis Ragkousis  <manolis837@gmail.com>

	Check sysheaders when looking for Mach and Hurd headers

	* sysdeps/mach/configure.ac: Add sysheaders check.
	* sysdeps/mach/configure: Regenerate.
	* sysdeps/mach/hurd/configure.ac: Add sysheaders check.
	* sysdeps/mach/hurd/configure: Regenerate.

2015-09-04  Roland McGrath  <roland@hack.frob.com>

	[BZ #18921]
	* sysdeps/posix/opendir.c (need_isdir_precheck) [O_DIRECTORY]:
	Fix inverted sense of test of 'o_directory_works' value.
	Reported by P√°draig Brady <P@draigBrady.com>, diagnosed by
	Bernhard Voelker <mail@bernhard-voelker.de>.

2015-09-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14912]
	* bits/linkmap.h: Move to ...
	* sysdeps/generic/linkmap.h: ...here.
	* sysdeps/aarch64/bits/linkmap.h: Move to ...
	* sysdeps/aarch64/linkmap.h: ...here.
	* sysdeps/arm/bits/linkmap.h: Move to ...
	* sysdeps/arm/linkmap.h: ...here.
	* sysdeps/hppa/bits/linkmap.h: Move to ...
	* sysdeps/hppa/linkmap.h: ...here.
	* sysdeps/ia64/bits/linkmap.h: Move to ...
	* sysdeps/ia64/linkmap.h: ...here.
	* sysdeps/mips/bits/linkmap.h: Move to ...
	* sysdeps/mips/linkmap.h: ...here.
	* sysdeps/s390/bits/linkmap.h: Move to ...
	* sysdeps/s390/linkmap.h: ...here.
	* sysdeps/sh/bits/linkmap.h: Move to ...
	* sysdeps/sh/linkmap.h: ...here.
	* sysdeps/x86/bits/linkmap.h: Move to ...
	* sysdeps/x86/linkmap.h: ...here.
	* include/link.h: Include <linkmap.h> instead of <bits/linkmap.h>.

2015-09-04  Andreas Schwab  <schwab@suse.de>

	[BZ #18635]
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/makecontext.S
	(__makecontext): Terminate FDE before return label.
	(__novec_makecontext): Likewise.

2015-09-04  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/socketpair.c: Use the address of the
	first member of struct sv in syscall macro.

2015-09-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14912]
	* bits/stdio-lock.h: Move to ...
	* sysdeps/generic/stdio-lock.h: ...here.
	(_BITS_STDIO_LOCK_H): Rename macro to _STDIO_LOCK_H.
	* sysdeps/nptl/bits/stdio-lock.h: Move to ...
	* sysdeps/nptl/stdio-lock.h: ...here.
	(_BITS_STDIO_LOCK_H): Rename macro to _STDIO_LOCK_H.
	* include/libio.h: Include <stdio-lock.h> instead of
	<bits/stdio-lock.h>.
	* sysdeps/nptl/fork.c: Likewise.
	* sysdeps/pthread/flockfile.c: Likewise.
	* sysdeps/pthread/ftrylockfile.c: Likewise.
	* sysdeps/pthread/funlockfile.c: Likewise.

	[BZ #14912]
	* sysdeps/unix/sysv/linux/m68k/bits/m68k-vdso.h: Move to ...
	* sysdeps/unix/sysv/linux/m68k/m68k-vdso.h: ...here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/bits/atomic.h: Include
	<m68k-vdso.h> instead of <bits/m68k-vdso.h>.
	* sysdeps/unix/sysv/linux/m68k/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m68k-helpers.S: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m68k-vdso.c: Likewise.

2015-09-03  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile (test-xfail-tst-protected1a): New variable.
	(test-xfail-tst-protected1b): New variable.

2015-09-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14912]
	* bits/libc-tsd.h: Move to ...
	* sysdeps/generic/libc-tsd.h: ...here.
	(_GENERIC_BITS_LIBC_TSD_H): Rename macro to _GENERIC_LIBC_TSD_H.
	* sysdeps/mach/hurd/bits/libc-tsd.h: Move to ...
	* sysdeps/mach/hurd/libc-tsd.h: ...here.
	(_BITS_LIBC_TSD_H): Rename macro to _LIBC_TSD_H.
	* include/ctype.h: Include <libc-tsd.h> instead of
	<bits/libc-tsd.h>.
	* include/rpc/rpc.h: Likewise.
	* locale/localeinfo.h: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sysdeps/mach/hurd/malloc-machine.h: Likewise.
	* sysdeps/nptl/malloc-machine.h: Likewise.

	* Makefile (headers): Remove bits/libc-lock.h.
	* libio/Makefile (headers): Remove bits/stdio-lock.h.

	* libio/libio.h [_IO_MTSAFE_IO]: Remove include of
	<bits/stdio-lock.h> and commented-out include of <comthread.h>.
	* include/libio.h [!_ISOMAC && _IO_MTSAFE_IO]: Include
	<bits/stdio-lock.h>.
	* stdio-common/scanf15.c (_IO_MTSAFE_IO): Undefine.
	* stdio-common/scanf17.c (_IO_MTSAFE_IO): Likewise.

2015-09-01  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18757]
	* libio/iofopncook.c (_IO_fopencookie): Set errno on failure.
	* libio/test-fmemopen.c (do_bz18820): Extend the test to cover
	BZ #18757.

2015-09-01  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* malloc/mtrace.pl: Filter out NULL entries.

2015-09-01  Joseph Myers  <joseph@codesourcery.com>

	* inet/netinet/in.h (IPPROTO_MPLS): New enum value and macro.
	* sysdeps/unix/sysv/linux/bits/in.h (IP_BIND_ADDRESS_NO_PORT): New
	macro.

	* sysdeps/gnu/netinet/tcp.h (TCP_NOTSENT_LOWAT): New macro.
	(TCP_CC_INFO): Likewise.
	(TCP_SAVE_SYN): Likewise.
	(TCP_SAVED_SYN): Likewise.

2015-08-31  Brett Neumeier <brett@neumeier.us>

	[BZ #18870]
	* sysdeps/sparc/sparc32/sem_open.c: Add missing #include

2015-08-31  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #18873]
	Fix broken overflow check in posix_fallocate
	* sysdeps/posix/posix_fallocate.c (posix_fallocate):
	* sysdeps/posix/posix_fallocate64.c (__posix_fallocate64_l64):
	Fix parenthesization typo.

2015-08-28  Mike Frysinger  <vapier@gentoo.org>

	[BZ #18887]
	* misc/Makefile (tests): Add tst-mntent-blank-corrupt and
	tst-mntent-blank-passno.
	* misc/mntent_r.c (__getmntent_r): Do not read past buffer[0].
	* misc/tst-mntent-blank-corrupt.c: New test.
	* misc/tst-mntent-blank-passno.c: New test ripped from ...
	* misc/tst-mntent.c (do_test): ... here.

2015-08-29  Mike Frysinger  <vapier@gentoo.org>

	[BZ #4404]
	* po/de.po: Fix SIGALRM typo.

2015-08-28  James Perkins  <james@loowit.net>

	* time/tst-strptime2.c (tests): Replace short list of test
	strings for strptime %z specifier with code which exhaustively
	tests every combination of sign and 0 to 5 digits. Tests for
	rejection of invalid strings.

2015-08-28  James Perkins  <james@loowit.net>

	[BZ #16141]
	* time/strptime_l.c (__strptime_internal): Fix %z minutes
	calculation, removing incorrect decimal time rounding, so that
	all minute values result in a valid seconds value.
	* time/strptime_l.c (__strptime_internal): Extend %z time zone
	offset range limits to UTC-99:59 through UTC+99:59 to parse
	current and historical use cases.
	* time/tst-strptime2.c (tests): Modify and add tests for the
	strptime %z input field descriptor, specifically conversion of
	minutes to seconds and validating an offset range of -9959 to
	+9959.

2015-08-27  Adhemerval Zanella  <adhemerval.zanella@linaro.org>
	    Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #18877]
	* posix/Makefile (tests): Add tst-mmap-offset.
	* posix/tst-mmap.c: New file.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/mmap.c (__mmap): Fix
	offset calculation for negative values.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/init-arch.h: New file.
	* sysdeps/i386/i586/init-arch.h: Likewise.
	* sysdeps/i386/i686/init-arch.h: Likewise.
	* sysdeps/x86/cpu-features.c (init_cpu_features): Set bit_I586
	bit if CX8 is available.  Set bit_I686 bit if CMOV is available.
	* sysdeps/x86/cpu-features.h (bit_I586): New.
	(bit_I686): Likewise.
	(bit_CX8): Likewise.
	(bit_CMOV): Likewise.
	(index_CX8): Likewise.
	(index_CMOV): Likewise.
	(index_I586): Likewise.
	(index_I686): Likewise.
	(reg_CX8): Likewise.
	(reg_CMOV): Likewise.
	(HAS_I586): Defined as HAS_ARCH_FEATURE (I586) if i586 isn't
	available at compile-time.
	(HAS_I686): Defined as HAS_ARCH_FEATURE (I686) if i686 isn't
	available at compile-time.
	* sysdeps/x86/init-arch.h (USE_I586): New macro.
	(USE_I686): Likewise.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/bcopy.S: New file.
	* sysdeps/i386/bzero.S: Likewise.
	* sysdeps/i386/memcpy.S: Likewise.
	* sysdeps/i386/memmove.S: Likewise.
	* sysdeps/i386/mempcpy.S: Likewise.
	* sysdeps/i386/memset.S: Likewise.
	* sysdeps/i386/bzero.c: Removed.
	* sysdeps/i386/memset.c: Likewise.
	* sysdeps/i386/i586/memcpy_chk.S: Likewise.
	* sysdeps/i386/i586/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i586/memset_chk.S: Likewise.
	* sysdeps/i386/i686/memcpy_chk.S: Moved to ...
	* sysdeps/i386/memcpy_chk.S: Here.
	* sysdeps/i386/i686/memmove_chk.S: Moved to ...
	* sysdeps/i386/memmove_chk.S: Here.
	* sysdeps/i386/i686/mempcpy_chk.S: Moved to ...
	* sysdeps/i386/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/memset_chk.S: Moved to ...
	* sysdeps/i386/memset_chk.S: Likewise.

2015-08-27  Steve Ellcey  <sellcey@imgtec.com>

	* soft-fp/fmasf4.c: Add include of sys/cdefs.h.
	Move DIAG_PUSH_NEEDS_COMMENT, DIAG_IGNORE_NEEDS_COMMENT to front of
	file, move DIAG_POP_NEEDS_COMMENT to end of file.
	* soft-fp/fmadf4.c: Ditto.
	* soft-fp/fmatf4.c: Ditto.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i586/Implies: Removed.
	* sysdeps/i386/i686/Implies: Likewise.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i486/strlen.S: Moved to ...
	* sysdeps/i386/strlen.S: Here.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i486/strcat.S: Moved to ...
	* sysdeps/i386/strcat.S: Here.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i486/pthread_spin_trylock.S: Moved to ...
	* sysdeps/i386/pthread_spin_trylock.S: Here.
	* sysdeps/i386/i586/pthread_spin_trylock.S: Removed.
	* sysdeps/i386/i686/pthread_spin_trylock.S: Updated.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i486/string-inlines.c: Moved to ...
	* sysdeps/i386/string-inlines.c: Here.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i486/htonl.S: Moved ...
	* sysdeps/i386/htonl.S: here.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i486/bits/atomic.h: Moved to ...
	* sysdeps/i386/bits/atomic.h: Here.

2015-08-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i486/Versions: Removed.

2015-08-27  Gleb Fotengauer-Malinovskiy  <glebfm@altlinux.org>

	[BZ #2898]
	* misc/mktemp.c: Add mkdtemp to the link_warning message.
	Based on patch by Aurelien Jarno.

2015-08-26  Stan Shebs  <stanshebs@google.com>

	* sysdeps/ieee754/ldbl-96/k_tanl.c: Include <libc-internal.h>.
	(__kernel_tanl): Ignore uninitialized warnings around use of SIGN.

2015-08-26  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/bits/hwcap.h: Add PPC_FEATURE2_HTM_NOSC.
	* sysdeps/powerpc/dl-procinfo.c:
	(_dl_powerpc_cap_flags): Added descriptor for this hwcap
	feature so it shows when LD_SHOW_AUXV=1.

2015-08-26  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/elision-lock.c
	(__arch_compare_and_exchange_val_32_acq): Remove and use common
	definition.  ISA 2.07B no longer requires full sync.

2015-08-26  Mike Frysinger  <vapier@gentoo.org>

	[BZ #18863]
	* sysdeps/unix/sysv/linux/mips/bits/siginfo.h (siginfo_t): Add _sigsys.
	(si_call_addr): Define.
	(si_syscall): Define.
	(si_arch): Define.

2015-08-26  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i586/bzero.S (USE_AS_BZERO): New.
	* sysdeps/i386/i686/bzero.S (USE_AS_BZERO): Likewise.
	* sysdeps/i386/i586/memset.S (BZERO_P): Removed.
	Check USE_AS_BZERO/SHARED instead of BZERO_P/PIC.
	(__memset_zero_constant_len_parameter): New.
	* sysdeps/i386/i686/memset.S (BZERO_P): Removed.
	Check USE_AS_BZERO/SHARED instead of BZERO_P/PIC.
	(__memset_zero_constant_len_parameter): Don't define if
	__memset_chk or USE_AS_BZERO are defined.

	* sysdeps/i386/i586/memcpy.S (MEMPCPY_P): Removed.
	Check USE_AS_MEMPCPY/SHARED instead of MEMPCPY_P/PIC.
	* sysdeps/i386/i586/mempcpy.S (USE_AS_MEMPCPY): New.

	* sysdeps/x86/Makefile [$(subdir) == elf] (CFLAGS-.os,
	tests-special, $(objpfx)tst-ld-sse-use.out): Moved to ...
	* sysdeps/i386/Makefile [$(subdir) == elf] (CFLAGS-.os,
	tests-special, $(objpfx)tst-ld-sse-use.out): Here.  Update
	comments.
	* sysdeps/x86_64/Makefile [$(subdir) == elf] (CFLAGS-.os): Add
	-mno-mmx for $(all-rtld-routines).
	* sysdeps/x86/tst-ld-sse-use.sh: Moved to ...
	* sysdeps/i386/tst-ld-sse-use.sh: Here.  Replace x86-64 with
	i386.

2015-08-26  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/generic/unwind.h
	(_Unwind_Word): Use __mode__(__unwind_word__)
	instead of __mode__(__word__).
	(_Unwind_Sword): Likewise.

	* sysdeps/s390/s390-64/utf8-utf16-z9.c
	(MAX_NEEDED_INPUT): New define.
	(MAX_NEEDED_OUTPUT): New define.

	* NEWS: New item for IBM z13 string optimizations.

	* sysdeps/s390/multiarch/memrchr-c.c: New File.
	* sysdeps/s390/multiarch/memrchr-vx.S: Likewise.
	* sysdeps/s390/multiarch/memrchr.c: Likewise.
	* sysdeps/s390/multiarch/Makefile
	(sysdep_routines): Add memrchr functions.
	* sysdeps/s390/multiarch/ifunc-impl-list-common.c
	(__libc_ifunc_impl_list_common): Add ifunc test for memrchr.

	* sysdeps/s390/multiarch/wmemcmp-c.c: New File.
	* sysdeps/s390/multiarch/wmemcmp-vx.S: Likewise.
	* sysdeps/s390/multiarch/wmemcmp.c: Likewise.
	* sysdeps/s390/multiarch/Makefile
	(sysdep_routines): Add wmemcmp functions.
	* sysdeps/s390/multiarch/ifunc-impl-list-common.c
	(__libc_ifunc_impl_list_common): Add ifunc test for wmemcmp.
	* benchtests/bench-wmemcmp.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wmemcmp.

	* sysdeps/s390/multiarch/wmemset-c.c: New File.
	* sysdeps/s390/multiarch/wmemset-vx.S: Likewise.
	* sysdeps/s390/multiarch/wmemset.c: Likewise.
	* sysdeps/s390/multiarch/Makefile
	(sysdep_routines): Add wmemset functions.
	* sysdeps/s390/multiarch/ifunc-impl-list-common.c
	(__libc_ifunc_impl_list_common): Add ifunc test for wmemset.
	* wcsmbs/wmemset.c: Use WMEMSET if defined.
	* string/test-memset.c: Add wmemset support.
	* wcsmbs/test-wmemset.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wmemset.
	* benchtests/bench-memset.c: Add wmemset support.
	* benchtests/bench-wmemset.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wmemset.

	* sysdeps/s390/multiarch/memccpy-c.c: New File.
	* sysdeps/s390/multiarch/memccpy-vx.S: Likewise.
	* sysdeps/s390/multiarch/memccpy.c: Likewise.
	* sysdeps/s390/multiarch/Makefile
	(sysdep_routines): Add memccpy functions.
	* sysdeps/s390/multiarch/ifunc-impl-list-common.c
	(__libc_ifunc_impl_list_common): Add ifunc test for memccpy.
	* string/memccpy.c: Use MEMCCPY if defined.

	* sysdeps/s390/multiarch/memchr-vx.S: New File.
	* sysdeps/s390/multiarch/memchr.c: Likewise.
	* sysdeps/s390/multiarch/rawmemchr-c.c: Likewise.
	* sysdeps/s390/multiarch/rawmemchr-vx.S: Likewise.
	* sysdeps/s390/multiarch/rawmemchr.c: Likewise.
	* sysdeps/s390/multiarch/wmemchr-c.c: Likewise.
	* sysdeps/s390/multiarch/wmemchr-vx.S: Likewise.
	* sysdeps/s390/multiarch/wmemchr.c: Likewise.
	* sysdeps/s390/s390-32/multiarch/memchr.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/memchr.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add memchr, wmemchr
	and rawmemchr functions.
	* sysdeps/s390/multiarch/ifunc-impl-list-common.c
	(__libc_ifunc_impl_list_common): Add ifunc test for memchr, rawmemchr
	and wmemchr.
	* wcsmbs/wmemchr.c: Use WMEMCHR if defined.
	* string/test-memchr.c: Add wmemchr support.
	* wcsmbs/test-wmemchr.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wmemchr.
	* benchtests/bench-memchr.c: Add wmemchr support.
	* benchtests/bench-wmemchr.c: New File.
	* benchtests/Makefile (wcsmbs-bench): wmemchr.

	* sysdeps/s390/multiarch/strcspn-c.c: New File.
	* sysdeps/s390/multiarch/strcspn-vx.S: Likewise.
	* sysdeps/s390/multiarch/strcspn.c: Likewise.
	* sysdeps/s390/multiarch/wcscspn-c.c: Likewise.
	* sysdeps/s390/multiarch/wcscspn-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcscspn.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strcspn and
	wcscspn functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strcspn, wcscspn.
	* wcsmbs/wcscspn.c: Use WCSCSPN if defined.
	* string/test-strcspn.c: Add wcscspn support.
	* wcsmbs/test-wcscspn.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcscspn.
	* benchtests/bench-strcspn.c: Add wcscspn support.
	* benchtests/bench-wcscspn.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcscspn.

	* sysdeps/s390/multiarch/strpbrk-c.c: New File.
	* sysdeps/s390/multiarch/strpbrk-vx.S: Likewise.
	* sysdeps/s390/multiarch/strpbrk.c: Likewise.
	* sysdeps/s390/multiarch/wcspbrk-c.c: Likewise.
	* sysdeps/s390/multiarch/wcspbrk-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcspbrk.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strpbrk and
	wcspbrk functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strpbrk, wcspbrk.
	* wcsmbs/wcspbrk.c: Use WCSPBRK if defined.
	* string/test-strpbrk.c: Add wcspbrk support.
	* wcsmbs/test-wcspbrk.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcspbrk.
	* benchtests/bench-strpbrk.c: Add wcspbrk support.
	* benchtests/bench-wcspbrk.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcspbrk.

	* sysdeps/s390/multiarch/strspn-c.c: New File.
	* sysdeps/s390/multiarch/strspn-vx.S: Likewise.
	* sysdeps/s390/multiarch/strspn.c: Likewise.
	* sysdeps/s390/multiarch/wcsspn-c.c: Likewise.
	* sysdeps/s390/multiarch/wcsspn-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcsspn.c: Likewise.
	* wcsmbs/wcsspn.c: Use WCSSPN if defined.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strspn and
	wcsspn functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strspn, wcsspn.
	* string/test-strspn.c: Add wcsspn support.
	* wcsmbs/test-wcsspn.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcsspn.
	* benchtests/bench-strspn.c: Add wcsspn support.
	* benchtests/bench-wcsspn.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcsspn.

	* sysdeps/s390/multiarch/strrchr-c.c: New File.
	* sysdeps/s390/multiarch/strrchr-vx.S: Likewise.
	* sysdeps/s390/multiarch/strrchr.c: Likewise.
	* sysdeps/s390/multiarch/wcsrchr-c.c: Likewise.
	* sysdeps/s390/multiarch/wcsrchr-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcsrchr.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strrchr and
	wcsrchr functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strrchr, wcsrchr.
	* benchtests/bench-wcsrchr.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcsrchr.

	* sysdeps/s390/multiarch/strchrnul-c.c: New File.
	* sysdeps/s390/multiarch/strchrnul-vx.S: Likewise.
	* sysdeps/s390/multiarch/strchrnul.c: Likewise.
	* sysdeps/s390/multiarch/wcschrnul-c.c: Likewise.
	* sysdeps/s390/multiarch/wcschrnul-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcschrnul.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strchrnul and
	wcschrnul functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strchrnul, wcschrnul.
	* wcsmbs/wcschrnul.c: Use WCSCHRNUL if defined.
	* string/test-strchr.c: Add wcschrnul support.
	* wcsmbs/test-wcschrnul.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcschrnul.
	* benchtests/bench-strchr.c: Add wcschrnul support.
	* benchtests/bench-wcschrnul.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcschrnul.

	* sysdeps/s390/multiarch/strchr-c.c: New File.
	* sysdeps/s390/multiarch/strchr-vx.S: Likewise.
	* sysdeps/s390/multiarch/strchr.c: Likewise.
	* sysdeps/s390/multiarch/wcschr-c.c: Likewise.
	* sysdeps/s390/multiarch/wcschr-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcschr.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strchr and
	wcschr functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strchr, wcschr.
	* string/strchr.c (STRCHR): Define and use macro.
	* benchtests/bench-wcschr.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcschr.

	* sysdeps/s390/multiarch/strncmp-c.c: New File.
	* sysdeps/s390/multiarch/strncmp-vx.S: Likewise.
	* sysdeps/s390/multiarch/strncmp.c: Likewise.
	* sysdeps/s390/multiarch/wcsncmp-c.c: Likewise.
	* sysdeps/s390/multiarch/wcsncmp-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcsncmp.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strncmp and
	wcsncmp functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strncmp, wcsncmp.
	* wcsmbs/wcsncmp.c (WCSNCMP): Define and use macro.
	* benchtests/bench-strncmp.c: Add wcsncmp support.
	* benchtests/bench-wcsncmp.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcsncmp.

	* sysdeps/s390/multiarch/strcmp-vx.S: New File.
	* sysdeps/s390/multiarch/strcmp.c: Likewise.
	* sysdeps/s390/multiarch/wcscmp-c.c: Likewise.
	* sysdeps/s390/multiarch/wcscmp-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcscmp.c: Likewise.
	* sysdeps/s390/s390-32/multiarch/strcmp.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/strcmp.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strcmp and
	wcscmp functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strcmp, wcscmp.
	* string/strcmp.c (STRCMP): Define and use macro.
	* benchtests/bench-wcscmp.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcscmp.
	* sysdeps/s390/bits/string.h: Fix typo: _HAVE_STRING_ARCH_strcmp
	instead of _HAVE_STRING_ARCH_memchr.

	* sysdeps/s390/multiarch/strncat-c.c: New File.
	* sysdeps/s390/multiarch/strncat-vx.S: Likewise.
	* sysdeps/s390/multiarch/strncat.c: Likewise.
	* sysdeps/s390/multiarch/wcsncat-c.c: Likewise.
	* sysdeps/s390/multiarch/wcsncat-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcsncat.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strncat and
	wcsncat functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strncat, wcsncat.
	* wcsmbs/wcsncat.c (WCSNCAT): Define and use macro.
	* string/test-strncat.c: Add wcsncat support.
	* wcsmbs/test-wcsncat.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcsncat.
	* benchtests/bench-strncat.c: Add wcsncat support.
	* benchtests/bench-wcsncat.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcsncat.

	* sysdeps/s390/multiarch/strcat-c.c: New File.
	* sysdeps/s390/multiarch/strcat-vx.S: Likewise.
	* sysdeps/s390/multiarch/strcat.c: Likewise.
	* sysdeps/s390/multiarch/wcscat-c.c: Likewise.
	* sysdeps/s390/multiarch/wcscat-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcscat.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strcat and
	wcscat functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strcat, wcscat.
	* string/strcat.c (STRCAT): Define and use macro.
	* wcsmbs/wcscat.c: Use WCSCAT if defined.
	* string/test-strcat.c: Add wcscat support.
	* wcsmbs/test-wcscat.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcscat.
	* benchtests/bench-strcat.c: Add wcscat support.
	* benchtests/bench-wcscat.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcscat.

	* sysdeps/s390/multiarch/stpncpy-c.c: New File.
	* sysdeps/s390/multiarch/stpncpy-vx.S: Likewise.
	* sysdeps/s390/multiarch/stpncpy.c: Likewise.
	* sysdeps/s390/multiarch/wcpncpy-c.c: Likewise.
	* sysdeps/s390/multiarch/wcpncpy-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcpncpy.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add stpncpy and
	wcpncpy functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for stpncpy, wcpncpy.
	* wcsmbs/wcpncpy.c: Use WCPNCPY if defined.
	* string/test-stpncpy.c: Add wcpncpy support.
	* wcsmbs/test-wcpncpy.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcpncpy.
	* benchtests/bench-stpncpy.c: Add wcpncpy support.
	* benchtests/bench-wcpncpy.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcpncpy.

	* sysdeps/s390/multiarch/strncpy-vx.S: New File.
	* sysdeps/s390/multiarch/strncpy.c: Likewise.
	* sysdeps/s390/multiarch/wcsncpy-c.c: Likewise.
	* sysdeps/s390/multiarch/wcsncpy-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcsncpy.c: Likewise.
	* sysdeps/s390/s390-32/multiarch/strncpy.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/strncpy.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strncpy and
	wcsncpy functions.
	* wcsmbs/wcsncpy.c: Use WCSNCPY if defined.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strncpy, wcsncpy.
	* string/test-strncpy.c: Add wcsncpy support.
	* wcsmbs/test-wcsncpy.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcsncpy.
	* benchtests/bench-strncpy.c: Add wcsncpy support.
	* benchtests/bench-wcsncpy.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcsncpy

	* sysdeps/s390/multiarch/stpcpy-c.c: New File.
	* sysdeps/s390/multiarch/stpcpy-vx.S: Likewise.
	* sysdeps/s390/multiarch/stpcpy.c: Likewise.
	* sysdeps/s390/multiarch/wcpcpy-c.c: Likewise.
	* sysdeps/s390/multiarch/wcpcpy-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcpcpy.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add stpcpy and
	wcpcpy functions.
	* string/stpcpy.c: Use STPCPY if defined.
	* wcsmbs/wcpcpy.c: Use WCPCPY if defined.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for stpcpy, wcpcpy.
	* string/test-stpcpy.c: Add wcpcpy support.
	* wcsmbs/test-wcpcpy.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcpcpy.
	* benchtests/bench-stpcpy.c: Add wcpcpy support.
	* benchtests/bench-wcpcpy.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcpcpy.

	* sysdeps/s390/multiarch/strcpy-vx.S: New File.
	* sysdeps/s390/multiarch/strcpy.c: Likewise.
	* sysdeps/s390/multiarch/wcscpy-c.c: Likewise.
	* sysdeps/s390/multiarch/wcscpy-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcscpy.c: Likewise.
	* sysdeps/s390/s390-32/multiarch/strcpy.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/strcpy.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strcpy and
	wcscpy functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strcpy, wcscpy.
	* benchtests/bench-wcscpy.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcscpy.

	* sysdeps/s390/multiarch/strnlen-c.c: New File.
	* sysdeps/s390/multiarch/strnlen-vx.S: Likewise.
	* sysdeps/s390/multiarch/strnlen.c: Likewise.
	* sysdeps/s390/multiarch/wcsnlen-c.c: Likewise.
	* sysdeps/s390/multiarch/wcsnlen-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcsnlen.c: Likewise.
	* sysdeps/s390/multiarch/Makefile (sysdep_routines): Add strnlen and
	wcsnlen functions.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add ifunc test for strnlen, wcsnlen.
	* wcsmbs/wcsnlen.c: Use WCSNLEN if defined.
	* string/test-strnlen.c: Add wcsnlen support.
	* wcsmbs/test-wcsnlen.c: New File.
	* wcsmbs/Makefile (strop-tests): Add wcsnlen.
	* benchtests/bench-strnlen.c: Add wcsnlen support.
	* benchtests/bench-wcsnlen.c: New File.
	* benchtests/Makefile (wcsmbs-bench): Add wcsnlen.

	* sysdeps/s390/multiarch/Makefile: New File.
	* sysdeps/s390/multiarch/strlen-c.c: Likewise.
	* sysdeps/s390/multiarch/strlen-vx.S: Likewise.
	* sysdeps/s390/multiarch/strlen.c: Likewise.
	* sysdeps/s390/multiarch/wcslen-c.c: Likewise.
	* sysdeps/s390/multiarch/wcslen-vx.S: Likewise.
	* sysdeps/s390/multiarch/wcslen.c: Likewise.
	* string/strlen.c (STRLEN): Define and use macro.
	* sysdeps/s390/multiarch/ifunc-impl-list.c
	(IFUNC_VX_IMPL): New macro function.
	(__libc_ifunc_impl_list): Add ifunc test for strlen, wcslen.
	* benchtests/Makefile (wcsmbs-bench): New variable.
	(string-bench-all): Added wcsmbs-bench.
	* benchtests/bench-wcslen.c: New File.

	* sysdeps/s390/multiarch/ifunc-resolve.h (s390_vx_libc_ifunc,
	s390_vx_libc_ifunc2): New macro function.

	* config.h.in (HAVE_S390_VX_ASM_SUPPORT): New macro undefine.
	* sysdeps/s390/configure.ac: Add test for S390 vector instruction
	assembler support.
	* sysdeps/s390/configure: Regenerated.

	* sysdeps/s390/dl-procinfo.c (_dl_s390_cap_flags): Add z13.
	* sysdeps/s390/dl-procinfo.h (_DL_PLATFORMS_COUNT): Increased.

	* sysdeps/s390/dl-procinfo.c (_dl_s390_platforms): Add vector flag.
	* sysdeps/s390/dl-procinfo.h: Add vector capability.
	* sysdeps/unix/sysv/linux/s390/bits/hwcap.h (HWCAP_S390_VX): Define.

	* sysdeps/s390/s390-32/multiarch/Makefile (sysdep_routines):
	Remove ifunc-resolve, add memset-s390, memcpy-s390, memcmp-s390.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: Delete File.
	* sysdeps/s390/s390-32/multiarch/memcmp.S: Move to ...
	* sysdeps/s390/s390-32/multiarch/memcmp-s390.S: ... here.
	(memcmp, bcmp): Use __memcmp_default as alias source.
	* sysdeps/s390/s390-32/multiarch/memcmp.c: New File.
	* sysdeps/s390/s390-32/memcmp.S (__memcmp_g5):
	Rename to __memcmp_default.
	* sysdeps/s390/s390-32/multiarch/memcpy.S: Move to ...
	* sysdeps/s390/s390-32/multiarch/memcpy-s390.S: ... here.
	(memcpy): Use __memcpy_default as alias source.
	* sysdeps/s390/s390-32/multiarch/memcpy.c: New File.
	* sysdeps/s390/s390-32/memcpy.S (__memcpy_g5):
	Rename to __memcpy_default.
	* sysdeps/s390/s390-32/multiarch/memset.S: Move to ...
	* sysdeps/s390/s390-32/multiarch/memset-s390.S: ... here.
	(memset): Use __memset_default as alias source.
	* sysdeps/s390/s390-32/multiarch/memset.c: New File.
	* sysdeps/s390/s390-32/memset.S (__memset_g5):
	Rename to __memset_default.
	* sysdeps/s390/s390-64/multiarch/Makefile (sysdep_routines):
	Remove ifunc-resolve, add memset-s390x, memcpy-s390x, memcmp-s390x.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: Delete File.
	* sysdeps/s390/s390-64/multiarch/memcmp.S: Move to ...
	* sysdeps/s390/s390-64/multiarch/memcmp-s390x.S: ... here.
	(memcmp, bcmp): Use __memcmp_default as alias source.
	* sysdeps/s390/s390-64/multiarch/memcmp.c: New File.
	* sysdeps/s390/s390-64/memcmp.S (__memcmp_z900):
	Rename to __memcmp_default.
	* sysdeps/s390/s390-64/multiarch/memcpy.S: Move to ...
	* sysdeps/s390/s390-64/multiarch/memcpy-s390x.S: ... here.
	(memcpy): Use __memcpy_default as alias source.
	* sysdeps/s390/s390-64/multiarch/memcpy.c: New File.
	* sysdeps/s390/s390-64/memcpy.S (__memcpy_z900):
	Rename to __memcpy_default.
	* sysdeps/s390/s390-64/multiarch/memset.S: Move to ...
	* sysdeps/s390/s390-64/multiarch/memset-s390x.S: ... here.
	(memset): Use __memset_default as alias source.
	* sysdeps/s390/s390-64/multiarch/memset.c: New File.
	* sysdeps/s390/s390-64/memset.S (__memset_z900):
	Rename to __memset_default.
	* sysdeps/s390/multiarch/ifunc-resolve.h: New File.
	* sysdeps/s390/multiarch/ifunc-impl-list.c: New File.

	[BZ #18610]
	* sysdeps/s390/fpu/bits/fenv.h (fenv_t): Rename
	__ieee_instruction_pointer to __unused.
	* sysdeps/s390/fpu/fesetenv.c (__fesetenv): Remove usage of
	__ieee_instruction_pointer.
	* sysdeps/s390/fpu/fclrexcpt.c (feclearexcept): Fix dxc-field handling.
	* sysdeps/s390/fpu/fgetexcptflg.c (fegetexceptflag): Likewise.
	* sysdeps/s390/fpu/fsetexcptflg.c (fesetexceptflag): Likewise.
	* sysdeps/s390/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/s390/fpu/fpu_control.h (_FPU_RESERVED):
	Mark dxc-field as reserved.

2015-08-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/start.c (_start): Call __nacl_main instead of main
	if the weak reference is not null.

2015-08-25  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/strcmp.S: Remove "#if !IS_IN (libc)".

	[BZ #11214]
	* sysdeps/unix/sysv/linux/Makefile (tst-getpid2-ENV): Removed.

2015-08-25  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h: Define new macros.
	* sysdeps/unix/sysv/linux/accept.c: Call direct system call.
	* sysdeps/unix/sysv/linux/bind.c: Call direct system call.
	* sysdeps/unix/sysv/linux/connect.c: Call direct system call.
	* sysdeps/unix/sysv/linux/getpeername.c: Call direct system call.
	* sysdeps/unix/sysv/linux/getsockname.c: Call direct system call.
	* sysdeps/unix/sysv/linux/getsockopt.c: Call direct system call.
	* sysdeps/unix/sysv/linux/listen.c: Call direct system call.
	* sysdeps/unix/sysv/linux/recv.c: Call direct system call.
	* sysdeps/unix/sysv/linux/recvfrom.c: Call direct system call.
	* sysdeps/unix/sysv/linux/recvmsg.c: Call direct system call.
	* sysdeps/unix/sysv/linux/send.c: Call direct system call.
	* sysdeps/unix/sysv/linux/sendmsg.c: Call direct system call.
	* sysdeps/unix/sysv/linux/sendto.c: Call direct system call.
	* sysdeps/unix/sysv/linux/setsockopt.c: Call direct system call.
	* sysdeps/unix/sysv/linux/shutdown.c: Call direct system call.
	* sysdeps/unix/sysv/linux/socket.c: Call direct system call.
	* sysdeps/unix/sysv/linux/socketpair.c: Call direct system call.

2015-08-25  Paul E. Murphy  <murphyp@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/sysdep.h (ABORT_TRANSACTION): Use
	register other than r0 for tabort, it has special meaning.
	* sysdeps/powerpc/powerpc64/sysdep.h (ABORT_TRANSACTION): Likewise.
	* sysdeps/unix.sysv/linux/powerpc/syscall.S (syscall): Abort
	transaction before starting syscall.

2015-08-25  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strstr.S: Handle worst case.

2015-08-25  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/strlen.S: Replace %xmm[8-12] with %xmm[0-4].

	* sysdeps/x86_64/rtld-memcmp.c: Removed.
	* sysdeps/x86_64/rtld-memset.S: Likewise.
	* sysdeps/x86_64/rtld-strchr.S: Likewise.
	* sysdeps/x86_64/rtld-strlen.S: Likewise.
	* sysdeps/x86_64/multiarch/rtld-memcmp.c: Likewise.
	* sysdeps/x86_64/multiarch/rtld-memset.S: Likewise.

	* sysdeps/x86_64/memset.S: Replace %xmm8 with %xmm0.

2015-08-25  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* debug/strcpy_chk.c: Improve performance.
	* debug/stpcpy_chk.c: Likewise.
	* sysdeps/x86_64/strcpy_chk.S: Remove.
	* sysdeps/x86_64/stpcpy_chk.S: Remove.

	[BZ #18240]
	* misc/hsearch_r.c (__hcreate_r): Handle overflow.

2015-08-25  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #15128]
	* sysdeps/x86_64/Makefile [$(subdir) == elf] (tests): Add
	ifuncmain8.
	(modules-names): Add ifuncmod8.
	($(objpfx)ifuncmain8): New rule.
	* sysdeps/x86_64/dl-machine.h: Include <dl-procinfo.h> and
	<cpuid.h>.
	(elf_machine_runtime_setup): Use _dl_runtime_resolve_sse,
	_dl_runtime_resolve_avx, or _dl_runtime_resolve_avx512,
	_dl_runtime_profile_sse, _dl_runtime_profile_avx, or
	_dl_runtime_profile_avx512, based on HAS_ARCH_FEATURE.
	* sysdeps/x86_64/dl-trampoline.S: Rewrite.
	* sysdeps/x86_64/dl-trampoline.h: Likewise.
	* sysdeps/x86_64/ifuncmain8.c: New file.
	* sysdeps/x86_64/ifuncmod8.c: Likewise.
	* sysdeps/x86_64/nptl/tcb-offsets.sym (RTLD_SAVESPACE_SSE):
	Removed.
	* sysdeps/x86_64/nptl/tls.h (__128bits): Removed.
	(tcbhead_t): Change rtld_must_xmm_save to __glibc_unused1.
	Change rtld_savespace_sse to __glibc_unused2.
	(RTLD_CHECK_FOREIGN_CALL): Removed.
	(RTLD_ENABLE_FOREIGN_CALL): Likewise.
	(RTLD_PREPARE_FOREIGN_CALL): Likewise.
	(RTLD_FINALIZE_FOREIGN_CALL): Likewise.

2015-08-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/bzero.S (__bzero): Remove.

2015-08-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/math_private.h (libc_feholdsetround_aarch64_ctx):
	Unconditionally set __fpcr to avoid uninialized warning.
	(libc_feholdsetround_noex_aarch64_ctx): Likewise.

2015-08-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/arena.c (arena_get_retry): Don't use main_arena if it
	is corrupt.

	* malloc/arena.c (arena_get2): Drop unused argument.
	(arena_lock): Adjust.
	(arena_get_retry): Likewise.

2015-08-24  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_IPC64):
	Don't define.
	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h
	(__ASSUME_IPC64): Don't undef.
	* sysdeps/unix/sysv/linux/msgctl.c: Don't check for __ASSUME_IPC64.
	* sysdeps/unix/sysv/linux/semctl.c: Likewise.
	* sysdeps/unix/sysv/linux/shmctl.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/msgctl.c: Remove.
	* sysdeps/unix/sysv/linux/i386/semctl.c: Remove.
	* sysdeps/unix/sysv/linux/i386/shmctl.c: Remove.
	* sysdeps/unix/sysv/linux/m68k/msgctl.c: Remove.
	* sysdeps/unix/sysv/linux/m68k/semctl.c: Remove.
	* sysdeps/unix/sysv/linux/m68k/shmctl.c: Remove.
	* sysdeps/unix/sysv/linux/s390/s390-32/msgctl.c: Remove.
	* sysdeps/unix/sysv/linux/s390/s390-32/semctl.c: Remove.
	* sysdeps/unix/sysv/linux/s390/s390-32/shmctl.c: Remove.
	* sysdeps/unix/sysv/linux/sh/msgctl.c: Remove.
	* sysdeps/unix/sysv/linux/sh/semctl.c: Remove.
	* sysdeps/unix/sysv/linux/sh/shmctl.c: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc32/msgctl.c: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc32/semctl.c: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc32/shmctl.c: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgctl.c: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/semctl.c: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/shmctl.c: Remove.

2015-08-21  Mike Frysinger  <vapier@gentoo.org>

	* manual/Makefile (install): Only build manual when perl is available.

2015-08-21  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr.c: Replace
	'#undef memcpy' by '#undef memchr'.

2015-08-21  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/memchr-ppc64.c: Make
	memchr not point to the internal __GI_memchr implementation.

2015-08-20  Joseph Myers  <joseph@codesourcery.com>

	* timezone/Makefile (CFLAGS-zdump.c): Remove
	-Wno-strict-prototypes.
	(CFLAGS-zic.c): Likewise.
	(CFLAGS-ialloc.c): Likewise.
	(CFLAGS-scheck.c): Likewise.

	* Makeconfig [$(enable-werror) = yes] (+gccwarn): Do not add
	-Wno-error=undef.

2015-08-20  H.J. Lu  <hongjiu.lu@intel.com>

	* i386/i686/multiarch/strcasestr-c.c: Removed.
	* x86_64/multiarch/strcasestr.c: Likewise.
	* x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Remove strcasestr.

2015-08-20  Joseph Myers  <joseph@codesourcery.com>

	* math/Makefile (CFLAGS): Don't add -Wno-uninitialized.

	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Always initialize
	variables for high and low parts before possibly modifying them.

2015-08-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/init-arch.h: Removed.
	* sysdeps/unix/sysv/linux/x86/init-arch.h: Likewise.
	* sysdeps/x86_64/cacheinfo.c: Include <init-arch.h> instead
	of "multiarch/init-arch.h".
	* sysdeps/x86_64/multiarch/init-arch.h: Renamed to ...
	* sysdeps/x86/init-arch.h: This.

2015-08-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/init-arch.c: Removed.
	* sysdeps/unix/sysv/linux/x86/init-arch.c: Likewise.

2015-08-20  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #17787]
	* manual/macros.texi: Add twoexp macro.
	* manual/filesys.texi: Fix exponents.
	* manual/llio.texi: Likewise.
	* manual/stdio.texi: Likewise.

2015-08-20  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/x86/elide.h (ELIDE_UNLOCK): Document crash due to
	incorrect use.

2015-08-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18370]
	* math/s_csqrt.c (__csqrt): Force underflow exception for results
	whose real or imaginary part has small absolute value.
	* math/s_csqrtf.c (__csqrtf): Likewise.
	* math/s_csqrtl.c (__csqrtl): Likewise.
	* math/auto-libm-test-in: Add more tests of csqrt.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2015-08-19  Gabriel F. T. Gomes  <gftg@linux.vnet.ibm.com>

	* sysdeps/powerpc/sys/platform/ppc.h (__ppc_set_ppr_med_high,
	__ppc_set_ppr_very_low): New functions.
	* manual/platform.texi: Add documentation about
	__ppc_set_ppr_med_high and __ppc_set_ppr_very_low.

2015-08-19  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/stpncpy.c (stpncpy): Improve performance using
	__strnlen/memcpy/memset.

2015-08-19  Andrew Senkevich  <andrew.senkevich@intel.com>

	[BZ #18796]
	* scripts/test-installation.pl: Don't add -lmvec to build options if
	libmvec wasn't built.

2015-08-19   Petar Jovanovic  <petar.jovanovic@rt-rk.com>

	[BZ #14341]
	* elf/dynamic-link.h (elf_machine_lazy_rel): Properly handle the
	case when there is a gap between DT_REL and DT_JMPREL sections.
	* sysdeps/x86_64/Makefile (tests): Add tst-split-dynreloc.
	(LDFLAGS-tst-split-dynreloc): New.
	(tst-split-dynreloc-ENV): Likewise.
	* sysdeps/x86_64/tst-split-dynreloc.c: New file.
	* sysdeps/x86_64/tst-split-dynreloc.lds: Likewise.

2015-08-19  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18822]
	* sysdeps/unix/sysv/linux/xstatconv.h (__xstat_conv): Add
	attribute_hidden.
	(__xstat64_conv): Likewise.
	(__xstat32_conv): Likewise.

2015-08-19  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18822]
	* sysdeps/unix/sysv/linux/i386/makecontext.S (__makecontext):
	Don't load %ebx when calling __setcontext.  Call __setcontext
	with HIDDEN_JUMPTARGET.
	* sysdeps/unix/sysv/linux/i386/setcontext.S (__setcontext): Add
	libc_hidden_def.

2015-08-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/Makefile
	[$(subdir) == string] (sysdep_routines): Moved to ...
	* sysdeps/i386/Makefile: Here.
	* sysdeps/i386/i686/cacheinfo.c: Moved to ...
	* sysdeps/i386/cacheinfo.c: Here.
	* sysdeps/unix/sysv/linux/i386/sysconf.c: Removed.
	* sysdeps/unix/sysv/linux/i386/i686/sysconf.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysconf.c: Moved to ...
	* sysdeps/unix/sysv/linux/x86/sysconf.c: Here.

2015-08-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.h (HAS_I586): Defined to 1 if
	__i586__ is defined.
	(HAS_I686): Defined to 1 if __i686__ is defined.

2015-08-19  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile [$(have-z-execstack) = yes]
	(CPPFLAGS-tst-execstack.c): New variable.

	* login/tst-utmp.c [_HAVE_UT_TYPE || defined UTMPX]: Change
	conditional to [defined UTMPX || _HAVE_UT_TYPE].
	[_HAVE_UT_TV || defined UTMPX]: Change conditional to [defined
	UTMPX || _HAVE_UT_TV].
	[_HAVE_UT_TV - 0 || defined UTMPX]: Change conditional to [defined
	UTMPX || _HAVE_UT_TV - 0].

2015-08-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/dl-machine.h [__mips_isa_rev < 6]: Change
	conditionals to [!defined __mips_isa_rev || __mips_isa_rev < 6].
	* sysdeps/mips/machine-gmon.h [__mips_isa_rev < 6]: Likewise.

2015-08-18  Carlos Eduardo Seo  <cseo@linux.vnet.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c:
	(_dl_powerpc_cap_flags): Added missing strings for some
	hwcap features.
	* sysdeps/powerpc/dl-procinfo.h: Updated hwcap bit count.

2015-08-18  Paul Eggert  <eggert@cs.ucla.edu>

	Port the 0x7efe...feff pattern to GCC 6.
	See Steve Ellcey's bug report in:
	https://sourceware.org/ml/libc-alpha/2015-07/msg00673.html
	* string/memrchr.c (MEMRCHR):
	* string/rawmemchr.c (RAWMEMCHR):
	* string/strchr.c (strchr):
	* string/strchrnul.c (STRCHRNUL):
	Rewrite code to avoid issues with signed shift overflow.

2015-08-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.c (init_cpu_features): Check
	whether cpuid is available only if HAS_CPUID is 0.
	* sysdeps/x86/cpu-features.h (HAS_CPUID): New.
	(HAS_I586): Likewise.
	(HAS_I686): Likewise.

2015-08-18  Zack Weinberg  <zackw@panix.com>

	* misc/Versions (libc): Add GLIBC_2.23.

2015-08-18  Alan Modra  <amodra@gmail.com>

	[BZ #18421]
	* sysdeps/hppa/start.S [SHARED]: Use .section .data.rel.ro and define
	.Lp__global.
	(_start): Load %dp via .Lp__global.
	[!SHARED]: Use .section .rodata.

2015-08-18  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/timerfd.h: New file.
	* sysdeps/unix/sysv/linux/hppa/sys/timerfd.h: Delete.

2015-08-18  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/signalfd.h: New file.
	* sysdeps/unix/sysv/linux/hppa/sys/signalfd.h: Delete.

2015-08-18  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/inotify.h: New file.
	* sysdeps/unix/sysv/linux/hppa/sys/inotify.h: Delete.

2015-08-18  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/eventfd.h: New file.
	* sysdeps/unix/sysv/linux/hppa/sys/eventfd.h: Delete.

2015-08-18  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/epoll.h: New file.
	* sysdeps/unix/sysv/linux/hppa/sys/epoll.h: Delete.

2015-08-18  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/sigaction.h (SA_RESETHAND,
	SA_NODEFER, SA_RESTART): Define when __USE_XOPEN2K8 is defined.

2015-08-18  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/shm.h (SHM_EXEC): Define.

2015-08-18  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/atomic.h: Delete
	kernel-features.h include.  Delete __ASSUME_LWS_CAS checks.
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	(__ASSUME_LWS_CAS): Delete.

2015-08-18  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/hppa/configure.ac: Delete binutils tls checks.
	* sysdeps/hppa/configure: Regenerated.
	* sysdeps/hppa/dl-machine.h: Delete USE_TLS and USE___THREAD checks.
	* sysdeps/hppa/libc-tls.c: Delete USE_TLS checks.
	* sysdeps/hppa/nptl/tls.h: Likewise.

2015-08-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18823]
	* math/s_csqrt.c (__csqrt): Increase threshold and scale factor
	for scaling up small arguments.
	* math/s_csqrtf.c (__csqrtf): Likewise.
	* math/s_csqrtl.c (__csqrtl): Likewise.
	* math/auto-libm-test-in: Add more tests of csqrt.
	* math/auto-libm-test-out: Regenerated.

2015-08-17  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/Versions (libm): Add empty
	version set GLIBC_2.19.

2015-08-16  Zack Weinberg  <zackw@panix.com>

	[BZ #18681]
	* misc/regexp.h: This interface is no longer supported.
	Remove all contents, leaving only an #error directive.
	* misc/regexp.c (loc1, loc2, locs, step, advance):
	Demote to compatibility symbols.

2015-08-15  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18084]
	* debug/tst-backtrace2.c (do_test): Add test for BZ #18084.
	* sysdeps/arm/backtrace.c (__backtrace): Handle size <= 0.
	* sysdeps/i386/backtrace.c (__backtrace): Likewise.
	* sysdeps/m68k/backtrace.c (__backtrace): Likewise.
	* sysdeps/microblaze/backtrace.c (__backtrace): Likewise.
	* sysdeps/s390/s390-32/backtrace.c (__backtrace): Likewise.
	* sysdeps/s390/s390-64/backtrace.c (__backtrace): Likewise.
	* sysdeps/sparc/backtrace.c (__backtrace): Likewise.
	* sysdeps/x86_64/backtrace.c (__backtrace): Likewise.

2015-08-15  Zack Weinberg  <zackw@panix.com>

	[BZ #18795]
	* string/bits/string3.h (stpncpy): Call __stpncpy_chk if the
	buffer length is known to be too large, not if it's known to be
	small enough.
	* debug/tst-chk1.c (do_test): Do all tests for catching a buffer
	overflow at runtime, involving a length parameter, twice: once
	with a compile-time constant length parameter, once without.

2015-08-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18824]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Increase threshold for
	scaling x * y up instead of down.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/auto-libm-test-in: Add more tests of fma.
	* math/auto-libm-test-out: Regenerated.

2015-08-14  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.

2015-08-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/x86_64/fpu/multiarch/s_floorf.S (__floorf): Remove
	unnecessary movq.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyint.S (__nearbyint):
	Likewise.

2015-08-13  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of acos, acosh, asin,
	asinh, atan, atan2, atanh, cabs, cbrt, cosh, csqrt, erf, erfc,
	exp, exp2, lgamma, log, log1p, log2, pow, sin, sincos, tan, tanh
	and tgamma.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16520]
	* sysdeps/ieee754/dbl-64/s_tanh.c: Include <float.h>.
	(__tanh): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/flt-32/s_tanhf.c: Include <float.h>.
	(__tanhf): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c: Include <float.h>.
	(__tanhl): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c: Include <float.h>.
	(__tanhl): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/ldbl-96/s_tanhl.c: Include <float.h>.
	(__tanhl): Force underflow exception for arguments with small
	absolute value.
	* math/auto-libm-test-in: Add more tests of tanh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2015-08-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/cpu-features.c (init_cpu_features): Call
	__get_cpuid_max if not compiling for i586, i686 nor x86-64.

2015-08-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86/elision-conf.h: Don't include
	<cpuid.h>.

2015-08-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86/elision-conf.c (elision_init):
	Replace HAS_RTM with HAS_CPU_FEATURE (RTM).

2015-08-13  H.J. Lu  <hongjiu.lu@intel.com>

	* math/Makefile ($(addprefix $(objpfx), $(libm-vec-tests))):
	Remove $(objpfx)init-arch.o.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Remove
	init-arch.
	* sysdeps/x86_64/fpu/math-tests-arch.h (avx_usable): Removed.
	(INIT_ARCH_EXT): Defined as empty.
	(CHECK_ARCH_EXT): Replace HAS_XXX with HAS_ARCH_FEATURE (XXX).
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos2_core.S: Remove
	__init_cpu_features call.  Replace HAS_XXX with
	HAS_CPU_FEATURE/HAS_ARCH_FEATURE (XXX).
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp2_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log2_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow2_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin2_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos2_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf4_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf8_core.S: Likewise.

2015-08-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/fpu/multiarch/e_expf.c: Replace HAS_XXX
	with HAS_CPU_FEATURE/HAS_ARCH_FEATURE (XXX).
	* sysdeps/i386/i686/fpu/multiarch/s_cosf.c: Likewise.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf.c: Likewise.
	* sysdeps/i386/i686/fpu/multiarch/s_sincosf.c: Likewise.
	* sysdeps/i386/i686/fpu/multiarch/s_sinf.c: Likewise.
	* sysdeps/i386/i686/multiarch/ifunc-impl-list.c: Likewise.
	* sysdeps/i386/i686/multiarch/s_fma.c: Likewise.
	* sysdeps/i386/i686/multiarch/s_fmaf.c: Likewise.
	* sysdeps/i386/i686/multiarch/bcopy.S: Remove __init_cpu_features
	call.  Merge SHARED and !SHARED.  Add LOAD_GOT_AND_RTLD_GLOBAL_RO.
	Use LOAD_FUNC_GOT_EAX to load function address.  Replace HAS_XXX
	with HAS_CPU_FEATURE/HAS_ARCH_FEATURE (XXX).
	* sysdeps/i386/i686/multiarch/bzero.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strnlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp.S: Likewise.

2015-08-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/multiarch/e_asin.c: Replace HAS_XXX with
	HAS_CPU_FEATURE/HAS_ARCH_FEATURE (XXX).
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_pow.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_fma.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_fmaf.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_ceil.S: Use
	LOAD_RTLD_GLOBAL_RO_RDX and HAS_CPU_FEATURE (SSE4_1).
	* sysdeps/x86_64/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_floorf.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyint.S : Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyintf.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_rintf.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_rintf.S : Likewise.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Likewise.
	* sysdeps/x86_64/multiarch/sched_cpucount.c: Likewise.
	* sysdeps/x86_64/multiarch/strstr.c: Likewise.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/test-multiarch.c: Likewise.
	* sysdeps/x86_64/multiarch/memcmp.S: Remove __init_cpu_features
	call.  Add LOAD_RTLD_GLOBAL_RO_RDX.  Replace HAS_XXX with
	HAS_CPU_FEATURE/HAS_ARCH_FEATURE (XXX).
	* sysdeps/x86_64/multiarch/memcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/strcat.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strspn.S: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy.S: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp.S: Likewise.

2015-08-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/dl-machine.h: Include <cpu-features.c>.
	(dl_platform_init): Call init_cpu_features.
	* sysdeps/i386/dl-procinfo.c (_dl_x86_cpu_features): New.
	* sysdeps/i386/i686/cacheinfo.c
	(DISABLE_PREFERRED_MEMORY_INSTRUCTION): Removed.
	* sysdeps/i386/i686/multiarch/Makefile (aux): Remove init-arch.
	* sysdeps/i386/i686/multiarch/Versions: Removed.
	* sysdeps/i386/i686/multiarch/ifunc-defines.sym (KIND_OFFSET):
	Removed.
	* sysdeps/i386/ldsodefs.h: Include <cpu-features.h>.
	* sysdeps/unix/sysv/linux/x86/Makefile
	(libpthread-sysdep_routines): Remove init-arch.
	* sysdeps/unix/sysv/linux/x86_64/dl-procinfo.c: Include
	<sysdeps/x86_64/dl-procinfo.c> instead of
	sysdeps/generic/dl-procinfo.c>.
	* sysdeps/x86/Makefile [$(subdir) == csu] (gen-as-const-headers):
	Add cpu-features-offsets.sym and rtld-global-offsets.sym.
	[$(subdir) == elf] (sysdep-dl-routines): Add dl-get-cpu-features.
	[$(subdir) == elf] (tests): Add tst-get-cpu-features.
	[$(subdir) == elf] (tests-static): Add
	tst-get-cpu-features-static.
	* sysdeps/x86/Versions: New file.
	* sysdeps/x86/cpu-features-offsets.sym: Likewise.
	* sysdeps/x86/cpu-features.c: Likewise.
	* sysdeps/x86/cpu-features.h: Likewise.
	* sysdeps/x86/dl-get-cpu-features.c: Likewise.
	* sysdeps/x86/libc-start.c: Likewise.
	* sysdeps/x86/rtld-global-offsets.sym: Likewise.
	* sysdeps/x86/tst-get-cpu-features-static.c: Likewise.
	* sysdeps/x86/tst-get-cpu-features.c: Likewise.
	* sysdeps/x86_64/dl-procinfo.c: Likewise.
	* sysdeps/x86_64/cacheinfo.c (__cpuid_count): Removed.
	Assume USE_MULTIARCH is defined and don't check it.
	(is_intel): Replace __cpu_features with GLRO(dl_x86_cpu_features).
	(is_amd): Likewise.
	(max_cpuid): Likewise.
	(intel_check_word): Likewise.
	(__cache_sysconf): Don't call __init_cpu_features.
	(__x86_preferred_memory_instruction): Removed.
	(init_cacheinfo): Don't call __init_cpu_features. Replace
	__cpu_features with GLRO(dl_x86_cpu_features).
	* sysdeps/x86_64/dl-machine.h: <cpu-features.c>.
	(dl_platform_init): Call init_cpu_features.
	* sysdeps/x86_64/ldsodefs.h: Include <cpu-features.h>.
	* sysdeps/x86_64/multiarch/Makefile (aux): Remove init-arch.
	* sysdeps/x86_64/multiarch/Versions: Removed.
	* sysdeps/x86_64/multiarch/cacheinfo.c: Likewise.
	* sysdeps/x86_64/multiarch/init-arch.c: Likewise.
	* sysdeps/x86_64/multiarch/ifunc-defines.sym (KIND_OFFSET):
	Removed.
	* sysdeps/x86_64/multiarch/init-arch.h: Rewrite.

2015-08-12  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18820]
	* libio/Makefile (test-fmemopen-mem): New test.
	* libio/test-fmemopen.c (do_bz18820): New test.
	* libio/fmemopen.c (__fmemopen): Fix memory leak.
	* libio/oldfmemopen.c (__old_fmemopen): Likewise.

2015-08-12  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #16734]
	* libio/libioP.h (ROUND_TO_PAGE, ALLOC_BUF, ALLOC_WBUF): Delete.
	(FREE_BUF): Delete.
	* libio/libio.h (_IO_FILE_complete): Delete unused _freeres_size.
	* libio/genops.c (_IO_setb): Use malloc and free directly.
	(_IO_default_doallocate, _IO_default_finish): Likewise.
	( _IO_unbuffer_all): Likewise.
	( libc_freeres_fn): Likewise.
	* libio/filedoalloc.c (_IO_file_doallocate): Likewise.
	* libio/wfiledoalloc.c (_IO_wfile_doallocate): Likewise.
	* libio/wgenops.c (_IO_wsetb, _IO_wdefault_finish): Likewise.
	(_IO_wdefault_doallocate): Likewise.

2015-08-11  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18086]
	* sysdeps/posix/nice.c (nice): Restore old errno.
	* posix/tst-nice.c (do_test): Add test for BZ #18086.

2015-08-10  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c: Fix ifunc.

2015-08-10  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/powerpc/powerpc64/power7/memmove.S (bcopy): Changing to
	__bcopy and add a weak_alias to bcopy.
	* sysdeps/powerpc/powerpc64/power7/strstr.S (strstr): Use __strnlen
	for static build.

	* string/stpcpy.c (__stpcpy): Use STPCPY to redefine symbol name and
	cleanup macro usage.
	* string/strcpy.c (strcpt): Use STRCPY to redefine symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-power7.S: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/stpcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/stpcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/strcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c
	[SHARED && IS_IN (libc)]: Include <string/strcpy.c>.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c
	[SHARED && IS_IN (libc)]: Include <string/stpcpy.c>.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-power7.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strcpy.c: Likewise.

	* sysdeps/powerpc/powerpc64/power7/strnlen.S (__strnlen): Add
	libc_hidden_def.
	(strnlen): Remove libc_hidden_builtin_def and add libc_hidden_def.

	* sysdeps/powerpc/powerpc64/power7/Makefile [$(subdir) = string]
	(sysdep_routines): Add strstr-ppc64.
	* sysdeps/powerpc/powerpc64/power7/strstr-ppc64.c: New file.

2015-08-10  Maxim Ostapenko  <m.ostapenko@partner.samsung.com>

	[BZ #18778]
	* elf/Makefile (tests): Add Add tst-nodelete2.
	(modules-names): Add tst-nodelete2mod.
	(tst-nodelete2mod.so-no-z-defs): New.
	($(objpfx)tst-nodelete2): Likewise.
	($(objpfx)tst-nodelete2.out): Likewise.
	(LDFLAGS-tst-nodelete2): Likewise.
	* elf/dl-close.c (_dl_close_worker): Move DF_1_NODELETE clearing
	out of loop through all loaded libraries.
	* elf/tst-nodelete2.c: New file.
	* elf/tst-nodelete2mod.c: Likewise.
	* elf/tst-znodelete-zlib.cc: Delete.

2015-08-11  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/openat.c (OPENAT_NOT_CANCEL): Don't define.
	* sysdeps/unix/sysv/linux/wordsize-64/openat.c
	(__openat64_nocancel): Likewise.

2015-08-11  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of acosh, asin, asinh,
	atanh, cabs, carg, cbrt, cosh, csqrt, erf, erfc, exp, exp10,
	expm1, hypot, log, log10, log1p, log2, pow, sinh, tan and tgamma.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-08-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18790]
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c (__tanhl): Increase
	threshold for returning +/- 1.
	* math/auto-libm-test-in: Add more tests of tanh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2015-08-10  Andreas Schwab  <schwab@suse.de>

	[BZ #18781]
	* sysdeps/unix/sysv/linux/openat.c (__OPENAT) [MORE_OFLAGS]: Add
	MORE_OFLAGS to oflag.
	* io/test-lfs.c (do_test): Test openat64.

2015-08-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18789]
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c (__ieee754_sinhl): Use
	smaller threshold for returning the argument.
	* math/auto-libm-test-in: Add more tests of sinh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2015-08-09  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18674]
	* sysdeps/i386/tst-auditmod3b.c (la_objsearch): Add a missing
	break.

2015-08-09  Andreas Schwab  <schwab@linux-m68k.org>

	* timezone/Makefile (tzbases, tzlinks, tzfiles): Don't define.
	(generated): Don't add $(addprefix z.,$(tzfiles)).

2015-08-09  Mike Frysinger  <vapier@gentoo.org>

	* nptl/tst-cancel-wrappers.sh: Change 3rd arg to gensub to 1.
	* scripts/sysd-rules.awk: Likewise.

2015-08-09  Mike Frysinger  <vapier@gentoo.org>

	* iconvdata/tst-tables.sh: Change echo -n to printf.
	* nss/db-Makefile: Likewise.
	* posix/tst-getconf.sh: Likewise.
	* stdio-common/tst-unbputc.sh: Likewise.

2015-08-09  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/mman.h [__USE_MISC]: Move all
	MADV_*_PAGES defines behind this feature check.

2015-08-09  John David Anglin  <danglin@gcc.gnu.org>

	[BZ #18480]
	* sysdeps/unix/sysv/linux/hppa/sysdep.h (LOAD_ARGS_0, LOAD_ARGS_1,
	LOAD_ARGS_2, LOAD_ARGS_3, LOAD_ARGS_4, LOAD_ARGS_5, LOAD_ARGS_6):
	Define.
	(LOAD_REGS_0, LOAD_REGS_1, LOAD_REGS_2, LOAD_REGS_3, LOAD_REGS_4,
	LOAD_REGS_5, LOAD_REGS_6): Update.
	(INTERNAL_SYSCALL): Update using new LOAD defines.
	(INTERNAL_SYSCALL_NCS): Likewise.
	* sysdeps/unix/sysv/linux/hppa/syscall.c (syscall): Likewise.

2015-08-08  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #16734]
	* libio/genops.c (_IO_unbuffer_all): Free wide buffer as well.

2015-08-08  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #17905]
	* catgets/Makefile (tst-catgets-mem): New test.
	* catgets/catgets.c (catopen): Don't use unbounded alloca.
	* catgets/open_catalog.c (__open_catalog): Likewise.
	* catgets/tst-catgets.c (do_bz17905): Test unbounded alloca.

2015-08-08  John David Anglin  <danglin@gcc.gnu.org>

	[BZ #18787]
	* sysdeps/unix/sysv/linux/hppa/bits/atomic.h (_LWS_CLOBBER): Revise
	clobber registers.
	(atomic_compare_and_exchange_val_acq): Use register asms to assign
	operand registers.  Use register %r20 for EAGAIN and EDEADLOCK checks.
	Cast return to __typeof (oldval).

2015-08-08  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/microblaze/sysdep.h: Wrap the whole file
	in _LINUX_MICROBLAZE_SYSDEP_H defines.  Include sysdeps/unix/sysdep.h
	and delete sys/syscall.h include.

2015-08-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16517]
	* sysdeps/ieee754/dbl-64/s_tan.c: Include <float.h>.
	(tan): Force underflow exception for arguments with small absolute
	value.
	* sysdeps/ieee754/flt-32/k_tanf.c: Include <float.h>.
	(__kernel_tanf): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Include <float.h>.
	(__kernel_tanl): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c: Include <float.h>.
	(__kernel_tanl): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-96/k_tanl.c: Include <float.h>.
	(__kernel_tanl): Force underflow exception for arguments with
	small absolute value.
	* math/auto-libm-test-in: Add more tests of tan.
	* math/auto-libm-test-out: Regenerated.

2015-08-07  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix sysdeps/i386/fpu/s_scalbn.S build

	* math/Versions (libc: GLIBC_2_22): New (empty) version set.

2015-08-07  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/hppa/dl-symaddr.c (_dl_symbol_address): Add rtld_hidden_def.

2015-08-07  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix gcrt0.o compilation

	When static-start-installed-name is different from
	start-installed-name, we must not use the shared objects.

	* csu/Makefile
	(extra-objs): Add gmon-start.o when building shared library and
	$(static-start-installed-name) is different from
	$(start-installed-name).
	$(objpfx)g$(static-start-installed-name): When building shared
	library and $(static-start-installed-name) is different from
	$(static-start-installed-name), revert to non-shared rule,
	i.e. using $(objpfx)% and gmon-start.o.

2015-08-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16519]
	* sysdeps/ieee754/dbl-64/e_sinh.c: Include <float.h>.
	(__ieee754_sinh): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/flt-32/e_sinhf.c: Include <float.h>.
	(__ieee754_sinhf): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c: Include <float.h>.
	(__ieee754_sinhl): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Include <float.h>.
	(__ieee754_sinhl): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-96/e_sinhl.c: Include <float.h>.
	(__ieee754_sinhl): Force underflow exception for arguments with
	small absolute value.
	* math/auto-libm-test-in: Add more tests of sinh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2015-08-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* libio/oldfileops.c: Include unistd.h.

2015-08-06  Mike Frysinger  <vapier@gentoo.org>

	* stdlib/isomac.c: Include ctype.h.

2015-08-06  Arjun Shankar  <arjun.is@lostca.se>

	* dirent/tst-seekdir.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* elf/tst-dlmodcount.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* elf/tst-order-main.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* elf/tst-pie2.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* inet/tst-ether_aton.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* misc/tst-mntent.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* misc/tst-tsearch.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* posix/tst-regexloc.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* resolv/tst-aton.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* stdio-common/test-fwrite.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* stdio-common/tst-ferror.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* stdio-common/tst-printf.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* stdio-common/tst-printfsz.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* stdlib/tst-strtod.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* string/tst-strlen.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* string/tst-svc.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* time/tst-strptime.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* timezone/tst-timezone.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.

2015-08-05  Zack Weinberg  <zackw@panix.com>

	* misc/regexp.h: Update comments.

2015-08-05  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #18635]
	* sysdeps/unix/sysv/linux/m68k/m680x0/makecontext.S: Add nop
	before return label.

2015-08-05  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18661]
	* sysdeps/x86_64/fpu/s_cosf.S (__cosf): Align stack to 16 bytes
	when calling __errno_location.
	* sysdeps/x86_64/fpu/s_sincosf.S (__sincosf): Likewise.
	* sysdeps/x86_64/fpu/s_sinf.S (__sinf): Likewise.

2015-08-05  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18661]
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.S
	(__lll_timedwait_tid): Align stack to 16 bytes when calling
	__gettimeofday.

2015-08-05  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18661]
	* sysdeps/unix/sysv/linux/x86_64/__start_context.S
	(__start_context): Don't use pop to restore %rdi so that stack
	is aligned to 16 bytes when calling __setcontext.

2015-08-05  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcpy-sse2-unaligned.S: Compile
	only for libc.
	* sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S: Likewise.

2015-08-05  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/string.h: (mempcpy): Redirect to __mempcpy_inline.
	(__mempcpy): Likewise.  (__mempcpy_inline): New inline function.
	* sysdeps/sparc/bits/string.h: (_HAVE_STRING_ARCH_mempcpy): Define.

2015-08-05  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/memccpy.c (memccpy):
	Improve performance by using memchr/memcpy/__mempcpy.

2015-08-05  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/strncpy.c (strncpy):
	Improve performance by using __strnlen/memcpy.

2015-08-05  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/feenablxcpt.c (feenableexcept):
	Optimize to avoid an unnecessary FPCR read.

2015-08-05  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv):
	Optimize to reduce FPCR/FPSR accesses.

2015-08-05  H.J. Lu  <hongjiu.lu@intel.com>

	* locale/loadarchive.c (_nl_archive_subfreeres): Also check
	dead->data[category] != NULL.

2015-08-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18647]
	* sysdeps/ieee754/flt-32/e_powf.c (__ieee754_powf): For large y
	and |x| close to 1, use absolute value of x when computing log.
	* math/auto-libm-test-in: Add more tests of pow.
	* math/auto-libm-test-out: Regenerated.

2015-08-05  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/arm/mmap.c: Add file.
	* sysdeps/unix/sysv/linux/arm/mmap.S: Remove file.
	* sysdeps/unix/sysv/linux/arm/mmap64.S: Likewise.

2015-08-05  Marko Myllynen  <myllynen@redhat.com>

	[BZ #18525]
	* locales/km_KH: Remove timezone definition.
	* locales/lo_LA: Likewise.
	* locales/my_MM: Likewise.
	* locales/nan_TW@latin: Likewise.
	* locales/th_TH: Likewise.
	* locales/uk_UA: Likewise.

2015-08-05  Daniel Marjam√§ki  <daniel.marjamaki@evidente.se>

	[BZ #18265]
	* wcsmbs/wchar.h (wcscat): Add __nonnull attribute.
	(wcsncat): Likewise.
	(wcscmp): Likewise.
	(wcsncmp): Likewise.

2015-08-05  Mike Frysinger  <vapier@gentoo.org>

	* test-skeleton.c (usage): New function.
	(main): Call usage when opt is '?'.

2015-08-05  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/mmap64.c: Move MMAP2_PAGE_SHIFT define
	before first use.

2015-08-05  Mike Frysinger  <vapier@gentoo.org>

	* nptl/allocatestack.c (allocate_stack): Move stacktop decl down to
	bottom and under _STACK_GROWS_DOWN.  Move the stacktop assignment
	in there too.

2015-08-05  Carlos O'Donell  <carlos@systemhalted.org>

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.22.90"

	* version.h (RELEASE): Set to "stable".
	(VERSION): Set to "2.22"
	* include/features.h (__GLIBC_MINOR__): Set to 22.

2015-08-04  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/tilepro/bits/atomic.h (__atomic_update):
	Restructure macro to avoid "value computed is not used" warning.
	(atomic_compare_and_exchange_val_acq): Likewise.

2015-08-04  Andreas Schwab  <schwab@suse.de>

	[BZ #18635]
	* sysdeps/unix/sysv/linux/i386/makecontext.S: Terminate FDE before
	ret.
	* sysdeps/i386/i686/Makefile (test-xfail-tst-makecontext): Remove.

2015-08-01  Carlos O'Donell  <carlos@redhat.com>

	* po/pl.po: Updated translation.
	* po/uk.po: Likewise.
	* po/fi.po: Likewise.
	* po/ko.po: Likewise.
	* po/ru.po: Likewise.
	* po/vi.po: Likewise.

2015-07-31  Zack Weinberg  <zackw@panix.com>

	[BZ #18681]
	* regexp.h: Add unconditional #warning stating that this header
	will be removed soon.  Revise banner comment to match.
	(compile): Consistently use ERROR instead of RETURN to report
	errors (partial fix for BZ #18681).
	* regexp.c: Don't include regexp.h. Remove some unnecessary
	declarations.

2015-07-31  Carlos O'Donell  <carlos@redhat.com>

	* po/libc.pot: Regenerated.

2015-07-30  Andrew Senkevich  <andrew.senkevich@intel.com>

	[BZ #18740]
	* sysdeps/x86_64/fpu/Makefile (double-vlen2-arch-ext-cflags,
	float-vlen4-arch-ext-cflags): Removed.
	* math/Makefile (CFLAGS-test-double-vlen2-wrappers.c,
	CFLAGS-test-float-vlen4-wrappers.c): Likewise.

2015-07-30  Mike Frysinger  <vapier@gentoo.org>

	[BZ #14113]
	* sysdeps/hppa/nptl/bits/pthreadtypes.h (pthread_mutex_t): Change
	aligned to __aligned__.
	(pthread_cond_t, pthread_rwlock_t): Likewise.

2015-07-30  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/hppa/lowlevellock.h: Remove file.

2015-07-30  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/bits/sigaction.h: Include bits/wordsize.h.
	(struct sigaction): Change sa_flags from a long to an int, and add
	__glibc_reserved0 before it for padding when __WORDSIZE is 64.

2015-07-30  Mike Frysinger  <vapier@gentoo.org>

	* hppa/sysdep.h: Delete sys/syscall.h and config.h includes.
	* sysdeps/unix/sysv/linux/hppa/sysdep-cancel.h: Delete
	sysdeps/generic/sysdep.h include.
	* sysdeps/unix/sysv/linux/hppa/sysdep.h: Wrap the whole file in
	_LINUX_HPPA_SYSDEP_H defines.  Include sysdeps/unix/sysdep.h and
	sysdeps/hppa/sysdep.h.
	(ENTRY, PSEUDO): Undefine before defining.

2015-07-30  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/sysdep.h (INLINE_SYSCALL): Rewrite
	from scratch to use INTERNAL_SYSCALL.

2015-07-29  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18078]
	* scripts/check-localplt.awk: Support alternate relocations.
	* scripts/localplt.awk: Also check relocations in DT_RELA/DT_REL
	sections.
	* sysdeps/unix/sysv/linux/i386/localplt.data: Mark free and
	malloc entries with + REL R_386_GLOB_DAT.
	* sysdeps/x86_64/localplt.data: New file.

2015-07-29  Andrew Senkevich  <andrew.senkevich@intel.com>

	[BZ #18731]
	* sysdeps/x86_64/fpu/math-tests-arch.h: Added AVX runtime check.
	* sysdeps/x86_64/fpu/test-double-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8.c: Likewise.

2015-07-27  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/localplt.data: Delete __tls_get_addr.

2015-07-27  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/ia64/bits/atomic.h (atomic_exchange_and_add): Define
	directly in terms of __sync_fetch_and_add and delete (int) cast.

2015-07-27  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/Makefile (CPPFLAGS): Delete
	the -D_ASM_IA64_CURRENT_H flag.

2015-07-27  Mike Frysinger  <vapier@gentoo.org>

	[BZ #18641]
	* pwd/pwd.h (putpwent): Delete __nonnull markings.

2015-07-27  Andreas Schwab  <schwab@suse.de>

	* conform/conformtest.pl (checknamespace): Filter out string
	literals while tokenizing.

2015-07-26  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/nios2/dl-sysdep.h (DL_EXTERN_PROTECTED_DATA): Define.
	* sysdeps/nios2/dl-machine.h (elf_machine_type_class): Handle
	ELF_RTYPE_CLASS_EXTERN_PROTECTED_DATA.

2015-07-26  Chung-Lin Tang  <cltang@codesourcery.com>

	* nptl/tst-join7mod.c: Add #include <string.h>.

2015-07-25  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/nios2/libm-test-ulps: Update.

2015-07-25  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/unix/sysv/linux/nios2/setcontext.S (__setcontext):
	Fix order of arguments to the rt_sigprocmask syscall.
	* sysdeps/unix/sysv/linux/nios2/swapcontext.S (__swapcontext):
	Likewise.

2015-07-24  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/bits/fcntl.h (O_SHLOCK, O_EXLOCK): Macros removed.

2015-07-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #18457]
	* nptl/Makefile (tests): New test case tst-join7.
	(modules-names): New test case module tst-join7mod.
	* nptl/tst-join7.c: New file.
	* nptl/tst-join7mod.c: New file.
	* Makeconfig (tls-model): Pass -ftls-model=initial-exec for
	all translation units in libc.so, libpthread.so and rtld.

2015-07-24  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2015-07-24  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86_64/fpu/multiarch/svml_d_cos8_core.S: Fixed AVX512 IFUNC.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos8_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf16_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_wrapper_impl.h: Fixed wrappers to AVX2.
	* sysdeps/x86_64/fpu/svml_s_wrapper_impl.h: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf16_core_avx512.S: Fixed KNL
	implementation.

2015-07-24  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	[BZ #17711]
	* sysdeps/aarch64/dl-sysdep.h (DL_EXTERN_PROTECTED_DATA): Define.
	* sysdeps/aarch64/dl-machine.h (elf_machine_type_class): Handle
	ELF_RTYPE_CLASS_EXTERN_PROTECTED_DATA.
	* sysdeps/arm/dl-sysdep.h (DL_EXTERN_PROTECTED_DATA): Define.
	* sysdeps/arm/dl-machine.h (elf_machine_type_class): Handle
	ELF_RTYPE_CLASS_EXTERN_PROTECTED_DATA.

2015-07-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* stdlib/cxa_thread_atexit_impl.c: Use the lock name dl_load_lock
	instead of just saying load lock in the comments.

2015-07-23  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/Subdirs: Moved ...
	* sysdeps/posix/Subdirs: ... here.
	* login/pty.h (struct termios, struct winsize): Add forward decls.
	* login/openpty.c (openpty): Put ioctl call under [TIOCSWINSZ].
	* sysdeps/nacl/glob.c: Just #include <sysdeps/wordsize-64/glob.c>.
	* sysdeps/arm/nacl/libc.abilist: Updated.
	* sysdeps/nacl/libutil.abilist: New file.

	* bits/signum.h: Update comments to mention 1003.1-2013 too.
	(SIGWINCH): New macro.

	* sysdeps/nacl/getdtsz.c (getdtablesize): Add missing weak_alias.
	* sysdeps/arm/nacl/libc.abilist: Add it.

2015-07-23  Mike Frysinger  <vapier@gentoo.org>

	* conform/linknamespace.pl (@whitelist): Add matherrf and matherrl.

2015-07-23  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/bits/sigaction.h (struct sigaction):
	Swap __glibc_reserved0 and sa_flags order.

2015-07-23  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #18657]
	* elf/dl-close.c (_dl_close_worker): Don't unload DSO if there
	are pending TLS destructor calls.
	* include/link.h (struct link_map): Add concurrency note for
	L_TLS_DTOR_COUNT.
	* stdlib/cxa_thread_atexit_impl.c (__cxa_thread_atexit_impl):
	Don't touch the link map flag.  Atomically increment
	l_tls_dtor_count.
	(__call_tls_dtors): Atomically decrement l_tls_dtor_count.
	Avoid taking the load lock and don't touch the link map flag.
	* stdlib/tst-tls-atexit-nodelete.c: New test case.
	* stdlib/Makefile (tests): Use it.
	* stdlib/tst-tls-atexit.c (do_test): dlopen
	tst-tls-atexit-lib.so again before dlclose.  Add conditionals
	to allow tst-tls-atexit-nodelete test case to use it.

2015-07-22  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/bits/msq.h: Change sys/types.h include
	to bits/types.h.
	(msgqnum_t): New typedef.
	(msglen_t): Likewise.
	(struct msqid_ds): Update comment.  Change msg_qnum type to msgqnum_t
	and msg_qbytes type to msglen_t.

2015-07-22  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/bits/stat.h (struct stat): Rename
	pad0 to __glibc_reserved0.
	(struct stat64): Likewise.

2015-07-22  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/bits/sigaction.h (struct sigaction):
	Change sa_flags from a long to an int and add __glibc_reserved0 before
	it for padding.

2015-07-22  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/bits/siginfo.h (siginfo_t): Make struct
	anonymous by deleting "siginfo" name.

2015-07-21  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/nacl-interface-list.h: Remove nacl_irt_filename.
	* sysdeps/nacl/open.c (__libc_open): Use __nacl_irt_dev_filename
	rather than __nacl_irt_filename.
	* sysdeps/nacl/xstat.c (__xstat): Likewise.

	* NEWS: New item for arm-nacl port.
	* sysdeps/arm/nacl/libc.abilist: New file.
	* sysdeps/nacl/ld.abilist: New file.
	* sysdeps/nacl/libBrokenLocale.abilist: New file.
	* sysdeps/nacl/libanl.abilist: New file.
	* sysdeps/nacl/libcrypt.abilist: New file.
	* sysdeps/nacl/libdl.abilist: New file.
	* sysdeps/nacl/libm.abilist: New file.
	* sysdeps/nacl/libpthread.abilist: New file.
	* sysdeps/nacl/libresolv.abilist: New file.
	* sysdeps/nacl/librt.abilist: New file.

2015-07-21  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/tile/makecontext.c (__makecontext): Call
	__startcontext to initialize the new context.
	* sysdeps/unix/sysv/linux/tile/setcontext.S (__startcontext): Set
	up CFI directive to forbid further backtracing.

2015-07-21  Marko Myllynen  <myllynen@redhat.com>

	* charmaps/ANSI_X3.110-1983: Remove obsolete repertoire map
	reference.
	* charmaps/ANSI_X3.4-1968: Likewise.
	* charmaps/BS_4730: Likewise.
	* charmaps/BS_VIEWDATA: Likewise.
	* charmaps/CP1250: Likewise.
	* charmaps/CP1251: Likewise.
	* charmaps/CP1252: Likewise.
	* charmaps/CP1253: Likewise.
	* charmaps/CP1254: Likewise.
	* charmaps/CP1255: Likewise.
	* charmaps/CP1256: Likewise.
	* charmaps/CSN_369103: Likewise.
	* charmaps/EBCDIC-DK-NO: Likewise.
	* charmaps/GB_1988-80: Likewise.
	* charmaps/GREEK-CCITT: Likewise.
	* charmaps/GREEK7: Likewise.
	* charmaps/INIS-8: Likewise.
	* charmaps/ISIRI-3342: Likewise.
	* charmaps/ISO_2033-1983: Likewise.
	* charmaps/ISO_5427-EXT: Likewise.
	* locales/POSIX: Likewise.
	* locales/ar_SA: Likewise.
	* locales/be_BY: Likewise.
	* locales/be_BY@latin: Likewise.
	* locales/ca_ES: Likewise.
	* locales/cs_CZ: Likewise.
	* locales/da_DK: Likewise.
	* locales/de_BE: Likewise.
	* locales/de_CH: Likewise.
	* locales/de_LU: Likewise.
	* locales/en_AU: Likewise.
	* locales/en_BW: Likewise.
	* locales/en_CA: Likewise.
	* locales/en_DK: Likewise.
	* locales/en_GB: Likewise.
	* locales/en_IE: Likewise.
	* locales/en_NZ: Likewise.
	* locales/en_ZA: Likewise.
	* locales/en_ZW: Likewise.
	* locales/es_AR: Likewise.
	* locales/es_BO: Likewise.
	* locales/es_CL: Likewise.
	* locales/es_CO: Likewise.
	* locales/es_DO: Likewise.
	* locales/es_EC: Likewise.
	* locales/es_ES: Likewise.
	* locales/es_HN: Likewise.
	* locales/es_MX: Likewise.
	* locales/es_PA: Likewise.
	* locales/es_PE: Likewise.
	* locales/es_PY: Likewise.
	* locales/es_SV: Likewise.
	* locales/es_US: Likewise.
	* locales/es_UY: Likewise.
	* locales/es_VE: Likewise.
	* locales/et_EE: Likewise.
	* locales/fa_IR: Likewise.
	* locales/fo_FO: Likewise.
	* locales/fr_CA: Likewise.
	* locales/fr_CH: Likewise.
	* locales/gv_GB: Likewise.
	* locales/he_IL: Likewise.
	* locales/hr_HR: Likewise.
	* locales/id_ID: Likewise.
	* locales/is_IS: Likewise.
	* locales/it_CH: Likewise.
	* locales/iw_IL: Likewise.
	* locales/kl_GL: Likewise.
	* locales/ko_KR: Likewise.
	* locales/kw_GB: Likewise.
	* locales/lg_UG: Likewise.
	* locales/lt_LT: Likewise.
	* locales/lv_LV: Likewise.
	* locales/mi_NZ: Likewise.
	* locales/nhn_MX: Likewise.
	* locales/nl_BE: Likewise.
	* locales/pl_PL: Likewise.
	* locales/sk_SK: Likewise.
	* locales/sl_SI: Likewise.
	* locales/sv_FI: Likewise.
	* locales/tl_PH: Likewise.
	* locales/tr_TR: Likewise.
	* locales/vi_VN: Likewise.

2015-07-21  Khem Raj  <raj.khem@gmail.com>

	[BZ #17475]
	* benchtests/strcoll-inputs/filelist#en_US.UTF-8: Adjust for rename
	of tu_IN and bh_IN.

2015-07-21  Mike Frysinger  <vapier@gentoo.org>

	[BZ #18694]
	* sysdeps/unix/sysv/linux/sparc/bits/sigaction.h: Include
	bits/wordsize.h.
	(sigaction): Declare __glibc_reserved0 only when __WORDSIZE is 64.

2015-07-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* stdlib/tst-tls-atexit-lib.c (do_foo): Rename to reg_dtor.
	* stdlib/tst-tls-atexit.c: (is_loaded): New function.
	(spawn_thread): New function.
	(load): Rename to reg_dtor_and_close.  Move dlopen to...
	(do_test): ... here.  Use IS_LOADED to test for its
	availability.

2015-07-21  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/m680x0/fpu/libm-test-ulps: Update.

2015-07-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18696]
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h (_sigfault): Add
	si_addr_bnd.
	(si_lower): New.
	(si_upper): Likewise.

2015-07-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Regenerated.

2015-07-16  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* libio/fmemopen.c (__fmemopen): Fix 'w' openmode with provided
	buffer.
	* stdio-common/tst-fmemopen2.c (do_test_with_buffer): Fix typo and
	fail output information.

2015-07-16  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strstr-power7
	and strstr-ppc64..
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strstr.S: New File.
	* sysdeps/powerpc/powerpc64/multiarch/strstr-power7.S: New File.
	* sysdeps/powerpc/powerpc64/multiarch/strstr-ppc64.c: New File.
	* sysdeps/powerpc/powerpc64/multiarch/strstr.c: New File.

2015-07-16  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/hppa/Versions (GLIBC_PRIVATE): Delete _dl_unmap.
	* sysdeps/hppa/dl-lookupcfg.h (_dl_unmap): Add attribute_hidden.
	* sysdeps/ia64/Versions (GLIBC_PRIVATE): Delete _dl_unmap.
	* sysdeps/ia64/dl-lookupcfg.h (_dl_unmap): Add attribute_hidden.

2015-07-16  Mike Frysinger  <vapier@gentoo.org>

	* elf/dl-symaddr.c (_dl_symbol_address): Add rtld_hidden_def.
	* sysdeps/hppa/dl-lookupcfg.h (_dl_symbol_address): Add
	rtld_hidden_proto.
	* sysdeps/ia64/dl-lookupcfg.h (_dl_symbol_address): Likewise.

2015-07-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* tst-nodelete-opened.c (do_test): Add comment to clarify how
	the test can fail.

	* stdlib/cxa_thread_atexit_impl.c: Whitespace fixup.

	[BZ #18676]
	* elf/tst-nodelete-opened.c: New test case.
	* elf/tst-nodelete-opened-lib.c: New test case module.
	* elf/Makefile (tests, modules-names): Use them.
	* elf/dl-open.c (dl_open_worker): Set DF_1_NODELETE flag
	early.

2015-07-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/nptl/pthread_barrier_init.c: Include
	futex-intenal.h
	* sysdeps/sparc/sparc32/sparcv9/Makefile (nscd): Add cpu_relax.
	* sysdeps/sparc/sparc64/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/bits/atomic.h (atomic_spin_nop):
	Remove space from macro define.
	* sysdeps/sparc/sparc64/bits/atomic.h (atomic_spin_nop): Likewise.

2015-07-15  Pravin Satpute  <psatpute@redhat.com>

	[BZ #17475]
	* locale/iso-639.def: Update Bhili and Tulu language codes as
	per iso639-3.

2015-07-15  Arjun Shankar  <arjun.is@lostca.se>

	* elf/tst-leaks1.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* localedata/tst-langinfo.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* math/test-fpucw.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* math/test-tgmath.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* math/test-tgmath2.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* setjmp/tst-setjmp.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* stdio-common/tst-sscanf.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.
	* sysdeps/x86_64/tst-audit6.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.

	* elf/tst-audit9.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.

2015-07-15  Mike Frysinger  <vapier@gentoo.org>

	* timezone/tst-tzset.c (TIMEOUT): Define to 5.

2015-07-15  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/i386/i686/Makefile (test-xfail-tst-makecontext):
	New variable.

2015-07-15  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerated.

2015-07-14  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/dl-fileid.h: New file.
	* sysdeps/posix/dl-fileid.h: New file.
	* sysdeps/nacl/dl-fileid.h: New file.
	* include/link.h: Include <dl-fileid.h>.
	(struct link_map): Replace l_dev and l_ino with l_file_id.
	* elf/dl-load.c (_dl_map_object_from_fd): Use _dl_get_file_id rather
	than __fxstat64.  Use _dl_file_id_match_p rather than comparing l_dev
	and l_ino directly.  Initialize l_file_id rather than l_dev and l_ino.

2015-07-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* stdlib/tst-tls-atexit.c (do_test): Fix typo.

2015-07-14  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* elf/Makefile [ifeq (yes,$(build-shared)) (tests)] (tst-nodelete):
	Add iff $CXX is set.
	[ifeq (yes,$(build-shared)) (modules-names)] (tst-nodelete-rtldmod):
	Likewise.
	(tst-nodelete-zmodiff): Likewise.
	* nptl/Makefile [[ifeq (,$(CXX))] (tests-unsupported)]: Add tst-once5.

2015-07-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* stdlib/tst-tls-atexit.c (load): Fix up whitespace.

2015-07-13  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/math_private.h
	(define math_opt_barrier): Add AArch64 version.
	(math_force_eval): Likewise.

2015-07-13  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/strlen.S (strlen): Optimize strlen.

2015-07-11  H.J. Lu  <hongjiu.lu@intel.com>

	* stdio-common/tst-fmemopen2.c (do_test_without_buffer): Replace
	%ld with %jd and cast to intmax_t.
	(do_test_length_zero): Likewise.

2015-07-10  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/pthread_condattr_setclock.c: New file.

2015-07-10  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/libm-test-ulps: Regenerated.

	* math/test-fenvinline.c (feenable_test) [FE_ALL_EXCEPT == 0]:
	Comment out the whole function, not just its body.

2015-07-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* stdlib/tst-tls-atexit.c (load): Remove unnecessary mutex
	locks.

	* stdlib/tst-tls-atexit.c (load): Avoid boolean coercion.

2015-07-10  Torvald Riegel  <triegel@redhat.com>

	* nptl/sem_waitcommon.c (__new_sem_wait_slow): Update comments.
	(sem_assume_only_signals_cause_futex_EINTR): Remove.

2015-07-10  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/nptl/futex-internal.h: New file.
	* sysdeps/nacl/futex-internal.h: New file.
	* sysdeps/unix/sysv/linux/futex-internal.h: New file.
	* nptl/allocatestack.c (setxid_mark_thread): Use futex wrappers with
	error checking.
	(setxid_unmark_thread): Likewise.
	(__nptl_setxid): Likewise.
	(__wait_lookup_done): Likewise.
	* nptl/cancellation.c (__pthread_disable_asynccancel): Likewise.
	* nptl/nptl-init.c (sighandler_setxid): Likewise.
	* nptl/pthread_create.c (START_THREAD_DEFN): Likewise.
	* nptl/pthread_once.c (clear_once_control): Likewise.
	(__pthread_once_slow): Likewise.
	* nptl/unregister-atfork.c (__unregister_atfork): Likewise.
	* sysdeps/nacl/exit-thread.h (__exit_thread): Likewise.
	* sysdeps/nptl/aio_misc.h (AIO_MISC_NOTIFY, AIO_MISC_WAIT): Likewise.
	* sysdeps/nptl/fork.c (__libc_fork): Likewise.
	* sysdeps/nptl/gai_misc.h (GAI_MISC_NOTIFY, GAI_MISC_WAIT): Likewise.
	* nptl/pthread_rwlock_rdlock.c (__pthread_rwlock_rdlock_slow):
	Likewise.
	(__pthread_rwlock_rdlock): Likewise.
	* nptl/pthread_rwlock_timedrdlock.c (pthread_rwlock_timedrdlock):
	Likewise.
	* nptl/pthread_rwlock_timedwrlock.c (pthread_rwlock_timedwrlock):
	Likewise.
	* nptl/pthread_rwlock_tryrdlock.c (__pthread_rwlock_tryrdlock):
	Likewise.
	* nptl/pthread_rwlock_unlock.c (__pthread_rwlock_unlock): Likewise.
	* nptl/pthread_rwlock_wrlock.c (__pthread_rwlock_wrlock_slow:
	Likewise.
	* nptl/pthread_rwlock_init (__pthread_rwlock_init): Remove
	__ASSUME_PRIVATE_FUTEX check.
	* nptl/pthread_rwlockattr_setpshared (pthread_rwlockattr_setpshared):
	Check that shared futexes are supported.
	* nptl/pthread_barrier_wait.c (pthread_barrier_wait): Use futex
	wrappers with error checking.
	* nptl/pthread_barrier_init.c (pthread_barrier_init): Add comments,
	remove attribute sanity check and __ASSUME_PRIVATE_FUTEX check.
	* nptl/pthread_barrierattr_setpshared.c
	(pthread_barrierattr_setpshared): Check that shared futexes are
	supported.
	* nptl/pthread_condattr_setpshared.c (pthread_condattr_setpshared):
	Likewise.
	* nptl/pthread_mutexattr_setpshared.c (pthread_mutexattr_setpshared):
	Likewise.
	* nptl/sem_init.c (futex_private_if_supported): Remove.
	(__new_sem_init): Adapt and check that shared futexes are supported.
	* nptl/sem_open.c (sem_open): Likewise.
	* nptl/sem_post.c (futex_wake): Remove.
	* nptl/sem_waitcommon.c (futex_abstimed_wait, futex_wake): Remove.
	(do_futex_wait): Use futex wrappers with error checking.
	* nptl/sem_wait.c: Include lowlevellock.h.
	* sysdeps/sparc/nptl/pthread_barrier_init.c (__pthread_barrier_init):
	Use futex_supports_pshared.
	* sysdeps/sparc/nptl/pthread_barrier_wait.c (pthread_barrier_wait):
	Use futex wrappers with error checking.
	* sysdeps/sparc/sparc32/pthread_barrier_wait.c (pthread_barrier_wait):
	Likewise.
	* sysdeps/sparc/sparc32/sem_init.c (futex_private_if_supported): Remove.
	* sysdeps/sparc/sparc32/sem_post.c (futex_wake): Likewise.
	* sysdeps/sparc/sparc32/sem_open.c (sem_open): Use FUTEX_SHARED.
	* sysdeps/sparc/sparc32/sem_waitcommon.c (futex_abstimed_wait): Remove.
	(futex_wake): Likewise.
	(sem_assume_only_signals_cause_futex_EINTR): Likewise.
	(do_futex_wait): Use futex wrappers with error checking.
	(__new_sem_wait_slow): Update EINTR handling.
	* sysdeps/sparc/sparc32/sem_wait.c: Include lowlevellock.h.

2015-07-09  Martin Sebor  <msebor@redhat.com>

	[BZ #18435]
	* nptl/pthreadP.h (pthread_cleanup_push, pthread_cleanup_pop):
	Revert commit ed225df3ad9cbac3c22ec3f0fbbed1f9c61d1c54.
	* nptl/Makefile (test-xfail-tst-once5): Define.

2015-07-09  Roland McGrath  <roland@hack.frob.com>

	* include/stdio.h: Add rtld_hidden_proto (__libc_fatal).
	* elf/dl-minimal.c: For readability, reorder some definitions and
	introduce more page breaks.  Include <stdio.h>.
	(__libc_fatal): New function.

	* include/unistd.h: Add rtld_hidden_proto for _exit.
	* posix/_exit.c: Add rtld_hidden_def.
	* sysdeps/mach/hurd/_exit.c: Likewise.
	* sysdeps/nacl/_exit.c: Likewise.
	* sysdeps/unix/sysv/linux/_exit.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/_exit.S: Likewise.

2015-07-09  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_resolve): Improve
	bndmov encoding with zero displacement.

2015-07-09  Igor Zamyatin  <igor.zamyatin@intel.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18134]
	* sysdeps/i386/configure.ac: Set HAVE_MPX_SUPPORT.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/i386/dl-trampoline.S (PRESERVE_BND_REGS_PREFIX): New.
	(_dl_runtime_profile): Save and restore Intel MPX return bound
	registers when calling _dl_call_pltexit.  Add
	PRESERVE_BND_REGS_PREFIX before return.
	* sysdeps/i386/link-defines.sym (LRV_BND0_OFFSET): New.
	(LRV_BND1_OFFSET): Likewise.
	* sysdeps/x86/bits/link.h (La_i86_retval): Add lrv_bnd0 and
	lrv_bnd1.
	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix
	typo in bndmov encoding.
	* sysdeps/x86_64/dl-trampoline.h: Properly save and restore
	Intel MPX bound registers.  Add PRESERVE_BND_REGS_PREFIX before
	branch instructions to preserve bounds.

2015-07-09  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist
	[GLIBC_2.22]: Add fmemopen.

2015-07-09  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/mlock.c (mlock): When __get_privileged_ports
	returns an error, also try to use host port from __mach_host_self for
	the __vm_wire call.
	* sysdeps/mach/hurd/munlock.c (munlock): Likewise.

2015-07-09  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	[BZ #18400]
	[BZ #18648]
	* sysdeps/unix/sysv/linux/aarch64/sys/procfs.h (struct elf_prpsinfo):
	Fix pr_uid and pr_gid members.
	* sysdeps/unix/sysv/linux/aarch64/sys/ucontext.h (greg_t): Change the
	definition to elf_greg_t.

2015-07-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #18383]
	* sysdeps/arm/configure.ac (libc_cv_arm_tpoff_addend): New check.
	Emit test-xfail-tst-tlsalign{,-static}=yes if it fails.
	* sysdeps/arm/configure: Regenerated.
	* elf/Makefile (test-xfail-tst-tlsalign): Variable removed.
	(test-xfail-tst-tlsalign-static): Variable removed.

	* Makerules (do-install-so): Use $(LN_S) rather than explicit 'ln -s'.
	* elf/Makefile ($(objpfx)$(rtld-installed-name)): Use $(make-link)
	rather than explicit 'ln -s'.

	* resolv/rpc/netdb.h: New file.
	* resolv/Makefile [sunrpc not in $(subdirs)] (headers): Add it.

2015-07-08  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* stdio-common/tst-fmemopen2.c (do_test): Add test for NULL and zero
	length buffers.
	* stdio-common/tst-fmemopen.c (do_test): Refactor to use
	test-skeleton.c.

	[BZ #6544]
	[BZ #11216]
	[BZ #12836]
	[BZ #13151]
	[BZ #13152]
	[BZ #14292]
	* include/stdio.h (fmemopen): Remove hidden prototype.
	(__fmemopen): Add new hidden prototype.
	* libio/Makefile: Add oldfmemopen object.
	* libio/Versions [GLIBC_2.22]: Add new fmemopen symbol.
	* libio/fmemopen.c (__fmemopen): Function rewrite to be POSIX
	compliance.
	* libio/oldfmemopen.c: New file: old fmemopen implementation for
	symbol compatibility.
	* stdio-common/Makefile [tests]: Add new tst-fmemopen3.
	* stdio-common/psiginfo.c [psiginfo]: Call __fmemopen instead of
	fmemopen.
	* stdio-common/tst-fmemopen3.c: New file: more fmemopen tests, focus
	on append and read mode.
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist [GLIBC_2.22]: Add
	fmemopen.
	* sysdeps/unix/sysv/linux/alpha/libc.abilist [GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/arm/libc.abilist [GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/i386/libc.abilist [GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/ia64/libc.abilist [GLIBC_2.22]:
	Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist [GLIBC_2.22]:
	Likewise.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist [GLIBC_2.22]:
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist [GLIBC_2.22]:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist [GLIBC_2.22]:
	Likewise.
	* sysdeps/unix/sysv/linux/sh/libc.abilist [GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist
	[GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist [GLIBC_2.22]:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist [GLIBC_2.22]:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist [GLIBC_2.22]:
	Likewise.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist [GLIBC_2.22]: Likewise.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist [GLIBC_2.22]: Likewise.

2015-07-08  Carlos O'Donell  <carlos@redhat.com>

	[BZ #18643]
	* sysdeps/unix/sysv/linux/bits/in.h: Define IPV6_RECVPATHMTU,
	IPV6_PATHMTU, and IPV6_DONTFRAG.

2015-07-08  Feng Gao  <gfree.wind@gmail.com>

	* libio/fileops.c: Use "|" instead of "+" when combine _IO_LINE_BUF
	and _IO_UNBUFFERED.
	* libio/oldfileops.c: Likewise.
	* libio/wfileops.c: Likewise.

2015-07-08  Mike Frysinger  <vapier@gentoo.org>

	* nscd/selinux.c: Delete selinux/flask.h include.

2015-07-08  Mike Frysinger  <vapier@gentoo.org>

	[BZ #18641]
	* pwd/pwd.h (fgetpwent): Add __nonnull markings.
	(putpwent): Likewise.
	(getpwnam): Likewise.
	(getpwent_r): Likewise.
	(getpwuid_r): Likewise.
	(getpwnam_r): Likewise.
	(fgetpwent_r): Likewise.

2015-07-08  Carlos O'Donell  <carlos@redhat.com>

	[BZ #18557]
	* inet/rcmd.c (__validuser2_sa): Check user first to
	short-circuit host check.

2015-07-07  Pavel Kopyl  <p.kopyl@samsung.com>
	    Mikhail Ilin  <m.ilin@samsung.com>

	[BZ #17833]
	* elf/Makefile (tests): Add tst-nodelete.
	(modules-names): Add tst-nodelete-uniquemod.
	(tst-nodelete-uniquemod.so-no-z-defs): New.
	(tst-nodelete-rtldmod.so-no-z-defs): Likewise.
	(tst-nodelete-zmod.so-no-z-defs): Likewise.
	($(objpfx)tst-nodelete): Likewise.
	($(objpfx)tst-nodelete.out): Likewise.
	(LDFLAGS-tst-nodelete): Likewise.
	(LDFLAGS-tst-nodelete-zmod.so): Likewise.
	* elf/dl-close.c (_dl_close_worker): Add a parameter to
	implement forced object deletion.
	(_dl_close): Pass false to _dl_close_worker.
	* elf/dl-open.c (_dl_open): Pass true to _dl_close_worker.
	* elf/tst-nodelete.cc: New file.
	* elf/tst-nodeletelib.cc: Likewise.
	* elf/tst-znodeletelib.cc: Likewise.
	* include/dlfcn.h (_dl_close_worker): Add a new parameter.

2015-07-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #18508]
	* stdlib/Makefile ($(objpfx)tst-makecontext3):
	Depend on $(libdl).
	* stdlib/tst-makecontext.c (cf): Test if _Unwind_Backtrace
	is not called infinitely times.
	(backtrace_helper): New function.
	(trace_arg): New struct.
	(st1): Enlarge stack size.
	* sysdeps/unix/sysv/linux/s390/s390-32/__makecontext_ret.S:
	(__makecontext_ret): Omit cfi_startproc and cfi_endproc.
	* sysdeps/unix/sysv/linux/s390/s390-64/__makecontext_ret.S:
	Likewise.

2015-07-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerated.

2015-07-07  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/bits/sem.h:
	Include sys/types.h instead of bits/types.h.
	Remove inclusion of bits/wordsize.h.

2015-07-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/tst-auditmod10b.c (la_symbind32): New.
	* sysdeps/x86_64/tst-auditmod4b.c (la_symbind32): Likewise.
	* sysdeps/x86_64/tst-auditmod5b.c (la_symbind32): Likewise.
	* sysdeps/x86_64/tst-auditmod6b.c (la_symbind32): Likewise.
	* sysdeps/x86_64/tst-auditmod6c.c (la_symbind32): Likewise.
	* sysdeps/x86_64/tst-auditmod7b.c (la_symbind32): Likewise.

2015-07-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/Makefile (gen-as-const-headers)[elf]: Add
	link-defines.sym.
	* sysdeps/i386/dl-trampoline.S: Include <link-defines.h>.
	(_dl_runtime_profile): Use LONG_DOUBLE_SIZE, LRV_SIZE,
	LRV_EAX_OFFSET, LRV_EDX_OFFSET, LRV_ST0_OFFSET, LRV_ST1_OFFSET
	and LR_SIZE.
	* sysdeps/i386/link-defines.sym: New file.

2015-07-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/Makefile (tests)[elf]: Add tst-audit3.
	(modules-names): Add tst-auditmod3a tst-auditmod3b.
	($(objpfx)tst-audit3): New rule.
	($(objpfx)tst-audit3.out): Likewise.
	* sysdeps/i386/tst-audit3.c: New file.
	* sysdeps/i386/tst-audit3.h: Likewise.
	* sysdeps/i386/tst-auditmod3a.c: Likewise.
	* sysdeps/i386/tst-auditmod3b.c: Likewise.

2015-07-07  Torvald Riegel  <triegel@redhat.com>

	[BZ #18633]
	* sysdeps/x86/bits/string.h (__memmove_g): Do not create invalid
	pointer in C code.
	(__strcat_c): Likewise.
	(__strcat_g): Likewise.

2015-07-07  Cyril Hrubis <chrubis@suse.cz>

	[BZ #18592]
	* misc/sbrk.c: Set errno to ENOMEM on overflow.

2015-07-06  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/math_private.h (__ieee754_sqrt):
	New function.  (__ieee754_sqrtf): New function.
	* sysdeps/aarch64/fpu/e_sqrt.c (__ieee754_sqrt):
	New function.
	* sysdeps/aarch64/fpu/e_sqrtf.c (__ieee754_sqrtf):
	New function.

2015-07-06  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/ieee754/support.c: Remove unused file.

2015-07-06  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/unix/sysv/linux/aarch64/getcontext.S (__getcontext): Use q
	registers instead of d ones so the layout is kernel abi compatible.
	* sysdeps/unix/sysv/linux/aarch64/setcontext.S (__setcontext): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/swapcontext.S (__swapcontext):
	Likewise.

2015-07-02  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Regenerated.

2015-07-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18619]
	* sysdeps/ieee754/ldbl-128/s_expm1l.c (__expm1l): Force underflow
	and return argument in case of subnormal argument.

2015-07-01  Martin Sebor  <msebor@redhat.com>

	[BZ #18435]
	* nptl/Makefile: Add tst-once5.cc.
	* nptl/pthreadP.h (pthread_cleanup_push, pthread_cleanup_pop):
	Remove macro redefinitions.
	* nptl/tst-once5.cc: New test.

2015-07-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/nofpu/libm-test-ulps: Regenerated.

	* sysdeps/arm/libm-test-ulps: Regenerated.

	* sysdeps/mips/mips32/libm-test-ulps: Regenerated.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.

2015-06-30  Torvald Riegel  <triegel@redhat.com>

	* nptl/DESIGN-systemtap-probes.txt: Remove lll_lock_wait,
	lll_lock_wait_private and lll_futex_wake probes.

	* sysdeps/unix/sysv/linux/i386/lowlevellock.h (BUSY_WAIT_NOP): Remove.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h (BUSY_WAIT_NOP):
	Likewise.
	* sysdeps/i386/i486/bits/atomic.h (atomic_delay): Rename to
	atomic_spin_nop.
	* sysdeps/x86_64/bits/atomic.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h (BUSY_WAIT_NOP): Rename
	to atomic_spin_nop and move ...
	* sysdeps/sparc/sparc32/sparcv9/bits/atomic.h (atomic_spin_nop):
	... here and ...
	* sysdeps/sparc/sparc64/bits/atomic.h: ... here.
	* nptl/pthread_mutex_lock.c (__pthread_mutex_lock): Use
	atomic_spin_nop instead of BUSY_WAIT_NOP.
	* nptl/pthread_mutex_timedlock.c (__pthread_mutex_timedlock):
	Likewise.
	* sysdeps/nacl/lll_timedwait_tid.c (__lll_timedwait_tid): Likewise.
	* sysdeps/nacl/lowlevellock.h (BUSY_WAIT_NOP): Remove.
	(lll_wait_tid): Use atomic_spin_nop instead of BUSY_WAIT_NOP.
	* nscd/nscd-client.h (__nscd_acquire_maplock): Use atomic_spin_nop
	instead of atomic_delay.

2015-06-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18613]
	* sysdeps/ieee754/dbl-64/e_gamma_r.c (gamma_positive): Take log of
	X_ADJ not X when adjusting exponent.
	(__ieee754_gamma_r): Do intermediate computations in
	round-to-nearest then adjust overflowing and underflowing results
	as needed.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c (gammaf_positive): Take log
	of X_ADJ not X when adjusting exponent.
	(__ieee754_gammaf_r): Do intermediate computations in
	round-to-nearest then adjust overflowing and underflowing results
	as needed.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c (gammal_positive): Take
	log of X_ADJ not X when adjusting exponent.
	(__ieee754_gammal_r): Do intermediate computations in
	round-to-nearest then adjust overflowing and underflowing results
	as needed.  Use 1.0L not 1.0f as numerator of division.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c (gammal_positive): Take
	log of X_ADJ not X when adjusting exponent.
	(__ieee754_gammal_r): Do intermediate computations in
	round-to-nearest then adjust overflowing and underflowing results
	as needed.  Use 1.0L not 1.0f as numerator of division.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c (gammal_positive): Take log
	of X_ADJ not X when adjusting exponent.
	(__ieee754_gammal_r): Do intermediate computations in
	round-to-nearest then adjust overflowing and underflowing results
	as needed.  Use 1.0L not 1.0f as numerator of division.
	* math/libm-test.inc (tgamma_test_data): Remove one test.  Moved
	to auto-libm-test-in.
	(tgamma_test): Use ALL_RM_TEST.
	* math/auto-libm-test-in: Add one test of tgamma.  Mark some other
	tests of tgamma with spurious-overflow.
	* math/auto-libm-test-out: Regenerated.
	* math/gen-libm-have-vector-test.sh: Do not check for START.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #18612]
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_j1l): For small
	arguments, just return 0.5 times the argument, with underflow
	forced as needed.
	* math/auto-libm-test-in: Add more tests of j1.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16559]
	* sysdeps/ieee754/dbl-64/e_j1.c: Include <float.h>.
	(__ieee754_j1): Force underflow exception for small results.
	* sysdeps/ieee754/dbl-64/e_jn.c (__ieee754_jn): Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c: Include <float.h>.
	(__ieee754_j1f): Force underflow exception for small results.
	* sysdeps/ieee754/flt-32/e_jnf.c (__ieee754_jnf): Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c (__ieee754_jnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_jnl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Include <float.h>.
	(__ieee754_j1l): Force underflow exception for small results.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_jnl): Likewise.
	* math/auto-libm-test-in: Add more tests of j1 and jn.
	* math/auto-libm-test-out: Regenerated.

	* sysdeps/unix/sysv/linux/bits/in.h (IP_CHECKSUM): New macro.
	* sysdeps/unix/sysv/linux/bits/socket.h (PF_IB): Likewise.
	(PF_MPLS): Likewise.
	(AF_IB): Likewise.
	(AF_MPLS): Likewise.
	* sysdeps/unix/sysv/linux/sys/mount.h (MS_LAZYTIME): New enum
	value and macro.
	(MS_RMT_MASK): Include MS_LAZYTIME.

2015-06-26  Mel Gorman  <mgorman@suse.de>

	[BZ #18502]
	* malloc/arena.c (heap_trim): Don't try to shrink a heap that is
	already minimal.

2015-06-26  Matthew Fortune  <matthew.fortune@imgtec.com>

	* elf/elf.h (DT_MIPS_RLD_MAP_REL): New macro.
	(DT_MIPS_NUM): Update.
	* sysdeps/mips/dl-machine.h (ELF_MACHINE_DEBUG_SETUP): Handle
	DT_MIPS_RLD_MAP_REL.

2015-06-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16559]
	[BZ #18602]
	* sysdeps/ieee754/dbl-64/e_jn.c (__ieee754_jn): Set
	round-to-nearest internally then recompute results that
	underflowed to zero in the original rounding mode.
	* sysdeps/ieee754/flt-32/e_jnf.c (__ieee754_jnf): Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c (__ieee754_jnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_jnl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_jnl): Likewise.
	* math/libm-test.inc (jn_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-06-25  Andrew Senkevich  <andrew.senkevich@intel.com>

	* NEWS: Fixed description of link with vector math library.

2015-06-25  Andreas Schwab  <schwab@suse.de>

	[BZ #18549]
	* libio/fmemopen.c (fmemopen_write): Fix bounds check for ENOSPC.
	* libio/test-fmemopen.c (do_test): Add test for it.

2015-06-25  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17841]
	* Makeconfig (no-pie-ldflag): New.
	(+link): Set to $(+link-pie) if default to PIE.
	(+link-tests): Set to $(+link-pie-tests) if default to PIE.
	* config.make.in (build-pie-default): New.
	* configure.ac (libc_cv_pie_default): New.  Set to yes if -fPIE
	is default.  AC_SUBST.
	* configure: Regenerated.
	* elf/Makefile (LDFLAGS-tst-dlopen-aout): New.

2015-06-24  Roland McGrath  <roland@hack.frob.com>

	* nptl/descr.h (struct pthread): Change type of field setxid_futex
	to 'unsigned int'.

	* resolv/gai_misc.h (struct waitlist): Change type of field
	counterp to 'volatile unsigned int *'.
	* sysdeps/nptl/gai_misc.h (GAI_MISC_WAIT): Use unsigned types for
	FUTEXADDR and OLDVAL.
	* resolv/getaddrinfo_a.c (getaddrinfo_a):
	Give local variable TOTAL type 'volatile unsigned int'.
	(struct async_waitlist): Change type of field counter to 'unsigned int'.
	* resolv/gai_suspend.c (gai_suspend):
	Give local variable CNTR type 'unsigned int'.

	* sysdeps/pthread/aio_misc.h (struct waitlist): Change type of field
	counterp to 'volatile unsigned int *'.
	* sysdeps/pthread/aio_suspend.c [DONT_NEED_AIO_MISC_COND]
	(do_aio_misc_wait): Give argument CNTR type 'unsigned int *'.
	(aio_suspend): Give local variable CNTR type 'unsigned int'.
	* sysdeps/pthread/lio_listio.c (lio_listio_internal):
	Give local variable TOTAL type 'volatile unsigned int'.
	(struct async_waitlist): Change type of field counter to 'unsigned int'.

2015-06-24  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18383]
	* csu/libc-tls.c (__libc_setup_tls) [TLS_TCB_AT_TP]: Align
	TCB_OFFSET to MAX_ALIGN, not just TCBALIGN.  Add comment.
	* elf/Makefile (test-xfail-tst-tlsalign{,-static}): Remove
	comment for i386/x86-64.
	(test-xfail-tst-tlsalign-extern-static): Removed.

2015-06-24  Joseph Myers  <joseph@codesourcery.com>

	* math/test-double.h: New file.
	* math/test-float.h: Likewise.
	* math/test-ldouble.h: Likewise.
	* math/test-math-inline.h: Likewise.
	* math/test-math-no-inline.h: Likewise.
	* math/test-math-scalar.h: Likewise.
	* math/test-math-vector.h: Likewise.
	* math/test-vec-loop.h: Remove file.  Contents moved into
	test-math-vector.h.
	* math/libm-test.inc (MATHCONST): Do not document macro.
	* math/test-double.c: Include test-double.h, test-math-no-inline.h
	and test-math-scalar.h.
	(FUNC): Remove macro.
	(FUNC_TEST): Likewise.
	(FLOAT): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_DOUBLE): Likewise.
	(TEST_MATHVEC): Likewise.
	(__NO_MATH_INLINES): Likewise.
	* math/test-float.c: Include test-float.h, test-math-no-inline.h
	and test-math-scalar.h.
	(FUNC): Remove macro.
	(FUNC_TEST): Likewise.
	(FLOAT): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_FLOAT): Likewise.
	(TEST_MATHVEC): Likewise.
	(__NO_MATH_INLINES): Likewise.
	* math/test-idouble.c: Include test-double.h, test-math-inline.h
	and test-math-scalar.h.
	(FUNC): Remove macro.
	(FUNC_TEST): Likewise.
	(FLOAT): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_DOUBLE): Likewise.
	(TEST_MATHVEC): Likewise.
	(TEST_INLINE): Likewise.
	(__NO_MATH_INLINES): Likewise.
	* math/test-ifloat.c: Include test-float.h, test-math-inline.h and
	test-math-scalar.h.
	(FUNC): Remove macro.
	(FUNC_TEST): Likewise.
	(FLOAT): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_FLOAT): Likewise.
	(TEST_MATHVEC): Likewise.
	(TEST_INLINE): Likewise.
	(__NO_MATH_INLINES): Likewise.
	* math/test-ildoubl.c: Include test-ldouble.h, test-math-inline.h
	and test-math-scalar.h.
	(FUNC): Remove macro.
	(FUNC_TEST): Likewise.
	(FLOAT): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_LDOUBLE): Likewise.
	(TEST_MATHVEC): Likewise.
	(TEST_INLINE): Likewise.
	(__NO_MATH_INLINES): Likewise.
	* math/test-ldouble.c: Include test-ldouble.h,
	test-math-no-inline.h and test-math-scalar.h.
	(FUNC): Remove macro.
	(FUNC_TEST): Likewise.
	(FLOAT): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_LDOUBLE): Likewise.
	(TEST_MATHVEC): Likewise.
	(__NO_MATH_INLINES): Likewise.
	* math/test-double-vlen2.h: Include test-double.h,
	test-math-no-inline.h and test-math-vector.h.
	(FLOAT): Remove macro.
	(FUNC): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_DOUBLE): Likewise.
	(TEST_MATHVEC): Likewise.
	(__NO_MATH_INLINES): Likewise.
	(CNCT): Likewise.
	(CONCAT): Likewise.
	(WRAPPER_NAME): Likewise.
	(WRAPPER_DECL): Likewise.
	(WRAPPER_DECL_ff): Likewise.
	(WRAPPER_DECL_fFF): Likewise.
	(VECTOR_WRAPPER): Likewise.
	(VECTOR_WRAPPER_ff): Likewise.
	(VECTOR_WRAPPER_fFF): Likewise.
	(VEC_LEN): New macro.
	* math/test-double-vlen4.h: Include test-double.h,
	test-math-no-inline.h and test-math-vector.h.
	(FLOAT): Remove macro.
	(FUNC): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_DOUBLE): Likewise.
	(TEST_MATHVEC): Likewise.
	(__NO_MATH_INLINES): Likewise.
	(CNCT): Likewise.
	(CONCAT): Likewise.
	(WRAPPER_NAME): Likewise.
	(WRAPPER_DECL): Likewise.
	(WRAPPER_DECL_ff): Likewise.
	(WRAPPER_DECL_fFF): Likewise.
	(VECTOR_WRAPPER): Likewise.
	(VECTOR_WRAPPER_ff): Likewise.
	(VECTOR_WRAPPER_fFF): Likewise.
	(VEC_LEN): New macro.
	* math/test-double-vlen8.h: Include test-double.h,
	test-math-no-inline.h and test-math-vector.h.
	(FLOAT): Remove macro.
	(FUNC): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_DOUBLE): Likewise.
	(TEST_MATHVEC): Likewise.
	(__NO_MATH_INLINES): Likewise.
	(CNCT): Likewise.
	(CONCAT): Likewise.
	(WRAPPER_NAME): Likewise.
	(WRAPPER_DECL): Likewise.
	(WRAPPER_DECL_ff): Likewise.
	(WRAPPER_DECL_fFF): Likewise.
	(VECTOR_WRAPPER): Likewise.
	(VECTOR_WRAPPER_ff): Likewise.
	(VECTOR_WRAPPER_fFF): Likewise.
	(VEC_LEN): New macro.
	* math/test-float-vlen4.h: Include test-float.h,
	test-math-no-inline.h and test-math-vector.h.
	(FLOAT): Remove macro.
	(FUNC): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_FLOAT): Likewise.
	(TEST_MATHVEC): Likewise.
	(__NO_MATH_INLINES): Likewise.
	(CNCT): Likewise.
	(CONCAT): Likewise.
	(WRAPPER_NAME): Likewise.
	(WRAPPER_DECL): Likewise.
	(WRAPPER_DECL_ff): Likewise.
	(WRAPPER_DECL_fFF): Likewise.
	(VECTOR_WRAPPER): Likewise.
	(VECTOR_WRAPPER_ff): Likewise.
	(VECTOR_WRAPPER_fFF): Likewise.
	(VEC_LEN): New macro.
	* math/test-float-vlen8.h: Include test-float.h,
	test-math-no-inline.h and test-math-vector.h.
	(FLOAT): Remove macro.
	(FUNC): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_FLOAT): Likewise.
	(TEST_MATHVEC): Likewise.
	(__NO_MATH_INLINES): Likewise.
	(CNCT): Likewise.
	(CONCAT): Likewise.
	(WRAPPER_NAME): Likewise.
	(WRAPPER_DECL): Likewise.
	(WRAPPER_DECL_ff): Likewise.
	(WRAPPER_DECL_fFF): Likewise.
	(VECTOR_WRAPPER): Likewise.
	(VECTOR_WRAPPER_ff): Likewise.
	(VECTOR_WRAPPER_fFF): Likewise.
	(VEC_LEN): New macro.
	* math/test-float-vlen16.h: Include test-float.h,
	test-math-no-inline.h and test-math-vector.h.
	(FLOAT): Remove macro.
	(FUNC): Likewise.
	(MATHCONST): Likewise.
	(PRINTF_EXPR): Likewise.
	(PRINTF_XEXPR): Likewise.
	(PRINTF_NEXPR): Likewise.
	(TEST_FLOAT): Likewise.
	(TEST_MATHVEC): Likewise.
	(__NO_MATH_INLINES): Likewise.
	(CNCT): Likewise.
	(CONCAT): Likewise.
	(WRAPPER_NAME): Likewise.
	(WRAPPER_DECL): Likewise.
	(WRAPPER_DECL_ff): Likewise.
	(WRAPPER_DECL_fFF): Likewise.
	(VECTOR_WRAPPER): Likewise.
	(VECTOR_WRAPPER_ff): Likewise.
	(VECTOR_WRAPPER_fFF): Likewise.
	(VEC_LEN): New macro.
	* sysdeps/x86_64/fpu/test-double-vlen2-wrappers.c: Do not include
	test-vec-loop.h.
	* sysdeps/x86_64/fpu/test-double-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen16-wrappers.c: Likewise.

2015-06-24  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/glob.c (getlogin_r): Macro renamed to ...
	(__getlogin_r): ... this.

2015-06-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18594]
	* math/s_ccosh.c (__ccosh): Compare with least normal value
	instead of comparing class with FP_SUBNORMAL.
	* math/s_ccoshf.c (__ccoshf): Likewise.
	* math/s_ccoshl.c (__ccoshl): Likewise.
	* math/s_cexp.c (__cexp): Likewise.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/s_csin.c (__csin): Likewise.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/s_ctan.c (__ctan): Likewise.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanh.c (__ctanh): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/auto-libm-test-in: Add more tests of ccos, ccosh, cexp,
	csin, csinh, ctan and ctanh.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (cexp_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-06-24  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/tst-getcpu.c (do_test): When sched_getcpu
	return value is wrong, print the expected value too.

2015-06-24  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18585]
	* elf/readlib.c (is_gdb_python_file): New.
	(process_file): Don't issue errors on filenames with -gdb.py
	suffix.

2015-06-24  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of csin and csinh.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (csin_test_data): Remove tests moved to
	auto-libm-test-in.
	(csinh_test_data): Likewise.

	[BZ #18593]
	* math/s_csin.c (__csin): Negate before rather than after possibly
	overflowing multiplication.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/auto-libm-test-in: Add some tests of csin and csinh.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (csin_test_data): Use AUTO_TESTS_c_c.
	(csinh_test_data): Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	[BZ #18586]
	* sysdeps/ieee754/ldbl-128/e_expl.c (__ieee754_expl): Force
	underflow exception for small results.

2015-06-24  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Fixed files list.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf4_core_sse4.S: Renamed
	variable and included header.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf8_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf16_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf4_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf8_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf16_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf4_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf8_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf16_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_trig_data.S: New file.
	* sysdeps/x86_64/fpu/svml_s_trig_data.h: Likewise.
	* sysdeps/x86_64/fpu/svml_s_cosf_data.S: Removed file.
	* sysdeps/x86_64/fpu/svml_s_cosf_data.h: Likewise.
	* sysdeps/x86_64/fpu/svml_s_sinf_data.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_sinf_data.h: Likewise.
	* sysdeps/x86_64/fpu/svml_s_sincosf_data.S: Likewise.
	* sysdeps/x86_64/fpu/svml_s_sincosf_data.h: Likewise.

2015-06-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16526]
	[BZ #16538]
	* sysdeps/ieee754/dbl-64/s_sin.c: Include <float.h>.
	(__sin): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/flt-32/k_sinf.c: Include <float.h>.
	(__kernel_sinf): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c: Include <float.h>.
	(__kernel_sincosl): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-128/k_sinl.c: Include <float.h>.
	(__kernel_sinl): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c: Include <float.h>.
	(__kernel_sincosl): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c: Include <float.h>.
	(__kernel_sinl): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/ieee754/ldbl-96/k_sinl.c: Include <float.h>.
	(__kernel_sinl): Force underflow exception for arguments with
	small absolute value.
	* sysdeps/powerpc/fpu/k_sinf.c: Include <float.h>.
	(__kernel_sinf): Force underflow exception for arguments with
	small absolute value.
	* math/auto-libm-test-in: Add more tests of sin and sincos.
	* math/auto-libm-test-out: Regenerated.

	[BZ #18245]
	[BZ #18583]
	* sysdeps/ieee754/k_standardl.c: Include <fenv.h>.
	(__kernel_standard_l): Use feholdexcept and fesetenv around
	conversion to double instead of special-casing overflow and
	underflow.
	* math/libm-test.inc (fmod_test_data): Add more tests.
	(remainder_test_data): Likewise.
	(sqrt_test_data): Likewise.

2015-06-23  Torvald Riegel  <triegel@redhat.com>

	[BZ #17403]
	* sysdeps/x86_64/bits/atomic.h: (atomic_full_barrier,
	atomic_read_barrier, atomic_write_barrier): Define.
	* sysdeps/i386/i486/bits/atomic.h (atomic_full_barrier,
	atomic_read_barrier, atomic_write_barrier): Define.

2015-06-23  Joseph Myers  <joseph@codesourcery.com>

	* math/Makefile [$(PERL) != no]
	($(addprefix $(objpfx), $(addsuffix .o, $(libm-vec-tests)))): Move
	dependency on libm-test.stmp below the inclusion of Rules.

2015-06-23  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Fixed files list.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos2_core_sse4.S: Renamed variable
	and included header.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos4_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos8_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin2_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin4_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin8_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos2_core_sse4.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos4_core_avx2.S: Likewise.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos8_core_avx512.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_trig_data.S: New file.
	* sysdeps/x86_64/fpu/svml_d_trig_data.h: Likewise.
	* sysdeps/x86_64/fpu/svml_d_cos2_core.S: Removed unneeded include.
	* sysdeps/x86_64/fpu/svml_d_cos4_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_cos8_core.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_cos_data.S: Removed file.
	* sysdeps/x86_64/fpu/svml_d_cos_data.h: Likewise.
	* sysdeps/x86_64/fpu/svml_d_sin_data.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_sin_data.h: Likewise.
	* sysdeps/x86_64/fpu/svml_d_sincos_data.S: Likewise.
	* sysdeps/x86_64/fpu/svml_d_sincos_data.h: Likewise.

2015-06-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18371]
	* math/s_csqrt.c (__csqrt): Avoid multiplication by 0.5 where
	intermediate but not final result might underflow.
	* math/s_csqrtf.c (__csqrtf): Likewise.
	* math/s_csqrtl.c (__csqrtl): Likewise.
	* math/auto-libm-test-in: Add more tests of csqrt.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	[BZ #18219]
	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Reduce
	threshold on absolute value of exponent for which scaling is used.
	* sysdeps/ieee754/flt-32/e_exp2f.c (__ieee754_exp2f): Likewise.
	* math/auto-libm-test-in: Add more tests of exp2.
	* math/auto-libm-test-out: Regenerated.

2015-06-23  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #17977]
	* resolv/res_hconf.c (_res_hconf_reorder_addrs): Fix unlocking
	when initializing interface list, based on the bug analysis
	and the patch proposed by Eric Newton.
	* resolv/tst-res_hconf_reorder.c: New test.
	* resolv/Makefile [$(have-thread-library) = yes] (tests): Add
	tst-res_hconf_reorder.
	($(objpfx)tst-res_hconf_reorder): Depend on $(libdl)
	and $(shared-thread-library).
	(tst-res_hconf_reorder-ENV): New variable.

	* resolv/res_hconf.c (_res_hconf_reorder_addrs): Fix typo
	in comment.

2015-06-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16353]
	* sysdeps/i386/fpu/s_expm1.S (dbl_min): New object.
	(__expm1): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/i386/fpu/s_expm1f.S (flt_min): New object.
	(__expm1f): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Include <float.h>.
	(__expm1): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/flt-32/s_expm1f.c: Include <float.h>.
	(__expm1f): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c (__ieee754_cosh):
	Check for small arguments before calling __expm1.
	* math/auto-libm-test-in: Do not mark underflow exceptions as
	possibly missing for bug 16353.
	* math/auto-libm-test-out: Regenerated.

2015-06-22  Andreas Schwab  <schwab@suse.de>

	[BZ #18513]
	* resolv/nss_dns/dns-host.c (getanswer_r): Record TTL also for
	PTR queries.

2015-06-22  Leonhard Holz  <leonhard.holz@web.de>

	* string/strcoll_l.c (STRCOLL): Remove unnecessary memset.

	* string/strcoll_l.c: Remove unused struct element idxnow.

2015-06-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18569]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]: Force
	underflow and return argument in case of subnormal argument.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]:
	Likewise.
	* math/auto-libm-test-in: Add more tests of expm1.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16361]
	* sysdeps/i386/fpu/e_expl.S [!USE_AS_EXPM1L] (cmin): New object.
	(IEEE754_EXPL) [!USE_AS_EXPM1L]: Force underflow exception for
	tiny results.
	* sysdeps/x86_64/fpu/e_expl.S [!USE_AS_EXPM1L] (cmin): New object.
	(IEEE754_EXPL) [!USE_AS_EXPM1L]: Force underflow exception for
	tiny results.
	* math/auto-libm-test-in: Add more tests of exp and exp10.  Do not
	mark underflow exceptions as possibly missing for bug 16361.
	* math/auto-libm-test-out: Regenerated.

2015-06-19  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/sys/select.h-data [XOPEN2K8] (pselect): Expect.
	* conform/Makefile (test-xfail-XOPEN2K8/sys/select.h/conform):
	Remove variable.
	(test-xfail-XOPEN2K8/sys/time.h/conform): Likewise.
	(test-xfail-XOPEN2K8/utmpx.h/conform).

	* conform/conformtest.pl ($xerrors): New variable.
	(note_error): New function.
	(compiletest): New argument $xfail.  Use not_error.
	(runtest): Likewise.
	(top level): Handle xfail- lines.  Update calls to compiletest and
	runtest.  Handle xfail- and optional- in headers listed with
	allow-header.
	* conform/data/fcntl.h-data (O_TTY_INIT): Use xfail-.
	(O_EXEC): Likewise.
	(O_SEARCH): Likewise.
	* conform/data/stropts.h-data (ioctl): Likewise.
	* conform/data/sys/ipc.h-data (ipc_perm.mode): Likewise.
	* conform/data/sys/sem.h-data (semid_ds.sem_nsems): Likewise.
	* conform/data/sys/socket.h-data (msghdr.msg_iovlen): Likewise.
	(msghdr.msg_controllen): Likewise.
	(cmsghdr.cmsg_len): Likewise.
	* conform/data/utmpx.h-data (utmpx.ut_tv): Likewise.
	* conform/Makefile (test-xfail-XPG3/sys/ipc.h/conform): Remove
	variable.
	(test-xfail-XPG3/sys/sem.h/conform): Likewise.
	(test-xfail-XPG4/stropts.h/conform): Likewise.
	(test-xfail-XPG4/sys/ipc.h/conform): Likewise.
	(test-xfail-XPG4/sys/sem.h/conform): Likewise.
	(test-xfail-XPG4/sys/socket.h/conform): Likewise.
	(test-xfail-UNIX98/stropts.h/conform): Likewise.
	(test-xfail-UNIX98/sys/ipc.h/conform): Likewise.
	(test-xfail-UNIX98/sys/sem.h/conform): Likewise.
	(test-xfail-UNIX98/sys/socket.h/conform): Likewise.
	(test-xfail-XOPEN2K/stropts.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/ipc.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/sem.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/socket.h/conform): Likewise.
	(test-xfail-XOPEN2K/utmpx.h/conform): Likewise.
	(test-xfail-POSIX2008/fcntl.h/conform): Likewise.
	(test-xfail-POSIX2008/stropts.h/conform): Likewise.
	(test-xfail-XOPEN2K8/fcntl.h/conform): Likewise.
	(test-xfail-XOPEN2K8/stropts.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/ipc.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/sem.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/socket.h/conform): Likewise.

2015-06-19  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/ieee754/ldbl-opt/s_sin.c (__DECL_SIMD_sincos_disable,
	__DECL_SIMD_sincos_disablef, __DECL_SIMD_sincos_disablel): Added empty
	definitions for proper unfolding of __MATHDECL_VEC.

2015-06-19  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* benchtests/bench-strcoll.c:
	Include string.h.
	(main): Remove unused variable res.

2015-06-19  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* timezone/Makefile (%/UTC %/Universal):
	Generate test-result files for UTC and Universal.

2015-06-19  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerated.

2015-06-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16350]
	* sysdeps/i386/fpu/s_asinh.S (__asinh): Force underflow exception
	for arguments with small absolute value.
	* sysdeps/i386/fpu/s_asinhf.S (__asinhf): Likewise.
	* sysdeps/i386/fpu/s_asinhl.S (__asinhl): Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c: Include <float.h>.
	(__asinh): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/flt-32/s_asinhf.c: Include <float.h>.
	(__asinhf): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c: Include <float.h>.
	(__asinhl): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c: Include <float.h>.
	(__asinhl): Force underflow exception for arguments with small
	absolute value.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Include <float.h>.
	(__asinhl): Force underflow exception for arguments with small
	absolute value.
	* math/auto-libm-test-in: Do not mark underflow exceptions as
	possibly missing for bug 16350.
	* math/auto-libm-test-out: Regenerated.

	* include/bits/ipc.h: Remove file.
	* conform/Makefile (test-xfail-XPG3/sys/msg.h/conform): Remove
	variable.
	(test-xfail-XPG3/sys/shm.h/conform): Likewise.
	(test-xfail-XPG4/sys/msg.h/conform): Likewise.
	(test-xfail-XPG4/sys/shm.h/conform): Likewise.
	(test-xfail-UNIX98/sys/msg.h/conform): Likewise.
	(test-xfail-UNIX98/sys/shm.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/msg.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/shm.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/msg.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/shm.h/conform): Likewise.

	* math/auto-libm-test-in: Remove spurious underflow allowance for
	tests of cexp.
	* math/auto-libm-test-out: Regenerated.

	[BZ #18558]
	* sysdeps/unix/sysv/linux/bits/in.h (MCAST_JOIN_GROUP): Remove
	unconditional definition.
	(MCAST_BLOCK_SOURCE): Likewise.
	(MCAST_UNBLOCK_SOURCE): Likewise.
	(MCAST_LEAVE_GROUP): Likewise.
	(MCAST_JOIN_SOURCE_GROUP): Likewise.
	(MCAST_LEAVE_SOURCE_GROUP): Likewise.
	(MCAST_MSFILTER): Likewise.
	* conform/Makefile (test-xfail-XOPEN2K/arpa/inet.h/conform):
	Remove variable.
	(test-xfail-XOPEN2K/netdb.h/conform): Likewise.
	(test-xfail-XOPEN2K/netinet/in.h/conform): Likewise.
	(test-xfail-XOPEN2K8/arpa/inet.h/conform): Likewise.
	(test-xfail-XOPEN2K8/netdb.h/conform): Likewise.
	(test-xfail-XOPEN2K8/netinet/in.h/conform): Likewise.

2015-06-18  Andrew Senkevich  <andrew.senkevich@intel.com>

	* NEWS: Mention addition of x86_64 vector sincosf.
	* math/test-float-vlen16.h: Added wrapper for sincosf tests.
	* math/test-float-vlen4.h: Likewise.
	* math/test-float-vlen8.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New symbols added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added sincosf SIMD declaration.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines):
	Added build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf16_core.S
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf16_core_avx512.S
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf4_core.S
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf4_core_sse4.S
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf8_core.S
	* sysdeps/x86_64/fpu/multiarch/svml_s_sincosf8_core_avx2.S
	* sysdeps/x86_64/fpu/svml_s_sincosf16_core.S
	* sysdeps/x86_64/fpu/svml_s_sincosf4_core.S
	* sysdeps/x86_64/fpu/svml_s_sincosf8_core.S
	* sysdeps/x86_64/fpu/svml_s_sincosf8_core_avx.S
	* sysdeps/x86_64/fpu/svml_s_sincosf_data.S: New file.
	* sysdeps/x86_64/fpu/svml_s_sincosf_data.h: New file.
	* sysdeps/x86_64/fpu/svml_s_wrapper_impl.h: Added 3 argument wrappers.
	* sysdeps/x86_64/fpu/test-float-vlen16.c: : Vector sincosf tests.
	* sysdeps/x86_64/fpu/test-float-vlen16-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8.c: Likewise.

	* NEWS: Mention addition of x86_64 vector sincos.
	* bits/libm-simd-decl-stubs.h: Added stubs for sincos.
	* math/math.h (__MATHDECL_VEC): New macro.
	* math/bits/mathcalls.h: Added sincos declaration with __MATHDECL_VEC.
	* math/gen-libm-have-vector-test.sh: Added generation of sincos wrapper
	declaration under condition.
	* math/test-vec-loop.h (TEST_VEC_LOOP): Refactored.
	* math/test-double-vlen2.h: Added wrapper for sincos tests, reflected
	TEST_VEC_LOOP change.
	* math/test-double-vlen4.h: Likewise.
	* math/test-double-vlen8.h: Likewise.
	* math/test-float-vlen16.h: Reflected TEST_VEC_LOOP change.
	* math/test-float-vlen4.h: Likewise.
	* math/test-float-vlen8.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New symbols added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added sincos SIMD declaration.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines):
	Added build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos2_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos2_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos4_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sincos8_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sincos2_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sincos4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sincos4_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sincos8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sincos_data.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sincos_data.h: New file.
	* sysdeps/x86_64/fpu/svml_d_wrapper_impl.h: Added wrappers for sincos.
	* sysdeps/x86_64/fpu/test-double-vlen2-wrappers.c: Vector sincos tests.
	* sysdeps/x86_64/fpu/test-double-vlen2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8.c: Likewise.

	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New symbols added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added SIMD declaration and asm
	redirections for powf.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines):
	Added build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/svml_s_wrapper_impl.h: Added 2 argument wrappers.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf16_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf16_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf4_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_powf8_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/svml_s_powf16_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_powf4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_powf8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_powf8_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_s_powf_data.S: New file.
	* sysdeps/x86_64/fpu/svml_s_powf_data.h: New file.
	* sysdeps/x86_64/fpu/test-float-vlen16-wrappers.c: Vector powf tests.
	* sysdeps/x86_64/fpu/test-float-vlen16.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8.c: Likewise.
	* math/test-float-vlen16.h: Fixed 2 argument macro.
	* math/test-float-vlen4.h: Likewise.
	* math/test-float-vlen8.h: Likewise.
	* NEWS: Mention addition of x86_64 vector powf.

2015-06-17  Joseph Myers  <joseph@codesourcery.com>

	* math/s_ctanhl.c [LDBL_MANT_DIG == 106] (LDBL_EPSILON): Undefine
	and redefine.
	* math/s_ctanl.c [LDBL_MANT_DIG == 106] (LDBL_EPSILON): Undefine
	and redefine.
	* sysdeps/ieee754/ldbl-128ibm/s_cprojl.c: Remove file.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c: Likewise.

	[BZ #18553]
	* resource/getpriority.c (getpriority): Rename to __getpriority
	and define as weak alias of __getpriority.
	* resource/setpriority.c (setpriority): Rename to __setpriority
	and define as weak alias of __setpriority.
	* sysdeps/mach/hurd/getpriority.c (getpriority): Rename to
	__getpriority and define as weak alias of __getpriority.
	* sysdeps/mach/hurd/setpriority.c (setpriority): Rename to
	__setpriority and define as weak alias of __setpriority.
	* sysdeps/unix/syscalls.list (getpriority): Use __getpriority as
	strong name.
	(setpriority): Use __setpriority as strong name.
	* sysdeps/unix/sysv/linux/getpriority.c (getpriority): Rename to
	__getpriority and define as weak alias of __getpriority.
	* include/sys/resource.h (__getpriority): Declare.  Use
	libc_hidden_proto.
	(__setpriority): Likewise.
	(getpriority): Don't use libc_hidden_proto.
	(setpriority): Likewise.
	* sysdeps/posix/nice.c (nice): Call __getpriority instead of
	getpriority.  Call __setpriority instead of setpriority.
	* conform/Makefile (test-xfail-XPG3/unistd.h/linknamespace):
	Remove variable.

	[BZ #18547]
	* misc/getttyent.c (getttynam): Rename to __getttynam and define
	as weak alias of __getttynam.  Use prototype function definition.
	Call __setttyent, __getttyent and __endttyent instead of
	setttyent, getttyent and endttyent.
	(getttyent): Rename to __getttyent and define as weak alias of
	__getttyent.  Call __setttyent instead of setttyent.  Call
	__fgets_unlocked instead of fgets_unlocked.
	(setttyent): Rename to __setttyent and define as weak alias of
	__setttyent.
	(endttyent): Rename to __endttyent and define as weak alias of
	__endttyent.
	* include/ttyent.h (__getttyent): Declare.  Use libc_hidden_proto.
	(__setttyent): Likewise.
	(__endttyent): Likewise.
	(getttyent): Don't use libc_hidden_proto.
	(setttyent): Likewise.
	(endttyent): Likewise.
	* misc/ttyslot.c (ttyslot): Call __setttyent, __getttyent and
	__endttyent instead of setttyent, getttyent and endttyent.
	* conform/Makefile (test-xfail-XPG4/unistd.h/linknamespace):
	Remove variable.

	[BZ #18546]
	* socket/recv.c (__recv): Use libc_hidden_def.
	* socket/socket.c (__socket): Likewise.
	* sysdeps/mach/hurd/recv.c (__recv): Likewise.
	* sysdeps/mach/hurd/socket.c (__socket): Likewise.
	* sysdeps/unix/sysv/linux/generic/recv.c (__recv): Likewise.
	* sysdeps/unix/sysv/linux/recv.c (__recv): Use libc_hidden_weak.
	* sysdeps/unix/sysv/linux/socket.c (__socket): Use
	libc_hidden_def.
	* sysdeps/unix/sysv/linux/x86_64/recv.c (__recv): Use
	libc_hidden_weak.
	* include/sys/socket.h (__socket): Do not use attribute_hidden.
	Use libc_hidden_proto.
	(__recv): Likewise.
	* socket/Versions (libc): Export __recv and __socket at version
	GLIBC_PRIVATE.
	* sysdeps/unix/sysv/linux/mq_notify.c (helper_thread): Call __recv
	instead of recv.
	(init_mq_netlink): Call __socket instead of socket.
	* conform/Makefile (test-xfail-POSIX/mqueue.h/linknamespace):
	Remove variable.

	[BZ #18545]
	* rt/mq_timedreceive.c (mq_timedreceive): Rename to
	__mq_timedreceive and define as alias of __mq_timedreceive.  Use
	hidden_weak.
	* rt/mq_timedsend.c (mq_timedsend): Rename to __mq_timedsend and
	define as alias of __mq_timedsend.  Use hidden_weak.
	* sysdeps/unix/sysv/linux/syscalls.list (mq_timedsend): Use
	__mq_timedsend as strong name.
	(mq_timedreceive): Use __mq_timedreceive as strong name.
	* include/mqueue.h (__mq_timedsend): Declare.  Use hidden_proto.
	(__mq_timedreceive): Likewise.
	* sysdeps/unix/sysv/linux/mq_receive.c (mq_receive): Call
	__mq_timedreceive instead of mq_timedreceive.
	* sysdeps/unix/sysv/linux/mq_send.c (mq_send): Call __mq_timedsend
	instead of mq_timedsend.
	* conform/Makefile (test-xfail-UNIX98/mqueue.h/linknamespace):
	Remove variable.

	* sysdeps/unix/make-syscalls.sh (emit_weak_aliases): Use
	hidden_def and hidden_weak instead of libc_hidden_def and
	libc_hidden_weak.
	(top level): Refer to hidden_def in comment.
	* sysdeps/unix/syscall-template.S (syscall_hidden_def): New
	macro.  Use it instead of libc_hidden_def.
	* sysdeps/unix/sysv/linux/syscalls.list (mq_timedsend): Do not
	specify __GI_* name explicitly.
	(mq_timedreceive): Likewise.
	(mq_setattr): Likewise.

	[BZ #18544]
	* nptl/pthread_barrier_init.c (pthread_barrier_init): Rename to
	__pthread_barrier_init and define as weak alias of
	__pthread_barrier_init.
	* sysdeps/sparc/nptl/pthread_barrier_init.c
	(pthread_barrier_init): Likewise.
	* nptl/pthread_barrier_wait.c (pthread_barrier_wait): Rename to
	__pthread_barrier_wait and define as weak alias of
	__pthread_barrier_wait.
	* sysdeps/sparc/nptl/pthread_barrier_wait.c
	(pthread_barrier_wait): Likewise.
	* sysdeps/sparc/sparc32/pthread_barrier_wait.c
	(pthread_barrier_wait): Likewise.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_barrier_wait.S
	(pthread_barrier_wait): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/pthread_barrier_wait.S
	(pthread_barrier_wait): Likewise.
	* nptl/Versions (libpthread): Export __pthread_barrier_init and
	__pthread_barrier_wait at version GLIBC_PRIVATE.
	* include/pthread.h (__pthread_barrier_init): Declare.
	(__pthread_barrier_wait): Likewise.
	* sysdeps/unix/sysv/linux/mq_notify.c (notification_function):
	Call __pthread_barrier_wait instead of pthread_barrier_wait.
	(helper_thread): Likewise.
	(init_mq_netlink): Call __pthread_barrier_init instead of
	pthread_barrier_init.

	[BZ #18542]
	* libio/iovswscanf.c (__vswscanf): Use libc_hidden_def.
	(vswscanf): Use ldbl_weak_alias instead of ldbl_strong_alias
	* include/wchar.h (__vswscanf): Declare.  Use libc_hidden_proto.
	* libio/swscanf.c (__swscanf): Call __vswscanf instead of
	vswscanf.
	* conform/Makefile (test-xfail-UNIX98/wchar.h/linknamespace):
	Remove variable.

	[BZ #18540]
	* libio/iofflush.c [!_IO_MTSAFE_IO] (__fflush_unlocked): Define as
	strong alias of _IO_fflush.  Use libc_hidden_def.
	* libio/iofflush_u.c (fflush_unlocked): Rename to
	__fflush_unlocked and define as weak alias of __fflush_unlocked.
	Use libc_hidden_weak.
	* include/stdio.h (__fflush_unlocked): Declare.  Use
	libc_hidden_proto.
	* misc/getpass.c (getpass): Call __fflush_unlocked instead of
	fflush_unlocked.
	* conform/Makefile (test-xfail-UNIX98/unistd.h/linknamespace):
	Remove variable.

	[BZ #18539]
	* stdlib/fmtmsg.c (addseverity): Rename to __addseverity and
	define as weak alias of __addseverity.
	* conform/Makefile (test-xfail-XPG4/fmtmsg.h/linknamespace):
	Remove variable.
	(test-xfail-UNIX98/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/fmtmsg.h/linknamespace): Likewise.

	[BZ #18536]
	* misc/tsearch.c (__tsearch): Use libc_hidden_def.
	(__tfind): Likewise.
	(__tdelete): Likewise.
	(__twalk): Likewise.
	* misc/Versions (libc): Add __tdelete, __tfind, __tsearch and
	__twalk to GLIBC_PRIVATE.
	* include/search.h (__tsearch): Use libc_hidden_proto.
	(__tfind): Likewise.
	(__tdelete): Likewise.
	(__twalk): Likewise.
	* nptl/sem_close.c (sem_close): Call __twalk instead of twalk.
	Call __tdelete instead of tdelete.
	* nptl/sem_open.c (check_add_mapping): Call __tfind instead of
	tfind.  Call __tsearch instead of tsearch.
	* sysdeps/sparc/sparc32/sem_open.c (check_add_mapping): Likewise.
	* conform/Makefile (test-xfail-POSIX/semaphore.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX2008/semaphore.h/linknamespace): Likewise.

	[BZ #18534]
	* stdio-common/dprintf.c (__dprintf): Use libc_hidden_def.
	(dprintf): Define as a weak alias of __dprintf, not a strong
	alias.
	* include/stdio.h (__dprintf): Declare.  Use libc_hidden_proto.
	* misc/syslog.c (__vsyslog_chk): Call __dprintf instead of
	dprintf.
	* conform/Makefile (test-xfail-XPG4/syslog.h/linknamespace):
	Remove variable.
	(test-xfail-UNIX98/syslog.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/syslog.h/linknamespace): Likewise.

	[BZ #18533]
	* misc/syslog.c (vsyslog): Define as a weak alias of __vsyslog,
	not a strong alias.
	* conform/Makefile (test-xfail-XOPEN2K8/syslog.h/linknamespace):
	Remove variable.

	[BZ #18532]
	* inet/in6_addr.c (in6addr_any): Rename to __in6addr_any and
	define as weak alias of __in6addr_any.  Use libc_hidden_data_weak.
	(in6addr_loopback): Rename to __in6addr_loopback and define as
	weak alias of __in6addr_loopback.  Use libc_hidden_data_weak.
	* include/netinet/in.h (__in6addr_loopback): Declare.  Use
	libc_hidden_proto.
	(__in6addr_any): Likewise.
	* inet/gethstbyad_r.c (PREPROCESS): Use __in6addr_any instead of
	in6addr_any.
	* conform/Makefile (test-xfail-XPG4/netdb.h/linknamespace): Remove
	variable.
	(test-xfail-UNIX98/netdb.h/linknamespace): Likewise.

2015-06-17  Andrew Senkevich  <andrew.senkevich@intel.com>

	* bits/libm-simd-decl-stubs.h: Added stubs for pow.
	* math/bits/mathcalls.h: Added pow declaration with __MATHCALL_VEC.
	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New versions added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added SIMD declaration and asm
	redirections for pow.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines): Added
	build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/svml_d_wrapper_impl.h: Added 2 argument wrappers.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow2_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow2_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow4_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_pow8_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/svml_d_pow2_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_pow4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_pow4_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_d_pow8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_pow_data.S: New file.
	* sysdeps/x86_64/fpu/svml_d_pow_data.h: New file.
	* sysdeps/x86_64/fpu/test-double-vlen2-wrappers.c: Added vector pow test.
	* sysdeps/x86_64/fpu/test-double-vlen2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8.c: Likewise.
	* NEWS: Mention addition of x86_64 vector pow.

	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New symbols added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added SIMD declaration and asm
	redirections for expf.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines): Added
	build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf16_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf16_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf4_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_expf8_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/svml_s_expf16_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_expf4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_expf8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_expf8_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_s_expf_data.S: New file.
	* sysdeps/x86_64/fpu/svml_s_expf_data.h: New file.
	* sysdeps/x86_64/fpu/test-float-vlen16-wrappers.c: Vector expf tests.
	* sysdeps/x86_64/fpu/test-float-vlen16.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8.c: Likewise.
	* NEWS: Mention addition of x86_64 vector expf.

	* bits/libm-simd-decl-stubs.h: Added stubs for exp.
	* math/bits/mathcalls.h: Added exp declaration with __MATHCALL_VEC.
	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New versions added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added SIMD declaration and asm
	redirections for exp.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines): Added
	build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp2_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp2_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp4_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_exp8_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/svml_d_exp2_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_exp4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_exp4_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_d_exp8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_exp_data.S: New file.
	* sysdeps/x86_64/fpu/svml_d_exp_data.h: New file.
	* sysdeps/x86_64/fpu/test-double-vlen2-wrappers.c: Added vector exp test.
	* sysdeps/x86_64/fpu/test-double-vlen2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8.c: Likewise.
	* NEWS: Mention addition of x86_64 vector exp.

	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New symbols added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added SIMD declaration and asm
	redirections for logf.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines): Added
	build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf16_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf16_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf4_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_logf8_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/svml_s_logf16_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_logf4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_logf8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_logf8_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_s_logf_data.S: New file.
	* sysdeps/x86_64/fpu/svml_s_logf_data.h: New file.
	* sysdeps/x86_64/fpu/test-float-vlen16-wrappers.c: Vector logf tests.
	* sysdeps/x86_64/fpu/test-float-vlen16.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8.c: Likewise.
	* NEWS: Mention addition of x86_64 vector logf.

	* bits/libm-simd-decl-stubs.h: Added stubs for log.
	* math/bits/mathcalls.h: Added log declaration with __MATHCALL_VEC.
	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New versions added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added SIMD declaration and asm
	redirections for log.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines): Added
	build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log2_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log2_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log4_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_log8_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/svml_d_log2_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_log4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_log4_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_d_log8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_log_data.S: New file.
	* sysdeps/x86_64/fpu/svml_d_log_data.h: New file.
	* sysdeps/x86_64/fpu/test-double-vlen2-wrappers.c: Added vector log
	test.
	* sysdeps/x86_64/fpu/test-double-vlen2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8.c: Likewise.
	* NEWS: Mention addition of x86_64 vector log.

2015-06-17  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/dl-tlsdesc.S (_dl_tlsdesc_return_lazy): Fix
	cfi_adjust_cfa_offset argument.
	(_dl_tlsdesc_undefweak, _dl_tlsdesc_dynamic): Likewise.
	(_dl_tlsdesc_resolve_rela, _dl_tlsdesc_resolve_hold): Likewise.

	[BZ #18034]
	* sysdeps/aarch64/dl-tlsdesc.h (_dl_tlsdesc_return_lazy): Declare.
	* sysdeps/aarch64/dl-tlsdesc.S (_dl_tlsdesc_return_lazy): Define.
	(_dl_tlsdesc_undefweak): Guarantee TLSDESC entry and argument load-load
	ordering using ldar.
	(_dl_tlsdesc_dynamic): Likewise.
	(_dl_tlsdesc_return_lazy): Likewise.
	* sysdeps/aarch64/tlsdesc.c (_dl_tlsdesc_resolve_rela_fixup): Use
	relaxed atomics instead of volatile and synchronize with release store.
	(_dl_tlsdesc_resolve_hold_fixup): Use relaxed atomics instead of
	volatile.
	* elf/tlsdeschtab.h (_dl_tlsdesc_resolve_early_return_p): Likewise.

2015-06-15  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New symbols added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added SIMD declaration for sinf.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines): Added
	build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf16_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf16_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf4_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_sinf8_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/svml_s_sinf16_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_sinf4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_sinf8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_s_sinf8_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_s_sinf_data.S: New file.
	* sysdeps/x86_64/fpu/svml_s_sinf_data.h: New file.
	* sysdeps/x86_64/fpu/test-float-vlen16-wrappers.c: Vector sinf tests.
	* sysdeps/x86_64/fpu/test-float-vlen16.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-float-vlen8.c: Likewise.
	* NEWS: Mention addition of x86_64 vector sinf.

2015-06-14  Joseph Myers  <joseph@codesourcery.com>

	* conform/list-header-symbols.pl (%extra_syms): Add in6addr_any
	and in6addr_loopback for XOPEN2K, XOPEN2K8 and POSIX2008.
	* conform/Makefile (test-xfail-XOPEN2K/netdb.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX2008/netdb.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/netdb.h/linknamespace): Likewise.

2015-06-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18530]
	* libio/iofputs.c [!_IO_MTSAFE_IO] (__fputs_unlocked): Define as
	strong alias of _IO_fputs.  Use libc_hidden_def.
	* libio/iofputs_u.c (fputs_unlocked): Rename to __fputs_unlocked
	and define as weak alias of __fputs_unlocked.  Use
	libc_hidden_weak.
	* include/stdio.h (__fputs_unlocked): Declare.  Use
	libc_hidden_proto.
	* misc/syslog.c (__vsyslog_chk): Call __fputs_unlocked instead of
	fputs_unlocked.

	[BZ #18529]
	* resolv/netdb.h [__USE_POSIX]: Change condition to
	[__USE_XOPEN2K].
	* conform/data/netdb.h-data [XPG4 || UNIX98] (struct addrinfo): Do
	not expect.
	[XPG4 || UNIX98] (AI_PASSIVE): Likewise.
	[XPG4 || UNIX98] (AI_CANONNAME): Likewise.
	[XPG4 || UNIX98] (AI_NUMERICHOST): Likewise.
	[XPG4 || UNIX98] (AI_V4MAPPED): Likewise.
	[XPG4 || UNIX98] (AI_ALL): Likewise.
	[XPG4 || UNIX98] (AI_ADDRCONFIG): Likewise.
	[XPG4 || UNIX98] (AI_NUMERICSERV): Likewise.
	[XPG4 || UNIX98] (NI_NOFQDN): Likewise.
	[XPG4 || UNIX98] (NI_NUMERICHOST): Likewise.
	[XPG4 || UNIX98] (NI_NAMEREQD): Likewise.
	[XPG4 || UNIX98] (NI_NUMERICSERV): Likewise.
	[XPG4 || UNIX98] (NI_DGRAM): Likewise.
	[XPG4 || UNIX98] (EAI_AGAIN): Likewise.
	[XPG4 || UNIX98] (EAI_BADFLAGS): Likewise.
	[XPG4 || UNIX98] (EAI_FAIL): Likewise.
	[XPG4 || UNIX98] (EAI_FAMILY): Likewise.
	[XPG4 || UNIX98] (EAI_MEMORY): Likewise.
	[XPG4 || UNIX98] (EAI_NONAME): Likewise.
	[XPG4 || UNIX98] (EAI_SERVICE): Likewise.
	[XPG4 || UNIX98] (EAI_SOCKTYPE): Likewise.
	[XPG4 || UNIX98] (EAI_SYSTEM): Likewise.
	[XPG4 || UNIX98] (EAI_SYSTEM): Likewise.
	[XPG4 || UNIX98] (freeaddrinfo): Likewise.
	[XPG4 || UNIX98] (gai_strerror): Likewise.
	[XPG4 || UNIX98] (getaddrinfo): Likewise.
	[XPG4 || UNIX98] (getnameinfo): Likewise.

	[BZ #18528]
	* grp/grp.h (endgrent): Condition on [__USE_MISC ||
	__USE_XOPEN_EXTENDED], not [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(getgrent): Likewise.
	* conform/data/grp.h-data [XPG3 || POSIX2008] (getgrent): Do not
	expect.
	[XPG3 || POSIX2008] (endgrent): Likewise.
	[XPG3] (setgrent): Likewise.
	* conform/Makefile (test-xfail-XPG3/grp.h/conform): Remove
	variable.
	(test-xfail-POSIX2008/grp.h/linknamespace): Likewise.

	[BZ #18527]
	* login/getlogin_r.c (getlogin_r): Rename to __getlogin_r and
	define as weak alias of __getlogin_r.  Use libc_hidden_weak.
	* sysdeps/mach/hurd/getlogin_r.c (getlogin_r): Likewise.
	* sysdeps/unix/getlogin_r.c (getlogin_r): Likewise.
	* sysdeps/unix/sysv/linux/getlogin_r.c (getlogin_r): Likewise.
	* include/unistd.h (__getlogin_r): Declare.  Use
	libc_hidden_proto.
	* posix/glob.c (glob): Call __getlogin_r instead of getlogin_r.
	* conform/Makefile (test-xfail-XPG3/glob.h/linknamespace): Remove
	variable.
	(test-xfail-XPG3/wordexp.h/linknamespace): Likewise.
	(test-xfail-XPG4/glob.h/linknamespace): Likewise.
	(test-xfail-XPG4/wordexp.h/linknamespace): Likewise.

2015-06-12  Martin Sebor  <msebor@redhat.com>

	[BZ #18512]
	* Makerules (check-install-supported): New target.
	(install): Add check-install-supported as a dependency.
	* manual/install.texi (Installing the C Library): Document
	that overriding prefix and exec_prefix is not supported.
	Mention DESTDIR.
	* INSTALL: Regenerate from the above.

2015-06-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18519]
	* posix/Versions (libc): Export __libc_pread at version
	GLIBC_PRIVATE.
	* sysdeps/pthread/aio_misc.c (handle_fildes_io): Call __libc_pread
	instead of pread.
	* conform/Makefile (test-xfail-POSIX/aio.h/linknamespace): Remove
	variable.

	[BZ #18522]
	* misc/efgcvt_r.c
	[LONG_DOUBLE_COMPAT (libc, GLIBC_2_0) && !LONG_DOUBLE_CVT]
	(cvt_symbol): Use weak_alias instead of strong_alias.
	[LONG_DOUBLE_COMPAT (libc, GLIBC_2_0)] (cvt_symbol): Likewise.
	* conform/Makefile (test-xfail-XPG4/stdlib.h/linknamespace):
	Remove variable.
	(test-xfail-UNIX98/stdlib.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/stdlib.h/linknamespace): Likewise.

	[BZ #18520]
	* inet/herrno.c (h_errno): Rename to __h_errno.
	(__libc_h_errno): Define as alias of __h_errno not h_errno.
	* include/netdb.h [IS_IN_LIB && !IS_IN (libc)] (h_errno): Define
	to __h_errno instead of h_errno.
	* nptl/herrno.c (h_errno): Rename to __h_errno.
	(__h_errno_location): Refer to __h_errno not h_errno.
	* resolv/Versions (h_errno): Rename to __h_errno.
	* conform/Makefile (test-xfail-XOPEN2K8/grp.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K8/pwd.h/linknamespace): Likewise.

2015-06-11  Andrew Senkevich  <andrew.senkevich@intel.com>

	* configure.ac: More strict check for AVX512 assembler support.
	* configure: Regenerated.

	* bits/libm-simd-decl-stubs.h: Added stubs for sin.
	* math/bits/mathcalls.h: Added sin declaration with __MATHCALL_VEC.
	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New versions added.
	* sysdeps/x86/fpu/bits/math-vector.h: SIMD declaration for sin.
	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines):
	Added build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin2_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin2_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin4_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_sin8_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sin2_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sin4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sin4_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sin8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sin_data.S: New file.
	* sysdeps/x86_64/fpu/svml_d_sin_data.h: New file.
	* sysdeps/x86_64/fpu/test-double-vlen2-wrappers.c: Added vector sin
	test.
	* sysdeps/x86_64/fpu/test-double-vlen2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen4.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8-wrappers.c: Likewise.
	* sysdeps/x86_64/fpu/test-double-vlen8.c: Likewise.
	* NEWS: Mention addition of x86_64 vector sin.

2015-06-11  Florian Weimer  <fweimer@redhat.com>

	* nptl/pthread_key_create.c (__pthread_key_create): Fix typo in
	comment.

2015-06-10  Gleb Fotengauer-Malinovskiy  <glebfm@altlinux.org>

	[BZ #18479]
	* nptl/pt-interp.c: New file.
	* nptl/Makefile (libpthread-routines, libpthread-shared-only-routines):
	Add pt-interp.
	[[$(build-shared) = yes] ($(objpfx)pt-interp.os): Depend on
	$(common-objpfx)runtime-linker.h.

2015-06-10  Dmitry V. Levin  <ldv@altlinux.org>

	* Makeconfig (+interp): Remove unused variable.
	* elf/Makefile ($(objpfx)interp.os): Define for [$(build-shared) = yes]
	only.  Depend on $(common-objpfx)runtime-linker.h instead of
	$(elf-objpfx)runtime-linker.h.
	($(elf-objpfx)runtime-linker.h): Rename to
	$(common-objpfx)runtime-linker.h and move ...
	* Makerules [$(build-shared) = yes]: ... here.
	* elf/interp.c: Include <runtime-linker.h> instead of
	<elf/runtime-linker.h>.

2015-06-09  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/i386/gettimeofday.c
	(__gettimeofday_syscall): Remove vsyscall fallback.
	* sysdeps/unix/sysv/linux/i386/time.c (__time_syscall): Likewise.
	* sysdeps/unix/sysv/linux/x86/gettimeofday.c (__gettimeofday_syscall):
	Add syscall fallback function.
	(gettimeofday_ifunc): Use __gettimeofday_syscall as fallback mechanism
	if vDSO is not present.
	* sysdeps/unix/sysv/linux/x86/time.c (__time_syscall): Add syscall
	fallback function.
	(time_ifunc): Use __time_syscall as fallback mechanism if vDSO is not
	present.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c: Remove file.
	* sysdeps/unix/sysv/linux/x86_64/time.c: Likewise.

2015-06-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18497]
	* wcsmbs/wcscmp.c [!WCSCMP] (WCSCMP): Define as __wcscmp instead
	of wcscmp.
	(wcscmp): Define as weak alias of WCSCMP.
	* wcsmbs/wcscoll.c (STRCOLL): Define as __wcscoll instead of
	wcscoll.
	(USE_HIDDEN_DEF): Define.
	[!USE_IN_EXTENDED_LOCALE_MODEL] (wcscoll): Define as weak alias of
	__wcscoll.  Don't use libc_hidden_weak.
	* wcsmbs/wcscoll_l.c (STRCMP): Define as __wcscmp instead of
	wcscmp.
	* sysdeps/i386/i686/multiarch/wcscmp-c.c
	[SHARED] (libc_hidden_def): Define __GI___wcscmp instead of
	__GI_wcscmp.
	(weak_alias): Undefine and redefine.
	* sysdeps/i386/i686/multiarch/wcscmp.S (wcscmp): Rename to
	__wcscmp and define as weak alias of __wcscmp.
	* sysdeps/x86_64/wcscmp.S (wcscmp): Likewise.
	* include/wchar.h (__wcscmp): Declare.  Use libc_hidden_proto.
	(__wcscoll): Likewise.
	(wcscmp): Don't use libc_hidden_proto.
	(wcscoll): Likewise.
	* posix/regcomp.c (build_range_exp): Call __wcscoll instead of
	wcscoll.
	* posix/regexec.c (check_node_accept_bytes): Likewise.
	* conform/Makefile (test-xfail-XPG3/regex.h/linknamespace): Remove
	variable.
	(test-xfail-XPG4/regex.h/linknamespace): Likewise.
	(test-xfail-POSIX/regex.h/linknamespace): Likewise.

	[BZ #18507]
	* sysdeps/unix/sysv/linux/fstatvfs.c (fstatvfs): Rename to
	__fstatvfs and define as weak alias of __fstatvfs.  Use
	libc_hidden_weak.
	* sysdeps/unix/sysv/linux/statvfs.c (statvs): Rename to __statvfs
	and define as weak alias of __statvfs.  Use libc_hidden_weak.
	* sysdeps/unix/sysv/linux/wordsize-64/fstatvfs.c (__fstatvfs64):
	Define as alias of __fstatvfs, not fstatvfs.
	(fstatvfs64): Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/statvfs.c (__statvfs64):
	Define as alias of __statvfs, not statvfs.
	(statvfs64): Likewise.
	* conform/Makefile (test-xfail-POSIX/unistd.h/linknamespace):
	Remove variable.

2015-06-09  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	(HAVE_GETCPU_VSYSCALL): Define.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h
	(HAVE_GETCPU_VSYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sched_getcpu.c: Remove file.
	* sysdeps/unix/sysv/linux/sched_getcpu.c
	(HAVE_VSYSCALL) [HAVE_GETCPU_VSYSCALL]: Define.
	(sched_getcpu): Use INLINE_VSYSCALL instead of INLINE_SYSCALL.
	* sysdeps/unix/sysv/linux/x86/libc-vdso.h (getcpu): Add vDSO
	prototype.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c
	(__vdso_platform_setup): Remove vsyscall getcpu fallback.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S: Remove file.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (HAVE_GETCPU_VSYSCALL):
	Define.
	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile: Remove file.
	* sysdeps/unix/sysv/linux/x86_64/x32/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu-static.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Likewise.

2015-06-09  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86_64/fpu/Makefile: New file.
	* sysdeps/x86_64/fpu/Versions: New file.
	* sysdeps/x86_64/fpu/svml_d_cos_data.S: New file.
	* sysdeps/x86_64/fpu/svml_d_cos_data.h: New file.
	* sysdeps/x86_64/fpu/svml_d_cos2_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_cos4_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_cos4_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_d_cos8_core.S: New file.
	* sysdeps/x86_64/fpu/svml_d_wrapper_impl.h: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos2_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos2_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos4_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_d_cos8_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines):
	Added build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/x86/fpu/bits/math-vector.h: Added SIMD declaration for cos.
	* math/bits/mathcalls.h: Added cos declaration with __MATHCALL_VEC.
	* sysdeps/x86_64/configure.ac: Options for libmvec build.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/sysdep.h (cfi_offset_rel_rsp): New macro.
	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New file.
	* manual/install.texi (Configuring and compiling): Document
	--disable-mathvec.
	* INSTALL: Regenerated.
	* NEWS: Mention addition of libmvec and x86_64 vector cos.

	* math/Makefile: Added rules for vector tests.
	* math/gen-libm-have-vector-test.sh: Added generation of wrapper
	declaration under condition.
	* math/test-double-vlen2.h: New file.
	* math/test-double-vlen4.h: New file.
	* math/test-double-vlen8.h: New file.
	* math/test-vec-loop.h: Added initialization macro.
	* sysdeps/x86_64/fpu/Makefile: Added variables for vector tests.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenarated.
	* sysdeps/x86_64/fpu/math-tests-arch.h: New file.
	* sysdeps/x86_64/fpu/test-double-vlen2-wrappers.c: New file.
	* sysdeps/x86_64/fpu/test-double-vlen2.c: New file.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2-wrappers.c: New file.
	* sysdeps/x86_64/fpu/test-double-vlen4-avx2.c: New file.
	* sysdeps/x86_64/fpu/test-double-vlen4-wrappers.c: New file.
	* sysdeps/x86_64/fpu/test-double-vlen4.c: New file.
	* sysdeps/x86_64/fpu/test-double-vlen8-wrappers.c: New file.
	* sysdeps/x86_64/fpu/test-double-vlen8.c: New file.

	* sysdeps/x86_64/fpu/Makefile (libmvec-support): Added new files.
	* sysdeps/x86_64/fpu/Versions: New versions added.
	* sysdeps/x86_64/fpu/svml_s_cosf4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf4_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf4_core_sse4.S: New file.
	* sysdeps/x86_64/fpu/svml_s_cosf8_core_avx.S: New file.
	* sysdeps/x86_64/fpu/svml_s_cosf8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf8_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf8_core_avx2.S: New file.
	* sysdeps/x86_64/fpu/svml_s_cosf16_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf16_core.S: New file.
	* sysdeps/x86_64/fpu/multiarch/svml_s_cosf16_core_avx512.S: New file.
	* sysdeps/x86_64/fpu/svml_s_wrapper_impl.h: New file.
	* sysdeps/x86_64/fpu/svml_s_cosf_data.S: New file.
	* sysdeps/x86_64/fpu/svml_s_cosf_data.h: New file.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libmvec-sysdep_routines):
	Added build of SSE, AVX2 and AVX512 IFUNC versions.
	* sysdeps/unix/sysv/linux/x86_64/libmvec.abilist: New versions added.
	* sysdeps/x86/fpu/bits/math-vector.h: Added SIMD declaration for cosf.
	* NEWS: Mention addition of x86_64 vector cosf.

	* math/Makefile: Added CFLAGS for new tests.
	* math/test-float-vlen16.h: New file.
	* math/test-float-vlen4.h: New file.
	* math/test-float-vlen8.h: New file.
	* math/test-double-vlen2.h: Fixed 2 argument macro and comment.
	* sysdeps/x86_64/fpu/Makefile: Added new tests and variables.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/test-float-vlen16-wrappers.c: New file.
	* sysdeps/x86_64/fpu/test-float-vlen16.c: New file.
	* sysdeps/x86_64/fpu/test-float-vlen4-wrappers.c: New file.
	* sysdeps/x86_64/fpu/test-float-vlen4.c: New file.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2-wrappers.c: New file.
	* sysdeps/x86_64/fpu/test-float-vlen8-avx2.c: New file.
	* sysdeps/x86_64/fpu/test-float-vlen8-wrappers.c: New file.
	* sysdeps/x86_64/fpu/test-float-vlen8.c: New file.

2015-06-09 Marko Myllynen  <myllynen@redhat.com>

	* locale/C-ctype.c (PREDEFINED_CLASSES): Remove.
	* locale/programs/ld-ctype.c: Likewise.

2015-06-08  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.h (bit_AVX512F_Usable,
	bit_AVX512DQ_Usable, bit_Opmask_state, bit_ZMM0_15_state,
	bit_ZMM16_31_state): New macro.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Check and set bit_AVX512F_Usable, bit_AVX512DQ_Usable.

2015-06-08  Joseph Myers  <joseph@codesourcery.com>

	* include/stdio.h (__open_memstream): Say "C++ tests" in comment.

2015-06-06  Justus Winter  <4winter@informatik.uni-hamburg.de>

	* mach/mach/mach_traps.h (thread_switch): Fix typo in comment.

2015-06-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18498]
	* libio/memstream.c (open_memstream): Rename to __open_memstream
	and define as weak alias of __open_memstream.
	* include/stdio.h (__open_memstream): Declare.  Use
	libc_hidden_proto.
	(open_memstream): Don't use libc_hidden_proto.
	* misc/syslog.c (__vsyslog_chk): Call __open_memstream instead of
	open_memstream.
	* posix/getopt.c (_getopt_internal_r): Likewise.
	* conform/Makefile (test-xfail-XPG3/stdio.h/linknamespace): Remove
	variable.
	(test-xfail-XPG4/stdio.h/linknamespace): Likewise.
	(test-xfail-UNIX98/stdio.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/unistd.h/linknamespace): Likewise.

	[BZ #18496]
	* posix/regex_internal.c (build_wcs_upper_buffer): Call __wcrtomb
	instead of wcrtomb.

	[BZ #18483]
	* signal/signal.h [__USE_XOPEN2K] (psignal): Change condition to
	[__USE_XOPEN2K8].  Remove redundant #endif.
	[__USE_XOPEN2K] (psiginfo): Change condition to [__USE_XOPEN2K8].
	Remove redundant #if.
	* conform/Makefile (test-xfail-XOPEN2K/signal.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/sys/wait.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/ucontext.h/linknamespace): Likewise.

	[BZ #18495]
	* wctype/wcfuncs.c (__iswalnum): Use libc_hidden_def.
	(__iswlower): Likewise.
	* include/wctype.h (__iswalnum): Declare.  Use libc_hidden_proto.
	(__iswlower): Likewise.
	* posix/regcomp.c (re_compile_fastmap_iter): Call __towlower
	instead of towlower.
	* posix/regex_internal.c (build_wcs_upper_buffer): Call __iswlower
	instead of iswlower.  Call __towupper instead of towupper.
	* posix/regex_internal.h (IS_WIDE_WORD_CHAR): Call __iswalnum
	instead of iswalnum.

2015-06-05  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* malloc/tst-malloc-backtrace.c (do_test): Redirect libc fatal
	errors to stderr.

2015-06-05  Florian Weimer  <fweimer@redhat.com>

	[BZ #15661]
	[BZ #17322]
	* sysdeps/posix/posix_fallocate64.c (__posix_fallocate64_l64):
	Check for overflow properly.  Check for O_APPEND.  Ignore large
	file system block sizes.  Add comments about problems.
	* sysdeps/posix/posix_fallocate.c (posix_fallocate): Likewise.
	* manual/filesys.texi (Storage Allocation): New node.

2015-06-04  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysdep.h [SYSCALL_CANCEL]: New macro: define
	cancellable syscalls.
	(SYS_ify): Add guard to no redefine it.
	(INLINE_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/accept4.c (accept4): Remove
	LIBC_CANCEL_ASYNC/INLINE_SYSCALL/LIBC_CANCEL_RESET and use
	SYSCALL_CANCEL instead.
	* sysdeps/unix/sysv/linux/alpha/fdatasync.c (__fdatasync): Likewise.
	* sysdeps/unix/sysv/linux/arm/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/arm/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/arm/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/arm/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/epoll_pwait.c (epoll_pwait): Likewise.
	* sysdeps/unix/sysv/linux/fallocate.c (fallocate): Likewise.
	* sysdeps/unix/sysv/linux/fallocate64.c (fallocate64): Likewise.
	* sysdeps/unix/sysv/linux/generic/open.c (__libc_open): Likewise.
	* sysdeps/unix/sysv/linux/generic/open64.c (__libc_open64): Likewise.
	* sysdeps/unix/sysv/linux/generic/pause.c (__libc_pause): Likewise.
	* sysdeps/unix/sysv/linux/generic/poll.c (__poll): Likewise.
	* sysdeps/unix/sysv/linux/generic/recv.c (__libc_recv): Likewise.
	* sysdeps/unix/sysv/linux/generic/select.c (__select): Likewise.
	* sysdeps/unix/sysv/linux/generic/send.c (__libc_send): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread.c (__libc_pread):
	Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread64.c
	(__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/preadv.c
	(__libc_preadv): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/preadv64.c
	(__libc_readv64): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite.c
	(__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite64.c
	(__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwritev.c
	(__libc_pwritev): Likewise.
	* sysdeps/sysv/linux/generic/wordsize-32/pwritev64.c
	(__libc_pwritev64): Likewise.
	* sysdeps/unix/sysv/linux/i386/fcntl.c (__libc_fcntl): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/sync_file_range.c
	(sync_file_range): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/fallocate.c (fallocate):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/fallocate64.c (fallocate64):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/mips/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/msgrcv.c (__libc_msgrcv): Likewise.
	* sysdeps/unix/sysv/linux/msgsnd.c (__libc_msgsnd): Likewise.
	* sysdeps/unix/sysv/linux/open64.c (__libc_open64): Likewise.
	* sysdeps/unix/sysv/linux/openat.c (__libc_openat): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c (__libc_pread):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c
	(__libc_read64): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c (__libc_write):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c (__libc_write64):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fcntl.c (__libc_fcntl):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c (__libc_pread):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c
	(__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c (__libc_pwrite):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c
	(__libc_pwrite64): Likewise.
	* sysdeps/sysv/linux/powerpc/powerpc64/sync_file_range.c
	(sync_file_range): Likewise.
	* sysdeps/unix/sysv/linux/ppoll.c (ppoll): Likewise.
	* sysdeps/unix/sysv/linux/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/preadv.c (__libc_preadv): Likewise.
	* sysdeps/unix/sysv/linux/pselect.c (__pselect): Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c (PWRITEV): Likewise.
	* sysdeps/unix/sysv/linux/readv.c (__libc_readv): Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c (recvmmsg): Likewise.
	* sysdeps/unix/sysv/linux/sendmmsg.c (sendmmsg): Likewise.
	* sysdeps/unix/sysv/linux/sh/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/sh/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/sigsuspend.c (__sigsuspend): Likewise.
	* sysdeps/unix/sysv/linux/sigtimedwait.c (__sigtimedwait): Likewise.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c (__sigwaitinfo): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgrcv.c (__libc_msgrcv):
	Likewise.
	* sysdeps/unix/sysv/linux/sync_file_range.c (sync_file_range):
	Likewise.
	* sysdeps/unix/sysv/linux/tcdrain.c (__libc_tcdrain): Likewise.
	* sysdeps/unix/sysv/linux/timer_routines.c (timer_helper_thread):
	Likewise.
	* sysdeps/unix/sysv/linux/wait.c (__libc_wait): Likewise.
	* sysdeps/unix/sysv/linux/waitid.c (__waitid): Likewise.
	* sysdeps/unix/sysv/linux/waitpid.c (__libc_waitpid): Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fallocate.c (fallocate):
	Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/preadv.c (preadv): Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/pwritev.c (pwritev): Likewise.
	* sysdeps/unix/sysv/linux/writev.c (__libc_writev): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/recv.c (__libc_recv): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/send.c (__libc_send): Likewise.

2015-06-04  Nathan Lynch  <nathan_lynch@codesourcery.com>

	* sysdeps/unix/sysv/linux/arm/Makefile: (sysdep_routines):
	Include dl-vdso.
	* sysdeps/unix/sysv/linux/arm/init-first.c: New file:
	Use VDSO routines for gettimeofday, clock_gettime if
	available.
	* sysdeps/unix/sysv/linux/arm/libc-vdso.h: New file:
	Declare VDSO symbols.
	* sysdeps/unix/sysv/linux/arm/sysdep.h:
	[HAVE_GETTIMEOFDAY_VSYSCALL]: Define.
	[HAVE_CLOCK_GETTIME_VSYSCALL]: Define.
	* sysdeps/unix/sysv/linux/arm/Versions: Add
	__vdso_clock_gettime.

2015-06-04  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/not-cancel.h (open_not_cancel): Rewrite to
	be an inline implementation regardless of library is built within.
	(open_not_cancel_2): Likewise.
	(__read_nocancel): Likewise.
	(__write_nocancel): Likewise.
	(openat_not_cancel): Likewise.
	(openat_not_cancel_3): Likewise.
	(openat64_not_cancel): Likewise.
	(openat64_not_cancel_3): Likewise.
	(__close_nocancel): Likewise.
	(pause_not_cancel): Likewise.
	(nanosleep_not_cancel): Likewise.
	(sigsuspend_not_cancel): Likewise.

2015-06-04  Torvald Riegel  <triegel@redhat.com>

	[BZ #14958]
	* nptl/pthread_rwlock_rdlock.c (__pthread_rwlock_rdlock): Add missing
	wake-up.
	(__pthread_rwlock_rdlock_slow): Likewise.
	* nptl/pthread_rwlock_timedrdlock.c (pthread_rwlock_timedrdlock):
	Likewise.
	* nptl/pthread_rwlock_tryrdlock.c (__pthread_rwlock_tryrdlock):
	Likewise.
	* nptl/pthread_rwlock_unlock.c (__pthread_rwlock_unlock): Add comments.
	* nptl/tst-rwlock16.c: New file.
	* nptl/Makefile (tests): Add new test.

2015-06-04  Torvald Riegel  <triegel@redhat.com>

	[BZ #18324]
	* nptl/pthread_rwlock_timedwrlock.c (pthread_rwlock_timedwrlock): Add
	missing wake-up of readers.
	* nptl/tst-rwlock15.c: New file.
	* nptl/Makefile (tests): Add new test.

2015-06-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/nacl-interfaces.c (try_supply): New static function.
	(PASTE_NAME (__nacl_supply_interface_, MODULE_NAME)): New function.
	* sysdeps/nacl/nacl-interfaces.h: Declare __nacl_supply_interface_libc
	and __nacl_supply_interface_rtld.
	* sysdeps/nacl/nacl_interface_ext_supply.c: New file.
	* sysdeps/nacl/Makefile [$(subdir) = csu] (sysdep_routines): Add it.
	* sysdeps/nacl/Versions (ld: GLIBC_PRIVATE):
	Add __nacl_supply_interface_rtld.
	(libc: GLIBC_2.22): Add nacl_interface_ext_supply.

2015-06-03  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c (__fmal): Replace finite with
	isfinite.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-finite.c (__finitel): Likewise.

2015-06-03  Wilco Dijkstra  <wdijkstr@arm.com>

	* math/e_exp10.c: Replace __isinf*, __isnan*, __finite* and
	__signbit* with standard C99 macros.
	* math/e_exp10l.c: Likewise.
	* math/e_exp2l.c: Likewise.
	* math/e_scalb.c: Likewise.
	* math/e_scalbf.c: Likewise.
	* math/e_scalbl.c: Likewise.
	* math/s_ldexp.c: Likewise.
	* math/s_ldexpf.c: Likewise.
	* math/s_ldexpl.c: Likewise.
	* math/w_atan2.c: Likewise.
	* math/w_atan2f.c: Likewise.
	* math/w_atan2l.c: Likewise.
	* math/w_cosh.c: Likewise.
	* math/w_coshf.c: Likewise.
	* math/w_coshl.c: Likewise.
	* math/w_exp10.c: Likewise.
	* math/w_exp10f.c: Likewise.
	* math/w_exp10l.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_hypot.c: Likewise.
	* math/w_hypotf.c: Likewise.
	* math/w_hypotl.c: Likewise.
	* math/w_jnl.c: Likewise.
	* math/w_lgamma.c: Likewise.
	* math/w_lgamma_r.c: Likewise.
	* math/w_lgammaf.c: Likewise.
	* math/w_lgammaf_r.c: Likewise.
	* math/w_lgammal.c: Likewise.
	* math/w_lgammal_r.c: Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* math/w_scalb.c: Likewise.
	* math/w_scalbf.c: Likewise.
	* math/w_scalbl.c: Likewise.
	* math/w_scalbln.c: Likewise.
	* math/w_scalblnf.c: Likewise.
	* math/w_scalblnl.c: Likewise.
	* math/w_sinh.c: Likewise.
	* math/w_sinhf.c: Likewise.
	* math/w_sinhl.c: Likewise.
	* math/w_tgamma.c: Likewise.
	* math/w_tgammaf.c: Likewise.
	* math/w_tgammal.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp10.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/w_exp.c: Likewise.
	* sysdeps/ieee754/flt-32/e_expf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/flt-32/w_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cbrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-finite.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-isinf.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-isnan.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-signbit.c: Likewise.
	* stdio-common/printf_fp.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/printf_size.c: Likewise.

2015-06-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18470]
	* posix/fnmatch.c (fnmatch) [_LIBC]: Call __strnlen instead of
	strnlen.
	* conform/Makefile (test-xfail-XPG3/fnmatch.h/linknamespace):
	Remove variable.
	(test-xfail-XPG4/fnmatch.h/linknamespace): Likewise.
	(test-xfail-POSIX/fnmatch.h/linknamespace): Likewise.
	(test-xfail-POSIX/glob.h/linknamespace): Likewise.
	(test-xfail-POSIX/wordexp.h/linknamespace): Likewise.
	(test-xfail-UNIX98/fnmatch.h/linknamespace): Likewise.
	(test-xfail-UNIX98/glob.h/linknamespace): Likewise.
	(test-xfail-UNIX98/wordexp.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/fnmatch.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/glob.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/wordexp.h/linknamespace): Likewise.

	[BZ #18468]
	* wcsmbs/wmemchr.c (wmemchr): Rename to __wmemchr and define as
	weak alias of __wmemchr.  Use libc_hidden_weak.
	* include/wchar.h (__wmemchr): Declare.  Use libc_hidden_proto.
	* posix/fnmatch.c [HANDLE_MULTIBYTE] (MEMCHR): Use __wmemchr
	instead of wmemchr.

2015-06-02  Roland McGrath  <roland@hack.frob.com>

	[BZ #18383]
	* elf/tst-tlsalign-extern.c: New file.
	* elf/tst-tlsalign-extern-static.c: New file.
	* elf/tst-tlsalign-vars.c: New file.
	* elf/Makefile (tests-static): Add tst-tlsalign-extern-static.
	[$(build-shared) = yes] (tests): Add tst-tlsalign-extern.
	($(objpfx)tst-tlsalign-extern): Depend on tst-tlsalign-vars.o.
	($(objpfx)tst-tlsalign-extern-static): Likewise.
	(test-xfail-tst-tlsalign-extern-static): New variable.

2015-06-02  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/mips/mips32/sysdep.h (INLINE_SYSCALL):
	Use variable name _sc_err instead of err.
	[__mips16] (INTERNAL_SYSCALL_NCS): Use variable name _sc_ret
	instead of ret.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/sysdep.h
	(INLINE_SYSCALL): Use variable name _sc_err instead of err.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/sysdep.h
	(INLINE_SYSCALL): Likewise.

	* string/strnlen.c [!STRNLEN] (__strnlen): Use libc_hidden_def.
	* include/string.h (__strnlen): Use libc_hidden_proto.
	* sysdeps/aarch64/strnlen.S (__strnlen): Use libc_hidden_def.
	* sysdeps/i386/i686/multiarch/strnlen-c.c [SHARED]
	(libc_hidden_def): Define __GI___strnlen as well as __GI_strnlen.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strnlen-power7.S
	(libc_hidden_def): Undefine and redefine.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strnlen-ppc32.c
	[SHARED] (libc_hidden_def): Define __GI___strnlen as well as
	__GI_strnlen.
	* sysdeps/powerpc/powerpc32/power7/strnlen.S (__strnlen): Use
	libc_hidden_def.
	* sysdeps/tile/tilegx/strnlen.c (__strnlen): Likewise.

	[BZ #18469]
	* wctype/wcfuncs.c (towlower): Rename to __towlower and define as
	weak alias of __towlower.  Use libc_hidden_weak.
	(towupper): Rename to __towupper and define as weak alias of
	__towupper.  Use libc_hidden_weak.
	* include/wctype.h (__towlower): Declare.  Use libc_hidden_proto.
	(__towupper): Likewise.
	* posix/fnmatch.c [HANDLE_MULTIBYTE && _LIBC] (FOLD): Use
	__towlower instead of towlower.

2015-06-02  Roland McGrath  <roland@hack.frob.com>

	* stdlib/setenv.c [__GNUC__,__GNUC_MINOR__ < 4,7]: Use
	"-Wuninitialized" rather than "-Wmaybe-uninitialized" in pragma.

2015-06-02  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Update.

2015-06-01  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/i386/sysdep.h (HAVE_CLOCK_GETTIME_VSYSCALL):
	Define.
	(HAVE_GETTIMEOFDAY_VSYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h
	(HAVE_CLOCK_GETTIME_VSYSCALL): Likewise.
	(HAVE_GETTIMEOFDAY_VSYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/timespec_get.c: Include errno.h.
	* sysdeps/unix/sysv/linux/x86/clock_gettime.c: Remove file.
	* sysdeps/unix/sysv/linux/x86/timespec_get.c: Likewise.

2015-06-01  Martin Sebor  <msebor@redhat.com>

	[BZ #18116]
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/setcontext.S
	(__setcontext): Use extended four-operand version of mtsf whenever
	possible.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/swapcontext.S
	(__novec_swapcontext): Likewise.

2015-06-01  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/scripts/compare_bench.py: New file.
	* benchtests/scripts/import_bench.py (mean): New function.
	(split_list): Likewise.
	(do_for_all_timings): Likewise.
	(compress_timings): Likewise.

	* benchtests/scripts/import_bench.py: New file.
	* benchtests/scripts/validate_benchout.py: Import import_bench
	instead of jsonschema.
	(validate_bench): Remove function.
	(main): Use import_bench.

2015-06-01  Steve Ellcey  <sellcey@imgtec.com>

	* resolv/res_hconf.c (_res_hconf_reorder_addrs): Use a union to
	copy data from cur_ifr->ifr_addr and cur_ifr->ifr_netmask.

2015-05-29  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2015-05-28  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/exit-thread.h (__exit_thread): If not detached,
	set THREAD_SELF->tid to a magic value and futex-wake it.
	Pass its address to the thread_exit system call.
	* sysdeps/nacl/pthread-pids.h (__nacl_get_tid): Assert that TID's low
	bit is clear.
	* sysdeps/nacl/lowlevellock.h: New file.
	* sysdeps/nacl/lll_timedwait_tid.c: New file.

	* sysdeps/nacl/lowlevellock-futex.h (lll_futex_timed_wait):
	Add TIMEOUT to current time, don't subtract it.

2015-05-28  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #2981]
	[BZ #18422]
	* Makefile ($(objpfx)tst-audit2): Depend on $(libdl).
	($(objpfx)tst-audit2.out): Also depend on
	$(objpfx)tst-auditmod9b.so.
	* elf/tst-audit2.c: Include <dlfcn.h>.
	(calloc_called): New.
	(calloc): Allow to be called more than once.
	(do_test): dllopen/dlclose $ORIGIN/tst-auditmod9b.so.

2015-05-28  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/ieee754/dbl-64/s_fabs.c: (__fabs): Call __builtin_fabs.
	* sysdeps/ieee754/flt-32/s_fabsf.c: (__fabsf): Likewise.

2015-05-27  Marko Myllynen  <myllynen@redhat.com>

	* stdlib/monetary.h: Fix comment.

2015-05-26  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/tile/sysdep.h (INLINE_SYSCALL):
	Avoid using variables in #defines that might cause shadowing.
	(INTERNAL_VSYSCALL_CALL): Likewise.

2015-05-26  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/lll_timedlock_wait.c: New file.

	* nptl/lowlevellock.c (__lll_timedlock_wait): Moved ...
	* nptl/lll_timedlock_wait.c: ... to this new file.
	* nptl/Makefile (libpthread-routines): Add it.
	* nptl/lowlevellock.c (__lll_timedwait_tid): Moved ...
	* nptl/lll_timedwait_tid.c: ... to this new file.
	* nptl/Makefile (libpthread-routines): Add it.
	* sysdeps/sparc/sparc32/lll_timedlock_wait.c: New file.
	* sysdeps/sparc/sparc32/lll_timedwait_tid.c: New file.
	* sysdeps/unix/sysv/linux/i386/i486/lll_timedlock_wait.c: New file.
	* sysdeps/unix/sysv/linux/i386/i586/lll_timedlock_wait.c: New file.
	* sysdeps/unix/sysv/linux/i386/i686/lll_timedlock_wait.c: New file.
	* sysdeps/unix/sysv/linux/i386/i486/lll_timedwait_tid.c: New file.
	* sysdeps/unix/sysv/linux/i386/i586/lll_timedwait_tid.c: New file.
	* sysdeps/unix/sysv/linux/i386/i686/lll_timedwait_tid.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/lll_timedlock_wait.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/lll_timedwait_tid.c: New file.

2015-05-26  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/gettimeofday.c: Remove file.
	* sysdeps/unix/sysv/linux/s390/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/tile/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h
	(HAVE_GETTIMEOFDAY_VSYSCALL): Define.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h
	(HAVE_GETTIMEOFDAY_VSYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h
	(HAVE_GETTIMEOFDAY_VSYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h
	(HAVE_GETTIMEOFDAY_VSYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/gettimeofday.c: New file: gettimeofday
	using vDSO syscall macro.

2015-05-26  Andriy Rysin  <arysin@gmail.com>

	[BZ #17293]
	* uk_UA: Fix sorting order for Ukrainian locale

2015-05-26  Marko Myllynen  <myllynen@redhat.com>

	* stdlib/monetary.h: Fix comment.

2015-05-26  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	[BZ #18234]
	* conform/data/sys/stat.h-data (struct stat): Add tests for st_atim,
	st_mtim and st_ctim members.
	* sysdeps/nacl/bits/stat.h (struct stat, struct stat64): Make
	st_atim, st_ctim, st_mtim visible under __USE_XOPEN2K8 only.
	* sysdeps/unix/sysv/linux/generic/bits/stat.h (struct stat,):
	(struct stat64): Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/stat.h (struct stat,):
	(struct stat64): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/bits/stat.h (struct stat,):
	(struct stat64): Likewise.

2015-05-26  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/gettimeofday.c (HAVE_VSYSCALL):
	Define and include sysdep-vdso.h.
	* sysdeps/unix/sysv/linux/s390/gettimeofday.c (HAVE_VSYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/gettimeofday.c (HAVE_VSYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/aarch64/init-first.c (__vdso_gettimeofday):
	Define with VDSO_SYMBOL and use PTR_MANGLE.
	(__vdso_clock_gettime): Likewise.
	(__vdso_clock_getres): Likewise.
	(_libc_vdso_platform_setup): Likewise.
	* sysdeps/unix/sysv/linux/i386/init-first.c (__vdso_clock_gettime):
	Likewise.
	(_libc_vdso_platform_setup): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c (__vdso_gettimeofday):
	Likewise.
	(__vdso_clock_gettime): Likewise.
	(__vdso_clock_getres): Likewise.
	(__vdso_get_tbfreq): Likewise.
	(__vdso_getcpu): Likewise.
	(__vdso_time): Likewise.
	(__vdso_sigtramp_rt64): Likewise.
	(__vdso_signtramp32): Likewise.
	(__vdso_sigtramp_rt32): Likewise.
	(_libc_vdso_platform_setup): Likewise.
	* sysdeps/unix/sysv/linux/s390/init-first.c (__vdso_gettimeofay):
	Likewise.
	(__vdso_clock_gettime): Likewise.
	(__vdso_clock_getres): Likewise.
	(_libc_vdso_platform_setup): Likewise.
	* sysdeps/unix/sysv/linux/tile/init-first.c (__vdso_gettimeofday):
	Likewise.
	(__vdso_clock_gettime): Likewise.
	(_libc_vdso_platform_setup): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c (__vdso_clock_gettime):
	Likewise.
	(__vdso_getcpu): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/libc-vdso.h (__vdso_gettimeoday):
	Use VDSO_SYMBOL macro to define.
	(__vdso_clock_gettime): Likewise.
	(__vdso_clock_getres): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/libc-vdso.h (__vdso_gettimeofday):
	Likewise.
	(__vdso_clock_gettime): Likewise.
	(__vdso_clock_getres): Likewise.
	(__vdso_get_tbfreq): Likewise.
	(__vdso_getcpu): Likewise.
	(__vdso_time): Likewise.
	(__vdso_sigtramp_rt64): Likewise.
	(__vdso_signtramp32): Likewise.
	(__vdso_sigtramp_rt32): Likewise.
	* sysdeps/unix/sysv/linux/s390/libc-vdso.h (__vdso_gettimeofday):
	Likewise.
	(__vdso_clock_gettime): Likewise.
	(__vdso_clock_getres): Likewise.
	* sysdeps/unix/sysv/linux/tile/libc-vdso.h (__vdso_gettimeofday):
	Likewise.
	(__vdso_clock_gettime): Likewise.
	* sysdeps/unix/sysv/linux/x86/libc-vdso.h (__vdso_clock_gettime):
	Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (INLINE_VSYSCALL):  Remove
	macro.
	(INTERNAL_VSYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h (INLINE_VSYSCALL):
	Remove macro.
	(INTERNAL_VSYSCALL): Likewise.
	(INTERNAL_VSYSCALL_NCS): Likewise.
	(INTERNAL_VSYSCALL_CALL): New macro.
	(INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK): Use PTR_DEMANGLE.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h (INLINE_VSYSCALL):
	Likewise.
	(INTERNAL_VSYSCALL): Likewise.
	(INTERNAL_VSYSCALL_NCS): Likewise.
	(INTERNAL_VSYSCALL_CALL): New macro.
	(INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK): Use PTR_DEMANGLE.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	(INLINE_VSYSCALL): Remove macro.
	(INTERNAL_VSYSCALL): Remove macro.
	(INTERNAL_VSYSCALL_NCS): Remove macro.
	(INTERNAL_VSYSCALL_CALL): New macro.
	(INTERNAL_VSYSCALL_CALL_TYPE): New macro.
	(INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK): Use INTERNAL_VSYSCALL_CALL.
	(INTERNAL_VSYSCALL_NCS_TYPE): Likewise.
	(HAVE_CLOCK_GETRES_VSYSCALL): New define.
	(HAVE_CLOCK_GETTIME_VSYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h
	(INLINE_VSYSCALL): Remove macro.
	(INTERNAL_VSYSCALL): Likewise.
	(INTERNAL_VSYSCALL_NCS): Likewise.
	(INTERNAL_VSYSCALL_CALL): New macro.
	(INTERNAL_VSYSCALL_CALL_TYPE): Likewise.
	(INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK): Use INTERNAL_VSYSCALL_CALL and
	PTR_DEMANGLE on vDSO pointer.
	(INTERNAL_VSYSCALL_NCS_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h (INLINE_VSYSCALL): Remove
	macro.
	(INTERNAL_SYSCALL): Likewise.
	(INTERNAL_VSYSCALL_NCS): Remove macro.
	(INTERNAL_VSYSCALL_CALL): New macro.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (INLINE_VSYSCALL):
	Remove macro.
	(INTERNAL_VSYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sched_getcpu.c: Include
	sysdep-vdso.h instead of libc-vdso.h.
	* sysdeps/unix/sysv/linux/clock_getres.c (INTERNAL_VSYSCALL): Remove
	definition.
	(INLINE_VSYSCALL): Likewise.
	(HAVE_VSYSCALL) [HAVE_CLOCK_GETRES_VSYSCALL]: Define.
	* sysdeps/unix/sysv/linux/clock_gettime.c (INTERNAL_VSYSCALL): Remove
	definition.
	(INLINE_VSYSCALL): Likewise.
	(INTERNAL_VSYSCALL): Likewise.
	(HAVE_VSYSCALL) [HAVE_CLOCK_GETTIME_VSYSCALL]: Define.
	* sysdeps/unix/sysv/linux/timespec_get.c
	(INTERNAL_VSYSCALL) [HAVE_CLOCK_GETTIME_VSYSCALL]: Define.
	(timespec_get): Use ANSI prototype.
	* sysdeps/unix/sysv/linux/sysdep-vdso.h: New file: default vDSO macros
	and definition for Linux.

2015-05-25  Andrew Senkevich  <andrew.senkevich@intel.com>

	* elf/Makefile (localplt-built-dso): libmvec added to localplt test.
	* include/libc-symbols.h: libmvec_hidden_* macro series added.

2015-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #2981]
	[BZ #18410]
	* elf/dl-reloc.c (_dl_relocate_object): Don't issue an error
	for missing DT_PLTRELSZ.

2015-05-22  Paul Eggert  <eggert@cs.ucla.edu>

	Remove obsolete aliases that broke 'locale -a'
	[BZ #18412]
	* intl/locale.alias: Remove obsolete aliases "bokm√•l" and "fran√ßais"
	which caused 'locale -a' to output Latin-1 data in UTF-8 locales,
	breaking some applications that use 'locale -a' output.
	Change the encoding of this file from Latin-1 to ASCII to avoid
	other potential problems with people grepping this file.

2015-05-22  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/Makefile (CFLAGS-accept.c): Add -fexceptions and
	-fasynchronous-unwind-tables.
	(CFLAGS-sendto.c): Likewise.
	(CFLAGS-sendmsg.c): Likewise.
	(CFLAGS-connect.c): Likewise.
	(CFLAGS-recvmsg.c): Likewise.
	(CFLAGS-recvfrom.c): Likewise.
	* sysdeps/unix/sysv/linux/socketcall.h (SOCKOP_invalid): Define.
	(SOCKETCALL): New macro: non-cancellable socketcall.
	(SOCKETCALL_CANCEL): New macro: cancellable socketcall.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir) = socket]: Remove
	internal_accept4, internal_recvmmsg, and internal_sendmmsg rules.
	* sysdeps/unix/sysv/linux/accept.c: New file.
	* sysdeps/unix/sysv/linux/bind.c: Likewise.
	* sysdeps/unix/sysv/linux/connect.c: Likewise.
	* sysdeps/unix/sysv/linux/getpeername.c: Likewise.
	* sysdeps/unix/sysv/linux/getsockname.c: Likewise.
	* sysdeps/unix/sysv/linux/getsockopt.c: Likewise.
	* sysdeps/unix/sysv/linux/listen.c: Likewise.
	* sysdeps/unix/sysv/linux/recv.c: Likewise.
	* sysdeps/unix/sysv/linux/recvfrom.c: Likewise.
	* sysdeps/unix/sysv/linux/recvmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/send.c: Likewise.
	* sysdeps/unix/sysv/linux/sendmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/sendto.c: Likewise.
	* sysdeps/unix/sysv/linux/setsockopt.c: Likewise.
	* sysdeps/unix/sysv/linux/shutdown.c: Likewise.
	* sysdeps/unix/sysv/linux/socket.c: Likewise.
	* sysdeps/unix/sysv/linux/socketpair.c: Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c (__internal_recvmmsg): Remove
	prototype.
	(recvmmsg) [__ASSUME_RECVMMSG_SOCKETCALL]: Add C based implementation.
	(recvmmsg) [!__ASSUME_RECVMMSG_SOCKETCALL]: Use SOCKETCALL_CANCEL macro
	instead of __internal_xxx function.
	* sysdeps/unix/sysv/linux/accept4.c (__internal_accept4): Remove
	prototype.
	(accept4) [__ASSUME_ACCEPT4_SOCKETCALL]: Add C based implementation.
	(accept4) [!__ASSUME_ACCEPT4_SOCKETCALL]: Use SOCKETCALL_CANCEL macro
	instead of __internal_xxx function.
	* sysdeps/unix/sysv/linux/sendmmsg.c (__internal_sendmmsg): Remove
	prototype.
	(sendmmsg) [__ASSUME_SENDMMSG_SOCKETCALL]: Add C based implementation.
	(sendmmsg) [!__ASSUME_SENDMMSG_SOCKETCALL]: Use SOCKETCALL_CANCEL macro
	instead of __internal_xxx function.
	* sysdeps/unix/sysv/linux/accept.S: Remove file.
	* sysdeps/unix/sysv/linux/bind.S: Likewise.
	* sysdeps/unix/sysv/linux/connect.S: Likewise.
	* sysdeps/unix/sysv/linux/getpeername.S: Likewise.
	* sysdeps/unix/sysv/linux/getsockname.S: Likewise.
	* sysdeps/unix/sysv/linux/getsockopt.S: Likewise.
	* sysdeps/unix/sysv/linux/arm/internal_accept4.S: Likewise.
	* sysdeps/unix/sysv/linux/arm/internal_recvmmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/arm/internal_sendmmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/accept4.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/internal_accept4.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/internal_accept4.S: Likewise.
	* sysdeps/unix/sysv/linux/internal_recvmmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/internal_sendmmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/listen.S: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/internal_accept4.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/internal_recvmmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/internal_sendmmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/recv.S: Likewise.
	* sysdeps/unix/sysv/linux/recvfrom.S: Likewise.
	* sysdeps/unix/sysv/linux/recvmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/send.S: Likewise.
	* sysdeps/unix/sysv/linux/sendmsg.S: Likewise.
	* sysdeps/unix/sysv/linux/sendto.S: Likewise.
	* sysdeps/unix/sysv/linux/setsockopt.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/shutdown.S: Likewise.
	* sysdeps/unix/sysv/linux/socketpair.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/m68k/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/hppa/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/kernel-features.h: Adjust comment on how
	socketcall is implemented in GLIBC.

2015-05-22  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/fmadf4.c: Include <libc-internal.h>.
	(__fma): Ignore uninitialized warnings around packing.
	* soft-fp/fmasf4.c: Include <libc-internal.h>.
	(__fmaf): Ignore uninitialized warnings around packing.
	* soft-fp/fmatf4.c: Include <libc-internal.h>.
	(__fmal): Ignore uninitialized warnings around packing.

	* sysdeps/ieee754/ldbl-128/k_tanl.c: Include <libc-internal.h>.
	(__kernel_tanl): Ignore uninitialized warnings around use of SIGN.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c: Include <libc-internal.h>.
	(__kernel_tanl): Ignore uninitialized warnings around use of SIGN.

	* sysdeps/ieee754/ldbl-128/s_erfl.c (__erfcl): Make case 9 in
	switch statement into default case.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c (__erfcl): Likewise.

	* sysdeps/ieee754/ldbl-128/e_asinl.c (__ieee754_asinl): Don't use
	a conditional in forcing "inexact".
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c (__ieee754_asinl):
	Likewise.

2015-05-22  Roland McGrath  <roland@hack.frob.com>

	* nptl/nptl-init.c (__pthread_initialize_minimal_internal):
	Use a separate INTERNAL_SYSCALL_DECL (err); in a local scope
	for each INTERNAL_SYSCALL use.

2015-05-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #438]
	* posix/unistd.h (_POSIX2_C_VERSION): New macro.
	* conform/Makefile (test-xfail-POSIX/unistd.h/conform): Remove
	variable.

	[BZ #18444]
	* string/basename.c (basename): Rename to __basename and define as
	weak alias of __basename.  Use libc_hidden_weak.
	* include/string.h (__basename): Declare.  Use libc_hidden_proto.
	* sysdeps/unix/sysv/linux/pathconf.c (distinguish_extX): Call
	__basename instead of basename.
	* conform/Makefile (test-xfail-POSIX2008/unistd.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K8/unistd.h/linknamespace): Likewise.

2015-05-18  Florian Weimer  <fweimer@redhat.com>

	* libio/libioP.h (_IO_MEMBER_TYPE, _IO_CAST_FIELD_ACCESS)
	(_IO_JUMPS_FILE_plus): New.
	(_IO_WIDE_JUMPS, _IO_CHECK_WIDE, _IO_JUMPS_FUNC): Use
	_IO_CAST_FIELD_ACCESS.
	* libio/fileops.c (libc_hidden_def, _IO_file_setbuf_mmap,
	mmap_remap_check, decide_maybe_mmap): Use _IO_JUMPS_FILE_plus.
	* libio/freopen.c (freopen): Likewise.
	* libio/freopen64.c (freopen64): Likewise.
	* libio/iofopen.c (__fopen_maybe_mmap): Likewise.
	* libio/iofopncook.c (_IO_old_fopencookie): Likewise.
	* libio/iofwide.c (_IO_fwide): Likewise.
	* libio/memstream.c (open_memstream): Likewise.
	* libio/oldiofdopen.c (_IO_old_fdopen): Likewise.
	* libio/oldiofopen.c (_IO_old_fopen): Likewise.
	* libio/oldiopopen.c (_IO_old_popen): Likewise.

2015-05-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/dbl-64/e_lgamma_r.c: Include <libc-internal.h>.
	(__ieee754_lgamma_r): Ignore uninitialized warnings around use of
	NADJ.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c: Include <libc-internal.h>.
	(__ieee754_lgammaf_r): Ignore uninitialized warnings around use of
	NADJ.
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c: Include <libc-internal.h>.
	(__ieee754_lgammal_r): Ignore uninitialized warnings around use of
	NADJ.

	* sysdeps/ieee754/dbl-64/mpa.c (norm): Remove if condition on
	(p == 4) case.

	* conform/linknamespace.pl (@whitelist): Add re_syntax_options.
	* conform/Makefile (test-xfail-UNIX98/regex.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/regex.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/regex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/regex.h/linknamespace): Likewise.

2015-05-21  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfprintf.c (LABEL, JUMP_TABLE_BASE_LABEL, REF):
	Adjust jump table label generation macros.

2015-05-21  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfprintf.c (vfprintf): Move local variables
	args_malloced, specs, specs_malloced, and the code after
	do_positional to the printf_positional function.
	(printf_positional): New function.

2015-05-21  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfprintf.c (jump_table): Move out of the vfprintf
	function.
	(NOT_IN_JUMP_RANGE, CHAR_CLASS, LABEL, REF, JUMP, STEP0_3_TABLE,
	STEP4_TABLE, process_arg): Move macro definitions
	out of the vfprintf function.  (Cosmetic change only.)

2015-05-21  Carlos O'Donell  <carlos@redhat.com>

	* benchtests/Makefile (stdio-common-bench): Define.
	(benchset): Add stdio-common-bench.
	* sprintf-inputs: New file.
	* sprintf-source.c: New file.

2015-05-21  Andreas Schwab  <schwab@suse.de>

	[BZ #13028]
	[BZ #17053]
	* resolv/res_init.c (__res_vinit): Remove use of ext.nsmap member
	of struct __res_state.
	* resolv/res_send.c (__libc_res_nsend): Likewise.
	(get_nsaddr): New function.
	(res_ourserver_p, send_vc, reopen): Use it instead of accessing
	statp directly.

2015-05-20  Joseph Myers  <joseph@codesourcery.com>

	* conform/GlibcConform.pm ($CFLAGS{"POSIX"}): Use
	-D_POSIX_C_SOURCE=199506L.

	* conform/data/locale.h-data [POSIX] (LC_MESSAGES): Require.

	* conform/data/unistd.h-data (_POSIX_VERSION): Require.
	(_POSIX2_C_VERSION): Require if [POSIX || XPG3 || XPG4 || UNIX98].
	Do not mention otherwise.
	[POSIX] (_XOPEN_VERSION): Do not expect.
	[POSIX] (_XOPEN_XCU_VERSION): Likewise.
	[POSIX] (_POSIX2_C_BIND): Likewise.
	[POSIX] (_POSIX2_VERSION): Likewise.
	[POSIX] (_XOPEN_XPG2): Likewise.
	[POSIX] (_XOPEN_XPG3): Likewise.
	[POSIX] (_XOPEN_XPG4): Likewise.
	[POSIX] (_XOPEN_UNIX): Likewise.
	[POSIX] (_POSIX_ADVISORY_INFO): Likewise.
	[POSIX] (_POSIX_BARRIERS): Likewise.
	[POSIX] (_POSIX_CLOCK_SELECTION): Likewise.
	[POSIX] (_POSIX_CPUTIME): Likewise.
	[POSIX] (_POSIX_MONOTONIC_CLOCK): Likewise.
	[POSIX] (_POSIX_READER_WRITER_LOCKS): Likewise.
	[POSIX] (_POSIX_SHELL): Likewise.
	[POSIX] (_POSIX_SPAWN): Likewise.
	[POSIX] (_POSIX_SPIN_LOCKS): Likewise.
	[POSIX] (_POSIX_SPORADIC_SERVER): Likewise.
	[POSIX] (_POSIX_THREAD_CPUTIME): Likewise.
	[POSIX] (_POSIX_TYPED_MEMORY_OBJECTS): Likewise.
	[POSIX] (_POSIX_THREAD_SPORADIC_SERVER): Likewise.
	[POSIX] (_XBS5_ILP32_OFF32): Likewise.
	[POSIX] (_XBS5_ILP32_OFBIG): Likewise.
	[POSIX] (_XBS5_LP64_OFF64): Likewise.
	[POSIX] (_XBS5_LPBIG_OFFBIG): Likewise.
	[POSIX] (_POSIX_TIMEOUTS): Likewise.
	[POSIX] (_POSIX2_PBS): Likewise.
	[POSIX] (_POSIX2_PBS_ACCOUNTING): Likewise.
	[POSIX] (_POSIX2_PBS_CHECKPOINT): Likewise.
	[POSIX] (_POSIX2_PBS_LOCATE): Likewise.
	[POSIX] (_POSIX2_PBS_MESSAGE): Likewise.
	[POSIX] (_POSIX2_PBS_TRACK): Likewise.
	[POSIX] (_POSIX_TIMESTAMP_RESOLUTION): Likewise.
	[POSIX] (_CS_XBS5_ILP32_OFF32_CFLAGS): Likewise.
	[POSIX] (_CS_XBS5_ILP32_OFF32_LDFLAGS): Likewise.
	[POSIX] (_CS_XBS5_ILP32_OFF32_LIBS): Likewise.
	[POSIX] (_CS_XBS5_ILP32_OFF32_LINTFLAGS): Likewise.
	[POSIX] (_CS_XBS5_ILP32_OFFBIG_CFLAGS): Likewise.
	[POSIX] (_CS_XBS5_ILP32_OFFBIG_LDFLAGS): Likewise.
	[POSIX] (_CS_XBS5_ILP32_OFFBIG_LIBS): Likewise.
	[POSIX] (_CS_XBS5_ILP32_OFFBIG_LINTFLAGS): Likewise.
	[POSIX] (_CS_XBS5_LP64_OFF64_CFLAGS): Likewise.
	[POSIX] (_CS_XBS5_LP64_OFF64_LDFLAGS): Likewise.
	[POSIX] (_CS_XBS5_LP64_OFF64_LIBS): Likewise.
	[POSIX] (_CS_XBS5_LP64_OFF64_LINTFLAGS): Likewise.
	[POSIX] (_CS_XBS5_LPBIG_OFFBIG_CFLAGS): Likewise.
	[POSIX] (_CS_XBS5_LPBIG_OFFBIG_LDFLAGS): Likewise.
	[POSIX] (_CS_XBS5_LPBIG_OFFBIG_LIBS): Likewise.
	[POSIX] (_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS): Likewise.
	[POSIX] (_SC_2_C_BIND): Likewise.
	[POSIX] (_SC_2_C_VERSION): Likewise.
	[POSIX] (_SC_2_PBS): Likewise.
	[POSIX] (_SC_2_PBS_ACCOUNTING): Likewise.
	[POSIX] (_SC_2_PBS_CHECKPOINT): Likewise.
	[POSIX] (_SC_2_PBS_LOCATE): Likewise.
	[POSIX] (_SC_2_PBS_MESSAGE): Likewise.
	[POSIX] (_SC_2_PBS_TRACK): Likewise.
	[POSIX] (_SC_ATEXIT_MAX): Likewise.
	[POSIX] (_SC_BARRIERS): Likewise.
	[POSIX] (_SC_BASE): Likewise.
	[POSIX] (_SC_CLOCK_SELECTION): Likewise.
	[POSIX] (_SC_DEVICE_IO): Likewise.
	[POSIX] (_SC_DEVICE_SPECIFIC): Likewise.
	[POSIX] (_SC_DEVICE_SPECIFIC_R): Likewise.
	[POSIX] (_SC_FD_MGMT): Likewise.
	[POSIX] (_SC_FIFO): Likewise.
	[POSIX] (_SC_FILE_ATTRIBUTES): Likewise.
	[POSIX] (_SC_FILE_LOCKING): Likewise.
	[POSIX] (_SC_FILE_SYSTEM): Likewise.
	[POSIX] (_SC_IOV_MAX): Likewise.
	[POSIX] (_SC_MONOTONIC_CLOCK): Likewise.
	[POSIX] (_SC_NETWORKING): Likewise.
	[POSIX] (_SC_PAGE_SIZE): Likewise.
	[POSIX] (_SC_PASS_MAX): Likewise.
	[POSIX] (_SC_PIPE): Likewise.
	[POSIX] (_SC_READER_WRITER_LOCKS): Likewise.
	[POSIX] (_SC_REGEXP): Likewise.
	[POSIX] (_SC_SHELL): Likewise.
	[POSIX] (_SC_SIGNALS): Likewise.
	[POSIX] (_SC_SINGLE_PROCESS): Likewise.
	[POSIX] (_SC_SPIN_LOCKS): Likewise.
	[POSIX] (_SC_TYPED_MEMORY_OBJECTS): Likewise.
	[POSIX] (_SC_USER_GROUPS): Likewise.
	[POSIX] (_SC_USER_GROUPS_R): Likewise.
	[POSIX] (_SC_STREAMS): Likewise.
	[POSIX] (_SC_XBS5_ILP32_OFF32): Likewise.
	[POSIX] (_SC_XBS5_ILP32_OFFBIG): Likewise.
	[POSIX] (_SC_XBS5_LP64_OFF64): Likewise.
	[POSIX] (_SC_XBS5_LPBIG_OFFBIG): Likewise.
	[POSIX] (_SC_THREAD_ROBUST_PRIO_INHERIT): Likewise.
	[POSIX] (_SC_THREAD_ROBUST_PRIO_PROTECT): Likewise.
	[POSIX] (_PC_FILESIZEBITS): Likewise.
	[POSIX] (_PC_REC_INCR_XFER_SIZE): Likewise.
	[POSIX] (_PC_REC_MAX_XFER_SIZE): Likewise.
	[POSIX] (_PC_REC_MIN_XFER_SIZE): Likewise.
	[POSIX] (_PC_REC_XFER_ALIGN): Likewise.
	[POSIX] (uid_t): Likewise.
	[POSIX] (gid_t): Likewise.
	[POSIX] (off_t): Likewise.
	[POSIX] (pid_t): Likewise.
	[POSIX] (cuserid): Allow.
	(_SC_2_CHAR_TERM): Require constant.
	(_POSIX_ASYNCHRONOUS_IO): Remove duplicate optional-constant.
	* conform/Makefile (test-xfail-POSIX/unistd.h/conform): New
	variable.

2015-05-20  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/pthread-pids.h: New file.
	* sysdeps/nacl/createthread.c: Include <pthread-pids.h>.
	(create_thread): Use __nacl_get_tid to initialize PD->tid.

	* nptl/pthread-pids.h: New file.
	* sysdeps/unix/sysv/linux/pthread-pids.h: New file.
	* nptl/nptl-init.c: Include <pthread-pids.h>.
	(__pthread_initialize_minimal_internal):
	Call __pthread_initialize_pids instead of set_tid_address syscall.

	* sysdeps/unix/sysv/linux/usleep.c: Moved to ...
	* sysdeps/posix/usleep.c: ... here.

2015-05-20  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* sysdeps/unix/sysv/linux/i386/Makefile [$(subdir) = misc)]: Remove
	call_pselect6 object.
	[$(subdir) = io]: Remove call_sync_file_range object.
	* sysdeps/unix/sysv/linux/i386/call_pselect6.S: Remove file.
	* sysdeps/unix/sysv/linux/i386/call_sync_file_range.S: Remove file.
	* sysdeps/unix/sysv/linux/i386/pselect.c: Remove file.
	* sysdeps/unix/sysv/linux/i386/sync_file_range.c: Remove file.

2015-05-20  Wilco Dijkstra  <wdijkstr@arm.com>

	* math/s_cproj.c: Add include "math_private.h".
	* math/s_cprojf.c: Likewise.
	* math/s_cprojl.c: Likewise.

2015-05-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18244]
	* sysdeps/ieee754/ldbl-96/s_remquol.c (__remquol): Ignore explicit
	high mantissa bit when testing whether P is a NaN.
	* math/libm-test.inc (remainder_test_data): Add more tests.
	(remquo_test_data): Likewise.

	[BZ #18049]
	* sysdeps/i386/fpu/e_atanhl.S (__ieee754_atanhl): For exponents
	below -32, return the argument, with underflow if subnormal.
	* math/auto-libm-test-in: Add more tests of atanh.
	* math/auto-libm-test-out: Regenerated.

2015-05-19  Roland McGrath  <roland@hack.frob.com>

	[BZ #18434]
	* nptl/tst-sem15.c: New file.
	* nptl/Makefile (tests): Add it.
	* nptl/sem_post.c (__new_sem_post) [!__HAVE_64B_ATOMICS]:
	s/<</>>/ to fix typo in EOVERFLOW check.
	* sysdeps/sparc/sparc32/sem_post.c (__new_sem_post): Likewise.

2015-05-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/strings.texi (envz_remove): Fix typo in safety
	annotations.

2015-05-19  Paul Eggert  <eggert@cs.ucla.edu>
	    Steve Ellcey  <sellcey@imgtec.com>

	* inet/rcmd.c (rresvport_af): Change ss to anonymous union
	in order to avoid strict alias warnings.
	(iruserok_af): Ditto for ra.

2015-05-19  James Lemke  <jwlemke@codesourcery.com>

	[BZ #17581]
	* malloc/hooks.c
	(magicbyte): Convert to a function and avoid returning 0x01.
	(mem2mem_check): Avoid using a length byte equal to the magic byte.
	(mem2chunk_check): Fix unsigned comparisons to zero.
	Hoist defs of sz and magic.

2015-05-19  Richard Henderson  <rth@redhat.com>

	* soft-fp/op-common.h (_FP_FROM_INT): Don't write to R.

	* sysdeps/alpha/fpu/libm-test-ulps: Update.

2015-05-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16159]
	* malloc/Makefile (tests): New test case tst-malloc-backtrace.
	* malloc/arena.c (arena_lock): Check if arena is corrupt.
	(reused_arena): Find a non-corrupt arena.
	(heap_trim): Pass arena to unlink.
	* malloc/hooks.c (malloc_check_get_size): Pass arena to
	malloc_printerr.
	(top_check): Likewise.
	(free_check): Likewise.
	(realloc_check): Likewise.
	* malloc/malloc.c (malloc_printerr): Add arena argument.
	(unlink): Likewise.
	(munmap_chunk): Adjust.
	(ARENA_CORRUPTION_BIT): New macro.
	(arena_is_corrupt): Likewise.
	(set_arena_corrupt): Likewise.
	(sysmalloc): Use mmap if there are no usable arenas.
	(_int_malloc): Likewise.
	(__libc_malloc): Don't fail if arena_get returns NULL.
	(_mid_memalign): Likewise.
	(__libc_calloc): Likewise.
	(__libc_realloc): Adjust for additional argument to
	malloc_printerr.
	(_int_free): Likewise.
	(malloc_consolidate): Likewise.
	(_int_realloc): Likewise.
	(_int_memalign): Don't touch corrupt arenas.
	* malloc/tst-malloc-backtrace.c: New test case.

	* Makefile (summarize-tests): Fix return value on success.

	* manual/string.texi (Envz Functions): Add envz_remove.

2015-05-18  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/opendir.c: Include <stdbool.h>.
	(invalid_name): New function, broken out of ...
	(__opendirat): ... here.  Call it.
	(need_isdir_precheck): New function, broken out of ...
	(__opendirat): ... here.  Call it.
	Use __fxstatat64, not __xstatat64.
	(opendir_oflags): New function, broken out of ...
	(__opendirat): ... here.  Call it.
	(opendir_tail): New function, broken out of ...
	(__opendirat): ... here.  Call it.
	(__opendir): Call invalid_name, need_isdir_precheck, __xstat64, and
	opendir_tail, rather than punting to __opendirat.
	(__opendirat): Conditionalize function definition on [IS_IN (libc)].

2015-05-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* .gitignore: Ignore generated *.pyc.

2015-05-18  Arjun Shankar  <arjun.is@lostca.se>

	* include/stdio.h: Define __need_wint_t.
	* test-skeleton.c: Avoid `for' loop initial declaration.
	* nptl/tst-initializers1.c: Use test-skeleton.c.

2015-05-17  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #18418]
	* stdlib/tst-setcontext3.sh: Remove non-portable array use.

2015-05-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16352]
	* sysdeps/i386/fpu/e_atanh.S (dbl_min): New object.
	(__ieee754_atanh): Force underflow exception for results with
	small absolute value.
	* sysdeps/i386/fpu/e_atanhf.S (flt_min): New object.
	(__ieee754_atanhf): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Include <float.h>.
	(__ieee754_atanh): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Include <float.h>.
	(__ieee754_atanhf): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c: Include <float.h>.
	(__ieee754_atanhl): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c: Include <float.h>.
	(__ieee754_atanhl): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Include <float.h>.
	(__ieee754_atanhl): Force underflow exception for results with
	small absolute value.
	* math/auto-libm-test-in: Do not allow missing underflow
	exceptions from atanh.
	* math/auto-libm-test-out: Regenerated.

	[BZ #18221]
	* sysdeps/ieee754/flt-32/k_tanf.c (__kernel_tanf): Use 2**-13 not
	2**-28 as threshold for returning x or +/- 1/x.
	* math/auto-libm-test-in: Add more tests of tan.
	* math/auto-libm-test-out: Regenerated.

	[BZ #18220]
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c (__ieee754_lgammaf_r): Use
	2**26 not 2**58 as threshold for returning x * (log (x) - 1).
	* math/auto-libm-test-in: Add another test of lgamma.
	* math/auto-libm-test-out: Regenerated.

2015-05-15  Wilco Dijkstra  <wdijkstr@arm.com>

	* stdio-common/printf_fp.c (___printf_fp): Use abs.
	* stdlib/gmp-impl.h (ABS): Remove define.  (ABSIZ): Remove.
	* sysdeps/ieee754/dbl-64/branred.c (__branred): Use fabs.
	* sysdeps/ieee754/dbl-64/dla.h (EADD): Use fabs.
	(ESUB): Use fabs.  (ADD2): Use fabs.  (SUB2): Use fabs.
	(ADD2A): Use fabs.  (SUB2A): Use fabs.
	* sysdeps/ieee754/dbl-64/e_asin.c (__ieee754_asin): Use fabs.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Use fabs.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Use fabs.
	(log1): Use fabs.  (my_log2): Use fabs.
	* sysdeps/ieee754/dbl-64/e_remainder.c (__ieee754_remainder): Use fabs.
	* sysdeps/ieee754/dbl-64/mpa.h (ABS): Remove define.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Use fabs.
	* sysdeps/ieee754/dbl-64/mydefs.h (ABS): Remove define.
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Use fabs.
	(__cos): Use fabs.  (slow): Use fabs.  (slow2): Use fabs.
	(sloww): Use fabs.  (sloww1): Use fabs.  (sloww2): Use fabs.
	(bslow1): Use fabs.  (bslow2): Use fabs.  (cslow2): Use fabs.
	(csloww): Use fabs.  (csloww1): Use fabs.  (csloww2): Use fabs.
	* sysdeps/ieee754/dbl-64/sincos32.c (__mpranred): Use fabs.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: add math.h include.

2015-05-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18217]
	* sysdeps/ieee754/flt-32/s_erff.c (__erfcf): Use 2**-26 not 2**-56
	as threshold for returning 1 - x.
	* math/auto-libm-test-in: Add more tests of erfc.
	* math/auto-libm-test-out: Regenerated.

2015-05-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18196]
	* sysdeps/ieee754/flt-32/s_atanf.c (__atanf): Use 2^25 not 2^34 as
	threshold for large arguments.
	* math/auto-libm-test-in: Add another test of atan.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16339]
	* sysdeps/i386/fpu/s_log1p.S (dbl_min): New object.
	(__log1p): Force underflow exception for results with small
	absolute value.
	* sysdeps/i386/fpu/s_log1pf.S (flt_min): New object.
	(__log1pf): Force underflow exception for results with small
	absolute value.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Include <float.h>.
	(__log1p): Force underflow exception for results with small
	absolute value.
	* sysdeps/ieee754/flt-32/s_log1pf.c: Include <float.h>.
	(__log1pf): Force underflow exception for results with small
	absolute value.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c: Include <float.h>.
	(__log1pl): Force underflow exception for results with small
	absolute value.
	* math/auto-libm-test-in: Do not allow missing underflow
	exceptions from log1p.
	* math/auto-libm-test-out: Regenerated.

2015-05-14  Jakub Bogusz  <qboosh@pld-linux.org>
	    Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	[BZ #16704]
	* sysdeps/unix/make-syscalls.sh: Remove non-portable echo usage.

2015-05-14  Andrew Senkevich  <andrew.senkevich@intel.com>

	* Makeconfig (rpath-dirs, all-subdirs): Added mathvec folder.
	(libmvec): New variable.
	* configure.ac: Added option for mathvec build.
	* configure: Regenerated.
	* mathvec/Depend: New file.
	* mathvec/Makefile: New file.
	* shlib-versions: Added libmvec.
	* math/Makefile: Added rule for libm.so	installation.

	* bits/math-vector.h: New file.
	* bits/libm-simd-decl-stubs.h: New header.
	* math/Makefile (headers): Added new header
	libm-simd-decl-stubs.h.
	* math/math.h (__MATHCALL_VEC): New macro.

	* math/gen-libm-have-vector-test.sh: Script generates series of macros
	for conditions in testing functions.
	* math/Makefile: Added call of libm-have-vector-test.sh.
	* math/libm-test.inc (HAVE_VECTOR): New macros.

	* math/libm-test.inc: START refactored.
	* math/test-double.c (TEST_MATHVEC): Add define.
	* math/test-float.c: Likewise.
	* math/test-idouble.c: Likewise.
	* math/test-ifloat.c: Likewise.
	* math/test-ildoubl.c: Likewise.
	* math/test-ldouble.c: Likewise.
	* sysdeps/generic/math-tests-arch.h
	(INIT_ARCH_EXT, CHECK_ARCH_EXT): New helper macros for runtime
	architecture check.

	* math/test-double.c (FUNC_TEST): New macro.
	* math/test-float.c: Likewise.
	* math/test-idouble.c: Likewise.
	* math/test-ifloat.c: Likewise.
	* math/test-ildoubl.c: Likewise.
	* math/test-ldouble.c: Likewise.
	* math/libm-test.inc: Use FUNC_TEST for name of	tested functions.

2015-05-13  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/fdopendir.c: New file.

	* dirent/scandir-tail.c: New file.
	* dirent/scandir64-tail.c: New file.
	* dirent/Makefile (routines): Add them.
	(CFLAGS-scandir-tail.c, CFLAGS-scandir64-tail.c): New variables.
	* include/dirent.h (__scandir_tail, __scandir64_tail): Declare them.
	* dirent/scandir.c [!SCANDIR] (SCANDIRAT): Macro removed.
	[!SCANDIR] (SCANDIR_TAIL): New macro.
	(SCANDIR): Call __opendir and __scandir_tail, not __scandirat.
	* dirent/scandir64.c [!_DIRENT_MATCHES_DIRENT64]
	(SCANDIRAT): Macro removed.
	(SCANDIR_TAIL): New macro.
	* dirent/scandirat.c [!SCANDIRAT] (READDIR): Macro removed.
	[!SCANDIRAT] (SCANDIR_TAIL): New macro.
	(SCANDIRAT): Just call __opendirat and __scandir_tail.
	* dirent/scandirat64.c [!_DIRENT_MATCHES_DIRENT64]
	(READDIR): Macro removed.
	(SCANDIR_TAIL): New macro.
	* sysdeps/unix/sysv/linux/i386/scandir64.c (READDIR): Macro removed.
	(SCANDIR_TAIL): New macro.

	* dirent/scandirat.c (__scandir_cancel_handler): Function moved ...
	* dirent/scandir-cancel.c: ... to this new file.
	* dirent/Makefile (routines): Add it.
	* dirent/scandirat64.c (SKIP_SCANDIR_CANCEL): Macro removed.
	* sysdeps/unix/sysv/linux/i386/scandir64.c
	(SKIP_SCANDIR_CANCEL): Macro removed.
	* include/dirent.h (__scandir_cancel_handler): Add attribute_hidden.

	* dirent/tst-scandir.c: New file.
	* dirent/tst-scandir64.c: New file.
	* dirent/Makefile (tests): Add them.

2015-05-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18409]
	* sysdeps/unix/make-syscalls.sh: Remove a trailing `\'.

2015-05-13  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/tls-macros.h (TLS_GD): Add "cc" to the clobber
	list.

2015-05-13  Leonhard Holz  <leonhard.holz@web.de>

	* benchtests/bench-strcoll.c: New benchmark.
	* benchtests/Makefile: Generate locales and run benchmark.
	* benchtests/strcoll-inputs/filelist#C: New benchmark input file.
	* benchtests/strcoll-inputs/filelist#en_US.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#ar_SA.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#cs_CZ.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#da_DK.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#el_GR.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#en_GB.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#en_US.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#es_ES.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#fr_FR.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#hi_IN.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#hu_HU.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#is_IS.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#it_IT.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#iw_IL.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#ja_JP.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#pl_PL.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#pt_PT.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#ru_RU.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#sr_RS.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#sv_SE.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#tr_TR.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#vi_VN.UTF-8: Likewise.
	* benchtests/strcoll-inputs/lorem_ipsum#zh_CN.UTF-8: Likewise.

2015-05-12  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/strcspn.S: Remove plt indirection.
	* sysdeps/x86_64/multiarch/strspn.S: Likewise.

2015-05-12  Roland McGrath  <roland@hack.frob.com>

	* posix/uname-values.h: New file.
	* posix/uname.c: Include that instead of <config-name.h>.
	* sysdeps/nacl/uname-values.h: New file.
	* sysdeps/arm/nacl/uname-values.h: New file.

2015-05-12  Joseph Myers  <joseph@codesourcery.com>

	* conform/linknamespace.pl (list_syms): Remove \[.*?\] before
	splitting into fields.

2015-05-12  Leonhard Holz  <leonhard.holz@web.de>

	* locale/categories.def: Define _NL_COLLATE_ENCODING_TYPE.
	* locale/langinfo.h: Add _NL_COLLATE_ENCODING_TYPE to attribute list.
	* locale/localeinfo.h: Add enum collation_encoding_type.
	* locale/C-collate.c: Set _NL_COLLATE_ENCODING_TYPE to 8bit.
	* programs/ld-collate.c (collate_output): Add encoding type info.
	* string/strcoll_l.c (STRDIFF): New function.
	* (STRCOLL): Use STRDIFF to skip over equal prefix.
	* wcsmbs/wcscoll_l.c: Define STRDIFF.

2015-05-11  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18397]
	* sysdeps/mips/mips32/fpu/fpu_control.c: Move to ....
	* sysdeps/mips/mips32/fpu/fpucw-helpers.c: ... here.  Include
	<fpu_control.h> instead of <math/fpu_control.c>.
	* sysdeps/mips/mips32/fpu/Makefile: New file.

2015-05-11  Andreas Schwab  <schwab@suse.de>

	[BZ #18007]
	* nis/nss_compat/compat-grp.c (internal_endgrent): Don't call
	nss_endgrent.
	(_nss_compat_endgrent): Call nss_endgrent.
	* nis/nss_compat/compat-pwd.c (internal_endpwent): Don't call
	nss_endpwent.
	(_nss_compat_endpwent): Call nss_endpwent.
	* nis/nss_compat/compat-spwd.c (internal_setspent): Add parameter
	needent, call nss_setspent only if non-zero.
	(_nss_compat_setspent, _nss_compat_getspent_r): Pass non-zero.
	(internal_endspent): Don't call nss_endspent.
	(_nss_compat_endspent): Call nss_endspent.
	* nss/nss_files/files-XXX.c (position, last_use, keep_stream):
	Remove.  All uses removed.
	(internal_setent): Remove parameter stayopen, add parameter
	stream.  Use it instead of global variable.
	(CONCAT(_nss_files_set,ENTNAME)): Pass global stream.
	(internal_endent, internal_getent): Add parameter stream.  Use it
	instead of global variable.
	(CONCAT(_nss_files_end,ENTNAME))
	(CONCAT(_nss_files_get,ENTNAME_r)): Pass global stream.
	(_nss_files_get##name##_r): Pass local stream.  Remove locking.
	* nss/nss_files/files-alias.c (position, last_use): Remove.  All
	uses removed.
	(internal_setent, internal_endent): Add parameter stream.  Use it
	instead of global variable.
	(_nss_files_setaliasent, _nss_files_endaliasent): Pass global
	stream.
	(get_next_alias): Add parameter stream.
	(_nss_files_getaliasent_r): Pass global stream.
	(_nss_files_getaliasbyname_r): Pass local stream.  Remove locking.
	* nss/nss_files/files-hosts.c (_nss_files_gethostbyname3_r)
	(_nss_files_gethostbyname4_r): Pass local stream to
	internal_setent, internal_getent and internal_endent.  Remove
	locking.

2015-05-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* tst-strfmon1.c (tests): Update expected currency symbol.

2015-05-08  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/gethostname.c: New file.

2015-05-08  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of csqrt, lgamma, log10
	and sinh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-05-08  Carlos O'Donell  <carlos@redhat.com>

	[BZ #18125]
	* stdlib/tst-setcontext3.c: New file.
	* stdlib/tst-setcontext3.sh: New file.
	* stdlib/Makefile (tests): Add tst-setcontext3.
	(tst-setcontext3.out): Custom rule to run tst-setcontext3.sh
	to verify test program created output file.
	* sysdeps/unix/sysv/linux/aarch64/setcontext.S: Call exit.
	* sysdeps/unix/sysv/linux/arm/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/hppa/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/nios2/setcontext.S: Likewise.

2015-05-06  Roland McGrath  <roland@hack.frob.com>

	[BZ #18383]
	* elf/tst-tlsalign.c: New file.
	* elf/tst-tlsalign-static.c: New file.
	* elf/tst-tlsalign-lib.c: New file.
	* elf/Makefile [$(build-shared) = yes] (tests): Add tst-tlsalign.
	(tests-static): Add tst-tlsalign-static.
	(modules-names): Add tst-tlsalign-lib.
	(test-xfail-tst-tlsalign): New variable.
	(test-xfail-tst-tlsalign-static): New variable.

	* sysdeps/nacl/nacl-test-wrapper.sh (NACL_LOADER):
	Use elf_loader_${arch}.nexe rather than loader_${arch}.nexe.

2015-05-06  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of acosh, atanh, cos,
	csqrt, erfc, sin and sincos.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-05-06  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Update.

2015-05-05  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of acosh, atanh, clog,
	clog10, csqrt, erfc, exp2, expm1, log10, log2 and sinh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-04-30  Daniel Marjam√§ki  <daniel.marjamaki@evidente.se>

	[BZ #18265]
	* wcsmbs/wchar.h (wcscpy): Add __nonnull attribute.
	(wcsncpy): Likewise.

2015-05-05  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/unix/sysv/linux/posix_fallocate.c (posix_fallocate):
	Assume __ASSUME_FALLOCATE is always true.
	* sysdeps/unix/sysv/linux/posix_fallocate64.c
	(__posix_fallocate64_l64): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/posix_fallocate.c
	(posix_fallocate): Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/posix_fallocate64.c
	(__posix_fallocate64_l64): Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c
	[!__ASSUME_FALLOCATE]: Add comment.

2015-05-05  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/unix/sysv/linux/i386/Makefile
	(sysdep_routines) [$(subdir) = misc]: Remove call_fallocate.
	(sysdep_routines) [$(subdir) = io]: Add libc-do-syscall.
	* sysdeps/unix/sysv/linux/i386/call_fallocate.S: Remove.
	* sysdeps/unix/sysv/linux/i386/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/posix_fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/posix_fallocate64.c: Likewise.

2015-05-02  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of atan, clog, clog10,
	cos, csqrt, erf, erfc, exp2, lgamma, log1p, sin, sincos, tanh and
	tgamma.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-05-01  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of tgamma.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add more tests of tanh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add more tests of tan.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add more tests of cos, sin and sincos.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add another test of pow.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* math/auto-libm-test-in: Add more tests of lgamma.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add more tests of log, log10, log2 and
	log1p.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-05-01  Mark Wielaard  <mjw@redhat.com>

	* elf/elf.h: Add SHF_COMPRESSED section flag, Elf32_Chdr and
	Elf64_Chdr structs and ELFCOMPRESS constants.

2015-05-01  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of exp, exp10, exp2 and
	expm1.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add more tests of erf and erfc.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-05-01  Szabolcs Nagy  <szabolcs.nagy@arm.com>

	* config.h.in (HAVE_AARCH64_BE): Add.

2015-04-30  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of csqrt.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add more tests of cosh and sinh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/unix/sysv/linux/mips/mips32/waitid.c: Remove file.

2015-04-29  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nacl/bits/typesizes.h (__CLOCK_T_TYPE): Use __SLONGWORD_TYPE.
	* sysdeps/nacl/nacl-interfaces.h (nacl_abi_clock_t): Use clock_t.

	* sysdeps/nacl/euidaccess.c (euidaccess): Renamed to __euidaccess.
	(euidaccess, eaccess): Define as weak aliases.

	* sysdeps/nacl/bits/typesizes.h (__SUSECONDS_T_TYPE): Use
	__SLONGWORD_TYPE rather than __S32_TYPE.  They are the same size,
	but __suseconds_t is often 'long int' so some sources assume that
	type is being used (e.g. they use %ld to print tv_usec).

2015-04-29  Florian Weimer  <fweimer@redhat.com>

	[BZ #18007]
	* nss/nss_files/files-XXX.c (CONCAT): Always enable stayopen.
	(CVE-2014-8121)
	* nss/tst-nss-getpwent.c: New file.
	* nss/Makefile (tests): Add new test.

2015-04-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18346]
	* sysdeps/ieee754/ldbl-128/s_roundl.c (__roundl): Handle all
	exponents less than 48 as cases where high part of mantissa needs
	examining to determine whether argument is integral.
	* math/libm-test.inc (round_test_data): Add more tests.

2015-04-28  Mark Wielaard  <mjw@redhat.com>

	* elf/elf.h (SHF_EXCLUDE): Use unsigned 1 for shift.

2015-04-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/localplt.data: Remove
	__tls_get_addr.
	* sysdeps/unix/sysv/linux/sparc/sparc64/localplt.data: Likewise.

2015-04-27  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18333]
	* time/tzset.c (__tzfile_read): Check tzspec_len == 0.

2015-04-27  Florian Weimer  <fweimer@redhat.com>

	[BZ #18333]
	* time/tzset.c (parse_tzname): Return error on memory allocation
	failure.
	* test-skeleton.c (struct temp_name_list): Change type of name
	member to non-const.
	(add_temp_file): Create a copy of the file name.
	(delete_temp_files): Deallocate memory.
	(create_temp_file): Add comment.

2015-04-24  Florian Weimer  <fweimer@redhat.com>

	* io/posix_fallocate.c (posix_fallocate): Do not set errno.
	* io/posix_fallocate64.c (posix_fallocate64): Likewise.

2015-04-24  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/configure.ac (PI_STATIC_AND_HIDDEN): Define it.
	* sysdeps/arm/configure: Regenerated.

2015-04-24  Florian Weimer  <fweimer@redhat.com>

	[BZ #17715]
	* time/tzfile.c (__tzfile_read): Check for large values of
	tzh_ttisstdcnt and tzh_ttisgmtcnt.  Use malloc instead of alloca.
	* time/tzset.c (__tzstring_len): New function, based on the old
	__tzstring function.
	(__tzstring): Call __tzstring_len.
	(parse_tzname): New helper function extracted from
	__tzset_parse_tz.  Call __tzstring_len, without making a copy of
	the input string.
	(parse_offset): New helper function extracted from
	__tzset_parse_tz.  Replace switch with fallthrough with
	initialization before sscanf.
	(parse_rule): Likewise.
	(__tzset_parse_tz): Rewrite using the new helper functions.  Use
	new-style function definition.
	* timezone/Makefile (tests): Add tst-tzset.
	(tst-tzset.out): Dependencies on time zone files.
	(tst-tzset-ENV): Set TZDIR.
	(testdata/XT%): Copy crafted time zone files.
	* timezone/README: Mention crafted time zone files.
	* timezone/testdata/XT1, timezone/testdata/XT2,
	timezone/testdata/XT3, timezone/testdata/XT4: New time zone test
	files.
	* timezone/tst-tzset.c: New test.

2015-04-24  Florian Weimer  <fweimer@redhat.com>

	* Makeconfig (+gccwarn): Remove -Winline.

2015-04-24  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-upls: Regenerate.

2015-04-24  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* NEWS: Mention sysconf() cache information support for s390.
	* sysdeps/unix/sysv/linux/s390/sysconf.c: New File.

2015-04-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* math/k_casinh.c (__kernel_casinh): Use __copysign.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c
	(__nearbyint): Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-copysign.c
	(copysignl): Likewise.

2015-04-21  Arjun Shankar  <arjun.is@lostca.se>

	[BZ #18287]
	* resolv/nss_dns/dns-host.c (getanswer_r): Adjust buffer length
	based on padding.  (CVE-2015-1781)

2015-04-20  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* nptl/pthread_cond_timedwait.c: Change include bits/libc-vdso.h to just
	libc-vdso.h.
	* sysdeps/powerpc/powerpc32/backtrace.c: Likewise.
	* sysdeps/powerpc/powerpc64/backtrace.c: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_getres.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_gettime.c: Likewise.
	* sysdeps/unix/sysv/linux/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sched_getcpu.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/time.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/tile/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/tile/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/timespec_get.c: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/bits/libc-vdso.h: Move to ...
	* sysdeps/unix/sysv/linux/aarch64/libc-vdso.h: ... here.
	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/libc-vdso.h: ... here.
	* sysdeps/unix/sysv/linux/s390/bits/libc-vdso.h: Move to ...
	* sysdeps/unix/sysv/linux/s390/libc-vdso.h: ... here.
	* sysdeps/unix/sysv/linux/tile/bits/libc-vdso.h: Move to ...
	* sysdeps/unix/sysv/linux/tile/libc-vdso.h: ... here.

2015-04-19  Paul Eggert  <eggert@cs.ucla.edu>

	* stdlib/setenv.c (__add_to_environ):
	Dump core quickly if setenv (..., NULL, ...) is called.
	This time, do it the right way, and pacify GCC with a pragma.

2015-04-17  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-close.c (_dl_close_worker) [DL_NNS == 1]: Just assert that
	IMAP->l_prev cannot be null, and #if out the code for the contrary
	case, avoiding 'assert (nsid != LM_ID_BASE)' making the compiler
	believe that NS (&_dl_ns[NSID]) could point outside the array.

	* elf/dl-open.c (_dl_open): Use __glibc_unlikely in invalid namespace
	check.  Reject NSID < 0 and NSID >= dl_nns, and check for DL_NNS==1,
	before using NSID as an index.

2015-04-17  Il'ya Malakhov <ilmalakhov@yandex.ru>

	[BZ #17825]
	* sysdeps/sparc/sparc64/memchr.S: Fix signedness handling of length.
	* sysdeps/sparc/sparc64/memcmp.S: Likewise.
	* sysdeps/sparc/sparc64/strncmp.S: Likewise.

2015-04-17  Roland McGrath  <roland@hack.frob.com>

	Add preliminary port to Google Native Client on ARM.
	* abi-tags (.*-.*-nacl.*): New entry.
	* sysdeps/arm/nacl: New directory.
	* sysdeps/nacl: New directory.

2015-04-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Make use of
	lowlevellock-futex.h

2015-04-16  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/configure.ac: New file.
	* sysdeps/tile/configure: Regenerated.

2015-04-15  Adhemerval Zanella  <adhemerval.zanella@linaro.org>

	* wcsmbs/wcschr.c [WCSCHR] (wcschr): Define as __wcschr.  Remove
	conditionals for weak_alias and libc_hidden_weak.
	* sysdeps/i386/i686/multiarch/wcschr-c.c [libc]: Undefine
	libc_hidden_weak and weak_alias.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-ppc32.c [libc]:
	Undefine libc_hidden_weak. Define libc_hidden_def for SHARED builds
	and weak_alias for static one.

2015-04-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Regenerate from scratch.

2015-04-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #18206]
	* wcsmbs/wcsncmp.c (wcsncmp): Compare as wchar_t, not wint_t.
	  Use signed comparision instead of substraction to avoid
	  overflow bug.
	* localedata/tests-mbwc/tst_wcsncmp.c (tst_wcsncmp):
	  Take the sign of ret.
	* localedata/tests-mbwc/dat_wcsncmp.c (tst_wcsncmp_loc):
	  Do not expect precise return values. Only the sign matters.
	* wcsmbs/Makefile (strop-tests): Add wcsncmp.
	* wcsmbs/test-wcsncmp.c: New File.
	* string/test-strncmp.c: Add wcsncmp support.

2015-04-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #6792]
	* math/w_log1p.c: New file.
	* math/w_log1pf.c: Likewise.
	* math/w_log1pl.c: Likewise.
	* math/Makefile (libm-calls): Add w_log1p.
	* math/s_log1pl.c (log1pl): Remove weak_alias.
	* sysdeps/i386/fpu/s_log1p.S (log1p): Likewise.
	* sysdeps/i386/fpu/s_log1pf.S (log1pf): Likewise.
	* sysdeps/i386/fpu/s_log1pl.S (log1pl): Likewise.
	* sysdeps/x86_64/fpu/s_log1pl.S (log1pl): Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c (log1p): Likewise.
	[NO_LONG_DOUBLE] (log1pl): Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c (log1pf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c (log1pl): Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_log1pl.c
	(log1p): Remove long_double_symbol.
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c (log1pl): Likewise.
	* sysdeps/ieee754/ldbl-64-128/w_log1pl.c: New file.
	* sysdeps/ieee754/ldbl-128ibm/w_log1pl.c: Likewise.
	* sysdeps/m68k/m680x0/fpu/s_log1p.c: Define empty weak_alias to
	remove weak_alias for corresponding log1p function.
	* sysdeps/m68k/m680x0/fpu/s_log1pf.c: Likewise.
	* sysdeps/m68k/m680x0/fpu/s_log1pl.c: Likewise.
	* sysdeps/ia64/fpu/w_log1p.c: New file.
	* sysdeps/ia64/fpu/w_log1pf.c: Likewise.
	* sysdeps/ia64/fpu/w_log1pl.c: Likewise.
	* math/libm-test.inc (log1p_test_data):	Add errno expectations.

2015-04-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18247]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Decrease minimum
	decimal exponent by 1.
	* stdlib/tst-strtod-round-data: Add more tests.
	* stdlib/tst-strtod-round.c (tests): Regenerated.

2015-04-09  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of clog and clog10.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-04-09  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig (module-cppflags): Exclude all .v.i files.
	(skip-module-cppflags): Variable removed.

	* configure.ac (libc_config_ok): Initialize before reading
	preconfigure scripts, not after.
	* configure: Regenerated.

	* test-skeleton.c (TIMEOUT): Move #define to top level.
	(main): Grok environment variable TEST_DIRECT.  If set, print
	test expectation details into that file and then behave as if
	given --direct.

2015-04-09  Florian Weimer  <fweimer@redhat.com>

	* malloc/tst-scratch_buffer.c (do_test): Suppress truncation
	warning on 32-bit.

2015-04-08  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2015-04-08  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of atanh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add more tests of atan.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-04-08  Florian Weimer  <fweimer@redhat.com>

	* elf/pldd.c (main): Rewrite to use struct
	scratch_buffer instead of extend_alloca.
	* elf/pldd-xx.c (find_maps): Likewise.
	* grp/initgroups.c: Include <scratch_buffer.h> instead of
	<alloca.h>.
	* grp/compat-initgroups.c (compat_call): Rewrite to use struct
	scratch_buffer instead of extend_alloca.
	* nscd/initgrcache.c: Include <scratch_buffer.h>, now needed by
	grp/compat-initgroups.c.
	* nis/nss_compat/compat-initgroups.c (_nss_compat_initgroups_dyn):
	Rewrite to use struct scratch_buffer instead of extend_alloca.
	* inet/getnameinfo.c (nrl_domainname, getnameinfo): Likewise.
	* nscd/nscd_getgr_r.c (nscd_getgr_r): Likewise.

2015-04-08  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of cbrt.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* math/auto-libm-test-in: Add more tests of cabs.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #18210]
	[BZ #18211]
	* sysdeps/ieee754/dbl-64/e_atan2.c: Include <fenv.h>.
	(__ieee754_atan2): Set FE_TONEAREST mode for internal
	computations.
	* math/auto-libm-test-in: Add more tests of atan2, carg, clog and
	clog10.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #18197]
	* sysdeps/ieee754/dbl-64/s_atan.c: Include <fenv.h>.
	(atan): Set FE_TONEAREST mode for internal computations.
	* math/auto-libm-test-in: Add more tests of atan.
	* math/auto-libm-test-out: Regenerated.

2015-04-07  James Cowgill  <james410@cowgill.org.uk>

	[BZ #17930]
	* sysdeps/unix/sysv/linux/mips/bits/shm.h (SHM_NORESERVE): Define.

2015-04-07  Florian Weimer  <fweimer@redhat.com>

	* malloc/scratch_buffer_grow_preserve.c: Include <string.h>

2015-04-07  Florian Weimer  <fweimer@redhat.com>

	* include/scratch_buffer.h: New file.
	* malloc/scratch_buffer_grow.c: Likewise.
	* malloc/scratch_buffer_grow_preserve.c: Likewise.
	* malloc/scratch_buffer_set_array_size.c: Likewise.
	* malloc/tst-scratch_buffer.c: Likewise.
	* malloc/Makefile (routines): Add scratch_buffer_grow.
	(tests): Add test case.
	* malloc/Versions (GLIBC_PRIVATE): Export
	__libc_scratch_buffer_grow, __libc_scratch_buffer_grow_preserve,
	__libc_scratch_buffer_set_array_size.

2015-04-06  Richard Henderson  <rth@redhat.com>

	* sysdeps/unix/alpha/sysdep.h: Unconditionally include dl-sysdep.h.
	* sysdeps/alpha/fpu/libm-test-ulps: Update.

	* math/test-fenvinline.c (feenable_test): Cast fe_exc to
	unsigned int before printing.

2015-04-03  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	[BZ #17596]
	* wcsmbs/mbrtowc.c (__mbrtowc): Add check for n=0.
	* wcsmbs/mbrtoc16.c (mbrtoc16): Likewise.

2015-04-02  Florian Weimer  <fweimer@redhat.com>

	* include/libc-internal.h (libc_max_align_t): Define.

2015-04-02  Andreas Schwab  <schwab@suse.de>

	[BZ #16850]
	* sysdeps/unix/sysv/linux/aarch64/bits/sigstack.h: New file.

2015-04-02  Mel Gorman  <mgorman@suse.de>

	[BZ #17195]
	* malloc/arena.c (free): Apply trim threshold to per-thread heaps
	as well as the main arena.

2015-03-31  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18185]
	* sysdeps/x86_64/cacheinfo.c (init_cacheinfo): Limit threads
	sharing L2 cache to 2 for Silvermont/Knights Landing.

2015-03-31  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17711]
	* config.make.in (have-protected-data): New.
	* configure.ac: Check linker support for protected data symbol.
	* configure: Regenerated.
	* elf/Makefile (modules-names): Add tst-protected1moda and
	tst-protected1modb if $(have-protected-data) is yes.
	(tests): Add tst-protected1a and tst-protected1b if
	$(have-protected-data) is yes.
	($(objpfx)tst-protected1a): New.
	($(objpfx)tst-protected1b): Likewise.
	(tst-protected1modb.so-no-z-defs): Likewise.
	* elf/tst-protected1a.c: New file.
	* elf/tst-protected1b.c: Likewise.
	* elf/tst-protected1mod.h: Likewise.
	* elf/tst-protected1moda.c: Likewise.
	* elf/tst-protected1modb.c: Likewise.

2015-03-31  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17711]
	* elf/dl-lookup.c (do_lookup_x): When UNDEF_MAP is NULL, which
	indicates it is called from do_lookup_x on relocation against
	protected data, skip the data definion in the executable from
	copy reloc.
	(_dl_lookup_symbol_x): Pass ELF_RTYPE_CLASS_EXTERN_PROTECTED_DATA,
	instead of ELF_RTYPE_CLASS_PLT, to do_lookup_x for
	EXTERN_PROTECTED_DATA relocation against STT_OBJECT symbol.
	* sysdeps/generic/ldsodefs.h * (ELF_RTYPE_CLASS_EXTERN_PROTECTED_DATA):
	New.  Defined to 4 if DL_EXTERN_PROTECTED_DATA is defined,
	otherwise to 0.
	* sysdeps/i386/dl-lookupcfg.h (DL_EXTERN_PROTECTED_DATA): New.
	* sysdeps/i386/dl-machine.h (elf_machine_type_class): Set class
	to ELF_RTYPE_CLASS_EXTERN_PROTECTED_DATA for R_386_GLOB_DAT.
	* sysdeps/x86_64/dl-lookupcfg.h (DL_EXTERN_PROTECTED_DATA): New.
	* sysdeps/x86_64/dl-machine.h (elf_machine_type_class): Set class
	to ELF_RTYPE_CLASS_EXTERN_PROTECTED_DATA for R_X86_64_GLOB_DAT.

2015-03-28  Martin Galvan  <martin.galvan@tallertechnologies.com>

	* sysdeps/nptl/pthread.h: Remove duplicate definition of
	PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP.

2015-03-27  Martin Galvan  <martin.galvan@tallertechnologies.com>

	* sysdeps/i386/nptl/tls.h: Swap comments between THREAD_SETMEM and
	THREAD_SETMEM_NC.
	* sysdeps/x86_64/nptl/tls.h: Ditto.

2015-03-27  Roland McGrath  <roland@hack.frob.com>

	* dlfcn/tststatic.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.

2015-03-26  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_fixup_plt):
	Don't segfault if ifunc resolver returns a NULL.  Do set plt to
	zero for undefined weak.
	(elf_machine_plt_conflict): Similarly.

2015-03-25  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of acosh, asinh and
	atanh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add another test of asin.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/unix/sysv/linux/i386/lowlevellock.h (LLL_EBX_LOAD):
	Remove macro.
	(LLL_EBX_REG): Likewise.
	(LLL_ENTER_KERNEL): Likewise.

	* math/auto-libm-test-in: Add more tests of asin.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #18138]
	* sysdeps/unix/sysv/linux/i386/sysdep.h (struct
	libc_do_syscall_args): New structure.
	(INTERNAL_SYSCALL_MAIN_0): New macro.
	(INTERNAL_SYSCALL_MAIN_1): Likewise.
	(INTERNAL_SYSCALL_MAIN_2): Likewise.
	(INTERNAL_SYSCALL_MAIN_3): Likewise.
	(INTERNAL_SYSCALL_MAIN_4): Likewise.
	(INTERNAL_SYSCALL_MAIN_5): Likewise.
	(INTERNAL_SYSCALL_MAIN_6): Likewise.  Call __libc_do_syscall.
	(INTERNAL_SYSCALL): Define to use INTERNAL_SYSCALL_MAIN_##nr.
	Replace conditional definitions by conditional definitions of ....
	(INTERNAL_SYSCALL_MAIN_INLINE): ... this.  New macro.
	* sysdeps/unix/sysv/linux/i386/libc-do-syscall.S: New file.
	* sysdeps/unix/sysv/linux/i386/Makefile [$(subdir) = nptl]
	(libpthread-sysdep_routines): Add libc-do-syscall.
	* sysdeps/unix/sysv/linux/i386/lowlevellock-futex.h: Remove file.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h (SYS_futex): Define
	to __NR_futex not 240.

2015-03-25  Alan Modra  <amodra@gmail.com>

	* NEWS: Advertise TLS optimization.
	* elf/elf.h (R_PPC_TLSGD, R_PPC_TLSLD, DT_PPC_OPT, PPC_OPT_TLS): Define.
	(DT_PPC_NUM): Increment.
	* elf/dynamic-link.h (HAVE_STATIC_TLS): Define.
	(CHECK_STATIC_TLS): Use here.
	* sysdeps/powerpc/powerpc32/dl-machine.h (elf_machine_rela): Optimize
	TLS descriptors.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/powerpc/dl-tls.c: New file.
	* sysdeps/powerpc/Versions: Add __tls_get_addr_opt.
	* sysdeps/powerpc/tst-tlsopt-powerpc.c: New tls test.
	* sysdeps/unix/sysv/linux/powerpc/Makefile: Add new test.
	Build tst-tlsmod2.so with --no-tls-get-addr-optimize.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ld.abilist: Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld-le.abilist: Likewise.

2015-03-25  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/configure.ac: Correct "linker support
	for overlapping .opd entries" to "support...".
	* sysdeps/powerpc/powerpc64/configure: Regenerate

2015-03-25  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of acos.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add more tests of expm1.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-03-24  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of cosh and sinh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add more tests of log2.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-03-23  Roland McGrath  <roland@hack.frob.com>

	* libio/iofdopen.c: Move FD_FLAGS declaration into its first use,
	inside [F_GETFL].  Remove POSIX_MODE local variable, just test the
	_IO_IS_APPENDING bit in READ_WRITE instead.

2015-03-23  Florian Weimer  <fweimer@redhat.com>

	* sysdeps/unix/sysv/linux/pthread_setaffinity.c
	(__determine_cpumask_size): Replace extend_alloca with a
	variable-length array.  Do not treat res == 0 as an error.

2015-03-23  Florian Weimer  <fweimer@redhat.com>

	[BZ #18100]
	* posix/wordexp.c (eval_expr_multdiv): Check for division by zero
	and integer overflow.
	* posix/wordexp-test.c (test_case): Add divide-by-zero test.
	(main): Add integer overflow tests.
	* manual/pattern.texi (Calling Wordexp): Document additional use
	for WRDE_SYNTAX.

2015-03-23  Alan Modra  <amodra@gmail.com>

	* config.h.in: Remove HAVE_ASM_PPC_REL16.
	* sysdeps/powerpc/powerpc32/tls-macros.h: Remove HAVE_ASM_PPC_REL16
	and false branch of conditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S:
	Likewise.

2015-03-21  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/Makefile ($(common-objpfx)errnos.d): Depend on
	libc-modules.h
	* sysdeps/mach/hurd/i386/trampoline.c (_hurd_setup_sighandler): Remove
	unused declaration of _hurd_intr_rpc_msg_in_trap.
	* mach/mach_init.c (__mach_init): Test whether HAVE_HOST_PAGE_SIZE is
	defined instead of whether it is non-zero.
	* sysdeps/mach/hurd/i386/intr-msg.h (INTR_MSG_TRAP): Use "+m"
	input constraint instead of both input and output constraint.  Use ecx
	clobber instead of %ecx.
	* sysdeps/mach/hurd/malloc-machine.h (mutex_init, mutex_lock,
	mutex_unlock): Use a statement expression instead of an expression list.
	* sysdeps/mach/hurd/setitimer.c (_hurd_itimer_thread_stack_size): Set
	type to vm_size_t instead of vm_address_t.
	* sysdeps/mach/hurd/fork.c (__fork): Test whether STACK_GROWTH_UP is
	defined instead of whether it is non-zero.
	* hurd/hurd/ioctl.h (_hurd_locked_install_cttyid): New declaration.
	* sysdeps/mach/hurd/setsid.c: Include <hurd/ioctl.h>.
	* sysdeps/mach/hurd/mmap.c (__mmap): Use 0 instead of NULL for
	comparisons with mapaddr.
	* nscd/nscd-client.h: Include <time.h>.
	* sysdeps/mach/hurd/dl-sysdep.c (fmh): Pass vm_offset_t dummy
	9th parameter to __vm_region instead of int.
	* bits/termios.h [!__USE_MISC] (EXTPROC): Do not define.
	* scripts/check-local-headers.sh (exclude): Add device/,
	hurd/hurd_types.h, hurd/ioctl_types.h, hurd/paths.h, hurd/ioctls.defs,
	cthreads.h.

2015-03-19  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/memcpy.S [ARM_ALWAYS_BX]: Fix computed-jump calculations
	to account for alignment padding.
	* sysdeps/arm/memmove.S: Likewise.

2015-03-19  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/generic/README: New file.

2015-03-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18138]
	* nptl/sem_waitcommon.c: Include <kernel-features.h>.
	(futex_abstimed_wait)
	[__ASSUME_FUTEX_CLOCK_REALTIME && lll_futex_timed_wait_bitset]:
	Use lll_futex_timed_wait_bitset with FUTEX_CLOCK_REALTIME instead
	of lll_futex_timed_wait.

2015-03-18  Brad Hubbard  <bhubbard@redhat.com>

	[BZ #17542]
	* sunrpc/svc.c (xprt_register): Use calloc to allocate xports.

2015-03-17  Alexandre Oliva <aoliva@redhat.com>

	[BZ #17090]
	[BZ #17620]
	[BZ #17621]
	[BZ #17628]
	* NEWS: Update.
	* elf/dl-tls.c (_dl_update_slotinfo): Clean up outdated DTV
	entries with Static TLS too.  Skip entries past the end of the
	allocated DTV, from Alan Modra.
	(tls_get_addr_tail): Update to glibc_likely/unlikely.  Move
	Static TLS DTV entry set up from...
	(_dl_allocate_tls_init): ... here (fix modid assertion), ...
	* elf/dl-reloc.c (_dl_nothread_init_static_tls): ... here...
	* nptl/allocatestack.c (init_one_static_tls): ... and here...
	* elf/dlopen.c (dl_open_worker): Drop l_tls_modid upper bound
	for Static TLS.
	* elf/tlsdeschtab.h (map_generation): Return size_t.  Check
	that the slot we find is associated with the given map before
	using its generation count.
	* nptl_db/db_info.c: Include ldsodefs.h.
	(rtld_global, dtv_slotinfo_list, dtv_slotinfo): New typedefs.
	* nptl_db/structs.def (DB_RTLD_VARIABLE): New macro.
	(DB_MAIN_VARIABLE, DB_RTLD_GLOBAL_FIELD): Likewise.
	(link_map::l_tls_offset): New struct field.
	(dtv_t::counter): Likewise.
	(rtld_global): New struct.
	(_rtld_global): New rtld variable.
	(dl_tls_dtv_slotinfo_list): New rtld global field.
	(dtv_slotinfo_list): New struct.
	(dtv_slotinfo): Likewise.
	* nptl_db/td_symbol_list.c: Drop gnu/lib-names.h include.
	(td_lookup): Rename to...
	(td_mod_lookup): ... this.  Use new mod parameter instead of
	LIBPTHREAD_SO.
	* nptl_db/td_thr_tlsbase.c: Include link.h.
	(dtv_slotinfo_list, dtv_slotinfo): New functions.
	(td_thr_tlsbase): Check DTV generation.  Compute Static TLS
	addresses even if the DTV is out of date or missing them.
	* nptl_db/fetch-value.c (_td_locate_field): Do not refuse to
	index zero-length arrays.
	* nptl_db/thread_dbP.h: Include gnu/lib-names.h.
	(td_lookup): Make it a macro implemented in terms of...
	(td_mod_lookup): ... this declaration.
	* nptl_db/db-symbols.awk (DB_RTLD_VARIABLE): Override.
	(DB_MAIN_VARIABLE): Likewise.

2015-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18134]
	* sysdeps/x86_64/dl-trampoline.S (PRESERVE_BND_REGS_PREFIX): New.

2015-03-15  Paul Eggert  <eggert@cs.ucla.edu>

	* stdlib/setenv.c (__add_to_environ): Revert previous change.

2015-03-14  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #18128]
	* sysdeps/m68k/m680x0/m68020/bits/atomic.h (atomic_exchange_and_add)
	(atomic_add, atomic_increment_and_test)
	(atomic_decrement_and_test): Fix 64-bit arithmetic.

2015-03-13  Paul Eggert  <eggert@cs.ucla.edu>

	* stdlib/setenv.c (__add_to_environ):
	Dump core quickly if setenv (..., NULL, ...) is called.

2015-03-13  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/tls-macros.h: Include <sysdep.h>.
	(GET_SPECIAL_RELOC, GET_SPECIAL_PCREL): New macros to encapsulate
	all the necessary asm magic in one place.
	(TLS_LE, TLS_IE, TLS_LD, TLS_GD): Rewritten as C expressions
	using those.

2015-03-13  Carlos O'Donell  <carlos@redhat.com>

	[BZ #14906]
	* nscd/cache.c (prune_cache): Use TRACED_FILE. Compare and update
	traced file mtime. Use consistent log message.
	* nscd/connections.c [HAVE_INOTIFY] (install_watches): New function.
	(register_traced_file): Call install_watches. Always set mtime.
	(invalidate_cache): Iterate over all trace files. Call install_watches.
	(inotify_check_files): Don't inline. Handle watching parent
	directories and configuration file movement in and out.
	(handle_inotify_events): New function.
	(main_loop_poll): Call handle_inotify_events.
	(main_loop_epoll): Likewise.
	* nscd/nscd.h: Define TRACED_FILE, TRACED_DIR, and PATH_MAX.
	(struct traced_file): Use array of inotify fds. Add parent directory,
	and basename.
	(struct database_dyn): Remove unused file_mtime.
	(init_traced_file): New inline function.
	(define_traced_file): New macro.
	* nss/nss_db/db-init.c: Use define_traced_file.
	(_nss_db_init): Use init_traced_file.
	* nss/nss_files/files-init.c: Use define_traced_file.
	(_nss_files_init): Use init_traced_file.

2015-03-12  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/soft-fp.h (_FP_STATIC_ASSERT): New macro.
	[_LIBC]: Do not include <stdlib.h>.
	[!_LIBC] (abort): Remove declaration.
	* soft-fp/op-2.h (_FP_MUL_MEAT_2_120_240_double): Use
	_FP_STATIC_ASSERT instead of conditionally calling abort.
	* soft-fp/op-common.h (_FP_FROM_INT): Likewise.
	(_FP_EXTEND_CNAN): Likewise.
	(FP_TRUNC): Likewise.
	(__FP_CLZ): Likewise.
	* sysdeps/powerpc/nofpu/flt-rounds.c: Include <stdlib.h>.

2015-03-12  Yaakov Selkowitz  <yselkowi@redhat.com>

	* manual/string.texi (XPG basename): Fix prototype.

2015-03-12  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #18080]
	* sysdeps/unix/sysv/linux/s390/s390-32/setcontext.S
	(__setcontext): Use SIG_SETMASK instead of SIG_BLOCK.
	* sysdeps/unix/sysv/linux/s390/s390-64/setcontext.S
	(__setcontext): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/swapcontext.S
	(__swapcontext): Use SIG_SETMASK instead of SIG_BLOCK.
	Call rt_sigprocmask syscall one time to set new signal mask
	and retrieve the current signal mask instead of two calls.
	* sysdeps/unix/sysv/linux/s390/s390-64/swapcontext.S
	(__swapcontext): Likewise.
	* stdlib/Makefile (tests): Add new testcase tst-setcontext2.
	* stdlib/tst-setcontext2.c: New file.

2015-03-12  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2015-03-11  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #18093]
	* elf/cache.c (load_aux_cache): Regenerate the cache if it has
	the wrong size.

2015-03-11  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18043]
	* posix/wordexp.c (parse_param): Don't call setenv(..., NULL, 1).

2015-03-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* config.h.in [HAVE_ASM_GLOBAL_DOT_NAME]: Remove define.
	* include/libc-symbols.h [HAVE_ASM_GLOBAL_DOT_NAME] (strong_alias):
	Remove define.
	[HAVE_ASM_GLOBAL_DOT_NAME] (strong_data_alias): Likewise.
	[HAVE_ASM_GLOBAL_DOT_NAME] (weak_alias): Likewise.
	[HAVE_ASM_GLOBAL_DOT_NAME] (_symbol_version): Likewise.
	[HAVE_ASM_GLOBAL_DOT_NAME] (_default_symbol_version): Likewise.
	[HAVE_ASM_GLOBAL_DOT_NAME] (HIDDEN_JUMPTARGET): Likewise.
	* nptl_db/db-symbols.h [HAVE_ASM_GLOBAL_DOT_NAME] (DOT): Remove
	define.
	* nptl_db/td_symbol_list.c (td_lookup): Remove
	HAVE_ASM_GLOBAL_DOT_NAME code.
	* sysdeps/powerpc/powerpc64/configure.ac: Remove
	HAVE_ASM_GLOBAL_DOT_NAME check.
	* sysdeps/powerpc/powerpc64/configure: Regenerate.
	* sysdeps/powerpc/powerpc64/sysdep.h [HAVE_ASM_GLOBAL_DOT_NAME]
	(DOT_LABEL): Remove define.
	[HAVE_ASM_GLOBAL_DOT_NAME] (BODY_LABEL): Likewise.
	[HAVE_ASM_GLOBAL_DOT_NAME] (ENTRY_2): Likewise.
	[HAVE_ASM_GLOBAL_DOT_NAME] (END_2): Likewise.
	* sysdeps/powerpc/powerpc64/tls-macros.h [HAVE_ASM_GLOBAL_DOT_NAME]
	(__TLS_GET_ADDR): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h
	[HAVE_ASM_GLOBAL_DOT_NAME] (DASHDASHPFX): Likewise.

2015-03-11  Carlos O'Donell  <carlos@redhat.com>

	[BZ #18111]
	* sysdeps/hppa/fpu/fpu_control.h (_FPU_HPPA_SHIFT_FLAGS): Define.
	(_FPU_SETCW): Initialize cw from fpsr before storing.
	* sysdeps/hppa/fpu/fsetexcptflg.c: Include fpu_control.h
	(fesetexceptflag): Rewrite using fpu_control.h.
	* sysdeps/hppa/fpu/feupdateenv.c: Handle FE_DFL_ENV, and FE_NOMASK_ENV.

2015-03-11  John David Anglin  <danglin@gcc.gnu.org>

	[BZ #18110]
	* sysdeps/hppa/fpu/feholdexcpt.c (feholdexcept): Don't modify bufptr in
	asms.
	* sysdeps/hppa/fpu/fesetenv.c (fesetenv): Likewise.

2015-03-11  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/soft-fp.h (_FP_UNREACHABLE): New macro.
	* soft-fp/op-common.h (_FP_MUL): Use _FP_UNREACHABLE instead of
	abort.
	(_FP_FMA): Likewise.
	(_FP_DIV): Likewise.

2015-03-10  Roland McGrath  <roland@hack.frob.com>

	* scripts/evaluate-test.sh: Grok exit code 77 as UNSUPPORTED and exit
	with 0 in that case.
	* Makefile (summarize-tests): New canned sequence, factored out of
	commands for targets tests and xtests.  Display summary lines that
	don't start with PASS: or XFAIL: rather than ones that do start with
	ERROR: or FAIL:.  Make the commands fail if any summary lines fail
	to start with X?PASS: or XFAIL: or UNSUPPORTED: rather than if any
	do start with ERROR: or FAIL:.
	* dlfcn/Makefile (tests): Add bug-atexit3 back here unconditionally
	(except for [$(build-shared) = yes]).
	(tests-unsupported) [$(CXX) empty]: Add bug-atexit3.
	(LDLIBS-bug-atexit3-lib.so): Conditionalize on [$(CXX) nonempty].
	($(objpfx)bug-atexit3, $(objpfx)bug-atexit3.out): Likewise.
	* nptl/Makefile: Revert 2015-03-04 changes.
	[$(CXX) empty] (tests-unsupported): New variable.
	* debug/Makefile: Likewise.

	* posix/regcomp.c: Fix comment typos and formatting to harmonize with
	gnulib file.  Replace __attribute with __attribute__ throughout.

2015-03-10  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/hppa/fpu/libm-test-ulps: Update.

2015-03-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18104]
	* math/auto-libm-test-in: Add another test of pow.
	* math/auto-libm-test-out: Regenerated.

2015-03-10  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/dbl-64/Makefile (CFLAGS-e_pow.c): Add
	$(config-cflags-nofma).

2015-03-10  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/double.h [SOFT_FP_DOUBLE_H]: New multiple-include guard.
	* soft-fp/extended.h [SOFT_FP_EXTENDED_H]: Likewise.
	* soft-fp/op-1.h [SOFT_FP_OP_1_H]: Likewise.
	* soft-fp/op-2.h [SOFT_FP_OP_2_H]: Likewise.
	* soft-fp/op-4.h [SOFT_FP_OP_4_H]: Likewise.
	* soft-fp/op-8.h [SOFT_FP_OP_8_H]: Likewise.
	* soft-fp/op-common.h [SOFT_FP_OP_COMMON_H]: Likewise.
	* soft-fp/quad.h [SOFT_FP_QUAD_H]: Likewise.
	* soft-fp/single.h [SOFT_FP_SINGLE_H]: Likewise.
	* soft-fp/soft-fp.h (SOFT_FP_H): Define to 1 rather than empty.
	Add comment on closing #endif.

2015-03-09  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* posix/wordexp.c (CHAR_IN_SET): New macro.
	(parse_param): Use it.

2015-03-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: update.

2015-03-09  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18043]
	* posix/wordexp.c (parse_param): Fix buffer overflow.
	* posix/wordexp-test.c (test_case): Add test case.

2015-03-09  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18042]
	* posix/wordexp.c (parse_backtick): Fix off-by-one.
	* posix/wordexp-test.c (test_case): Add test for BZ #18042.

2015-03-09  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18043]
	* posix/wordexp-test.c (test_case): Add test for BZ #18043
	(do_bz18043): Delete.
	(at_page_end): New.
	(testit): Refactor to have words at the edge of unreadable page.

2015-03-08  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #16734]
	* libio/genops.c (_IO_unbuffer_all): Renamed from _IO_unbuffer_write.
	Cleanup read-only streams as well.
	(_IO_cleanup): Call _IO_unbuffer_all instead of _IO_unbuffer_write.

2015-03-08  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/bits/libc-lock.h [_LIBC]: Include
	<bits/libc-lockP.h>

2015-03-07  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/soft-fp.h (_FP_ZERO_INIT): New macro.  Define depending
	on [__KERNEL__].
	* soft-fp/op-1.h (_FP_FRAC_DECL_1): Use _FP_ZERO_INIT.
	* soft-fp/op-2.h (_FP_FRAC_DECL_2): Likewise.
	* soft-fp/op-common.h (_FP_DECL): Likewise.

2015-03-06  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/ifuncdep2.c (global): Replace
	__attribute__((visibility("protected"))) with
	asm (".protected global").
	* elf/ifuncmod1.c (global): Likewise.
	* elf/ifuncmod5.c (global): Likewise.

2015-03-06  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/soft-fp.h [!_LIBC && __KERNEL__]: Include
	<asm/sfp-machine.h> instead of <sfp-machine.h>.

2015-03-06  Roland McGrath  <roland@hack.frob.com>

	* manual/install.texi (Configuring and compiling):
	Document test-wrapper-env-only.
	* INSTALL: Regenerated.

2015-03-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18043]
	* posix/wordexp.c (parse_param): Fix buffer overflow.
	* posix/wordexp-test.c (do_bz18043): Add test case.

2015-03-06  Vincent Bernat  <vincent@bernat.im>

	* time/tst-strptime2.c (do_test): Ensure failing tests are
	reported correctly.
	* time/tst-strptime3.c (do_test): Likewise.

2015-03-06  Samuel Thibault  <samuel.thibault@inria.fr>

	Fix aio_error thread-safety.
	* sysdeps/pthread/aio_error.c: New file
	* sysdeps/pthread/aio_misc.c: Remove optimistic comment about
	synchronization.

2015-03-06  Florian Weimer  <fweimer@redhat.com>

	* stdio-common/vfprintf.c (THOUSANDS_SEP_T): New typedef.
	(group_number, vfprintf): Use it.
	(JUMP_TABLE_BASE_LABEL): New preprocessor macro.
	(JUMP, REF): Use it.
	(WORK_BUFFER_SIZE): New enum constant.
	(process_arg, vfprintf): Use it.

2015-03-06  Rical Jasan  <ricaljasan@pacific.net>

	* manual/errno.texi (Error Messages): Complete example function
	by adding missing #define.
	(program_invocation_name): Add statement indicating GNU
	extension and reference which header file declares the variable.
	(program_invocation_short_name): Likewise.

2015-03-06  Mike Frysinger  <vapier@gentoo.org>

	* manual/errno.texi (Error Messages): Delete strerror ISO C89
	compatibility note.

2015-03-05  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig (test-wrapper-env-only): New variable.
	* Rules (make-test-out): If variable $*-ENV-only is nonempty,
	then use that with $(test-wrapper-env-only) rather than using
	$(test-wrapper-env) $(run-program-env) $($*-ENV).

2015-03-05  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #18082]
	* sysdeps/alpha/dl-machine.h (elf_machine_type_class): Replace
	ELF_RTYPE_CLASS_NOCOPY with ELF_RTYPE_CLASS_COPY in comments.
	* sysdeps/arm/dl-machine.h (elf_machine_type_class): Likewise.
	* sysdeps/hppa/dl-machine.h (elf_machine_type_class): Likewise.
	* sysdeps/i386/dl-machine.h (elf_machine_type_class): Likewise.
	* sysdeps/ia64/dl-machine.h (elf_machine_type_class): Likewise.
	* sysdeps/m68k/dl-machine.h (elf_machine_type_class): Likewise.
	* sysdeps/microblaze/dl-machine.h (elf_machine_type_class):
	Likewise.
	* sysdeps/nios2/dl-machine.h (elf_machine_type_class): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h (elf_machine_type_class):
	Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_type_class):
	Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_type_class):
	Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_type_class):
	Likewise.
	* sysdeps/sh/dl-machine.h (elf_machine_type_class): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_type_class):
	Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_type_class):
	Likewise.
	* sysdeps/tile/dl-machine.h (elf_machine_type_class): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_type_class): Likewise.

2015-03-04  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/netinet/if_ether.h: Don't #include <features.h>.
	(ETH_ALEN): New macro.
	(struct ether_addr): Use it for length of ether_addr_octet.

	* nss/test-netdb.c: Don't #include <rpc/netdb.h>.
	(setdb): Don't call __nss_configure_lookup for "rpc".
	(do_test): Don't call test_rpc.
	(output_rpcent, test_rpc): Functions moved ...
	* sunrpc/test-rpcent.c: ... to this new file.
	* sunrpc/Makefile (tests): Add it.

	* nptl/tst-cancel4.c (tf_sigpause) [!SIGCANCEL]: Call pause instead of
	__xpg_sigpause.
	* nptl/tst-signal3.c: Conditionalize body on [SIGRTMIN].
	* nptl/tst-signal6.c: Likewise.
	* rt/tst-mqueue5.c: Conditionalize body on [SIGRTMIN && SA_SIGINFO].
	* rt/tst-timer4.c: Conditionalize body on [SA_SIGINFO].

	* configure.ac (libc_cv_cxx_link_ok): New check.
	Reset CXX to empty if it fails to link.
	* configure: Regenerated.
	* dlfcn/Makefile (tests, modules-names): Add bug-atexit3 and
	bug-atexit3-lib only if $(CXX) is nonempty.
	* nptl/Makefile (tests): Likewise for tst-cancel24.
	(tests, tests-static): Likewise for tst-cancel24-static.
	* debug/Makefile (tests): Likewise for tst-chk4, tst-chk5, tst-chk6,
	tst-lfschk4, tst-lfschk5, and tst-lfschk6.
	* elf/Makefile (tests, modules-names): Likewise for tst-unique3,
	tst-unique3lib, tst-unique3lib2, tst-unique4, and tst-unique4lib.

2015-03-04  Andreas Schwab  <schwab@suse.de>

	[BZ #17631]
	* string/string.h (__CORRECT_ISO_CPP_STRING_H_PROTO): Don't define
	for non-GCC compilers.
	* string/strings.h (__CORRECT_ISO_CPP_STRINGS_H_PROTO):
	Likewise.

2015-03-03 Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #17776]
	* sysdeps/powerpc/bits/fenvinline.h (feraiseexcept): Convert input to
	integer before bitwise and assembly operations.
	(feclearexcept): Likewise.
	* math/test-fenvinline.c: New file.
	* math/Makefile: Add test-fenvinline test.

2015-03-03  Alan Modra  <amodra@gmail.com>

	[BZ #16512]
	* scripts/localplt.awk: Strip off symbol version.
	* NEWS: Mention bug fix.

2015-03-02  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/pthread/timer_routines.c
	(timer_free_list, thread_free_list, thread_active_list): Make static.

2015-03-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17779]
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x020625] (__ASSUME_PRLIMIT64):
	Undefine.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x020625] (__ASSUME_PRLIMIT64):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x020625] (__ASSUME_PRLIMIT64):
	Likewise.

2015-03-02  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #18036]
	* posix/fnmatch_loop.c (END): Detect invalid pattern.
	* posix/tst-fnmatch3.c (do_bz18036): Add test case.

2015-03-02  Andreas Schwab  <schwab@suse.de>

	* elf/Makefile ($(elf-objpfx)runtime-linker.st): Fix typo in
	variable name.

2015-03-02  Florian Weimer  <fweimer@redhat.com>

	* nis/nss_nis/nis-initgroups.c (_nss_nis_initgroups_dyn):
	Return error status.

2015-02-27  Alexandre Oliva <aoliva@redhat.com>

	[BZ #15969]
	* locale/findlocale.c (_nl_find_locale): Introduce const
	version of loc_name and drop unsafe type casts.

2015-02-27  Roland McGrath  <roland@hack.frob.com>

	* dlfcn/tststatic2.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.

2015-02-27  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17711]
	* elf/Makefile (tests): Add vismain only if PIE is enabled.
	(tests-pie): Add vismain.
	(CFLAGS-vismain.c): New.
	* elf/vismain.c: Add comments for PIE requirement.

2015-02-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18046]
	[BZ #18047]
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c (__ieee754_atanhl): Use
	0x1p-56L as threshold for just returning the argument.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c (__ieee754_atanhl): Use
	0x1p-32L as threshold for just returning the argument.
	* math/auto-libm-test-in: Add more tests of atanh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulp: Likewise.

2015-02-27  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/bcopy.c (bcopy): Call memmove for performance.

2015-02-27  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/bzero.c (__bzero): Call memset for performance.

2015-02-27  John David Anglin  <dave.anglin@bell.net>

	[BZ #18068]
	* sysdeps/unix/sysv/linux/hppa/bits/fcntl.h (__O_SYNC): Change
	to 00100000.

2015-02-27  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/k_standard.c (CSTR): Add comment.

2015-02-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/k_standard.c (CSTR): New macro.
	(__kernel_standard): Use CSTR macro when setting exc.name.
	* sysdeps/ieee754/Makefile [$(subdir) = math]
	(CFLAGS-k_standard.c): Remove variable.

	* sysdeps/ieee754/dbl-64/e_j0.c (pzero): Change last case for
	setting p and q from "else if" to "else".
	(qzero): Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c (pone): Likewise.
	(qone): Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c (pzerof): Likewise.
	(qzerof): Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c (ponef): Likewise.
	(qonef): Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c (pzero): Likewise.
	(qzero): Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c (pone): Likewise.
	(qone): Likewise.

	[BZ #18038]
	[BZ #18039]
	* sysdeps/ieee754/ldbl-128/e_acosl.c (__ieee754_acosl): Only
	return pi/2 for arguments below 0x1p-113L.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c (__ieee754_acosl): Only
	return pi/2 for arguments below 0x1p-106L.
	* math/auto-libm-test-in: Add more tests of acos.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16351]
	* sysdeps/i386/fpu/e_asin.S (dbl_min): New object.
	(MO): New macro.
	(__ieee754_asin): Force underflow exception for results with small
	absolute value.
	* sysdeps/i386/fpu/e_asinf.S (flt_min): New object.
	(MO): New macro.
	(__ieee754_asinf): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/dbl-64/e_asin.c: Include <float.h> and <math.h>.
	(__ieee754_asin): Force underflow exception for results with small
	absolute value.
	* sysdeps/ieee754/flt-32/e_asinf.c: Include <float.h>.
	(__ieee754_asinf): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Include <float.h>.
	(__ieee754_asinl): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Include <float.h>.
	(__ieee754_asinl): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Include <float.h>.
	(__ieee754_asinl): Force underflow exception for results with
	small absolute value.
	* sysdeps/x86_64/fpu/multiarch/e_asin.c [HAVE_FMA4_SUPPORT]:
	Include <math.h>.
	* math/auto-libm-test-in: Do not mark underflow exceptions as
	possibly missing for bug 16351.
	* math/auto-libm-test-out: Regenerated.

	[BZ #18030]
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Adjust exponent
	of power of 2 down when low part has opposite sign.
	* math/libm-test.inc (logb_test_data): Add more tests.

2015-02-26  Andreas Schwab  <schwab@suse.de>

	[BZ #18032]
	* posix/fnmatch_loop.c (FCT): Remove extra increment when skipping
	over collating symbol inside a bracket expression.  Minor cleanup.
	* posix/tst-fnmatch3.c (do_test): Add test case.

2015-02-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18029]
	* sysdeps/ieee754/ldbl-128ibm/e_ilogbl.c (__ieee754_ilogbl):
	Adjust exponent of power of 2 down when low part has opposite
	sign.
	* math/libm-test.inc (ilogb_test_data): Add more tests.

2015-02-26  Alexandre Oliva  <aoliva@redhat.com>

	[BZ #15969]
	* locale/findlocale.c (_nl_find_locale): Fix constness error in
	the previous change.

	[BZ #15969]
	* locale/findlocale.c (_nl_find_locale): Retry archive search
	after alias expansion.

2015-02-25  Roland McGrath  <roland@hack.frob.com>

	* iconv/tst-iconv3.c (main): Converted to ...
	(do_test): ... this.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.

	* iconv/tst-iconv5.c (testcode, number): Make variables static const.
	(convert): Make function static.
	(test_unalign): Likewise.  Add const to argument pointee types.
	(main): Replace with static function do_test.
	Print "Succeeded." only if RET is zero.
	(TEST_FUNCTION): New macro.
	Include test-skeleton.c.

	* iconv/gconv_conf.c (__gconv_get_path): Don't crash if __getcwd
	returns a null pointer.

2015-02-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/memmove-ppc64.c: Define memcpy
	to __memcpy_ppc only for static builds.

2015-02-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18020]
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c (__asinhl): Use 2**56 and
	2**-56 not 2**28 and 2**-29 as thresholds for simpler formulas.
	* math/auto-libm-test-in: Add more tests of asinh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-02-25  Cong Wang  <xiyou.wangcong@gmail.com>

	[BZ #15850]
	* inet/netinet/in.h [!__USE_KERNEL_IPV6_DEFS]: Put in6_pktinfo
	and ip6_mtuinfo definitions here.
	* sysdeps/unix/sysv/linux/bits/in.h [_UAPI_IPV6_H]: Wrap code
	in this define too.  Update comment.

2015-02-24  Benno Schulenberg  <bensberg@justemail.net>

	* elf/sprof.c (load_shobj): Tweak error message to match others.

2015-02-24  Kevin Easton  <kevin@guarana.org>

	[BZ #16145] (partial fix)
	* time/tzset.c (__tz_convert): Unlock tzset_lock earlier
	to reduce lock contention.

2015-02-24  Miroslav Lichvar  <mlichvar@redhat.com>

	* sysdeps/unix/sysv/linux/bits/timex.h: Update version.
	(struct timex): Update time comment.
	(ADJ_SETOFFSET): Define.

2015-02-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #18019]
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c (__ieee754_acoshl): Use
	2**56 not 2**28 as threshold for log (2x) formula.
	* math/auto-libm-test-in: Add more tests of acosh.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2015-02-24  Mike Frysinger  <vapier@gentoo.org>

	* include/alloca.h [_STACK_GROWS_DOWN] (extend_alloca): Add
	parenthesis around the buf assignment.
	[_STACK_GROWS_UP] (extend_alloca): Add a char* cast.

2015-02-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16783]
	* sysdeps/i386/fpu/e_scalb.S (__ieee754_scalb): Do not handle
	arguments (NaN, -Inf) the same as (+/-Inf, -Inf).
	* sysdeps/i386/fpu/e_scalbf.S (__ieee754_scalbf): Likewise.
	* sysdeps/i386/fpu/e_scalbl.S (__ieee754_scalbl): Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S (__ieee754_scalbl): Likewise.
	* math/libm-test.inc (scalb_test_data): Add more tests.

2015-02-24  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #17916]
	* libio/fileops.c (_IO_new_file_fopen): Limit stack use
	* libio/tst-fopenloc.c (do_test, do_bz17916): Add a large ccs= test

2015-02-24  Eric Rannaud  <e@nanocritical.com>

	[BZ #17523]
	* io/fcntl.h (__OPEN_NEEDS_MODE): New macro.
	* io/bits/fcntl2.h (open): Use it.
	(openat): Likewise.
	* io/open.c (__libc_open): Likewise.
	* io/open64.c (__libc_open64): Likewise.
	* io/open64_2.c (__open64_2): Likewise.
	* io/open_2.c (__open_2): Likewise.
	* io/openat.c (__openat): Likewise.
	* io/openat64.c (__openat64): Likewise.
	* io/openat64_2.c (__openat64_2): Likewise.
	* io/openat_2.c (__openat_2): Likewise.
	* sysdeps/mach/hurd/open.c (__libc_open): Likewise.
	* sysdeps/mach/hurd/openat.c (__openat): Likewise.
	* sysdeps/posix/open64.c (__libc_open64): Likewise.
	* sysdeps/unix/sysv/linux/dl-openat64.c (openat64): Likewise.
	* sysdeps/unix/sysv/linux/generic/open.c (__libc_open): Likewise.
	(__open_nocancel): Likewise.
	* sysdeps/unix/sysv/linux/generic/open64.c (__libc_open64): Likewise.
	* sysdeps/unix/sysv/linux/open64.c (__libc_open64): Likewise.
	* sysdeps/unix/sysv/linux/openat.c (__OPENAT): Likewise.

2015-02-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14841]
	* resolv/gethnamaddr.c (getanswer): Skip logging if
	RES_USE_DNSSEC is set.
	* resolv/nss_dns/dns-host.c (getanswer_r): Likewise.

2015-02-24  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/hppa/sysdep.h: Include dl-sysdep.h.

2015-02-23  Alexandre Oliva <aoliva@redhat.com>

	* include/stdc-predef.h (__STDC_ISO_10646__): Update to
	201304L, for Unicode 7.

2015-02-23  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17836]
	* csu/Makefile (extra-objs): Add gmon-start.o if not builing
	shared library.  Add gmon-start.os otherwise.
	($(objpfx)g$(start-installed-name)): Use $(objpfx)S%
	$(objpfx)gmon-start.os if builing shared library.
	($(objpfx)g$(static-start-installed-name)): Likewise.

2015-02-23  Andreas Schwab  <schwab@suse.de>

	* elf/Makefile (CFLAGS-tst-audit2.c): Define.

2015-02-22  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #17269]
	* libio/wstrops.c (_IO_wstr_overflow): Guard against integer overflow
	(enlarge_userbuf): Likewise.

2015-02-22  Chung-Lin Tang  <cltang@codesourcery.com>

	* libio/tst-memstream2.c (TIMEOUT): Define as 100.
	* math/atest-exp.c (TIMEOUT): Adjust to 200.
	* math/atest-exp2.c (TIMEOUT): Adjust to 300.
	* math/atest-sincos.c (TIMEOUT): Adjust to 600.

2015-02-20  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/op-common.h (_FP_FROM_INT): Wrap call to abort in
	expression inside statement expression.

2015-02-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: Include
	<sysdeps/nptl/lowlevellock.h> and remove macros and
	functions that are now defined there.
	(SYS_futex): Remove.
	(lll_compare_and_swap): Remove.
	* sysdeps/s390/bits/atomic.h (atomic_exchange_acq): Define.

2015-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17999]
	* dirent/scandir.c [!SCANDIR] (SCANDIRAT): Define to __scandirat
	instead of scandirat.
	* dirent/scandirat.c [!SCANDIRAT] (SCANDIRAT): Likewise.
	[!SCANDIRAT] (SCANDIRAT_WEAK_ALIAS): Define.
	[SCANDIRAT_WEAK_ALIAS] (scandirat): Define as weak alias of
	__scandirat.
	* include/dirent.h (scandirat): Do not use libc_hidden_proto.
	(__scandirat): Declare.  Use libc_hidden_proto.
	* conform/Makefile (test-xfail-POSIX2008/dirent.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K8/dirent.h/linknamespace): Likewise.

2015-02-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15319]
	* sysdeps/i386/fpu/e_atan2.S (dbl_min): New object.
	(MO): New macro.
	(__ieee754_atan2): For results with small absolute value, force
	underflow exception and remove excess range and precision from
	return value.
	* sysdeps/i386/fpu/e_atan2f.S (flt_min): New object.
	(MO): New macro.
	(__ieee754_atan2f): For results with small absolute value, force
	underflow exception and remove excess range and precision from
	return value.
	* sysdeps/i386/fpu/s_atan.S (dbl_min): New object.
	(MO): New macro.
	(__atan): For results with small absolute value, force underflow
	exception and remove excess range and precision from return value.
	* sysdeps/i386/fpu/s_atanf.S (flt_min): New object.
	(MO): New macro.
	(__atanf): For results with small absolute value, force underflow
	exception and remove excess range and precision from return value.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Include <float.h> and
	<math.h>.
	(__ieee754_atan2): Force underflow exception for results with
	small absolute value.
	* sysdeps/ieee754/dbl-64/s_atan.c: Include <float.h> and
	<math_private.h>.
	(atan): Force underflow exception for results with small absolute
	value.
	* sysdeps/ieee754/flt-32/s_atanf.c: Include <float.h>.
	(__atanf): Force underflow exception for results with small
	absolute value.
	* sysdeps/ieee754/ldbl-128/s_atanl.c: Include <float.h> and
	<math.h>.
	(__atanl): Force underflow exception for results with small
	absolute value.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c: Include <float.h>.
	(__atanl): Force underflow exception for results with small
	absolute value.
	* sysdeps/x86/fpu/bits/mathinline.h
	[!__SSE2_MATH__ && !__x86_64__ && __LIBC_INTERNAL_MATH_INLINES]
	(__ieee754_atan2): Only define inline for long double.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c
	[HAVE_FMA4_SUPPORT || HAVE_AVX_SUPPORT]: Include <math.h>.
	* math/auto-libm-test-in: Do not mark underflow exceptions as
	possibly missing for bug 15319.  Add more tests of atan2.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (casin_test_data): Do not mark underflow
	exceptions as possibly missing for bug 15319.
	(casinh_test_data): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2015-02-18  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/unix/sysv/linux/mips/bits/endian.h: Remove.
	* sysdeps/mips/bits/endian.h: Fix comments.

2015-02-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17996]
	* include/search.h (hcreate_r): Don't use libc_hidden_proto.
	(hdestroy_r): Likewise.
	(hsearch_r): Likewise.
	(__hcreate_r): Declare and use libc_hidden_proto.
	(__hdestroy_r): Likewise.
	(__hsearch_r): Likewise.
	* misc/hsearch.c (hsearch): Call __hsearch_r instead of hsearch_r.
	(hcreate): Call __hcreate_r instead of hcreate_r.
	(__hdestroy): Call __hdestroy_r instead of hdestroy_r.
	* misc/hsearch_r.c (hcreate_r): Rename to __hcreate_r and define
	as weak alias of __hcreate_r.
	(hdestroy_r): Rename to __hdestroy_r and define as weak alias of
	__hdestroy_r.
	(hsearch_r): Rename to __hsearch_r and define as weak alias of
	__hsearch_r.
	* conform/Makefile (test-xfail-XPG3/search.h/linknamespace):
	Remove variable.
	(test-xfail-XPG4/search.h/linknamespace): Likewise.
	(test-xfail-UNIX98/search.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/search.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/search.h/linknamespace): Likewise.

2015-02-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/malloc.c (__libc_malloc): Consolidate arena_lookup and
	arena_lock into a single arena_get.

2015-02-17  Carlos O'Donell  <carlos@redhat.com>

	* dl-reloc.c: Inlucde libc-internal.h.
	(_dl_try_allocate_static_tls): Call ALIGN_UP.
	(_dl_relocate_object): Call ALIGN_UP, ALIGN_DOWN, and PTR_ALIGN_DOWN.
	(_dl_protect_relro): Call ALIGN_UP and ALIGN_DOWN.
	* malloc/arena.c (new_heap): Use pagesize. Call ALIGN_UP.
	(grow_heap): Likewise.
	* malloc/malloc.c: Include libc-internal.h.
	(do_check_malloc): Call powerof2.
	(sysmalloc): Use pagesize. Call ALIGN_UP.
	(systrim): Use pagesize.
	(mremap_chunk): Use pagesize. Call ALIGN_UP.
	(__libc_valloc): Use pagesize.
	(__libc_pvalloc): Use pagesize. Call ALIGN_UP.

2015-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17991]
	* include/sys/resource.h (__getrlimit64): Declare.  Use
	libc_hidden_proto.
	* resource/getrlimit64.c (getrlimit64): Rename to __getrlimit64
	and define as weak alias of __getrlimit64.  Use libc_hidden_weak.
	* sysdeps/posix/spawni.c (__spawni): Call __getrlimit64 instead of
	getrlimit64.
	* sysdeps/unix/sysv/linux/getrlimit64.c (getrlimit64): Rename to
	__getrlimit64.
	[!getrlimit64] (getrlimit64): Define as weak alias of
	__getrlimit64.  Use libc_hidden_weak.
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c (getrlimit64): Define
	using __getrlimit64 not __new_getrlimit64.
	(__GI_getrlimit64): Likewise.
	* sysdeps/unix/sysv/linux/mips/getrlimit64.c (getrlimit64):
	Likewise.
	(__GI_getrlimit64): Likewise.
	(__old_getrlimit64): Use __getrlimit64 not __new_getrlimit64.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/syscalls.list
	(getrlimit): Add __getrlimit64 alias.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list (getrlimit):
	Likewise.
	* conform/Makefile (test-xfail-XOPEN2K/spawn.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX2008/spawn.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/spawn.h/linknamespace): Likewise.

2015-02-17  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* libio/fileops.c: Add missing sys/mman.h
	* libio/iopopen.c: Add missing fcntl.h, remove redundant unistd.h

2015-02-17  Joseph Myers  <joseph@codesourcery.com>

	* manual/math.texi (Errors in Math Functions): Clarify goals
	regarding inexact and underflow exceptions.

2015-02-17  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/memcpy.S: Move R6 PREFETCH_STORE_HINT check.
	* sysdeps/mips/memset.S: Ditto.

2015-02-17  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/bits/endian.h (__MIPSEL): Use #ifdef instead of #if.

2015-02-17  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/pt-longjmp.c
	(__v1longjmp): Remove versioned symbol.
	(__v1siglongjmp): Remove alias and versioned symbol.
	(__v2longjmp): Use DEFINE_LONGJMP instead of alias.
	(__v2siglongjmp): Likewise.

2015-02-16  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h: Remove file.

2015-02-16  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/getpagesize.c: Delete.

2015-02-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17987]
	* sysdeps/ieee754/dbl-64/s_remquo.c (__remquo): Ensure sign of
	zero result does not depend on the sign resulting from
	subtraction.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c (__remquo):
	Likewise.
	* sysdeps/ieee754/flt-32/s_remquof.c (__remquof): Likewise.
	* sysdeps/ieee754/ldbl-128/s_remquol.c (__remquol): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_remquol.c (__remquol): Likewise.
	* sysdeps/ieee754/ldbl-96/s_remquol.c (__remquol): Likewise.
	* math/libm-test.inc (remquo_test_data): Add more tests.

2015-02-16  Paul Eggert  <eggert@cs.ucla.edu>

	* manual/time.texi (TZ Variable): glibc no longer comes with tzdata.
	Problem reported by J William Piggott.

2015-02-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17978]
	* sysdeps/ieee754/dbl-64/s_remquo.c (__remquo): Do not form
	products 4 * y and 2 * y where those would overflow.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c (__remquo):
	Likewise.
	* sysdeps/ieee754/flt-32/s_remquof.c (__remquof): Likewise.
	* sysdeps/ieee754/ldbl-128/s_remquol.c (__remquol): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_remquol.c (__remquol): Likewise.
	* sysdeps/ieee754/ldbl-96/s_remquol.c (__remquol): Likewise.
	* math/libm-test.inc (remquo_test_data): Add more tests.

	* sysdeps/mips/sgidefs.h [!_ABIO64] (_ABIO64): New macro.

	* sysdeps/mips/memcpy.S [_COMPILING_NEWLIB]: Change condition to
	[defined _COMPILING_NEWLIB].
	* sysdeps/mips/memset.S [_COMPILING_NEWLIB]: Likewise.
	* sysdeps/mips/strcmp.S [_COMPILING_NEWLIB]: Likewise.

	* sysdeps/mips/sys/asm.h [__mips_isa_rev < 6]: Change condition to
	[!defined __mips_isa_rev || __mips_isa_rev < 6].

2015-02-16  Torvald Riegel  <triegel@redhat.com>

	* nptl/tst-cond25.c (cleanup): Explicitly check that the mutex is
	acquired.

2015-02-15  Matthew Fortune <Matthew.Fortune@imgtec.com>

	[BZ #17792]
	* sysdeps/unix/sysv/linux/ia64/sys/user.h (NBPG): Remove.
	(UPAGES, HOST_TEXT_START_ADDR, HOST_DATA_START_ADDR,
	HOST_STACK_END_ADDR): Likewise.

2015-02-13  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/bits/endian.h (__MIPSEB): Use #ifdef instead of #if.
	* sysdeps/mips/memcpy.S (__MIPSEB): Ditto.
	* sysdeps/mips/memset.S (__MIPSEB): Ditto.

2015-02-13  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/c++-types.data: New file.
	* sysdeps/generic/ld.abilist: New file.
	* sysdeps/generic/libBrokenLocale.abilist: New file.
	* sysdeps/generic/libanl.abilist: New file.
	* sysdeps/generic/libc.abilist: New file.
	* sysdeps/generic/libcrypt.abilist: New file.
	* sysdeps/generic/libdl.abilist: New file.
	* sysdeps/generic/libm.abilist: New file.
	* sysdeps/generic/libpthread.abilist: New file.
	* sysdeps/generic/libresolv.abilist: New file.
	* sysdeps/generic/librt.abilist: New file.

2015-02-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17569]
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c (__remquo):
	Compute absolute value of x as modified by fmod, not original
	value of x.
	* math/libm-test.inc (RUN_TEST_ffI_f1): Rename to
	RUN_TEST_ffI_f1_mod8.  Check extra return value mod 8.
	(RUN_TEST_LOOP_ffI_f1): Rename to RUN_TEST_LOOP_ffI_f1_mod8.  Call
	RUN_TEST_ffI_f1_mod8.
	(remquo_test_data): Add more tests.

2015-02-13  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/init_array/pt-crti.S: New file.

2015-02-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17967]
	* sysdeps/powerpc/fpu/e_sqrtf.c (__slow_ieee754_sqrtf): Use
	__builtin_fmaf instead of relying on contraction of a * b + c.

2015-02-12  J William Piggott  <elseifthen@gmx.com>

	[BZ #17969]
	* manual/time.texi: correct the zoneinfo path in the TZ Variable
	node.

2015-02-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17964]
	* sysdeps/powerpc/fpu/e_sqrt.c (__slow_ieee754_sqrt): Use
	__builtin_fma instead of relying on contraction of a * b + c.

2015-02-12  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig (ASFLAGS): Add -Werror=undef.
	* sysdeps/arm/Versions (libc: GLIBC_2.19): New (empty) version set.
	* sysdeps/unix/make-syscalls.sh: Always emit #define's for
	SYSCALL_CANCELLABLE, SYSCALL_NOERRNO, SYSCALL_ERRVAL, to 1 or 0.

	* Makeconfig (after-link): New variable.
	(+link-pie, +link-pie-tests): Use it.
	(+link-static, +link-static-tests): Likewise.
	(+link, +link-tests): Likewise.
	* Makerules (build-module, build-module-asneeded): Likewise.
	(lib%.so, $(common-objpfx)libc.so, $(common-objpfx)linkobj/libc.so):
	Likewise.
	* elf/Makefile ($(objpfx)ld.so): Likewise.

2015-02-12  R√ºdiger Sonderfeld  <ruediger@c-plusplus.net>

	[BZ #17965]
	* manual/time.texi (Elapsed Time): tv_sec is of type time_t in
	both struct timeval and struct timespec.

2015-02-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16560]
	* math/e_exp2l.c [LDBL_MANT_DIG == 106] (LDBL_EPSILON): Undefine
	and redefine.
	(__ieee754_exp2l): Do not multiply small fractional parts by
	M_LN2l.
	* sysdeps/i386/fpu/e_exp2l.S (__ieee754_exp2l): Just add 1 to
	small argument.
	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Likewise.
	* sysdeps/ieee754/flt-32/e_exp2f.c (__ieee754_exp2f): Likewise.
	* sysdeps/x86_64/fpu/e_exp2l.S (__ieee754_exp2l): Likewise.
	* math/auto-libm-test-in: Add more tests of exp2.
	* math/auto-libm-test-out: Regenerated.

2015-02-12  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strncpy.S (strncpy): Optimize
	unaligned path.

2015-02-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/htm.h [TABORT]: Fix encoding for
	little endian.

2015-02-12  Andreas Schwab  <schwab@suse.de>

	[BZ #15790]
	* nptl/pthread_mutexattr_gettype.c (pthread_mutexattr_gettype):
	Filter out elision flags from value returned in kind.
	* nptl/Makefile (tests): Add tst-pthread-mutexattr.
	* nptl/tst-pthread-mutexattr.c: New file.

2015-02-11  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* abi-tags: Revert ae20c9a: rename back gnu into gnu-gnu.
	* configure.ac, configure: Revert ba90e05: modify gnu-* host_os back
	into gnu-gnu, and update comment to refer to abi-tags.

2015-02-11  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15467]
	* sysdeps/ieee754/dbl-64/s_sincos.c: Include <errno.h>.
	(__sincos): Set errno to EDOM for infinite argument.
	* sysdeps/ieee754/flt-32/s_sincosf.c: Include <errno.h>.
	(SINCOSF_FUNC): Set errno to EDOM for infinite argument.
	* sysdeps/ieee754/ldbl-128/s_sincosl.c: Include <errno.h>.
	(__sincosl): Set errno to EDOM for infinite argument.
	* sysdeps/ieee754/ldbl-128ibm/s_sincosl.c: Include <errno.h>.
	(__sincosl): Set errno to EDOM for infinite argument.
	* sysdeps/ieee754/ldbl-96/s_sincosl.c: Include <errno.h>.
	(__sincosl): Set errno to EDOM for infinite argument.
	* math/libm-test.inc (sincos_test_data): Test errno setting.

2015-02-11  Leonhard Holz  <leonhard.holz@web.de>

	* string/strxfrm_l.c: Remove #define STRCMP.
	* string/strcoll_l.c: Remove #define STRLEN.
	* wcsmbs/wcsxfrm_l.c: Remove #define STRCMP.
	* wcsmbs/wcscoll_l.c: Remove #define STRLEN.

2015-02-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/soft-fp/sfp-machine.h: Move to ....
	* sysdeps/mips/mips32/sfp-machine.h: ... here.
	* sysdeps/mips/mips64/soft-fp/Makefile: Move to ....
	* sysdeps/mips/mips64/Makefile: ... here.
	* sysdeps/mips/mips64/soft-fp/e_sqrtl.c: Move to ....
	* sysdeps/mips/mips64/e_sqrtl.c: ... here.
	* sysdeps/mips/mips64/soft-fp/sfp-machine.h: Move to ....
	* sysdeps/mips/mips64/sfp-machine.h: ... here.
	* sysdeps/mips/mips32/Implies: Remove mips/soft-fp.
	* sysdeps/mips/mips64/n32/Implies: Remove mips/mips64/soft-fp.
	* sysdeps/mips/mips64/n64/Implies: Likewise.

2015-02-10  Roland McGrath  <roland@hack.frob.com>

	* math/test-snan.c: Drop unnecessary #include's of <stdlib.h>,
	<sys/time.h>, <string.h>, and <errno.h>.
	(dest_offset, dest_address, value, zero): Remove unused variables.
	(ldouble): Remove typedef.
	(myFPsighandler): Use simple handler signature, not SA_SIGINFO
	signature.  Pass 1 to siglongjmp rather than 0 (which is converted to
	1).  Fix code style.
	(set_sigaction_FP, remove_sigaction_FP): Functions removed.
	(check): Function removed.
	(CHECK): New macro.
	(TEST_FUNC): Fix code style.  Use CHECK macro rather than repeating
	boilerplate feclearexcept + feenableexcept + sigsetjmp code.
	Don't call set_sigaction_FP and remove_sigaction_FP here.
	(ldouble_test): Just use 'long double' as macro argument, no need for
	the 'ldouble' typedef.
	(do_test): Set up SIGFPE handler at start, using plain signal rather
	than sigaction.  Fix code style.

2015-02-10  Evangelos Foutras  <evangelos@foutrelis.com>

	[BZ #17949]
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Fix position of
	jump label.

2015-02-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/configure.ac: Remove R_PPC_REL16 check.
	* sysdeps/powerpc/powerpc32/configure: Regenerated.

	* sysdeps/powerpc/configure.ac: Remove file.
	* sysdeps/powerpc/configure: Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile
	[sysdep_routines]: Remove wordcopy-power6 object.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove-power7.c
	(__memmove_power7): Use local call for wordcopy and memcpy symbols.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy-ppc32.c
	(__memmove_ppc32): Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy-power6.c: Remove
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy.c: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-ppc64.c [IS_IN (libc)]:
	Remove preprocessor.

	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile
	[sysdep_routines]: Remove wide chars objects.
	[wcsmbs]: New rule for wide char objects.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove wordcopy-power6 obejct.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-ppc64.c (__memmove_ppc):
	Use local call for wordcopy and memcpy symbols.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-power6.c: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-ppc64.c: Add default
	implementation for loader.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy.c: Remove file.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove wordcopy-power7 object.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-power7.c: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy.c
	(_wordcopy_fwd_aligned): Remove POWER7 specialization.
	(_wordcopy_fwd_dest_aligned): Likewise.
	(_wordcopy_bwd_aligned): Likewise.
	(_wordcopy_bwd_dest_aligned): Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/bcopy-ppc64.c (__bcopy_ppc):
	Rewrite to call __memmove_ppc instead of include default
	implementation.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove wide chars objects.
	[wcsmbs]: New rule for wide char objects.

2015-02-09  Andreas Schwab  <schwab@suse.de>

	[BZ #17912]
	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (__O_TMPFILE): Define
	in terms of __O_DIRECTORY.

2015-02-08  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* time/getdate.c: Include <stdbool.h>.
	* sysdeps/gnu/unwind-resume.c [!PTR_MANGLE] (__libgcc_s_init): Do not
	call PTR_MANGLE.
	[!PTR_DEMANGLE] (_Unwind_Resume, __gcc_personality_v0): Do not call
	PTR_DEMANGLE.

2015-02-07  Paul Eggert  <eggert@cs.ucla.edu>

	Add ersatz _Static_assert on older C hosts
	* misc/sys/cdefs.h (_Static_assert): Define a substitute, if on a
	pre-C11 C platform that is not known to support _Static_assert.

2015-02-07  Richard Braun  <rbraun@sceen.net>

	* hurd/hurd/signal.h (_hurd_critical_section_lock): Don't unlock
	sigstate.
	* sysdeps/mach/hurd/mmap.c (__mmap): Also handle PROT_NONE case.

2015-02-07  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/pthread/aio_misc.c [!AIO_PRIO_DELTA_MAX]: Do not check
	priority against unexistent AIO_PRIO_DELTA_MAX.
	* misc/chflags.c (chflags): Set flags parameter type to unsigned long
	instead of int.
	* misc/fchflags.c (fchflags): Likewise.
	* sysdeps/mach/hurd/chflags.c (chflags): Likewise.
	* sysdeps/mach/hurd/fchflags.c (fchflags): Likewise.
	* sysdeps/mach/hurd/bits/stat.h [__USE_MISC] (UF_SETTABLE, UF_NODUMP,
	UF_IMMUTABLE, UF_APPEND, UF_OPAQUE, UF_NOUNLINK, SF_SETTABLE,
	SF_ARCHIVED, SF_IMMUTABLE, SF_APPEND, SF_NOUNLINK, SF_SNAPSHOT):
	Declare macros.
	[__USE_MISC] (chflags, fchflags): Declare functions.
	* hurd/hurdselect.c (_hurd_select): In the poll case, do not return
	EINVAL when nfds is greater than FD_SETSIZE.
	* hurd/hurd/resource.h (MACH_PRIORITY_TO_NICE,
	NICE_TO_MACH_PRIORITY): Align nice levels on Mach priorities from 5 to
	45.
	* hurd/hurdselect.c (_hurd_select): Pass MACH_RCV_INTERRUPT to
	__mach_msg.  If that returns MACH_RCV_INTERRUPTED, set ERR to EINTR.
	* hurd/hurdselect.c (_hurd_select): Remove unreachable check for
	MACH_RCV_TIMED_OUT.
	* hurd/hurd/signal.h (_hurd_self_sigstate,
	_hurd_critical_section_lock, _hurd_critical_section_unlock):
	Explicit casts from void *.
	* sysdeps/mach/hurd/tls.h: Include <stdint.h> and <sysdep.h>.
	* abi-tags: Rename gnu-gnu os into gnu.

	[BZ #4719]
	* sysdeps/mach/hurd/bits/ioctls.h (_IOT__IOTBASE_long, _IOT_char,
	_IOT_short, _IOT_int, _IOT_long, _IOT__IOTBASE_int8_t,
	_IOT__IOTBASE_uint8_t, _IOT__IOTBASE_int16_t, _IOT__IOTBASE_uint16_t,
	_IOT__IOTBASE_int32_t, _IOT__IOTBASE_uint32_t, _IOT__IOTBASE_int64_t,
	_IOT__IOTBASE_uint64_t, _IOT__IOTBASE_size_t, _IOT__IOTBASE_ssize_t,
	_IOTBASE_unsigned, _IOTBASE_signed): Define macros.

	[BZ #17944]
	* hurd/hurdsocket.h: New file, defines _hurd_sun_path_dupa which
	duplicates ADDR->sun_path with sockaddr LEN limitation.
	* sysdeps/mach/hurd/connect.c: Include <string.h>
	(__connect): Give result of _hurd_sun_path_dupa to name lookup.
	* sysdeps/mach/hurd/sendmsg.c: Likewise.
	* sysdeps/mach/hurd/sendto.c: Likewise.
	* sysdeps/mach/hurd/bind.c: Call _hurd_sun_path_dupa instead of
	implementing it by hand.

2015-02-06  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/sysdep.h [!PROF] [ARCH_HAS_T2 && !PIC] (LDR_GLOBAL):
	Use sfi_breg on ldr.
	[!PROF] [ARCH_HAS_T2 && PIC && ARM_PCREL_MOVW_OK] (LDR_GLOBAL):
	Likewise.

	* nptl/tst-cancel25.c (tf2): Test for SIGCANCEL being blocked only if
	it's defined.
	* nptl/tst-signal7.c (do_test): Test SIGCANCEL only if it's defined.
	Test SIGSETXID only if it's defined.

	* nptl/tst-locale1.c (useless): Use SIGRTMIN only if it's defined.

	* rt/tst-timer2.c (do_test): Don't initialize SIGEV.sigev_signo, which
	will not be used.  Use NULL rather than 0 for .sigev_notify_attributes.

	* nptl/tst-align2.c: Moved ...
	* sysdeps/unix/sysv/linux/tst-align-clone.c: ... here.
	* nptl/Makefile (tests): Remove tst-align2.
	* sysdeps/unix/sysv/linux/Makefile
	[$(subdir) = nptl] (tests): Add tst-align-clone.
	* nptl/tst-getpid1.c: Moved ...
	* sysdeps/unix/sysv/linux/tst-getpid1.c: ... here.
	* nptl/tst-getpid2.c: Moved ...
	* sysdeps/unix/sysv/linux/tst-getpid2.c: ... here.
	* nptl/Makefile (tests): Move tst-getpid1 and tst-getpid2 ...
	* sysdeps/unix/sysv/linux/Makefile
	[$(subdir) = nptl] (tests): ... here.
	* nptl/Makefile (tst-getpid2-ENV): Move variable ...
	* sysdeps/unix/sysv/linux/Makefile
	[$(subdir) = nptl] (tst-getpid2-ENV): ... here.

	* nptl/tst-cleanup2.c (do_test): Use signal rather than sigaction.
	Drop trailing \n from perror argument.  Use return rather than exit.

	* nptl/tst-cancel20.c (do_test): Conditionalize SA_SIGINFO-using tests
	on [SA_SIGINFO].
	* nptl/tst-cancel21.c (do_test): Likewise.
	* debug/tst-backtrace6.c: Include <signal.h> first thing.
	Conditionalize inclusion of tst-backtrace5.c on [SA_SIGINFO].
	[!SA_SIGINFO]: Make it a stub test.

	* misc/tst-pselect.c (do_test): Don't set SA_NOCLDWAIT in sa_flags for
	SIGCHLD; it's redundant	with SIG_IGN as sa_handler.

	* posix/tst-getlogin.c: Move to ...
	* login/tst-getlogin.c: ... here.
	* posix/Makefile (tests): Move tst-getlogin to ...
	* login/Makefile (tests): ... here.

	* libio/tst-atime.c (do_test): Move local variables SV and E
	inside [ST_NOATIME] conditional.

	* dirent/tst-fdopendir.c (O_NOATIME): If not defined, #define to 0.

	* nptl/tst-kill5.c (do_test): Use INT_MAX rather than SIGRTMAX + 10.

	* nptl/tst-join5.c: Drop #include <sys/syscall.h>.
	(wait_code): New function replaces macro.
	Call nanosleep rather than syscall.

	* nptl/pt-system.c: Rewritten.  Put everything under
	[SHLIB_COMPAT (libpthread, GLIBC_2_0, GLIBC_2_22)].
	Use IFUNC to redirect when possible.

	* nptl/pt-longjmp.c: Rewritten.  Put everything under
	[SHLIB_COMPAT (libpthread, GLIBC_2_0, GLIBC_2_22)].
	Use IFUNC to redirect when possible.

	* nptl/pt-fork.c: Rewritten.  Put everything under
	[SHLIB_COMPAT (libpthread, GLIBC_2_0, GLIBC_2_22)].
	Use IFUNC to redirect when possible.
	* nptl/Versions (libpthread: GLIBC_2.22): New (empty) version set.

	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S: Remove all
	code under [!__ASSUME_FUTEX_CLOCK_REALTIME], since that is defined
	unconditionally nowadays.  This included the only reference to
	__vdso_clock_gettime that appears outside libc proper.
	* sysdeps/unix/sysv/linux/x86_64/Versions (libc: GLIBC_PRIVATE):
	Remove version set (containing only __vdso_clock_gettime).
	* sysdeps/unix/sysv/linux/x86/libc-vdso.h (__vdso_clock_gettime):
	Add attribute_hidden.
	* sysdeps/unix/sysv/linux/i386/init-first.c (__vdso_clock_gettime):
	Likewise.  Drop __attribute__ ((nocommon)), libc_hidden_proto, and
	libc_hidden_data_def.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/init-first.c: Likewise.

	* inet/Versions (libc: GLIBC_2.0): Move getrpcbyname, getrpcbyname_r,
	getrpcbynumber, getrpcbynumber_r, getrpcent, getrpcent_r, endrpcent,
	setrpcent, and getrpcport to ...
	* sunrpc/Versions (libc: GLIBC_2.0): ... here.
	* inet/Versions (libc: GLIBC_2.1.2): Move getrpcbyname_r,
	getrpcbynumber_r, and getrpcent_r to ...
	* sunrpc/Versions (libc: GLIBC_2.1.2): ... this new set.
	* inet/getrpcbyname.c: Moved ...
	* sunrpc/getrpcbyname.c: ... here.
	* inet/getrpcbyname_r.c: Moved ...
	* sunrpc/getrpcbyname_r.c: ... here.
	* inet/getrpcbynumber.c: Moved ...
	* sunrpc/getrpcbynumber.c: ... here.
	* inet/getrpcbynumber_r.c: Moved ...
	* sunrpc/getrpcbynumber_r.c: ... here.
	* inet/getrpcent.c: Moved ...
	* sunrpc/getrpcent.c: ... here.
	* inet/getrpcent_r.c: Moved ...
	* sunrpc/getrpcent_r.c: ... here.
	* inet/Makefile (routines): Move those to ...
	* sunrpc/Makefile (routines): ... here.
	* nss/Makefile (databases): Add key and rpc only if sunrpc appears in
	the $(subdirs) list.
	(CPPFLAGS-getent.c): New variable.  Pass -D option to set HAVE_SUNRPC
	to 0 or 1, indicating whether sunrpc appears in the $(subdirs) list.
	* nss/getent.c (print_rpc, rpc_keys): Conditionalize on [HAVE_SUNRPC].
	(databases): Conditionalize rpc entry on [HAVE_SUNRPC].

	* elf/Makefile (routines): Include $(all-dl-routines), not just
	$(dl-routines).
	(rtld-routines): Likewise.  Use = rather than :=.
	* sysdeps/aarch64/Makefile [$(subdir) = elf]
	(sysdep_routines, sysdep-rtld-routines): Don't add tlsdesc and
	dl-tlsdesc to these; sysdep-dl-routines alone is enough.
	* sysdeps/arm/Makefile: Likewise.
	* sysdeps/i386/Makefile: Likewise.
	* sysdeps/x86_64/Makefile: Likewise.
	* sysdeps/hppa/Makefile [$(subdir) = elf]
	(sysdep_routines, sysdep-rtld-routines): Don't add
	$(sysdep-dl-routines) to these.
	* sysdeps/ia64/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/ia64/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/Makefile [$(subdir) = elf]
	[$(build-shared) = yes] (sysdep_routines, sysdep-rtld-routines):
	Don't add dl-static to these; sysdep-dl-routines alone is enough.
	* sysdeps/unix/sysv/linux/m68k/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/mips/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/tile/Makefile: Likewise.
	* sysdeps/powerpc/Makefile [$(subdir) = elf]
	(sysdep_routines, sysdep-rtld-routines): Don't add dl-machine to
	these; sysdep-dl-routines alone is enough.

2015-02-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17932]
	* soft-fp/op-common.h (_FP_FMA): Set exponent of result in case
	where multiplication results in zero and third argument is finite
	and nonzero.
	* math/auto-libm-test-in: Add more tests of fma.
	* math/auto-libm-test-out: Regenerated.

	* soft-fp/op-common.h (_FP_CMP_CHECK_DENORM): New macro.
	(_FP_CMP_CHECK_FLUSH_ZERO): Likewise.
	(_FP_CMP): Use_FP_CMP_CHECK_DENORM and _FP_CMP_CHECK_FLUSH_ZERO.
	(_FP_CMP_EQ): Likewise.
	(_FP_CMP_UNORD): Use _FP_CMP_CHECK_DENORM.

	* soft-fp/op-common.h (FP_EXTEND): Rename to _FP_EXTEND_CNAN with
	extra argument CHECK_NAN.  Redefine as wrapper around
	_FP_EXTEND_CNAN.

2015-02-06  Carlos O'Donell  <carlos@systemhalted.org>

	* version.h (RELEASE): Set to "stable".
	(VERSION): Set to "2.21"
	* include/features.h (__GLIBC_MINOR__): Set to 21.

	* sysdeps/unix/sysv/linux/hppa/pthread.h: Sync with pthread.h.

2015-02-05  Paul Pluzhnikov  <ppluzhnikov@google.com>
	    Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #16618]
	* stdio-common/tst-sscanf.c (main): Test for buffer overflow.
	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Compute needed
	size in bytes. Store needed elements in wpmax. Use needed size
	in bytes for extend_alloca.

2015-02-05  Carlos O'Donell  <carlos@systemhalted.org>

	* manual/install.texi: Latest tested versions are GCC 4.9.2,
	binutls 2.25, and texinfo 5.2.
	* INSTALL: Regenerate.
	* sysdeps/nios2/configure: Regenerate.
	* sysdeps/unix/sysv/linux/nios2/configure: Regenerate.
	* manual/contrib.texi: Update.
	* po/be.po: Update.
	* po/bg.po: Update.
	* po/ca.po: Update.
	* po/cs.po: Update.
	* po/da.po: Update.
	* po/de.po: Update.
	* po/el.po: Update.
	* po/eo.po: Update.
	* po/es.po: Update.
	* po/fi.po: Update.
	* po/fr.po: Update.
	* po/gl.po: Update.
	* po/hr.po: Update.
	* po/hu.po: Update.
	* po/ia.po: Update.
	* po/id.po: Update.
	* po/it.po: Update.
	* po/ja.po: Update.
	* po/ko.po: Update.
	* po/lt.po: Update.
	* po/nb.po: Update.
	* po/nl.po: Update.
	* po/pl.po: Update.
	* po/pt_BR.po: Update.
	* po/ru.po: Update.
	* po/rw.po: Update.
	* po/sk.po: Update.
	* po/sl.po: Update.
	* po/sv.po: Update.
	* po/tr.po: Update.
	* po/uk.po: Update.
	* po/vi.po: Update.
	* po/zh_CN.po: Update.
	* po/zh_TW.po: Update.

	* sysdeps/hppa/Makefile (CFLAGS-dl-fptr.c): Add -Wno-error.
	* sysdeps/hppa/bits/setjmp.h: Union is named __jmp_buf_internal_tag.
	* sysdeps/hppa/dl-irel.h: Remove #warning.
	* sysdeps/hppa/entry.h: Provide prototype for
	__canonicalize_funcptr_for_compare and cast argument.
	* sysdeps/hppa/fpu/fegetexcept.c (fegetexcept): Add semicolon.
	* sysdeps/hppa/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/hppa/sotruss-lib.c: New file.
	* sysdeps/unix/sysv/linux/hppa/bits/atomic.h
	(atomic_compare_and_exchange_val_acq): Use __typeof__.
	(atomic_compare_and_exchange_bool_acq): Likewise.
	* sysdeps/unix/sysv/linux/hppa/mmap.c: Use weak alias.
	* sysdeps/unix/sysv/linux/hppa/pthread.h: Include pthread.h.

	* sysdeps/unix/sysv/linux/hppa/syscall.S: Delete file.
	* sysdeps/unix/sysv/linux/hppa/sysdep.c: Move syscall from here...
	* sysdeps/unix/sysv/linux/hppa/syscall.c: ... to here.

2015-02-05  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/nios2/machine-gmon.h (NIOS2_MCOUNT_CALL): Correct name of
	called function in non-PIC case.

2015-01-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/bits/atomic.h
	(__sparc32_atomic_do_unlock24): Put the memory barrier before the
	unlock not after it.
	(__v9_compare_and_exchange_val_32_acq): Use unions to avoid getting
	volatile register usage warnings from the compiler.

	* sysdeps/sparc/nptl/sem_init.c: Delete.
	* sysdeps/sparc/nptl/sem_post.c: Delete.
	* sysdeps/sparc/nptl/sem_timedwait.c: Delete.
	* sysdeps/sparc/nptl/sem_wait.c: Delete.
	* sysdeps/sparc/sparc32/sem_init.c: New file.
	* sysdeps/sparc/sparc32/sem_waitcommon.c: New file.
	* sysdeps/sparc/sparc32/sem_open.c: Generic nptl version with
	padding explicitly initialized.
	* sysdeps/sparc/sparc32/sem_post.c: Generic nptl version using
	padding for in-semaphore spinlock.
	* sysdeps/sparc/sparc32/sem_wait.c: Likewise.
	* sysdeps/sparc/sparc32/sem_trywait.c: Delete.
	* sysdeps/sparc/sparc32/sem_timedwait.c: Delete.
	* sysdeps/sparc/sparc32/sparcv9/sem_init.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/sem_open.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/sem_post.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/sem_waitcommon.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/sem_wait.c: Redirect to nptl
	version.
	* sysdeps/sparc/sparc32/sparcv9/sem_timedwait.c: Delete.
	* sysdeps/sparc/sparc32/sparcv9/sem_trywait.c: Delete.

2015-01-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17801]
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set the bit_AVX_Fast_Unaligned_Load bit for AVX2.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_AVX_Fast_Unaligned_Load):
	New.
	(index_AVX_Fast_Unaligned_Load): Likewise.
	(HAS_AVX_FAST_UNALIGNED_LOAD): Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S (__new_memcpy): Check the
	bit_AVX_Fast_Unaligned_Load bit instead of the bit_AVX_Usable bit.
	* sysdeps/x86_64/multiarch/memcpy_chk.S (__memcpy_chk): Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S (__mempcpy): Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S (__mempcpy_chk): Likewise.
	* sysdeps/x86_64/multiarch/memmove.c (__libc_memmove): Replace
	HAS_AVX with HAS_AVX_FAST_UNALIGNED_LOAD.
	* sysdeps/x86_64/multiarch/memmove_chk.c (__memmove_chk): Likewise.

2015-01-29  Andreas Schwab  <schwab@suse.de>

	* sysdeps/nptl/allocrtsig.c: Include <signal.h>.

2015-01-29  Siddhesh Poyarekar <siddhesh@redhat.com>

	[BZ #17892]
	* nscd/nscd_stat.c (send_stats): Initialize DATA.

2015-01-28  Martin Sebor  <msebor@redhat.com>

	* math/README.libm-test: Clarify. Add "How to read the test output."

2015-01-28  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/tilegx/bits/atomic.h [!_LP64] (__HAVE_64B_ATOMICS):
	Define to 0.

2015-01-28  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/bits/atomic.h [_MIPS_SIM == _ABIN32]
	(__HAVE_64B_ATOMICS): Define to 0.

2015-01-28  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #17885]
	* sysdeps/powerpc/fpu/fsetexcptflg.c (__fesetexceptflag): Fix correct
	value to set as new flag.

	[BZ #16576]
	* sysdeps/powerpc/fpu/math_private.h [__CPU_HAS_FSQRT]: Remove define
	and use _ARCH_PPCSQ instead.
	(__ieee754_sqrt): Likewise.
	(__ieee754_sqrtf): Likewise.
	* sysdeps/powerpc/fpu/e_sqrt.c (__slow_ieee754_sqrt): Build only if
	_ARCH_PPCSQ is defined.
	(__ieee754_sqrt): Use _ARCH_PPCSQ to select wheter to use hardware
	fsqrt instruction.
	* sysdeps/powerpc/fpu/e_sqrtf.c (__ieee754_sqrtf): Build only if
	_ARCH_PPCSQ is defined.
	(__ieee754_sqrtf): Use _ARCH_PPCSQ to select wheter to use hardware
	fsqrts instruction.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrt.c: Remove file.

2015-01-27  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* iconv/loop.c: Suppress array out of bound warning caused by GCC
	bug (GCC BZ #64739).

2015-01-25  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h (lll_futex_requeue):
	Mark _retval as used.
	(lll_futex_wake_unlock): Likewise.
	(lll_futex_timed_wait_requeue_pi): Likewise.

	* sysdeps/unix/sysv/linux/m68k/coldfire/bits/atomic.h
	(atomic_compare_and_exchange_val_acq): Use uint32_t for the
	register variables.

	* sysdeps/m68k/m680x0/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.

	* sysdeps/m68k/bits/byteswap.h (__bswap_16, __bswap_32)
	(__bswap_64): Mark as __always_inline.

2015-01-25  Bram  <bug_rh@spam.wizbit.be>

	[BZ #15378]
	* elf/dl-load.c (open_path): Avoid writing to 'env_path_list'
	when none of the search directories exist.

2015-01-24  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #17869]
	* sysdeps/powerpc/powerpc64/power8/memset.S: Use power7 instead of
	power8 in .machine directive.

	[BZ #17868]
	* sysdeps/powerpc/powerpc64/dl-machine.h (resolve_ifunc): Force value
	set dependency from opd value.

2015-01-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Treat model numbers 0x4a/0x4d/0x5a/0x5d as Intel Silvermont
	architecture.

2015-01-23  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17870]
	* nptl/sem_post.c (__new_sem_post): Replace unsigned long int
	with uint64_t.
	* nptl/sem_waitcommon.c (__sem_wait_cleanup): Replace 1UL with
	(uint64_t) 1.
	(__new_sem_wait_fast): Replace unsigned long with uint64_t.
	(__new_sem_wait_slow): Replace unsigned long int with uint64_t.
	Replace 1UL with (uint64_t) 1.
	* sysdeps/nptl/internaltypes.h (new_sem): Replace unsigned long
	int with uint64_t.

2015-01-23  Roland McGrath  <roland@hack.frob.com>

	* inet/if_index.c (if_nameindex): Add missing libc_hidden_weak.
	(if_freenameindex): Likewise.

	* resource/getrlimit64.c: Add missing libc_hidden_def.

2015-01-22  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/op-common.h (_FP_ADD_INTERNAL): Declare labels with
	__label__.
	(_FP_FMA): Likewise.
	(_FP_TO_INT_ROUND): Likewise.
	(_FP_FROM_INT): Likewise.

2015-01-21  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16418]
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c (__get_clockfreq):
	Make code racy and cancel safe.

2015-01-21  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/arm/unwind-resume.h: Fix copyright year.
	* dlfcn/tst-rec-dlopen.c: Fix incorrect copyright year and
	attribution.

	* pwd/tst-getpw.c: Rewrite.

	[BZ #17702]
	* dlfcn/Makefile (tests): Add tst-rec-dlopen.
	(modules-names): Add moddummy1 and moddummy2.
	($(objpfx)tst-rec-dlopen): Define.
	* dlfcn/moddummy1.c: New file.
	* dlfcn/moddummy2.c: New file.
	* dlfcn/tst-rec-dlopen.c: New file.
	* elf/dl-cache.c (_dl_load_cache_lookup):
	Return char*. Copy result with alloca/strcpy/strdup.
	* elf/dl-load.c (_dl_map_object): _dl_load_cached_lookup
	returns char*. Free cached. If not saving realname
	free cached.
	* elf/dl-open.c (dl_open_worker): Do not assert that
	_r_debug->r_state is RT_CONSISTENT.
	* sysdeps/generic/ldsodefs.h: _dl_load_cache_lookup
	returns char*.

2015-01-21  Torvald Riegel  <triegel@redhat.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #12674]
	* nptl/sem_waitcommon.c: New file.
	* nptl/sem_wait.c: Include sem_waitcommon.c.
	(__sem_wait_cleanup, do_futex_wait): Remove.
	(__new_sem_wait): Adapt.
	(__new_sem_trywait): New function.
	(__old_sem_trywait): Moved here from nptl/sem_trywait.c.
	* nptl/sem_timedwait.c: Include sem_waitcommon.c.
	(__sem_wait_cleanup, do_futex_timed_wait): Remove.
	(sem_timedwait): Adapt.
	* nptl/sem_post.c (__new_sem_post): Adapt.
	(futex_wake): New function.
	(__old_sem_post): Add release MO fence.
	* nptl/sem_open.c (sem_open): Adapt.
	* nptl/sem_init.c (__new_sem_init): Adapt.
	(futex_private_if_supported): New function.
	* nptl/sem_getvalue.c (__new_sem_getvalue): Adapt.
	(__old_sem_getvalue): Add using previous code.
	* sysdeps/nptl/internaltypes.h: Adapt.
	* nptl/tst-sem13.c (do_test): Adapt.
	* nptl/tst-sem11.c (main): Adapt.
	* nptl/sem_trywait.c: Remove.
	* nptl/DESIGN-sem.txt: Remove.
	* nptl/Makefile (libpthread-routines): Remove sem_trywait.
	(gen-as-const-headers): Remove structsem.sym.
	* nptl/structsem.sym: Remove.
	* sysdeps/unix/sysv/linux/alpha/sem_post.c: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/sem_wait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i586/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i586/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i586/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i586/sem_wait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i686/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i686/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i686/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i686/sem_wait.S: Remove.
	* sysdeps/unix/sysv/linux/powerpc/sem_post.c: Remove.
	* sysdeps/unix/sysv/linux/sh/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/sh/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/sh/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/sh/sem_wait.S: Remove.
	* sysdeps/unix/sysv/linux/x86_64/sem_post.S: Remove.
	* sysdeps/unix/sysv/linux/x86_64/sem_timedwait.S: Remove.
	* sysdeps/unix/sysv/linux/x86_64/sem_trywait.S: Remove.
	* sysdeps/unix/sysv/linux/x86_64/sem_wait.S: Remove.

2015-01-20  Carlos O'Donell  <carlos@redhat.com>

	* INSTALL: Regenerated.

	* po/libc.pot: Regenerated.

2015-01-18  Chung-Lin Tang  <cltang@codesourcery.com>
	    Sandra Loosemore  <sandra@codesourcery.com>
	    Andrew Jenner  <andrew@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Nathan Sidwell  <nathan@codesourcery.com>

	* NEWS: Mention new Nios II port.
	* sysdeps/nios2/Implies: New file.
	* sysdeps/nios2/Makefile: New file.
	* sysdeps/nios2/Subdirs: New file.
	* sysdeps/nios2/Versions: New file.
	* sysdeps/nios2/__longjmp.S: New file.
	* sysdeps/nios2/abort-instr.h: New file.
	* sysdeps/nios2/backtrace.c: New file.
	* sysdeps/nios2/bits/endian.h: New file.
	* sysdeps/nios2/bits/fenv.h: New file.
	* sysdeps/nios2/bits/link.h: New file.
	* sysdeps/nios2/bits/setjmp.h: New file.
	* sysdeps/nios2/bsd-_setjmp.S: New file.
	* sysdeps/nios2/bsd-setjmp.S: New file.
	* sysdeps/nios2/configure: New generated file.
	* sysdeps/nios2/configure.ac: New file.
	* sysdeps/nios2/crti.S: New file.
	* sysdeps/nios2/crtn.S: New file.
	* sysdeps/nios2/dl-init.c: New file.
	* sysdeps/nios2/dl-machine.h: New file.
	* sysdeps/nios2/dl-sysdep.h: New file.
	* sysdeps/nios2/dl-tls.h: New file.
	* sysdeps/nios2/dl-trampoline.S: New file.
	* sysdeps/nios2/gccframe.h: New file.
	* sysdeps/nios2/gmp-mparam.h: New file.
	* sysdeps/nios2/jmpbuf-offsets.h: New file.
	* sysdeps/nios2/jmpbuf-unwind.h: New file.
	* sysdeps/nios2/ldsodefs.h: New file.
	* sysdeps/nios2/libc-tls.c: New file.
	* sysdeps/nios2/libm-test-ulps: New file.
	* sysdeps/nios2/machine-gmon.h: New file.
	* sysdeps/nios2/math-tests.h: New file.
	* sysdeps/nios2/math_private.h: New file.
	* sysdeps/nios2/memusage.h: New file.
	* sysdeps/nios2/nptl/Makefile: New file.
	* sysdeps/nios2/nptl/bits/pthreadtypes.h: New file.
	* sysdeps/nios2/nptl/bits/semaphore.h: New file.
	* sysdeps/nios2/nptl/pthread_spin_lock.c: New file.
	* sysdeps/nios2/nptl/pthreaddef.h: New file.
	* sysdeps/nios2/nptl/tcb-offsets.sym: New file.
	* sysdeps/nios2/nptl/tls.h: New file.
	* sysdeps/nios2/preconfigure: New file.
	* sysdeps/nios2/s_fma.c: New file.
	* sysdeps/nios2/s_fmaf.c: New file.
	* sysdeps/nios2/setjmp.S: New file.
	* sysdeps/nios2/sfp-machine.h: New file.
	* sysdeps/nios2/sotruss-lib.c: New file.
	* sysdeps/nios2/stackguard-macros.h: New file.
	* sysdeps/nios2/stackinfo.h: New file.
	* sysdeps/nios2/start.S: New file.
	* sysdeps/nios2/sysdep.h: New file.
	* sysdeps/nios2/tls-macros.h: New file.
	* sysdeps/nios2/tst-audit.h: New file.
	* sysdeps/unix/sysv/linux/nios2/Implies: New file.
	* sysdeps/unix/sysv/linux/nios2/Makefile: New file.
	* sysdeps/unix/sysv/linux/nios2/Versions: New file.
	* sysdeps/unix/sysv/linux/nios2/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/nios2/bits/atomic.h: New file.
	* sysdeps/unix/sysv/linux/nios2/bits/mman.h: New file.
	* sysdeps/unix/sysv/linux/nios2/cacheflush.c: New file.
	* sysdeps/unix/sysv/linux/nios2/clone.S: New file.
	* sysdeps/unix/sysv/linux/nios2/configure: New generated file.
	* sysdeps/unix/sysv/linux/nios2/configure.ac: New file.
	* sysdeps/unix/sysv/linux/nios2/getcontext.S: New file.
	* sysdeps/unix/sysv/linux/nios2/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/nios2/kernel_rt_sigframe.h: New file.
	* sysdeps/unix/sysv/linux/nios2/makecontext.c: New file.
	* sysdeps/unix/sysv/linux/nios2/profil-counter.h: New file.
	* sysdeps/unix/sysv/linux/nios2/setcontext.S: New file.
	* sysdeps/unix/sysv/linux/nios2/shlib-versions: New file.
	* sysdeps/unix/sysv/linux/nios2/sigcontextinfo.h: New file.
	* sysdeps/unix/sysv/linux/nios2/swapcontext.S: New file.
	* sysdeps/unix/sysv/linux/nios2/sys/cachectl.h: New file.
	* sysdeps/unix/sysv/linux/nios2/sys/procfs.h: New file.
	* sysdeps/unix/sysv/linux/nios2/sys/ucontext.h: New file.
	* sysdeps/unix/sysv/linux/nios2/sys/user.h: New file.
	* sysdeps/unix/sysv/linux/nios2/syscall.S: New file.
	* sysdeps/unix/sysv/linux/nios2/sysdep-cancel.h: New file.
	* sysdeps/unix/sysv/linux/nios2/sysdep.S: New file.
	* sysdeps/unix/sysv/linux/nios2/sysdep.h: New file.
	* sysdeps/unix/sysv/linux/nios2/ucontext_i.sym: New file.
	* sysdeps/unix/sysv/linux/nios2/vfork.S: New file.
	* sysdeps/unix/sysv/linux/nios2/c++-types.data: New file.
	* sysdeps/unix/sysv/linux/nios2/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libBrokenLocale.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libthread_db.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/nios2/localplt.data: New file.

2015-01-16  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #17844]
	* sysdeps/unix/sysv/linux/s390/s390-32/getutent.c
	(getutent): Use weak_alias in non SHARED case
	and default_symbol_version in SHARED case.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutent_r.c
	(getutent_r, pututline): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutid.c
	(getutid): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutid_r.c
	(getutid_r): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutline.c
	(getutline): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getutline_r.c
	(getutline_r): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/updwtmp.c
	(updwtmp): Likewise.

2015-01-16  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #17848]
	* sysdeps/s390/s390-32/memcmp.S
	(memcmp_g5): Rename to __memcmp_g5.
	* sysdeps/s390/s390-32/memcpy.S
	(memcpy_g5): Rename to __memcpy_g5.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy_mvcle) Rename to __memcpy_mvcle.
	* sysdeps/s390/s390-32/memset.S
	(memset_g5): Rename to __memset_g5.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c
	(IFUNC_RESOLVE): Prefix ifunc-resolve function
	and use prefixed functions.
	* sysdeps/s390/s390-32/multiarch/memcmp.S
	(memcmp_z196): Rename to __memcmp_z196.
	(memcmp_z10): Rename to __memcmp_z10.
	(memcmp): Set alias to __memcmp_g5.
	(bcmp): Set alias to __memcmp_g5.
	* sysdeps/s390/s390-32/multiarch/memcpy.S
	(memcpy_z196): Rename to __memcpy_z196.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy_z10): Rename to __memcpy_z10.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy): Set alias to __memcpy_g5.
	* sysdeps/s390/s390-32/multiarch/memset.S
	(memset_z196): Rename to __memset_z196.
	Jump to __memset_mvcle instead of memset_mvcle.
	(memset_z10): Rename to __memset_z10.
	Jump to __memset_mvcle instead of memset_mvcle.
	(memset_mvcle) Rename to __memset_mvcle.
	(memset): Set alias to __memset_g5.
	* sysdeps/s390/s390-64/memcmp.S
	(memcmp_z900): Rename to __memcmp_z900.
	* sysdeps/s390/s390-64/memcpy.S
	(memcpy_z900): Rename to __memcpy_z900.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy_mvcle) Rename to __memcpy_mvcle.
	* sysdeps/s390/s390-64/memset.S
	(memset_z900): Rename to __memset_z900.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c
	(IFUNC_RESOLVE): Prefix ifunc-resolve function
	and use prefixed functions.
	* sysdeps/s390/s390-64/multiarch/memcmp.S
	(memcmp_z196): Rename to __memcmp_z196.
	(memcmp_z10): Rename to __memcmp_z10.
	(memcmp): Set alias to __memcmp_z900.
	(bcmp): Set alias to __memcmp_z900.
	* sysdeps/s390/s390-64/multiarch/memcpy.S
	(memcpy_z196): Rename to __memcpy_z196.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy_z10): Rename to __memcpy_z10.
	Jump to __memcpy_mvcle instead of memcpy_mvcle.
	(memcpy): Set alias to __memcpy_z900.
	* sysdeps/s390/s390-64/multiarch/memset.S
	(memset_z196): Rename to __memset_z196.
	Jump to __memset_mvcle instead of memset_mvcle.
	(memset_z10): Rename to __memset_z10.
	Jump to __memset_mvcle instead of memset_mvcle.
	(memset_mvcle) Rename to __memset_mvcle.
	(memset): Set alias to __memset_z900.

2015-01-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* sysdeps/powerpc/nofpu/feholdexcpt.c (__feholdexcept): Call
	__fesetenv instead of fesetenv.

2015-01-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/dl-tls.h [IS_IN (rtld)]: Define __tls_get_addr
	macro.

2015-01-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/memcmp.S (memcmp): Fix performance
	regression on LE.

	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power8.S: New file.
	* sysdeps/powerpc/powerpc64/power8/strncmp.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]: Add
	strncmp-power8 object.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strncmp_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp.c (strncmp): Likewise.
	* NEWS: Update.

2015-01-13  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strcmp.S (strcmp): Optimize
	trailing byte check.

2015-01-13  David S. Miller  <davem@davemloft.net>

	* include/signal.h (__sigreturn): Guard with __USE_MISC.

2015-01-13  Roland McGrath  <roland@hack.frob.com>

	* login/logout.c (logout): Use memset rather than bzero.
	* nis/nss_compat/compat-pwd.c (getpwent_next_file): Likewise.
	* nis/nss_compat/compat-spwd.c (getspent_next_file): Likewise.
	* resolv/gethnamaddr.c (gethostbyaddr): Use memcmp rather than bcmp.
	(_gethtbyaddr): Likewise.
	* locale/programs/simple-hash.c (bcopy): Macro removed.

2015-01-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Add strcmp-power8 object.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strcmp_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp.c (strcmp): Add
	__strcmp_power8 implementation.
	* sysdeps/powerpc/powerpc64/power8/strcmp.S: New file.
	* NEWS: Update.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Add strncpy-power8 and stpncpy-power8 objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strncpy_power8 and stpncpy_power8
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy.c (__stpncpy): Add
	__stpncpy_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-power8.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy.c (strncpy): Add
	__strncpy_power8 implementation.
	* sysdeps/powerpc/powerpc64/power8/stpncpy.S: New file.
	* sysdeps/powerpc/powerpc64/power8/strncpy.S: New file.
	* NEWS: Update.

	* sysdeps/powerpc/powerpc64/multiarch/strncat-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncat-power7.S: Remove file.
	* sysdeps/powerpc/powerpc64/power7/strncat.S: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]: Add
	strncat-power8 object.
	* sysdeps/powerpc/powerpc64/multiarch/strcat.c (strcat): Add
	__strcat_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strcat_power8 implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-power8.c: New file:
	optimized strcat for power8.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]: Add
	strcpy-power8 and stpcpy-power8 objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add __strcpy_power8 and __stpcpy_power8
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-power8.S: New file:
	multiarch stpcpy implementation for POWER8.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-power8.S: New file;
	multiarch strcpy implementation for POWER8.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy.c (strcpy): Add
	__strcpy_power8 function.
	* sysdeps/powerpc/powerpc64/power8/stpcpy.S: New file: optimized
	stpcpy for POWER8.
	* sysdeps/powerpc/powerpc64/power8/strcpy.S: New file: optimized
	strcpy for POWER8.
	* NEWS: Update.

2015-01-13  Leonhard Holz  <leonhard.holz@web.de>

	[BZ #16009]
	* string/strxfrm_l.c (STRXFRM): Allocate fixed size cache for
	weights and rules. Use do_xfrm_cached if data fits in cache,
	do_xfrm otherwise.  Moved former main loop to...
	* (do_xfrm_cached): New function.
	* (do_xfrm): Non-caching version of do_xfrm_cached. Uses
	find_idx, find_position and stack_push.
	* (find_idx): New function.
	* (find_position): Likewise.
	* localedata/sort-test.sh: Added test run for do_xfrm.
	* localedata/xfrm-test.c (main): Added command line option
	-nocache to run the test with strings that are too large for
	the STRXFRM cache.

2015-01-13  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/nptl/fork.c (__libc_fork): Provide address of futex
	variable to lll_futex_wake call, not the value itself.

2015-01-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17803]
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c (twom63): Rename to
	twom64.  Adjust value to 0x1p-64L.
	(__scalblnl): Only return standard underflowing result for K <=
	-64 not K <= -63; adjust exponent for underflowing result by 64
	not 63.
	* math/libm-test.inc (scalbn_test_data): Add more tests.
	(scalbln_test_data): Likewise.

	[BZ #17834]
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c (two63): Change value to
	0x1p63L.
	(__scalblnl): Get new exponent of adjusted subnormal value from ES
	not HX.
	* math/libm-test.inc (scalbn_test_data): Add more tests.
	(scalbln_test_data): Likewise.

2015-01-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>
	    Stefani Seibold  <stefani@seibold.net>

	* sysdeps/unix/sysv/linux/x86_64/Makefile [$(subdir) = elf]
	(sysdep_routines): Add dl-vdso here, ...
	* sysdeps/unix/sysv/linux/x86/Makefile [$(subdir) = elf]
	(sysdep_routines): ... not here.
	* sysdeps/unix/sysv/linux/i386/gettimeofday.c: New file: set syscall
	fallback when vDSO is not presented.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c (__vdso_clock_gettime):
	Define with libc_hidden_proto/libc_hidden_data_def definitions.
	(_libc_vdso_platform_setup): Rename to __vdso_platform_setup.
	* sysdeps/unix/sysv/linux/i386/init-first.c: New file: likewise.
	* sysdeps/unix/sysv/linux/i386/time.c: New file: likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/libc-vdso.h: Moved to ...
	* sysdeps/unix/sysv/linux/x86/libc-vdso.h: ... here.
	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c: Move to ...
	* sysdeps/unix/sysv/linux/x86/clock_gettime.c: ... here.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c: Move to ...
	* sysdeps/unix/sysv/linux/x86/gettimeofday.c: ... here.  Also added
	fallback configurable symbol when vDSO is not available.
	* sysdeps/unix/sysv/linux/x86_64/time.c: Move to ...
	* sysdeps/unix/sysv/linux/x86/time.c: ... here.  Also refactored to
	be able to redefine fallback symbol when vDSO is not available.
	* sysdeps/unix/sysv/linux/x86_64/timespec_get.c: Move to ...
	* sysdeps/unix/sysv/linux/x86/timespec_get.c: ... here.

2015-01-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/nptl/tls.h (tcbhead_t): Add tm_capable field.
	(TLS_INIT_TP): Add tm_capable initialization.
	(TLS_DEFINE_INIT_TP): Likewise.
	(THREAD_GET_TM_CAPABLE): New file: get tm_capable field value from
	TCB.
	(THREAD_SET_TM_CAPABLE): New file: set tm_capable field value in TCB.
	* sysdeps/powerpc/nptl/tcb-offsets.sym (TM_CAPABLE): Add field offset
	calculation.
	* sysdeps/powerpc/powerpc32/sysdep.h (DO_CALL): Abort hardware
	transactoion is lock elision is built and TCB tm_capable is set.
	* sysdeps/powerpc/powerpc64/sysdep.h (DO_CALL): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	(INTERNAL_SYSCALL_NCS): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h
	(INTERNAL_SYSCALL_NCS): Likewise.
	* sysdeps/powerpc/sysdep.h (ABORT_TRANSACTION): New define.

	* sysdeps/powerpc/nptl/elide.h: New file: generic lock elision support
	for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	[pthread_rwlock_t] (__pad1): Change size to 7 bytes in 64 bits case
	and remove it for 32 bits case.
	[pthread_rwlock_t] (__rwelision): New field for lock elision.
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Adjust for new lock elision field
	initialization.
	* sysdeps/unix/sysv/linux/powerpc/elision-conf.c (elision_init):
	Disable lock elision with rdlocks if elision is not available.

	* sysdeps/unix/sysv/linux/powerpc/Makefile [nptl]
	(sysdep_routines): Add lock elision objects.
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	[pthread_mutex_t] (__spins): Rework to add lock elision field.
	[pthread_mutex_t] (__elision): Add field.
	[__PTHREAD_SPINS]: Adjust to init lock elision field.
	* sysdeps/unix/sysv/linux/powerpc/elision-conf.c: New file: lock
	elision definitions for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/elision-lock.c: New file:
	implementation of lock elision for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/elision-timed.c: New file:
	implementation of timed lock elision for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/elision-trylock.c: New file:
	implementation of trylock with lock elision for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/elision-unlock.c: New file:
	implementaion of unlock for lock elision for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/force-elision.h: New file:
	automatic enable lock elision for mutexes.
	* sysdeps/unix/sysv/linux/powerpc/htm.h: New file: hardware
	transaction execution definitions for powerpc.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: New file: add TLE
	definitions.
	* sysdeps/unix/sysv/linux/powerpc/pthread_mutex_cond_lock.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/pthread_mutex_lock.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/pthread_mutex_timedlock.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/pthread_mutex_trylock.c: Likewise.
	* NEWS: Update.

2015-01-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/shm-directory.c: Use <> rather than ""
	for #include of <shm-directory.h>.

2015-01-09  Chung-Lin Tang  <cltang@codesourcery.com>

	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Remove MIN() and
	assign raw DT_REL[A]COUNT value to ranges[0].nrelative.

2015-01-09  Matthew Fortune <matthew.fortune@imgtec.com>

	[BZ #17791]
	* NEWS: Mention bug fix.
	* sysdepsysdeps/unix/sysv/linux/microblaze/sys/user.h
	(PAGE_SHIFT, PAGE_SIZE, PAGE_MASK, NBPG, UPAGES): Remove.
	(HOST_TEXT_START_ADDR, HOST_STACK_END_ADDR): Remove.

2015-01-09  Torvald Riegel <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Delete file.

2015-01-09  Torvald Riegel <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/microblaze/pthread_once.c: Delete file.

2015-01-09  David Holsgrove  <david.holsgrove@xilinx.com>

	* sysdeps/microblaze/jmpbuf-unwind.h (_jmpbuf_sp): Declare SP as void
	pointer and cast to uintptr_t.

2015-01-09  David Holsgrove  <david.holsgrove@xilinx.com>

	* sysdeps/microblaze/nptl/tls.h (__microblaze_get_thread_area): Function
	removed.
	(READ_THREAD_POINTER): Use __microblaze_thread_area instead.

2015-01-09  David Holsgrove  <david.holsgrove@xilinx.com>

	* sysdeps/microblaze/nptl/tls.h (TLS_INIT_TP): Use NULL instead
	of 0.

2015-01-08  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/pthread/timer_routines.c: Fix <pthreadP.h> include to use
	<nptl/pthreadP.h> instead.
	* sysdeps/pthread/aio_notify.c: Include <signal.h> for raise decl.

	* signal/allocrtsig.c (RESERVED_SIGRT): New macro, defined to 0 if not
	already defined.
	[__SIGRTMIN] (init): Function removed.
	[__SIGRTMIN] (initialized): Variable removed.
	[!__SIGRTMIN] (current_rtmin, current_rtmax): Variables removed.
	[__SIGRTMIN] (current_rtmin, current_rtmax): Initialize to
	__SIGRTMIN + RESERVED_SIGRT and __SIGRTMAX, respectively.
	(__libc_current_sigrtmin) [__SIGRTMIN]: Don't call init.
	(__libc_current_sigrtmin) [!__SIGRTMIN]: Just return -1.
	(__libc_current_sigrtmin): Add __libc_current_sigrtmin_private alias.
	(__libc_current_sigrtmax) [__SIGRTMIN]: Don't call init.
	(__libc_current_sigrtmax) [!__SIGRTMIN]: Just return -1.
	(__libc_current_sigrtmax): Add __libc_current_sigrtmax_private alias.
	(__libc_allocate_rtsig) [__SIGRTMIN]: Don't call init.
	(__libc_allocate_rtsig): Add __libc_allocate_rtsig_private alias.
	* sysdeps/nptl/allocrtsig.c: New file.
	* sysdeps/unix/sysv/linux/allocrtsig.c: File removed.
	* sysdeps/unix/sysv/linux/testrtsig.h: File removed.
	* sysdeps/generic/testrtsig.h: File removed.

	* nptl/pthread_sigmask.c [SIGCANCEL || SIGTIMER || SIGSETXID]: #error.
	(pthread_sigmask): Call sigprocmask, not __sigprocmask.

	* nptl/nptl-init.c (pthread_functions): Conditionalize
	.ptr__nptl_setxid initialization on [SIGSETXID].

	* sysdeps/nptl/sys/procfs.h: New file.
	* nptl_db/Makefile (headers): Add it.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Don't add it.

	* nptl/pthreadP.h (check_cpuset_attr): Moved ...
	* sysdeps/unix/sysv/linux/check-cpuset.h: ... to this new file.
	* nptl/pthread_attr_setaffinity.c: Include it.
	* nptl/pthread_setattr_default_np.c: Likewise.
	* nptl/check-cpuset.h: New file.

2015-01-08  Richard Henderson  <rth@redhat.com>

	* elf/Makefile (CFLAGS-tst-execstack-mod.c): Add -Wno-trampolines
	(CFLAGS-tst-execstack-prog.c): Likewise.
	* nptl/Makefile (CFLAGS-tst-execstack-mod.c): Likewise.

2015-01-08  Chung-Lin Tang  <cltang@codesourcery.com>
	    Sandra Loosemore  <sandra@codesourcery.com>
	    Andrew Jenner  <andrew@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Nathan Sidwell  <nathan@codesourcery.com>

	* elf/elf.h (EM_ALTERA_NIOS2): New machine number for Altera Nios II.
	(DT_NIOS2_GP): New dynamic entry type for Nios II _gp address.
	(R_NIOS2_NONE,R_NIOS2_S16,R_NIOS2_U16): Define Nios II relocations.
	(R_NIOS2_PCREL16,R_NIOS2_CALL26,R_NIOS2_IMM5): Likewise.
	(R_NIOS2_CACHE_OPX,R_NIOS2_IMM6,R_NIOS2_IMM8,R_NIOS2_HI16): Likewise.
	(R_NIOS2_LO16,R_NIOS2_HIADJ16,R_NIOS2_BFD_RELOC_32): Likewise.
	(R_NIOS2_BFD_RELOC_16,R_NIOS2_BFD_RELOC_8,R_NIOS2_GPREL): Likewise.
	(R_NIOS2_GNU_VTINHERIT,R_NIOS2_GNU_VTENTRY,R_NIOS2_UJMP): Likewise.
	(R_NIOS2_CJMP,R_NIOS2_CALLR,R_NIOS2_ALIGN,R_NIOS2_GOT16): Likewise.
	(R_NIOS2_CALL16,R_NIOS2_GOTOFF_LO,R_NIOS2_GOTOFF_HA): Likewise.
	(R_NIOS2_PCREL_LO,R_NIOS2_PCREL_HA,R_NIOS2_TLS_GD16): Likewise.
	(R_NIOS2_TLS_LDM16,R_NIOS2_TLS_LDO16,R_NIOS2_TLS_IE16): Likewise.
	(R_NIOS2_TLS_LE16,R_NIOS2_TLS_DTPMOD,R_NIOS2_TLS_DTPREL): Likewise.
	(R_NIOS2_TLS_TPREL,R_NIOS2_COPY,R_NIOS2_GLOB_DAT): Likewise.
	(R_NIOS2_JUMP_SLOT,R_NIOS2_RELATIVE,R_NIOS2_GOTOFF): Likewise.
	(R_NIOS2_CALL26_NOAT,R_NIOS2_GOT_LO,R_NIOS2_GOT_HA): Likewise.
	(R_NIOS2_CALL_LO,R_NIOS2_CALL_HA): Likewise.

2015-01-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/futimens.c (futimens): Use address of first
	timespec struct member in syscall macro.
	* sysdeps/unix/sysv/linux/utimensat.c (utimensat): Likewise.
	* sysdeps/unix/sysv/linux/futimesat.c (futimesat): Use address of
	first timeval struct member in syscall macro.
	* sysdeps/unix/sysv/linux/utimes.c (__utimeS): Likewise.

2015-01-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__feupdateenv): Use libm_hidden_proto.
	* math/feupdateenv.c (__feupdateenv): Use libm_hidden_def.
	* sysdeps/aarch64/fpu/feupdateenv.c (feupdateenv): Rename to
	__feupdateenv and define as weak alias of __feupdateenv.  Use
	libm_hidden_weak.
	* sysdeps/alpha/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/arm/feupdateenv.c (feupdateenv): Rename to __feupdateenv
	and define as weak alias of __feupdateenv.  Use libm_hidden_weak.
	* sysdeps/hppa/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/i386/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/ia64/fpu/feupdateenv.c (feupdateenv): Rename to
	__feupdateenv and define as weak alias of __feupdateenv.  Use
	libm_hidden_weak.
	* sysdeps/m68k/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/mips/fpu/feupdateenv.c (feupdateenv): Rename to
	__feupdateenv and define as weak alias of __feupdateenv.  Use
	libm_hidden_weak.
	* sysdeps/powerpc/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/powerpc/nofpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feupdateenv.c
	(__feupdateenv): Likewise.
	* sysdeps/s390/fpu/feupdateenv.c (feupdateenv): Rename to
	__feupdateenv and define as weak alias of __feupdateenv.  Use
	libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/tile/math_private.h (__feupdateenv): New inline
	function.
	* sysdeps/x86_64/fpu/feupdateenv.c (__feupdateenv): Use
	libm_hidden_def.
	* sysdeps/generic/math_private.h (default_libc_feupdateenv): Call
	__feupdateenv instead of feupdateenv.
	(default_libc_feupdateenv_test): Likewise.
	(libc_feresetround_ctx): Likewise.

2015-01-07  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/mips/pread.c (__libc_pread): Fix function
	prototype.

2015-01-07  Chris Metcalf  <cmetcalf@ezchip.com>

	* posix/regcomp.c (parse_bracket_exp): Initialize type to
	COLL_SYM in a couple of places to avoid uninitialized variable
	wanings on tilegx gcc 4.8.2.

2015-01-07  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strcpy.S: New file.
	* sysdeps/aarch64/stpcpy.S: New file.
	* NEWS: Updated.

2015-01-07  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strrchr.S: New file.
	* NEWS: Updated.

2015-01-07  Eric Biggers  <ebiggers3@gmail.com>

	[BZ #17658]
	* stdlib/setenv.c: Fix memory leak when setting large,
	duplicate string.

2015-01-06  Vladimir A. Nazarenko  <naszar@ya.ru>

	[BZ #17273]
	* misc/mntent_r.c (__getmntent_r): Cut off trailing spaces
	and tabs from buffer before parsing fstab entry.
	* misc/tst-mntent.c (main): Add test for mount entry with
	trailing spaces and tabs.

2015-01-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__fesetround): Declare.  Use libm_hidden_proto.
	* math/fesetround.c (fesetround): Rename to __fesetround and
	define as weak alias of __fesetround.  Use libm_hidden_weak.
	* sysdeps/aarch64/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/alpha/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/arm/fesetround.c (fesetround): Likewise.
	* sysdeps/hppa/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/i386/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/ia64/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/m68k/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/mips/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fesetround): Rename to
	__fesetround_inline.
	* sysdeps/powerpc/fpu/fenv_private.h (libc_fesetround_ppc): Call
	__fesetround_inline instead of __fesetround.
	* sysdeps/powerpc/fpu/fesetround.c (fesetround): Rename to
	__fesetround and define as weak alias of __fesetround.  Use
	libm_hidden_weak.  Call __fesetround_inline instead of
	__fesetround.
	* sysdeps/powerpc/nofpu/fesetround.c (fesetround): Rename to
	__fesetround and define as weak alias of __fesetround.  Use
	libm_hidden_weak.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetround.c (fesetround):
	Likewise.
	* sysdeps/s390/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/sparc/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/tile/math_private.h (__fesetround): New inline function.
	* sysdeps/x86_64/fpu/fesetround.c (fesetround): Rename to
	__fesetround and define as weak alias of __fesetround.  Use
	libm_hidden_weak.
	* sysdeps/generic/math_private.h (default_libc_fesetround): Call
	__fesetround instead of fesetround.
	(default_libc_feholdexcept_setround): Likewise.
	(libc_feholdsetround_ctx): Likewise.
	(libc_feholdsetround_noex_ctx): Likewise.

	[BZ #17748]
	* include/fenv.h (__fesetenv): Use libm_hidden_proto.
	* math/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv): Rename to __fesetenv
	and define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/alpha/fpu/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/arm/fesetenv.c (fesetenv): Rename to __fesetenv and
	define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/hppa/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/i386/fpu/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/ia64/fpu/fesetenv.c (fesetenv): Rename to __fesetenv and
	define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/m68k/fpu/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/mips/fpu/fesetenv.c (fesetenv): Rename to __fesetenv and
	define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/powerpc/fpu/fesetenv.c (__fesetenv): Use
	libm_hidden_def.
	* sysdeps/powerpc/nofpu/fesetenv.c (__fesetenv): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetenv.c (__fesetenv):
	Likewise.
	* sysdeps/s390/fpu/fesetenv.c (fesetenv): Rename to __fesetenv and
	define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/sparc/fpu/fesetenv.c (__fesetenv): Use libm_hidden_def.
	* sysdeps/tile/math_private.h (__fesetenv): New inline function.
	* sysdeps/x86_64/fpu/fesetenv.c (fesetenv): Rename to __fesetenv
	and define as weak alias of __fesetenv.  Use libm_hidden_weak.
	* sysdeps/generic/math_private.h (default_libc_fesetenv): Use
	__fesetenv instead of fesetenv.
	(libc_feresetround_noex_ctx): Likewise.
	* sysdeps/alpha/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/hppa/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/i386/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/ia64/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/m68k/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/mips/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/powerpc/nofpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feupdateenv.c
	(__feupdateenv): Likewise.
	* sysdeps/s390/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sh/sh4/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/x86_64/fpu/feupdateenv.c (__feupdateenv): Likewise.

2015-01-06  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #17806]
	* resolv/res_init.c (__res_iclose): Only clear nsinit if the
	addresses have been freed.

2015-01-06  Aurelien Jarno  <aurelien@aurel32.net>

	* resolv/res_init.c (__res_vinit): Improve comments about nserv
	and nservall.

2015-01-06  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/unix/sysv/linux/check_pf.c (make_request):
	Clean up check_pf allocation pattern. addresses

2015-01-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/pthread_cancel.c (pthread_cancel): Use ANSI prototype.
	* nptl/pthread_cond_timedwait.c (__pthread_cond_timedwait): Likewise.
	* nptl/pthread_cond_wait.c (__pthread_cond_wait): Likewise.
	* nptl/pthread_exit.c (__pthread_exit): Likewise.
	* nptl/pthread_join.c (pthread_join): Likewise.
	* nptl/pthread_timedjoin.c (pthread_timedjoin_np): Likewise.
	* sysdeps/posix/waitid.c (__waitid): Likewise.
	* sysdeps/unix/sysv/linux/arm/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/arm/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/arm/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/arm/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread.c (__libc_pread):
	Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread64.c
	(__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite.c
	(__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite64.c
	(__libc_pwrite64): Likewsie.
	* sysdeps/unix/sysv/linux/mips/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/mips/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/msgrcv.c (__libc_msgrcv): Likewise.
	* sysdeps/unix/sysv/linux/msgsnd.c (__libc_msgsnd): Likewise.
	* sysdeps/unix/sysv/linux/openat.c (OPENAT_NOT_CANCEL): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c (__libc_pread):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c
	(__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c (__libc_pwrite):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c
	(__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/preadv.c (PREADV): Likewise.
	* sysdeps/unix/sysv/linux/pthread_kill.c (__pthread_kill): Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/pwrite64.c (__libc_pwrite64): Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c (__libc_pwritev): Likewise.
	* sysdeps/unix/sysv/linux/sh/pread.c (__libc_pread): Likewise.
	* sysdeps/unix/sysv/linux/sh/pread64.c (__libc_pread64): Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite.c (__libc_pwrite): Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c (__libc_write64): Likewise.
	* sysdeps/unix/sysv/linux/sigsuspend.c (__sigsuspend): Likewise.
	* sysdeps/unix/sysv/linux/sigtimedwait.c (__sigtimedwait): Likewise.
	* sysdeps/unix/sysv/linux/sigwait.c (__sigwait): Likewise.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c (__sigwaitinfo): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgrcv.c (__libc_msgrcv):
	Likewise.

2015-01-06  Andrew Senkevich  <andrew.n.senkevich@gmail.com>

	* math/Makefile (CFLAGS-test-float.c): Remove -frounding-math.
	(CFLAGS-test-double.c): Likewise.
	(CFLAGS-test-ldouble.c): Likewise.
	(CPPFLAGS-test-ifloat.c): Likewise.
	(CPPFLAGS-test-idouble.c): Likewise.
	(CPPFLAGS-test-ildoubl.c): Likewise.
	(CFLAGS-test-test-fenv.c): Remove variable.
	(CFLAGS-test-misc.c): Likewise.

2015-01-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17797]
	* bits/time.h (CLOCKS_PER_SEC): Changed to ((clock_t) 1000000).
	* sysdeps/unix/sysv/linux/bits/time.h (CLOCKS_PER_SEC): Likewise.
	* sysdeps/unix/sysv/linux/clock.c (clock): _Static_assert
	CLOCKS_PER_SEC == 1000000.
	* time/clocktest.c (main): Replace %ld with %jd and cast to
	intmax_t.

2015-01-05  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/unwind-resume.h: New file.
	* sysdeps/gnu/unwind-resume.c: Include it.
	(libgcc_s_personality): Use PERSONALITY_PROTO macro for the prototype.
	(__gcc_personality_v0): Likewise, and PERSONALITY_ARGS for the callee
	argument list.
	(libgcc_s_resume): Variable renamed to __libgcc_s_resume, made hidden
	global rather than static.
	(_Unwind_Resume): Update user.
	Conditionalize definition on [!HAVE_ARCH_UNWIND_RESUME].
	(init): Likewise.  Renamed to __libgcc_s_init, made hidden global
	rather than static.  Add __attribute__ ((cold)).
	(_Unwind_Resume, __gcc_personality_v0): Update callers.
	* sysdeps/nptl/unwind-forcedunwind.c: Likewise.
	* sysdeps/arm/arm-unwind-resume.S: New file.
	* sysdeps/arm/rt-arm-unwind-resume.S: New file.
	* sysdeps/arm/pt-arm-unwind-resume.S: New file.
	* sysdeps/arm/Makefile [$(subdir) = csu]
	(sysdep_routines, shared-only-routines): Add arm-unwind-resume.
	[$(subdir) = rt] (librt-sysdep_routines, librt-shared-only-routines):
	Add rt-arm-unwind-resume.
	[$(subdir) = nptl]
	(libpthread-sysdep_routines, libpthread-shared-only-routines):
	Add pt-arm-unwind-resume.
	* sysdeps/unix/sysv/linux/arm/unwind-resume.c: File removed.
	* sysdeps/unix/sysv/linux/arm/unwind-forcedunwind.c: File removed.

2015-01-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__feholdexcept): Declare.  Use
	libm_hidden_proto.
	* math/feholdexcpt.c (feholdexcept): Rename to __feholdexcept and
	define as weak alias of __feholdexcept.  Use libm_hidden_weak.
	* sysdeps/aarch64/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/alpha/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/arm/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/hppa/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/i386/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/ia64/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/m68k/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/mips/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/powerpc/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/powerpc/nofpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feholdexcpt.c
	(feholdexcept): Likewise.
	* sysdeps/s390/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/sh/sh4/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/sparc/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/x86_64/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/generic/math_private.h (default_libc_feholdexcept): Use
	__feholdexcept instead of feholdexcept.
	(default_libc_feholdexcept_setround): Likewise.

2015-01-05  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/memset.S (memset): Modify for mips32r6/mips64r6
	to avoid using stl/str to align destination.

2015-01-05  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/memcpy.S: Add support for mips32r6/mips64r6.

2015-01-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17796]
	* sysdeps/unix/sysv/linux/mips/mips64/n64/posix_fadvise.c
	[!SHLIB_COMPAT(libc, GLIBC_2_2, GLIBC_2_3_3)] (posix_fadvise64):
	Define as weak alias not strong alias.

2015-01-05  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/dl-machine.h (elf_machine_load_address): Replace
	bltzal with addiupc.
	(RTLD_START): Ditto.

2015-01-05  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/tile/bits/libc-vdso.h: Fix return type
	for __vdso_* functions in declarations.
	* sysdeps/unix/sysv/linux/tile/init-first.c: Likewise for
	definitions.
	* sysdeps/unix/sysv/linux/tile/sysdep.h (INLINE_VSYSCALL,
	INTERNAL_VSYSCALL): Use struct return types to check for error.

	* sysdeps/ieee754/dbl-64/wordsize-64/s_llround.c [!defined _LP64
	&& REGISTER_CAST_INT32_TO_INT64]: Provide explicit lround()
	function with cast from llround().
	* sysdeps/tile/sysdep.h (REGISTER_CAST_INT32_TO_INT64): Define.
	* sysdeps/x86_64/x32/sysdep.h (REGISTER_CAST_INT32_TO_INT64):
	Define.

2015-01-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17793]
	* sysdeps/unix/sysv/linux/arm/posix_fadvise64.c (posix_fadvise64):
	Define as weak alias not strong alias.

	[BZ #17635]
	* ctype/ctype-c99.c: New file.  isblank implementation moved from
	...
	* ctype/ctype-extn.c: ... here.
	(__isblank_l): Move to ...
	* ctype/ctype-c99_l.c: ... here.  New file.
	* ctype/Makefile (routines): Add ctype-c99 and ctype-c99_l.
	* conform/Makefile (test-xfail-ISO99/ctype.h/linknamespace):
	Remove variable.
	(test-xfail-ISO11/ctype.h/linknamespace): Likewise.
	(test-xfail-XPG3/ctype.h/linknamespace): Likewise.
	(test-xfail-XPG4/ctype.h/linknamespace): Likewise.
	(test-xfail-UNIX98/ctype.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/ctype.h/linknamespace): Likewise.

	[BZ #17777]
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fadvise.c
	(posix_fadvise64): Define as weak alias not strong alias.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c
	(posix_fallocate64): Likewise.
	* conform/Makefile (test-xfail-XOPEN2K/fcntl.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/mqueue.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/fcntl.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/mqueue.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/fcntl.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/mqueue.h/linknamespace): Likewise.

2015-01-05  Matthew Fortune  <matthew.fortune@imgtec.com>

	[BZ #16191]
	* NEWS: Mention bug fix.
	* sysdeps/unix/sysv/linux/mips/sys/user.h (PAGE_SHIFT): Remove.
	(PAGE_SIZE, PAGE_MASK, NBPG, UPAGES): Likewise.
	(HOST_TEXT_START_ADDR, HOST_DATA_START_ADDR): Likewise.
	(HOST_STACK_END_ADDR): Likewise.

2015-01-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__fegetround): Declare.  Use libm_hidden_proto.
	* math/fegetround.c (fegetround): Rename to __fegetround and
	define as weak alias of __fegetround.  Use libm_hidden_weak.
	* sysdeps/aarch64/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/alpha/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/arm/fegetround.c (fegetround): Likewise.
	* sysdeps/hppa/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/i386/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/ia64/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/m68k/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/mips/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/fpu/fegetround.c (fegetround): Likewise.
	Undefine after rather than before function definition; use
	parentheses around function name in definition.
	(__fegetround): Also undefine macro after function definition.
	* sysdeps/powerpc/nofpu/fegetround.c (fegetround): Rename to
	__fegetround and define as weak alias of __fegetround.  Use
	libm_hidden_weak.  Do not undefine as macro.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetround.c (fegetround):
	Likewise.
	* sysdeps/s390/fpu/fegetround.c (fegetround): Rename to
	__fegetround and define as weak alias of __fegetround.  Use
	libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/sparc/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/tile/math_private.h (__fegetround): New inline function.
	* sysdeps/x86_64/fpu/fegetround.c (fegetround): Rename to
	__fegetround and define as weak alias of __fegetround.  Use
	libm_hidden_weak.
	* sysdeps/ieee754/dbl-64/e_sqrt.c (__ieee754_sqrt): Use
	__fegetround instead of fegetround.

	[BZ #17782]
	* sysdeps/unix/sysv/linux/mips/bits/termios.h (TIOCSER_TEMT):
	Condition macro definition on [__USE_MISC].

	[BZ #17781]
	* sysdeps/unix/sysv/linux/mips/bits/sigaction.h
	(struct sigaction): Change type of sa_flags field to int.

	[BZ #17780]
	* sysdeps/unix/sysv/linux/mips/bits/fcntl.h (struct flock)
	[!__USE_FILE_OFFSET64 && _MIPS_SIM != _ABI64]: Rename pad field to
	__glibc_reserved0.

	* nptl/version.c (banner): Use single year in copyright notice.

	* NEWS: Update copyright dates.
	* catgets/gencat.c (print_version): Likewise.
	* csu/version.c (banner): Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/pcprofiledump.c (print_version): Likewise.
	* debug/xtrace.sh (do_version): Likewise.
	* elf/ldconfig.c (print_version): Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/pldd.c (print_version): Likewise.
	* elf/sotruss.sh: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* iconv/iconv_prog.c (print_version): Likewise.
	* iconv/iconvconfig.c (print_version): Likewise.
	* locale/programs/locale.c (print_version): Likewise.
	* locale/programs/localedef.c (print_version): Likewise.
	* login/programs/pt_chown.c (print_version): Likewise.
	* malloc/memusage.sh (do_version): Likewise.
	* malloc/memusagestat.c (print_version): Likewise.
	* malloc/mtrace.pl: Likewise.
	* manual/libc.texinfo: Likewise.
	* nptl/version.c (banner): Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* nss/getent.c (print_version): Likewise.
	* nss/makedb.c (print_version): Likewise.
	* posix/getconf.c (main): Likewise.
	* scripts/test-installation.pl: Likewise.
	* sysdeps/unix/sysv/linux/lddlibc4.c (main): Likewise.

2015-01-02  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/armv7/configure: Removed.
	* sysdeps/arm/armv7/configure.ac: Likewise.

2015-01-02  Joseph Myers  <joseph@codesourcery.com>

	* All files with FSF copyright notices: Update copyright dates
	using scripts/update-copyrights.
	* intl/plural.c: Regenerated.
	* locale/programs/charmap-kw.h: Likewise.
	* locale/programs/locfile-kw.h: Likewise.

2015-01-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/gen-posix-conf-vars.awk (END): Don't use sprintf.

2014-12-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17748]
	* include/fenv.h (__fegetenv): Use libm_hidden_proto.
	* math/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/aarch64/fpu/fegetenv.c (fegetenv): Rename to __fegetenv
	and define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/alpha/fpu/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/arm/fegetenv.c (fegetenv): Rename to __fegetenv and
	define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/hppa/fpu/fegetenv.c (fegetenv): Likewise.
	* sysdeps/i386/fpu/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/ia64/fpu/fegetenv.c (fegetenv): Rename to __fegetenv and
	define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/m68k/fpu/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/mips/fpu/fegetenv.c (fegetenv): Rename to __fegetenv and
	define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/powerpc/fpu/fegetenv.c (__fegetenv): Use
	libm_hidden_def.
	* sysdeps/powerpc/nofpu/fegetenv.c (__fegetenv): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetenv.c (__fegetenv):
	Likewise.
	* sysdeps/s390/fpu/fegetenv.c (fegetenv): Rename to __fegetenv and
	define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Likewise.
	* sysdeps/sparc/fpu/fegetenv.c (__fegetenv): Use libm_hidden_def.
	* sysdeps/tile/math_private.h (__fegetenv): New inline function.
	* sysdeps/x86_64/fpu/fegetenv.c (fegetenv): Rename to __fegetenv
	and define as weak alias of __fegetenv.  Use libm_hidden_weak.
	* sysdeps/generic/math_private.h (libc_feholdsetround_ctx): Use
	__fegetenv instead of fegetenv.
	(libc_feholdsetround_noex_ctx): Likewise.

2014-12-31  Matthew Fortune  <matthew.fortune@imgtec.com>

	* elf/elf.h (PT_MIPS_ABIFLAGS): Define.
	(Elf_MIPS_ABIFlags_v0): New structure.
	(EF_MIPS_FP64): Define.
	(MIPS_AFL_REG_NONE, MIPS_AFL_REG_32, MIPS_AFL_REG_64): Likewise.
	(MIPS_AFL_REG_128, MIPS_AFL_ASE_DSP, MIPS_AFL_ASE_DSP64): Likewise.
	(MIPS_AFL_ASE_DSPR2, MIPS_AFL_ASE_EVA, MIPS_AFL_ASE_MCU): Likewise.
	(MIPS_AFL_ASE_MDMX, MIPS_AFL_ASE_MIPS3D, MIPS_AFL_ASE_MT): Likewise.
	(MIPS_AFL_ASE_SMARTMIPS, MIPS_AFL_ASE_VIRT): Likewise.
	(MIPS_AFL_ASE_VIRT64, MIPS_AFL_ASE_MSA, MIPS_AFL_ASE_MSA64): Likewise.
	(MIPS_AFL_ASE_MIPS16, MIPS_AFL_ASE_MICROMIPS): Likewise.
	(MIPS_AFL_ASE_XPA, MIPS_AFL_EXT_XLR, MIPS_AFL_EXT_OCTEON2): Likewise.
	(MIPS_AFL_EXT_OCTEONP, MIPS_AFL_EXT_LOONGSON_3A): Likewise.
	(MIPS_AFL_EXT_OCTEON, MIPS_AFL_EXT_5900, MIPS_AFL_EXT_4010): Likewise.
	(MIPS_AFL_EXT_4100, MIPS_AFL_EXT_3900, MIPS_AFL_EXT_10000): Likewise.
	(MIPS_AFL_EXT_SB1, MIPS_AFL_EXT_4111, MIPS_AFL_EXT_4120): Likewise.
	(MIPS_AFL_EXT_5400, MIPS_AFL_EXT_5500): Likewise.
	(MIPS_AFL_EXT_LOONGSON_2E, MIPS_AFL_EXT_LOONGSON_2F): Likewise.
	(Val_GNU_MIPS_ABI_FP_ANY, Val_GNU_MIPS_ABI_FP_DOUBLE): New enum values.
	(Val_GNU_MIPS_ABI_FP_SINGLE, Val_GNU_MIPS_ABI_FP_SOFT): Likewise.
	(Val_GNU_MIPS_ABI_FP_OLD_64, Val_GNU_MIPS_ABI_FP_XX): Likewise.
	(Val_GNU_MIPS_ABI_FP_64, Val_GNU_MIPS_ABI_FP_64A): Likewise.
	(Val_GNU_MIPS_ABI_FP_MAX): Likewise.
	* sysdeps/mips/Makefile [subdir=elf]: Add tst-abi-interlink,
	tst-mode-switch-1, tst-mode-switch-2, tst-mode-switch-3 tests.
	* sysdeps/mips/bits/linkmap.h (struct link_map_machine): Add fpmode
	field.
	* sysdeps/mips/dl-machine.h (elf_machine_matches_host): Reject
	EF_MIPS_FP64.
	* sysdeps/mips/dl-machine-reject-phdr.h: New file.
	* sysdeps/mips/tst-abi-fp32mod.c: Likewise.
	* sysdeps/mips/tst-abi-fpxxmod.c: Likewise.
	* sysdeps/mips/tst-abi-fpxxomod.c: Likewise.
	* sysdeps/mips/tst-abi-fp64mod.c: Likewise.
	* sysdeps/mips/tst-abi-fp64amod.c: Likewise.
	* sysdeps/mips/tst-abi-interlink.c: Likewise.
	* sysdeps/mips/tst-mode-switch-1.c: Likewise.
	* sysdeps/mips/tst-mode-switch-2.c: Likewise.
	* sysdeps/mips/tst-mode-switch-3.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/configure.ac (o32-fpabi): Define to
	record the current FP ABI extension.
	(mips-mode-switch): Define to show if kernel headers support mode
	switching.
	* sysdeps/unix/sysv/linux/mips/configure: Regenerate.
	* sysdeps/unix/sysv/linux/mips/ldsodefs.h: Increase maximum
	supported SYSV ABI version to 3.
	* sysdeps/unix/sysv/linux/mips/libc-abis: Add new MIPS_O32_FP64
	feature.

2014-12-31  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strcpy.S (strcpy): Optimize unaligned
	path.
	* benchtests/bench-strcpy.c (test_main): Add more unaligned inputs.

2014-12-31  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/bits/fenvinline.h (fegetround): Rename macro to
	__fegetround and redefine to call __fegetround.  Remove condition
	on [!__NO_MATH_INLINES].
	* sysdeps/powerpc/fpu/fenv_libc.h (__fegetround): Remove inline
	function.
	* sysdeps/powerpc/nofpu/fenv_libc.h: Remove file.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_libc.h (__fegetround):
	Remove macro.
	* sysdeps/ieee754/ldbl-128ibm/s_llrintl.c: Include <fenv.h>
	instead of <fenv_libc.h>.
	(__llrintl): Call fegetround instead of __fegetround.
	* sysdeps/ieee754/ldbl-128ibm/s_llroundl.c: Include <fenv.h>
	instead of <fenv_libc.h>.
	* sysdeps/ieee754/ldbl-128ibm/s_lrintl.c: Likewise.
	(__lrintl): Call fegetround instead of __fegetround.
	* sysdeps/ieee754/ldbl-128ibm/s_lroundl.c: Include <fenv.h>
	instead of <fenv_libc.h>.
	* sysdeps/ieee754/ldbl-128ibm/s_rintl.c: Likewise.
	(__rintl): Call fegetround instead of __fegetround.

2014-12-31  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/gen-posix-conf-vars.awk: Don't use multi-dimensional
	arrays.

2014-12-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17775]
	* sysdeps/i386/dl-machine.h (PI_STATIC_AND_HIDDEN): Removed.
	(elf_machine_dynamic) [!PI_STATIC_AND_HIDDEN]: Likewise.
	(elf_machine_load_address) [!PI_STATIC_AND_HIDDEN]: Likewise.

2014-12-30  Andrew Senkevich  <andrew.senkevich@intel.com>

	* sysdeps/i386/tls-macros.h: Include <features.h>.
	(TLS_LE): Use non-PIC version for GCC >= 5.0.
	(TLS_IE): Likewise.
	(TLS_LD): Likewise.
	(TLS_GD): Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (check_consistency): Don't
	define for GCC >= 5.0.

2014-12-30  Chris Metcalf  <cmetcalf@ezchip.com>

	* math/test-fenv.c (test_single_exception, set_single_exc,
	feenv_nomask_test, feenv_mask_test, feexcp_nomask_test,
	feexcp_mask_test, feenable_test, fe_single_test): Add
	[!FE_ALL_EXCEPT] test so these routines are not compiled in the
	case where they are not used.
	* math/libm-test.inc: Likewise.
	* setjmp/test-setjmp-fp.c: Mark attribute ((unused)) on variable
	unused in the absence of FP rounding/exception support.
	* stdio-common/tst-printf-round.c: Likewise.
	* stdlib/tst-strtod-round.c: Likewise.
	* stdlib/tst-strtod-underflow.c: Likewise.

2014-12-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17723]
	* include/fenv.h (__feraiseexcept): Use libm_hidden_proto.
	* math/fraiseexcpt.c (__feraiseexcept): Use libm_hidden_def.
	* sysdeps/aarch64/fpu/fraiseexcpt.c (feraiseexcept): Rename to
	__feraiseexcept and define as weak alias of __feraiseexcept.  Use
	libm_hidden_weak.
	* sysdeps/arm/fraiseexcpt.c (feraiseexcept): Likewise.
	* sysdeps/hppa/fpu/fraiseexcpt.c (feraiseexcept): Likewise.
	* sysdeps/i386/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.
	* sysdeps/ia64/fpu/fraiseexcpt.c (feraiseexcept): Rename to
	__feraiseexcept and define as weak alias of __feraiseexcept.  Use
	libm_hidden_weak.
	* sysdeps/m68k/coldfire/fpu/fraiseexcpt.c (feraiseexcept):
	Likewise.
	* sysdeps/microblaze/math_private.h (__feraiseexcept): New macro.
	* sysdeps/mips/fpu/fraiseexcpt.c (feraiseexcept): Rename to
	__feraiseexcept and define as weak alias of __feraiseexcept.  Use
	libm_hidden_weak.
	* sysdeps/powerpc/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.
	* sysdeps/powerpc/nofpu/fraiseexcpt.c (__feraiseexcept): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fraiseexcpt.c
	(__feraiseexcept): Likewise.
	* sysdeps/s390/fpu/fraiseexcpt.c (feraiseexcept): Rename to
	__feraiseexcept and define as weak alias of __feraiseexcept.  Use
	libm_hidden_weak.
	* sysdeps/sh/sh4/fpu/fraiseexcpt.c (feraiseexcept): Likewise.
	* sysdeps/sparc/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.
	* sysdeps/tile/math_private.h (__feraiseexcept): New macro.
	* sysdeps/unix/sysv/linux/alpha/fraiseexcpt.S (__feraiseexcept):
	Use libm_hidden_def.
	* sysdeps/x86_64/fpu/fraiseexcpt.c (__feraiseexcept): Use
	libm_hidden_def.
	(feraiseexcept): Define as weak not strong alias.  Use
	libm_hidden_weak.
	* sysdeps/x86/fpu/bits/fenv.h (__feraiseexcept_invalid_divbyzero):
	New inline function.  Factored out of ...
	(feraiseexcept): ... here.  Use __feraiseexcept_invalid_divbyzero.
	* sysdeps/x86/fpu/include/bits/fenv.h: New file.
	* math/e_scalb.c (invalid_fn): Call __feraiseexcept instead of
	feraiseexcept.
	* math/w_acos.c (__acos): Likewise.
	* math/w_asin.c (__asin): Likewise.
	* math/w_ilogb.c (__ilogb): Likewise.
	* math/w_j0.c (y0): Likewise.
	* math/w_j1.c (y1): Likewise.
	* math/w_jn.c (yn): Likewise.
	* math/w_log.c (__log): Likewise.
	* math/w_log10.c (__log10): Likewise.
	* sysdeps/aarch64/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/aarch64/fpu/math_private.h
	(libc_feupdateenv_test_aarch64): Likewise.
	* sysdeps/alpha/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/arm/fenv_private.h (libc_feupdateenv_test_vfp): Likewise.
	* sysdeps/arm/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/ia64/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/m68k/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/mips/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/powerpc/fpu/e_sqrt.c (__slow_ieee754_sqrt): Likewise.
	* sysdeps/s390/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sh/sh4/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c (__feupdateenv): Likewise.

2014-12-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17732]
	* io/test-utime.c (main): Replace %ld with %jd and cast to
	intmax_t.
	* libio/tst-ftell-active-handler.c (do_append_test): Likewise.
	* nptl/tst-mutex5.c: Include <stdint.h>.
	(do_test): Replace %ld with %jd and cast to intmax_t.
	* posix/tst-regex.c (run_test): Likewise.
	(run_test_backwards): Likewise.
	* rt/tst-clock.c: Include <stdint.h>.
	(clock_test): Replace %ld with %jd and cast to intmax_t.
	* rt/tst-cpuclock1.c: Include <stdint.h>.
	(do_test): Replace %lu with %ju and cast to uintmax_t.
	* rt/tst-cpuclock2.c: Include <stdint.h>.
	(do_test): Replace %lu with %ju and cast to uintmax_t.
	* rt/tst-mqueue1.c: Include <stdint.h>.
	(check_attrs): Replace %ld with %jd and cast to intmax_t.
	* rt/tst-mqueue3.c (fct): Replace %ld with %jd and cast to
	intmax_t.
	* rt/tst-mqueue4.c (do_test): Likewise.
	* rt/tst-timer4.c: Include <stdint.h>.
	(check_ts): Replace %ld with %jd and cast to intmax_t.
	(do_test): Likewise.
	* stdio-common/tst-fmemopen2.c (do_test): Replace %ld with %jd
	and cast to intmax_t.
	* sysdeps/pthread/tst-timer.c (main): Likewise.
	* time/clocktest.c (main): Likewise.
	* time/tst-posixtz.c (do_test): Likewise.
	* timezone/tst-timezone.c (main): Likewise.

2014-12-30  Andrew Senkevich  <andrew.senkevich@intel.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/bcopy-sse2-unaligned.S: New file.
	* sysdeps/i386/i686/multiarch/memcpy-sse2-unaligned.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove-sse2-unaligned.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy-sse2-unaligned.S: Likewise.
	* sysdeps/i386/i686/multiarch/bcopy.S: Select the sse2_unaligned
	version if bit_Fast_Unaligned_Load is set.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	bcopy-sse2-unaligned, memcpy-sse2-unaligned,
	memmove-sse2-unaligned and mempcpy-sse2-unaligned.
	* sysdeps/i386/i686/multiarch/ifunc-impl-list.c (MAX_IFUNC): Set
	to 4.
	(__libc_ifunc_impl_list): Test __bcopy_sse2_unaligned,
	__memmove_chk_sse2_unaligned, __memmove_sse2_unaligned,
	__memcpy_chk_sse2_unaligned, __memcpy_sse2_unaligned,
	__mempcpy_chk_sse2_unaligned, and __mempcpy_sse2_unaligned.

2014-12-29  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/tst-setgetname.c (do_test): Use #ifndef
	instead of #if to avoid a Wundef warning.
	* stdlib/tst-limits.c (do_test): Likewise.

	* sysdeps/tile/math_private.h (fetestexcept): Add macro to
	parallel other exception macros.
	(fegetenv): Convert from macro to extern inline so that it applies
	retroactively to inline functions already seen by the compiler.
	(fesetenv, feupdateenv, fegetround, fesetround): Likewise.

	* posix/Makefile (before-compile): Use $(objpfx) for
	posix-conf-vars-def.h.

2014-12-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* posix/getconf.c (main): Use size_t for type of I.
	* scripts-gen-posix-conf-vars.awk (END): Use size_t for type of
	NSPEC.

	* posix/posix-conf-vars.list (SPEC:XBS5): Add sysconf prefix.
	* posix/confstr.c: Define NEED_SPEC_ARRAY to 0.
	* posix/posix-envs.def: Likewise.
	* sysdeps/posix/sysconf.c: Likewise.
	* posix/getconf.c: Define NEED_SPEC_ARRAY to 1.
	(specs): Remove array.
	* scripts/gen-posix-conf-vars.awk: Support generation of specs
	array.

	* posix/posix-conf-vars.list: Add _POSIX sysconf namespace.
	* sysdeps/posix/sysconf.c: Include posix-conf-vars.h.
	(__sysconf): Use CONF_IS_* macros.

	* posix/Makefile (before-compile): Add posix-conf-vars-def.h.
	($(objpfx)posix-conf-vars-def.h): New target.
	* posix/posix-conf-vars.list: New file.
	* posix/posix-conf-vars.h: New file.
	* posix/confstr.c: Include posix-conf-vars.h.
	(confstr): Use CONF_IS_* macros.
	* posix/posix-envs.def: Include posix-conf-vars.h.  Use
	CONF_IS_* macros.
	* scripts/gen-posix-conf-vars.awk: New file.

2014-12-26  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/math_private.h (fegetenv, fesetenv, feupdateenv,
	fegetround): Add no-op macros to avoid linknamespace issues.

	* sysdeps/unix/sysv/linux/clock_settime.c (SYSDEP_SETTIME): Remove
	definitions of INTERNAL_VSYSCALL and INLINE_VSYSCALL.

	* sysdeps/unix/sysv/linux/tile/sysdep.h
	(HAVE_CLOCK_GETTIME_VSYSCALL): Move definition out of
	assembly-specific section to avoid a redefinition warning.

	* sysdeps/tile/jmpbuf-unwind.h (_JMPBUF_CFA_UNWINDS_ADJ): Cast to
	long before casting to pointer to avoid a cast warning.

2014-12-23  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/tilegx/Implies: New file.

2014-12-23  Richard Earnshaw  <rearnsha@arm.com>

	* string/stpcpy.c (__stpcpy): Rewrite using strlen and memcpy.

2014-12-23  Florian Weimer  <fweimer@redhat.com>

	* iconvdata/run-iconv-test.sh: Actually test iconv modules.

2014-12-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_UTIMES): Do
	not define.
	* sysdeps/unix/sysv/linux/utimes.c: Do not include
	<kernel-features.h>.
	(__utimes) [__NR_utimes]: Make code unconditional.
	(__utimes) [!__ASSUME_UTIMES]: Remove conditional code.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_UTIMES): Do not undefine.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_UTIMES): Likewise.
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	(__ASSUME_UTIMES): Define for [__LINUX_KERNEL_VERSION >= 0x030e00]
	instead of undefining for [__LINUX_KERNEL_VERSION < 0x030e00].
	* sysdeps/unix/sysv/linux/hppa/utimes.c: New file.

2014-12-22  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/memcpy.S: Fix preprocessor indentation.

2014-12-22  Chris Metcalf  <cmetcalf@ezchip.com>

	[BZ #17747]
	* math/w_j0.c [defined NO_LONG_DOUBLE] (j0, y0): Convert strong
	alias to weak alias for j0l, y0l.
	* math/w_j1.c [defined NO_LONG_DOUBLE] (j1, y1): Likewise.
	* math/w_jn.c [defined NO_LONG_DOUBLE] (jn, yn): Likewise.

	[BZ #17746]
	* sysdeps/tile/tilegx/strstr.c (STRSTR2): Remove implicit boolean
	conversion.

2014-12-22  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/unix/mips/sysdep.h (__mips_isa_rev): Set
	to zero if not already defined.

2014-12-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17724]
	* sysdeps/ieee754/k_standard.c: Don't include <float.h>.
	(__kernel_standard_f): Remove.  Moved to k_standardf.c.
	(__kernel_standard_l): Remove.  Moved to k_standardl.c with
	(char *) casts added.
	* sysdeps/ieee754/k_standardf.c: New file.
	* sysdeps/ieee754/k_standardl.c: Likewise.
	* math/Makefile (libm-support): Remove k_standard.
	(libm-calls): Add k_standard.

2014-12-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/feenablxcpt.c (feenableexcept):
	Optimize to avoid an unnecessary FPCR read.

2014-12-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv):
	Optimize to reduce FPCR/FPSR accesses.

2014-12-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/ftestexcept.c (fetestexcept):
	Call libc_fetestexcept_aarch64.

2014-12-22  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fesetround.c (fesetround):
	Call libc_fesetround_aarch64.

2014-12-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17733]
	* sysdeps/unix/sysv/linux/bind.S (NO_WEAK_ALIAS): Do not define.
	(__bind): Do not define as weak alias.
	* sysdeps/unix/sysv/linux/getsockname.S (NO_WEAK_ALIAS): Do not
	define.
	(__getsockname): Do not define as weak alias.

2014-12-22  Will Newton  <will.newton@linaro.org>

	* manual/install.texi: Document that we require bison 2.7
	or above.
	* INSTALL: Regenerate.
	* configure.ac: Use AC_CHECK_PROG_VER instead of
	AC_PATH_PROG when checking for bison and check for
	version 2.7 or above.
	* configure: Regenerate.

2014-12-21  Chris Metcalf  <cmetcalf@ezchip.com>

	[BZ #17745]
	* sysdeps/tile/ffs.c (__ffs): Moved ffsll definition...
	* sysdeps/tile/ffsll.c (ffsll): To here.

	* sysdeps/unix/sysv/linux/tile/localplt.data: Removed.

2014-12-21  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-tls.c (__tls_get_addr): Provide the hidden definition
	if not defined.
	* sysdeps/i386/dl-tls.h (___tls_get_addr): Provide the hidden
	definition.
	* sysdeps/i386/dl-tlsdesc.S (_dl_tlsdesc_dynamic): Call the
	hidden ___tls_get_addr.
	* sysdeps/x86_64/dl-tlsdesc.S (_dl_tlsdesc_dynamic): Call the
	hidden __tls_get_addr.
	* sysdeps/generic/localplt.data (__tls_get_addr): Removed.
	* sysdeps/unix/sysv/linux/i386/localplt.data (___tls_get_addr):
	Likewise.

2014-12-21  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/dl-machine.h (RTLD_START): Remove @PLTPC from
	_dl_init call.

2014-12-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/dl-machine.h (_dl_start_user): Remove @PLT
	from "call _dl_init@PLT".
	* sysdeps/x86_64/dl-machine.h (_dl_start_user): Likewise.

2014-12-21  Anders Kaseorg  <andersk@mit.edu>

	* manual/search.texi: (Array Sort Function): Clarify stable sorting
	guarantees.

2014-12-20  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/unix/sysv/linux/tile/localplt.data: New file.

2014-12-19  Chris Metcalf  <cmetcalf@ezchip.com>

	[BZ #17744]
	* sysdeps/tile/tilegx/strstr.c (STRSTR): Call __strnlen, not
	strnlen.

2014-12-19  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/addmul_1.S (__mpn_addmul_1): Use mulu/muhu instead
	of multu on MIPSr6.
	* sysdeps/mips/mul_1.S (__mpn_mul_1): Ditto.
	* sysdeps/mips/submul_1.S (__mpn_submul_1): Ditto.
	* sysdeps/mips/mips64/addmul_1.S (__mpn_addmul_1): Ditto.
	* sysdeps/mips/mips64/mul_1.S (__mpn_mul_1): Ditto.
	* sysdeps/mips/mips64/submul_1.S (__mpn_submul_1): Ditto.

2014-12-19  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/sys/asm.h (PTR_ADDU): Use addu on mips32r6/mips64r6.
	(PTR_ADDIU): Use addiu for mips32r6/mips64r6.
	(PTR_SUBU): Use subu for mips32r6/mips64r6.
	(PTR_SUBIU): Use subu for mips32r6/mips64r6 (subiu does not exist).
	* sysdeps/mips/machine-gmon.h (PTR_ADDU_STRING) Use addu for
	mips32r6/mips64r6.
	(PTR_SUBU_STRING) Use subu for mips32r6/mips64r6.

2014-12-19  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* string/strncat.c (STRNCAT): Simplify implementation.

2014-12-19  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/soft-fp/q_neg.c (_Q_neg): Use a union to
	access the quad as both a long double and as a series of 4 words.

	* get-dynamic-info.h (elf_get_dynamic_info): Ignore -Warray-bounds for a
	link_map->l_info array access.

2014-12-19  Chris Metcalf  <cmetcalf@ezchip.com>

	* iconvdata/tst-loading.c (TIMEOUT): Increase timeout 10 sec.

	* math/atest-exp.c (TIMEOUT): Increase timeout to 10 sec.
	* math/atest-exp2.c (TIMEOUT): Likewise.
	* math/atest-sincos.c (TIMEOUT): Likewise.

2014-12-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/Makefile (CFLAGS-s_llround.c): Replace
	-Wno-error with -fno-builtin-lround.

2014-12-19  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/i386/lowlevellock-futex.h: New file.
	Contains futex constants and functions moved over from ...
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: ... here.  Include
	<lowlevellock-futex.h>.
	(lll_wait_tid): Use lll_futex_wait instead of assembly code.
	(lll_timedwait_tid): Add comments and parentheses around macro
	arguments.

2014-12-19  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Include
	<lowlevellock-futex.h>.  Remove FUTEX_* constants defined there.
	(__lll_private_flag): Remove.
	(lll_futex_wait): Likewise.
	(lll_futex_timed_wait): Likewise.
	(lll_futex_wake): Likewise.
	(lll_futex_requeue): Likewise.
	(lll_wait_tid): Use lll_futex_wait instead of assembly code.
	(__lll_timedwait_tid): Spell out argument names.
	(lll_timedwait_tid): Add comments and parentheses around macro
	arguments.
	* sysdeps/unix/sysv/linux/lowlevellock-futex.h: Make FUTEX_* constants,
	LLL_SHARED and LLL_PRIVATE usable from assembly code.

2014-12-19  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/sh/libc-lowlevellock.S: Remove file.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevelrobustlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_barrier_wait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_cond_broadcast.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_cond_signal.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_cond_timedwait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_cond_wait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedrdlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedwrlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_rdlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_unlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_wrlock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sem_post.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sem_timedwait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sem_trywait.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sem_wait.S: Likewise.

2014-12-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/Makefile: New file.

2014-12-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/ldbl2mpn.c (__mpn_extract_long_double): Replace
	1L with (mp_limb_t) 1.

2014-12-17  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nptl/fork.c (__fork_generation_pointer): Variable moved ...
	* nptl/libc_pthread_init.c: ... here.
	* sysdeps/nptl/fork.c (__fork_handlers): Variable moved ...
	* nptl/register-atfork.c: ... here.

	* sysdeps/nptl/gai_misc.h (__gai_start_notify_thread):
	Use pthread_sigmask rather than INTERNAL_SYSCALL.
	Use assert_perror to check its return value.
	(__gai_create_helper_thread): Likewise.

	* inet/if_index.c (__if_freenameindex): Add libc_hidden_def.

	* malloc/malloc.c (alloc_perturb, free_perturb): Remove inline keyword.

2014-12-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17725]
	* sysdeps/generic/profil-counter.h (profil_counter): Rename to
	__profil_counter.
	* sysdeps/unix/sysv/linux/hppa/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/profil-counter.h
	(profil_counter): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/profil-counter.h
	(profil_counter): Likewise.
	* sysdeps/unix/sysv/linux/sh/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/profil-counter.h (profil_counter):
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/profil-counter.h
	(profil_counter): Likewise.
	* sysdeps/unix/sysv/linux/arm/profil-counter.h (profil_counter):
	Likewise.
	[!__profil_counter] (profil_counter): Define as weak alias of
	__profil_counter.
	* sysdeps/unix/sysv/linux/sparc/sparc32/profil-counter.h
	(profil_counter): Rename to __profil_counter.
	[!__profil_counter] (profil_counter): Define as weak alias of
	__profil_counter.
	* sysdeps/unix/sysv/linux/sparc/sparc64/profil-counter.h
	(profil_counter): Rename to __profil_counter.
	[!__profil_counter] (profil_counter): Define as weak alias of
	__profil_counter.
	* sysdeps/posix/profil.c: Update comment referring to
	profil_counter.
	(__profil): Use __profil_counter instead of profil_counter.
	* sysdeps/posix/sprofil.c (profil_counter): Rename to
	__profil_counter.  Use __profil_counter_ushort and
	__profil_counter_uint in definitions.
	(__sprofil): Use __profil_counter_uint and __profil_counter_ushort
	instead of profil_counter_uint and profil_counter_ushort.

	[BZ #17722]
	* inet/inet_mkadr.c (inet_makeaddr): Rename to __inet_makeaddr and
	define as weak alias of __inet_makeaddr.
	* resolv/inet_addr.c (inet_addr): Rename to __inet_addr and define
	as weak alias of __inet_addr.
	* resolv/inet_pton.c (inet_pton): Rename to __inet_pton and define
	as weak alias of __inet_pton.  Use libc_hidden_weak.
	* include/arpa/inet.h (__inet_pton): Declare.  Use
	libc_hidden_proto.
	(inet_makeaddr): Don't use libc_hidden_proto.
	(__inet_makeaddr): Declare.  Use libc_hidden_proto.
	* resolv/res_init.c (__res_vinit): Use __inet_pton instead of
	inet_pton.  Use __inet_makeaddr instead of inet_makeaddr.
	* conform/Makefile (test-xfail-POSIX/pthread.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX/sched.h/linknamespace): Likewise.
	(test-xfail-POSIX/time.h/linknamespace): Likewise.

2014-12-17  Steve Ellcey  <sellcey@imgtec.com>

	* inet/getnetgrent_r.c: Move while loop to be inside if statement.

2014-12-17  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* stdio-common/bug-vfprintf-nargs.c (do_test):
	Cast value to intptr_t to avoid format warning
	for usage with PRIdPTR printing macro.

2014-12-17  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* libio/tst-widetext.c (do_test):
	Use format type %td instead of %Zd for ptrdiff_t
	in order to avoid format warning.

2014-12-17  Andreas Schwab  <schwab@suse.de>

	* nscd/mem.c (gc): Add size_t cast to match printf format.

2014-12-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/gnu/unwind-resume.c: #include <sysdep.h>.
	(init): Apply PTR_MANGLE to pointers before storing them.
	(_Unwind_Resume, __gcc_personality_v0): Apply PTR_DEMANGLE to pointers
	before using them.

2014-12-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17719]
	* sysdeps/x86_64/memrchr.S (memrchr): Rename to __memrchr and
	define as weak alias of __memrchr.
	(__memrchr): Do not define as strong alias of memrchr.
	* conform/Makefile (test-xfail-XPG4/libgen.h/linknamespace):
	Remove variable.
	(test-xfail-UNIX98/libgen.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/libgen.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/libgen.h/linknamespace): Likewise.

	[BZ #17717]
	* inet/if_index.c (if_nametoindex): Rename to __if_nametoindex and
	define as weak alias of __if_nametoindex.  Use libc_hidden_weak.
	(if_indextoname): Rename to __if_indextoname and define as weak
	alias of __if_indextoname.  Use libc_hidden_weak.
	(if_freenameindex): Rename to __if_freenameindex and define as
	weak alias of __if_freenameindex.
	(if_nameindex): Rename to __if_nameindex and define as weak alias
	of __if_nameindex.
	* sysdeps/mach/hurd/if_index.c (if_nametoindex): Rename to
	__if_nametoindex and define as weak alias of __if_nametoindex.
	Use libc_hidden_weak.
	(if_freenameindex): Rename to __if_freenameindex and define as
	weak alias of __if_freenameindex.
	(if_nameindex): Rename to __if_nameindex and define as weak alias
	of __if_nameindex.
	(if_indextoname): Rename to __if_indextoname and define as weak
	alias of __if_indextoname.  Use libc_hidden_weak.
	* sysdeps/unix/sysv/linux/if_index.c (if_nametoindex): Rename to
	__if_nametoindex and define as weak alias of __if_nametoindex.
	Use libc_hidden_weak.
	(if_freenameindex): Rename to __if_freenameindex and define as
	weak alias of __if_freenameindex.  Use libc_hidden_weak.
	(if_nameindex_netlink): Use __if_freenameindex instead of
	if_freenameindex.
	(if_nameindex): Rename to __if_nameindex and define as weak alias
	of __if_nameindex.  Use libc_hidden_weak.
	(if_indextoname): Rename to __if_indextoname and define as weak
	alias of __if_indextoname.  Use libc_hidden_weak.
	* include/net/if.h [!_ISOMAC] (__if_nametoindex): Declare and use
	libc_hidden_proto.
	[!_ISOMAC] (__if_freenameindex): Likewise.
	* resolv/res_init.c (__res_vinit): Use __if_nametoindex instead of
	if_nametoindex.
	* conform/Makefile (test-xfail-XPG4/grp.h/linknamespace): Remove
	variable.
	(test-xfail-XPG4/pwd.h/linknamespace): Likewise.
	(test-xfail-UNIX98/aio.h/linknamespace): Likewise.
	(test-xfail-UNIX98/grp.h/linknamespace): Likewise.
	(test-xfail-UNIX98/pthread.h/linknamespace): Likewise.
	(test-xfail-UNIX98/pwd.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sched.h/linknamespace): Likewise.
	(test-xfail-UNIX98/time.h/linknamespace): Likewise.

	* conform/Makefile (test-xfail-UNIX98/semaphore.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/semaphore.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/semaphore.h/linknamespace): Likewise.

2014-12-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/res_send.c (__libc_res_nsend): Disable warning 'array
	subscript above bounds'

	* resolv/res_send.c (__libc_res_nsend): Fix check for nsmap
	bounds.

2014-12-16  Arjun Shankar  <arjun.is@lostca.se>

	* libio/tst-fopenloc.c: Use test-skeleton.c.

	* stdlib/tst-bsearch.c: Use test-skeleton.c.
	(entry): Rename to ITEM.
	(do_test, comp): Adjust.

	* stdio-common/tst-fseek.c: Use test-skeleton.c.

2014-12-16  Torvald Riegel  <triegel@redhat.com>

	* string/tester.c: Include <libc-internal.h>.
	(test_memset): Ignore -Wmemset-transposed-args.

2014-12-16  Torvald Riegel  <triegel@redhat.com>

	* misc/tst-mntent2.c (do_test): Fix warning.

2014-12-16  Torvald Riegel  <triegel@redhat.com>

	* elf/tst-unique4lib.cc(a): Mark as used.

2014-12-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #17630]
	* resolv/nss_dns/dns-network.c (getanswer_r): Iterate over alias
	names.

2014-12-16  Allan McRae  <allan@archlinux.org>

	* stdio-common/Makefile (tests): Re-add bug26.

2014-12-15  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #17657]
	* locale/programs/ld-ctype.c (find_translit2, read_widestring): Return
	static array.

2014-12-15  Bernard Ogden  <bernie.ogden@linaro.org>

	* nptl/lowlevellock.c (__lll_lock_wait_private): Add comments.
	(__lll_lock_wait): Likewise.
	(__lll_timedlock_wait): Likewise.
	(__lll_timedwait_tid): Likewise.
	* nptl/lowlevelrobustlock.c (__lll_robust_lock_wait): Likewise.
	(__lll_robust_timedlock_wait): Likewise.
	* sysdeps/nptl/lowlevellock.h (lll_trylock): Likewise.
	(lll_cond_trylock): Likewise.
	(__lll_lock): Likewise.
	(__lll_robust_lock): Likewise.
	(__lll_cond_lock): Likewise.
	(lll_robust_cond_lock): Likewise.
	(__lll_timedlock): Likewise.
	(__lll_robust_timedlock): Likewise.
	(__lll_unlock): Likewise.
	(__lll_robust_unlock): Likewise.
	(lll_wait_tid): Likewise.
	(lll_timedwait_tid): Likewise.

2014-12-15  Torvald Riegel  <triegel@redhat.com>

	* nptl/tst-sem4.c (do_test): Start with a fresh semaphore state.

2014-12-15  Torvald Riegel  <triegel@redhat.com>

	* nptl/tst-mutex5.c (do_test): Do not skip tests if elision is enabled.

2014-12-15  Adhemerval Zanella  <Azanella@linux.vnet.ibm.com>

	* stdio-common/test-vfprintf.c: Include <libc-internal.h>.
	* stdio-common/tst-sprintf.c: Likewise.

2014-12-15  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/s390/pthread_once.c: Remove file.

2014-12-15  Jeff Law  <law@redhat.com>

	[BZ #16617]
	* stdio-common/vfprintf.c (vfprintf): Allocate large specs array
	on the heap.  (CVE-2012-3406)
	* stdio-common/bug23-2.c, stdio-common/bug23-3.c: New file.
	* stdio-common/bug23-4.c: New file.  Test case by Joseph Myers.
	* stdio-common/Makefile (tests): Add bug23-2, bug23-3, bug23-4.

2014-12-15  Will Newton  <will.newton@linaro.org>

	* manual/install.texi: Bump required version of texinfo
	to 4.7 from 4.5.
	* INSTALL: Regenerated.
	* configure.ac: Check for makeinfo version 4.7 and above.
	* configure: Regenerated.

2014-12-12  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/shm-directory.h (SHM_GET_NAME): Take new argument
	PREFIX, string constant to insert between directory and name.
	* sysdeps/posix/shm_open.c: Update caller.
	* sysdeps/posix/shm_unlink.c: Likewise.
	* nptl/semaphoreP.h (struct mountpoint_info): Type removed.
	(__where_is_shmfs, mountpoint, __namedsem_once): Declarations removed.
	(SEM_SHM_PREFIX): New macro.
	* sysdeps/posix/Makefile (librt-routines): Add shm-directory only if
	[$(have-thread-library) = no].
	* nptl/Makefile (libpthread-routines): Add shm-directory.
	* nptl/Versions (GLIBC_PRIVATE): Add __shm_directory.
	* sysdeps/nptl/shm-directory.h: New file.
	* sysdeps/posix/shm-directory.c
	[IS_IN (libpthread)] (__shm_directory): Add hidden_def.
	* sysdeps/unix/sysv/linux/shm-directory.c: Likewise.
	* nptl/sem_open.c (check_add_mapping): Use munmap function rather than
	INTERNAL_SYSCALL.
	(__where_is_shmfs): Function removed.
	(mountpoint, defaultmount, defaultdir, __namedsem_once):
	Variables removed.
	(sem_open): Use __libc_close function rather than INTERNAL_SYSCALL.
	Use SHM_GET_NAME.
	* nptl/sem_unlink.c: Prototypify.  Use SHM_GET_NAME.

	* sysdeps/nptl/bits/libc-lockP.h [IS_IN (libpthread)]
	(PTFAVAIL, __libc_ptf_call, __libc_ptf_call_always): Define as
	unconditional for use inside libpthread.
	[IS_IN (libpthread)]: Include <nptl/pthreadP.h>.

2014-12-12  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_getaffinity.c: New file.
	* nptl/pthread_setaffinity.c: New file.
	* nptl/pthread_getname.c: New file.
	* nptl/pthread_setname.c: New file.

	* nptl/pthread_create.c (START_THREAD_DEFN)
	[! __ASSUME_SET_ROBUST_LIST]: Add missing & in lll_futex_wake argument.

2014-12-12  Stefan Liebler  <stli@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* resolv/res_send.c (send_vc): Disable warning resplen may
	be used uninitialized.

2014-12-12  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/tst-mutex6.c
	(ATTR_NULL): New define checks ATTR against NULL.
	(do_test): Use !ATTR_NULL instead of ATTR != NULL.
	* nptl/tst-mutexpp6.c (ATTR_NULL): New define.

2014-12-11  James Lemke  <jwlemke@codesourcery.com>

	[BZ #17581]
	* malloc/hooks.c
	(mem2mem_check): Revert my previous change.
	(malloc_check_get_size): Revert my previous change.
	(mem2chunk_check): Revert my previous change.

2014-12-11  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/shm-directory.c: New file.
	* sysdeps/posix/shm-directory.h: New file.
	* sysdeps/posix/Makefile [($(subdir) = rt] (librt-routines): Add it.
	* sysdeps/posix/shm_open.c: Use SHM_GET_NAME.
	Use O_NOFOLLOW and O_CLOEXEC if available.  Transmute EISDIR to EINVAL.
	* sysdeps/posix/shm_unlink.c: Use SHM_GET_NAME.
	Transmute EPERM to EACCES.
	* sysdeps/unix/sysv/linux/shm-directory.c: New file, most code taken
	from ...
	* sysdeps/unix/sysv/linux/shm_open.c: ... here.  File removed.
	* sysdeps/unix/sysv/linux/shm_unlink.c: File removed.

2014-12-11  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/jmpbuf_unwind.h (_jmpbuf_sp): Declare SP as void
	pointer and cast to uintptr_t.
	* sysdeps/sh/nptl/tls.h (TLS_INIT_TP): Use NULL instead of 0.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h (lll_futex_timed_wait):
	Add cast to avoid warning.
	* sysdeps/unix/sysv/linux/sh/register-dump.h: Use 0 instead of NULL.

2014-12-11  Joseph Myers  <joseph@codesourcery.com>

	* nptl/semaphore.h: Move to ...
	* sysdeps/pthread/semaphore.h: ... here.
	* Makefile (installed-headers): Change nptl/semaphore.h to
	sysdeps/pthread/semaphore.h.

2014-12-11  Roland McGrath  <roland@hack.frob.com>

	* misc/tst-error1.c (do_test): Ignore -Wformat-security for
	generated error format strings.

	* stdio-common/tstdiomisc.c (t2): Ignore -Wformat and
	-Wformat-extra-args warnings for scanf formats.
	* stdio-common/scanf4.c (main): Ignore -Wformat-zero-length around
	test of zero-length format (duh).
	* stdio-common/scanf7.c (main): Ignore -Wformat warnings for
	corner-case scanf format test.
	* stdio-common/test-vfprintf.c (do_test): Ignore -Wformat-security for
	generated fprintf format string.
	* stdio-common/tst-sprintf.c (do_test): Ignore -Wformat warnings for
	corner-case sprintf format tests.
	* stdio-common/tst-printf.c: Ignore -Wformat throughout.
	* stdio-common/tst-printfsz.c (main): Ignore -Wformat and
	-Wformat-extra-args warnings throughout.
	* stdio-common/Makefile (CFLAGS-tstdiomisc.c): Variable removed.
	(CFLAGS-scanf4.c): Likewise.
	(CFLAGS-scanf7.c): Likewise.
	(CFLAGS-tst-sprintf.c): Likewise.
	(CFLAGS-tst-printf.c): Likewise.
	(CFLAGS-tst-printfsz.c): Likewise.

2014-12-11  Joseph Myers  <joseph@codesourcery.com>

	* include/cpio.h: New file.
	* include/fmtmsg.h: Likewise.

	* tst-mbswcs1.c (show): Use %zu format instead of %Zd.  Cast
	corresponding format argument to size_t.
	* tst-mbswcs2.c (show): Likewise.  Use %td format for ptrdiff_t
	arguments.
	* tst-mbswcs3.c (show): Use %zu format instead of %Zd.  Cast
	corresponding format argument to size_t.
	* tst-mbswcs4.c (show): Likewise.  Use %td format for ptrdiff_t
	arguments.
	* tst-mbswcs5.c (show): Use %zu format instead of %Zd.  Cast
	corresponding format argument to size_t.
	* tst-trans.c (do_test): Use %lc format for wint_t arguments.
	* Makefile (CFLAGS-tst-mbswcs1.c): Remove variable.
	(CFLAGS-tst-mbswcs2.c): Likewise.
	(CFLAGS-tst-mbswcs3.c): Likewise.
	(CFLAGS-tst-mbswcs4.c): Likewise.
	(CFLAGS-tst-mbswcs5.c): Likewise.
	(CFLAGS-tst-trans.c): Likewise.

2014-12-11  Roland McGrath  <roland@hack.frob.com>

	* posix/regexbug1.c (main): Use "%s" format with regerror results,
	rather than assuming they won't contain any '%'s.

2014-12-11  Chris Metcalf  <cmetcalf@ezchip.com>

	* sysdeps/tile/tilegx/memset.c (__memcpy): Add
	inhibit_loop_to_libcall to avoid recursive calls.
	* sysdeps/tile/tilegx/memcpy.c (__memcpy): Likewise.
	* sysdeps/tile/tilepro/memcpy.c (__memcpy): Likewise.

2014-12-11  Adhemerval Zanella  <Azanella@linux.vnet.ibm.com>

	* include/sys/socket.h (__sendmmsg): Add __USE_GNU guards on function
	prototype.

2014-12-11  Steve Ellcey  <sellcey@imgtec.com>

	* sysdeps/mips/dl-trampoline.c: Modify switch expression to have
	integer value instead of boolean.

2014-12-11  Steve Ellcey  <sellcey@imgtec.com>

	* malloc/malloc.c: Fix powerof2 check.

2014-12-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* locale/programs/locfile.h (maybe_swap_uint32):
	Remove inline and add unused attribute.

2014-12-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_load_address):
	Truncating assembler expression to a .long expression.

2014-12-11  Andreas Schwab  <schwab@suse.de>

	* elf/rtld.c (struct map_args): Constify str member.
	(do_preload): Constify fname argument.

2014-12-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Remove overflow warnings for
	constants definition.

2014-12-11  Andreas Schwab  <schwab@suse.de>

	[BZ #16657]
	* nptl/pthread_mutex_trylock.c (__pthread_mutex_trylock): Use
	FORCE_ELISION instead of DO_ELISION.
	* sysdeps/unix/sysv/linux/x86/force-elision.h (DO_ELISION):
	Remove.
	* sysdeps/unix/sysv/linux/s390/force-elision.h (DO_ELISION):
	Likewise.

	* iconvdata/gconv-modules: Remove duplicate entry.

2014-12-11  Will Newton  <will.newton@linaro.org>

	Merge gettext 0.19.3 into intl/.

	This involves a number of cosmetic changes to comments
	and ANSI function definitions and prototypes throughout
	all the files. The gettext copyright header is used but
	with the date ranges taken from the glibc copy.

	* NEWS: Add gettext merge to 2.21.
	* intl/bindtextdom.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Use gl_* locking primitives rather than __libc_* ones.
	Use __builtin_expect rather than __glibc_likely/unlikely.
	* intl/dcgettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/dcigettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(INTDIV0_RAISES_SIGFPE): New define.
	Use gl_* locking primitives rather than __libc_* ones.
	Include eval-plural.h instead of plural-eval.c.
	Use __builtin_expect rather than __glibc_likely/unlikely.
	* intl/dcngettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/dgettext.c: Likewise.
	* intl/dngettext.c: Likewise.
	* intl/plural-eval.c: Renamed to...
	* intl/eval-plural.h: ...this.
	* intl/explodename.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(_nl_explode_name): Use strchr instead of __rawmemchr.
	* intl/finddomain.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Use gl_* locking primitives rather than __libc_* ones.
	(_nl_find_domain): Use malloc rather than alloca for
	allocation of temporary locale name.
	* intl/gettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/gettextP.h: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Use gl_* locking primitives rather than __libc_* ones.
	* intl/gmo.h: Switch to gettext copyright.
	(struct sysdep_string): Move struct segment_pair outside of
	struct definition.
	* intl/hash-string.c: Use ANSI definitions and prototypes.
	* intl/hash-string.h: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/l10nflist.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(_nl_normalize_codeset): Avoid integer overflow.
	* intl/loadinfo.h: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(LIBINTL_DLL_EXPORTED): New define.
	(PATH_SEPARATOR): New define.
	* intl/loadmsgcat.c: Switch to gettext copyright.
	* intl/localealias.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(_nl_expand_alias): Use PATH_SEPARATOR.
	* intl/ngettext.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	* intl/plural-exp.c: Likewise.
	* intl/plural-exp.h: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	(struct expression): Move definition of enum operator outside
	of struct definition.
	* intl/plural.c: Regenerate.
	* intl/plural.y: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Port to bison 3.0.
	* intl/textdomain.c: Switch to gettext copyright.
	Use ANSI definitions and prototypes.
	Use gl_* locking primitives rather than __libc_* ones.

2014-12-10  Steve Ellcey  <sellcey@imgtec.com>

	* debug/warning-nop.c: Add used atrribute.

2014-12-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/mips/mips32/waitid.c: New file.

	* sysdeps/unix/sysv/linux/mips/mips64/Makefile
	[$(subdir) == signal] (CFLAGS-sigaction.c): New variable.
	[$(subdir) == nptl] (CFLAGS-sigaction.c): Likewise.

2014-12-10  Joseph Myers  <joseph@codesourcery.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #17634]
	* wcsmbs/wcschr.c [!WCSCHR] (wcschr): Define as __wcschr.
	Undefine after defining function.  Define as weak alias of
	__wcschr.  Use libc_hidden_weak.
	* include/wchar.h (__wcschr): Declare.  Use libc_hidden_proto.
	* sysdeps/i386/i686/multiarch/wcschr-c.c [IS_IN (libc) && SHARED]
	(libc_hidden_def): Also define __GI___wcschr alias.
	* sysdeps/i386/i686/multiarch/wcschr.S (wcschr): Rename to
	__wcschr and define as weak alias of __wcschr.
	* sysdeps/powerpc/power6/wcschr.c [!WCSCHR] (WCSCHR): Define as
	__wcschr.
	[!WCSCHR] (DEFAULT_WCSCHR): Define.
	[DEFAULT_WCSCHR] (__wcschr): Use libc_hidden_def.
	[DEFAULT_WCSCHR] (wcschr): Define as weak alias of __wcschr.  Use
	libc_hidden_weak.  Do not use libc_hidden_def.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-ppc32.c
	[IS_IN (libc) && SHARED] (libc_hidden_def): Also define
	__GI___wcschr alias.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr.c
	[IS_IN (libc)] (wcschr): Define as macro expanding to
	__redirect_wcschr.
	[IS_IN (libc)] (__wcschr_ppc): Use __redirect_wcschr in typeof.
	[IS_IN (libc)] (__wcschr_power6): Likewise.
	[IS_IN (libc)] (__wcschr_power7): Likewise.
	[IS_IN (libc)] (__libc_wcschr): New.  Define with libc_ifunc
	instead of wcschr.
	[IS_IN (libc)] (wcschr): Undefine and define as weak alias of
	__libc_wcschr.
	[!IS_IN (libc)] (libc_hidden_def): Do not undefine and redefine.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr.c (wcschr): Rename to
	__wcschr and define as weak alias of __wcschr.  Use
	libc_hidden_builtin_def.
	* sysdeps/x86_64/wcschr.S (wcschr): Rename to __wcschr and define
	as weak alias of __wcschr.  Use libc_hidden_weak.
	* time/alt_digit.c (_nl_get_walt_digit): Use __wcschr instead of
	wcschr.
	* time/era.c (_nl_init_era_entries): Likewise.
	* conform/Makefile (test-xfail-ISO/time.h/linknamespace): Remove
	variable.
	(test-xfail-XPG3/time.h/linknamespace): Likewise.
	(test-xfail-XPG4/time.h/linknamespace): Likewise.

2014-12-10  Joseph Myers  <joseph@codesourcery.com>

	* libio/tst-ftell-active-handler.c (do_ftruncate_test): Use %ld
	format for long int variable.

2014-12-10  Anders Kaseorg  <andersk@MIT.EDU>

	[BZ #10672]
	* manual/search.texi: (Array Sort Function): Remove claim how to make
	qsort stable.

2014-12-10  Andreas Schwab  <schwab@suse.de>

	[BZ #12847]
	* sysdeps/nptl/fork.c (fresetlockfiles): Skip files with
	user-controlled locks.

2014-12-10  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strchrnul.S (vrepmask): Use a call-clobbered
	register.

2014-12-10  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (--disable-werror): New configure option.
	(enable_werror): New AC_SUBST.
	* configure: Regenerated.
	* config.make.in (enable-werror): New variable.
	* Makeconfig [$(enable-werror) = yes] (+gccwarn): Add -Werror
	-Wno-error=undef.
	(+gccwarn-c): Do not use -Werror=implicit-function-declaration.
	* manual/install.texi (Configuring and compiling): Document
	--disable-werror.
	* INSTALL: Regenerated.
	* debug/Makefile (CFLAGS-tst-chk1.c): Add -Wno-error.
	(CFLAGS-tst-chk2.c): Likewise.
	(CFLAGS-tst-chk3.c): Likewise.
	(CFLAGS-tst-chk4.cc): Likewise.
	(CFLAGS-tst-chk5.cc): Likewise.
	(CFLAGS-tst-chk6.cc): Likewise.
	(CFLAGS-tst-lfschk1.c): Likewise.
	(CFLAGS-tst-lfschk2.c): Likewise.
	(CFLAGS-tst-lfschk3.c): Likewise.
	(CFLAGS-tst-lfschk4.cc): Likewise.
	(CFLAGS-tst-lfschk5.cc): Likewise.
	(CFLAGS-tst-lfschk6.cc): Likewise.

	* stdio-common/tst-printfsz.c: Include <libc-internal.h>.
	(main): Disable -Wdeprecated-declarations around calls to
	register_printf_function.

	* stdio-common/tst-unlockedio.c: Include <libc-internal.h>.
	(do_test): Disable -Wdiv-by-zero around some calls to
	fwrite_unlocked and fread_unlocked.

	* include/libc-internal.h (DIAG_PUSH_NEEDS_COMMENT): New macro.
	(DIAG_POP_NEEDS_COMMENT): Likewise.
	(_DIAG_STR1): Likewise.
	(_DIAG_STR): Likewise.
	(DIAG_IGNORE_NEEDS_COMMENT): Likewise.
	* stdio-common/bug21.c: Include <libc-internal.h>.
	(do_test): Disable -Wformat around call to sscanf.
	* stdio-common/scanf14.c: Include <libc-internal.h>.
	(main): Disable -Wformat around some calls to scanf functions.

2014-12-09  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/unix/sysv/linux/sh/pthread_once.S: Remove file.

2014-12-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* libio/tst-ftell-active-handler.c (do_ftell_test): Fix wide-character
	stack variable alignment.

2014-12-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17682]
	* resource/Versions (libc): Add __getrlimit at GLIBC_PRIVATE.
	* resource/getrlimit.c (__getrlimit): Use libc_hidden_def.
	* sysdeps/mach/hurd/getrlimit.c (__getrlimit): Likewise.
	* include/sys/resource.h (__getrlimit): Use libc_hidden_proto.
	* nptl/nptl-init.c (__pthread_initialize_minimal_internal): Use
	__getrlimit instead of getrlimit.
	* nptl/pthread_cond_timedwait.c (__pthread_cond_timedwait): Use
	__gettimeofday instead of gettimeofday.
	* nptl/pthread_rwlock_timedrdlock.c (pthread_rwlock_timedrdlock):
	Likewise.
	* nptl/pthread_rwlock_timedwrlock.c (pthread_rwlock_timedwrlock):
	Likewise.
	* sysdeps/pthread/aio_misc.c (handle_fildes_io): Likewise.
	* conform/Makefile (test-xfail-POSIX2008/aio.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX2008/pthread.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/time.h/linknamespace): Likewise.

2014-12-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* libio/tst-ftell-active-handler.c (do_ftell_test): Fix buffer overrun
	for wide-character tests.

2014-12-04  Roland McGrath  <roland@hack.frob.com>

	* io/openat64.c: #include <libc-internal.h>
	(__openat64): Prototypify.  Use ignore_value on MODE.
	* io/openat.c: Likewise.
	* misc/reboot.c: #include <libc-internal.h>
	(reboot): Prototypify.  Use ignore_value on HOWTO.
	* misc/ptrace.c: #include <libc-internal.h>
	(ptrace): Prototypify.  Use ignore_value for va_arg'd parameters.

2014-12-04  Joseph Myers  <joseph@codesourcery.com>

	* conform/list-header-symbols.pl (%extra_syms): Add h_errno for
	XPG4, UNIX98 and XOPEN2K.
	* conform/Makefile (test-xfail-XOPEN2K/grp.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/pwd.h/linknamespace): Likewise.

2014-12-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/fileops.c: Use ISO C style for function definitions.
	* libio/iofopen.c: Likewise.
	* libio/wfileops.c: Likewise.

	[BZ #17653]
	* libio/fileops.c (_IO_new_file_underflow): Unset cached
	offset on EOF.
	* libio/wfileops.c (_IO_wfile_underflow): Likewise.
	* libio/tst-ftell-active-handler.c (fgets_func_t): New type.
	(fgets_func): Function pointer to fgets and fgetws.
	(do_ftell_test): Add test to verify ftell value after read
	EOF.
	(do_test): Set fgets_func.

	* libio/tst-ftell-active-handler.c (do_ftruncate_test): Add
	O_TRUNC flag for w and w+ modes.
	(do_rewind_test): Likewise.
	(do_ftell_test): Likewise.
	(do_write_test): Likewise.

	[BZ #17647]
	* libio/fileops.c (do_ftell): Seek only when there are
	unflushed writes.
	* libio/wfileops.c (do_ftell_wide): Likewise.
	* libio/tst-ftell-active-handler.c (do_ftruncate_test): New
	test case.
	(do_one_test): Call it.

2014-12-03  Joseph Myers  <joseph@codesourcery.com>

	* conform/list-header-symbols.pl (%extra_syms): Add getdate_err
	for XPG4, UNIX98, XOPEN2K and XOPEN2K8.
	* conform/Makefile (test-xfail-XOPEN2K/pthread.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K/time.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/pthread.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/time.h/linknamespace): Likewise.

2014-12-02  Joseph Myers  <joseph@codesourcery.com>

	* conform/Makefile (test-xfail-XOPEN2K/aio.h/linknamespace):
	Remove variable.
	(test-xfail-XOPEN2K8/aio.h/linknamespace): Likewise.

	[BZ #17668]
	* inet/ifaddrs.c (getifaddrs): Rename to __getifaddrs and define
	as weak alias of __getifaddrs.  Use libc_hidden_weak.
	(freeifaddrs): Rename to __freeifaddrs and define as weak alias of
	__freeifaddrs.  Use libc_hidden_weak.
	* sysdeps/gnu/ifaddrs.c (getifaddrs): Rename to __getifaddrs and
	define as weak alias of __getifaddrs.  Use libc_hidden_weak.
	(freeifaddrs): Rename to __freeifaddrs and define as weak alias of
	__freeifaddrs.  Use libc_hidden_weak.
	* sysdeps/unix/sysv/linux/ifaddrs.c (getifaddrs): Rename to
	__getifaddrs and define as weak alias of __getifaddrs.  Use
	libc_hidden_weak.
	(freeifaddrs): Rename to __freeifaddrs and define as weak alias of
	__freeifaddrs.  Use libc_hidden_weak.
	* conform/Makefile (test-xfail-XOPEN2K/net/if.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX2008/net/if.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/net/if.h/linknamespace): Likewise.

2014-12-02  Petar Jovanovic  <petar.jovanovic@rt-rk.com>

	[BZ #17601]
	* sysdeps/mips/start.S (__start): Use indirect jump to call
	__libc_start_main.

2014-12-02  Joseph Myers  <joseph@codesourcery.com>

	* nptl/tst-stack4.c (dso_process): Use int not uintptr_t for t.

	* nptl/tst-mutex1.c: Include <stdbool.h>.
	[!ATTR] (ATTR_NULL): New macro.
	(do_test): Test !ATTR_NULL instead of ATTR != NULL.
	* nptl/tst-mutexpi1.c (ATTR_NULL): New macro.
	* nptl/tst-mutexpp1.c (ATTR_NULL): New macro.

	* posix/tst-getopt_long1.c (do_test): Cast elements of argv array
	to char *.

	[BZ #17665]
	* posix/unistd.h [__USE_MISC || (__USE_XOPEN && !__USE_UNIX98)]:
	Change conditional to [__USE_MISC].

	[BZ #17664]
	* misc/mntent_r.c (__getmntent_r): Use __fgets_unlocked instead of
	fgets_unlocked.
	* resolv/res_hconf.c [IS_IN (libc)] (fgets_unlocked): Define to
	__fgets_unlocked.
	* resolv/res_init.c (__res_vinit): Use __fgets_unlocked instead of
	fgets_unlocked.
	* conform/Makefile (test-xfail-XPG4/sys/statvfs.h/linknamespace):
	Remove variable.
	(test-xfail-POSIX/sys/mman.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sys/mman.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/sys/mman.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/sys/statvfs.h/linknamespace): Likewise.

	* elf/tst-unique4lib.cc (b): Mark with __attribute__ ((used)).

2014-12-02  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove strpbrk objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Remove strpbrk implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk-ppc64.c: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk.c: Remove file.
	* sysdeps/powerpc/powerpc64/power7/strpbrk.S: Remove file.
	* sysdeps/powerpc/powerpc64/strpbrk.S: New file.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove strcspn objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Remove strcspn implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn-ppc64.c: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn.c: Remove file.
	* sysdeps/powerpc/powerpc64/power7/strcspn.S: Remove file.
	* sysdeps/powerpc/powerpc64/strcspn.S: New file.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove strspn objetcs.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Remove strspn implementation.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-power7.S: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strspn.S: Remove file.
	* sysdeps/powerpc/powerpc64/strspn.S: New file.

2014-12-01  James Lemke  <jwlemke@codesourcery.com>

	[BZ #17581]
	* malloc/hooks.c
	(mem2mem_check): Add a terminator to the chain of checking blocks.
	(malloc_check_get_size): Use it here.
	(mem2chunk_check): Ditto.

2014-12-01  Rajalakshmi Srinivasaraghavan <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/strtok.S: New file.
	* sysdeps/powerpc/powerpc64/strtok_r.S: New file.

2014-11-29  Carlos O'Donell  <carlos@redhat.com>

	* bits/ioctl-types.h: Indent preprocessor directives correctly.

	* nptl/nptl-init.c: Include libc-internal.h.
	(__pthread_initialize_minimal_internal): Use ROUND_UP.

	* elf/ldconfig.c (search_dir): Expand comment.

2014-11-29  Joseph Myers  <joseph@codesourcery.com>

	* conform/Makefile (linknamespace-symlist-stdlibs-base): New
	variable.
	(linknamespace-symlist-stdlibs-tests): Likewise.
	(tests-special): Append $(linknamespace-symlist-stdlibs-tests)
	instead of $(objpfx)symlist-stdlibs.
	(linknamespace-libs-isoc): New variable.
	(linknamespace-libs): Use $(linknamespace-libs-isoc).
	(linknamespace-libs-ISO): New variable.
	(linknamespace-libs-ISO99): Likewise.
	(linknamespace-libs-ISO11): Likewise.
	(linknamespace-libs-XPG3): Likewise.
	(linknamespace-libs-XPG4): Likewise.
	(linknamespace-libs-POSIX): Likewise.
	(linknamespace-libs-UNIX98): Likewise.
	(linknamespace-libs-XOPEN2K): Likewise.
	(linknamespace-libs-POSIX2008): Likewise.
	(linknamespace-libs-XOPEN2K8): Likewise.
	($(objpfx)symlist-stdlibs): Replace by
	$(linknamespace-symlist-stdlibs-tests).  Use
	$(linknamespace-libs-$*) as set of libraries.
	($(linknamespace-header-tests)): Update dependencies.  Use
	$(objpfx)symlist-stdlibs-$$std for --libsyms argument.
	(test-xfail-XPG4/sys/mman.h/linknamespace): Remove.
	* conform/linknamespace.pl: Remove comment about considering
	definitions of symbols from irrelevant libraries.

2014-11-28  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #13862]
	* elf/dl-tls.c: Include <atomic.h>.
	(oom): Remove #ifdef SHARED/#endif.
	(_dl_static_dtv, _dl_initial_dtv): Moved before ...
	(_dl_resize_dtv): This.  Extracted from _dl_update_slotinfo.
	(_dl_allocate_tls_init): Resize DTV if the current DTV isn't
	big enough.
	(_dl_update_slotinfo): Call _dl_resize_dtv to resize DTV.
	* nptl/Makefile (tests): Add tst-stack4.
	(modules-names): Add tst-stack4mod.
	($(objpfx)tst-stack4): New.
	(tst-stack4mod.sos): Likewise.
	($(objpfx)tst-stack4.out): Likewise.
	($(tst-stack4mod.sos)): Likewise.
	(clean): Likewise.
	* nptl/tst-stack4.c: New file.
	* nptl/tst-stack4mod.c: Likewise.

2014-11-27  J. Brown  <jb999@gmx.de>

	* sysdeps/x86/bits/string.h: Add recent CPUs.

2014-11-27  Joseph Myers  <joseph@codesourcery.com>

	* misc/tst-pselect.c (do_test): Use sigprocmask instead of
	sigblock.

	* libio/bug-ungetwc1.c (do_test): Verify results of getwc and
	feof.

	* dlfcn/failtestmod.c (constr): Do not store result of dlsym in a
	variable.

2014-11-27  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nscd/connections.c: Include libc-internal.h because of macro
	usage ignore_value.

2014-11-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* string/bits/string3.h (__warn_memset_zero_len): Don't
	declare for gcc newer than 5.0.
	(memset): Don't test for zero-length __LEN for gcc newer than
	5.0.

2014-11-27  Joseph Myers  <joseph@codesourcery.com>

	* stdio-common/tst-fmemopen.c (do_test): Cast st_size values to
	size_t for %zu format.

	* nss/tst-nss-test1.c (do_test): Use %td printf format for pointer
	difference, not %ju.

2014-11-26  Joseph Myers  <joseph@codesourcery.com>

	* include/libc-internal.h (ignore_value): New macro.
	* nscd/connections.c (restart): Wrap calls to setuid and setgid
	with ignore_value.

	* sysdeps/mips/__longjmp.c (____longjmp): Use prototype
	definition.

	* nptl/tst-cancel-self-cancelstate.c (do_test): Cast argument of
	pthread_cleanup_push to void *.

	* sysdeps/unix/sysv/linux/arm/libc-do-syscall.S (_FORTIFY_SOURCE):
	Undefine.

	[BZ #16619]
	[BZ #16740]
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c (__frexpl): Use 1LL << 52
	instead of 1L << 52.

	* libio/bug-rewind.c (do_test): Check fwscanf return values.
	* libio/bug-rewind2.c (do_test): Likewise.

	* debug/test-stpcpy_chk-ifunc.c: Remove file.
	* debug/test-strcpy_chk-ifunc.c: Likewise.
	* wcsmbs/test-wcschr-ifunc.c: Likewise.
	* wcsmbs/test-wcscmp-ifunc.c: Likewise.
	* wcsmbs/test-wcscpy-ifunc.c: Likewise.
	* wcsmbs/test-wcslen-ifunc.c: Likewise.
	* wcsmbs/test-wcsrchr-ifunc.c: Likewise.
	* wcsmbs/test-wmemcmp-ifunc.c: Likewise.
	* Rules [$(multi-arch) = no] (tests): Do not filter out
	$(tests-ifunc).
	[$(multi-arch) = no] (xtests): Do not filter out $(xtests-ifunc).
	* debug/Makefile (tests-ifunc): Remove variable.
	(tests): Do not add $(tests-ifunc).
	* wcsmbs/Makefile (tests-ifunc): Remove variable.
	(tests): Do not add $(tests-ifunc).
	* benchtests/bench-string.h (TEST_IFUNC): Remove macro.
	[TEST_IFUNC]: Remove conditionals.
	* string/test-string.h (TEST_IFUNC): Remove macro.
	[TEST_IFUNC]: Remove conditionals.

	* string/test-strchr.c [!WIDE] (L): New macro.
	[WIDE] (L): Likewise.
	(check1): Use CHAR instead of char.  Use L on string and character
	constants.

2014-11-26  Adhemerval Zanella  <azanella@linux.ibm.com>

	* csu/tst-atomic.c (do_test): Add atomic_exchange_and_add_{acq,rel}
	tests.
	* sysdeps/powerpc/bits/atomic.h
	(__arch_atomic_exchange_and_add_32_acq): Add definition.
	(__arch_atomic_exchange_and_add_32_rel): Likewise.
	(atomic_exchange_and_add_acq): Likewise.
	(atomic_exchange_and_add_rel): Likewise.
	* sysdeps/powerpc/powerpc32/bits/atomic.h
	(__arch_atomic_exchange_and_add_64_acq): Add definition.
	(__arch_atomic_exchange_and_add_64_rel): Likewise.
	* sysdeps/powerpc/powerpc64/bits/atomic.h
	(__arch_atomic_exchange_and_add_64_acq): Add definition.
	(__arch_atomic_exchange_and_add_64_rel): Likewise.

2014-11-26  Torvald Riegel  <triegel@redhat.com>

	* nptl/tpp.c (__init_sched_fifo_prio, __pthread_tpp_change_priority):
	Change synchronization of __sched_fifo_min_prio and
	__sched_fifo_max_prio.
	* nptl/pthread_mutexattr_getprioceiling.c
	(pthread_mutexattr_getprioceiling): Likewise.
	* nptl/pthread_mutexattr_setprioceiling.c
	(pthread_mutexattr_setprioceiling): Likewise.
	* nptl/pthread_mutex_init.c (__pthread_mutex_init): Likewise.
	* nptl/pthread_mutex_setprioceiling.c (pthread_mutex_setprioceiling):
	Likewise.

2014-11-26  Joseph Myers  <joseph@codesourcery.com>

	* setjmp/jmpbug.c (test): Make foo volatile and cast it to
	void.

2014-11-25  Joseph Myers  <joseph@codesourcery.com>

	* stdio-common/tst-printf-round.c (test_hex_in_one_mode): Make
	third argument const.

2014-11-25  Paul Eggert  <eggert@cs.ucla.edu>

	fnmatch: work around GCC compiler warning bug with uninit var
	* posix/fnmatch_loop.c (FCT): Use a scalar not a one-item array.
	This works around a bug with x86-64 GCC 4.9.2 and earlier
	where 'gcc -O2 -Wmaybe-uninitialized' incorrectly complains
	"../locale/weightwc.h:93:7: warning: '*((void *)&str+4)' may be
	used uninitialized in this function [-Wmaybe-uninitialized]".

2014-11-25  Joseph Myers  <joseph@codesourcery.com>

	* posix/bug-regex31.c (main): Return RES not 0.

2014-11-25  Anton Blanchard <anton@samba.org>

	* sysdeps/powerpc/bits/atomic.h
	(__arch_compare_and_exchange_bool_64_rel): Load from mem.

2014-11-24  Sterling Augustine  <saugustine@google.com>

	* sysdeps/x86_64/start.S (_start): Use ENTRY and END macros.

2014-11-24  Ryan Cumming  <etaoins@gmail.com>

	[BZ #17608]
	* sysdeps/unix/sysv/linux/bits/time.h: Define CLOCK_TAI.

2014-11-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17633]
	* stdio-common/perror.c (perror): Call __fileno instead of fileno.
	* conform/Makefile (test-xfail-ISO/stdio.h/linknamespace): Remove
	variable.
	(test-xfail-ISO99/stdio.h/linknamespace): Likewise.
	(test-xfail-ISO11/stdio.h/linknamespace): Likewise.

2014-11-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/strncpy.c (strncpy): Improve performance by using memset.

2014-11-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/strcpy.c (strcpy):
	Improve performance by using strlen and memcpy.

2014-11-24  Leonhard Holz  <leonhard.holz@web.de>

	* string/strcoll_l.c (get_next_seq): __always_inline.
	* string/strcoll_l.c (do_compare): __always_inline.

2014-11-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/bits/stdlib-float.h: Use IS_IN only if _ISOMAC is
	defined.
	* include/mqueue.h: Likewise.
	* include/stdlib.h: Likewise.

	* stdlib/isomac.c (fmt): Replace NOT_IN_libc with IN_MODULE.
	(get_null_defines): Adjust.
	* sunrpc/Makefile: Adjust comment.
	* Makerules (CPPFLAGS-nonlib): Remove NOT_IN_libc.
	* elf/Makefile (CPPFLAGS-sotruss-lib): Likewise.
	(CFLAGS-interp.c): Likewise.
	(CFLAGS-ldconfig.c): Likewise.
	(CPPFLAGS-.os): Likewise.
	* elf/rtld-Rules (rtld-CPPFLAGS): Likewise.
	* extra-lib.mk (CPPFLAGS-$(lib)): Likewise.
	* extra-modules.mk (extra-modules.mk): Likewise.
	* iconv/Makefile (CPPFLAGS-iconvprogs): Likewise.
	* locale/Makefile (CPPFLAGS-locale_programs): Likewise.
	* malloc/Makefile (CPPFLAGS-memusagestat): Likewise.
	* nscd/Makefile (CPPFLAGS-nscd): Likewise.
	* nss/Makefile (CPPFLAGS-nss_test1): Likewise.
	* stdlib/Makefile (CFLAGS-tst-putenvmod.c): Likewise.
	* sysdeps/gnu/Makefile ($(objpfx)errlist-compat.c): Likewise.
	* sysdeps/unix/sysv/linux/Makefile (CPPFLAGS-lddlibc4): Likewise.
	* iconvdata/Makefile (CPPFLAGS): Likewise.
	(cpp-srcs-left): Add libof for all iconvdata routines.
	* bits/stdio-lock.h: Replace NOT_IN_libc with IS_IN.
	* include/assert.h: Likewise.
	* include/ctype.h: Likewise.
	* include/errno.h: Likewise.
	* include/libc-symbols.h: Likewise.
	* include/math.h: Likewise.
	* include/netdb.h: Likewise.
	* include/resolv.h: Likewise.
	* include/stdio.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/string.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/wctype.h: Likewise.
	* intl/l10nflist.c: Likewise.
	* libidn/idn-stub.c: Likewise.
	* libio/libioP.h: Likewise.
	* nptl/libc_multiple_threads.c: Likewise.
	* nptl/pthreadP.h: Likewise.
	* posix/regex_internal.h: Likewise.
	* resolv/res_hconf.c: Likewise.
	* sysdeps/arm/armv7/multiarch/memcpy.S: Likewise.
	* sysdeps/arm/memmove.S: Likewise.
	* sysdeps/arm/sysdep.h: Likewise.
	* sysdeps/generic/_itoa.h: Likewise.
	* sysdeps/generic/symbol-hacks.h: Likewise.
	* sysdeps/gnu/errlist.awk: Likewise.
	* sysdeps/gnu/errlist.c: Likewise.
	* sysdeps/i386/i586/memcpy.S: Likewise.
	* sysdeps/i386/i586/memset.S: Likewise.
	* sysdeps/i386/i686/memcpy.S: Likewise.
	* sysdeps/i386/i686/memmove.S: Likewise.
	* sysdeps/i386/i686/mempcpy.S: Likewise.
	* sysdeps/i386/i686/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/bcopy.S: Likewise.
	* sysdeps/i386/i686/multiarch/bzero.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strnlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp.S: Likewise.
	* sysdeps/ia64/fpu/libm-symbols.h: Likewise.
	* sysdeps/nptl/bits/libc-lock.h: Likewise.
	* sysdeps/nptl/bits/libc-lockP.h: Likewise.
	* sysdeps/nptl/bits/stdio-lock.h: Likewise.
	* sysdeps/posix/closedir.c: Likewise.
	* sysdeps/posix/opendir.c: Likewise.
	* sysdeps/posix/readdir.c: Likewise.
	* sysdeps/posix/rewinddir.c: Likewise.
	* sysdeps/powerpc/novmx-sigjmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/bsd-_setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr-ppc32.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rawmemchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp_l.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchrnul.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase_l.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp-ppc32.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strnlen.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-ppc32.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy-ppc32.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr-ppc32.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/bzero.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memmove.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memrchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp_l.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcat.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncase.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncase_l.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncat.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-ppc64.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-ppc64.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strspn.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc64/setjmp.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: Likewise.
	* sysdeps/s390/s390-32/multiarch/memcmp.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memcpy.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memset.S: Likewise.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: Likewise.
	* sysdeps/s390/s390-64/multiarch/memcmp.S: Likewise.
	* sysdeps/s390/s390-64/multiarch/memcpy.S: Likewise.
	* sysdeps/s390/s390-64/multiarch/memset.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara4.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-ultra3.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset-niagara1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset-niagara4.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.
	* sysdeps/unix/alpha/sysdep.S: Likewise.
	* sysdeps/unix/alpha/sysdep.h: Likewise.
	* sysdeps/unix/make-syscalls.sh: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/getpid.c: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/i486/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/lowlevellock-futex.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/bits/m68k-vdso.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/not-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/longjmp_chk.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/waitpid.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/wordsize-32/symbol-hacks.h: Likewise.
	* sysdeps/x86_64/memcpy.S: Likewise.
	* sysdeps/x86_64/memmove.c: Likewise.
	* sysdeps/x86_64/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/init-arch.h: Likewise.
	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memset-avx2.S: Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/strcat.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr-sse2-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strspn.S: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy-c.c: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy.S: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp-c.c: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp.S: Likewise.
	* sysdeps/x86_64/strcmp.S: Likewise.

	* extra-lib.mk (CPPFLAGS-$(lib)): Remove IS_IN_$(lib).

	* elf/Makefile (CPPFLAGS-.os): Remove IS_IN_rtld.
	* elf/dl-open.c: Use IS_IN (rtld) instead if IS_IN_rtld.
	* elf/rtld-Rules: Likewise.
	* elf/setup-vdso.h: Likewise.
	* include/assert.h: Likewise.
	* include/bits/stdlib-float.h: Likewise.
	* include/errno.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/unistd.h: Likewise.
	* sysdeps/aarch64/setjmp.S: Likewise.
	* sysdeps/alpha/setjmp.S: Likewise.
	* sysdeps/arm/__longjmp.S: Likewise.
	* sysdeps/arm/aeabi_unwind_cpp_pr1.c: Likewise.
	* sysdeps/arm/setjmp.S: Likewise.
	* sysdeps/arm/sysdep.h: Likewise.
	* sysdeps/generic/_itoa.h: Likewise.
	* sysdeps/generic/dl-sysdep.h: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.
	* sysdeps/i386/dl-tls.h: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/m68k/setjmp.c: Likewise.
	* sysdeps/mach/hurd/dl-execstack.c: Likewise.
	* sysdeps/mach/hurd/opendir.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.
	* sysdeps/posix/opendir.c: Likewise.
	* sysdeps/posix/profil.c: Likewise.
	* sysdeps/powerpc/dl-procinfo.h: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/init-arch.h: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Likewise.
	* sysdeps/s390/dl-tls.h: Likewise.
	* sysdeps/s390/s390-32/setjmp.S: Likewise.
	* sysdeps/s390/s390-64/setjmp.S: Likewise.
	* sysdeps/sh/sh3/setjmp.S: Likewise.
	* sysdeps/sh/sh4/setjmp.S: Likewise.
	* sysdeps/unix/alpha/sysdep.h: Likewise.
	* sysdeps/unix/arm/sysdep.S: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/getcwd.c: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/lowlevellock-futex.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/bits/m68k-vdso.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/m68k-helpers.S: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/setjmp.S: Likewise.

	* include/math.h: Use IS_IN instead of IS_IN_libm.
	* sysdeps/alpha/fpu/s_copysign.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/w_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_copysign.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_finite.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_frexp.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_isinf.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_isnan.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_ldexp.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_ldexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_modf.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_scalbln.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_scalbn.c: Likewise.
	* sysdeps/powerpc/power5+/fpu/s_modf.c: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_copysignl.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysign.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finite.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinf.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modf.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysign.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_copysignl.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/s_signbitl.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_isnan.S: Likewise.
	* sysdeps/unix/sysv/linux/alpha/fraiseexcpt.S: Likewise.

	* nptl/lowlevellock.c: Use IS_IN instead of IS_IN_libpthread.
	* nptl/pthreadP.h: Likewise.
	* nptl_db/structs.def: Likewise.
	* sysdeps/arm/sysdep.h: Likewise.
	* sysdeps/nptl/bits/libc-lock.h: Likewise.
	* sysdeps/nptl/bits/libc-lockP.h: Likewise.
	* sysdeps/sparc/sparc32/lowlevellock.c: Likewise.
	* sysdeps/unix/alpha/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/not-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/waitpid.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/cancellation.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: Likewise.

	* include/mqueue.h: Use IS_IN instead of IS_IN_librt.
	* nptl/pthreadP.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/not-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep-cancel.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/waitpid.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: Likewise.

	* dlfcn/dladdr.c: Use IS_IN.
	* dlfcn/dladdr1.c: Likewise.
	* dlfcn/dlclose.c: Likewise.
	* dlfcn/dlerror.c: Likewise.
	* dlfcn/dlinfo.c: Likewise.
	* dlfcn/dlmopen.c: Likewise.
	* dlfcn/dlopen.c: Likewise.
	* dlfcn/dlsym.c: Likewise.
	* dlfcn/dlvsym.c: Likewise.

	* include/ifaddrs.h: Use IS_IN.
	* inet/check_pf.c: Likewise.
	* sysdeps/unix/sysv/linux/check_pf.c: Likewise.
	* nscd/Makefile (CPPFLAGS-nscd): Remove IS_IN_nscd.

	* elf/Makefile (CFLAGS-ldconfig.c): Remove definition of
	IS_IN_ldconfig.
	* sysdeps/unix/sysv/linux/x86_64/dl-procinfo.c: Use IS_IN.
	* sysdeps/unix/sysv/linux/x86_64/dl-procinfo.h: Likewise.

	* include/shlib-compat.h [!NOT_IN_libc]: Remove.
	* nss/nss_files/files-parse.c (IS_IN_libc): Replace with
	IS_IN (libc).

	* elf/Makefile (libof-sotruss-lib): Set as extramodules.

	* elf/Makefile (CPPFLAGS-.os): Remove IN_LIB.
	* elf/rtld-Rules (rtld-CPPFLAGS): Likewise.
	* extra-lib.mk (CPPFLAGS-$(lib)): Likewise.
	* include/libc-symbols.h (IS_IN_LIB): New macro.
	* include/errno.h: Use IS_IN_LIB instead of IN_LIB.
	* include/netdb.h: Likewise.
	* include/stap-probe.h: Remove all uses of IN_LIB.

	* Makeconfig (module-cppflags-real): Define MODULE_NAME
	instead of IN_MODULE.
	* include/libc-symbols.h (IN_MODULE): Define using
	MODULE_NAME.
	(PASTE_NAME, PASTE_NAME1): New macros.
	* include/stap-probe.h (LIBC_PROBE_1): Use MODULE_NAME instead
	of IN_LIB.
	(STAP_PROBE_ASM): Likewise.

2014-11-23  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/i386/init-first.c (posixland_init): Call
	__mach_init in dlopened libc.

2014-11-22  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/arm/preconfigure.ac: Delete EABI check.
	* sysdeps/arm/preconfigure: Regenerate.

2014-11-21  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_create.c (__pthread_create_2_1): Set
	ATTR_FLAG_POLICY_SET and/or ATTR_FLAG_SCHED_SET in PD->flags
	when copying values from IATTR into PD.

2014-11-21  Will Newton  <will.newton@linaro.org>
	    Andrew Pinski  <andrew.pinski@caviumnetworks.com>

	* sysdeps/aarch64/dl-machine.h (elf_machine_load_address):
	Refactor inline-asm.  Also add comment.

	* sysdeps/aarch64/bits/link.h (la_aarch64_gnu_pltenter): Use
	ElfW macro instead of hardcoded Elf64 types.
	(la_aarch64_gnu_pltenter): Likewise.
	* sysdeps/aarch64/dl-machine.h
	(elf_machine_runtime_setup): Use ElfW(Addr).

	* elf/elf.h (R_AARCH64_P32_ABS32, R_AARCH64_P32_COPY,
	R_AARCH64_P32_GLOB_DAT, R_AARCH64_P32_JUMP_SLOT,
	R_AARCH64_P32_RELATIVE, R_AARCH64_P32_TLS_DTPMOD,
	R_AARCH64_P32_TLS_DTPREL, R_AARCH64_P32_TLS_TPREL,
	R_AARCH64_P32_TLSDESC, R_AARCH64_P32_IRELATIVE): Define.
	(R_AARCH64_TLS_DTPMOD64): Rename to ..
	(R_AARCH64_TLS_DTPMOD): This.
	(R_AARCH64_TLS_DTPREL64): Rename to ...
	(R_AARCH64_TLS_DTPREL): This.
	(R_AARCH64_TLS_TPREL64): Rename to ...
	(R_AARCH64_TLS_TPREL): This.
	* sysdeps/aarch64/dl-machine.h (elf_machine_type_class): Update
	R_AARCH64_TLS_DTPMOD64, R_AARCH64_TLS_DTPREL64, and
	R_AARCH64_TLS_TPREL64.
	(elf_machine_rela): Likewise.

2014-11-21  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/microblaze/bits/atomic.h (__HAVE_64B_ATOMICS): Fix value
	by setting it to 0.  64b atomics are not supported currently.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	[BZ #16469]
	* resolv/res_query.c (__libc_res_nsearch): Skip leading dot in
	search domain names.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	[BZ #16469]
	* NEWS: Update.
	* resolv/res_query.c (__libc_res_nquerydomain): Retain
	trailing dot.
	* posix/tst-getaddrinfo5.c: New.
	* posix/Makefile (tests): Add it.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	[BZ #14498]
	* NEWS: Fixed.
	* nss/nss_db/db-XXX.c (_nss_db_get##name##_r): Update hidx
	after parsing line but before break_if_match.
	* nss/nss_files/files-service (DB_LOOKUP): Don't "continue;"
	if there is a protocol mismatch.

2014-11-21  Ma Shimiao <mashimiao.fnst@cn.fujitsu.com>

	* manual/sysinfo.texi (addmntent): It is actually MT-Safe,
	because the potential race is on the user-supplied stream.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	* sysdeps/posix/ctermid.c (ctermid): Return a pointer to a
	string literal if not passed a buffer.
	* manual/job.texi (ctermid): Update reasoning, note deviation
	from posix, suggest mtasurace when not passed a buffer, for
	future non-preliminary safety notes.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	* manual/users.texi (cuserid): Fix MT-Safety note for the case
	of not passing it a buffer.
	Reported by Peng Haitao.

2014-11-21  Alexandre Oliva <aoliva@redhat.com>

	* manual/Makefile ($(objpfx)stamp-summary): Require
	check-safety.sh to pass.
	* manual/check-safety.sh: Wish for verification that every
	@deftypefn and @deftypefun is followed by a @safety remark.

2014-11-20  Roland McGrath  <roland@hack.frob.com>

	* nptl/unwind.c (unwind_cleanup): Use __libc_fatal.

	* nptl/pthread_setcanceltype.c [!SIGCANCEL]: Return ENOTSUP early for
	PTHREAD_CANCEL_ASYNCHRONOUS.
	* nptl/pthread_cancel.c [!SIGCANCEL]: Just abort rather than trying to
	send SIGCANCEL.

	* nptl/default-sched.h: New file.
	* sysdeps/unix/sysv/linux/default-sched.h: New file.
	* nptl/pthread_create.c: Include it.
	(__pthread_create_2_1): Use collect_default_sched instead of making
	Linux syscalls here directly.

2014-11-20  Torvald Riegel  <triegel@redhat.com>

	* nptl/pthread_once.c (clear_once_control, __pthread_once_slow,
	__pthread_once): Use C11 atomics.

2014-11-20  Torvald Riegel  <triegel@redhat.com>

	* csu/tst-atomic.c (do_test): Add tests for C11-like atomics.

2014-11-20  Torvald Riegel  <triegel@redhat.com>

	* include/atomic.h (__atomic_link_error, __atomic_check_size,
	atomic_thread_fence_acquire, atomic_thread_fence_release,
	atomic_thread_fence_seq_cst, atomic_load_relaxed,
	atomic_load_acquire, atomic_store_relaxed, atomic_store_release,
	atomic_compare_exchange_weak_relaxed,
	atomic_compare_exchange_weak_acquire,
	atomic_compare_exchange_weak_release,
	atomic_exchange_acquire, atomic_exchange_release,
	atomic_fetch_add_relaxed, atomic_fetch_add_acquire,
	atomic_fetch_add_release, atomic_fetch_add_acq_rel,
	atomic_fetch_and_acquire,
	atomic_fetch_or_relaxed, atomic_fetch_or_acquire): New.

2014-11-20  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/aarch64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Define.
	* sysdeps/alpha/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/arm/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/i386/i486/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/ia64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/m68k/coldfire/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/m68k/m680x0/m68020/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/microblaze/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/mips/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/powerpc/powerpc32/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/powerpc/powerpc64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/s390/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/sparc/sparc32/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/sparc/sparc32/sparcv9/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/sparc/sparc64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/tile/tilegx/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/tile/tilepro/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/unix/sysv/linux/hppa/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/bits/atomic.h
	(__HAVE_64B_ATOMICS, USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.
	* sysdeps/x86_64/bits/atomic.h (__HAVE_64B_ATOMICS,
	USE_ATOMIC_COMPILER_BUILTINS): Likewise.

2014-11-19  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_create.c (__pthread_create_2_1): Don't try to validate
	the sched_priority value here.  It was already checked when the user
	called pthread_attr_setschedparam.

	* nptl/tst-bad-schedattr.c: New file.
	* nptl/Makefile (tests): Add it.

2014-11-19  Carlos O'Donell  <carlos@redhat.com>
	    Florian Weimer  <fweimer@redhat.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Adam Conrad  <adconrad@0c3.net>
	    Andreas Schwab  <schwab@suse.de>
	    Brooks  <bmoses@google.com>

	[BZ #17625]
	* wordexp-test.c (__dso_handle): Add prototype.
	(__register_atfork): Likewise.
	(__app_register_atfork): New function.
	(registered_forks): New global.
	(register_fork): New function.
	(test_case): Add 3 new tests for WRDE_CMDSUB.
	(main): Call __app_register_atfork.
	(testit): If WRDE_NOCMD set registered_forks to zero, run test, and if
	fork count is non-zero fail the test.
	* posix/wordexp.c (exec_comm): Return WRDE_CMDSUB if WRDE_NOCMD flag
	is set.
	(parse_dollars): Remove check for WRDE_NOCMD.
	(parse_dquote): Likewise.

2014-11-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Makeconfig (built-modules): List non-library modules to be
	built.
	(module-cppflags): Include libc-modules.h for
	everything except shlib-versions.v.i.
	(CPPFLAGS): Use it.
	(before-compile): Add libc-modules.h.
	($(common-objpfx)libc-modules.h,
	$(common-objpfx)libc-modules.stmp): New targets.
	(common-generated): Add libc-modules.h and libc-modules.stmp.
	($(common-objpfx)Versions.v.i): Depend on libc-modules.h.
	* include/libc-symbols.h: Don't include libc-modules.h.
	* include/libc-modules.h: Remove file.
	* scripts/gen-libc-modules.awk: New script to generate
	libc-modules.h.
	* sysdeps/unix/Makefile ($(common-objpfx)sysd-syscalls):
	Depend on libc-modules.stmp.

	* include/shlib-compat.h (_SHLIB_COMPAT): Use IS_IN.

	* Makeconfig (in-module): Get value of libof set for the
	translation unit.
	(CPPFLAGS): Use $(in-module).
	* Makerules: Don't suffix routine names for nonlib.
	* include/libc-modules.h: New file.
	* include/libc-symbols.h: Include libc-modules.h
	(IS_IN): New macro to replace IS_IN_* macros.
	* elf/Makefile: Set libof-* for each routine.
	* elf/rtld-Rules: Likewise.
	* extra-modules.mk: Likewise.
	* iconv/Makefile: Likewise.
	* iconvdata/Makefile: Likewise.
	* locale/Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* nss/Makefile: Likewise.
	* sysdeps/gnu/Makefile: Likewise.
	* sysdeps/ieee754/ldbl-opt/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/Makefile: Likewise.
	* sysdeps/s390/s390-64/Makefile: Likewise.
	* nscd/Makefile: Set libof-* for each routine.  Set CFLAGS and
	CPPFLAGS for nscd instead of nonlib.

2014-11-18  Roland McGrath  <roland@hack.frob.com>

	* nptl/createthread.c: New file.

	* nptl/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/createthread.c: ... here.

	* nptl/createthread.c: Add proper top-line comment.
	(do_clone): Folded into ...
	(create_thread): ... here.  Take new arguments STOPPED_START and
	THREAD_RAN.  Always set PD->stopped_start to something here.  Don't
	increment __nptl_threads, do event-reporting logic, do
	CHECK_THREAD_SYSINFO, or set THREAD_SELF->header.multiple_threads
	here.  Set *THREAD_RAN after ARCH_CLONE call succeeds.  Don't do any
	resource cleanup if sched_setaffinity or sched_setscheduler fails,
	just send SIGCANCEL.
	* nptl/pthread_create.c: Forward-declare create_thread before
	including createthread.c.
	(start_thread): Use new macro START_THREAD_DEFN to replace defining
	declaration, and new macro START_THREAD_SELF to replace argument.
	Remove return statement.
	(report_thread_creation): New function.
	(__pthread_create_2_1): Use it.  Do TD_CREATE reporting,
	synchronization logic, and __nptl_nthreads increment here, around
	calling create_thread.  Do CHECK_THREAD_SYSINFO and initialize
	PD->parent_cancelhandling here, before create_thread.  When
	create_thread fails, do __nptl_nthreads decrement, setxid_futex wake,
	__deallocate_stack, and ENOMEM translation here.

2014-11-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17616]
	* sysdeps/ieee754/dbl-64/mpa.c (mpone): Rename to __mpone.
	(mptwo): Rename to __mptwo.
	(__inv): Use __mptwo instead of mptwo.
	* sysdeps/ieee754/dbl-64/mpa.h (mpone): Rename to __mpone.
	(mptwo): Rename to __mptwo.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Use __mpone instead
	of mpone and __mptwo instead of mptwo.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Use __mpone
	instead of mpone.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Likewise.
	* sysdeps/ieee754/dbl-64/mplog.c (__mplog): Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c (__c32): Use __mpone instead
	of mpone and __mptwo instead of mptwo.
	(__mpranred): Use __mpone instead of mpone.
	* conform/Makefile (test-xfail-ISO/math.h/linknamespace): Remove
	variable.
	(test-xfail-ISO99/complex.h/linknamespace): Likewise.
	(test-xfail-ISO99/math.h/linknamespace): Likewise.
	(test-xfail-ISO99/tgmath.h/linknamespace): Likewise.
	(test-xfail-ISO11/complex.h/linknamespace): Likewise.
	(test-xfail-ISO11/math.h/linknamespace): Likewise.
	(test-xfail-ISO11/tgmath.h/linknamespace): Likewise.
	(test-xfail-XPG3/math.h/linknamespace): Likewise.
	(test-xfail-XPG4/math.h/linknamespace): Likewise.
	(test-xfail-POSIX/math.h/linknamespace): Likewise.
	(test-xfail-UNIX98/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/complex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/tgmath.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/complex.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/math.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/tgmath.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/complex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/tgmath.h/linknamespace): Likewise.

2014-11-18  Tom de Vries  <tom@codesoucery.com>

	* manual/signal.texi (Primitives Interrupted by Signals): In section,
	replace BSD Handler xref with BSD Signal Handling.

2014-11-17  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha/soft-fp/local-soft-fp.h (_FP_UNPACK_RAW_2): Remove.
	(_FP_PACK_RAW_2): Remove.
	(AXP_DECL_RETURN_Q): Rename from FP_DECL_RETURN, use _FP_UNION_Q.
	(AXP_RETURN_Q): Rename from FP_RETURN, use _FP_UNION_Q.
	(AXP_UNPACK_RAW_Q, AXP_UNPACK_SEMIRAW_Q, AXP_UNPACK_Q): New.
	(AXP_PACK_RAW_Q, AXP_PACK_SEMIRAW_Q, AXP_PACK_Q): New.
	* sysdeps/alpha/soft-fp/ots_add.c (_OtsAddX): Update to match.
	* sysdeps/alpha/soft-fp/ots_cmp.c (internal_equality): Likewise.
	* sysdeps/alpha/soft-fp/ots_cmpe.c (internal_compare): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvtqux.c (_OtsCvtQUX): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvtqx.c (_OtsCvtQX): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvttx.c (_OtsConvertFloatTX): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvtxq.c (_OtsCvtXQ): Likewise.
	* sysdeps/alpha/soft-fp/ots_cvtxt.c (_OtsConvertFloatXT): Likewise.
	* sysdeps/alpha/soft-fp/ots_div.c (_OtsDivX): Likewise.
	* sysdeps/alpha/soft-fp/ots_mul.c (_OtsMulX): Likewise.
	* sysdeps/alpha/soft-fp/ots_nintxq.c (_OtsNintXQ): Likewise.
	* sysdeps/alpha/soft-fp/ots_sub.c (_OtsSubX): Likewise.

2014-11-14  Roland McGrath  <roland@hack.frob.com>

	* signal/signal.h [__USE_MISC]
	(struct sigvec): Remove type.
	(SV_ONSTACK, SV_INTERRUPT, SV_RESETHAND): Remove macros.
	(sigvec): Remove declaration.
	* sysdeps/posix/sigvec.c: Moved ...
	* signal/sigvec.c: ... here, replacing old file.
	(struct sigvec): New type, copied from old signal.h definition.
	(SV_ONSTACK, SV_INTERRUPT, SV_RESETHAND): New macros, likewise copied.
	(__sigvec): Convert definition to prototype.
	(sigvec): Replace weak_alias with compat_symbol.
	* signal/Versions (libc: GLIBC_2.21): New version set.
	* include/signal.h: Remove __sigvec declaration.
	* sysdeps/unix/bsd/sigvec.c: Remove file.
	* sysdeps/unix/bsd/syscalls.list: Remove sigvec.
	* manual/signal.texi (BSD Handler): Remove subsection.
	Move siginterrupt up to ...
	(BSD Signal Handling): ... here.  Mark it as XPG rather than BSD.
	(Blocking in BSD): Fold subsection into its parent.
	* NEWS: Mention sigvec removal.

2014-11-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86_64/fpu/dla.h [__FMA4__ && __GNUC_PREREQ (4, 6)]
	(DLA_FMS): Make definition conditional only on [__FMA4__].
	[__FMA4__ && !__GNUC_PREREQ (4, 6)] (DLA_FMS): Remove conditional
	definition.

	* sysdeps/arm/sysdep.h [PROF && __GNUC_PREREQ(4,4)] (CALL_MCOUNT):
	Make definition conditional only on [PROF].
	[PROF && !__GNUC_PREREQ(4,4)] (CALL_MCOUNT): Remove conditional
	definition.
	[__GNUC_PREREQ(4,4)] (mcount): Make definition unconditional.
	[!__GNUC_PREREQ(4,4)] (mcount): Remove conditional definition.

	* signal/signal.h (__sigpause): Only declare if [__USE_XOPEN &&
	!__GNUC__].
	* include/signal.h (__sigpause): Move declaration above call to
	libc_hidden_proto.
	* conform/Makefile (test-xfail-ISO/signal.h/linknamespace): Remove
	variable.
	(test-xfail-ISO99/signal.h/linknamespace): Likewise.
	(test-xfail-ISO11/signal.h/linknamespace): Likewise.

2014-11-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/rtld-memcpy.c (NO_MEMPCPY_STPCPY_REDIRECT):
	Define before including <string/memcpy.c> and <string/mempcpy.c>.

2014-11-14  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (libc_cv_compiler_ok): Require GCC 4.6 or later.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Document a
	requirement of GCC 4.6 or later and that GCC 4.9 is the newest
	compiler verified to work.
	* INSTALL: Regenerated.

	* include/string.h [NO_MEMPCPY_STPCPY_REDIRECT] (mempcpy): Do not
	redeclare with asm name.
	[NO_MEMPCPY_STPCPY_REDIRECT] (stpcpy): Likewise.
	* string/mempcpy.c (NO_MEMPCPY_STPCPY_REDIRECT): Define before
	including <string.h>.
	* string/stpcpy.c (NO_MEMPCPY_STPCPY_REDIRECT): Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy.c
	[!NOT_IN_libc] (NO_MEMPCPY_STPCPY_REDIRECT): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy.c
	[!NOT_IN_libc] (NO_MEMPCPY_STPCPY_REDIRECT): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c
	[SHARED && !NOT_IN_libc] (NO_MEMPCPY_STPCPY_REDIRECT): Likewise.

2014-11-13  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/strtol.c (__strtol): Use prototype definition.

	[BZ #17594]
	* stdlib/strtol.c (SYM__): New macro.
	(SYM__1): Likewise.
	(__strtol): Likewise.
	(strtol): Rename to __strtol and define as weak alias of
	__strtol.  Use libc_hidden_weak.

2014-11-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/dl-machine.h (RTLD_START):
	Use numbered labels in inline assembly.

2014-11-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/setjmp.S (__sigsetjmp):
	Add setjmp LIBC_PROBE.
	* sysdeps/s390/s390-64/setjmp.S (__sigsetjmp):
	Likewise.
	* sysdeps/s390/s390-32/__longjmp.c (__longjmp):
	Add longjmp, longjmp_target LIBC_PROBE.
	* sysdeps/s390/s390-64/__longjmp.c (__longjmp):
	Likewise.

2014-11-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela):
	Gate the definition of refsym additionally with !RTLD_BOOTSTRAP
	to get rid of unused variable warning.

2014-11-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/backtrace.c (__backtrace):
	Check for unwind_backtrace ==  NULL only in SHARED case.
	(__backchain_backtrace): Compile only in SHARED case.
	* sysdeps/s390/s390-64/backtrace.c (__backtrace):
	Likewise.
	(__backchain_backtrace): Declare as static.

2014-11-12  Roland McGrath  <roland@hack.frob.com>

	* nptl/createthread.c [!TLS_MULTIPLE_THREADS_IN_TCB]
	(__libc_multiple_threads_ptr): Variable moved ...
	* nptl/nptl-init.c [!TLS_MULTIPLE_THREADS_IN_TCB]: ... here.

2014-11-12  Joseph Myers  <joseph@codesourcery.com>

	* conform/GlibcConform.pm: New file.
	* conform/conformtest.pl: Use GlibcConform module.
	* conform/linknamespace.pl: New file.
	* conform/list-header-symbols.pl: Likewise.
	* conform/Makefile (linknamespace-symlists-base): New variable.
	(linknamespace-symlists-tests): Likewise.
	(linknamespace-header-base): Likewise.
	(linknamespace-header-tests): Likewise.
	(tests-special): Add new tests.
	($(linknamespace-symlists-tests)): New rule.
	(linknamespace-libs): New variable.
	($(objpfx)symlist-stdlibs): New rule.
	($(linknamespace-header-tests)): Likewise.
	(test-xfail-XPG3/varargs.h/linknamespace): New variable.
	(test-xfail-XPG4/varargs.h/linknamespace): Likewise.
	(test-xfail-UNIX98/varargs.h/linknamespace): Likewise.
	(test-xfail-XPG4/ndbm.h/linknamespace): Likewise.
	(test-xfail-UNIX98/ndbm.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/ndbm.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/ndbm.h/linknamespace): Likewise.
	(test-xfail-ISO/math.h/linknamespace): Likewise.
	(test-xfail-ISO/signal.h/linknamespace): Likewise.
	(test-xfail-ISO/stdio.h/linknamespace): Likewise.
	(test-xfail-ISO/time.h/linknamespace): Likewise.
	(test-xfail-ISO99/complex.h/linknamespace): Likewise.
	(test-xfail-ISO99/ctype.h/linknamespace): Likewise.
	(test-xfail-ISO99/math.h/linknamespace): Likewise.
	(test-xfail-ISO99/signal.h/linknamespace): Likewise.
	(test-xfail-ISO99/stdio.h/linknamespace): Likewise.
	(test-xfail-ISO99/tgmath.h/linknamespace): Likewise.
	(test-xfail-ISO11/complex.h/linknamespace): Likewise.
	(test-xfail-ISO11/ctype.h/linknamespace): Likewise.
	(test-xfail-ISO11/math.h/linknamespace): Likewise.
	(test-xfail-ISO11/signal.h/linknamespace): Likewise.
	(test-xfail-ISO11/stdio.h/linknamespace): Likewise.
	(test-xfail-ISO11/tgmath.h/linknamespace): Likewise.
	(test-xfail-XPG3/ctype.h/linknamespace): Likewise.
	(test-xfail-XPG3/fnmatch.h/linknamespace): Likewise.
	(test-xfail-XPG3/glob.h/linknamespace): Likewise.
	(test-xfail-XPG3/math.h/linknamespace): Likewise.
	(test-xfail-XPG3/regex.h/linknamespace): Likewise.
	(test-xfail-XPG3/search.h/linknamespace): Likewise.
	(test-xfail-XPG3/stdio.h/linknamespace): Likewise.
	(test-xfail-XPG3/time.h/linknamespace): Likewise.
	(test-xfail-XPG3/unistd.h/linknamespace): Likewise.
	(test-xfail-XPG3/wordexp.h/linknamespace): Likewise.
	(test-xfail-XPG4/ctype.h/linknamespace): Likewise.
	(test-xfail-XPG4/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-XPG4/fnmatch.h/linknamespace): Likewise.
	(test-xfail-XPG4/glob.h/linknamespace): Likewise.
	(test-xfail-XPG4/grp.h/linknamespace): Likewise.
	(test-xfail-XPG4/libgen.h/linknamespace): Likewise.
	(test-xfail-XPG4/math.h/linknamespace): Likewise.
	(test-xfail-XPG4/netdb.h/linknamespace): Likewise.
	(test-xfail-XPG4/pwd.h/linknamespace): Likewise.
	(test-xfail-XPG4/regex.h/linknamespace): Likewise.
	(test-xfail-XPG4/search.h/linknamespace): Likewise.
	(test-xfail-XPG4/stdio.h/linknamespace): Likewise.
	(test-xfail-XPG4/stdlib.h/linknamespace): Likewise.
	(test-xfail-XPG4/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XPG4/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XPG4/syslog.h/linknamespace): Likewise.
	(test-xfail-XPG4/time.h/linknamespace): Likewise.
	(test-xfail-XPG4/unistd.h/linknamespace): Likewise.
	(test-xfail-XPG4/wordexp.h/linknamespace): Likewise.
	(test-xfail-POSIX/aio.h/linknamespace): Likewise.
	(test-xfail-POSIX/fnmatch.h/linknamespace): Likewise.
	(test-xfail-POSIX/glob.h/linknamespace): Likewise.
	(test-xfail-POSIX/math.h/linknamespace): Likewise.
	(test-xfail-POSIX/mqueue.h/linknamespace): Likewise.
	(test-xfail-POSIX/pthread.h/linknamespace): Likewise.
	(test-xfail-POSIX/regex.h/linknamespace): Likewise.
	(test-xfail-POSIX/sched.h/linknamespace): Likewise.
	(test-xfail-POSIX/semaphore.h/linknamespace): Likewise.
	(test-xfail-POSIX/sys/mman.h/linknamespace): Likewise.
	(test-xfail-POSIX/time.h/linknamespace): Likewise.
	(test-xfail-POSIX/unistd.h/linknamespace): Likewise.
	(test-xfail-POSIX/wordexp.h/linknamespace): Likewise.
	(test-xfail-UNIX98/aio.h/linknamespace): Likewise.
	(test-xfail-UNIX98/ctype.h/linknamespace): Likewise.
	(test-xfail-UNIX98/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-UNIX98/fnmatch.h/linknamespace): Likewise.
	(test-xfail-UNIX98/glob.h/linknamespace): Likewise.
	(test-xfail-UNIX98/grp.h/linknamespace): Likewise.
	(test-xfail-UNIX98/libgen.h/linknamespace): Likewise.
	(test-xfail-UNIX98/math.h/linknamespace): Likewise.
	(test-xfail-UNIX98/mqueue.h/linknamespace): Likewise.
	(test-xfail-UNIX98/netdb.h/linknamespace): Likewise.
	(test-xfail-UNIX98/pthread.h/linknamespace): Likewise.
	(test-xfail-UNIX98/pwd.h/linknamespace): Likewise.
	(test-xfail-UNIX98/regex.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sched.h/linknamespace): Likewise.
	(test-xfail-UNIX98/search.h/linknamespace): Likewise.
	(test-xfail-UNIX98/semaphore.h/linknamespace): Likewise.
	(test-xfail-UNIX98/stdio.h/linknamespace): Likewise.
	(test-xfail-UNIX98/stdlib.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sys/mman.h/linknamespace): Likewise.
	(test-xfail-UNIX98/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-UNIX98/syslog.h/linknamespace): Likewise.
	(test-xfail-UNIX98/time.h/linknamespace): Likewise.
	(test-xfail-UNIX98/unistd.h/linknamespace): Likewise.
	(test-xfail-UNIX98/wchar.h/linknamespace): Likewise.
	(test-xfail-UNIX98/wordexp.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/aio.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/complex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/fcntl.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/fnmatch.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/glob.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/grp.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/libgen.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/mqueue.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/net/if.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/netdb.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/pthread.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/pwd.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/regex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/search.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/semaphore.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/signal.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/spawn.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/stdlib.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/sys/wait.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/syslog.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/tgmath.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/time.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/ucontext.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/unistd.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K/wordexp.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/aio.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/complex.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/ctype.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/dirent.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/fcntl.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/grp.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/math.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/mqueue.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/net/if.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/netdb.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/pthread.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/regex.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/semaphore.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/spawn.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/sys/mman.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/tgmath.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/time.h/linknamespace): Likewise.
	(test-xfail-POSIX2008/unistd.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/aio.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/complex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/dirent.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/fcntl.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/fmtmsg.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/grp.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/libgen.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/math.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/mqueue.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/net/if.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/netdb.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/pthread.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/pwd.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/regex.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/search.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/semaphore.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/spawn.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/sys/mman.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/sys/statvfs.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/syslog.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/tgmath.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/time.h/linknamespace): Likewise.
	(test-xfail-XOPEN2K8/unistd.h/linknamespace): Likewise.

	[BZ #17589]
	* intl/localealias.c [_LIBC] (FGETS): Use __fgets_unlocked instead
	of fgets_unlocked.

	[BZ #17585]
	* string/memmem.c [!_LIBC] (__memmem): Define to memmem.
	(memmem): Rename to __memmem and define as weak alias of
	__memmem.  Use libc_hidden_weak.
	(__memmem): Use libc_hidden_def.
	* include/string.h (__memmem): Declare.  Use libc_hidden_proto.
	* locale/findlocale.c (valid_locale_name): Use __memmem instead of
	memmem.

	[BZ #17582]
	* libio/iofgets.c [weak_alias && !_IO_MTSAFE_IO]
	(__fgets_unlocked): Add alias of _IO_fgets.  Use libc_hidden_def.
	* libio/iofgets_u.c (fgets_unlocked): Rename to __fgets_unlocked
	and define as weak alias of __fgets_unlocked.  Use
	libc_hidden_weak.
	(__fgets_unlocked): Use libc_hidden_def.
	* include/stdio.h (__fgets_unlocked): Declare.  Use
	libc_hidden_proto.
	* sysdeps/unix/sysv/linux/getsysstats.c (phys_pages_info): Use
	__fgets_unlocked instead of fgets_unlocked.
	* sysdeps/unix/sysv/linux/alpha/getsysstats.c
	(GET_NPROCS_CONF_PARSER): Likewise.
	* sysdeps/unix/sysv/linux/sparc/getsysstats.c
	(GET_NPROCS_CONF_PARSER): Likewise.

	[BZ #17574]
	* wcsmbs/wmemset.c (wmemset): Rename to __wmemset and define as
	weak alias of __wmemset.  Use libc_hidden_weak.
	(__wmemset): Use libc_hidden_def.
	* include/wchar.h (__wmemset): Declare.  Use libc_hidden_proto.
	* stdio-common/printf_fp.c (___printf_fp): Call __wmemset instead
	of wmemset.

	[BZ #17573]
	* include/string.h [NOT_IN_libc || !SHARED] (mempcpy): Declare
	with asm name __mempcpy.
	[NOT_IN_libc || !SHARED] (stpcpy): Declare with asm name __stpcpy.

	[BZ #17572]
	* sysdeps/x86_64/rawmemchr.S (rawmemchr): Rename to __rawmemchr
	and define as weak alias of __rawmemchr.
	(__rawmemchr): Do not define as strong alias of rawmemchr.

	[BZ #17571]
	* stdlib/msort.c (qsort_r): Rename to __qsort_r and define as weak
	alias of __qsort_r.
	(qsort): Call __qsort_r instead of qsort_r.
	* include/stdlib.h (qsort_r): Do not call libc_hidden_proto.
	(__qsort_r): Declare.  Call libc_hidden_proto.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Call __qsort_r
	instead of qsort_r.
	* nscd/gai.c (__qsort_r): Define to qsort_r.
	* posix/tst-rfc3484.c (__qsort_r): Likewise.
	* posix/tst-rfc3484-2.c (__qsort_r): Likewise.
	* posix/tst-rfc3484-3.c (__qsort_r): Likewise.

	[BZ #17570]
	* malloc/malloc.c (malloc_info): Rename to __malloc_info and
	define as weak alias of __malloc_info.

	[BZ #17584]
	* dirent/rewinddir.c (rewinddir): Rename to __rewinddir and define
	as weak alias of __rewinddir.  Don't use libc_hidden_def.
	(__rewinddir): Use libc_hidden_def.
	* sysdeps/mach/hurd/rewinddir.c: Rename to __rewinddir and define
	as weak alias of __rewinddir.  Don't use libc_hidden_def.
	(__rewinddir): Use libc_hidden_def.
	* sysdeps/posix/rewinddir.c: Rename to __rewinddir and define as
	weak alias of __rewinddir.  Don't use libc_hidden_def.
	(__rewinddir): Use libc_hidden_def.
	* include/dirent.h (rewinddir): Don't use libc_hidden_proto.
	(__rewinddir): Use libc_hidden_proto.
	* sysdeps/posix/getcwd.c [!_LIBC] (__rewinddir): Define to
	rewinddir.
	(__getcwd): Use __rewinddir instead of rewinddir.

	[BZ #17583]
	* libio/fileno.c (fileno): Rename to __fileno and define as weak
	alias of __fileno.  Use libc_hidden_weak.
	(__fileno): Use libc_hidden_def.
	[weak_alias] (fileno_unlocked): Define as weak alias of __fileno.
	* libio/ftello.c (ftello): Rename to __ftello and define as weak
	alias of __ftello.
	[__OFF_T_MATCHES_OFF64_T] (ftello64): Define as weak alias of
	__ftello.
	* libio/iofread.c [weak_alias && !_IO_MTSAFE_IO]
	(__fread_unlocked): Define as strong alias of _IO_fread.  Use
	libc_hidden_def.
	(fread_unlocked): Don't use libc_hidden_ver.
	* libio/iofread_u.c (fread_unlocked): Rename to __fread_unlocked
	and define as weak alias of __fread_unlocked.  Don't use
	libc_hidden_def.
	(__fread_unlocked): Use libc_hidden_def.
	* include/stdio.h (__fileno): Declare.  Use libc_hidden_proto.
	(ftello): Don't use libc_hidden_proto.
	(__ftello): Declare.  Use libc_hidden_proto.
	(fread_unlocked): Don't use libc_hidden_proto.
	(__fread_unlocked): Declare.  Use libc_hidden_proto.
	* time/tzfile.c (__tzfile_read): Use __fileno, __fread_unlocked
	and __ftello instead of fileno, fread_unlocked and ftello.

2012-11-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/s390-32/bcopy.S (__bcopy): Use GOT instead of
	GOT12.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_load_address):
	Likewise.
	(_dl_start_user): Likewise.
	* sysdeps/s390/s390-32/setjmp.S (__sigsetjmp): Likewise.

2014-11-12  Carlos O'Donell  <carlos@redhat.com>
	    Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/s390-32/dl-machine.h (_dl_start_user):
	Move argv and envp down instead of moving argc up.
	* sysdeps/s390/s390-32/dl-sysdep.h: New file.

2014-11-12  Leonhard Holz  <leonhard.holz@web.de>

	[BZ #17506]
	* test-skeleton.c (main): Return successful if one of
	EXPECTED_SIGNAL or EXPECTED_STATUS is met when both given.
	* string/tst-strcoll-overflow.c: Define expected status.

2014-11-12  Tatiana Udalova  <t.udalova@samsung.com>

	[BZ #17475]
	* locale/iso-639.def: Define Bhili and Tulu language codes.

2014-11-11  Alan Hayward  <alan.hayward@arm.com>

	* sysdeps/unix/sysv/linux/aarch64/bits/ipc.h: New file.

2014-11-10  Renlin Li  <Renlin.Li@arm.com>

	[BZ #17555]
	* sysdeps/aarch64/start.S (_start): Delete x29 overwritten assignment.

2014-11-10  Andrew Senkevich  <andrew.n.senkevich@gmail.com>

	* configure.ac: Updated check of minimal required version to
	2.22.
	* manual/install.texi (Tools for Compilation): Updated version
	number.
	* configure: Regenerated.
	* INSTALL: Likewise.

2014-11-07  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/m68k/localplt.data (ld.so): Remove
	__tls_get_addr.

2014-11-07  Joseph Myers  <joseph@codesourcery.com>

	* include/sys/wait.h (__libc_waitpid): Remove declaration.
	* posix/waitpid.c (__libc_waitpid): Rename to __waitpid.
	(__waitpid): Don't define as alias.  Use libc_hidden_def not
	libc_hidden_weak.
	(waitpid): Define as alias of __waitpid.
	* sysdeps/unix/bsd/waitpid.c (__libc_waitpid): Rename to
	__waitpid.
	(__waitpid): Don't define as alias.  Use libc_hidden_def not
	libc_hidden_weak.
	(waitpid): Define as alias of __waitpid.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (waitpid): Remove
	__libc_waitpid alias.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list (waitpid): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list (waitpid):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list (waitpid): Likewise.
	* sysdeps/unix/sysv/linux/sparc/syscalls.list (waitpid): Likewise.
	* sysdeps/unix/sysv/linux/tile/waitpid.S (__libc_waitpid): Remove
	alias.
	* sysdeps/unix/sysv/linux/waitpid.c (__libc_waitpid): Rename to
	__waitpid.
	(__waitpid): Don't define as alias.  Use libc_hidden_def not
	libc_hidden_weak.
	(waitpid): Define as alias of __waitpid.

2014-11-06  Carlos O'Donell  <carlos@redhat.com>

	* manual/llio.texi: Add comment that write safety has been
	fixed in Linux.

	* elf/Makefile (all-built-dso): Add $(common-objpfx)elf/ld.so.
	(localplt-build-dso): Add elf/ld.so.
	* sysdeps/unix/sysv/linux/i386/localplt.data: Add ___tls_get_addr
	i.e. 3 underscore version, __libc_memalign, malloc, calloc, realloc,
	and free for ld.so.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/localplt.data: Add
	__libc_memalign, malloc, calloc, realloc, and free for ld.so.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/localplt.data:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/localplt.data:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/localplt.data: Likewise.
	* sysdeps/generic/localplt.data: Add __tls_get_addr i.e. 2 underscore
	version, __libc_memalign, malloc, calloc, realloc and free for ld.so.
	* sysdeps/unix/sysv/linux/aarch64/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/arm/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/alpha/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/ia64/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/m68k/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/localplt.data: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/localplt.data: Likewise.

2014-11-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* include/libc-symbols.h (INTUSE): Remove macro.
	(INTDEF): Likewise.
	(INTVARDEF): Likewise.
	(_INTVARDEF): Likewise.
	(INTDEF2): Likewise.
	(INTVARDEF2): Likewise.
	* elf/rtld.c [!HAVE_INLINED_SYSCALLS] (_dl_starting_up): Use
	rtld_hidden_def instead of INTVARDEF.
	* sysdeps/generic/ldsodefs.h [IS_IN_rtld]
	(_dl_starting_up_internal): Remove declaration.
	(_dl_starting_up): Use rtld_hidden_proto.
	* elf/dl-init.c [!HAVE_INLINED_SYSCALLS] (_dl_starting_up): Remove
	declaration.
	[!HAVE_INLINED_SYSCALLS] (_dl_starting_up_internal): Likewise.
	(_dl_init) [!HAVE_INLINED_SYSCALLS]: Don't use INTUSE with
	_dl_starting_up.
	* elf/dl-writev.h (_dl_writev): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h [!HAVE_INLINED_SYSCALLS]
	(DL_STARTING_UP_DEF): Use __GI__dl_starting_up instead of
	_dl_starting_up_internal.

2014-11-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* stdio-common/tst-fmemopen.c (do_test): Refactor to use
	test-skeleton.c.

2014-11-05  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile: (bench-malloc): Add malloc thread
	scalability benchmark.
	* benchtests/bench-malloc-threads.c: New file.

2014-11-05  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strchrnul.S: New file.

2014-11-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/memset.S (MTVSRD_V1_R4): Simplify
	definition.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_finite.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinf.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llrint.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llround.S (MFVSRD_R3_V1):
	Likewise.

2014-11-05  Arjun Shankar  <arjun.is@lostca.se>

	* catgets/test-gencat.c: Use test-skeleton.c.
	* catgets/tst-catgets.c: Likewise.
	* csu/tst-empty.c: Likewise.
	* elf/tst-audit2.c: Likewise.
	* elf/tst-global1.c: Likewise.
	* elf/tst-pathopt.c: Likewise.
	* elf/tst-piemod1.c: Likewise.
	* elf/tst-tls10.c: Likewise.
	* elf/tst-tls11.c: Likewise.
	* elf/tst-tls12.c: Likewise.
	* gnulib/tst-gcc.c: Likewise.
	* iconvdata/tst-e2big.c: Likewise.
	* iconvdata/tst-loading.c: Likewise.
	* iconv/tst-iconv1.c: Likewise.
	* iconv/tst-iconv2.c: Likewise.
	* inet/test-inet6_opt.c: Likewise.
	* inet/tst-gethnm.c: Likewise.
	* inet/tst-network.c: Likewise.
	* inet/tst-ntoa.c: Likewise.
	* intl/tst-codeset.c: Likewise.
	* intl/tst-gettext2.c: Likewise.
	* intl/tst-gettext3.c: Likewise.
	* intl/tst-ngettext.c: Likewise.
	* intl/tst-translit.c: Likewise.
	* io/test-stat.c: Likewise.
	* libio/test-fmemopen.c: Likewise.
	* libio/tst-freopen.c: Likewise.
	* libio/tst-sscanf.c: Likewise.
	* libio/tst-ungetwc1.c: Likewise.
	* libio/tst-ungetwc2.c: Likewise.
	* libio/tst-widetext.c: Likewise.
	* localedata/tst-ctype.c: Likewise.
	* localedata/tst-digits.c: Likewise.
	* localedata/tst-leaks.c: Likewise.
	* localedata/tst-mbswcs1.c: Likewise.
	* localedata/tst-mbswcs2.c: Likewise.
	* localedata/tst-mbswcs3.c: Likewise.
	* localedata/tst-mbswcs4.c: Likewise.
	* localedata/tst-mbswcs5.c: Likewise.
	* localedata/tst-setlocale.c: Likewise.
	* localedata/tst-trans.c: Likewise.
	* localedata/tst-wctype.c: Likewise.
	* localedata/tst-xlocale1.c: Likewise.
	* login/tst-grantpt.c: Likewise.
	* malloc/tst-calloc.c: Likewise.
	* malloc/tst-malloc.c: Likewise.
	* malloc/tst-mallocstate.c: Likewise.
	* malloc/tst-mcheck.c: Likewise.
	* malloc/tst-mtrace.c: Likewise.
	* malloc/tst-obstack.c: Likewise.
	* math/atest-exp2.c: Likewise.
	* math/atest-exp.c: Likewise.
	* math/atest-sincos.c: Likewise.
	* math/test-matherr.c: Likewise.
	* math/test-misc.c: Likewise.
	* math/test-powl.c: Likewise.
	* math/tst-definitions.c: Likewise.
	* misc/tst-dirname.c: Likewise.
	* misc/tst-efgcvt.c: Likewise.
	* misc/tst-fdset.c: Likewise.
	* misc/tst-hsearch.c: Likewise.
	* misc/tst-mntent2.c: Likewise.
	* nptl/tst-sem7.c: Likewise.
	* nptl/tst-sem8.c: Likewise.
	* nptl/tst-sem9.c: Likewise.
	* nss/test-netdb.c: Likewise.
	* posix/tst-fnmatch.c: Likewise.
	* posix/tst-getlogin.c: Likewise.
	* posix/tst-gnuglob.c: Likewise.
	* posix/tst-mmap.c: Likewise.
	* pwd/tst-getpw.c: Likewise.
	* resolv/tst-inet_ntop.c: Likewise.
	* rt/tst-timer.c: Likewise.
	* stdio-common/test-fseek.c: Likewise.
	* stdio-common/test-popen.c: Likewise.
	* stdio-common/test-vfprintf.c: Likewise.
	* stdio-common/tst-cookie.c: Likewise.
	* stdio-common/tst-fileno.c: Likewise.
	* stdio-common/tst-gets.c: Likewise.
	* stdio-common/tst-obprintf.c: Likewise.
	* stdio-common/tst-perror.c: Likewise.
	* stdio-common/tst-sprintf2.c: Likewise.
	* stdio-common/tst-sprintf3.c: Likewise.
	* stdio-common/tst-sprintf.c: Likewise.
	* stdio-common/tst-swprintf.c: Likewise.
	* stdio-common/tst-tmpnam.c: Likewise.
	* stdio-common/tst-unbputc.c: Likewise.
	* stdio-common/tst-wc-printf.c: Likewise.
	* stdlib/tst-environ.c: Likewise.
	* stdlib/tst-fmtmsg.c: Likewise.
	* stdlib/tst-limits.c: Likewise.
	* stdlib/tst-rand48-2.c: Likewise.
	* stdlib/tst-rand48.c: Likewise.
	* stdlib/tst-random2.c: Likewise.
	* stdlib/tst-random.c: Likewise.
	* stdlib/tst-strtol.c: Likewise.
	* stdlib/tst-strtoll.c: Likewise.
	* stdlib/tst-tls-atexit.c: Likewise.
	* stdlib/tst-xpg-basename.c: Likewise.
	* string/test-ffs.c: Likewise.
	* string/tst-bswap.c: Likewise.
	* string/tst-inlcall.c: Likewise.
	* string/tst-strtok.c: Likewise.
	* string/tst-strxfrm.c: Likewise.
	* sysdeps/x86_64/tst-audit10.c: Likewise.
	* sysdeps/x86_64/tst-audit3.c: Likewise.
	* sysdeps/x86_64/tst-audit4.c: Likewise.
	* sysdeps/x86_64/tst-audit5.c: Likewise.
	* time/tst-ftime_l.c: Likewise.
	* time/tst-getdate.c: Likewise.
	* time/tst-mktime3.c: Likewise.
	* time/tst-mktime.c: Likewise.
	* time/tst-posixtz.c: Likewise.
	* time/tst-strptime2.c: Likewise.
	* time/tst-strptime3.c: Likewise.
	* wcsmbs/tst-btowc.c: Likewise.
	* wcsmbs/tst-mbrtowc.c: Likewise.
	* wcsmbs/tst-mbsrtowcs.c: Likewise.
	* wcsmbs/tst-wchar-h.c: Likewise.
	* wcsmbs/tst-wcpncpy.c: Likewise.
	* wcsmbs/tst-wcrtomb.c: Likewise.
	* wcsmbs/tst-wcsnlen.c: Likewise.
	* wcsmbs/tst-wcstof.c: Likewise.

2014-11-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* elf/dl-profile.c (_dl_mcount): Use rtld_hidden_def instead of
	INTDEF.
	* sysdeps/generic/ldsodefs.h (_dl_mcount_internal): Remove
	declaration.
	(_dl_mcount): Use rtld_hidden_proto.
	* elf/dl-runtime.c (_dl_profile_fixup): Don't use INTUSE with
	_dl_mcount.
	* elf/rtld.c (_rtld_global_ro): Likewise.

	[BZ #14132]
	* elf/dl-init.c (_dl_init): Don't use INTDEF.
	* sysdeps/aarch64/dl-machine.h (RTLD_START): Use _dl_init instead
	of _dl_init_internal.
	* sysdeps/alpha/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/arm/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/hppa/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/i386/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/ia64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/m68k/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/microblaze/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/mips/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/powerpc/powerpc32/dl-start.S (_start): Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sh/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/tile/dl-start.S (_start): Likewise.
	* sysdeps/x86_64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/x86_64/x32/dl-machine.h (RTLD_START): Likewise.

	[BZ #14132]
	* sysdeps/generic/ldsodefs.h (_dl_argv): Use rtld_hidden_proto.
	[IS_IN_rtld] (_dl_argv_internal): Do not declare.
	(rtld_progname): Make macro definition unconditional.
	* elf/rtld.c (_dl_argv): Use rtld_hidden_data_def instead of
	INTDEF.
	(dlmopen_doit): Do not use INTUSE with _dl_argv.
	(dl_main): Likewise.
	* elf/dl-sysdep.c (_dl_sysdep_start): Likewise.
	* sysdeps/alpha/dl-machine.h (RTLD_START): Use __GI__dl_argv
	instead of _dl_argv_internal.
	* sysdeps/powerpc/powerpc32/dl-start.S (_dl_start_user): Use
	__GI__dl_argv instead of INTUSE(_dl_argv).
	* sysdeps/powerpc/powerpc64/dl-machine.h (RTLD_START): Use
	__GI__dl_argv instead of _dl_argv_internal.

	* soft-fp/op-common.h (_FP_TO_INT_ROUND): New macro.
	* soft-fp/double.h [_FP_W_TYPE_SIZE < 64] (FP_TO_INT_ROUND_D): New
	macro.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_ROUND_D): Likewise.
	* soft-fp/extended.h [_FP_W_TYPE_SIZE < 64] (FP_TO_INT_ROUND_E):
	New macro.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_ROUND_E): Likewise.
	* soft-fp/quad.h [_FP_W_TYPE_SIZE < 64] (FP_TO_INT_ROUND_Q): New
	macro.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_ROUND_Q): Likewise.
	* soft-fp/single.h (FP_TO_INT_ROUND_S): New macro.

2014-11-04  Andreas Schwab  <schwab@suse.de>

	* posix/regex_internal.h: Don't include <locale/elem-hash.h>.

2014-11-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/memset.S (MTVSRD_V1_R4): Encode
	mtvsrd instruction in binary form.

2014-11-03  Andreas Schwab  <schwab@suse.de>

	[BZ #17522]
	* libio/wfileops.c (_IO_wdo_write): If the file buffer has room
	for less than MB_LEN_MAX use a local buffer of that size.
	* libio/tst-fputws.c: New file.
	* libio/Makefile (tests): Add tst-fputws.

2014-11-01  Jose E. Marchesi  <jose.marchesi@oracle.com>

	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h (struct fpu): fix
	the size of the fpu_fr.fpu_dregs[] array.

2014-11-01  Joseph Myers  <joseph@codesourcery.com>

	* posix/nanosleep.c (__libc_nanosleep): Rename to __nanosleep.
	(__nanosleep): Do not define as alias.
	(nanosleep): Define as alias of __nanosleep.
	* sysdeps/unix/sysv/linux/syscalls.list (nanosleep): Remove
	__libc_nanosleep name.

2014-10-31  Joseph Myers  <joseph@codesourcery.com>

	* aclocal.m4 (GLIBC_AUTOCONF_VERSION): Mention need to update
	install.texi in comment.

2014-10-31  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/powerpc/bits/atomic.h (atomic_write_barrier): Remove and...
	* sysdeps/powerpc/powerpc32/bits/atomic.h (atomic_write_barrier):
	... add here and use lwsync or sync ...
	* sysdeps/powerpc/powerpc64/bits/atomic.h (atomic_write_barrier):
	... and add here using lwsync.

2014-10-31  Matthew Fortune  <matthew.fortune@imgtec.com>

	* elf/dl-machine-reject-phdr.h: New file.
	* elf/dl-load.c: #include that.
	(open_verify): Call elf_machine_reject_phdr_p and ignore the file
	if that returned true.

2014-10-31  Roland McGrath  <roland@hack.frob.com>

	[BZ #17496]
	* Makerules: Move gnu/lib-names.h generation chunk up, to right after
	gen-as-const-headers chunk.  Add a big scare comment after the last
	safe place to touch before-compile.

2014-10-31  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi (Tools for Compilation): Update autoconf
	version requirements.
	* INSTALL: Regenerated.

	* misc/pselect.c [!__pselect] (__libc_pselect): Remove alias.
	* sysdeps/unix/sysv/linux/pselect.c [__NR_pselect6]
	(__libc_pselect): Likewise.

	[BZ #14138]
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c: Remove file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c: Likewise.

2014-10-31  Torvald Riegel  <triegel@redhat.com>

	* sysdeps/sparc/sparc32/bits/atomic.h (atomic_write_barrier): Use
	correct barrier instruction.
	* sysdeps/sparc/sparc32/sparcv9/bits/atomic.h (atomic_write_barrier):
	Likewise.
	* sysdeps/sparc/sparc64/bits/atomic.h (atomic_write_barrier):
	Likewise.

2014-10-30  Roland McGrath  <roland@hack.frob.com>

	* include/ctype.h: Include <ctype/ctype.h> first thing rather than
	after defining inlines.  Instead, just use parens to defeat macro
	expansion of __isctype in its declaration.

2014-10-30  Joseph Myers  <joseph@codesourcery.com>

	* include/sys/uio.h (__libc_readv): Remove declaration.
	(__libc_writev): Likewise.
	* misc/readv.c (__libc_readv): Rename to __readv.
	(__readv): Do not define as alias.
	(readv): Define as alias of __readv.
	* misc/writev.c (__libc_writev): Rename to __writev.
	(__writev): Do not define as alias.
	(writev): Define as alias of __writev.
	* sysdeps/posix/readv.c (__libc_readv): Rename to __readv.
	(__readv): Do not define as alias.
	(readv): Define unconditionally as alias of __readv.
	* sysdeps/posix/writev.c (__libc_writev): Rename to __writev.
	(__writev): Do not define as alias.
	(writev): Define unconditionally as alias of __writev.
	* sysdeps/unix/syscalls.list (readv): Do not define __libc_readv
	name.
	(writev): Do not define __libc_writev name.

2014-10-30  Roland McGrath  <roland@hack.frob.com>

	* iconv/iconv_charmap.c (add_bytes): Make IN argument pointer to const.
	(convert_charseq): New function, broken out of ...
	(use_from_charmap): ... here.  Call it.
	(use_to_charmap): Use convert_charseq and free instead of duplicating
	its code with a variable-length stack struct.

2014-10-30  Joseph Myers  <joseph@codesourcery.com>

	* include/fcntl.h (__libc_creat): Remove declaration.
	* io/creat.c (__libc_creat): Rename to creat.
	(creat): Do not define as alias.
	* sysdeps/unix/sysv/linux/alpha/creat.c (creat64): Define as alias
	of creat instead of __libc_creat.
	* sysdeps/unix/sysv/linux/generic/creat.c (__libc_creat): Rename
	to creat.
	(creat): Do not define as alias.
	[__WORDSIZE == 64] (creat64): Define as alias of creat instead of
	__libc_creat.
	* sysdeps/unix/sysv/linux/syscalls.list (creat): Do not define
	__libc_creat name.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list (creat):
	Likewise.

2014-10-29  Carlos O'Donell  <carlos@redhat.com>

	* manual/llio.texi: Add comments discussing why write() may be
	considered MT-unsafe on Linux.

2014-10-28  Carlos O'Donell  <carlos@redhat.com>

	* dl-load.c (local_strdup): Remove.
	(expand_dynamic_string_token): Use __strdup.
	(decompose_rpath): Likewise.
	(_dl_map_object): Likewise.

2014-10-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* sysdeps/generic/unwind-dw2-fde.c
	(__register_frame_info_bases_internal): Do not declare.
	(__register_frame_info_table_bases_internal): Likewise.
	(__deregister_frame_info_bases_internal): Likewise.
	(__register_frame_info_bases): Declare and use hidden_proto before
	definition.  Use hidden_def instead of INTDEF.
	(__register_frame_info_table_bases): Likewise.
	(__deregister_frame_info_bases): Likewise.
	(__register_frame_info): Do not use INTUSE.
	(__register_frame): Likewise.
	(__register_frame_info_table): Likewise.
	(__register_frame_table): Likewise.
	(__deregister_frame_info): Likewise.
	(__deregister_frame): Likewise.

2014-10-27  Gratian Crisan  <gratian.crisan@ni.com>

	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030E03] (__ASSUME_FUTEX_LOCK_PI): Do
	not undefine.
	[__LINUX_KERNEL_VERSION >= 0x030E03] (__ASSUME_REQUEUE_PI):
	Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030E03] (__ASSUME_SET_ROBUST_LIST):
	Likewise.

2014-10-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/arm/setfsgid.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (setfsgid): Add
	syscall.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (setfsgid): Likewise.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list (setfsgid): Likewise.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list (setfsgid):
	Likewise.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list (setfsgid): Likewise.
	(setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list (setfsgid):
	Likewise.
	(setfsuid): Likewise.

2014-10-27  Andreas Schwab  <schwab@suse.de>

	[BZ #17501]
	* sysdeps/i386/i686/multiarch/strcasecmp.S (__strcasecmp): Fix
	check for Slow_SSE4_2 feature bit.
	* sysdeps/i386/i686/multiarch/strcmp.S (STRCMP): Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S (__strncasecmp): Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S (STRCMP, __strcascmp):
	Likewise.  Fix check for Fast_Unaligned_Load feature bit.

2014-10-24  Roland McGrath  <roland@hack.frob.com>

	* configure.ac: Validate compiler version with a empirical test of
	__GNUC__ and __GNUC_MINOR__ predefined values, rather than by grepping
	$CC -v output.
	* configure: Regenerated.

	* inet/htons.c (htons): Prototypify.
	* inet/htonl.c (htonl): Likewise.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/strncat.c (strncat): Improve performance by using strlen.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* string/strcat.c (strcat): Improve performance by using strlen/strcpy.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fgetexcptflg.c (fegetexceptflag):
	Call libc_fetestexcept_aarch64.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/feholdexcpt.c (feholdexcept):
	Call libc_feholdexcept_aarch64.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fegetround.c (fegetround):
	Call get_rounding_mode.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/feenablxcpt.c (feenableexcept):
	Simplify logic.

2014-10-24  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fedisblxcpt.c (fedisableexcept):
	Simplify logic.

2014-10-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/arm/getegid.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getegid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/geteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getgid.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getuid.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (getegid): Add
	syscall.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (getegid): Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list (getegid): Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list (getegid):
	Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list (getegid): Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getresgid): Likewise.
	(getresuid): Likewise.
	(getgroups): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list (getegid):
	Likewise.
	(geteuid): Likewise.
	(getgid): Likewise.
	(getuid): Likewise.
	(getgroups): Likewise.

	[BZ #14138]
	* sysdeps/unix/sysv/linux/i386/chown.c: Remove file.
	* sysdeps/unix/sysv/linux/i386/fchown.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/fchown.c: Remove file.
	* sysdeps/unix/sysv/linux/s390/s390-32/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/fchown.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/fchown.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/Versions (GLIBC_2.1): Add
	__chown.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (chown): Add syscall.
	(lchown): Likewise.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list (chown):
	Likewise.
	(lchown): Likewise.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list (chown): Likewise.
	(lchown): Likewise.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list (chown):
	Likewise.
	(lchown): Likewise.
	(fchown): Likewise.

2014-10-23  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fclrexcpt.c (feclearexcept):
	Simplify logic.

2014-10-23  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fsetexcptflg.c (fsetexceptflag):
	Cleanup logic.

2014-10-23  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fsetexcptflg.c (fsetexceptflag):
	Remove unused include.

2014-10-23  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/feholdexcpt.c (feholdexcept): Remove spaces.
	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv): Remove spaces.
	* sysdeps/aarch64/fpu/fesetround.c (fesetround): Remove spaces.
	* sysdeps/aarch64/fpu/fraiseexcpt.c (feraiseexcept): Remove spaces.

2014-10-23  Carlos O'Donell  <carlos@systemhalted.org>
	    Helge Deller <deller@gmx.de>

	[BZ #17508]
	* sysdeps/unix/sysv/linux/hppa/bits/signum.h: Remove SIGEMT.
	Define SIGSTKFLT as 7. Define SIGSYS as 31. Define SIGXCPU as 12.
	Remove SIGLOST. Define SIGXFSZ as 30. Define __SIGRTMIN as 32.

2014-10-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* sysdeps/powerpc/powerpc32/libgcc-compat.S (__ashldi3_v_glibc20):
	Remove macro definition.
	(__ashrdi3_v_glibc20): Likewise.
	(__lshrdi3_v_glibc20): Likewise.
	(__cmpdi2_v_glibc20): Likewise.
	(__ucmpdi2_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__fixdfdi_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__fixsfdi_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__fixunsdfdi_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__fixunssfdi_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__floatdidf_v_glibc20): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__] (__floatdisf_v_glibc20): Likewise.

2014-10-22  Roland McGrath  <roland@hack.frob.com>

	* inet/netgroup.h (struct name_list): Use C99 [] syntax rather than
	old GNU extension [0] syntax.
	* nscd/nscd_helper.c (open_socket): Use a flexible array member and
	alloca rather than an array member with variable length.
	* nscd/netgroupcache.c (addgetnetgrentX): Likewise.
	* nscd/nscd.c (invalidate_db): New function, broken out of ...
	(parse_opt): ... here.  Likewise use alloca there.
	Validate the -i argument before checking for rootness.
	(send_shutdown): New function, broken out of ...
	(parse_opt): ... here.

2014-10-22  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/__longjmp.S [NEED_HWCAP] [IS_IN_rtld]: Use LDST_PCREL
	macro to get at the _rt_local_ro field.
	[NEED_HWCAP] [!IS_IN_rtld]: Use LDR_GLOBAL to get at _rtld_global_ro
	([PIC] case) or _dl_hwcap ([!PIC] case).
	* sysdeps/arm/setjmp.S: Likewise.

	* config.h.in (ARM_PCREL_MOVW_OK): New macro.
	* sysdeps/arm/configure.ac: New check to define it.
	* sysdeps/arm/configure: Regenerated.
	* sysdeps/arm/sysdep.h [__ASSEMBLER__]: Include <arm-features.h>.
	(LDST_INDEXED_NOINDEX, LDST_INDEXED_INDEX): New macros.
	(LDST_INDEXED, LDST_PC_INDEXED): New macros, differing definitions
	depending on [ARM_NO_INDEX_REGISTER] and [__thumb2__].
	(LDST_PCREL) [!__thumb2__ && ARCH_HAS_T2 && ARM_PCREL_MOVW_OK]:
	Use move/movt pair instead of a load.
	(LDST_GLOBAL): Macro removed.
	(LDR_GLOBAL): New macro replaces it.
	(LDR_HIDDEN): New macro.
	(PTR_MANGLE_LOAD): Use LDR_GLOBAL rather than LDST_GLOBAL.
	Use LDR_HIDDEN instead for __pointer_chk_guard_local.

	* setjmp/tst-setjmp-static.c: New file.
	* setjmp/Makefile (tests): Add it.
	(tests-static): New variable.

2014-10-22  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #17485]
	* sysdeps/unix/sysv/linux/mips/vfork.S (__libc_vfork): Define.

2014-10-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* math/s_ldexpf.c (__ldexpf): Do not use INTDEF.

2014-10-21  Roland McGrath  <roland@hack.frob.com>

	* nptl/version.c (__nptl_main): Call __libc_write, not __write.

2014-10-20  Roland McGrath  <roland@hack.frob.com>

	* io/fts.c (dirent_not_directory): New function.
	(fts_build): Call it.

2014-10-20  Roland McGrath  <roland@hack.frob.com>

	* nptl/version.c (__nptl_main): Use normal __write rather than
	INTERNAL_SYSCALL.
	(banner): Update copyright years.

	* nptl/pthread_rwlock_timedrdlock.c: #include <sys/time.h> before using
	gettimeofday.
	* nptl/pthread_rwlock_timedwrlock.c: Likewise.
	* nptl/pthread_cond_timedwait.c: Likewise.
	* nptl/pthread_mutex_timedlock.c: Likewise.
	* nptl/sem_timedwait.c: Likewise.

	* sysdeps/nptl/bits/libc-lock.h
	[_LIBC && (!NOT_IN_libc || IS_IN_libpthread)]
	(__libc_lock_init_recursive): Return void, not 0.
	* sysdeps/nptl/bits/libc-lockP.h (__libc_lock_init): Likewise.
	(__libc_rwlock_init): Likewise.
	* sysdeps/nptl/bits/stdio-lock.h (_IO_lock_init): Likewise.

2014-10-20  Torvald Riegel  <triegel@redhat.com>

	[BZ #15215]
	* nptl/pthread_once.c (__pthread_once): Split out fast path to ...
	(__pthread_once_slow): ... here.
	* sysdeps/unix/sysv/linux/i386/pthread_once.S: Remove file.
	* sysdeps/unix/sysv/linux/x86_64/pthread_once.S: Remove file.

2014-10-20  Torvald Riegel  <triegel@redhat.com>

	[BZ #15215]
	* nptl/pthreadP.h (__PTHREAD_ONCE_INPROGRESS, __PTHREAD_ONCE_DONE,
	__PTHREAD_ONCE_FORK_GEN_INCR): New.
	* sysdeps/nptl/fork.c (__libc_fork): Use them.
	* nptl/pthread_once.c (__pthread_once): Likewise.
	Update comments.

2014-10-20  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/syscalls.list (readv): Use __libc_readv as strong
	name.
	(writev): Use __libc_writev as strong name.
	* sysdeps/unix/sysv/linux/readv.c: Remove file.
	* sysdeps/unix/sysv/linux/writev.c: Likewise.

2014-10-17  Roland McGrath  <roland@hack.frob.com>

	* nptl/createthread.c (TLS_DEFINE_INIT_TP, TLS_VALUE): Macros removed.

	* sysdeps/i386/nptl/tls.h
	(THREAD_SELF_SYSINFO, THREAD_SYSINFO): Macros removed.
	[NEED_DL_SYSINFO] (SETUP_THREAD_SYSINFO, CHECK_THREAD_SYSINFO):
	New macros.
	* sysdeps/ia64/nptl/tls.h [NEED_DL_SYSINFO]
	(SETUP_THREAD_SYSINFO, CHECK_THREAD_SYSINFO): New macros.
	* nptl/allocatestack.c (allocate_stack) [NEED_DL_SYSINFO]:
	Call SETUP_THREAD_SYSINFO instead of doing an assignment.
	* nptl/createthread.c (create_thread) [NEED_DL_SYSINFO]:
	Call CHECK_THREAD_SYSINFO instead of doing an assert.

	* nptl/nptl-init.c (__pthread_initialize_minimal_internal):
	Conditionalize FUTEX_PRIVATE_FLAG and FUTEX_CLOCK_REALTIME probes
	on [__NR_futex].
	* nptl/pthread_mutex_init.c (prio_inherit_missing): New function,
	broken out of ...
	(__pthread_mutex_init): ... here.  Call it.
	* nptl/pthread_mutex_lock.c (__pthread_mutex_lock_full):
	Conditionalize PI cases on [__NR_futex].
	* nptl/pthread_mutex_timedlock.c (pthread_mutex_timedlock): Likewise.
	* nptl/pthread_mutex_trylock.c (__pthread_mutex_trylock): Likewise.
	* nptl/pthread_mutex_unlock.c (__pthread_mutex_unlock_full): Likewise.

	* nptl/nptl-init.c (sighandler_setxid, __xidcmd): Make definitions
	conditional on [SIGSETXID].
	(sigcancel_handler): Make definition conditional on [SIGCANCEL].
	(__pthread_initialize_minimal_internal): Set up SIGCANCEL only if it
	is defined.  Likewise for SIGSETXID.
	* nptl/allocatestack.c (setxid_mark_thread, setxid_unmark_thread):
	Conditionalize definitions on [SIGSETXID].
	(setxid_signal_thread, __nptl_setxid_error, __nptl_setxid): Likewise.
	* nptl/pthread_create.c (start_thread): Conditionalize SIGCANCEL
	unblocking on [SIGCANCEL].

	* nptl/nptl-init.c (__nptl_set_robust): Conditionalize body on
	[__NR_set_robust_list].

2014-10-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* string/strcoll_l.c (get_next_seq): Fix up formatting.
	(do_compare): Likewise.

2014-10-17  Leonhard Holz  <leonhard.holz@web.de>

	[BZ #15884]
	* string/strcoll_l.c: Don't include stdio.h.
	(coll_seq): Remove members idxarr and rulearr.
	(get_next_seq_cached): Remove function.
	(get_next_seq): Likewise.
	(get_next_seq_nocache): Rename to get_next_seq.
	(do_compare): Remove function.
	(do_compare_nocache): Rename to do_compare.
	(STRCOLL): Remove weight and rules cache.

2014-10-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/soft-fp/sfp-machine.h: Filed moved ...
	* sysdeps/arm/sfp-machine.h: ... to here.
	* sysdeps/arm/Implies: Remove arm/soft-fp.

2014-10-14  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/sys/utsname.h-data (*_t): Allow.
	* conform/data/sys/wait.h-data [POSIX] (uid_t): Do not define.
	[POSIX] (WEXITED): Do not expect constant.
	[POSIX] (WSTOPPED): Likewise.
	[POSIX] (WNOHANG): Likewise.
	[POSIX] (WNOWAIT): Likewise.
	[POSIX] (siginfo_t): Do not expect type or elements.
	[POSIX] (pid_t): Do not expect type.
	[POSIX] (signal.h): Do not allow header.
	[POSIX] (sys/resource.h): Likewise.
	[POSIX] (si_*): Do not allow pattern.
	[POSIX] (W*): Likewise.
	[POSIX] (P_*): Likewise.
	[POSIX] (BUS_*): Likewise.
	[POSIX] (CLD_*): Likewise.
	[POSIX] (FPE_*): Likewise.
	[POSIX] (ILL_*): Likewise.
	[POSIX] (POLL_*): Likewise.
	[POSIX] (SEGV_*): Likewise.
	[POSIX] (SI_*): Likewise.
	[POSIX] (TRAP_*): Likewise.
	* conform/Makefile (test-xfail-POSIX/sys/wait.h/conform): New
	variable.

2014-10-14  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #12926]
	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Avoid
	infinite loop when __recvmsg returns 0.

2014-10-10  Joseph Myers  <joseph@codesourcery.com>

	* CANCEL-FCT-WAIVE: Remove file.
	* CANCEL-FILE-WAIVE: Likewise.

	[BZ #14132]
	* elf/dl-sysdep.c (__libc_enable_secure): Use rtld_hidden_data_def
	instead of INTVARDEF.
	(_dl_sysdep_start): Do not use INTUSE with __libc_enable_secure.
	* sysdeps/mach/hurd/dl-sysdep.c (__libc_enable_secure): Use
	rtld_hidden_data_def instead of INTVARDEF.
	(_dl_sysdep_start): Do not use INTUSE with __libc_enable_secure.
	* elf/dl-deps.c (expand_dst): Likewise.
	* elf/dl-load.c (_dl_dst_count): Likewise.
	(_dl_dst_substitute): Likewise.
	(decompose_rpath): Likewise.
	(_dl_init_paths): Likewise.
	(open_path): Likewise.
	(_dl_map_object): Likewise.
	* elf/rtld.c (dl_main): Likewise.
	(process_dl_audit): Likewise.
	(process_envvars): Likewise.
	* include/unistd.h [IS_IN_rtld] (__libc_enable_secure_internal):
	Remove declaration.
	(__libc_enable_secure): Use rtld_hidden_proto.

2014-10-09  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* elf/dl-load.c
	(add_path): New function broken out of _dl_rtld_di_serinfo.
	(_dl_rtld_di_serinfo): Remove that nested function.  Update call sites.

2014-10-09  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/double.h [_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_D): Use
	parentheses around macro arguments.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_RAW_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_RAW_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_DP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (_FP_SQRT_MEAT_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_EQ_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_UNORD_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_TO_INT_D): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_FROM_INT_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_RAW_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_RAW_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_DP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (_FP_SQRT_MEAT_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_EQ_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_UNORD_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_D): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_FROM_INT_D): Likewise.
	* soft-fp/extended.h [_FP_W_TYPE_SIZE < 64] (FP_UNPACK_E):
	Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_EP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_EP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_EP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_EP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (_FP_SQRT_MEAT_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_EQ_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_UNORD_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_TO_INT_E): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_FROM_INT_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_EP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_EP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_EP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_EP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (_FP_SQRT_MEAT_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_EQ_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_UNORD_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_E): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_FROM_INT_E): Likewise.
	* soft-fp/op-1.h (_FP_FRAC_SRST_1): Likewise.
	(_FP_FRAC_SRS_1): Likewise.
	(_FP_FRAC_CLZ_1): Likewise.
	(_FP_MUL_MEAT_1_imm): Likewise.
	(_FP_MUL_MEAT_1_wide): Likewise.
	(_FP_MUL_MEAT_1_hard): Likewise.
	(_FP_SQRT_MEAT_1): Likewise.
	(_FP_FRAC_ASSEMBLE_1): Likewise.
	(_FP_FRAC_DISASSEMBLE_1): Likewise.
	* soft-fp/op-2.h (_FP_FRAC_CLZ_2): Likewise.
	(__FP_CLZ_2): Likewise.
	(_FP_MUL_MEAT_2_wide): Likewise.
	(_FP_MUL_MEAT_2_wide_3mul): Likewise.
	(_FP_MUL_MEAT_2_gmp): Likewise.
	(_FP_MUL_MEAT_2_120_240_double): Likewise.
	(_FP_SQRT_MEAT_2): Likewise.
	(_FP_FRAC_ASSEMBLE_2): Likewise.
	(_FP_FRAC_DISASSEMBLE_2): Likewise.
	* soft-fp/op-4.h (_FP_FRAC_SRS_4): Likewise.
	(_FP_FRAC_CLZ_4): Likewise.
	(_FP_MUL_MEAT_4_wide): Likewise.
	(_FP_MUL_MEAT_4_gmp): Likewise.
	(_FP_SQRT_MEAT_4): Likewise.
	(_FP_FRAC_ASSEMBLE_4): Likewise.
	(_FP_FRAC_DISASSEMBLE_4): Likewise.
	* soft-fp/op-common.h (_FP_CMP): Likewise.
	(_FP_CMP_EQ): Likewise.
	(_FP_CMP_UNORD): Likewise.
	(_FP_TO_INT): Likewise.
	(_FP_FROM_INT): Likewise.
	[!__FP_CLZ] (__FP_CLZ): Likewise.
	(_FP_DIV_HELP_imm): Likewise.
	* soft-fp/quad.h [_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_Q):
	Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_RAW_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_RAW_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_RAW_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_UNPACK_SEMIRAW_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_PACK_SEMIRAW_QP): Likewise.
	[_FP_W_TYPE_SIZE < 64] (_FP_SQRT_MEAT_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_EQ_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_CMP_UNORD_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_TO_INT_Q): Likewise.
	[_FP_W_TYPE_SIZE < 64] (FP_FROM_INT_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_RAW_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_RAW_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_RAW_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_UNPACK_SEMIRAW_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_PACK_SEMIRAW_QP): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (_FP_SQRT_MEAT_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_EQ_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_CMP_UNORD_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_TO_INT_Q): Likewise.
	[_FP_W_TYPE_SIZE >= 64] (FP_FROM_INT_Q): Likewise.
	* soft-fp/single.h (FP_UNPACK_RAW_S): Likewise.
	(FP_UNPACK_RAW_SP): Likewise.
	(FP_PACK_RAW_S): Likewise.
	(FP_PACK_RAW_SP): Likewise.
	(FP_UNPACK_S): Likewise.
	(FP_UNPACK_SP): Likewise.
	(FP_UNPACK_SEMIRAW_S): Likewise.
	(FP_UNPACK_SEMIRAW_SP): Likewise.
	(FP_PACK_S): Likewise.
	(FP_PACK_SP): Likewise.
	(FP_PACK_SEMIRAW_S): Likewise.
	(FP_PACK_SEMIRAW_SP): Likewise.
	(_FP_SQRT_MEAT_S): Likewise.
	(FP_CMP_S): Likewise.
	(FP_CMP_EQ_S): Likewise.
	(FP_CMP_UNORD_S): Likewise.
	(FP_TO_INT_S): Likewise.
	(FP_FROM_INT_S): Likewise.

	* soft-fp/op-common.h (_FP_TO_INT): Handle rsigned == 2.

	* soft-fp/soft-fp.h (FP_EX_INVALID_SNAN): New macro.
	(FP_EX_INVALID_IMZ): Likewise.
	(FP_EX_INVALID_IMZ_FMA): Likewise.
	(FP_EX_INVALID_ISI): Likewise.
	(FP_EX_INVALID_ZDZ): Likewise.
	(FP_EX_INVALID_IDI): Likewise.
	(FP_EX_INVALID_SQRT): Likewise.
	(FP_EX_INVALID_CVI): Likewise.
	(FP_EX_INVALID_VC): Likewise.
	* soft-fp/op-common.h (_FP_UNPACK_CANONICAL): Specify more precise
	"invalid" exceptions.
	(_FP_CHECK_SIGNAN_SEMIRAW): Likewise.
	(_FP_ADD_INTERNAL): Likewise.
	(_FP_MUL): Likewise.
	(_FP_FMA): Likewise.
	(_FP_DIV): Likewise.
	(_FP_CMP_CHECK_NAN): Likewise.
	(_FP_SQRT): Likewise.
	(_FP_TO_INT): Likewise.
	(FP_EXTEND): Likewise.

2014-10-09  Allan McRae  <allan@archlinux.org>

	* po/fr.po: Update French translation from translation project.

2014-10-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* stdlib/cxa_atexit.c (__cxa_atexit): Use libc_hidden_def instead
	of INTDEF.
	* include/stdlib.h (__cxa_atexit_internal): Remove declaration.
	(__cxa_atexit): Use libc_hidden_proto.
	[!NOT_IN_libc] (__cxa_atexit): Remove macro definition.

	[BZ #14132]
	* include/wctype.h [!_ISOMAC] (__iswalpha_l_internal): Remove
	declaration.
	[!_ISOMAC] (__iswdigit_l_internal): Likewise.
	[!_ISOMAC] (__iswspace_l_internal): Likewise.
	[!_ISOMAC] (__iswxdigit_l_internal): Likewise.
	[!_ISOMAC] (__iswctype_internal): Likewise.
	* stdio-common/siglist.c (_sys_siglist_internal): Remove alias.
	* sysdeps/unix/syscalls.list (chown): Remove __chown_internal
	alias.
	(fcntl): Remove __fcntl_internal alias.
	* sysdeps/unix/sysv/linux/hppa/syscalls.list (connect): Remove
	__connect_internal alias.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list (connect):
	Likewise.

	* soft-fp/soft-fp.h (FP_DENORM_ZERO): New macro.
	* soft-fp/op-common.h (_FP_UNPACK_CANONICAL): Check
	FP_DENORM_ZERO.
	(_FP_CHECK_FLUSH_ZERO): New macro.
	(_FP_ADD_INTERNAL): Call _FP_CHECK_FLUSH_ZERO.
	(_FP_CMP): Likewise.
	(_FP_CMP_EQ): Likewise.
	(_FP_TO_INT): Do not set inexact for subnormal arguments if
	FP_DENORM_ZERO.
	(FP_EXTEND): Call _FP_CHECK_FLUSH_ZERO.
	(FP_TRUNC): Likewise.

	* soft-fp/op-common.h (_FP_TO_INT): Ensure maximum exponent is
	treated as invalid conversion, not as normal exponent.

	* soft-fp/op-common.h (_FP_CMP_CHECK_NAN): New macro.
	(_FP_CMP): Add extra argument EX.  Call _FP_CMP_CHECK_NAN.
	(_FP_CMP_EQ): Likewise.
	(_FP_CMP_UNORD): Likewise.
	* soft-fp/double.h (FP_CMP_D): Add extra argument EX.
	(FP_CMP_EQ_D): Likewise.
	(FP_CMP_UNORD_D): Likewise.
	* soft-fp/extended.h (FP_CMP_E): Likewise.
	(FP_CMP_EQ_E): Likewise.
	(FP_CMP_UNORD_E): Likewise.
	* soft-fp/quad.h (FP_CMP_Q): Likewise.
	(FP_CMP_EQ_Q): Likewise.
	(FP_CMP_UNORD_Q): Likewise.
	* soft-fp/single.h (FP_CMP_S): Likewise.
	(FP_CMP_EQ_S): Likewise.
	(FP_CMP_UNORD_S): Likewise.
	* soft-fp/eqdf2.c (__eqdf2): Update call to FP_CMP_EQ_D.
	* soft-fp/eqsf2.c (__eqsf2): Update call to FP_CMP_EQ_S.
	* soft-fp/eqtf2.c (__eqtf2): Update call to FP_CMP_EQ_Q.
	* soft-fp/gedf2.c (__gedf2): Update call to FP_CMP_D.
	* soft-fp/gesf2.c (__gesf2): Update call to FP_CMP_S.
	* soft-fp/getf2.c (__getf2): Update call to FP_CMP_Q.
	* soft-fp/ledf2.c (__ledf2): Update call to FP_CMP_D.
	* soft-fp/lesf2.c (__lesf2): Update call to FP_CMP_S.
	* soft-fp/letf2.c (__letf2): Update call to FP_CMP_Q.
	* soft-fp/unorddf2.c (__unorddf2): Update call to FP_CMP_UNORD_D.
	* soft-fp/unordsf2.c (__unordsf2): Update call to FP_CMP_UNORD_S.
	* soft-fp/unordtf2.c (__unordtf2): Update call to FP_CMP_UNORD_Q.
	* sysdeps/alpha/soft-fp/ots_cmpe.c (internal_compare): Update call
	to FP_CMP_Q.
	* sysdeps/sparc/sparc32/soft-fp/q_cmp.c (_Q_cmp): Update call to
	FP_CMP_Q.
	* sysdeps/sparc/sparc32/soft-fp/q_cmpe.c (_Q_cmpe): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_feq.c (_Q_feq): Update call to
	FP_CMP_EQ_Q.
	* sysdeps/sparc/sparc32/soft-fp/q_fge.c (_Q_fge): Update call to
	FP_CMP_Q.
	* sysdeps/sparc/sparc32/soft-fp/q_fgt.c (_Q_fgt): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_fle.c (_Q_fle): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_flt.c (_Q_flt): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_fne.c (_Q_fne): Update call to
	FP_CMP_EQ_Q.
	* sysdeps/sparc/sparc64/soft-fp/qp_cmp.c (_Qp_cmp): Update call to
	FP_CMP_Q.
	* sysdeps/sparc/sparc64/soft-fp/qp_cmpe.c (_Qp_cmpe): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_feq.c (_Qp_feq): Update call to
	FP_CMP_EQ_Q.
	* sysdeps/sparc/sparc64/soft-fp/qp_fge.c (_Qp_fge): Update call to
	FP_CMP_Q.
	* sysdeps/sparc/sparc64/soft-fp/qp_fgt.c (_Qp_fgt): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fle.c (_Qp_fle): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_flt.c (_Qp_flt): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fne.c (_Qp_fne): Update call to
	FP_CMP_EQ_Q.

	* soft-fp/op-common.h (FP_EXTEND): When a subnormal input produces
	a subnormal result, set the underflow exception if trapping on
	underflow is enabled.
	* soft-fp/soft-fp.h (FP_INIT_TRAPPING_EXCEPTIONS): New macro.
	(FP_INIT_EXCEPTIONS): Default to FP_INIT_TRAPPING_EXCEPTIONS.
	[FP_NO_EXACT_UNDERFLOW] (FP_TRAPPING_EXCEPTIONS): Undefine and
	redefine to 0.
	* soft-fp/extenddftf2.c (FP_NO_EXACT_UNDERFLOW): Define.
	* soft-fp/extendsfdf2.c (FP_NO_EXACT_UNDERFLOW): Likewise.
	* soft-fp/extendsftf2.c (FP_NO_EXACT_UNDERFLOW): Likewise.
	* soft-fp/extendxftf2.c (__extendxftf2): Use
	FP_INIT_TRAPPING_EXCEPTIONS instead of FP_INIT_ROUNDMODE.

	* soft-fp/soft-fp.h (FP_CLEAR_EXCEPTIONS): Remove macro.
	* sysdeps/sparc/sparc32/soft-fp/q_itoq.c: Define FP_NO_EXCEPTIONS.
	(_Q_itoq): Do not use FP_DECL_EX, FP_CLEAR_EXCEPTIONS or
	FP_HANDLE_EXCEPTIONS.
	* sysdeps/sparc/sparc32/soft-fp/q_lltoq.c: Define FP_NO_EXCEPTIONS.
	(_Q_lltoq): Do not use FP_DECL_EX, FP_CLEAR_EXCEPTIONS or
	FP_HANDLE_EXCEPTIONS.
	* sysdeps/sparc/sparc32/soft-fp/q_ulltoq.c: Define FP_NO_EXCEPTIONS.
	(_Q_ulltoq): Do not use FP_DECL_EX, FP_CLEAR_EXCEPTIONS or
	FP_HANDLE_EXCEPTIONS.
	* sysdeps/sparc/sparc32/soft-fp/q_utoq.c: Define FP_NO_EXCEPTIONS.
	(_Q_utoq): Do not use FP_DECL_EX, FP_CLEAR_EXCEPTIONS or
	FP_HANDLE_EXCEPTIONS.

2014-10-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14132]
	* sysdeps/unix/sysv/linux/include/sys/timex.h: New file.
	* sysdeps/unix/sysv/linux/adjtime.c [!ADJTIMEX] (ADJTIMEX): Do not
	use INTUSE.
	[!ADJTIMEX] (INTUSE(__adjtimex)): Remove declaration.
	* sysdeps/unix/sysv/linux/alpha/adjtime.c (__adjtimex_internal):
	Remove alias.
	(__adjtimex): Define using libc_hidden_ver.
	* sysdeps/unix/sysv/linux/ntp_gettime.c (INTUSE(__adjtimex)):
	Remove declaration.
	(ntp_gettime): Call __adjtimex directly.
	* sysdeps/unix/sysv/linux/ntp_gettimex.c (INTUSE(__adjtimex)):
	Remove declaration.
	(ntp_gettimex): Call __adjtimex directly.
	* sysdeps/unix/sysv/linux/syscalls.list (adjtimex): Remove
	__adjtimex_internal alias.

2014-10-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #17460]
	* nscd/nscd.c (more_help): Rewrite list of tables collection
	using xstrdup and asprintf.

	* nscd/nscd_conf.c: Remove local xstrdup declaration.

2014-10-08  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>
	    Roland McGrath  <roland@hack.frob.com>

	* elf/dl-lookup.c (enter_unique_sym): New function, broken out of ...
	(do_lookup_unique): ... local function 'enter' here; update callers.

2014-10-06  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/make-syscalls.sh (emit_weak_aliases): Condition
	compat_symbol calls on [SHARED].
	* sysdeps/unix/sysv/linux/powerpc/lchown.S: Remove file.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (oldsetrlimit):
	Remove.
	(setrlimit): Add setrlimit@GLIBC_2.0 alias.
	* sysdeps/unix/sysv/linux/m68k/m680x0/syscalls.list
	(oldsetrlimit): Remove.
	(setrlimit): Add setrlimit@GLIBC_2.0 alias.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list
	(lchown): New syscall entry.
	(oldsetrlimit): Remove.
	(setrlimit): Add setrlimit@GLIBC_2.0 alias.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list
	(oldsetrlimit): Remove.
	(setrlimit): Add setrlimit@GLIBC_2.0 alias.

	[BZ #14138]
	* sysdeps/unix/sysv/linux/arm/fchown.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/fchown.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/lchown.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/syscalls.list (lchown): Add syscall.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/m68k/syscalls.list (lchown): Likewise.
	(fchown): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list (chown):
	Likewise.

2014-10-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Remove file.
	* sysdeps/unix/sysv/linux/powerpc/pthread_spin_unlock.c
	(pthread_spin_unlock): Use __ARCH_REL_INSTR instead of
	__lll_rel_instr and __ARCH_ACQ_INSTR instead of __lll_acq_instr.
	* sysdeps/unix/sysv/linux/powerpc/sem_post.c (__new_sem_post):
	Likewise.
	(__old_sem_post): Likewise.

2014-10-06  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/tile/sysdep.h (INLINE_VSYSCALL): Define
	INLINE_VSYSCALL, INTERNAL_VSYSCALL, and
	HAVE_CLOCK_GETTIME_VSYSCALL macros.
	* sysdeps/unix/sysv/linux/tile/gettimeofday.c (__gettimeofday):
	Use INLINE_VSYSCALL macro.
	* sysdeps/unix/sysv/linux/tile/bits/libc-vdso: Add declaration of
	__vdso_clock_gettime.
	* sysdeps/unix/sysv/linux/tile/init-first.c
	(_libc_vdso_platform_setup): Set new __vdso_clock_gettime global.
	* sysdeps/unix/sysv/linux/tile/Versions (GLIBC_PRIVATE): Add
	__vdso_clock_gettime.

	* sysdeps/unix/sysv/linux/tile/clone.S (__clone): Fix code
	to set up frame more cleanly.

	* sysdeps/tile/memcmp.c: New file.

	* sysdeps/unix/sysv/linux/tile/sysconf.c: New file.

	* sysdeps/tile/tilegx/string-endian.h (STRSHIFT): New macro.
	* sysdeps/tile/tilegx/strcasestr.c: New file.
	* sysdeps/tile/tilegx/strnlen.c: New file.
	* sysdeps/tile/tilegx/strstr.c: New file.

	* sysdeps/tile/tilegx/string-endian.h (copy_byte): Optimize.

2014-10-06  Arjun Shankar  <arjun.is@lostca.se>

	* nptl/tst-setuid3.c: Write errors to stdout.

2014-10-01  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* elf/dl-deps.c
	(preload): New functions broken out of _dl_map_object_deps.
	(_dl_map_object_deps):  Remove a nested function. Update call sites.

2014-10-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/execve.c: Remove file.
	* sysdeps/unix/sysv/linux/syscalls.list (execve): Add syscall.

2014-10-01  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/mips/strcmp.S: New.

2014-09-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/syscalls.list (fchownat): New syscall.
	(linkat): Likewise.
	(mkdirat): Likewise.
	(readlinkat): Likewise.
	(renameat): Likewise.
	(symlinkat): Likewise.
	(unlinkat): Likewise.
	* sysdeps/unix/sysv/linux/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/linkat.c: Likewise.
	* sysdeps/unix/sysv/linux/mkdirat.c: Likewise.
	* sysdeps/unix/sysv/linux/readlinkat.c: Likewise.
	* sysdeps/unix/sysv/linux/renameat.c: Likewise.
	* sysdeps/unix/sysv/linux/symlinkat.c: Likewise.
	* sysdeps/unix/sysv/linux/unlinkat.c: Likewise.

2014-09-30  Will Newton  <will.newton@linaro.org>

	* math/math.h: Define long double math functions if
	_LIBC_TEST is defined.
	* stdlib/tst-strtod-round.c: Define _LIBC_TEST.

	* localedata/Makefile: Move assignment to tests-special
	into an ifdef testing run-built-tests.
	* timezone/Makefile: Likewise.

2014-09-29  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86/Makefile ($(objpfx)tst-ld-sse-use.out): Run script
	with $(BASH) not $(SHELL).

2014-09-29  Carlos O'Donell  <carlos@redhat.com>
	    Matthew LeGendre  <legendre1@llnl.gov>

	[BZ #17411]
	* elf/dl-reloc.c (_dl_relocate_object): Allocate correct amount for
	l_reloc_result.

2014-09-29  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* stdio-common/printf_fp.c
	(hack_digit): New function, broken out of ...
	(__printf_fp): ... local function here.  Update call sites.
	hack_digit now takes an additional parameter that is a pointer
	to a struct of the referenced locals.  Those locals moved inside
	the struct and references updated.

2014-09-29  H.J. Lu  <hongjiu.lu@intel.com>

	* aclocal.m4: Require autoconf 2.69.
	* configure: Regenerated.
	* sysdeps/aarch64/configure: Likewise.
	* sysdeps/alpha/configure: Likewise.
	* sysdeps/arm/armv7/configure: Likewise.
	* sysdeps/arm/configure: Likewise.
	* sysdeps/ia64/configure: Likewise.
	* sysdeps/mach/configure: Likewise.
	* sysdeps/mips/configure: Likewise.
	* sysdeps/s390/configure: Likewise.
	* sysdeps/unix/sysv/linux/mips/configure: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure: Likewise.

	* sysdeps/alpha/configure.ac: Avoid empty lines at the end of
	file.
	* sysdeps/ia64/configure.ac: Likewise.

2014-09-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions: Do not
	specify symbol version for ld.so.  Do not include entry for
	libpthread.
	* sysdeps/unix/sysv/linux/s390/s390-64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: Likewise.

	[BZ #14171]
	* Makeconfig [$(build-shared) = yes]
	($(common-objpfx)soversions.mk): Don't handle SONAMEs specified in
	makefiles.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	($(common-objpfx)gnu/lib-names.h): Remove rule.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	($(common-objpfx)gnu/lib-names.stmp): Likewise.  Split and moved
	to Makerules.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	(before-compile): Don't append $(common-objpfx)gnu/lib-names.h
	here.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	(common-generated): Don't append gnu/lib-names.h and
	gnu/lib-names.stmp here.
	* Makerules [$(build-shared) = yes && $(soversions.mk-done) = t]
	(lib-names-h-abi): New variable.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	(lib-names-stmp-abi): Likewise.
	[$(build-shared) = yes && $(soversions.mk-done) = t &&
	abi-variants] (before-compile): Append
	$(common-objpfx)$(lib-names-h-abi).
	[$(build-shared) = yes && $(soversions.mk-done) = t &&
	abi-variants] (common-generated): Append gnu/lib-names.h.
	[$(build-shared) = yes && $(soversions.mk-done) = t &&
	abi-variants] (install-others-nosubdir): Depend on
	$(inst_includedir)/$(lib-names-h-abi).
	[$(build-shared) = yes && $(soversions.mk-done) = t &&
	abi-variants] ($(common-objpfx)gnu/lib-names.h): New rule.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	($(common-objpfx)$(lib-names-h-abi)): New rule.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	($(common-objpfx)$(lib-names-stmp-abi)): Likewise.
	[$(build-shared) = yes && $(soversions.mk-done) = t]
	(common-generated): Append $(lib-names-h-abi) and
	$(lib-names-stmp-abi).
	* scripts/lib-names.awk: Do not handle multi being set.
	* sysdeps/unix/sysv/linux/aarch64/Makefile (abi-lp64-ld-soname):
	Remove variable.
	(abi-lp64_be-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/arm/Makefile (abi-soft-ld-soname):
	Likewise.
	(abi-hard-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/i386/shlib-versions: New file.
	* sysdeps/unix/sysv/linux/mips/Makefile (abi-o32_soft-ld-soname):
	Remove variable.
	(abi-o32_hard-ld-soname): Likewise.
	(abi-o32_soft_2008-ld-soname): Likewise.
	(abi-o32_hard_2008-ld-soname): Likewise.
	(abi-n32_soft-ld-soname): Likewise.
	(abi-n32_hard-ld-soname): Likewise.
	(abi-n32_soft_2008-ld-soname): Likewise.
	(abi-n32_hard_2008-ld-soname): Likewise.
	(abi-n64_soft-ld-soname): Likewise.
	(abi-n64_hard-ld-soname): Likewise.
	(abi-n64_soft_2008-ld-soname): Likewise.
	(abi-n64_hard_2008-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (abi-64-v1-ld-soname):
	Likewise.
	(abi-64-v2-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions: Add
	ld.so entries.
	* sysdeps/unix/sysv/linux/s390/Makefile (abi-64-ld-soname): Remove
	variable.
	* sysdeps/unix/sysv/linux/s390/s390-64/shlib-versions: Add ld.so
	entry.
	* sysdeps/unix/sysv/linux/x86/Makefile (abi-32-ld-soname): Remove
	variable.
	(abi-64-ld-soname): Likewise.
	(abi-x32-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: Add ld.so
	entry.
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: Likewise.

2014-09-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14138]
	* sysdeps/unix/sysv/linux/arm/setrlimit.c: Remove file.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/syscalls.list (setrlimit): Add
	syscall entry for GLIBC_2.2 symbol version.
	* sysdeps/unix/sysv/linux/m68k/m680x0/syscalls.list (setrlimit):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list
	(setrlimit): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list (setrlimit):
	Likewise.

2014-09-23  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/arm/bits/hwcap.h: Check for
	_LINUX_ARM_SYSDEP_H include guard too.
	* sysdeps/unix/sysv/linux/arm/sysdep.h (_SYS_AUXV_H): Remove
	define.

2014-09-20  Rasmus Villemoes  <rv@rasmusvillemoes.dk>

	* sysdeps/unix/sysv/linux/eventfd.c:
	Make first argument unsigned.
	* sysdeps/unix/sysv/linux/hppa/sys/eventfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/eventfd.h: Likewise.

2014-09-20  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #16852]
	* socket/recvmmsg.c (recvmmsg): Drop const argument.
	* socket/sys/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c: Likewise.

2014-09-19  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* stdlib/longlong.h: Add __udiv_w_sdiv prototype.

2014-09-17  Arjun Shankar  <arjun.is@lostca.se>

	* time/tst-ftime.c: New test.
	* time/Makefile (tests): Add tst-ftime.

2014-09-17  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/extended.h: Fix comment formatting.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-8.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* soft-fp/soft-fp.h: Likewise.

	* soft-fp/op-common.h (_FP_TO_INT): Correct formatting.

2014-09-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6652]
	* Makeconfig (soversions-default-setname): Remove variable.
	($(common-objpfx)soversions.i): Don't pass default_setname to
	soversions.awk.
	* Makerules ($(common-objpfx)abi-versions.h): Don't pass
	oldest_abi to abi-versions.awk.
	* config.h.in (GLIBC_OLDEST_ABI): Remove macro undefine.
	* config.make.in (oldest-abi): Remove variable.
	* configure.ac (--enable-oldest-abi): Remove configure option.
	* configure: Regenerated.
	* csu/version.c (banner) [GLIBC_OLDEST_ABI]: Remove conditional
	text.
	* scripts/abi-versions.awk: Do not handle oldest_abi variable.
	* scripts/soversions.awk: Do not handle default_setname variable.
	* sysdeps/mach/hurd/configure.ac: Do not handle oldest_abi
	variable.
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure.ac: Do not handle oldest_abi
	variable.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2014-09-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* elf/Makefile (CFLAGS-interp.c): Remove.
	($(elf-objpfx)runtime-linker.h): Generate header with linker
	path string.
	* elf/interp.c: Include generated runtime-linker.h

	* Makerules (lib%.so): Don't include $(+interp) in
	prerequisites.
	* elf/Makefile (CFLAGS-interp.c): Don't define NOT_IN_libc.
	* dlfcn/eval.c: Remove file.

	* posix/getconf.c (vars): Don't check for _[SP]C_* and _CS
	macros.

	[BZ #17266]
	* misc/sys/cdefs.h: Define __extern_always_inline for clang
	4.2 and newer.

	[BZ #17370]
	* libio/wfileops.c (do_ftell_wide): Free OUT on error path.

2014-09-16  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Jakub Jelinek  <jakub@redhat.com>

	[BZ #17266]
	* libio/stdio.h: Check definition of __fortify_function
	instead of __extern_always_inline to include bits/stdio2.h.
	* math/bits/math-finite.h [__USE_XOPEN || __USE_ISOC99]: Also
	check if __extern_always_inline is defined.
	[__USE_MISC || __USE_XOPEN]: Likewise.
	[__USE_ISOC99] Likewise.
	* misc/sys/cdefs.h (__fortify_function): Define only if
	__extern_always_inline is defined.
	[!__cplusplus || __GNUC_PREREQ (4,3)]: Revert to defining
	__extern_always_inline and __extern_inline only for g++-4.3
	and newer or a compatible gcc.

2014-09-15  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #17371]
	* sysdeps/unix/sysv/linux/ifaddrs.c (getifaddrs_internal): Fix
	last change to handle zero prefix length.

2014-09-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/posix/sysconf.c (__sysconf): Return -1 for
	_SC_REGEX_VERSION.

	* posix/getconf.c (vars): Add _POSIX_IPV6 and
	_POSIX_RAW_SOCKETS.

2014-09-13  Allan McRae  <allan@archlinux.org>

	* po/ru.po: Update Russian translation from translation project.

2014-09-12  Roland McGrath  <roland@hack.frob.com>

	* locale/programs/locale.c (show_locale_vars): Inline local function
	into its sole call site.  Clean up some style nits.
	(print_item): New function, broken out of ...
	(show_info): ... local function here.  Clean up style nits.

	* locale/programs/ld-ctype.c (set_one_default): New function, broken
	out of ...
	(set_class_defaults): ... local function set_default here.
	Define set_default as a macro locally to pass constant parameters.
	(allocate_arrays, set_class_defaults): Use C99 for scope for each CNT,
	rather than a shared local.

	* stdlib/rpmatch.c (try): New function, broken out of ...
	(rpmatch): ... local function here.  Also, prototypify definition.

2014-09-12  Joseph Myers  <joseph@codesourcery.com>

	* scripts/soversions.awk: Do not handle configuration names.
	* Makeconfig ($(common-objpfx)soversions.i): Do not pass cpu,
	vendor and os variables to soversions.awk.
	* configure.ac: Do not modify gnu-* host_os.
	* configure: Regenerated
	* shlib-versions: Remove first column with configuration names.
	* nptl/shlib-versions: Likewise.
	* nptl_db/shlib-versions: Likewise.
	* sysdeps/hppa/shlib-versions: Likewise.
	* sysdeps/m68k/shlib-versions: Likewise.
	* sysdeps/mach/hurd/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/alpha/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/arm/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/hppa/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/ia64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/m68k/coldfire/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/mips/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sh/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/tile/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure.ac
	(HAVE_ELFV2_ABI): AC_DEFINE in ELFv2 case.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure:
	Regenerated.
	* config.h.in (HAVE_ELFV2_ABI): New macro undefine.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions:
	Condition symbol version definitions on [HAVE_ELFV2_ABI].

	* shlib-versions: Remove OS-specific entries.  Moved to files in
	sysdeps.
	* sysdeps/mach/hurd/shlib-versions: New file.
	* sysdeps/unix/sysv/linux/shlib-versions: Likewise.

	* nptl/shlib-versions: Remove architecture-specific entries.
	Moved to files in sysdeps.
	* shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/shlib-versions: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sh/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/shlib-versions: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/shlib-versions: Likewise.

	* sysdeps/gnu/netinet/udp.h (UDP_NO_CHECK6_TX): New macro.
	(UDP_NO_CHECK6_RX): Likewise.

2014-09-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/posix/sysconf.c (__sysconf): Spell
	_POSIX_DEVICE_SPECIFIC and _POSIX_DEVICE_SPECIFIC_R correctly.

2014-08-12  Florian Weimer  <fweimer@redhat.com>

	* iconv/gconv_open.c (__gconv_open): Remove transliteration module
	loading.
	* iconv/Versions (__gconv_transliterate): Export for use from
	gconv modules.
	* iconv/gconv.h (__GCONV_TRANSLIT): New flag.
	(struct __gconv_trans_data, __gconv_trans_fct,
	__gconv_trans_context_fct, __gconv_trans_query_fct,
	__gconv_trans_init_fct, __gconv_trans_end_fct): Remove type
	definitions.
	(struct __gconv_step_data): Remove __trans member.
	(__gconv_transliterate): Declaration moved from gconv_int.h.  No
	longer hidden.  Remove unused trans_data argument.
	* iconv/gconv_int.h (struct trans_struct): Remove definition.
	(__gconv_translit_find): Remove declaration.
	(__gconv_transliterate): Declaration moved to gconv.h.  Add hidden
	prototype.
	* iconv/gconv_close.c (__gconv_close): Remove __trans cleanup.
	* iconv/gconv_trans.c (__gconv_transliterate): Remove unused
	trans_data argument.  Add hidden definition.
	(__gconv_translit_find): Remove.
	* iconv/loop.c (STANDARD_TO_LOOP_ERR_HANDLER): Call
	__gconv_transliterate directly if __GCONV_TRANSLIT is set.
	* iconv/skeleton.c: Remove transliteration initialization.
	* libio/fileops.c (_IO_new_file_fopen): Adjust struct
	__gconv_step_data initialization.
	* libio/iofwide.c (__libio_translit_): Remove.
	(_IO_fwide): Adjust struct __gconv_step_data initialization.
	* wcsmbs/btowc.c (__btowc): Likewise.
	* wcsmbs/mbrtoc16.c (mbrtoc16): Likewise.
	* wcsmbs/mbrtowc.c (__mbrtowc): Likewise.
	* wcsmbs/mbsnrtowcs.c (__mbsnrtowcs): Likewise.
	* wcsmbs/mbsrtowcs_l.c (__mbsrtowcs_l): Likewise.
	* wcsmbs/wcrtomb.c (__wcrtomb): Likewise.
	* wcsmbs/wcsnrtombs.c (__wcsnrtombs): Likewise.
	* wcsmbs/wcsrtombs.c (__wcsrtombs): Likewise.
	* wcsmbs/wctob.c (wctob): Likewise.

2014-09-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16194]
	* sysdeps/x86/tst-xmmymm.sh: Rename file to...
	* sysdeps/x86/tst-ld-sse-use.sh: ... this.  Check for zmm
	register usage.
	* sysdeps/x86/Makefile: Adjust.

2014-09-11  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>
	    Roland McGrath  <roland@hack.frob.com>

	* locale/weight.h: Add include guard.
	(findidx): Make static rather than auto; take new parameters
	TABLE, INDIRECT, and EXTRA instead of getting them as outer locals.
	* locale/weightwc.h: Likewise.
	* posix/fnmatch_loop.c
	(FCT): Change type of EXTRA from int32_t to wint_t.
	Don't include either header inside the function.
	Call FINDIDX rather than findidx, and pass new arguments.
	#undef FINDIDX at the end of the file.
	* posix/fnmatch.c [_LIBC]: #include <locale/weight.h> and define
	FINDIDX before including fnmatch_loop.c for the non-wide version.
	[_LIBC] [HANDLE_MULTIBYTE]: #define findidx to findidxwc around
	#include <locale/weightwc.h>, and define FINDIDX to findidxwc
	for the wide version.
	* posix/regcomp.c [_LIBC]: #include <locale/weight.h>.
	(build_equiv_class) [_LIBC]: Don't #include it inside the function.
	Pass new arguments to findidx.
	* posix/regexec.c [RE_ENABLE_I18N] [_LIBC]: #include <locale/weight.h>.
	[RE_ENABLE_I18N] (check_node_accept_bytes) [_LIBC]:
	Don't #include it inside the function.  Pass new arguments to findidx.
	* posix/regex_internal.h
	[!NOT_IN_libc] [_LIBC]: #include <locale/weight.h>.
	(re_string_elem_size_at): Don't #include it inside the function.
	Pass new arguments to findidx.
	* string/strcoll_l.c: #include WEIGHT_H at top level.
	(get_next_seq): Don't #include it inside the function.
	Pass new arguments to findidx.
	(get_next_seq_nocache): Likewise.
	* string/strxfrm_l.c: #include WEIGHT_H at top level.
	(STRXFRM): Don't #include it inside the function.
	Pass new arguments to findidx.

2014-09-11  Florian Weimer  <fweimer@redhat.com>

	[BZ #17344]
	* malloc/malloc.c (unlink): Turn asserts into a call to
	malloc_printerr.

2014-09-11  Tim Lammens  <tim.lammens@gmail.com>

	[BZ #17370]
	* libio/wfileops (do_ftell_wide): Free OUT.

2014-09-10  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Remove file.

2014-09-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #17363]
	* inet/getnetgrent_r.c (__internal_getnetgrent_r): Try next
	group if the current group is empty.

2014-09-10  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* benchtests/bench-memset.c (test_main): Add more test from size
	from 32 to 512 bytes.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Add POWER8 memset object.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add POWER8 memset and bzero implementations.
	* sysdeps/powerpc/powerpc64/multiarch/bzero.c (__bzero): Add POWER8
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/memset.c (__libc_memset):
	Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power8.S: New file:
	multiarch POWER8 memset optimization.
	* sysdeps/powerpc/powerpc64/power8/memset.S: New file: optimized
	POWER8 memset optimization.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile [sysdep_routines]:
	Remove bzero multiarch objects.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power4.S: Remove file.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power6.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power4.S [NO_BZERO_IMPL]:
	Remove define.
	[__bzero]: Redefine to specific name.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power6.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memset.S [NO_BZERO_IMPL]: Remove
	define.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memset.S: Likewise.

2014-09-10  Florian Weimer  <fweimer@redhat.com>

	* Makeconfig (gccwarn-c): Turn implicit-function-declaration
	warnings into errors.

	* stdlib/tst-tls-atexit-lib.c: Include <stdlib.h>, for the
	__cxa_thread_atexit_impl prototype.

2014-09-09  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/mips/preconfigure: Put code inside mips* case statement.
	Fix capitalization of error message.

2014-09-09  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/mips/preconfigure: Modify ABI tests.

2014-09-07  Carlos O'Donell  <carlos@systemhalted.org>

	* sysdeps/unix/sysv/linux/hppa/c++-types.data: New file.

2014-09-07  Roland McGrath  <roland@hack.frob.com>
	    Carlos O'Donell  <carlos@systemhalted.org>

	* sysdeps/unix/sysv/linux/hppa/nptl/libc-lowlevellock.c: File removed.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/hppa/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pt-vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pt-vfork.S: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread.h: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthreadP.h: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthreadP.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_broadcast.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_broadcast.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_destroy.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_destroy.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_init.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_init.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_signal.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_signal.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_timedwait.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_timedwait.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/pthread_cond_wait.c: Moved ...
	* sysdeps/unix/sysv/linux/hppa/pthread_cond_wait.c: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/hppa/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/hppa/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/nptl/bits/semaphore.h: Moved ...
	* sysdeps/hppa/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/hppa/clone.S: Include <tcb-offsets.h>.
	Deconditionalize the code that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/hppa/nptl/clone.S: File removed.
	* sysdeps/unix/sysv/linux/hppa/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/hppa/nptl/fork.c: File removed.
	* sysdeps/hppa/nptl/tcb-offsets.sym: Include pthread.h and don't
	include sysdep.h.

2014-09-08  Allan McRae  <allan@archlinux.org>

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.20.90"

2014-09-07  Allan McRae  <allan@archlinux.org>

	* version.h (RELEASE): Set to "stable".
	(VERSION): Set to "2.20"
	* include/features.h (__GLIBC_MINOR__): Set to 20.

	* manual/contrib.texi: Add entries for Wilco Dijkstra and Stefan
	Liebler.

	* po/ko.po: Update Korean translation from translation project.

2014-09-06  Chris Metcalf  <cmetcalf@tilera.com>

	[BZ #17354]
	* sysdeps/tile/dl-machine.h (elf_machine_rela): Add a MUNGE_SIGNED
	macro for handling signed relocations.

2014-09-03  Florian Weimer  <fweimer@redhat.com>

	[BZ #17325]
	* iconvdata/ibm1364.c (BODY): Fix check for sentinel.
	* iconvdata/ibm932.c (BODY): Replace invalid sentinel check with
	assert.
	* iconvdata/ibm933.c (BODY): Fix check for sentinel.
	* iconvdata/ibm935.c (BODY): Likewise.
	* iconvdata/ibm937.c (BODY): Likewise.
	* iconvdata/ibm939.c (BODY): Likewise.
	* iconvdata/ibm943.c (BODY): Replace invalid sentinel check with
	assert.
	* iconvdata/Makefile (iconv-test.out): Pass module list to test
	script.
	* iconvdata/run-iconv-test.sh: New test loop for checking for
	decoder crashers.

2014-09-02  Khem Raj  <raj.khem@gmail.com>

	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetenv.c (fegetenv): Add
	libm_hidden_ver.

2014-09-01  Allan McRae  <allan@archlinux.org>

	* po/eo.po: Update Esperanto translation from translation project.

	* po/ca.po: Update Catalan translation from translation project.

2014-08-28  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/fork.c (__fork): Lock SS->lock around
	__proc_dostop call.

2014-08-27  Mark Wielaard  <mjw@redhat.com>

	[BZ #17319]
	* sysdeps/i386/nptl/tls.h (TLS_INIT_TP): Use INTERNAL_SYSCALL
	to call set_thread_area instead of hand written asm.
	(__NR_set_thread_area): Removed define.
	(TLS_FLAG_WRITABLE): Likewise.
	(__ASSUME_SET_THREAD_AREA): Remove check.
	(TLS_EBX_ARG): Remove define.
	(TLS_LOAD_EBX): Likewise.

2014-08-27  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Simplify atomicity of socket creation in bind.

	* sysdeps/mach/hurd/bind.c (__bind): Use dir_lookup(node, "") instead of
	looking up the name after linking the file.

2014-08-27  Allan McRae  <allan@archlinux.org>

	* sysdeps/i386/fpu/libm-test-ulps: Update ULPs.

2014-08-26  Florian Weimer  <fweimer@redhat.com>

	[BZ #17187]
	* iconv/gconv_trans.c (struct known_trans, search_tree, lock,
	trans_compare, open_translit, __gconv_translit_find):
	Remove module loading code.

2014-08-26  Allan McRae  <allan@archlinux.org>

	* po/vi.po: Update Vietnamese translation from translation project.

	* po/uk.po: Update Ukrainian translation from translation project.

	* po/fr.po: Update French translation from translation project.

	* po/ru.po: Update Russian translation from translation project.

	* po/pl.po: Update Polish translation from translation project.

	* po/cs.po: Update Czech translation from translation project.

	* po/de.po: Update German translation from translation project.

	* po/bg.po: Update Bulgarian translation from translation project.

	* po/sv.po: Update Sweedish translation from translation project.

	* po/nl.po: Update Dutch translation from translation project.

	* po/es.po: Update Spanish translation from translation project.

2014-08-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nptl/Makefile (CFLAGS-pthread_atfork.c): Remove.

	* catgets/Makefile (CPPFLAGS-gencat): Remove.
	* iconv/Makefile (CPPFLAGS-iconv_prog): Likewise.
	(CPPFLAGS-iconvconfig): Likewise.
	* timezone/Makefile (CPPFLAGS-zic): Likewise.

	* include/libc-symbols.h: Remove unnecessary check for
	NOT_IN_libc.
	* nptl/pthreadP.h: Likewise.
	* sysdeps/aarch64/setjmp.S: Likewise.
	* sysdeps/alpha/setjmp.S: Likewise.
	* sysdeps/arm/sysdep.h: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/m68k/setjmp.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Likewise.
	* sysdeps/s390/s390-32/setjmp.S: Likewise.
	* sysdeps/s390/s390-64/setjmp.S: Likewise.
	* sysdeps/sh/sh3/setjmp.S: Likewise.
	* sysdeps/sh/sh4/setjmp.S: Likewise.
	* sysdeps/unix/alpha/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/x86_64/setjmp.S: Likewise.

2014-08-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17263]
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c: Include
	<stdint.h>.
	(__get_clockfreq): Use uint64_t instead of hp_timing_t in
	INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK call.

2014-08-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/x86/fpu/bits/mathinline.h: Fix typo in comment.

	[BZ #17262]
	* sysdeps/x86/fpu/bits/mathinline.h: Check both __SSE2_MATH__
	and __x86_64__ when disabling x87 inline functions.

2014-08-12  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #17259]
	* sysdeps/x86_64/cacheinfo.c (intel_check_word): Replace cpuid
	asm statement with __cpuid_count.

2014-08-12  Mike Frysinger  <vapier@gentoo.org>

	* configure.ac: Change __ehdr_start code to dereference the struct.
	Run readelf on the output to look for relocations.
	* configure: Regenerated.

2014-08-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17261]
	* sysdeps/powerpc/nofpu/fenv_const.c (__fe_enabled_env): Change
	value to 0.
	(__fe_nonieee_env): Define as an alias for __fe_dfl_env.

2014-08-12  Roland McGrath  <roland@hack.frob.com>

	* NEWS: Mention x86-64 ld.so use of Intel MPX instructions.

2014-08-12  Bernard Ogden  <bernie.ogden@linaro.org>

	[BZ #16892]
	* sysdeps/nptl/lowlevellock.h (__lll_timedlock): Use
	atomic_compare_and_exchange_bool_acq rather than atomic_exchange_acq.

2014-08-12  Sean Anderson  <seanga2@gmail.com>

	* malloc/malloc.c: Fix typo in comment.

2014-08-09  Allan McRae  <allan@archlinux.org>

	* Regenerate libc.po.

2014-08-08  Mike Frysinger  <vapier@gentoo.org>

	* intl/tst-gettext2.sh: Check every lang file for creation.

2014-08-07  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/math_private.h
	(libc_feholdsetround_noex_aarch64_ctx): New function.

2014-08-07  Wilco Dijkstra  <wdijkstr@arm.com>

	* sysdeps/arm/armv6/strcpy.S (strcpy):
	Fix performance issue in misaligned cases.

2014-08-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/ioctl-types.h (struct winsize):
	Move definition from termios.h.
	(struct termio): Likewise.
	(NCC, TIOCM_LE, TIOCM_DTR, TIOCM_RTS, TIOCM_ST, TIOCM_SR, TIOCM_CTS,
	TIOCM_CAR, TIOCM_RNG, TIOCM_DSR, TIOCM_CD, TIOCM_RI, N_TTY, N_SLIP,
	N_MOUSE, N_PPP, N_STRIP, N_AX25, N_X25, N_6PACK, N_MASC, N_R3964,
	N_PROFIBUS_FDL, N_IRDA, N_SMSBLOCK, N_HDLC, N_SYNC_PPP, N_HCI):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h (struct winsize):
	Move definition to ioctl-types.h
	(struct termio): Likewise.
	(NCC, TIOCM_LE, TIOCM_DTR, TIOCM_RTS, TIOCM_ST, TIOCM_SR, TIOCM_CTS,
	TIOCM_CAR, TIOCM_RNG, TIOCM_DSR, TIOCM_CD, TIOCM_RI, N_TTY, N_SLIP,
	N_MOUSE, N_PPP, N_STRIP, N_AX25, N_X25, N_6PACK, N_MASC, N_R3964,
	N_PROFIBUS_FDL, N_IRDA, N_SMSBLOCK, N_HDLC, N_SYNC_PPP, N_HCI):
	Likewise.

2014-08-05  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha/soft-fp/ots_cvtxq.c (_OtsCvtXQ): Always raise
	exceptions.
	* sysdeps/alpha/soft-fp/Makefile [soft-fp] (sysdep_routines):
	Add fraiseexcpt.
	* sysdeps/alpha/soft-fp/sfp-machine.h (FP_HANDLE_EXCEPTIONS):
	Use __feraiseexcept.
	* sysdeps/unix/sysv/linux/alpha/fraiseexcpt.S (feraiseexcept):
	Protect libm symbols with IS_IN_libm.

	* sysdeps/unix/sysv/linux/alpha/lowlevellock.h: Remove file.

2014-08-04  Bernard Ogden  <bernie.ogden@linaro.org>

	* sysdeps/unix/sysv/linux/mips/lowlevellock.h: Remove file.

2014-08-04  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h: Remove
	file.

2014-08-04  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h (PSEUDO): Add nocancel
	variants for each function.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/nptl/Makefile: File removed, contents
	appended ...
	* sysdeps/unix/sysv/linux/ia64/Makefile: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/Versions: File removed, contents
	appended ...
	* sysdeps/unix/sysv/linux/ia64/Versions: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/__ia64_longjmp.S: Moved ...
	* sysdeps/unix/sysv/linux/ia64/__ia64_longjmp.S: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/__sigstack_longjmp.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/__sigstack_longjmp.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/ia64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/dl-sysdep.h: Moved ...
	* sysdeps/unix/sysv/linux/ia64/dl-sysdep.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/ia64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/ia64/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/ia64/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_create.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_delete.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_getoverr.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_gettime.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/timer_settime.c: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/unwind-forcedunwind.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/unwind-forcedunwind.c: ... here.
	Update #include.
	* sysdeps/unix/sysv/linux/ia64/nptl/unwind_longjmp.c: Moved ...
	* sysdeps/unix/sysv/linux/ia64/unwind_longjmp.c: ... here.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/ia64/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/bits/semaphore.h: Moved ...
	* sysdeps/ia64/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/ia64/nptl/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/ia64/bits/local_lim.h: ... here.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/pthread/createthread.c: Include <arch-fork.h>.
	* sysdeps/unix/sysv/linux/ia64/arch-fork.h (ARCH_CLONE): New macro.
	* sysdeps/ia64/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/ia64/nptl/createthread.c: File removed.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/nptl/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/ia64/vfork.S: ... here.
	(__libc_vfork): Define function under this name.
	(__vfork): Define as an alias.
	* sysdeps/unix/sysv/linux/ia64/pt-vfork.S: New file.
	* sysdeps/unix/sysv/linux/ia64/nptl/pt-vfork.S: File removed.

2014-08-04  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/clone2.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/ia64/nptl/clone2.S: File removed.

2014-08-04  Andreas Schwab  <schwab@suse.de>

	* sysdeps/ieee754/ldbl-96/s_fma.c: Include <math_private.h>.

2014-08-03  Mike Frysinger  <vapier@gentoo.org>

	* stdlib/tst-setcontext.c (test_stack): Fix coding style.
	(main): Likewise.

2014-08-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/lowlevellock.h: File removed.

2014-08-01  Richard Henderon  <rth@redhat.com>

	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Use math_force_eval before
	feclearexcept; use math_opt_barrier instead of open-coded asm; fix
	typo in exact zero test.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.

2014-08-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/sysdep.h (PTR_MANGLE_LOAD, PTR_MANGLE)
	(PTR_MANGLE2, PTR_DEMANGLE, PTR_DEMANGLE2): Move these macros...
	* sysdeps/arm/sysdep.h: ... here.
	[!__ASSEMBLER__]: Include <stdint.h>.

2014-08-01  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/libc-symbols.h (HAVE_LIBINTL_H): Define macro.
	(HAVE_WCTYPE_H): Likewise.
	(HAVE_ISWCTYPE): Likewise.
	(ENABLE_NLS): Likewise.
	* posix/regex_internal.h [(defined MB_CUR_MAX && HAVE_WCTYPE_H
	&& HAVE_ISWCTYPE) || _LIBC]: Sync up with gnulib.

	* posix/regex_internal.c: Check if DEBUG is defined and is
	set.

	* include/libc-symbols.h (HAVE_MBSTATE_T): Define macro.
	(HAVE_MBSRTOWCS): Likewise.
	* posix/fnmatch.c: Include string.h unconditionally.

2014-08-01  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* NEWS: Explain the s390 jmp_buf / ucontext_t ABI change
	reversal.

2014-07-31  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/safe-fatal.h: New file.
	* sysdeps/unix/sysv/linux/safe-fatal.h: New file.
	* nptl/forward.c: Include it.
	(__pthread_unwind): Use __safe_fatal as default action, rather
	than a bogus use of INTERNAL_SYSCALL that could never work.

	* config.h.in (HAVE_BUILTIN_TRAP): New #define to 0.
	* configure.ac (libc_cv_builtin_trap): New test.
	* configure: Regenerated.
	* sysdeps/generic/abort-instr.h [HAVE_BUILTIN_TRAP]
	(ABORT_INSTRUCTION): Define using __builtin_trap.

	* nptl/pthreadP.h (SIGCANCEL, SIGTIMER, SIGSETXID, __xidcmd): Moved ...
	* sysdeps/unix/sysv/linux/nptl-signals.h: ... to this new file.
	* sysdeps/nptl/nptl-signals.h: New file.
	* nptl/pthreadP.h: Include <nptl-signals.h>.

2014-07-31  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-64/utf16-utf32-z9.c
	(ONE_DIRECTION): Define.
	* sysdeps/s390/s390-64/utf8-utf16-z9.c
	(ONE_DIRECTION): Define.
	* sysdeps/s390/s390-64/utf8-utf32-z9.c
	(ONE_DIRECTION): Define.

2014-07-31  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/Makefile: Delete file.
	* sysdeps/s390/Versions (GLIBC_2.19): Remove __setjmp.
	* sysdeps/s390/__longjmp.c: Delete file.
	* sysdeps/s390/bits/setjmp.h (__s390_jmp_buf):
	Remove fields __flags and __reserved.
	* sysdeps/s390/longjmp.c: Include setjmp/longjmp.c
	and add versioning.
	* sysdeps/s390/rtld-__longjmp.c: Delete file.
	* sysdeps/s390/rtld-global-offsets.sym: Likewise.
	* sysdeps/s390/rtld-setjmp.S: Likewise.
	* sysdeps/s390/s390-32/__longjmp-common.c: Move to ...
	* sysdeps/s390/s390-32/__longjmp.c: ... here.
	* sysdeps/s390/s390-32/setjmp-common.S: Move to ...
	* sysdeps/s390/s390-32/setjmp.S: ... here.
	Add versioning.
	(__sigsetjmp): Remove setting __flags field.
	* sysdeps/s390/s390-64/__longjmp-common.c:Move to ...
	* sysdeps/s390/s390-64/__longjmp.c: ... here.
	* sysdeps/s390/s390-64/setjmp-common.S: Move to ...
	* sysdeps/s390/s390-64/setjmp.S: ... here.
	Add versioning.
	(__sigsetjmp): Remove setting __flags field.
	* sysdeps/s390/setjmp.S: Delete file.
	* sysdeps/s390/sigjmp.c: Likewise.
	* sysdeps/s390/v1-longjmp.c: Likewise.
	* sysdeps/s390/v1-setjmp.h: Likewise.
	* sysdeps/s390/v1-sigjmp.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/Makefile (sysdep_routines):
	Remove v1-longjmp_chk.
	* sysdeps/unix/sysv/linux/s390/getcontext.S: Delete file.
	* sysdeps/unix/sysv/linux/s390/longjmp_chk.c:
	Include debug/longjmp_chk.c and add versioning.
	* sysdeps/unix/sysv/linux/s390/pt-longjmp.c:
	Include nptl/pt-longjmp.c and add versioning.
	* sysdeps/unix/sysv/linux/s390/rtld-getcontext.S: Delete file.
	* sysdeps/unix/sysv/linux/s390/s390-32/____longjmp_chk.c:
	Include __longjmp.c.
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext-common.S:
	Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext.S: ... here.
	(__getcontext): Remove setting __flags field.
	Add versioning.
	* sysdeps/unix/sysv/linux/s390/s390-32/setcontext.S:
	Don't restore upper high grps.
	* sysdeps/unix/sysv/linux/s390/s390-32/swapcontext.S:
	Likewise.
	(__swapcontext): Remove setting uc_flags field.
	* sysdeps/unix/sysv/linux/s390/s390-32/ucontext_i.sym:
	Delete file.
	* sysdeps/unix/sysv/linux/s390/s390-64/____longjmp_chk.c:
	Include __longjmp.c.
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext-common.S:
	Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext.S: ... here.
	(__getcontext): Remove setting __flags field.
	Add versioning.
	* sysdeps/unix/sysv/linux/s390/s390-64/swapcontext.S:
	(__swapcontext): Remove setting uc_flags field.
	* unix/sysv/linux/s390/s390-64/ucontext_i.sym: Delete file.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h (ucontext):
	Remove fields uc_high_gprs and __reserved.
	* sysdeps/unix/sysv/linux/s390/ucontext_i.sym:
	New file with reverted content.
	* sysdeps/unix/sysv/linux/s390/v1-longjmp_chk.c: Delete file.
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist:
	Regenerated.
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist:
	Regenerated.

2014-07-31  Andreas Schwab  <schwab@suse.de>

	* config.h.in (HAVE_IFUNC): Define to 0.
	* rt/clock-compat.c [HAVE_IFUNC]: Check for value, not
	definedness.

2014-07-30  Ling Ma  <ling.ml@alibaba-inc.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memmove-avx-unaligned, memcpy-avx-unaligned and
	mempcpy-avx-unaligned.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Add tests for AVX memcpy functions.
	* sysdeps/x86_64/multiarch/memcpy.S: Add support for AVX memcpy.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Add support for AVX
	memcpy_chk.
	* sysdeps/x86_64/multiarch/memmove.c: Add support for AVX memmove.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Add support for AVX
	memmove_chk.
	* sysdeps/x86_64/multiarch/mempcpy.S: Add support for AVX mempcpy.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Add support for AVX
	mempcpy_chk.
	* sysdeps/x86_64/multiarch/memcpy-avx-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy-avx-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/memmove-avx-unaligned.S: New file.

2013-07-29  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #17213]
	* sysdeps/powerpc/powerpc64/entry.h: Fix TEXT_START definition for
	powerpc64le.

2014-07-29  Jeff Layton  <jlayton@poochiereds.net>

	[BZ #16839]
	* manual/llio.texi: Add section about open file description locks.
	* manual/examples/ofdlocks.c: Example of open file description
	lock usage.
	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h: Define F_OFD_GETLK,
	F_OFD_SETLK, and F_OFD_SETLKW.

2014-07-23  Allan McRae  <allan@archlinux.org>

	* po/es.po: Update Spanish translation from translation project.

2014-07-18  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/m68k/lowlevellock.h: Removed.

2014-07-17  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #17078]
	* sysdeps/arm/dl-machine.h (elf_machine_rela)
	[RESOLVE_CONFLICT_FIND_MAP]: Handle R_ARM_TLS_DESC relocation.
	(elf_machine_lazy_rel): Handle prelinked R_ARM_TLS_DESC entries.

2014-07-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17088]
	* math/fesetenv.c (__fesetenv)
	[FE_NOMASK_ENV && FE_ALL_EXCEPT != 0]: Return 1 for FE_NOMASK_ENV.
	* math/feupdateenv.c (__feupdateenv)
	[FE_NOMASK_ENV && FE_ALL_EXCEPT != 0]: Likewise.

	* sysdeps/unix/sysv/linux/s390/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__s390__]
	(__ASSUME_SOCKETCALL): Do not define.

	* sysdeps/unix/sysv/linux/sh/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__sh__]
	(__ASSUME_SOCKETCALL): Do not define.
	(__ASSUME_ST_INO_64_BIT): Define unconditionally.
	[__LINUX_KERNEL_VERSION >= 0x020625 && __sh__]
	(__ASSUME_ACCEPT4_SYSCALL): Do not define.
	[__LINUX_KERNEL_VERSION >= 0x020625 && __sh__]
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __sh__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__sh__] (__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.

	* sysdeps/unix/sysv/linux/powerpc/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__powerpc__]
	(__ASSUME_SOCKETCALL): Do not define.
	(__ASSUME_IPC64): Define unconditionally.
	[__LINUX_KERNEL_VERSION >= 0x020625 && __powerpc__]
	(__ASSUME_ACCEPT4_SYSCALL): Do not define.
	[__LINUX_KERNEL_VERSION >= 0x020625 && __powerpc__]
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __powerpc__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__powerpc__] (__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL):
	Likewise.

	* sysdeps/unix/sysv/linux/sparc/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__sparc__]
	(__ASSUME_SOCKETCALL): Do not define.
	(__ASSUME_SET_ROBUST_LIST): Define unconditionally.
	(__ASSUME_FUTEX_LOCK_PI): Likewise.
	[__sparc__] (__ASSUME_ACCEPT4_SYSCALL): Do not define.
	[__sparc__] (__ASSUME_ACCEPT4_SYSCALL_WITH_SOCKETCALL): Likewise.
	(__ASSUME_REQUEUE_PI): Define unconditionally.
	[__LINUX_KERNEL_VERSION >= 0x020621 && __sparc__]
	(__ASSUME_RECVMMSG_SYSCALL): Do not define.
	[__sparc__] (__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __sparc__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__sparc__] (__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.

	* sysdeps/unix/sysv/linux/i386/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__i386__]
	(__ASSUME_SOCKETCALL): Do not define.
	[__LINUX_KERNEL_VERSION >= 0x020621 && __i386__]
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__i386__] (__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __i386__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__i386__] (__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/kernel-features.h [__x86_64__]
	(__ASSUME_ACCEPT4_SYSCALL): Do not define.
	[__LINUX_KERNEL_VERSION >= 0x020621 && __x86_64__]
	(__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030000 && __x86_64__]
	(__ASSUME_SENDMMSG_SYSCALL): Likewise.
	[__x86_64__ && __LINUX_KERNEL_VERSION >= 0x030100]
	(__ASSUME_GETCPU_SYSCALL): Likewise.

	* aclocal.m4 (LIBC_SLIBDIR_RTLDDIR): New macro.
	* sysdeps/gnu/configure.ac: Use LIBC_SLIBDIR_RTLDDIR.  Remove
	cases for individual architectures.
	* sysdeps/gnu/configure: Regenerated.
	* sysdeps/unix/sysv/linux/aarch64/configure.ac: Use
	LIBC_SLIBDIR_RTLDDIR.
	* sysdeps/unix/sysv/linux/aarch64/configure: Regenerated.
	* sysdeps/unix/sysv/linux/mips/configure.ac: Use
	LIBC_SLIBDIR_RTLDDIR.
	* sysdeps/unix/sysv/linux/mips/configure: Regenerated.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure.ac: Use
	LIBC_SLIBDIR_RTLDDIR.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure:
	Regenerated.
	* sysdeps/unix/sysv/linux/s390/s390-64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/configure: New generated
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/configure: New generated
	file.
	* sysdeps/unix/sysv/linux/x86_64/64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/x86_64/64/configure: New generated file.
	* sysdeps/unix/sysv/linux/x86_64/x32/configure.ac: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/configure: Generate.

	* sysdeps/aarch64/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/aarch64/shlib-versions: ... here.
	* sysdeps/alpha/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/alpha/shlib-versions: ... here.
	* sysdeps/arm/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/arm/shlib-versions: ... here.
	* sysdeps/hppa/shlib-versions: Move all contents except for
	libgcc_s entry to ...
	* sysdeps/unix/sysv/linux/hppa/shlib-versions: ... here.  Merge in
	entry from ...
	* sysdeps/hppa/nptl/shlib-versions: ... here.  Remove file.
	* sysdeps/ia64/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/ia64/shlib-versions: ... here.  Merge in
	entry from ...
	* sysdeps/ia64/nptl/shlib-versions: ... here.  Remove file.
	* sysdeps/m68k/coldfire/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/shlib-versions: ... here.
	* sysdeps/microblaze/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/microblaze/shlib-versions: ... here.
	* sysdeps/mips/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/mips/shlib-versions: ... here.  Merge in
	entry from ...
	* sysdeps/mips/nptl/shlib-versions: ... here.  Remove file.
	* sysdeps/tile/shlib-versions: Move to ...
	* sysdeps/unix/sysv/linux/tile/shlib-versions: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: Merge in entry
	from ...
	* sysdeps/x86_64/64/shlib-versions: ... here.  Remove file.
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: Merge in
	entry from ...
	* sysdeps/x86_64/x32/shlib-versions: ... here.  Remove file.

2014-07-17  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/bits/atomic.h
	(__arch_compare_and_exchange_bool_8_int): Evaluate to zero.
	(__arch_compare_and_exchange_bool_16_int): Likewise.
	(__arch_compare_and_exchange_bool_64_int): Likewise.

	* iconv/loop.c: Move definition of LOOPFCT and gconv_btowc
	into an #else block.

2014-07-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/preconfigure.ac: Apply EABI sanity check to arm*, not
	just Linux configurations.  Test empirically that the compiler sets
	__ARM_EABI__, rather than using the tuple to decide.
	* sysdeps/arm/preconfigure: Regenerated.
	* sysdeps/unix/sysv/linux/arm/configure: File removed.
	* sysdeps/unix/sysv/linux/arm/configure.ac: File removed,
	contents appended ...
	* sysdeps/arm/configure.ac: ... here.
	* sysdeps/arm/configure: Regenerated.

2014-07-15  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_kill.c: New file.
	* nptl/pthread_sigmask.c: New file.
	* nptl/pthread_sigqueue.c: New file.

	* sysdeps/nptl/lowlevellock.h: New file.
	* sysdeps/unix/sysv/linux/lowlevellock-futex.h: New file.
	* sysdeps/nptl/lowlevellock-futex.h: New file.

	* nptl/pthreadP.h (__current_sigrtmin, __current_sigrtmax):
	Remove dead declarations.

2014-07-14  H.J. Lu  <hongjiu.lu@intel.com>

	* config.h.in (HAVE_AVX2_SUPPORT): New #undef.
	* sysdeps/i386/configure.ac: Set HAVE_AVX2_SUPPORT and
	config-cflags-avx2.
	* sysdeps/x86_64/configure.ac: Likewise.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure: Likewise.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memset-avx2 only if config-cflags-avx2 is yes.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Tests for memset_chk and memset only if HAVE_AVX2_SUPPORT is
	defined.
	* sysdeps/x86_64/multiarch/memset.S: Define multiple versions
	only if HAVE_AVX2_SUPPORT is defined.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.

2014-07-14  Alan Modra  <amodra@gmail.com>

	[BZ #17153]
	* elf/elf.h (DT_PPC64_NUM): Correct value.
	* NEWS: Add to fixed bug list.

2014-07-13  Jim Meyering  <meyering@fb.com>

	[BZ 17150]
	regex: don't deref NULL upon heap allocation failure
	* posix/regcomp.c: (parse_dup_op): Handle duplicate_tree
	failure in one more place.
	To trigger the segfault, configure grep -with-included-regex,
	build it, and run these commands:
	( ulimit -v 300000; echo a|src/grep -E a+++++++++++++++++++++ )

2014-07-13  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/m680x0/fpu/libm-test-ulps: Update.

2014-07-11  Richard Henderson  <rth@redhat.com>

	* sysdeps/aarch64/libm-test-ulps: Update.

2014-07-10  Florian Weimer  <fweimer@redhat.com>

	[BZ #17135]
	* nptl/pthreadP.h (__nptl_setxid_error): Declare function.
	* nptl/allocatestack.c (__nptl_setxid_error): New function.
	(__nptl_setxid): Initialize error member.  Call
	__nptl_setxid_error.
	* nptl/nptl-init.c (sighandler_setxid): Call __nptl_setxid_error.
	* nptl/descr.h (struct xid_command): Add error member.
	* nptl/tst-setuid3.c: New file.
	* nptl/Makefile (tests): Add it.

2014-07-10  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h (__lll_base_trylock):
	New define.
	(__lll_trylock): Use __lll_base_trylock.
	(__lll_cond_trylock): Likewise.

2014-07-10  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_create.c (start_thread): Use atomic_or and
	lll_futex_wake directly rather than lll_robust_dead.
	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h
	(lll_robust_dead): Macro removed.
	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Likewise.

	* nptl/pthread_mutex_trylock.c (__pthread_mutex_trylock):
	Use atomic_compare_and_exchange_val_acq directly rather than
	lll_robust_trylock.
	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h
	(__lll_robust_trylock, lll_robust_trylock): Removed.
	* sysdeps/unix/sysv/linux/alpha/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/m68k/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Likewise.

2014-07-02  Florian Weimer  <fweimer@redhat.com>

	* manual/locale.texi (Locale Names): New section documenting
	locale name syntax.  Adjust menu and node chaining accordingly.
	(Choosing Locale): Reference Locale Names, Locale Categories.
	Mention setting LC_ALL=C.  Reflect that name syntax is now
	documented.
	(Locale Categories): New section title.  Reference Locale Names.
	LC_ALL is an environment variable, but not a category.
	(Setting the Locale): Remove "locale -a" invocation and LOCPATH
	description, now in Locale Name.  Reference that section.  Locale
	name syntax is now documented.

2014-07-02  Florian Weimer  <fweimer@redhat.com>

	[BZ #17137]
	* locale/findlocale.c (name_present, valid_locale_name): New
	functions.
	(_nl_find_locale): Use the loc_name variable to store name
	candidates.  Call name_present and valid_locale_name to check and
	validate locale names.  Return an error if the locale is invalid.

2014-07-02  Florian Weimer  <fweimer@redhat.com>

	* locale/setlocale.c (setlocale): Use strdup for allocating
	composite name copy.

2014-07-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	Sync up with gnulib.
	* misc/error.c: Use !_LIBC instead of HAVE_CONFIG_H.
	[!_LIBC && ENABLE_NLS]: Include gettext.h.
	[_LIBC]: Define USE_UNLOCKED_IO, _GL_ATTRIBUTE_FORMAT_PRINTF
	and _GL_ARG_NONNULL.
	[USE_UNLOCKED_IO]: Include unlocked-io.h.
	[!_LIBC]: Include code for Windows and Cygwin.
	[!_LIBC && !HAVE_DECL_STRERROR_R && !STRERROR_R_CHAR_P]:
	Include prototype for int strerror_r.
	[!_LIBC] (is_open): New function.
	(flush_stdout): New function.
	(print_errno_message): Use it.
	(error): Likewise.
	(error_at_line): Likewise.
	(error_tail) Add function attribute macros.  Use
	__builtin_expect.

	* time/strptime_l.c [_LIBC]: Define HAVE_LOCALTIME_R.

	* time/strftime_l.c [_LIBC]: Define HAVE_STRFTIME.

	* io/ftw.c: Include sys/param.h unconditionally.

	* locale/programs/simple-hash.c [!HAVE_OBSTACK]: Remove code.

	[BZ #17125]
	* sysdeps/unix/sysv/linux/check_pf.c (cache): Don't use
	libc_freeres_ptr.
	(freecache): New function to free CACHE on exit.

	* sunrpc/xdr.c (xdr_string): Add comment about SIZE
	initialization.

2014-07-09  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/nptl/internaltypes.h: Delete.
	* sysdeps/sparc/nptl/sparc-nptl.h: New file.
	* sysdeps/sparc/nptl/pthread_barrier_destroy.c: Include it.
	* sysdeps/sparc/nptl/pthread_barrier_init.c: Likewise.
	* sysdeps/sparc/nptl/pthread_barrier_wait.c: Likewise.
	* sysdeps/sparc/nptl/sem_init.c: Likewise.
	* sysdeps/sparc/nptl/sem_post.c: Likewise.
	* sysdeps/sparc/nptl/sem_timedwait.c: Likewise.
	* sysdeps/sparc/nptl/sem_wait.c: Likewise.
	* sysdeps/sparc/sparc32/nptl/pthread_barrier_wait.c: Likewise.
	* sysdeps/sparc/sparc32/nptl/sem_post.c: Likewise.
	* sysdeps/sparc/sparc32/nptl/sem_timedwait.c: Likewise.
	* sysdeps/sparc/sparc32/nptl/sem_wait.c: Likewise.

2014-07-09  Andreas Schwab  <schwab@suse.de>

	* sysdeps/powerpc/test-gettimebase.c (do_test): Add newline to
	output.
	* sysdeps/unix/sysv/linux/powerpc/test-gettimebasefreq.c
	(do_test): Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Update ULPs.

2014-07-09  Will Newton  <will.newton@linaro.org>

	* sysdeps/aarch64/tlsdesc.c (_dl_unmap): Test SHARED with #ifdef.
	* sysdeps/arm/tlsdesc.c (_dl_unmap): Likewise.
	* sysdeps/i386/tlsdesc.c (_dl_unmap): Likewise.
	* sysdeps/x86_64/tlsdesc.c (_dl_unmap): Likewise.
	* sysdeps/hppa/start.S (_start): Likewise.

2014-07-09  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sunrpc/xdr.c (xdr_string): Initialize SIZE to 0.

	* sysdeps/generic/unwind-pe.h: Only check if __cplusplus is
	defined.

2014-07-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/res_query.c (__libc_res_nsearch): Dereference resplen2
	after checking that it is non-NULL.

	* sysdeps/i386/dl-machine.h: Define ELF_MACHINE_NO_REL.

2014-07-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/memmove.c: Remove file.
	* sysdeps/powerpc/powerpc32/power4/memcopy.h
	[MEMCPY_OK_FOR_FWD_MEMMOVE]: Define it to 1.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove-power7.c
	[MEMCPY_OK_FOR_FWD_MEMMOVE]: Remove define.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove-ppc.c:
	[MEMCPY_OK_FOR_FWD_MEMMOVE]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-ppc64.c: Include default
	string memmove instead of removed powerpc one.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp_l-power7.S:
	[weak_alias]: Fix compiler warning due trailing data.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp-power7.S:
	[weak_alias]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-power7.c: Fix compile
	warnigs due missing definition of __strcpy_power7 and __strlen_power7.

	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add memmove functions.

2014-07-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* localedata/tests-mbwc/dat_iswalnum.c [SHOJI_IS_RIGHT]:
	Remove code.
	* localedata/tests-mbwc/dat_iswalpha.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_iswctype.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_iswgraph.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_iswprint.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_iswpunct.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_mbrlen.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_mbstowcs.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_mbtowc.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_strcoll.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_swscanf.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_towctrans.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_wcscoll.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_wcswidth.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_wctob.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/dat_wcwidth.c [SHOJI_IS_RIGHT]:
	Likewise.
	* localedata/tests-mbwc/tst_towctrans.c [SHOJI_IS_RIGHT]:
	Likewise.

2014-07-07  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Align VSX copies to 16B
	to avoid alignment traps in non-cacheable memory.
	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add memmove
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove-power7.c: New
	file: multiarch power7 memmove.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove-ppc.c: New file:
	multiarch default memmove.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memmove.c: New file:
	multiarch memove for powerpc32/power4.

	* string/bcopy.c: Use full path to include memmove.c.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memmove and bcopy
	multiarch objects.
	* sysdeps/powerpc/powerpc64/multiarch/bcopy-ppc64.c: New file: default
	bcopy for powerpc64.
	* sysdeps/powerpc/powerpc64/multiarch/bcopy.c: New file: multiarch
	bcopy for powerpc64.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c: Add bcopy
	and memmove implementations.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-power7.S: New file:
	optimized multiarch memmove for POWER7/powerpc64.
	* sysdeps/powerpc/powerpc64/multiarch/memmove-ppc64.c: New file:
	default multiarch memmove for powerpc64.
	* sysdeps/powerpc/powerpc64/multiarch/memmove.c: New file: memmove
	multiarch for powerpc64.
	* sysdeps/powerpc/powerpc64/power7/bcopy.c: New file: optimized bcopy
	for POWER7/powerpc64.
	* sysdeps/powerpc/powerpc64/power7/memmove.S: New file: optimized
	memmove for POWER7/powerpc64.

	* sysdeps/powerpc/memmove.c (memmove): Cleanup impplementation to use
	glibc default one.

	* sysdeps/powerpc/bits/link.h [_CALL_ELF]: Guard check for
	__ELF_NATIVE_CLASS equal to 64.

2014-07-07  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/nptl/lowlevellock.h: File removed.

	* NEWS: NPTL is no longer an add-on!
	* nptl/internaltypes.h: Moved ...
	* sysdeps/nptl/internaltypes.h: ... here.
	* sysdeps/nptl/aio_misc.h: Use <nptl/pthreadP.h> in #include.
	* sysdeps/nptl/fork.c: Likewise.
	* sysdeps/nptl/gai_misc.h: Likewise.
	* sysdeps/nptl/librt-cancellation.c: Likewise.
	* sysdeps/nptl/jmp-unwind.c: Likewise.
	* sysdeps/nptl/setxid.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/Implies: New file.
	* sysdeps/unix/sysv/linux/alpha/Implies: Add alpha/nptl.
	* sysdeps/unix/sysv/linux/arm/Implies: New file.
	* sysdeps/unix/sysv/linux/hppa/Implies: New file.
	* sysdeps/unix/sysv/linux/i386/Implies: Add i386/nptl.
	* sysdeps/unix/sysv/linux/i386/i686/Implies: New file.
	* sysdeps/unix/sysv/linux/ia64/Implies: Add ia64/nptl.
	* sysdeps/unix/sysv/linux/m68k/Implies: New file.
	* sysdeps/unix/sysv/linux/microblaze/Implies: New file.
	* sysdeps/unix/sysv/linux/mips/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/Implies: New file.
	* sysdeps/unix/sysv/linux/s390/Implies: Add s390/nptl.
	* sysdeps/unix/sysv/linux/sh/Implies: New file.
	* sysdeps/unix/sysv/linux/sparc/Implies: New file.
	* sysdeps/unix/sysv/linux/tile/Implies: New file.
	* sysdeps/unix/sysv/linux/x86_64/Implies: Add x86_64/nptl.
	* sysdeps/unix/sysv/linux/x86_64/x32/Implies: New file.
	* nptl/Makeconfig: Moved ...
	* sysdeps/nptl/Makeconfig: ... here.
	* nptl/configure: File removed.
	* nptl/ANNOUNCE: File removed.
	* sysdeps/unix/sysv/linux/configure.ac: Remove nptl sanity check.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* nptl/Makefile (routines): Add libc_pthread_init,
	libc_multiple_threads, register-atfork and unregister-atfork.
	(libpthread-routines): Add pthread_mutex_cond_lock and pt-fork here.
	(gen-as-const-headers): Add lowlevelcond.sym, lowlevelrwlock.sym,
	lowlevelbarrier.sym, unwindbuf.sym, lowlevelrobustlock.sym,
	pthread-pi-defines.sym, structsem.sym.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir) = posix]
	(CFLAGS-fork.c, CFLAGS-getpid.o, CFLAGS-getpid.os): New variables.
	[$(subdir) = nptl] (tests): Add tst-setgetname.
	* nptl/sysdeps/unix/sysv/linux/Makefile: File removed.
	* sysdeps/unix/sysv/linux/sigaction.c: Just include
	<nptl/sigaction.c> directly here, instead of WRAPPER_INCLUDE.
	[!LIBC_SIGACTION]: Remove aliases.
	* sysdeps/unix/sysv/linux/aarch64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sigaction.c: Likewise.
	* nptl/Versions (libc: GLIBC_2.3.2): Add __register_atfork.
	(libc: GLIBC_PRIVATE): Add __libc_pthread_init,
	__libc_current_sigrtmin_private, __libc_current_sigrtmax_private,
	__libc_allocate_rtsig_private.
	* nptl/sysdeps/unix/sysv/linux/Versions: File removed.
	* sysdeps/unix/sysv/linux/sigtimedwait.c: Include <nptl/pthreadP.h>.
	* sysdeps/unix/sysv/linux/sigwait.c: Likewise.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c: Likewise.
	* sysdeps/unix/sysv/linux/sleep.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/sigwait.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/sigtimedwait.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/sigwaitinfo.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/sleep.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/createthread.c: File removed.
	* sysdeps/unix/sysv/linux/ia64/fork.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/internaltypes.h: Moved ...
	* nptl/internaltypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/jmp-unwind.c: Moved ...
	* sysdeps/nptl/jmp-unwind.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/libc-lowlevellock.c: Moved ...
	* nptl/libc-lowlevellock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/libc_multiple_threads.c: Moved ...
	* nptl/libc_multiple_threads.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/libc_pthread_init.c: Moved ...
	* nptl/libc_pthread_init.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelbarrier.sym: Moved ...
	* nptl/lowlevelbarrier.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelcond.sym: Moved ...
	* nptl/lowlevelcond.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevellock.c: Moved ...
	* nptl/lowlevellock.c: ... here.
	* nptl/lowlevellock.h: Moved ...
	* sysdeps/nptl/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelrobustlock.c: Moved ...
	* nptl/lowlevelrobustlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelrobustlock.sym: Moved ...
	* nptl/lowlevelrobustlock.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/lowlevelrwlock.sym: Moved ...
	* nptl/lowlevelrwlock.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/pt-fork.c: Moved ...
	* nptl/pt-fork.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread-pi-defines.sym: Moved ...
	* nptl/pthread-pi-defines.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_attr_getaffinity.c: Moved ...
	* nptl/pthread_attr_getaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_attr_setaffinity.c: Moved ...
	* nptl/pthread_attr_setaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_mutex_cond_lock.c: Moved ...
	* nptl/pthread_mutex_cond_lock.c: ... here.
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_cond_lock.c:
	Update #include.
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_cond_lock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_once.c: Moved ...
	* nptl/pthread_once.c: ... here, replacing old file.
	* nptl/sysdeps/unix/sysv/linux/pthread_yield.c: Moved ...
	* nptl/pthread_yield.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/register-atfork.c: Moved ...
	* nptl/register-atfork.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sem_post.c: Moved ...
	* nptl/sem_post.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/sem_post.c: Update #include.
	* nptl/sysdeps/unix/sysv/linux/sem_timedwait.c: Moved ...
	* nptl/sem_timedwait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sem_trywait.c: Moved ...
	* nptl/sem_trywait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/sem_trywait.c: Update #include.
	* nptl/sysdeps/unix/sysv/linux/sem_wait.c: Moved ...
	* nptl/sem_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/structsem.sym: Moved ...
	* nptl/structsem.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/mq_notify.c: Moved ...
	* sysdeps/unix/sysv/linux/mq_notify.c: ... here, replacing old file.
	* nptl/sysdeps/unix/sysv/linux/unregister-atfork.c: Moved ...
	* nptl/unregister-atfork.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/unwindbuf.sym: Moved ...
	* nptl/unwindbuf.sym: ... here.
	* nptl/sysdeps/unix/sysv/linux/fork.c: Moved ...
	* sysdeps/nptl/fork.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/fork.h: Moved ...
	* sysdeps/nptl/fork.h: ... here.
	* sysdeps/unix/sysv/linux/syscalls.list: Remove fork.
	* nptl/sysdeps/unix/sysv/linux/aio_misc.h: Moved ...
	* sysdeps/unix/sysv/linux/aio_misc.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/allocrtsig.c: Moved ...
	* sysdeps/unix/sysv/linux/allocrtsig.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/getpid.c: Moved ...
	* sysdeps/unix/sysv/linux/getpid.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/kernel-posix-timers.h: Moved ...
	* sysdeps/unix/sysv/linux/kernel-posix-timers.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/pt-raise.c: Moved ...
	* sysdeps/unix/sysv/linux/pt-raise.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_getaffinity.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_getaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_getcpuclockid.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_getcpuclockid.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_getname.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_getname.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_kill.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_kill.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_setaffinity.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_setaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_setname.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_setname.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/pthread_sigqueue.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_sigqueue.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/raise.c: Moved ...
	* sysdeps/unix/sysv/linux/raise.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_create.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_delete.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_getoverr.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_gettime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_routines.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_routines.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/timer_settime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/tst-setgetname.c: Moved ...
	* sysdeps/unix/sysv/linux/tst-setgetname.c: ... here.
	* sysdeps/unix/sysv/linux/s390/jmp-unwind.c: Update #include.

2014-07-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/generic/memcopy.h: Add comment for
	MEMCPY_OK_FOR_FWD_MEMMOVE.

2014-07-04  Will Newton  <will.newton@linaro.org>

	* string/memchr.c: Merge from gnulib.
	[_LIBC]: Remove conditionals.
	(__ptr_t): Remove define.
	(LONG_MAX_32_BITS): Likewise.
	(LONG_MAX): Likewise.
	(MEMCHR): Use ANSI prototype and optimize algorithm.

	* sysdeps/arm/dl-machine.h (ELF_MACHINE_NO_REL): Define.

2014-07-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/lowlevellock.h
	(lll_futex_timed_wait_bitset): Fix syscall argument count.

	* sysdeps/nptl/configure.ac (libc_cv_forced_unwind):
	Use -Dinhibit_libc=1 for unwind.h check to prevent false failure
	in a bare environment with no <stdlib.h> installed.
	* sysdeps/nptl/configure: Regenerated.

	* sysdeps/alpha/fpu/s_nearbyint.c: Include <math_ldbl_opt.h>.

	* sysdeps/unix/sysv/linux/configure.ac: Use AC_TRY_COMPILE rather than
	AC_EGREP_CPP for kernel header checks, so they only succeed if
	including <linux/version.h> actually works right.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* sysdeps/s390/nptl/tls.h (THREAD_SET_POINTER_GUARD): Refer to the
	value so it's not diagnosed as unused.

	* sysdeps/pthread/Makefile: Conditionalize tst-timer bits (the only
	thing) with "ifeq ($(subdir),rt)".

2014-07-03  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha/fpu/s_nearbyintf.c: Remove file.
	* sysdeps/alpha/fpu/s_nearbyint.c (__nearbyint): Remove;
	include sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c.

	* sysdeps/alpha/fpu/math_private.h (math_opt_barrier): New.
	(math_force_eval): New.

	* sysdeps/alpha/fpu/s_lround.c: Add 0.5 with chopped rounding.
	* sysdeps/alpha/fpu/s_lroundf.c: Likewise.

	* sysdeps/alpha/fpu/s_round.c: Remove file.
	* sysdeps/alpha/fpu/s_roundf.c: Remove file.

	* elf/dl-support.c (HP_TIMING_AVAIL): Do not redefine.
	(_dl_non_dynamic_init): Check HP_SMALL_TIMING_AVAIL instead.
	* elf/rtld.c (HP_TIMING_AVAIL): Do not redefine.
	(_dl_start_final): Check HP_SMALL_TIMING_AVAIL instead.
	(_dl_start, print_statistics): Likewise.
	* sysdeps/generic/ldsodefs.h (struct rtld_global): Only check
	HP_SMALL_TIMING_AVAIL in defining _dl_cpuclock_offset.

	* sysdeps/aarch64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/generic/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/i386/i686/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/ia64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h
	(HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/powerpc/powerpc64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h
	(HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/sparc/sparc64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.
	* sysdeps/x86_64/hp-timing.h (HP_SMALL_TIMING_AVAIL): Define.

	* sysdeps/aarch64/hp-timing.h: New file.

	* sysdeps/generic/hp-timing.h: Remove dead comment.
	* sysdeps/generic/hp-timing-common.h: New file.
	* sysdeps/alpha/hp-timing.h: Include it.
	(HP_TIMING_DIFF, HP_TIMING_ACCUM_NT, HP_TIMING_PRINT): Remove.
	* sysdeps/i386/i686/hp-timing.h: Likewise.
	* sysdeps/ia64/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc64/hp-timing.h: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h: Likewise.
	* sysdeps/sparc/sparc64/hp-timing.h: Likewise.
	* sysdeps/x86_64/hp-timing.h: Don't include the i686 version.
	(HP_TIMING_AVAIL, HP_TIMING_INLINE): Define.
	(hp_timing_t): New.

	* benchtests/bench-string.h (_dl_hp_timing_overhead): Remove.
	* benchtests/bench-timing.h (_dl_hp_timing_overhead): Remove.
	(TIMING_INIT): Remove call to HP_TIMING_DIFF_INIT.
	* elf/rtld.c (_dl_start_final): Likewise.
	* sysdeps/generic/ldsodefs.h (_dl_hp_timing_overhead): Remove.
	* sysdeps/alpha/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/generic/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/i386/i686/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/ia64/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h
	(HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/powerpc/powerpc64/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h
	(HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/sparc/sparc64/hp-timing.h (HP_TIMING_DIFF_INIT): Remove.
	* sysdeps/i386/i686/hp-timing.c: Remove file.
	* sysdeps/x86_64/hp-timing.c: Remove file.
	* sysdeps/ia64/hp-timing.c: Remove file.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.c: Remove file.
	* sysdeps/powerpc/powerpc64/hp-timing.c: Remove file.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.c: Remove file.
	* sysdeps/sparc/sparc64/hp-timing.c: Remove file.

	* sysdeps/alpha/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/generic/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/i386/i686/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/ia64/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h
	(HP_TIMING_ACCUM): Remove.
	* sysdeps/powerpc/powerpc64/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h (HP_TIMING_ACCUM): Remove.
	* sysdeps/sparc/sparc64/hp-timing.h (HP_TIMING_ACCUM): Remove.

	* sysdeps/alpha/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/generic/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/i386/i686/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/ia64/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/powerpc/powerpc64/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h (HP_TIMING_ZERO): Remove.
	* sysdeps/sparc/sparc64/hp-timing.h (HP_TIMING_ZERO): Remove.

	* sysdeps/powerpc/powerpc32/hp-timing.h: Remove file.

2014-07-03  Maciej W. Rozycki  <macro@codesourcery.com>

	* stdlib/tst-strtod-overflow.c (TIMEOUT): Bump up to 30.

2014-07-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	Sync up with gettext.
	* intl/loadmsgcat.c: Define O_BINARY if not defined.
	[_MSC_VER]: Include malloc.h
	[_LIBC]: Define PRI_MACROS_BROKEN if it is not defined.
	(get_sysdep_segment_value) [!__UCLIBC__]: Return "I" flag.
	(_nl_load_domain): Open DOMAIN_FILE in binary mode.  Don't use
	TEMP_FAILURE_RETRY.  Cast return of alloca.
	[!_LIBC] Call gl_rwlock_init.
	[IN_LIBGLOCALE]: Call _nl_find_msg with one less argument.

2014-07-02  Roland McGrath  <roland@hack.frob.com>

	* misc/sys/cdefs.h: Check if __STDC_VERSION__ is defined
	before checking its value.

2014-07-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* intl/loadmsgcat.c (_nl_load_domain): Use __builtin_expect.

	* debug/memcpy_chk.c: Don't include pagecopy.h.
	* debug/mempcpy_chk.c: Likewise.
	* string/memcpy.c: Likewise.
	* string/memmove.c: Likewise.
	* sysdeps/powerpc/memmove.c: Likewise.
	* sysdeps/generic/memcopy.h: Include pagecopy.h.  Move
	definition of PAGE_COPY_FWD_MAYBE here...
	* sysdeps/generic/pagecopy.h: ... from here.
	* sysdeps/mach/pagecopy.h: Don't include generic pagecopy.h.

2014-07-02  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/strcat.c: Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcat multiarch
	optimizations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcat.c: New file:
	multiarch strcat for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strcat-ppc64.c: New file/
	* sysdeps/powerpc/powerpc64/multiarch/strcat-power7.c: New file.

2014-07-02  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/dl-sysdep.c: Include <sys/param.h>.

2014-07-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* intl/loadmsgcat.c: Remove declaration of
	get_sysdep_segment_value.
	(get_sysdep_segment_value): Use ISO C style.
	(_nl_load_domain): Use ISO C style.  Get rid of redundant
	semicolon.  Fix typo and formatting in comment.
	(_nl_unload_domain): Use ISO C style.

	* sysdeps/posix/sysconf.c (__sysconf): Fix typo in macro name.

2014-07-02  Will Newton  <will.newton@linaro.org>

	* malloc/obstack.c: Merge from gnulib master.
	[HAVE_CONFIG_H]: Remove conditional code.
	[!_LIBC]: Include config.h.
	[!ELIDE_CODE]: Don't include inttypes.h, include
	stdint.h unconditionally.
	(print_and_abort): Mark as _Noreturn.
	(_obstack_allocated_p): Mark as __attribute_pure__.
	(obstack_free): Rename to __obstack_free.
	[!__attribute__]: Remove conditional code.
	* malloc/obstack.h: Merge from gnulib master.
	[__cplusplus]: Move conditional down.
	[!__attribute_pure__]: Define __attribute_pure__ here
	if it is not already defined.
	(_obstack_memory_used): Mark as __attribute_pure__.
	[!__obstack_free]: Define as obstack_free.
	[__GNUC__]: Remove check for ancient NeXT gcc.

2014-07-02  Will Newton  <will.newton@linaro.org>
	    Paul Eggert  <eggert@cs.ucla.edu>

	* misc/sys/cdefs.h (_Noreturn): New macro, for pre-C11 compilers.

2014-07-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/gethnamaddr.c: Add comment warning that the file is
	not maintained.

2014-07-01  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/unix/sysv/linux/hppa/librt.abilist: Remove GLIBC_2.3
	entries.

	* sysdeps/unix/sysv/linux/hppa/Versions: Remove librt GLIBC_2.3
	entry for aio_cancel and aio_cancel64.
	* sysdeps/unix/sysv/linux/hppa/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libBrokenLocale.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libthread_db.abilist: New file.
	* sysdeps/unix/sysv/linux/hppa/libutil.abilist: New file.

2014-07-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/sysconf.c: Include <sys/param.h>.
	* nptl/pthread_mutex_lock.c: Likewise.
	* nptl/pthread_mutex_timedlock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_attr_getaffinity.c: Likewise.

2014-07-01  Richard henderson  <rth@redhat.com>

	* sysdeps/alpha/fpu/bits/mathinline.h (__isnanf): Remove.
	(__isnan, __isnanl): Remove.
	* sysdeps/alpha/fpu/s_isnan.c (__isnan): Use integer arithmetic.

	* sysdeps/alpha/fpu/libm-test-ulps: Update.

2014-07-01  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-07-01  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/nss_dns/dns-host.c (getanswer_r)
	[MULTI_PTRS_ARE_ALIASES]: Remove code.

2014-07-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030f00] (__ASSUME_PSELECT): Do not
	undefine.
	[__LINUX_KERNEL_VERSION >= 0x030f00] (__ASSUME_PREADV): Likewise.
	[__LINUX_KERNEL_VERSION >= 0x030f00] (__ASSUME_PWRITEV): Likewise.

2014-07-01  Roland McGrath <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/microblaze/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/microblaze/nptl/fork.c: File removed.

	* sysdeps/microblaze/nptl/tls.h: Define TLS_DEFINE_INIT_TP.
	* sysdeps/unix/sysv/linux/microblaze/nptl/createthread.c: File removed.

	* sysdeps/microblaze/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/bits/pthreadtypes.h:
	... here.
	* sysdeps/microblaze/nptl/bits/semaphore.h: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/bits/semaphore.h: ... here.

	* sysdeps/unix/sysv/linux/microblaze/pt-vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/pt-vfork.S: ... here.
	* sysdeps/unix/sysv/linux/microblaze/nptl/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/vfork.S: ... here.

	* sysdeps/unix/sysv/linux/microblaze/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/microblaze/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/microblaze/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/microblaze/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/microblaze/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/microblaze/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/nptl/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/microblaze/nptl/pthread_once.c: Moved ...
	* sysdeps/unix/sysv/linux/microblaze/pthread_once.c: ... here.

2014-07-01  David Holsgrove  <david.holsgrove@xilinx.com>

	* sysdeps/unix/sysv/linux/microblaze/sysdep-cancel.h: New file.
	* sysdeps/unix/sysv/linux/microblaze/socket.S: Update SINGLE_THREAD_P use.
	* sysdeps/unix/sysv/linux/microblaze/Makefile(libpthread-routines):
	Add sysdep.

2014-06-30  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-06-30  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/mips32/libm-test-ulps: Regenerated.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.

	* sysdeps/powerpc/nofpu/libm-test-ulps: Regenerated.

	* sysdeps/arm/libm-test-ulps: Regenerated.

2014-06-30  Maciej W. Rozycki  <macro@codesourcery.com>
	    Roland McGrath <roland@hack.frob.com>

	* test-skeleton.c (signal_handler): Kill the whole process group
	before killing the child individually.
	(main): Report any failure on `setpgid'.

2014-06-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/nptl/tls.h: Rename the multiple inclusion guard
	from _TLS_H to _ARM_NPTL_TLS_H.
	(TLS_INIT_TP): Move macro, and #include of <sysdep.h>, to ...
	* sysdeps/unix/sysv/linux/arm/tls.h: ... this new file.

2014-06-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16539]
	* sysdeps/ieee754/ldbl-128/s_expm1l.c: Include <float.h>.
	(__expm1l): Return argument unchanged when small but not
	subnormal.

	* soft-fp/op-1.h (_FP_UNPACK_RAW_1): Rename local variables to
	include macro name.
	(_FP_UNPACK_RAW_1_P): Likewise.
	(_FP_PACK_RAW_1): Likewise.
	(_FP_PACK_RAW_1_P): Likewise.
	(_FP_MUL_MEAT_1_wide): Likewise.
	(_FP_MUL_MEAT_DW_1_hard): Likewise.
	(_FP_MUL_MEAT_1_hard): Likewise.
	(_FP_DIV_MEAT_1_imm): Likewise.
	(_FP_DIV_MEAT_1_udiv_norm): Likewise.
	(_FP_DIV_MEAT_1_udiv): Likewise.
	* soft-fp/op-2.h (__FP_FRAC_DEC_2): Likewise.
	(_FP_UNPACK_RAW_2): Likewise.
	(_FP_UNPACK_RAW_2_P): Likewise.
	(_FP_PACK_RAW_2): Likewise.
	(_FP_PACK_RAW_2_P): Likewise.
	(_FP_MUL_MEAT_DW_2_wide): Likewise.
	(_FP_MUL_MEAT_2_wide): Likewise.
	(_FP_MUL_MEAT_DW_2_wide_3mul): Likewise.
	(_FP_MUL_MEAT_2_wide_3mul): Likewise.
	(_FP_MUL_MEAT_DW_2_gmp): Likewise.
	(_FP_MUL_MEAT_2_gmp): Likewise.
	(_FP_DIV_MEAT_2_udiv): Likewise.
	* soft-fp/op-4.h (_FP_FRAC_SLL_4): Likewise.
	(_FP_FRAC_SRL_4): Likewise.
	(_FP_FRAC_SRST_4): Likewise.
	(_FP_FRAC_SRS_4): Likewise.
	(_FP_UNPACK_RAW_4): Likewise.
	(_FP_UNPACK_RAW_4_P): Likewise.
	(_FP_PACK_RAW_4): Likewise.
	(_FP_PACK_RAW_4_P): Likewise.
	(_FP_MUL_MEAT_DW_4_wide): Likewise.
	(_FP_MUL_MEAT_4_wide): Likewise.
	(_FP_MUL_MEAT_4_gmp): Likewise.
	(umul_ppppmnnn): Likewise.
	(_FP_DIV_MEAT_4_udiv): Likewise.
	(__FP_FRAC_ADD_4): Likewise.
	(__FP_FRAC_SUB_3): Likewise.
	(__FP_FRAC_SUB_4): Likewise.
	(__FP_FRAC_DEC_3): Likewise.
	(__FP_FRAC_DEC_4): Likewise.
	(__FP_FRAC_ADDI_4): Likewise.
	* soft-fp/op-8.h (_FP_FRAC_SLL_8): Likewise.
	(_FP_FRAC_SRL_8): Likewise.
	(_FP_FRAC_SRS_8): Likewise.

	* soft-fp/extended.h (FP_UNPACK_RAW_E): Rename local variables to
	include macro name.
	(FP_UNPACK_RAW_EP): Likewise.
	(FP_PACK_RAW_E): Likewise.
	(FP_PACK_RAW_EP): Likewise.
	* soft-fp/op-common.h (_FP_UNPACK_CANONICAL): Likewise.
	(_FP_ISSIGNAN): Likewise.
	(_FP_ADD_INTERNAL): Likewise.
	(_FP_FMA): Likewise.
	(_FP_CMP): Likewise.
	(_FP_SQRT): Likewise.
	(_FP_TO_INT): Likewise.
	(_FP_FROM_INT): Likewise.
	(FP_EXTEND): Likewise.
	(_FP_DIV_MEAT_N_loop): Likewise.

2014-06-30  Maciej W. Rozycki  <macro@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/socket.h: Adjust macro formatting
	throughout.

2014-06-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17097]
	* sysdeps/ieee754/ldbl-128/e_powl.c (__ieee754_powl): Return
	result with correct sign in case of exponents that produce
	overflow except for X very close to 1.

2014-06-28  Paul Eggert  <eggert@cs.ucla.edu>

	mktime: merge #if/#ifdef usage from glibc
	* lib/mktime.c: Use "#if defined DEBUG && DEBUG", not "#if DEBUG",
	as that works with both Glibc's and Gnulib's style.
	See thread starting at Siddhesh Poyarekar's bug report at:
	http://lists.gnu.org/archive/html/bug-gnulib/2014-06/msg00102.html

2014-06-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/generic/memcopy.h: Define MEMCPY_OK_FOR_FWD_MEMMOVE.
	* sysdeps/tile/memcopy.h: Redefine MEMCPY_OK_FOR_FWD_MEMMOVE.
	* sysdeps/tile/tilegx/memmove.c: Remove file.

2014-06-27  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig ($(common-objpfx)soversions.mk): Do not generate
	abi-name definition.
	* scripts/soversions.awk: Do not handle or generate ABI lines.
	* shlib-versions: Remove ABI entries.
	* sysdeps/powerpc/nofpu/shlib-versions: Remove file.
	* sysdeps/x86_64/x32/shlib-versions: Remove ABI entry.

2014-06-27  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/mips/mips32/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/fpu/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libcidn.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libcidn.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_compat.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_compat.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_dns.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_dns.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_files.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_files.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_hesiod.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_hesiod.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_nis.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_nis.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libnss_nisplus.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libnss_nisplus.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips32/nofpu/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libBrokenLocale.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libanl.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libcrypt.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libdl.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libm.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libnsl.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libpthread.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/librt.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libthread_db.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n32/nptl/libutil.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/n64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/n64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/mips/mips64/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/mips/mips64/sysdep-cancel.h: ... here.

	* sysdeps/unix/sysv/linux/mips/vfork.S: Incorporate
	SAVE_PID and RESTORE_PID blocks from nptl/pt-vfork.S.
	* sysdeps/unix/sysv/linux/mips/nptl/vfork.S: File removed.
	* sysdeps/unix/sysv/linux/mips/nptl/pt-vfork.S: File removed.
	* sysdeps/unix/sysv/linux/mips/pt-vfork.S: New file.

2014-06-27  Arjun Shankar  <arjun.is@lostca.se>

	[BZ #17092]
	* nscd/nscd.c (monitor_child): Return exit status of child
	instead of return value from wait syscall.

2014-06-27  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac (libc_commonpagesize): Remove variable.
	(libc_relro_required): Likewise.
	(libc_cv_z_relro): Remove configure test.
	* configure: Regenerated.
	* sysdeps/aarch64/preconfigure (libc_commonpagesize): Do not set
	variable.
	(libc_relro_required): Likewise.
	* sysdeps/alpha/preconfigure (libc_commonpagesize): Likewise.
	(libc_relro_required): Likewise.
	* sysdeps/arm/preconfigure.ac (libc_commonpagesize): Likewise.
	(libc_relro_required): Likewise.
	* sysdeps/arm/preconfigure: Regenerated.
	* sysdeps/ia64/preconfigure: Remove file.
	* sysdeps/tile/preconfigure (libc_commonpagesize): Do not set
	variable.
	(libc_relro_required): Likewise.

	[BZ #16561]
	[BZ #16562]
	* sysdeps/ieee754/dbl-64/e_jn.c: Include <float.h>.
	(__ieee754_yn): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/ieee754/flt-32/e_jnf.c: Include <float.h>.
	(__ieee754_ynf): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Include <float.h>.
	(__ieee754_ynl): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Include <float.h>.
	(__ieee754_ynl): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Include <float.h>.
	(__ieee754_ynl): Set FE_TONEAREST mode internally and then
	recompute overflowing results in original rounding mode.
	* sysdeps/i386/fpu/fenv_private.h [!__SSE2_MATH__]
	(libc_feholdsetround_ctx): New macro.
	* math/libm-test.inc (yn_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps : Likewise.

2014-06-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/mips/mips64/nptl/sysdep-cancel.h
	[__PIC__] (PSEUDO): Use name of _nocancel entry point in
	corresponding .cpsetup call.

2014-06-26  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/libc-aeabi_read_tp.S: Moved ...
	* sysdeps/arm/libc-aeabi_read_tp.S: ... here.
	* sysdeps/arm/Makefile [$(subdir) = csu]
	(aeabi_routines): Add aeabi_read_tp and libc-aeabi_read_tp here.
	(static-only-routines): Add aeabi_read_tp here.
	(shared-only-routines): Add libc-aeabi_read_tp here.
	(CFLAGS-libc-start.c): Add -fexceptions here.
	* sysdeps/unix/sysv/linux/arm/Makefile [$(subdir) = csu]
	(sysdep_routines, static-only-routines, shared-only-routines):
	Don't add to these here.
	(CFLAGS-libc-start.c): Likewise.

	* sysdeps/unix/sysv/linux/arm/nptl-aeabi_unwind_cpp_pr1.c: Moved ...
	* sysdeps/arm/nptl-aeabi_unwind_cpp_pr1.c: ... here.
	* sysdeps/unix/sysv/linux/arm/rt-aeabi_unwind_cpp_pr1.c: Moved ...
	* sysdeps/arm/rt-aeabi_unwind_cpp_pr1.c: ... here.
	* sysdeps/arm/Makefile [$(subdir) = rt]
	(librt-sysdep_routines, librt-shared-only-routines):
	Append rt-aeabi_unwind_cpp_pr1 here.
	* sysdeps/unix/sysv/linux/arm/Makefile [$(subdir) = rt]
	(librt-sysdep_routines, librt-shared-only-routines): Don't do it here.
	* sysdeps/arm/nptl/Makefile [$(subdir) = nptl]
	(libpthread-sysdep_routines, libpthread-shared-only-routines):
	Append nptl-aeabi_unwind_cpp_pr1 here.
	(tests): Filter out tst-cleanupx4 here.
	* sysdeps/unix/sysv/linux/arm/Makefile [$(subdir) = nptl]
	(libpthread-sysdep_routines, libpthread-shared-only-routines, tests):
	Don't do those here.

2014-06-26  Joseph Myers  <joseph@codesourcery.com>

	* scripts/list-sources.sh: Do not handle ports specially.

2014-06-26  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/fesetenv.c: Include <fpu_control.h>.
	* sysdeps/arm/feupdateenv.c: Likewise.

	* posix/spawn_faction_addopen.c: Include <stdlib.h> for free decl.

2014-06-26  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2014-05-05.10 with
	trailing whitespace removed.
	* scripts/config.guess: Update to version 2014-03-23.
	* scripts/config.sub: Update to version 2014-05-01
	* scripts/install-sh: Update to version 2013-12-25.23.
	* scripts/move-if-change: Update from gnulib.

2014-06-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* debug/memmove_chk.c: Remove pagecopy.h include.

2014-06-26  Paul Eggert  <eggert@cs.ucla.edu>

	* time/mktime.c (leapyear): Remove inline keyword.  The code is now
	identical to gnulib mktime.

2014-06-26  Joseph Myers  <joseph@codesourcery.com>

	* configure.ac: Do not test for machine being rs6000.  Do not test
	for powerpc*-*soft.
	* configure: Regenerated.

	[BZ #11505]
	* configure.ac (libc_cv_asm_cfi_directives): Remove configure
	test.
	* configure: Regenerated.
	* config.h.in (HAVE_ASM_CFI_DIRECTIVES): Remove macro undefine.
	* sysdeps/arm/configure.ac (libc_cv_asm_cfi_directive_sections):
	Remove configure test.
	* sysdeps/arm/configure: Regenerated.
	* sysdeps/nptl/configure.ac: Do not check
	libc_cv_asm_cfi_directives.
	* sysdeps/nptl/configure: Regenerated.
	* sysdeps/x86_64/nptl/configure.ac: Remove file.
	* sysdeps/x86_64/nptl/configure: Remove generated file.
	* b/sysdeps/generic/sysdep.h [HAVE_ASM_CFI_DIRECTIVES]: Make code
	unconditional.
	[!HAVE_ASM_CFI_DIRECTIVES]: Remove conditional code.

2014-06-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* posix/fnmatch.c: Define WIDE_CHAR_VERSION.
	* posix/fnmatch_loop.c: Undefine WIDE_CHAR_VERSION.
	(FCT): Check value of WIDE_CHAR_VERSION instead of checking if
	it is defined.

	* elf/dl-runtime.c: Check for value of ELF_MACHINE_NO_RELA
	instead of whether it is defined.
	* sysdeps/aarch64/dl-machine.h: Define ELF_MACHINE_NO_RELA.
	* sysdeps/hppa/dl-machine.h: Likewise.
	* sysdeps/ia64/dl-machine.h: Likewise.
	* sysdeps/m68k/dl-machine.h: Likewise.
	* sysdeps/microblaze/dl-machine.h: Likewise.
	* sysdeps/mips/dl-machine.: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Likewise.
	* sysdeps/s390/s390-32/dl-machine.h: Likewise.
	* sysdeps/s390/s390-64/dl-machine.h: Likewise.
	* sysdeps/sh/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.
	* sysdeps/tile/dl-machine.h: Likewise.
	* sysdeps/x86_64/dl-machine.h: Likewise.

	* nscd/connections.c (enum usekey) [SEPARATE_KEY]: Remove
	code.
	(verify_persistent_db): Likewise.

2014-06-26  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libanl.abilist:
	Identical file removed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/s390/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/localplt.data:
	Identical file removed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/libutil.abilist: ... here.

	* nptl/sysdeps/unix/sysv/linux/s390/Makefile: File removed, contents
	folded into ...
	* sysdeps/unix/sysv/linux/s390/Makefile [$(subdir) = nptl]: ... here.
	* sysdeps/unix/sysv/linux/s390/Versions
	(libpthread: GLIBC_2.19): New version set.
	* nptl/sysdeps/unix/sysv/linux/s390/Versions: File removed.
	* sysdeps/unix/sysv/linux/s390/s390-64/Versions
	(librt: GLIBC_2.3.3): New version set.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/Versions: File removed.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-conf.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-conf.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-conf.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-conf.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-lock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-timed.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-timed.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-trylock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-trylock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-unlock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/elision-unlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/force-elision.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/force-elision.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/jmp-unwind.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/jmp-unwind.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pt-longjmp.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pt-longjmp.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_cond_lock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_cond_lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_lock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_timedlock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_timedlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_trylock.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_mutex_trylock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_once.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/pthread_once.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_create.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_delete.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_getoverr.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_gettime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/timer_settime.c: ... here.

	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-32/vfork.S: ... here.
	(__libc_vfork): Define the function under this name.
	[!NOT_IN_libc] (__vfork): Make this an alias.
	[!NOT_IN_libc] (vfork): Conditionalize the weak_alias.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/s390/s390-64/vfork.S: ... here.
	(__libc_vfork): Define the function under this name.
	[!NOT_IN_libc] (__vfork): Make this an alias.
	[!NOT_IN_libc] (vfork): Conditionalize the weak_alias.
	* sysdeps/unix/sysv/linux/s390/pt-vfork.S: New file.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/pt-vfork.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/pt-vfork.S: File removed.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list: Remove vfork.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list: Likewise.

	* sysdeps/unix/sysv/linux/s390/s390-32/clone.S: Deconditionalize the
	code that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/s390/s390-64/clone.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/clone.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/clone.S: File removed.

	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/aarch64/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/semaphore.h: Moved ...
	* sysdeps/aarch64/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/bits/local_lim.h: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/aarch64/sysdep-cancel.h: ... here.

2014-06-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/mips/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/mips/nptl/clone.S: File removed.

2014-06-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/dl-opendir.c (__ASSUME_O_CLOEXEC): Do
	not undefine and redefine.
	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs)
	[O_CLOEXEC]: Make code unconditional.
	(__get_nprocs) [!O_CLOEXEC]: Remove conditional code.
	* sysdeps/unix/sysv/linux/shm_open.c: Do not include
	<kernel-features.h>.
	[O_CLOEXEC && !__ASSUME_O_CLOEXEC] (have_o_cloexec): Remove
	conditional variable definition.
	(shm_open) [O_CLOEXEC]: Make code unconditional.
	(shm_open) [!O_CLOEXEC || !__ASSUME_O_CLOEXEC]: Remove conditional
	code.

	* configure.ac (USE_REGPARMS): Don't define here.
	* configure: Regenerated.
	* sysdeps/i386/configure.ac (USE_REGPARMS): Define here.
	* sysdeps/i386/configure: Regenerated.

	* nptl/createthread.c: Don't include kernel-features.h.
	* nptl/pthread_cancel.c: Likewise.
	* nptl/pthread_condattr_setclock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pt-raise.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_getcpuclockid.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_kill.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/pthread_sigqueue.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/raise.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/pt-vfork.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-32/vfork.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/pt-vfork.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/vfork.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_create.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_delete.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_getoverr.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_gettime.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_routines.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/timer_settime.c: Likewise.
	* nscd/gai.c: Likewise.
	* nss/nss_db/db-open.c: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.
	* sysdeps/sh/nptl/tls.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/sigcontextinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/aarch64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/adjtime.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/xstatconv.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/sigcontextinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/check_pf.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_getres.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_gettime.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_settime.c: Likewise.
	* sysdeps/unix/sysv/linux/dl-execstack.c: Likewise.
	* sysdeps/unix/sysv/linux/dl-osinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/dl-sysdep.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/futimesat.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/poll.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/fcntl.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/fxstatat.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/preadv.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/preadv64.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwritev.c: Likewise.
	* sysdeps/unix/sysv/linux/generic/wordsize-32/pwritev64.c: Likewise.
	* sysdeps/unix/sysv/linux/getcwd.c: Likewise.
	* sysdeps/unix/sysv/linux/getpagesize.c: Likewise.
	* sysdeps/unix/sysv/linux/getsysstats.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/lxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap64.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/system.c: Likewise.
	* sysdeps/unix/sysv/linux/if_index.c: Likewise.
	* sysdeps/unix/sysv/linux/ifaddrs.c: Likewise.
	* sysdeps/unix/sysv/linux/ifreq.c: Likewise.
	* sysdeps/unix/sysv/linux/ldsodefs.h: Likewise.
	* sysdeps/unix/sysv/linux/lutimes.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/microblaze/nptl/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/accept4.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/recvmmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/mips32/sendmmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/mmap64.c: Likewise.
	* sysdeps/unix/sysv/linux/netlinkaccess.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_mask.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_mask.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/prof-freq.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap64.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/system.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sigpending.c: Likewise.
	* sysdeps/unix/sysv/linux/sigprocmask.c: Likewise.
	* sysdeps/unix/sysv/linux/sigsuspend.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/xstatconv.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/system.c: Likewise.
	* sysdeps/unix/sysv/linux/syslog.c: Likewise.
	* sysdeps/unix/sysv/linux/system.c: Likewise.
	* sysdeps/unix/sysv/linux/testrtsig.h: Likewise.
	* sysdeps/unix/sysv/linux/timespec_get.c: Likewise.
	* sysdeps/unix/sysv/linux/ttyname.c: Likewise.
	* sysdeps/unix/sysv/linux/ttyname_r.c: Likewise.
	* sysdeps/unix/sysv/linux/utimensat.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/xstatconv.h: Likewise.

	* configure.ac (libc_cv_c_asmcr0_bug): Remove configure test.
	* configure: Regenerated.
	* config.h.in (BROKEN_PPC_ASM_CR0): Remove macro.

	* configure.ac (base_machine): Do not set specially for particular
	machines here.
	* configure: Regenerated.
	* sysdeps/powerpc/preconfigure: Move machine and base_machine
	settings from configure.ac.
	* sysdeps/i386/preconfigure: New file.
	* sysdeps/s390/preconfigure: Likewise.
	* sysdeps/sh/preconfigure: Likewise.
	* sysdeps/sparc/preconfigure: Likewise.

2014-06-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/sparc/sparc64/nptl/cpu_relax.S: Moved ...
	* sysdeps/sparc/sparc64/cpu_relax.S: ... here.
	* sysdeps/sparc/sparc64/nptl/pthread_spin_init.c: Moved ...
	* sysdeps/sparc/sparc64/pthread_spin_init.c: ... here.
	* sysdeps/sparc/sparc64/nptl/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc64/pthread_spin_lock.S: ... here.
	* sysdeps/sparc/sparc64/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc64/pthread_spin_trylock.S: ... here.
	* sysdeps/sparc/sparc64/nptl/pthread_spin_unlock.S: Moved ...
	* sysdeps/sparc/sparc64/pthread_spin_unlock.S: ... here.
	* sysdeps/sparc/sparc64/nptl/pthreaddef.h: Moved ...
	* sysdeps/sparc/sparc64/pthreaddef.h: ... here.
	* sysdeps/sparc/sparc32/sparcv9/cpu_relax.S: Update #include.
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_init.c: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_lock.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_trylock.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_unlock.S: Likewise.
	* sysdeps/sparc/sparc64/nptl/Makefile: File removed, its contents ...
	* sysdeps/sparc/sparc64/Makefile: ... appended here.

	* sysdeps/sparc/sparc32/nptl/lowlevellock.c: Moved ...
	* sysdeps/sparc/sparc32/lowlevellock.c: ... here.
	* sysdeps/sparc/sparc32/nptl/pthread_barrier_wait.c: Moved ...
	* sysdeps/sparc/sparc32/pthread_barrier_wait.c: ... here.
	* sysdeps/sparc/sparc32/nptl/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc32/pthread_spin_lock.S: ... here.
	* sysdeps/sparc/sparc32/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc32/pthread_spin_trylock.S: ... here.
	* sysdeps/sparc/sparc32/nptl/pthreaddef.h: Moved ...
	* sysdeps/sparc/sparc32/pthreaddef.h: ... here.
	* sysdeps/sparc/sparc32/nptl/sem_post.c: Moved ...
	* sysdeps/sparc/sparc32/sem_post.c: ... here.
	* sysdeps/sparc/sparc32/nptl/sem_timedwait.c: Moved ...
	* sysdeps/sparc/sparc32/sem_timedwait.c: ... here.
	* sysdeps/sparc/sparc32/nptl/sem_trywait.c: Moved ...
	* sysdeps/sparc/sparc32/sem_trywait.c: ... here.
	* sysdeps/sparc/sparc32/nptl/sem_wait.c: Moved ...
	* sysdeps/sparc/sparc32/sem_wait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/cpu_relax.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/cpu_relax.S: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_barrier_wait.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_barrier_wait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_init.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_init.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_lock.S: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_trylock.S: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_unlock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/pthread_spin_unlock.S: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_post.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/sem_post.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_timedwait.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/sem_timedwait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_trywait.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/sem_trywait.c: ... here.
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_wait.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/sem_wait.c: ... here.

	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/localplt.data: ... here.

2014-06-25  Joseph Myers  <joseph@codesourcery.com>

	* timezone/checktab.awk: Update from tzcode 2014e.
	* timezone/private.h: Likewise.
	* timezone/tzfile.h: Likewise.
	* timezone/zdump.c: Likewise.
	* timezone/zic.c: Likewise.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_XFS_RESTRICTED_CHOWN): Remove macro.
	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_chown_restricted)
	[__ASSUME_XFS_RESTRICTED_CHOWN]: Make code unconditional.
	(__statfs_chown_restricted) [!__ASSUME_XFS_RESTRICTED_CHOWN]:
	Remove conditional code.

2014-06-25  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/arm/dl-procinfo.c
	(_dl_arm_cap_flags): Add HWCAP2 values.
	* sysdeps/unix/sysv/linux/arm/dl-procinfo.h
	(_DL_HWCAP_COUNT): Increase to 37.
	(_DL_HWCAP_LAST): New define.
	(_DL_HWCAP2_LAST): New define.
	(_dl_procinfo): Add support for printing
	AT_HWCAP2 entries.
	(_dl_string_hwcap): Use _dl_hwcap_string.

2014-06-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-06-25  Joseph Myers  <joseph@codesourcery.com>

	* README: Do not mention ports directory.

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_UTIMENSAT):
	Remove macro.
	* sysdeps/unix/sysv/linux/futimes.c: Do not include
	<kernel-features.h>.
	[__NR_utimensat && !__ASSUME_UTIMENSAT] (miss_utimensat): Remove
	conditional variable definition.
	(__futimes): Update comment.
	(__futimes) [__ASSUME_UTIMENSAT]: Make code unconditional.
	(__futimes) [!__ASSUME_UTIMENSAT]: Remove conditional code.

	[BZ #16560]
	* sysdeps/ieee754/dbl-64/e_exp10.c (__ieee754_exp10): Return 1 for
	arguments close to 0.
	* sysdeps/ieee754/ldbl-128/e_exp10l.c (__ieee754_exp10l):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_exp10l.c (__ieee754_exp10l):
	Likewise.
	* math/auto-libm-test-in: Add more tests of exp10.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_COMPLETE_READV_WRITEV): Remove macro.
	* sysdeps/unix/sysv/linux/readv.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_COMPLETE_READV_WRITEV]: Remove conditional code.
	[!UIO_FASTIOV] (UIO_FASTIOV): Remove macro.
	(__libc_readv) [__ASSUME_COMPLETE_READV_WRITEV]: Make code
	unconditional.
	(__libc_readv) [!__ASSUME_COMPLETE_READV_WRITEV]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/writev.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_COMPLETE_READV_WRITEV]: Remove conditional code.
	[!UIO_FASTIOV] (UIO_FASTIOV): Remove macro.
	(__libc_writev) [__ASSUME_COMPLETE_READV_WRITEV]: Make code
	unconditional.
	(__libc_writev) [!__ASSUME_COMPLETE_READV_WRITEV]: Remove
	conditional code.

2014-06-25  Will Newton  <will.newton@linaro.org>

	* sysdeps/posix/tempname.c: Merge from gnulib, cosmetic
	comment changes throughout the file.  Remove checks
	for HAVE_*_H definitions that are not required.
	(__gen_tempname): Call abort if an unknown kind value is
	passed.

2014-06-25  Andreas Schwab  <schwab@suse.de>

	[BZ #17086]
	* sysdeps/m68k/m680x0/fpu/s_scalbn.c: Add compat symbols for
	scalbln, scalblnf, scalblnl in libc.

2014-06-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #17086]
	* sysdeps/i386/fpu/s_scalbn.S: Add compat symbol for libc.so.
	* sysdeps/i386/fpu/s_scalbnf.S: Likewise.
	* sysdeps/i386/fpu/s_scalbnl.S: Likewise.

2014-06-24  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/i486/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i486/pthread_spin_trylock.S: ... here.
	* sysdeps/i386/i586/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i586/pthread_spin_trylock.S: ... here.
	Update #include.
	* sysdeps/i386/i686/nptl/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i686/pthread_spin_trylock.S: ... here.
	Update #include.
	* sysdeps/x86_64/64/nptl/shlib-versions: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/shlib-versions: ... here.
	* sysdeps/x86_64/x32/nptl/shlib-versions: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/shlib-versions: ... here.
	* sysdeps/x86/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/x86/bits/pthreadtypes.h: ... here.
	* sysdeps/x86/nptl/bits/semaphore.h: Moved ...
	* sysdeps/x86/bits/semaphore.h: ... here.
	* sysdeps/x86/nptl/elide.h: Moved ...
	* sysdeps/x86/elide.h: ... here.
	* sysdeps/x86_64/nptl/Implies: File removed.
	* sysdeps/i386/nptl/Implies: File removed.

2014-06-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16539]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]: Just
	return the argument for normal arguments with exponent below -64.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]:
	Likewise.
	* math/auto-libm-test-in: Add another test of expm1.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16287]
	* sysdeps/ieee754/ldbl-128/s_erfl.c (__erfl): Return 1 without
	calling __erfcl for arguments at least 16.
	* math/auto-libm-test-in: Add more tests of erf.
	* math/auto-libm-test-out: Regenerated.

	* sysdeps/unix/sysv/linux/configure.ac: Remove cases for
	individual architectures.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/i386/configure.ac: New file.
	* sysdeps/unix/sysv/linux/i386/configure: New generated file.
	* sysdeps/unix/sysv/linux/powerpc/configure.ac
	(ldd_rewrite_script): Define variable.
	* sysdeps/unix/sysv/linux/powerpc/configure: Regenerated.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/configure.ac: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/configure: New
	generated file.
	* sysdeps/unix/sysv/linux/s390/configure.ac: New file.
	* sysdeps/unix/sysv/linux/s390/configure: New generated file.
	* sysdeps/unix/sysv/linux/sh/configure.ac: New file.
	* sysdeps/unix/sysv/linux/sh/configure: New generated file.
	* sysdeps/unix/sysv/linux/sparc/configure.ac: New file.
	* sysdeps/unix/sysv/linux/sparc/configure: New generated file.
	* sysdeps/unix/sysv/linux/x86_64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/x86_64/configure: New generated file.

2014-06-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #17084]
	* sysdeps/x86/nptl/bits/pthreadtypes.h (pthread_mutex_t):
	Rename member __data.d to __data.__elision_data.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* NEWS: Add 16918 to fixed bug list.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fesetenv.c (fesetenv): Optimize implementation.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fpu_control.h (_FPU_MASK_RM): Define.
	* sysdeps/arm/fenv_private.h (libc_fesetround_vfp)
	(libc_feholdexcept_setround_vfp) (libc_feholdsetround_vfp)
	(libc_feresetround_vfp) (libc_feholdsetround_vfp_ctx)
	(libc_feresetround_vfp_ctx): Use _FPU_MASK_RM.
	* sysdeps/arm/fesetround.c (fesetround): Use _FPU_MASK_RM.
	* sysdeps/arm/get-rounding-mode.h (get_rounding_mode):
	Use _FPU_MASK_RM.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fsetexcptflg.c (fesetexceptflag): Remove unused include.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/feholdexcpt.c (feholdexcept): Remove space.
	* sysdeps/arm/fesetenv.c (fesetenv): Remove space.
	* sysdeps/arm/fesetround.c (fesetround): Remove space.
	* sysdeps/arm/fraiseexcpt.c (feraiseexcept): Remove space.

2014-06-24  Wilco  <wdijkstr@arm.com>

	[BZ #16918]
	* sysdeps/arm/feupdateenv.c (feupdateenv):
	Rewrite to reduce FPSCR accesses and fix return value.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fclrexcpt.c (feclearexcept):
	Optimize to avoid unnecessary FPSCR writes.
	* sysdeps/arm/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/arm/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/arm/fsetexcptflg.c (fesetexceptflag): Likewise.
	* sysdeps/arm/setfpucw.c (__setfpucw): Likewise.

2014-06-24  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fegetround.c (fegetround): Call get_rounding_mode.
	* sysdeps/arm/feholdexcpt.c (feholdexcept): Call libc_feholdexcept_vfp.
	* sysdeps/arm/fesetround.c (fesetround): Call libc_fesetround_vfp.
	* sysdeps/arm/fgetexcptflg.c (fegetexceptflag):
	Call libc_fetestexcept_vfp.
	* sysdeps/arm/ftestexcept.c (fetestexcept): Call libc_fetestexcept_vfp.
	* sysdeps/arm/fenv_private.h: Move libc_*_vfp functions outside of
	__SOFTFP__ ifdef so that they can be built for softfp.

2014-06-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/x86/nptl/elide.h (elision_adapt): Make first
	argument type signed char.

	* Makerules (check-abi): Dump diff of symlist if the test
	fails.

2014-06-23  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/get-rounding-mode.h: Include <stdlib.h> before
	using abort.

	* sysdeps/unix/sysv/linux/fstatvfs.c (fstatvfs):
	Remove unused variable ST.

2014-06-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16354]
	[BZ #17061]
	* sysdeps/ieee754/dbl-64/e_cosh.c (__ieee754_cosh): Check for
	small arguments before calling __expm1.
	* sysdeps/ieee754/flt-32/e_coshf.c (__ieee754_coshf): Check for
	small arguments before calling __expm1f.
	* sysdeps/ieee754/ldbl-128/e_coshl.c (__ieee754_coshl): Check for
	small arguments before calling __expm1l.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c (__ieee754_coshl):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_coshl.c (__ieee754_coshl): Likewise.
	* math/auto-libm-test-in: Add more cosh tests.  Do not allow
	spurious underflow for some cosh tests.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	[BZ #17050]
	* sysdeps/ieee754/dbl-64/e_j1.c: Include <errno.h>.
	(__ieee754_y1): Set errno if return value overflows.
	* sysdeps/ieee754/flt-32/e_j1f.c: Include <errno.h>.
	(__ieee754_y1f): Set errno if return value overflows.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Include <errno.h>.
	(__ieee754_y1l): Set errno if return value overflows.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Include <errno.h>.
	(__ieee754_y1l): Set errno if return value overflows.
	* math/auto-libm-test-in: Add more tests of y0, y1 and yn.
	* math/auto-libm-test-out: Regenerated.

	* math/gen-auto-libm-tests.c: Document use of
	ignore-zero-inf-sign.
	(input_flag_type): Add value flag_ignore_zero_inf_sign.
	(input_flags): Add ignore-zero-inf-sign.
	(output_for_one_input_case): Handle flag_ignore_zero_inf_sign.
	* math/gen-libm-test.pl (generate_testfile): Handle
	ignore-zero-inf-sign.
	* math/auto-libm-test-in: Mark some cpow tests with
	ignore-zero-inf-sign and some with xfail-rounding.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (cpow_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16315]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Ensure possibly
	overflowing or underflowing operations take place with sign of
	result.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Likewise.
	* sysdeps/i386/fpu/e_powl.S (__ieee754_powl): Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Include <math.h>.
	(__ieee754_pow): Recompute overflowing and underflowing results in
	original rounding mode.
	* sysdeps/x86/fpu/powl_helper.c: Include <stdbool.h>.
	(__powl_helper): Allow negative argument X and scale negated value
	as needed.  Avoid passing value outside [-1, 1] to f2xm1.
	* sysdeps/x86_64/fpu/e_powl.S (__ieee754_powl): Ensure possibly
	overflowing or underflowing operations take place with sign of
	result.
	* sysdeps/x86_64/fpu/multiarch/e_pow.c [HAVE_FMA4_SUPPORT]:
	Include <math.h>.
	* math/auto-libm-test-in: Add more tests of pow.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (pow_test): Use ALL_RM_TEST.
	(pow_tonearest_test_data): Remove.
	(pow_test_tonearest): Likewise.
	(pow_towardzero_test_data): Likewise.
	(pow_test_towardzero): Likewise.
	(pow_downward_test_data): Likewise.
	(pow_test_downward): Likewise.
	(pow_upward_test_data): Likewise.
	(pow_test_upward): Likewise.
	(main): Don't call removed functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-06-23  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libm.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/localplt.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/c++-types.data:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/ld.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libBrokenLocale.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libanl.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libcrypt.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libdl.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libnsl.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libpthread.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libresolv.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/librt.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libthread_db.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libutil.abilist:
	File removed.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/ld.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libdl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libnsl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/librt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libc.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libm.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/libm.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/localplt.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/localplt.data:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libBrokenLocale-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libBrokenLocale-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libanl-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libanl-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libcrypt-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libcrypt-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libdl-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libdl-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libdl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libnsl-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libnsl-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libnsl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libpthread-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libpthread.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libresolv-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libresolv-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/librt-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/librt-le.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/librt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libthread_db-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libthread_db-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libutil-le.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libutil-le.abilist:
	... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/localplt.data:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/localplt.data: ... here.

2014-06-23  Will Newton  <will.newton@linaro.org>
	    Wilco  <wdijkstr@arm.com>

	* sysdeps/generic/math_private.h: Add generic HAVE_RM_CTX
	implementation.  Include get-rounding-mode.h.
	[!HAVE_RM_CTX]: Define HAVE_RM_CTX to zero.
	[!libc_feholdsetround_noex_ctx]: Define
	libc_feholdsetround_noex_ctx.
	[!libc_feholdsetround_noexf_ctx]: Define
	libc_feholdsetround_noexf_ctx.
	[!libc_feholdsetround_noexl_ctx]: Define
	libc_feholdsetround_noexl_ctx.
	(libc_feholdsetround_ctx): New function.
	(libc_feresetround_ctx): New function.
	(libc_feholdsetround_noex_ctx): New function.
	(libc_feresetround_noex_ctx): New function.

2014-06-23  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/mips/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/mips/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/mips/nptl/bits/semaphore.h: Moved ...
	* sysdeps/mips/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/mips/nptl/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/mips/bits/local_lim.h: ... here.

	* sysdeps/unix/sysv/linux/m68k/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/m68k/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/bits/semaphore.h: Moved ...
	* sysdeps/m68k/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/m68k/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/bits/atomic.h: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/bits/atomic.h: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/coldfire/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/coldfire/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/m68k/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/m68k/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/m680x0/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/m68k/m680x0/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/m68k/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/m68k/sysdep-cancel.h: ... here.

	* sysdeps/unix/sysv/linux/sh/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/sh/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/sh/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/sh/libutil.abilist: ... here.

2014-06-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h [__USE_GNU]
	(FALLOC_FL_COLLAPSE_RANGE): New macro.
	[__USE_GNU] (FALLOC_FL_ZERO_RANGE): Likewise.
	* sysdeps/unix/sysv/linux/bits/in.h (IP_PMTUDISC_OMIT): Likewise.
	(IPV6_PMTUDISC_INTERFACE): Likewise.
	(IPV6_PMTUDISC_OMIT): Likewise.

2014-06-23  Andreas Schwab  <schwab@suse.de>

	* nptl/sysdeps/unix/sysv/linux/mq_notify.c (init_mq_netlink):
	Remove unused errout label.

2014-06-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/bits/hwcap.h [PPC_FEATURE2_HAS_VEC_CRYPTO]: New
	macro: hardware supports Vector Crypto instructions.

2014-06-23  Will Newton  <will.newton@linaro.org>

	* elf/dl-lookup.c: Use __glibc_unlikely and __glibc_likely
	rather than __builtin_expect.

	* elf/dl-lookup.c (undefined_msg): Remove variable.
	(_dl_lookup_symbol_x): Replace undefined_msg with string
	literal.

	* elf/dl-lookup.c (do_lookup_unique): New function.
	(do_lookup_x): Move STB_GNU_UNIQUE handling code
	to a separate function.

2014-06-23  Andreas Schwab  <schwab@suse.de>

	[BZ #17079]
	* nss/nss_files/files-XXX.c (get_contents): Store overflow marker
	before reading the next line.

2014-06-23  Will Newton  <will.newton@linaro.org>

	* test-skeleton.c (signal_handler): Use printf and %m
	rather than perror.  Use printf rather than fprintf to
	stderr.  Use puts rather than fputs to stderr.
	(main): Likewise.

2014-06-22  Ludovic Court√®s  <ludo@gnu.org>

	* nscd/nscd.c (thread_info_t): Remove typedef.
	(thread_info): Remove variable.

2014-06-21  Allan McRae  <allan@archlinux.org>

	* NEWS: Mention CVE-2014-4043.

2014-06-20  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/smp.h: Moved ...
	* nptl/smp.h: ... here.

	* nptl/sysdeps/unix/sysv/linux/rtld-lowlevel.h: File removed.

	* include/libc-symbols.h (HAVE_CONFIG_H, STDC_HEADERS): New macros.
	* catgets/Makefile (catgets-CPPFLAGS): Remove -DHAVE_CONFIG_H.
	* locale/Makefile (CPPFLAGS-locale-programs): Likewise.
	* stdlib/strtol_l.c [_LIBC] (STDC_HEADERS): Don't define it.

	* nptl/allocatestack.c: Include <stack-aliasing.h>.
	* nptl/stack-aliasing.h: New file.
	* sysdeps/i386/i686/stack-aliasing.h: New file.
	* sysdeps/i386/i686/nptl/Makefile: File removed.
	* sysdeps/x86_64/stack-aliasing.h: New file.
	* sysdeps/x86_64/nptl/Makefile
	(CFLAGS-pthread_create.c): Variable removed.

	* nptl/sysdeps/unix/sysv/linux/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/bits/local_lim.h: ... here, replacing the
	old file.
	* nptl/sysdeps/unix/sysv/linux/bits/posix_opt.h: Moved ...
	* sysdeps/unix/sysv/linux/bits/posix_opt.h: ... here, replacing the
	old file.

2014-06-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_SIGFRAME_V2): Remove macro.
	* sysdeps/unix/sysv/linux/arm/sigrestorer.S: Update comment.
	[!__ASSUME_SIGFRAME_V2]: Remove conditional code.
	(__default_sa_restorer_v2): Rename to __default_sa_restorer.
	(__default_rt_sa_restorer_v2): Rename to __default_rt_sa_restorer.
	* sysdeps/unix/sysv/linux/arm/sigaction.c (__default_sa_restorer):
	Declare as function.  Remove conditional macro definitions.
	(__default_rt_sa_restorer): Likewise.
	(__default_sa_restorer_v1): Remove declaration.
	(__default_sa_restorer_v2): Likewise.
	(__default_rt_sa_restorer_v1): Likewise.
	(__default_rt_sa_restorer_v2): Likewise.
	* sysdeps/unix/sysv/linux/arm/Versions (GLIBC_PRIVATE): Remove
	__default_sa_restorer_v1, __default_rt_sa_restorer_v1,
	__default_sa_restorer_v2 and __default_rt_sa_restorer_v2.

2014-06-20  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/sparc/Makefile [$(subdir) = nptl]
	(libpthread-routines): Add sysdep.
	* nptl/sysdeps/unix/sysv/linux/sparc/Makefile: File removed.
	* sysdeps/unix/sysv/linux/sparc/Versions
	(libpthread: GLIBC_2.3.3): New version set.
	* nptl/sysdeps/unix/sysv/linux/sparc/Versions: File removed.
	* nptl/sysdeps/unix/sysv/linux/sparc/aio_cancel.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/aio_cancel.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/internaltypes.h: Moved ...
	* sysdeps/sparc/nptl/internaltypes.h: ... here.  Use #include_next.
	* nptl/sysdeps/unix/sysv/linux/sparc/pthread_barrier_destroy.c:
	Moved ...
	* sysdeps/sparc/nptl/pthread_barrier_destroy.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/pthread_barrier_init.c: Moved ...
	* sysdeps/sparc/nptl/pthread_barrier_init.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/pthread_barrier_wait.c: Moved ...
	* sysdeps/sparc/nptl/pthread_barrier_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sem_init.c: Moved ...
	* sysdeps/sparc/nptl/sem_init.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sem_post.c: Moved ...
	* sysdeps/sparc/nptl/sem_post.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sem_timedwait.c: Moved ...
	* sysdeps/sparc/nptl/sem_timedwait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sem_wait.c: Moved ...
	* sysdeps/sparc/nptl/sem_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/sparc/lowlevellock.h: ... here.
	* sysdeps/sparc/sparc32/sparcv9/Makefile [$(subdir) = nptl]
	(libpthread-routines): Add cpu_relax.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/Makefile:
	File removed.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Versions
	(librt: GLIBC_2.3.3): New version set.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/Versions: File removed.
	* sysdeps/sparc/sparc64/nptl/Makefile: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile [$(subdir) = nptl]
	(CFLAGS-pause.c, CFLAGS-sigsuspend.c): New variables.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/Makefile: File removed.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/lowlevellock.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/lowlevellock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/pthread_barrier_wait.c:
	Moved ...
	* sysdeps/sparc/sparc32/nptl/pthread_barrier_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sem_post.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/sem_post.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sem_timedwait.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/sem_timedwait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sem_trywait.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/sem_trywait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sem_wait.c: Moved ...
	* sysdeps/sparc/sparc32/nptl/sem_wait.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/cpu_relax.S:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/cpu_relax.S: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/pthread_barrier_wait.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_barrier_wait.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/sem_post.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_post.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/sem_timedwait.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_timedwait.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/sem_trywait.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_trywait.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/sem_wait.c:
	Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/sem_wait.c: ... here.
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/cpu_relax.S: Moved ...
	* sysdeps/sparc/sparc64/nptl/cpu_relax.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_create.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_delete.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_getoverr.c:
	Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_getoverr.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_gettime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/timer_settime.c: ... here.

2014-06-20  Joseph Myers  <joseph@codesourcery.com>

	* nptl/pthread_cond_wait.c: Include <kernel-features.h>.
	* nptl/pthread_rwlock_timedrdlock.c: Likewise.
	* nptl/pthread_rwlock_timedwrlock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/lowlevelrobustlock.c: Likewise.
	* nscd/nscd.c: Likewise.
	* sysdeps/i386/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/powerpc/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/sh/nptl/tcb-offsets.sym: Likewise.
	* sysdeps/x86_64/nptl/tcb-offsets.sym: Likewise.

	* nptl/sysdeps/unix/sysv/linux/mq_notify.c: Do not include
	<kernel-features.h>.
	(init_mq_netlink): Remove conditional have_sock_cloexec
	definitions.  Remove code conditional on have_sock_cloexec < 0.
	(init_mq_netlink) [!SOCK_CLOEXEC]: Remove conditional code.
	(init_mq_netlink) [!__ASSUME_SOCK_CLOEXEC]: Likewise.
	* sysdeps/unix/sysv/linux/opensock.c: Do not include
	<kernel-features.h>.
	(__opensock) [SOCK_CLOEXEC]: Make code unconditional.
	(__opensock) [!__ASSUME_SOCK_CLOEXEC]: Remove conditional code.

2014-06-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Add tests for memset_chk and memset.

	* sysdeps/x86_64/multiarch/init-arch.h (HAS_AVX2): Defined
	with AVX2_Usable.

2014-06-20  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #16046]
	* elf/tst-dl-iter-static.c: New file.
	* elf/Makefile (tests-static): Add tst-dl-iter-static.

	* stdlib/tst-qsort2.c (main): Fix off-by-one argc interpretation
	error.

2014-06-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_F_GETOWN_EX): Remove macro.
	* sysdeps/unix/sysv/linux/fcntl.c: Do not include
	<kernel-features.h>.
	(miss_F_GETOWN_EX): Remove variable or macro.
	(do_fcntl): Do not check miss_F_GETOWN_EX.
	(do_fcntl) [!__ASSUME_F_GETOWN_EX]: Remove conditional code.

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_AT_RANDOM):
	Remove macro.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard)
	[!__ASSUME_AT_RANDOM]: Remove conditional code.
	(_dl_setup_pointer_guard) [!__ASSUME_AT_RANDOM]: Likewise.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_ADJ_OFFSET_SS_READ): Remove macro.
	* sysdeps/unix/sysv/linux/adjtime.c (ADJTIME)
	[ADJ_OFFSET_SS_READ]: Make code unconditional.
	(ADJTIME) [!ADJ_OFFSET_SS_READ]: Remove conditional code.

2014-06-20  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #17075]
	* sysdeps/arm/dl-machine.h (elf_machine_rel) <R_ARM_TLS_DESC>:
	Fix calculation of the symbol's value.
	* sysdeps/arm/tst-armtlsdescloc.c: New file.
	* sysdeps/arm/tst-armtlsdesclocmod.c: New file.
	* sysdeps/arm/tst-armtlsdescextnow.c: New file.
	* sysdeps/arm/tst-armtlsdescextlazymod.c: New file.
	* sysdeps/arm/tst-armtlsdescextlazy.c: New file.
	* sysdeps/arm/tst-armtlsdescextnowmod.c: New file.
	* sysdeps/arm/Makefile (tests): Add `tst-armtlsdesc',
	`tst-armtlsdescextnow' and `tst-armtlsdescextlazy'.
	(modules-names): Add `tst-armtlsdescmod',
	`tst-armtlsdescextlazymod' and `tst-armtlsdescextnowmod'.
	(CPPFLAGS-tst-armtlsdescextnowmod.c): New variable.
	(CPPFLAGS-tst-armtlsdescextlazymod.c): Likewise.
	(CFLAGS-tst-armtlsdesclocmod.c): Likewise.
	(CFLAGS-tst-armtlsdescextnowmod.c): Likewise.
	(CFLAGS-tst-armtlsdescextlazymod.c): Likewise.
	(LDFLAGS-tst-armtlsdescextnowmod.so): Likewise.
	($(objpfx)tst-armtlsdescloc): New dependency.
	($(objpfx)tst-armtlsdescextnow): Likewise.
	($(objpfx)tst-armtlsdescextlazy): Likewise.
	* sysdeps/arm/configure.ac: Add a check for tools' GNU descriptor
	TLS scheme support.
	* sysdeps/arm/configure: Regenerate.

2014-06-20  Joseph Myers  <joseph@codesourcery.com>

	* include/fcntl.h (__atfct_seterrno): Remove prototype.
	(__atfct_seterrno_2): Likewise.
	* sysdeps/unix/sysv/linux/alpha/dl-fxstatat64.c: Do not include
	<kernel-features.h>.
	(__ASSUME_ATFCTS): Do not undefine and redefine.
	* sysdeps/unix/sysv/linux/alpha/fxstatat.c [__ASSUME_ATFCTS]
	(__have_atfcts): Remove conditional definition.
	(__fxstatat([__NR_fstatat64]: Make code unconditional.
	(__fxstatat) [!__ASSUME_ATFCTS]: Remove conditional code and code
	unreachable if [__ASSUME_ATFCTS].
	* sysdeps/unix/sysv/linux/dl-fxstatat64.c (__ASSUME_ATFCTS): Do
	not undefine and redefine.
	* sysdeps/unix/sysv/linux/faccessat.c: Do not include
	<kernel-features.h>.
	(faccessat) [__NR_faccessat]: Make code unconditional.
	(faccessat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/fchmodat.c: Do not include
	<kernel-features.h>.
	(fchmodat) [__NR_fchmodat]: Make code unconditional.
	(fchmodat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/fchownat.c: Do not include
	<kernel-features.h>.
	(fchownat) [__NR_fchownat]: Make code unconditional.
	(fchownat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/futimesat.c: Do not include
	<kernel-features.h>.
	(futimesat) [__NR_futimesat]: Make code unconditional.
	(futimesat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/fxstatat.c: Do not include
	<kernel-features.h>.
	(__fxstatat) [__NR_newfstatat]: Make code unconditional.
	(__fxstatat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/fxstatat64.c: Do not include
	<kernel-features.h>.
	(__fxstatat64) [__NR_fstatat64]: Make code unconditional.
	(__fxstatat64) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c: Do not include
	<kernel-features.h>.
	(__fxstatat) [__NR_fstatat64]: Make code unconditional.
	(__fxstatat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/linkat.c: Do not include
	<kernel-features.h>.
	(linkat) [__NR_linkat]: Make code unconditional.
	(linkat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/m68k/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/mips64/fxstatat64.c: Do not include
	<kernel-features.h>.
	(__fxstatat64) [__NR_newfstatat]: Make code unconditional.
	(__fxstatat64) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/mkdirat.c: Do not include
	<kernel-features.h>.
	(mkdirat) [__NR_mkdirat]: Make code unconditional.
	(mkdirat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/openat.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_ATFCTS] (__atfct_seterrno): Remove function.
	[!__ASSUME_ATFCTS] (__have_atfcts): Remove variable.
	(OPENAT_NOT_CANCEL) [__NR_openat]: Make code unconditional.
	(OPENAT_NOT_CANCEL) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/readlinkat.c: Do not include
	<kernel-features.h>.
	(readlinkat) [__NR_readlinkat]: Make code unconditional.
	(readlinkat) [!__ASSUME_ATFCTS]: Remove conditional code.  Return
	result of INLINE_SYSCALL directly, not via int variable.
	* sysdeps/unix/sysv/linux/renameat.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_ATFCTS] (__atfct_seterrno_2): Remove function.
	(renameat) [__NR_renameat]: Make code unconditional.
	(renameat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/sh/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/fchownat.c: Remove file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/dl-fxstatat64.c
	(__ASSUME_ATFCTS): Do not undefine and redefine.
	* sysdeps/unix/sysv/linux/symlinkat.c: Do not include
	<kernel-features.h>.
	(symlinkat) [__NR_symlinkat]: Make code unconditional.
	(symlinkat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/unlinkat.c: Do not include
	<kernel-features.h>.
	(unlinkat) [__NR_unlinkat]: Make code unconditional.
	(unlinkat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/wordsize-64/dl-fxstatat64.c
	(__ASSUME_ATFCTS): Do not undefine and redefine.
	* sysdeps/unix/sysv/linux/wordsize-64/fxstatat.c: Do not include
	<kernel-features.h>.
	(__fxstatat) [__NR_newfstatat]: Make code unconditional.
	(__fxstatat) [!__ASSUME_ATFCTS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/xmknodat.c: Do not include
	<kernel-features.h>.
	(__xmknodat) [__NR_mknodat]: Make code unconditional.
	(__xmknodat) [!__ASSUME_ATFCTS]: Remove conditional code.

2014-06-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/rtld-strlen.S: Removed.

2014-06-20  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #17069]
	* posix/regcomp.c (parse_reg_exp): Deallocate partially
	constructed tree before returning error.
	* posix/bug-regexp36.c: Expand test case.

2014-06-20  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #6803]
	* math/libm-test.inc (scalbln_test_date):
	Add errno expectations.
	* math/w_scalblnf.c: New File.
	Add wrapper which checks for setting errno to ERANGE.
	Add weak_alias for corresponding scalbln function.
	* math/w_scalbln.c: Likewise.
	* math/w_scalblnl.c: Likewise.
	* math/Makefile (libm-calls): Add w_scalbln.
	* sysdeps/ieee754/flt-32/s_scalblnf.c:
	Remove weak_alias for corresponding scalbln function.
	* sysdeps/ieee754/dbl-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/s_scalblnl.c: Likewise.
	* sysdeps/i386/fpu/s_scalbnf.S: Likewise.
	* sysdeps/i386/fpu/s_scalbn.S: Likewise.
	* sysdeps/i386/fpu/s_scalbnl.S: Likewise.
	* sysdeps/m68k/m680x0/fpu/s_scalbn.c: Likewise.
	* sysdeps/ieee754/ldbl-64-128/s_scalblnl.c:
	Remove long_double_symbol for scalblnl function in libm, libc.
	* sysdeps/ieee754/ldbl-64-128/w_scalblnl.c: New File.
	Add wrapper which checks for setting errno to ERANGE.
	Add long_double_symbol for scalblnl function in libm, libc.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c:
	Remove long_double_symbol for scalblnl in libm.
	* sysdeps/ieee754/ldbl-128ibm/w_scalblnl.c: New File.
	Add wrapper which checks for setting errno to ERANGE.
	Add long_double_symbol for scalblnl function in libm.
	* sysdeps/ia64/fpu/w_scalblnf.c: New File.
	Do not use wrapper because of own implementation.

2014-06-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/nptl/bits/pthreadtypes.h (pthread_rwlock_t): Use
	3 bytes for __pad1 for x32.
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Likewise.

2014-06-19  Ling Ma  <ling.ml@alibaba-inc.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile: Add memset-avx2.
	* sysdeps/x86_64/multiarch/memset-avx2.S: New file.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/rtld-memset.S: Likewise.

2014-06-19  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #17069]
	* posix/regcomp.c (parse_expression): Deallocate partially
	constructed tree before returning error.
	* posix/Makefile.c (tests): Add bug-regex36.
	(generated): Add bug-regex36.mtrace.
	(tests-special): Add $(objpfx)bug-regex36-mem.out
	(bug-regex36-ENV): New variable.
	($(objpfx)bug-regex36-mem.out): New rule.
	* posix/bug-regex36.c: New file.

2014-06-19  Will Newton  <will.newton@linaro.org>

	* malloc/malloc.c (systrim): If extra is zero then return
	early.

2014-06-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile ($(objpfx)bench-%.c): Remove $(.).

2014-06-19  Richard Earnshaw  <rearnsha@arm.com>

	* sysdeps/aarch64/strchr.S: New file.

2014-06-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17022]
	* sysdeps/i386/fpu/e_logl.S (__ieee754_logl): Do not subtract 1
	from arguments -2 or below.
	* sysdeps/i386/i686/fpu/e_logl.S (__ieee754_logl): Likewise.
	* sysdeps/x86_64/fpu/e_logl.S (__ieee754_logl): Likewise.

2014-06-18  Andreas Schwab  <schwab@suse.de>

	[BZ #17062]
	* posix/fnmatch_loop.c (FCT): Rerrange loop for skipping over rest
	of a bracket expr not to run off the end of the string.
	* posix/Makefile (tests): Add tst-fnmatch3.
	* posix/tst-fnmatch3.c: New file.

2014-06-18  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile ($(objpfx)tst-unused-dep.out): Use $(rtld-prefix).
	* iconvdata/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Likewise.
	* sysdeps/s390/s390-64/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Likewise.

2014-16-17  Rajalakshmi Srinivasaraghavan <raji@linux.vnet.ibm.com>

	[BZ #17031]
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Consider the low
	double, adjusted for any remainder from the high double.
	* math/libm-test.inc (nearbyint): Add tests.
	(rint): Likewise.

2014-06-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/powerpc/Makefile: Moved ...
	* sysdeps/powerpc/nptl/Makefile: ... here.
	* nptl/sysdeps/powerpc/pthread_spin_lock.c: Moved ...
	* sysdeps/powerpc/nptl/pthread_spin_lock.c: .. here.
	* nptl/sysdeps/powerpc/pthread_spin_trylock.c: Moved ...
	* sysdeps/powerpc/nptl/pthread_spin_trylock.c: ... here.
	* nptl/sysdeps/powerpc/pthreaddef.h: Moved ...
	* sysdeps/powerpc/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/powerpc/tcb-offsets.sym: Moved ...
	* sysdeps/powerpc/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/powerpc/tls.h: Moved ...
	* sysdeps/powerpc/nptl/tls.h: ... here.

2014-06-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16681]
	* sysdeps/i386/fpu/s_ceil.S (__ceil): Add CFI.
	* sysdeps/i386/fpu/s_ceilf.S (__ceilf): Likewise.
	* sysdeps/i386/fpu/s_ceill.S (__ceill): Likewise.
	* sysdeps/i386/fpu/s_floor.S (__floor): Likewise.
	* sysdeps/i386/fpu/s_floorf.S (__floorf): Likewise.
	* sysdeps/i386/fpu/s_floorl.S (__floorl): Likewise.
	* sysdeps/i386/fpu/s_trunc.S (__trunc): Likewise.
	* sysdeps/i386/fpu/s_truncf.S (__truncf): Likewise.
	* sysdeps/i386/fpu/s_truncl.S (__truncl): Likewise.

2014-06-17  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/m680x0/fpu/libm-test-ulps: Update.

2014-06-16  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/m680x0/bits/huge_vall.h: Fix missing space after
	defined operator.

	* scripts/cross-test-ssh.sh (timeoutfactor): Default to
	$TIMEOUTFACTOR.

2014-06-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #17058]
	* nptl/tst-setuid2.c (do_test): Fix tautological comparison in
	non-executed part of the test.

2014-06-16  Andreas Schwab  <schwab@suse.de>

	* string/bits/string2.h (strdup, strndup): Update feature guard.

2014-06-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2014-06-14  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/m68k/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/m68k/nptl/clone.S: Remove file.

	* sysdeps/unix/sysv/linux/m68k/pt-vfork.c: New file.
	* sysdeps/unix/sysv/linux/m68k/nptl/pt-vfork.S: Remove file.
	* sysdeps/unix/sysv/linux/m68k/vfork.S: Include <tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* sysdeps/unix/sysv/linux/m68k/nptl/vfork.S: Remove file.

2014-06-14 Andi Kleen  <ak@linux.intel.com>

	* sysdeps/generic/elide.h: New file.

2014-06-13  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* Makefile (installed-headers): Adjust path of pthread.h header.

2014-06-13  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/s390/bits/pthreadtypes.h: Moved ...
	* sysdeps/s390/nptl/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/bits/semaphore.h: Moved ...
	* sysdeps/s390/nptl/bits/semaphore.h: ... here.

	* nptl/sysdeps/s390/Makefile: Moved ...
	* sysdeps/s390/nptl/Makefile: ... here.
	* nptl/sysdeps/s390/pthread_spin_init.c: Moved ...
	* sysdeps/s390/nptl/pthread_spin_init.c: ... here.
	* nptl/sysdeps/s390/pthread_spin_lock.c: Moved ...
	* sysdeps/s390/nptl/pthread_spin_lock.c: ... here.
	* nptl/sysdeps/s390/pthread_spin_trylock.c: Moved ...
	* sysdeps/s390/nptl/pthread_spin_trylock.c: ... here.
	* nptl/sysdeps/s390/pthread_spin_unlock.c: Moved ...
	* sysdeps/s390/nptl/pthread_spin_unlock.c: ... here.
	* nptl/sysdeps/s390/pthreaddef.h: Moved ...
	* sysdeps/s390/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/s390/tcb-offsets.sym: Moved ...
	* sysdeps/s390/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/s390/tls.h: Moved ...
	* sysdeps/s390/nptl/tls.h: ... here.

	* sysdeps/unix/sysv/linux/s390/arch-fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/s390/fork.c: File removed.

2014-06-13  David S. Miller  <davem@davemloft.net>

	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/clone.S: Delete.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/pt-vfork.S: Delete.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc32/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/vfork.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/clone.S: Delete.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/pt-vfork.S: Delete.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/vfork.S: ... here.
	* sysdeps/unix/sysv/linux/sparc/fork.S: Delete.
	* sysdeps/unix/sysv/linux/sparc/pt-vfork.S: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/clone.S (__thread_start):
	Remove RESET_PID cpp guards.
	* sysdeps/unix/sysv/linux/sparc/sparc64/clone.S (__thread_start):
	Remove RESET_PID cpp guards.
	* sysdeps/unix/sysv/linux/sparc/vfork.S: Delete.

2014-06-13  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k/jmpbuf-unwind.h (_JMPBUF_UNWINDS, _jmpbuf_sp): Cast
	__sp to uintptr_t.

2014-06-13  Andi Kleen  <ak@linux.intel.com>

	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_rdlock.S: Remove.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedrdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedwrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_unlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_wrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_rdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedrdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedwrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_unlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_wrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_rdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedrdlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedwrlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_unlock.S: dito.
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_wrlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_rdlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedrdlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedwrlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_unlock.S: dito.
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_wrlock.S: dito.

	* nptl/pthread_rwlock_rdlock.c: Include elide.h.
	(pthread_rwlock_rdlock): Add elision.
	* nptl/pthread_rwlock_wrlock.c: Include elide.h.
	(pthread_rwlock_wrlock): Add elision.
	* nptl/pthread_rwlock_trywrlock.c: Include elide.h.
	(pthread_rwlock_trywrlock): Add elision.
	* nptl/pthread_rwlock_tryrdlock.c: Include elide.h.
	(pthread_rwlock_tryrdlock): Add elision.
	* nptl/pthread_rwlock_unlock.c: Include elide.h.
	(pthread_rwlock_tryrdlock): Add elision unlock.
	* nptl/sysdeps/pthread/pthread.h:
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Handle new define
	(PTHREAD_RWLOCK_INITIALIZER,
	PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP):
	Handle new elision field.
	* sysdeps/x86/nptl/elide.h: New file. Add generic elision macros.
	* sysdeps/arm/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/sh/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/tile/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/a/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/hppa/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/ia64/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/m68k/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/microblaze/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/mips/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/powerpc/nptl/bits/pthreadtypes.h
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.
	* sysdeps/unix/sysv/linux/x86/elision-conf.c:
	(elision_init): Set try_xbegin to zero when no RTM.
	* sysdeps/x86/nptl/bits/pthreadtypes.h
	(pthread_rwlock_t): Change __pad1 to __rwelision.
	(__PTHREAD_RWLOCK_ELISION_EXTRA): Add.

2014-06-13  Andi Kleen  <ak@linux.intel.com>

	* nptl/pthread_rwlock_rdlock (__pthread_rwlock_rdlock):
	Split into __do_pthread_rwlock_rdlock and __pthread_rwlock_rdlock.
	* nptl/pthread_rwlock_wrlock (__pthread_rwlock_wrlock):
	Split into __do_pthread_rwlock_wrlock and __pthread_wrlock_rdlock.

2014-06-13  Meador Inge  <meadori@codesourcery.com>

	[BZ #16996]
	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Ensure
	that the cached result has been set before returning it.

2014-06-12  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/sparc/bits/pthreadtypes.h: Moved ...
	* sysdeps/sparc/nptl/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/bits/semaphore.h: Moved ...
	* sysdeps/sparc/nptl/bits/semaphore.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/sparc/bits/local_lim.h: ... here.

	* nptl/sysdeps/sparc/Makefile: Moved ...
	* sysdeps/sparc/nptl/Makefile: ... here.
	* nptl/sysdeps/sparc/tcb-offsets.sym: Moved ...
	* sysdeps/sparc/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/sparc/tls.h: Moved ...
	* sysdeps/sparc/nptl/tls.h: ... here.
	* nptl/sysdeps/sparc/sparc32/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc32/nptl/pthread_spin_lock.S: ... here.
	* nptl/sysdeps/sparc/sparc32/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc32/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/sparc/sparc32/pthreaddef.h: Moved ...
	* sysdeps/sparc/sparc32/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_init.c: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthread_spin_init.c: ... here.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthread_spin_lock.S: ... here.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_unlock.S: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthread_spin_unlock.S: ... here.
	* nptl/sysdeps/sparc/sparc64/pthreaddef.h: Moved ...
	* sysdeps/sparc/sparc64/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/sparc/sparc32/sparcv9/pthread_spin_init.c: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_init.c: ... here.
	Update #include.
	* nptl/sysdeps/sparc/sparc32/sparcv9/pthread_spin_lock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_lock.S: ... here.
	Update #include.
	* nptl/sysdeps/sparc/sparc32/sparcv9/pthread_spin_trylock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_trylock.S: ... here.
	Update #include.
	* nptl/sysdeps/sparc/sparc32/sparcv9/pthread_spin_unlock.S: Moved ...
	* sysdeps/sparc/sparc32/sparcv9/nptl/pthread_spin_unlock.S: ... here.
	Update #include.

	* nptl/sysdeps/sparc/tls.h (TLS_DEFINE_INIT_TP): New macro.

	* sysdeps/unix/sysv/linux/sparc/arch-fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/sparc/fork.c: File removed.

	* sysdeps/pthread/posix-timer.h: Include <list.h>.
	(struct list_links): Type removed.
	(struct thread_node, struct timer_node): Replace struct list_links
	with struct list_head.
	(list_unlink_ip): Likewise.
	* sysdeps/pthread/timer_routines.c
	(timer_free_list, thread_free_list, thread_active_list): Likewise.
	(list_append, list_insbefore): Likewise.
	(list_init): Function removed.
	(thread_init, init_module): Use INIT_LIST_HEAD instead.
	* sysdeps/nptl/Makefile: Move tst-timer bits to ...
	* sysdeps/pthread/Makefile: ... here, new file.

	* nptl/sysdeps/unix/sysv/linux/Implies: Moved ...
	* sysdeps/nptl/Implies: ... here.
	* sysdeps/unix/sysv/linux/Implies: Add nptl.
	* nptl/sysdeps/pthread/list.h: Moved ...
	* include/list.h: ... here.
	* nptl/sysdeps/pthread/createthread.c: Moved ...
	* nptl/createthread.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/createthread.c: Update #include.
	* nptl/sysdeps/pthread/pt-longjmp.c: Moved ...
	* nptl/pt-longjmp.c: ... here.
	* nptl/sysdeps/pthread/Makefile: Moved ...
	* sysdeps/nptl/Makefile: ... here.
	* nptl/sysdeps/pthread/Subdirs: Moved ...
	* sysdeps/nptl/Subdirs: ... here.
	* nptl/sysdeps/pthread/aio_misc.h: Moved ...
	* sysdeps/nptl/aio_misc.h: ... here.
	* nptl/sysdeps/pthread/bits/libc-lock.h: Moved ...
	* sysdeps/nptl/bits/libc-lock.h: ... here.
	* nptl/sysdeps/pthread/bits/libc-lockP.h: Moved ...
	* sysdeps/nptl/bits/libc-lockP.h: ... here.
	* nptl/sysdeps/pthread/bits/stdio-lock.h: Moved ...
	* sysdeps/nptl/bits/stdio-lock.h: ... here.
	* nptl/sysdeps/pthread/configure: Moved ...
	* sysdeps/nptl/configure: ... here.
	* nptl/sysdeps/pthread/configure.ac: Moved ...
	* sysdeps/nptl/configure.ac: ... here.
	* nptl/sysdeps/pthread/gai_misc.h: Moved ...
	* sysdeps/nptl/gai_misc.h: ... here.
	* nptl/sysdeps/pthread/librt-cancellation.c: Moved ...
	* sysdeps/nptl/librt-cancellation.c: ... here.
	* nptl/sysdeps/pthread/malloc-machine.h: Moved ...
	* sysdeps/nptl/malloc-machine.h: ... here.
	* nptl/sysdeps/pthread/pthread-functions.h: Moved ...
	* sysdeps/nptl/pthread-functions.h: ... here.
	* nptl/sysdeps/pthread/pthread.h: Moved ...
	* sysdeps/nptl/pthread.h: ... here.
	* nptl/sysdeps/pthread/setxid.h: Moved ...
	* sysdeps/nptl/setxid.h: ... here.
	* nptl/sysdeps/pthread/sigfillset.c: Moved ...
	* sysdeps/nptl/sigfillset.c: ... here.
	* nptl/sysdeps/pthread/tcb-offsets.h: Moved ...
	* sysdeps/nptl/tcb-offsets.h: ... here.
	* nptl/sysdeps/pthread/tst-mqueue8x.c: Moved ...
	* sysdeps/nptl/tst-mqueue8x.c: ... here.
	* nptl/sysdeps/pthread/unwind-forcedunwind.c: Moved ...
	* sysdeps/nptl/unwind-forcedunwind.c: ... here.
	* nptl/sysdeps/pthread/allocalim.h: Moved ...
	* sysdeps/pthread/allocalim.h: ... here.
	* nptl/sysdeps/pthread/bits/sigthread.h: Moved ...
	* sysdeps/pthread/bits/sigthread.h: ... here.
	* nptl/sysdeps/pthread/flockfile.c: Moved ...
	* sysdeps/pthread/flockfile.c: ... here.
	* nptl/sysdeps/pthread/ftrylockfile.c: Moved ...
	* sysdeps/pthread/ftrylockfile.c: ... here.
	* nptl/sysdeps/pthread/funlockfile.c: Moved ...
	* sysdeps/pthread/funlockfile.c: ... here.
	* nptl/sysdeps/pthread/posix-timer.h: Moved ...
	* sysdeps/pthread/posix-timer.h: ... here.
	* nptl/sysdeps/pthread/timer_create.c: Moved ...
	* sysdeps/pthread/timer_create.c: ... here.
	* nptl/sysdeps/pthread/timer_delete.c: Moved ...
	* sysdeps/pthread/timer_delete.c: ... here.
	* nptl/sysdeps/pthread/timer_getoverr.c: Moved ...
	* sysdeps/pthread/timer_getoverr.c: ... here.
	* nptl/sysdeps/pthread/timer_gettime.c: Moved ...
	* sysdeps/pthread/timer_gettime.c: ... here.
	* nptl/sysdeps/pthread/timer_routines.c: Moved ...
	* sysdeps/pthread/timer_routines.c: ... here.
	* nptl/sysdeps/pthread/timer_settime.c: Moved ...
	* sysdeps/pthread/timer_settime.c: ... here.
	* nptl/sysdeps/pthread/tst-timer.c: Moved ...
	* sysdeps/pthread/tst-timer.c: ... here.
	* nptl/sysdeps/pthread/pthread_sigmask.c: Moved ...
	* sysdeps/unix/sysv/linux/pthread_sigmask.c: ... here.

	* sysdeps/unix/sysv/linux/sigprocmask.c: Include <nptl/pthreadP.h>.
	* nptl/sysdeps/pthread/sigprocmask.c: File removed.

	* nptl/sysdeps/i386/i486/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i486/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/i386/i586/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i586/nptl/pthread_spin_trylock.S: ... here.
	Update #include target.
	* nptl/sysdeps/i386/i686/Makefile: Moved ...
	* sysdeps/i386/i686/nptl/Makefile: ... here.
	* nptl/sysdeps/i386/i686/pthread_spin_trylock.S: Moved ...
	* sysdeps/i386/i686/nptl/pthread_spin_trylock.S: ... here.
	Update #include target.
	* nptl/sysdeps/i386/i686/tls.h: Moved ...
	* sysdeps/i386/i686/nptl/tls.h: ... here.  Use #include_next.
	* nptl/sysdeps/i386/Makefile: Moved ...
	* sysdeps/i386/nptl/Makefile: ... here.
	* nptl/sysdeps/i386/pthread_spin_init.c: Moved ...
	* sysdeps/i386/nptl/pthread_spin_init.c: ... here.
	* sysdeps/x86_64/nptl/pthread_spin_init.c: Update #include target.
	* nptl/sysdeps/i386/pthread_spin_lock.S: Moved ...
	* sysdeps/i386/nptl/pthread_spin_lock.S: ... here.
	* nptl/sysdeps/i386/pthread_spin_unlock.S: Moved ...
	* sysdeps/i386/nptl/pthread_spin_unlock.S: ... here.
	* nptl/sysdeps/i386/pthreaddef.h: Moved ...
	* sysdeps/i386/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/i386/tcb-offsets.sym: Moved ...
	* sysdeps/i386/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/i386/tls.h: Moved ...
	* sysdeps/i386/nptl/tls.h: ... here.

	* sysdeps/sh/Makefile [$(subdir) = csu]
	(gen-as-const-headers): Add tcb-offsets.sym.
	* nptl/sysdeps/sh/Makefile: File removed.
	* nptl/sysdeps/sh/pthread_spin_init.c: Moved ...
	* sysdeps/sh/nptl/pthread_spin_init.c: ... here.
	* nptl/sysdeps/sh/pthread_spin_lock.c: Moved ...
	* sysdeps/sh/nptl/pthread_spin_lock.c: ... here.
	* nptl/sysdeps/sh/pthread_spin_trylock.S: Moved ...
	* sysdeps/sh/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/sh/pthread_spin_unlock.S: Moved ...
	* sysdeps/sh/nptl/pthread_spin_unlock.S: ... here.
	* nptl/sysdeps/sh/pthreaddef.h: Moved ...
	* sysdeps/sh/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/sh/tcb-offsets.sym: Moved ...
	* sysdeps/sh/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/sh/tls.h: Moved ...
	* sysdeps/sh/nptl/tls.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/lowlevel-atomic.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/lowlevel-atomic.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_barrier_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_cond_broadcast.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_cond_signal.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_cond_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_once.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_once.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_rdlock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedrdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_timedwrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_unlock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/pthread_rwlock_wrlock.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sh4/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/sh4/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/smp.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/smp.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/sh/sysdep-cancel.h: ... here.

2014-06-12  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* posix/spawn_faction_addopen.c: Include string.h.

2014-06-11  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/x86_64/64/shlib-versions: Moved ...
	* sysdeps/x86_64/64/nptl/shlib-versions: ... here.
	* nptl/sysdeps/x86_64/Makefile: Moved ...
	* sysdeps/x86_64/nptl/Makefile: ... here.
	* nptl/sysdeps/x86_64/configure: Moved ...
	* sysdeps/x86_64/nptl/configure: ... here.
	* nptl/sysdeps/x86_64/configure.ac: Moved ...
	* sysdeps/x86_64/nptl/configure.ac: ... here.
	* nptl/sysdeps/x86_64/pthread_spin_init.c: Moved ...
	* sysdeps/x86_64/nptl/pthread_spin_init.c: ... here.
	* nptl/sysdeps/x86_64/pthread_spin_lock.S: Moved ...
	* sysdeps/x86_64/nptl/pthread_spin_lock.S: ... here.
	* nptl/sysdeps/x86_64/pthread_spin_trylock.S: Moved ...
	* sysdeps/x86_64/nptl/pthread_spin_trylock.S: ... here.
	* nptl/sysdeps/x86_64/pthread_spin_unlock.S: Moved ...
	* sysdeps/x86_64/nptl/pthread_spin_unlock.S: ... here.
	* nptl/sysdeps/x86_64/pthreaddef.h: Moved ...
	* sysdeps/x86_64/nptl/pthreaddef.h: ... here.
	* nptl/sysdeps/x86_64/tcb-offsets.sym: Moved ...
	* sysdeps/x86_64/nptl/tcb-offsets.sym: ... here.
	* nptl/sysdeps/x86_64/tls.h: Moved ...
	* sysdeps/x86_64/nptl/tls.h: ... here.
	* nptl/sysdeps/x86_64/x32/shlib-versions: Moved ...
	* sysdeps/x86_64/x32/nptl/shlib-versions: ... here.
	* nptl/sysdeps/x86_64/x32/tls.h: Moved ...
	* sysdeps/x86_64/x32/nptl/tls.h: ... here.

	* sysdeps/x86_64/x32/nptl/tls.h: Use #include_next.

2014-06-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-06-11  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/sys/mman.h-data [POSIX] (size_t): Do not require
	type.
	[POSIX] (off_t): Likewise.
	* conform/data/sys/stat.h-data (S_IRGRP): Require constant.
	[POSIX] (S_ISBLK): Require macro.
	[POSIX] (S_ISCHR): Likewise.
	[POSIX] (S_ISDIR): Likewise.
	[POSIX] (S_ISFIFO): Likewise.
	[POSIX] (S_ISREG): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (S_TYPEISTMO): Do not list
	optional-macro.
	* conform/data/sys/types.h-data [POSIX] (blkcnt_t): Do not require
	type.
	[POSIX] (time_t): Likewise.
	[POSIX] (timer_t): Likewise.

2014-06-11  Florian Weimer  <fweimer@redhat.com>

	[BZ #17048]
	* posix/spawn_int.h (struct __spawn_action): Make the path string
	non-const to support deallocation.
	* posix/spawn_faction_addopen.c
	(posix_spawn_file_actions_addopen): Make a copy of the pathname.
	* posix/spawn_faction_destroy.c
	(posix_spawn_file_actions_destroy): Adjust comment.  Deallocate
	path in all spawn_do_open actions.
	* posix/tst-spawn.c (do_test): Exercise the copy operation in
	posix_spawn_file_actions_addopen.

2014-06-11  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/tile/pt-vfork.c: New file.
	* sysdeps/unix/sysv/linux/tile/pt-vfork.S: Remove file.
	* sysdeps/unix/sysv/linux/tile/vfork.S (__vfork): Make PT_VFORK
	conditional code always true.
	(__libc_vfork): New alias.

2014-06-11  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/tile/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/tile/createthread.c: File removed.

	* nptl/sysdeps/s390/tls.h (TLS_DEFINE_INIT_TP): New macro.

	* sysdeps/alpha/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/alpha/createthread.c: File removed.

	* nptl/sysdeps/powerpc/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/powerpc/createthread.c: File removed.

	* sysdeps/aarch64/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/aarch64/nptl/createthread.c: File removed.

2014-06-11  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strcmp.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp.c: New file:
	multiarch strcmp for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcmp-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcmp
	multiarch optimizations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.

2014-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/scripts/validate_benchout.py: New script.
	* benchtests/Makefile (bench-func): Call it.
	* benchtests/scripts/benchout.schema.json: New file.

2014-06-10  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/tile/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/tile/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/bits/semaphore.h: Moved ...
	* sysdeps/tile/nptl/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/Makefile: Removed, merged into ...
	* sysdeps/unix/sysv/linux/tile/Makefile: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/clone.S: Moved ...
	* sysdeps/unix/sysv/linux/tile/clone.S: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/tile/createthread.c: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/tile/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/pt-vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/tile/pt-vfork.S: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/tile/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/c++-types.data:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/ld.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libanl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libcrypt.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libdl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libdl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libm.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libnsl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libnsl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libpthread.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libresolv.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/librt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx32/libutil.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/c++-types.data:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/c++-types.data:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/ld.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libanl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libanl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libc.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libcrypt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libcrypt.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libdl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libm.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libnsl.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libnsl.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libpthread.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libresolv.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/librt.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libthread_db.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/nptl/libutil.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilegx/tilegx64/libutil.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libBrokenLocale.abilist:
	... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libpthread.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libresolv.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/tilepro/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/tile/tilepro/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/tile/vfork.S: ... here.
	* sysdeps/unix/sysv/linux/tile/nptl/waitpid.S: Moved ...
	* sysdeps/unix/sysv/linux/tile/waitpid.S: ... here.

2014-06-10  Wilco  <wdijkstr@arm.com>

	* math/test-fenv-return.c: New file.
	* math/Makefile: Add new test test-fenv-return.

2014-06-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #17042]
	* sysdeps/i386/fpu/e_log2.S (__ieee754_log2): Take absolete value
	when x - 1 is zero.
	* sysdeps/i386/fpu/e_log2f.S (__ieee754_log2f): Likewise.
	* sysdeps/i386/fpu/e_log2l.S (__ieee754_log2l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c (__ieee754_log2l): Return
	0.0L for an argument of 1.0L.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c (__ieee754_log2l):
	Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S (__ieee754_log2l): Take absolute
	value when x - 1 is zero.
	* math/libm-test.inc (log2_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-06-09  Bernard Ogden  <bernie.ogden@linaro.org>

	[BZ #15119]
	* ports/sysdeps/unix/sysv/linux/hppa/nptl/lowlevellock.c: Remove file.

2014-06-09  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/sh/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* nptl/sysdeps/unix/sysv/linux/sh/createthread.c: File removed.

2014-06-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/m68k/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/m68k/nptl/createthread.c: File removed.

	* sysdeps/hppa/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/hppa/nptl/createthread.c: File removed.

	* sysdeps/mips/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/mips/nptl/createthread.c: File removed.

	* sysdeps/arm/nptl/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/arm/createthread.c: File removed.

	* nptl/sysdeps/pthread/createthread.c (TLS_DEFINE_INIT_TP): New macro,
	if not already defined.
	(do_clone): Use that in place of PREPARE_CREATE and TLS_VALUE.
	* nptl/sysdeps/x86_64/tls.h (TLS_DEFINE_INIT_TP): New macro.
	* nptl/sysdeps/i386/tls.h (tls_fill_user_desc): New function.
	(TLS_INIT_TP): Use it.
	(TLS_DEFINE_INIT_TP): New macro.
	* sysdeps/unix/sysv/linux/i386/createthread.c: File removed.

2014-06-09  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/termios.h-data [POSIX] (IUCLC): Do not expect
	constant.
	[POSIX] (IXANY): Likewise.
	[POSIX] (OLCUC): Likewise.
	[POSIX || POSIX2008] (CBAUD): Do not allow.
	[POSIX || POSIX2008] (DEFECHO): Likewise.
	[POSIX || POSIX2008] (ECHOCTL): Likewise.
	[POSIX || POSIX2008] (ECHOKE): Likewise.
	[POSIX || POSIX2008] (ECHOPRT): Likewise.
	[POSIX || POSIX2008] (EXTA): Likewise.
	[POSIX || POSIX2008] (EXTB): Likewise.
	[POSIX || POSIX2008] (FLUSHO): Likewise.
	[POSIX || POSIX2008] (LOBLK): Likewise.
	[POSIX || POSIX2008] (PENDIN): Likewise.
	[POSIX || POSIX2008] (SWTCH): Likewise.
	[POSIX || POSIX2008] (VDISCARD): Likewise.
	[POSIX || POSIX2008] (VDSUSP): Likewise.
	[POSIX || POSIX2008] (VLNEXT): Likewise.
	[POSIX || POSIX2008] (VREPRINT): Likewise.
	[POSIX || POSIX2008] (VSTATUS): Likewise.
	[POSIX || POSIX2008] (VWERASE): Likewise.
	(B*): Change to B[0123456789]*.
	* conform/data/time.h-data [POSIX || UNIX98]
	(CLOCK_PROCESS_CPUTIME_ID): Do not expect constant.
	[POSIX || UNIX98] (CLOCK_THREAD_CPUTIME_ID): Likewise.
	[POSIX || UNIX98] (CLOCK_MONOTONIC): Likewise.
	[POSIX] (tm_*): Do not allow.

2014-06-07  Joseph Myers  <joseph@codesourcery.com>

	* Makefile (install): Don't set LANGUAGE.
	* Makefile.in (install): Likewise.
	* assert/Makefile (test-assert-ENV): Remove variable.
	(test-assert-perr-ENV): Likewise.
	* elf/Makefile (neededtest4-ENV): Likewise.
	* iconvdata/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Don't set LANGUAGE.
	* io/ftwtest-sh (LANG): Remove variable.
	* libio/Makefile (tst-widetext-ENV): Likewise.
	* manual/install.texi (Running make install): Don't refer to
	environment settings for make install.
	* INSTALL: Regenerated.
	* nptl/tst-tls6.sh: Don't set LANG.
	* posix/globtest.sh (LANG): Remove variable.
	* string/Makefile (tester-ENV): Likewise.
	(inl-tester-ENV): Likewise.
	(noinl-tester-ENV): Likewise.
	* sysdeps/s390/s390-64/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Don't set LANGUAGE.
	* timezone/Makefile (build-testdata): Use $(built-program-cmd)
	without explicit environment settings.

2014-06-06  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/sh/bits/pthreadtypes.h: Moved ...
	* sysdeps/sh/nptl/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sh/bits/semaphore.h: Moved ...
	* sysdeps/sh/nptl/bits/semaphore.h: ... here.

2014-06-06  Chris Metcalf  <cmetcalf@tilera.com>

	* crypt/crypt-private.h [DOS]: Add some includes taken from the
	other files in the crypt directory.
	* crypt/crypt.c: Remove duplicate includes.
	* crypt/crypt-entry.c: Likewise.
	* crypt/crypt_util.c: Likewise.

2014-06-06  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (run-program-env): New variable.
	(run-program-prefix-before-env): Likewise.
	(run-program-prefix-after-env): Likewise.
	(run-program-prefix): Define in terms of new variables.
	(built-program-cmd-before-env): New variable.
	(built-program-cmd-after-env): Likewise.
	(built-program-cmd): Define in terms of new variables.
	(test-program-prefix-before-env): New variable.
	(test-program-prefix-after-env): Likewise.
	(test-program-prefix): Define in terms of new variables.
	(test-program-cmd-before-env): New variable.
	(test-program-cmd-after-env): Likewise.
	(test-program-cmd): Define in terms of new variables.
	* Rules (make-test-out): Use $(run-program-env).
	* scripts/cross-test-ssh.sh (env_blacklist): Remove variable.
	(help): Do not mention environment variables.  Mention
	--timeoutfactor option.
	(timeoutfactor): New variable.
	(blacklist_exports): Remove function.
	(exports): Remove variable.
	(command): Do not include ${exports}.
	* manual/install.texi (Configuring and compiling): Do not mention
	test wrappers preserving environment variables.  Mention that last
	assignment to a variable must take precedence.
	* INSTALL: Regenerated.
	* benchtests/Makefile (run-bench): Use $(run-program-env).
	* catgets/Makefile ($(objpfx)test1.cat): Use
	$(built-program-cmd-before-env), $(run-program-env) and
	$(built-program-cmd-after-env).
	($(objpfx)test2.cat): Do not specify environment variables
	explicitly.
	($(objpfx)de/libc.cat): Use $(built-program-cmd-before-env),
	$(run-program-env) and $(built-program-cmd-after-env).
	($(objpfx)test-gencat.out): Use $(test-program-cmd-before-env),
	$(run-program-env) and $(test-program-cmd-after-env).
	($(objpfx)sample.SJIS.cat): Do not specify environment variables
	explicitly.
	* catgets/test-gencat.sh: Use test_program_cmd_before_env,
	run_program_env and test_program_cmd_after_env arguments.
	* elf/Makefile ($(objpfx)tst-pathopt.out): Use $(run-program-env).
	* elf/tst-pathopt.sh: Use run_program_env argument.
	* iconvdata/Makefile ($(objpfx)iconv-test.out): Use
	$(test-wrapper-env) and $(run-program-env).
	* iconvdata/run-iconv-test.sh: Use test_wrapper_env and
	run_program_env arguments.
	* iconvdata/tst-table.sh: Do not set GCONV_PATH explicitly.
	* intl/Makefile ($(objpfx)tst-gettext.out): Use
	$(test-program-prefix-before-env), $(run-program-env) and
	$(test-program-prefix-after-env).
	($(objpfx)tst-gettext2.out): Likewise.
	* intl/tst-gettext.sh: Use test_program_prefix_before_env,
	run_program_env and test_program_prefix_after_env arguments.
	* intl/tst-gettext2.sh: Likewise.
	* intl/tst-gettext4.sh: Do not set environment variables
	explicitly.
	* intl/tst-gettext6.sh: Likewise.
	* intl/tst-translit.sh: Likewise.
	* malloc/Makefile ($(objpfx)tst-mtrace.out): Use
	$(test-program-prefix-before-env), $(run-program-env) and
	$(test-program-prefix-after-env).
	* malloc/tst-mtrace.sh: Use test_program_prefix_before_env,
	run_program_env and test_program_prefix_after_env arguments.
	* math/Makefile (run-regen-ulps): Use $(run-program-env).
	* nptl/Makefile ($(objpfx)tst-tls6.out): Use $(run-program-env).
	* nptl/tst-tls6.sh: Use run_program_env argument.  Set LANG=C
	explicitly with each use of ${test_wrapper_env}.
	* posix/Makefile ($(objpfx)wordexp-tst.out): Use
	$(test-program-prefix-before-env), $(run-program-env) and
	$(test-program-prefix-after-env).
	* posix/tst-getconf.sh: Do not set environment variables
	explicitly.
	* posix/wordexp-tst.sh: Use test_program_prefix_before_env,
	run_program_env and test_program_prefix_after_env arguments.
	* stdio-common/tst-printf.sh: Do not set environment variables
	explicitly.
	* stdlib/Makefile ($(objpfx)tst-fmtmsg.out): Use
	$(test-program-prefix-before-env), $(run-program-env) and
	$(test-program-prefix-after-env).
	* stdlib/tst-fmtmsg.sh: Use test_program_prefix_before_env,
	run_program_env and test_program_prefix_after_env arguments.
	Split $test calls into $test_pre and $test.
	* timezone/Makefile (build-testdata): Use
	$(built-program-cmd-before-env), $(run-program-env) and
	$(built-program-cmd-after-env).

2014-06-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strncat.S [STRLEN]: Define it as
	strlen for non SHARED builds.

2014-06-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nptl/allocatestack.c (check_list): Inlined function...
	(__reclaim_stacks): ... here.

2014-06-05  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15698]
	* sysdeps/unix/sysv/linux/ifaddrs.c (getifaddrs_internal): Fix
	memory overrun.

2014-06-05  Joseph Myers  <joseph@codesourcery.com>

	* Rules (make-test-out): Include
	LOCPATH=$(common-objpfx)localedata in default environment.
	* debug/Makefile (tst-chk1-ENV): Remove variable.
	(tst-chk2-ENV): Likewise.
	(tst-chk3-ENV): Likewise.
	(tst-chk4-ENV): Likewise.
	(tst-chk5-ENV): Likewise.
	(tst-chk6-ENV): Likewise.
	(tst-lfschk1-ENV): Likewise.
	(tst-lfschk2-ENV): Likewise.
	(tst-lfschk3-ENV): Likewise.
	(tst-lfschk4-ENV): Likewise.
	(tst-lfschk5-ENV): Likewise.
	(tst-lfschk6-ENV): Likewise.
	* iconvdata/Makefile (bug-iconv6-ENV): Likewise.
	(tst-iconv7-ENV): Likewise.
	* intl/Makefile (LOCPATH-ENV): Likewise.
	(tst-codeset-ENV): Likewise.
	(tst-gettext3-ENV): Likewise.
	(tst-gettext5-ENV): Likewise.
	* libio/Makefile (tst-widetext-ENV): Don't set LOCPATH.
	(tst-fopenloc-ENV): Likewise.
	(tst-fgetws-ENV): Remove variable.
	(tst-ungetwc1-ENV): Likewise.
	(tst-ungetwc2-ENV): Likewise.
	(bug-ungetwc2-ENV): Likewise.
	(tst-swscanf-ENV): Likewise.
	(bug-ftell-ENV): Likewise.
	(tst-fgetwc-ENV): Likewise.
	(tst-fseek-ENV): Likewise.
	(tst-ftell-partial-wide-ENV): Likewise.
	(tst-ftell-active-handler-ENV): Likewise.
	(tst-ftell-append-ENV): Likewise.
	* posix/Makefile (tst-fnmatch-ENV): Likewise.
	(tst-regexloc-ENV): Likewise.
	(bug-regex1-ENV): Likewise.
	(tst-regex-ENV): Likewise.
	(tst-regex2-ENV): Likewise.
	(bug-regex5-ENV): Likewise.
	(bug-regex6-ENV): Likewise.
	(bug-regex17-ENV): Likewise.
	(bug-regex18-ENV): Likewise.
	(bug-regex19-ENV): Likewise.
	(bug-regex20-ENV): Likewise.
	(bug-regex22-ENV): Likewise.
	(bug-regex23-ENV): Likewise.
	(bug-regex25-ENV): Likewise.
	(bug-regex26-ENV): Likewise.
	(bug-regex30-ENV): Likewise.
	(bug-regex32-ENV): Likewise.
	(bug-regex33-ENV): Likewise.
	(bug-regex34-ENV): Likewise.
	(bug-regex35-ENV): Likewise.
	(tst-rxspencer-ENV): Likewise.
	(tst-rxspencer-no-utf8-ENV): Likewise.
	* stdio-common/Makefile (tst-sprintf-ENV): Likewise.
	(tst-sscanf-ENV): Likewise.
	(tst-swprintf-ENV): Likewise.
	(tst-swscanf-ENV): Likewise.
	(test-vfprintf-ENV): Likewise.
	(scanf13-ENV): Likewise.
	(bug14-ENV): Likewise.
	(tst-grouping-ENV): Likewise.
	* stdlib/Makefile (tst-strtod-ENV): Likewise.
	(tst-strtod3-ENV): Likewise.
	(tst-strtod4-ENV): Likewise.
	(tst-strtod5-ENV): Likewise.
	(testmb2-ENV): Likewise./
	* string/Makefile (tst-strxfrm-ENV): Likewise.
	(tst-strxfrm2-ENV): Likewise.
	(bug-strcoll1-ENV): Likewise.
	(test-strcasecmp-ENV): Likewise.
	(test-strncasecmp-ENV): Likewise.
	* time/Makefile (tst-strptime-ENV): Likewise.
	(tst-ftime_l-ENV): Likewise.
	* wcsmbs/Makefile (tst-btowc-ENV): Likewise.
	(tst-mbrtowc-ENV): Likewise.
	(tst-wcrtomb-ENV): Likewise.
	(tst-mbrtowc2-ENV): Likewise.
	(tst-c16c32-1-ENV): Likewise.
	(tst-mbsnrtowcs-ENV): Likewise.

2014-06-05  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* manual/resource.texi (How to get information about the memory
	subsystem?): Fix typo.
	Reported by Ivan Peon de la Parra <peon@keba.com>

2014-06-03  Guo Yixuan  <culu.gyx@gmail.com>

	[BZ #16882]
	* nptl/sysdeps/sparc/sparc32/pthread_spin_lock.S
	(pthread_spin_lock): Branch out of spin loop to proper location.
	* nptl/sysdeps/sparc/sparc64/pthread_spin_lock.S
	(pthread_spin_lock): Likewise.

	* nptl/tst-spin4.c: New test.
	* nptl/Makefile (tests): Add tst-spin4.

2014-06-03  Andreas Schwab  <schwab@suse.de>

	[BZ #15946]
	* resolv/res_send.c (send_dg): Reload file descriptor after
	calling reopen.

2014-06-03  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-06-03  Richard Henderson  <rth@redhat.com>

	* sysdeps/unix/sysv/linux/aarch64/pt-vfork.c: New file.
	* sysdeps/unix/sysv/linux/aarch64/nptl/pt-vfork.S: Remove file.
	* sysdeps/unix/sysv/linux/aarch64/vfork.S (__vfork): Incorporate
	SAVE_PID and RESTORE_PID blocks from pt-vfork.S.  Map 0 to INT_MIN
	in the SAVE_PID block.
	(__libc_vfork): New alias.
	* sysdeps/unix/sysv/linux/aarch64/nptl/vfork.S: Remove file.

	* sysdeps/unix/sysv/linux/aarch64/clone.S (__clone): Save args for
	child in registers, not on the stack.  Remove RESET_PID conditionals.
	* sysdeps/unix/sysv/linux/aarch64/nptl/clone.S: Remove file.

2014-06-03  Marcus Shawcroft  <marcus.shawcroft@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Regenerate.

2014-06-03  Wilco  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/math_private.h (libc_fesetround_aarch64)
	(libc_feholdexcept_setround_aarch64) (libc_feholdsetround_aarch64)
	(libc_feresetround_aarch64) (libc_feholdsetround_aarch64_ctx):
	Use _FPU_FPCR_RM_MASK for rounding mask rather than FE_TOWARDZERO.
	* sysdeps/aarch64/fpu/get-rounding-mode.h (get_rounding_mode):
	Likewise.

2014-06-03  Wilco  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/math_private.h
	(libc_feholdexcept_aarch64) (libc_feholdexcept_setround_aarch64)
	(libc_fetestexcept_aarch64) (libc_fesetenv_aarch64)
	(libc_feupdateenv_test_aarch64) (libc_feholdsetround_aarch64)
	(libc_feresetround_aarch64) (libc_feholdsetround_aarch64_ctx):
	Fix declarations.

2014-06-03  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* crypt/crypt-private.h: Include ufc-crypt.h.
	(__b64_from_24bit): Declare extern.
	* crypt/crypt_util.c(__b64_from_24bit): New function.
	(b64t): New static const variable.
	* crypt/md5-crypt.c (b64_from_24bit): Remove function.
	(b64t): Remove variable.
	(__md5_crypt_r): Replace b64_from_24bit with __b64_from_24bit.
	* crypt/sha256-crypt.c: Include crypt-private.h.
	(b64t): Remove variable.
	(__sha256_crypt_r): Remove b64_from_24bit and replace
	with __b64_from_24bit.
	* crypt/sha512-crypt.c: Likewise.

2014-06-02  Roland McGrath  <roland@hack.frob.com>

	* nptl/sysdeps/unix/sysv/linux/sh/vfork.S: Moved ...
	* sysdeps/unix/sysv/linux/sh/vfork.S: ... here.
	Label the code __libc_vfork rather than __vfork.
	[!NOT_IN_libc] (vfork): Define as weak alias.
	[!NOT_IN_libc] (__vfork): Define as strong alias, and libc_hidden_def.
	* sysdeps/unix/sysv/linux/sh/pt-vfork.S: New file.
	* nptl/sysdeps/unix/sysv/linux/sh/pt-vfork.S: File removed.

2014-06-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/malloc.c (malloc_info): Fix format specifier for
	n_mmaps.

2014-06-02  Wilco  <wdijkstr@arm.com>

	* sysdeps/aarch64/fpu/fpu_control.h (_FPU_SETCW): Remove ISB after
	FPCR write.

2014-06-02  Wilco  <wdijkstr@arm.com>

	[BZ #17009]
	* sysdeps/aarch64/fpu/feupdateenv (feupdateenv):
	Rewrite to reduce FPCR/FPSR accesses.

2014-06-01  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2014-05-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/ieee754/flt-32/e_j1f.c (__ieee754_y1f): Force computations
	to occur in round to nearest mode when |x| >= 2.0

2014-05-30  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (PSEUDO_RET): Remove.
	(PSEUDO_RET_NOERRNO): Remove.
	(ret): Don't redefine.
	(ret_NOERRNO): Define in terms of ret.
	(ret_ERRVAL): Likewise.

	* sysdeps/unix/sysv/linux/aarch64/ioctl.S (__ioctl): Remove the
	use of PSEUDO_RET; perform the error check directly.

2014-05-30 Marko Myllynen  <myllynen@redhat.com>

	* sysdeps/x86_64/link-defines.sym (BND_SIZE): Replace __int128
	with __int128_t.

2014-05-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/malloc (malloc_info): Fix formatting.

2014-05-30  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Roland McGrath  <roland@hack.frob.com>

	* malloc/malloc (malloc_info): Also print mmapped statistics.

2014-05-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/m68k/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/m68k/nptl/fork.c: File removed.

2014-05-30  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* malloc/malloc.c (malloc_info): Inline mi_arena.

2014-05-29  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (INTERNAL_VSYSCALL_NCS):
	Remove comma before expanding ASM_ARGS_##nr.
	(INTERNAL_SYSCALL_RAW): Make _sys_result signed, instead of casting.
	Make _x0 a strict output; make _x8 a strict input; adjust expansion
	of ASM_ARGS_##nr.
	(CLOBBER_ARGS_0, CLOBBER_ARGS_1, CLOBBER_ARGS_2): Remove.
	(CLOBBER_ARGS_3, CLOBBER_ARGS_4, CLOBBER_ARGS_5): Remove.
	(CLOBBER_ARGS_6, CLOBBER_ARGS_7): Remove.
	(ASM_ARGS_1): Add leading comma.

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h [NOT_IN_libc]
	(SYSCALL_ERROR_HANDLER): Use tpidr_el0 instead of a call
	to __errno_location.
	* sysdeps/unix/sysv/linux/aarch64/nptl/localplt.data (libpthread.so):
	Remove the expected plt for __errno_location.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h
	[NOT_IN_libc] (SINGLE_THREAD_P): Use tpidr_el0 instead of a
	call to __read_tp.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h (PSEUDO):
	Always allocate 64 bytes of stack frame.  Use ldp/stp to create
	it and break it down.
	(DOCARGS_0, DOCARGS_1): Do nothing.
	(DOCARGS_2): Update to store into the new stack frame.
	(DOCARGS_3, DOCARGS_4, DOCARGS_5, DOCARGS_6): Likewise.
	(UNDOCARGS_1): Update to restore from the new stack frame.
	(UNDOCARGS_2, UNDOCARGS_3, UNDOCARGS_4): Likewise.
	(UNDOCARGS_5, UNDOCARGS_6): Likewise.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h
	(SINGLE_THREAD_P): New parameter for result regno.
	(PSEUDO): Update to match; use cbz instead of beq.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h (PSEUDO):
	Use ENTRY to define the _nocancel entry point.  Share the syscall
	and syscall error check paths with the cancel path.
	(PSEUDO_END): New.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h: Adjust
	whitespace; tabs before and after asm mnemonics.

2014-05-29  Eric Wong  <normalperson@yhbt.net>

	[BZ #15132]
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Call fstat64 or stat64 internally, depending on arguments passed.
	Replace stat buffer argument with file descriptor argument.
	(INTERNAL_STATVFS): Update arguments to match __statvfs_getflags.
	* sysdeps/unix/sysv/linux/fstatvfs.c (fstatvfs):
	Pass fd to __internal_statvfs instead of calling fstat64.
	* sysdeps/unix/sysv/linux/fstatvfs64.c (__fstatvfs64):
	Pass fd to __internal_statvfs64 instead of calling fstat64.
	* sysdeps/unix/sysv/linux/statvfs.c (statvfs):
	Pass -1 to __internal_statvfs instead of calling stat64.
	* sysdeps/unix/sysv/linux/statvfs64.c (__statvfs64):
	Pass -1 to __internal_statvfs64 instead of calling stat64.

2014-05-28  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/sh/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* nptl/sysdeps/unix/sysv/linux/sh/clone.S: File removed.

	* sysdeps/unix/sysv/linux/tile/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/tile/nptl/fork.c: File removed.

2014-05-27  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/ia64/arch-fork.h: New file.

	* sysdeps/unix/sysv/linux/sh/arch-fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/sh/fork.c: File removed.

2014-05-27  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* elf/dl-deps.c (_dl_map_object_deps): Remove duplicate code.

2014-05-27  Andreas Schwab  <schwab@suse.de>

	* csu/libc-tls.c (__libc_setup_tls): Remove second argument from
	TLS_INIT_TP macro.
	* elf/dl-load.c (_dl_map_object_from_fd): Likewise.
	* elf/rtld.c (init_tls, dl_main): Likewise.
	* nptl/sysdeps/i386/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/powerpc/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/s390/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/sh/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/sparc/tls.h (TLS_INIT_TP): Likewise.
	* nptl/sysdeps/x86_64/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/aarch64/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/alpha/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/arm/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/hppa/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/ia64/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/m68k/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/mach/hurd/i386/tls.h (_hurd_tls_init): Likewise.
	* sysdeps/microblaze/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/mips/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/tile/nptl/tls.h (TLS_INIT_TP): Likewise.
	* sysdeps/generic/tls.h: Update description.

2014-05-27  Will Newton  <will.newton@linaro.org>

	[BZ #16990]
	* sysdeps/arm/dl-tlsdesc.S (_dl_tlsdesc_resolve_hold): Save
	and restore r2 rather than just restoring.

2014-05-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16724]
	* libio/tst-ftell-append.c: New test case.
	* libio/Makefile (tests): Add test case.
	* libio/fileops.c (do_ftell): Don't trust _IO_read_end when in
	append mode.
	* libio/wfileops.c (do_ftell_wide): Likewise.

2014-05-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* nptl/sysdeps/unix/sysv/linux/powerpc/Versions: Remove, merge into
	...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Versions: ... here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions: Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/Makefile: Moved rules to ...
	* sysdeps/unix/sysv/linux/powerpc/Makefile: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/bits/local_lim.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/lowlevellock.h: ...here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/createthread.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pt-longjmp.c: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/pt-longjmp.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pthread_attr_setstack.c: Moved
	...
	* sysdeps/unix/sysv/linux/powerpc/pthread_attr_setstack.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pthread_attr_setstacksize.c:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/pthread_attr_setstacksize.c: ...
	here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pthread_spin_unlock.c: Moved
	...
	* sysdeps/unix/sysv/linux/powerpc/pthread_spin_unlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/sem_post.c: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/sem_post.c: ... here.

	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/semaphore.h: Moved ...
	* sysdeps/unix/sysv/linux/powerpc/bits/semaphore.h: ... here.

	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions: Remove,
	merge into ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_create.c: Moved
	...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_create.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_delete.c: Moved
	...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_delete.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_getoverr.c:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_getoverr.c: ...
	here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_gettime.c:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_gettime.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_settime.c:
	Moved ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_settime.c: ... here.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: Remove
	conditional [RESET_PID].
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: File
	removed.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S: File
	removed.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S: Include
	<tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc32/pt-vfork.S: File
	removed.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S: File
	Removed.

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S: Include
	<tcb-offsets.h>.
	(__vfork): Incorporate save/retore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/pt-vfork.S: File
	removed.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S: File
	removed.

2014-05-26  Carlos O'Donell  <carlos@redhat.com>

	* malloc/malloc.c (mi_arena): New function.
	(malloc_info): Remove nested function mi_arena. Call non-nosted
	function mi_arena.

2014-05-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/memset.S (memset): Replace insrdi
	by insrwi.
	* sysdeps/powerpc/powerpc32/power6/memset.S (memset): Likewise.
	* sysdeps/powerpc/powerpc32/power7/memset.S (memset): Likewise.
	* sysdeps/powerpc/powerpc32/power7/memchr.S (memchr): Likewise.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S (memrchr): Likewise.
	* sysdeps/powerpc/powerpc32/power7/rawmemchr.S (rawmemchr): Likewise.
	* sysdeps/powerpc/powerpc32/power7/strchr.S (strchr): Likewise.
	* sysdeps/powerpc/powerpc32/power7/strchrnul.S (strchrnul): Likewise.

2014-05-26  Andreas Schwab  <schwab@suse.de>

	[BZ #16984]
	* locale/programs/repertoire.c (repertoire_read): Add slash
	between I18NPATH element and file name.
	* locale/programs/locfile.c (locfile_read): Likewise.

2014-05-26  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/pthread_mutexattr_settype.c
	(__pthread_mutexattr_settype):
	Disable lock elision for PTHREAD_MUTEX_NORMAL.

2014-05-26  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* nptl/tst-mutex5 (do_test):
	Use #ifndef ENABLE_LOCK_ELISION instead of #ifdef.

2014-05-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/README: Document 'init' directive.
	* benchtests/bench-skeleton.c (main) [BENCH_INIT]: Call
	BENCH_INIT.
	* scripts/bench.py (gen_source): Define BENCH_INIT macro.
	(parse_file): Recognize 'init' directive.

2014-05-26  Kyle McMartin  <kyle@redhat.com>

	[BZ #16796]
	* sysdeps/aarch64/nptl/tls.h: increase TCB alignment to the
	alignment of struct pthread.

2014-05-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16878]
	* nscd/netgroupcache.c (addgetnetgrentX): Look for
	NSS_STATUS_TRYAGAIN to indicate insufficient buffer space.
	* nscd/nss_files/files-netgrp.c (_nss_netgroup_parseline): Use
	NSS_STATUS_TRYAGAIN to indicate insufficient buffer space.

2014-05-25  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h
	(SINGLE_THREAD_P_PIC): Remove.
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h
	(SINGLE_THREAD_P_PIC): Remove.

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (PSEUDO_RET): Move
	branch to syscall error ...
	(PSEUDO): ... here.
	[NOT_IN_libc] (SYSCALL_ERROR_HANDLER): Rename the label
	from __local_syscall_error to .Lsyscall_error.
	[!NOT_IN_libc] (SYSCALL_ERROR_HANDLER): Branch to __syscall_error.
	(SYSCALL_ERROR): Update label name.

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h (PSEUDO):
	Do not use DOARGS/UNDOARGS.
	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (DO_CALL): Likewise.
	(DOARGS_0, DOARGS_1, DOARGS_2, DOARGS_3): Remove.
	(DOARGS_4, DOARGS_5, DOARGS_6, DOARGS_7): Remove.
	(UNDOARGS_0, UNDOARGS_1, UNDOARGS_2, UNDOARGS_3): Remove.
	(UNDOARGS_4, UNDOARGS_5, UNDOARGS_6, UNDOARGS_7): Remove.

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h (DO_CALL): Fix
	block comment.

	* sysdeps/unix/sysv/linux/alpha/vfork.S (vfork, __vfork): Only
	define if !NOT_IN_libc.
	* sysdeps/unix/sysv/linux/alpha/pt-vfork.S (vfork, __vfork): Only
	define with non-default symbol versions.

2014-05-23  Richard Henderson  <rth@twiddle.net>

	* nptl/pt-vfork.c (vfork_resolve): Rename from vfork_ifunc.
	(vfork, __vfork): Define via compat_symbol.

	* nptl/pt-vfork.c: Error if !HAVE_IFUNC.
	[!HAVE_IFUNC] (vfork_compat): Remove.
	[!HAVE_IFUNC] (DEFINE_VFORK): Remove.

2014-05-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16978]
	* posix/tar.h [!__USE_XOPEN2K] (TSVTX): Define macro.
	* conform/Makefile (test-xfail-POSIX/tar.h/conform): Remove
	variable.

2014-05-23  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/alpha/nptl/Makefile: Merge into...
	* sysdeps/unix/sysv/linux/alpha/Makefile: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/Versions: Merge into...
	* sysdeps/unix/sysv/linux/alpha/Versions: ... here.

	* sysdeps/unix/sysv/linux/alpha/nptl/aio_cancel.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/aio_cancel.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/local_lim.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/bits/local_lim.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/semaphore.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/bits/semaphore.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/alpha/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/createthread.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/alpha/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/alpha/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/sem_post.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/sem_post.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/alpha/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_create.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_delete.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_getoverr.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_gettime.c: ... here.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/alpha/timer_settime.c: ... here.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Remove vfork.
	* sysdeps/unix/sysv/linux/alpha/nptl/vfork.S: Move file ...
	* sysdeps/unix/sysv/linux/alpha/vfork.S: ... here.  Restore PID
	before exiting on error.
	(__libc_vfork): New strong alias.
	* sysdeps/unix/sysv/linux/alpha/nptl/pt-vfork.S: Remove file.
	* sysdeps/unix/sysv/linux/alpha/pt-vfork.S: New file.

	* sysdeps/unix/sysv/linux/alpha/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/alpha/nptl/clone.S: File removed.

	* sysdeps/unix/sysv/linux/alpha/nptl/fork.c: Remove file.

2014-05-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16977]
	* sysdeps/i386/fpu/e_log10.S (__ieee754_log10): Take absolute
	value when x - 1 is zero.
	* sysdeps/i386/fpu/e_log10f.S (__ieee754_log10f): Likewise.
	* sysdeps/i386/fpu/e_log10l.S (__ieee754_log10l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c (__ieee754_log10l): Return
	0.0L for an argument of 1.0L.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c (__ieee754_log10l):
	Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S (__ieee754_log10l): Take absolute
	value when x - 1 is zero.
	* math/libm-test.inc (log10_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-05-23  Rasmus Villemoes  <rv@rasmusvillemoes.dk>

	* manual/filesys.texi (Scanning Directory Content): Fix prototype of
	alphasort and versionsort.

2014-05-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/math_private.h [copysign]: Remove unneeded
	macro.
	[copysignf]: Likewise.

2014-05-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* crypt/md5-crypt.c: Fix formatting.

2014-05-22  Kostya Serebryany  <konstantin.s.serebryany@gmail.com>

	* crypt/md5-crypt.c (__md5_crypt_r): Remove a nested function.
	(b64_from_24bit): New function.

2014-05-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr.c (memchr): Remove
	libc_hidden_builtin_def to ifunc.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr-ppc32.c
	[libc_hidden_builtin_def]: Define hidden definition to __memchr_ppc32.

2014-05-21  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/aarch64/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/aarch64/nptl/fork.c: File removed.

2014-05-21  Joseph Myers  <joseph@codesourcery.com>

	* nscd/Depend (linuxthreads): Remove.
	(nptl): Add.
	* resolv/Depend (linuxthreads): Remove.
	* rt/Depend (linuxthreads): Remove.

	* Makeconfig [$(build-hardcoded-path-in-tests) = yes]
	(rtld-tests-LDFLAGS): Use $(elf-objpfx) instead of
	$(common-objpfx)elf/.
	(link-libc-before-gnulib): Likewise.
	(elfobjdir): Remove variable.
	* Makefile (install): Use $(elf-objpfx) instead of
	$(common-objpfx)elf/.
	* Makerules (link-libc-args): Use $(elf-objpfx) instead of
	$(elfobjdir)/.
	(link-libc-deps): Likewise.
	($(common-objpfx)libc.so): Likewise.
	($(common-objpfx)linkobj/libc.so): Likewise.
	[$(cross-compiling) = no] (symbolic-link-prog): Use $(elf-objpfx)
	instead of $(common-objpfx)elf/.
	(symbolic-link-list): Likewise.
	* iconvdata/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Likewise.
	* sysdeps/arm/Makefile (gnulib-arch): Use $(elf-objpfx) instead of
	$(elfobjdir)/.
	(static-gnulib-arch): Likewise.
	* sysdeps/s390/s390-64/Makefile ($(inst_gconvdir)/gconv-modules)
	[$(cross-compiling) = no]: Use $(elf-objpfx) instead of
	$(common-objpfx)elf/.

2014-05-21  Richard Henderson  <rth@redhat.com>

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h
	(SINGLE_THREAD_P): Use the correct width load.  Fold
	into the ldr offset.

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h [RTLD_PRIVATE_ERRNO]
	(SYSCALL_ERROR_HANDLER): Fold add insn into str offset.

2014-05-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/arm/unwind-forcedunwind.c
	(libgcc_s_resume): Use __attribute_used__.
	* sysdeps/unix/sysv/linux/arm/unwind-resume.c (libgcc_s_resume):
	Likewise.

2014-05-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/math_private.h [__copysignf]: Fix copysign macro
	optimization when used with float constants.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-05-20  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #16915]
	* locale/nl_langinfo_l.c: Make direct reference to every
	_nl_current_CATEGORY symbol.
	* localedata/Makefile (test-srcs): Add tst-langinfo-static.
	(tests-static): Add tst-langinfo-static.
	(tests-special): Add tst-langinfo-static.out.
	($(objpfx)tst-langinfo.out): Redirect output.
	($(objpfx)tst-langinfo-static.out): New.
	* localedata/tst-langinfo.sh: Send output to stdout.
	* localedata/tst-langinfo-static.c: New file.

	[BZ #16965]
	* stdlib/strtod_l.c (round_and_return): Add code to shift limbs
	when the shift amount is modulo the limb size.

2014-05-20  Richard Henderson  <rth@redhat.com>

	[BZ #16967]
	* sysdeps/unix/sysv/linux/alpha/bits/sigaction.h (struct sigaction):
	Change type of sa_flags from unsigned int to int.

	[BZ #16966]
	* sysdeps/unix/sysv/linux/alpha/bits/siginfo.h: Remove file.

	* sysdeps/alpha/dl-machine.h (ELF_MACHINE_NO_RELA): Define.

2014-05-20  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/nptl/sysdep-cancel.h (PSEUDO):
	Test the return value of the system call in the nocancel case.

2014-05-20  Will Newton  <will.newton@linaro.org>
	    Yvan Roux  <yvan.roux@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/sys/user.h: Remove unused
	#include of asm/ptrace.h.
	(PTRACE_GET_THREAD_AREA): Remove #undef.
	(PTRACE_GETHBPREGS): Likewise.
	(PTRACE_SETHBPREGS): Likewise.
	(struct user_regs_struct): New structure.
	(struct user_fpsimd_struct): New structure.
	* sysdeps/unix/sysv/linux/aarch64/sys/procfs.h: Remove unused
	#include of asm/ptrace.h and second #include of sys/user.h.
	(PTRACE_GET_THREAD_AREA): Remove #undef.
	(PTRACE_GETHBPREGS): Likewise.
	(PTRACE_SETHBPREGS): Likewise.
	(ELF_NGREG): Use new struct user_regs_struct.
	(elf_fpregset_t): Use new struct user_fpsimd_struct.

2014-05-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypof.c: Moved ...
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypotf.c: ... here.

2014-05-17  Jose E. Marchesi  <jose.marchesi@oracle.com>

	[BZ #16958]
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Add missing
	membar to avoid block loads/stores to overlap previous stores.

2014-05-17  Richard Henderson  <rth@redhat.com>

	* sysdeps/unix/sysv/linux/alpha/nptl/sysdep-cancel.h (PSEUDO):
	Create the __##syscall_name##_nocancel entry point.
	* sysdeps/unix/sysv/linux/alpha/sigsuspend.S (__sigsuspend_nocancel):
	Remove; let the sysdep-cancel.h code create it.

2014-05-17  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/bits/termios.h (PAGEOUT, WRAP):
	Protect with __USE_GNU.
	(TIOCSET_TEMPT): Likewise.
	(TIOCM_LE, TIOCM_DTR, TIOCM_RTS, TIOCM_ST, TIOCM_SR, TIOCM_CTS,
	TIOCM_CAR, TIOCM_RNG, TIOCM_DSR, TIOCM_CD, TIOCM_RI): Remove as
	these are already provided in bits/ioctl-types.h

2014-05-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/alpha/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/ia64/nptl/fork.c: File removed.

	* sysdeps/unix/sysv/linux/not-cancel.h (waitpid_not_cancel):
	Use wait4 regardless of [__NR_waitpid].

2014-05-16  Maciej W. Rozycki  <macro@codesourcery.com>

	PR libgcc/60166
	* sysdeps/arm/soft-fp/sfp-machine.h (_FP_NANFRAC_S, _FP_NANFRAC_D)
	(_FP_NANSIGN_Q): Set the quiet bit.

2014-05-16  Joseph Myers  <joseph@codesourcery.com>

	* benchtests/Makefile
	($(addprefix $(objpfx)bench-,$(bench-math))): Depend on $(libm),
	not $(common-objpfx)math/libm.so.
	($(addprefix $(objpfx)bench-,$(bench-pthread))): Depend on
	$(shared-thread-library), not $(common-objpfx)nptl/libpthread.so.
	* elf/Makefile ($(objpfx)noload): Depend on $(libdl), not
	$(common-objpfx)dlfcn/libdl.so.
	($(objpfx)tst-audit8): Depend on $(libm), not
	$(common-objpfx)math/libm.so.
	* malloc/Makefile ($(objpfx)libmemusage.so): Depend on $(libdl),
	not $(common-objpfx)dlfcn/libdl.so.
	* math/Makefile
	($(addprefix $(objpfx),$(filter-out $(tests-static),$(tests)))):
	Depend on $(libm), not $(objpfx)libm.so.  Do not condition on
	[$(build-shared) = yes].
	($(objpfx)test-fenv-tls): Depend on $(shared-thread-library), not
	$(common-objpfx)nptl/libpthread.so.
	* misc/Makefile ($(objpfx)tst-tsearch): Depend on $(libm), not
	$(common-objpfx)math/libm.so$(libm.so-version) or
	$(common-objpfx)math/libm.a depending on [$(build-shared) = yes].
	* nptl/Makefile ($(objpfx)tst-unload): Depend on $(libdl), not
	$(common-objpfx)dlfcn/libdl.so.
	* setjmp/Makefile (link-libm): Remove variable.
	($(objpfx)tst-setjmp-fp): Depend on $(libm), not $(link-libm).
	* stdio-common/Makefile (link-libm): Remove variable.
	($(objpfx)tst-printf-round): Depend on $(libm), not $(link-libm).
	* stdlib/Makefile (link-libm): Remove variable.
	($(objpfx)bug-getcontext): Depend on $(libm), not $(link-libm).
	($(objpfx)tst-strtod-round): Likewise.
	($(objpfx)tst-tininess): Likewise.
	($(objpfx)tst-strtod-underflow): Likewise.
	($(objpfx)tst-strtod6): Likewise.
	($(objpfx)tst-tls-atexit): Depend on $(shared-thread-library) and
	$(libdl), not $(common-objpfx)nptl/libpthread.so and
	$(common-objpfx)dlfcn/libdl.so.

2014-05-16  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h [__USE_MISC]: Guard
	BSD terminal modes definitions.

2014-05-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/arm/fork.c: File removed.

	* sysdeps/unix/sysv/linux/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/i386/fork.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/arch-fork.h: ... here.
	Don't do #include_next.
	* sysdeps/unix/sysv/linux/x86_64/fork.h: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/arch-fork.h: ... here.
	Don't do #include_next.
	* sysdeps/unix/sysv/linux/mips/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/mips/fork.h: File removed.
	* sysdeps/unix/sysv/linux/powerpc/arch-fork.h: New file.
	* sysdeps/unix/sysv/linux/powerpc/fork.h: File removed.

2014-05-16  Allan McRae  <allan@archlinux.org>

	* po/sv.po: Update Swedish translation from translation project.

	* timezone/Makefile ($(objpfx)tzselect): Use correct variable
	in sed expression.

2014-05-16  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #16917]
	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_internal): Return
	errno if the TIOCGPTN ioctl fails with an error different than
	EINVAL.
	* login/tst-ptsname.c: New file.
	* login/Makefile (tests): Add tst-ptsname.

	[BZ #16943]
	* sysdeps/unix/sysv/linux/sparc/bits/resource.h: Declare prlimit
	and prlimit64.

2014-05-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16849]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Only check for
	herrno to return EAI_AGAIN.

2014-05-14  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/i386/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/i386/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/i386/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/i386/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/i386/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/64/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libBrokenLocale.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libthread_db.abilist:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/x32/libutil.abilist: ... here.

	* nptl/sysdeps/unix/sysv/linux/x86/Makefile: File removed.
	* sysdeps/unix/sysv/linux/x86/Makefile [$(subdir) = nptl]
	(libpthread-sysdep_routines): Add elision-related stuff here instead.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-conf.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-conf.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-conf.h: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-conf.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-lock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-timed.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-timed.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-trylock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-trylock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/elision-unlock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/elision-unlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/force-elision.h: Moved ...
	* sysdeps/unix/sysv/linux/x86/force-elision.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/hle.h: Moved ...
	* sysdeps/unix/sysv/linux/x86/hle.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/init-arch.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/init-arch.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/init-arch.h: Moved ...
	* sysdeps/unix/sysv/linux/x86/init-arch.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/pthread_mutex_cond_lock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_cond_lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/pthread_mutex_lock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_lock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/pthread_mutex_timedlock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_timedlock.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/pthread_mutex_trylock.c: Moved ...
	* sysdeps/unix/sysv/linux/x86/pthread_mutex_trylock.c: ... here.

	* sysdeps/unix/sysv/linux/mips/fork.h: New file.
	* sysdeps/unix/sysv/linux/mips/nptl/fork.c: File removed.

	* nptl/sysdeps/unix/sysv/linux/i386/Implies: File removed.
	* nptl/sysdeps/unix/sysv/linux/i386/i786/Implies: Moved ...
	* sysdeps/unix/sysv/linux/i386/i786/Implies: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_wrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_cond_timedwait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_barrier_wait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_unlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_cond_signal.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_cond_broadcast.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedrdlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_timedwrlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_rdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i586/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i586/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_wrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_timedwait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_barrier_wait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_unlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_signal.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_cond_broadcast.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedrdlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_timedwrlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_rdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i486/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i486/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/dl-sysdep.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/dl-sysdep.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_wrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_cond_timedwait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_barrier_wait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_unlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/dl-sysdep.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/dl-sysdep.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_cond_signal.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_cond_broadcast.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedrdlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_timedwrlock.S:
	... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_rdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/i686/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/i686/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/sysdep-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/smp.h: Moved ...
	* sysdeps/unix/sysv/linux/i386/smp.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/pthread_once.S: Moved ...
	* sysdeps/unix/sysv/linux/i386/pthread_once.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/i386/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/i386/createthread.c: ... here.

	* sysdeps/unix/sysv/linux/powerpc/fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/powerpc/fork.c: File removed.

	* nptl/sysdeps/unix/sysv/linux/i386/pthread_spin_init.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/i386/pthread_spin_unlock.S: File removed.

	* nptl/sysdeps/unix/sysv/linux/x86_64/Implies: File removed.
	* nptl/sysdeps/unix/sysv/linux/x86_64/cancellation.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/cancellation.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/libc-cancellation.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/libc-cancellation.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/libc-lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/libc-lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/librt-cancellation.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/librt-cancellation.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/lowlevellock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/lowlevelrobustlock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/lowlevelrobustlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_barrier_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_barrier_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_broadcast.S:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_broadcast.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_signal.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_signal.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_cond_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_once.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_once.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_rdlock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_rdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedrdlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedrdlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedwrlock.S:
	Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_timedwrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_unlock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_unlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_wrlock.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_rwlock_wrlock.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_setaffinity.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/pthread_setaffinity.c: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sem_post.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sem_post.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sem_timedwait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sem_timedwait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sem_trywait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sem_trywait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sem_wait.S: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sem_wait.S: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/sysdep-cancel.h: ... here.

	* nptl/sysdeps/unix/sysv/linux/fork.c: Use <> for fork.h #include.
	* nptl/sysdeps/unix/sysv/linux/x86_64/fork.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/fork.h: New file.
	* nptl/sysdeps/unix/sysv/linux/i386/fork.c: File removed.
	* sysdeps/unix/sysv/linux/i386/fork.h: New file.

	* nptl/sysdeps/unix/sysv/linux/i386/not-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/not-cancel.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/sparc/not-cancel.h: File removed.
	* nptl/sysdeps/unix/sysv/linux/sh/not-cancel.h: File removed.
	* nptl/sysdeps/unix/sysv/linux/powerpc/not-cancel.h: File removed.
	* nptl/sysdeps/unix/sysv/linux/x86_64/not-cancel.h: File removed.
	* nptl/sysdeps/unix/sysv/linux/s390/not-cancel.h: File removed.
	* sysdeps/unix/sysv/linux/generic/not-cancel.h: File removed.
	* sysdeps/unix/sysv/linux/generic/nptl/not-cancel.h: File removed.
	* sysdeps/unix/sysv/linux/m68k/nptl/not-cancel.h: File removed.

	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_spin_init.c: File removed.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pthread_spin_unlock.S: Likewise.

	* nptl/sysdeps/unix/sysv/linux/x86_64/compat-timer.h: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/compat-timer.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/Versions: Remove, merge into ...
	* sysdeps/unix/sysv/linux/x86_64/Versions: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_create.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_create.c: here.
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_delete.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_delete.c: ... here
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_getoverr.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_getoverr.c: ... here
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_gettime.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_gettime.c: ... here
	* nptl/sysdeps/unix/sysv/linux/x86_64/timer_settime.c: Moved ...
	* sysdeps/unix/sysv/linux/x86_64/timer_settime.c: ... here
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_create.c:
	Update #include.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_delete.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_getoverr.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_gettime.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/powerpc64/timer_settime.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_create.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_delete.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_getoverr.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_gettime.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/sparc64/timer_settime.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_create.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_delete.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_getoverr.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_gettime.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/s390-64/timer_settime.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_create.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_delete.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_getoverr.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_gettime.c: Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/timer_settime.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_create.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_delete.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_getoverr.c: Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_gettime.c:  Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/timer_settime.c:  Likewise.

	* sysdeps/unix/sysv/linux/x86_64/clone.S: Deconditionalize the code
	that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/i386/clone.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/x86_64/clone.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/i386/clone.S: File removed.

	* sysdeps/i386/nptl/Implies: New file.
	* sysdeps/x86_64/nptl/Implies: New file.
	* nptl/sysdeps/unix/sysv/linux/x86/bits/pthreadtypes.h: Moved ...
	* sysdeps/x86/nptl/bits/pthreadtypes.h: ... here.
	* nptl/sysdeps/unix/sysv/linux/x86/bits/semaphore.h: Moved ...
	* sysdeps/x86/nptl/bits/semaphore.h: ... here.

	* sysdeps/unix/sysv/linux/i386/vfork.S: Include <tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* nptl/sysdeps/unix/sysv/linux/i386/vfork.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/i386/pt-vfork.S: File removed.

	* sysdeps/unix/sysv/linux/x86_64/vfork.S: Include <tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* nptl/sysdeps/unix/sysv/linux/x86_64/vfork.S: File removed.
	* nptl/sysdeps/unix/sysv/linux/x86_64/pt-vfork.S: File removed.

	* sysdeps/unix/sysv/linux/arm/vfork.S: Include <tcb-offsets.h>.
	(__vfork): Incorporate save/restore of PID from nptl/vfork.S here.
	(__libc_vfork): New strong alias.
	* sysdeps/unix/sysv/linux/arm/nptl/vfork.S: File removed.
	* sysdeps/unix/sysv/linux/arm/nptl/pt-vfork.S: File removed.
	* nptl/pt-vfork.c: New file.
	* nptl/Versions (libc: GLIBC_PRIVATE): Add __libc_vfork.
	(libpthread: GLIBC_2.20): New version set (empty).

2014-05-14  Will Newton  <will.newton@linaro.org>

	* stdlib/gmp-impl.h: Test USE_STACK_ALLOC #ifdef
	rather than #if.

2014-05-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16564]
	* sysdeps/i386/fpu/s_log1pl.S (__log1pl): Do not add 1 to positive
	arguments with exponent 65 or above.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c (__log1pl): Do not add 1 to
	arguments 0x1p113L or above.
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c (__log1pl): Do not add 1
	to arguments 0x1p107L or above.
	* sysdeps/x86_64/fpu/s_log1pl.S (__log1pl): Do not add 1 to
	positive arguments with exponent 65 or above.
	* math/auto-libm-test-in: Add more tests of log1p.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16928]
	* math/s_cacos.c (__cacos): Ensure zero real part of result from
	non-finite arguments is +0.
	* math/s_cacosf.c (__cacosf): Likewise.
	* math/s_cacosl.c (__cacosl): Likewise.
	* math/libm-test.inc (cacos_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16927]
	* sysdeps/i386/fpu/e_acosh.S (__ieee754_acosh): Use fabs on x-1
	value.
	* sysdeps/i386/fpu/e_acoshf.S (__ieee754_acoshf): Likewise.
	* sysdeps/i386/fpu/e_acoshl.S (__ieee754_acoshl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c (__ieee754_acoshl): Correct
	for explicit high bit of mantissa when testing for argument equal
	to 1.
	* math/libm-test.inc (acosh_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16516]
	* sysdeps/ieee754/dbl-64/s_erf.c (efx8): Remove variable.
	(__erf): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* sysdeps/ieee754/flt-32/s_erff.c (efx8): Remove variable.
	(__erff): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Include <float.h>.
	(efx8): Remove variable.
	(__erfl): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Include <float.h>.
	(efx8): Remove variable.
	(__erfl): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Include <float.h>.
	(efx8): Remove variable.
	(__erfl): Scale by 16 instead of 8 in potentially underflowing
	case.  Ensure exception if result actually underflows.
	* math/auto-libm-test-in: Add more tests of erf.
	* math/auto-libm-test-out: Regenerated.

2014-05-14  Andreas Schwab  <schwab@suse.de>

	* elf/rtld.c (_dl_start_final, _dl_start, init_tls, dl_main):
	Remove code conditionalized on USE___THREAD.

	* config.h.in (HAVE_PT_CHOWN): Define as 0.
	* sysdeps/unix/grantpt.c (grantpt): Check HAVE_PT_CHOWN for value,
	not definedness.

2014-05-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_UTIMES):
	Define unconditionally.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_DUP3): Do not define.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_UTIMES): Undefine.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_UTIMES): Do not define.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Undefine if [__LINUX_KERNEL_VERSION <
	0x020621] instead of defining if [__LINUX_KERNEL_VERSION >=
	0x020621].
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_DUP3): Undefine.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h (__ASSUME_UTIMES):
	Do not define.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	* sysdeps/unix/sysv/linux/hppa/kernel-features.h
	(__ASSUME_32BITUIDS): Likewise.
	(__ASSUME_TRUNCATE64_SYSCALL): Likewise.
	(__ASSUME_IPC64): Likewise.
	(__ASSUME_ST_INO_64_BIT): Likewise.
	(__ASSUME_GETDENTS64_SYSCALL): Likewise.
	[__LINUX_KERNEL_VERSION < 0x030e00] (__ASSUME_UTIMES): Undefine.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	(__ASSUME_UTIMES): Do not define.
	(__ASSUME_PSELECT): Likewise.
	(__ASSUME_PPOLL): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h (__ASSUME_IPC64):
	Likewise.
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	(__ASSUME_UTIMES): Undefine.

	* sysdeps/arm/fclrexcpt.c (__feclearexcept): Rename to
	feclearexcept.  Remove symbol versioning code.
	* sysdeps/arm/fegetenv.c (__fegetenv): Rename to fegetenv.  Remove
	symbol versioning code.
	* sysdeps/arm/fesetenv.c (__fesetenv): Rename to fesetenv.  Remove
	symbol versioning code.
	* sysdeps/arm/feupdateenv.c (__feupdateenv): Rename to
	feupdateenv.  Remove symbol versioning code.
	* sysdeps/arm/fgetexcptflg.c (__fegetexceptflag): Rename to
	fegetexceptflag.  Remove symbol versioning code.
	* sysdeps/arm/fsetexcptflg.c (__fesetexceptflag): Rename to
	fesetexceptflag.  Remove symbol versioning code.
	* sysdeps/unix/sysv/linux/arm/Versions (libc): Remove GLIBC_2.0,
	GLIBC_2.2 and GLIBC_2.3.3 entries.  Change GLIBC_2.1 to GLIBC_2.4.
	* sysdeps/unix/sysv/linux/arm/posix_fadvise64.c
	(__posix_fadvise64_l32): Remove prototype.
	[SHLIB_COMPAT(libc, GLIBC_2_2, GLIBC_2_3_3)]: Remove conditional
	code.

2014-05-13  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/nptl/bits/pthreadtypes.h: Moved ...
	* sysdeps/arm/nptl/bits/pthreadtypes.h: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/bits/semaphore.h: Moved ...
	* sysdeps/arm/nptl/bits/semaphore.h: ... here.

2014-05-13  Sami Kerola  <kerolasa@iki.fi>

	* timezone/Makefile ($(objpfx)tzselect): Use zonedir instead
	current working directory

2014-05-13  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/nptl/c++-types.data: Moved ...
	* sysdeps/unix/sysv/linux/arm/c++-types.data: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/createthread.c: Moved ...
	* sysdeps/unix/sysv/linux/arm/createthread.c: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/fork.c: Moved ...
	* sysdeps/unix/sysv/linux/arm/fork.c: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/ld.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/ld.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libBrokenLocale.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libBrokenLocale.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libanl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libanl.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libc.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libc.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libcrypt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libcrypt.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libdl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libdl.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libm.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libm.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libnsl.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libnsl.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libpthread.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libpthread.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libresolv.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libresolv.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/librt.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/librt.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libthread_db.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libthread_db.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/libutil.abilist: Moved ...
	* sysdeps/unix/sysv/linux/arm/libutil.abilist: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/localplt.data: Moved ...
	* sysdeps/unix/sysv/linux/arm/localplt.data: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/lowlevellock.h: Moved ...
	* sysdeps/unix/sysv/linux/arm/lowlevellock.h: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/sysdep-cancel.h: Moved ...
	* sysdeps/unix/sysv/linux/arm/sysdep-cancel.h: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/unwind-forcedunwind.c: Moved ...
	* sysdeps/unix/sysv/linux/arm/unwind-forcedunwind.c: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/unwind-resume.c: Moved ...
	* sysdeps/unix/sysv/linux/arm/unwind-resume.c: ... here.

	* sysdeps/unix/sysv/linux/arm/Versions (libc: GLIBC_PRIVATE): New set.
	* sysdeps/unix/sysv/linux/arm/nptl/Versions: File removed.

	* sysdeps/unix/sysv/linux/arm/Makefile
	[$(subdir) = rt] (librt-sysdep_routines, librt-shared-only-routines):
	Add rt-aeabi_unwind_cpp_pr1.
	[$(subdir) = nptl] (librt-sysdep_routines, librt-shared-only-routines):
	Add nptl-aeabi_unwind_cpp_pr1.
	[$(subdir) = nptl] (tests): Filter out tst-cleanupx4.
	* sysdeps/unix/sysv/linux/arm/nptl/Makefile: File removed.
	* sysdeps/unix/sysv/linux/arm/nptl/rt-aeabi_unwind_cpp_pr1.c: Move ...
	* sysdeps/unix/sysv/linux/arm/rt-aeabi_unwind_cpp_pr1.c: ... here.
	* sysdeps/unix/sysv/linux/arm/nptl/nptl-aeabi_unwind_cpp_pr1.c: Move ...
	* sysdeps/unix/sysv/linux/arm/nptl-aeabi_unwind_cpp_pr1.c: ... here.

	* sysdeps/unix/sysv/linux/arm/configure.ac: Force -fexceptions here.
	* sysdeps/unix/sysv/linux/arm/configure: Regenerated.
	* sysdeps/unix/sysv/linux/arm/nptl/configure.ac: File removed.
	* sysdeps/unix/sysv/linux/arm/nptl/configure: File removed.

	* sysdeps/unix/sysv/linux/arm/clone.S: Include <tcb-offsets.h>.
	Deconditionalize the code that was previously under [RESET_PID].
	* sysdeps/unix/sysv/linux/arm/nptl/clone.S: File removed.

	* sysdeps/generic/exit-thread.h: New file.
	* sysdeps/unix/sysv/linux/exit-thread.h: New file.
	* include/unistd.h (__exit_thread): Remove declaration.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Drop exit-thread.
	* sysdeps/unix/sysv/linux/exit-thread.S: File removed.
	* csu/libc-start.c: Include <exit-thread.h>.
	(LIBC_START_MAIN): Pass no argument to __exit_thread.
	* nptl/pthread_create.c: Include <exit-thread.h>.
	(start_thread): Call __exit_thread in place of __exit_thread_inline.
	* nptl/sysdeps/i386/pthreaddef.h (__exit_thread_inline): Macro removed.
	* nptl/sysdeps/powerpc/pthreaddef.h: Likewise.
	* nptl/sysdeps/s390/pthreaddef.h: Likewise.
	* nptl/sysdeps/sh/pthreaddef.h: Likewise.
	* nptl/sysdeps/sparc/sparc32/pthreaddef.h: Likewise.
	* nptl/sysdeps/sparc/sparc64/pthreaddef.h: Likewise.
	* nptl/sysdeps/x86_64/pthreaddef.h: Likewise.
	* sysdeps/aarch64/nptl/pthreaddef.h: Likewise.
	* sysdeps/alpha/nptl/pthreaddef.h: Likewise.
	* sysdeps/arm/nptl/pthreaddef.h: Likewise.
	* sysdeps/hppa/nptl/pthreaddef.h: Likewise.
	* sysdeps/ia64/nptl/pthreaddef.h: Likewise.
	* sysdeps/m68k/nptl/pthreaddef.h: Likewise.
	* sysdeps/microblaze/nptl/pthreaddef.h: Likewise.
	* sysdeps/mips/nptl/pthreaddef.h: Likewise.
	* sysdeps/tile/nptl/pthreaddef.h: Likewise.

2014-05-13  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/grantpt.c (grantpt): Fix typo in assertion.

2014-05-12  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h [__s390__]
	(__ASSUME_UTIMES): Do not condition on kernel version.
	(__ASSUME_PSELECT): Define unconditionally.
	(__ASSUME_PPOLL): Likewise.
	(__ASSUME_ATFCTS): Likewise.
	(__ASSUME_SET_ROBUST_LIST): Do not condition on kernel version.
	(__ASSUME_COMPLETE_READV_WRITEV): Define unconditionally.
	(__ASSUME_FUTEX_LOCK_PI): Do not condition on kernel version.
	(__ASSUME_UTIMENSAT): Define unconditionally.
	(__ASSUME_PRIVATE_FUTEX): Likewise.
	(__ASSUME_FALLOCATE): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL): Remove.
	(__ASSUME_ARG_MAX_STACK_BASED): Likewise.
	(__ASSUME_ADJ_OFFSET_SS_READ): Define unconditionally.
	(__ASSUME_SOCK_CLOEXEC): Do not condition on kernel version.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	[__x86_64__ || __sparc__] (__ASSUME_ACCEPT4_SYSCALL): Likewise.
	(__ASSUME_FUTEX_CLOCK_REALTIME): Define unconditionally.
	(__ASSUME_AT_RANDOM): Likewise.
	(__ASSUME_PREADV): Likewise.
	(__ASSUME_PWRITEV): Likewise.
	(__ASSUME_REQUEUE_PI): Do not condition on kernel version.
	(__ASSUME_F_GETOWN_EX): Define unconditionally.
	(__ASSUME_XFS_RESTRICTED_CHOWN): Likewise.
	* sysdeps/unix/sysv/linux/sysconf.c (__sysconf)
	[!__ASSUME_ARG_MAX_STACK_BASED]: Remove conditional code.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_O_CLOEXEC): Define unconditionally.
	(__ASSUME_PSELECT): Do not undefine conditionally.
	(__ASSUME_PPOLL): Likewise.
	(__ASSUME_ATFCTS): Likewise.
	(__ASSUME_SET_ROBUST_LIST): Likewise.
	(__ASSUME_UTIMENSAT): Likewise.
	(__ASSUME_FDATASYNC): Define unconditionally.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_SIGFRAME_V2): Likewise.
	)__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_PSELECT): Do not undefine conditionally.
	(__ASSUME_PPOLL): Likewise.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	(__ASSUME_PSELECT): Define unconditionally.
	(__ASSUME_PPOLL): Likewise.
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_O_CLOEXEC): Likewise.
	(__ASSUME_SOCK_CLOEXEC): Likewise.
	(__ASSUME_IN_NONBLOCK): Likewise.
	(__ASSUME_PIPE2): Likewise.
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_DUP3): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	(__ASSUME_EVENTFD2): Likewise.
	(__ASSUME_SIGNALFD4): Likewise.
	(__ASSUME_ACCEPT4_SYSCALL): Likewise.

2014-05-12  Andreas Schwab  <schwab@suse.de>

	[BZ #16932]
	* nis/nss_nis/nis-hosts.c (internal_gethostbyname2_r)
	(_nss_nis_gethostbyname4_r): Return error if item length is larger
	than maximum RPC packet size.
	* nis/nss_nis/nis-initgroups.c (initgroups_netid): Likewise.
	* nis/nss_nis/nis-network.c (_nss_nis_getnetbyname_r): Likewise.
	* nis/nss_nis/nis-service.c (_nss_nis_getservbyname_r)
	(_nss_nis_getservbyport_r): Likewise.

2014-05-12  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile (tests): Add tst-mallopt.
	* malloc/tst-mallopt.c: New file.

2014-05-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/armv7/strcmp.S: Use sfi_breg prefix on loads not from sp.
	[NO_THUMB]: Cope without cbz, cnbz, and orn instructions.

2014-05-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* elf/Makefile (tst-tlsmod5.so): Add $(no-as-needed).
	(tst-tlsmod6.so): Likewise.

2014-05-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/gnu/unwind-resume.c (libgcc_s_resume): Mark as noreturn.

2014-05-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16064]
	* sysdeps/i386/fpu/fegetenv.c: Include <unistd.h>, <ldsodefs.h>
	and <dl-procinfo.h>.
	(__fegetenv): Save SSE state in envp->__eip if supported.
	* sysdeps/i386/fpu/feholdexcpt.c (feholdexcept): Save SSE state in
	envp->__eip if supported.
	* sysdeps/i386/fpu/fesetenv.c: Include <unistd.h>, <ldsodefs.h>
	and <dl-procinfo.h>.
	(__fesetenv): Always set __eip, __cs_selector, __opcode,
	__data_offset and __data_selector in environment to 0.  Set SSE
	state if supported.
	* sysdeps/x86/fpu/Makefile [$(subdir) = math] (tests): Add
	test-fenv-sse.
	[$(subdir) = math] (CFLAGS-test-fenv-sse.c): Add -msse2
	-mfpmath=sse.
	* sysdeps/x86/fpu/test-fenv-sse.c: New file.

2014-05-09  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/preconfigure.ac: Set libc_commonpagesize
	and libc_relro_required for ARM.
	* sysdeps/arm/preconfigure: Regenerate.

2014-05-09  Dominik Vogt  <vogt@linux.vnet.ibm.com>
	    Stefan Liebler  <stli@linux.vnet.ibm.com>

	* config.make.in (enable-lock-elision): New Makefile variable.
	* configure.ac: Likewise.
	* configure: Regenerate.
	* sysdeps/s390/configure.ac:
	Add check for gcc transactions support.
	* sysdeps/s390/configure: Regenerate.
	* nptl/sysdeps/unix/sysv/linux/s390/Makefile: New file.
	Build elision files if enabled.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-conf.c: New file.
	Add lock elision support for s390.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-conf.h: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-lock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-timed.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-trylock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/elision-unlock.c: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/force-elision.h: Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_cond_lock.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_lock.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_timedlock.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/pthread_mutex_trylock.c:
	Likewise.
	* nptl/sysdeps/unix/sysv/linux/s390/lowlevellock.h:
	(__lll_timedlock_elision, __lll_lock_elision)
	(__lll_unlock_elision, __lll_trylock_elision)
	(lll_timedlock_elision, lll_lock_elision)
	(lll_unlock_elision, lll_trylock_elision): Add.
	* nptl/sysdeps/unix/sysv/linux/s390/bits/pthreadtypes.h
	(pthread_mutex_t): Add lock elision support for s390.

2014-05-14  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fclrexcpt.c: Cleanup.
	* sysdeps/arm/fedisblxcpt.c: Cleanup.
	* sysdeps/arm/feenablxcpt.c: Cleanup.
	* sysdeps/arm/fegetenv.c: Cleanup.
	* sysdeps/arm/fegetexcept.c: Cleanup.
	* sysdeps/arm/fegetround.c: Cleanup.
	* sysdeps/arm/feholdexcpt.c: Cleanup.
	* sysdeps/arm/fesetenv.c: Cleanup.
	* sysdeps/arm/fesetround.c: Cleanup.
	* sysdeps/arm/feupdateenv.c: Cleanup.
	* sysdeps/arm/fgetexcptflg.c: Cleanup.
	* sysdeps/arm/fraiseexcpt.c: Cleanup.
	* sysdeps/arm/fsetexcptflg.c: Cleanup.
	* sysdeps/arm/ftestexcept.c: Cleanup.
	* sysdeps/arm/get-rounding-mode.h: Cleanup.
	* sysdeps/arm/setfpucw.c: Cleanup.

2014-05-09  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/armv7/strcmp.S: New file.
	* NEWS: Mention addition of ARMv7 optimized strcmp.

2014-05-08  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig ($(common-objpfx)config.status): Fix patsubst uses to
	look for %.ac rather than %.in.

	* sysdeps/mach/hurd/configure.ac (inhibit_glue): Remove variable.
	* sysdeps/unix/sysv/linux/configure.ac: Likewise.
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* bits/utsname.h (_UTSNAME_DOMAIN_LENGTH): New macro, set to 0.

2014-05-07  Steve Ellcey  <sellcey@mips.com>

	[BZ #16922]
	* sysdeps/mips/sys/asm.h (INT_SUB): Fix definition.
	(LONG_SUB): Ditto.
	(PTR_SUB): Ditto.

2014-05-07  Andreas Schwab  <schwab@suse.de>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Advance address pointer
	when skipping over non-matching result from nscd.

2014-05-07  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #16876]
	* nptl/sockperf.c (client): Check socket return value.

	[BZ #16877]
	* nscd/selinux.c (nscd_request_avc_has_perm): Check if there is
	nscd security class.

2014-05-06  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/arm/nptl/unwind.h: File moved to ...
	* sysdeps/arm/unwind.h: ... here.

2014-05-06  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #16916]
	* sysdeps/unix/sysv/linux/sparc/bits/eventfd.h (EFD_SEMAPHORE):
	Define.

2014-05-06  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strncpy.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy.c: New file:
	multiarch strncpy for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-ppc64.c: New file
	* sysdeps/powerpc/powerpc64/multiarch/strncpy-power7.S: New file
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strpcpy, stpncpy
	multiarch optimizations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/power7/stpncpy.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy.c: New file:
	multiarch stpncpy for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-ppc64.c: New file
	* sysdeps/powerpc/powerpc64/multiarch/stpncpy-power7.S: New file

2014-05-06  Andreas Schwab  <schwab@suse.de>

	[BZ #16912]
	* gmon/mcount.c (_MCOUNT_DECL): Use
	atomic_compare_and_exchange_bool_acq instead of
	catomic_compare_and_exchange_bool_acq.

2014-05-05  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile (others, install-bin): Remove pldd.
	(pldd-modules): Variable removed.
	($(objpfx)pldd): Target removed.
	* sysdeps/unix/sysv/linux/Makefile [$(subdir) = elf]
	(others, install-bin): Append pldd here.
	($(objpfx)pldd): New target.

	* sysdeps/gnu/errlist.awk (BEGIN): Emit an initial #define of ERR_MAX
	to 0, so the first #if test emitted later doesn't see it undefined.
	(END): Emit "!defined ERRLIST_NO_COMPAT" to match what BEGIN does.
	* sysdeps/gnu/errlist.c: Regenerated.

2014-05-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr-ppc32.c
	[libc_hidden_builtin_def]: Define to empty value.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-ppc64.S:
	[libc_hidden_builtin_def]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memset-ppc64.S:
	[libc_hidden_builtin_def]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-ppc64.S:
	[libc_hidden_builtin_def]: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy.c (memcpy): Redefined to
	__redirect_memcpy and define ifunc as default hidden symbol.
	* sysdeps/powerpc/powerpc64/multiarch/memset.c (memset): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen.c (strlen): Likewise.

2014-05-04  Adam Conrad  <adconrad@0c3.net>

	* locale/iso-4217.def: Reintroduce XDR currency.

2014-05-04  Allan McRae  <allan@archlinux.org>

	* po/eo.po: Update Esperanto translation from translation project.

2014-05-02  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/x86_64/multiarch/init-arch.h:	Define FEATURE_INDEX_1 to 0,
	and FEATURE_INDEX_MAX to 1.
	[!__ASSEMBLER__]: Remove anonymous enum for FEATURE_INDEX_*.

2014-05-01  Steve Ellcey  <sellcey@mips.com>

	* iconvdata/ansi_x3.110.c (ONE_DIRECTION): Define.
	* iconvdata/armscii-8.c (ONE_DIRECTION): Define.
	* iconvdata/big5.c (ONE_DIRECTION): Define.
	* iconvdata/big5hkscs.c (ONE_DIRECTION): Define.
	* iconvdata/cp1255.c (ONE_DIRECTION): Define.
	* iconvdata/cp1258.c (ONE_DIRECTION): Define.
	* iconvdata/cp932.c (ONE_DIRECTION): Define.
	* iconvdata/euc-cn.c (ONE_DIRECTION): Define.
	* iconvdata/euc-jisx0213.c (ONE_DIRECTION): Define.
	* iconvdata/euc-jp-ms.c (ONE_DIRECTION): Define.
	* iconvdata/euc-jp.c (ONE_DIRECTION): Define.
	* iconvdata/euc-kr.c (ONE_DIRECTION): Define.
	* iconvdata/euc-tw.c (ONE_DIRECTION): Define.
	* iconvdata/gb18030.c (ONE_DIRECTION): Define.
	* iconvdata/gbbig5.c (ONE_DIRECTION): Define.
	* iconvdata/gbgbk.c (ONE_DIRECTION): Define.
	* iconvdata/gbk.c (ONE_DIRECTION): Define.
	* iconvdata/ibm1364.c (ONE_DIRECTION): Define.
	* iconvdata/ibm930.c (ONE_DIRECTION): Define.
	* iconvdata/ibm932.c (ONE_DIRECTION): Define.
	* iconvdata/ibm933.c (ONE_DIRECTION): Define.
	* iconvdata/ibm935.c (ONE_DIRECTION): Define.
	* iconvdata/ibm937.c (ONE_DIRECTION): Define.
	* iconvdata/ibm939.c (ONE_DIRECTION): Define.
	* iconvdata/ibm943.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-cn-ext.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-cn.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-jp-3.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-jp.c (ONE_DIRECTION): Define.
	* iconvdata/iso-2022-kr.c (ONE_DIRECTION): Define.
	* iconvdata/iso646.c (ONE_DIRECTION): Define.
	* iconvdata/iso8859-1.c (ONE_DIRECTION): Define.
	* iconvdata/iso_11548-1.c (ONE_DIRECTION): Define.
	* iconvdata/iso_6937-2.c (ONE_DIRECTION): Define.
	* iconvdata/iso_6937.c (ONE_DIRECTION): Define.
	* iconvdata/johab.c (ONE_DIRECTION): Define.
	* iconvdata/shift_jisx0213.c (ONE_DIRECTION): Define.
	* iconvdata/sjis.c (ONE_DIRECTION): Define.
	* iconvdata/t.61.c (ONE_DIRECTION): Define.
	* iconvdata/tcvn5712-1.c (ONE_DIRECTION): Define.
	* iconvdata/tscii.c (ONE_DIRECTION): Define.
	* iconvdata/uhc.c (ONE_DIRECTION): Define.
	* iconvdata/unicode.c (ONE_DIRECTION): Define.
	* iconvdata/utf-16.c (ONE_DIRECTION): Define.
	* iconvdata/utf-32.c (ONE_DIRECTION): Define.
	* iconvdata/utf-7.c (ONE_DIRECTION): Define.

2014-05-01  Roland McGrath  <roland@hack.frob.com>

	* libio/libioP.h [!_IO_USE_OLD_IO_FILE && !_G_IO_NO_BACKWARD_COMPAT]
	(_IO_JUMPS_OFFSET): Define to 0.

	* nptl/sysdeps/pthread/bits/libc-lock.h
	[_LIBC && (!NOT_IN_libc || IS_IN_libpthread)]
	(__libc_lock_define_initialized_recursive): Always define using
	initializer.  Modern compilers treat uninitialized (implicit zero) and
	explicit zero initializers the same (i.e. put the datum in bss).

2014-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	* nscd/nscd-client.h: Include <string.h>.

2014-05-01  David S. Miller  <davem@davemloft.net>

	[BZ #16885]
	* sysdeps/sparc/sparc64/strcmp.S: Fix end comparison handling when
	multiple zero bytes exist at the end of a string.
	Reported by Aurelien Jarno <aurelien@aurel32.net>

	* string/test-strcmp.c (check): Add explicit test for situations where
	there are multiple zero bytes after the first.

2014-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #16890]
	* stdio-common/vfprintf.c (process_arg) [%p]: Mark string as wide
	when compiling wprintf.
	* stdio-common/tstdiomisc.c (t3): New function.
	(main): Call it.

2014-05-01  Steve Ellcey  <sellcey@mips.com>

	* intl/iconv/skeleton.c (ONE_DIRECTION): Remove define.
	* iconv/gconv_simple.c (ONE_DIRECTION): Define.
	* iconvdata/8bit-gap.c (ONE_DIRECTION): Ditto.
	* iconvdata/8bit-generic.c (ONE_DIRECTION): Ditto.

2014-05-01  Steve Ellcey  <sellcey@mips.com>

	* stdlib/longlong.h: Updated from GCC.

2014-05-01  Will Newton  <will.newton@linaro.org>
	    Bernard Ogden  <bernie.ogden@linaro.org>

	* NEWS: Update fixed bug list.

	[BZ #15119]
	* sysdeps/unix/sysv/linux/arm/nptl/lowlevellock.c: Remove file.

2014-04-30  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/fenv_private.h (HAVE_RM_CTX): Define.
	(libc_feholdexcept_setround_sparc_ctx): New function.
	(libc_fesetenv_sparc_ctx): Likewise.
	(libc_feupdateenv_sparc_ctx): Likewise.
	(libc_feholdsetround_sparc_ctx): Likewise.
	(libc_feholdexcept_setround_ctx): Define.
	(libc_feholdexcept_setroundf_ctx): Likewise.
	(libc_feholdexcept_setroundl_ctx): Likewise.
	(libc_fesetenv_ctx): Likewise.
	(libc_fesetenvf_ctx): Likewise.
	(libc_fesetenvl_ctx): Likewise.
	(libc_feupdateenv_ctx): Likewise.
	(libc_feupdateenvf_ctx): Likewise.
	(libc_feupdateenvl_ctx): Likewise.
	(libc_feresetround_ctx): Likewise.
	(libc_feresetroundf_ctx): Likewise.
	(libc_feresetroundl_ctx): Likewise.
	(libc_feholdsetround_ctx): Likewise.
	(libc_feholdsetroundf_ctx): Likewise.
	(libc_feholdsetroundl_ctx): Likewise.

	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h (EMT_TAGOVF): Protect
	with __USE_GNU instead of XOPEN cpp guards.

	* sysdeps/sparc/bits/string.h (_STRING_ARCH_unaligned): Define to
	0.

	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h (EMT_TAGOVF): Protect
	with XOPEN cpp guards.

2014-04-30  Julian Brown  <julian@codesourcery.com>

	[BZ #16888]
	* sysdeps/arm/dl-machine.h (elf_machine_rela): Fix R_ARM_IRELATIVE
	handling.

2014-04-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9894]
	* sysdeps/unix/sysv/linux/configure.ac (LIBC_LINUX_VERSION):
	Change to 2.6.32.
	(arch_minimum_kernel): Change all 2.6.16 settings to 2.6.32.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/microblaze/configure.ac: Remove file.
	* sysdeps/unix/sysv/linux/microblaze/configure: Likewise.
	* sysdeps/unix/sysv/linux/tile/configure.ac: Likewise.
	* sysdeps/unix/sysv/linux/tile/configure: Likewise.
	* README: Update reference to required Linux kernel version.
	* manual/install.texi (Linux): Update reference to required Linux
	kernel headers version.
	* INSTALL: Regenerated.

	* conform/data/stdlib.h-data [POSIX] (stddef.h): Do not allow
	header inclusion.
	[POSIX] (limits.h): Likewise.
	[POSIX] (math.h): Likewise.
	[POSIX] (sys/wait.h): Likewise.
	* conform/data/string.h-data [POSIX || UNIX98] (strtok_r): Require
	function.
	[POSIX] (stddef.h): Do not allow header inclusion.

2014-04-30  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/generic/symbol-hacks.h (memcpy): Add internal alias.

2014-04-30  Yang Yingliang  <yangyingliang@huawei.com>

	* nptl/pthread_cond_broadcast.c (__pthread_cond_broadcast):
	Return immediately after lll_futex_wake.

2014-04-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16791]
	* nscd/nscd-client.h (datahead_init_common): Initialize entire
	structure.
	(datahead_init_pos): Call datahead_init_common early.
	(datahead_init_neg): Likewise.

	* nscd/nscd-client.h (datahead_init_common, datahead_init_pos,
	datahead_init_neg): New functions.
	* nscd/aicache.c (addhstaiX): Use them.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/netgroupcache.c (do_notfound): Likewise.
	(addgetnetgrentX): Likewise.
	(addinnetgrX): Likewise.
	* nscd/pwdcache.c (cache_addpw): Likewise.
	* nscd/servicescache.c (cache_addserv): Likewise.

2014-04-30  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Atsushi Onoe  <atsushi@onoe.org>

	[BZ #14308]
	[BZ #12994]
	[BZ #13651]
	* resolv/res_query.c (__libc_res_nsearch): Return if at least
	one response is valid.
	* resolv/res_send.c (send_dg): Check for validity of other
	response if the current response is a referral.

2014-04-29  Steve Ellcey  <sellcey@mips.com>

	* iconv/skeleton.c (ONE_DIRECTION): Set default value if not set.

2014-04-29  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #16823]
	* sysdeps/ieee754/ldbl-128/s_log1pl.c (__log1pl):
	Always divide by positive zero when computing -Inf result.
	* sysdeps/ieee754/dbl-64/s_log1p.c (__log1p): Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c (__log1pf): Likewise.

2014-04-28  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/fclrexcpt.c (__feclearexcept): Do not update
	FPSCR if value do not change.
	* sysdeps/powerpc/fpu/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/powerpc/fpu/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/powerpc/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/powerpc/fpu/fesetenv.c (__fesetenv): Likewise.
	* sysdeps/powerpc/fpu/fsetexcptflg.c (__fesetexceptflag): Likewise.
	* sysdeps/powerpc/fpu/fenv_libc.h (fenv_reg_to_exceptions): New helper
	function.

2014-05-29  Carlos O'Donell  <carlos@systemhalted.org>

	* sysdeps/hppa: Move directory from ports/sysdeps/hppa.
	* sysdeps/unix/sysv/linux/hppa: Move directory from
	ports/systeps/unix/sysv/linux/hppa.
	* README: Update listing for hppa-*-linux-gnu.

2014-04-28  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #16754]
	* manual/stdio.texi (Hook functions): Fix types of stream hook
	functions.
	[BZ #16854]
	* socket/sys/socket.h: Fix typo in comment.

2014-04-28  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/fenv_private.h: New file.
	* sysdeps/arm/math_private.h: New file.
	* sysdeps/arm/fpu_control.h: Add _FPU_MASK_NCZV and _FPU_MASK_EXCEPT.

2014-04-25  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/bits/link.h (La_x86_64_regs): Replace __int128
	with __int128_t.
	(La_x86_64_retval): Likewise.

2014-04-24  Ian Bolton  <ian.bolton@arm.com>

	* sysdeps/aarch64/fpu/fclrexcpt.c (feclearexcept): Don't write to
	fpsr if value didn't change.
	* sysdeps/aarch64/fpu/fedisblxcpt.c (fedisableexcept): Don't write
	to fpcr if value didn't change.
	* sysdeps/aarch64/fpu/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/aarch64/fpu/feholdexcpt.c (feholdexcept): Don't write to
	fpsr or fpcr if value didn't change.
	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/aarch64/fpu/fesetround.c (fesetround): Don't write to
	fpcr if value didn't change.
	* sysdeps/aarch64/fpu/fsetexcptflg.c (fesetexceptflag): Don't write
	to fpsr if value didn't change.

2014-02-23  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nptl/tst-sem3.c: Use test-skeleton.c
	(main): Rename to do_test.  Use return instead of
	exit.
	* nptl/tst-sem4.c: Use test-skeleton.c
	(main): Rename to do_test.

2014-04-22  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/bits/sigaction.h
	(struct sigaction): New struct member __glibc_reserved0, change
	type of sa_flags to int.

2014-04-22  Yufeng Zhang  <yufeng.zhang@arm.com>

	* stdlib/longlong.h (count_leading_zeros, count_trailing_zeros)
	(COUNT_LEADING_ZEROS_0): Define for AArch64.

2014-04-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nptl/sysdeps/unix/sysv/linux/sem_trywait.c: Include atomic.h.
	* nptl/sysdeps/unix/sysv/linux/sem_wait.c: Likewise.

2014-04-22  Will Newton  <will.newton@linaro.org>
	    Venkataramanan Kumar  <venkataramanan.kumar@linaro.org>

	* sysdeps/aarch64/__longjmp.S: Include stap-probe.h.
	(__longjmp): Add longjmp and longjmp_target SystemTap
	probes.
	* sysdeps/aarch64/setjmp.S: Include stap-probe.h.
	(__sigsetjmp): Add setjmp SystemTap probe.

2014-04-17  Carlos O'Donell  <carlos@redhat.com>

	* manual/intro.texi (Roadmap to the manual): Sort chapter listing to
	match manual order.

2014-04-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/unix/sysv/linux/powerpc/pthread_once.c: Remove file.

	* sysdeps/powerpc/fpu/fenv_private.h
	(libc_feholdexcept_setroundl_ctx): Define to
	libc_feholdexcept_setround_ppc_ctx.
	(libc_fesetenvl_ctx): Define to libc_fesetenv_ppc_ctx.
	(libc_feholdsetroundl_ctx): Define to libc_feholdsetround_ppc_ctx.
	(libc_feresetroundl_ctx): Define to libc_feresetround_ppc_ctx.
	(libc_feupdateenvl_ctx): libc_feupdateenv_ppc_ctx.

2014-04-17  Ian Bolton  <ian.bolton@arm.com>

	* sysdeps/aarch64/math-tests.h: New file.

2014-04-17  Sihai Yao  <sihai.ysh@alibaba-inc.com>

	* sysdeps/x86_64/multiarch/ifunc-defines.sym (COMMON_CPUID_INDEX_7):
	New.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Check and set bit_AVX2_Usable.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_AVX2_Usable): New
	macro.
	(bit_AVX2): Likewise.
	(index_AVX2_Usable): Likewise.
	(CPUID_AVX2): Likewise.
	(HAS_AVX2): Likewise.

2014-04-17  Will Newton  <will.newton@linaro.org>

	* manual/setjmp.texi (System V contexts): Add note that
	calling setcontext on a context created by a call to a
	signal handler is undefined.  Update text to note that
	setcontext from a signal handler is possible but not
	recommended.

	[BZ #16629]
	* stdlib/tst-setcontext.c: Include signal.h.
	(main): Check that the signal stack before and
	after swapcontext is the same.

	* sysdeps/unix/sysv/linux/aarch64/setcontext.S (__setcontext):
	Re-implement to restore registers in user code and avoid
	rt_sigreturn system call.

2014-04-17  Wilco  <wdijkstr@arm.com>

	* sysdeps/arm/math-tests.h: New file: Set ARM math-test settings.
	* sysdeps/generic/math-tests.h: Add macro (EXCEPTION_ENABLE_SUPPORTED).
	* math/test-fenv.c: Skip exception trap tests on targets which only
	support non-stop mode.

2014-04-17  Ian Bolton  <ian.bolton@arm.com>
	    Wilco Dijkstra  <wilco.dijkstra@arm.com>

	* sysdeps/aarch64/fpu/math_private.h (HAVE_RM_CTX)
	(libc_feholdsetround_aarch64_ctx)
	(libc_feholdsetround_ctx, libc_feholdsetroundf_ctx)
	(libc_feholdsetroundl_ctx, libc_feresetround_aarch64_ctx)
	(libc_feresetround_ctx, libc_feresetroundf_ctx)
	(libc_feresetroundl_ctx, libc_feresetround_noex_aarch64_ctx)
	(libc_feresetround_noex_ctx, libc_feresetround_noexf_ctx)
	(libc_feresetround_noexl_ctx): Define.

2014-04-16  Richard Henderson  <rth@redhat.com>

	* sysdeps/unix/sysv/linux/alpha/nptl/pthread_once.c: Remove.

	* sysdeps/alpha/Makefile [debug] (CFLAGS-backtrace.c): Enable
	unwind tables.

	* sysdeps/unix/alpha/sysdep.h (__pointer_chk_guard): Remove
	const from the non-libc, non-ldso copy.

	* sysdeps/alpha/libm-test-ulps: Regenerate.

2014-04-16  Ian Bolton  <ian.bolton@arm.com>
	    Wilco Dijkstra  <wilco.dijkstra@arm.com>

	* sysdeps/aarch64/fpu/math_private.h: New file.

2014-04-16  Marcus Shawcroft  <marcus.shawcroft@arm.com>

	* sysdeps/aarch64/libm-test-ulps: Regenerate.

2014-04-16  Igor Zamyatin  <igor.zamyatin@intel.com>

	[BZ #16275]
	* sysdeps/x86_64/bits/link.h (La_x86_64_regs): Add lr_bnd.
	(La_x86_64_retval): Add lrv_bnd0 and lrv_bnd1.
	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Save
	Intel MPX bound registers before _dl_profile_fixup.
	* sysdeps/x86_64/dl-trampoline.h: Restore Intel MPX bound
	registers after _dl_profile_fixup.  Save and restore bound
	registers bnd0/bnd1 when calling _dl_call_pltexit.
	* sysdeps/x86_64/link-defines.sym (BND_SIZE): New.
	(LR_BND_OFFSET): Likewise.
	(LRV_BND0_OFFSET): Likewise.
	(LRV_BND1_OFFSET): Likewise.

2014-04-16  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/tls.h (dtv, dtv_t, tcbhead_t): Move declarations
	to...
	* sysdeps/mach/hurd/i386/tls.h: ... here.
	(tcbhead_t): Add multiple_threads, sysinfo, stack_guard,
	pointer_guard, gscope_flag, private_futex, __private_tm, __private_ss
	fields.

2014-04-16  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/munmap.c (__munmap): Return EINVAL if `addr' is 0.

2014-04-16  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-04-16  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #14770]
	* sysdeps/s390/configure.ac: Check for Binutils >= 2.24.
	* sysdeps/s390/configure: Regenerate.

	[BZ #16824]
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_y1l):
	Set round-to-nearest internally to reduce error accumulation.

2014-04-16  Alan Modra  <amodra@gmail.com>

	[BZ #16740]
	[BZ #16619]
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c (__frexpl): Rewrite.
	* math/libm-test.inc (frexp_test_data): Add tests.
	* NEWS: Update fixed bug list.

2014-04-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Depend on libraries in build directory.
	(bench-math): Separate out math tests.
	(bench-pthread): Separate out pthread tests.
	(bench): Include math and pthread tests.

2014-04-14  Carlos O'Donell  <carlos@redhat.com>

	[BZ #16831]
	* csu/libc-start.c (LIBC_START_MAIN) [!SHARED]: Call
	_dl_debug_initialize.

	* configure.ac: Remove SELinux header check.
	* configure: Regenerate.
	* nscd/selinux.c (perms): Array of const char* to permission names.
	(nscd_request_avc_has_perm): Call security_deny_unknown to find
	default policy. Call string_to_security_class and string_to_av_perm to
	translate strings. Enforce default policy and call avs_has_perm with
	results of translated strings.

2014-04-13  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2014-04-12  Allan McRae  <allan@archlinux.org>

	[BZ #16838]
	* manual/string.texi (Collation Functions): Fix qsort argument
	order in example.
	Reported by David C. Rankin <drankinatty@suddenlinkmail.com>.

2014-04-11  Chris Metcalf  <cmetcalf@tilera.com>

	* math/test-fenv-preserve.c [FE_ALL_EXCEPT == 0] (do_test):
	Make the test a no-op if there are no exceptions defined.

2014-04-11  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/Makefile (tests): make tst-dlopen-aout conditional on
	enable-hardcoded-path-in-tests

2014-04-11  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile (extra-objs): Add json-lib.o.
	(bench-func): Tidy up JSON output.
	* benchtests/bench-skeleton.c: Include json-lib.h.
	(main): Use JSON library functions to do output of
	benchmark results.
	* benchtests/bench-timing-type.c (main): Output the
	timing type simply, leaving formatting to the user.
	* benchtests/json-lib.c: New file.
	* benchtests/json-lib.h: Likewise.

2014-04-11  Torvald Riegel  <triegel@redhat.com>

	[BZ #15215]
	* nptl/sysdeps/unix/sysv/linux/sparc/pthread_once.c: Moved to ...
	* nptl/sysdeps/unix/sysv/linux/pthread_once.c: ... here.  Add missing
	memory barriers.  Add comments.
	* sysdeps/unix/sysv/linux/aarch64/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/arm/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/ia64/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/m68k/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/mips/nptl/pthread_once.c: Remove file.
	* sysdeps/unix/sysv/linux/tile/nptl/pthread_once.c: Remove file.

2014-04-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/s390-32/configure.ac: Unify file with ...
	* sysdeps/s390/s390-64/configure.ac: ... this ...
	* sysdeps/s390/configure.ac: ... to here.
	* sysdeps/s390/s390-32/configure: Delete file.
	* sysdeps/s390/s390-64/configure: Delete file.
	* sysdeps/s390/configure: Regenerate.

2014-04-11  Joseph Anthony Pasquale Holsten  <joseph@josephholsten.com>

	* resolv/res_query.c (__libc_res_nsearch): Fix typo in comment.

2014-04-11  Will Newton  <will.newton@linaro.org>

	* malloc/malloc.c [!MALLOC_DEBUG]: #define MALLOC_DEBUG
	to zero if it is not defined elsewhere.  (mtrim): Test
	the value of MALLOC_DEBUG with #if rather than #ifdef.

2014-04-10 Torvald Riegel  <triegel@redhat.com>

	* benchtests/pthread_once-inputs: New file.
	* benchtests/pthread_once-source.c: New file.
	* benchtests/README: Update documentation.

2014-04-09  Igor Zamyatin  <igor.zamyatin@intel.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #16275]
	* config.h.in (HAVE_MPX_SUPPORT): New #undef.
	* sysdeps/x86_64/configure.ac: Set HAVE_MPX_SUPPORT.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/dl-trampoline.S (REGISTER_SAVE_AREA): New
	macro.
	(REGISTER_SAVE_RAX): Likewise.
	(REGISTER_SAVE_RCX): Likewise.
	(REGISTER_SAVE_RDX): Likewise.
	(REGISTER_SAVE_RSI): Likewise.
	(REGISTER_SAVE_RDI): Likewise.
	(REGISTER_SAVE_R8): Likewise.
	(REGISTER_SAVE_R9): Likewise.
	(REGISTER_SAVE_BND0): Likewise.
	(REGISTER_SAVE_BND1): Likewise.
	(REGISTER_SAVE_BND2): Likewise.
	(_dl_runtime_resolve): Use them.  Save and restore Intel MPX
	bound registers when calling _dl_fixup.

2014-04-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* bits/string.h (_STRING_ARCH_unaligned): Define it to 0.
	* crypt/sha256.c (_STRING_ARCH_unaligned): Check its value instead
	of its definition.
	* iconv/gconv_simple.c (_STRING_ARCH_unaligned): Likewise.
	* iconv/loop.c (_STRING_ARCH_unaligned): Likewise.
	* iconv/skeleton.c (_STRING_ARCH_unaligned): Likewise.
	* nscd/nscd_gethst_r.c (_STRING_ARCH_unaligned): Likewise.
	* nscd/nscd_getserv_r.c (_STRING_ARCH_unaligned): Likewise.
	* nscd/nscd_helper.c (_STRING_ARCH_unaligned): Likewise.
	* resolv/res_send.c (_STRING_ARCH_unaligned): Likewise.

2014-04-09  Peter Brett  <peter@peter-b.co.uk>

	[BZ #15514]
	* sysdeps/posix/pathconf.c (__pathconf): Use statvfs64() for
	pathconf(_PC_NAME_MAX).

2014-04-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/pthread/pthread.h (__PTHREAD_MUTEX_HAVE_ELISION):
	Remove macro usage.
	(__PTHREAD_SPINS): Move definition to ...
	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	(__PTHREAD_SPINS): ... here.
	* nptl/sysdeps/unix/sysv/linux/s390/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* nptl/sysdeps/unix/sysv/linux/sh/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* nptl/sysdeps/unix/sysv/linux/sparc/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* nptl/sysdeps/unix/sysv/linux/x86/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/aarch64/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/alpha/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/arm/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/ia64/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/m68k/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/mips/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.
	* sysdeps/unix/sysv/linux/tile/nptl/bits/pthreadtypes.h
	(__PTHREAD_SPIN): Likewise.

	* sysdeps/powerpc/powerpc32/power6x/fpu/Implies: New file.
	* sysdeps/powerpc/powerpc64/power6x/fpu/Implies: new file.
	* sysdeps/powerpc/powerpc64/power6x/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power5+/fpu/Implies: Remove multiarch
	imply folder.
	* sysdeps/powerpc/powerpc64/power5/fpu/Implies: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/Implies: Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/Implies: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/multiarch/Implies: Adjust
	correct imply path.
	* sysdeps/powerpc/powerpc64/power7/strncat.S (STRLEN): Define correct
	strlen symbol for non multi-arch builds.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S (__isnan): Add
	missing hidden_def and weak_alias.

2014-04-08  Carlos O'Donell  <carlos@redhat.com>

	* manual/ipc.texi (sem_close): AC-unsafe because of aculock.

2014-04-07  Will Newton  <will.newton@linaro.org>

	* string/basename.c [HAVE_CONFIG_H]: Remove #ifdef and
	and contents.  [!_LIBC] Remove #ifndef and contents.
	(basename): Use ANSI prototype.  [_LIBC] Remove #idef.
	* string/memccpy.c (__memccpy): Use ANSI prototype.
	* string/memfrob.c (memfrob): Likewise.
	* string/strcoll.c (STRCOLL): Likewise.
	* string/strlen.c (strlen): Likewise.
	* string/strtok.c (STRTOK): Likewise.
	* string/strcat.c: Remove unused #include of memcopy.h.
	(strcat): Use ANSI prototype.
	* string/strchr.c: Remove unused #include of memcopy.h.
	(strchr): Use ANSI prototype.
	* string/strcmp.c: Remove unused #include of memcopy.h.
	(strcmp): Use ANSI prototype.
	* string/strcpy.c: Remove unused #include of memcopy.h.
	(strcpy): Use ANSI prototype.

2014-04-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* Makeconfig (CPPFLAGS): Add config-extra-cppflags to list.
	* config.make.in (config-extra-cppflags): Set it from
	libc_extra_cppflags.
	* configure.ac (libc_extra_cflags): Make it accumulate over
	configure fragments.
	(libc_extra_cppflags): New flag.
	* configure. Regenerate.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure.ac
	(libc_cv_ppc64_def_call_elf): Define it to yes if compiler does
	not set _CALL_ELF and add -D_CALL_ELF=1 to libc_extra_cppflags.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure: Regenerate.

	[BZ #16815]
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S (__nearbyint): Fix
	result for FE_DOWNWARD rounding mode.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyintf.S (__nearbyintf):
	Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-04-04  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/tile/dl-runtime.c (_dl_unmap): Fix cut-and-paste bug
	in function argument name.

2014-04-03  David Svoboda  <svoboda@cert.org>

	[BZ #5666]
	* manual/stdio.texi (Line-Oriented Input): Document buffer allocation
	explicitly.

2014-04-03  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-unmap-segments.h: New file.
	* sysdeps/generic/ldsodefs.h
	(DL_UNMAP): Use _dl_unmap_segments in place of __munmap.
	* elf/dl-close.c: Include <dl-unmap-segments.h>.
	* elf/dl-fptr.c: Likewise.
	(_dl_unmap): Use _dl_unmap_segments in place of __munmap.
	* sysdeps/aarch64/tlsdesc.c: Likewise.
	* sysdeps/arm/tlsdesc.c: Likewise.
	* sysdeps/i386/tlsdesc.c: Likewise.
	* sysdeps/tile/dl-runtime.c: Likewise.
	* sysdeps/x86_64/tlsdesc.c: Likewise.
	* elf/dl-load.h: New file.
	* elf/dl-load.c: Include it.
	(MAP_FILE, MAP_COPY, MAP_BASE_ADDR):
	Macros moved to dl-load.h.
	(ELF_PREFERRED_ADDRESS_DATA, ELF_PREFERRED_ADDRESS): Likewise.
	(_dl_map_object_from_fd): Type 'struct loadcmd' moved to dl-load.h.
	Use _dl_unmap_segments in place of __munmap.
	Break out segment-mapping loop into ...
	* elf/dl-map-segments.h (_dl_map_segments): ... here, in new file.

2014-04-03  Will Newton  <will.newton@linaro.org>

	* elf/dl-lookup.c (do_lookup_x): Remove comment
	referring to nested function and move variable
	declarations down to before first use.

2014-04-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16799]
	[BZ #16800]
	* math/s_catan.c (__catan): Avoid passing -0 denominator to atan2
	with 0 numerator.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* sysdeps/ieee754/flt-32/e_logf.c (__ieee754_logf): Always divide
	by positive zero when computing -Inf result.
	* math/libm-test.inc (catan_test): Use ALL_RM_TEST.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16789]
	* math/s_clog.c (__clog): Use math_force_eval to ensure underflow
	instead of using underflowing value in computing result.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Use ALL_RM_TEST.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-04-02  Alan Modra  <amodra@gmail.com>

	[BZ #16739]
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c (__nextafterl): Correct
	output when value is near a power of two.  Use int64_t for lx and
	remove casts.  Use decimal rather than hex exponent constants.
	Don't use long double multiplication when double will suffice.
	* math/libm-test.inc (nextafter_test_data): Add tests.
	* NEWS: Add 16739 and 16786 to bug list.

	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Correct stream hint.

	* sysdeps/powerpc/powerpc64/start.S: Add @toc to toc symbol reference.

2014-04-01  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile (CFLAGS-bench-ffs.c): Add
	-fno-builtin.  (CFLAGS-bench-ffsll.c): Likewise.

2014-04-01  Florian Weimer  <fweimer@redhat.com>

	[BZ #13347]
	* nptl/nptl-init.c (sighandler_setxid): Check system call result.
	* nptl/tst-setuid2.c: New file.
	* nptl/Makefile (xtests): Add tst-setuid2.

2014-04-01  Alan Modra  <amodra@gmail.com>

	[BZ #16786]
	* sysdeps/powerpc/powerpc64/fpu/s_copysign.S: Don't trash stack.

2014-03-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6803]
	[BZ #6804]
	* math/w_scalb.c (__scalb): For non-SVID mode, check result and
	set errno as appropriate.
	* math/w_scalbf.c (__scalbf): Likewise.
	* math/w_scalbl.c (__scalbl): Likewise.
	* math/gen-libm-test.pl (parse_args): Handle ERRNO_PLUS_OFLOW,
	ERRNO_MINUS_OFLOW, ERRNO_PLUS_UFLOW and ERRNO_MINUS_UFLOW.
	* math/libm-test.inc (scalb_test_data): Add errno expectations.
	Add more NaN tests.

	[BZ #16349]
	* math/w_atan2.c: Include <errno.h>.
	(__atan2): Set errno for result underflowing to zero.
	* math/w_atan2f.c: Include <errno.h>.
	(__atan2f): Set errno for result underflowing to zero.
	* math/w_atan2l.c: Include <errno.h>.
	(__atan2l): Set errno for result underflowing to zero.
	* math/auto-libm-test-in: Don't allow missing errno for some atan2
	tests.
	* math/auto-libm-test-out: Regenerated.

2014-03-31  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power8/fpu/s_finite.S (MFVSRD_R3_V1):
	Encode instruction correctly in little endian.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinf.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llrint.S (MFVSRD_R3_V1):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llround.S (MFVSRD_R3_V1):
	Likewise.

2014-03-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9894]
	* sysdeps/unix/sysv/linux/kernel-features.h
	[__sparc__ && !__arch64__ && !__sparc_v9__]
	(__ASSUME_SET_ROBUST_LIST): Do not define.
	[__sparc__ && !__arch64__ && !__sparc_v9__]
	(__ASSUME_FUTEX_LOCK_PI): Likewise.
	[__sparc__ && !__arch64__ && !__sparc_v9__] (__ASSUME_REQUEUE_PI):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	(__ASSUME_FUTEX_LOCK_PI): Undefine.
	(__ASSUME_REQUEUE_PI): Likewise.
	(__ASSUME_SET_ROBUST_LIST): Likewise.
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x030a00] (__ASSUME_FUTEX_LOCK_PI):
	Undefine.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_FUTEX_LOCK_PI):
	Likewise.
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_REQUEUE_PI):
	Likewise.
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_SET_ROBUST_LIST):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[__mips == 1 || _MIPS_ARCH_R5900] (__ASSUME_FUTEX_LOCK_PI):
	Undefine.
	[__mips == 1 || _MIPS_ARCH_R5900] (__ASSUME_REQUEUE_PI): Likewise.
	[__mips == 1 || _MIPS_ARCH_R5900] (__ASSUME_SET_ROBUST_LIST):
	Likewise.

	[BZ #16648]
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_FUTIMESAT): Define.
	* sysdeps/unix/sysv/linux/microblaze/futimesat.c: New file.

2014-03-31  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile (bench): Add ffs and ffsll to list
	of tests.
	* benchtests/ffs-inputs: New file.
	* benchtests/ffsll-inputs: Likewise.

2014-03-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16770]
	* math/e_scalb.c (__ieee754_scalb): Check second argument is not
	too large before casting to int.
	* math/e_scalbf.c (__ieee754_scalbf): Likewise.
	* math/e_scalbl.c (__ieee754_scalbl): Likewise.
	* math/libm-test.inc (scalb_test_data): Add more tests.

2014-03-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (DETAILED_OPT): New make option.
	(bench-func): Run benchmark program with -d if DETAILED_OPT is
	set.
	* benchtests/bench-skeleton.c: Include stdbool.h.
	(main): Store and print timings per input.
	* benchtests/scripts/bench.py (STRUCT_TEMPLATE): Add timing
	member to each argument value.
	(EPILOGUE): Define new macros RESULT and RESULT_ACCUM.
	(_print_arg_data): Initialize per-input timing to 0.

	* benchtests/Makefile (timing-type): New binary.
	(bench-clean): Also remove bench-timing-type.
	(bench): New target for timing-type.
	(bench-func): Print output in JSON format.
	* benchtests/bench-skeleton.c (main): Print output in JSON
	format.
	* benchtests/bench-timing-type.c: New file.
	* benchtests/bench-timing.h (TIMING_TYPE): New macro.
	(TIMING_PRINT_STATS): Remove.
	* benchtests/scripts/bench.py (_print_arg_data): Store variant
	name separately.

	* benchtests/bench-modf.c: Remove.
	* benchtests/modf-inputs: New inputs file.

2014-03-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16362]
	* math/s_clog10.c (M_PI_LOG10E): New macro.
	(__clog10): Use M_PI_LOG10E instead of M_PI when real and
	imaginary parts are 0.
	* math/s_clog10f.c (M_PI_LOG10Ef): New macro.
	(__clog10f): Use M_PI_LOG10Ef instead of M_PI when real and
	imaginary parts are 0.
	* math/s_clog10l.c (M_PI_LOG10El): New macro.
	(__clog10l): Use M_PI_LOG10El instead of M_PIl when real and
	imaginary parts are 0.
	* math/libm-test.inc (clog10_test_data): Update expected results
	for when real and imaginary parts are 0.

2014-03-27  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-load.c: Finish conversion of __builtin_expect into
	__glibc_{un}likely.

2014-03-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16348]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL) [!USE_AS_EXPM1L]: Use
	1+x for argument with exponent below -67.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL) [!USE_AS_EXPM1L]:
	Likewise.
	* math/auto-libm-test-in: Add more tests of exp.
	* math/auto-libm-test-out: Regenerated.

2014-03-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16759]
	* inet/getnetgrent_r.c (get_nonempty_val): New function.
	(nscd_getnetgrent): Use it.

	[BZ #16760]
	* nscd/netgroupcache.c (addgetnetgrentX): Use memmove instead
	of stpcpy.

2014-03-27  Andi Kleen  <ak@linux.intel.com>

	* nptl/sysdeps/unix/sysv/linux/x86_64/lowlevellock.h (lll_lock)
	(lll_robust_lock, lll_cond_lock, lll_timedlock)
	(lll_robust_cond_lock, lll_robust_timedlock, lll_unlock)
	(lll_robust_unlock): Remove out of line section. Use cfi
	intrinsics.
	(LLL_STUB_UNWIND_INFO*): Remove.
	* nptl/sysdeps/unix/sysv/linux/i386/lowlevellock.h (lll_lock)
	(lll_robust_lock, lll_cond_lock, lll_timedlock)
	(lll_robust_cond_lock, lll_robust_timedlock, lll_unlock)
	(lll_robust_unlock): Remove out of line section. Use cfi
	intrinsics.
	(LLL_STUB_UNWIND_INFO*): Remove.

2014-03-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16758]
	* nscd/netgroupcache.c (addinnetgrX): Succeed if triplet has
	blank values.

2014-03-26  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-load.c: Convert __builtin_expect into __glibc_{un}likely.

2014-03-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16198]
	* sysdeps/x86_64/fpu/fegetenv.c (fegetenv): Use fldenv after
	fnstenv.
	* math/test-fenv-preserve.c: New file.
	* math/Makefile (tests): Add test-fenv-preserve.

2014-03-26  Will Newton <will.newton@linaro.org>

	* benchtests/bench-strtod.c (TIMEOUT): Define to 10.

2014-03-25  Roland McGrath  <roland@hack.frob.com>

	* scripts/versionlist.awk: Partition the version sets and emit all
	GLIBC_* (sorted) before all others (sorted).

2014-03-25  Joseph Myers  <joseph@codesourcery.com>

	* elf/Versions (libc) [EXPORT_UNWIND_FIND_FDE]: Add empty
	GLIBC_2.2.5 version.

2014-03-25 Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* scripts/localplt.awk: Check for PLT generated by internal IFUNC
	calls.

	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h: Revert
	previous change.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-03-25  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Add out_fail2
	label to be used after in6ailist is initialized.

2014-03-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/unix/sysv/linux/powerpc/bits/pthreadtypes.h
	(__PTHREAD_MUTEX_HAVE_ELISION): New define.

2014-03-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16357]
	[BZ #16599]
	* math/gen-auto-libm-tests.c (fp_format_desc): Add field
	min_plus_half.
	(fp_formats): Update initializers.
	(init_fp_formats): Initialize new field.
	(output_for_one_input_case): Allow underflow for results up to
	min_plus_half.
	* math/libm-test.inc (log1p_test): Use ALL_RM_TEST.
	* math/auto-libm-test-in: Don't mark some underflows from asin and
	atanh as spurious.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-25  Andreas Schwab  <schwab@suse.de>

	* libio/Makefile (tst-ftell-partial-wide-ENV)
	(tst-ftell-active-handler-ENV): Define.

2014-03-25  Stefan Liebler <stli@linux.vnet.ibm.com>

	* NEWS: Add 16712, 16713, 16714 to fixed bug list.

2014-03-24  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/tst-dlopen-aout.c: Adjust comments. Use test-skeleton.c

2014-03-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/dbl-64/e_exp.c: Include <math.h>.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c
	[HAVE_FMA4_SUPPORT || HAVE_AVX_SUPPORT]: Likewise.

2014-03-24  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #16634]
	* elf/dl-load.c (open_verify): Add mode parameter.
	Error early when ET_EXEC and mode does not have __RTLD_OPENEXEC.
	(open_path): Change from boolean 'secure' to complete flag 'mode'
	(_dl_map_object): Adjust.
	* elf/Makefile (tests): Add tst-dlopen-aout.
	* elf/tst-dlopen-aout.c: New test.

2014-03-24  Stefan Liebler <stli@linux.vnet.ibm.com>

	[BZ #16714]
	* sysdeps/unix/sysv/linux/s390/bits/stat.h
	(struct stat): Rename member pad0 to __glibc_reserved0.

	[BZ #16712]
	* sysdeps/s390/s390-32/bits/wordsize.h
	(__WORDSIZE32_SIZE_ULONG): New define.
	* sysdeps/s390/s390-64/bits/wordsize.h
	(__WORDSIZE32_SIZE_ULONG): Likewise.
	* sysdeps/generic/stdint.h (SIZE_MAX):
	Define as UL if __WORDSIZE32_SIZE_ULONG.

	[BZ #16713]
	* sysdeps/unix/sysv/linux/s390/bits/sigaction.h
	(__glibc_reserved0): New variable.
	(sa_flags): Change type to int.

	* posix/Makefile (before-compile): Use += before-compile instead
	of a :=.

	* nptl/sysdeps/unix/sysv/linux/s390/bits/pthreadtypes.h
	(__PTHREAD_MUTEX_HAVE_ELISION): New define.

2014-03-20  Andreas Schwab  <schwab@suse.de>

	[BZ #16743]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Properly skip over
	non-matching result from nscd.

2014-03-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/bench.py: Moved to ...
	* benchtests/scripts/bench.py: ... here.
	* benchtests/Makefile ($(objpfx)bench-%.c): Adjust.

2014-03-24  Andreas Schwab  <schwab@suse.de>

	[BZ #16002]
	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Use
	alloca_account and account alloca use for struct in6ailist.

2014-03-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16284]
	* sysdeps/ieee754/dbl-64/e_exp.c (__ieee754_exp): Use original
	rounding mode to recompute results that overflow to infinity or
	underflow to zero.
	* math/auto-libm-test-in: Don't mark tests as expected to fail for
	bug 16284.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (ccos_test): Use ALL_RM_TEST.
	(ccosh_test): Likewise.
	(csin_test_data): Use plus_oflow.
	(csin_test): Use ALL_RM_TEST.
	(csinh_test_data): Use plus_oflow.
	(csinh_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/bits/wordsize.h: Include <sgidefs.h>.
	* sysdeps/unix/sysv/linux/mips/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/setrlimit64.c: Likewise.

	[BZ #16731]
	* sysdeps/i386/fpu/e_log.S (__ieee754_log): Take absolute value
	when x - 1 is zero.
	* sysdeps/i386/fpu/e_logf.S (__ieee754_logf): Likewise.
	* sysdeps/i386/fpu/e_logl.S (__ieee754_logl): Likewise.
	* sysdeps/i386/i686/fpu/e_logl.S (__ieee754_logl): Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Return +0 when
	argument is 1.
	* sysdeps/ieee754/ldbl-128/e_logl.c (__ieee754_logl): Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Take absolute value when x - 1 is
	zero.
	* math/libm-test.inc (log_test): Use ALL_RM_TEST.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/bench.pl: Remove file.
	* scripts/bench.py: New benchmark script.
	* benchtests/Makefile ($(objpfx)bench-%.c): Use it.
	* benchtests/README: Mention python dependency.
	* scripts/pylintrc: New file.
	* scripts/pylint: New file.

	* bits/mathdef.h: Use #ifdef instead of #if.
	* sysdeps/arm/bits/mathdef.h [defined __USE_ISOC99 && defined
	_MATH_H && !defined _MATH_H_MATHDEF]: Likewise.
	* sysdeps/tile/bits/mathdef.h [defined __USE_ISOC99 && defined
	_MATH_H && !defined _MATH_H_MATHDEF]: Likewise.
	* sysdeps/x86/bits/mathdef.h [defined __USE_ISOC99 && defined
	_MATH_H && !defined _MATH_H_MATHDEF]: Likewise.

2014-03-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>
	    Vidya Ranganathan  <vidya@linux.vnet.ibm.com>

	* string/strpbrk.c (strpbrk): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strpbrk-power7
	and strpbrk-ppc64 objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add new strpbrk optimized symbols.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk-power7.S: New file:
	multiarch strpbrk for POWER7.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk-ppc64.c: New file:
	multiarch strpbrk for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strpbrk.c: New file: strpbrk
	ifunc selector.
	* sysdeps/powerpc/powerpc64/power7/strpbrk.S: New file: optimited
	strpbrk for POWER7.

2014-03-20  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (asinh_test): Use ALL_RM_TEST.
	(atan_test): Likewise.
	(atanh_test_data): Use NO_TEST_INLINE for two tests.
	(atanh_test): Use ALL_RM_TEST.
	(atan2_test_data): Likewise.
	(cabs_test): Likewise.
	(cacosh_test): Likewise.
	(carg_test): Likewise.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	(cbrt_test): Likewise.
	(csqrt_test): Likewise.
	(erf_test): Likewise.
	(erfc_test): Likewise.
	(pow10_test): Likewise.
	(exp2_test): Likewise.
	(hypot_test): Likewise.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(lgamma_test): Likewise.
	(gamma_test): Likewise.
	(sincos_test): Likewise.
	(tanh_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* string/strcspn.c (strcspn): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcspn-power7
	and strcspn-ppc64 objects.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Add new strcspn optimized symbols.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn-power7.S: New file:
	multiarch strcspn for POWER7.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn-ppc64.c: New file:
	multiarch strcspn for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strcspn.c: New file: strcspn
	ifunc selector.
	* sysdeps/powerpc/powerpc64/power7/strcspn.S: New file: optimited
	strcspn for POWER7.

2014-03-20  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (generate_testfile): Expect only function
	name as argument to AUTO_TESTS_* and pass results for all rounding
	modes to parse_args.
	(parse_auto_input): Separate inputs of automatic tests from
	outputs before storing in %auto_tests.
	* math/libm-test.inc (acos_test_data): Update call to
	AUTO_TESTS_f_f.
	(acos_test): Use ALL_RM_TEST.
	(acos_tonearest_test_data): Remove.
	(acos_test_tonearest): Likewise.
	(acos_towardzero_test_data): Likewise.
	(acos_test_towardzero): Likewise.
	(acos_downward_test_data): Likewise.
	(acos_test_downward): Likewise.
	(acos_upward_test_data): Likewise.
	(acos_test_upward): Likewise.
	(acosh_test_data): Update call to AUTO_TESTS_f_f.
	(asin_test_data): Likewise.
	(asin_test): Use ALL_RM_TEST.
	(asin_tonearest_test_data): Remove.
	(asin_test_tonearest): Likewise.
	(asin_towardzero_test_data): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_downward_test_data): Likewise.
	(asin_test_downward): Likewise.
	(asin_upward_test_data): Likewise.
	(asin_test_upward): Likewise.
	(asinh_test_data): Update call to AUTO_TESTS_f_f.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(atan2_test_data): Update call to AUTO_TESTS_ff_f.
	(cabs_test_data): Update call to AUTO_TESTS_c_f.
	(carg_test_data): Likewise.
	(cbrt_test_data): Update call to AUTO_TESTS_f_f.
	(ccos_test_data): Update call to AUTO_TESTS_c_c.
	(ccosh_test_data): Likewise.
	(cexp_test_data): Likewise.
	(clog_test_data): Likewise.
	(clog10_test_data): Likewise.
	(cos_test_data): Update call to AUTO_TESTS_f_f.
	(cos_test): Use ALL_RM_TEST.
	(cos_tonearest_test_data): Remove.
	(cos_test_tonearest): Likewise.
	(cos_towardzero_test_data): Likewise.
	(cos_test_towardzero): Likewise.
	(cos_downward_test_data): Likewise.
	(cos_test_downward): Likewise.
	(cos_upward_test_data): Likewise.
	(cos_test_upward): Likewise.
	(cosh_test_data): Update call to AUTO_TESTS_f_f.
	(cosh_test): Use ALL_RM_TEST.
	(cosh_tonearest_test_data): Remove.
	(cosh_test_tonearest): Likewise.
	(cosh_towardzero_test_data): Likewise.
	(cosh_test_towardzero): Likewise.
	(cosh_downward_test_data): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_upward_test_data): Likewise.
	(cosh_test_upward): Likewise.
	(cpow_test_data): Update call to AUTO_TESTS_cc_c.
	(csqrt_test_data): Update call to AUTO_TESTS_c_c.
	(ctan_test_data): Likewise.
	(ctan_test): Use ALL_RM_TEST.
	(ctan_tonearest_test_data): Remove.
	(ctan_test_tonearest): Likewise.
	(ctan_towardzero_test_data): Likewise.
	(ctan_test_towardzero): Likewise.
	(ctan_downward_test_data): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_upward_test_data): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test_data): Update call to AUTO_TESTS_c_c.
	(ctanh_test): Use ALL_RM_TEST.
	(ctanh_tonearest_test_data): Remove.
	(ctanh_test_tonearest): Likewise.
	(ctanh_towardzero_test_data): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_downward_test_data): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_upward_test_data): Likewise.
	(ctanh_test_upward): Likewise.
	(erf_test_data): Update call to AUTO_TESTS_f_f.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp_test): Use ALL_RM_TEST.
	(exp_tonearest_test_data): Remove.
	(exp_test_tonearest): Likewise.
	(exp_towardzero_test_data): Likewise.
	(exp_test_towardzero): Likewise.
	(exp_downward_test_data): Likewise.
	(exp_test_downward): Likewise.
	(exp_upward_test_data): Likewise.
	(exp_test_upward): Likewise.
	(exp10_test_data): Update call to AUTO_TESTS_f_f.
	(exp10_test): Use ALL_RM_TEST.
	(exp10_tonearest_test_data): Remove.
	(exp10_test_tonearest): Likewise.
	(exp10_towardzero_test_data): Likewise.
	(exp10_test_towardzero): Likewise.
	(exp10_downward_test_data): Likewise.
	(exp10_test_downward): Likewise.
	(exp10_upward_test_data): Likewise.
	(exp10_test_upward): Likewise.
	(exp2_test_data): Update call to AUTO_TESTS_f_f.
	(expm1_test_data): Likewise.
	(expm1_test): Use ALL_RM_TEST.
	(expm1_tonearest_test_data): Remove.
	(expm1_test_tonearest): Likewise.
	(expm1_towardzero_test_data): Likewise.
	(expm1_test_towardzero): Likewise.
	(expm1_downward_test_data): Likewise.
	(expm1_test_downward): Likewise.
	(expm1_upward_test_data): Likewise.
	(expm1_test_upward): Likewise.
	(fma_test_data): Update call to AUTO_TESTS_fff_f.
	(fma_test): Use ALL_RM_TEST.
	(fma_towardzero_test_data): Remove.
	(fma_test_towardzero): Likewise.
	(fma_downward_test_data): Likewise.
	(fma_test_downward): Likewise.
	(fma_upward_test_data): Likewise.
	(fma_test_upward): Likewise.
	(hypot_test_data): Update call to AUTO_TESTS_ff_f.
	(j0_test_data): Update call to AUTO_TESTS_f_f.
	(j1_test_data): Likewise.
	(jn_test_data): Update call to AUTO_TESTS_if_f.
	(lgamma_test_data): Update call to AUTO_TESTS_f_f1.
	(log_test_data): Update call to AUTO_TESTS_f_f.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(pow_test_data): Update call to AUTO_TESTS_ff_f.
	(pow_tonearest_test_data): Likewise.
	(sin_test_data): Update call to AUTO_TESTS_f_f.
	(sin_test): Use ALL_RM_TEST.
	(sin_tonearest_test_data): Remove.
	(sin_test_tonearest): Likewise.
	(sin_towardzero_test_data): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_downward_test_data): Likewise.
	(sin_test_downward): Likewise.
	(sin_upward_test_data): Likewise.
	(sin_test_upward): Likewise.
	(sincos_test_data): Update call to AUTO_TESTS_fFF_11.
	(sinh_test_data): Update call to AUTO_TESTS_f_f.
	(sinh_test): Use ALL_RM_TEST.
	(sinh_tonearest_test_data): Remove.
	(sinh_test_tonearest): Likewise.
	(sinh_towardzero_test_data): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_downward_test_data): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_upward_test_data): Likewise.
	(sinh_test_upward): Likewise.
	(sqrt_test_data): Update call to AUTO_TESTS_f_f.
	(sqrt_test): Use ALL_RM_TEST.
	(sqrt_tonearest_test_data): Remove.
	(sqrt_test_tonearest): Likewise.
	(sqrt_towardzero_test_data): Likewise.
	(sqrt_test_towardzero): Likewise.
	(sqrt_downward_test_data): Likewise.
	(sqrt_test_downward): Likewise.
	(sqrt_upward_test_data): Likewise.
	(sqrt_test_upward): Likewise.
	(tan_test_data): Update call to AUTO_TESTS_f_f.
	(tan_test): Use ALL_RM_TEST.
	(tan_tonearest_test_data): Remove.
	(tan_test_tonearest): Likewise.
	(tan_towardzero_test_data): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_downward_test_data): Likewise.
	(tan_test_downward): Likewise.
	(tan_upward_test_data): Likewise.
	(tan_test_upward): Likewise.
	(tanh_test_data): Update call to AUTO_TESTS_f_f.
	(tgamma_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Update call to AUTO_TESTS_if_f.
	(main): Do not call removed functions.

2014-03-19  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (fdim_test): Use ALL_RM_TEST.
	(ldexp_test_data): Remove.
	(ldexp_test): Move to after scalbn_test.  Use ALL_RM_TEST with
	scalbn_test_data.
	(scalb_test): Use ALL_RM_TEST.

2014-03-19  Andreas Schwab  <schwab@suse.de>

	* nscd/nscd.service: Also invalidate netgroup cache on reload.

2014-03-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16649]
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_PREADV): Undefine.
	[__LINUX_KERNEL_VERSION < 0x020621] (__ASSUME_PWRITEV): Likewise.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_PREADV): Undefine.
	(__ASSUME_PWRITEV): Likewise.

2014-03-18  Roland McGrath  <roland@hack.frob.com>

	* bits/mman-linux.h: Add comment about non-Linux use.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add comment about
	bits/mman-linux.h resting place.

	* sysdeps/unix/sysv/linux/bits/mman-linux.h: Moved to ...
	* bits/mman-linux.h: ... here.

2014-03-18  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* conform/conformtest.pl: Add standard definition when calling C
	preprocessor on data files.
	(checknamespace): Remove unused variable.

2014-03-18  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle plus_oflow,
	minus_oflow, plus_uflow and minus_uflow in expected results.
	* math/libm-test.inc (scalbn_test_data): Add more tests of
	negative arguments.  Use plus_oflow, minus_oflow, plus_uflow and
	minus_uflow.
	(scalbn_test): Use ALL_RM_TEST.
	(scalbln_test_data): Add more tests of negative arguments.  Use
	plus_oflow, minus_oflow, plus_uflow and minus_uflow.
	(scalbln_test): Use ALL_RM_TEST.

2014-03-18  Roland McGrath  <roland@hack.frob.com>

	* scripts/abilist.awk: Ignore symbols marked with .hidden.

2014-03-18  Will Newton  <will.newton@linaro.org>

	* sysdeps/unix/sysv/linux/aarch64/sysdep.h: Remove
	inaccurate comment.

2014-03-18  Joseph Myers  <joseph@codesourcery.com>

	* Makerules [!subdir] (check-abi): Exit with error status if a
	test failed.

2014-03-17  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (nearbyint_test_data): Include all tests used
	for rint.  Include results for all rounding modes.
	(nearbyint_test): Use ALL_RM_TEST.
	(rint_test_data): Include all tests used for nearbyint.

2014-03-17  Will Newton  <will.newton@linaro.org>

	* nptl/sysdeps/pthread/pthread.h: Revert previous
	change.

	* sysdeps/generic/ldsodefs.h: Revert previous
	change.

	* libio/genops.c: Revert previous change.
	* libio/libioP.h: Likewise.
	* stdio-common/vfprintf.c: Likewise.

	* sysdeps/generic/math_private.h: Revert previous
	change.

	* sysdeps/generic/math_private.h: Check whether
	HAVE_RM_CTX is defined with #ifdef rather
	than #if.

	* argp/argp-fmtstream.h: Check whether
	__STRICT_ANSI__ is defined with #ifdef rather
	than #if.
	* argp/argp.h: Likewise.

	* libio/genops.c: Check whether
	_IO_JUMPS_OFFSET is defined with #ifdef rather
	than #if.
	* libio/libioP.h: Likewise.
	* stdio-common/vfprintf.c: Likewise.

	* sysdeps/generic/ldsodefs.h: Check whether
	HP_SMALL_TIMING_AVAIL is defined with #ifdef rather
	than #if.

	* nptl/sysdeps/pthread/pthread.h: Check
	__PTHREAD_MUTEX_HAVE_ELISION is defined before testing
	its value.

2014-03-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/iofdopen.c (_IO_new_fdopen): Seek to end only if
	setting O_APPEND.
	* libio/tst-ftell-active-handler.c (do_append_test): Add a
	test case.

	[BZ #16680]
	* libio/fileops.c (_IO_file_open): Seek to end of file but
	don't cache the offset.
	(get_file_offset): Remove function.
	(do_ftell): Use cached offset when available.
	* libio/iofdopen.c (_IO_new_fdopen): Seek to end of file but
	don't cache the offset.
	* libio/tst-ftell-active-handler.c (do_rewind_test): New test
	case.
	(do_one_test): Call it.
	(do_ftell_test): Fix up expected old offset for a+ mode.
	* libio/wfileops.c (do_ftell_wide): Used cached offset when
	available.

	* libio/tst-ftell-active-handler.c (do_ftell_test): Don't mix
	up test status with function return status.
	(do_write_test): Likewise.
	(do_append_test): Likewise.

	* nptl/sysdeps/pthread/bits/libc-lockP.h [defined NOT_IN_libc
	&& !defined IS_IN_libpthread && __LT_SPINNOCK_INIT != 0]:
	Remove.

2014-03-17  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle results specified for
	each rounding mode separately.
	* math/libm-test.inc (lrint_test_data): Merge in per-rounding-mode
	tests and results from lrint_tonearest_test_data,
	lrint_towardzero_test_data, lrint_downward_test_data and
	lrint_upward_test_data.
	(lrint_test): Use ALL_RM_TEST.
	(lrint_tonearest_test_data): Remove.
	(lrint_test_tonearest): Likewise.
	(lrint_towardzero_test_data): Likewise.
	(lrint_test_towardzero): Likewise.
	(lrint_downward_test_data): Likewise.
	(lrint_test_downward): Likewise.
	(lrint_upward_test_data): Likewise.
	(lrint_test_upward): Likewise.
	(llrint_test_data): Merge in per-rounding-mode tests and results
	from llrint_tonearest_test_data, llrint_towardzero_test_data,
	llrint_downward_test_data and llrint_upward_test_data.
	(llrint_test): Use ALL_RM_TEST.
	(llrint_tonearest_test_data): Remove.
	(llrint_test_tonearest): Likewise.
	(llrint_towardzero_test_data): Likewise.
	(llrint_test_towardzero): Likewise.
	(llrint_downward_test_data): Likewise.
	(llrint_test_downward): Likewise.
	(llrint_upward_test_data): Likewise.
	(llrint_test_upward): Likewise.
	(rint_test_data): Merge in per-rounding-mode tests and results
	from rint_tonearest_test_data, rint_towardzero_test_data,
	rint_downward_test_data and rint_upward_test_data.  Add
	per-rounding-mode results for tests not in those arrays.
	(rint_test): Use ALL_RM_TEST.
	(rint_tonearest_test_data): Remove.
	(rint_test_tonearest): Likewise.
	(rint_towardzero_test_data): Likewise.
	(rint_test_towardzero): Likewise.
	(rint_downward_test_data): Likewise.
	(rint_test_downward): Likewise.
	(rint_upward_test_data): Likewise.
	(rint_test_upward): Likewise.
	(main): Don't call removed functions.

2014-03-14  Roland McGrath  <roland@hack.frob.com>

	* csu/Makefile ($(objpfx)version-info.h): Remove linux-specific
	"Compiled on ..." crapola.  It is anti-useful.

2014-03-14  Joseph Myers  <joseph@codesourcery.com>

	* scripts/evaluate-test.sh: Handle fourth argument to determine
	whether test run should stop on failure.
	* Makeconfig (stop-on-test-failure): New variable.
	(evaluate-test): Pass fourth argument to evaluate-test.sh based on
	$(stop-on-test-failure).
	* Makefile (tests): Give a summary of results from testing and
	exit with failure status if they include an ERROR or FAIL.
	(xtests): Likewise.
	* manual/install.texi (Configuring and compiling): Mention
	stop-on-test-failure=y.
	* INSTALL: Regenerated.

2014-03-14  Roland McGrath  <roland@hack.frob.com>

	* scripts/versionlist.awk: New file.
	* Makerules [$(build-shared) = yes]
	(postclean-generated): Add Versions.def, not Versions.def.v and
	Versions.def.v.i.
	($(common-objpfx)Versions.def.v.i): Target removed.
	($(common-objpfx)Versions.def): New target.
	($(common-objpfx)Versions.all): Depend on that rather that
	$(common-objpfx)Versions.def.v.
	* Versions.def: File removed.

	* Makeconfig (+gccwarn): Add -Wundef.
	* include/errno.h [IS_IN_rtld] [!RTLD_PRIVATE_ERRNO]: #error to catch
	a dl-sysdep.h breaking its contract.
	[!IS_IN_rtld] (RTLD_PRIVATE_ERRNO): Define it to 0.
	* include/stackinfo.h: New file.
	* nptl/sysdeps/i386/tls.h (TLS_DTV_AT_TP): New macro.
	* nptl/sysdeps/powerpc/tls.h (TLS_TCB_AT_TP): New macro.
	* nptl/sysdeps/s390/tls.h (TLS_DTV_AT_TP): New macro.
	* nptl/sysdeps/sh/tls.h (TLS_TCB_AT_TP): New macro.
	* nptl/sysdeps/sparc/tls.h (TLS_DTV_AT_TP): New macro.
	* nptl/sysdeps/x86_64/tls.h (TLS_DTV_AT_TP): New macro.
	* sysdeps/aarch64/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/alpha/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/arm/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/ia64/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/m68k/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/mach/hurd/i386/tls.h (TLS_DTV_AT_TP): New macro.
	* sysdeps/microblaze/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/mips/nptl/tls.h (TLS_TCB_AT_TP): New macro.
	* sysdeps/tile/nptl/tls.h (TLS_TCB_AT_TP): New macro.

2014-03-14  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16707]
	* sysdeps/powerpc/powerpc64/fpu/s_roundl.S: Remove wrong
	implementation.
	* math/libm-test.inc (round_test_data): Add more tests.

	[BZ #16706]
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintl.S: Remove wrong
	implementation.
	* math/libm-test.inc (nearbyint_test_data): Add more tests.

	[BZ #16701]
	* sysdeps/powerpc/powerpc64/fpu/s_ceill.S: Remove wrong
	implementation.
	* math/libm-test.inc (ceil_test_data): Add more tests.

	* math/libm-test.inc (trunc_test_data): Add more tests related to
	BZ#16414.

2014-03-14  Roland McGrath  <roland@hack.frob.com>

	* nptl/pthread_create.c (__pthread_create_2_1): Test TLS_TCB_AT_TP
	with #if rather than #ifdef.
	* nptl/sysdeps/pthread/createthread.c (create_thread): Likewise.

2014-03-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/configure.ac: Check AVX-512 assembler support
	first.  Disable AVX-512 GCC support if assembler doesn't support
	it.
	* sysdeps/x86_64/configure: Regenerated.

2014-03-13  Carlos O'Donell  <carlos@redhat.com>

	* nptl/pthread_attr_setstack.c (__pthread_attr_setstack)
	[!_STACK_GROWS_DOWN]: Don't add stacksize to stackaddr.
	(__old_pthread_attr_setstack): Likewise.
	* nptl/pthread_attr_getstack.c (__pthread_attr_getstack)
	[!_STACK_GROWS_DOWN]: Likewise.

2014-03-13  Mike Frysinger  <vapier@gentoo.org>

	* config.make.in (have-bash2): Delete.
	* configure.ac (libc_cv_have_bash2): Delete.
	* configure: Regenerate.
	* elf/Makefile (common-ldd-rewrite): Rename to ...
	(ldd-rewrite): ... this.  Move bash-ldd-rewrite content to end.
	(sh-ldd-rewrite): Delete.
	(bash-ldd-rewrite): Delete.
	(have-bash2): Delete checks.
	[ldd-rewrite-script]: Change $(ldd-shell)-ldd-rewrite to
	ldd-rewrite.

	* config.make.in (have-ksh): Delete.
	(KSH): Delete.
	* configure.ac (libc_cv_have_ksh): Delete.
	* configure: Regenerate.

	* elf/Makefile: Delete $(have-ksh) check.
	($(objpfx)sotruss): Change KSH to BASH.
	* elf/sotruss.ksh: Rename to ...
	* elf/sotruss.sh: ... this.  Change @KSH@ to @BASH@.  Change
	function style to match POSIX.  Drop ksh vim mode setting.

	* manual/time.texi (Specifying the Time Zone with TZ): Change
	Tuesday to Thursday.

	* debug/tst-longjmp_chk2.c: Update header comment.
	(stackoverflow_handler): Add comment.  Call assert on pass value.

2014-03-13  Igor Zamyatin  <igor.zamyatin@intel.com>

	[BZ #16194]
	* config.h.in (HAVE_AVX512_SUPPORT): New #undef.
	(HAVE_AVX512_ASM_SUPPORT): Likewise.
	* sysdeps/x86_64/bits/link.h (La_x86_64_zmm): New.
	(La_x86_64_vector): Add zmm.
	* sysdeps/x86_64/Makefile (tests): Add tst-audit10.
	(modules-names): Add tst-auditmod10a and tst-auditmod10b.
	($(objpfx)tst-audit10): New target.
	($(objpfx)tst-audit10.out): Likewise.
	(tst-audit10-ENV): New.
	(AVX512-CFLAGS): Likewise.
	(CFLAGS-tst-audit10.c): Likewise.
	(CFLAGS-tst-auditmod10a.c): Likewise.
	(CFLAGS-tst-auditmod10b.c): Likewise.
	* sysdeps/x86_64/configure.ac: Set config-cflags-avx512,
	HAVE_AVX512_SUPPORT and HAVE_AVX512_ASM_SUPPORT.
	* sysdeps/x86_64/configure: Regenerated.
	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Add
	AVX-512 zmm register support.
	(_dl_x86_64_save_sse): Likewise.
	(_dl_x86_64_restore_sse): Likewise.
	* sysdeps/x86_64/dl-trampoline.h: Updated to support different
	size vector registers.
	* sysdeps/x86_64/link-defines.sym (YMM_SIZE): New.
	(ZMM_SIZE): Likewise.
	* sysdeps/x86_64/tst-audit10.c: New file.
	* sysdeps/x86_64/tst-auditmod10a.c: Likewise.
	* sysdeps/x86_64/tst-auditmod10b.c: Likewise.

2014-03-13  Roland McGrath  <roland@hack.frob.com>

	* configure.ac (HAVE_EHDR_START): New check.
	* configure: Regenerated.
	* config.h.in (HAVE_EHDR_START): New #undef.
	* elf/rtld.c (dl_main) [HAVE_EHDR_START]: Use __ehdr_start rather than
	assuming the lowest-addressed segment maps the start of the file.

2014-03-13  Joseph Myers  <joseph@codesourcery.com>

	* INSTALL: Regenerated.

2014-03-13  Will Newton  <will.newton@linaro.org>

	* manual/setjmp.texi (System V contexts): Improve
	clarity and grammar of documentation.

2014-03-12  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #16381]
	* elf/Makefile (tests): Add tst-pie2.
	(tests-pie): Add tst-pie2.
	* elf/tst-pie2.c: New file.
	* elf/dl-load.c (_dl_map_object_from_fd): Assert correct l_type
	for ET_EXEC.
	* elf/rtld.c (map_doit): Load executable as lt_executable.
	(dl_main): Likewise.

2014-03-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16642]
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_PSELECT): Undefine.

2014-03-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16689]
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero-ppc32.S
	(__bzero_ppc): Call memset@local instead of __memset_ppc@local for
	static build.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero.c: Build IFUNC
	selector for static builds.

2014-03-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16695]
	* nscd/netgroupcache.c (addgetnetgrentX): Factor in space for
	key in the buffer.

2014-03-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/strspn.c (strspn): Build
	IFUNC selector for static builds.

2014-03-11  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/math_private.h [__mips_hard_float]
	(libc_feresetround_ctx): Define to libc_feupdateenv_mips_ctx not
	libc_feresetround_mips_ctx.
	[__mips_hard_float] (libc_feresetroundf_ctx): Likewise.
	[__mips_hard_float] (libc_feresetroundl_ctx): Likewise.
	[__mips_hard_float] (libc_feresetround_mips_ctx): Remove.

	[BZ #16677]
	* math/s_nextafter.c (__nextafter): Do not return value from
	overflowing computation.
	* sysdeps/i386/fpu/s_nextafterl.c (__nextafterl): Likewise.
	* sysdeps/ieee754/flt-32/s_nextafterf.c (__nextafterf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c (__nextafterl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c (__nextafterl):
	Likewise.
	* sysdeps/m68k/m680x0/fpu/s_nextafterl.c (__nextafterl): Likewise.
	* math/libm-test.inc (nextafter_test): Use ALL_RM_TEST.

2014-03-11  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/arm/setjmp.S: Use sfi_breg on stores of mangled registers.
	* sysdeps/arm/__longjmp.S: Use sfi_breg on loads of mangled registers.
	Move sfi_sp use from the load-multiple (that no longer sets sp) to
	the new mov targetting sp.

2014-03-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16683]
	* sysdeps/powerpc/powerpc64/multiarch/memset-ppc64.S (__bzero_ppc):
	Define it for static builds as well.
	(NO_BZERO_IMPL): Likewise.

2014-03-11  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strspn.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/strspn.c: New file:
	multiarch strspn for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strspn-ppc64.c: New file
	* sysdeps/powerpc/powerpc64/multiarch/strspn-power7.S: New file
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strspn
	multiarch optimizations
	* string/strspn.c (strspn): Using macro to redefine symbol name.

2014-03-10  Vidya Ranganathan  <vidya@linux.vnet.ibm.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strncat.S: New file: Optimization.
	* sysdeps/powerpc/powerpc64/multiarch/strncat.c: New file:
	multiarch strncat for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strncat-ppc64.c: New file
	* sysdeps/powerpc/powerpc64/multiarch/strncat-power7.S: New file
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strncat
	multiarch optimizations

2014-03-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16639]
	* nscd/nscd.service: Make service type forking.

2014-03-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/power5+/fpu/s_modf.c (__modf): Fix to return correct
	sign in non default rounding modes.
	* sysdeps/powerpc/power5+/fpu/s_modff.c (__modff): Likewise.

2014-03-08  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (ALL_RM_TEST): New macro.
	(ceil_test): Use ALL_RM_TEST.
	(cimag_test): Likewise.
	(conj_test): Likewise.
	(copysign_test): Likewise.
	(cproj_test): Likewise.
	(creal_test): Likewise.
	(fabs_test): Likewise.
	(floor_test): Likewise.
	(fmax_test): Likewise.
	(fmin_test): Likewise.
	(fmod_test): Likewise.
	(fpclassify_test): Likewise.
	(frexp_test): Likewise.
	(ilogb_test): Likewise.
	(isfinite_test): Likewise.
	(finite_test): Likewise.
	(isgreater_test): Likewise.
	(isgreaterequal_test): Likewise.
	(isinf_test): Likewise.
	(isless_test): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test): Likewise.
	(isnan_test): Likewise.
	(isnormal_test): Likewise.
	(issignaling_test): Likewise.
	(isunordered_test): Likewise.
	(logb_test): Likewise.
	(logb_downward_test_data): Remove.
	(logb_test_downward): Likewise.
	(lround_test): Use ALL_RM_TEST.
	(llround_test): Likewise.
	(modf_test): Likewise.
	(nexttoward_test): Likewise.
	(remainder_test): Likewise.
	(drem_test): Likewise.
	(remainder_tonearest_test_data): Likewise.
	(remainder_test_tonearest): Likewise.
	(drem_test_tonearest): Likewise.
	(remainder_towardzero_test_data): Likewise.
	(remainder_test_towardzero): Likewise.
	(drem_test_towardzero): Likewise.
	(remainder_downward_test_data): Likewise.
	(remainder_test_downward): Likewise.
	(drem_test_downward): Likewise.
	(remainder_upward_test_data): Likewise.
	(remainder_test_upward): Likewise.
	(drem_test_upward): Likewise.
	(remquo_test): Use ALL_RM_TEST.  Remove comment about x.
	(round_test): Use ALL_RM_TEST.
	(signbit_test): Likewise.
	(trunc_test): Likewise.
	(significand_test): Likewise.
	(main): Don't call removed functions.

2014-03-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16674]
	* bits/siginfo.h (ILL_ILLOPC): Condition on [__USE_XOPEN_EXTENDED
	|| __USE_XOPEN2K8].
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/siginfo.h (ILL_ILLOPC):
	Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/siginfo.h (ILL_ILLOPC):
	Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(ILL_BADIADDR): Likewise.
	(ILL_BREAK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(FPE_DECOVF): Likewise.
	(FPE_DECDIV): Likewise.
	(FPE_DECERR): Likewise.
	(FPE_INVASC): Likewise.
	(FPE_INVDEC): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(SEGV_PSTKOVF): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(TRAP_BRANCH): Likewise.
	(TRAP_HWBKPT): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/tile/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(ILL_DBLFLT): Likewise.
	(ILL_HARDWALL): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h (ILL_ILLOPC): Likewise.
	(ILL_ILLOPN): Likewise.
	(ILL_ILLADR): Likewise.
	(ILL_ILLTRP): Likewise.
	(ILL_PRVOPC): Likewise.
	(ILL_PRVREG): Likewise.
	(ILL_COPROC): Likewise.
	(ILL_BADSTK): Likewise.
	(FPE_INTDIV): Likewise.
	(FPE_INTOVF): Likewise.
	(FPE_FLTDIV): Likewise.
	(FPE_FLTOVF): Likewise.
	(FPE_FLTUND): Likewise.
	(FPE_FLTRES): Likewise.
	(FPE_FLTINV): Likewise.
	(FPE_FLTSUB): Likewise.
	(SEGV_MAPERR): Likewise.
	(SEGV_ACCERR): Likewise.
	(BUS_ADRALN): Likewise.
	(BUS_ADRERR): Likewise.
	(BUS_OBJERR): Likewise.
	(BUS_MCEERR_AR): Likewise.
	(BUS_MCEERR_AO): Likewise.
	(TRAP_BRKPT): Condition on [__USE_XOPEN_EXTENDED].
	(TRAP_TRACE): Likewise.
	(CLD_EXITED): Condition on [__USE_XOPEN_EXTENDED ||
	__USE_XOPEN2K8].
	(CLD_KILLED): Likewise.
	(CLD_DUMPED): Likewise.
	(CLD_TRAPPED): Likewise.
	(CLD_STOPPED): Likewise.
	(CLD_CONTINUED): Likewise.
	(POLL_IN): Likewise.
	(POLL_OUT): Likewise.
	(POLL_MSG): Likewise.
	(POLL_ERR): Likewise.
	(POLL_PRI): Likewise.
	(POLL_HUP): Likewise.
	* conform/Makefile (test-xfail-POSIX/signal.h/conform): Remove.
	(test-xfail-POSIX/sys/wait.h/conform): Likewise.

	[BZ #16670]
	* posix/sched.h [!__USE_XOPEN2K] (__need_time_t): Don't define
	before #include of <time.h>.
	[!__USE_XOPEN2K] (__need_timespec): Likewise.
	* conform/Makefile (test-xfail-POSIX/sched.h/conform): Remove.
	(test-xfail-UNIX98/sched.h/conform): Likewise.

2014-03-07  Marcus Shawcroft  <marcus.shawcroft@arm.com>

	* sysdeps/aarch64/fpu/feenablxcpt.c (feenableexcept): Detect and
	error absence of trapping exception support.
	* sysdeps/aarch64/fpu/fesetenv.c (fesetenv): Likewise.

2014-03-07  Joseph Myers  <joseph@codesourcery.com>

	* catgets/Makefile (tests-special): Add $(objpfx)sample.SJIS.cat.
	($(objpfx)sample.SJIS.cat): Use $(evaluate-test).
	* timezone/Makefile (testdata): Move definition above include of
	Rules.
	(test-zones): New variable.
	(tests-special): Add zone files.
	(build-testdata): Use $(evaluate-test).

	* elf/Makefile (tests-special): Rename tests to end with .out.
	($(objpfx)noload-mem): Likewise.
	($(objpfx)tst-leaks1-mem): Likewise.
	($(objpfx)tst-leaks1-static-mem.out): Likewise.
	* iconv/Makefile (xtests-special): Change test-iconvconfig to
	$(objpfx)test-iconvconfig.out.
	(test-iconvconfig): Change to $(objpfx)test-iconvconfig.out.  Use
	set -e inside subshell and redirect output to file.
	* iconvdata/Makefile (generated): Rename tests to end with .out.
	Correct type.
	(tests-special): Rename tests to end with .out.
	($(objpfx)mtrace-tst-loading): Likewise.
	* intl/Makefile (generated): Likewise.
	(tests-special): Likewise.
	($(objpfx)mtrace-tst-gettext): Likewise.
	* misc/Makefile (generated): Likewise.
	(tests-special): Likewise.
	($(objpfx)tst-error1-mem): Likewise.
	* nptl/Makefile (tests-special): Likewise.
	($(objpfx)tst-stack3-mem): Likewise.
	(generated): Likewise.
	* posix/Makefile (generated): Likewise.
	(tests-special): Likewise.
	(xtests-special): Likewise.
	($(objpfx)tst-fnmatch-mem): Likewise.
	($(objpfx)bug-regex2-mem): Likewise.
	($(objpfx)bug-regex14-mem): Likewise.
	($(objpfx)bug-regex21-mem): Likewise.
	($(objpfx)bug-regex31-mem): Likewise.
	($(objpfx)tst-vfork3-mem): Likewise.
	($(objpfx)tst-rxspencer-no-utf8-mem): Likewise.
	($(objpfx)tst-pcre-mem): Likewise.
	($(objpfx)tst-boost-mem): Likewise.
	($(objpfx)bug-ga2-mem): Likewise.
	($(objpfx)bug-glob2-mem): Likewise.
	* resolv/Makefile (generate): Likewise.
	(tests-special): Likewise.
	(xtests-special): Likewise.
	(generated): Likewise.
	($(objpfx)mtrace-tst-leaks): Likewise.
	($(objpfx)mtrace-tst-leaks2): Likewise.

	* scripts/merge-test-results.sh: New file.
	* Makefile (tests-special-notdir): New variable.
	(tests): Run merge-test-results.sh.
	(xtests): Likewise.
	* Rules (tests-special-notdir): New variable.
	(xtests-special-notdir): Likewise.
	(tests): Run merge-test-results.sh
	(xtests): Likewise.

	* Makeconfig (test-xfail-name): New variable.
	(evaluate-test): Use $(test-xfail-name) instead of $(@F:.out=) to
	compute variable name for expected failures.
	* conform/Makefile (conformtest-headers-data): New variable.
	(conformtest-standards): Likewise.
	(conformtest-headers-ISO): Likewise.
	(conformtest-headers-ISO99): Likewise.
	(conformtest-headers-ISO11): Likewise.
	(conformtest-headers-POSIX): Likewise.
	(conformtest-headers-XPG3): Likewise.
	(conformtest-headers-XPG4): Likewise.
	(conformtest-headers-UNIX98): Likewise.
	(conformtest-headers-XOPEN2K): Likewise.
	(conformtest-headers-POSIX2008): Likewise.
	(conformtest-headers-XOPEN2K8): Likewise.
	(conformtest-header-list-base): Likewise.
	(conformtest-header-list-tests): Likewise.
	(conformtest-header-base): Likewise.
	(conformtest-header-tests): Likewise.
	(tests-special): Add $(conformtest-header-list-tests).  If
	[$(fast-check) && !$(cross-compiling)], add
	$(conformtest-header-tests) instead of
	$(objpfx)run-conformtest.out.
	(generated): Add $(conformtest-header-list-base).  If
	[$(fast-check) && !$(cross-compiling)], add
	$(conformtest-header-base).  Remove previous setting.
	($(conformtest-header-list-tests)): New target.
	(test-xfail-run-conformtest): Remove variable.
	($(objpfx)run-conformtest.out): Remove target.
	(test-xfail-ISO11/complex.h/conform): New variable.
	(test-xfail-ISO11/stdalign.h/conform): Likewise.
	(test-xfail-ISO11/stdnoreturn.h/conform): Likewise.
	(test-xfail-XPG3/varargs.h/conform): Likewise.
	(test-xfail-XPG4/varargs.h/conform): Likewise.
	(test-xfail-UNIX98/varargs.h/conform): Likewise.
	(test-xfail-XPG4/ndbm.h/conform): Likewise.
	(test-xfail-UNIX98/ndbm.h/conform): Likewise.
	(test-xfail-XOPEN2K/ndbm.h/conform): Likewise.
	(test-xfail-XOPEN2K8/ndbm.h/conform): Likewise.
	(test-xfail-XPG3/fcntl.h/conform): Likewise.
	(test-xfail-XPG3/ftw.h/conform): Likewise.
	(test-xfail-XPG3/grp.h/conform): Likewise.
	(test-xfail-XPG3/langinfo.h/conform): Likewise.
	(test-xfail-XPG3/limits.h/conform): Likewise.
	(test-xfail-XPG3/pwd.h/conform): Likewise.
	(test-xfail-XPG3/search.h/conform): Likewise.
	(test-xfail-XPG3/signal.h/conform): Likewise.
	(test-xfail-XPG3/stdio.h/conform): Likewise.
	(test-xfail-XPG3/stdlib.h/conform): Likewise.
	(test-xfail-XPG3/string.h/conform): Likewise.
	(test-xfail-XPG3/sys/ipc.h/conform): Likewise.
	(test-xfail-XPG3/sys/msg.h/conform): Likewise.
	(test-xfail-XPG3/sys/sem.h/conform): Likewise.
	(test-xfail-XPG3/sys/shm.h/conform): Likewise.
	(test-xfail-XPG3/sys/stat.h/conform): Likewise.
	(test-xfail-XPG3/sys/types.h/conform): Likewise.
	(test-xfail-XPG3/sys/wait.h/conform): Likewise.
	(test-xfail-XPG3/termios.h/conform): Likewise.
	(test-xfail-XPG3/time.h/conform): Likewise.
	(test-xfail-XPG3/unistd.h/conform): Likewise.
	(test-xfail-XPG4/arpa/inet.h/conform): Likewise.
	(test-xfail-XPG4/fcntl.h/conform): Likewise.
	(test-xfail-XPG4/langinfo.h/conform): Likewise.
	(test-xfail-XPG4/netdb.h/conform): Likewise.
	(test-xfail-XPG4/netinet/in.h/conform): Likewise.
	(test-xfail-XPG4/signal.h/conform): Likewise.
	(test-xfail-XPG4/stdio.h/conform): Likewise.
	(test-xfail-XPG4/stdlib.h/conform): Likewise.
	(test-xfail-XPG4/stropts.h/conform): Likewise.
	(test-xfail-XPG4/sys/ipc.h/conform): Likewise.
	(test-xfail-XPG4/sys/msg.h/conform): Likewise.
	(test-xfail-XPG4/sys/sem.h/conform): Likewise.
	(test-xfail-XPG4/sys/shm.h/conform): Likewise.
	(test-xfail-XPG4/sys/socket.h/conform): Likewise.
	(test-xfail-XPG4/sys/stat.h/conform): Likewise.
	(test-xfail-XPG4/sys/time.h/conform): Likewise.
	(test-xfail-XPG4/sys/types.h/conform): Likewise.
	(test-xfail-XPG4/sys/wait.h/conform): Likewise.
	(test-xfail-XPG4/termios.h/conform): Likewise.
	(test-xfail-XPG4/ucontext.h/conform): Likewise.
	(test-xfail-XPG4/unistd.h/conform): Likewise.
	(test-xfail-XPG4/utmpx.h/conform): Likewise.
	(test-xfail-POSIX/sched.h/conform): Likewise.
	(test-xfail-POSIX/signal.h/conform): Likewise.
	(test-xfail-POSIX/sys/wait.h/conform): Likewise.
	(test-xfail-POSIX/tar.h/conform): Likewise.
	(test-xfail-UNIX98/arpa/inet.h/conform): Likewise.
	(test-xfail-UNIX98/fcntl.h/conform): Likewise.
	(test-xfail-UNIX98/langinfo.h/conform): Likewise.
	(test-xfail-UNIX98/netdb.h/conform): Likewise.
	(test-xfail-UNIX98/netinet/in.h/conform): Likewise.
	(test-xfail-UNIX98/sched.h/conform): Likewise.
	(test-xfail-UNIX98/signal.h/conform): Likewise.
	(test-xfail-UNIX98/stdio.h/conform): Likewise.
	(test-xfail-UNIX98/stdlib.h/conform): Likewise.
	(test-xfail-UNIX98/stropts.h/conform): Likewise.
	(test-xfail-UNIX98/sys/ipc.h/conform): Likewise.
	(test-xfail-UNIX98/sys/msg.h/conform): Likewise.
	(test-xfail-UNIX98/sys/sem.h/conform): Likewise.
	(test-xfail-UNIX98/sys/shm.h/conform): Likewise.
	(test-xfail-UNIX98/sys/socket.h/conform): Likewise.
	(test-xfail-UNIX98/sys/time.h/conform): Likewise.
	(test-xfail-UNIX98/sys/wait.h/conform): Likewise.
	(test-xfail-UNIX98/ucontext.h/conform): Likewise.
	(test-xfail-UNIX98/unistd.h/conform): Likewise.
	(test-xfail-UNIX98/utmpx.h/conform): Likewise.
	(test-xfail-XOPEN2K/aio.h/conform): Likewise.
	(test-xfail-XOPEN2K/arpa/inet.h/conform): Likewise.
	(test-xfail-XOPEN2K/fcntl.h/conform): Likewise.
	(test-xfail-XOPEN2K/langinfo.h/conform): Likewise.
	(test-xfail-XOPEN2K/math.h/conform): Likewise.
	(test-xfail-XOPEN2K/mqueue.h/conform): Likewise.
	(test-xfail-XOPEN2K/netdb.h/conform): Likewise.
	(test-xfail-XOPEN2K/netinet/in.h/conform): Likewise.
	(test-xfail-XOPEN2K/semaphore.h/conform): Likewise.
	(test-xfail-XOPEN2K/signal.h/conform): Likewise.
	(test-xfail-XOPEN2K/stdarg.h/conform): Likewise.
	(test-xfail-XOPEN2K/stdio.h/conform): Likewise.
	(test-xfail-XOPEN2K/stropts.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/ipc.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/msg.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/sem.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/shm.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/socket.h/conform): Likewise.
	(test-xfail-XOPEN2K/sys/wait.h/conform): Likewise.
	(test-xfail-XOPEN2K/termios.h/conform): Likewise.
	(test-xfail-XOPEN2K/tgmath.h/conform): Likewise.
	(test-xfail-XOPEN2K/ucontext.h/conform): Likewise.
	(test-xfail-XOPEN2K/utmpx.h/conform): Likewise.
	(test-xfail-POSIX2008/arpa/inet.h/conform): Likewise.
	(test-xfail-POSIX2008/fcntl.h/conform): Likewise.
	(test-xfail-POSIX2008/netdb.h/conform): Likewise.
	(test-xfail-POSIX2008/netinet/in.h/conform): Likewise.
	(test-xfail-POSIX2008/signal.h/conform): Likewise.
	(test-xfail-POSIX2008/stropts.h/conform): Likewise.
	(test-xfail-POSIX2008/sys/socket.h/conform): Likewise.
	(test-xfail-POSIX2008/sys/wait.h/conform): Likewise.
	(test-xfail-XOPEN2K8/arpa/inet.h/conform): Likewise.
	(test-xfail-XOPEN2K8/fcntl.h/conform): Likewise.
	(test-xfail-XOPEN2K8/limits.h/conform): Likewise.
	(test-xfail-XOPEN2K8/math.h/conform): Likewise.
	(test-xfail-XOPEN2K8/netdb.h/conform): Likewise.
	(test-xfail-XOPEN2K8/netinet/in.h/conform): Likewise.
	(test-xfail-XOPEN2K8/signal.h/conform): Likewise.
	(test-xfail-XOPEN2K8/stdio.h/conform): Likewise.
	(test-xfail-XOPEN2K8/stropts.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/ipc.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/msg.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/select.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/sem.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/shm.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/socket.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/time.h/conform): Likewise.
	(test-xfail-XOPEN2K8/sys/wait.h/conform): Likewise.
	(test-xfail-XOPEN2K8/termios.h/conform): Likewise.
	(test-xfail-XOPEN2K8/tgmath.h/conform): Likewise.
	(test-xfail-XOPEN2K8/utmpx.h/conform): Likewise.
	(conformtest-cc-flags): Likewise.
	($(conformtest-header-tests): New target.
	* conform/check-header-lists.sh: New file.
	* conform/run-conformtest.sh: Remove.

	* conform/conformtest.pl: Allow ' and \ in values given for
	constants.
	* conform/data/semaphore.h-data [POSIX] (fcntl.h): Allow header
	inclusion.
	[POSIX] (sys/types.h): Likewise.
	[POSIX2008 || XOPEN2K8] (sys/types.h): Don't allow header
	inclusion.
	[POSIX || UNIX98 || XOPEN2K] (time.h): Don't allow header
	inclusion.
	* conform/data/signal.h-data (SIGIO): Remove expectation.
	[XPG3] (SIGBUS): Do not expect.
	[POSIX || XPG3] (SIGPOLL): Likewise.
	[POSIX || XPG3] (SIGPROF): Likewise.
	[POSIX || XPG3] (SIGSYS): Likewise.
	[XPG3] (SIGTRAP): Likewise.
	[POSIX || XPG3] (SIGURG): Likewise.
	[POSIX || XPG3] (SIGVTALRM): Likewise.
	[POSIX || XPG3] (SIGXCPU): Likewise.
	[POSIX || XPG3] (SIGXFSZ): Likewise.
	[POSIX] (SA_SIGINFO): Expect.
	[XPG3] (siginfo_t): Do not expect type or contents.
	[POSIX] (si_pid): Do not expect element.
	[POSIX] (si_uid): Likewise.
	[POSIX] (si_addr): Likewise.
	[POSIX] (si_status): Likewise.
	[POSIX] (si_band): Likewise.
	[XPG4] (si_value): Likewise.
	[POSIX || XPG3] (ILL_ILLOPC): Do not expect.
	[POSIX || XPG3] (ILL_ILLOPN): Likewise.
	[POSIX || XPG3] (ILL_ILLADR): Likewise.
	[POSIX || XPG3] (ILL_ILLTRP): Likewise.
	[POSIX || XPG3] (ILL_PRVOPC): Likewise.
	[POSIX || XPG3] (ILL_PRVREG): Likewise.
	[POSIX || XPG3] (ILL_COPROC): Likewise.
	[POSIX || XPG3] (ILL_BADSTK): Likewise.
	[POSIX || XPG3] (FPE_INTDIV): Likewise.
	[POSIX || XPG3] (FPE_INTOVF): Likewise.
	[POSIX || XPG3] (FPE_FLTDIV): Likewise.
	[POSIX || XPG3] (FPE_FLTOVF): Likewise.
	[POSIX || XPG3] (FPE_FLTUND): Likewise.
	[POSIX || XPG3] (FPE_FLTRES): Likewise.
	[POSIX || XPG3] (FPE_FLTINV): Likewise.
	[POSIX || XPG3] (FPE_FLTSUB): Likewise.
	[POSIX || XPG3] (SEGV_MAPERR): Likewise.
	[POSIX || XPG3] (SEGV_ACCERR): Likewise.
	[POSIX || XPG3] (BUS_ADRALN): Likewise.
	[POSIX || XPG3] (BUS_ADRERR): Likewise.
	[POSIX || XPG3] (BUS_OBJERR): Likewise.
	[POSIX || XPG3] (CLD_EXITED): Likewise.
	[POSIX || XPG3] (CLD_KILLED): Likewise.
	[POSIX || XPG3] (CLD_DUMPED): Likewise.
	[POSIX || XPG3] (CLD_TRAPPED): Likewise.
	[POSIX || XPG3] (CLD_STOPPED): Likewise.
	[POSIX || XPG3] (CLD_CONTINUED): Likewise.
	[POSIX || XPG3] (POLL_IN): Likewise.
	[POSIX || XPG3] (POLL_OUT): Likewise.
	[POSIX || XPG3] (POLL_MSG): Likewise.
	[POSIX || XPG3] (POLL_ERR): Likewise.
	[POSIX || XPG3] (POLL_PRI): Likewise.
	[POSIX || XPG3] (POLL_HUP): Likewise.
	[POSIX || XPG3 || POSIX2008] (TRAP_BRKPT): Likewise.
	[POSIX || XPG3 || POSIX2008] (TRAP_TRACE): Likewise.
	(SIG*): Do not allow.
	[XPG3] (si_*): Likewise.
	[XPG3] (SI_*): Likewise.
	[XPG3 || XPG4] (sigev_*): Likewise.
	[XPG3 || XPG4] (SIGEV_*): Likewise.
	[XPG3 || XPG4] (sival_*): Likewise.
	[POSIX || XPG3 || XPG4] (uc_*): Likewise.
	[POSIX || XPG3] (BUS_*): Likewise.
	[POSIX || XPG3] (CLD_*): Likewise.
	[POSIX || XPG3] (FPE_*): Likewise.
	[POSIX || XPG3] (ILL_*): Likewise.
	[POSIX || XPG3] (POLL_*): Likewise.
	[POSIX || XPG3] (SEGV_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (SS_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (SV_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (TRAP_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (ss_*): Likewise.
	[POSIX || XPG3 || POSIX2008] (sv_*): Likewise.
	* conform/data/tar.h-data (TMAGLEN): Use macro-int-constant.
	Specify type and value.
	(TVERSLEN): Likewise.
	(REGTYPE): Likewise.
	(AREGTYPE): Likewise.
	(LNKTYPE): Likewise.
	(SYMTYPE): Likewise.
	(CHRTYPE): Likewise.
	(BLKTYPE): Likewise.
	(DIRTYPE): Likewise.
	(FIFOTYPE): Likewise.
	(CONTTYPE): Likewise.
	(TSUID): Likewise.
	(TSGID): Likewise.
	(TSVTX): Likewise.
	(TUREAD): Likewise.
	(TUWRITE): Likewise.
	(TUEXEC): Likewise.
	(TGREAD): Likewise.
	(TGWRITE): Likewise.
	(TGEXEC): Likewise.
	(TOREAD): Likewise.
	(TOWRITE): Likewise.
	(TOEXEC): Likewise.
	[POSIX] (TSVTX): Expect constant.

2014-03-06  Joseph Myers  <joseph@codesourcery.com>

	* Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	(tests): Depend on $(tests-special).
	* Makerules (check-abi-list): New variable.
	(check-abi): Depend on $(check-abi-list).
	[$(subdir) = elf] (tests-special): Add
	$(objpfx)check-abi-libc.out.
	[$(build-shared) = yes && subdir] (tests-special): Add
	$(check-abi-list).
	[$(build-shared) = yes && subdir] (tests): Do not depend on
	check-abi.
	* Rules (tests): Depend on $(tests-special).
	(xtests): Depend on $(xtests-special).
	* catgets/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* conform/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* elf/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* grp/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* iconv/Makefile (xtests): Change dependencies to ....
	(xtests-special): ... additions to this variable.
	* iconvdata/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* intl/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.  Also add
	$(objpfx)tst-gettext.out.
	* io/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* libio/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* malloc/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* misc/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* nptl/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* nptl_db/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* posix/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	(xtests): Change dependencies to ....
	(xtests-special): ... additions to this variable.
	* resolv/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	(xtests): Change dependencies to ....
	(xtests-special): ... additions to this variable.
	* stdio-common/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	(do-tst-unbputc): Remove target.
	(do-tst-printf): Likewise.
	* stdlib/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* string/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.
	* sysdeps/x86/Makefile (tests): Change dependencies to ....
	(tests-special): ... additions to this variable.

	* conform/data/netinet/tcp.h-data [POSIX2008 || XOPEN2K8]: Enable
	whole file.
	* conform/data/sys/timeb.h-data [POSIX2008 || XOPEN2K8]: Disable
	whole file.
	* conform/data/sys/uio.h-data [POSIX2008]: Likewise.
	* conform/data/ucontext.h-data [POSIX2008 || XOPEN2K8]: Likewise.

	* conform/data/aio.h-data [XPG3 || XPG4]: Disable whole file.
	* conform/data/arpa/inet.h-data [XPG3]: Likewise.
	* conform/data/dlfcn.h-data [XPG3 || XPG4]: Likewise.
	* conform/data/fmtmsg.h-data [XPG3]: Likewise.
	* conform/data/libgen.h-data [XPG3]: Likewise.
	* conform/data/mqueue.h-data [XPG3 || XPG4]: Likewise.
	* conform/data/ndbm.h-data [XPG3]: Likewise.
	* conform/data/net/if.h-data [XPG3 || XPG4 || UNIX98]: Likewise.
	* conform/data/netdb.h-data [XPG3]: Likewise.
	* conform/data/netinet/in.h-data [XPG3]: Likewise.
	* conform/data/poll.h-data [XPG3]: Likewise.
	* conform/data/spawn.h-data [XPG3 || XPG4 || UNIX98]: Likewise.
	* conform/data/strings.h-data [XPG3]: Likewise.
	* conform/data/stropts.h-data [XPG3]: Likewise.
	* conform/data/sys/mman.h-data [XPG3]: Likewise.
	* conform/data/sys/resource.h-data [XPG3]: Likewise.
	* conform/data/sys/select.h-data [XPG3 || XPG4 || UNIX98]:
	Likewise.
	* conform/data/sys/statvfs.h-data [XPG3]: Likewise.
	* conform/data/sys/time.h-data [XPG3]: Likewise.
	* conform/data/sys/timeb.h-data [XPG3]: Likewise.
	* conform/data/sys/uio.h-data [XPG3]: Likewise.
	* conform/data/sys/un.h-data [XPG3]: Likewise.
	* conform/data/syslog.h-data [XPG3]: Likewise.
	* conform/data/ucontext.h-data [XPG3]: Likewise.
	* conform/data/utmpx.h-data [XPG3]: Likewise.
	* conform/data/varargs.h-data [UNIX98]: Enable file.

	* manual/Makefile (INSTALL_INFO): Remove variable setting.

	* math/libm-test.inc (struct test_f_f_data): Move expected results
	into structure for each rounding mode.
	(struct test_ff_f_data): Likewise.
	(struct test_ff_f_data_nexttoward): Likewise.
	(struct test_fi_f_data): Likewise.
	(struct test_fl_f_data): Likewise.
	(struct test_if_f_data): Likewise.
	(struct test_fff_f_data): Likewise.
	(struct test_c_f_data): Likewise.
	(struct test_f_f1_data): Likewise.
	(struct test_fF_f1_data): Likewise.
	(struct test_ffI_f1_data): Likewise.
	(struct test_c_c_data): Likewise.
	(struct test_cc_c_data): Likewise.
	(struct test_f_i_data): Likewise.
	(struct test_ff_i_data): Likewise.
	(struct test_f_l_data): Likewise.
	(struct test_f_L_data): Likewise.
	(struct test_fFF_11_data): Likewise.
	(RM_): New macro.
	(RM_FE_DOWNWARD): Likewise.
	(RM_FE_TONEAREST): Likewise.
	(RM_FE_TOWARDZERO): Likewise.
	(RM_FE_UPWARD): Likewise.
	(RUN_TEST_LOOP_f_f): Update references to expected results.
	(RUN_TEST_LOOP_2_f): Likewise.
	(RUN_TEST_LOOP_fff_f): Likewise.
	(RUN_TEST_LOOP_c_f): Likewise.
	(RUN_TEST_LOOP_f_f1): Likewise.
	(RUN_TEST_LOOP_fF_f1): Likewise.
	(RUN_TEST_LOOP_fI_f1): Likewise.
	(RUN_TEST_LOOP_ffI_f1): Likewise.
	(RUN_TEST_LOOP_c_c): Likewise.
	(RUN_TEST_LOOP_cc_c): Likewise.
	(RUN_TEST_LOOP_f_i): Likewise.
	(RUN_TEST_LOOP_f_i_tg): Likewise.
	(RUN_TEST_LOOP_ff_i_tg): Likewise.
	(RUN_TEST_LOOP_f_b): Likewise.
	(RUN_TEST_LOOP_f_b_tg): Likewise.
	(RUN_TEST_LOOP_f_l): Likewise.
	(RUN_TEST_LOOP_f_L): Likewise.
	(RUN_TEST_LOOP_fFF_11): Likewise.
	* math/gen-libm-test.pl (parse_args): Output four copies of
	expected results for each test.

	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_UTIMES): Remove.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_UTIMES): Likewise.

	* math/gen-auto-libm-tests.c: Update comment on output format.
	(output_for_one_input_case): Generate before-rounding and
	after-rounding information as conditions on output flags not
	floating-point format.
	* math/auto-libm-test-out: Regenerated.
	* math/gen-libm-test.pl (cond_value): New function.
	(or_cond_value): Use cond_value.
	(generate_testfile): Handle conditional exceptions.

2014-03-05  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (max_valid_error): New variable.
	(init_max_error): Take new argument specifying whether function
	results are exactly determined.  Set max_valid_error and bound
	other variables for errors based on this argument.
	(set_max_error): Do not record results above max_valid_error.
	(check_float_internal): Only accept errors of up to 0.5ulps if
	also at most max_valid_error.
	(START): Take new argument EXACT and pass it to init_max_error.
	(acos_test): Update call to START.
	(acos_test_tonearest): Likewise.
	(acos_test_towardzero): Likewise.
	(acos_test_downward): Likewise.
	(acos_test_upward): Likewise.
	(acosh_test): Likewise.
	(asin_test): Likewise.
	(asin_test_tonearest): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_test_downward): Likewise.
	(asin_test_upward): Likewise.
	(asinh_test): Likewise.
	(atan_test): Likewise.
	(atanh_test): Likewise.
	(atan2_test): Likewise.
	(cabs_test): Likewise.
	(cacos_test): Likewise.
	(cacosh_test): Likewise.
	(carg_test): Likewise.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	(catan_test): Likewise.
	(catanh_test): Likewise.
	(cbrt_test): Likewise.
	(ccos_test): Likewise.
	(ccosh_test): Likewise.
	(ceil_test): Likewise.
	(cexp_test): Likewise.
	(cimag_test): Likewise.
	(clog_test): Likewise.
	(clog10_test): Likewise.
	(conj_test): Likewise.
	(copysign_test): Likewise.
	(cos_test): Likewise.
	(cos_test_tonearest): Likewise.
	(cos_test_towardzero): Likewise.
	(cos_test_downward): Likewise.
	(cos_test_upward): Likewise.
	(cosh_test): Likewise.
	(cosh_test_tonearest): Likewise.
	(cosh_test_towardzero): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_test_upward): Likewise.
	(cpow_test): Likewise.
	(cproj_test): Likewise.
	(creal_test): Likewise.
	(csin_test): Likewise.
	(csinh_test): Likewise.
	(csqrt_test): Likewise.
	(ctan_test): Likewise.
	(ctan_test_tonearest): Likewise.
	(ctan_test_towardzero): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test): Likewise.
	(ctanh_test_tonearest): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_test_upward): Likewise.
	(erf_test): Likewise.
	(erfc_test): Likewise.
	(exp_test): Likewise.
	(exp_test_tonearest): Likewise.
	(exp_test_towardzero): Likewise.
	(exp_test_downward): Likewise.
	(exp_test_upward): Likewise.
	(exp10_test): Likewise.
	(exp10_test_tonearest): Likewise.
	(exp10_test_towardzero): Likewise.
	(exp10_test_downward): Likewise.
	(exp10_test_upward): Likewise.
	(pow10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(expm1_test_tonearest): Likewise.
	(expm1_test_towardzero): Likewise.
	(expm1_test_downward): Likewise.
	(expm1_test_upward): Likewise.
	(fabs_test): Likewise.
	(fdim_test): Likewise.
	(floor_test): Likewise.
	(fma_test): Likewise.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	(fmax_test): Likewise.
	(fmin_test): Likewise.
	(fmod_test): Likewise.
	(fpclassify_test): Likewise.
	(frexp_test): Likewise.
	(hypot_test): Likewise.
	(ilogb_test): Likewise.
	(isfinite_test): Likewise.
	(finite_test): Likewise.
	(isgreater_test): Likewise.
	(isgreaterequal_test): Likewise.
	(isinf_test): Likewise.
	(isless_test): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test): Likewise.
	(isnan_test): Likewise.
	(isnormal_test): Likewise.
	(issignaling_test): Likewise.
	(isunordered_test): Likewise.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(jn_test): Likewise.
	(ldexp_test): Likewise.
	(lgamma_test): Likewise.
	(gamma_test): Likewise.
	(lrint_test): Likewise.
	(lrint_test_tonearest): Likewise.
	(lrint_test_towardzero): Likewise.
	(lrint_test_downward): Likewise.
	(lrint_test_upward): Likewise.
	(llrint_test): Likewise.
	(llrint_test_tonearest): Likewise.
	(llrint_test_towardzero): Likewise.
	(llrint_test_downward): Likewise.
	(llrint_test_upward): Likewise.
	(log_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(logb_test): Likewise.
	(logb_test_downward): Likewise.
	(lround_test): Likewise.
	(llround_test): Likewise.
	(modf_test): Likewise.
	(nearbyint_test): Likewise.
	(nextafter_test): Likewise.
	(nexttoward_test): Likewise.
	(pow_test): Likewise.
	(pow_test_tonearest): Likewise.
	(pow_test_towardzero): Likewise.
	(pow_test_downward): Likewise.
	(pow_test_upward): Likewise.
	(remainder_test): Likewise.
	(drem_test): Likewise.
	(remainder_test_tonearest): Likewise.
	(drem_test_tonearest): Likewise.
	(remainder_test_towardzero): Likewise.
	(drem_test_towardzero): Likewise.
	(remainder_test_downward): Likewise.
	(drem_test_downward): Likewise.
	(remainder_test_upward): Likewise.
	(drem_test_upward): Likewise.
	(remquo_test): Likewise.
	(rint_test): Likewise.
	(rint_test_tonearest): Likewise.
	(rint_test_towardzero): Likewise.
	(rint_test_downward): Likewise.
	(rint_test_upward): Likewise.
	(round_test): Likewise.
	(scalb_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.
	(signbit_test): Likewise.
	(sin_test): Likewise.
	(sin_test_tonearest): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_test_downward): Likewise.
	(sin_test_upward): Likewise.
	(sincos_test): Likewise.
	(sinh_test): Likewise.
	(sinh_test_tonearest): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_test_upward): Likewise.
	(sqrt_test): Likewise.
	(sqrt_test_tonearest): Likewise.
	(sqrt_test_towardzero): Likewise.
	(sqrt_test_downward): Likewise.
	(sqrt_test_upward): Likewise.
	(tan_test): Likewise.
	(tan_test_tonearest): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_test_downward): Likewise.
	(tan_test_upward): Likewise.
	(tanh_test): Likewise.
	(tgamma_test): Likewise.
	(trunc_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	(yn_test): Likewise.
	(significand_test): Likewise.

	* math/libm-test.inc (struct ulp_data): Don't refer to ulps for
	individual tests in comment.
	(libm-test-ulps.h): Don't refer to test_ulps in #include comment.
	(prev_max_error): New variable.
	(prev_real_max_error): Likewise.
	(prev_imag_max_error): Likewise.
	(compare_ulp_data): Don't refer to test names in comment.
	(find_test_ulps): Remove function.
	(find_function_ulps): Likewise.
	(find_complex_function_ulps): Likewise.
	(init_max_error): Take function name as argument.  Look up ulps
	for that function.
	(print_ulps): Remove function.
	(print_max_error): Use prev_max_error instead of calling
	find_function_ulps.
	(print_complex_max_error): Use prev_real_max_error and
	prev_imag_max_error instead of calling find_complex_function_ulps.
	(check_float_internal): Take max_ulp parameter instead of calling
	find_test_ulps.  Don't call print_ulps.
	(check_float): Update call to check_float_internal.
	(check_complex): Update calls to check_float_internal.
	(START): Pass argument to init_max_error.
	* math/gen-libm-test.pl (%results): Don't include "kind"
	information.
	(parse_ulps): Don't handle ulps of individual tests.
	(print_ulps_file): Likewise.
	(output_ulps): Likewise.
	* math/README.libm-test: Update.
	* manual/libm-err-tab.pl (parse_ulps): Don't handle ulps of
	individual tests.
	* sysdeps/aarch64/libm-test-ulps: Remove individual test ulps.
	* sysdeps/alpha/fpu/libm-test-ulps: Likewise.
	* sysdeps/arm/libm-test-ulps: Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Likewise.
	* sysdeps/ia64/fpu/libm-test-ulps: Likewise.
	* sysdeps/m68k/coldfire/fpu/libm-test-ulps: Likewise.
	* sysdeps/m68k/m680x0/fpu/libm-test-ulps: Likewise.
	* sysdeps/microblaze/libm-test-ulps: Likewise.
	* sysdeps/mips/mips32/libm-test-ulps: Likewise.
	* sysdeps/mips/mips64/libm-test-ulps: Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/powerpc/nofpu/libm-test-ulps: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.
	* sysdeps/sh/libm-test-ulps: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps: Likewise.
	* sysdeps/tile/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-03-04  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (print_complex_max_error): Check separately
	whether real and imaginary errors are within allowed range and
	pass 0 to print_complex_function_ulps instead of value within
	allowed range.

2014-03-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/tst-ftell-active-handler.c (get_handles_fdopen): Fix
	formatting.
	(get_handles_fopen): Likewise.
	(do_write_test): Likewise.

	* libio/wfileops.c (do_ftell_wide): Fix up formatting.

	* libio/fileops.c (do_ftell): Use cached offset when
	available.
	* libio/iofwide.c (do_ftell_wide): Likewise.
	* libio/iofdopen.c (_IO_new_fdopen): Don't use
	_IO_file_attach.
	* libio/wfileops.c (_IO_fwide): Don't cache offset.

	[BZ #16532]
	* libio/libioP.h (get_file_offset): New function.
	* libio/fileops.c (get_file_offset): Likewise.
	(do_ftell): Likewise.
	(_IO_new_file_seekoff): Split out ftell logic.
	* libio/wfileops.c (do_ftell_wide): Likewise.
	(_IO_wfile_seekoff): Split out ftell logic.
	* libio/tst-ftell-active-handler.c: New test case.
	* libio/Makefile (tests): Add it.

2014-03-03  Roland McGrath  <roland@hack.frob.com>

	* nptl/ChangeLog: Renamed to nptl/ChangeLog.old, no longer used.
	* nptl_db/ChangeLog: Renamed to nptl_db/ChangeLog.old, no longer used.

2014-03-03  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16639]
	* nscd/connections.c (nscd_init): Call do_exit.
	(start_threads): Call do_exit and notify_parent.
	(begin_drop_privileges): Call do_exit.
	(finish_drop_privileges): Likewise.
	* nscd/selinux.c (preserve_capabilities): Likewise.
	(install_real_capabilities): Likewise.
	(nscd_selinux_enabled): Likewise.
	(avc_create_thread): Likewise.
	(avc_alloc_lock): Likewise.
	(nscd_avc_init): Likewise.
	* nscd/nscd.c (parent_fd): New static variable.
	(main): Create a pipe between parent and child processes.
	Skip closing parent_fd.
	(monitor_child): New function.
	(do_exit): Likewise.
	(notify_parent): Likewise.
	* nscd/nscd.h (notify_parent): Likewise.
	(do_exit): Likewise.

2014-03-03  Carlos O'Donell  <carlos@redhat.com>

	* malloc/malloc.c (__libc_calloc): Revert last change.

2014-03-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-03-03  Rajalakshmi Srinivasaraghavan <raji@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/strrchr.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strrchr multiarch
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strrchr-power7.S: New file.
	* string/strrchr.c: Define STRRCHR.

2014-02-28  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* benchtest/bench-strtok.c (simple_strtok): Delete.
	(strtok_string): Use as benchmark.
	* string/strtok (STRTOK): New macro.

2014-02-28  Carlos O'Donell  <carlos@redhat.com>

	* manual/threads.texi: Add header and standard comments to all
	functions.

	* elf/dl-lookup.c (check_match): New function.
	(ELF_MACHINE_SYM_NO_MATCH): Adjust comment.
	(do_lookup_x): Remove nested function check_match. Use non-nested
	function check_match.

2014-02-28  Roland McGrath  <roland@hack.frob.com>

	* csu/Makefile (generated, before-compile): Use += rather than =.
	* catgets/Makefile (generated, generated-dirs): Likewise.
	* debug/Makefile (generated): Likewise.
	* dlfcn/Makefile (generated): Likewise.
	* elf/Makefile (before-compile, generated, generated-dirs): Likewise.
	* iconvdata/Makefile (before-compile, generated): Likewise.
	* intl/Makefile (before-compile, generated, generated-dirs): Likewise.
	* libio/Makefile (generated): Likewise.
	* malloc/Makefile (generated): Likewise.
	* manual/Makefile (generated, generated-dirs): Likewise.
	* misc/Makefile (generated): Likewise.
	* posix/Makefile (generated): Likewise.
	* resolv/Makefile (generated): Likewise.
	* sunrpc/Makefile (generated, generated-dirs): Likewise.
	* timezone/Makefile (generated, generated-dirs): Likewise.

	* stdio-common/Versions (libc: GLIBC_PRIVATE): Add missing }.

2014-02-27  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add llround
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround-power8.S: New
	file: POWER8 llround ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround.c
	(__lllround): Add POWER8 implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llround.S: New file:
	POWER8 llround implementation.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add llrint
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint-power8.S: New
	file: POWER8 llrint ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint.c (__lllrint):
	Add POWER8 implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_llrint.S: New file:
	POWER8 llrint implementation.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add finite
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite-power8.S: New
	file: POWER8 finite ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite.c (__finite):
	Add POWER8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finitef.c (__finitef):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_finite.S: New file:
	POWER8 finite implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_finitef.S: New file.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add isinf
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf-power8.S: New
	file: POWER8 isinf ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf.c (__isinf): Add
	POWER8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinff.c (__isinff):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinf.S: New file: POWER8
	isinf implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isinff.S: New file.

	* sysdeps/powerpc/powerpc32/power4/multiarch/init-arch.h
	(INIT_ARCH): Add hwcap2 initialization.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add isnan
	power8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power8.S: New
	file: POWER8 isnan ifunc implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan.c (__isnan): Add
	POWER8 implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnanf.c (__isnanf):
	Likewise.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnan.S: New file: POWER8
	isnan implementation.
	* sysdeps/powerpc/powerpc64/power8/fpu/s_isnanf.S: New file.

2014-02-27  Joey Ye  <joey.ye@arm.com>

	* sysdeps/arm/soft-fp/sfp-machine.h (_FP_NANFRAC_S, _FP_NANFRAC_D)
	(_FP_NANFRAC_Q): Set to zero.

2014-02-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16623]
	* math/auto-libm-test-in: New test inputs.
	* math/auto-libm-test-out: Regenerate.
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Preserve sign of A
	and DA.
	(__cos): Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerate.

2014-02-27  Joseph Myers  <joseph@codesourcery.com>

	* scripts/evaluate-test.sh: Take new argument indicating whether
	failure is expected.
	* Makeconfig (evaluate-test): Pass argument to evaluate-test.sh
	indicating whether failure is expected.
	* conform/Makefile (test-xfail-run-conformtest): New variable.
	($(objpfx)run-conformtest.out): Don't expect to fail at makefile
	level.
	* posix/Makefile (test-xfail-annexc): New variable.
	($(objpfx)annexc.out): Don't expect to fail at makefile level.

2014-02-26  Joseph Myers  <joseph@codesourcery.com>

	* argp/Makefile: Include Makeconfig immediately after defining
	subdir.
	* assert/Makefile: Likewise.
	* benchtests/Makefile: Likewise.
	* catgets/Makefile: Likewise.
	* conform/Makefile: Likewise.
	* crypt/Makefile: Likewise.
	* csu/Makefile: Likewise.
	(all): Remove target.
	* ctype/Makefile: Include Makeconfig immediately after defining
	subdir.
	* debug/Makefile: Likewise.
	* dirent/Makefile: Likewise.
	* dlfcn/Makefile: Likewise.
	* gmon/Makefile: Likewise.
	* gnulib/Makefile: Likewise.
	* grp/Makefile: Likewise.
	* gshadow/Makefile: Likewise.
	* hesiod/Makefile: Likewise.
	* hurd/Makefile: Likewise.
	(all): Remove target.
	* iconvdata/Makefile: Include Makeconfig immediately after
	defining subdir.
	* inet/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* io/Makefile: Likewise.
	* libio/Makefile: Likewise.
	(all): Remove target.
	* locale/Makefile: Include Makeconfig immediately after defining
	subdir.
	* login/Makefile: Likewise.
	* mach/Makefile: Likewise.
	(all): Remove target.
	* malloc/Makefile: Include Makeconfig immediately after defining
	subdir.
	(all): Remove target.
	* manual/Makefile: Include Makeconfig immediately after defining
	subdir.
	* math/Makefile: Likewise.
	* misc/Makefile: Likewise.
	* nis/Makefile: Likewise.
	* nss/Makefile: Likewise.
	* po/Makefile: Likewise.
	(all): Remove target.
	* posix/Makefile: Include Makeconfig immediately after defining
	subdir.
	* pwd/Makefile: Likewise.
	* resolv/Makefile: Likewise.
	* resource/Makefile: Likewise.
	* rt/Makefile: Likewise.
	* setjmp/Makefile: Likewise.
	* shadow/Makefile: Likewise.
	* signal/Makefile: Likewise.
	* socket/Makefile: Likewise.
	* soft-fp/Makefile: Likewise.
	* stdio-common/Makefile: Likewise.
	* stdlib/Makefile: Likewise.
	* streams/Makefile: Likewise.
	* string/Makefile: Likewise.
	* sunrpc/Makefile: Likewise.
	(all): Remove target.
	* sysvipc/Makefile: Include Makeconfig immediately after defining
	subdir.
	* termios/Makefile: Likewise.
	* time/Makefile: Likewise.
	* timezone/Makefile: Likewise.
	(all): Remove target.
	* wcsmbs/Makefile: Include Makeconfig immediately after defining
	subdir.
	* wctype/Makefile: Likewise.

2014-02-26  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/mips/math_private.h (_FPU_MASK_ALL) New.
	(libc_feholdexcept_mips): Use _FPU_MASK_ALL.
	(libc_feholdexcept_setround_mips): Ditto.
	(libc_feholdsetround): New.
	(libc_feholdsetroundf): New.
	(libc_feholdsetroundl): New.
	(libc_feupdateenv_test_mips): New.
	(libc_feupdateenv_test): New.
	(libc_feupdateenv_testf): New.
	(libc_feupdateenv_testl): New.
	(libc_feresetround): New.
	(libc_feresetroundf): New.
	(libc_feresetroundl): New.
	(libc_fetestexcept_mips): New.
	(libc_fetestexcept): New.
	(libc_fetestexceptf): New.
	(libc_fetestexceptl): New.
	(HAVE_RM_CTX): New.
	(libc_feholdexcept_setround_mips_ctx): New.
	(libc_feholdexcept_setround_ctx): New.
	(libc_feholdexcept_setroundf_ctx): New.
	(libc_feholdexcept_setroundl_ctx): New.
	(libc_fesetenv_mips_ctx): New.
	(libc_fesetenv_ctx): New.
	(libc_fesetenv_ctxf): New.
	(libc_fesetenv_ctxl): New.
	(libc_feupdateenv_mips_ctx): New.
	(libc_feupdateenv_ctx): New.
	(libc_feupdateenvf_ctx): New.
	(libc_feupdateenvl_ctx): New.
	(libc_feholdsetround_mips_ctx): New.
	(libc_feholdsetround_ctx): New.
	(libc_feholdsetroundf_ctx): New.
	(libc_feholdsetroundl_ctx): New.
	(libc_feresetround_mips_ctx): New.
	(libc_feresetround_ctx): New.
	(libc_feresetroundf_ctx): New.
	(libc_feresetroundl_ctx): New.

2014-02-26  Carlos O'Donell  <carlos@redhat.com>

	* manual/ipc.texi (Semaphores): Use @Theglibc{}.

	* manual/ipc.texi: New file.
	* manual/Makefile (chapters): Add ipc.
	* manual/job.texi: Add "Inter-Process Communication" to next.
	* manual/process.texi: Add "Inter-Process Communication" to prev.

2014-02-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-02-26  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* malloc/malloc.c (__libc_calloc): Simplify implementation.

	* manual/arith.texi: Fix spaces after sentences.
	* manual/charset.texi: Likewise.
	* manual/errno.texi: Likewise.
	* manual/install.texi: Likewise.
	* manual/llio.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/maint.texi: Likewise.
	* manual/math.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/probes.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/socket.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.

2014-02-25  Carlos O'Donell  <carlos@redhat.com>

	[BZ #16632]
	* include/features.h: Don't warn about _BSD_SOURCE or _SVID_SOURCE if
	_DEFAULT_SOURCE is defined.

2014-02-25  Ulrich Drepper  <drepper@gmail.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #16613]
	* elf/dl-tls.c (_dl_count_modids): New function.
	* sysdeps/generic/ldsodefs.h: Declare _dl_count_modids.
	* elf/rtld.c (dl_main): Call _dl_count_modids to track TLS usage in
	audit library and increment generation counter.
	(_dl_allocate_tls_init): Add assertion to check TLS generation count.
	* elf/tst-audit9.c: New file.
	* elf/tst-auditmod9a.c: New file.
	* elf/tst-auditmod9b.c: New file.
	* elf/Makefile: Add rules to build and run tst-audit9.

2014-02-25  Florian Weimer  <fweimer@redhat.com>

	[BZ #15347]
	* misc/sys/select.h (__FD_MASK): Avoid signed integer overflow.

2014-02-25  Will Newton  <will.newton@linaro.org>

	* sysdeps/arm/__longjmp.S: Include stap-probe.h.
	(__longjmp): Restore sp and lr before restoring callee
	saved registers.  Add longjmp and longjmp_target
	SystemTap probe point.
	* sysdeps/arm/bits/setjmp.h (__jmp_buf): Update comment.
	* sysdeps/arm/include/bits/setjmp.h (__JMP_BUF_SP):
	Define to zero to match jmpbuf layout.
	* sysdeps/arm/setjmp.S: Include stap-probe.h.
	(__sigsetjmp): Save sp and lr before saving callee
	saved registers.  Add setjmp SystemTap probe point.

2014-02-24  Stefan Liebler  <stli@linux.vnet.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-02-24  Andreas Schwab  <schwab@suse.de>

	[BZ #15804]
	* elf/pldd.c (wait_for_ptrace_stop): New function.
	(main): Call it after attaching.

2014-02-22  Roland McGrath  <roland@hack.frob.com>

	* Makerules ($(common-objpfx)Versions.v.i): No longer depend
	on $(common-objpfx)abi-versions.h; using <shlib-compat.h> inside
	Versions files is now verboten.
	* hurd/Versions (libc: GLIBC_2.0):
	Remove various [SHLIB_COMPAT (libc, GLIBC_2_0, ...)] sections.
	(libc: HURD_CTHREADS_0.3): Remove conditionalization, was under
	[!SHLIB_COMPAT (libc, GLIBC_2_0, GLIBC_2_2)].
	* mach/Versions: Likewise.

	* csu/Versions: Remove unused %include.
	* resolv/Versions: Likewise.

2014-02-21  Joseph Myers  <joseph@codesourcery.com>

	* Makefile ($(objpfx)c++-types-check.out): Use $(evaluate-test).
	($(objpfx)check-local-headers.out): Likewise.
	($(objpfx)begin-end-check.out): Likewise.
	* Makerules (check-abi-%.out): Likewise.
	* catgets/Makefile ($(objpfx)test1.cat): Likewise.
	($(objpfx)test2.cat): Likewise.
	($(objpfx)de/libc.cat): Likewise.
	($(objpfx)test-gencat.out): Likewise.
	* conform/Makefile ($(objpfx)run-conformtest.out): Likewise.
	* elf/Makefile ($(objpfx)order-cmp.out): Likewise.
	($(objpfx)noload-mem): Likewise.
	($(objpfx)tst-pathopt.out): Likewise.
	($(objpfx)tst-rtld-load-self.out): Likewise.
	($(objpfx)tst-array1-cmp.out): Likewise.
	($(objpfx)tst-array1-static-cmp.out): Likewise.
	($(objpfx)tst-array2-cmp.out): Likewise.
	($(objpfx)tst-array3-cmp.out): Likewise.
	($(objpfx)tst-array4-cmp.out): Likewise.
	($(objpfx)tst-array5-cmp.out): Likewise.
	($(objpfx)tst-array5-static-cmp.out): Likewise.
	($(objpfx)check-textrel.out): Likewise.
	($(objpfx)check-execstack.out): Likewise.
	($(objpfx)check-localplt.out): Likewise.
	($(objpfx)order2-cmp.out): Likewise.
	($(objpfx)tst-leaks1-mem): Likewise.
	($(objpfx)tst-leaks1-static-mem): Likewise.
	($(objpfx)tst-initorder-cmp.out): Likewise.
	($(objpfx)tst-initorder2-cmp.out): Likewise.
	($(objpfx)tst-unused-dep.out): Likewise.
	($(objpfx)tst-unused-dep-cmp.out): Likewise.
	* grp/Makefile ($(objpfx)tst_fgetgrent.out): Likewise.
	* iconv/Makefile (test-iconvconfig): Likewise.
	* iconvdata/Makefile ($(objpfx)mtrace-tst-loading): Likewise.
	($(objpfx)iconv-test.out): Likewise.
	($(objpfx)tst-tables.out): Likewise.
	* intl/Makefile ($(objpfx)mtrace-tst-gettext): Likewise.
	($(objpfx)tst-gettext.out): Likewise.
	($(objpfx)tst-translit.out): Likewise.
	($(objpfx)tst-gettext2.out): Likewise.
	($(objpfx)tst-gettext4.out): Likewise.
	($(objpfx)tst-gettext6.out): Likewise.
	* io/Makefile ($(objpfx)ftwtest.out): Likewise.
	* libio/Makefile ($(objpfx)test-freopen.out): Likewise.
	($(objpfx)tst-fopenloc-cmp.out): Likewise.
	($(objpfx)tst-fopenloc-mem.out): Likewise.
	* malloc/Makefile ($(objpfx)tst-mtrace.out): Likewise.
	* misc/Makefile ($(objpfx)tst-error1-mem): Likewise.
	* posix/Makefile ($(objpfx)globtest.out): Likewise.
	($(objpfx)wordexp-tst.out): Likewise.
	($(objpfx)annexc.out): Likewise.
	($(objpfx)tst-fnmatch-mem): Likewise.
	($(objpfx)bug-regex2-mem): Likewise.
	($(objpfx)bug-regex14-mem): Likewise.
	($(objpfx)bug-regex21-mem): Likewise.
	($(objpfx)bug-regex31-mem): Likewise.
	($(objpfx)tst-vfork3-mem): Likewise.
	($(objpfx)tst-rxspencer-no-utf8-mem): Likewise.
	($(objpfx)tst-pcre-mem): Likewise.
	($(objpfx)tst-boost-mem): Likewise.
	($(objpfx)tst-getconf.out): Likewise.
	($(objpfx)bug-ga2-mem): Likewise.
	($(objpfx)bug-glob2-mem): Likewise.
	* resolv/Makefile ($(objpfx)mtrace-tst-leaks): Likewise.
	($(objpfx)mtrace-tst-leaks2): Likewise.
	* stdio-common/Makefile ($(objpfx)tst-unbputc.out): Likewise.
	($(objpfx)tst-printf.out): Likewise.
	($(objpfx)tst-setvbuf1.out): Likewise.
	($(objpfx)tst-setvbuf1-cmp.out): Likewise.
	* stdlib/Makefile ($(objpfx)isomac.out): Likewise.
	($(objpfx)tst-fmtmsg.out): Likewise.
	* string/Makefile ($(objpfx)tst-svc-cmp.out): Likewise.
	* sysdeps/x86/Makefile ($(objpfx)tst-xmmymm.out): Likewise.

	* bits/fcntl.h [__USE_MISC]: Remove redundant conditionals.
	* bits/sigaction.h [__USE_MISC]: Likewise.
	* bits/waitstatus.h: Update #endif comments.
	* ctype/ctype.h: Likewise.
	* dirent/dirent.h: Likewise.
	[__USE_MISC]: Remove redundant conditionals.
	* grp/grp.h: Update #endif comments.
	[__USE_GNU]: Remove redundant conditionals.
	[__USE_MISC]: Likewise.
	* inet/netinet/in.h [__USE_GNU]: Likewise.
	* io/sys/stat.h [__USE_MISC]: Likewise.
	* libio/bits/stdio-ldbl.h [__USE_MISC]: Likewise.
	* libio/bits/stdio.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* libio/bits/stdio2.h [__USE_MISC]: Likewise.
	* libio/stdio.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* math/bits/math-finite.h [__USE_MISC]: Likewise.
	* math/bits/mathcalls.h [__USE_MISC]: Likewise.
	* math/math.h: Update #else and #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* misc/sys/uio.h: Update #endif comments.
	* posix/bits/unistd.h [__USE_MISC]: Remove redundant conditionals.
	* posix/glob.h [__USE_MISC]: Likewise.
	* posix/sys/types.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* posix/sys/wait.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* posix/unistd.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* pwd/pwd.h [__USE_GNU]: Likewise.
	[__USE_MISC]: Likewise.
	* resolv/netdb.h [__USE_GNU]: Likewise.
	* signal/signal.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* stdlib/stdlib.h: Update #else and #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	[__USE_GNU]: Likewise.
	* string/bits/string2.h [__USE_MISC]: Likewise.
	* string/string.h: Update #endif comments.
	[__USE_MISC]: Remove redundant conditionals.
	* sysdeps/m68k/m680x0/fpu/bits/mathinline.h [__USE_MISC]:
	Likewise.
	* sysdeps/mach/hurd/bits/fcntl.h [__USE_MISC]: Likewise.
	* sysdeps/mach/hurd/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/stat.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h: Update #endif
	comments.
	[__USE_MISC]: Remove redundant conditionals.
	* sysdeps/unix/sysv/linux/bits/in.h [__USE_GNU]: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigaction.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h [__USE_GNU]: Likewise.
	* sysdeps/unix/sysv/linux/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/m68k/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/stat.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/sigaction.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/stat.h [__USE_MISC]:
	Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/stat.h [__USE_MISC]: Likewise.
	* sysdeps/x86/bits/string.h: Update #endif comments.
	* sysdeps/x86/fpu/bits/mathinline.h [__USE_MISC]: Remove redundant
	conditionals.
	* time/sys/time.h: Update #endif comments.
	* time/time.h: Likewise.
	[__USE_MISC]: Remove redundant conditionals.

2014-02-21  Yury Gribov  <y.gribov@samsung.com>

	[BZ #16600]
	* sysdeps/arm/libm-test-ulps: Update for VFPv4.

2014-02-21  Andreas Schwab  <schwab@linux-m68k.org>

	* Versions.def (librt): Add GLIBC_2.17.

2014-02-21  Adam Conrad  <adconrad@0c3.net>

	* sysdeps/powerpc/bits/hwcap.h: Allow _SYSDEPS_SYSDEP_H guard as a
	synonym for _SYS_AUXV_H to allow direct inclusion.
	* sysdeps/sparc/bits/hwcap.h: Likewise.
	* sysdeps/powerpc/sysdep.h: Define _SYSDEPS_SYSDEP_H instead of
	_SYS_AUXV_H so we can include sysdep.h and sys/auxv.h together.
	* sysdeps/sparc/sysdep.h: Likewise.

2014-02-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/bench-strrchr.c (do_test): Fix minor formatting.

2014-02-21  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* benchtests/bench-strrchr.c: Print length instead of position.

2014-02-20  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16611]
	* sysdeps/unix/sysv/linux/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030000 && __ASSUME_SOCKETCALL]
	(__ASSUME_SENDMMSG_SOCKETCALL): Define.
	[__LINUX_KERNEL_VERSION >= 0x030000 && (__i386__ || __x86_64__ ||
	__powerpc__ || __sh__ || __sparc__)] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	[__i386__ || __powerpc__ || __sh__ || __sparc__]
	(__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__ASSUME_SENDMMSG_SOCKETCALL || __ASSUME_SENDMMSG_SYSCALL]
	(__ASSUME_SENDMMSG): Define instead of using previous
	[__LINUX_KERNEL_VERSION >= 0x020627] condition.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_SENDMMSG_SYSCALL): Define.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030200] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/internal_sendmmsg.S [__ASSUME_SOCKETCALL
	&& !__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_SENDMMSG_SYSCALL] (__NR_sendmmsg): Undefine.
	[__ASSUME_SENDMMSG]: Change conditionals to
	[__ASSUME_SENDMMSG_SOCKETCALL].
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030300] (__ASSUME_SENDMMSG_SYSCALL):
	Define.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030100] (__ASSUME_SENDMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/sendmmsg.c [__ASSUME_SOCKETCALL &&
	!__ASSUME_SENDMMSG_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_SENDMMSG_SYSCALL] (__NR_sendmmsg): Undefine.
	[!__ASSUME_SENDMMSG]: Change conditional to
	[!__ASSUME_SENDMMSG_SOCKETCALL].
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030000] (__ASSUME_SENDMMSG_SYSCALL):
	Define.

	[BZ #16610]
	* sysdeps/unix/sysv/linux/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621 && __ASSUME_SOCKETCALL]
	(__ASSUME_RECVMMSG_SOCKETCALL): Define.
	[(__LINUX_KERNEL_VERSION >= 0x020621 && (__i386__ || __x86_64__ ||
	__sparc__)) || (__LINUX_KERNEL_VERSION >= 0x020625 && (__powerpc__
	|| __sh__))] (__ASSUME_RECVMMSG_SYSCALL): Likewise.
	[__i386__ || __sparc__]
	(__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__ASSUME_RECVMMSG_SOCKETCALL || __ASSUME_RECVMMSG_SYSCALL]
	(__ASSUME_RECVMMSG): Define instead of using previous
	[__LINUX_KERNEL_VERSION >= 0x020621] condition.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL): Define.
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/internal_recvmmsg.S [__ASSUME_SOCKETCALL
	&& !__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_RECVMMSG_SYSCALL] (__NR_recvmmsg): Undefine.
	[__ASSUME_RECVMMSG]: Change condition to
	[__ASSUME_RECVMMSG_SOCKETCALL].
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Define.
	(__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL): Likewise.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_RECVMMSG_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c [__ASSUME_SOCKETCALL &&
	!__ASSUME_RECVMMSG_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_RECVMMSG_SYSCALL] (__NR_recvmmsg): Undefine.
	[!__ASSUME_RECVMMSG]: Change condition to
	[!__ASSUME_RECVMMSG_SOCKETCALL].
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_RECVMMSG_SYSCALL): Define.

	[BZ #16609]
	* sysdeps/unix/sysv/linux/kernel-features.h [__i386__ ||
	__powerpc__ || __s390__ || __sh__ || __sparc__]
	(__ASSUME_SOCKETCALL): Define.
	[__LINUX_KERNEL_VERSION && __ASSUME_SOCKETCALL]
	(__ASSUME_ACCEPT4_SOCKETCALL): Likewise.
	[(__LINUX_KERNEL_VERSION >= 0x02061c && (__x86_64__ || __sparc__))
	|| (__LINUX_KERNEL_VERSION >= 0x020625 && (__powerpc__ ||
	__sh__))] (__ASSUME_ACCEPT4_SYSCALL): Likewise.
	[__sparc__] (__ASSUME_ACCEPT4_SYSCALL_WITH_SOCKETCALL): Likewise.
	[__ASSUME_ACCEPT4_SOCKETCALL || __ASSUME_ACCEPT4_SYSCALL]
	(__ASSUME_ACCEPT4): Define instead of using previous
	[__LINUX_KERNEL_VERSION >= 0x02061c && (__i386__ || __x86_64__ ||
	__powerpc__ || __sparc__ || __s390__)] condition.
	* sysdeps/unix/sysv/linux/aarch64/kernel-features.h
	(__ASSUME_ACCEPT4): Change to __ASSUME_ACCEPT4_SYSCALL.
	* sysdeps/unix/sysv/linux/accept4.c [__ASSUME_SOCKETCALL &&
	!__ASSUME_ACCEPT4_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_ACCEPT4_SYSCALL] (__NR_accept4): Undefine.
	[!__ASSUME_ACCEPT4]: Change condition to
	[!__ASSUME_ACCEPT4_SOCKETCALL].
	* sysdeps/unix/sysv/linux/alpha/kernel-features.h
	(__ASSUME_ACCEPT4): Change to __ASSUME_ACCEPT4_SYSCALL.  Correct
	condition to [__LINUX_KERNEL_VERSION >= 0x030200].
	* sysdeps/unix/sysv/linux/arm/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020624] (__ASSUME_ACCEPT4): Change to
	__ASSUME_ACCEPT4_SYSCALL.
	* sysdeps/unix/sysv/linux/i386/accept4.S [__ASSUME_ACCEPT4]:
	Change conditions to [__ASSUME_ACCEPT4_SOCKETCALL].
	* sysdeps/unix/sysv/linux/ia64/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x030300] (__ASSUME_ACCEPT4): Change to
	__ASSUME_ACCEPT4_SYSCALL.
	* sysdeps/unix/sysv/linux/internal_accept4.S [__ASSUME_SOCKETCALL
	&& !__ASSUME_ACCEPT4_SYSCALL_WITH_SOCKETCALL &&
	!__ASSUME_ACCEPT4_SYSCALL] (__NR_accept4): Undefine.
	[__ASSUME_ACCEPT4]: Change condition to
	[__ASSUME_ACCEPT4_SOCKETCALL].
	* sysdeps/unix/sysv/linux/m68k/kernel-features.h
	(__ASSUME_SOCKETCALL): Define.
	[__LINUX_KERNEL_VERSION >= 0x02061c] (__ASSUME_ACCEPT4): Remove.
	* sysdeps/unix/sysv/linux/microblaze/kernel-features.h
	(__ASSUME_SOCKETCALL): Define.
	(__ASSUME_ACCEPT4): Remove.
	[__LINUX_KERNEL_VERSION >= 0x020621] (__ASSUME_ACCEPT4_SYSCALL):
	Define.
	* sysdeps/unix/sysv/linux/mips/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x02061f] (__ASSUME_ACCEPT4_SYSCALL):
	Likewise.
	* sysdeps/unix/sysv/linux/tile/kernel-features.h
	(__ASSUME_ACCEPT4): Change to __ASSUME_ACCEPT4_SYSCALL.

	* sysdeps/unix/sysv/linux/arm/bits/hwcap.h (HWCAP_ARM_VFPD32): New
	macro.
	(HWCAP_ARM_LPAE): Likewise.
	(HWCAP_ARM_EVTSTRM): Likewise.
	* sysdeps/unix/sysv/linux/arm/dl-procinfo.c (_dl_arm_cap_flags):
	Add vpfd32, lpae and evtstrm.
	* sysdeps/unix/sysv/linux/arm/dl-procinfo.h (_DL_HWCAP_COUNT):
	Increase to 22.

2014-02-19  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of clog10.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (clog10_test_data): Use AUTO_TESTS_c_c.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-02-18  Andreas Schwab  <schwab@suse.de>

	[BZ #16574]
	* resolv/res_send.c (send_vc): Add parameter ansp2_malloced.
	Store non-zero if the second buffer was newly allocated.
	(send_dg): Likewise.
	(__libc_res_nsend): Add parameter ansp2_malloced and pass it down
	to send_vc and send_dg.
	(res_nsend): Pass NULL for ansp2_malloced.
	* resolv/res_query.c (__libc_res_nquery): Add parameter
	answerp2_malloced and pass it down to __libc_res_nsend.
	(res_nquery): Pass additional NULL to __libc_res_nquery.
	(__libc_res_nsearch): Add parameter answerp2_malloced and pass it
	down to __libc_res_nquery and __libc_res_nquerydomain.  Deallocate
	second answer buffer if answerp2_malloced was set.
	(res_nsearch): Pass additional NULL to __libc_res_nsearch.
	(__libc_res_nquerydomain): Add parameter
	answerp2_malloced and pass it down to __libc_res_nquery.
	(res_nquerydomain): Pass additional NULL to
	__libc_res_nquerydomain.
	* resolv/nss_dns/dns-network.c (_nss_dns_getnetbyname_r): Pass
	additional NULL to __libc_res_nsend and __libc_res_nquery.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname3_r): Pass
	additional NULL to __libc_res_nsearch.
	(_nss_dns_gethostbyname4_r): Revert last change.  Use new
	parameter of __libc_res_nsearch to check for separately allocated
	second buffer.
	(_nss_dns_gethostbyaddr2_r): Pass additional NULL to
	__libc_res_nquery.
	* resolv/nss_dns/dns-canon.c (_nss_dns_getcanonname_r): Pass
	additional NULL to __libc_res_nquery.
	* resolv/gethnamaddr.c (gethostbyname2): Pass additional NULL to
	__libc_res_nsearch.
	(gethostbyaddr): Pass additional NULL to __libc_res_nquery.
	* include/resolv.h: Update prototypes of __libc_res_nquery,
	__libc_res_nsearch, __libc_res_nsend.

2014-02-18  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of fma.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (fma_test_data): Use AUTO_TESTS_fff_f.
	(fma_towardzero_test_data): Likewise.
	(fma_downward_test_data): Likewise.
	(fma_upward_test_data): Likewise.
	* math/gen-auto-libm-tests.c (rounding_mode_desc): Add field
	mpc_mode.
	(rounding_modes): Add values for new field.
	(func_calc_method): Add value mpfr_fff_f.
	(func_calc_desc): Add mpfr_fff_f union field.
	(test_function): Add field exact_args.
	(FUNC): Add macro argument EXACT_ARGS.
	(FUNC_mpfr_f_f): Update call to FUNC.
	(FUNC_mpfr_f_f): Likewise.
	(FUNC_mpfr_ff_f): Likewise.
	(FUNC_mpfr_if_f): Likewise.
	(FUNC_mpc_c_f): Likewise.
	(FUNC_mpc_c_c): Likewise.
	(test_functions): Add fma.  Update calls to FUNC.
	(handle_input_arg): Add argument exact_args.
	(add_test): Update call to handle_input_arg.
	(calc_generic_results): Add argument mode.  Handle mpfr_fff_f.
	(output_for_one_input_case): Update call to calc_generic_results.
	Recalculate exact zero results in each rounding mode.

	* math/gen-auto-libm-tests.c (adjust_real): Ensure integers are
	non-negative before setting low bit.
	* math/auto-libm-test-in: Mark one asin test possibly having
	spurious underflow.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-02-17  David Holsgrove <david.holsgrove@xilinx.com>

	* sysdeps/microblaze: Move directory from ports/sysdeps/microblaze.
	* sysdeps/unix/sysv/linux/microblaze: Move directory from
	ports/sysdeps/unix/sysv/linux/microblaze.
	* README: Add missing listing for microblaze*-*-linux-gnu.

2014-02-16  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname4_r): Remove
	duplicate code

2014-02-16  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/ia64: Move directory from ports/sysdeps/ia64.
	* sysdeps/unix/sysv/linux/ia64: Move directory from
	ports/sysdeps/unix/sysv/linux/ia64.
	* README: Update listing for ia64-*-linux-gnu.

2014-02-14  Tomas Dohnalek  <tdohnale@redhat.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (test-name): New variable.
	(evaluate-test): Likewise.
	* Makerules (do-test-clean): Remove .test-result files.
	(common-mostlyclean): Likewise.
	* Rules ($(objpfx)%.out): Use $(evaluate-test) in both rules.
	* scripts/evaluate-test.sh: New file.

2014-02-14  Joseph Myers  <joseph@codesourcery.com>

	* libio/Makefile ($(objpfx)tst-fopenloc.check): Split into
	separate $(objpfx)tst-fopenloc-cmp.out and
	$(objpfx)tst-fopenloc-mem.out targets.
	(tests): Update dependencies.
	* posix/Makefile (tests variable): Add tst-rxspencer-no-utf8.
	(generated): Change tst-rxspencer-mem and tst-rxspencer.mtrace to
	tst-rxspencer-no-utf8-mem and tst-rxspencer-no-utf8.mtrace.
	(tst-rxspencer-no-utf8-ARGS): New variable.
	(tst-rxspencer-no-utf8-ENV): Likewise.
	(tests target): Depend on $(objpfx)tst-rxspencer-no-utf8-mem
	instead of $(objpfx)tst-rxspencer-mem.
	($(objpfx)tst-rxspencer-mem): Change target to
	$(objpfx)tst-rxspencer-no-utf8-mem.  Depend on
	$(objpfx)tst-rxspencer-no-utf8.out instead of running test program.
	* posix/tst-rxspencer-no-utf8.c: New file.

	* elf/Makefile ($(objpfx)order.out): Remove rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)order-cmp.out.
	($(objpfx)order-cmp.out): New rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)tst-array1-cmp.out, $(objpfx)tst-array1-static-cmp.out,
	$(objpfx)tst-array2-cmp.out, $(objpfx)tst-array3-cmp.out,
	$(objpfx)tst-array4-cmp.out, $(objpfx)tst-array5-cmp.out and
	$(objpfx)tst-array5-static-cmp.out.
	($(objpfx)tst-array1.out): Remove rule.
	($(objpfx)tst-array1-cmp.out): New rule.
	($(objpfx)tst-array1-static.out): Remove rule.
	($(objpfx)tst-array1-static-cmp.out): New rule.
	($(objpfx)tst-array2.out): Remove rule.
	($(objpfx)tst-array2-cmp.out): New rule.
	($(objpfx)tst-array3.out): Remove rule.
	($(objpfx)tst-array3-cmp.out): New rule.
	($(objpfx)tst-array4.out): Remove rule.
	($(objpfx)tst-array4-cmp.out): New rule.
	($(objpfx)tst-array5.out): Remove rule.
	($(objpfx)tst-array5-cmp.out): New rule.
	($(objpfx)tst-array5-static.out): Remove rule.
	($(objpfx)tst-array5-static-cmp.out): New rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)order2-cmp.out.
	($(objpfx)order2.out): Remove rule.
	($(objpfx)order2-cmp.out): New rule.
	($(objpfx)tst-initorder.out): Remove rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)tst-initorder-cmp.out.
	($(objpfx)tst-initorder-cmp.out): New rule.
	($(objpfx)tst-initorder2.out): Remove rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)tst-initorder2-cmp.out.
	($(objpfx)tst-initorder2-cmp.out): New rule.
	[$(run-built-tests) = yes] (tests): Depend on
	$(objpfx)tst-unused-dep-cmp.out.
	($(objpfx)tst-unused-dep-cmp.out): Do not run cmp.
	($(objpfx)tst-unused-dep-cmp.out): New rule.
	* stdio-common/Makefile [$(run-built-tests) = yes] (tests): Depend
	on $(objpfx)tst-setvbuf1-cmp.out.
	($(objpfx)tst-setvbuf1.out): Do not run cmp.
	($(objpfx)tst-setvbuf1-cmp.out): New rule.
	* string/Makefile [$(run-built-tests) = yes] (tests): Depend
	$(objpfx)tst-svc-cmp.out instead of $(objpfx)tst-svc.out.
	($(objpfx)tst-svc.out): Remove rule.
	($(objpfx)tst-svc-cmp.out): New rule.

2014-02-13  Joseph Myers  <joseph@codesourcery.com>

	* bits/mman.h [__USE_MISC]: Remove redundant conditionals.
	* ctype/ctype.h [__USE_MISC]: Likewise.
	* dirent/dirent.h [__USE_MISC]: Likewise.
	* grp/grp.h [__USE_MISC]: Likewise.
	* io/fcntl.h [__USE_MISC]: Likewise.
	* io/sys/stat.h [__USE_MISC]: Likewise.
	* libio/stdio.h [__USE_MISC]: Likewise.
	* posix/unistd.h [__USE_MISC]: Likewise.
	* pwd/pwd.h [__USE_MISC]: Likewise.
	* stdlib.h [__USE_MISC]: Likewise.
	* string/bits/string2.h [__USE_MISC]: Likewise.
	* string/string.h [__USE_MISC]: Likewise.
	* time/time.h [__USE_MISC]: Likewise.

2014-02-13  Andreas Schwab  <schwab@suse.de>

	[BZ #16574]
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname4_r): Free the
	second answer buffer if it was separately allocated.

2014-02-12  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips/math-tests.h: Include <features.h>.
	[!__mips_soft_float && _MIPS_SIM != _ABIO32 && __GNUC_PREREQ (4, 9)]
	(ROUNDING_TESTS_long_double): Do not define.
	[!__mips_soft_float && _MIPS_SIM != _ABIO32 && __GNUC_PREREQ (4, 9)]
	(EXCEPTION_TESTS_long_double): Likewise.
	* sysdeps/mips/mips64/libm-test-ulps: Update.

	* include/features.h (__USE_BSD): Remove macro definitions.
	(__USE_SVID): Likewise.
	(_BSD_SOURCE): Likewise.
	(_SVID_SOURCE): Likewise.
	[!defined _BSD_SOURCE && !defined _SVID_SOURCE]: Remove condition
	from definition of _DEFAULT_SOURCE.
	[_BSD_SOURCE || _SVID_SOURCE]: Change condition to
	[_DEFAULT_SOURCE].
	* bits/fcntl.h [__USE_BSD]: Change condition to [__USE_MISC].
	* bits/mman.h [__USE_BSD]: Likewise.
	* bits/termios.h [__USE_BSD]: Likewise.
	* bits/waitstatus.h [__USE_BSD]: Likewise.
	* ctype/ctype.h [__USE_SVID]: Likewise.
	* dirent/dirent.h [__USE_BSD]: Likewise.
	* grp/grp.h [__USE_SVID]: Likewise.
	[__USE_BSD]: Likewise.
	* inet/netinet/igmp.h [__USE_BSD]: Likewise.
	* io/fcntl.h [__USE_BSD]: Likewise.
	* io/ftw.h [__USE_BSD]: Likewise.
	* io/sys/stat.h [__USE_BSD]: Likewise.
	* libio/bits/stdio-ldbl.h [__USE_BSD]: Likewise.
	* libio/bits/stdio2.h [__USE_BSD]: Likewise.
	* libio/stdio.h [__USE_SVID]: Likewise.
	[__USE_BSD]: Likewise.
	* math/math.h [__USE_SVID]: Likewise.
	[__USE_BSD]: Likewise.
	* misc/bits/syslog-ldbl.h [__USE_BSD]: Likewise.
	* misc/bits/syslog.h [__USE_BSD]: Likewise.
	* misc/search.h [__USE_SVID]: Likewise.
	* misc/sys/mman.h [__USE_BSD]: Likewise.
	* misc/sys/syslog.h [__USE_BSD]: Likewise.
	* misc/sys/uio.h [__USE_BSD]: Likewise.
	* posix/bits/unistd.h [__USE_BSD]: Likewise.
	* posix/glob.h [__USE_BSD]: Likewise.
	* posix/regex.h [__USE_BSD]: Likewise.
	* posix/sys/types.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* posix/sys/utsname.h [__USE_SVID]: Likewise.
	* posix/sys/wait.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* posix/unistd.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* pwd/pwd.h [__USE_SVID]: Likewise.
	* resolv/netdb.h [__USE_BSD]: Likewise.
	* setjmp/setjmp.h [__USE_BSD]: Likewise.
	* signal/signal.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* socket/sys/socket.h [__USE_BSD]: Likewise.
	* stdlib/fmtmsg.h [__USE_SVID]: Likewise.
	* stdlib/stdlib.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* string/bits/string2.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.
	* string/bits/string3.h [__USE_BSD]: Likewise.
	* string/endian.h [__USE_BSD]: Likewise.
	* string/string.h [__USE_SVID]: Likewise.
	[__USE_BSD]: Likewise.
	* string/strings.h [__USE_BSD]: Likewise.
	* sysdeps/generic/netinet/ip.h [__USE_BSD]: Likewise.
	* sysdeps/gnu/netinet/ip_icmp.h [__USE_BSD]: Likewise.
	* sysdeps/mach/hurd/bits/fcntl.h [__USE_BSD]: Likewise.
	* sysdeps/mach/hurd/bits/stat.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/mman.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/termios.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/bits/mman-linux.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/bits/sys_errlist.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/bits/termios.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/termios.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/netinet/if_ether.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/netinet/if_fddi.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/netinet/if_tr.h [__USE_BSD]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h [__USE_BSD]:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h [__USE_BSD]:
	Likewise.
	* sysdeps/x86/bits/string.h [__USE_BSD]: Likewise.
	* sysvipc/sys/ipc.h [__USE_SVID]: Likewise.
	* termios/termios.h [__USE_BSD]: Likewise.
	* time/sys/time.h [__USE_BSD]: Likewise.
	* time/time.h [__USE_BSD]: Likewise.
	[__USE_SVID]: Likewise.

	* Makefile (subdir_targets): Remove subdir_lint.out.

	* stdio-common/Makefile (do-tst-unbputc): Remove target.
	(do-tst-printf): Likewise.
	(tests): Depend directly on $(objpfx)tst-unbputc.out and
	$(objpfx)tst-printf.out.

	* io/ftwtest-sh (testout): Change to $tmp/ftwtest-tmp.out.

	* Makerules (check-abi-%): Change target to
	$(objpfx)check-abi-%.out.
	(check-abi target): Update dependencies.
	(check-abi-pattern variable): Redirect output of diff to $@.
	(check-abi variable): Likewise.
	* elf/Makefile (check-abi): Update dependencies.

	* soft-fp/op-common.h (_FP_DECL): Mark exponent as possibly
	unused.
	(_FP_PACK_SEMIRAW): Determine tininess based on rounding shifted
	value if _FP_TININESS_AFTER_ROUNDING and unrounded value is in
	subnormal range.
	(_FP_PACK_CANONICAL): Determine tininess based on rounding to
	normal precision if _FP_TININESS_AFTER_ROUNDING and unrounded
	value has largest subnormal exponent.
	* soft-fp/soft-fp.h [FP_NO_EXCEPTIONS]
	(_FP_TININESS_AFTER_ROUNDING): Undefine and redefine to 0.
	* sysdeps/aarch64/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): New macro.
	* sysdeps/alpha/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/arm/soft-fp/sfp-machine.h (_FP_TININESS_AFTER_ROUNDING):
	Likewise.
	* sysdeps/mips/mips64/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/mips/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/powerpc/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/sh/soft-fp/sfp-machine.h (_FP_TININESS_AFTER_ROUNDING):
	Likewise.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h
	(_FP_TININESS_AFTER_ROUNDING): Likewise.
	* sysdeps/tile/sfp-machine.h (_FP_TININESS_AFTER_ROUNDING):
	Likewise.

2014-02-12  Dylan Alex Simon  <dylan@dylex.net>

	[BZ #16545]
	* sysdeps/x86_64/fpu/libm-test-ulps: Update on AMD family 21h
	model 1.

2014-02-12  Richard Henderson  <rth@redhat.com>

	* sysdeps/alpha: Move directory from ports/sysdeps/alpha.
	* sysdeps/unix/alpha: Move directory from ports/sysdeps/unix/alpha.
	* sysdeps/unix/sysv/linux/alpha: Move directory from
	ports/sysdeps/unix/sysv/linux/alpha.
	* README: Update listing for alpha-*-linux-gnu.

2014-02-11  Joseph Myers  <joseph@codesourcery.com>

	* include/features.h: Update comment documenting feature test
	macros.
	[_BSD_SOURCE || _SVID_SOURCE]: Give #warning.  Define
	_DEFAULT_SOURCE.
	* manual/creature.texi (_BSD_SOURCE): Remove documentation.
	(_SVID_SOURCE): Likewise.
	(_DEFAULT_SOURCE): Update description of default features.
	(Feature Test Macros): Don't mention _SVID_SOURCE in conjunction
	with _GNU_SOURCE.
	* manual/filesys.texi (__ftw_func_t): Do not refer to _BSD_SOURCE.
	(S_ISVTX): Likewise.
	* manual/math.texi (Mathematical Constants): Likewise.
	* manual/signal.texi (Interrupted Primitives): Likewise.
	* manual/startup.texi (putenv): Do not refer to _SVID_SOURCE.
	* math/test-matherr.c (_SVID_SOURCE): Do not define.
	* sysvipc/sys/ipc.h [__USE_SVID && !__USE_XOPEN && __GNUC__ >= 2]:
	Don't refer to _SVID_SOURCE in warning text.

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* elf/dl-lookup.c (ELF_MACHINE_SYM_NO_MATCH): Define if not
	already defined.
	(do_lookup_x): Use ELF_MACHINE_SYM_NO_MATCH.
	* sysdeps/mips/dl-lookup.c: Remove.
	* sysdeps/mips/dl-machine.h (ELF_MACHINE_SYM_NO_MATCH): New macro.

2014-02-11  Stefan Liebler  <stli@linux.vnet.ibm.com>

	[BZ #16447]
	* math/auto-libm-test-in: Add testcase for expl.
	* math/auto-libm-test-out: Regenerate.
	* sysdeps/ieee754/ldbl-128/e_expl.c (__ieee754_expl): Fix
	calculation of unsafe.
	* sysdeps/s390/fpu/libm-test-ulps: Adjust ULPs for added testcase.

2014-02-11  Marcus Shawcroft  <marcus.shawcroft@arm.com>

	* sysdeps/aarch64: Move directory from ports/sysdeps/aarch64.
	* sysdeps/unix/sysv/linux/aarch64: Move directory from
	ports/sysdeps/unix/sysv/linux/aarch64.
	* README: Update listing for aarch64*-*-linux-gnu.

2014-02-11  Will Newton  <will.newton@linaro.org>

	* manual/probes.texi (Mathematical Function Probes): Use
	"triggered" instead of "hit".

	* manual/probes.texi (Internal Probes): Add documentation
	of setjmp, longjmp and longjmp_target probes.

	* include/stap-probe.h: Add comment about probe argument
	format.

	* malloc/mtrace.c (attribute_hidden): Remove unused macro
	definition.  (tr_where, tr_freehook, tr_mallochook,
	tr_reallochook, tr_memalignhook): Use ANSI protoype.

2014-02-11  David S. Miller  <davem@davemloft.net>

	* stdio-common/tst-sscanf.c (main): Use 'long' for 'dummy' when
	processing int_tests.

2014-02-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/mips: Move directory from ports/sysdeps/mips.
	* sysdeps/unix/mips: Move directory from ports/sysdeps/unix/mips.
	* sysdeps/unix/sysv/linux/mips: Move directory from
	ports/sysdeps/unix/sysv/linux/mips.
	* README: Update listing for mips-*-linux-gnu and
	mips64-*-linux-gnu.

2014-02-10  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/m68k: Move directory from ports/sysdeps/m68k.
	* sysdeps/unix/sysv/linux/m68k: Move directory from
	ports/sysdeps/unix/sysv/linux/m68k.
	* README: Update listing for m68k-*-linux-gnu.

2014-02-10  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/tile: Move directory from ports/sysdeps/tile.
	* sysdeps/unix/sysv/linux/generic: Move directory from
	ports/sysdeps/unix/sysv/linux/generic.
	* sysdeps/unix/sysv/linux/tile: Move directory from
	ports/sysdeps/unix/sysv/linux/tile.
	* README: Update listing for tile*-*-linux-gnu.

2014-02-10  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* assert/assert.c (__assert_fail_base): Use glibc_likely instead
	__builtin_expect.
	* benchtests/bench-memmem.c (simple_memmem): Likewise.
	* catgets/open_catalog.c (__open_catalog): Likewise.
	* csu/libc-start.c (LIBC_START_MAIN): Likewise.
	* debug/confstr_chk.c: Likewise.
	* debug/fread_chk.c (__fread_chk): Likewise.
	* debug/fread_u_chk.c (__fread_unlocked_chk): Likewise.
	* debug/getgroups_chk.c: Likewise.
	* debug/mbsnrtowcs_chk.c: Likewise.
	* debug/mbsrtowcs_chk.c: Likewise.
	* debug/mbstowcs_chk.c: Likewise.
	* debug/memcpy_chk.c: Likewise.
	* debug/memmove_chk.c: Likewise.
	* debug/mempcpy_chk.c: Likewise.
	* debug/memset_chk.c: Likewise.
	* debug/stpcpy_chk.c (__stpcpy_chk): Likewise.
	* debug/strcat_chk.c (__strcat_chk): Likewise.
	* debug/strcpy_chk.c (__strcpy_chk): Likewise.
	* debug/strncat_chk.c (__strncat_chk): Likewise.
	* debug/vsnprintf_chk.c (___vsnprintf_chk): Likewise.
	* debug/vswprintf_chk.c (__vswprintf_chk): Likewise.
	* debug/wcpcpy_chk.c (__wcpcpy_chk): Likewise.
	* debug/wcpncpy_chk.c: Likewise.
	* debug/wcscat_chk.c (__wcscat_chk): Likewise.
	* debug/wcscpy_chk.c (__wcscpy_chk): Likewise.
	* debug/wcsncat_chk.c (__wcsncat_chk): Likewise.
	* debug/wcsncpy_chk.c: Likewise.
	* debug/wcsnrtombs_chk.c: Likewise.
	* debug/wcsrtombs_chk.c: Likewise.
	* debug/wcstombs_chk.c: Likewise.
	* debug/wmemcpy_chk.c: Likewise.
	* debug/wmemmove_chk.c: Likewise.
	* debug/wmempcpy_chk.c: Likewise.
	* debug/wmemset_chk.c: Likewise.
	* dirent/scandirat.c (SCANDIRAT): Likewise.
	* dlfcn/dladdr1.c (dladdr1): Likewise.
	* dlfcn/dladdr.c (dladdr): Likewise.
	* dlfcn/dlclose.c (dlclose_doit): Likewise.
	* dlfcn/dlerror.c (__dlerror): Likewise.
	* dlfcn/dlinfo.c (dlinfo_doit): Likewise.
	* dlfcn/dlmopen.c (dlmopen_doit): Likewise.
	* dlfcn/dlopen.c (dlopen_doit): Likewise.
	* dlfcn/dlopenold.c (__dlopen_nocheck): Likewise.
	* dlfcn/dlsym.c (dlsym_doit): Likewise.
	* dlfcn/dlvsym.c (dlvsym_doit): Likewise.
	* elf/dl-cache.c (_dl_load_cache_lookup): Likewise.
	* elf/dl-close.c (remove_slotinfo, _dl_close_worker, _dl_close):
	Likewise.
	* elf/dl-conflict.c: Likewise.
	* elf/dl-deps.c (_dl_build_local_scope, _dl_map_object_deps): Likewise.
	* elf/dl-dst.h: Likewise.
	* elf/dl-fini.c (_dl_sort_fini, _dl_fini): Likewise.
	* elf/dl-fptr.c (_dl_make_fptr): Likewise.
	* elf/dl-hwcaps.c (_dl_important_hwcaps): Likewise.
	* elf/dl-init.c (call_init, _dl_init): Likewise.
	* elf/dl-libc.c (__libc_dlopen_mode, __libc_dlsym): Likewise.
	* elf/dl-load.c (_dl_dst_substitute, fillin_rpath, _dl_init_paths)
	(_dl_map_object_from_fd, open_verify, open_path, _dl_map_object):
	Likewise.
	* elf/dl-lookup.c (do_lookup_x, add_dependency, _dl_lookup_symbol_x):
	Likewise.
	* elf/dl-minimal.c (__libc_memalign): Likewise.
	* elf/dl-open.c (add_to_global, dl_open_worker, _dl_open): Likewise.
	* elf/dl-reloc.c (_dl_relocate_object): Likewise.
	* elf/dl-runtime.c (_dl_fixup, _dl_profile_fixup): Likewise.
	* elf/dl-sym.c (do_sym): Likewise.
	* elf/dl-tls.c (tls_get_addr_tail, update_get_addr)
	(__tls_get_addr, _dl_tls_get_addr_soft): Likewise.
	* elf/dl-version.c (match_symbol, _dl_check_map_versions): Likewise.
	* elf/dl-writev.h (_dl_writev): Likewise.
	* elf/ldconfig.c (search_dir): Likewise.
	* elf/rtld.c (_dl_start_final, _dl_start, init_tls, do_preload)
	(dl_main): Likewise.
	* elf/setup-vdso.h (setup_vdso): Likewise.
	* grp/compat-initgroups.c (compat_call): Likewise.
	* grp/fgetgrent.c (fgetgrent): Likewise.
	* grp/initgroups.c (getgrouplist, initgroups): Likewise.
	* grp/putgrent.c (putgrent): Likewise.
	* hesiod/nss_hesiod/hesiod-grp.c (_nss_hesiod_initgroups_dyn):
	Likewise.
	* hurd/hurdinit.c: Likewise.
	* iconvdata/8bit-gap.c (struct): Likewise.
	* iconvdata/ansi_x3.110.c : Likewise.
	* iconvdata/big5.c : Likewise.
	* iconvdata/big5hkscs.c : Likewise.
	* iconvdata/cp1255.c: Likewise.
	* iconvdata/cp1258.c : Likewise.
	* iconvdata/cp932.c : Likewise.
	* iconvdata/euc-cn.c: Likewise.
	* iconvdata/euc-jisx0213.c : Likewise.
	* iconvdata/euc-jp.c: Likewise.
	* iconvdata/euc-jp-ms.c : Likewise.
	* iconvdata/euc-kr.c (euckr_from_ucs4): Likewise.
	* iconvdata/gb18030.c : Likewise.
	* iconvdata/gbbig5.c (const): Likewise.
	* iconvdata/gbgbk.c: Likewise.
	* iconvdata/gbk.c : Likewise.
	* iconvdata/ibm1364.c : Likewise.
	* iconvdata/ibm930.c : Likewise.
	* iconvdata/ibm932.c: Likewise.
	* iconvdata/ibm933.c : Likewise.
	* iconvdata/ibm935.c : Likewise.
	* iconvdata/ibm937.c : Likewise.
	* iconvdata/ibm939.c : Likewise.
	* iconvdata/ibm943.c: Likewise.
	* iconvdata/iso_11548-1.c: Likewise.
	* iconvdata/iso-2022-cn.c : Likewise.
	* iconvdata/iso-2022-cn-ext.c : Likewise.
	* iconvdata/iso-2022-jp-3.c: Likewise.
	* iconvdata/iso-2022-jp.c (gconv_end): Likewise.
	* iconvdata/iso-2022-kr.c : Likewise.
	* iconvdata/iso646.c (gconv_end): Likewise.
	* iconvdata/iso_6937-2.c : Likewise.
	* iconvdata/iso_6937.c : Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/johab.c (johab_sym_hanja_to_ucs): Likewise.
	* iconvdata/shift_jisx0213.c : Likewise.
	* iconvdata/sjis.c : Likewise.
	* iconvdata/t.61.c : Likewise.
	* iconvdata/tcvn5712-1.c : Likewise.
	* iconvdata/tscii.c: Likewise.
	* iconvdata/uhc.c : Likewise.
	* iconvdata/unicode.c (gconv_end): Likewise.
	* iconvdata/utf-16.c (gconv_end): Likewise.
	* iconvdata/utf-32.c (gconv_end): Likewise.
	* iconvdata/utf-7.c (base64): Likewise.
	* iconv/gconv_cache.c (__gconv_load_cache): Likewise.
	* iconv/gconv_close.c (__gconv_close): Likewise.
	* iconv/gconv_open.c (__gconv_open): Likewise.
	* iconv/gconv_simple.c (internal_ucs4_loop_single)
	(ucs4_internal_loop, ucs4_internal_loop_unaligned)
	(ucs4_internal_loop_single, internal_ucs4le_loop_single)
	(ucs4le_internal_loop, ucs4le_internal_loop_unaligned)
	(ucs4le_internal_loop_single): Likewise.
	* iconv/iconv.c (iconv): Likewise.
	* iconv/iconv_close.c: Likewise.
	* iconv/loop.c (SINGLE): Likewise.
	* iconv/skeleton.c (FUNCTION_NAME): Likewise.
	* include/atomic.h: Likewise.
	* inet/inet6_option.c (option_alloc): Likewise.
	* intl/bindtextdom.c (set_binding_values): Likewise.
	* intl/dcigettext.c (DCIGETTEXT, _nl_find_msg): Likewise.
	* intl/loadmsgcat.c (_nl_load_domain): Likewise.
	* intl/localealias.c (read_alias_file): Likewise.
	* libio/filedoalloc.c (_IO_file_doallocate): Likewise.
	* libio/fileops.c (_IO_file_open, _IO_file_underflow_mmap)
	(_IO_new_file_overflow, _IO_file_xsgetn_mmap): Likewise.
	* libio/fmemopen.c (fmemopen): Likewise.
	* libio/iofgets.c (_IO_fgets): Likewise.
	* libio/iofgets_u.c (fgets_unlocked): Likewise.
	* libio/iofgetws.c (fgetws): Likewise.
	* libio/iofgetws_u.c (fgetws_unlocked): Likewise.
	* libio/iogetdelim.c (_IO_getdelim): Likewise.
	* libio/wfileops.c (_IO_wfile_underflow, _IO_wfile_underflow_mmap)
	(adjust_wide_data, _IO_wfile_seekoff): Likewise.
	* locale/findlocale.c (_nl_find_locale): Likewise.
	* locale/loadarchive.c (_nl_load_locale_from_archive): Likewise.
	* locale/loadlocale.c (_nl_intern_locale_data, _nl_load_locale):
	Likewise.
	* locale/setlocale.c (setlocale): Likewise.
	* login/programs/pt_chown.c (main): Likewise.
	* malloc/arena.c (ptmalloc_init, shrink_heap, arena_get2): Likewise.
	* malloc/malloc.c (_int_malloc, _int_free): Likewise.
	* malloc/memusage.c (update_data, malloc, realloc, calloc, free)
	(mmap, mmap64, mremap, munmap): Likewise.
	* math/e_exp2l.c: Likewise.
	* math/e_scalb.c (invalid_fn, __ieee754_scalb): Likewise.
	* math/e_scalbf.c (invalid_fn, __ieee754_scalbf): Likewise.
	* math/e_scalbl.c (invalid_fn, __ieee754_scalbl): Likewise.
	* math/s_catan.c (__catan): Likewise.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* math/s_ccosh.c (__ccosh): Likewise.
	* math/s_ccoshf.c (__ccoshf): Likewise.
	* math/s_ccoshl.c (__ccoshl): Likewise.
	* math/s_cexp.c (__cexp): Likewise.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clog.c (__clog): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/s_csin.c (__csin): Likewise.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/s_csqrt.c (__csqrt): Likewise.
	* math/s_csqrtf.c (__csqrtf): Likewise.
	* math/s_csqrtl.c (__csqrtl): Likewise.
	* math/s_ctan.c (__ctan): Likewise.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanh.c (__ctanh): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_scalb.c (sysv_scalb): Likewise.
	* math/w_scalbf.c (sysv_scalbf): Likewise.
	* math/w_scalbl.c (sysv_scalbl): Likewise.
	* misc/error.c (error_tail): Likewise.
	* misc/pselect.c (__pselect): Likewise.
	* nis/nis_callback.c (__nis_create_callback): Likewise.
	* nis/nis_call.c (__nisfind_server): Likewise.
	* nis/nis_creategroup.c (nis_creategroup): Likewise.
	* nis/nis_domain_of_r.c (nis_domain_of_r): Likewise.
	* nis/nis_findserv.c (__nis_findfastest_with_timeout): Likewise.
	* nis/nis_getservlist.c (nis_getservlist): Likewise.
	* nis/nis_lookup.c (nis_lookup): Likewise.
	* nis/nis_subr.c (nis_leaf_of_r, nis_getnames): Likewise.
	* nis/nis_table.c (__create_ib_request, nis_list, nis_add_entry)
	(nis_modify_entry, nis_first_entry, nis_next_entry): Likewise.
	* nis/nis_xdr.c (xdr_endpoint): Likewise.
	* nis/nss_compat/compat-grp.c (getgrent_next_file)
	(internal_getgrnam_r, internal_getgrgid_r): Likewise.
	* nis/nss_compat/compat-initgroups.c (add_group)
	(internal_getgrent_r): Likewise.
	* nis/nss_compat/compat-pwd.c (getpwent_next_file)
	(internal_getpwnam_r, internal_getpwuid_r): Likewise.
	* nis/nss_compat/compat-spwd.c (getspent_next_file)
	(internal_getspnam_r): Likewise.
	* nis/nss_nis/nis-alias.c (internal_nis_getaliasent_r)
	(_nss_nis_getaliasbyname_r): Likewise.
	* nis/nss_nis/nis-ethers.c (_nss_nis_gethostton_r)
	(_nss_nis_getntohost_r): Likewise.
	* nis/nss_nis/nis-grp.c (internal_nis_setgrent)
	(internal_nis_getgrent_r, _nss_nis_getgrnam_r)
	(_nss_nis_getgrgid_r): Likewise.
	* nis/nss_nis/nis-hosts.c (_nss_nis_sethostent)
	(internal_nis_gethostent_r, internal_gethostbyname2_r)
	(_nss_nis_gethostbyname_r, _nss_nis_gethostbyaddr_r)
	(_nss_nis_gethostbyname4_r): Likewise.
	* nis/nss_nis/nis-initgroups.c (internal_getgrent_r)
	(initgroups_netid): Likewise.
	* nis/nss_nis/nis-netgrp.c (_nss_nis_setnetgrent): Likewise.
	* nis/nss_nis/nis-network.c (internal_nis_getnetent_r)
	(_nss_nis_getnetbyname_r, _nss_nis_getnetbyaddr_r): Likewise.
	* nis/nss_nis/nis-proto.c (_nss_nis_getprotobyname_r)
	(_nss_nis_getprotobynumber_r): Likewise.
	* nis/nss_nis/nis-publickey.c (_nss_nis_getpublickey)
	(_nss_nis_getsecretkey): Likewise.
	* nis/nss_nis/nis-pwd.c (_nis_saveit, internal_nis_setpwent)
	(internal_nis_getpwent_r, _nss_nis_getpwnam_r)
	(_nss_nis_getpwuid_r): Likewise.
	* nis/nss_nis/nis-rpc.c (internal_nis_getrpcent_r)
	(_nss_nis_getrpcbyname_r, _nss_nis_getrpcbynumber_r): Likewise.
	* nis/nss_nis/nis-service.c (dosearch, internal_nis_getservent_r)
	(_nss_nis_getservbyname_r, _nss_nis_getservbyport_r): Likewise.
	* nis/nss_nis/nis-spwd.c (_nss_nis_setspent)
	(internal_nis_getspent_r, _nss_nis_getspnam_r): Likewise.
	* nis/nss_nisplus/nisplus-alias.c (_nss_nisplus_getaliasbyname_r):
	Likewise.
	* nis/nss_nisplus/nisplus-ethers.c (_nss_nisplus_gethostton_r)
	(_nss_nisplus_getntohost_r): Likewise.
	* nis/nss_nisplus/nisplus-grp.c (internal_nisplus_getgrent_r)
	(_nss_nisplus_getgrnam_r, _nss_nisplus_getgrgid_r): Likewise.
	* nis/nss_nisplus/nisplus-hosts.c (internal_gethostbyname2_r)
	(_nss_nisplus_gethostbyaddr_r, _nss_nisplus_gethostbyname4_r):
	Likewise.
	* nis/nss_nisplus/nisplus-initgroups.c
	(_nss_nisplus_initgroups_dyn): Likewise.
	* nis/nss_nisplus/nisplus-network.c (_nss_nisplus_getnetbyname_r)
	(_nss_nisplus_getnetbyaddr_r): Likewise.
	* nis/nss_nisplus/nisplus-proto.c (_nss_nisplus_getprotobyname_r)
	(_nss_nisplus_getprotobynumber_r): Likewise.
	* nis/nss_nisplus/nisplus-pwd.c (internal_nisplus_getpwent_r)
	(_nss_nisplus_getpwnam_r, _nss_nisplus_getpwuid_r): Likewise.
	* nis/nss_nisplus/nisplus-rpc.c (_nss_nisplus_getrpcbyname_r):
	Likewise.
	* nis/nss_nisplus/nisplus-service.c
	(internal_nisplus_getservent_r, _nss_nisplus_getservbyname_r)
	(_nss_nisplus_getservbyport_r): Likewise.
	* nis/nss_nisplus/nisplus-spwd.c (internal_nisplus_getspent_r)
	(_nss_nisplus_getspnam_r): Likewise.
	* nis/ypclnt.c (__yp_bind, yp_match, yp_all, yp_maplist):
	Likewise.
	* nscd/aicache.c (addhstaiX): Likewise.
	* nscd/cache.c (cache_search, prune_cache): Likewise.
	* nscd/connections.c (register_traced_file, send_ro_fd)
	(handle_request, nscd_run_prune, nscd_run_worker, fd_ready)
	(main_loop_epoll): Likewise.
	* nscd/grpcache.c (addgrbyX): Likewise.
	* nscd/hstcache.c (addhstbyX): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/mem.c (gc, mempool_alloc): Likewise.
	* nscd/netgroupcache.c (do_notfound, addgetnetgrentX)
	(addinnetgrX): Likewise.
	* nscd/nscd-client.h (__nscd_acquire_maplock)
	(__nscd_drop_map_ref): Likewise.
	* nscd/nscd_getai.c (__nscd_getai): Likewise.
	* nscd/nscd_getgr_r.c (nscd_getgr_r): Likewise.
	* nscd/nscd_gethst_r.c (__nscd_get_nl_timestamp, nscd_gethst_r):
	Likewise.
	* nscd/nscd_getpw_r.c (nscd_getpw_r): Likewise.
	* nscd/nscd_getserv_r.c (nscd_getserv_r): Likewise.
	* nscd/nscd_helper.c (__readvall, open_socket, __nscd_get_mapping)
	(__nscd_get_map_ref): Likewise.
	* nscd/nscd_initgroups.c (__nscd_getgrouplist): Likewise.
	* nscd/nscd_netgroup.c (__nscd_setnetgrent, __nscd_innetgr):
	Likewise.
	* nscd/pwdcache.c (addpwbyX): Likewise.
	* nscd/selinux.c (preserve_capabilities): Likewise.
	* nscd/servicescache.c (addservbyX): Likewise.
	* nss/nss_files/files-XXX.c (internal_getent): Likewise.
	* posix/fnmatch.c (fnmatch): Likewise.
	* posix/getopt.c (_getopt_internal_r): Likewise.
	* posix/glob.c (glob, glob_in_dir): Likewise.
	* posix/wordexp.c (exec_comm_child): Likewise.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyaddr2_r)
	(getanswer_r, gaih_getanswer_slice): Likewise.
	* resolv/nss_dns/dns-network.c (getanswer_r): Likewise.
	* resolv/res_init.c: Likewise.
	* resolv/res_mkquery.c (res_nmkquery): Likewise.
	* resolv/res_query.c (__libc_res_nquery): Likewise.
	* resolv/res_send.c (__libc_res_nsend, send_vc, reopen, send_dg):
	Likewise.
	* stdio-common/_i18n_number.h (_i18n_number_rewrite): Likewise.
	* stdio-common/perror.c (perror): Likewise.
	* stdio-common/printf_fp.c (___printf_fp): Likewise.
	* stdio-common/tmpnam.c (tmpnam): Likewise.
	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Likewise.
	* stdlib/cxa_finalize.c (__cxa_finalize): Likewise.
	* stdlib/cxa_thread_atexit_impl.c (__cxa_thread_atexit_impl):
	Likewise.
	* stdlib/drand48-iter.c (__drand48_iterate): Likewise.
	* stdlib/putenv.c (putenv): Likewise.
	* stdlib/setenv.c (__add_to_environ): Likewise.
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Likewise.
	* stdlib/strtol_l.c (INTERNAL): Likewise.
	* string/memmem.c (memmem): Likewise.
	* string/strerror.c (strerror): Likewise.
	* string/strnlen.c (__strnlen): Likewise.
	* string/test-memmem.c (simple_memmem): Likewise.
	* sunrpc/clnt_udp.c (__libc_clntudp_bufcreate): Likewise.
	* sunrpc/pm_getport.c (__get_socket): Likewise.
	* sysdeps/gnu/unwind-resume.c (init, _Unwind_Resume): Likewise.
	* sysdeps/i386/dl-irel.h (elf_irel): Likewise.
	* sysdeps/i386/dl-machine.h (elf_machine_runtime_setup)
	(elf_machine_rel, elf_machine_lazy_rel, elf_machine_lazy_rela):
	Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c (__ieee754_atanh): Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c (__ieee754_fmod): Likewise.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c (__ieee754_gamma_r): Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c (__ieee754_hypot): Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c (__ieee754_j1, __ieee754_y1):
	Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c (__ieee754_jn, __ieee754_yn):
	Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c (__ieee754_log10): Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c (__ieee754_log2): Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c (__ieee754_sinh): Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c (__asinh): Likewise.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c (__log1p): Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/dbl-64/s_modf.c (__modf): Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbln.c (__scalbln): Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbn.c (__scalbn): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_acosh.c (__ieee754_acosh):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_log10.c (__ieee754_log10):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_log2.c (__ieee754_log2):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_frexp.c (__frexp): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c (__remquo): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c (__round): Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c (__ieee754_atanhf): Likewise.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c (__ieee754_gammaf_r): Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c (__logbf): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c (__ieee754_fmodl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_nearbyint): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llrintl.c (__llrintl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llroundl.c (__llroundl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lrintl.c (__lrintl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lroundl.c (__lroundl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c (__ieee754_gammal_r):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c (__ieee754_j0l, __ieee754_y0l):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c (__ieee754_j1l, __ieee754_y1l):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_jnl, __ieee754_ynl):
	Likewise.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* sysdeps/posix/clock_getres.c (hp_timing_getres, realtime_getres):
	Likewise.
	* sysdeps/posix/fdopendir.c (__fdopendir): Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet, getaddrinfo): Likewise.
	* sysdeps/posix/opendir.c (__opendirat): Likewise.
	* sysdeps/posix/sleep.c: Likewise.
	* sysdeps/posix/tempname.c: Likewise.
	* sysdeps/powerpc/powerpc32/dl-irel.h (elf_irela): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c (__process_machine_rela):
	Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h
	(elf_machine_runtime_setup, elf_machine_rela): Likewise.
	* sysdeps/powerpc/powerpc64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/pthread/aio_notify.c (__aio_notify_only): Likewise.
	* sysdeps/pthread/aio_suspend.c (do_aio_misc_wait, aio_suspend):
	Likewise.
	* sysdeps/s390/dl-irel.h (elf_irela): Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_runtime_setup)
	(elf_machine_rela, elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_runtime_setup)
	(elf_machine_rela, elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-64/utf16-utf32-z9.c (gconv_end): Likewise.
	* sysdeps/s390/s390-64/utf8-utf16-z9.c (gconv_end): Likewise.
	* sysdeps/s390/s390-64/utf8-utf32-z9.c (gconv_end): Likewise.
	* sysdeps/sh/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/sparc/sparc32/dl-irel.h (elf_irela): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela)
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela)
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-plt.h (sparc64_fixup_plt): Likewise.
	* sysdeps/unix/clock_gettime.c (hp_timing_gettime): Likewise.
	* sysdeps/unix/clock_settime.c (hp_timing_settime): Likewise.
	* sysdeps/unix/grantpt.c (grantpt): Likewise.
	* sysdeps/unix/sysv/linux/accept4.c (accept4): Likewise.
	* sysdeps/unix/sysv/linux/adjtime.c (ADJTIME): Likewise.
	* sysdeps/unix/sysv/linux/check_pf.c (__check_pf): Likewise.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Likewise.
	* sysdeps/unix/sysv/linux/faccessat.c (faccessat): Likewise.
	* sysdeps/unix/sysv/linux/fchmodat.c (fchmodat): Likewise.
	* sysdeps/unix/sysv/linux/fchownat.c (fchownat): Likewise.
	* sysdeps/unix/sysv/linux/futimesat.c (futimesat): Likewise.
	* sysdeps/unix/sysv/linux/fxstatat64.c (__fxstatat64): Likewise.
	* sysdeps/unix/sysv/linux/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate64.c (fallocate64): Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate.c (fallocate): Likewise.
	* sysdeps/unix/sysv/linux/i386/fchownat.c (fchownat): Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/i386/get_clockfreq.c (__get_clockfreq):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/posix_fallocate64.c
	(__posix_fallocate64_l64): Likewise.
	* sysdeps/unix/sysv/linux/i386/posix_fallocate.c
	(posix_fallocate): Likewise.
	* sysdeps/unix/sysv/linux/i386/scandir64.c (__old_scandir64):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ifaddrs.c (__netlink_request)
	(getifaddrs_internal): Likewise.
	* sysdeps/unix/sysv/linux/linkat.c (linkat): Likewise.
	* sysdeps/unix/sysv/linux/mkdirat.c (mkdirat): Likewise.
	* sysdeps/unix/sysv/linux/mq_unlink.c (mq_unlink): Likewise.
	* sysdeps/unix/sysv/linux/openat.c (OPENAT_NOT_CANCEL): Likewise.
	* sysdeps/unix/sysv/linux/posix_fallocate64.c
	(__posix_fallocate64_l64): Likewise.
	* sysdeps/unix/sysv/linux/posix_fallocate.c (posix_fallocate):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/fchownat.c (fchownat): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c
	(__get_clockfreq): Likewise.
	* sysdeps/unix/sysv/linux/readlinkat.c (readlinkat): Likewise.
	* sysdeps/unix/sysv/linux/recvmmsg.c (recvmmsg): Likewise.
	* sysdeps/unix/sysv/linux/renameat.c (renameat): Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sched_setaffinity.c: Likewise.
	* sysdeps/unix/sysv/linux/sendmmsg.c (__sendmmsg): Likewise.
	* sysdeps/unix/sysv/linux/shm_open.c (where_is_shmfs, shm_open):
	Likewise.
	* sysdeps/unix/sysv/linux/sleep.c (__sleep): Likewise.
	* sysdeps/unix/sysv/linux/symlinkat.c (symlinkat): Likewise.
	* sysdeps/unix/sysv/linux/tcgetattr.c (__tcgetattr): Likewise.
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Likewise.
	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r): Likewise.
	* sysdeps/unix/sysv/linux/unlinkat.c (unlinkat): Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fxstatat.c (__fxstatat):
	Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c
	(posix_fallocate): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/xmknodat.c (__xmknodat): Likewise.
	* sysdeps/x86_64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_runtime_setup)
	(elf_machine_rela, elf_machine_rela_relative)
	(elf_machine_lazy_rel): Likewise.
	* time/asctime.c (asctime_internal): Likewise.
	* time/tzfile.c (__tzfile_read, __tzfile_compute): Likewise.
	* time/tzset.c (__tzset_parse_tz): Likewise.
	* wcsmbs/mbrtoc16.c (mbrtoc16): Likewise.
	* wcsmbs/mbrtowc.c (__mbrtowc): Likewise.
	* wcsmbs/wcsmbsload.c (__wcsmbs_load_conv): Likewise.
	* wcsmbs/wcsmbsload.h: Likewise.

	[BZ #15894]
	* stdlib/setenv.c (__add_to_environ): Remove duplicate code.

	* malloc/arena.c (grow_heap, get_free_list, reused_arena)
	(arena_get2): Remove THREAD_STATS conditionals.
	* malloc/malloc.c (__malloc_assert, __libc_realloc, _int_free)
	(__malloc_stats, int): Likewise.

2014-02-08  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/shm_open.c (where_is_shmfs): Compare
	f.f_type to RAMFS_MAGIC too.  Compare mp->mnt_type to shm too.

	* manual/setjmp.texi: Fix typos/grammar errors.

	* debug/tst-backtrace4.c (handle_signal): Add NUM_FUNCTIONS to output.
	Only return early when n is <= 0.  Delete unused return statement.

	* debug/Makefile (CFLAGS-tst-longjmp_chk3.c): Define.
	(CPPFLAGS-tst-longjmp_chk3.c): Likewise.
	* debug/tst-longjmp_chk3.c: New file.

	* benchtests/bench-strcpy_chk.c: Move test-skeleton.c to top.
	(test_main): Replace code with set_fortify_handler call.
	* debug/test-strcpy_chk.c: Likewise.
	* debug/tst-chk1.c: Likewise.
	* debug/tst-longjmp_chk.c: Likewise.
	* test-skeleton.c: Include fcntl.h & paths.h
	(set_fortify_handler): Define.

	* debug/tst-longjmp_chk.c: Add header comment and include
	../test-skeleton.c.
	(do_test): Mark static.
	(TEST_FUNCTION): Define.

	* sysdeps/unix/sysv/linux/bits/in.h (IP_NODEFRAG): Define.
	(IP_PMTUDISC_INTERFACE): Likewise.
	(IP_MULTICAST_IF): Likewise.
	(IP_MULTICAST_TTL): Likewise.
	(IP_MULTICAST_LOOP): Likewise.
	(IP_ADD_MEMBERSHIP): Likewise.
	(IP_DROP_MEMBERSHIP): Likewise.
	(IP_UNBLOCK_SOURCE): Likewise.
	(IP_BLOCK_SOURCE): Likewise.
	(IP_ADD_SOURCE_MEMBERSHIP): Likewise.
	(IP_DROP_SOURCE_MEMBERSHIP): Likewise.
	(IP_MSFILTER): Likewise.
	(MCAST_JOIN_GROUP): Likewise.
	(MCAST_BLOCK_SOURCE): Likewise.
	(MCAST_UNBLOCK_SOURCE): Likewise.
	(MCAST_LEAVE_GROUP): Likewise.
	(MCAST_JOIN_SOURCE_GROUP): Likewise.
	(MCAST_LEAVE_SOURCE_GROUP): Likewise.
	(MCAST_MSFILTER): Likewise.
	(IP_MULTICAST_ALL): Likewise.
	(IP_UNICAST_IF): Likewise.

	* timezone/Makefile: Delete $(have-ksh) check.
	($(objpfx)tzselect): Change $(KSH) to $(BASH).
	* timezone/tzselect.ksh: Add +x mode bits.

	* sysdeps/unix/sysv/linux/linux_fsinfo.h (AFS_SUPER_MAGIC): Define.
	(ANON_INODE_FS_MAGIC): Likewise.
	(BDEVFS_MAGIC): Likewise.
	(BINFMTFS_MAGIC): Likewise.
	(BTRFS_TEST_MAGIC): Likewise.
	(CRAMFS_MAGIC_WEND): Likewise.
	(DEBUGFS_MAGIC): Likewise.
	(ECRYPTFS_SUPER_MAGIC): Likewise.
	(EXT3_SUPER_MAGIC): Likewise.
	(EXT4_SUPER_MAGIC): Likewise.
	(FUTEXFS_SUPER_MAGIC): Likewise.
	(HOSTFS_SUPER_MAGIC): Likewise.
	(HUGETLBFS_MAGIC): Likewise.
	(MINIX3_SUPER_MAGIC): Likewise.
	(MTD_INODE_FS_MAGIC): Likewise.
	(NILFS_SUPER_MAGIC): Likewise.
	(OPENPROM_SUPER_MAGIC): Likewise.
	(PIPEFS_MAGIC): Likewise.
	(PSTOREFS_MAGIC): Likewise.
	(QNX6_SUPER_MAGIC): Likewise.
	(RAMFS_MAGIC): Likewise.
	(REISERFS_SUPER_MAGIC_STRING): Likewise.
	(REISER2FS_SUPER_MAGIC_STRING): Likewise.
	(REISER2FS_JR_SUPER_MAGIC_STRING): Likewise.
	(SECURITYFS_MAGIC): Likewise.
	(SELINUX_MAGIC): Likewise.
	(SMACK_MAGIC): Likewise.
	(SOCKFS_MAGIC): Likewise.
	(SQUASHFS_MAGIC): Likewise.
	(STACK_END_MAGIC): Likewise.
	(TMPFS_MAGIC): Likewise.
	(USBDEVICE_SUPER_MAGIC): Likewise.
	(V9FS_MAGIC): Likewise.
	(XENFS_SUPER_MAGIC): Likewise.
	(CRAMFS_MAGIC): Fix typo in comment.
	(EXT2_SUPER_MAGIC): Update comment.
	(USBDEVFS_SUPER_MAGIC): Fix sorting order by moving further down.

2014-02-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/arm: Move directory from ports/sysdeps/arm.
	* sysdeps/unix/arm: Move directory from ports/sysdeps/unix/arm.
	* sysdeps/unix/sysv/linux/arm: Move directory from
	ports/sysdeps/unix/sysv/linux/arm.
	* README: Update listing for arm-*-linux-gnueabi.

	* README: Remove mention of am33.

2014-02-07  Roland McGrath  <roland@hack.frob.com>

	* bits/sigset.h (__sigemptyset): Use a statement expression rather
	than the comma operator, to avoid "rhs of comma has no effect"
	compiler warnings.
	(__sigfillset, __sigandset, __sigorset): Likewise.
	* include/signal.h (__sigemptyset): Likewise.
	* sysdeps/generic/malloc-machine.h (mutex_lock): Likewise.

2014-02-07  Allan McRae  <allan@archlinux.org>

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.19.90"
	* NEWS: Add 2.20 section.

2014-02-06  Carlos O'Donell  <carlos@redhat.com>

	[BZ #16529]
	* inet/netinet/in.h: Remove comma after IPPROTO_MH.

2014-02-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/contrib.texi: Update entry for Carlos O'Donell,
	Joseph Myers, Roland McGrath, Alexandre Oliva and Ryan Arnold.

2014-02-05  Carlos O'Donell  <carlos@rehdat.com>

	* sysdeps/unix/sysv/linux/kernel-features.h: Fix comment.

	* sysdeps/unix/sysv/linux/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x020621]
	(__ASSUME_PROC_PID_TASK_COMM): Define.

2014-02-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16398]
	* libio/wfileops.c (_IO_wfile_seekoff): Break out form
	conversion when destination buffer does not have enough space.
	* libio/tst-ftell-partial-wide.c: New test case.
	* libio/Makefile (tests): Add tst-ftell-partial-wide.

	* manual/contrib.texi: Update entry for Ond≈ôej B√≠lka, Will
	Newton and Alexandre Oliva.  Add entries for Steve Ellcey, Chris
	Leonard and Allan McRae.

2014-02-04  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update for some 64-bit differences from
	32-bit.

2014-02-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld-le.abilist:
	New file
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libBrokenLocale-le.abilist:
	New file
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libanl-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libcrypt-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libdl-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libnsl-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libresolv-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/librt-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libthread_db-le.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libutil-le.abilist:
	New file.

2014-02-01  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/shlib-versions: Change powerpc*le start to 2.17.
	* shlib-versions: Likewise.

2014-02-04  Roland McGrath  <roland@hack.frob.com>
	    Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile [$(config-machine) ends with 'le']
	(abilist-pattern): New variable, set to %-le.abilist.

	* Makerules (abilist-pattern): New variable.
	(vpath): Use $(abilist-pattern) in place of %.abilist.
	(check-abi-% pattern rule): Likewise.
	(check-abi, update-abi): Likewise.

2014-02-04  Eric Wong  <normalperson@yhbt.net>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2014-02-03  Carlos O'Donell  <carlos@redhat.com>

	* manual/startup.texi: Add next, previous, and top entries for
	the `Program Arguments' and `Environment Variables' nodes.

2014-02-03  Alexandre Oliva <aoliva@redhat.com>

	* manual/macros.texi: Add comments before MTASC-safety macros.

	* manual/users.texi: Document MTASC-safety properties.

	* manual/threads.texi (pthread_key_create, pthread_key_delete)
	(pthread_getspecific, pthread_setspecific): Format with
	@deftypefun, and add @safety note.
	* manual/signal.texi: Move comments that analyze the above
	functions to their home place.

2014-02-03  Allan McRae  <allan@archlinux.org>

	* po/sl.po: Update Slovenian translation from translation project.

2014-02-02  Alexandre Oliva <aoliva@redhat.com>

	* manual/time.texi (timegm): Add missing blank after @c.
	Reported by Joseph Myers <joseph@codesourcery.com>.

2014-02-01  Alexandre Oliva <aoliva@redhat.com>

	* manual/check-safety.sh: New.
	* manual/Makefile ($(objpfx)stamp-summary): Run it.

	* manual/terminal.texi: Document MTASC-safety properties.

	* manual/filesys.texi: Document MTASC-safety properties.

	* manual/errno.texi: Document MTASC-safety properties.

	* manual/intro.texi: Document safety identifiers and
	conditionals.

	* manual/string.texi (wcstok): Fix prototype.
	(wcstok, strtok, strtok_r): Adjust reentrancy remarks.

	* manual/time.texi: Document MTASC-safety properties.

	* manual/string.texi: Document MTASC-safety properties.

	* manual/threads.texi: Document MTASC-safety properties.

	* manual/stdio.texi: Document MTASC-safety properties.

	* manual/syslog.texi: Document MTASC-safety properties.

	* manual/sysinfo.texi: Document MTASC-safety properties.

	* manual/startup.texi: Document MTASC-safety properties.

	* manual/socket.texi: Document MTASC-safety properties.

	* manual/signal.texi: Document MTASC-safety properties.

2014-01-31  Alexandre Oliva <aoliva@redhat.com>

	* manual/setjmp.texi: Document MTASC-safety properties.

	* manual/search.texi: Document MTASC-safety properties.

	* manual/resource.texi: Document MTASC-safety properties.

	* manual/process.texi: Document MTASC-safety properties.

	* manual/platform.texi: Document MTASC-safety properties.

	* manual/pipe.texi: Document MTASC-safety properties.

	* manual/pattern.texi: Document MTASC-safety properties.

	* manual/message.texi: Document MTASC-safety properties.

	[BZ #12751]
	* manual/memory.texi: Document MTASC-safety properties.

	* manual/math.texi: Document MTASC-safety properties.

	* manual/locale.texi: Document MTASC-safety properties.

	* manual/llio.texi: Document MTASC-safety properties.

	* manual/libdl.texi: New.

	* manual/lang.texi: Document MTASC-safety properties.

	* manual/job.texi: Document MTASC-safety properties.

	* manual/getopt.texi: Document MTASC-safety properties.

	* manual/ctype.texi: Document MTASC-safety properties.

2014-01-31  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #16046]
	* csu/libc-tls.c (static_map): Remove variable.
	(__libc_setup_tls): Use main executable's link map for TLS data.
	* elf/dl-close.c (_dl_close_worker) [!SHARED]: Remove special
	casing for LM_ID_BASE and GL(dl_nns).
	* elf/dl-iteratephdr.c [!SHARED] (dl_iterate_phdr): Remove
	function.  Alias dl_iterate_phdr to __dl_iterate_phdr.
	* elf/dl-load.c (_dl_map_object) [!SHARED]: Remove special
	casing for GL(dl_ns)[LM_ID_BASE]._ns_loaded.
	* elf/dl-support.c (_dl_main_map): Also initialize l_flags_1
	member.
	(_dl_non_dynamic_init): Also initialize _dl_main_map's l_phdr and
	l_phnum members.

2014-01-30  Alexandre Oliva <aoliva@redhat.com>

	* manual/debug.texi: Document MTASC-safety properties.

2014-01-29  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #16510]
	* sysdeps/x86/fpu/bits/mathinline.h: Check __SSE2_MATH__ instead
	of __x86_64__ when disabling x87 inline functions.

2014-01-29  Alexandre Oliva <aoliva@redhat.com>

	* manual/charset.texi: Document MTASC-safety properties.

	* manual/crypt.texi: Document MTASC-safety properties.

	* manual/conf.texi: Document MTASC-safety properties.

	* manual/arith.texi: Document MTASC-safety properties.

	* manual/argp.texi: Document MTASC-safety properties.

	* manual/macros.texi: Introduce macros to document multi
	thread, asynchronous signal and asynchronous cancellation
	safety properties.
	* manual/intro.texi: Introduce the properties themselves.

2014-01-27  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sh4/Makefile: New file.

2014-01-27  Andreas Schwab  <schwab@linux-m68k.org>

	* math/gen-libm-test.pl ($srcdir): New variable.
	($auto_input): Use it.

2014-01-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16506]
	* nss/nss_files/files-netgrp.c (_nss_files_setnetgrent): Avoid
	access beyond array bounds when parsing netgroups file.

	* nscd/netgroupcache.c (addgetnetgrentX): Compute offset from
	the old buffer before realloc.

2014-01-27  Allan McRae  <allan@archlinux.org>

	* po/fr.po: Update French translation from translation project.

2014-01-26  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/libm-test-ulps: Regenerate.

2014-01-24  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Regenerate.

2014-01-25  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sh4/fpu/libm-test-ulps: Move to ...
	* sysdeps/sh/libm-test-ulps: ... here and regenerated.

2013-01-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16474]
	* nscd/netgroupcache.c (addgetnetgrentX): Adjust triplet
	string pointers after reallocation.

2014-01-24  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h: Use __SH4__ and
	__SH4A__ instead of __SH_FPU_ANY__.

2014-01-23  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/fpu_control.h: New file.
	* sysdeps/sh/sh4/fpu/fpu_control.h: Remove.
	* sysdeps/unix/sysv/linux/sh/sys/ucontext.h: New file.
	* sysdeps/unix/sysv/linux/sh/sh3/sys/ucontext.h: Remove.
	* sysdeps/unix/sysv/linux/sh/sh3/sys: Remove directory.
	* sysdeps/unix/sysv/linux/sh/sh4/sys/ucontext.h: Remove.
	* sysdeps/unix/sysv/linux/sh/sh4/sys: Remove directory.
	* sysdeps/sh/sys/ucontext.h: Remove.
	* sysdeps/sh/sys: Remove directory.

2014-01-22  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/sys/ucontext.h: Merge into
	s390/sys/ucontext.h.
	* sysdeps/unix/sysv/linux/s390/s390-64/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h: New file.

2014-01-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #15605]
	* sysdeps/x86_64/x32/symbol-hacks.h: Include generic symbol-hacks.h.

2014-01-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16431]
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c (__gettimeofday):
	Adjust the vDSO correctly for internal calls.
	* sysdeps/unix/sysv/linux/powerpc/time.c (time): Likewise.

2014-01-20  Allan McRae  <allan@archlinux.org>

	* po/ca.po: Update Catalan translation from translation project.

2014-01-16  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/s390/sotruss-lib.c: New file.

2014-01-16  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16430]
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c
	(__GI___gettimeofday): Alias for a different internal symbol to avoid
	local calls issues by not having a PLT stub required for IFUNC calls.
	* sysdeps/unix/sysv/linux/powerpc/time.c (__GI_time): Likewise.

2014-01-16 Joseph Myers  <joseph@codesourcery.com>

	* math/test-fpucw-ieee.c: Use <> in #include of test-fpucw.c.
	* math/test-fpucw-static.c: Likewise.

2013-01-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16453]
	* nscd/netgroupcache.c (addgetnetgrentX): Don't use alloca.

2014-01-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/sotruss-lib.c: New file: sotruss-lib.so
	implementation for powerpc.

2014-01-15  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #14782]
	* sysdeps/posix/system.c (__libc_system): Do not enable
	asynchronous cancellation.

2014-01-15  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	[BZ #16427]
	* sysdeps/ieee754/ldbl-128/w_expl.c (__expl): Invoke the non-IEEE
	handling only for numbers special also in the IEEE case.

2014-01-15  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Regenerate.

2014-01-11  Allan McRae  <allan@archlinux.org>

	* po/bg.po: Update Bulgarian translation from translation project.

	* po/de.po: Update German translation from translation project.

2014-01-10  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/gcc-compat.h: New file.

2014-01-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/asin-inputs: Correct slow inputs.
	* benchtests/acos-inputs: Likewise.

2014-01-10  Allan McRae  <allan@archlinux.org>

	* po:sv.po: Update Swedish translation from translation project.

	* po/vi.po: Update Vietnamese translation from translation project.

	* po/eo.po: Update Esperanto translation from translation project.

	* po/cs.po: Update Czech translation from translation project.

	* po/nl.po: Update Dutch translation from translation project.

	* po/pl.po: Update Polish translation from translation project.

	* po/ru.po: Update Russian translation from translation project.

	* po/uk.po: Update Ukrainian translation from translation project.

2014-01-08  Brooks Moses  <bmoses@google.com>

	* elf/dl-load.c: Fix comment typo.

2014-01-08  Carlos O'Donell  <carlos@redhat.com>

	* po/header.pot: Rename to...
	* po/pot.header: ... this.
	* po/Makefile: Use pot.header.

2014-01-08  Yuriy Kaminskiy  <yumkam@gmail.com>
	    Maxim Kuvyrkov  <maxim@kugelworks.com>

	[BZ #16394]
	* sysdeps/i386/i686/memmove.S (memmove): Compare distance between
	SRC and DEST against LEN.

2014-01-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #16414]
	* sysdeps/powerpc/powerpc64/fpu/s_truncl.S: Remove wrong
	implementation.
	* sysdeps/ieee754/ldbl-128ibm/s_truncl.c: Remove bogus comment.

2014-01-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2014-01-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16408]
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c (__expm1l): Use __expl
	for large positive arguments.

2014-01-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/nofpu/libm-test-ulps: Regenerated.

	* math/auto-libm-test-in: Mark various tests with
	xfail-rounding:ldbl-128ibm.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16407]
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c (__ieee754_coshl):
	Increase overflow threshold.

2014-01-07  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #14286]
	* stdio-common/vfprintf.c: Check for integer overflow.

2014-01-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/dl-tls.h: sysdeps/s390/dl-tls.h: Remove casts for
	the first argument and return value of __tls_get_addr_internal.

2014-01-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/dl-machine.h: Gate the definition of refsym
	also with !RTLD_BOOTSTRAP to get rid of unused variable warning.

2014-01-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/Makefile: Build rtld-global-offsets.sym.
	* sysdeps/s390/rtld-global-offsets.sym: New file.
	* sysdeps/unix/sysv/linux/s390/Versions: Add getcontext as new
	GLIBC_2.19 symbol.
	* sysdeps/unix/sysv/linux/s390/getcontext.S: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext.S: Rename to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext-common.S:
	... this.
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext.S: Rename to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext-common.S:
	... this.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-32/setcontext.S: Restore upper
	halfs of GPRs for high_gprs contexts.
	* sysdeps/unix/sysv/linux/s390/s390-32/swapcontext.S: Save and
	restore upper halfs of GPRs for high_gprs contexts.  Copy uc_flags
	field.
	* sysdeps/unix/sysv/linux/s390/s390-64/swapcontext.S: Copy
	uc_flags field.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h: Split into 32 and
	64 bit versions:
	* sysdeps/unix/sysv/linux/s390/s390-32/sys/ucontext.h: Add field
	for high GPRs (uc_high_gprs) and for future extensions
	(__reserved).
	* sysdeps/unix/sysv/linux/s390/s390-64/sys/ucontext.h: Add field
	for future extensions (__reserved).
	* sysdeps/unix/sysv/linux/s390/ucontext_i.sym: Split into 32 and
	64 bit versions:
	* sysdeps/unix/sysv/linux/s390/s390-32/ucontext_i.sym: Add
	SC_HIGHGPRS offset definition.
	* sysdeps/unix/sysv/linux/s390/s390-64/ucontext_i.sym: New file.
	* sysdeps/unix/sysv/linux/s390/rtld-getcontext.S: New file.

	* Versions.def: Add GLIBC_2.19 for libpthread.
	* nptl/sysdeps/unix/sysv/linux/s390/Versions: Add longjmp and
	siglongjmp for libpthread with GLIBC_2.19 symver.
	* nptl/sysdeps/unix/sysv/linux/s390/pt-longjmp.c: New file.
	* sysdeps/s390/Makefile: Build v1-longjmp.c and v1-sigjmp.c.
	* sysdeps/s390/Versions: New GLIBC_2.19 and GLIBC_PRIVATE symbols.
	* sysdeps/s390/__longjmp.c: New file.
	* sysdeps/s390/bits/setjmp.h: Add new fields to __s390_jmp_buf.
	* sysdeps/s390/longjmp.c: New file.
	* sysdeps/s390/setjmp.S: New file.
	* sysdeps/s390/sigjmp.S: New file.
	* sysdeps/s390/v1-longjmp.c: New file.
	* sysdeps/s390/v1-setjmp.h: New file.
	* sysdeps/s390/v1-sigjmp.c: New file.
	* sysdeps/unix/sysv/linux/s390/Makefile: Build __longjmp_chk.
	* sysdeps/unix/sysv/linux/s390/Versions: Add __longjmp_chk with
	GLIBC_2.19 version.
	* sysdeps/unix/sysv/linux/s390/longjmp_chk.c: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/____longjmp_chk.c: Provide
	versioned symbols for ____longjmp_chk.
	* sysdeps/unix/sysv/linux/s390/s390-64/____longjmp_chk.c:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	Regenerate.
	* sysdeps/unix/sysv/linux/s390/v1-longjmp_chk.c: New file.
	* sysdeps/s390/s390-32/__longjmp.c: Rename to ...
	* sysdeps/s390/s390-32/__longjmp-common.c: ... this.
	* sysdeps/s390/s390-32/setjmp.S: Rename and adjust to ...
	* sysdeps/s390/s390-32/setjmp-common.S: ... this.
	* sysdeps/s390/s390-64/__longjmp.c: Rename to ...
	* sysdeps/s390/s390-64/__longjmp-common.c: ... this.
	* sysdeps/s390/s390-64/setjmp.S: Rename and adjust to ...
	* sysdeps/s390/s390-64/setjmp-common.S: ... this.
	* sysdeps/s390/rtld-__longjmp.c: New file.
	* sysdeps/s390/rtld-setjmp.S: New file.

2014-01-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16400]
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c (__ieee754_lgammal_r):
	Return -__logl (x) for small positive arguments without evaluating
	a polynomial.

2014-01-06  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/sys/ptrace.h (ptrace_peeksiginfo_args):
	Rename to ...
	(__ptrace_peeksiginfo_args): ... this.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.

2014-01-06  Allan McRae  <allan@archlinux.org>

	* inet/netinet/in.h: Fix typo in comment.

2014-01-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2014-01-05  Allan McRae  <allan@archlinux.org>

	* po/libc.pot: Regenerated.

	* malloc/memusagestat.c: Fix gettext call formatting.

2014-01-04  Sami Kerola  <kerolasa@iki.fi>

	* nscd/nscd.c: Improve usage() output.

2014-01-04  Mike Frysinger  <vapier@gentoo.org>

	* config.h.in: Add HAVE_LINUX_FANOTIFY_H template.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure.ac: Call AC_DEFINE.
	* sysdeps/unix/sysv/linux/tst-fanotify.c: Include config.h.

2014-01-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16390]
	* sysdeps/powerpc/nofpu/Makefile [$(subdir) = math]
	(CFLAGS-e_atan2l.c): Use -fno-builtin-fabsl.

2014-01-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp-power7.S: Remove
	extra tokens at end of #undef directive.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp_l-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen-power7.S: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy.c: Likewise.

2014-01-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/nofpu/libm-test-ulps: Regenerated.

	* math/auto-libm-test-in: Mark various tests with
	xfail-rounding:ldbl-128ibm.
	* math/auto-libm-test-out: Regenerated.

2014-01-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16386]
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c (__ieee754_logl): Adjust
	numbers with subnormal high part when calculating exponent.

	[BZ #16385]
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c (__asinhl): Use fabsl not
	fabs.

	[BZ #16384]
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c (ln2): Initialize with
	M_LN2l.
	(__ieee754_acoshl): Use __log1pl not __log1p.

2013-01-02  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* malloc/arena.c (malloc_atfork, free_atfork, ptmalloc_lock_all)
	(ptmalloc_unlock_all, ptmalloc_unlock_all2, next_env_entry)
	(__failing_morecore, ptmalloc_init, dump_heap, new_heap)
	(grow_heap, heap_trim, _int_new_arena, get_free_list)
	(reused_arena, arena_get2): Convert to GNU style.
	* malloc/hooks.c (memalign_hook_ini, __malloc_check_init)
	(mem2mem_check, mem2chunk_check, top_check, realloc_check)
	(memalign_check, __malloc_set_state): Likewise.
	* malloc/mallocbug.c (main): Likewise.
	* malloc/malloc.c (__malloc_assert, malloc_init_state)
	(free_perturb, do_check_malloced_chunk, do_check_malloc_state)
	(sysmalloc, systrim, mremap_chunk, __libc_malloc, __libc_free)
	(__libc_realloc, _mid_memalign, _int_malloc, malloc_consolidate)
	(_int_realloc, _int_memalign, mtrim, musable, __libc_mallopt)
	(__posix_memalign, malloc_info): Likewise.
	* malloc/malloc.h: Likewise.
	* malloc/mcheck.c (checkhdr, unlink_blk, link_blk, freehook)
	(mallochook, memalignhook, reallochook, mabort): Likewise.
	* malloc/mcheck.h: Likewise.
	* malloc/memusage.c (update_data, me, malloc, realloc, calloc)
	(free, mmap, mmap64, mremap, munmap, dest): Likewise.
	* malloc/memusagestat.c (main, parse_opt, more_help): Likewise.
	* malloc/morecore.c (__default_morecore): Likewise.
	* malloc/mtrace.c (tr_break, lock_and_info, mtrace): Likewise.
	* malloc/obstack.c (_obstack_begin, _obstack_newchunk)
	(_obstack_allocated_p, obstack_free, _obstack_memory_used)
	(print_and_abort): Likewise.
	* malloc/obstack.h: Likewise.
	* malloc/set-freeres.c (__libc_freeres): Likewise.
	* malloc/tst-mallocstate.c (main): Likewise.
	* malloc/tst-mtrace.c (main): Likewise.
	* malloc/tst-realloc.c (do_test): Likewise.

2013-01-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16366]
	* nscd/netgroupcache.c (do_notfound): New function.
	(addgetnetgrentX): Use it.

	[BZ # 16365]
	* nscd/netgroupcache.c (addgetnetgrentX): Break if status is
	NSS_STATUS_NOTFOUND.

2014-01-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2014-01-01  Allan McRae  <allan@archlinux.org>

	* scripts/update-copyrights: Update configure input file suffix.

	* NEWS: Update copyright year.
	* catgets/gencat.c: Likewise.
	* csu/version.c: Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/pcprofiledump.c: Likewise.
	* debug/xtrace.sh: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/pldd.c: Likewise.
	* elf/sotruss.ksh: Likewise.
	* elf/sprof.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* login/programs/pt_chown.c: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/memusagestat.c: Likewise.
	* malloc/mtrace.pl: Likewise.
	* manual/libc.texinfo: Likewise.
	* nscd/nscd.c: Likewise.
	* nss/getent.c: Likewise.
	* nss/makedb.c: Likewise.
	* posix/getconf.c: Likewise.
	* scripts/test-installation.pl: Likewise.

	* All files with FSF copyright notices: Update copyright dates
	using scripts/update-copyrights.
	* intl/plural.c: Regenerated.
	* locale/programs/charmap-kw.h: Likewise.
	* locale/programs/locfile-kw.h: Likewise.

2013-12-31  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure.ac: Call AC_CHECK_HEADER on
	the linux/fanotify.h header.
	* sysdeps/unix/sysv/linux/tst-fanotify.c: Check if
	HAVE_LINUX_FANOTIFY_H is defined.

2013-12-31  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/cos-inputs: New inputs.
	* benchtests/sin-inputs: Likewise.

	* benchtests/atan-inputs: New inputs. Fix name of multiple
	precision fallback inputs.

	* benchtests/atanh-inputs: New inputs.
	* benchtests/tanh-inputs: Likewise.

	* benchtests/acosh-inputs: New inputs.
	* benchtests/asinh-inputs: Likewise.

	* benchtests/cosh-inputs: New inputs.
	* benchtests/sinh-inputs: Likewise.

	* benchtests/acos-inputs: Add more inputs.
	* benchtests/asin-inputs: Likewise.

2013-12-30  Ville Skytta  <ville.skytta@iki.fi>

	[BZ #16375]
	* manual/arith.texi: Fix spelling.
	* manual/charset.texi: Likewise.
	* manual/errno.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/lang.texi: Likewise.
	* manual/llio.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/search.texi: Likewise.
	* manual/setjmp.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* manual/sysinfo.texi: Likewise.
	* manual/time.texi: Likewise.

2013-12-27  Carlos O'Donell  <carlos@redhat.com>

	* po/sl.po: New file.

2013-12-27  Mike Frysinger  <vapier@gentoo.org>

	* .gitignore: Add core/.gdbinit/.gdb_history.

2013-12-27  Allan McRae  <allan@archlinux.org>

	[BZ #16369]
	* sysdeps/ieee754/dbl-64/s_sin.c (csloww): Fix variable name.
	Reported by Il'ya Malakhov <ilmalakhov@yandex.ru>

2013-12-24  Brooks Moses  <bmoses@google.com>

	* string/string.h (__CORRECT_ISO_CPP_STRING_H_PROTO): Define for
	all compilers that claim C++98 compliance, not just GCC.
	* string/strings.h (__CORRECT_ISO_CPP_STRINGS_H_PROTO):
	Likewise.

2013-12-24  Maxim Kuvyrkov  <maxim@kugelworks.com>

	* NEWS: Restore accidentally deleted bug-fix entries.

2013-12-24  Maxim Kuvyrkov  <maxim@kugelworks.com>
	    Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15073]
	* malloc/malloc.c (_int_free): Perform sanity check only if we
	have_lock.

2013-12-23  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #12986]
	* manual/stdio.texi (String Input Conversions): Clarify that character
	classes are not supported.

2013-12-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16337]
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c (__ieee754_lgammal_r):
	Calculate results for small negative arguments directly rather
	than using reflection formula with special underflow handling.

	* sysdeps/mach/hurd/Implies: Change unix/bsd/bsd4.4 to unix/bsd.
	* sysdeps/unix/bsd/syscalls.list (chflags): Add entry from
	sysdeps/unix/bsd/bsd4.4/syscalls.list.
	(fchflags): Likewise.
	(revoke): Likewise.
	(setlogin): Likewise.
	(sigaltstack): Likewise.
	(wait4): Likewise.
	(sigblock): Remove.
	(sigsetmask): Likewise.
	(wait3): Likewise.
	(waitpid): Likewise.
	* sysdeps/unix/bsd/bsd4.4/syscalls.list: Remove file.
	* sysdeps/unix/sysv/linux/wait3.c: Update directory of included
	file.
	* sysdeps/unix/bsd/bsd4.4/Makefile: Move to ...
	* sysdeps/unix/bsd/Makefile: ... here.
	* sysdeps/unix/bsd/bsd4.4/Versions: Move to ...
	* sysdeps/unix/bsd/Versions: ... here.
	* sysdeps/unix/bsd/bsd4.4/bits/sockaddr.h: Move to ...
	* sysdeps/unix/bsd/bits/sockaddr.h: ... here.
	* sysdeps/unix/bsd/bsd4.4/cmsg_nxthdr.c: Move to ...
	* sysdeps/unix/bsd/cmsg_nxthdr.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/sigblock.c: Move to ...
	* sysdeps/unix/bsd/sigblock.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/sigsetmask.c: Move to ...
	* sysdeps/unix/bsd/sigsetmask.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/sigvec.c: Move to ...
	* sysdeps/unix/bsd/sigvec.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/tcdrain.c: Move to ...
	* sysdeps/unix/bsd/tcdrain.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/tcgetattr.c: Move to ...
	* sysdeps/unix/bsd/tcgetattr.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/tcsetattr.c: Move to ...
	* sysdeps/unix/bsd/tcsetattr.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/wait.c: Move to ...
	* sysdeps/unix/bsd/wait.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/wait3.c: Move to ...
	* sysdeps/unix/bsd/wait3.c: ... here.
	* sysdeps/unix/bsd/bsd4.4/waitpid.c: Move to ...
	* sysdeps/unix/bsd/waitpid.c: ... here.

2013-12-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16356]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL): Also set
	round-to-nearest for [!USE_AS_EXPM1L].
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL): Likewise.
	* math/auto-libm-test-in: Do not expect cosh tests to fail.  Add
	more tests of exp and exp10.  Expect some exp10 tests to miss
	exceptions or fail in directed rounding modes.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (exp10_tonearest_test_data): New array.
	(exp10_test_tonearest): New function.
	(exp10_towardzero_test_data): New array.
	(exp10_test_towardzero): New function.
	(exp10_downward_test_data): New array.
	(exp10_test_downward): New function.
	(exp10_upward_test_data): New array.
	(exp10_test_upward): New function.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-20  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add more tests of acos, acosh, asin,
	asinh, atan, atan2, atanh, cbrt, cos and cosh.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (acosh_test_data): Add more tests.
	(atanh_test_data): Likewise.
	(ceil_test_data): Likewise.
	(copysign_test_data): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* timezone/checktab.awk: Update from tzcode 2013i.
	* timezone/private.h: Likewise.
	* timezone/scheck.c: Likewise.
	* timezone/tzfile.h: Likewise.
	* timezone/tzselect.ksh: Likewise.
	* timezone/zdump.c: Likewise.
	* timezone/zic.c: Likewise.

	* math/auto-libm-test-in: Add tests of cpow.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (cpow_test_data): Use AUTO_TESTS_cc_c.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpc_cc_c.
	(func_calc_desc): Add mpc_cc_c union field.
	(test_functions): Add cpow.
	(special_fill_2pi): New function.
	(special_real_inputs): Add 2pi.
	(calc_generic_results): Handle mpc_cc_c.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add tests of ccos, ccosh, cexp, clog,
	csqrt, ctan and ctanh.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (TEST_COND_x86_64): New macro.
	(TEST_COND_x86): Likewise.
	(ccos_test_data): Use AUTO_TESTS_c_c.
	(ccosh_test_data): Likewise.
	(cexp_test_data): Likewise.
	(clog_test_data): Likewise.
	(csqrt_test_data): Likewise.
	(ctan_test_data): Likewise.
	(ctan_tonearest_test_data): Likewise.
	(ctan_towardzero_test_data): Likewise.
	(ctan_downward_test_data): Likewise.
	(ctan_upward_test_data): Likewise.
	(ctanh_test_data): Likewise.
	(ctanh_tonearest_test_data): Likewise.
	(ctanh_towardzero_test_data): Likewise.
	(ctanh_downward_test_data): Likewise.
	(ctanh_upward_test_data): Likewise.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpc_c_c.
	(func_calc_desc): Add mpc_c_c union field.
	(FUNC_mpc_c_c): New macro.
	(test_functions): Add cacos, cacosh, casin, casinh, catan, catanh,
	ccos, ccosh, cexp, clog, clog10, csin, csinh, csqrt, ctan and
	ctanh.
	(special_fill_min_subnorm_p120): New function.
	(special_real_inputs): Add min_subnorm_p120.
	(calc_generic_results): Handle mpc_c_c.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c (do_cos, do_cos_slow, do_sin)
	(do_sin_slow): New functions.
	(__sin, __cos, slow1, slow2, sloww1, sloww2, bsloww1, bsloww2)
	(cslow2, csloww1, csloww2): Use the new functions.

	* sysdeps/ieee754/dbl-64/s_sin.c (sloww1): Add new argument M.
	Use M to change sign of result instead of X.  Assume X is
	positive.
	(csloww1): Likewise.
	(__sin): Adjust.
	(__cos): Adjust.

	* sysdeps/ieee754/dbl-64/s_sin.c (reduce_and_compute): Remove
	arguments A and DA.
	(__sin): Adjust.
	(__cos): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Use DA directly.
	(__cos): Likewise.
	(sloww1): Don't adjust sign of DX.
	(csloww1): Likewise.
	(sloww2): Use X directly and don't adjust sign of DX.
	(csloww2): Likewise.

2013-12-19  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of cabs and carg.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (cabs_test_data): Use AUTO_TESTS_c_f.
	(carg_test_data): Likewise.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpc_c_f.
	(func_calc_desc): Add mpc_c_f union field.
	(test_functions): Add cabs and carg.
	(calc_generic_results): Handle mpc_c_f.

	* sysdeps/powerpc/powerpc32/libgcc-compat.S
	[_SOFT_FLOAT || __NO_FPRS__] (__fixdfdi_v_glibc20): Do not define
	as a macro and a compat symbol.
	[_SOFT_FLOAT || __NO_FPRS__] (__fixsfdi_v_glibc20): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__fixunsdfdi_v_glibc20): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__fixunssfdi_v_glibc20): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__floatdidf_v_glibc20): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__floaddisf_v_glibc20): Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__fixdfdi): Do
	not use .hidden.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__fixsfdi):
	Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__fixunsdfdi):
	Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__fixunssfdi):
	Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__floaddidf):
	Likewise.
	[HAVE_DOT_HIDDEN && (_SOFT_FLOAT || __NO_FPRS__)] (__floaddisf):
	Likewise.
	* sysdeps/powerpc/nofpu/Versions (libc): Remove __fixdfdi,
	__fixsfdi, __fixunsdfdi, __fixunssfdi, __floatdidf and __floatdisf
	from GLIBC_2.3.2.

2013-12-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-19  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2013-11-26.10 with
	trailing whitespace removed.
	* scripts/config.guess: Update to version 2013-11-29.
	* scripts/config.sub: Update to version 2013-10-01.

	* math/auto-libm-test-in: Add tests of sincos.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (sincos_test_data): Use AUTO_TESTS_fFF_11.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpfr_f_11.
	(func_calc_desc): Add mpfr_f_11 union field.
	(test_functions): Add sincos.
	(calc_generic_results): Handle mpfr_f_11.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-19  Andreas Schwab  <schwab@suse.de>

	* sysdeps/powerpc/powerpc64/power7/memchr.S: Fix argument of
	CALL_MCOUNT.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S
	[USE_IN_EXTENDED_LOCALE_MODEL]: Likewise.

2013-12-19  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (%beautify): Remove M_* constants.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16293]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]: Set
	round-to-nearest mode when using frndint.
	* sysdeps/i386/fpu/s_expm1.S (__expm1): Likewise.
	* sysdeps/i386/fpu/s_expm1f.S (__expm1f): Likewise.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL) [USE_AS_EXPM1L]:
	Likewise.
	* math/auto-libm-test-in: Add more tests of expm1.  Do not expect
	sinh test to fail.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (TEST_COND_x86_64): Remove macro.
	(TEST_COND_x86): Likewise.
	(expm1_tonearest_test_data): New array.
	(expm1_test_tonearest): New function.
	(expm1_towardzero_test_data): New array.
	(expm1_test_towardzero): New function.
	(expm1_downward_test_data): New array.
	(expm1_test_downward): New function.
	(expm1_upward_test_data): New array.
	(expm1_test_upward): New function.
	(main): Run the new test functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* include/features.h: Update comment documenting feature test
	macros.  Mention _DEFAULT_SOURCE in comment.
	[_GNU_SOURCE] (_DEFAULT_SOURCE): Undefine and redefine.
	[_DEFAULT_SOURCE]: Undefine and redefine _DEFAULT_SOURCE,
	_BSD_SOURCE and _SVID_SOURCE.
	[!__STRICT_ANSI__ && !_ISOC99_SOURCE && !_POSIX_SOURCE &&
	!_POSIX_C_SOURCE && !_XOPEN_SOURCE && !_BSD_SOURCE &&
	!_SVID_SOURCE]: Likewise.
	[_DEFAULT_SOURCE && !_POSIX_SOURCE && !_POSIX_C_SOURCE]
	(__USE_POSIX_IMPLICITLY): Define.
	[_DEFAULT_SOURCE && !_POSIX_SOURCE && !_POSIX_C_SOURCE]
	(_POSIX_SOURCE): Undefine and redefine.
	[_DEFAULT_SOURCE && !_POSIX_SOURCE && !_POSIX_C_SOURCE]
	(_POSIX_C_SOURCE): Likewise.
	* manual/creature.texi (_DEFAULT_SOURCE): Document.
	(Feature Test Macros): Update documentation of default features.

2013-12-19  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* benchtests/Makefile: Add bench-strtok.
	* benchtests/bench-strtok.c: New file: strtok benchtest.

2013-12-19  Allan McRae  <allan@archlinux.org>

	* manual/install.texi: Suppress menu for plain text output.
	* INSTALL: Regenerated.

2013-12-18  Brooks Moses  <bmoses@google.com>

	[BZ #15846]
	* misc/getauxval.c: Include errno.h.
	(__getauxval): Set errno to ENOENT if the requested type is not
	found.
	* misc/sys/auxv.h (getauxval): Document that it may set errno;
	don't declare with __attribute_const__.
	* elf/tst-auxv.c: Add tests for errno and type-not-found case.
	* manual/startup.texi: Document that getauxval sets errno.

2013-12-18  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of jn and yn.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (jn_test_data): Use AUTO_TESTS_if_f.
	(yn_test_data): Likewise.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpfr_if_f.
	(func_calc_desc): Add mpfr_if_f union field.
	(FUNC_mpfr_if_f): New macro.
	(test_functions): Add jn and yn.
	(calc_generic_results): Assert type of second input for
	mpfr_ff_f.  Handle mpfr_if_f.
	(output_for_one_input_case): Disable all checking for arguments
	fitting floating-point types in case of an integer argument.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/localplt.data:
	Don't expect fegetround reference in libm.so.

2013-12-17  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* sysdeps/ieee754/dbl-64/Makefile (CFLAGS-e_sqrt.c): Add
	$(config-cflags-nofma).

2013-12-18  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Mark some hypot tests no-test-inline.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16338]
	* sysdeps/ieee754/ldbl-128/e_logl.c (__ieee754_logl): Use __frexpl
	to determine exponent and adjust argument to have exponent of -1.
	* math/auto-libm-test-in: Add more tests of log, log10, log1p and
	log2.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-18  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* manual/probes.texi: Remove cases when per-thread arenas are
	disabled.

2013-12-18  Andreas Schwab  <schwab@suse.de>

	* sysdeps/i386/i686/multiarch/strstr.c: Remove.
	* sysdeps/i386/i686/multiarch/strstr-c.c: Remove.
	* sysdeps/i386/i686/multiarch/strcasestr.c: Remove.
	* sysdeps/i386/i686/multiarch/strcasestr-nonascii.c: Remove.
	* sysdeps/i386/i686/multiarch/Makefile: Update.
	* sysdeps/i386/i686/multiarch/ifunc-impl-list.c: Update.

2013-12-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/bsd/bsd4.4/bits/errno.h: Remove file.
	* sysdeps/unix/bsd/bsd4.4/bits/ioctls.h: Likewise.

2013-12-17  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #15968]
	Support TZ transition times < 00:00:00.
	This is needed for version-3 tz-format files; it supports time
	stamps past 2037 for America/Godthab (the only entry in the tz
	database for which this change is relevant).
	* manual/time.texi (TZ Variable): Document transition times
	from -167:59:59 through -00:00:01.
	* time/tzset.c (tz_rule): Time of day is now signed.
	(__tzset_parse_tz): Parse negative time of day.

	Document TZ transition times >= 25:00:00.
	* manual/time.texi (TZ Variable): Document transition times from
	25:00:00 through 167:59:59.  These are already supported, and this
	support will help with version-3 tz-format files.

	* manual/time.texi (TZ Variable): Modernize North America example
	to reflect current (i.e., 2007-and-later) daylight saving rules.

	* manual/time.texi (TZ Variable): POSIX.1 hour can be 24.

2013-12-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/bsd/bits/posix_opt.h: Remove file.
	* sysdeps/unix/bsd/bits/stat.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/environments.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/sys/sysmacros.h: Likewise.
	* sysdeps/unix/bsd/bsdstat.h: Likewise.
	* sysdeps/unix/bsd/clock.c: Likewise.
	* sysdeps/unix/bsd/i386/vfork.S: Likewise.
	* sysdeps/unix/bsd/i386/wait3.S: Likewise.
	* sysdeps/unix/bsd/init-posix.c: Likewise.
	* sysdeps/unix/bsd/poll.c: Likewise.
	* sysdeps/unix/bsd/ptsname.c: Likewise.
	* sysdeps/unix/bsd/seekdir.c: Likewise.
	* sysdeps/unix/bsd/setegid.c: Likewise.
	* sysdeps/unix/bsd/seteuid.c: Likewise.
	* sysdeps/unix/bsd/setgid.c: Likewise.
	* sysdeps/unix/bsd/setrgid.c: Likewise.
	* sysdeps/unix/bsd/setruid.c: Likewise.
	* sysdeps/unix/bsd/setsid.c: Likewise.
	* sysdeps/unix/bsd/setuid.c: Likewise.
	* sysdeps/unix/bsd/sigaction.c: Likewise.
	* sysdeps/unix/bsd/sigprocmask.c: Likewise.
	* sysdeps/unix/bsd/sigsuspend.c: Likewise.
	* sysdeps/unix/bsd/sys/reboot.h: Likewise.
	* sysdeps/unix/bsd/telldir.c: Likewise.
	* sysdeps/unix/bsd/times.c: Likewise.
	* sysdeps/unix/bsd/usleep.c: Likewise.

	* misc/Makefile (install-lib): Remove libbsd-compat.a.
	($(objpfx)libbsd-compat.a): Remove rule.

	* include/features.h (__FAVOR_BSD): Do not define.
	* manual/creature.texi (_BSD_SOURCE): Do not document as enabling
	features conflicting with POSIX.
	(_GNU_SOURCE): Do not mention interaction with _BSD_SOURCE.
	(_BSD_SOURCE): Remove description of not being a subset of other
	feature test macros.
	* manual/job.texi (getpgrp): Do not document BSD version.
	(getpgid): Do not document by reference to BSD getpgrp.
	* posix/unistd.h [__FAVOR_BSD]: Remove conditional code.
	* setjmp/setjmp.h [__FAVOR_BSD]: Likewise.
	* signal/signal.h [__FAVOR_BSD]: Likewise.
	* sysdeps/gnu/netinet/tcp.h (struct tcphdr): Use anonymous unions
	instead of making contents conditional on [__FAVOR_BSD].
	* sysdeps/gnu/netinet/udp.h (struct udphdr): Likewise.

2013-12-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16314]
	* sysdeps/ieee754/dbl-64/e_hypot.c (__ieee754_hypot): Adjust up
	values below 2**-450, not 2**-500.
	* math/auto-libm-test-in: Don't allow spurious underflow from
	hypot.
	* math/auto-libm-test-out: Regenerated.

	[BZ #16316]
	[BZ #16330]
	* sysdeps/ieee754/dbl-64/e_hypot.c (__ieee754_hypot): Update
	values of ha and hb and sort them after adjusting subnormal
	arguments.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c (__ieee754_hypotl):
	Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c (__ieee754_hypotl): Update
	values of ea and eb and sort them after adjusting subnormal
	arguments.
	* math/auto-libm-test-in: Do not expect some hypot tests of
	subnormals to fail.  Add more hypot tests.
	* math/auto-libm-test-out: Regenerated.

2013-12-16  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	[BZ #13304]
	* sysdeps/sh/s_fma.c: New file.
	* sysdeps/sh/s_fmaf.c: New file.
	* sysdeps/sh/soft-fp/sfp-machine.h: New file.  Based on arm
	version.
	* sysdeps/sh/Implies: Add sh/soft-fp.

2013-12-16  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-error.c (struct catch): Add new member `errcode'.  Add a
	level of indirection to members `objname', `errstring', `malloced'.
	(_dl_signal_error): Store through pointers in *LCATCH rather modifying
	*LCATCH itself.  Set *LCATCH->errcode to ERRCODE rather than passing
	it as the __longjmp argument (just pass 1 instead).
	(_dl_catch_error): Initialize C with argument pointers and address of
	volatile local ERRCODE rather than copying values out of C at return.

2013-12-16  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of atan2, hypot and pow.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (atan2_test_data): Use AUTO_TESTS_ff_f.
	(hypot_test_data): Likewise.
	(pow_test_data): Likewise.
	(pow_tonearest_test_data): Likewise.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpfr_ff_f.
	(func_calc_desc): Add mpfr_ff_f union field.
	(FUNC_mpfr_ff_f): New macro.
	(test_functions): Add atan2, hypot and pow.
	(special_fill_min): New function.
	(special_fill_minus_min): Likewise.
	(special_fill_min_subnorm): Likewise.
	(special_fill_minus_min_subnorm): Likewise.
	(special_real_inputs): Add min, -min, min_subnorm and
	-min_subnorm.
	(calc_generic_results): Handle mpfr_ff_f.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-16  Will Newton  <will.newton@linaro.org>

	* manual/memory.texi (Malloc Examples): Mention aligned_alloc.
	(Aligned Memory Blocks): Add documentation for aligned_alloc
	and suggest it as an alternative to posix_memalign.
	(Hooks for Malloc): Document __memalign_hook is also called
	for aligned_alloc.  (Summary of Malloc): Add summary for
	aligned alloc.  Document __memalign_hook is also called
	for aligned_alloc.

2013-12-16  Will Newton  <will.newton@linaro.org>

	* manual/memory.texi (Malloc Examples): Clarify default
	alignment documentation.  Suggest posix_memalign rather
	than memalign or valloc.
	(Aligned Memory Blocks): Remove suggestion to use memalign
	or valloc.  Remove obsolete comment about BSD.
	Document memalign errno values and mark the function obsolete.
	Document posix_memalign returned error codes.  Mark valloc
	as obsolete.  (Hooks for Malloc): __memalign_hook is also
	called for posix_memalign and valloc.
	(Summary of Malloc): Add posix_memalign to function summary.
	__memalign_hook is also called for posix_memalign and valloc.

2013-12-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c (TAYLOR_SINCOS): Rename to
	TAYLOR_SIN.
	(__sin): Adjust.
	(__cos): Likewise.
	(sloww): Use mynumber union.  Expand ternary operator into
	if-else statements.
	(cslow): use mynumber union.

2013-12-16  Allan McRae  <allan@archlinux.org>

	* configure.ac: Set AUTOCONF when maintainer-mode is not used.
	* configure: Regenerated.

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Update file name.

	[BZ #14120]
	* configure.ac: Added --enable-maintainer-mode. Check for
	autoconf when enabled.
	* configure: Regenerated.

	* nscd/nscd.service: New file.
	* nscd/nscd.tmpfiles: New file.

2013-12-14  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #12100]
	* sysdeps/x86_64/multiarch/strstr-sse2-unaligned.S: New file
	* sysdeps/x86_64/multiarch/strstr-c.c: Moved to ...
	* sysdeps/x86_64/multiarch/strstr.c: ... here.
	(strstr): Add __strstr_sse2_unaligned ifunc.
	* sysdeps/x86_64/multiarch/strcasestr-c.c: Moved to ...
	* sysdeps/x86_64/multiarch/strcasestr.c ... here.
	(strcasestr): Remove __strcasestr_sse42 ifunc.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c: Remove.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Update.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Update.

2013-12-14  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sh4/fpu/bits/fenv.h: Move to ...
	* sysdeps/sh/bits/fenv.h: ... here.
	* sysdeps/sh/sh4/fpu/bits: Remove directory.

2013-12-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* NEWS: Mention ppc64 STT_GNU_IFUNC support.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add hypot and
	hypotf multiarch implementations.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypot-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypot-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypot.c: New file:
	multiarch hypot for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypotf-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypotf-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/e_hypotf.c : New file:
	multiarch hypotf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add modf and
	modff multiarch implementations.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modf-power5+.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modf-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modf.c: New file:
	multiarch modf for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modff-power5+.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modff-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_modff.c : New file:
	multiarch modff for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add logb, logbf,
	and logl multiarch implementations.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logb-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logb-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logb.c: New file:
	multiarch logb for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbf-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbf-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbf.c: New file:
	multiarch logb for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbl-power7.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbl-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_logbl.c: New file:
	multiarch logb for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add isinf and
	isinff multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf-power7.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinf.c: New file:
	multiarch isinf for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinff-ppc64.c: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isinff.c: New file:
	multiarch isinff for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add finite and
	finitef multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite-power7.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finite.c: New file:
	multiarch finite for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finitef-ppc64.c: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_finitef.c: New file:
	multiarch finitef for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add llrint and
	lrint multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint-power6x.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llrint.c: New file:
	multiarch llrint for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_lrint.c: New file:
	multiarch lrint for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add copysign/
	copysignf multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysign-power6.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysign-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysign.c: New file:
	multiarch copysign for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_copysignf.c: New file:
	multiarch copysignf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add trunc/truncf
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_trunc-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_trunc-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_truncf-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_truncf-ppc64.S: New
	file.
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_trunc.c: New file:
	multiarch trunc for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_truncf.c: New file:
	multiarch truncf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add round/roundf
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_round-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_round-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_roundf-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_roundf-ppc64.S: New
	file.
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_round.c: New file:
	multiarch round for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_roundf.c: New file:
	multiarch roundf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add floor/floorf
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floor-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floor-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floorf-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floorf-ppc64.S: New
	file.
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floor.c: New file:
	multiarch floor for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_floorf.c: New file:
	multiarch floorf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add ceil/ceilf
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceil-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceil-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceilf-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceilf-ppc64.S: New
	file.
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceil.c: New file:
	multiarch ceil for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_ceilf.c: New file:
	multiarch ceilf for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add llround
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround-power5+.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround-power6x.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround-ppc64.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_llround.c: New file:
	multiarch llround for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_lround.c: New file:
	multiarch lround for PPC64.

	* sysdeps/powerpc/powerpc64/fpu/multiarch/Makefile: Add isnan
	multiarch implementation.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power5.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power6.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power6x.S: New
	file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-power7.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnan.c: New file:
	multiarch isnan for PPC64.
	* sysdeps/powerpc/powerpc64/fpu/multiarch/s_isnanf.c: New file:
	multiarch isnanf for PPC64.

	* sysdeps/powerpc/powerpc64/power5+/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power5/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power6/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power6x/fpu/multiarch/Implies: New file.
	* sysdeps/powerpc/powerpc64/power7/fpu/multiarch/Implies: New file
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/Implies: Remove.

	* sysdeps/powerpc/fpu/w_sqrt.c: Remove file
	* sysdeps/powerpc/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add stpcpy
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/stpcpy.c : New file:
	multiarch stpcpy for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcpy
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcpy.c : New file:
	multiarch strcpy for PPC64.

	* string/wordcopy.c (_wordcopy_fwd_aligned): Add define to
	redefine function name.
	(_wordcopy_fwd_dest_aligned): Likewise.
	(_wordcopy_bwd_aligned): Likewise.
	(_wordcopy_bwd_dest_aligned): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add wordcopy
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-power6.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wordcopy.c : New file:
	multiarch wcscpy for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add wcscpy
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy-power6.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcscpy.c : New file:
	multiarch wcscpy for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add wcsrchr
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr-power6.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcsrchr.c : New file:
	multiarch wcsrchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add wcschr
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr-power6.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/wcschr.c : New file:
	multiarch wcschr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strchrnul
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchrnul.c: New file:
	multiarch strchrnul for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strchr multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/rtld-strchr.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchr-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchr-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strchr.c: New file: multiarch
	strchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strncmp multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncmp.c: New file: multiarch
	strncmp for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strncasecmp
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strncase-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncase.c: New file: multiarch
	strncasecmp for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strncase_l-power7.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strncase_l.c: New file:
	multiarch strncasecmp_l for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strcasecmp
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c:
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp.c: New file:
	multiarch strcasecmp for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp_l-power7.S: New
	file.
	* sysdeps/powerpc/powerpc64/multiarch/strcasecmp_l.c: new file:
	multiarch strcasecmp_l for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strnlen multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strnlen.c: New file: multiarch
	strnlen for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add strlen multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strlen-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/strlen.c: New file: multiarch
	strlen for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add rawmemch multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/rawmemchr.c: New file: multiarch
	rawmemrchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memrchr multiarch
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memrchr-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memrchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memrchr.c: New file: multiarch
	memrchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memchr multiarch
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memchr-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memchr-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memchr.c: New file: multiarch
	memchr for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add mempcpy multiarch
	implementation.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/mempcpy.c: New file: multiarch
	mempcpy for PPC64.

	* sysdeps/powerpc/powerpc64/memset.S (NO_BZERO_IMPL): Add macro to
	avoid cretion of __bzero symbol.
	* sysdeps/powerpc/powerpc64/power4/memset.S (NO_BZERO_IMPL):
	Likewise.
	* sysdeps/powerpc/powerpc64/power6/memset.S (NO_BZERO_IMPL):
	Likewise.
	* sysdeps/powerpc/powerpc64/power7/memset.S (NO_BZERO_IMPL):
	Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memset/bzero
	multiarch implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power6.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/bzero-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/bzero.c: New file: multiarch
	bzero for PPC32.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power6.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memset-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memset-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memset.c: New file: multiarch
	memset for PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/rtld-memset.c: New file.

	* string/memcmp.c (memcmp): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc64/multiarch/Makefile: Add memcpy multiarch
	implementations.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp-ppc64.c: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcmp.c: New file: multiarch
	memcmp for PPC64.

	* sysdeps/powerpc/powerpc64/multiarch/Makefile: New file to support
	multiarch for POWER/PPC64.
	* sysdeps/powerpc/powerpc64/multiarch/ifunc-impl-list.c: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/init-arch.h: Likewise.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-a2.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-cell.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-power4.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-power6.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-power7.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy-ppc64.S: New file.
	* sysdeps/powerpc/powerpc64/multiarch/memcpy.c: New file: multiarch
	memcpy for PPC64.

	* sysdeps/powerpc/powerpc64/power4/fpu/Implies: New file.
	* sysdeps/powerpc/powerpc64/power4/fpu/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power4/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5+/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5+/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power5/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power6/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power6/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power7/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power7/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power8/fpu/Implies: New File.
	* sysdeps/powerpc/powerpc64/power8/fpu/multiarch/Implies: New File.
	* sysdeps/powerpc/powerpc64/power8/multiarch/Implies: New File.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power4/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5+/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6x/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power7/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power8/Implies: Remove.

2013-12-12  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Use $$ver.

2013-12-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (bench): Add exp2 and log2.
	(LDLIBS-bench-exp2): Add -lm.
	(LDLIBS-bench-log2): Likewise.
	* benchtests/exp2-inputs: New inputs file.
	* benchtests/log2-inputs: New inputs file.
	* benchtests/log-inputs: Add new inputs.
	* benchtests/tan-inputs: Likewise.

2013-12-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c (t22): Consolidate const
	definition...
	(slow1, slow2, sloww1, sloww2, bsloww1, bsloww2, cslow2, csloww1)
	(csloww2): ... from here.

	* sysdeps/ieee754/dbl-64/usncs.h: Define constants as double
	instead of structures.
	* sysdeps/ieee754/dbl-64/s_sin.c (POLYNOMIAL2): Adjust.
	(POLYNOMIAL): Likewise.
	(TAYLOR_SLOW): Likewise.
	(__sin): Likewise.
	(__cos): Likewise.
	(slow1): Likewise.
	(slow2): Likewise.
	(sloww): Likewise.
	(sloww1); Likewise.
	(sloww2): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.
	(cslow2): Likewise.
	(csloww): Likewise.
	(csloww1): Likewise.
	(csloww2): Likewise.

2013-12-10  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* malloc/malloc.c (MALLOC_COPY, MALLOC_ZERO): Delete.
	(__malloc_assert, __libc_realloc, __libc_calloc, _int_realloc):
	Expand MALLOC_COPY and MALLOC_ZERO to memcpy and memset.
	* malloc/hooks.c (realloc_check): Likewise.

	* malloc/Makefile (CPPFLAGS-malloc.c): Remove -DPER_THREAD flag.
	* malloc/arena.c: Remove PER_THREAD conditional.
	[!PER_THREAD]: Remove code.
	(ptmalloc_unlock_all2): Likewise.
	(ptmalloc_init): Likewise.
	(_int_new_arena): Likewise.
	(arena_get2): Likewise.
	* malloc/hooks.c (__malloc_get_state): Likewise.
	(__malloc_set_state): Likewise.
	* malloc/malloc.c: Likewise.
	(struct malloc_state): Likewise.
	(struct malloc_par): Likewise.
	(__libc_realloc): Likewise.
	(__libc_mallopt): Likewise.

2013-12-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* Versions.def (libm): Add GLIBC_2.3 and GLIBC_2.19.

2013-12-09  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* malloc/malloc.c (alloc_perturb, free_perturb): Convert from
	macro to a function.  Check for zero perturb_byte.
	(_int_malloc, _int_free): Remove zero perturb_byte checks.

	* malloc/malloc.c: (force_reg): Remove.
	(__malloc_assert, __libc_malloc, __libc_free, __libc_realloc)
	(_mid_memalign, __libc_calloc, sysmalloc, systrim): Replace
	force_reg by atomic_forced_read.
	* malloc/arena.c (ptmalloc_init): Likewise.
	* malloc/hooks.c (top_check): Likewise.

2013-12-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-09  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2013-12-08  Joseph Myers  <joseph@codesourcery.com>

	* math/auto-libm-test-in: Add tests of lgamma.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (M_LOG_SQRT_PIl): Remove macro.
	(M_LOG_2_SQRT_PIl): Likewise.
	(lgamma_test_data): Use AUTO_TESTS_f_f1.
	* math/gen-auto-libm-tests.c (func_calc_method): Add value
	mpfr_f_f1.
	(func_calc_desc): Add mpfr_f_f1 union field.
	(ARGS1): New macro.
	(ARGS2): Likewise.
	(ARGS3): Likewise.
	(ARGS4): Likewise.
	(RET1): Likewise.
	(RET2): Likewise.
	(CALC): Likewise.
	(FUNC): Likewise.
	(FUNC_mpfr_f_f): Use new macros FUNC, ARGS1, RET1 and CALC.
	(test_functions): Add lgamma.
	(calc_generic_results): Handle mpfr_f_f1.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/add_n.S: New file: optimized
	__mpn_add_n for PowerPC64/POWER7.
	* sysdeps/powerpc/powerpc64/power7/sub_n.S: New file: optimized
	__mpn_sub_n for PowerPC64/POWER7.

	* sysdeps/powerpc/powerpc64/addmul_1.S: New file: optimized
	__mpn_addmul_1 for PowerPC64.
	* sysdeps/powerpc/powerpc64/submul_1.S: New file: optimized
	__mpn_submul_1 for PowerPC64.
	* sysdeps/powerpc/powerpc64/lshift.S: New file: optimized __mpn_lshift
	for PowerPC64.
	* sysdeps/powerpc/powerpc64/mul_1.S: New file: optimized __mpn_mul_1
	for PowerPC64.

2013-12-06  Fernando J. V. da Silva  <fernandojvdasilva@gmail.com>

	[BZ #15089]
	* malloc/malloc.c: Exit systrim() if pad is bigger than heap top size.

2013-12-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* NEWS: Mention ppc32/power4+ STT_GNU_IFUNC support.

	* sysdeps/powerpc/powerpc32/power5+/fpu/multiarch/Implies: New file:
	add multiarch folders.
	* sysdeps/powerpc/powerpc32/power5+/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power5/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power6/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power6x/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power6x/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power7/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power8/fpu/multiarch/Implies: Likewise.
	* sysdeps/powerpc/powerpc32/power8/multiarch/Implies: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5+/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6x/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power7/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power8/Implies: Remove.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add
	__ieee754_hypot and __ieee754_hypotf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypot-power7.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypot-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypot.c: New file:
	multiarch __ieee754_hypot for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypotf-power7.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypotf-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/e_hypotf.c: New file:
	multiarch __ieee754_hypotf for PowerPC32.

	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Define
	long_double_symbol only if __logbl is defined.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c: Moved to ...
	* sysdeps/powerpc/power7/fpu/s_logb.c: ... here.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbf.c: Move to ...
	* sysdeps/powerpc/power7/fpu/s_logbf.c: ... here.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c: Move to ...
	* sysdeps/powerpc/power7/fpu/s_logbl.c: ... here.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logb.c: Adjust to use new
	path for implementation.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbl.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add logbf,
	logb, and logbl multiarch implementations for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logb-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logb-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logb.c: New file:
	multiarch logb for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbf-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbf-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbf.c: New file:
	multiarch logbf for PowerPC32.
	* sysdeps/powerpc/power4/fpu/multiarch/s_logbl-power7.c: New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbl-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_logbl.c: New file:
	multiarch logbl implementation for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add modf
	and modff multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modf-power5+.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modf-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modf.c: New file:
	multiarch modf for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modff-power5+.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modff-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_modff.c: New file:
	multiarch modff for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add lrint
	and lrintf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lrint-power6x.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lrint-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lrint.c: New file:
	multiarch lrint for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lrintf.c: New
	file: multiarch lrintf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add lround
	and lroundf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lround-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lround-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lround-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lround.c: New file:
	multiarch lround for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_lroundf.c: New
	file: multiarch lroundf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add
	copysign and copysignf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysign-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysign-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysign.c: New
	file: multiarch copysign for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_copysignf.c: New
	file: multiarch copysignf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add trunc
	and truncf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_trunc-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_trunc-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_trunc.c: New file:
	multiarch trunc for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_truncf-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_truncf-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_truncf.c: New file:
	multiarch truncf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add round
	and roundf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_round-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_round-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_round.c: New file:
	multiarch round for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_roundf-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_roundf-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_roundf.c: New file:
	multiarch roundf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add floor
	and floorf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floor-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floor-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floor.c: New file:
	multiarch floor for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floorf-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floorf-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_floorf.c: New file:
	multiarch floorf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add ceil
	and ceilf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceil-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceil-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceil.c: New file:
	multiarch ceil for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceilf-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceilf-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_ceilf.c: New file:
	multiarch ceilf for PowerPC32.

	* sysdeps/ieee754/dbl-64/s_finite.c (__finite): Redefine it if FINITE
	is defined.
	* sysdeps/ieee754/flt-32/s_finitef.c (__finitef): Redefine it if
	FINITEF is defined.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add finite
	and finitef multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finite-power7.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finite-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finite.c: New file:
	multiarch finite for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finitef-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_finitef.c: New
	file: multiarch finitef for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add isinf
	and isinff multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinf-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinf-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinf.c: New file:
	multiarch isinf for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinff-ppc32.c:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isinff.c: New file:
	multiarch isinff for PowerPC32.

	* sysdeps/powerpc/powerpc32/fpu/s_isnan.S (__isnan): Only implement
	alias when __isnan is defined.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add isnan
	and isnanf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan-power5.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan-power6.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnan.c: New file:
	multiarch isnan for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnanf-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnanf-power7.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_isnanf.c: New file:
	multiarch isnanf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add sqrt
	and sqrtf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt-power5.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrt.c: New file:
	multiarch sqrt for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf-power5.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/w_sqrtf.c: New file:
	multiarch sqrtf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: Add llround
	and llroundf multiarch implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llround-power5+.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llround-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llround-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llround.c: New
	file: multiarch llround for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llroundf.c: New
	file: multiarch llroundf for PowerPC32.

	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/Makefile: New file:
	multiarch PowerPC32 fpu implementations.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrint-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrint-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrint.c: New file:
	multiarch llrint for PowerPC32.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrintf-power6.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrintf-ppc32.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/fpu/multiarch/s_llrintf.c: New
	file.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/Implies: Remove.

	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy-power6.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wordcopy.c: New file:
	multiarch wordcopy for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added wcscpy
	wordcopy objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc32/power4/wordcopy.c: Move ...
	* sysdeps/powerpc/power4/wordcopy.c: ... to here.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Move ...
	* sysdeps/powerpc/power6/wordcopy.c: ... to here.
	* sysdeps/powerpc/powerpc64/power6/wordcopy.c: Remove uneeded file.
	* sysdeps/powerpc/powerpc64/power4/wordcopy.c: Likewise.

	* wcsmbs/wcscpy.c (wcscpy): Using macro to redefine symbol name
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy-power6.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcscpy.c: New file:
	multiarch wcscpy for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added wcscpy
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcsrchr.c: Move ...
	* sysdeps/powerpc/power6/wcsrchr.c: ... to here.
	* sysdeps/powerpc/powerpc64/power6/wcscpy.c: Adjust to use
	sysdeps/powerpc/power6/wcscpy.c.

	* wcsmbs/wcsrchr.c (wcsrchr): Using macro to redefine symbol name
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr-power6.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcsrchr.c: New file:
	multiarch wcsrchr for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added wcschr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcsrchr.c: Move ...
	* sysdeps/powerpc/power6/wcsrchr.c: ... to here.
	* sysdeps/powerpc/powerpc64/power6/wcsrchr.c: Adjust to use
	sysdeps/powerpc/power6/wcsrchr.c.

	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-power6.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr-ppc32.c: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/wcschr.c: New file:
	multiarch wcschr for PPc32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added wcschr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcschr.c: Move ...
	* sysdeps/powerpc/power6/wcschr.c: ... to here.
	* sysdeps/powerpc/powerpc64/power6/wcschr.c: Adjust to use
	sysdeps/powerpc/power6/wcschr.c.

	* sysdeps/powerpc/powerpc32/power4/multiarch/rtld-strchr.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchr-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchr-ppc32.S: New file.
	* sysdeps/powerpc/powerpc/powerpc32/power4/multiarch/strchr.c: New
	file: multiarch strchr for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strchr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* string/strchrnul.c (__strchrnul): Using macro to redefine symbol
	name.
	* sysdeps/powerpc/powerpc32/power4//multiarch/strchrnul-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchrnul-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strchrnul.c: New file:
	multiarch strchrnul for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strchrnul
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase.c: New file:
	multiarch strncasecmp for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase_l-power7.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncase_l.c: New file:
	multiarch strncasecmp_l for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added
	strncasecmp multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp.c: New file:
	multiarch strncasecmp for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp_l-power7.S:
	New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strcasecmp_l.c: New file:
	multiarch strcasecmp_l for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strcasecmp
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strncmp.c: New file:
	multiarch strncmp for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strncmp
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/rtld-strnlen.c: New file.
	* sysdeps/powerpc/powerpc32//power4/multiarch/strnlen-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strnlen-ppc32.c: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strnlen.c: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strnlen
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/strlen.c: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added strlen
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/rawmemchr-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rawmemchr-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rawmemchr.c: New file:
	multiarch rawmemchr for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added rawmemchr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memrchr.c: New
	file: memrchr multiarch for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Added memrchr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list
	(__libc_ifunc_impl_list): Likewise.

	* string/memchr.c (__memchr): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr-ppc32.c: New File.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memchr.c: New file:
	multiarch memchr for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add memchr
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* string/mempcpy.c (__mempcpy): Using macro to redefine symbol name.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy-ppc32.c: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/mempcpy.c: New
	file: multiarch mempcpy for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add mempcpy
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero-power6.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero-power7.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero-ppc32.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/bzero.c: New file:
	multiarch bzero for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset-power6.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memset-ppc32.S: New file.
	* sysdeps/powerpc/powerpc/powerpc32/power4/multiarch/memset.c: New
	file: multiarch memset for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rtld-memset.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add bzero and
	memset multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp-ppc32.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcmp.c: multiarch
	memcmp for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/rtld-memcmp.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add memcmp
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-a2.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-cell.S: New file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-power6.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-power7.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy-ppc32.S: New
	file.
	* sysdeps/powerpc/powerpc32/power4/multiarch/memcpy.c: New file:
	multiarch memcpy for PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: Add memcpy
	multiarch objects.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Likewise.

	* sysdeps/powerpc/powerpc32/power4/multiarch/Makefile: New file to
	support multiarch for POWER/PPC32.
	* sysdeps/powerpc/powerpc32/power4/multiarch/ifunc-impl-list.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/power4/multiarch/init-arch.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power4/Implies: Remove
	Implies file to make multiarch folder appers before the fpu and
	default folder for power4 configuration.

2013-12-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/bench.pl: Append volatile keyword to type.

2013-12-05  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sotruss-lib.c: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/c++-types.data: New file.

2013-12-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6810]
	* math/w_tgamma.c: Include <errno.h>.
	(__tgamma): Use __glibc_unlikely.  Set errno on underflow to 0.
	* math/w_tgammaf.c: Include <errno.h>.
	(__tgammaf): Use __glibc_unlikely.  Set errno on underflow to 0.
	* math/w_tgammal.c: Include <errno.h>.
	(__tgammal): Use __glibc_unlikely.  Set errno on underflow to 0.
	* math/auto-libm-test-in: Do not allow missing errno on tgamma
	underflow.  Add more tgamma tests.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add tests of log, log10, log1p, log2,
	sin, sinh, tan, tanh, tgamma, y0 and y1.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (TEST_COND_x86_64): New macro.
	(TEST_COND_x86): Likewise.
	(M_E2l): Remove macro.
	(M_E3l): Likewise.
	(M_2_SQRT_PIl): Likewise.
	(M_SQRT_PIl): Likewise.
	(M_1_DIV_El): Likewise.
	(log_test_data): Use AUTO_TESTS_f_f.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(sin_test_data): Likewise.
	(sin_tonearest_test_data): Likewise.
	(sin_towardzero_test_data): Likewise.
	(sin_downward_test_data): Likewise.
	(sin_upward_test_data): Likewise.
	(sinh_test_data): Likewise.
	(sinh_tonearest_test_data): Likewise.
	(sinh_towardzero_test_data): Likewise.
	(sinh_downward_test_data): Likewise.
	(sinh_upward_test_data): Likewise.
	(tan_test_data): Likewise.
	(tan_tonearest_test_data): Likewise.
	(tan_towardzero_test_data): Likewise.
	(tan_downward_test_data): Likewise.
	(tan_upward_test_data): Likewise.
	(tanh_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	* math/gen-auto-libm-tests.c (special_fill_pi_4): New function.
	(special_real_inputs): Add pi/4.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/__longjmp-common.S: Add "longjmp" and
	"longjmp_target" static probes.
	(__longjmp): Rename to __longjmp_symbol.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/__longjmp.S: Define __longjmp_symbol based
	on which longjmp to generate.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S: Add "setjmp" static
	probe.
	(__sigsetjmp): Rename to __sigsetjmp_symbol.
	(__sigjmp_save): Rename to __sigjmp_save_symbol.
	* sysdeps/powerpc/powerpc32/setjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp.S: Define __sigsetjmp_symbol
	and __sigjmp_save_symbol based on which sigsetjmp to generated.
	* sysdeps/powerpc/powerpc32/setjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/____longjmp_chk.S: Define
	__longjmp_symbol based on which __longjmp to generate.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Add "setjmp" static
	probe.
	(setjmp): Rename to setjmp_symbol.
	(__sigsetjmp): Rename to __sigsetjmp_symbol.
	(_setjmp): Rename to _setjmp_symbol.
	(__sigsetjmp): Rename to __sigsetjmp_symbol.
	* sysdeps/powerpc/powerpc64/setjmp.S: Define setjmp_symbol,
	_setjmp_symbol, __sigsetjmp_symbol, and __sigjmp_save_symbol based on
	which setjmp to generate.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S: Add "longjmp" and
	"longjmp_target" static probes.

2013-12-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/README: Add note about output arguments.
	* benchtests/bench-sincos.c: Remove file.
	* benchtests/sincos-inputs: New file.
	* scripts/bench.pl: Identify output arguments and define
	static variables for them.

	* debug/stpncpy_chk.c (__stpncpy_chk): Remove unused variables.

	[BZ #15941]
	* Makefile (INSTALL): Add install-plain.texi as the primary
	dependency.
	* manual/install-plain.texi: New file.
	* manual/install.texi: Include node directive only for
	non-plaintext output.

2013-12-04  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/longlong.h: Update from GCC.

	[BZ #6807]
	[BZ #15901]
	* math/w_j0.c (y0): Raise FE_DIVBYZERO on zero argument.
	* math/w_j0f.c (y0f): Likewise.
	* math/w_j0l.c (__y0l): Likewise.
	* math/w_j1.c (y1): Likewise.
	* math/w_j1f.c (y1f): Likewise.
	* math/w_j1l.c (__y1l): Likewise.
	* math/w_jn.c (yn): Likewise.
	* math/w_jnf.c (ynf): Likewise.
	* sysdeps/ieee754/k_standard.c (__kernel_standard): Use ERANGE for
	Bessel function pole errors in _POSIX_ mode.  Use NAN as return
	value for Bessel function domain errors outside _SVID_ mode.
	Adjust sign of return value for yn (negative integer, 0).
	* sysdeps/ieee754/ldbl-128/e_jnl.c (__ieee754_ynl): Use division
	by zero in return for negative x and set sign appropriately for
	negative n.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_ynl): Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_ynl): Likewise.
	* math/libm-test.inc (y0_test_data): Add more tests and adjust
	expectations in error cases.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-11-12  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/Makefile (abi-variants): Rename
	"64" to "64-v1".  Add "64-v2".
	(abi-64-options): Rename to ...
	(abi-64-v1-options): ... this.   Redefine _CALL_ELF.
	(abi-64-condition): Rename to ...
	(abi-64-v1-condition): ... this.  Add _CALL_ELF check.,
	(abi-64-ld-soname): Rename to ...
	(abi-64-v1-ld-soname): ... this.
	(abi-64-v2-options): Define.
	(abi-64-v2-condition): Likewise.
	(abi-64-v2-ld-soname): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/ldconfig.h
	(SYSDEP_KNOWN_INTERPRETER_NAMES): Add "/lib64/ld64.so.2".
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Makefile: Delete file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure.ac: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/configure: Generate.

2013-11-12  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>
	    Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/bits/link.h (La_ppc64v2_regs, La_ppc64v2_retval):
	New versions for use with the ELFv2 ABI.
	(la_ppc64v2_gnu_pltenter, la_ppc64v2_gnu_pltexit): Add prototypes.
	* sysdeps/powerpc/lsdodefs.h (struct La_ppc64v2_regs): Add forward
	declaration.
	(struct La_ppc64v2_retval): Likewise.
	(ARCH_PLTENTER_MEMBERS): Add ppc64v2_gnu_pltenter.
	(ARCH_PLTEXIT_MEMBERS): Add ppc64v2_gnu_pltexit.
	* sysdeps/powerpc/powerpc64/dl-machine.h (ARCH_LA_PLTENTER): Define
	to ppc64v2_gnu_pltenter if _CALL_ELF == 2.
	(ARCH_LA_PLTEXIT): Define to ppc64v2_gnu_pltexit if _CALL_ELF == 2.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (_dl_runtime_resolve):
	Do not save or restore CR.
	(FRAME_SIZE, VR_RTN): Provide updated values for _CALL_ELF == 2.
	(_dl_profile_resolve): Do no save or restore CR.  Support extended
	return values for ELFv2 ABI.  Fix location of FPR return registers.
	* sysdeps/powerpc/powerpc64/tst-audit.h (pltenter, pltexit): Provide
	updated values for _CALL_ELF == 2.
	(La_regs, La_retval, int_retval): Likewise.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>

	* sysdeps/powerpc/powerpc64/sysdep.h (FRAME_MIN_SIZE): Define.
	(FRAME_MIN_SIZE_PARM): Likewise.
	(FRAME_BACKCHAIN): Likewise.
	(FRAME_CR_SAVE): Likewise.
	(FRAME_LR_SAVE): Likewise.
	(FRAME_TOC_SAVE): Likewise.
	(FRAME_PARM_SAVE): Likewise.
	(FRAME_PARM1_SAVE, FRAME_PARM2_SAVE, FRAME_PARM3_SAVE,
	FRAME_PARM4_SAVE, FRAME_PARM5_SAVE, FRAME_PARM6_SAVE,
	FRAME_PARM7_SAVE, FRAME_PARM8_SAVE, FRAME_PARM9_SAVE): Likewise.
	(call_mcount_parm_offset): New macro.
	(SAVE_ARG, REST_ARG, CFI_SAVE_ARG): Use it.
	(PROF): Use symbolic stack frame offsets.
	(TAIL_CALL_SYSCALL_ERROR): Likewise.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (FRAME_SIZE, INT_PARMS):
	Redefine in terms of FRAME_MIN_SIZE.
	(_dl_runtime_resolve): Use symbolic stack frame offsets.
	(_dl_profile_resolve): Likewise.  Update comment.
	* sysdeps/powerpc/powerpc64/setjmp-common.S (__GI__setjmp): Use
	symbols stack frame offsets.
	(__sigsetjmp): Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S (__longjmp): Likewise.
	* sysdeps/powerpc/powerpc64/ppc-mcount.S (_mcount): Likewise.
	* sysdeps/powerpc/powerpc64/crti.S (_init, _fini): Likewise.
	* sysdeps/powerpc/powerpc64/crtn.S (_init, _fini): Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ucontext_i.sym
	(FRAME_BACKCHAIN): Remove.
	(FRAME_CR_SAVE): Likewise.
	(FRAME_LR_SAVE): Likewise.
	(FRAME_COMPILER_DW): Likewise.
	(FRAME_LINKER_DW): Likewise.
	(FRAME_TOC_SAVE): Likewise.
	(FRAME_PARM_SAVE): Likewise.
	(FRAME_PARM1_SAVE, FRAME_PARM2_SAVE, FRAME_PARM3_SAVE)
	(FRAME_PARM4_SAVE, FRAME_PARM5_SAVE, FRAME_PARM6_SAVE)
	(FRAME_PARM7_SAVE, FRAME_PARM8_SAVE, FRAME_PARM9_SAVE): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/____longjmp_chk.S
	(CHECK_SP): Use symbolic stack frame offsets.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/brk.S (__brk): Use "red
	zone" instead of caller's parameter save area for temp storage.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (__clone):
	Likewise.  Also, use symbolic stack frame offsets.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/socket.S (FRAMESIZE,
	stackblock): Redefine for _CALL_ELF == 2 to save parameters into
	our own stack frame instead of the caller's.
	(__socket): Use symbolic stack frame offsets.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>
	    Alan Modra  <amodra@gmail.com>

	* elf/elf.h (DT_PPC64_OPT, PPC64_OPT_TLS, PPC64_OPT_MULTI_TOC):
	Define.
	(STO_PPC64_LOCAL_BIT, STO_PPC64_LOCAL_MASK)
	(PPC64_LOCAL_ENTRY_OFFSET): Define.
	* sysdeps/powerpc/powerpc64/dl-machine.h (ppc64_local_entry_offset):
	New function.
	(elf_machine_fixup_plt): Call it.
	(elf_machine_plt_conflict): Likewise.  Add map, sym_map, and
	reloc arguments.
	(elf_machine_rela): Update call to elf_machine_plt_conflict.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (_dl_runtime_resolve)
	(_dl_profile_resolve) [_CALL_ELF == 2]: Restore caller's TOC into
	r2 before calling target.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>
	    Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/sysdep.h [_CALL_ELF == 2]
	(PPC64_LOAD_FUNCPTR, DOT_LABEL, BODY_LABEL, ENTRY_2, END_2): New
	versions of macros to support ELFv2 ABI.
	(LOCALENTRY): New macro.
	(ENTRY, EALIGN): Use it.
	* sysdeps/powerpc/powerpc64/crti.S (_init, _fini): Use LOCALENTRY.
	* sysdeps/powerpc/powerpc64/setjmp-common.S (__GI__setjmp): Do not
	fall through into ENTRY entry point.
	* libc/sysdeps/powerpc/powerpc64/dl-machine.h (Elf64_FuncDesc):
	Only define if _CALL_ELF != 2.

	(elf_machine_matches_host): Verify ABI version matches.
	(RTLD_START): Use LOCALENTRY.
	(elf_machine_type_class): Use SHN_UNDEF PLT handling for ELFv2 ABI.
	(PLT_INITIAL_ENTRY_WORDS): New version for _CALL_ELF != 2.
	(PLT_ENTRY_WORDS): New macro.
	(GLINK_INITIAL_ENTRY_WORDS, GLINK_ENTRY_WORDS): Likewise.
	(elf_machine_runtime_setup): Support ELFv2 ABI.
	(elf_machine_fixup_plt): Likewise.
	(elf_machine_plt_conflict): Likewise.
	(resolve_ifunc): Likewise.
	* sysdeps/powerpc/powerpc64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h (VDSO_IFUNC_RET):
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/ldsodefs.h
	(DL_ADDR_SYM_MATCH): Only define if _CALL_ELF != 2.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(makecontext): Support ELFv2 ABI.
	* elf/elf.h (EF_PPC64_ABI): Define.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>

	* sysdeps/powerpc/powerpc64/sysdep.h
	(PPC64_LOAD_FUNCPTR) [ASSEMBLER]: New assembler macro.
	(ENTRY_1) [ASSEMBLER]: Do not switch to .text section here ...
	(ENTRY) [ASSEMBLER]: ... but instead here ...
	(EALIGN) [ASSEMBLER]: ... and here.
	(PPC64_LOAD_FUNCPTR) [!ASSEMBLER]: New macro.
	(ENTRY_1) [!ASSEMBLER]: New macro; set up .opd entry.
	(ENTRY_2) [!ASSEMBLER]: Use it.
	* sysdeps/powerpc/powerpc64/dl-machine.h (RTLD_START): Update for
	ENTRY_2 changes.  Use PPC64_LOAD_FUNCPTR.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (_dl_runtime_resolve)
	(_dl_profile_resolve): Use PPC64_LOAD_FUNCPTR.
	* sysdeps/powerpc/powerpc64/crti.S (_init, _fini): Use ENTRY_2.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (clone):
	Use PPC64_LOAD_FUNCPTR.

	* sysdeps/powerpc/tls.h (tcbhead_t): Add __private_ss field.

2013-12-04  Alan Modra  <amodra@gmail.com>

	* elf/elf.h (R_PPC64_TLSGD, R_PPC64_TLSLD, R_PPC64_TOCSAVE): Define.
	(R_PPC64_ADDR16_HIGH, R_PPC64_ADDR16_HIGHA): Likewise.
	(R_PPC64_TPREL16_HIGH, R_PPC64_TPREL16_HIGHA): Likewise.
	(R_PPC64_DTPREL16_HIGH, R_PPC64_DTPREL16_HIGHA): Likewise.

	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela): Add
	overflow checking for R_PPC64_ADDR16_HI, R_PPC64_ADDR16_HA,
	R_PPC64_TPREL16_HI, and R_PPC64_TPREL16_HA.
	Support new R_PPC64_ADDR16_HIGH, R_PPC64_ADDR16_HIGHA,
	R_PPC64_TPREL16_HIGH, and R_PPC64_TPREL16_HIGHA relocations.
	Fix overflow checking for R_PPC64_ADDR30 and R_PPC64_ADDR32.

2013-12-04  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(__makecontext): Fix incorrect CFI when backtracing out of
	context created via makecontext.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/secontext.S
	(__setcontext): Fix incorrect CFI during switch to new context.
	(__novec_setcontext): Likewise.

2013-12-04  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #4772]
	* time/strptime_l.c (__strptime_internal): Allow modifiers
	in strptime.
	* time/tst-strptime.c (day_tests): Add testcase.

2013-12-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* scripts/bench.pl: Skip over blank lines.

2013-12-04  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #926]
	* manual/time.texi (Calendar Time): Clarify what timezone functions
	use.

2013-12-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-12-04  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* debug/memcpy_chk.c (__memcpy_chk): Use call instead of custom
	implementation.
	* debug/memmove_chk.c (MEMMOVE_CHK): Likewise.
	* debug/mempcpy_chk.c (__mempcpy_chk): Likewise.
	* debug/memset_chk.c (__memset_chk): Likewise.
	* debug/stpncpy_chk.c (__stpncpy_chk): Likewise.
	* debug/strncpy_chk.c: Likewise.

2013-12-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15268]
	[BZ #15425]
	* sysdeps/ieee754/dbl-64/e_exp.c: Include <float.h>.
	(__ieee754_exp): For possibly underflowing results, check size of
	result and force underflow exception if required.
	* math/auto-libm-test-in: Add more tests of exp.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #16283]
	* math/w_exp2.c (__exp2): Handle a zero result as underflow.
	* math/w_exp2f.c (__exp2f): Likewise.
	* math/w_exp2l.c (__exp2l): Likewise.
	* math/auto-libm-test-in: Do not allow missing errno on exp2
	underflow.
	* math/auto-libm-test-out: Regenerated.

2013-12-03  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #16274]
	* sysdeps/unix/sysv/linux/shm_open.c (shm_open): Correctly
	handle filename validation.
	* rt/tst-shm.c (do_test): Do not skip a test when shm_open fails.
	(do_open): Delete.

2013-12-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6786]
	* sysdeps/ieee754/dbl-64/s_erf.c: Include <errno.h> and <float.h>.
	(__erfc): Set errno to ERANGE when returning 0 or tiny * tiny.
	* sysdeps/ieee754/flt-32/s_erff.c: Include <errno.h> and
	<float.h>.
	(__erfcf): Set errno to ERANGE when returning 0 or tiny * tiny.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Include <errno.h>.
	(__erfcl): Set errno to ERANGE when returning 0 or tiny * tiny.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Include <errno.h>.
	(__erfcl): Set errno to ERANGE when returning 0 or tiny * tiny.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Include <errno.h>.
	(__erfcl): Set errno to ERANGE when returning 0 or tiny * tiny.
	* math/auto-libm-test-in: Don't allow missing errno from erfc.
	Add more erfc tests.
	* math/auto-libm-test-out: Regenerated.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/auto-libm-test-in: Add tests of erf, erfc, exp, exp10,
	exp2, expm1, j0 and j1.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (erf_test_data): Use AUTO_TESTS_f_f.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp_tonearest_test_data): Likewise.
	(exp_towardzero_test_data): Likewise.
	(exp_downward_test_data): Likewise.
	(exp_upward_test_data): Likewise.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	(j0_test_data): Likewise.
	(j1_test_data): Likewise.
	* math/gen-auto-libm-tests.c: Mention "xfail-rounding" in comment.
	(input_flag_type): Add flag_xfail_rounding.
	(input_flags): Add xfail-rounding.
	(adjust_real): Assert mpfr_number_p not mpfr_regular_p.
	(output_for_one_input_case): Handle flag_xfail_rounding.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-12-03  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #16289]
	* locale/loadarchive.c (_nl_load_locale_from_archive): Avoid
	division by 0.

2013-12-03  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16195]
	* include/stap-probe.h [!USE_STAP_PROBE && !__ASSEMBLER__]
	(LIBC_PROBE): Change definition to call STAP_PROBE* macros.
	(STAP_PROBE0): New macro.
	(STAP_PROBE1): Likewise.
	(STAP_PROBE2): Likewise.
	(STAP_PROBE3): Likewise.
	(STAP_PROBE4): Likewise.

2013-12-02  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* manual/llio.texi (Memory-mapped I/O): Add shm_open and shm_close.

2013-12-02  Steve Ellcey  <sellcey@mips.com>

	* benchtests/Makefile (bench): Add sqrt.
	(LDLIBS-bench-sqrt): New.
	* benchtests/sqrt-input: New.

2013-12-02  Pavel Simerda  <psimerda@redhat.com>

	* sysdeps/posix/getaddrinfo.c (GAIH_OKIFUNSPEC): Remove macro.
	(GAIH_EAI): Likewise.
	(gaih_inet_serv): Don't use GAIH_OKIFUNSPEC.
	(gaih_inet): Likewise.
	(getaddrinfo): Don't use GAIH_EAI.

	* sysdeps/posix/getaddrinfo.c (UNIX_PATH_MAX): Remove macro.
	(struct gaih): Remove definition.

2013-12-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nss/nss_files/files-hosts.c (_nss_files_gethostbyname4_r):
	Use HERRNOP directly.

2013-12-02  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-11-30  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-auto-libm-tests.c (test_functions): Add more
	single-argument functions.
	(special_fill_pi_2): New function.
	(special_fill_minus_pi_2): Likewise.
	(special_fill_pi_6): Likewise.
	(special_fill_minus_pi_6): Likewise.
	(special_fill_pi_3): Likewise.
	(special_fill_2pi_3): Likewise.
	(special_fill_e): Likewise.
	(special_fill_1_e): Likewise.
	(special_fill_e_minus_1): Likewise.
	(special_real_inputs): Add more special inputs.
	(output_for_one_input_case): Do not require ERANGE on underflow to
	zero if round-to-nearest result does not underflow to zero, unless
	exact results required.
	* math/auto-libm-test-in: Add tests of acos, acosh, asin, asinh,
	atan, atanh, cbrt, cos and cosh.
	* math/auto-libm-test-out: Regenerated.
	* math/libm-test.inc (acos_test_data): Use AUTO_TESTS_f_f.
	(acos_tonearest_test_data): Likewise.
	(acos_towardzero_test_data): Likewise.
	(acos_downward_test_data): Likewise.
	(acos_upward_test_data): Likewise.
	(acosh_test_data): Likewise.
	(asin_test_data): Likewise.
	(asin_tonearest_test_data): Likewise.
	(asin_towardzero_test_data): Likewise.
	(asin_upward_test_data): Likewise.
	(asinh_test_data): Likewise.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(cbrt_test_data): Likewise.
	(cos_test_data): Likewise.
	(cos_tonearest_test_data): Likewise.
	(cos_towardzero_test_data): Likewise.
	(cos_downward_test_data): Likewise.
	(cos_upward_test_data): Likewise.
	(cosh_test_data): Likewise.
	(cosh_tonearest_test_data): Likewise.
	(cosh_towardzero_test_data): Likewise.
	(cosh_downward_test_data): Likewise.
	(cosh_upward_test_data): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-11-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6787]
	* math/w_exp10.c (__exp10): Handle a zero result as underflow.
	* math/w_exp10f.c (__exp10f): Likewise.
	* math/w_exp10l.c (__exp10l): Likewise.
	* math/libm-test.inc (exp10_test_data): Add more tests and expect
	errno settings in existing tests.

	[BZ #14032]
	* sysdeps/i386/fpu/e_sqrt.S (__ieee754_sqrt): Do fsqrt with
	precision control set to double precision.
	* sysdeps/i386/fpu/w_sqrt.c: New file.
	* math/auto-libm-test-in: Add more tests.
	* math/auto-libm-test-out: Update.

	* math/libm-test.inc (sqrt_tonearest_test_data): New variable.
	(sqrt_test_tonearest): New function.
	(sqrt_towardzero_test_data): New variable.
	(sqrt_test_towardzero): New function.
	(sqrt_downward_test_data): New variable.
	(sqrt_test_downward): New function.
	(sqrt_upward_test_data): New variable.
	(sqrt_test_upward): New function.
	(main): Call the new functions.

	* math/gen-auto-libm-tests.c: New file.
	* math/auto-libm-test-in: Likewise.
	* math/auto-libm-test-out: New generated file.
	* math/gen-libm-test.pl ($auto_input, %auto_tests): New global
	variables.
	(%beautify): Add generated representations of zero.
	(top level): Set $auto_input and call parse_auto_input.
	(beautify): Remove trailing "f" from hex float constants.
	(parse_args): Handle XFAIL_TEST.
	(convert_condition): New function.
	(or_value): Likewise.
	(or_cond_value): Likewise.
	(generate_testfile): Handle AUTO_TESTS_* lines.
	(parse_auto_input): New function.
	* math/libm-test.inc (XFAIL_TEST): New macro.
	(ERRNO_UNCHANGED): Update value.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(IGNORE_RESULT): Likewise.
	(TEST_COND_flt_32): New macro.
	(TEST_COND_dbl_64): Likewise.
	(TEST_COND_ldbl_96_intel): Likewise.
	(TEST_COND_ldbl_96_m68k): Likewise.
	(TEST_COND_ldbl_128): Likewise.
	(TEST_COND_ldbl_128ibm): Likewise.
	(TEST_COND_long32): Likewise.
	(TEST_COND_long64): Likewise.
	(TEST_COND_before_rounding): Likewise.
	(TEST_COND_after_rounding): Likewise.
	(enable_test): Handle XFAIL_TEST flag.
	(sqrt_test_data): Use AUTO_TESTS_f_f for tests of finite inputs
	with finite results.
	* math/Makefile ($(objpfx)libm-test.stmp): Depend on
	auto-libm-test-out.

2013-11-29  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	[BZ #16214]
	* sysdeps/s390/dl-tls.h (__TLS_GET_ADDR): Invoke
	__tls_get_addr_internal instead of __tls_get_offset in order to
	avoid GOT pointer dependency.  Make rtld export
	__tls_get_addr_internal@@GLIBC_PRIVATE while still hiding
	__tls_get_addr since we are a __tls_get_offset platform.
	* sysdeps/s390/s390-64/tls-macros.h (TLS_IE PIC): Don't rely on
	GOT pointer being set up before.
	* sysdeps/s390/s390-32/tls-macros.h (TLS_IE PIC): Likewise.

2013-11-28  Joseph Myers  <joseph@codesourcery.com>

	* manual/math.texi (Errors in Math Functions): Document accuracy
	goals.

	[BZ #15004]
	* sysdeps/ieee754/ldbl-96/e_atan2l.c: Remove file.
	* sysdeps/ieee754/ldbl-96/e_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_truncl.c: Likewise.

	* sysdeps/powerpc/nofpu/atomic-feclearexcept.c: New file.
	* sysdeps/powerpc/nofpu/atomic-feholdexcept.c: Likewise.
	* sysdeps/powerpc/nofpu/atomic-feupdateenv.c: Likewise.
	* sysdeps/powerpc/nofpu/flt-rounds.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/atomic-feclearexcept.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/atomic-feholdexcept.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/atomic-feupdateenv.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/flt-rounds.c: Likewise.
	* sysdeps/powerpc/nofpu/Makefile [$(subdir) = soft-fp]
	(sysdep_routines): Add atomic-feholdexcept, atomic-feclearexcept,
	atomic-feupdateenv and flt-rounds.
	* sysdeps/powerpc/nofpu/Versions (libc): Add
	__atomic_feholdexcept, __atomic_feclearexcept,
	__atomic_feupdateenv and __flt_rounds to GLIBC_2.19.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_libc.h
	(__feraiseexcept_soft): Declare and use libc_hidden_proto here.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fraiseexcept-soft.c
	(__feraiseexcept_soft): Don't declare and use libc_hidden_proto
	here.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/libc.abilist:
	Update.

	* manual/arith.texi (FP Exceptions): Document that exceptions may
	not be raised when matherr is used.
	(Math Error Reporting): Document overflow in directed rounding
	modes.  Document that errno may not be set when finite values are
	returned on overflow.  Document intent to set errno on underflow
	only for underflow to zero.

	[BZ #16271]
	* sysdeps/ieee754/dbl-64/e_sqrt.c (__ieee754_sqrt): Set
	round-to-nearest then adjust result for other rounding modes.
	* include/fenv.h (fegetround): Use libm_hidden_proto.
	* math/fegetround.c (fegetround): Use libm_hidden_def.
	* sysdeps/i386/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/nofpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetround.c (fegetround):
	Likewise.
	* sysdeps/s390/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/sparc/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/x86_64/fpu/fegetround.c (fegetround): Likewise.

2013-11-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16077]
	* nss/Versions (libnss_files): Add
	_nss_files_gethostbyname3_r.
	* nss/nss_files/files-hosts.c (_nss_files_gethostbyname3_r):
	New function.
	(HOST_DB_LOOKUP): Remove macro.
	(_nss_files_gethostbyname_r): Implement function without the
	HOST_DB_LOOKUP macro.
	(_nss_files_gethostbyname2_r): Likewise.

2013-11-28  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* malloc/malloc.c (__libc_calloc): Make memset a tail call.

2013-11-26  Uro≈° Bizjak  <ubizjak@gmail.com>

	* soft-fp/op-4.h (_FP_FRAC_ASSEMBLE_4): Check rsize against
	_FP_W_TYPE_SIZE to avoid "left shift count >= width of type"
	warning.

2013-11-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/feenablxcpt.c (feenableexcept): Use
	__fe_nomask_env_priv instead of __fe_nomask_env to avoid a PLT call.
	* sysdeps/powerpc/fpu/fesetenv.c (__fesetenv): Likewise.
	* sysdeps/powerpc/fpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fe_nomask_env): Rename to
	__fe_nomask_env_priv and attribute_hidden.
	* sysdeps/powerpc/fpu/fenv_private.h (libc_fesetenv_ppc): Likewise.
	(libc_feupdateenv_test_ppc): Likewise.
	(libc_feresetround_ppc): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c
	(__fe_nomask_env): Rename to __fe_nomask_env_priv and adjust
	compat_symbol macro.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c
	(__fe_nomask_env): Likewise.
	* sysdeps/powerpc/fpu/fe_nomask.c (__fe_nomask_env): Likewise.

2013-11-26  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* string/Makefile: Remove ifunc tests.
	* string/test-string.h: Define TEST_IFUNC.
	* string/test-bcopy-ifunc.c: Remove.
	* string/test-bzero-ifunc.c: Likewise.
	* string/test-memccpy-ifunc.c: Likewise.
	* string/test-memchr-ifunc.c: Likewise.
	* string/test-memcmp-ifunc.c: Likewise.
	* string/test-memcpy-ifunc.c: Likewise.
	* string/test-memmem-ifunc.c: Likewise.
	* string/test-memmove-ifunc.c: Likewise.
	* string/test-mempcpy-ifunc.c: Likewise.
	* string/test-memrchr-ifunc.c: Likewise.
	* string/test-memset-ifunc.c: Likewise.
	* string/test-rawmemchr-ifunc.c: Likewise.
	* string/test-stpcpy-ifunc.c: Likewise.
	* string/test-stpncpy-ifunc.c: Likewise.
	* string/test-strcasecmp-ifunc.c: Likewise.
	* string/test-strcasestr-ifunc.c: Likewise.
	* string/test-strcat-ifunc.c: Likewise.
	* string/test-strchr-ifunc.c: Likewise.
	* string/test-strchrnul-ifunc.c: Likewise.
	* string/test-strcmp-ifunc.c: Likewise.
	* string/test-strcpy-ifunc.c: Likewise.
	* string/test-strcspn-ifunc.c: Likewise.
	* string/test-strlen-ifunc.c: Likewise.
	* string/test-strncasecmp-ifunc.c: Likewise.
	* string/test-strncat-ifunc.c: Likewise.
	* string/test-strncmp-ifunc.c: Likewise.
	* string/test-strncpy-ifunc.c: Likewise.
	* string/test-strnlen-ifunc.c: Likewise.
	* string/test-strpbrk-ifunc.c: Likewise.
	* string/test-strrchr-ifunc.c: Likewise.
	* string/test-strspn-ifunc.c: Likewise.
	* string/test-strstr-ifunc.c: Likewise.

2013-11-26  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* benchtests/Makefile: Remove ifunc tests.
	* benchtests/bench-string.h: Define TEST_IFUNC.
	* benchtests/bench-bcopy-ifunc.c: Remove.
	* benchtests/bench-bzero-ifunc.c: Likewise.
	* benchtests/bench-memccpy-ifunc.c: Likewise.
	* benchtests/bench-memchr-ifunc.c: Likewise.
	* benchtests/bench-memcmp-ifunc.c: Likewise.
	* benchtests/bench-memcpy-ifunc.c: Likewise.
	* benchtests/bench-memmem-ifunc.c: Likewise.
	* benchtests/bench-memmove-ifunc.c: Likewise.
	* benchtests/bench-mempcpy-ifunc.c: Likewise.
	* benchtests/bench-memrchr-ifunc.c: Likewise.
	* benchtests/bench-memset-ifunc.c: Likewise.
	* benchtests/bench-rawmemchr-ifunc.c: Likewise.
	* benchtests/bench-stpcpy_chk-ifunc.c: Likewise.
	* benchtests/bench-stpcpy-ifunc.c: Likewise.
	* benchtests/bench-stpncpy-ifunc.c: Likewise.
	* benchtests/bench-strcasecmp-ifunc.c: Likewise.
	* benchtests/bench-strcasestr-ifunc.c: Likewise.
	* benchtests/bench-strcat-ifunc.c: Likewise.
	* benchtests/bench-strchr-ifunc.c: Likewise.
	* benchtests/bench-strchrnul-ifunc.c: Likewise.
	* benchtests/bench-strcmp-ifunc.c: Likewise.
	* benchtests/bench-strcpy_chk-ifunc.c: Likewise.
	* benchtests/bench-strcpy-ifunc.c: Likewise.
	* benchtests/bench-strcspn-ifunc.c: Likewise.
	* benchtests/bench-strlen-ifunc.c: Likewise.
	* benchtests/bench-strncasecmp-ifunc.c: Likewise.
	* benchtests/bench-strncat-ifunc.c: Likewise.
	* benchtests/bench-strncmp-ifunc.c: Likewise.
	* benchtests/bench-strncpy-ifunc.c: Likewise.
	* benchtests/bench-strnlen-ifunc.c: Likewise.
	* benchtests/bench-strpbrk-ifunc.c: Likewise.
	* benchtests/bench-strrchr-ifunc.c: Likewise.
	* benchtests/bench-strsep-ifunc.c: Likewise.
	* benchtests/bench-strspn-ifunc.c: Likewise.
	* benchtests/bench-strstr-ifunc.c: Likewise.

2013-11-26  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/dl-tlsdesc.S (_dl_tlsdesc_resolve_hold): Fix typo.

2013-11-26  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* resolv/netdb.h: Use __glibc_reserved instead __unused.
	* rt/aio.h: Likewise.
	* sysdeps/gnu/bits/utmp.h: Likewise.
	* sysdeps/gnu/bits/utmpx.h: Likewise.
	* sysdeps/gnu/netinet/ip_icmp.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/kernel_stat.h: Likewise.
	* sysdeps/unix/sysv/linux/ntp_gettimex.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/kernel_stat.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/utmp.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/utmpx.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmp32.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmpx32.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/kernel_stat.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/kernel_stat.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/xstatconv.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/timex.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/xstatconv.c: Likewise.
	* sysdeps/x86/fpu/bits/fenv.h: Likewise.

2013-11-25  Carlos O'Donell  <carlos@redhat.com>

	[BZ #16245]
	* sysdeps/unix/sysv/linux/sys/ptrace.h (__ptrace_eventcodes):
	Rename PTRAVE_EVENT_SECCOMP to PTRACE_EVENT_SECCOMP.

2013-11-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/nofpu/fenv_libc.h (__fegetround): New macro.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_libc.h (__fegetround):
	Likewise.

2013-11-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_expl.c (__ieee754_expl): Use
	SET_RESTORE_ROUND instead of feholdexcept/fesetround/fesetenv.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fegetround): Remove define.
	(__fesetround): Remove define.
	* sysdeps/powerpc/fpu/fenv_private.h: New file: Inline floating point
	rounding and exceptions handling.
	* sysdeps/powerpc/fpu/math_private.h: Include fenv_private.h.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fe_mask_env): Define as hidden.
	(__fe_nomask_env): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llrintl.c (__llrintl): Use
	__fegetround instead of fegetround.
	* sysdeps/ieee754/ldbl-128ibm/s_lrintl.c (__lrintl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_rintl.c (__rintl): Likewise.

2013-11-21  Roland McGrath  <roland@hack.frob.com>

	* malloc/malloc.c: Move #include <sys/param.h> to the top; comment why
	it's there.

	* sysdeps/generic/sys/swap.h (swapon): Add FLAGS argument to prototype.

2013-11-21  Meador Inge  <meadori@codesourcery.com>

	[BZ #11157]
	* crypt/crypt.h (encrypt): Use __glibc_block instead of __block.
	(encrypt_r): Likewise.
	* malloc/obstack.h (obstack_free): Likewise.
	* posix/unistd.h (encrypt): Likewise.

2013-11-21  Guy Martin  <gmsoft@tuxicoman.be>

	* sysdeps/generic/ldsodefs.h: Replace DL_DT_INIT_ADDRESS() and
	DL_DT_FINI_ADDRESS() macro with DL_CALL_DT_INIT() and
	DL_CALL_DT_FINI() that call the functions directly.
	* elf/dl-init.c: Use the new DL_CALL_DT_INIT() macro.
	* elf/dl-close.c: Use the new DL_CALL_DT_FINI() macro.
	* elf/dl-fini.c: Likewise.

2013-11-20  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* malloc/hooks.c (memalign_check): Add alignment rounding.
	* malloc/malloc.c (_mid_memalign): New function.
	(__libc_valloc, __libc_pvalloc, __libc_memalign, __posix_memalign):
	Implement by calling _mid_memalign.
	* manual/probes.texi (Memory Allocation Probes): Remove
	memory_valloc_retry and memory_pvalloc_retry.

2013-11-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* locale/programs/locarchive.c (open_archive): Add const
	qualifier to ARCHIVEFNAME and copy default fname to
	DEFAULT_FNAME.

	[BZ #15601]
	* libio/tst-widetext.input: Rename Oriya to Odia.
	* locale/iso-639.def: Likewise.

	* manual/probes.texi (Mathematical Function Probes): Add
	documentation for sin, cos, asin and acos probes.
	* sysdeps/ieee754/dbl-64/sincos32.c: Include stap-probe.h.
	(__sin32): Add slowasin probe.
	(__cos32): Add slowacos probe.
	(__mpsin): Add slowsin probe.
	(__mpcos): Add slowcos probe.

2013-11-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15483]
	* sysdeps/powerpc/nofpu/sim-full.c (__sim_exceptions): Change to
	thread-local __sim_exceptions_thread and global
	__sim_exceptions_global.
	(__sim_disabled_exceptions): Change to thread-local
	__sim_disabled_exceptions_thread and global
	__sim_disabled_exceptions_global.
	(__sim_round_mode): Change to thread-local __sim_round_mode_thread
	and global __sim_round_mode_global.
	(__simulate_exceptions): Use thread-local floating-point state and
	set global state from it as needed.
	* sysdeps/powerpc/nofpu/Versions (GLIBC_PRIVATE): Add
	__sim_exceptions_thread, __sim_disabled_exceptions_thread and
	__sim_round_mode_thread.
	* sysdeps/powerpc/nofpu/soft-supp.h: Include <shlib-compat.h>.
	(__sim_exceptions): Change to thread-local __sim_exceptions_thread
	and global __sim_exceptions_global.
	(__sim_disabled_exceptions): Change to thread-local
	__sim_disabled_exceptions_thread and global
	__sim_disabled_exceptions_global.
	(__sim_round_mode): Change to thread-local __sim_round_mode_thread
	and global __sim_round_mode_global.
	[SIM_GLOBAL_COMPAT] (SIM_COMPAT_SYMBOL): New macro.
	(SIM_SET_GLOBAL): Likewise.
	* sysdeps/powerpc/soft-fp/sfp-machine.h
	[!(__NO_FPRS__ && !_SOFT_FLOAT)] (FP_ROUNDMODE): Use
	__sim_round_mode_thread.
	[!(__NO_FPRS__ && !_SOFT_FLOAT)] (FP_TRAPPING_EXCEPTIONS): Use
	__sim_disabled_exceptions_thread.
	(__sim_exceptions): Change to __sim_exceptions_thread.
	(__sim_disabled_exceptions): Change to
	__sim_disabled_exceptions_thread.
	(__sim_round_mode): Change to __sim_round_mode_thread.
	* sysdeps/powerpc/nofpu/fclrexcpt.c (__feclearexcept): Use
	thread-local floating-point state and set global state from it as
	needed.
	* sysdeps/powerpc/nofpu/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/powerpc/nofpu/feenablxcpt.c: Include "soft-supp.h".
	(__sim_disabled_exceptions): Remove extern declaration.
	(feenableexcept): Use thread-local floating-point state and set
	global state from it as needed.
	* sysdeps/powerpc/nofpu/fegetenv.c (__sim_exceptions): Remove
	extern declaration.
	(__sim_disabled_exceptions): Likewise.
	(__sim_round_mode): Likewise.
	(__fegetenv): Use thread-local floating-point state.
	* sysdeps/powerpc/nofpu/fegetexcept.c (fegetexcept): Likewise.
	* sysdeps/powerpc/nofpu/fegetround.c (fegetround): Likewise.
	* sysdeps/powerpc/nofpu/fesetenv.c (__fesetenv): Use thread-local
	floating-point state and set global state from it as needed.
	* sysdeps/powerpc/nofpu/fesetround.c (fesetround): Likewise.
	* sysdeps/powerpc/nofpu/feupdateenv.c (__feupdateenv): Likewise.
	* sysdeps/powerpc/nofpu/fgetexcptflg.c (__fegetexceptflag):
	Likewise.
	* sysdeps/powerpc/nofpu/fraiseexcpt.c (__feraiseexcept): Likewise.
	* sysdeps/powerpc/nofpu/fsetexcptflg.c (__fesetexceptflag):
	Likewise.
	sysdeps/powerpc/nofpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/powerpc/nofpu/get-rounding-mode.h (get_rounding_mode):
	Use __sim_round_mode_thread.
	* math/test-fenv-tls.c: New file.
	* math/Makefile (tests): Add test-fenv-tls.
	($(objpfx)test-fenv-tls): Depend on
	$(common-objpfx)nptl/libpthread.so.

2013-11-19  Andreas Schwab  <schwab@suse.de>

	* locale/programs/locale.c (show_info): Decode wordarray elements.
	* locale/categories.def (LC_MONETARY): Add element for
	_NL_MONETARY_CRNCYSTR.
	* locale/C-monetary.c (conversion_rate): New variable.
	(_nl_C_LC_MONETARY): Use it for _NL_MONETARY_CONVERSION_RATE
	element.

2013-11-18  Chris Metcalf  <cmetcalf@tilera.com>

	* math/test-fpucw-ieee.c [!defined _FPU_IEEE] (FPU_CONTROL):
	Omit definition of FPU_CONTROL and use default if no _FPU_IEEE.

2013-11-18  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/Makefile (tst-auxv): New test.
	* elf/tst-auxv.c: New
	* elf/rtld.c (dl_main): Adjust AT_EXECFN

2013-11-18  Joseph Myers  <joseph@codesourcery.com>

	* include/libc-symbols.h (__hidden_proto): Add argument "thread".
	(hidden_proto): Caller changed.
	(hidden_tls_proto): New macro.
	(libc_hidden_tls_proto): Likewise.
	(rtld_hidden_tls_proto): Likewise.
	(libm_hidden_tls_proto): Likewise.
	(libresolv_hidden_tls_proto): Likewise.
	(librt_hidden_tls_proto): Likewise.
	(libdl_hidden_tls_proto): Likewise.
	(libnss_files_hidden_tls_proto): Likewise.
	(libnsl_hidden_tls_proto): Likewise.
	(libnss_nisplus_hidden_tls_proto): Likewise.
	(libutil_hidden_tls_proto): Likewise.

2013-11-18  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #10253]
	* elf/dl-load.c (fillin_rpath): Add linkmap parameter and expand path.
	(decompose_rpath): Defer expansion to fillin_rpath.
	(_dl_init_paths): Pass linkmap to fillin_rpath.

2013-11-18  Rajalakshmi Srinivasaraghavan  <raji@linux.vnet.ibm.com>

	* benchtests/Makefile: Add strsep.
	* benchtests/bench-strsep.c: New file: strsep benchtest.
	* benchtests/bench-strsep-ifunc.c: New file: strsep benchtest.

2013-11-18  Andreas Schwab  <schwab@suse.de>

	* locale/programs/locale.c (show_info) [case byte]: Check for
	'\377' instead of '\177'.
	* locale/C-monetary.c (not_available): Always use "\377".
	* stdlib/strfmon_l.c (__vstrfmon_l): Use -2 as marker for
	unspecified p_sign_posn and n_sign_posn.  Check for '\377' to
	detect unavailable sign_posn locale elements.
	* locale/localeconv.c (__localeconv): For grouping and
	mon_grouping handle "\177" and "\377" like no grouping.
	(INT_ELEM): New macro.  Use it to set all numeric members.
	* locale/programs/ld-monetary.c (monetary_read)
	<tok_mon_grouping>: Normalize single -1 to the empty string.
	* locale/programs/ld-numeric.c (numeric_read) <tok_grouping>:
	Likewise.

2013-11-07  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #16055]
	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Limit width
	when we match (nil).
	* stdio-common/tst-sscanf.c (struct test): Add testcase.

2013-11-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (TEST_NAN_SIGN): New macro.
	(NO_TEST_INLINE): Update value.
	(ERRNO_UNCHANGED): Likewise.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(IGNORE_RESULT): Likewise.
	(check_float_internal): Check signs of NaN results if
	TEST_NAN_SIGN used.
	(check_complex): Pass TEST_NAN_SIGN flag through to second
	check_float_internal call.
	(copysign_test_data): Add tests with quiet NaNs as second
	argument.  Use TEST_NAN_SIGN.
	(fabs_test_data): Add test of negative quiet NaN argument.  Use
	TEST_NAN_SIGN.
	(signbit_test_data): Add tests of quiet NaN argument.
	* math/gen-libm-test.pl (parse_args): Handle TEST_NAN_SIGN.

	* math/gen-libm-test.pl (show_exceptions): Take extra argument
	$ignore_result.
	(parse_args): Handle function results specified as IGNORE.
	* math/libm-test.inc (IGNORE_RESULT): New macro.
	(check_float_internal): Do not check numerical result if flag
	IGNORE_RESULT set.
	(check_complex): Pass through IGNORE_RESULT to second
	check_float_internal call.
	(check_int): Do not check numerical result if flag IGNORE_RESULT
	set.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(lrint_test_data): Add tests of infinite and NaN arguments.
	(lrint_tonearest_test_data): Likewise.
	(lrint_towardzero_test_data): Likewise.
	(lrint_downward_test_data): Likewise.
	(lrint_upward_test_data): Likewise.
	(llrint_test_data): Likewise.
	(llrint_tonearest_test_data): Likewise.
	(llrint_towardzero_test_data): Likewise.
	(llrint_downward_test_data): Likewise.
	(llrint_upward_test_data): Likewise.
	(lround_test_data): Likewise.
	(llround_test_data): Likewise.

	* math/libm-test.inc (NO_TEST_INLINE): New macro.
	(ERRNO_UNCHANGED): Update value.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(NO_TEST_INLINE_FLOAT): New macro.
	(NO_TEST_INLINE_DOUBLE): Likewise.
	(enable_test): New function.
	(RUN_TEST_f_f): Check enable_test before running test.
	(RUN_TEST_2_f): Likewise.
	(RUN_TEST_fff_f): Likewise.
	(RUN_TEST_c_f): Likewise.
	(RUN_TEST_f_f1): Likewise.
	(RUN_TEST_fF_f1): Likewise.
	(RUN_TEST_fI_f1): Likewise.
	(RUN_TEST_ffI_f1): Likewise.
	(RUN_TEST_c_c): Likewise.
	(RUN_TEST_cc_c): Likewise.
	(RUN_TEST_f_i): Likewise.
	(RUN_TEST_f_i_tg): Likewise.
	(RUN_TEST_ff_i_tg): Likewise.
	(RUN_TEST_f_b): Likewise.
	(RUN_TEST_f_b_tg): Likewise.
	(RUN_TEST_f_l): Likewise.
	(RUN_TEST_f_L): Likewise.
	(RUN_TEST_fFF_11): Likewise.
	(asinh_test_data): Use NO_TEST_INLINE instead of [!TEST_INLINE]
	conditionals.
	(cosh_test_data): Likewise.
	(exp_test_data): Likewise.
	(expm1_test_data): Likewise.
	(hypot_test_data): Likewise.
	(pow_test_data): Likewise.
	(sinh_test_data): Likewise.
	(tanh_test_data): Likewise.
	* math/gen-libm-test.pl (parse_args): Allow NO_TEST_INLINE as
	flags argument.

	* libm-test.inc (acos_test_data): Disallow inexact exceptions for
	tests with quiet NaN input and output.
	(acosh_test_data): Likewise.
	(asin_test_data): Likewise.
	(asinh_test_data): Likewise.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(atan2_test_data): Likewise.
	(cbrt_test_data): Likewise.
	(cos_test_data): Likewise.
	(cosh_test_data): Likewise.
	(erf_test_data): Likewise.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	(hypot_test_data): Likewise.
	(j0_test_data): Likewise.
	(j1_test_data): Likewise.
	(jn_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(pow_test_data): Likewise.
	(scalb_test_data): Likewise.
	(sin_test_data): Likewise.
	(sincos_test_data): Likewise.
	(sinh_test_data): Likewise.
	(tan_test_data): Likewise.
	(tanh_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.

	[BZ #16167]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Check for first
	argument being NaN and avoid computations with second argument in
	that case.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Likewise.
	* sysdeps/i386/fpu/e_powl.S (__ieee754_powl): Likewise.
	* sysdeps/x86_64/fpu/e_powl.S (__ieee754_powl): Likewise.

2013-11-15  Arun Kumar Pyasi <arun@chitwanix.com>

	* locale/iso-639.def: Add Chitwani Tharu (the).

2013-11-14  Andreas Schwab  <schwab@suse.de>

	* locale/C-address.c (_nl_C_LC_ADDRESS): Set country_num to zero
	word instead of empty string.

2013-11-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c
	(__fe_nomask_env): Fir compat symbol to be remove for GLIBC_2.19.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c
	(__fe_nomask_env): Likewise.

2013-11-13  Steve Ellcey  <sellcey@mips.com>

	* benchtests/bench-timing.h: Include time.h.

2013-11-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #15997]
	* sysdeps/unix/sysv/linux/configure.ac (arch_minimum_kernel): Set
	to 3.4.0 for x32.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2013-11-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16151]
	* stdlib/strtod_l.c (round_and_return): Do not consider
	retval[RETURN_LIBM_SIZE - 1] when determining more_bits for an
	exponent one less than half the least subnormal exponent.
	* stdlib/test-strtod-round-data: Add more tests.
	* stdlib/tst-strtod-round.c (tests): Regenerated.

2013-11-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #14143]
	* sysdeps/powerpc/bits/fenv.h (__fe_nomask_env): Remove declaration.
	(__fe_mask_env): Likewise.
	* sysdeps/powerpc/fpu/fenv_libc.h (__fe_nomask_env): Remove
	libm_hidden_proto and add function prototype.
	(__fe_mask_env): Add function prototype.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c
	(__fe_nomask_env): Add compat symbol for GLIBC_2.1.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_mask.c
	(__fe_mask_env): Remove compiler warnings regarding ununsed variables.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c
	(__fe_nomask_env): Add compat symbol for GLIBC_2.3.

2013-11-13  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/dl-lookup.c (_dl_lookup_symbol_x): If UNDEF_MAP is false
	set reference_name to "" to avoid passing NULL to DSO_FILENAME.

2013-11-13  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/tlsdeschtab.h (_dl_make_tlsdesc_dynamic): Handle failure
	of htab_find_slot().

2013-11-11  David S. Miller  <davem@davemloft.net>

	[BZ #16150]
	* sysdeps/sparc/sparc64/multiarch/add_n.S: Resolve to the correct generic
	symbol in the non-vis3 case in static builds.
	* sysdeps/sparc/sparc64/multiarch/addmul_1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/mul_1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/sub_n.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/submul_1.S: Likewise.

2013-11-11  Jan Kratochvil  <jan.kratochvil@redhat.com>

	[BZ #387]
	* elf/dl-object.c (_dl_new_object): Initialize L_NAME from NEWNAME if
	it is empty.

2013-11-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* benchtests/Makefile: Add bench-strtod.
	* benchtests/bench-strtod.c: New file: strtod benchtest

2013-11-11  Andreas Schwab  <schwab@suse.de>

	[BZ #16153]
	* nscd/nscd_getserv_r.c (__nscd_getservbyport_r): Don't include
	terminating NUL in key length.

2013-11-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h (VDSO_IFUNC_RET):
	Add artificial ODP entry for vDSO symbol for PPC64.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c: Adjust includes.
	* sysdeps/unix/sysv/linux/powerpc/time.c: Likewise.

2013-11-07  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15374]
	* nss/getent.c (services_keys): Recognize services starting with digit.

2013-11-06  David S. Miller  <davem@davemloft.net>

	[BZ #15985]
	* sysdeps/sparc/sparc32/fpu/s_fdim.S (__fdim): Do not use fnegd
	on pre-v9 cpus, use a fnegs+fmovs sequence instead.

2013-11-06  Will Newton  <will.newton@linaro.org>

	* manual/memory.texi (Malloc Examples): Remove register
	keyword from examples.

2013-11-04  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Correct Walaita (wal) and add Unami Delaware (unm).

2013-11-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6981]
	* include/stdc-predef.h [__GCC_IEC_559] (__STDC_IEC_559__): Define
	depending on [__GCC_IEC_559 > 0].
	[__GCC_IEC_559_COMPLEX] (__STDC_IEC_559_COMPLEX__): Define
	depending on [__GCC_IEC_559_COMPLEX > 0].

2013-11-03  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Add Quechua, Southern (quz) and Silesian (szl)
	to iso-639.def.

2013-11-03  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* elf/rtld.c: Remove unused NONTLS_INIT_TP.

2013-11-01  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #16112]
	* malloc/malloc (malloc_info): Do not handle first bin as
	special case.

2013-11-01  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Add Central Nahuatl (nhn).

2013-11-01  Bruno Haible  <bruno@clisp.org>

	[BZ #7003]
	* manual/math.texi (BSD Random): Specify range upper bound as
	in POSIX.

2013-10-31  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Add Meadow Mari (mhr).

2013-10-31  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #14752], [BZ #15763]
	* sysdeps/unix/sysv/linux/shm_open.c (shm_open, shm_unlink):
	Validate name.
	* rt/tst_shm.c: Add test for escaping directory.

2013-10-31  Andreas Schwab  <schwab@suse.de>

	[BZ #15917]
	* stdio-common/vfscanf.c (_IO_vfwscanf): Handle leading '0' not
	followed by 'x' as part of digit sequence.
	* stdio-common/tst-sscanf.c (double_tests2): New tests.

2013-10-31  Marc-Antoine Perennou <Marc-Antoine@Perennou.com>

	[BZ #16037]
	* configure.ac: allow GNU Make 4.0 and greater.
	* configure: Regenerated.

2013-10-30  Will Newton  <will.newton@linaro.org>

	[BZ #16038]
	* malloc/hooks.c (memalign_check): Limit alignment to the
	maximum representable power of two.
	* malloc/malloc.c (__libc_memalign): Likewise.
	* malloc/tst-memalign.c (do_test): Add test for very
	large alignment values.
	* malloc/tst-posix_memalign.c (do_test): Likewise.

2013-10-30  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #11087]
	* malloc/malloc.c (sysmalloc): Compute statistics atomically.
	(munmap_chunk): Likewise.
	(mremap_chunk): Likewise.

2013-10-30  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15799]
	* stdlib/div.c (div): Remove obsolete code.
	* stdlib/ldiv.c (ldiv): Likewise.
	* stdlib/lldiv.c (lldiv): Likewise.

2013-10-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16071]
	* nss/nss_files/files-XXX.c (get_contents_ret): New
	enumerator.
	(get_contents): New function.
	(internal_getent): Use it.  Expand size of LINEBUFLEN.

2013-10-30  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Moved to ...
	* configure.ac: ... here. Change reference to configure.in
	to configure.ac.
	* sysdeps/arm/preconfigure.ac: ... here.
	configure.in to configure.ac.
	* sysdeps/gnu/configure.in: Moved to ...
	* sysdeps/gnu/configure.ac: ... here.
	* sysdeps/i386/configure.in: Moved to ...
	* sysdeps/i386/configure.ac: ... here.
	* sysdeps/ieee754/ldbl-opt/configure.in: Moved to ...
	* sysdeps/ieee754/ldbl-opt/configure.ac: ... here.
	* sysdeps/mach/configure.in: Moved to ...
	* sysdeps/mach/configure.ac: ... here.
	* sysdeps/mach/hurd/configure.in: Moved to ...
	* sysdeps/mach/hurd/configure.ac: ... here.
	* sysdeps/powerpc/configure.in: Moved to ...
	* sysdeps/powerpc/configure.ac: ... here.
	* sysdeps/powerpc/powerpc32/configure.in: Moved to ...
	* sysdeps/powerpc/powerpc32/configure.ac: ... here.
	* sysdeps/powerpc/powerpc64/configure.in: Moved to ...
	* sysdeps/powerpc/powerpc64/configure.ac: ... here.
	* sysdeps/s390/s390-32/configure.in: Moved to ...
	* sysdeps/s390/s390-32/configure.ac: ... here.
	* sysdeps/s390/s390-64/configure.in: Moved to ...
	* sysdeps/s390/s390-64/configure.ac: ... here.
	* sysdeps/sh/configure.in: Moved to ...
	* sysdeps/sh/configure.ac: ... here.
	* sysdeps/sparc/configure.in: Moved to ...
	* sysdeps/sparc/configure.ac: ... here.
	* sysdeps/unix/sysv/linux/configure.in: Moved to ...
	* sysdeps/unix/sysv/linux/configure.ac: ... here.
	* sysdeps/unix/sysv/linux/powerpc/configure.in: Moved to ...
	* sysdeps/unix/sysv/linux/powerpc/configure.ac: ... here.
	* sysdeps/x86_64/configure.in: Moved to ...
	* sysdeps/x86_64/configure.ac: ... here.
	* sysdeps/x86_64/preconfigure.in: Moved to ...
	* sysdeps/x86_64/preconfigure.ac: ... here.
	* aclocal.m4: Change reference to configure.in to configure.ac.
	* config.h.in: Likewise.
	* manual/install.texi: Likewise.
	* manual/maint.texi: Likewise.
	* Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* nscd/Makefile: Likewise.
	* Makeconfig: Change reference to configure.in and
	preconfigure.in to configure.ac and preconfigure.ac
	respectively.
	* INSTALL: Regenerated.
	* configure: Likewise.
	* sysdeps/gnu/configure: Likewise.
	* sysdeps/i386/configure: Likewise.
	* sysdeps/ieee754/ldbl-opt/configure: Likewise.
	* sysdeps/mach/configure: Likewise.
	* sysdeps/mach/hurd/configure: Likewise.
	* sysdeps/powerpc/configure: Likewise.
	* sysdeps/powerpc/powerpc32/configure: Likewise.
	* sysdeps/powerpc/powerpc64/configure: Likewise.
	* sysdeps/s390/s390-32/configure: Likewise.
	* sysdeps/s390/s390-64/configure: Likewise.
	* sysdeps/sh/configure: Likewise.
	* sysdeps/sparc/configure: Likewise.
	* sysdeps/unix/sysv/linux/configure: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/configure: Likewise.
	* sysdeps/x86_64/configure: Likewise.
	* sysdeps/x86_64/preconfigure: Likewise.

2013-10-29  Andreas Schwab  <schwab@suse.de>

	* stdio-common/Makefile (tst-swscanf-ENV): Define.

2013-10-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/pow-inputs: Add new inputs.

	* benchtests/exp-inputs: Add new inputs.

	* sysdeps/ieee754/dbl-64/sincos32.c (__sin32): Consolidate
	conditional check for return value.
	(__cos32): Likewise.

2013-10-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/strcpy.S (strcpy): Add word load/store
	to provide a boost for large inputs with word alignment.
	* sysdeps/powerpc/powerpc64/stpcpy.S (__stpcpy): Rewrite
	implementation based on optimized PPC64 strcpy.
	* sysdeps/powerpc/powerpc64/power7/strcpy.S: New file: optimized
	strcpy for PPC64/POWER7 based on both doubleword and word load/store.
	* sysdeps/powerpc/powerpc64/power7/stpcpy.S: New file: optimized
	stpcpy for PPC64/POWER7 based on PPC64/POWER7 strcpy.

2013-10-25   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #2801]
	* manual/socket.texi (Host Names): Fix gethostbyname_r example.

2013-10-25   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #14876]
	* time/strptime_l.c (__strptime_internal): 14876 Read timezone entry.
	* time/tst-strptime.c (day_tests): Add testcase.

2013-10-25   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #14029]
	* manual/pattern.texi: Acknowledge that fnmatch can fail.

2013-10-25  Fabrice Bauzac  <fbauzac@debian71.nce.amadeus.net>

	[BZ #16074]
	* manual/llio.texi (Memory-mapped I/O): Indicate that mmap returns
	MAP_FAILED on error.

2013-10-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #16072]
	* sysdeps/posix/getaddrinfo.c (gethosts): Allocate tmpbuf on
	heap for large requests.

2013-10-25  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #9954]
	* sysdeps/posix/getaddrinfo.c (rfc3484_sort): do not assign native
	result if the result has no associated interface.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): correctly detect
	interface for all 127.X.Y.Z addresses.

2013-10-24  Chris Leonard  <cjl@sugarlabs.org>

	* locale/iso-639.def: Add Ligurian (lij)

2013-10-21  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15825]
	* sunrpc/rpc_main.c: Document rpcgen -5.

2013-10-19  Michael Stahl  <mstahl@redhat.com>

	* elf/rtld.c (do_preload): Print the reason why preloading failed.

2013-10-19  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #10278]
	* posix/glob.c: Match only directories when trailing slash is present.
	* posix/tst-gnuglob.c (my_opendir): Do not open files.
	(main): Add testcase.

2013-10-19  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15670]
	* time/tzfile.c (__tzfile_read): Replace alloca with malloc.

2013-10-18  Carlos O'Donell  <carlos@redhat.com>

	* manual/crypt.texi (Cryptographic Functions): Using SunRPC and
	AUTH_DES will prevent FIPS 140-2 compliance. Add vindex for
	AUTH_DES and cindex for FIPS 140-2.
	(DES Encryption): Add cindex FIPS 46-3.

	* locale/locarchive.h (struct locarhandle): Add fname.
	* locale/programs/localedef.c (main): Pass ARGV[remaining]
	if an optional argument was specified to --list-archive,
	otherwise NULL.
	* locale/programs/locarchive.c (show_archive_content): Take new
	argument fname and pass it via ah.fname to open_archive.
	* locale/programs/localedef.h: Update decl.
	(open_archive): If AH->fname is non-null, open that file
	rather than the default file name, and don't ignore ENOENT.
	(create_archive): Set AH.fname to NULL.
	(delete_locales_from_archive): Likewise.
	(add_locales_to_archive): Likewise.
	* locale/programs/locfile.c (write_all_categories): Likewise.

2013-10-18  Joseph Myers  <joseph@codesourcery.com>
	    Aldy Hernandez  <aldyh@redhat.com>

	* sysdeps/powerpc/powerpc32/e500/nofpu/Makefile: New file.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fclrexcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fe_note_change.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fedisblxcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feenablxcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetenv.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetexcept.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fegetround.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feholdexcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_const.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fenv_libc.h: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetenv.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fesetround.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/feupdateenv.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fexcepts_from_prctl.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fexcepts_from_spe.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fexcepts_to_prctl.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fexcepts_to_spe.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fgetexcptflg.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fraiseexcept-soft.c:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fraiseexcpt.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/fsetexcptflg.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/ftestexcept.c: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/get-rounding-mode.h:
	Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/s_fabsf.S: Likewise.
	* sysdeps/powerpc/powerpc32/e500/nofpu/spe-raise.c: Likewise.
	* sysdeps/powerpc/preconfigure: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/e500/nofpu/Implies:
	Likewise.
	* sysdeps/powerpc/nofpu/soft-supp.h [__NO_FPRS__ && !_SOFT_FLOAT]:
	Replace contents of file by #include of <fenv_libc.h>.
	* sysdeps/powerpc/soft-fp/sfp-machine.h
	[__NO_FPRS__ && !_SOFT_FLOAT]: Include <fenv_libc.h>, <sysdep.h>
	and <sys/prctl.h>.
	[__NO_FPRS__ && !_SOFT_FLOAT] (__feraiseexcept_soft): Declare.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_INEXACT): Define macro.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_INVALID): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_DIVZERO): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_UNDERFLOW): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_EX_OVERFLOW): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FP_DECL_EX): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_INIT_ROUNDMODE): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_INIT_EXCEPTIONS): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_HANDLE_EXCEPTIONS): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_ROUNDMODE): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (FP_TRAPPING_EXCEPTIONS): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu/nptl/localplt.data:
	Allow copysignl PLT reference to be missing.

2013-10-18  Richard Sandiford  <richard@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	[BZ #15948]
	* locale/programs/ld-collate.c (new_element): Handle <U0000> as a
	single character.
	(add_to_tablewc): Assert sequence of wide characters is nonempty.

2013-10-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* elf/tst-tls-dlinfo.c: Don't include tls.h.
	* elf/tst-tls1.c: Likewise.
	* elf/tst-tls10.h: Likewise.
	* elf/tst-tls14.c: Likewise.
	* elf/tst-tls2.c: Likewise.
	* elf/tst-tls3.c: Likewise.
	* elf/tst-tls4.c: Likewise.
	* elf/tst-tls5.c: Likewise.
	* elf/tst-tls6.c: Likewise.
	* elf/tst-tls7.c: Likewise.
	* elf/tst-tls8.c: Likewise.
	* elf/tst-tls9.c: Likewise.
	* elf/tst-tlsmod1.c: Likewise.
	* elf/tst-tlsmod13.c: Likewise.
	* elf/tst-tlsmod13a.c: Likewise.
	* elf/tst-tlsmod14a.c: Likewise.
	* elf/tst-tlsmod16a.c: Likewise.
	* elf/tst-tlsmod16b.c: Likewise.
	* elf/tst-tlsmod2.c: Likewise.
	* elf/tst-tlsmod3.c: Likewise.
	* elf/tst-tlsmod4.c: Likewise.
	* elf/tst-tlsmod5.c: Likewise.
	* elf/tst-tlsmod6.c: Likewise.

2013-10-18  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #12486]
	* malloc/malloc.c: remove checks for statistics.

2013-10-17  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15277]
	* inet/inet_net.c (inet_network): Detect additional invalid strings.
	* inet/tst-network.c: Add testcase.

2013-10-17  Andreas Schwab  <schwab@suse.de>

	[BZ #15218]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't use gethostbyaddr
	to determine canonical name.

2013-10-17  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/ieee754/dbl-64/dbl2mpn.c: Fix formatting.
	* sysdeps/ieee754/dbl-64/dla.h: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_ilogb.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/MathLib.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpa-arch.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpn2dbl.c: Likewise.
	* sysdeps/ieee754/dbl-64/mptan.c: Likewise.
	* sysdeps/ieee754/dbl-64/mydefs.h: Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_cbrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_copysign.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fabs.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf_ns.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_llround.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_lrint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbn.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tanh.c: Likewise.

2013-10-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16041]
	* soft-fp/op-common.h (FP_EXTEND): When input is a signaling NaN,
	make result into a quiet NaN.

2013-10-16  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/adddf3.c: Fix horizontal whitespace.
	* soft-fp/addsf3.c: Likewise.
	* soft-fp/addtf3.c: Likewise.
	* soft-fp/divdf3.c: Likewise.
	* soft-fp/divsf3.c: Likewise.
	* soft-fp/divtf3.c: Likewise.
	* soft-fp/double.h: Likewise.
	* soft-fp/eqdf2.c: Likewise.
	* soft-fp/eqsf2.c: Likewise.
	* soft-fp/eqtf2.c: Likewise.
	* soft-fp/extenddftf2.c: Likewise.
	* soft-fp/extended.h: Likewise.
	* soft-fp/extendsfdf2.c: Likewise.
	* soft-fp/extendsftf2.c: Likewise.
	* soft-fp/extendxftf2.c: Likewise.
	* soft-fp/fixdfdi.c: Likewise.
	* soft-fp/fixdfsi.c: Likewise.
	* soft-fp/fixdfti.c: Likewise.
	* soft-fp/fixsfdi.c: Likewise.
	* soft-fp/fixsfsi.c: Likewise.
	* soft-fp/fixsfti.c: Likewise.
	* soft-fp/fixtfdi.c: Likewise.
	* soft-fp/fixtfsi.c: Likewise.
	* soft-fp/fixtfti.c: Likewise.
	* soft-fp/fixunsdfdi.c: Likewise.
	* soft-fp/fixunsdfsi.c: Likewise.
	* soft-fp/fixunsdfti.c: Likewise.
	* soft-fp/fixunssfdi.c: Likewise.
	* soft-fp/fixunssfsi.c: Likewise.
	* soft-fp/fixunssfti.c: Likewise.
	* soft-fp/fixunstfdi.c: Likewise.
	* soft-fp/fixunstfsi.c: Likewise.
	* soft-fp/fixunstfti.c: Likewise.
	* soft-fp/floatdidf.c: Likewise.
	* soft-fp/floatdisf.c: Likewise.
	* soft-fp/floatditf.c: Likewise.
	* soft-fp/floatsidf.c: Likewise.
	* soft-fp/floatsisf.c: Likewise.
	* soft-fp/floatsitf.c: Likewise.
	* soft-fp/floattidf.c: Likewise.
	* soft-fp/floattisf.c: Likewise.
	* soft-fp/floattitf.c: Likewise.
	* soft-fp/floatundidf.c: Likewise.
	* soft-fp/floatundisf.c: Likewise.
	* soft-fp/floatunditf.c: Likewise.
	* soft-fp/floatunsidf.c: Likewise.
	* soft-fp/floatunsisf.c: Likewise.
	* soft-fp/floatunsitf.c: Likewise.
	* soft-fp/floatuntidf.c: Likewise.
	* soft-fp/floatuntisf.c: Likewise.
	* soft-fp/floatuntitf.c: Likewise.
	* soft-fp/fmadf4.c: Likewise.
	* soft-fp/fmasf4.c: Likewise.
	* soft-fp/fmatf4.c: Likewise.
	* soft-fp/gedf2.c: Likewise.
	* soft-fp/gesf2.c: Likewise.
	* soft-fp/getf2.c: Likewise.
	* soft-fp/ledf2.c: Likewise.
	* soft-fp/lesf2.c: Likewise.
	* soft-fp/letf2.c: Likewise.
	* soft-fp/muldf3.c: Likewise.
	* soft-fp/mulsf3.c: Likewise.
	* soft-fp/multf3.c: Likewise.
	* soft-fp/negdf2.c: Likewise.
	* soft-fp/negsf2.c: Likewise.
	* soft-fp/negtf2.c: Likewise.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-8.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* soft-fp/quad.h: Likewise.
	* soft-fp/single.h: Likewise.
	* soft-fp/soft-fp.h: Likewise.
	* soft-fp/sqrtdf2.c: Likewise.
	* soft-fp/sqrtsf2.c: Likewise.
	* soft-fp/sqrttf2.c: Likewise.
	* soft-fp/subdf3.c: Likewise.
	* soft-fp/subsf3.c: Likewise.
	* soft-fp/subtf3.c: Likewise.
	* soft-fp/truncdfsf2.c: Likewise.
	* soft-fp/trunctfdf2.c: Likewise.
	* soft-fp/trunctfsf2.c: Likewise.
	* soft-fp/trunctfxf2.c: Likewise.
	* soft-fp/unorddf2.c: Likewise.
	* soft-fp/unordsf2.c: Likewise.
	* soft-fp/unordtf2.c: Likewise.

2013-10-15  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/op-2.h (_FP_DIV_MEAT_2_gmp): Remove macro.
	* soft-fp/soft-fp.h (FP_UNSET_EXCEPTION): Likewise.

2013-10-15   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* elf/dl-libc.c: Clear initfini list after freeing.

2013-10-14  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/adddf3.c: Fix vertical whitespace and indentation.
	* soft-fp/addsf3.c: Likewise.
	* soft-fp/addtf3.c: Likewise.
	* soft-fp/divdf3.c: Likewise.
	* soft-fp/divsf3.c: Likewise.
	* soft-fp/divtf3.c: Likewise.
	* soft-fp/double.h: Likewise.
	* soft-fp/eqdf2.c: Likewise.
	* soft-fp/eqsf2.c: Likewise.
	* soft-fp/eqtf2.c: Likewise.
	* soft-fp/extenddftf2.c: Likewise.
	* soft-fp/extended.h: Likewise.
	* soft-fp/extendsfdf2.c: Likewise.
	* soft-fp/extendsftf2.c: Likewise.
	* soft-fp/extendxftf2.c: Likewise.
	* soft-fp/fixdfdi.c: Likewise.
	* soft-fp/fixdfsi.c: Likewise.
	* soft-fp/fixdfti.c: Likewise.
	* soft-fp/fixsfdi.c: Likewise.
	* soft-fp/fixsfsi.c: Likewise.
	* soft-fp/fixsfti.c: Likewise.
	* soft-fp/fixtfdi.c: Likewise.
	* soft-fp/fixtfsi.c: Likewise.
	* soft-fp/fixtfti.c: Likewise.
	* soft-fp/fixunsdfdi.c: Likewise.
	* soft-fp/fixunsdfsi.c: Likewise.
	* soft-fp/fixunsdfti.c: Likewise.
	* soft-fp/fixunssfdi.c: Likewise.
	* soft-fp/fixunssfsi.c: Likewise.
	* soft-fp/fixunssfti.c: Likewise.
	* soft-fp/fixunstfdi.c: Likewise.
	* soft-fp/fixunstfsi.c: Likewise.
	* soft-fp/fixunstfti.c: Likewise.
	* soft-fp/floatdidf.c: Likewise.
	* soft-fp/floatdisf.c: Likewise.
	* soft-fp/floatditf.c: Likewise.
	* soft-fp/floatsidf.c: Likewise.
	* soft-fp/floatsisf.c: Likewise.
	* soft-fp/floatsitf.c: Likewise.
	* soft-fp/floattidf.c: Likewise.
	* soft-fp/floattisf.c: Likewise.
	* soft-fp/floattitf.c: Likewise.
	* soft-fp/floatundidf.c: Likewise.
	* soft-fp/floatundisf.c: Likewise.
	* soft-fp/floatunsidf.c: Likewise.
	* soft-fp/floatunsisf.c: Likewise.
	* soft-fp/floatuntidf.c: Likewise.
	* soft-fp/floatuntisf.c: Likewise.
	* soft-fp/floatuntitf.c: Likewise.
	* soft-fp/fmadf4.c: Likewise.
	* soft-fp/fmasf4.c: Likewise.
	* soft-fp/fmatf4.c: Likewise.
	* soft-fp/gedf2.c: Likewise.
	* soft-fp/gesf2.c: Likewise.
	* soft-fp/getf2.c: Likewise.
	* soft-fp/ledf2.c: Likewise.
	* soft-fp/lesf2.c: Likewise.
	* soft-fp/letf2.c: Likewise.
	* soft-fp/muldf3.c: Likewise.
	* soft-fp/mulsf3.c: Likewise.
	* soft-fp/multf3.c: Likewise.
	* soft-fp/negdf2.c: Likewise.
	* soft-fp/negsf2.c: Likewise.
	* soft-fp/negtf2.c: Likewise.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-8.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* soft-fp/quad.h: Likewise.
	* soft-fp/single.h: Likewise.
	* soft-fp/soft-fp.h: Likewise.
	* soft-fp/sqrtdf2.c: Likewise.
	* soft-fp/sqrtsf2.c: Likewise.
	* soft-fp/sqrttf2.c: Likewise.
	* soft-fp/subdf3.c: Likewise.
	* soft-fp/subsf3.c: Likewise.
	* soft-fp/subtf3.c: Likewise.
	* soft-fp/truncdfsf2.c: Likewise.
	* soft-fp/trunctfdf2.c: Likewise.
	* soft-fp/trunctfsf2.c: Likewise.
	* soft-fp/trunctfxf2.c: Likewise.
	* soft-fp/unorddf2.c: Likewise.
	* soft-fp/unordsf2.c: Likewise.
	* soft-fp/unordtf2.c: Likewise.

2013-10-14   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15672]
	* misc/error.c (error_tail): Fix possible buffer overflow.

2013-10-14  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #13028]
	* res_send.c(__libc_res_nsend): Correctly copy the nameserver
	address.

2013-10-14  P. J. McDermott  <pj@pehjota.net>

	[BZ #832]
	* elf/ldd.bash.in (try_trace): New function.  Delete previous code
	testing pipefail option.

2013-10-12  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/double.h: Indent preprocessor directives inside #if.
	* soft-fp/extended.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* soft-fp/quad.h: Likewise.
	* soft-fp/single.h: Likewise.
	* soft-fp/soft-fp.h: Likewise.

2013-10-12   Yuri Chornoivan <yurchor@ukr.net>

	* iconv/iconv_prog.c: Fix typos.
	* stdio-common/psiginfo-data.h: Likewise.

2013-10-12   Reuben Thomas <rrt@sc3d.org>

	[BZ #15764]
	* locale/setlocale.c: Fix typo.

2013-10-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #16036]
	* soft-fp/unorddf2.c (__unorddf2): Raise "invalid" exception for
	signaling NaN arguments.
	* soft-fp/unordsf2.c (__unordsf2): Likewise.
	* soft-fp/unordtf2.c (__unordtf2): Likewise.

	[BZ #14910]
	* soft-fp/gedf2.c (__gedf2): Raise "invalid" exception for all
	unordered operands.
	* soft-fp/gesf2.c (__gesf2): Likewise.
	* soft-fp/getf2.c (__getf2): Likewise.
	* soft-fp/ledf2.c (__ledf2): Likewise.
	* soft-fp/lesf2.c (__lesf2): Likewise.
	* soft-fp/letf2.c (__letf2): Likewise.

	* soft-fp/eqdf2.c (__eqdf2): Use FP_INIT_EXCEPTIONS.
	* soft-fp/eqsf2.c (__eqsf2): Likewise.
	* soft-fp/eqtf2.c (__eqtf2): Likewise.
	* soft-fp/fixdfdi.c (__fixdfdi): Likewise.
	* soft-fp/fixdfsi.c (__fixdfsi): Likewise.
	* soft-fp/fixdfti.c (__fixdfti): Likewise.
	* soft-fp/fixsfdi.c (__fixsfdi): Likewise.
	* soft-fp/fixsfsi.c (__fixsfsi): Likewise.
	* soft-fp/fixsfti.c (__fixsfti): Likewise.
	* soft-fp/fixtfdi.c (__fixtfdi): Likewise.
	* soft-fp/fixtfsi.c (__fixtfsi): Likewise.
	* soft-fp/fixtfti.c (__fixtfti): Likewise.
	* soft-fp/fixunsdfdi.c (__fixunsdfdi): Likewise.
	* soft-fp/fixunsdfsi.c (__fixunsdfsi): Likewise.
	* soft-fp/fixunsdfti.c (__fixunsdfti): Likewise.
	* soft-fp/fixunssfdi.c (__fixunssfdi): Likewise.
	* soft-fp/fixunssfsi.c (__fixunssfsi): Likewise.
	* soft-fp/fixunssfti.c (__fixunssfti): Likewise.
	* soft-fp/fixunstfdi.c (__fixunstfdi): Likewise.
	* soft-fp/fixunstfsi.c (__fixunstfsi): Likewise.
	* soft-fp/fixunstfti.c (__fixunstfti): Likewise.
	* soft-fp/floatdidf.c (__floatdidf): Use FP_INIT_ROUNDMODE.
	* soft-fp/floatdisf.c (__floatdisf): Likewise.
	* soft-fp/floatsisf.c (__floatsisf): Likewise.
	* soft-fp/floattidf.c (__floattidf): Likewise.
	* soft-fp/floattisf.c (__floattisf): Likewise.
	* soft-fp/floattitf.c (__floattitf): Likewise.
	* soft-fp/floatundidf.c (__floatundidf): Likewise.
	* soft-fp/floatundisf.c (__floatundisf): Likewise.
	* soft-fp/floatunsisf.c (__floatunsisf): Likewise.
	* soft-fp/floatuntidf.c (__floatuntidf): Likewise.
	* soft-fp/floatuntisf.c (__floatuntisf): Likewise.
	* soft-fp/floatuntitf.c (__floatuntitf): Likewise.
	* soft-fp/gedf2.c (__gedf2): Use FP_INIT_EXCEPTIONS.
	* soft-fp/gesf2.c (__gesf2): Likewise.
	* soft-fp/getf2.c (__getf2): Likewise.
	* soft-fp/ledf2.c (__ledf2): Likewise.
	* soft-fp/lesf2.c (__lesf2): Likewise.
	* soft-fp/letf2.c (__letf2): Likewise.

	* soft-fp/soft-fp.h [FP_NO_EXCEPTIONS] (FP_SET_EXCEPTION):
	Undefine and redefine.
	[FP_NO_EXCEPTIONS] (FP_CUR_EXCEPTIONS): Likewise.
	[FP_NO_EXCEPTIONS] (FP_TRAPPING_EXCEPTIONS): Likewise.
	[FP_NO_EXCEPTIONS] (FP_ROUNDMODE): Likewise.
	* soft-fp/floatditf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatditf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatsidf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatsidf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatsitf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatsitf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatunditf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatunditf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatunsidf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatunsidf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.
	* soft-fp/floatunsitf.c (FP_NO_EXCEPTIONS): Define macro.
	(__floatunsitf): Don't use FP_DECL_EX or FP_HANDLE_EXCEPTIONS.

	[BZ #16032]
	* soft-fp/op-2.h (_FP_DIV_MEAT_2_udiv): Shift numerator right
	without decrementing exponent if mantissa >= that for the
	denominator, not >.
	(_FP_DIV_MEAT_2_gmp): Test numerator mantissa >= that for the
	denominator, not >.  Decrement exponent in < case instead of
	incrementing in >= case.
	* soft-fp/op-4.h (_FP_DIV_MEAT_4_udiv): Shift numerator right
	without decrementing exponent if mantissa >= that for the
	denominator, not >.

	* soft-fp/op-common.h (_FP_TO_INT): Reverse test of sign for
	computing saturated result for unsigned overflow.

2013-10-11  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Jeff Law  <law@redhat.com>

	* sysdeps/ieee754/dbl-64/e_atan2.c: Include stap-probe.h.
	(atan2Mp): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/e_log.c: include stap-probe.h.
	(__ieee754_log): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/s_atan.c: Include stap-probe.h.
	(atanMp): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/s_tan.c: Include stap-probe.h.
	(tanMp): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/slowexp.c: Include stap-probe.h.
	(__slowexp): Add systemtap probe marker.
	* sysdeps/ieee754/dbl-64/slowpow.c: Include stap-probe.h.
	(__slowpow): Add systemtap probe marker.
	* manual/probes.texi: Document probes.

2013-10-11  Eric Biggers  <ebiggers3@gmail.com>

	[BZ #15362]
	* libio/fileops.c (_IO_new_file_write): Return count of bytes
	written.
	(_IO_new_file_xsputn): Don't return EOF if nothing has been
	written.
	* libio/iofwrite.c (_IO_fwrite): Return count if bytes were
	written to buffer but not flushed.
	* libio/iofwrite_u.c:  Likewise.
	* libio/iopadn.c:  Return bytes returned even if EOF was
	encountered.
	* libio/iowpadn.c:  Likewise.
	* stdio-common/vfprintf.c [COMPILE_WPRINTF] (PAD): Return error
	if _IO_padn does not write the whole buffer.
	[!COMPILE_WPRINTF] (PAD): Likewise.

2013-10-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/posix/dirstream.h (struct __dirstream): Fix alignment of
	directory block.

2013-10-10  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/extendxftf2.c: Use copyright year range.  Use URL
	instead of FSF address.
	* soft-fp/fixdfti.c: Likewise.
	* soft-fp/fixsfti.c: Likewise.
	* soft-fp/fixtfti.c: Likewise.
	* soft-fp/fixunsdfti.c: Likewise.
	* soft-fp/fixunssfti.c: Likewise.
	* soft-fp/fixunstfti.c: Likewise.
	* soft-fp/floattidf.c: Likewise.
	* soft-fp/floattisf.c: Likewise.
	* soft-fp/floattitf.c: Likewise.
	* soft-fp/floatuntidf.c: Likewise.
	* soft-fp/floatuntisf.c: Likewise.
	* soft-fp/floatuntitf.c: Likewise.
	* soft-fp/trunctfxf2.c: Likewise.

	* soft-fp/extendxftf2.c: New file.  Copied from libgcc.
	* soft-fp/fixdfti.c: Likewise.
	* soft-fp/fixsfti.c: Likewise.
	* soft-fp/fixtfti.c: Likewise.
	* soft-fp/fixunsdfti.c: Likewise.
	* soft-fp/fixunssfti.c: Likewise.
	* soft-fp/fixunstfti.c: Likewise.
	* soft-fp/floattidf.c: Likewise.
	* soft-fp/floattisf.c: Likewise.
	* soft-fp/floattitf.c: Likewise.
	* soft-fp/floatuntidf.c: Likewise.
	* soft-fp/floatuntisf.c: Likewise.
	* soft-fp/floatuntitf.c: Likewise.
	* soft-fp/trunctfxf2.c: Likewise.

2013-10-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-10-10  Joseph Myers  <joseph@codsourcery.com>

	* sysdeps/powerpc/nofpu/Makefile [$(subdir) = math]
	(CFLAGS-e_hypotl.c): Add -fno-builtin-fabsl.
	[$(subdir) = math] (CFLAGS-w_acosl.c): Likewise.
	[$(subdir) = math] (CFLAGS-w_asinl.c): Likewise.
	[$(subdir) = math] (CFLAGS-w_atanhl.c): Likewise.
	[$(subdir) = math] (CFLAGS-w_j0l.c): Likewise.
	[$(subdir) = math] (CFLAGS-w_j1l.c): Likewise.

	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c (__ieee754_acosl): Check
	for NaNs before doing comparisons on argument.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c (__ieee754_asinl):
	Likewise.

2013-10-10  Will Newton  <will.newton@linaro.org>

	* malloc/hooks.c (memalign_check): Ensure the value of bytes
	passed to _int_memalign does not overflow.

2013-10-10  Torvald Riegel  <triegel@redhat.com>

	* scripts/bench.pl: Add include-sources directive.
	* benchtests/README: Update documentation.

2013-10-10  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/soft-fp.h (FP_INIT_EXCEPTIONS): New macro.
	* soft-fp/extenddftf2.c (__extenddftf2): Use FP_INIT_EXCEPTIONS
	instead of FP_INIT_ROUNDMODE.
	* soft-fp/extendsfdf2.c (__extendsfdf2): Likewise.
	* soft-fp/extendsftf2.c (__extendsftf2): Likewise.

	[BZ #16034]
	* soft-fp/op-common.h (_FP_NEG): Document input as raw.  Do not
	copy class of input value.
	* soft-fp/negdf2.c (__negdf2): Use raw unpacking and packing.  Do
	not handle exceptions.
	* soft-fp/negsf2.c (__negsf2): Likewise.
	* soft-fp/negtf2.c (__negtf2): Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_neg.c (_Q_neg): Likewise.

2013-10-09  Joseph Myers  <joseph@codesourcery.com>

	* soft-fp/op-4.h (_FP_FRAC_DISASSEMBLE_4): Remove trailing
	semicolon.  From Linux kernel.

2013-10-09  Adam Buchbinder  <adam.buchbinder@gmail.com>

	* soft-fp/op-common.h (_FP_UNPACK_CANONICAL): Fix typo in comment.

2013-10-08  Yogesh Chaudhari  <mr.yogesh@gmail.com>

	[BZ #156]
	* manual/socket.texi: Added statement about buffer
	for gethostbyname2_r.

2013-10-08  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/memset.S (ALIGN): Macro removed.
	Use .p2align directive instead, throughout.
	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/strchr.S: Likewise.
	* sysdeps/x86_64/strrchr.S: Likewise.

2013-10-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/e_pow.c: Fix code formatting.

	* sysdeps/ieee754/dbl-64/e_exp.c: Fix code formatting.

	* sysdeps/generic/math_private.h (__mpsin1): Remove
	declaration.
	(__mpcos1): Likewise.
	(__mpsin): New argument __range_reduce.
	(__mpcos): Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	(slow): Use __mpsin and __mpcos.
	(slow1): Likewise.
	(slow2): Likewise.
	(sloww): Likewise.
	(sloww1): Likewise.
	(sloww2): Likewise.
	(bsloww): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.
	(cslow2): Likewise.
	(csloww): Likewise.
	(csloww1): Likewise.
	(csloww2): Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c (__mpsin): Add argument
	range_reduce.  Merge in __mpsin1.
	(__mpcos): Likewise.
	(__mpsin1): Remove.
	(__mpcos1): Likewise.

2013-10-07  Joseph Myers  <joseph@codesourcery.com>

	* locale/loadlocale.c (_nl_intern_locale_data): Use
	LOCFILE_ALIGNED_P.
	* locale/programs/3level.h (CONCAT(add_locale_,TABLE)): Use
	LOCFILE_ALIGN_UP and LOCFILE_ALIGN.
	* locale/programs/ld-collate.c (obstack_int32_grow): Assert that
	obstack data is appropriately aligned.
	(obstack_int32_grow_fast): Likewise.
	* locale/programs/ld-ctype.c (ctype_output): Use LOCFILE_ALIGN.
	* locale/programs/locfile.c (add_locale_uint32): Likewise.
	(add_locale_uint32_array): Likewise.

2013-10-07  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Remove ARGLIST and RET variables.
	($(objpfx)bench-%.c): Pass only function name to the script.
	* benchtests/README: Update documentation.
	* benchtests/acos-inputs: Add new directives.
	* benchtests/acosh-inputs: Likewise.
	* benchtests/asin-inputs: Likewise.
	* benchtests/asinh-inputs: Likewise.
	* benchtests/atan-inputs: Likewise.
	* benchtests/atanh-inputs: Likewise.
	* benchtests/cos-inputs: Likewise.
	* benchtests/cosh-inputs: Likewise.
	* benchtests/exp-inputs: Likewise.
	* benchtests/log-inputs: Likewise.
	* benchtests/pow-inputs: Likewise.
	* benchtests/rint-inputs: Likewise.
	* benchtests/sin-inputs: Likewise.
	* benchtests/sinh-inputs: Likewise.
	* benchtests/tan-inputs: Likewise.
	* benchtests/tanh-inputs: Likewise.
	* scripts/bench.pl: Add support for new directives.

2013-10-07  Alan Modra  <amodra@gmail.com>

	* README: Fix careless merge.

2013-10-05  Alan Modra  <amodra@gmail.com>

	* NEWS: Mention powerpc64le support and bugs fixed.
	* README: Both big-endian and little-endian powerpc64 supported.

2013-10-04  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/fork.c (_hurd_atfork_prepare_hook)
	(_hurd_atfork_child_hook, _hurd_atfork_parent_hook): New hooks.
	(__fork): Call _hurd_atfork_prepare_hook hooks before all locking, call
	_hurd_atfork_parent_hook or _hurd_atfork_child_hook after all unlocking.

2013-10-04  Ryan S. Arnold  <ryan.arnold@linaro.org>

	* misc/swapon.c (swapon): Update definition, adding FLAGS parameter to
	match prototype.

2013-10-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/powerpc32/Makefile [$(with-fp) = yes] (+cflags):
	Move -mhard-float appending from
	ports/sysdeps/powerpc/powerpc32/Makefile.
	[$(with-fp) = yes] (ASFLAGS): Likewise.
	[$(with-fp) = yes] (sysdep-LDFLAGS): Likewise.
	* sysdeps/powerpc/nofpu: Move directory from
	ports/sysdeps/powerpc/nofpu.
	* sysdeps/powerpc/soft-fp: Move directory from
	ports/sysdeps/powerpc/soft-fp.
	* sysdeps/powerpc/powerpc32/405: Move directory from
	ports/sysdeps/powerpc/powerpc32/405.
	* sysdeps/powerpc/powerpc32/440: Move directory from
	ports/sysdeps/powerpc/powerpc32/440.
	* sysdeps/powerpc/powerpc32/464: Move directory from
	ports/sysdeps/powerpc/powerpc32/464.
	* sysdeps/powerpc/powerpc32/476: Move directory from
	ports/sysdeps/powerpc/powerpc32/476.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/nofpu.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/405: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/405.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/440: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/440.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/464: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/464.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/476: Move directory
	from ports/sysdeps/unix/sysv/linux/powerpc/powerpc32/476.
	* README: Update for powerpc-*-linux-gnu software floating point
	support in libc.

	* sysdeps/unix/sysv/linux/configure.in (powerpc/powerpc32): Change
	case to powerpc/powerpc32*.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* sysdeps/powerpc/fpu_control.h [__NO_FPRS__ && !_SOFT_FLOAT]
	(_FPU_MASK_OM): Define as 0x04.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_UM): Define as 0x08.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RESERVED): Define as
	0x00c10080.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_DEFAULT): Define as
	0x0000003c.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_IEEE): Define as _FPU_DEFAULT.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext-common.S
	(__CONTEXT_FUNC_NAME) [__CONTEXT_ENABLE_E500]: Use
	getcontext_e500.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext-common.S
	(__CONTEXT_FUNC_NAME) [__CONTEXT_ENABLE_E500]: Use
	setcontext_e500.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S
	(__CONTEXT_FUNC_NAME) [__CONTEXT_ENABLE_E500]: Use getcontext_e500
	and setcontext_e500.

2013-10-04  Chris Leonard  <cjl@sugarlabs,.org>

	* locale/iso-3166.def: Update iso-1366.def and related occurrences

2013-10-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/threads.texi (Default Thread Attributes): Fix typo.

2013-10-04  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile: Add tst-memalign.
	* malloc/tst-memalign.c: New file.

	* malloc/tst-posix_memalign.c: Add comments.
	(do_test): Add comments and call free on all potentially
	allocated pointers. Add space after cast.

	* malloc/tst-pvalloc.c: Add comments.
	(do_test): Add comments and call free on all potentially
	allocated pointers. Remove duplicate check for NULL pointer.
	Add space after cast.

	* malloc/tst-valloc.c: Add comments.
	(do_test): Add comments and call free on all potentially
	allocated pointers. Remove duplicate check for NULL pointer.
	Add space after cast.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/dl-machine.c (__process_machine_rela):
	Use stdint types in rather than __attribute__((mode())).
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela): Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/dl-machine.c (__process_machine_rela):
	Correct handling of unaligned relocs for little-endian.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela): Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* configure.in: Map powerpc64le and powerpcle to base_machine/machine.
	* configure: Regenerate.
	* nptl/shlib-versions: Powerpc*le starts at 2.18.
	* shlib-versions: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* string/tester.c (test_memrchr): Increment reported test cycle.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* string/test-memcpy.c (do_one_test): When reporting errors, print
	string address and don't overrun end of string.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/memchr.S: Replace rlwimi with
	insrdi.  Make better use of reg selection to speed exit slightly.
	Schedule entry path a little better.  Remove useless "are we done"
	checks on entry to main loop.  Handle wrapping around zero address.
	Correct main loop count.  Handle single left-over word from main
	loop inline rather than by using loop_small.  Remove extra word
	case in loop_small caused by wrong loop count.  Add little-endian
	support.
	* sysdeps/powerpc/powerpc32/power7/memchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Likewise.  Use proper
	cache hint.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/rawmemchr.S: Add little-endian
	support.  Avoid rlwimi.
	* sysdeps/powerpc/powerpc32/power7/rawmemchr.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/memset.S: Replace rlwimi with
	insrdi.  Formatting.
	* sysdeps/powerpc/powerpc64/power4/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memset.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/power4/memcpy.S: Add little endian support.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/mempcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/mempcpy.S: Likewise.  Make better
	use of regs.  Use power7 mtocrf.  Tidy function tails.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/memcmp.S: Add little-endian support.
	Formatting.  Consistently use rXXX register defines or rN defines.
	Use early exit labels that avoid restoring unused non-volatile regs.
	Make cr field use more consistent with rWORDn compares.  Rename
	regs used as shift registers for unaligned loop, using rN defines
	for short lifetime/multiple use regs.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memcmp.S: Likewise.  Exit with
	addi 1,1,64 to pop stack frame.  Simplify return value code.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/strchr.S (strchr): Add little-endian
	support.  Correct typos, formatting.  Optimize tail.  Use insrdi
	rather than rlwimi.
	* sysdeps/powerpc/powerpc32/power7/strchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strchrnul.S (__strchrnul): Add
	little-endian support.  Correct typos.
	* sysdeps/powerpc/powerpc32/power7/strchrnul.S: Likewise.  Use insrdi
	rather than rlwimi.
	* sysdeps/powerpc/powerpc64/strchr.S (rTMP4, rTMP5): Define.  Use
	in loop and entry code to keep "and." results.
	(strchr): Add little-endian support.  Comment.  Move cntlzd
	earlier in tail.
	* sysdeps/powerpc/powerpc32/strchr.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/strcpy.S: Add little-endian support:
	* sysdeps/powerpc/powerpc32/strcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/stpcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/stpcpy.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/strcmp.S (rTMP2): Define as r0.
	(rTMP): Define as r11.
	(strcmp): Add little-endian support.  Optimise tail.
	* sysdeps/powerpc/powerpc32/strcmp.S: Similarly.
	* sysdeps/powerpc/powerpc64/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/strnlen.S (strnlen): Add
	little-endian support.  Remove unnecessary "are we done" tests.
	Handle "s" wrapping around zero and extremely large "size".
	Correct main loop count.  Handle single left-over word from main
	loop inline rather than by using small_loop.  Correct comments.
	Delete "zero" tail, use "end_max" instead.
	* sysdeps/powerpc/powerpc32/power7/strnlen.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc64/power7/strlen.S (strlen): Add little-endian
	support.  Don't branch over align.
	* sysdeps/powerpc/powerpc32/power7/strlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/strlen.S (strlen): Add little-endian
	support.  Rearrange tmp reg use to suit.  Comment.
	* sysdeps/powerpc/powerpc32/strlen.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/sigstack.h: New file.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/makecontext.S: Use
	conditional form of branch and link when obtaining pc.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext-common.S: Use
	HIWORD/LOWORD.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext-common.S: Ditto.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S: Ditto.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/longjmp.c: Use proper symbol versioning macros.
	* sysdeps/powerpc/novmx-longjmp.c: Likewise.
	* sysdeps/powerpc/powerpc32/bsd-_setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/bsd-setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/mcount.c: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/setjmp.S: Likewise.
	* nptl/sysdeps/unix/sysv/linux/powerpc/pt-longjmp.c: Likewise.

2013-10-04  Anton Blanchard <anton@au1.ibm.com>
	    Alistair Popple <alistair@ozlabs.au.ibm.com>
	    Alan Modra <amodra@gmail.com>

	[BZ #15723]
	* sysdeps/powerpc/jmpbuf-offsets.h: Comment fix.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S: Correct
	_dl_hwcap access for little-endian.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S: Likewise.  Don't
	destroy vmx regs when saving unaligned.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S: Correct CR load.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Likewise CR save.  Don't
	destroy vmx regs when saving unaligned.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/power4/hp-timing.h (HP_TIMING_NOW):
	Don't use a union to pack hi/low value.

2013-10-04  Anton Blanchard <anton@au1.ibm.com>

	* sysdeps/powerpc/powerpc64/fpu/s_ceilf.S: Correct float constants
	for little-endian.
	* sysdeps/powerpc/powerpc64/fpu/s_floorf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_roundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_truncf.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/fpu/s_roundf.S: Increase alignment of
	constants to usual value for .cst8 section, and remove redundant
	high address load.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llround.S: Use float
	constant for 0x1p52.  Load little-endian words of double from
	correct stack offsets.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/sysdep.h (LOWORD, HIWORD, HISHORT): Define.
	* sysdeps/powerpc/powerpc32/fpu/s_copysign.S: Load little-endian
	words of double from correct stack offsets.
	* sysdeps/powerpc/powerpc32/fpu/s_copysignl.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_lrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5+/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5+/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_finite.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_isinf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_finite.S: Use HISHORT.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_isinf.S: Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/fpu_control.h (_FPU_GETCW): Rewrite using
	64-bit int/double union.
	(_FPU_SETCW): Likewise.
	* sysdeps/powerpc/fpu/tst-setcontext-fpscr.c (_GET_DI_FPSCR): Likewise.
	(_SET_DI_FPSCR, _GET_SI_FPSCR, _SET_SI_FPSCR): Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/fpu/s_llround.c (__llround): Rewrite.
	* sysdeps/powerpc/fpu/s_llroundf.c (__llroundf): Rewrite.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/fpu/s_float_bitwise.h (__float_and_test28): Don't
	use vector int constants.
	(__float_and_test24, __float_and8, __float_get_exp): Likewise.

2013-10-04  Anton Blanchard <anton@au1.ibm.com>

	* sysdeps/powerpc/fpu/fenv_libc.h (fenv_union_t): Replace int
	array with long long.
	* sysdeps/powerpc/fpu/e_sqrt.c (__slow_ieee754_sqrt): Adjust.
	* sysdeps/powerpc/fpu/e_sqrtf.c (__slow_ieee754_sqrtf): Adjust.
	* sysdeps/powerpc/fpu/fclrexcpt.c (__feclearexcept): Adjust.
	* sysdeps/powerpc/fpu/fedisblxcpt.c (fedisableexcept): Adjust.
	* sysdeps/powerpc/fpu/feenablxcpt.c (feenableexcept): Adjust.
	* sysdeps/powerpc/fpu/fegetexcept.c (__fegetexcept): Adjust.
	* sysdeps/powerpc/fpu/feholdexcpt.c (feholdexcept): Adjust.
	* sysdeps/powerpc/fpu/fesetenv.c (__fesetenv): Adjust.
	* sysdeps/powerpc/fpu/feupdateenv.c (__feupdateenv): Adjust.
	* sysdeps/powerpc/fpu/fgetexcptflg.c (__fegetexceptflag): Adjust.
	* sysdeps/powerpc/fpu/fraiseexcpt.c (__feraiseexcept): Adjust.
	* sysdeps/powerpc/fpu/fsetexcptflg.c (__fesetexceptflag): Adjust.
	* sysdeps/powerpc/fpu/ftestexcept.c (fetestexcept): Adjust.

2013-10-04  Anton Blanchard <anton@au1.ibm.com>

	* sysdeps/powerpc/bits/mathinline.h (__signbitf): Use builtin.
	(__signbit): Likewise.  Correct for little-endian.
	(__signbitl): Call __signbit.
	(lrint): Correct for little-endian.
	(lrintf): Call lrint.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c (mynumber): Replace
	union 32-bit int array member with 64-bit int array.
	(t515, tm256): Double rather than long double.
	(__ieee754_sqrtl): Rewrite using 64-bit arithmetic.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/ieee754.h (union ieee854_long_double):
	Delete.
	(IEEE854_LONG_DOUBLE_BIAS): Delete.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h: Don't include ieee854
	version of math_ldbl.h.

2013-10-04  Alan Modra  <amodra@gmail.com>

	[BZ #15734], [BZ #15735]
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c (__ieee754_fmodl): Rewrite
	all uses of ieee875 long double macros and unions.  Simplify test
	for 0.0L.  Correct |x|<|y| and |x|=|y| test.  Use
	ldbl_extract_mantissa value for ix,iy exponents.  Properly
	normalize after ldbl_extract_mantissa, and don't add hidden bit
	already handled.  Don't treat low word of ieee854 mantissa like
	low word of IBM long double and mask off bit when testing for
	zero.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl): Rewrite
	all uses of ieee875 long double macros and unions.  Simplify tests
	for 0.0L and inf.  Correct double adjustment of k.  Delete dead code
	adjusting ha,hb.  Simplify code setting kld.  Delete two600 and
	two1022, instead use their values.  Recognise that tests for large
	"a" and small "b" are mutually exclusive.  Rename vars.  Comment.
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c (__ieee754_remainderl):
	Rewrite all uses of ieee875 long double macros and unions.  Simplify
	test for 0.0L and nan.  Correct negation.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c (__erfl): Rewrite all uses of
	ieee875 long double macros and unions.  Correct output for large
	magnitude x.  Correct absolute value calculation.
	(__erfcl): Likewise.
	* math/libm-test.inc: Add tests for errors discovered in IBM long
	double versions of fmodl, remainderl, erfl and erfcl.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c (__ieee754_atan2l): Rewrite
	all uses of ieee854 long double macros and unions.  Simplify tests
	for long doubles that are fully specified by the high double.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c (__ieee754_gammal_r):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_ilogbl.c (__ieee754_ilogbl): Likewise.
	Remove dead code too.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_jnl): Likewise.
	(__ieee754_ynl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c (__ieee754_log10l): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c (__ieee754_logl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Likewise.
	Remove dead code too.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c (__kernel_tanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c (__expm1l): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c (__frexpl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinf_nsl.c (__isinf_nsl): Likewise.
	Simplify.
	* sysdeps/ieee754/ldbl-128ibm/s_isinfl.c (___isinfl): Likewise.
	Simplify.
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c (__log1pl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c (__modfl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c (__nextafterl): Likewise.
	Comment on variable precision.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_remquol.c (__remquol): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c (__scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c (__tanhl): Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Adjust tan_towardzero ulps.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_high): Define.
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c (__ieee754_acoshl): Rewrite
	all uses of ieee854 long double macros and unions.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c (__ieee754_acosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c (__ieee754_asinl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c (__ieee754_atanhl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c (__ieee754_coshl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c (__ieee754_log2l): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c (__ieee754_rem_pio2l):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c (__ieee754_sinhl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c (__kernel_cosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c (__kernel_sincosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c (__kernel_sinl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c (__asinhl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c (__atanl): Likewise.
	Simplify sign and nan test too.
	* sysdeps/ieee754/ldbl-128ibm/s_cosl.c (__cosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fabsl.c (__fabsl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_finitel.c (___finitel): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fpclassifyl.c (___fpclassifyl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c (___isnanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_issignalingl.c (__issignalingl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_signbitl.c (___signbitl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sincosl.c (__sincosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sinl.c (__sinl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanl.c (__tanl): Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c (__logbl): Likewise.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* stdio-common/printf_size.c (__printf_size): Don't use
	union ieee854_long_double in fpnum union.
	* stdio-common/printf_fphex.c (__printf_fphex): Likewise.  Use
	signbit macro to retrieve sign from long double.
	* stdio-common/printf_fp.c (___printf_fp): Use signbit macro to
	retrieve sign from long double.
	* sysdeps/ieee754/ldbl-128ibm/printf_fphex.c: Adjust for fpnum change.
	* sysdeps/ieee754/ldbl-128/printf_fphex.c: Likewise.
	* sysdeps/ieee754/ldbl-96/printf_fphex.c: Likewise.
	* sysdeps/x86_64/fpu/printf_fphex.c: Likewise.
	* math/test-misc.c (main): Don't use union ieee854_long_double.

2013-10-04  Alan Modra  <amodra@gmail.com>

	[BZ #15680]
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c: Comment fix.
	* sysdeps/ieee754/ldbl-128ibm/printf_fphex.c
	(PRINT_FPHEX_LONG_DOUBLE): Tidy code by moving -53 into ediff
	calculation.  Remove unnecessary test for denormal exponent.
	* sysdeps/ieee754/ldbl-128ibm/ldbl2mpn.c (__mpn_extract_long_double):
	Correct handling of denormals.  Avoid undefined shift behaviour.
	Correct normalisation of low mantissa when low double is denormal.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h
	(ldbl_extract_mantissa): Likewise.  Comment.  Use uint64_t* for hi64.
	(ldbl_insert_mantissa): Make both hi64 and lo64 parms uint64_t.
	Correct normalisation of low mantissa.  Test for overflow of high
	mantissa and normalise.
	(ldbl_nearbyint): Use more readable constant for two52.
	* sysdeps/ieee754/ldbl-128ibm/mpn2ldbl.c
	(__mpn_construct_long_double): Fix test for overflow of high
	mantissa and correct normalisation.  Avoid undefined shift.

2013-10-04  Alan Modra  <amodra@gmail.com>

	* sysdeps/ieee754/ldbl-128ibm/ieee754.h
	(union ibm_extended_long_double): Define as an array of ieee754_double.
	(IBM_EXTENDED_LONG_DOUBLE_BIAS): Delete.
	* sysdeps/ieee754/ldbl-128ibm/printf_fphex.c: Update all references
	to ibm_extended_long_double and IBM_EXTENDED_LONG_DOUBLE_BIAS.
	* sysdeps/ieee754/ldbl-128ibm/e_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/ldbl2mpn.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/mpn2ldbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/strtold_l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/x2y2m1l.c: Likewise.

2013-10-03  Joseph Myers  <joseph@codesourcery.com>

	* locale/programs/locarchive.c (add_locale): Use constant 4096 for
	page size instead of calling getpagesize.

	* locale/localeinfo.h (LOCFILE_ALIGN): New macro.
	(LOCFILE_ALIGN_MASK): Likewise.
	(LOCFILE_ALIGN_UP): Likewise.
	(LOCFILE_ALIGNED_P): Likewise.
	* locale/programs/ld-collate.c (collate_output): Use the new
	macros instead of __alignof__ (int32_t).
	* locale/weight.h (findidx): Likewise.

2013-10-03  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #431]
	* manual/string.texi: Fix strncat and wcsncat.

2013-10-03  Brooks Moses  <bmoses@google.com>

	[BZ #15915]
	* Makefile (linkobj/libc_pic.a, linkobj/libc.so): Move rules to...
	* Makerules: ...here, and adjust associated comments.

2013-10-02  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile: Add tst-pvalloc.
	* malloc/tst-pvalloc.c: New file.

2013-10-02  Will Newton  <will.newton@linaro.org>

	* malloc/tst-valloc.c: Rewrite to use test-skeleton.c and
	improve test coverage.

2013-10-02  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile: Add tst-posix_memalign.
	* malloc/tst-posix_memalign.c: New file.

2013-10-01  Eric Blake  <eblake@redhat.com>

	* posix/glob.c (next_brace_sub, prefix_array, collated_compare):
	Use __THROWNL rather than __THROW on static functions.

2013-09-30  Petr Machata  <pmachata@redhat.com>

	* elf/elf.h (R_AARCH64_ABS16): New macro.
	(R_AARCH64_PREL64, R_AARCH64_PREL32): Likewise.
	(R_AARCH64_PREL16, R_AARCH64_MOVW_UABS_G0): Likewise.
	(R_AARCH64_MOVW_UABS_G0_NC, R_AARCH64_MOVW_UABS_G1): Likewise.
	(R_AARCH64_MOVW_UABS_G1_NC, R_AARCH64_MOVW_UABS_G2): Likewise.
	(R_AARCH64_MOVW_UABS_G2_NC, R_AARCH64_MOVW_UABS_G3): Likewise.
	(R_AARCH64_MOVW_SABS_G0, R_AARCH64_MOVW_SABS_G1): Likewise.
	(R_AARCH64_MOVW_SABS_G2, R_AARCH64_LD_PREL_LO19): Likewise.
	(R_AARCH64_ADR_PREL_LO21, R_AARCH64_ADR_PREL_PG_HI21): Likewise.
	(R_AARCH64_ADR_PREL_PG_HI21_NC, R_AARCH64_ADD_ABS_LO12_NC): Likewise.
	(R_AARCH64_LDST8_ABS_LO12_NC, R_AARCH64_LDST16_ABS_LO12_NC): Likewise.
	(R_AARCH64_LDST32_ABS_LO12_NC, R_AARCH64_LDST64_ABS_LO12_NC): Likewise.
	(R_AARCH64_LDST128_ABS_LO12_NC, R_AARCH64_TSTBR14): Likewise.
	(R_AARCH64_CONDBR19, R_AARCH64_JUMP26, R_AARCH64_CALL26): Likewise.
	(R_AARCH64_MOVW_PREL_G0, R_AARCH64_MOVW_PREL_G0_NC): Likewise.
	(R_AARCH64_MOVW_PREL_G1, R_AARCH64_MOVW_PREL_G1_NC): Likewise.
	(R_AARCH64_MOVW_PREL_G2, R_AARCH64_MOVW_PREL_G2_NC): Likewise.
	(R_AARCH64_MOVW_PREL_G3, R_AARCH64_MOVW_GOTOFF_G0): Likewise.
	(R_AARCH64_MOVW_GOTOFF_G0_NC, R_AARCH64_MOVW_GOTOFF_G1): Likewise.
	(R_AARCH64_MOVW_GOTOFF_G1_NC, R_AARCH64_MOVW_GOTOFF_G2): Likewise.
	(R_AARCH64_MOVW_GOTOFF_G2_NC, R_AARCH64_MOVW_GOTOFF_G3): Likewise.
	(R_AARCH64_GOTREL64, R_AARCH64_GOTREL32): Likewise.
	(R_AARCH64_GOT_LD_PREL19, R_AARCH64_LD64_GOTOFF_LO15): Likewise.
	(R_AARCH64_ADR_GOT_PAGE, R_AARCH64_LD64_GOT_LO12_NC): Likewise.
	(R_AARCH64_LD64_GOTPAGE_LO15, R_AARCH64_TLSGD_ADR_PREL21): Likewise.
	(R_AARCH64_TLSGD_ADR_PAGE21, R_AARCH64_TLSGD_ADD_LO12_NC): Likewise.
	(R_AARCH64_TLSGD_MOVW_G1, R_AARCH64_TLSGD_MOVW_G0_NC): Likewise.
	(R_AARCH64_TLSLD_ADR_PREL21, R_AARCH64_TLSLD_ADR_PAGE21): Likewise.
	(R_AARCH64_TLSLD_ADD_LO12_NC, R_AARCH64_TLSLD_MOVW_G1): Likewise.
	(R_AARCH64_TLSLD_MOVW_G0_NC, R_AARCH64_TLSLD_LD_PREL19): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G2): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G1): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G1_NC): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G0): Likewise.
	(R_AARCH64_TLSLD_MOVW_DTPREL_G0_NC): Likewise.
	(R_AARCH64_TLSLD_ADD_DTPREL_HI12): Likewise.
	(R_AARCH64_TLSLD_ADD_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_ADD_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST8_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST8_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST16_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST16_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST32_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST32_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST64_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST64_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLD_LDST128_DTPREL_LO12): Likewise.
	(R_AARCH64_TLSLD_LDST128_DTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSIE_MOVW_GOTTPREL_G1): Likewise.
	(R_AARCH64_TLSIE_MOVW_GOTTPREL_G0_NC): Likewise.
	(R_AARCH64_TLSIE_ADR_GOTTPREL_PAGE21): Likewise.
	(R_AARCH64_TLSIE_LD64_GOTTPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSIE_LD_GOTTPREL_PREL19): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G2): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G1): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G1_NC): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G0): Likewise.
	(R_AARCH64_TLSLE_MOVW_TPREL_G0_NC): Likewise.
	(R_AARCH64_TLSLE_ADD_TPREL_HI12): Likewise.
	(R_AARCH64_TLSLE_ADD_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_ADD_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST8_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST8_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST16_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST16_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST32_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST32_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST64_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST64_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSLE_LDST128_TPREL_LO12): Likewise.
	(R_AARCH64_TLSLE_LDST128_TPREL_LO12_NC): Likewise.
	(R_AARCH64_TLSDESC_LD_PREL19): Likewise.
	(R_AARCH64_TLSDESC_ADR_PREL21): Likewise.
	(R_AARCH64_TLSDESC_ADR_PAGE21): Likewise.
	(R_AARCH64_TLSDESC_LD64_LO12): Likewise.
	(R_AARCH64_TLSDESC_ADD_LO12): Likewise.
	(R_AARCH64_TLSDESC_OFF_G1): Likewise.
	(R_AARCH64_TLSDESC_OFF_G0_NC): Likewise.
	(R_AARCH64_TLSDESC_LDR): Likewise.
	(R_AARCH64_TLSDESC_ADD): Likewise.
	(R_AARCH64_TLSDESC_CALL): Likewise.

2013-09-30  Andreas Schwab  <schwab@suse.de>

	[BZ #15048]
	* nscd/aicache.c (addhstaiX): Properly use the cache variable for
	the nss database lookup.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Likewise.

2013-09-28  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/tst-fanotify.c (do_test): Fix style.

2013-09-28  P. J. McDermott  <pj@pehjota.net>

	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Don't use
	${Bash-specific parameter/pattern/string} parameter expansion.
	* sysdeps/unix/make-syscalls.sh: Likewise.

2013-09-27  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/stackguard-macros.h: New file.

2013-09-26  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Update.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Remove strrchr ifunc.
	* sysdeps/x86_64/multiarch/strend-sse4.S Remove.
	* sysdeps/x86_64/multiarch/strrchr-sse2-no-bsf.S Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.
	* sysdeps/x86_64/strrchr.S (strrchr): Use optimized implementation.

2013-09-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/stackguard-macros.h (POINTER_CHK_GUARD:
	Fix thread ID register.

2013-09-25  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/sched.h-data [XPG3 || XPG4]: Disable whole file.
	[POSIX || UNIX98]: Require rather than permitting all symbols from
	<time.h>.
	[POSIX || UNIX98] (sched_ss_low_priority): Do not specify optional
	element of struct sched_param.
	[POSIX || UNIX98] (sched_ss_repl_period): Likewise.
	[POSIX || UNIX98] (sched_ss_init_budget): Likewise.
	[POSIX || UNIX98] (sched_ss_max_repl): Likewise.
	[POSIX || UNIX98] (SCHED_SPORADIC): Do not specify optional
	constant.

2013-09-24  Olivier Langlois  <olivier@olivierlanglois.net>

	* stdio-common/tst-long-dbl-fphex.c (do_test): Fix swprintf length
	argument calculation.

2013-09-24  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/pthread.h-data [POSIX] (PTHREAD_MUTEX_INITIALIZER):
	Expect macro.
	[POSIX] (pthread_attr_t): Do not require type.
	[POSIX] (pthread_cond_t): Likewise.
	[POSIX] (pthread_condattr_t): Likewise.
	[POSIX] (pthread_key_t): Likewise.
	[POSIX] (pthread_mutex_t): Likewise.
	[POSIX] (pthread_mutexattr_t): Likewise.
	[POSIX] (pthread_once_t): Likewise.
	[POSIX] (pthread_t): Likewise.
	[POSIX-based standards] (pthread_atfork): Expect function.

2013-09-24  Joseph Myers  <joseph@codesourcery.com>
	    Richard Sandiford  <richard@codesourcery.com>

	* locale/programs/locfile.h: Include <byteswap.h> and <stdbool.h>.
	(swap_endianness_p): New extern variable.
	(set_big_endian): New inline function.
	(maybe_swap_uint32): Likewise.
	(maybe_swap_uint32_array): Likewise.
	(maybe_swap_uint32_obstack): Likewise.
	* locale/programs/locfile.c: Include <stdbool.h>.
	(swap_endianness_p): New variable.
	(add_locale_uint32): Call maybe_swap_uint32.
	(add_locale_uint32_array): Call maybe_swap_uint32_obstack.
	(write_locale_data): Call maybe_swap_uint32_array.
	* locale/programs/ld-collate.c (obstack_int32_grow): Call
	maybe_swap_uint32.
	(obstack_int32_grow_fast): Likewise.
	(output_weightwc): Call maybe_swap_uint32_obstack.
	(collate_output): Likewise.
	* locale/programs/localedef.c (OPT_LITTLE_ENDIAN): New macro.
	(OPT_LITTLE_ENDIAN): Likewise.
	(options): Add --little-endian and --big-endian options.
	(parse_opt): Handle OPT_LITTLE_ENDIAN and OPT_BIG_ENDIAN.
	* locale/programs/locarchive.c: Include "locfile.h".
	(GET): New macro.
	(SET): Likewise.
	(INC): Likewise.
	(create_archive): Use the new macros to access fields of
	structures directly mapped from or written to locale archives.
	(oldlocrecentcmp): Likewise.
	(enlarge_archive): Likewise.
	(insert_name): Likewise.
	(add_alias): Likewise.
	(add_locale): Likewise.
	(delete_locales_from_archive): Likewise.
	(show_archive_content): Likewise.
	(add_locale_to_archive): Likewise.  Use maybe_swap_uint32 on
	locale data.

2013-09-24  Roland McGrath  <roland@hack.frob.com>

	* manual/freemanuals.texi: Updated from (newly) canonical copy at
	http://www.gnu.org/doc/freemanuals.texi.
	* manual/libc.texinfo (Free Manuals): Put the @appendix line here.

2013-09-24  Will Newton  <will.newton@linaro.org>

	* sysdeps/mach/hurd/i386/tls.h (TLS_INIT_TP_EXPENSIVE): Remove
	macro.

2013-09-23  Joseph Myers  <joseph@codesourcery.com>

	* locale/hashval.h (compute_hashval): Interpret bytes of key as
	unsigned char.

2013-09-23  Maciej W. Rozycki  <macro@codesourcery.com>

	* manual/threads.texi (POSIX Threads): Fix a typo.

2013-09-23  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14547]
	* string/tst-strcoll-overflow.c: New test case.
	* string/Makefile (xtests): Add tst-strcoll-overflow.
	* string/strcoll_l.c (STRCOLL): Skip allocating memory for
	cache if string sizes may cause integer overflow.

	[BZ #14547]
	* string/strcoll_l.c (coll_seq): New members rule, idx,
	save_idx and back_us.
	(get_next_seq_nocache): New function.
	(do_compare_nocache): New function.
	(STRCOLL): Use get_next_seq_nocache and do_compare_nocache
	when malloc fails.

2013-09-23  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15754]
	* sysdeps/generic/stackguard-macros.h: If PTRGUARD_LOCAL use
	__pointer_chk_guard_local, otherwise __pointer_chk_guard.
	* elf/Makefile: Define CFLAGS-tst-ptrguard1-static.c.

	[BZ #15754]
	* elf/Makefile (tests): Add tst-ptrguard1.
	(tests-static): Add tst-ptrguard1-static.
	(tst-ptrguard1-ARGS): Define.
	(tst-ptrguard1-static-ARGS): Define.
	* elf/tst-ptrguard1.c: New file.
	* elf/tst-ptrguard1-static.c: New file.
	* sysdeps/x86_64/stackguard-macros.h: Define POINTER_CHK_GUARD.
	* sysdeps/i386/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc32/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc64/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-32/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-64/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc32/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc64/stackguard-macros.h: Likewise.

2013-09-23  Hector Marco  <hecmargi@upv.es>
	    Ismael Ripoll  <iripoll@disca.upv.es>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #15754]
	* sysdeps/generic/stackguard-macros.h: Define
	__pointer_chk_guard_local and POINTER_CHK_GUARD.
	* csu/libc-start.c [!SHARED && !THREAD_SET_POINTER_GUARD]:
	Define __pointer_chk_guard_local.
	(LIBC_START_MAIN) [!SHARED]: Call _dl_setup_pointer_guard.
	Use THREAD_SET_POINTER_GUARD or set __pointer_chk_guard_local.

2013-09-15  Vinitha Vijayan <vinitha.vijayann@gmail.com>

	[BZ #15859]
	* elf/dl-deps.c (_dl_map_object_deps): Remove duplicate declaration.

2013-09-20  Andreas Schwab  <schwab@linux-m68k.org>

	* include/string.h (__ffs): Declare as hidden.
	* string/ffs.c (__ffs): Define as hidden.
	* sysdeps/i386/ffs.c (__ffs): Likewise.
	* sysdeps/i386/i686/ffs.c (__ffs): Likewise.
	* sysdeps/powerpc/ffs.c (__ffs): Likewise.
	* sysdeps/s390/ffs.c (__ffs): Likewise.
	* sysdeps/x86_64/ffs.c (__ffs): Likewise.

2013-09-20  Alexandre Oliva <aoliva@redhat.com>

	* NEWS: Mention malloc probes.

	* malloc/arena.c (new_heap): New memory_heap_new probe.
	(grow_heap): New memory_heap_more probe.
	(shrink_heap): New memory_heap_less probe.
	(heap_trim): New memory_heap_free probe.
	* malloc/malloc.c (sysmalloc): New memory_sbrk_more probe.
	(systrim): New memory_sbrk_less probe.
	* manual/probes.texi: Document them.

	* malloc/arena.c (arena_get_retry): Add memory_arena_retry probe.
	* manual/probes.texi: Document it.

	* malloc/malloc.c (__libc_malloc): Add memory_malloc_retry probe.
	(__libc_realloc): Add memory_realloc_retry probe.
	(__libc_memalign): Add memory_memalign_retry probe.
	(__libc_valloc): Add memory_valloc_retry probe.
	(__libc_pvalloc): Add memory_pvalloc_retry probe.
	(__libc_calloc): Add memory_calloc_retry probe.
	* manual/probes.texi: Document them.

	* malloc/arena.c (get_free_list): Add probe
	memory_arena_reuse_free_list.
	(reused_arena) [PER_THREAD]: Add probes memory_arena_reuse_wait
	and memory_arena_reuse.
	(arena_get2) [!PER_THREAD]: Likewise.
	* malloc/malloc.c (__libc_realloc) [!PER_THREAD]: Add probe
	memory_arena_reuse_realloc.
	* manual/probes.texi: Document them.

	* malloc/malloc.c (__libc_free): Add
	memory_mallopt_free_dyn_thresholds probe.
	(__libc_mallopt): Add multiple memory_mallopt probes.
	* manual/probes.texi: Document them.

	* malloc/malloc.c: Include stap-probe.h.
	(__libc_mallopt): Add memory_mallopt probe.
	* malloc/arena.c (_int_new_arena): Add memory_arena_new probe.
	* manual/probes.texi: New.
	* manual/Makefile (chapters): Add probes.
	* manual/threads.texi: Set next node.

2013-09-19  Wei-Lun Chao  <bluebat@member.fsf.org>

	[BZ #15963, #13985]
	* locale/iso-639.def: Add Chiga (cgg) and Chinese (gan, hak,
	czh, cjy, lzh, cmn, mnp, cdo, czo, cpx, wuu, hsn, yue).
	Add `Chinese' to `nan' entry name.

2013-09-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c (POLYNOMIAL2): New macro.
	(POLYNOMIAL): Likewise.
	(TAYLOR_SINCOS): Likewise.
	(TAYLOR_SLOW): Likewise.
	(__sin): Use TAYLOR_SINCOS.
	(__cos): Likewise.
	(slow): Use TAYLOR_SLOW.
	(sloww): Likewise.
	(bsloww): Likewise.
	(csloww): Likewise.

2013-09-19  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* stdlib/strtod_l.c: Fix buffer overrun.

2013-09-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (bench): Add sincos.
	* benchtests/bench-sincos.c: New file.

	* math/libm-test.inc (cos_test_data): New test inputs.
	(sin_test_data): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (SINCOS_TABLE_LOOKUP): New
	macro.
	(__sin): Use it.
	(__cos): Likewise.
	(slow1): Likewise.
	(slow2): Likewise.
	(sloww1): Likewise.
	(sloww2): Likewise.
	(bsloww1): Likewise.
	(bsloww2): Likewise.
	(cslow2): Likewise.
	(csloww1): Likewise.
	(csloww2): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (reduce_and_compute): New
	function.
	(__sin): Use it.
	(__cos): Likewise.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Remove redundant
	gotos.
	(__cos): Likewise.

2013-09-18  Maciej W. Rozycki  <macro@codesourcery.com>

	* config.h.in (HAVE_MIPS_NAN2008): New macro.
	* elf/elf.h (EF_MIPS_NAN2008): Likewise.
	* sysdeps/generic/ldconfig.h (FLAG_MIPS_LIB32_NAN2008): Likewise.
	(FLAG_MIPS64_LIBN32_NAN2008): Likewise.
	(FLAG_MIPS64_LIBN64_NAN2008): Likewise.
	* elf/cache.c (print_entry): Handle the new cache flags.

2013-09-18  Joseph Myers  <joseph@codesourcery.com>
	    Aldy Hernandez  <aldyh@redhat.com>

	* sysdeps/powerpc/fpu_control.h [_SOFT_FLOAT || __NO_FPRS__]:
	Change condition to [_SOFT_FLOAT].
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RC_NEAREST): New macro.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RC_DOWN): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RC_UP): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RC_ZERO): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_ZM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_OM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_UM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_XM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_MASK_IM): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_RESERVED): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_DEFAULT): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_IEEE): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (fpu_control_t): New typedef.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_GETCW): New macro.
	[__NO_FPRS__ && !_SOFT_FLOAT] (_FPU_SETCW): Likewise.
	[__NO_FPRS__ && !_SOFT_FLOAT] (__fpu_control): New variable
	declaration.

2013-09-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/powerpc32/__longjmp-common.S (LOAD_GP): Define
	macro conditional on [__SPE__ || (__NO_FPRS__ && !_SOFT_FLOAT)].
	(__longjmp): Use LOAD_GP to load saved GPRs.
	* sysdeps/powerpc/powerpc32/setjmp-common.S (SAVE_GP): Define
	macro conditional on [__SPE__ || (__NO_FPRS__ && !_SOFT_FLOAT)].
	(__sigsetjmp): Use SAVE_GP to save GPRs.

	* sysdeps/powerpc/powerpc32/Makefile [$(with-fp) = no] (+cflags):
	Do not append -msoft-float.
	[$(with-fp) = no] (sysdep-LDFLAGS): Likewise.

2013-09-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/sincos32.c: Fix code formatting.

2013-09-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15966]
	* sysdeps/powerpc/fpu_control.h [!_SOFT_FLOAT && !__NO_FPRS__]
	(_FPU_GETCW): Use initial "__" on variable and field names but not
	on macro parameter name.
	[!_SOFT_FLOAT && !__NO_FPRS__] (_FPU_SETCW): Likewise.  Use
	parentheses around reference to macro parameter.

2013-09-13  Richard Sandiford  <richard@codesourcery.com>

	* locale/programs/ld-ctype.c (find_idx): Use uint32_t in
	prototype.
	(ctype_startup): Use uint32_t in cast and sizeof for
	ctype->charnames.

2013-09-11  Jia Liu  <proljc@gmail.com>

	* sunrpc/rpc/types.h [__APPLE_CC__]: Define __u_char_defined and
	__daddr_t_defined.
	[__FreeBSD__]: Likewise.

2013-09-11  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c
	(__libc_ifunc_impl_list): Remove: __strchr_sse42.
	* sysdeps/x86_64/multiarch/strchr.S (__strchr_sse42): Remove.
	(strchr): Remove __strchr_sse42 ifunc selection.
	* sysdeps/x86_64/strchr.S (strchr): Use optimized implementation.
	* sysdeps/x86_64/strchrnul.S: Include sysdeps/x86_64/strchr.S.

2013-09-11  Will Newton  <will.newton@linaro.org>

	* benchtests/bench-timing.h (TIMING_INIT): Rename ITERS
	parameter to RES. Remove hardcoded 1000 value.
	* benchtests/bench-skeleton.c (main): Pass RES parameter
	to TIMING_INIT and multiply result by 1000.

2013-09-10  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-09-11  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (__O_TMPFILE): Define
	if not defined.
	(O_TMPFILE) [__USE_GNU]: Define.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (__O_TMPFILE):
	Define.

2013-09-11  Will Newton  <will.newton@linaro.org>

	[BZ #15857]
	* malloc/malloc.c (__libc_memalign): Check the value of bytes
	does not overflow.

2013-09-11  Will Newton  <will.newton@linaro.org>

	[BZ #15856]
	* malloc/malloc.c (__libc_valloc): Check the value of bytes
	does not overflow.

2013-09-11  Will Newton  <will.newton@linaro.org>

	[BZ #15855]
	* malloc/malloc.c (__libc_pvalloc): Check the value of bytes
	does not overflow.

2013-09-10  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/ieee754/dbl-64/e_j0.c: Remove DO_NOT_USE_THIS conditionals.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.

2013-09-10  Allan McRae  <allan@archlinux.org>

	[BZ #15748]
	* manual/arith.texi (Parsing of Floats): Clarify
	cross-reference.

	[BZ #15849]
	* manual/install.texi (Running make install): Mention
	--enable-pt-chown.
	* INSTALL: Regenerated.

2013-09-09  Maciej W. Rozycki  <macro@codesourcery.com>

	* csu/init-first.c (_init): Remove the !SHARED condition around
	FPU control word initialization.
	* elf/dl-support.c (_dl_fpu_control): New variable.
	(_dl_aux_init) <AT_FPUCW>: Initialize it.
	* math/test-fpucw.c [!FPU_CONTROL] (FPU_CONTROL): New macro.
	(main): Replace _FPU_DEFAULT with FPU_CONTROL throughout.
	* math/test-fpucw-static.c: New file.
	* math/test-fpucw-ieee.c: New file.
	* math/test-fpucw-ieee-static.c: New file.
	* math/Makefile (tests): Add `test-fpucw-ieee' and
	`$(tests-static)'.
	(tests-static): New variable.
	[($(build-shared),yes)] ($(addprefix $(objpfx),$(tests))): Move
	dependency to...
	[($(build-shared),yes)]
	($(addprefix $(objpfx),$(filter-out $(tests-static),$(tests)))):
	... this.
	[($(build-shared),yes)] ($(addprefix $(objpfx),$(tests-static))):
	New dependency.

2013-09-09  Allan McRae  <allan@archlinux.org>

	[BZ #15939]
	* manual/string.texi (Collation Functions): Fix typo in
	strcoll example.
	Reported by Suren Karapetyan <me@suren.karapetyan.name>.

	[BZ #15893]
	* stdlib/isomac.c (get_null_defines): Fix memory leak.

	[BZ #15892]
	* libio/memstream.c (open_memstream): Fix memory leak.
	* libio/wmemstream.c (open_wmemstream): Likewise.

	[BZ #15895]
	* nscd/netgroupcache.c: Fix nesting of ifdefs.

2013-09-09  Will Newton  <will.newton@linaro.org>

	* malloc/Makefile: Add tst-realloc to tests.
	* malloc/tst-realloc.c: New file.

2013-09-09  Allan McRae  <allan@archlinux.org>

	[BZ #15844]
	* COPYING: Update from GNU website to fix FSF address.
	* COPYING.LIB: Likewise.

2013-09-06  David S. Miller  <davem@davemloft.net>

	* po/zh_TW.po: Update Chinese (traditional) translation from
	translation project.

2013-09-06  Richard Sandiford  <richard@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* locale/programs/locfile.c: Include <assert.h>, <wchar.h> and
	"localeinfo.h".
	(obstack_chunk_alloc): New macro.
	(obstack_chunk_free): Likewise.
	(record_offset): New function.
	(init_locale_data): Likewise.
	(align_locale_data): Likewise.
	(add_locale_empty): Likewise.
	(add_locale_raw_data): Likewise.
	(add_locale_raw_obstack): Likewise.
	(add_locale_string): Likewise.
	(add_locale_wstring): Likewise.
	(add_locale_uint32): Likewise.
	(add_locale_uint32_array): Likewise.
	(add_locale_char): Likewise.
	(start_locale_structure): Likewise.
	(end_locale_structure): Likewise.
	(start_locale_prelude): Likewise.
	(end_locale_prelude): Likewise.
	(write_locale_data): Take locale_file structure rather than an
	iovec.
	* locale/programs/locfile.h: Include "obstack.h".
	(struct locale_file): Change to store locale file contents instead
	of header.
	(init_locale_data): New prototype.
	(align_locale_data): Likewise.
	(add_locale_empty): Likewise.
	(add_locale_raw_data): Likewise.
	(add_locale_raw_obstack): Likewise.
	(add_locale_string): Likewise.
	(add_locale_wstring): Likewise.
	(add_locale_uint32): Likewise.
	(add_locale_uint32_array): Likewise.
	(add_locale_char): Likewise.
	(start_locale_structure): Likewise.
	(end_locale_structure): Likewise.
	(start_locale_prelude): Likewise.
	(end_locale_prelude): Likewise.
	(write_locale_data): Update prototype.
	* locale/programs/3level.h (struct TABLE): Remove result field.
	(CONCAT(TABLE,_finalize)): Change to CONCAT(add_locale_,TABLE).
	Use new locale_file interface.
	[!NO_FINALIZE]: Change condition to [!NO_ADD_LOCALE].
	(NO_FINALIZE): Change #undef to #undef of NO_ADD_LOCALE.
	* locale/programs/ld-address.c (address_output): Use new
	locale_file interface.
	* locale/programs/ld-collate.c (NO_FINALIZE): Change to
	NO_ADD_LOCALE.
	(collate_finish): Don't call collseq_table_finalize.
	(collate_output): Use new locale_file interface.
	* locale/programs/ld-ctype.c: Move includes of "3level.h" earlier
	in file.
	(NO_FINALIZE): Change to NO_ADD_LOCALE.
	(TABLE): Move defines earlier in file.
	(ELEMENT): Likewise.
	(DEFAULT): Likewise.
	(wctrans_table_add): Move macro and inline function earlier in
	file.
	(struct wctype_table): Move type earlier in file.
	(add_locale_wctype_table): New static prototype.
	(struct locale_ctype_t): Use logical types instead of struct iovec
	pointers for members.
	(ctype_output): Use new locale_file interface.
	(wctype_table_finalize): Change to add_locale_wctype_table.  Use
	new locale_file interface.
	(allocate_arrays): Update for use of new locale_file interface.
	* locale/programs/ld-identification.c (identification_output): Use
	new locale_file interface.
	* locale/programs/ld-measurement.c (measurement_output): Likewise.
	* locale/programs/ld-messages.c (messages_output): Likewise.
	* locale/programs/ld-monetary.c (monetary_output): Likewise.
	* locale/programs/ld-name.c (name_output): Likewise.
	* locale/programs/ld-numeric.c (numeric_output): Likewise.
	* locale/programs/ld-paper.c (paper_output): Likewise.
	* locale/programs/ld-telephone.c (telephone_output): Likewise.
	* locale/programs/ld-time.c (time_output): Likewise.

2013-09-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* benchtests/Makefile: Add memrchr benchmark.
	* benchtests/bench-memchr.c (USE_AS_MEMRCHR): Add define to use
	benchmark as memrchr.
	* benchtests/bench-memrchr-ifunc.c: New file.
	* benchtests/bench-memrchr.c: New file.

2013-09-06   Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile (string-bench): Add memcpy.

2013-09-05  Carlos O'Donell  <carlos@redhat.com>
	    Cong Wang  <amwang@redhat.com>

	[BZ #15850]
	* sysdeps/unix/sysv/linux/bits/in.h
	[_UAPI_LINUX_IN6_H]: Define __USE_KERNEL_IPV6_DEFS.
	* inet/netinet/in.h: Move in_addr definition and bits/in.h inclusion
	before __USE_KERNEL_IPV6_DEFS uses.
	* inet/netinet/in.h [!__USE_KERNEL_IPV6_DEFS]: Define IPPROTO_MH, and
	IPPROTO_BEETPH.
	[__USE_KERNEL_IPV6_DEFS]: Don't define any of IPPROTO_*, in6_addr,
	sockaddr_in6, or ipv6_mreq.

2013-09-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memrchr.S (__memrchr): Fix invalid
	memory access for final bytes in some large inputs.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S (__memrchr): Likewise.

2013-09-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* string/test-memrchr.c: New file.
	* string/test-memrchr-ifunc.c: New file.
	* string/Makefile: Add new memrchr testcase.

2013-09-05  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/tst-fanotify.c (do_test): Skip test when
	fanotify_init returns EPERM.

2013-09-04  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl (newtoken): Treat tokens not allowed as
	errors.
	(top level): Treat second token from macro or constant entries for
	allowed headers as allowed.
	* include/complex.h: Condition internal declarations on
	[!_ISOMAC].
	* include/fenv.h: Condition include of <stdbool.h> and internal
	declarations on [!_ISOMAC].

2013-09-04  Chris Leonard  <cjl@sugarlabs,.org>

	[BZ #15923]
	* locale/iso-4217.def: Update iso-1427.def and related occurrences.

2013-09-04  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (--enable-versioning): Remove configure option.
	(libc_cv_asm_symver_directive): Remove configure test.
	(libc_cv_ld_version_script_option): Likewise.
	(VERSIONING): Remove variable and AC_SUBST.
	(DO_VERSIONING): Remove AC_DEFINE.
	* configure: Regenerated.
	* config.h.in (DO_VERSIONING): Remove macro.
	* Makerules [$(versioning) = yes]: Change conditionals to
	[$(build-shared) = yes].
	* config.make.in (versioning): Remove variable.
	* dlfcn/Makefile [$(versioning) = yes]: Change conditionals to
	[$(build-shared) = yes].
	* dlfcn/modstatic2.c (test) [DO_VERSIONING]: Remove conditional.
	* dlfcn/tststatic2.c (main) [DO_VERSIONING]: Likewise.
	* elf/Makefile [$(versioning) = yes]: Change conditionals to
	[$(build-shared) = yes].
	* extra-lib.mk [$(versioning) = yes]: Likewise.
	* hurd/Makefile [$(versioning) = yes]: Likewise.
	* hurd/geteuids.c [SHARED && DO_VERSIONING]: Change conditional to
	[SHARED].
	* include/libc-symbols.h [DO_VERSIONING]: Change conditional to
	[SHARED].
	[SHARED && DO_VERSIONING && !NO_HIDDEN]: Change conditional to
	[SHARED && !NO_HIDDEN].
	* include/shlib-compat.h [DO_VERSIONING]: Change conditional to
	[SHARED].
	[SHARED && DO_VERSIONING]: Likewise..
	* libio/Makefile [$(versioning) = yes]: Change conditionals to
	[$(build-shared) = yes].
	* manual/install.texi (--disable-versioning): Remove
	documentation.
	* INSTALL: Regenerated.
	* resolv/res_libc.c [SHARED && DO_VERSIONING]: Change conditional
	to [SHARED].
	* sunrpc/Makefile [$(versioning) = yes]: Change conditional to
	[$(build-shared) = yes].
	* sysdeps/gnu/Makefile [$(versioning) = yes]: Likewise.
	* sysdeps/i386/i686/multiarch/strstr-c.c
	[SHARED && DO_VERSIONING && !NO_HIDDEN]: Change conditional to
	[SHARED && !NO_HIDDEN].
	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h
	[SHARED && DO_VERSIONING]: Change conditional to [SHARED].
	* sysdeps/powerpc/powerpc32/dl-machine.c
	[SHARED && !(DO_VERSIONING - 0)]: Remove conditional error.
	* sysdeps/powerpc/powerpc32/sysdep.h
	[SHARED && DO_VERSIONING && PIC && !NO_HIDDEN]: Change conditional
	to [SHARED && PIC && !NO_HIDDEN].
	* sysdeps/wordsize-32/divdi3.c [SHARED && DO_VERSIONING]: Change
	conditional to [SHARED].

2013-09-04   Will Newton  <will.newton@linaro.org>

	* benchtests/bench-timing.h (TIMING_PRINT_MEAN): New macro.
	* benchtests/bench-string.h: Include bench-timing.h instead
	of including hp-timing.h directly. (INNER_LOOP_ITERS): New
	define. (HP_TIMING_BEST): Delete macro. (test_init): Remove
	call to HP_TIMING_DIFF_INIT.
	* benchtests/bench-memccpy.c: Use bench-timing.h macros
	instead of hp-timing.h macros.
	* benchtests/bench-memchr.c: Likewise.
	* benchtests/bench-memcmp.c: Likewise.
	* benchtests/bench-memcpy.c: Likewise.
	* benchtests/bench-memmem.c: Likewise.
	* benchtests/bench-memmove.c: Likewise.
	* benchtests/bench-memset.c: Likewise.
	* benchtests/bench-rawmemchr.c: Likewise.
	* benchtests/bench-strcasecmp.c: Likewise.
	* benchtests/bench-strcasestr.c: Likewise.
	* benchtests/bench-strcat.c: Likewise.
	* benchtests/bench-strchr.c: Likewise.
	* benchtests/bench-strcmp.c: Likewise.
	* benchtests/bench-strcpy.c: Likewise.
	* benchtests/bench-strcpy_chk.c: Likewise.
	* benchtests/bench-strlen.c: Likewise.
	* benchtests/bench-strncasecmp.c: Likewise.
	* benchtests/bench-strncat.c: Likewise.
	* benchtests/bench-strncmp.c: Likewise.
	* benchtests/bench-strncpy.c: Likewise.
	* benchtests/bench-strnlen.c: Likewise.
	* benchtests/bench-strpbrk.c: Likewise.
	* benchtests/bench-strrchr.c: Likewise.
	* benchtests/bench-strspn.c: Likewise.
	* benchtests/bench-strstr.c: Likewise.

2013-09-04  Will Newton  <will.newton@linaro.org>

	* benchtests/Makefile: Use LDLIBS instead of LDFLAGS.

2013-09-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15427]
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c (__ieee754_lgammaf_r): Use
	2**-30 instead of 2**-70 as threshold for returning -log(|x|).
	* math/libm-test.inc (lgamma_test_data): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-09-03   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/strcmp-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Add ifunc.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines):
	Add strcmp-sse2-unaligned
	* sysdeps/x86_64/multiarch/strcmp.S (strcmp): Add ifunc.

2013-09-02  Mike Frysinger  <vapier@gentoo.org>

	* Versions.def (libc): Add GLIBC_2.19.

2013-09-02  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/tst-fanotify.c: New test.
	* sysdeps/unix/sysv/linux/Makefile (tests): Add tst-fanotify.

2013-09-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14155]
	* sysdeps/ieee754/flt-32/e_jnf.c (__ieee754_jnf): Use double for
	intermediate calculations in recurrence.
	(__ieee754_ynf): Likewise.
	* math/libm-test.inc (jn_test_data): Do not allow spurious
	underflow exception.  Add more tests.
	(yn_test_data): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-09-02   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Fix typo.

2013-08-30   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* csu/init-first.c: Fix then/than typos.
	* locale/programs/ld-collate.c: Likewise.
	* locale/programs/linereader.h: Likewise.
	* manual/charset.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* stdlib/fmtmsg.c: Likewise.
	* sysdeps/i386/stpncpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memset.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Likewise.

2013-08-30   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* elf/dl-open.c: Fix typos.
	* iconvdata/gbbig5.c: Likewise.
	* iconvdata/iso-2022-jp.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/loop.c: Likewise.
	* nis/rpcsvc/nis.h: Likewise.
	* resolv/ns_name.c: Likewise.
	* stdio-common/vfscanf.c: Likewise.
	* streams/stropts.h: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sysdeps/i386/strpbrk.S: Likewise.
	* sysdeps/ieee754/k_standard.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/mach/hurd/dl-sysdep.c: Likewise.
	* sysdeps/mach/hurd/profil.c: Likewise.
	* sysdeps/s390/dl-procinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/makecontext.c: Likewise.
	* sysdeps/x86_64/dl-trampoline.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Likewise.

2013-08-30  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/rawmemchr.S: Delete.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Remove rawmemchr ifunc.

2013-08-29  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/unix/sysv/linux/powerpc/aix/aix-dirent.h: Remove
	aix specific files.
	* sysdeps/unix/sysv/linux/powerpc/aix/aix-errno.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/aix-stat.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/aix-termios.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/direntconv.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/errnoconv.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/statconv.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/tcgetattr.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/aix/tcsetattr.c: Likewise.

2013-08-29  Thomas Schwinge  <thomas@codesourcery.com>
	    Roland McGrath  <roland@hack.frob.com>

	* sysdeps/mach/hurd/errnos.awk (BEGIN): Emit ESUCCESS.
	* sysdeps/mach/hurd/bits/errno.h: Regenerate.

2013-08-29  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/i386/init-first.c (init1): Use
	__executable_start symbol instead of _start.

2013-08-29  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/sysv/linux/ldsodefs.h (VALID_ELF_HEADER)
	(VALID_ELF_OSABI, VALID_ELF_ABIVERSION, MORE_ELF_HEADER_DATA):
	Move macros to...
	* sysdeps/gnu/ldsodefs.h: ... this new file.

	* sysdeps/unix/sysv/linux/ldsodefs.h (VALID_ELF_OSABI)
	(VALID_ELF_ABIVERSION, MORE_ELF_HEADER_DATA): Use ELFOSABI_GNU
	instead of ELFOSABI_LINUX.

	[BZ #15522] strtod ("nan(N)") returning a sNaN in some cases
	* stdlib/strtof_l.c (SET_MANTISSA): Rewrite.
	* stdlib/strtod_l.c (SET_MANTISSA): Likewise.
	* sysdeps/ieee754/ldbl-64-128/strtold_l.c (SET_MANTISSA):
	Likewise.
	* sysdeps/ieee754/ldbl-96/strtold_l.c (SET_MANTISSA): Likewise.
	* sysdeps/ieee754/ldbl-128/strtold_l.c (SET_MANTISSA): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/strtold_l.c (SET_MANTISSA):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/ieee754.h
	(ibm_extended_long_double): Add ieee_nan member.
	* stdlib/tst-strtod6.c (test): New function, renamed from do_test.
	(do_test): New function.

	* math/basic-test.c (TEST_CONVERT): New macro, renamed from
	TEST_TRUNC.
	(convert_dfsf_test, convert_tfsf_test, convert_tfdf_test): New
	functions, renamed from truncdfsf_test, trunctfsf_test,
	trunctfdf_test.
	(convert_sfdf_test, convert_sftf_test, convert_dftf_test): New
	functions.
	(do_test): Run all these.

2013-08-29   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* argp/argp-help.c: Fix typos.
	* argp/argp-parse.c: Likewise.
	* debug/backtracesyms.c: Likewise.
	* elf/elf.h: Likewise.
	* malloc/malloc.c: Likewise.
	* nis/nis_print.c: Likewise.
	* resolv/res_comp.c: Likewise.
	* stdlib/stdlib.h: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sysdeps/unix/bsd/ptsname.c: Likewise.
	* sysdeps/unix/sysv/linux/ifaddrs.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext-common.S:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext-common.S:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S:
	Likewise.
	* sysdeps/unix/sysv/linux/ptsname.c: Likewise.

2013-08-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nscd/aicache.c (addhstaiX): Use __glibc_unlikely.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Likewise.

2013-08-27  Mike Frysinger  <vapier@gentoo.org>

	[BZ #15897]
	* dlfcn/Makefile (tests): Add bug-dl-leaf.
	(modules-names): Add bug-dl-leaf-lib and bug-dl-leaf-lib-cb.
	($(objpfx)bug-dl-leaf): New rule.
	($(objpfx)bug-dl-leaf.so): Likewise.
	($(objpfx)bug-dl-leaf.out): Likewise.
	($(objpfx)bug-dl-leaf-lib.so): Likewise.
	($(objpfx)bug-dl-leaf-lib-cb.so): Likewise.
	* dlfcn/bug-dl-leaf.c: New test.
	* dlfcn/bug-dl-leaf-lib.c: Likewise.
	* dlfcn/bug-dl-leaf-lib-cb.c: Likewise.
	* dlfcn/dlfcn.h (dlopen): Change __THROW to __THROWNL.
	(dlclose): Likewise.
	(dlmopen): Likewise.

2013-08-27  Roland McGrath  <roland@hack.frob.com>

	* include/netdb.h [!_ISOMAC]:
	Don't include <tls.h>.
	(h_errno, __libc_h_errno): Move declaration and macros out of
	[_LIBC_REENTRANT].

	* include/resolv.h [_RESOLV_H_]:
	Don't include <tls.h>.
	(__resp, _res): Move declaration and macro out of [_LIBC_REENTRANT].
	* resolv/res_libc.c: Don't include <tls.h>.
	(_res): Use __attribute__ ((nocommon)) in place of
	__attribute__ ((section (".bss"))).

	* Makefile ($(common-objpfx)linkobj/libc_pic.a):
	If [sunrpc not in $(subdirs)], define to use libc_pic.a directly.

	* resolv/res_send.c (send_dg): Don't try to use ioctl unless [FIONREAD].

	* resolv/res_hconf.c [!NOT_IN_libc] (ifaddrs): Declare
	only under [SIOCGIFCONF && SIOCGIFNETMASK].

	* resolv/res_mkquery.c: Include <sys/time.h>.

	* inet/ifreq.c: Moved to ...
	* sysdeps/unix/ifreq.c: ... here.
	* inet/ifreq.c: New file, true stub version.

	* socket/sa_len.c: New file.
	* socket/Makefile (aux): Add it.
	* sysdeps/unix/sysv/linux/Makefile
	[$(subdir) = socket] (sysdep_routines): Don't add sa_len here.
	* sysdeps/unix/sysv/linux/sa_len.c: Just #define HAVE_NET*_H
	and #include <socket/sa_len.c>.
	* sysdeps/unix/sysv/linux/s390/sa_len.c: Just #define
	HAVE_NETIUCV_IUCV_H and #include <sysdeps/unix/sysv/linux/sa_len.c>.

	* sysdeps/unix/bsd/bsd4.4/bits/socket.h: Moved to ...
	* bits/socket.h: ... here.

	* sysdeps/unix/bsd/bsd4.4/bits/socket.h (enum __socket_type):
	Add SOCK_CLOEXEC, SOCK_NONBLOCK with values from FreeBSD.
	(SOCK_MAX, SOCK_TYPE_MASK): New macros.

2013-08-27  Andreas Schwab  <schwab@suse.de>

	[BZ #15736]
	* locale/categories.def (LC_CTYPE): Add "nonascii-case" element.
	* string/Makefile (test-strcasecmp-ENV, test-strncasecmp-ENV)
	(test-strcasecmp-ifunc-ENV, test-strncasecmp-ifunc-ENV): Define.
	* string/test-strcasecmp.c (test_main): Run tests in several
	locales.
	* string/test-strncasecmp.c (test_main): Likewise.

	* sysdeps/i386/i686/multiarch/strcmp-sse4.S (__strcasecmp_sse4_2)
	(__strncasecmp_sse4_2) [PIC]: Restore %ebx before falling through
	to __strcasecmp_nonascii and __strncasecmp_nonascii.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S (__strcasecmp_ssse3)
	(__strncasecmp_ssse3) [PIC]: Likewise.

2013-08-26  Roland McGrath  <roland@hack.frob.com>

	* io/lxstat64.c: Just call __xstat64, for parity with stub __lxstat.

	* nss/nss_files/files-key.c: Include <rpc/des_crypt.h>
	instead of explicitly declaring xdecrypt.
	* nis/nss_nis/nis-publickey.c: Likewise.

2013-08-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15890]
	* nscd/aicache.c: Include res_hconf.h.
	(addhstaiX): Initialize res_hconf.

2013-08-26  Andreas Schwab  <schwab@suse.de>

	* stdlib/Makefile (LDFLAGS-tst-tls-atexit): Remove.
	($(objpfx)tst-tls-atexit): Add dependencies here instead.

2013-08-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* nscd/aicache.c (addhstaiX): Fix indentation.

2013-08-25  Mike Frysinger  <vapier@gentoo.org>

	* configure.ac: Quote $build_pt_chown test.
	* configure: Regenerated.

2013-08-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15532]
	* math/s_cexp.c (__cexp): Return NaN + i0 for NaN + i0 argument.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/libm-test.inc (cexp_test_data): Correct expected return
	value for NaN + i0.  Add another test.

2013-08-22  David S. Miller  <davem@davemloft.net>

	* po/ca.po: Update Catalan translation from translation project.
	* po/uk.po: Add Ukrainian translations from translation project.

2013-08-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15797]
	* math/s_fdim.c (__fdim): Check for infinite arguments if result
	is infinite, not alongside NaN test.
	* math/s_fdimf.c (__fdimf): Likewise.
	* math/s_fdiml.c (__fdiml): Likewise.
	* math/libm-test.inc (fdim_test_data): Add more tests.  Test that
	errno is unchanged.

2013-08-21   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* argp/argp-help.c: Fix typos.
	* crypt/speeds.c: Likewise.
	* csu/check_fds.c: Likewise.
	* elf/dl-load.c: Likewise.
	* elf/dl-open.c: Likewise.
	* elf/reldep3.c: Likewise.
	* elf/reldep.c: Likewise.
	* elf/sprof.c: Likewise.
	* iconv/iconv_charmap.c: Likewise.
	* iconv/skeleton.c: Likewise.
	* iconv/strtab.c: Likewise.
	* io/lockf64.c: Likewise.
	* libio/libioP.h: Likewise.
	* resolv/gai_notify.c: Likewise.
	* resolv/ns_name.c: Likewise.
	* resolv/ns_samedomain.c: Likewise.
	* resolv/res_send.c: Likewise.
	* stdlib/random.c: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sysdeps/i386/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S: Likewise.
	* sysdeps/mach/hurd/check_fds.c: Likewise.
	* sysdeps/powerpc/powerpc32/cell/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/setjmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/cell/memcpy.S: Likewise.
	* sysdeps/pthread/aio_notify.c: Likewise.
	* sysdeps/sparc/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/unix/sysv/linux/socketcall.h: Likewise.
	* sysdeps/x86_64/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86/fpu/bits/fenv.h: Likewise.

2013-08-21  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/strcmp.S: Skip SSE4_2
	version if bit_Slow_SSE4_2 is set.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Likewise.

2013-07-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15867]
	* sysdeps/powerpc/powerpc32/backtrace.c (__backtrace): Handle signal
	trampoline stack frame information.
	* sysdeps/powerpc/powerpc64/backtrace.c (__backtrace): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h
	(__vdso_sigtramp_rt64): New variable: PPC64 signal trampoline.
	(__vdso_sigtramp32): New variable: PPC32 signal trampoline.
	(__vdso_sigtramp_rt32): New variable: PPC32 signal trampoline.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c
	(_libc_vdso_platform_setup): Initialize the signal trampolines.
	* debug/tst-backtrace5.c (fn): Add an option set modify sigaction
	sa_flags value.
	* debug/tst-backtrace6.c: New file: check backtrace for signal frames,
	interrupting a syscall and set with option SA_SIGINFO.

2013-08-20  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15531]
	* math/s_cproj.c (__cproj): Only return an infinity if one part of
	argument is infinite.
	* math/s_cprojf.c (__cprojf): Likewise.
	* math/s_cprojl.c (__cprojl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_cprojl.c (__cprojl): Likewise.
	* math/libm-test.inc (cproj_test_data): Add more tests.

	* sysdeps/unix/sysv/linux/mmap64.c: Include <string.h>.

	* sysdeps/unix/sysv/linux/mmap64.c (__mmap64)
	[MMAP2_PAGE_SHIFT == -1]: Use __getpagesize to determine page
	size.  Use __ffs to determine corresponding shift.

2013-08-20  Joseph Myers  <joseph@codesourcery.com>
	    Roland McGrath  <roland@hack.frob.com>

	* Makefile (INSTALL): Remove trailing blank lines from output of
	makeinfo.

2013-08-20  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/sys/procfs.h (struct elf_prstatus):
	Align 32 bit compat elf_greg to 8 bytes.

2013-08-20  Andreas Arnez  <arnez@linux.vnet.ibm.com>

	* elf/setup-vdso.h (setup_vdso): Fix missing string termination.

2013-08-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* string/strcoll_l.c (coll_seq): New structure.
	(get_next_seq_cached): New function.
	(get_next_seq): New function.
	(do_compare): New function.
	(STRCOLL): Use GNU style definition.  Simplify implementation
	by using get_next_seq, get_next_seq_cached and do_compare.

2013-08-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #14699]
	CVE-2013-4237
	* sysdeps/posix/dirstream.h (struct __dirstream): Add errcode
	member.
	* sysdeps/posix/opendir.c (__alloc_dir): Initialize errcode
	member.
	* sysdeps/posix/rewinddir.c (rewinddir): Reset errcode member.
	* sysdeps/posix/readdir_r.c (__READDIR_R): Enforce NAME_MAX limit.
	Return delayed error code.  Remove GETDENTS_64BIT_ALIGNED
	conditional.
	* sysdeps/unix/sysv/linux/wordsize-64/readdir_r.c: Do not define
	GETDENTS_64BIT_ALIGNED.
	* sysdeps/unix/sysv/linux/i386/readdir64_r.c: Likewise.
	* manual/filesys.texi (Reading/Closing Directory): Document
	ENAMETOOLONG return value of readdir_r.  Recommend readdir more
	strongly.
	* manual/conf.texi (Limits for Files): Add portability note to
	NAME_MAX, PATH_MAX.
	(Pathconf): Add portability note for _PC_NAME_MAX, _PC_PATH_MAX.

2013-08-13  Andreas Schwab  <schwab@suse.de>

	[BZ #15749]
	* sysdeps/ieee754/ldbl-96/s_cbrtl.c (__cbrtl): Use fabsl instead
	of fabs.
	* math/libm-test.inc (cbrt_test_data) [TEST_LDOUBLE &&
	LDBL_MAX_EXP >= 16384]: Add tests for it.

2013-08-12  David S. Miller  <davem@davemloft.net>

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.18.90".
	* NEWS: Add 2.19 section.

2013-08-03  David S. Miller  <davem@davemloft.net>

	* po/ko.po: Update Korean translation from translation project.

2013-08-01  David S. Miller  <davem@davemloft.net>

	* manual/contrib.texi: Update entry for Siddhesh Poyarekar.  Add
	entries for Will Newton, Andi Kleen, David Holsgrove, and Ond≈ôej
	B√≠lka.

2013-07-30  David S. Miller  <davem@davemloft.net>

	* po/fr.po: Update French translation from translation project.

2013-07-28  David S. Miller  <davem@davemloft.net>

	* po/cs.po: Update Czech translation from translation project.

	* po/sv.po: Update Swedish translation from translation project.

2013-07-27  David S. Miller  <davem@davemloft.net>

	* po/eo.po: Update Esperanto translation from translation project.

	* po/vi.po: Update Vietnamese translation from translation project.

	* po/de.po: Update German translation from translation project.

2013-07-26  David S. Miller  <davem@davemloft.net>

	* po/bg.po: Update Bulgarian translation from translation project.

	* po/nl.po: Update Dutch translation from translation project.
	* po/pl.po: Update Polish translation from translation project.
	* po/ru.po: Update Russian translation from translation project.

2013-07-24  David S. Miller  <davem@davemloft.net>

	* po/libc.pot: Update.

2013-07-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/dl-static.c: New file to support
	variable page size.
	* sysdeps/unix/sysv/linux/powerpc/ldsodefs.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/Makefile: Build dl-static in elf.
	* sysdeps/unix/sysv/linux/powerpc/Versions: Add _dl_var_init.

2013-07-22  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Refresh.

2013-07-21  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Andreas Schwab  <schwab@suse.de>
	    Roland McGrath  <roland@hack.frob.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Carlos O'Donell  <carlos@redhat.com>

	[BZ #15755]
	* config.h.in: Define HAVE_PT_CHOWN.
	* config.make.in (build-pt-chown): New variable.
	* configure.in (--enable-pt_chown): New configure option.
	* configure: Regenerate.
	* login/Makefile: Include Makeconfig.  Build pt_chown only if
	build-pt-chown is enabled.
	* sysdeps/unix/grantpt.c (grantpt) [HAVE_PT_CHOWN]: Spawn
	pt_chown to fix pty ownership.
	* sysdeps/unix/sysv/linux/grantpt.c [HAVE_PT_CHOWN]: Define
	CLOSE_ALL_FDS.
	* manual/install.texi (Configuring and compiling): Mention
	--enable-pt_chown. Add @findex for grantpt.
	* INSTALL: Regenerate.

2013-07-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update ULPs to handle minor
	difference between 32-bit and 64-bit.

2013-07-15  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15711]
	* sysdeps/unix/sysv/linux/Makefile ($(objpfx)bits/syscall%h):
	Avoid system header dependency with -ffreestanding.
	($(objpfx)bits/syscall%d): Likewise.

2013-07-13  David S. Miller  <davem@davemloft.net>

	* math/libm-test.inc (casin_test_data): Annotate more cases of missing
	underflows from atanl/atan2l due to bug 15319.
	(casinh_test_data): Likewise.

2013-07-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Regenerate from scratch.

2013-07-05  Jeroen Albers  <_jeroen_@yahoo.com>

	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-07-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* configure.in (--enable-lock-elision): Fix message text.
	* INSTALL: Regenerate.
	* configure: Regenerate.

2013-07-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-07-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sys/ptrace.h (PTRACE_LISTEN): Add
	define.
	(PTRACE_PEEKSIGINFO): Add new value from Linux 3.10.
	(ptrace_peeksiginfo_args): Add.
	(__ptrace_peeksiginfo_flags): Add.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.

2013-07-03  Allan McRae  <allan@archlinux.org>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2013-07-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-07-02  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2013-07-02  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/libm-test-ulps: Regenerated.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-07-02  Andi Kleen <ak@linux.intel.com>

	* config.h.in (ENABLE_LOCK_ELISION): Add.
	* configure.in (--enable-lock-elision): Add option.
	* manual/install.texi: Document --enable lock elision.
	* configure: Regenerate
	* INSTALL: Regenerate.

2013-07-02  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/strcasecmp.S (__strcasecmp): Enable
	SSE4.2 strcasecmp for libc.a.
	* sysdeps/i386/i686/multiarch/strncase.S (__strncasecmp): Likewise.

2013-07-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13304]
	* soft-fp/op-common.h (_FP_FMA): New macro.
	* soft-fp/op-1.h (_FP_FRAC_HIGHBIT_DW_1): New macro.
	(_FP_MUL_MEAT_DW_1_imm): Likewise.  Split out of ...
	(_FP_MUL_MEAT_1_imm): ... here.
	(_FP_MUL_MEAT_DW_1_wide): New macro.  Split out of ...
	(_FP_MUL_MEAT_1_wide): ... here.
	(_FP_MUL_MEAT_DW_1_hard): Likewise.  Split out of ...
	(_FP_MUL_MEAT_1_hard): ... here.
	* soft-fp/op-2.h (_FP_FRAC_HIGHBIT_DW_2): New macro.
	(_FP_MUL_MEAT_DW_2_wide): Likewise.  Split out of ...
	(_FP_MUL_MEAT_2_wide): ... here.
	(_FP_MUL_MEAT_DW_2_wide_3mul): New macro.  Split out of ...
	(_FP_MUL_MEAT_2_wide_3mul): ... here.
	(_FP_MUL_MEAT_DW_2_gmp): New macro.  Split out of ...
	(_FP_MUL_MEAT_2_gmp): ... here.
	* soft-fp/op-4.h (_FP_FRAC_HIGHBIT_DW_4): New macro.
	(_FP_MUL_MEAT_DW_4_wide): Likewise.  Split out of ...
	(_FP_MUL_MEAT_4_wide): ... here.
	(_FP_MUL_MEAT_DW_4_gmp): New macro.  Split out of ...
	(_FP_MUL_MEAT_4_gmp): ... here.
	* soft-fp/single.h (_FP_FRACTBITS_DW_S): New macro.
	(_FP_WFRACBITS_DW_S): Likewise.
	(_FP_WFRACXBITS_DW_S): Likewise.
	(_FP_HIGHBIT_DW_S): Likewise.
	(FP_FMA_S): Likewise.
	(_FP_FRAC_HIGH_DW_S): Likewise.
	* soft-fp/double.h (_FP_FRACTBITS_DW_D): New macro.
	(_FP_WFRACBITS_DW_D): Likewise.
	(_FP_WFRACXBITS_DW_D): Likewise.
	(_FP_HIGHBIT_DW_D): Likewise.
	(FP_FMA_D): Likewise.
	(_FP_FRAC_HIGH_DW_D): Likewise.
	* soft-fp/extended.h (_FP_FRACTBITS_DW_E): New macro.
	(_FP_WFRACBITS_DW_E): Likewise.
	(_FP_WFRACXBITS_DW_E): Likewise.
	(_FP_HIGHBIT_DW_E): Likewise.
	(FP_FMA_E): Likewise.
	(_FP_FRAC_HIGH_DW_E): Likewise.
	* soft-fp/quad.h (_FP_FRACTBITS_DW_Q): New macro.
	(_FP_WFRACBITS_DW_Q): Likewise.
	(_FP_WFRACXBITS_DW_Q): Likewise.
	(_FP_HIGHBIT_DW_Q): Likewise.
	(FP_FMA_Q): Likewise.
	(_FP_FRAC_HIGH_DW_Q): Likewise.
	* soft-fp/fmasf4.c: New file.
	* soft-fp/fmadf4.c: Likewise.
	* soft-fp/fmatf4.c: Likewise.

2013-06-28  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): Set
	bit_Slow_SSE4_2 and bit_Prefer_PMINUB_for_stringop for Intel
	Silvermont.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Slow_SSE4_2): New
	macro.
	(index_Slow_SSE4_2): Likewise.
	(index_Prefer_PMINUB_for_stringop): Likewise.
	* sysdeps/x86_64/multiarch/strchr.S: Skip SSE4.2 version if
	bit_Slow_SSE4_2 is set.
	* sysdeps/x86_64/multiarch/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.

2013-06-28  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile: Add comment about generating an offset to
	rtld_global._dl_hwcap2.
	* sysdeps/powerpc/bits/hwcap.h: Added PPC_FEATURE2_* definitions for
	POWER8.
	* sysdeps/powerpc/dl-procinfo.c (_dl_powerpc_cap_flags): Extend for
	POWER8 feature descriptions defined in _dl_hwcap2.
	* sysdeps/powerpc/dl-procinfo.h (_dl_procinfo): Implement AT_HWCAP2
	string handling for POWER8 feature bits.
	(_DL_HWCAP_COUNT): Increment to 64 to cover AT_HWCAP2 bits.
	(_DL_HWCAP_LAST): New definition for position of last AT_HWCAP bit in
	_dl_powerpc_cap_flags.
	(_DL_HWCAP2_LAST): New definition for last usable bit of AT_HWCAP2.
	* sysdeps/powerpc/rtld-global-offsets.sym
	(RTLD_GLOBAL_RO_DL_HWCAP2_OFFSET): New offset macro to locate
	_dl_hwcap2 in the rtld_global_ro structure.

2013-06-28  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* elf/dl-support.c (_dl_hwcap2): Add a new hwcap field for more
	hardware capabilities in support of AT_HWCAP2.
	(_dl_aux_init): Read AT_HWCAP2 into GLRO(dl_hwcap2).
	* elf/dl-sysdep.c (_dl_sysdep_start): Read AT_HWCAP2 into
	GLRO(dl_hwcap2).
	(_dl_show_auxv): Add support for calling _dl_procinfo to display
	AT_HWCAP2.  If a platform doesn't chose to handle displaying AT_HWCAP2
	explicitly the unknown a_type display mechanism is used.
	* misc/getauxval.c (__getauxval): Return GLRO(dl_hwcap2) on AT_HWCAP2.
	* sysdeps/generic/ldsodefs.h (rtld_global_ro): Add _dl_hwcap2 as a new
	struct member.
	* sysdeps/generic/dl-procinfo.h (_dl_procinfo): Add TYPE parameter
	to macro prototype for AT_HWCAP2 support.
	* sysdeps/i386/dl-procinfo.h: Likewise.
	* sysdeps/s390/dl-procinfo.h: Likewise.
	* sysdeps/powerpc/dl-procinfo.h (_dl_procinfo): Add TYPE parameter to
	macro prototype for AT_HWCAP2 support.  Make WORD unsigned long int
	rather than signed int.  Stub in handler for TYPE == AT_HWCAP2 to
	return -1 for unknown a_type display fallback.
	* sysdeps/sparc/dl-procinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/dl-procinfo.h: Likewise.

2013-06-28  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/mmap64.c (__mmap64): Shift by page_shift
	instead of MMAP2_PAGE_SHIFT in call to INLINE_SYSCALL.

2013-06-28  Pierre Ynard  <linkfanel@yahoo.fr>

	[BZ #12492]
	* elf/dl-load.c (_dl_map_object_from_fd): Test for failure of
	mprotect making __stack_prot writable.

2013-06-28  Nathan Froyd  <froydnj@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* elf/dl-profile.c (struct here_cg_arc_record): Declare 'count'
	as being properly aligned.

2013-06-28  Maciej W. Rozycki  <macro@codesourcery.com>

	* dlfcn/modstatic5.c: New file.
	* dlfcn/tststatic5.c: New file.
	* dlfcn/Makefile (tests): Add tststatic5.
	(tests-static): Likewise.
	(modules-names): Add modstatic5.
	(tststatic5-ENV): New variable.
	($(objpfx)tststatic5, $(objpfx)tststatic5.out): New dependencies.

	[BZ #15022]
	* elf/dl-support.c (_dl_main_map): New variable.
	(_dl_ns): Use it to initialize [LM_ID_BASE] element.
	(_dl_nns, _dl_load_adds): Set to 1.
	(_dl_initial_searchlist): Refer to _dl_main_map.
	(_dl_non_dynamic_init): Initialize _dl_main_map.l_origin.
	* elf/dl-load.c (_dl_dst_substitute) [!SHARED]: Remove fallback
	call to _dl_get_origin.
	* elf/dl-open.c (dl_open_worker): Remove !SHARED special casing
	around call_map.
	(_dl_open) [!SHARED]: Remove code to initialize GL(dl_nns).
	* dlfcn/modstatic3.c: New file.
	* dlfcn/tststatic3.c: New file.
	* dlfcn/tststatic4.c: New file.
	* dlfcn/Makefile (tests): Add tststatic3 and tststatic4.
	(tests-static): Likewise.
	(modules-names): Add modstatic3.
	(tststatic3-ENV, tststatic4-ENV): New variables.
	($(objpfx)tststatic3, $(objpfx)tststatic3.out): New dependencies.
	($(objpfx)tststatic4, $(objpfx)tststatic4.out): Likewise.

2013-06-26  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (CC): Require GCC version 4.4 or later.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Update GCC version
	requirement.
	* INSTALL: Regenerated.

2013-06-26  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	[BZ #15674]
	* string/test-memcmp.c (check2): New.
	(main): Call check2.

	* sysdeps/x86_64/multiarch/memcmp-ssse3.S: Fix buffers overrun.

2013-06-26  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #15022]
	* elf/dl-open.c (_dl_open) [!SHARED]: Move call to DL_STATIC_INIT
	over to...
	(dl_open_worker) [!SHARED]: ... here.

2013-06-26  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* elf/elf.h (AT_HWCAP2): Add a new a_type entry.

2013-06-25  Richard Henderson  <rth@redhat.com>

	* locale/programs/locarchive.c: Include <libc-internal.h>

2013-06-25  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2013-06-21.17, with
	trailing whitespace removed.

2013-06-24  Mike Frysinger  <vapier@gentoo.org>

	[BZ #10283]
	* locale/locarchive.h (struct locarhandle): Add mmap_base and mmap_len.
	* locale/programs/locarchive.c: Include libc-mmap.h.
	(prepare_address_space): Take two new outputs (the mmap base and len).
	Align p to MAP_FIXED_ALIGNMENT.  Set mmap base and len to the right
	values.
	(create_archive): Declare new mmap base and len values for
	prepare_address_space, and store the result in ah.
	(file_data_available_p): Replace pagesz with MAP_FIXED_ALIGNMENT.
	(enlarge_archive): If ah->mmap_base is not NULL, use that and
	ah->mmap_len to unmap rather than ah->addr and ah->reserved.
	Declare new mmap base and len values for
	prepare_address_space, and store the result in new_ah.
	(open_archive): Declare new mmap base and len values for
	prepare_address_space, and store the result in ah.
	(close_archive): If ah->mmap_base is not NULL, use that and
	ah->mmap_len to unmap rather than ah->addr and ah->reserved.
	* sysdeps/generic/libc-mmap.h: New file.

2013-06-24  Mike Frysinger  <vapier@gentoo.org>

	* include/libc-internal.h (ALIGN_DOWN): New helper macro.
	(ALIGN_UP): Likewise.
	(PTR_ALIGN_DOWN): Likewise.
	(PTR_ALIGN_UP): Likewise.

2013-06-24  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c (_dl_powerpc_platforms): Add "power8"
	entry mapped to PPC_PLATFORM_POWER8.
	* sysdeps/powerpc/dl-procinfo.h (_DL_PLATFORMS_COUNT): Increment for
	POWER8.
	(PPC_PLATFORM_POWER8): Add new platform bit for POWER8 processor.
	(_dl_string_platform): Add case for exporting platform position for
	POWER8.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power8/Implies: Chain
	search path to sysdeps/powerpc/powerpc32/power8 directory.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power8/Implies: Chain
	search path to sysdeps/powerpc/powerpc64/power8 directory.
	* sysdeps/powerpc/powerpc32/power8/Implies: Chain search path to
	power7 directories.
	* sysdeps/powerpc/powerpc64/power8/Implies: Chain search path to
	power7 directories.

2013-06-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* INSTALL: Regenerate.

	* nscd/connections.c (nscd_init): Fix comment.

2013-06-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/libc_fatal.c: Include <string.h>.

	[BZ #15667]
	* soft-fp/op-4.h (__FP_FRAC_ADD_3): Rename variables _c1 and _c2
	to __FP_FRAC_ADD_3_c1 and __FP_FRAC_ADD_3_c2.

2013-06-21  Maciej W. Rozycki  <macro@codesourcery.com>

	* elf/dl-dst.h (DL_DST_REQUIRED): Remove call to
	DL_DST_REQ_STATIC.
	(DL_DST_REQ_STATIC): Remove macro.

2013-06-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #7006]
	* soft-fp/op-common.h (_FP_FROM_INT): Do not call _FP_FRAC_SLL
	with a shift of 0 bits.

2013-06-21  Maciej W. Rozycki  <macro@codesourcery.com>

	* dlfcn/Makefile (tststatic2-ENV): Redefine in terms of
	$(tststatic-ENV).

2013-06-21  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	[BZ #15655]
	* sysdeps/sh/sh4/fpu/fgetexcptflg.c: New file.

2013-06-20  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* config.h.in (HAVE_CC_INHIBIT_LOOP_TO_LIBCALL): New define.
	* configure.in (libc_cv_cc_loop_to_function): Check if compiler
	accepts -fno-tree-loop-distribute-patterns.
	* include/libc-symbols.h (inhibit_loop_to_libcall): New macro.
	* string/memmove.c (MEMMOVE): Disable loop transformation to avoid
	recursive call.
	* string/memset.c (memset): Likewise.
	* string/test-memmove.c (simple_memmove): Disable loop transformation
	to library calls.
	* string/test-memset.c (simple_memset): Likewise.
	* benchtests/bench-memmove.c (simple_memmove): Likewise.
	* benchtests/bench-memset.c (simple_memset): Likewise.
	* configure: Regenerated.

2013-06-20  Joseph Myers  <joseph@codesourcery.com>

	* math/test-misc.c (main): Ignore fesetround failure when failures
	of subsequent rounding tests would be ignored.

	[BZ #15654]
	* math/fedisblxcpt.c (fedisableexcept): Return 0.
	* math/feenablxcpt.c (feenableexcept): Return 0 for argument 0.
	* math/fegetenv.c (__fegetenv): Return 0.
	* math/fegetexcept.c (fegetexcept): Return 0.
	* math/fegetround.c (fegetround) [FE_TONEAREST]: Return
	FE_TONEAREST.
	* math/feholdexcpt.c (feholdexcept): Return 0.
	* math/fesetenv.c (__fesetenv): Return 0.
	* math/fesetround.c (fesetround) [FE_TONEAREST]: Return 0 for
	argument FE_TONEAREST.
	* math/feupdateenv.c (__feupdateenv): Return 0.
	* math/fgetexcptflg.c (__fegetexceptflag): Return 0.

2013-06-18  Roland McGrath  <roland@hack.frob.com>

	* elf/rtld-Rules (rtld-compile-command.S): New variable.
	(rtld-compile-command.s, rtld-compile-command.c): New variables.
	($(objpfx)rtld-%.os rules): Use them.

2013-06-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* nptl/sysdeps/powerpc/tls.h (tcbhead_t): Add Event-Based Branch
	fields.

2013-06-17  Roland McGrath  <roland@hack.frob.com>

	* scripts/sysd-rules.awk: Sort sysd_rules_patterns by descending
	length of target pattern, then descending length of dependency pattern.
	* configure.in (AWK): Require gawk 3.1.2 or newer.
	* manual/install.texi (Tools for Compilation): Say that we do.
	* configure: Regenerated.

	* Makerules [inhibit-sysdep-asm] (check-inhibit-asm): Variable removed.
	($(common-objpfx)sysd-rules): Replace shell logic with running ...
	* scripts/sysd-rules.awk: ... this new script.
	* sysdeps/mach/hurd/Makefile (inhibit-sysdep-asm): Use a regexp rather
	than a glob-style pattern.

2013-06-17  Joseph Myers  <joseph@codesourcery.com>

	* math/test-misc.c (main): Do not treat incorrectly rounded
	conversions as failure unless ROUNDING_TESTS passes.

2013-06-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15631]
	* sysdeps/ieee754/dbl-64/e_sqrt.c (__ieee754_sqrt): Save and
	restore exception state around main square root computation, then
	check for inexactness explicitly.

	* math/libm-test.inc (fma_test_data): Add another test.

2013-06-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/threads.texi (Non-POSIX Extensions): New document
	node.  Document pthread_getattr_default_np and
	pthread_setattr_default_np.

	* Versions.def (libpthread): Add GLIBC_2.18.
	* sysdeps/unix/sysv/linux/i386/nptl/libpthread.abilist: Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libpthread.abilist:
	Likewise.

2013-06-14  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_Fast_Unaligned_Load for Intel Silvermont architecture.

2013-06-14  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    H.J. Lu  <hjl.tools@gmail.com>

	[BZ #15627]
	* sysdeps/x86_64/rtld-memset.c: Remove file.
	* sysdeps/x86_64/rtld-memset.S: New file.

2013-06-14  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/tst-strtod-round.c: Include <math-tests.h>.
	(test_in_one_mode): Take arguments for whether the rounding mode
	is supported for each floating-point type.
	(do_test): Pass new arguments to test_in_one_mode using
	ROUNDING_TESTS.

2013-06-13  Roland McGrath  <roland@hack.frob.com>

	* posix/tst-waitid.c (do_test): Distinguish different instances of
	stopped/continued in CHECK_SIGCHLD uses.  Insert a delay between
	sending SIGSTOP and calling waitpid to ensure SIGCHLD gets delivered
	before entering the kernel for waitpid.

2013-06-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* NEWS: Fix note on clock function precision.  Text by Roland
	McGrath.

2013-06-13  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile ($(objpfx)ld.so): Link into a temporary file and move
	it into place only when and if the sanity check passes.

2013-06-13  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/gen-tst-strtod-round.c (round_str): Always generate
	output for whether conversion result is exact.  Take argument
	indicating whether type is IBM long double.
	(round_for_all): Change need_exact field to ibm_ld.
	* stdlib/tst-strtod-round.c (struct exactness): New type.
	(struct test): Change bool ld_ok field to struct exactness exact.
	(TEST): Update all definitions for change to field.
	(tests): Regenerate array contents.
	(test_in_one_mode): Take pointer to new field instead of old ld_ok
	field value.  Check for IBM long double here.
	(do_test): Update calls to test_in_one_mode.

2013-06-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #12515]
	* sysdeps/unix/sysv/linux/clock.c (clock): Use result from
	CLOCK_PROCESS_CPUTIME_ID clock instead of __times.

2013-06-12  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15605]
	* sysdeps/generic/symbol-hacks.h: Add workaround for memset/memmove calls
	generated by the compiler on loop optimizations.
	* sysdeps/wordsize-32/symbol-hacks.h: Include next symbol-hacks.h for
	general definitions.

2013-06-12  Joseph Myers  <joseph@codesourcery.com>

	* math/bug-nextafter.c: Include <math-tests.h>.
	(main): Only test for exceptions if EXCEPTION_TESTS is true for
	the relevant type.
	* math/bug-nexttoward.c: Include <math-tests.h>.
	(main): Only test for exceptions if EXCEPTION_TESTS is true for
	the relevant type.
	* math/test-misc.c: Include <math-tests.h>.
	(main): Only test for exceptions if EXCEPTION_TESTS is true for
	the relevant type.

2013-06-12  Andreas Jaeger  <aj@suse.de>

	* po/ia.po: Update Interlingua translation from translation
	project.

2013-06-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/fenv.h: Include stdbool.h.
	(struct rm_ctx): New structure.
	* sysdeps/generic/math_private.h (SET_RESTORE_ROUND_GENERIC):
	Define macro.
	(SET_RESTORE_ROUND): Define using SET_RESTORE_ROUND_GENERIC.
	(SET_RESTORE_ROUNDF): Likewise.
	(SET_RESTORE_ROUNDL): Likewise.
	(SET_RESTORE_ROUND_NOEX): Likewise.
	(SET_RESTORE_ROUND_NOEXF): Likewise.
	(SET_RESTORE_ROUND_NOEXL): Likewise.
	(SET_RESTORE_ROUND_53BIT): Likewise.
	[HAVE_RM_CTX] (libc_feresetround_noex_ctx): Define macro.
	(libc_feresetround_noexf_ctx): Likewise.
	(libc_feresetround_noexl_ctx): Likewise.
	(libc_feholdsetround_53bit_ctx): Likewise.
	(libc_feresetround_53bit_ctx): Likewise.
	* sysdeps/i386/fpu/fenv_private.h (HAVE_RM_CTX): Define macro.
	(libc_feholdexcept_setround_sse_ctx): New function.
	(libc_fesetenv_sse_ctx): Likewise.
	(libc_feupdateenv_sse_ctx): Likewise.
	(libc_feholdexcept_setround_387_prec_ctx): Likewise.
	(libc_feholdexcept_setround_387_ctx): Likewise.
	(libc_feholdexcept_setround_387_53bit_ctx): Likewise.
	(libc_feholdsetround_387_prec_ctx): Likewise.
	(libc_feholdsetround_387_ctx): Likewise.
	(libc_feholdsetround_387_53bit_ctx): Likewise.
	(libc_feholdsetround_sse_ctx): Likewise.
	(libc_feresetround_sse_ctx): Likewise.
	(libc_feresetround_387_ctx): Likewise.
	(libc_feupdateenv_387_ctx): Likewise.
	(libc_feholdexcept_setroundf_ctx): Define macro.
	(libc_fesetenvf_ctx): Likewise.
	(libc_feupdateenvf_ctx): Likewise.
	(libc_feholdsetroundf_ctx): Likewise.
	(libc_feresetroundf_ctx): Likewise.
	(libc_feholdexcept_setround_ctx): Likewise.
	(libc_fesetenv_ctx): Likewise.
	(libc_feupdateenv_ctx): Likewise.
	(libc_feholdsetround_ctx): Likewise.
	(libc_feresetround_ctx): Likewise.
	(libc_feholdexcept_setroundl_ctx): Likewise.
	(libc_feupdateenvl_ctx): Likewise.
	(libc_feholdsetroundl_ctx): Likewise.
	(libc_feresetroundl_ctx): Likewise.
	[!__SSE2_MATH__] (libc_feholdsetround_53bit_ctx): Likewise.
	(libc_feresetround_53bit_ctx): Likewise.

2013-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* locale/iso-639.def: Convert to UTF-8.

2013-06-11  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/math-tests.h (EXCEPTION_TESTS_float): New macro.
	(EXCEPTION_TESTS_double): Likewise.
	(EXCEPTION_TESTS_long_double): Likewise.
	(EXCEPTION_TESTS): Likewise.
	* math/libm-test.inc (test_exceptions): Only test exceptions if
	EXCEPTION_TESTS (FLOAT).

2013-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (string-bench): Add strcpy_chk and
	stpcpy_chk.
	* benchtests/bench-stpcpy_chk-ifunc.c: New file.
	* benchtests/bench-stpcpy_chk.c: New file.
	* benchtests/bench-strcpy_chk-ifunc.c: New file.
	* benchtests/bench-strcpy_chk.c: New file.
	* debug/test-strcpy_chk.c (do_one_test): Remove HP_TIMING
	code.
	(do_test): Likewise.

2013-06-11  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c (_dl_powerpc_platforms): Add ppc405,
	ppc440, ppc464, and ppc476, merging from ports/ dl-procinfo.c.
	* sysdeps/powerpc/dl-procinfo.h: Fix whitespace by correcting spaces
	with tabs where appropriate.
	[PPC_PLATFORM_PPC405]: Define new platform merging from ports/
	dl-procinfo.h.
	[PPC_PLATFORM_PPC440]: Likewise.
	[PPC_PLATFORM_PPC464]: Likewise.
	[PPC_PLATFORM_PPC476]: Likewise.
	(_dl_string_platform): Add support for detecting ppc405, ppc440,
	ppc464, and ppc476 platform strings merging from ports/
	dl-procinfo.h.

2013-06-11  Andreas Schwab  <schwab@suse.de>

	[BZ #14991]
	* iconvdata/big5hkscs.c (big5hkscs_to_ucs, from_ucs4)
	(from_ucs4_idx): Regenerate.
	(MIN_NEEDED_FROM, MAX_NEEDED_FROM, MIN_NEEDED_TO): Remove macros.
	(FROM_LOOP_MIN_NEEDED_FROM, FROM_LOOP_MAX_NEEDED_FROM)
	(FROM_LOOP_MIN_NEEDED_TO, FROM_LOOP_MAX_NEEDED_TO)
	(TO_LOOP_MIN_NEEDED_FROM, TO_LOOP_MAX_NEEDED_FROM)
	(TO_LOOP_MIN_NEEDED_TO, TO_LOOP_MAX_NEEDED_TO, PREPARE_LOOP)
	(EXTRA_LOOP_ARGS, SAVE_RESET_STATE, EMIT_SHIFT_TO_INIT)
	(EXTRA_LOOP_DECLS, MAX_NEEDED_OUTPUT): New macros.
	(MIN_NEEDED_INPUT, MAX_NEEDED_INPUT, MIN_NEEDED_OUTPUT): Define
	from FROM_LOOP and TO_LOOP specific macros.
	(BODY): Handle combining characters.
	* iconvdata/BIG5HKSCS.irreversible: Update.
	* iconvdata/BIG5HKSCS.precomposed: New file.
	* iconvdata/testdata/BIG5HKSCS: Regenerate to cover all assigned
	characters.
	* iconvdata/testdata/BIG5HKSCS..UTF8: Update.

2013-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/sys/time.h: Fix indentation and add copyright header.

	* string/test-memccpy.c (do_one_test): Remove HP_TIMING code.
	(do_test): Likewise.
	* string/test-memchr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-memcmp.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-memcpy.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-memmem.c (do_one_test): Likewise.
	(do_test): Likewise.
	(do_random_tests): Likewise.
	* string/test-memmove.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-memset.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-rawmemchr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcasecmp.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcasestr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcat.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strchr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcmp.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strcpy.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-string.h: Likewise.
	(test_init): Likewise.
	* string/test-strlen.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strncasecmp.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strncat.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strncmp.c (do_one_test): Likewise.
	(do_test_limit): Likewise.
	(do_test): Likewise.
	* string/test-strncpy.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strnlen.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strpbrk.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strrchr.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strspn.c (do_one_test): Likewise.
	(do_test): Likewise.
	* string/test-strstr.c (do_one_test): Likewise.
	(do_test): Likewise.

	* benchtests/Makefile (string-bench): Add string benchmarks.
	* benchtests/bench-bcopy-ifunc.c: New file.
	* benchtests/bench-bcopy.c: New file.
	* benchtests/bench-bzero-ifunc.c: New file.
	* benchtests/bench-bzero.c: New file.
	* benchtests/bench-memccpy-ifunc.c: New file.
	* benchtests/bench-memccpy.c: New file.
	* benchtests/bench-memchr-ifunc.c: New file.
	* benchtests/bench-memchr.c: New file.
	* benchtests/bench-memcmp-ifunc.c: New file.
	* benchtests/bench-memcmp.c: New file.
	* benchtests/bench-memmem-ifunc.c: New file.
	* benchtests/bench-memmem.c: New file.
	* benchtests/bench-memmove-ifunc.c: New file.
	* benchtests/bench-memmove.c: New file.
	* benchtests/bench-mempcpy-ifunc.c: New file.
	* benchtests/bench-mempcpy.c: New file.
	* benchtests/bench-memset-ifunc.c: New file.
	* benchtests/bench-memset.c: New file.
	* benchtests/bench-rawmemchr-ifunc.c: New file.
	* benchtests/bench-rawmemchr.c: New file.
	* benchtests/bench-stpcpy-ifunc.c: New file.
	* benchtests/bench-stpcpy.c: New file.
	* benchtests/bench-stpncpy-ifunc.c: New file.
	* benchtests/bench-stpncpy.c: New file.
	* benchtests/bench-strcasecmp-ifunc.c: New file.
	* benchtests/bench-strcasecmp.c: New file.
	* benchtests/bench-strcasestr-ifunc.c: New file.
	* benchtests/bench-strcasestr.c: New file.
	* benchtests/bench-strcat-ifunc.c: New file.
	* benchtests/bench-strcat.c: New file.
	* benchtests/bench-strchr-ifunc.c: New file.
	* benchtests/bench-strchr.c: New file.
	* benchtests/bench-strchrnul-ifunc.c: New file.
	* benchtests/bench-strchrnul.c: New file.
	* benchtests/bench-strcmp-ifunc.c: New file.
	* benchtests/bench-strcmp.c: New file.
	* benchtests/bench-strcpy-ifunc.c: New file.
	* benchtests/bench-strcpy.c: New file.
	* benchtests/bench-strcspn-ifunc.c: New file.
	* benchtests/bench-strcspn.c: New file.
	* benchtests/bench-strlen-ifunc.c: New file.
	* benchtests/bench-strlen.c: New file.
	* benchtests/bench-strncasecmp-ifunc.c: New file.
	* benchtests/bench-strncasecmp.c: New file.
	* benchtests/bench-strncat-ifunc.c: New file.
	* benchtests/bench-strncat.c: New file.
	* benchtests/bench-strncmp-ifunc.c: New file.
	* benchtests/bench-strncmp.c: New file.
	* benchtests/bench-strncpy-ifunc.c: New file.
	* benchtests/bench-strncpy.c: New file.
	* benchtests/bench-strnlen-ifunc.c: New file.
	* benchtests/bench-strnlen.c: New file.
	* benchtests/bench-strpbrk-ifunc.c: New file.
	* benchtests/bench-strpbrk.c: New file.
	* benchtests/bench-strrchr-ifunc.c: New file.
	* benchtests/bench-strrchr.c: New file.
	* benchtests/bench-strspn-ifunc.c: New file.
	* benchtests/bench-strspn.c: New file.
	* benchtests/bench-strstr-ifunc.c: New file.
	* benchtests/bench-strstr.c: New file.

	* benchtests/Makefile: Disable parallel execution of targets.
	(string-bench): Add memcpy.
	(benchset): New variable to store a list of benchmark sets.
	(bench-func): Renamed from bench.
	(bench-set): New target.
	(bench): Depend on bench-func and bench-set.
	* benchtests/README: Add section on benchmark sets.
	* benchtests/bench-memcpy-ifunc.c: New file.
	* benchtests/bench-memcpy.c: New file.
	* benchtests/bench-string.h: New file.

2013-06-11  Andreas Schwab  <schwab@suse.de>

	[BZ #15577]
	* nscd/connections.c (nscd_run_worker): Always zero-terminate key.
	* nscd/netgroupcache.c (addgetnetgrentX): Properly handle absent
	values in the triple.
	* nscd/nscd_netgroup.c (__nscd_setnetgrent): Include zero
	terminator in the group key.

2013-06-11  Andreas Jaeger  <aj@suse.de>

	* po/zh_TW.po: Update Chinese (traditional) translation from
	translation project.

2013-06-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* include/time.h (__clock_gettime): Add libc_hidden_proto.
	* rt/clock_getcpuclockid.c (clock_getcpuclockid): Rename to
	__clock_getcpuclockid.  Add weak_alias and libc_hidden_def.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c
	(clock_getcpuclockid): Likewise.
	* rt/clock_getres.c (clock_getres): Rename to __clock_getres.
	Add weak_alias and libc_hidden_def.
	* sysdeps/posix/clock_getres.c (clock_getres): Likewise.
	* rt/clock_gettime.c (clock_gettime): Rename to
	__clock_gettime.  Add weak_alias and libc_hidden_def.
	* sysdeps/unix/clock_gettime.c (clock_gettime): Likewise.
	* rt/clock_nanosleep.c (clock_nanosleep): Rename to
	__clock_nanosleep.  Add weak_alias and libc_hidden_def.
	* sysdeps/unix/clock_nanosleep.c (clock_nanosleep): Likewise.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c (clock_nanosleep):
	Likewise.
	* rt/clock_settime.c (clock_settime): Rename to
	__clock_settime.  Add weak_alias and libc_hidden_def.
	* sysdeps/unix/clock_settime.c (clock_settime): Likewise.

2013-06-10  Joseph Myers  <joseph@codesourcery.com>

	* mach/err_boot.sub: Remove trailing whitespace.
	* mach/err_ipc.sub: Likewise.
	* mach/err_mach.sub: Likewise.

	* sysdeps/generic/math-tests.h (ROUNDING_TESTS_float): New macro.
	(ROUNDING_TESTS_double): Likewise.
	(ROUNDING_TESTS_long_double): Likewise.
	(ROUNDING_TESTS): Likewise.
	* math/libm-test.inc: Include <math-tests.h>.
	(IF_ROUND_INIT_FE_DOWNWARD): Use ROUNDING_TESTS.
	(IF_ROUND_INIT_FE_TONEAREST): Likewise.
	(IF_ROUND_INIT_FE_TOWARDZERO): Likewise.
	(IF_ROUND_INIT_FE_UPWARD): Likewise.

2013-06-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (CPPFLAGS-nonlib): Append values instead
	of assigning.

2013-06-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/gnu/errlist.awk: Do not generate space at end of
	otherwise empty TRANS lines.
	* sysdeps/gnu/errlist.c: Regenerated.

	* catgets/gencat.c (error_print): Use (void) in function
	definition.
	* crypt/crypt_util.c (__init_des): Likewise.
	* crypt/speeds.c (Stop): Likewise.
	(main): Likewise.
	* hurd/hurdmalloc.c (print_malloc_free_list): Likewise.
	* inet/ruserpass.c (token): Likewise.
	* intl/finddomain.c (_nl_finddomain_subfreeres): Likewise.
	* intl/localealias.c (extend_alias_table): Likewise.
	* intl/plural-exp.c (init_germanic_plural): Likewise.
	* libio/fcloseall.c (__fcloseall): Likewise.
	* libio/genops.c (_IO_flush_all): Likewise.
	(_IO_flush_all_linebuffered): Likewise.
	(_IO_cleanup): Likewise.
	(_IO_iter_begin): Likewise.
	(_IO_iter_end): Likewise.
	(_IO_list_lock): Likewise.
	(_IO_list_unlock): Likewise.
	(_IO_list_resetlock): Likewise.
	* libio/getchar.c (getchar): Likewise.
	* libio/getchar_u.c (getchar_unlocked): Likewise.
	* libio/getwchar.c (getwchar): Likewise.
	* libio/getwchar_u.c (getwchar_unlocked): Likewise.
	* libio/oldstdfiles.c (_IO_check_libio): Likewise.
	* login/getpt.c (__getpt): Likewise.
	* login/tst-utmp.c (main): Likewise.
	* malloc/hooks.c (__malloc_check_init): Likewise.
	* malloc/malloc.c (__malloc_stats): Likewise.
	* malloc/mtrace.c (tr_break): Likewise.
	(mtrace): Likewise.
	(muntrace): Likewise.
	* misc/fstab.c (endfsent): Likewise.
	* misc/getclktck.c (__getclktck): Likewise.
	* misc/getdtsz.c (__getdtablesize): Likewise.
	* misc/gethostid.c (gethostid): Likewise.
	* misc/getpagesize.c (__getpagesize): Likewise.
	* misc/getsysstats.c (__get_nprocs_conf): Likewise.
	(__get_nprocs): Likewise.
	(__get_phys_pages): Likewise.
	(__get_avphys_pages): Likewise.
	* misc/getttyent.c (getttyent): Likewise.
	(setttyent): Likewise.
	(endttyent): Likewise.
	* misc/getusershell.c (getusershell): Likewise.
	(endusershell): Likewise.
	(setusershell): Likewise.
	(initshells): Likewise.
	* misc/hsearch.c (__hdestroy): Likewise.
	* misc/sync.c (sync): Likewise.
	* misc/syslog.c (closelog_internal): Likewise.
	(closelog): Likewise.
	* misc/ttyslot.c (ttyslot): Likewise.
	* misc/vhangup.c (vhangup): Likewise.
	* posix/fork.c (__fork): Likewise.
	* posix/getegid.c (__getegid): Likewise.
	* posix/geteuid.c (__geteuid): Likewise.
	* posix/getgid.c (__getgid): Likewise.
	* posix/getpid.c (__getpid): Likewise.
	* posix/getppid.c (__getppid): Likewise.
	* posix/getuid.c (__getuid): Likewise.
	* posix/pause.c (pause): Likewise.
	* posix/setpgrp.c (setpgrp): Likewise.
	* posix/setsid.c (__setsid): Likewise.
	* posix/test-vfork.c (noop): Likewise.
	* resolv/gethnamaddr.c (_endhtent): Likewise.
	(_gethtent): Likewise.
	(ht_endhostent): Likewise.
	(gethostent): Likewise.
	(dns_service): Likewise.
	* stdlib/drand48.c (drand48): Likewise.
	* stdlib/lrand48.c (lrand48): Likewise.
	* stdlib/mrand48.c (mrand48): Likewise.
	* stdlib/rand.c (rand): Likewise.
	* stdlib/random.c (__random): Likewise.
	* stdlib/setenv.c (clearenv): Likewise.
	* sunrpc/clnt_tcp.c (clnttcp_abort): Likewise.
	* sunrpc/clnt_unix.c (clntunix_abort): Likewise.
	* sysdeps/mach/getpagesize.c (__getpagesize): Likewise.
	* sysdeps/mach/getsysstats.c (__get_nprocs_conf): Likewise.
	(__get_nprocs): Likewise.
	(__get_phys_pages): Likewise.
	(__get_avphys_pages): Likewise.
	* sysdeps/mach/hurd/dl-sysdep.c (__getpid): Likewise.
	* sysdeps/mach/hurd/getclktck.c (__getclktck): Likewise.
	* sysdeps/mach/hurd/getdtsz.c (__getdtablesize): Likewise.
	* sysdeps/mach/hurd/getegid.c (__getegid): Likewise.
	* sysdeps/mach/hurd/geteuid.c (__geteuid): Likewise.
	* sysdeps/mach/hurd/getgid.c (__getgid): Likewise.
	* sysdeps/mach/hurd/gethostid.c (gethostid): Likewise.
	* sysdeps/mach/hurd/getlogin.c (getlogin): Likewise.
	* sysdeps/mach/hurd/getpid.c (__getpid): Likewise.
	* sysdeps/mach/hurd/getppid.c (__getppid): Likewise.
	* sysdeps/mach/hurd/getuid.c (__getuid): Likewise.
	* sysdeps/mach/hurd/sync.c (sync): Likewise.
	* sysdeps/posix/clock.c (clock): Likewise.
	* sysdeps/unix/bsd/setsid.c (__setsid): Likewise.
	* sysdeps/unix/getpagesize.c (__getpagesize): Likewise.
	* sysdeps/unix/sysv/linux/getclktck.c (__getclktck): Likewise.
	* sysdeps/unix/sysv/linux/gethostid.c (gethostid): Likewise.
	* sysdeps/unix/sysv/linux/getpagesize.c (__getpagesize): Likewise.
	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Likewise.
	(__get_nprocs_conf): Likewise.
	(__get_phys_pages): Likewise.
	(__get_avphys_pages): Likewise.
	* time/clock.c (clock): Likewise.
	* time/tzset.c (__tzname_max): Likewise.

2013-06-07  Joseph Myers  <joseph@codesourcery.com>

	* bits/byteswap.h [__GNUC__ && !__GNUC_PREREQ (4, 3)]
	(__bswap_32): Do not use "register".
	* crypt/crypt.c (_ufc_doit_r): Likewise.
	* debug/stpcpy_chk.c (__stpcpy_chk): Likewise.
	* debug/wcscat_chk.c (__wcscat_chk): Likewise.
	* gmon/gmon.c (__monstartup): Likewise.
	* gmon/mcount.c (_MCOUNT_DECL(frompc, selfpc)): Likewise.
	* hurd/hurdmalloc.c (more_memory): Likewise.
	(malloc): Likewise.
	(free): Likewise.
	(realloc): Likewise.
	(malloc_fork_prepare): Likewise.
	(malloc_fork_parent): Likewise.
	(malloc_fork_child): Likewise.
	* include/rpc/auth_des.h (xdr_authdes_verf): Likewise.
	(_svcauth_des): Likewise.
	* inet/inet_lnaof.c (inet_lnaof): Likewise.
	* inet/inet_net.c (inet_network): Likewise.
	* inet/inet_netof.c (inet_netof): Likewise.
	* inet/rcmd.c (__validuser2_sa): Likewise.
	* io/fts.c (fts_open): Likewise.
	(fts_load): Likewise.
	(fts_close): Likewise.
	(fts_read): Likewise.
	(fts_children): Likewise.
	(fts_build): Likewise.
	(fts_stat): Likewise.
	(fts_sort): Likewise.
	(fts_alloc): Likewise.
	(fts_lfree): Likewise.
	* libio/fileops.c (_IO_new_file_xsputn): Likewise.
	(_IO_file_xsgetn): Likewise.
	(_IO_file_xsgetn_mmap): Likewise.
	* libio/iofopncook.c (_IO_cookie_read): Likewise.
	(_IO_cookie_write): Likewise.
	* libio/oldfileops.c (_IO_old_file_xsputn): Likewise.
	* libio/wfileops.c (_IO_wfile_xsputn): Likewise.
	* mach/msgserver.c (__mach_msg_server_timeout): Likewise.
	* malloc/obstack.c (_obstack_begin): Likewise.
	(_obstack_begin_1): Likewise.
	(_obstack_newchunk): Likewise.
	(_obstack_allocated_p): Likewise.
	(obstack_free): Likewise.
	(_obstack_memory_used): Likewise.
	* misc/getttyent.c (getttynam): Likewise.
	(getttyent): Likewise.
	(skip): Likewise.
	(value): Likewise.
	* misc/getusershell.c (initshells): Likewise.
	* misc/syslog.c (__vsyslog_chk): Likewise.
	* misc/ttyslot.c (ttyslot): Likewise.
	* nis/nis_hash.c (__nis_hash): Likewise.
	* posix/fnmatch_loop.c (FCT): Likewise.
	* posix/getconf.c (print_all): Likewise.
	(main): Likewise.
	* posix/getopt.c (exchange): Likewise.
	* posix/glob.c (globfree): Likewise.
	(prefix_array): Likewise.
	(__glob_pattern_type): Likewise.
	* resolv/arpa/nameser.h (NS_GET16): Likewise.
	(NS_GET32): Likewise.
	(NS_PUT16): Likewise.
	(NS_PUT32): Likewise.
	* resolv/gethnamaddr.c (getanswer): Likewise.
	(gethostbyname2): Likewise.
	(gethostbyaddr): Likewise.
	(_gethtent): Likewise.
	(_gethtbyname2): Likewise.
	(_gethtbyaddr): Likewise.
	* resolv/ns_print.c (dst_s_get_int16): Likewise.
	* resolv/nss_dns/dns-host.c (getanswer_r): Likewise.
	* resolv/res_init.c (__res_vinit): Likewise.
	(net_mask): Likewise.
	* resolv/res_mkquery.c (outchar): Likewise.
	(PRINT): Likewise.
	* stdio-common/printf_fp.c (outchar): Likewise.
	(PRINT): Likewise.
	* stdio-common/printf_fphex.c (outchar): Likewise.
	(PRINT): Likewise.
	* stdio-common/printf_size.c (outchar): Likewise.
	(PRINT): Likewise.
	* stdio-common/test_rdwr.c (main): Likewise.
	* stdio-common/tfformat.c (matches): Likewise.
	* stdio-common/vfprintf.c (outchar): Likewise.
	(printf_unknown): Likewise.
	(buffered_vfprintf): Likewise.
	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Likewise.
	* stdio-common/xbug.c (AppendToBuffer): Likewise.
	(ReadFile): Likewise.
	* stdlib/qsort.c (SWAP): Likewise.
	(_quicksort): Likewise.
	* stdlib/setenv.c (__add_to_environ): Likewise.
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Likewise.
	* stdlib/strtol_l.c (__strtol_l): Likewise.
	* stdlib/tst-strtod.c (main): Likewise.
	* stdlib/tst-strtol.c (main): Likewise.
	* stdlib/tst-strtoll.c (main): Likewise.
	* string/bits/string2.h (__strcmp_cc): Likewise.
	(__strcmp_cg): Likewise.
	(__strcspn_c1): Likewise.
	(__strcspn_c2): Likewise.
	(__strcspn_c3): Likewise.
	(__strspn_c1): Likewise.
	(__strspn_c2): Likewise.
	(__strspn_c3): Likewise.
	(__strsep_1c): Likewise.
	(__strsep_2c): Likewise.
	(__strsep_3c): Likewise.
	* string/memccpy.c (__memccpy): Likewise.
	* string/stpcpy.c (__stpcpy): Likewise.
	* string/strcmp.c (strcmp): Likewise.
	* string/strrchr.c (strrchr): Likewise.
	* sysdeps/generic/sigset-cvt-mask.h (sigset_get_old_mask):
	Likewise.
	* sysdeps/mach/hurd/getcwd.c
	(_hurd_canonicalize_directory_name_internal): Likewise.
	* sysdeps/mach/i386/sysdep.h (SNARF_ARGS): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcschr.c (wcschr): Likewise.
	* sysdeps/powerpc/powerpc32/power6/wcsrchr.c (wcsrchr): Likewise.
	* sysdeps/x86/bits/byteswap-16.h [__GNUC__] (__bswap_16):
	Likewise, in both definitions.
	* sysdeps/x86/bits/byteswap.h (__bswap_32): Likewise, in multiple
	definitions.
	[__GNUC_PREREQ (2, 0) && !__GNUC_PREREQ (4, 3) && __WORDSIZE ==
	64] (__bswap_64): Likewise.
	* time/test_time.c (main): Likewise.
	* time/tzfile.c (__tzfile_read): Likewise.
	(__tzfile_compute): Likewise.
	* time/tzset.c (__tzset_parse_tz): Likewise.
	(tzset_internal): Likewise.
	(compute_change): Likewise.
	* wcsmbs/wcscat.c (__wcscat): Likewise.
	* wcsmbs/wcschr.c (wcschr): Likewise.
	* wcsmbs/wcschrnul.c (__wcschrnul): Likewise.
	* wcsmbs/wcscspn.c (wcscspn): Likewise.
	* wcsmbs/wcspbrk.c (wcspbrk): Likewise.
	* wcsmbs/wcsrchr.c (wcsrchr): Likewise.
	* wcsmbs/wcsspn.c (wcsspn): Likewise.
	* wcsmbs/wcsstr.c (wcsstr): Likewise.
	* wcsmbs/wmemchr.c (wmemchr): Likewise.
	* wcsmbs/wmemcmp.c (WMEMCMP): Likewise.
	* wcsmbs/wmemset.c (wmemset): Likewise.

2013-06-06  Joseph Myers  <joseph@codesourcery.com>

	* scripts/config.guess: Update to version 2013-05-16.
	* scripts/config.sub: Update to version 2013-04-24.
	* scripts/install-sh: Update to version 2011-11-20.07.
	* scripts/mkinstalldirs: Update to version 2009-04-28.21.
	* scripts/move-if-change: Update to version 2012-01-06 07:23.

2013-06-06   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* debug/fgetws_u_chk.c: Fix leading whitespaces.
	* elf/sln.c: Likewise.
	* hurd/hurd/ioctl.h: Likewise.
	* hurd/hurdmalloc.c: Likewise.
	* hurd/xattr.c: Likewise.
	* include/shlib-compat.h: Likewise.
	* inet/ruserpass.c: Likewise.
	* libio/iofgets_u.c: Likewise.
	* libio/iofgetws_u.c: Likewise.
	* locale/programs/ld-identification.c: Likewise.
	* locale/programs/ld-time.c: Likewise.
	* mach/msg-destroy.c: Likewise.
	* nss/nss_files/files-netgrp.c: Likewise.
	* resolv/res_data.c: Likewise.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-common.h: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdlib/strtod_l.c: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sysdeps/generic/framestate.c: Likewise.
	* sysdeps/i386/bsd-_setjmp.S: Likewise.
	* sysdeps/i386/bsd-setjmp.S: Likewise.
	* sysdeps/i386/__longjmp.S: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/ldbl2mpn.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_truncl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/ldbl2mpn.c: Likewise.
	* sysdeps/ieee754/support.c: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc32/lshift.S: Likewise.
	* sysdeps/sparc/sparc32/__longjmp.S: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_cmp.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_cmpe.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_feq.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fge.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fgt.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fle.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_flt.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_fne.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_mul.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_qtoi.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_qtoui.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_qtoux.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/qp_qtox.c: Likewise.
	* sysdeps/unix/sysv/linux/lutimes.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: Likewise.

2013-06-05  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* posix/transbug.c: Remove executable mode.

2013-06-05  Joseph Myers  <joseph@codesourcery.com>

	* crypt/speeds.c: Remove trailing whitespace.
	* dlfcn/default.c: Likewise.
	* elf/ifuncdep2.c: Likewise.
	* elf/ifuncmain1.c: Likewise.
	* elf/ifuncmain1vis.c: Likewise.
	* elf/testobj.h: Likewise.
	* elf/tst-stackguard1.c: Likewise.
	* gmon/sys/gmon.h: Likewise.
	* hurd/hurdmsg.c: Likewise.
	* hurd/new-fd.c: Likewise.
	* hurd/ports-get.c: Likewise.
	* iconvdata/ibm1008_420.c: Likewise.
	* inet/tst-getni1.c: Likewise.
	* inet/tst-getni2.c: Likewise.
	* libio/ioungetc.c: Likewise.
	* libio/wfiledoalloc.c: Likewise.
	* manual/libm-err-tab.pl: Likewise.
	* math/w_dremf.c: Likewise.
	* misc/ftruncate.c: Likewise.
	* posix/bug-glob2.c: Likewise.
	* posix/tst-pcre.c: Likewise.
	* posix/wait4.c: Likewise.
	* resolv/README: Likewise.
	* resolv/res_debug.h: Likewise.
	* resolv/tst-inet_ntop.c: Likewise.
	* setjmp/bug269-setjmp.c: Likewise.
	* soft-fp/extended.h: Likewise.
	* soft-fp/op-1.h: Likewise.
	* soft-fp/op-2.h: Likewise.
	* soft-fp/op-4.h: Likewise.
	* soft-fp/op-8.h: Likewise.
	* soft-fp/testit.c: Likewise.
	* stdio-common/bug16.c: Likewise.
	* stdlib/random.c: Likewise.
	* sunrpc/rpcsvc/rquota.x: Likewise.
	* sysdeps/ieee754/dbl-64/powtwo.tbl: Likewise.
	* sysdeps/ieee754/flt-32/k_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_atanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_copysignf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fabsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_frexpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/t_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Likewise.
	* sysdeps/ieee754/s_lib_version.c: Likewise.
	* sysdeps/mach/hurd/check_fds.c: Likewise.
	* sysdeps/mach/hurd/getsockname.c: Likewise.
	* sysdeps/mach/hurd/net/if_ppp.h: Likewise.
	* sysdeps/mach/hurd/recvfrom.c: Likewise.
	* sysdeps/powerpc/bits/link.h: Likewise.
	* sysdeps/powerpc/dl-procinfo.c: Likewise.
	* sysdeps/powerpc/fpu/feholdexcpt.c: Likewise.
	* sysdeps/powerpc/fpu/fenv_const.c: Likewise.
	* sysdeps/powerpc/fpu/fesetenv.c: Likewise.
	* sysdeps/powerpc/fpu/feupdateenv.c: Likewise.
	* sysdeps/powerpc/fpu/s_rintf.c: Likewise.
	* sysdeps/powerpc/fpu/t_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc32/bits/atomic.h: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_floor.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_floorf.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_round.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_roundf.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_trunc.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_truncf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrtf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power5+/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5+/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrtf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc32/power6x/fpu/s_lround.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_ceill.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floor.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_floorf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llrintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_llroundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_round.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_roundf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_roundl.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_trunc.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_truncf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_truncl.S: Likewise.
	* sysdeps/powerpc/powerpc64/hp-timing.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5+/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/power5/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/wordcopy.c: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_isnan.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_llrint.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6x/fpu/s_llround.S: Likewise.
	* sysdeps/powerpc/powerpc64/strlen.S: Likewise.
	* sysdeps/powerpc/powerpc64/strncmp.S: Likewise.
	* sysdeps/powerpc/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/s390x-mcount.S: Likewise.
	* sysdeps/s390/s390-64/sub_n.S: Likewise.
	* sysdeps/sh/dl-trampoline.S: Likewise.
	* sysdeps/sh/memset.S: Likewise.
	* sysdeps/sh/sh4/fpu/fclrexcpt.c: Likewise.
	* sysdeps/sh/strlen.S: Likewise.
	* sysdeps/sparc/sparc32/dl-trampoline.S: Likewise.
	* sysdeps/sparc/sparc32/dotmul.S: Likewise.
	* sysdeps/sparc/sparc32/memcpy.S: Likewise.
	* sysdeps/sparc/sparc32/rem.S: Likewise.
	* sysdeps/sparc/sparc32/sdiv.S: Likewise.
	* sysdeps/sparc/sparc32/soft-fp/q_neg.c: Likewise.
	* sysdeps/sparc/sparc32/strchr.S: Likewise.
	* sysdeps/sparc/sparc32/udiv.S: Likewise.
	* sysdeps/sparc/sparc32/urem.S: Likewise.
	* sysdeps/sparc/sparc64/add_n.S: Likewise.
	* sysdeps/sparc/sparc64/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/rawmemchr.S: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/s_frexpl.c: Likewise.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h: Likewise.
	* sysdeps/sparc/sparc64/stpncpy.S: Likewise.
	* sysdeps/sparc/sparc64/strncmp.S: Likewise.
	* sysdeps/sparc/sparc64/strncpy.S: Likewise.
	* sysdeps/unix/bsd/times.c: Likewise.
	* sysdeps/unix/sysv/linux/a.out.h: Likewise.
	* sysdeps/unix/sysv/linux/net/if_ppp.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/posix_fadvise64.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/scsi/scsi_ioctl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/brk.c: Likewise.
	* sysdeps/unix/sysv/linux/sh/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/sh/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/a.out.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sys/personality.h: Likewise.
	* sysdeps/x86_64/fpu/s_ceill.S: Likewise.
	* sysdeps/x86_64/fpu/s_llrintl.S: Likewise.
	* sysdeps/x86_64/strcspn.S: Likewise.

2013-06-05  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* locale/C-translit.h: Revert #include <stdint.h> because this is a
	generated file.  Regenerate properly from gen-translit.pl.
	* locale/gen-translit.pl: Add #include <stdint.h>.  This generates
	locale/C-translit.h.

2013-06-05  Andreas Schwab  <schwab@suse.de>

	[BZ #15100]
	* time/strptime_l.c (__strptime_internal): Count Sunday in a %W
	week as 6 instead of -1.
	* time/tst-strptime.c (day_tests): Add test case.

2013-06-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/generic/math_private.h
	(libc_feholdexcept_setround_53bit): Replace with
	libc_feholdsetround_53bit.
	(libc_feupdateenv_53bit): Replace with
	libc_feresetround_53bit.
	(SET_RESTORE_ROUND_53BIT): Adjust.

2013-06-03  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* string/test-strchrnul.c: Add copyright header.

	* posix/tst-getaddrinfo4.c: Increase test timeout.

2013-06-03  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15536]
	* math/libm-test.inc (MAX_EXP): Remove
	(MIN_EXP): Define.
	(ulp): Use MIN_EXP - MANT_DIG.
	(check_ulp): Verify subnormal ulps. Only allow a range of +/- 1 ulp.

2013-05-31  Carlos O'Donell  <carlos@redhat.com>

	* po/be.po: Revert last change.
	* po/zh_CN.po: Likewise.
	* po/header.pot: Likewise.

2013-05-31  Joseph Myers  <joseph@codesourcery.com>

	* Makefile ($(common-objpfx)linkobj/libc.so): Define
	link-libc-deps to empty as target-specific variable.
	* Makerules (link-libc-args): New variable.
	(libc-for-link): Likewise.
	(link-libc-deps): Likewise.
	(lib%.so): Depend on $(link-libc-deps).  Link with
	$(link-libc-args).
	(build-module): Link with $(link-libc-args).
	(build-module-asneeded): Likewise.
	(build-module-helper-objlist): Filter out $(link-libc-deps) from
	list of objects.
	($(common-objpfx)libc.so): Define link-libc-deps to empty as
	target-specific variable.
	($(extra-modules-build:%=$(objpfx)%.so)): Depend on
	$(link-libc-deps) instead of libc.so and libc_nonshared.a.
	* crypt/Makefile ($(objpfx)libcrypt.so): Remove dependencies on
	libc.
	* debug/Makefile ($(objpfx)libSegFault.so): Remove dependencies on
	libc and ld.so.
	($(objpfx)libpcprofile.so): Likewise.
	* dlfcn/Makefile (LDLIBS-bug-atexit3-lib.so): Remove ld.so and
	libc_nonshared.a.
	($(objpfx)libdl.so): Remove dependencies on libc and ld.so.
	* hesiod/Makefile ($(objpfx)libnss_hesiod.so): Likewise.
	* iconvdata/extra-module.mk ($(objpfx)$(mod).so): Depend on
	$(link-libc-deps).
	($(objpfx)$(mod).so): Remove dependencies on libc and ld.so.
	* locale/Makefile ($(objpfx)libBrokenLocale.so): Likewise.
	* login/Makefile ($(objpfx)libutil.so): Likewise.
	* malloc/Makefile ($(objpfx)libmemusage.so): Likewise.
	* math/Makefile ($(objpfx)libm.so): Likewise.
	* nis/Makefile ($(services:%=$(objpfx)libnss_%.so)
	$(objpfx)libnsl.so): Define libc-for-link as target-specific
	variable instead of depending directly on libc.
	* nss/Makefile ($(services:%=$(objpfx)libnss_%.so)): Likewise.
	($(objpfx)/libnss_test1.so): Change dependencies on libc to
	$(link-libc-deps).
	* resolv/Makefile ($(objpfx)libresolv.so): Remove dependencies on
	libc.
	[$(have-ssp) = yes] (LDLIBS-resolv.so): Remove variable.
	($(objpfx)libnss_dns.so): Remove dependencies on libc.
	($(objpfx)libanl.so): Likewise.
	* rt/Makefile ($(objpfx)librt.so): Remove dependencies on libc and
	ld.so.
	* stdlib/Makefile ($(objpfx)tst-putenvmod.so): Depend on
	$(link-libc-deps).
	* sysdeps/i386/fpu/Makefile: Remove file.
	* sysdeps/powerpc/fpu/Makefile [$(subdir) = math]
	($(objpfx)libm.so): Remove dependency on ld.so.

2013-05-30  Patsy Franklin  <pfrankli@redhat.com>

	[BZ # 15553]
	* nis/yp_xdr.c (XDRMAXNAME): Define.
	(XDRMAXRECORD): Define.
	(xdr_domainname): Use XDRMAXNAME.
	(xdr_mapname): Likewise.
	(xdr_peername): Likewise.
	(xdr_keydat): Use XDRMAXRECORD.
	(xdr_valdat): Likewise.

2013-05-30  Jeff Law  <law@redhat.com>

	[BZ #14256]
	* manual/errno.texi (ESTALE): Update to account for more than
	just NFS file systems.
	* sysdeps/gnu/errlist.c: Regenerated.

2013-05-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15465]
	* elf/Makefile (tests): Add tst-null-argv.
	(modules-names):  Add tst-null-argv-lib.
	($(objpfx)tst-null-argv): Depend on tst-null-argv-lib.so.
	(tst-null-argv-ENV): Set environment for tst-null-argv.
	* sysdeps/generic/ldsodefs.h (DSO_FILENAME): New macro.
	(RTLD_PROGNAME): New macro.
	* elf/tst-null-argv.c: New test case.
	* elf/tst-null-argv-lib.c: Library for test case.
	* elf/dl-conflict.c (_dl_resolve_conflicts): Use DSO_FILENAME.
	* elf/dl-deps.c (_dl_map_object_deps): Likewise.
	* elf/dl-error.c (_dl_signal_error): Use RTLD_PROGNAME.
	* elf/dl-fini.c (_dl_fini): Use DSO_FILENAME.
	* elf/dl-init.c (call_init): Likewise.
	(_dl_init): Likewise.
	* elf/dl-load.c (print_search_path): Likewise.
	(_dl_map_object): Likewise.
	* elf/dl-lookup.c (do_lookup_x): Likewise.
	(add_dependency): Likewise.
	(_dl_lookup_symbol_x): Likewise.
	(_dl_debug_bindings): Likewise.
	* elf/dl-open.c (_dl_show_scope): Likewise.
	* elf/dl-reloc.c (_dl_relocate_object): Likewise.
	* elf/dl-version.c (match_symbol): Likewise.
	(_dl_check_map_versions): Likewise.
	* elf/rtld.c (dl_main): Likewise.
	(print_unresolved): Use RTLD_PROGNAME.
	(print_missing_version): Likewise.
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Likewise.
	(elf_machine_rela): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c
	(__process_machine_rela): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/sh/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela):
	Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Likewise.

2013-05-28  Carlos O'Donell  <carlos@redhat.com>

	* po/be.po: Add descriptive title.
	* po/zh_CN.po: Likewise.
	* po/header.pot: Likewise.

2013-05-28  Mike Frysinger  <vapier@gentoo.org>

	* locale/programs/locarchive.c (create_archive): Inlucde fname in
	error message.
	(enlarge_archive): Likewise.

2013-05-28  Ben North  <ben@redfrontdoor.org>

	* manual/arith.texi (frexp): It is the magnitude of the return
	value which lies in [0.5, 1), not the return value itself.

2013-05-28  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-05-26  Thomas Schwinge  <thomas@codesourcery.com>

	* stdio-common/bug26.c (main): Correct fscanf template.

	* sysdeps/mach/hurd/dl-sysdep.c (_dl_sysdep_start:go): Don't
	declare _dl_skip_args.

	* sysdeps/mach/hurd/i386/init-first.c (_dl_non_dynamic_init):
	Don't declare.

	* manual/platform.texi: Add missing @end deftypefun.

2013-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15529]
	* sysdeps/ieee754/ldbl-96/e_hypotl.c (__ieee754_hypotl): Set high
	bit of mantissa of 2^16382.
	* math/libm-test.inc (hypot_test_data): Add more tests.

	* math/libm-test.inc: Add drem and pow10 to list of tested
	functions.
	(pow10_test): New function.
	(drem_test): Likewise.
	(drem_test_tonearest): Likewise.
	(drem_test_towardzero): Likewise.
	(drem_test_downward): Likewise.
	(drem_test_upward): Likewise.
	(main): Call the new functions.

	* math/libm-test.inc (finite_test_data): Remove.
	(finite_test): Run tests from isfinite_test_data.
	(gamma_test_data): Remove.
	(gamma_test): Run tests from lgamma_test_data.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-05-24  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* manual/platform.texi: Add PowerPC PPR function set documentation.
	* sysdeps/powerpc/sys/platform/ppc.h: Add PowerPC PPR set function
	implementation.

2013-05-24  Carlos O'Donell  <carlos@redhat.com>

	* math/libm-test.inc (MAX_EXP): Define.
	(ULPDIFF): Define.
	(ulp): New function.
	(check_float_internal): Use ULPDIFF.
	(cpow_test): Disable failing test.
	(check_ulp): Test ulp() implementation.
	(main): Call check_ulp before starting tests.

2013-05-24  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (generate_testfile): Do not handle
	START_DATA and END_DATA.
	* math/libm-test.inc (acos_test_data): Do not use START_DATA and
	END_DATA.
	(acos_tonearest_test_data): Likewise.
	(acos_towardzero_test_data): Likewise.
	(acos_downward_test_data): Likewise.
	(acos_upward_test_data): Likewise.
	(acosh_test_data): Likewise.
	(asin_test_data): Likewise.
	(asin_tonearest_test_data): Likewise.
	(asin_towardzero_test_data): Likewise.
	(asin_downward_test_data): Likewise.
	(asin_upward_test_data): Likewise.
	(asinh_test_data): Likewise.
	(atan_test_data): Likewise.
	(atanh_test_data): Likewise.
	(atan2_test_data): Likewise.
	(cabs_test_data): Likewise.
	(cacos_test_data): Likewise.
	(cacosh_test_data): Likewise.
	(carg_test_data): Likewise.
	(casin_test_data): Likewise.
	(casinh_test_data): Likewise.
	(catan_test_data): Likewise.
	(catanh_test_data): Likewise.
	(cbrt_test_data): Likewise.
	(ccos_test_data): Likewise.
	(ccosh_test_data): Likewise.
	(ceil_test_data): Likewise.
	(cexp_test_data): Likewise.
	(cimag_test_data): Likewise.
	(clog_test_data): Likewise.
	(clog10_test_data): Likewise.
	(conj_test_data): Likewise.
	(copysign_test_data): Likewise.
	(cos_test_data): Likewise.
	(cos_tonearest_test_data): Likewise.
	(cos_towardzero_test_data): Likewise.
	(cos_downward_test_data): Likewise.
	(cos_upward_test_data): Likewise.
	(cosh_test_data): Likewise.
	(cosh_tonearest_test_data): Likewise.
	(cosh_towardzero_test_data): Likewise.
	(cosh_downward_test_data): Likewise.
	(cosh_upward_test_data): Likewise.
	(cpow_test_data): Likewise.
	(cproj_test_data): Likewise.
	(creal_test_data): Likewise.
	(csin_test_data): Likewise.
	(csinh_test_data): Likewise.
	(csqrt_test_data): Likewise.
	(ctan_test_data): Likewise.
	(ctan_tonearest_test_data): Likewise.
	(ctan_towardzero_test_data): Likewise.
	(ctan_downward_test_data): Likewise.
	(ctan_upward_test_data): Likewise.
	(ctanh_test_data): Likewise.
	(ctanh_tonearest_test_data): Likewise.
	(ctanh_towardzero_test_data): Likewise.
	(ctanh_downward_test_data): Likewise.
	(ctanh_upward_test_data): Likewise.
	(erf_test_data): Likewise.
	(erfc_test_data): Likewise.
	(exp_test_data): Likewise.
	(exp_tonearest_test_data): Likewise.
	(exp_towardzero_test_data): Likewise.
	(exp_downward_test_data): Likewise.
	(exp_upward_test_data): Likewise.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	(fabs_test_data): Likewise.
	(fdim_test_data): Likewise.
	(finite_test_data): Likewise.
	(floor_test_data): Likewise.
	(fma_test_data): Likewise.
	(fma_towardzero_test_data): Likewise.
	(fma_downward_test_data): Likewise.
	(fma_upward_test_data): Likewise.
	(fmax_test_data): Likewise.
	(fmin_test_data): Likewise.
	(fmod_test_data): Likewise.
	(fpclassify_test_data): Likewise.
	(frexp_test_data): Likewise.
	(gamma_test_data): Likewise.
	(hypot_test_data): Likewise.
	(ilogb_test_data): Likewise.
	(isfinite_test_data): Likewise.
	(isgreater_test_data): Likewise.
	(isgreaterequal_test_data): Likewise.
	(isinf_test_data): Likewise.
	(isless_test_data): Likewise.
	(islessequal_test_data): Likewise.
	(islessgreater_test_data): Likewise.
	(isnan_test_data): Likewise.
	(isnormal_test_data): Likewise.
	(issignaling_test_data): Likewise.
	(isunordered_test_data): Likewise.
	(j0_test_data): Likewise.
	(j1_test_data): Likewise.
	(jn_test_data): Likewise.
	(ldexp_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(lrint_test_data): Likewise.
	(lrint_tonearest_test_data): Likewise.
	(lrint_towardzero_test_data): Likewise.
	(lrint_downward_test_data): Likewise.
	(lrint_upward_test_data): Likewise.
	(llrint_test_data): Likewise.
	(llrint_tonearest_test_data): Likewise.
	(llrint_towardzero_test_data): Likewise.
	(llrint_downward_test_data): Likewise.
	(llrint_upward_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log1p_test_data): Likewise.
	(log2_test_data): Likewise.
	(logb_test_data): Likewise.
	(logb_downward_test_data): Likewise.
	(lround_test_data): Likewise.
	(llround_test_data): Likewise.
	(modf_test_data): Likewise.
	(nearbyint_test_data): Likewise.
	(nextafter_test_data): Likewise.
	(nexttoward_test_data): Likewise.
	(pow_test_data): Likewise.
	(pow_tonearest_test_data): Likewise.
	(pow_towardzero_test_data): Likewise.
	(pow_downward_test_data): Likewise.
	(pow_upward_test_data): Likewise.
	(remainder_test_data): Likewise.
	(remainder_tonearest_test_data): Likewise.
	(remainder_towardzero_test_data): Likewise.
	(remainder_downward_test_data): Likewise.
	(remainder_upward_test_data): Likewise.
	(remquo_test_data): Likewise.
	(rint_test_data): Likewise.
	(rint_tonearest_test_data): Likewise.
	(rint_towardzero_test_data): Likewise.
	(rint_downward_test_data): Likewise.
	(rint_upward_test_data): Likewise.
	(round_test_data): Likewise.
	(scalb_test_data): Likewise.
	(scalbn_test_data): Likewise.
	(scalbln_test_data): Likewise.
	(signbit_test_data): Likewise.
	(sin_test_data): Likewise.
	(sin_tonearest_test_data): Likewise.
	(sin_towardzero_test_data): Likewise.
	(sin_downward_test_data): Likewise.
	(sin_upward_test_data): Likewise.
	(sincos_test_data): Likewise.
	(sinh_test_data): Likewise.
	(sinh_tonearest_test_data): Likewise.
	(sinh_towardzero_test_data): Likewise.
	(sinh_downward_test_data): Likewise.
	(sinh_upward_test_data): Likewise.
	(sqrt_test_data): Likewise.
	(tan_test_data): Likewise.
	(tan_tonearest_test_data): Likewise.
	(tan_towardzero_test_data): Likewise.
	(tan_downward_test_data): Likewise.
	(tan_upward_test_data): Likewise.
	(tanh_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(trunc_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.
	(significand_test_data): Likewise.

	* math/gen-libm-test.pl (@functions): Remove variable.
	(generate_testfile): Don't handle START and END lines.
	* math/libm-test.inc (START): New macro.
	(END): Likewise.
	(END_COMPLEX): Likewise.
	(acos_test): Use END macro without arguments.
	(acos_test_tonearest): Likewise.
	(acos_test_towardzero): Likewise.
	(acos_test_downward): Likewise.
	(acos_test_upward): Likewise.
	(acosh_test): Likewise.
	(asin_test): Likewise.
	(asin_test_tonearest): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_test_downward): Likewise.
	(asin_test_upward): Likewise.
	(asinh_test): Likewise.
	(atan_test): Likewise.
	(atanh_test): Likewise.
	(atan2_test): Likewise.
	(cabs_test): Likewise.
	(cacos_test): Use END_COMPLEX macro without arguments.
	(cacosh_test): Likewise.
	(carg_test): Use END macro without arguments.
	(casin_test): Use END_COMPLEX macro without arguments.
	(casinh_test): Likewise.
	(catan_test): Likewise.
	(catanh_test): Likewise.
	(cbrt_test): Use END macro without arguments.
	(ccos_test): Use END_COMPLEX macro without arguments.
	(ccosh_test): Likewise.
	(ceil_test): Use END macro without arguments.
	(cexp_test): Use END_COMPLEX macro without arguments.
	(cimag_test): Use END macro without arguments.
	(clog_test): Use END_COMPLEX macro without arguments.
	(clog10_test): Likewise.
	(conj_test): Likewise.
	(copysign_test): Use END macro without arguments.
	(cos_test): Likewise.
	(cos_test_tonearest): Likewise.
	(cos_test_towardzero): Likewise.
	(cos_test_downward): Likewise.
	(cos_test_upward): Likewise.
	(cosh_test): Likewise.
	(cosh_test_tonearest): Likewise.
	(cosh_test_towardzero): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_test_upward): Likewise.
	(cpow_test): Use END_COMPLEX macro without arguments.
	(cproj_test): Likewise.
	(creal_test): Use END macro without arguments.
	(csin_test): Use END_COMPLEX macro without arguments.
	(csinh_test): Likewise.
	(csqrt_test): Likewise.
	(ctan_test): Likewise.
	(ctan_test_tonearest): Likewise.
	(ctan_test_towardzero): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test): Likewise.
	(ctanh_test_tonearest): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_test_upward): Likewise.
	(erf_test): Use END macro without arguments.
	(erfc_test): Likewise.
	(exp_test): Likewise.
	(exp_test_tonearest): Likewise.
	(exp_test_towardzero): Likewise.
	(exp_test_downward): Likewise.
	(exp_test_upward): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(fabs_test): Likewise.
	(fdim_test): Likewise.
	(finite_test): Likewise.
	(floor_test): Likewise.
	(fma_test): Likewise.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	(fmax_test): Likewise.
	(fmin_test): Likewise.
	(fmod_test): Likewise.
	(fpclassify_test): Likewise.
	(frexp_test): Likewise.
	(gamma_test): Likewise.
	(hypot_test): Likewise.
	(ilogb_test): Likewise.
	(isfinite_test): Likewise.
	(isgreater_test): Likewise.
	(isgreaterequal_test): Likewise.
	(isinf_test): Likewise.
	(isless_test): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test): Likewise.
	(isnan_test): Likewise.
	(isnormal_test): Likewise.
	(issignaling_test): Likewise.
	(isunordered_test): Likewise.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(jn_test): Likewise.
	(ldexp_test): Likewise.
	(lgamma_test): Likewise.
	(lrint_test): Likewise.
	(lrint_test_tonearest): Likewise.
	(lrint_test_towardzero): Likewise.
	(lrint_test_downward): Likewise.
	(lrint_test_upward): Likewise.
	(llrint_test): Likewise.
	(llrint_test_tonearest): Likewise.
	(llrint_test_towardzero): Likewise.
	(llrint_test_downward): Likewise.
	(llrint_test_upward): Likewise.
	(log_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(logb_test): Likewise.
	(logb_test_downward): Likewise.
	(lround_test): Likewise.
	(llround_test): Likewise.
	(modf_test): Likewise.
	(nearbyint_test): Likewise.
	(nextafter_test): Likewise.
	(nexttoward_test): Likewise.
	(pow_test): Likewise.
	(pow_test_tonearest): Likewise.
	(pow_test_towardzero): Likewise.
	(pow_test_downward): Likewise.
	(pow_test_upward): Likewise.
	(remainder_test): Likewise.
	(remainder_test_tonearest): Likewise.
	(remainder_test_towardzero): Likewise.
	(remainder_test_downward): Likewise.
	(remainder_test_upward): Likewise.
	(remquo_test): Likewise.
	(rint_test): Likewise.
	(rint_test_tonearest): Likewise.
	(rint_test_towardzero): Likewise.
	(rint_test_downward): Likewise.
	(rint_test_upward): Likewise.
	(round_test): Likewise.
	(scalb_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.
	(signbit_test): Likewise.
	(sin_test): Likewise.
	(sin_test_tonearest): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_test_downward): Likewise.
	(sin_test_upward): Likewise.
	(sincos_test): Likewise.
	(sinh_test): Likewise.
	(sinh_test_tonearest): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_test_upward): Likewise.
	(sqrt_test): Likewise.
	(tan_test): Likewise.
	(tan_test_tonearest): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_test_downward): Likewise.
	(tan_test_upward): Likewise.
	(tanh_test): Likewise.
	(tgamma_test): Likewise.
	(trunc_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	(yn_test): Likewise.
	(significand_test): Likewise.

2013-05-24  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15381]
	* libio/genops.c (_IO_no_init): Initialize wide struct info.

2013-05-23  Edjunior Machado  <emachado@linux.vnet.ibm.com>

	[BZ #14894]
	* sysdeps/powerpc/sys/platform/ppc.h: Add __ppc_yield,
	__ppc_mdoio and __ppc_mdoom.
	* manual/platform.texi: Document new functions __ppc_yield,
	__ppc_mdoio and __ppc_mdoom.

2013-05-22  Carlos O'Donell  <carlos@redhat.com>

	* elf/ldconfig.c (is_hwcap_platform): Make comments full setences.
	(main): Mention "tls" pseudo-hwcap is legacy.
	* elf/dl-hwcaps.c (_dl_important_hwcaps): Correct rounding comment.

2013-05-22  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Output only string of
	arguments as text for test name, not full call or descriptions of
	tests for extra outputs.
	(generate_testfile): Do not pass function name to parse_args.
	Generate this_func variable from START.
	* math/libm-test.inc (struct test_f_f_data): Rename test_name
	field to arg_str.
	(struct test_ff_f_data): Likewise.
	(test_ff_f_data_nexttoward): Likewise.
	(struct test_fi_f_data): Likewise.
	(struct test_fl_f_data): Likewise.
	(struct test_if_f_data): Likewise.
	(struct test_fff_f_data): Likewise.
	(struct test_c_f_data): Likewise.
	(struct test_f_f1_data): Likewise.  Remove field extra_name.
	(struct test_fF_f1_data): Likewise.
	(struct test_ffI_f1_data): Likewise.
	(struct test_c_c_data): Rename test_name field to arg_str.
	(struct test_cc_c_data): Likewise.
	(struct test_f_i_data): Likewise.
	(struct test_ff_i_data): Likewise.
	(struct test_f_l_data): Likewise.
	(struct test_f_L_data): Likewise.
	(struct test_fFF_11_data): Likewise.  Remove fields extra1_name
	and extra2_name.
	(COMMON_TEST_SETUP): New macro.
	(EXTRA_OUTPUT_TEST_SETUP): Likewise.
	(COMMON_TEST_CLEANUP): Likewise.
	(EXTRA_OUTPUT_TEST_CLEANUP): Likewise.
	(RUN_TEST_f_f): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_f): Update call to RUN_TEST_f_f.
	(RUN_TEST_2_f): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_2_f): Update call to RUN_TEST_2_f.
	(RUN_TEST_fff_f): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_fff_f): Update call to RUN_TEST_fff_f.
	(RUN_TEST_c_f): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_c_f): Update call to RUN_TEST_c_f.
	(RUN_TEST_f_f1): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_f1): Update call to RUN_TEST_f_f1.
	(RUN_TEST_fF_f1): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_fF_f1): Update call to RUN_TEST_fF_f1.
	(RUN_TEST_fI_f1): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_fI_f1): Update call to RUN_TEST_fI_f1.
	(RUN_TEST_ffI_f1): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_ffI_f1): Update call to RUN_TEST_ffI_f1.
	(RUN_TEST_c_c): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_c_c): Update call to RUN_TEST_c_c.
	(RUN_TEST_cc_c): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_cc_c): Update call to RUN_TEST_cc_c.
	(RUN_TEST_f_i): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_i): Update call to RUN_TEST_f_i.
	(RUN_TEST_f_i_tg): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_f_i_tg): Update call to RUN_TEST_f_i_tg.
	(RUN_TEST_ff_i_tg): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_ff_i_tg): Update call to RUN_TEST_ff_i_tg.
	(RUN_TEST_f_b): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_b): Update call to RUN_TEST_f_b.
	(RUN_TEST_f_b_tg): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_f_b_tg): Update call to RUN_TEST_f_b_tg.
	(RUN_TEST_f_l): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_l): Update call to RUN_TEST_f_l.
	(RUN_TEST_f_L): Take argument string.  Call new setup and cleanup
	macros.
	(RUN_TEST_LOOP_f_L): Update call to RUN_TEST_f_L.
	(RUN_TEST_fFF_11): Take argument string.  Call new setup and
	cleanup macros.
	(RUN_TEST_LOOP_fFF_11): Update call to RUN_TEST_fFF_11.

2013-05-22  Edjunior Barbosa Machado  <emachado@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/bits/siginfo.h (siginfo_t): Add si_addr_lsb
	to _sifields.sigfault.
	(si_addr_lsb): Define new macro.
	(BUS_MCEERR_AR, BUS_MCEERR_AO): Define new values.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h: Likewise.

2013-05-03  Carlos O'Donell  <carlos at redhat.com>

	[BZ #15441]
	* intl/dcigettext.c (DCIGETTEXT): Skip translating if _nl_find_msg
	returns -1.
	(_nl_find_msg): Return -1 if recursive call returned -1. If newmem is
	null return -1.
	* intl/loadmsgcat.c (_nl_load_domain): If _nl_find_msg returns -1 abort
	loading the domain.

2013-05-22  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Do not include expected
	result in test name.
	* sysdeps/i386/fpu/libm-test-ulps: Update test names.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.
	* sysdeps/sh/sh4/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-05-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Sort function entries.

	* benchtests/Makefile (bench): Add asin, acos, sinh, cosh,
	tanh, asinh, acosh, atanh.
	* benchtests/acos-inputs: New file.
	* benchtests/acosh-inputs: New file.
	* benchtests/asin-inputs: New file.
	* benchtests/asinh-inputs: New file.
	* benchtests/atanh-inputs: New file.
	* benchtests/cosh-inputs: New file.
	* benchtests/log-inputs: New file.
	* benchtests/sinh-inputs: New file.
	* benchtests/tanh-inputs: New file.

2013-05-21  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #15339]
	* posix/tst-getaddrinfo4.c: New test.
	* posix/Makefile (tests): Add it.

2013-05-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15339]
	* nss/getXXbyYY_r.c (REENTRANT_NAME): Set NETDB_INTERNAL only
	when no services were used.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Set h_errno.
	Return EAI_SYSTEM if h_errno is NETDB_INTERNAL.

2013-05-21  Andreas Schwab  <schwab@suse.de>

	[BZ #15014]
	* nss/getXXbyYY_r.c (INTERNAL (REENTRANT_NAME))
	[HANDLE_DIGITS_DOTS]: Set any_service when digits-dots parsing was
	successful.
	* nss/digits_dots.c (__nss_hostname_digits_dots): Remove
	redundant variable declarations and reallocation of buffer when
	parsing as IPv6 address.  Always set NSS status when called from
	reentrant functions.  Use NETDB_INTERNAL instead of TRY_AGAIN when
	buffer too small.  Correct computation of needed size.
	* nss/Makefile (tests): Add test-digits-dots.
	* nss/test-digits-dots.c: New test.

2013-05-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Remove instructions for adding
	benchmark tests.
	* benchtests/README: New file to explain how to execute and
	enhance the benchmark tests.

2013-05-21  Andreas Schwab  <schwab@suse.de>

	[BZ #15493]
	* setjmp/Makefile (tests): Add tst-sigsetjmp.
	* setjmp/tst-sigsetjmp.c: New test.

2013-05-20  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/memset.S (memset): New implementation.
	(__bzero): Likewise.
	(__memset_tail): New function.

2013-05-20  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/multiarch/memcpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/memcpy.S (__new_memcpy): Add
	__memcpy_sse2_unaligned ifunc selection.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines):
	Add memcpy-sse2-unaligned.S.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Add: __memcpy_sse2_unaligned.

2013-05-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15490]
	* sysdeps/ieee754/dbl-64/s_nearbyint.c (__nearbyint): Use
	math_force_eval before restoring floating-point envrionment.
	* sysdeps/ieee754/flt-32/s_nearbyintf.c (__nearbyintf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c (__nearbyintl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Include
	<math_private.h>.
	(__nearbyintl): Use math_force_eval before restoring
	floating-point environment.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c (__nearbyintl): Likewise.

	* math/gen-libm-test.pl (special_functions): Remove.
	(parse_args): Don't handle TEST_extra.  Handle functions with no
	return value.
	* math/libm-test.inc (struct test_sincos_data): Replace with
	struct test_fFF_11_data.
	(RUN_TEST_sincos): Replace with RUN_TEST_fFF_11.
	(RUN_TEST_LOOP_sincos): Replace with RUN_TEST_LOOP_fFF_11.
	(sincos_test_data): Change element type to struct
	test_fFF_11_data.  Use TEST_fFF_11 instead of TEST_extra.
	(sincos_test): Use RUN_TEST_LOOP_fFF_11 instead of
	RUN_TEST_LOOP_sincos.
	* math/README.libm-test: Don't mention special handling of
	individual functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update names of sincos tests.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.
	* sysdeps/sh/sh4/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/gen-libm-test.pl (get_variable): Remove function.
	(parse_args): Don't show pointer parameters to call in test
	names.  Use "extra output N" in test names for extra outputs
	rather than naming variables.

2013-05-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15488]
	* math/complex.h [__USE_ISOC11 && __GNUC_PREREQ (4, 7) &&
	__NO_LONG_DOUBLE_MATH] (CMPLXL): Define macro.
	* math/tst-CMPLX.c (do_test) [NO_LONG_DOUBLE]: Do not disable long
	double tests.
	* make/tst-CMPLX2.c [NO_LONG_DOUBLE] (check_long_double): Do not
	disable.
	(do_test) [NO_LONG_DOUBLE]: Do not disable call to
	check_long_double.

	* math/gen-libm-test.pl (@tests): Remove variable.
	($count): Likewise.
	(new_test): Remove function.
	(show_exceptions): New function.
	(special_functions): Use show_exceptions instead of new_test.
	(parse_args): Likewise.
	(generate_testfile): Pass only function name in generated call to
	print_max_error or print_complex_max_error.
	(get_ulps): Do not handle complex tests specially.
	(output_test): Rename to ...
	(get_all_ulps_for_test): ... this.  Return a string rather than
	printing to a file.  Require ulps to be present.
	(output_ulps): Generate arrays rather than #defines.
	* math/libm-test.inc: Move down #include of "libm-test-ulps.h".
	(struct ulp_data): New type.
	(BUILD_COMPLEX_ULP): Remove macro.
	(compare_ulp_data): New function.
	(find_ulps): Likewise.
	(find_test_ulps): Likewise.
	(find_function_ulps): Likewise.
	(find_complex_function_ulps): Likewise.
	(print_max_error): Determine allowed ulps using
	find_function_ulps.
	(print_complex_max_error): Determine allowed ulps using
	find_complex_function_ulps.
	(check_float_internal): Determine max ulps using find_test_ulps.
	(check_float): Do not take max_ulp parameter.  Update call to
	check_float_internal.
	(check_complex): Likewise.
	(check_int): Do not take max_ulp parameter.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(struct test_f_f_data): Remove max_ulp field.
	(struct test_ff_f_data): Likewise.
	(struct test_ff_f_data_nexttoward): Likewise.
	(struct test_fi_f_data): Likewise.
	(struct test_fl_f_data): Likewise.
	(struct test_if_f_data): Likewise.
	(struct test_fff_f_data): Likewise.
	(struct test_c_f_data): Likewise.
	(struct test_f_f1_data): Remove max_ulp and extra_ulp fields.
	(struct test_fF_f1_data): Likewise.
	(struct test_ffI_f1_data): Likewise.
	(struct test_c_c_data): Remove max_ulp field.
	(struct test_cc_c_data): Likewise.
	(struct test_f_i_data): Likewise.
	(struct test_ff_i_data): Likewise.
	(struct test_f_l_data): Likewise.
	(struct test_f_L_data): Likewise.
	(struct test_sincos_data): Likewise.
	(RUN_TEST_f_f): Do not handle ulps.
	(RUN_TEST_LOOP_f_f): Likewise.
	(RUN_TEST_2_f): Likewise.
	(RUN_TEST_LOOP_2_f): Likewise.
	(RUN_TEST_fff_f): Likewise.
	(RUN_TEST_LOOP_fff_f): Likewise.
	(RUN_TEST_c_f): Likewise.
	(RUN_TEST_LOOP_c_f): Likewise.
	(RUN_TEST_f_f1): Likewise.
	(RUN_TEST_LOOP_f_f1): Likewise.
	(RUN_TEST_fF_f1): Likewise.
	(RUN_TEST_LOOP_fF_f1): Likewise.
	(RUN_TEST_fI_f1): Likewise.
	(RUN_TEST_LOOP_fI_f1): Likewise.
	(RUN_TEST_ffI_f1): Likewise.
	(RUN_TEST_LOOP_ffI_f1): Likewise.
	(RUN_TEST_c_c): Likewise.
	(RUN_TEST_LOOP_c_c): Likewise.
	(RUN_TEST_cc_c): Likewise.
	(RUN_TEST_LOOP_cc_c): Likewise.
	(RUN_TEST_f_i): Likewise.
	(RUN_TEST_LOOP_f_i): Likewise.
	(RUN_TEST_f_i_tg): Likewise.
	(RUN_TEST_LOOP_f_i_tg): Likewise.
	(RUN_TEST_ff_i_tg): Likewise.
	(RUN_TEST_LOOP_ff_i_tg): Likewise.
	(RUN_TEST_f_b): Likewise.
	(RUN_TEST_LOOP_f_b): Likewise.
	(RUN_TEST_f_b_tg): Likewise.
	(RUN_TEST_LOOP_f_b_tg): Likewise.
	(RUN_TEST_f_l): Likewise.
	(RUN_TEST_LOOP_f_l): Likewise.
	(RUN_TEST_f_L): Likewise.
	(RUN_TEST_LOOP_f_L): Likewise.
	(RUN_TEST_sincos): Likewise.
	(RUN_TEST_LOOP_sincos): Likewise.

2013-05-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15480]
	[BZ #15485]
	* sysdeps/ieee754/dbl-64/e_remainder.c (__ieee754_remainder): For
	main case of finite arguments, set rounding mode to FE_TONEAREST
	and discard exceptions.
	* math/libm-test.inc (remainder_test_data): Disallow "inexact"
	exceptions.
	(remainder_tonearest_test_data): New variable.
	(remainder_test_tonearest): New function.
	(remainder_towardzero_test_data): New variable.
	(remainder_test_towardzero): New function.
	(remainder_downward_test_data): New variable.
	(remainder_test_downward): New function.
	(remainder_upward_test_data): New variable.
	(remainder_test_upward): New function.
	(main): Call the new test functions.

	* math/libm-test.inc (struct test_f_f1_data): Remove field
	extra_init.
	(struct test_fF_f1_data): Likewise.
	(struct test_ffI_f1_data): Likewise.
	(RUN_TEST_f_f1): Remove argument EXTRA_INIT.  Initialize EXTRA_VAR
	based on value of EXTRA_EXPECTED.
	(RUN_TEST_LOOP_f_f1): Update call to RUN_TEST_f_f1.
	(RUN_TEST_fF_f1): Remove argument EXTRA_INIT.  Initialize
	EXTRA_VAR based on value of EXTRA_EXPECTED.
	(RUN_TEST_LOOP_fF_f1): Update call to RUN_TEST_fF_f1.
	(RUN_TEST_fI_f1): Remove argument EXTRA_INIT.  Initialize
	EXTRA_VAR based on value of EXTRA_EXPECTED.
	(RUN_TEST_LOOP_fI_f1): Update call to RUN_TEST_fI_f1.
	(RUN_TEST_ffI_f1): Remove argument EXTRA_INIT.  Initialize
	EXTRA_VAR based on value of EXTRA_EXPECTED.
	(RUN_TEST_LOOP_ffI_f1): Update call to RUN_TEST_ffI_f1.
	* math/gen-libm-test.pl (parse_args): Don't output initializers
	for extra output values.

	* math/libm-test.inc (check_int): Expect result to be exactly
	equal to expected value and do not handle ulps.
	(check_long): Likewise.
	(check_longlong): Likewise.

	* math/libm-test.inc (ceil_test_data): Test for "inexact"
	exceptions.
	(cimag_test_data): Likewise.
	(conj_test_data): Likewise.
	(copysign_test_data): Likewise.
	(cproj_test_data): Likewise.
	(creal_test_data): Likewise.
	(fabs_test_data): Likewise.
	(fdim_test_data): Likewise.
	(finite_test_data): Likewise.
	(floor_test_data): Likewise.
	(fmax_test_data): Likewise.
	(fmin_test_data): Likewise.
	(fmod_test_data): Likewise.
	(fpclassify_test_data): Likewise.
	(frexp_test_data): Likewise.
	(ilogb_test_data): Likewise.
	(isfinite_test_data): Likewise.
	(isgreater_test_data): Likewise.
	(isgreaterequal_test_data): Likewise.
	(isinf_test_data): Likewise.
	(isless_test_data): Likewise.
	(islessequal_test_data): Likewise.
	(islessgreater_test_data): Likewise.
	(isnan_test_data): Likewise.
	(isnormal_test_data): Likewise.
	(issignaling_test_data): Likewise.
	(isunordered_test_data): Likewise.
	(ldexp_test_data): Likewise.
	(lrint_test_data): Likewise.
	(lrint_test_data) [TEST_FLOAT]: Disable one test.
	(lrint_test_data) [!TEST_LDOUBLE]: Likewise.
	(lrint_tonearest_test_data): Test for "inexact" exceptions.
	(lrint_tonearest_test_data) [TEST_FLOAT]: Disable one test.
	(lrint_tonearest_test_data) [!TEST_LDOUBLE]: Likewise.
	(lrint_tonearest_test_data) [TEST_LDOUBLE]: Use "L" suffix on that
	test input.
	(lrint_towardzero_test_data): Test for "inexact" exceptions.
	(lrint_towardzero_test_data) [TEST_FLOAT]: Disable one test.
	(lrint_towardzero_test_data) [!TEST_LDOUBLE]: Likewise.
	(lrint_towardzero_test_data) [TEST_LDOUBLE]: Use "L" suffix on
	that test input.
	(lrint_downward_test_data): Test for "inexact" exceptions.
	(lrint_downward_test_data) [TEST_FLOAT]: Disable one test.
	(lrint_downward_test_data) [!TEST_LDOUBLE]: Likewise.
	(lrint_downward_test_data) [TEST_LDOUBLE]: Use "L" suffix on that
	test input.
	(lrint_upward_test_data): Test for "inexact" exceptions.
	(lrint_upward_test_data) [TEST_LDOUBLE]: Use "L" suffix on one
	test input.
	(llrint_test_data): Test for "inexact" exceptions.
	(llrint_test_data) [TEST_FLOAT]: Disable one test.
	(llrint_tonearest_test_data): Test for "inexact" exceptions.
	(llrint_tonearest_test_data) [TEST_FLOAT]: Disable one test.
	(llrint_towardzero_test_data): Test for "inexact" exceptions.
	(llrint_towardzero_test_data) [TEST_FLOAT]: Disable one test.
	(llrint_downward_test_data): Test for "inexact" exceptions.
	(llrint_downward_test_data) [TEST_FLOAT]: Disable one test.
	(llrint_upward_test_data): Test for "inexact" exceptions.
	(logb_test_data): Likewise.
	(logb_downward_test_data): Likewise.
	(nextafter_test_data): Likewise.
	(nexttoward_test_data): Likewise.
	(remainder_test_data): Likewise.
	(remquo_test_data): Likewise.
	(scalbn_test_data): Likewise.
	(scalbln_test_data): Likewise.
	(signbit_test_data): Likewise.
	(sqrt_test_data): Likewise.
	(significand_test_data): Likewise.

2013-05-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15424]
	* benchtests/bench-modf.c (struct args): Mark arg0 as
	volatile.
	* scripts/bench.pl: Mark members of struct args as volatile.

2013-05-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ # 15497]
	* sysdeps/powerpc/fpu/e_hypot.c (GET_TWO_FLOAT_WORD): Fix test for
	negative infinity on POWER6 or lower.
	* sysdeps/powerpc/fpu/e_hypotf.c (GET_TWO_FLOAT_WORD): Likewise.

2013-05-16  Maciej W. Rozycki  <macro@codesourcery.com>

	[BZ #15442]
	* soft-fp/op-common.h (_FP_FRAC_SNANP): New macro.
	(_FP_FRAC_SNANP_SEMIRAW): Likewise.
	(_FP_UNPACK_CANONICAL): Use _FP_FRAC_SNANP.
	(_FP_CHECK_SIGNAN_SEMIRAW): Use _FP_FRAC_SNANP_SEMIRAW.
	(_FP_SETQNAN): New macro.
	(_FP_SETQNAN_SEMIRAW): Likewise.
	(_FP_PACK_SEMIRAW): Use _FP_SETQNAN.
	(_FP_PACK_CANONICAL): Use _FP_SETQNAN.
	(_FP_ISSIGNAN): Use _FP_FRAC_SNANP.
	(FP_EXTEND): Use _FP_FRAC_SNANP.
	(FP_TRUNC): Use _FP_SETQNAN_SEMIRAW.
	* soft-fp/testit.c (gen_special_double): Take _FP_QNANNEGATEDP
	into account.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h (_FP_QNANNEGATEDP):
	New macro.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h (_FP_QNANNEGATEDP):
	Likewise.

2013-05-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (atanh_test_data): Use ERRNO_ERANGE together
	with DIVIDE_BY_ZERO_EXCEPTION.
	(gamma_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log2_test_data): Likewise.
	(tgamma_test_data): Likewise.

	* math/libm-test.inc (acos_test): Don't test for ENOSYS error.
	(acos_test_tonearest): Likewise.
	(acos_test_towardzero): Likewise.
	(acos_test_downward): Likewise.
	(acos_test_upward): Likewise.
	(acosh_test): Likewise.
	(asin_test): Likewise.
	(asin_test_tonearest): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_test_downward): Likewise.
	(asin_test_upward): Likewise.
	(asinh_test): Likewise.
	(atan_test): Likewise.
	(atanh_test): Likewise.
	(atan2_test): Likewise.
	(cabs_test): Likewise.
	(cacos_test): Likewise.
	(cacosh_test): Likewise.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	(catan_test): Likewise.
	(catanh_test): Likewise.
	(cbrt_test): Likewise.
	(ccos_test): Likewise.
	(ccosh_test): Likewise.
	(cexp_test): Likewise.
	(clog_test): Likewise.
	(clog10_test): Likewise.
	(cos_test): Likewise.
	(cos_test_tonearest): Likewise.
	(cos_test_towardzero): Likewise.
	(cos_test_downward): Likewise.
	(cos_test_upward): Likewise.
	(cosh_test): Likewise.
	(cosh_test_tonearest): Likewise.
	(cosh_test_towardzero): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_test_upward): Likewise.
	(cpow_test): Likewise.
	(csin_test): Likewise.
	(csinh_test): Likewise.
	(csqrt_test): Likewise.
	(ctan_test): Likewise.
	(ctan_test_tonearest): Likewise.
	(ctan_test_towardzero): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test): Likewise.
	(ctanh_test_tonearest): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_test_upward): Likewise.
	(erf_test): Likewise.
	(erfc_test): Likewise.
	(exp_test): Likewise.
	(exp_test_tonearest): Likewise.
	(exp_test_towardzero): Likewise.
	(exp_test_downward): Likewise.
	(exp_test_upward): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(fmod_test): Likewise.
	(gamma_test): Likewise.
	(hypot_test): Likewise.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(jn_test): Likewise.
	(lgamma_test): Likewise.
	(log_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(logb_test_downward): Likewise.
	(pow_test): Likewise.
	(pow_test_tonearest): Likewise.
	(pow_test_towardzero): Likewise.
	(pow_test_downward): Likewise.
	(pow_test_upward): Likewise.
	(remainder_test): Likewise.
	(remquo_test): Likewise.
	(sin_test): Likewise.
	(sin_test_tonearest): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_test_downward): Likewise.
	(sin_test_upward): Likewise.
	(sincos_test): Likewise.
	(sinh_test): Likewise.
	(sinh_test_tonearest): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_test_upward): Likewise.
	(sqrt_test): Likewise.
	(tan_test): Likewise.
	(tan_test_tonearest): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_test_downward): Likewise.
	(tan_test_upward): Likewise.
	(tanh_test): Likewise.
	(tgamma_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	(yn_test): Likewise.

	* math/gen-libm-test.pl (adjust_arg): Remove function.
	(special_function): Remove argument $in_func.  Only handle
	generating output for tables of tests, not inside functions.
	(parse_args): Likewise.
	(generate_testfile): Remove variable $in_func.  Update call to
	parse_args.
	* math/libm-test.inc (PLUS_ZERO_INIT): Rename macro to plus_zero.
	(MINUS_ZERO_INIT): Rename macro to minus_zero.
	(PLUS_INFTY_INIT): Rename macro to plus_infty.
	(MINUS_INFTY_INIT): Rename macro to minus_infty.
	(QNAN_VALUE_INIT): Rename macro to qnan_value.
	(MAX_VALUE_INIT): Rename macro to max_value.
	(MIN_VALUE_INIT): Rename macro to min_value.
	(MIN_SUBNORM_VALUE_INIT): Rename macro to min_subnorm_value.
	(plus_zero): Remove variable.
	(minus_zero): Likewise.
	(plus_infty): Likewise.
	(minus_infty): Likewise.
	(qnan_value): Likewise.
	(max_value): Likewise.
	(min_value): Likewise.
	(min_subnorm_value): Likewise.

2013-05-16  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* crypt/sha512-block.c: Add missing #include <stdint.h> due to
	uint64_t or uint32_t usage.
	* crypt/sha256-block.c: Likewise.
	* crypt/sha256-crypt.c: Likewise.
	* crypt/sha256.c: Likewise.
	* crypt/sha512-block.c: Likewise.
	* crypt/sha512-crypt.c: Likewise.
	* crypt/sha512.c: Likewise.
	* debug/backtrace-tst.c: Likewise.
	* debug/pcprofiledump.c: Likewise.
	* elf/cache.c: Likewise.
	* elf/dl-cache.c: Likewise.
	* elf/dl-misc.c: Likewise.
	* elf/dl-profile.c: Likewise.
	* elf/dl-support.c: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/sprof.c: Likewise.
	* iconv/dummy-repertoire.c: Likewise.
	* iconv/iconv_charmap.c: Likewise.
	* iconv/skeleton.c: Likewise.
	* iconvdata/8bit-generic.c: Likewise.
	* iconvdata/cp737.h: Likewise.
	* iconvdata/cp775.h: Likewise.
	* iconvdata/ibm1008.h: Likewise.
	* iconvdata/ibm1025.h: Likewise.
	* iconvdata/ibm1046.h: Likewise.
	* iconvdata/ibm1097.h: Likewise.
	* iconvdata/ibm1112.h: Likewise.
	* iconvdata/ibm1122.h: Likewise.
	* iconvdata/ibm1123.h: Likewise.
	* iconvdata/ibm1124.h: Likewise.
	* iconvdata/ibm1129.h: Likewise.
	* iconvdata/ibm1130.h: Likewise.
	* iconvdata/ibm1132.h: Likewise.
	* iconvdata/ibm1133.h: Likewise.
	* iconvdata/ibm1137.h: Likewise.
	* iconvdata/ibm1140.h: Likewise.
	* iconvdata/ibm1141.h: Likewise.
	* iconvdata/ibm1142.h: Likewise.
	* iconvdata/ibm1143.h: Likewise.
	* iconvdata/ibm1144.h: Likewise.
	* iconvdata/ibm1145.h: Likewise.
	* iconvdata/ibm1146.h: Likewise.
	* iconvdata/ibm1147.h: Likewise.
	* iconvdata/ibm1148.h: Likewise.
	* iconvdata/ibm1149.h: Likewise.
	* iconvdata/ibm1153.h: Likewise.
	* iconvdata/ibm1154.h: Likewise.
	* iconvdata/ibm1155.h: Likewise.
	* iconvdata/ibm1156.h: Likewise.
	* iconvdata/ibm1157.h: Likewise.
	* iconvdata/ibm1158.h: Likewise.
	* iconvdata/ibm1160.h: Likewise.
	* iconvdata/ibm1161.h: Likewise.
	* iconvdata/ibm1162.h: Likewise.
	* iconvdata/ibm1163.h: Likewise.
	* iconvdata/ibm1164.h: Likewise.
	* iconvdata/ibm1166.h: Likewise.
	* iconvdata/ibm1167.h: Likewise.
	* iconvdata/ibm12712.h: Likewise.
	* iconvdata/ibm1390.h: Likewise.
	* iconvdata/ibm1399.h: Likewise.
	* iconvdata/ibm16804.h: Likewise.
	* iconvdata/ibm4517.h: Likewise.
	* iconvdata/ibm4899.h: Likewise.
	* iconvdata/ibm4909.h: Likewise.
	* iconvdata/ibm4971.h: Likewise.
	* iconvdata/ibm5347.h: Likewise.
	* iconvdata/ibm803.h: Likewise.
	* iconvdata/ibm856.h: Likewise.
	* iconvdata/ibm901.h: Likewise.
	* iconvdata/ibm902.h: Likewise.
	* iconvdata/ibm9030.h: Likewise.
	* iconvdata/ibm9066.h: Likewise.
	* iconvdata/ibm921.h: Likewise.
	* iconvdata/ibm922.h: Likewise.
	* iconvdata/ibm9448.h: Likewise.
	* iconvdata/isiri-3342.h: Likewise.
	* iconvdata/jis0201.h: Likewise.
	* include/link.h: Likewise.
	* include/netdb.h: Likewise.
	* inet/check_native.c: Likewise.
	* inet/check_pf.c: Likewise.
	* inet/getipv4sourcefilter.c: Likewise.
	* inet/getnameinfo.c: Likewise.
	* inet/getsourcefilter.c: Likewise.
	* inet/htonl.c: Likewise.
	* inet/setipv4sourcefilter.c: Likewise.
	* inet/setsourcefilter.c: Likewise.
	* inet/test-inet6_opt.c: Likewise.
	* inet/tst-network.c: Likewise.
	* locale/C-collate.c: Likewise.
	* locale/C-ctype.c: Likewise.
	* locale/C-time.c: Likewise.
	* locale/C-translit.h: Likewise.
	* locale/loadarchive.c: Likewise.
	* locale/programs/3level.h: Likewise.
	* locale/programs/charmap.c: Likewise.
	* locale/programs/charmap.h: Likewise.
	* locale/programs/ld-address.c: Likewise.
	* locale/programs/ld-collate.c: Likewise.
	* locale/programs/ld-ctype.c: Likewise.
	* locale/programs/ld-identification.c: Likewise.
	* locale/programs/ld-measurement.c: Likewise.
	* locale/programs/ld-messages.c: Likewise.
	* locale/programs/ld-monetary.c: Likewise.
	* locale/programs/ld-name.c: Likewise.
	* locale/programs/ld-numeric.c: Likewise.
	* locale/programs/ld-paper.c: Likewise.
	* locale/programs/ld-telephone.c: Likewise.
	* locale/programs/ld-time.c: Likewise.
	* locale/programs/linereader.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/locarchive.c: Likewise.
	* locale/programs/locfile.h: Likewise.
	* locale/programs/repertoire.c: Likewise.
	* locale/programs/simple-hash.c: Likewise.
	* locale/programs/simple-hash.h: Likewise.
	* malloc/memusage.c: Likewise.
	* malloc/memusagestat.c: Likewise.
	* nis/nis_defaults.c: Likewise.
	* nis/nis_hash.c: Likewise.
	* nis/nis_print.c: Likewise.
	* nis/nis_xdr.c: Likewise.
	* nscd/connections.c: Likewise.
	* nscd/hstcache.c: Likewise.
	* nscd/nscd_gethst_r.c: Likewise.
	* nscd/nscd_getserv_r.c: Likewise.
	* nscd/nscd_helper.c: Likewise.
	* nscd/servicescache.c: Likewise.
	* nss/makedb.c: Likewise.
	* nss/nss_db/db-XXX.c: Likewise.
	* nss/nss_db/db-initgroups.c: Likewise.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_files/files-network.c: Likewise.
	* nss/nss_files/files-parse.c: Likewise.
	* posix/bug-regex5.c: Likewise.
	* posix/fnmatch_loop.c: Likewise.
	* posix/regcomp.c: Likewise.
	* posix/regexec.c: Likewise.
	* posix/tst-rfc3484-2.c: Likewise.
	* posix/tst-rfc3484-3.c: Likewise.
	* posix/tst-rfc3484.c: Likewise.
	* resolv/nss_dns/dns-canon.c: Likewise.
	* resolv/nss_dns/dns-network.c: Likewise.
	* resolv/res_init.c: Likewise.
	* resolv/res_mkquery.c: Likewise.
	* resolv/tst-aton.c: Likewise.
	* stdlib/cxa_atexit.c: Likewise.
	* stdlib/cxa_finalize.c: Likewise.
	* stdlib/gen-fpioconst.c: Likewise.
	* stdlib/strtol_l.c: Likewise.
	* string/tst-endian.c: Likewise.
	* sunrpc/auth_des.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_intXX_t.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sysdeps/generic/ldconfig.h: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.
	* sysdeps/generic/memusage.h: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/math_private.h: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h: Likewise.
	* sysdeps/posix/getaddrinfo.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrtf.c: Likewise.
	* sysdeps/powerpc/test-gettimebase.c: Likewise.
	* sysdeps/unix/sysv/linux/check_pf.c: Likewise.
	* sysdeps/unix/sysv/linux/getipv4sourcefilter.c: Likewise.
	* sysdeps/unix/sysv/linux/getsourcefilter.c: Likewise.
	* sysdeps/unix/sysv/linux/netlinkaccess.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/test-gettimebasefreq.c: Likewise.
	* sysdeps/unix/sysv/linux/preadv.c: Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c: Likewise.
	* sysdeps/unix/sysv/linux/setipv4sourcefilter.c: Likewise.
	* sysdeps/unix/sysv/linux/setsourcefilter.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/arch_prctl.c: Likewise.
	* sysdeps/x86_64/dl-tls.h: Likewise.
	* sysdeps/x86_64/dl-tlsdesc.h: Likewise.
	* time/alt_digit.c: Likewise.
	* time/era.c: Likewise.
	* wcsmbs/tst-c16c32-1.c: Likewise.

2013-05-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (struct test_sincos_data): New type.
	(RUN_TEST_LOOP_sincos): New macro.
	(sincos_test_data): New variable.
	(sincos_test): Run tests with RUN_TEST_LOOP_sincos.

2013-05-16  Richard Henderson  <rth@redhat.com>

	* math/atest-exp2.c (LIMB64): New macro.
	(CONSTSZ): New macro.
	(mp_exp1, mp_exp_m1, mp_log2): New variables.
	(hexdig): Move ...
	(print_mpn_fp): ... to function scope.
	(read_mpn_hex): Remove.
	(get_log2): Remove.
	(exp2_mpn): Use mp_log2.
	(main): Use mp_exp1.

2013-05-16  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc: Remove comment about not testing "inexact"
	exceptions.
	(INEXACT_EXCEPTION): New macro.
	(NO_INEXACT_EXCEPTION): Likewise.
	(INVALID_EXCEPTION_OK): Update value.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(UNDERFLOW_EXCEPTION_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(ERRNO_UNCHANGED): Likewise.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(test_exceptions): Handle testing "inexact" exceptions.
	(nearbyint_test_data): Use NO_INEXACT_EXCEPTION on all tests.
	(rint_test_data): Use NO_INEXACT_EXCEPTION and INEXACT_EXCEPTION.
	(rint_test_data) [LDBL_MANT_DIG <= 100]: Disable some tests.
	(rint_tonearest_test_data): Use NO_INEXACT_EXCEPTION and
	INEXACT_EXCEPTION.
	(rint_towardzero_test_data): Likewise.
	(rint_downward_test_data): Likewise.
	(rint_upward_test_data): Likewise.

	* math/libm-test.inc (exp_test_data): Use ERRNO_ERANGE together
	with OVERFLOW_EXCEPTION.
	(exp10_test_data): Likewise.
	(exp2_test_data): Likewise.
	(expm1_test_data): Likewise.
	(lgamma_test_data): Likewise.
	(pow_test_data): Likewise.
	(tgamma_test_data): Likewise.
	(yn_test_data): Remove duplicate test of overflow.

	* math/libm-test.inc (struct test_cc_c_data): New type.
	(RUN_TEST_LOOP_cc_c): New macro.
	(cpow_test_data): New variable.
	(cpow_test): Run tests with RUN_TEST_LOOP_cc_c.

	* math/libm-test.inc (struct test_f_L_data): New type.
	(RUN_TEST_LOOP_f_L): New macro.
	(llrint_test_data): New variable.
	(llrint_test): Run tests with RUN_TEST_LOOP_f_L.
	(llrint_tonearest_test_data): New variable.
	(llrint_test_tonearest): Run tests with RUN_TEST_LOOP_f_L.
	(llrint_towardzero_test_data): New variable.
	(llrint_test_towardzero): Run tests with RUN_TEST_LOOP_f_L.
	(llrint_downward_test_data): New variable.
	(llrint_test_downward): Run tests with RUN_TEST_LOOP_f_L.
	(llrint_upward_test_data): New variable.
	(llrint_test_upward): Run tests with RUN_TEST_LOOP_f_L.
	(llround_test_data): New variable.
	(llround_test): Run tests with RUN_TEST_LOOP_f_L.

2013-05-13  Peter Collingbourne  <pcc@google.com>

	* math/atest-exp2.c (get_log2): Remove const attribute.

2013-05-15  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (struct test_f_l_data): New type.
	(RUN_TEST_LOOP_f_l): New macro.
	(lrint_test_data): New variable.
	(lrint_test): Run tests with RUN_TEST_LOOP_f_l.
	(lrint_tonearest_test_data): New variable.
	(lrint_test_tonearest): Run tests with RUN_TEST_LOOP_f_l.
	(lrint_towardzero_test_data): New variable.
	(lrint_test_towardzero): Run tests with RUN_TEST_LOOP_f_l.
	(lrint_downward_test_data): New variable.
	(lrint_test_downward): Run tests with RUN_TEST_LOOP_f_l.
	(lrint_upward_test_data): New variable.
	(lrint_test_upward): Run tests with RUN_TEST_LOOP_f_l.
	(lround_test_data): New variable.
	(lround_test): Run tests with RUN_TEST_LOOP_f_l.

2013-05-15  Peter Collingbourne  <pcc@google.com>

	* sysdeps/x86_64/fpu/math_private.h (MOVQ): New macro.
	(EXTRACT_WORDS64) Use where appropriate.
	(INSERT_WORDS64) Likewise.

	* sysdeps/x86_64/fpu/multiarch/s_fma.c (__fma_fma4): Replace xm
	constraints with x constraints.
	* sysdeps/x86_64/fpu/multiarch/s_fmaf.c (__fmaf_fma4): Likewise.

	* malloc/obstack.c (_obstack_compat): Add initializer.

2013-05-15  Edjunior Machado  <emachado@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h (siginfo_t): Remove
	si_trapno and add si_addr_lsb to _sifields.sigfault.
	(si_trapno): Remove macro.
	(si_addr_lsb): Define new macro.
	(BUS_MCEERR_AR, BUS_MCEERR_AO): Define new values.

2013-05-15  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (llrint_test): Consistently use TEST_f_L
	instead of TEST_f_l.
	(llrint_test_tonearest): Likewise.
	(llrint_test_towardzero): Likewise.
	(llrint_test_downward): Likewise.
	(llrint_test_upward): Likewise.
	(llround_test): Likewise.

	* math/libm-test.inc (struct test_f_i_data): Add comment.
	(RUN_TEST_LOOP_f_b): New macro.
	(RUN_TEST_LOOP_f_b_tg): Likewise.
	(finite_test_data): New variable.
	(finite_test): Run tests with RUN_TEST_LOOP_f_b.
	(isfinite_test_data): New variable.
	(isfinite_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(isinf_test_data): New variable.
	(isinf_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(isnan_test_data): New variable.
	(isnan_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(isnormal_test_data): New variable.
	(isnormal_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(issignaling_test_data): New variable.
	(issignaling_test): Run tests with RUN_TEST_LOOP_f_b_tg.
	(signbit_test_data): New variable.
	(signbit_test): Run tests with RUN_TEST_LOOP_f_b_tg.

	* math/libm-test.inc (acos_test_data): Use ERRNO_EDOM together
	with INVALID_EXCEPTION.
	(acosh_test_data): Likewise.
	(asin_test_data): Likewise.
	(atanh_test_data): Likewise.
	(fmod_test_data): Likewise.
	(log_test_data): Likewise.
	(log10_test_data): Likewise.
	(log2_test_data): Likewise.
	(pow_test_data): Likewise.
	(sqrt_test_data): Likewise.
	(y0_test_data): Likewise.
	(y1_test_data): Likewise.
	(yn_test_data): Likewise.

	* math/libm-test.inc (test_single_errno) [TEST_INLINE]: Disable
	function contents.

	* math/libm-test.inc (struct test_ff_i_data): New type.
	(RUN_TEST_LOOP_ff_i_tg): New macro.
	(isgreater_test_data): New variable.
	(isgreater_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(isgreaterequal_test_data): New variable.
	(isgreaterequal_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(isless_test_data): New variable.
	(isless_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(islessequal_test_data): New variable.
	(islessequal_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(islessgreater_test_data): New variable.
	(islessgreater_test): Run tests with RUN_TEST_LOOP_ff_i_tg.
	(isunordered_test_data): New variable.
	(isunordered_test): Run tests with RUN_TEST_LOOP_ff_i_tg.

2013-05-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-05-14  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (RUN_TEST_LOOP_2_f): Fix whitespace.

	* math/libm-test.inc (struct test_fF_f1_data): Change type of
	extra_test to int.
	(struct test_f_i_data): Change type of max_ulp to int.

	* math/libm-test.inc (test_ffI_f1_data): New type.
	(RUN_TEST_LOOP_ffI_f1): New macro.
	(remquo_test_data): New variable.
	(remquo_test): Run tests with RUN_TEST_LOOP_ffI_f1.

	* setjmp/tst-setjmp-fp.c: New file.
	* setjmp/Makefile (tests): Add tst-setjmp-fp.
	(link-libm): New variable.
	($(objpfx)tst-setjmp-fp): Depend on $(link-libm).

	* math/libm-test.inc (struct test_f_i_data): New type.
	(RUN_TEST_LOOP_f_i): New macro.
	(RUN_TEST_LOOP_f_i_tg): Likewise.
	(fpclassify_test_data): New variable.
	(fpclassify_test): Run tests with RUN_TEST_LOOP_f_i_tg.
	(ilogb_test_data): New variable.
	(ilogb_test): Run tests with RUN_TEST_LOOP_f_i.

	* math/libm-test.inc (scalbln_test): Correct function name in END
	call.

	* math/libm-test.inc (struct test_f_f1_data): Add comment.
	(RUN_TEST_LOOP_fI_f1): New macro.
	(frexp_test_data): New variable.
	(frexp_test): Run tests with RUN_TEST_LOOP_fI_f1.

	* math/libm-test.inc (struct test_fF_f1_data): New type.
	(RUN_TEST_LOOP_fF_f1): New macro.
	(modf_test_data): New variable.
	(modf_test): Run tests with RUN_TEST_LOOP_fF_f1.

	* math/libm-test.inc (struct test_f_f1_data): New type.
	(RUN_TEST_LOOP_f_f1): New macro.
	(gamma_test_data): New variable.
	(gamma_test): Run tests with RUN_TEST_LOOP_f_f1.
	(lgamma_test_data): New variable.
	(lgamma_test): Run tests with RUN_TEST_LOOP_f_f1.

2013-05-13  Carlos O'Donell  <carlos@redhat.com>

	* elf/dl-hwcaps.c (_dl_important_hwcaps): Comment vDSO hwcap loading.
	* elf/ldconfig.c (is_hwcap_platform): Comment each hwcap check.
	(main): Comment "tls" pseudo-hwcap.

2013-05-13  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (struct test_fl_f_data): New type.
	(RUN_TEST_LOOP_fl_f): New variable.
	(scalbln_test_data): New variable.
	(scalbln_test): Run tests with RUN_TEST_LOOP_fl_f.

	* math/libm-test.inc (struct test_fi_f_data): New type.
	(RUN_TEST_LOOP_fi_f): New macro.
	(ldexp_test_data): New variable.
	(ldexp_test): Run tests with RUN_TEST_LOOP_fi_f.
	(scalbn_test_data): New variable.
	(scalbn_test): Run tests with RUN_TEST_LOOP_fi_f.

	* math/libm-test.inc (struct test_c_f_data): New type.
	(RUN_TEST_LOOP_c_f): New macro.
	(cabs_test_data): New variable.
	(cabs_test): Run tests with RUN_TEST_LOOP_c_f.
	(carg_test_data): New variable.
	(carg_test): Run tests with RUN_TEST_LOOP_c_f.
	(cimag_test_data): New variable.
	(cimag_test): Run tests with RUN_TEST_LOOP_c_f.
	(creal_test_data): New variable.
	(creal_test): Run tests with RUN_TEST_LOOP_c_f.

	* math/libm-test.inc (struct test_if_f_data): New type.
	(RUN_TEST_LOOP_if_f): New macro.
	(jn_test_data): New variable.
	(jn_test): Run tests with RUN_TEST_LOOP_if_f.
	(yn_test_data): New variable.
	(yn_test): Run tests with RUN_TEST_LOOP_if_f.

	* math/libm-test.inc (scalbln_test): Consistently use TEST_fl_f.

2013-05-13  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* math/libm-test.inc (M_1_DIV_El): Define using decimal constant.
	(log_test_data): Use M_1_DIV_El instead of 1.0 / M_El.

2013-05-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (CPPFLAGS-nonlib): Add
	-DUSE_CLOCK_GETTIME if USE_CLOCK_GETTIME is defined.
	(bench-deps): Add bench-timing.h.
	* benchtests-bench-skeleton.c: Include bench-timing.h.
	(main): Use TIMING_* macros instead of clock_gettime.
	* benchtests/bench-timing.h: New file.

	[BZ #14582]
	* sysdeps/ieee754/s_lib_version.c (_LIB_VERSION_INTERNAL):
	Renamed from _LIB_VERSION.
	(_LIB_VERSION): Set as weak alias of _LIB_VERSION_INTERNAL.

2013-05-12  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (struct test_fff_f_data): New type.
	(RUN_TEST_LOOP_fff_f): New macro.
	(fma_test_data): New variable.
	(fma_test): Run tests with RUN_TEST_LOOP_fff_f.
	(fma_towardzero_test_data): New variable.
	(fma_test_towardzero): Run tests with RUN_TEST_LOOP_fff_f.
	(fma_downward_test_data): New variable.
	(fma_test_downward): Run tests with RUN_TEST_LOOP_fff_f.
	(fma_upward_test_data): New variable.
	(fma_test_upward): Run tests with RUN_TEST_LOOP_fff_f.

	* math/libm-test.inc (BUILD_COMPLEX_ULP): New macro.
	(struct test_c_c_data): New type.
	(RUN_TEST_LOOP_c_c): New macro.
	(cacos_test_data): New variable.
	(cacos_test): Run tests with RUN_TEST_LOOP_c_c.
	(cacosh_test_data): New variable.
	(cacosh_test): Run tests with RUN_TEST_LOOP_c_c.
	(casin_test_data): New variable.
	(casin_test): Run tests with RUN_TEST_LOOP_c_c.
	(casinh_test_data): New variable.
	(casinh_test): Run tests with RUN_TEST_LOOP_c_c.
	(catan_test_data): New variable.
	(catan_test): Run tests with RUN_TEST_LOOP_c_c.
	(catanh_test_data): New variable.
	(catanh_test): Run tests with RUN_TEST_LOOP_c_c.
	(ccos_test_data): New variable.
	(ccos_test): Run tests with RUN_TEST_LOOP_c_c.
	(ccosh_test_data): New variable.
	(ccosh_test): Run tests with RUN_TEST_LOOP_c_c.
	(cexp_test_data): New variable.
	(cexp_test): Run tests with RUN_TEST_LOOP_c_c.
	(clog_test_data): New variable.
	(clog_test): Run tests with RUN_TEST_LOOP_c_c.
	(clog10_test_data): New variable.
	(clog10_test): Run tests with RUN_TEST_LOOP_c_c.
	(conj_test_data): New variable.
	(conj_test): Run tests with RUN_TEST_LOOP_c_c.
	(cproj_test_data): New variable.
	(cproj_test): Run tests with RUN_TEST_LOOP_c_c.
	(csin_test_data): New variable.
	(csin_test): Run tests with RUN_TEST_LOOP_c_c.
	(csinh_test_data): New variable.
	(csinh_test): Run tests with RUN_TEST_LOOP_c_c.
	(csqrt_test_data): New variable.
	(csqrt_test): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_test_data): New variable.
	(ctan_test): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_tonearest_test_data): New variable.
	(ctan_test_tonearest): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_towardzero_test_data): New variable.
	(ctan_test_towardzero): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_downward_test_data): New variable.
	(ctan_test_downward): Run tests with RUN_TEST_LOOP_c_c.
	(ctan_upward_test_data): New variable.
	(ctan_test_upward): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_test_data): New variable.
	(ctanh_test): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_tonearest_test_data): New variable.
	(ctanh_test_tonearest): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_towardzero_test_data): New variable.
	(ctanh_test_towardzero): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_downward_test_data): New variable.
	(ctanh_test_downward): Run tests with RUN_TEST_LOOP_c_c.
	(ctanh_upward_test_data): New variable.
	(ctanh_test_upward): Run tests with RUN_TEST_LOOP_c_c.
	* math/gen-libm-test.pl (get_ulps): Use BUILD_COMPLEX_ULP instead
	of BUILD_COMPLEX.

	* math/libm-test.inc (struct test_ff_f_data): New type.
	(struct test_ff_f_data_nexttoward): Likewise.
	(RUN_TEST_LOOP_2_f): New macro.
	(RUN_TEST_LOOP_ff_f): Likewise.
	(atan2_test_data): New variable.
	(atan2_test): Run tests with RUN_TEST_LOOP_ff_f.
	(copysign_test_data): New variable.
	(copysign_test): Run tests with RUN_TEST_LOOP_ff_f.
	(fdim_test_data): New variable.
	(fdim_test): Run tests with RUN_TEST_LOOP_ff_f.
	(fmax_test_data): New variable.
	(fmax_test): Run tests with RUN_TEST_LOOP_ff_f.
	(fmin_test_data): New variable.
	(fmin_test): Run tests with RUN_TEST_LOOP_ff_f.
	(fmod_test_data): New variable.
	(fmod_test): Run tests with RUN_TEST_LOOP_ff_f.
	(hypot_test_data): New variable.
	(hypot_test): Run tests with RUN_TEST_LOOP_ff_f.
	(nextafter_test_data): New variable.
	(nextafter_test): Run tests with RUN_TEST_LOOP_ff_f.
	(nexttoward_test_data): New variable.
	(nexttoward_test): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_test_data): New variable.
	(pow_test): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_tonearest_test_data): New variable.
	(pow_test_tonearest): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_towardzero_test_data): New variable.
	(pow_test_towardzero): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_downward_test_data): New variable.
	(pow_test_downward): Run tests with RUN_TEST_LOOP_ff_f.
	(pow_upward_test_data): New variable.
	(pow_test_upward): Run tests with RUN_TEST_LOOP_ff_f.
	(remainder_test_data): New variable.
	(remainder_test): Run tests with RUN_TEST_LOOP_ff_f.
	(scalb_test_data): New variable.
	(scalb_test): Run tests with RUN_TEST_LOOP_ff_f.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2013-05-11  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (fma_test): Use max_value instead of local
	variable fltmax.
	(nextafter_test): Likewise.

	* math/libm-test.inc (acos_towardzero_test_data): New variable.
	(acos_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(acos_downward_test_data): New variable.
	(acos_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(acos_upward_test_data): New variable.
	(acos_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(acosh_test_data): New variable.
	(acosh_test): Run tests with RUN_TEST_LOOP_f_f.
	(asin_test_data): New variable.
	(asin_test): Run tests with RUN_TEST_LOOP_f_f.
	(asin_tonearest_test_data): New variable.
	(asin_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(asin_towardzero_test_data): New variable.
	(asin_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(asin_downward_test_data): New variable.
	(asin_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(asin_upward_test_data): New variable.
	(asin_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(asinh_test_data): New variable.
	(asinh_test): Run tests with RUN_TEST_LOOP_f_f.
	(atan_test_data): New variable.
	(atan_test): Run tests with RUN_TEST_LOOP_f_f.
	(atanh_test_data): New variable.
	(atanh_test): Run tests with RUN_TEST_LOOP_f_f.
	(cbrt_test_data): New variable.
	(cbrt_test): Run tests with RUN_TEST_LOOP_f_f.
	(ceil_test_data): New variable.
	(ceil_test): Run tests with RUN_TEST_LOOP_f_f.
	(cos_test_data): New variable.
	(cos_test): Run tests with RUN_TEST_LOOP_f_f.
	(cos_tonearest_test_data): New variable.
	(cos_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(cos_towardzero_test_data): New variable.
	(cos_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(cos_downward_test_data): New variable.
	(cos_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(cos_upward_test_data): New variable.
	(cos_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_test_data): New variable.
	(cosh_test): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_tonearest_test_data): New variable.
	(cosh_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_towardzero_test_data): New variable.
	(cosh_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_downward_test_data): New variable.
	(cosh_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(cosh_upward_test_data): New variable.
	(cosh_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(erf_test_data): New variable.
	(erf_test): Run tests with RUN_TEST_LOOP_f_f.
	(erfc_test_data): New variable.
	(erfc_test): Run tests with RUN_TEST_LOOP_f_f.
	(exp_test_data): New variable.
	(exp_test): Run tests with RUN_TEST_LOOP_f_f.
	(exp_tonearest_test_data): New variable.
	(exp_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(exp_towardzero_test_data): New variable.
	(exp_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(exp_downward_test_data): New variable.
	(exp_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(exp_upward_test_data): New variable.
	(exp_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(exp10_test_data): New variable.
	(exp10_test): Run tests with RUN_TEST_LOOP_f_f.
	(exp2_test_data): New variable.
	(exp2_test): Run tests with RUN_TEST_LOOP_f_f.
	(expm1_test_data): New variable.
	(expm1_test): Run tests with RUN_TEST_LOOP_f_f.
	(fabs_test_data): New variable.
	(fabs_test): Run tests with RUN_TEST_LOOP_f_f.
	(floor_test_data): New variable.
	(floor_test): Run tests with RUN_TEST_LOOP_f_f.
	(j0_test_data): New variable.
	(j0_test): Run tests with RUN_TEST_LOOP_f_f.
	(j1_test_data): New variable.
	(j1_test): Run tests with RUN_TEST_LOOP_f_f.
	(log_test_data): New variable.
	(log_test): Run tests with RUN_TEST_LOOP_f_f.
	(log10_test_data): New variable.
	(log10_test): Run tests with RUN_TEST_LOOP_f_f.
	(log1p_test_data): New variable.
	(log1p_test): Run tests with RUN_TEST_LOOP_f_f.
	(log2_test_data): New variable.
	(log2_test): Run tests with RUN_TEST_LOOP_f_f.
	(logb_test_data): New variable.
	(logb_test): Run tests with RUN_TEST_LOOP_f_f.
	(logb_downward_test_data): New variable.
	(logb_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(nearbyint_test_data): New variable.
	(nearbyint_test): Run tests with RUN_TEST_LOOP_f_f.
	(rint_test_data): New variable.
	(rint_test): Run tests with RUN_TEST_LOOP_f_f.
	(rint_tonearest_test_data): New variable.
	(rint_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(rint_towardzero_test_data): New variable.
	(rint_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(rint_downward_test_data): New variable.
	(rint_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(rint_upward_test_data): New variable.
	(rint_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(round_test_data): New variable.
	(round_test): Run tests with RUN_TEST_LOOP_f_f.
	(sin_test_data): New variable.
	(sin_test): Run tests with RUN_TEST_LOOP_f_f.
	(sin_tonearest_test_data): New variable.
	(sin_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(sin_towardzero_test_data): New variable.
	(sin_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(sin_downward_test_data): New variable.
	(sin_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(sin_upward_test_data): New variable.
	(sin_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_test_data): New variable.
	(sinh_test): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_tonearest_test_data): New variable.
	(sinh_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_towardzero_test_data): New variable.
	(sinh_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_downward_test_data): New variable.
	(sinh_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(sinh_upward_test_data): New variable.
	(sinh_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(sqrt_test_data): New variable.
	(sqrt_test): Run tests with RUN_TEST_LOOP_f_f.
	(tan_test_data): New variable.
	(tan_test): Run tests with RUN_TEST_LOOP_f_f.
	(tan_tonearest_test_data): New variable.
	(tan_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.
	(tan_towardzero_test_data): New variable.
	(tan_test_towardzero): Run tests with RUN_TEST_LOOP_f_f.
	(tan_downward_test_data): New variable.
	(tan_test_downward): Run tests with RUN_TEST_LOOP_f_f.
	(tan_upward_test_data): New variable.
	(tan_test_upward): Run tests with RUN_TEST_LOOP_f_f.
	(tanh_test_data): New variable.
	(tanh_test): Run tests with RUN_TEST_LOOP_f_f.
	(tgamma_test_data): New variable.
	(tgamma_test): Run tests with RUN_TEST_LOOP_f_f.
	(trunc_test_data): New variable.
	(trunc_test): Run tests with RUN_TEST_LOOP_f_f.
	(y0_test_data): New variable.
	(y0_test): Run tests with RUN_TEST_LOOP_f_f.
	(y1_test_data): New variable.
	(y1_test): Run tests with RUN_TEST_LOOP_f_f.
	(significand_test_data): New variable.
	(significand_test): Run tests with RUN_TEST_LOOP_f_f.

2013-05-10  Christian Gr√∂nke  <cgr_bugs@sysgo.com>

	[BZ #12387]
	* sysdeps/unix/sysv/linux/sh/getgid.c: New file.

2013-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/bits/statvfs.h: Add ST_NOATIME.

2013-05-10  Andreas Jaeger  <aj@suse.de>

	[BZ #15448]
	* sysdeps/unix/sysv/linux/bits/sched.h (__CPU_SET_S)
	(__CPU_CLR_S, __CPU_ISSET_S): Avoid integer overflow.

2013-05-10  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (adjust_arg): New function.
	(special_functions): Handle generating output in both functions
	and arrays.
	(parse_args): Likewise.
	(generate_testfile): Handle START_DATA and END_DATA.  Pass extra
	$in_func argument to parse_args.
	* math/libm-test.inc (struct test_f_f_data): New type.
	(IF_ROUND_INIT_): New macro.
	(IF_ROUND_INIT_FE_DOWNWARD): Likewise.
	(IF_ROUND_INIT_FE_TONEAREST): Likewise.
	(IF_ROUND_INIT_FE_TOWARDZERO): Likewise.
	(IF_ROUND_INIT_FE_UPWARD): Likewise.
	(ROUND_RESTORE_): Likewise.
	(ROUND_RESTORE_FE_DOWNWARD): Likewise.
	(ROUND_RESTORE_FE_TONEAREST): Likewise.
	(ROUND_RESTORE_FE_TOWARDZERO): Likewise.
	(ROUND_RESTORE_FE_UPWARD): Likewise.
	(RUN_TEST_LOOP_f_f): New macro.
	(acos_test_data): New variable.
	(acos_test): Run tests with RUN_TEST_LOOP_f_f.
	(acos_tonearest_test_data): New variable.
	(acos_test_tonearest): Run tests with RUN_TEST_LOOP_f_f.

2013-05-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/bench-skeleton.c (startup): Fix coding style.

2013-05-10  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6809]
	* math/w_tgamma.c (__tgamma): Also call __kernel_standard for
	negative infinity argument.
	* math/w_tgammaf.c (__tgammaf): Also call __kernel_standard_f for
	negative infinity argument.
	* math/w_tgammal.c (__tgammal): Also call __kernel_standard_l for
	negative infinity argument.
	* math/libm-test.inc (tgamma_test): Expect errno to be set for
	domain errors.

2013-05-10  Florian Weimer  <fweimer@redhat.com>

	* elf/sprof.c (load_profdata): Use fstat64 instead of fstat.
	* iconv/iconv_charmap.c (charmap_conversion): Likewise.
	* iconv/iconv_prog.c (main): Likewise.
	* locale/programs/charmap-dir.c (charmap_readdir)
	(fopen_uncompressed): Likewise.
	* locale/programs/locfile.c (siblings_uncached)
	(write_locale_data): Use lstat64 instead of lstat.
	* sunrpc/rpc_main.c (find_cpp, checkfiles): Use stat64 instead of
	stat.

2013-05-10  Andreas Jaeger  <aj@suse.de>

	[BZ #15395]
	* sunrpc/rpc_main.c (main): Invoke setlocale and textdomain for
	localization.
	Include <locale.h>.

2013-05-09  Carlos O'Donell  <carlos@redhat.com>

	* elf/dl-close.c (_dl_close_worker): Add comments.

2013-05-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15359]
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c (c): Use 106 bits for
	high part of pi/2.
	(__ieee754_rem_pio2l): Update comments.

	[BZ #15429]
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c (c): Use 113 bits for
	high part of pi/2.
	(__ieee754_rem_pio2l): Update comments.

	* math/libm-test.inc (M_SQRT_2_2): Remove macro.
	(csqrt_test): Use M_SQRT1_2l instead of M_SQRT_2_2.

	* math/libm-test.inc (carg_test): Use M_PI_34l instead of 3 *
	M_PI_4l.

	* math/libm-test.inc (M_PI_34l): Define using decimal constant.
	(M_PI_34_LOG10El): Likewise.
	(M_PI2_LOG10El): Likewise.
	(M_PI4_LOG10El): Likewise.
	(M_PI_LOG10El): Likewise.

2013-05-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-05-08  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (PLUS_ZERO_INIT): New macro.
	(MINUS_ZERO_INIT): Likewise.
	(PLUS_INFTY_INIT): Likewise.
	(MINUS_INFTY_INIT): Likewise.
	(QNAN_VALUE_INIT): Likewise.
	(MAX_VALUE_INIT): Likewise.
	(MIN_VALUE_INIT): Likewise.
	(MIN_SUBNORM_VALUE_INIT): Likewise.
	(plus_zero): Initialize with PLUS_ZERO_INIT.
	(minus_zero): Initialize with MINUS_ZERO_INIT.
	(plus_infty): Initialize with PLUS_INFTY_INIT.
	(minus_infty): Initialize with MINUS_INFTY_INIT.
	(qnan_value): Initialize with QNAN_VALUE_INIT.
	(max_value): Initialize with MAX_VALUE_INIT.
	(min_value): Initialize with MIN_VALUE_INIT.
	(min_subnorm_value): Initialize with MIN_SUBNORM_VALUE_INIT.

	* math/libm-test.inc (RUN_TEST_if_f): New macro.
	(jn_test): Use TEST_if_f instead of TEST_ff_f.
	(ldexp_text): Use TEST_fi_i instead of TEST_ff_f.
	(yn_test): Use TEST_if_f instead of TEST_ff_f.

	* math/libm-test.inc (RUN_TEST_f_f): New macro.
	(RUN_TEST_2_f): Likewise.
	(RUN_TEST_ff_f): Likewise.
	(RUN_TEST_fi_f): Likewise.
	(RUN_TEST_fl_f): Likewise.
	(RUN_TEST_fff_f): Likewise.
	(RUN_TEST_c_f): Likewise.
	(RUN_TEST_f_f1): Likewise.
	(RUN_TEST_fF_f1): Likewise.
	(RUN_TEST_fI_f1): Likewise.
	(RUN_TEST_ffI_f1): Likewise.
	(RUN_TEST_c_c): Likewise.
	(RUN_TEST_cc_c): Likewise.
	(RUN_TEST_f_i): Likewise.
	(RUN_TEST_f_i_tg): Likewise.
	(RUN_TEST_ff_i_tg): Likewise.
	(RUN_TEST_f_b): Likewise.
	(RUN_TEST_f_b_tg): Likewise.
	(RUN_TEST_f_l): Likewise.
	(RUN_TEST_f_L): Likewise.
	(RUN_TEST_sincos): Likewise.
	* math/gen-libm-test.pl (new_test): Take new argument to indicate
	whether to show exceptions.  Do not include ");\n" in return
	value.
	(special_functions): Output call to RUN_TEST_sincos instead of
	check_float calls.  Update calls to new_test.
	(parse_args): Output call to single RUN_TEST_* macro instead of
	check_* calls and other assignments.  Update calls to new_test.

	[BZ #2546]
	[BZ #2560]
	[BZ #5159]
	[BZ #15426]
	* sysdeps/ieee754/k_standard.c (__kernel_standard): Copy sign of
	input to result for tgamma overflow.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gamma_positive): New function.
	(__ieee754_gamma_r): Handle positive infinity, NaN, overflow and
	underflow here.  Use gamma_positive instead of exp (lgamma) for
	other arguments.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gammaf_positive): New function.
	(__ieee754_gammaf_r): Handle positive infinity, NaN, overflow and
	underflow here.  Use gamma_positive instead of exp (lgamma) for
	other arguments.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gammal_positive): New function.
	(__ieee754_gammal_r): Handle positive infinity, NaN, overflow and
	underflow here.  Use gamma_positive instead of exp (lgamma) for
	other arguments.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gammal_positive): New function.
	(__ieee754_gammal_r): Handle positive infinity, overflow and
	underflow here.  Handle NaN the same as positive infinity.  Remove
	check x < 0xffffffff for negative integers.  Use gamma_positive
	instead of exp (lgamma) for other arguments.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c: Include <float.h>.
	(gamma_coeff): New variable.
	(NCOEFF): New macro.
	(gammal_positive): New function.
	* sysdeps/ieee754/dbl-64/gamma_product.c: New file.
	* sysdeps/ieee754/dbl-64/gamma_productf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/gamma_productl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/gamma_productl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/gamma_product.c: Likewise.
	* sysdeps/ieee754/ldbl-96/gamma_productl.c: Likewise.
	* sysdeps/generic/math_private.h (__gamma_productf): New
	prototype.
	(__gamma_product): Likewise.
	(__gamma_productl): Likewise.
	* math/Makefile (libm-calls): Add gamma_product.
	* math/libm-test.inc (tgamma_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-05-08  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* benchtests/bench-skeleton.c (main): Preheat CPU.

2013-05-07  Aurelien Jarno <aurelien@aurel32.net>

	* misc/sys/param.h (DEV_BSIZE): Define only if not already defined.

2013-05-07  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/ldsodefs.h [IS_IN_rtld]: Declare _dl_skip_args
	and _dl_skip_args_internal.

2013-05-07  Carlos O'Donell  <carlos@redhat.com>

	* manual/message.texi (Message Translation): Talk about users.
	Message to key mapping impacts design.

2013-05-06  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/wordsize-64/glob64.c: New file.

	* elf/dl-open.c: Remove declaration of _dl_sysdep_start.

	* sysdeps/unix/sysv/linux/wordsize-64/glob64.c: Moved to ...
	* sysdeps/wordsize-64/glob64.c: ... here.

	* sysdeps/generic/not-cancel.h (NO_CANCELLATION): New macro.
	(pause_not_cancel, nanosleep_not_cancel, sigsuspend_not_cancel):
	New macros.

	* debug/getlogin_r_chk.c: Moved to ...
	* login/getlogin_r_chk.c: ... here.
	* debug/Makefile (routines): Move getlogin_r_chk to ...
	* login/Makefile (routines): ... here.
	* debug/Versions (libc: GLIBC_2.4): Move getlogin_r_chk to ...
	* login/Versions (libc: GLIBC_2.4): ... here.

	* io/poll.c (__poll): Renamed from poll.
	Add libc_hidden_def.
	(poll): Define as weak alias.

	* debug/ptsname_r_chk.c: Moved to ...
	* login/ptsname_r_chk.c: ... here.
	* debug/Makefile (routines): Move ptsname_r_chk to ...
	* login/Makefile (routines): ... here.
	* debug/Versions (libc: GLIBC_2.4): Move __ptsname_r_chk to ...
	* login/Versions (libc: GLIBC_2.4): ... here.

	* posix/getlogin.c: Moved to ...
	* login/getlogin.c: ... here.
	* posix/getlogin_r.c: Moved to ...
	* login/getlogin_r.c: ... here.
	* posix/getlogin_r.c: Moved to ...
	* login/getlogin_r.c: ... here.
	* posix/Makefile (routines): Move getlogin, getlogin_r, setlogin to ...
	* login/Makefile (routines): ... here.
	* posix/Versions (libc: GLIBC_2.0): Move setlogin to ...
	* login/Versions (libc: GLIBC_2.0): ... here.

	* resource/setrlimit.c (__setrlimit): Renamed from setrlimit.
	(setrlimit): Define as weak alias.

	* sysdeps/posix/truncate.c (__truncate): Renamed from truncate.
	Call __ names for open, ftruncate, and close.
	For LENGTH==0 case, just use O_TRUNC rather than calling ftruncate.
	(truncate): Define as weak alias.

2013-05-06  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Initialize x before each
	test of frexp, modf and remquo.

	* math/libm-test.inc (gamma_test): Consistently use TEST_f_f1 to
	test signgam value.

2013-05-06  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15418]
	[BZ #15419]
	* sysdeps/powerpc/fpu/e_hypot.c: Fix spurious FP exception generated by
	internal tests.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.

2013-05-06  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-writev.h: New file.
	* elf/dl-misc.c: Include it.
	(_dl_debug_vdprintf): Call _dl_writev instead of __writev et al.
	* sysdeps/unix/sysv/linux/dl-writev.h: New file.

2013-05-04  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (noXFails): Remove variable.
	(noXPasses): Likewise.
	(BUILD_COMPLEX_INT): Remove macro.
	(print_screen): Remove xfail argument.
	(print_screen_max_error): Likewise.
	(update_stats): Likewise.
	(print_max_error): Likewise.  Update calls to other affected
	functions.
	(print_complex_max_error): Likewise.
	(test_single_exception): Update calls to print_screen.
	(test_single_errno): Likewise.
	(check_float_internal): Remove xfail argument.  Update calls to
	other affected functions.
	(check_float): Likewise.
	(check_complex): Likewise.
	(check_int): Likewise.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(main): Don't print noXFails and noXPasses.
	* math/gen-libm-test.pl (top level): Don't mention expected
	failure handling in comment.
	(new_test): Don't handle expected failures.
	(parse_args): Don't mention expected failure handling in comment.
	(generate_testfile): Don't handle expected failures.
	(parse_ulps): Likewise.
	(print_ulps_file): Likewise.
	(get_failure): Remove function.
	(output_test): Don't handle expected failures.
	* make/README.libm-test: Don't mention expected failure handling.

	* math/libm-test.inc (plus_zero): Make const.  Add initializer.
	(minus_zero): Likewise.
	(plus_infty): Likewise.
	(minus_infty): Likewise.
	(qnan_value): Likewise.
	(max_value): Likewise.
	(min_value): Likewise.
	(min_subnorm_value): Likewise.
	(initialize): Do not initialize those variables dynamically.

2013-05-03  Roland McGrath  <roland@hack.frob.com>

	* io/open.c (__open_2): Moved to ...
	* io/open_2.c: ... this new file.
	* io/open64.c (__open64_2): Moved to ...
	* io/open64_2.c: ... this new file.
	* io/openat.c (__openat_2): Moved to ...
	* io/openat_2.c: ... this new file.
	* io/openat64.c (__openat64_2): Moved to ...
	* io/openat64_2.c: ... this new file.
	* io/Makefile (routines): Add them.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Remove them.
	* sysdeps/unix/sysv/linux/open_2.c: File removed.
	* sysdeps/unix/sysv/linux/open64_2.c: File removed.
	* sysdeps/unix/sysv/linux/openat.c (__OPENAT_2): Removed.
	* sysdeps/unix/sysv/linux/openat64.c (__OPENAT_2): Removed.
	* sysdeps/unix/sysv/linux/wordsize-64/openat.c (__openat_2): Removed.
	(__openat64): Add hidden_ver.
	* sysdeps/mach/hurd/open.c (__open_2, __open64_2): Removed.
	* sysdeps/mach/hurd/openat.c (__openat_2): Removed.

	* elf/dl-sysdep.c (_dl_sysdep_start) [NEED_DL_SYSINFO]:
	Separately conditionalize setting of GLRO(dl_sysinfo) so
	that the GLRO(dl_sysinfo_dso) test is under [NEED_DL_SYSINFO_DSO]
	as well, but the actual setting is only under [NEED_DL_SYSINFO].

2013-04-30  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/Versions: Add __vdso_time symbol.
	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h: Add __vdso_time
	definition.
	(VDSO_IFUNC_RET): Cast to void * to silence compiler warning.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c
	(_libc_vdso_platform_setup): Add __vdso_time initialization.
	* sysdeps/unix/sysv/linux/powerpc/time.c: New file: time implementation
	for PowerPC using vDSO where is avaliable or gettimeofday as a fallback.

2013-05-03  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (lgamma_test): Consistently use TEST_f_f1 to
	test signgam value.

	* math/libm-test.inc (hypot_test): Do not use
	IGNORE_ZERO_INF_SIGN.

2013-05-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/gnu/netinet/tcp.h (TCP_TIMESTAMP): New value, from
	Linux 3.9.
	* sysdeps/unix/sysv/linux/bits/socket.h (PF_VSOCK, AF_VSOCK): Add.
	(PF_MAX): Adjust for VSOCK change.

2013-05-03  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-05-02  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15264]
	* localedata/locales/en_CA (LC_MESSAGES): Define yesstr and nostr.
	* localedata/locales/es_AR (LC_MESSAGES): Copy es_ES.
	* localedata/locales/es_ES (LC_MESSAGES): Define yesstr and nostr.

2013-05-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-05-01  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* string/bits/string2.h (__strcmp_cg): Call __strcmp_gc.

2013-05-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/opendir.c: Include <sys/param.h> to get MIN/MAX macros.

2013-05-01  Richard Smith  <richard@metafoo.co.uk>

	[BZ #14952]
	* misc/sys/cdefs.h (__extern_inline, __extern_always_inline)
	[__GNUC__ && (__GNUC_STDC_INLINE__ || __GNUC_GNU_INLINE__)]:
	Use __attribute__ ((__gnu_inline__)).
	[__GNUC__ && !(__GNUC_STDC_INLINE__ || __GNUC_GNU_INLINE__)]:
	Don't use __attribute__ ((__gnu_inline__)).

2013-05-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15423]
	* math/s_catan.c (__catan): Handle small real or imaginary part of
	input specially to avoid spurious underflow.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-30  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-04-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15416]
	* math/s_catan.c (__catan): Compute expressions 1 - x^2 - y^2 more
	accurately for denominator in atan2.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/s_sin.c: Format code.

	* benchtests/Makefile (bench): Remove slow benchmarks.
	* benchtests/atan-inputs: Add slow benchmark inputs.
	* benchtests/bench-modf.c (NUM_VARIANTS): Define.
	(BENCH_FUNC): Accept variant offset.
	(VARIANT): Define.
	* benchtests/bench-skeleton.c (main): Run benchmark for each
	variant.
	* benchtests/cos-inputs: Add slow benchmark inputs.
	* benchtests/exp-inputs: Likewise.
	* benchtests/pow-inputs: Likewise.
	* benchtests/sin-inputs: Likewise.
	* benchtests/slowatan-inputs: Remove.
	* benchtests/slowatan.c: Remove.
	* benchtests/slowcos-inputs: Remove.
	* benchtests/slowcos.c: Remove.
	* benchtests/slowexp-inputs: Remove.
	* benchtests/slowexp.c: Remove.
	* benchtests/slowpow-inputs: Remove.
	* benchtests/slowpow.c: Remove.
	* benchtests/slowsin-inputs: Remove.
	* benchtests/slowsin.c: Remove.
	* benchtests/slowtan-inputs: Remove.
	* benchtests/slowtan.c: Remove.
	* benchtests/tan-inputs: Add slow benchmark inputs.
	* scripts/bench.pl: Parse comments and directives.

	* benchtests/Makefile: Remove *-ITER.  Define BENCH_DURATION
	in CPPFLAGS.
	($(objpfx)bench-%.c): Remove *-ITER.
	* benchtests/bench-modf.c: Remove definition of ITER.
	* benchtests/bench-skeleton.c (TIMESPEC_AFTER): New macro.
	(main): Loop for DURATION seconds instead of fixed number of
	iterations.
	* scripts/bench.pl: Don't expect iterations in parameters.

2013-04-29  Roland McGrath  <roland@hack.frob.com>

	* io/fchdir.c (__fchdir): Renamed from fchdir.
	(fchdir): Define as weak alias.

2013-04-29  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (ERRNO_UNCHANGED): New macro.
	(ERRNO_EDOM): Likewise.
	(ERRNO_ERANGE): Likewise.
	(noErrnoTests): New variable.
	(init_max_error): Set errno to 0.
	(test_single_errno): New function.
	(test_errno): Likewise.
	(check_float_internal): Call test_errno.  Set errno to 0.
	(check_complex): Refer to errno tests in comment.
	(check_int): Call test_errno.  Set errno to 0.
	(check_long): Likewise.
	(check_bool): Likewise.
	(check_longlong): Likewise.
	(cos_test): Use ERRNO_* flags for errno tests instead of
	check_int.
	(expm1_test): Likewise.
	(fmod_test): Likewise.
	(ilogb_test): Likewise.
	(lgamma_test): Likewise.
	(pow_test): Likewise.
	(remainder_test): Likewise.
	(sin_test): Likewise.
	(tan_test): Likewise.
	(yn_test): Likewise.
	(initialize): Set errno to 0.
	(main): Print number of errno tests.
	* math/gen-libm-test.pl (parse_args): Allow ERRNO flags on tests.

2013-04-29  Andreas Jaeger  <aj@suse.de>

	[BZ #15084]
	* resolv/res_debug.c (p_option): Fix strings for RES_USEBSTRING
	and RES_USEVC.

	[BZ #15085]
	* resolv/resolv.h (RES_NOCHECKNAME): Mark as unimplemented.
	* resolv/res_debug.c (p_option): Mark RES_NOCHECKNAME as
	unimplemented.

	[BZ #15380]
	* stdlib/random.c (__initstate): Return NULL if
	__initstate fails.

	[BZ #15086]
	* resolv/res_debug.c (p_option): Handle RES_NOALIASES,
	RES_KEEPTSIG, RES_BLAST, RES_NOIP6DOTINT, RES_SNGLKUP,
	RES_SNGLKUPREOP.

2013-04-29  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-04-29  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (cacos_test): Add missing semicolons at ends
	of individual tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.

2013-04-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15409]
	* math/s_catan.c (__catan): Handle arguments with large real or
	imaginary part separately without squaring.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanh.c (__catanh): Likewise.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c [LDBL_MANT_DIG == 106] (LDBL_EPSILON): Undefine
	and redefine.
	(__catanhl): Handle arguments with large real or imaginary part
	separately without squaring.
	* math/s_catanl.c [LDBL_MANT_DIG == 106] (LDBL_EPSILON): Undefine
	and redefine.
	(__catanl): Handle arguments with large real or imaginary part
	separately without squaring.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-27  Andreas Jaeger  <aj@suse.de>

	[BZ #15007]
	* stdlib/stdlib.h: Update guards for qecvt.
	* stdlib/bits/stdlib-ldbl.h: Sync guards for qecvt etc with
	<stdlib.h>.

2013-04-27  Allan McRae  <allan@archlinux.org>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2013-04-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15406]
	* math/s_catan.c: Include <float.h>.
	(__catan): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanf.c: Include <float.h>.
	(__catanf): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanh.c: Include <float.h>.
	(__catanh): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanhf.c: Include <float.h>.
	(__catanhf): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanhl.c: Include <float.h>.
	(__catanhl): Ensure underflow exception occurs for underflowed
	result.
	* math/s_catanl.c: Include <float.h>.
	(__catanl): Ensure underflow exception occurs for underflowed
	result.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.

	[BZ #15405]
	* math/s_ccosh.c (__ccosh): Ensure underflow exception occurs for
	underflowed result.
	* math/s_ccoshf.c (__ccoshf): Likewise.
	* math/s_ccoshl.c (__ccoshl): Likewise.
	* math/s_csin.c (__csin): Likewise.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/libm-test.inc (ccos_test): Add more tests.
	(ccosh_test): Likewise.
	(csin_test): Likewise.
	(csinh_test): Likewise.

2013-04-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/power5/fpu/s_modf.c: Moved to ...
	* sysdeps/powerpc/power5+/fpu/s_modf.c: ... this.
	* sysdeps/powerpc/power5/fpu/s_modff.c: Moved to ...
	* sysdeps/powerpc/power5+/fpu/s_modff.c: ... this.
	* sysdeps/powerpc/powerpc32/power5+/Implies: Add powerpc/power5+ and
	powerpc/power5+/fpu folders.
	* sysdeps/powerpc/powerpc64/power5+/Implies: Likewise.


2013-04-26  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2013-04-25  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile [$(config-machine) = x86_64] (tests): Remove
	additions to variable.
	[$(config-machine) = x86_64] (modules-names): Likewise.
	($(objpfx)tst-audit3): Remove dependency.
	($(objpfx)tst-audit3.out): Likewise.
	($(objpfx)tst-audit4): Likewise.
	($(objpfx)tst-audit4.out): Likewise.
	($(objpfx)tst-audit5): Likewise.
	($(objpfx)tst-audit5.out): Likewise.
	($(objpfx)tst-audit6): Likewise.
	($(objpfx)tst-audit6.out): Likewise.
	($(objpfx)tst-audit7): Likewise.
	($(objpfx)tst-audit7.out): Likewise.
	(tst-audit3-ENV): Remove variable.
	(tst-audit4-ENV): Likewise.
	(tst-audit5-ENV): Likewise.
	(tst-audit6-ENV): Likewise.
	(tst-audit7-ENV): Likewise.
	[$(config-cflags-avx) = yes] (AVX-CFLAGS): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-audit4.c): Remove
	addition to variable.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod4a.c): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod4b.c): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod6b.c): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod6c.c): Likewise.
	[$(config-cflags-avx) = yes] (CFLAGS-tst-auditmod7b.c): Likewise.
	* sysdeps/x86_64/Makefile [$(subdir) = elf] (tests): Add
	tst-audit3, tst-audit4 and tst-audit5.
	[$(subdir) = elf && $(config-cflags-avx) = yes] (tests): Add
	tst-audit6 and tst-audit7.
	[$(subdir) = elf] (modules-names): Add audit modules for those
	tests.
	[$(subdir) = elf] ($(objpfx)tst-audit3): New dependency.
	[$(subdir) = elf] ($(objpfx)tst-audit3.out): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit4): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit4.out): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit5): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit5.out): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit6): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit6.out): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit7): Likewise.
	[$(subdir) = elf] ($(objpfx)tst-audit7.out): Likewise.
	[$(subdir) = elf] (tst-audit3-ENV): New variable.
	[$(subdir) = elf] (tst-audit4-ENV): Likewise.
	[$(subdir) = elf] (tst-audit5-ENV): Likewise.
	[$(subdir) = elf] (tst-audit6-ENV): Likewise.
	[$(subdir) = elf] (tst-audit7-ENV): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes] (AVX-CFLAGS):
	Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-audit4.c): Append $(AVX-CFLAGS).
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod4a.c): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod4b.c): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod6b.c): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod6c.c): Likewise.
	[$(subdir) = elf && $(config-cflags-avx) = yes]
	(CFLAGS-tst-auditmod7b.c): Likewise.
	* elf/tst-audit3.c: Move to ...
	* sysdeps/x86_64/tst-audit3.c: ... here.
	* elf/tst-audit4.c: Move to ...
	* sysdeps/x86_64/tst-audit4.c: ... here.
	* elf/tst-audit5.c: Move to ...
	* sysdeps/x86_64/tst-audit5.c: ... here.
	* elf/tst-audit6.c: Move to ...
	* sysdeps/x86_64/tst-audit6.c: ... here.
	* elf/tst-audit7.c: Move to ...
	* sysdeps/x86_64/tst-audit7.c: ... here.
	* elf/tst-auditmod3a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod3a.c: ... here.
	* elf/tst-auditmod3b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod3b.c: ... here.
	* elf/tst-auditmod4a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod4a.c: ... here.
	* elf/tst-auditmod4b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod4b.c: ... here.
	* elf/tst-auditmod5a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod5a.c: ... here.
	* elf/tst-auditmod5b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod5b.c: ... here.
	* elf/tst-auditmod6a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod6a.c: ... here.
	* elf/tst-auditmod6b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod6b.c: ... here.
	* elf/tst-auditmod6c.c: Move to ...
	* sysdeps/x86_64/tst-auditmod6c.c: ... here.
	* elf/tst-auditmod7a.c: Move to ...
	* sysdeps/x86_64/tst-auditmod7a.c: ... here.
	* elf/tst-auditmod7b.c: Move to ...
	* sysdeps/x86_64/tst-auditmod7b.c: ... here.

2013-04-25  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #15366]
	* sysdeps/generic/inttypes.h (PRId8, PRId16, etc.):
	define unconditionally.
	* sysdeps/generic/stdint.h (INT8_MIN, INT16_MIN, etc.):
	define unconditionally.
	(INT8_C, INT16_C, etc.): Likewise.

2013-04-25  Maciej W. Rozycki  <macro@codesourcery.com>

	* csu/libc-start.c (__libc_start_main) [!SHARED]: Declare
	__ehdr_start with hidden visibility.

	* soft-fp/op-common.h (_FP_SQRT): s/sNAN/NAN/ in a comment.

2013-04-24  Carlos O'Donell  <carlos@redhat.com>

	* math/libm-test.inc (cos_test): Use accurate hex constants.
	(sincost_test): Likewise.

2013-04-24  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.

	* math/s_catanf.c (__catanf): Use suffixed floating-point
	constants.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/s_catanl.c (__catanl): Likewise.

	[BZ #15394]
	* math/s_catan.c (__catan): Calculate imaginary part of result
	with log1p not log unless computing log of number close to 0.
	* math/s_catanf.c (__catanf): Likewise.
	* math/s_catanl.c (__catanl): Likewise.
	* math/s_catanh.c (__catanh): Calculate real part of result with
	log1p not log unless computing log of number close to 0.
	* math/s_catanhf.c (__catanhf): Likewise.
	* math/s_catanhl.c (__catanhl): Likewise.
	* math/libm-test.inc (catan_test): Add more tests.
	(catanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-24  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Mention files in which fast and slow
	paths of math functions are implemented.

2013-04-23  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/timespec_get.c: New file.

2013-04-23  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/power5/fpu/s_modf.c: New file: modf optimization for
	POWER.
	* sysdeps/powerpc/power5/fpu/s_modff.c: New file: modff optimization
	for POWER.
	* sysdeps/powerpc/powerpc64/power5/Implies: Add powerpc/power5 and
	powerpc/power5/fpu folders.
	* sysdeps/powerpc/powerpc32/power5/Implies: Likewise.
	* benchtests/Makefile: Add modf testcase.
	* benchtests/bench-modf.c: New file: Benchmark test for mo

2013-04-23  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14888]
	* time/Makefile (tests): Add tst-strptime-whitespace.
	* time/strptime_l.c (get_number): Use ISSPACE.
	(__strptime_internal): Likewise.
	* time/tst-strptime-whitespace.c: New test case.

2013-04-23  Andreas Schwab  <schwab@linux-m68k.org>

	* nss/nss_files/files-init.c (TF): Don't initialize flexible array
	member.
	(_nss_files_init): Set it here.

2013-04-23  Heiko Carstens  <heiko.carstens@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/bits/statfs.h: Change types of
	f_type, f_bsize, f_namelen, f_frsize, f_flags,and f_spare to
	unsigned.

2013-04-22  Jan-Benedict Glaw  <jbglaw@getslash.de>

	* nss/getent.c (shadow_keys): Call endspent, not endpwent.

2013-04-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Compute results
	size just once.

2013-04-21  David S. Miller  <davem@davemloft.net>

	* po/ru.po: Update Russion translation from translation project.

2013-04-17  Adam Conrad  <adconrad@0c3.net>

	* sysdeps/unix/sysv/linux/sys/fsuid.h: Remove __wur from setfsuid
	and setfsgid.

2013-04-17  Carlos O'Donell  <carlos@redhat.com>

	* configure.in: Remove i386 configure warning. Remove i386 case.
	* configure: Regenerate.
	* sysdeps/i386/configure.in: Raise error if config_machine is i386.
	Add example to error message.
	* sysdeps/i386/configure: Regenerate.

2013-04-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (bench): Add cos, tan, slowcos and
	slowtan.
	* benchtests/cos-inputs: New file.
	* benchtests/slowcos-inputs: New file.
	* benchtests/slowcos.c: New file.
	* benchtests/slowtan-inputs: New file.
	* benchtests/slowtan.c: New file.
	* benchtests/tan-inputs: New file.

2013-04-16  Roland McGrath  <roland@hack.frob.com>

	* rt/tst-aio7.c (do_test): Don't test O_RDONLY fd case, which is now
	considered kosher.

2013-04-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile: Include cppflags-iterator.mk to add
	-DNOT_IN_libc=1 to CPPFLAGS of all benchmark programs.

	* Makefile.in (bench-clean): New target.
	* benchtests/Makefile (bench-clean): Likewise.

2013-04-16  David Holsgrove  <david.holsgrove@xilinx.com>

	* elf/elf.h: Add EM_MICROBLAZE and MicroBlaze relocations.

2013-04-15  Thomas Schwinge  <thomas@codesourcery.com>

	* stdio-common/tstdiomisc.c: Fix coding-style violation.

2013-04-15  Andreas Schwab  <schwab@suse.de>

	* nscd/grpcache.c (cache_addgr): Properly check for short write.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/pwdcache.c (cache_addpw): Likewise.
	* nscd/servicescache.c (cache_addserv): Likewise.  Don't write
	more than recsize.

2013-04-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* benchtests/Makefile (bench): Write all output to
	bench-out.tmp together.

2013-04-15  Andreas Schwab  <schwab@suse.de>

	* nscd/nscd.c (main): Don't fork again after closing files.

2013-04-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/tst-fwrite-error.c (do_test): Fix BUF array definition.

	* benchtests/Rules (bench-deps): Collect dependencies into a
	single variable.  Add Makefile to dependencies.
	($(objpfx)bench-%.c): Depend on bench-deps.

2013-04-12  Roland McGrath  <roland@hack.frob.com>
	    Xavier Roche  <roche+kml2@exalead.com>

	[BZ #15361]
	* sysdeps/pthread/aio_fsync.c (aio_fsync): Don't check open modes,
	just that it's a file descriptor.
	* manual/llio.texi (Synchronizing AIO Operations): Update description
	for EBADF error from aio_fsync.

2013-04-12  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Rules (bench): Move target definition...
	* benchtests/Makefile: ... here.

2013-04-11  Carlos O'Donell  <carlos@redhat.com>

	* math/libm-test.inc (cos_test): Fix PI/2 test.
	(sincos_test): Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Regenerate.
	* sysdeps/i386/fpu/libm-test-ulps: Regenerate.

2013-04-11  Andreas Schwab  <schwab@suse.de>

	[BZ #13988]
	* stdio-common/vfscanf.c (_IO_vfwscanf): When parsing a float
	accept exponent character only when digits were seen.
	* stdio-common/Makefile (tests): Add bug26.
	* stdio-common/bug26.c: New file.

	[BZ #14293]
	* elf/dl-load.c (_dl_init_paths): Mark decomposed RUNPATH as
	non-freeable.

2013-04-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Makeconfig (rtld-prefix): Define built linker prefix.
	* Rules (run-bench): Use it.
	* math/Makefile (run-regen-ulps): Likewise.

	* Rules (bench): Remove eval.

2013-04-10  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Roland McGrath  <roland@hack.frob.com>
	    Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #15346]
	* time/getdate.c: Include ctype.h and alloca.h.
	(__getdate_r): Trim leading and trailing spaces of input.
	* time/tst-getdate.c (tests): Add tests with leading and
	trailing spaces.

2013-04-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #14280]
	* sysdeps/mach/hurd/bits/ioctls.h (_IOTS): Cast to enum __ioctl_datum
	when computing value.

2013-04-06  Carlos O'Donell  <carlos@redhat.com>

	* math/README.libm-test (How can I generate "libm-test-ulps"?):
	Use testrun.sh to run libm tests.

	[BZ #15309]
	* elf/dl-open.c (dl_open_worker): memset all of seen array.

2013-04-06  Marko Myllynen  <myllynen@redhat.com>

	[BZ #15264]
	* locales/fi_FI (LC_MESSAGES): Define yesstr and nostr.

2013-04-06  Carlos O'Donell  <carlos@redhat.com>

	* Makefile.in (regen-ulps): New target.
	* math/Makefile [ifneq (no,$(PERL)]: Declare regen-ulps with .PHONY.
	[ifneq (no,$(PERL)] (run-regen-ulps): New variable.
	[ifneq (no,$(PERL)] (regen-ulps): New target.
	[ifeq (no,$(PERL)] (regen-ulps): New target.
	* math/libm-test.inc (ulps_file_name): Define.
	(output_dir): New variable.
	(options): Add "output-dir" option.
	(parse_opt): Handle 'o' case.
	(main): If output_dir is non-NULL use it as a prefix
	otherwise use "".
	* math/README.libm-test: Update `How can I generate "libm-test-ulps"?'

2013-04-06  Carlos O'Donell  <carlos@redhat.com>

	[BZ #10060, #10062]
	* aclocal.m4 (LIBC_COMPILER_BUILTIN_INLINED): New macro.
	* sysdeps/i386/configure.in: Use LIBC_COMPILER_BUILTIN_INLINED and
	fail configure if __sync_val_compare_and_swap is not inlined.
	* sysdeps/i386/configure: Regenerate.
	* configure.in: Build for i686 when configured for i386.
	* configure: Regenerate.
	* README: Remove i386 reference.

2013-04-06  Carlos O'Donell  <carlos@redhat.com>

	* sysdeps/s390/s390-32/sysdep.h: Undefine PSEUDO before redefinition.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.

2013-04-05  Thomas Schwinge  <thomas@codesourcery.com>

	* stdio-common/tstdiomisc.c (snanval, msnanval, lsnanval)
	(lmsnanval): New variables.
	(F): Add conversion tests.
	* stdlib/tst-strtod6.c (do_test): Add issignaling tests.
	* stdlib/Makefile ($(objpfx)tst-strtod6): Depend on $(link-libm).

	* stdio-common/tstdiomisc.c (F): Properly collect individual
	tests' results.

	[BZ #14686, #15336]
	* sysdeps/ieee754/dbl-64/urem.h (nNAN, NAN): Remove definitions.
	* sysdeps/ieee754/dbl-64/e_remainder.c (__ieee754_remainder):
	Instead, use input NaN values or generate a qNaN by arithmetic
	operation.  Also fix bugs to comply with the standard.
	* math/libm-test.inc (remainder_test): Add more tests.

	[BZ #15335, #15342]
	* sysdeps/ieee754/dbl-64/upow.h (NaNQ): Remove definitions.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Instead, use
	input NaN values or generate a qNaN by arithmetic operation.

	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Remove
	unreachable code.

	* sysdeps/ieee754/dbl-64/usncs.h (NAN): Removed unused
	definitions.

2013-04-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14478]
	* math/s_cexp.c (__cexp): Ensure underflow exception occurs for
	underflowed result.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/libm-test.inc (cexp_test): Add more tests.

2013-04-03  Andreas Schwab  <schwab@suse.de>

	[BZ #15330]
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Allocate results and
	order arrays from heap if bigger than alloca cutoff.

2013-04-03  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/i386/fpu/math-tests.h (SNAN_TESTS_float)
	(SNAN_TESTS_double): Refer to GCC PR56831.
	* sysdeps/powerpc/math-tests.h (SNAN_TESTS_TYPE_CAST): Refer to
	GCC PR56828.

2013-04-03  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Rules (bench): Move bench.out after the run is complete.

	* Rules (bench): Echo currently running benchmark.

	* benchtests/Makefile (bench): Add atan and slowatan.
	* benchtests/atan-inputs: New file.
	* benchtests/slowatan-inputs: New file.
	* benchtests/slowatan.c: New file.

	* sysdeps/ieee754/dbl-64/mpa.h (TWO): Remove definition.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Replace TWO with
	its value.

	[BZ #15305]
	* sysdeps/unix/sysv/linux/kernel-features.h
	[__LINUX_KERNEL_VERSION >= 0x02061d]: Define
	__ASSUME_XFS_RESTRICTED_CHOWN.
	* sysdeps/unix/sysv/linux/pathconf.c
	(__statfs_chown_restricted) [!__ASSUME_XFS_RESTRICTED_CHOWN]:
	Save and restore errno.

2013-04-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15327]
	* math/s_cacosh.c (__cacosh): Implement for finite nonzero
	arguments using __kernel_casinh.
	* math/s_cacoshf.c (__cacoshf): Implement for finite nonzero
	arguments using __kernel_casinhf.
	* math/s_cacoshl.c (__cacoshl): Implement for finite nonzero
	arguments using __kernel_casinhl.
	* math/libm-test.inc (cacosh_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-04-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.h (HALFRAD): Define as TWO23.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Use mantissa_t.

	* bench/Makefile (bench): Add sin and slowsin.
	* benchtests/sin-inputs: New file.
	* benchtests/slowsin-inputs: New file.
	* benchtests/slowsin.c: New file.

	* benchtests/Makefile: Add benchmarks for slowpow and slowexp.
	(bench): Add slowexp and slowpow.
	(exp-ITER): Increase iterations.
	(pow-ITER): Likewise.
	* benchtests/exp-inputs: Change input.
	* benchtests/pow-inputs: Likewise.
	* benchtests/slowexp-inputs: New file.
	* benchtests/slowexp.c: New file.
	* benchtests/slowpow-inputs: New file.
	* benchtests/slowpow.c: New file.

2013-04-02  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/fpu/s_rint.S: Remove branch prediction
	instructions.
	* sysdeps/powerpc/powerpc32/fpu/s_rintf.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rint.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_rintf.S: Likewise.
	* benchtests/Makefile: Add rint benchtest.
	* benchtests/rint-inputs: Input for rint benchtest.

2013-04-02  Thomas Schwinge  <thomas@codesourcery.com>

	* Versions.def (libm): Add GLIBC_2.18.
	* include/math.h [!_ISOMAC] (__issignaling, __issignalingf): Add
	hidden libm prototypes.
	[!_ISOMAC && !__NO_LONG_DOUBLE_MATH] (__issignalingl): Likewise.
	* math/Makefile (libm-calls): Add s_issignaling.
	* math/Versions (libm: GLIBC_2.18): Add __issignaling,
	__issignalingf, __issignalingl.  Adjust all libm.abilist files.
	* math/bits/mathcalls.h [__USE_GNU] (__issignaling): New prototype
	declaration.
	* math/math.h [__USE_GNU] (issignaling): New macro.
	* sysdeps/ieee754/flt-32/s_issignalingf.c: New file.
	* sysdeps/ieee754/dbl-64/s_issignaling.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_issignaling.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_issignalingl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_issignalingl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_issignalingl.c: Likewise.
	* manual/arith.texi (issignaling): New section.
	* manual/libm-err-tab.pl (@all_functions): Update comment.
	* math/gen-libm-test.pl (parse_args): Apply special handling for
	issignaling.
	* math/libm-test.inc (print_float, issignaling_test): New
	functions.
	(check_float_internal): Add issignaling checks.
	* sysdeps/generic/math-tests.h (SNAN_TESTS_TYPE_CAST): Provide
	default definition.
	* sysdeps/powerpc/math-tests.h: New file.
	* math/basic-test.c (TEST_FUNC, TEST_TRUNC): Add issignaling
	tests.
	* math/test-snan.c (TEST_FUNC): Likewise.

2013-03-30  David S. Miller  <davem@davemloft.net>

	* po/de.po: Update from translation team.

2013-03-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10357]
	* math/k_casinh.c (__kernel_casinh): Handle arguments with
	imaginary part less than 1.0 and real part less than 0.5
	specially.
	* math/k_casinhf.c (__kernel_casinhf): Likewise.
	* math/k_casinhl.c (__kernel_casinhl): Likewise.
	* math/libm-test.inc (UNDERFLOW_EXCEPTION_OK_DOUBLE): New macro.
	(cacos_test): Add more tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-03-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/power4/fpu/mpa-arch.h (INTEGER_OF): Replace
	ONE with its value.

	* sysdeps/ieee754/dbl-64/mpa.h (ONE, MONE): Remove defines.
	(__pow_mp): Replace ONE and MONE with their values.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Likewise.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Likewise.
	* sysdeps/ieee754/dbl-64/mptan.c (__mptan): Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c (atan): Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Likewise.

	* sysdeps/ieee754/dbl-64/s_tan.c: Fix formatting.

	* sysdeps/ieee754/dbl-64/mpa.h (ZERO, MZERO): Remove defines.
	(__pow_mp): Replace ZERO and MZERO with their values.
	* sysdeps/ieee754/dbl-64/e_atan2.c (__ieee754_atan2): Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Likewise.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c (atan): Likewise.
	* sysdeps/powerpc/power4/fpu/mpa.c (__mul): Likewise.
	(__sqr): Likewise.

	* sysdeps/ieee754/dbl-64/s_atan.c: Fix formatting.

	* sysdeps/ieee754/dbl-64/e_log.c: Fix formatting.

2013-03-28  Roland McGrath  <roland@hack.frob.com>

	* include/stdlib.h [!SHARED] (__call_tls_dtors):
	Declare with __attribute__ ((weak)).
	* stdlib/exit.c (__libc_atexit) [!SHARED]:
	Call __call_tls_dtors only if it's not NULL.

2013-03-28  Roland McGrath  <roland@hack.frob.com>

	* csu/libc-start.c (__libc_start_main) [!SHARED]: If _dl_aux_init
	didn't do it already, then set _dl_phdr and _dl_phnum based on the
	magic __ehdr_start linker symbol if it's defined.
	* sysdeps/mach/hurd/i386/init-first.c (init1) [!SHARED]: Don't set
	them up here if it was already done.

	* elf/dl-support.c (_dl_phdr): Make pointer to const.
	(_dl_aux_init): Use const in cast when setting it.
	* sysdeps/mach/hurd/i386/init-first.c (init1): Remove superfluous cast.
	* sysdeps/generic/ldsodefs.h [!SHARED] (_dl_phdr): Update decl.
	* csu/libc-tls.c (__libc_setup_tls): Make PHDR pointer to const.

	* sysdeps/generic/ldsodefs.h [!SHARED] (_dl_phdr, _dl_phnum):
	Declare them here.
	* elf/dl-iteratephdr.c [!SHARED] (_dl_phdr, _dl_phnum): Not here.
	* csu/libc-tls.c: Nor here.
	* sysdeps/mach/hurd/i386/init-first.c (init1): Nor here.

	* sysdeps/posix/libc_fatal.c: Don't include <sys/syslog.h>.
	(__libc_message): Never call vsyslog.

2013-03-28  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/start.S (cfi_startproc, cfi_endproc):
	Define as empty.
	* sysdeps/powerpc/powerpc64/start.S (cfi_startproc, cfi_endproc):
	Likewise.

2013-03-28  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15214]
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c (__ieee754_logl): Fix spurious
	underflow.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-03-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #15304]
	* hesiod/nss_hesiod/hesiod-grp.c (_nss_hesiod_initgroups_dyn):
	Don't add gid passed as argument.

	* sysdeps/ieee-754/dbl-64/e_atan2.c: Reformat.

2013-03-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15307]
	* math/k_casinh.c (__kernel_casinh): Handle arguments with
	imaginary part between 1.0 and 1.5 and real part less than 0.5
	specially.
	* math/k_casinhf.c (__kernel_casinhf): Likewise.
	* math/k_casinhl.c (__kernel_casinhl): Likewise.
	* math/libm-test.inc (cacos_test): Add more tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-03-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__acr): Use integral
	constants.
	(norm): Likewise.
	(denorm): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__sqr): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.

	* sysdeps/ieee754/dbl-64/branred.c (__branred): Remove
	commented code.
	* sysdeps/ieee754/dbl-64/dosincos.c (__dubsin): Likewise.
	(__dubcos): Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c (__ieee754_asin): Likewise.
	(__ieee754_acos): Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c (__ieee754_atan2): Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c (__ieee754_exp): Likewise.
	(__exp1): Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Likewise.
	(log1): Likewise.
	(my_log2): Likewise.
	(checkint): Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c
	(__ieee754_remainder): Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c (atan): Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Likewise.
	(bsloww): Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Likewise.

	* sysdeps/ieee754/dbl-64/mpa-arch.h: New file.
	* sysdeps/ieee754/dbl-64/mpa.c (norm): Use MANTISSA_T and
	MANTISSA_STORE_T to store computations on mantissa.  Use
	macros for rounding and division.
	(denorm): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__mul): Likewise.
	(__sqr): Likewise.
	* sysdeps/ieee754/dbl-64/mpa.h: Include mpa-arch.h.  Define
	powers of two in terms of TWOPOW macro.
	(mp_no): Make type of mantissa as MANTISSA_T.
	[!RADIXI]: Define RADIXI.
	[!TWO52]: Define TWO52.
	* sysdeps/powerpc/power4/fpu/mpa-arch.h: New file.

2013-03-25  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/s_llround.c: Fix libm ABI issue with missing
	llroundl symbol when building for PPC32.

2013-03-24  Mark H Weaver  <mhw@netris.org>

	* manual/arith.texi (Normalization Functions): Fix prototypes for
	scalbn, scalbnf, scalbnl, scalbln, scalblnf, and scalblnl.

2013-03-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13889]
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c (__ieee754_expl): Increase the
	high value to check if expl overflow.
	* sysdeps/ieee754/ldbl-128ibm/w_expl.c (__expl): Fix threshold constants
	to check for underflow and overflow.
	* math/libm-test.inc: Add exp test.

2013-03-21  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #11120]
	* sysdeps/x86_64/strcmp.S: Replace all occurrences of NOT_IN_lib
	with NOT_IN_libc.

2013-03-21  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/w_sqrt.c (compat_symbol): Add sqrtl compat
	symbol.

2013-03-21  Thomas Schwinge  <thomas@codesourcery.com>

	* math/gen-libm-test.pl (parse_args, special_functions): Properly
	wrap blocks consisting of several statements.

	* sysdeps/generic/math-tests.h: New file.
	* sysdeps/i386/fpu/math-tests.h: Likewise.
	* math/test-snan.c: Include it.
	(TEST_FUNC): Use SNAN_TESTS to short-circuit certain tests.

2013-03-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15285]
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Include <float.h>.
	(__ieee754_j0l): Do not improve calculations using cos of twice
	input for inputs above LDBL_MAX / 2.0L.
	(__ieee754_y0l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Include <float.h>.
	(__ieee754_j1l): Do not improve calculations using cos of twice
	input for inputs above LDBL_MAX / 2.0L.
	(__ieee754_y1l): Likewise.
	* math/libm-test.inc (j0_test): Add another test.
	(j1_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2013-03-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Rules ($(objpfx)bench-%.c): Include code from a C source
	file.

2013-03-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15287]
	* math/k_casinh.c (__kernel_casinh): Handle arguments with
	imaginary part 1.0 and real part less than 0.5 specially.
	* math/k_casinhf.c (__kernel_casinhf): Likewise.
	* math/k_casinhl.c (__kernel_casinhl): Likewise.
	* math/libm-test.inc (cacos_test): Add more tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-03-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpsqrt.c (__mpsqrt): Use HALFRAD.
	* sysdeps/ieee754/dbl-64/sincos32.c (__mpranred): Likewise.

2013-03-20  Joseph Myers  <joseph@codesourcery.com>

	* aclocal.m4 (LIBC_CONFIG_VAR): New autoconf macro.
	* config.make.in (config-cflags-sse4): Remove variable.
	(config-cflags-avx): Likewise.
	(config-cflags-sse2avx): Likewise.
	(config-cflags-novzeroupper): Likewise.
	(config-asflags-i686): Likewise.
	(have-mfma4): Likewise.
	(have-as-vis3): Likewise.
	(MIG): Likewise.
	* configure.in (MIG): Do not AC_SUBST.
	(libc_cv_cc_nofma): Move AC_SUBST next to configure test.
	(libc_cv_cc_sse4): Do not AC_SUBST.
	(libc_cv_cc_avx): Likewise.
	(libc_cv_cc_sse2avx): Likewise.
	(libc_cv_cc_novzeroupper): Likewise.
	(libc_cv_cc_fma4): Likewise.
	(libc_cv_as_i686): Likewise.
	(libc_cv_sparc_as_vis3): Likewise.
	* sysdeps/i386/configure.in (config-cflags-sse4): Set using
	LIBC_CONFIG_VAR.
	(config-asflags-i686): Likewise.
	(config-cflags-avx): Likewise.
	(config-cflags-sse2avx): Likewise.
	(have-mfma4): Likewise.
	(config-cflags-novzeroupper): Likewise.
	* sysdeps/mach/configure.in (MIG): Likewise.
	* sysdeps/sparc/configure.in (have-as-vis3): Likewise.
	* sysdeps/x86_64/configure.in (config-cflags-sse4): Set using
	LIBC_CONFIG_VAR.
	(config-cflags-avx): Likewise.
	(config-cflags-sse2avx): Likewise.
	(have-mfma4): Likewise.
	(config-cflags-novzeroupper): Likewise.
	* configure: Regenerated.
	* sysdeps/i386/configure: Likewise.
	* sysdeps/mach/configure: Likewise.
	* sysdeps/sparc/configure: Likewise.
	* sysdeps/x86_64/configure: Likewise.

2013-03-20  Roland McGrath  <roland@hack.frob.com>

	[BZ #14812]
	* locale/programs/localedef.c (options): Put N_ translation marker
	on argument names, not just descriptions.

2013-03-20  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* Makerules ($(inst_libdir)/libc.so): Use $(rtlddir).

2013-03-20  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	[BZ #14176]
	* stdlib/stdlib.h (mblen, mbtowc, wctomb): Remove __wur.

2013-03-19  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/libc_fatal.c: Include <sys/mman.h>.
	[!WRITEV_FOR_FATAL] (writev_for_fatal): New function.
	[!WRITEV_FOR_FATAL] (WRITEV_FOR_FATAL): New macro; call that.
	[!BEFORE_ABORT] (before_abort): New function.
	[!BEFORE_ABORT] (BEFORE_ABORT): New macro; call that.
	* sysdeps/unix/sysv/linux/libc_fatal.c: Trim includes.
	(writev_for_fatal): New function.
	(WRITEV_FOR_FATAL): New macro; call that.
	(backtrace_and_maps): New function.
	(BEFORE_ABORT): New macro; call that.
	(struct str_list): Type removed.
	(__libc_message, __libc_fatal): Functions removed.
	Include <sysdeps/posix/libc_fatal.c> instead.

2013-03-19  Joseph Myers  <joseph@codesourcery.com>

	* math/k_casinhf.c (__kernel_casinhf): Consistently use float
	constants.
	* math/k_casinhl.c (__kernel_casinhl): Consistently use long
	double constants.

2013-03-19  Andreas Schwab  <schwab@suse.de>

	* sysdeps/gnu/configure.in: Set libc_cv_rtldir for s390x.
	* sysdeps/gnu/configure: Regenerate.

	* configure.in: Substitute libc_cv_rtlddir.
	* configure: Regenerate.
	* config.make.in (rtlddir): Set from libc_cv_rtlddir.
	* Makeconfig (rtlddir, inst_rtlddir): New variables.
	(rtld-LDFLAGS): Use them with $(rtld-installed-name).
	* elf/Makefile (install-others, CFLAGS-interp.c)
	(ldso_install, common-ldd-rewrite): Likewise.
	($(inst_rtlddir)/$(rtld-installed-name)): Renamed from
	$(inst_slibdir)/$(rtld-installed-name).
	* scripts/rellns-sh: Add -p option.
	* Makerules (make-shlib-link): Use rellns-sh to get relative name
	for source.

2013-03-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/nptl.texi: Renamed to ...
	* manual/threads.texi: ... this.
	* manual/Makefile (chapters): Update.

2013-03-18  Roland McGrath  <roland@hack.frob.com>

	[BZ #14812]
	* argp/argp-parse.c (argp_default_options): Put N_ translation marker
	on argument names, not just descriptions.
	* malloc/memusagestat.c (options): Likewise.
	* nss/getent.c (options): Likewise.

2013-03-18  Benno Schulenberg  <bensberg@justemail.net>

	[BZ #14812]
	* iconv/iconv_prog.c (options): Put N_ translation marker
	on argument names, not just descriptions.
	* iconv/iconvconfig.c (options): Likewise.

2013-03-18  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/strlen.S: Replace with new SSE2 based
	implementation which is faster on all x86_64 architectures.
	Tested on AMD, Intel Nehalem, SNB, IVB.
	* sysdeps/x86_64/strnlen.S: Likewise.

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines):
	Remove all multiarch strlen and strnlen versions.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: Update.
	Remove strlen and strnlen related parts.

	* sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S: Update.
	Inline strlen part.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: Likewise.

	* sysdeps/x86_64/multiarch/strlen.S: Remove.
	* sysdeps/x86_64/multiarch/strlen-sse2-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-sse2-pminub.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-sse4.S: Likewise.
	* sysdeps/x86_64/multiarch/strnlen.S: Likewise.
	* sysdeps/x86_64/multiarch/strnlen-sse2-no-bsf.S: Likewise.

2013-03-17  Carlos O'Donell  <carlos@redhat.com>

	* manual/memory.texi (Malloc Tunable Parameters):
	Sort parameters alphabetically. Add comments for missing entries.

2013-03-17  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-03-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15283]
	* sysdeps/ieee754/ldbl-96/e_j1l.c (__ieee754_y1l): Correct test
	for arguments at most half maximum finite value.
	* math/libm-test.inc (j0_test): Add more tests.
	(j1_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #14155]
	* sysdeps/ieee754/ldbl-128/e_j0l.c (__ieee754_j0l): Do not compute
	1 / x and functions P and Q for arguments above 0x1p256L.
	(__ieee754_y0l): Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_j1l): Likewise.
	(__ieee754_y1l): Likewise.
	* math/libm-test.inc (j0_test): Do not allow spurious underflows.
	(j1_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.

2013-03-16  Thomas Schwinge  <thomas@codesourcery.com>

	* math/test-snan.c (TEST_FUNC): Add and use minus_sNaN_var
	variable.

2013-03-15  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-support.c (_dl_aux_init): Ignore zero value for AT_PAGESZ.
	(_dl_non_dynamic_init): Don't set _dl_pagesize; it will never be
	zero since it's initialized to EXEC_PAGESIZE.

	* sysdeps/unix/sysv/linux/ldsodefs.h
	(_dl_non_dynamic_init, _dl_aux_init): Move declarations to ...
	* sysdeps/generic/ldsodefs.h: ... here.

2013-03-15  Thomas Schwinge  <thomas@codesourcery.com>

	* math/libm-test.inc (ldexp_test): Add missing START/END markers.

	* sysdeps/powerpc/fpu/test-powerpc-snan.c: Rename to
	math/test-snan.c.
	* math/test-snan.c: Renamed from
	sysdeps/powerpc/fpu/test-powerpc-snan.c.
	* math/Makefile (tests): Add test-snan.
	* sysdeps/powerpc/fpu/Makefile (libm-tests): Don't add
	test-powerpc-snan.

	* math/basic-test.c (TEST_FUNC): Replace NANFUNC argument with
	SUFFIX.  Initialize qNaN_var with __builtin_nan family of
	functions.
	(TEST_TRUNC): Add SUFFIX argument.  Initialize qNaN_var with
	__builtin_nan family of functions.
	* math/libm-test.inc (initialize): Initialize qnan_value with
	__builtin_nan family of functions.
	* sysdeps/powerpc/fpu/test-powerpc-snan.c (SNANf, SNAN, SNANl):
	Remove variables.
	(init_signaling_nan, snan_float, snan_double, snan_ldouble):
	Remove functions.
	(TEST_FUNC): Add SUFFIX argument.  Move sNaN_var into static
	storage class.  Initialize qNaN_var and sNaN_var with
	__builtin_nan and __builtin_nans families of functions,
	respectively.

	* math/libm-test.inc (acosh_test): Also test with qNaN input.
	(sqrt_test): Remove duplicate test with qNaN input.
	(lrint_test, llrint_test, lround_test, llround_test, rint_test)
	(round_test, signbit_test, significand_test): Note missing +/-Inf
	as well as qNaN tests.

	* math/basic-test.c (TEST_FUNC, TEST_TRUNC): Rename NaN_var to
	qNaN_var.  Fix a few strings, too.
	* math/libm-test.inc (nan_value): Rename to qnan_value.
	* math/gen-libm-test.pl (%beautify): Adjust to that.
	* math/bits/mathcalls.h (nan): Refer to qNaN instead of NaN.
	* math/test-misc.c (main): Likewise.
	* sysdeps/ieee754/bits/nan.h (__nan_bytes, __nan_union): Rename
	to __qnan_bytes, and __qnan_union, respectively.
	* ports/sysdeps/mips/bits/nan.h (__nan_bytes, __nan_union):
	Likewise.
	* stdio-common/tstdiomisc.c (nanval, lnanval): Rename to qnanval,
	and lqnanval, respectively.
	* sysdeps/powerpc/bits/fenv.h: Fix usage of NaN/qNaN/sNaN.
	* sysdeps/powerpc/fpu/fenv_libc.h: Likewise.
	* sysdeps/powerpc/fpu/test-powerpc-snan.c (TEST_FUNC): Likewise,
	and rename NaN_var to qNaN_var, and SNaN_var to sNaN_var.

	* math/libm-test.inc (fpstack_test) [__x86_64__]: Enable test.
	* math/test-misc.c (main) [__x86_64__]: Enable test for long
	doubles.

	* math/test-misc.c (main): Fix copy'n'pastos.
	* misc/tst-efgcvt.c (special): Likewise.

	* stdio-common/printf_fp.c (__isinfl_internal, __isnanl_internal):
	Remove declarations.

2013-03-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa-arch.h: Remove.
	* sysdeps/ieee754/dbl-64/mpa.c: Revert last change.
	* sysdeps/ieee754/dbl-64/mpa.h: Revert last change.
	* sysdeps/powerpc/power4/fpu/mpa-arch.h: Remove.

2013-03-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h (VDSO_IFUNC_RET): Add
	macro to return vdso values correctly in IFUNC implementations.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c (__gettimeofday):
	Optimization by using IFUNC.

2013-03-15  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Richard Henderson  <rth@redhat.com>
	    Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* Makefile.in (bench): New target.
	* NEWS: Mention the benchmark framework.
	* Rules (bench): Likewise.
	(binaries-bench): Generate binaries for functions to
	benchmark.
	* benchtests/Makefile: New makefile for benchmark tests.
	* benchtests/bench-skeleton.c: New skeleton file for benchmark
	programs.
	* benchtests/exp-inputs: New input file for EXP function.
	* benchtests/pow-inputs: New input file for POW function.
	* scripts/bench.pl: New script to generate source files for
	benchmark programs.

2013-03-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa-arch.h: New file.
	* sysdeps/ieee754/dbl-64/mpa.c (norm): Use MANTISSA_T to store
	computations on mantissa.  Use macros for rounding and
	division.
	(denorm): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__mul): Likewise.
	(__sqr): Likewise.
	* sysdeps/ieee754/dbl-64/mpa.h: Include mpa-arch.h.  Define
	powers of two in terms of TWOPOW macro.
	(mp_no): Make type of mantissa as MANTISSA_T.
	[!RADIXI]: Define RADIXI.
	[!TWO52]: Define TWO52.
	* sysdeps/powerpc/power4/fpu/mpa-arch.h: New file.

	* manual/nptl.texi (cindex): Modify threads to pthreads.

2013-03-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86_64/preconfigure: Regenerated.

2013-03-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14155]
	* sysdeps/ieee754/dbl-64/e_j0.c (pzero): Return 1.0 for arguments
	0x1p28 and above.
	(qzero): Return -0.125 / x for arguments 0x1p28 and above.
	* sysdeps/ieee754/dbl-64/e_j1.c (pzero): Return 1.0 for arguments
	0x1p28 and above.
	(qzero): Return 0.375 / x for arguments 0x1p28 and above.
	* math/libm-test.inc (j0_test): Do not allow one spurious
	underflow exception.
	(y1_test): Likewise.

2013-03-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* manual/Makefile (chapters): Add nptl.
	* manual/debug.texi (Debugging Support): Add link to Threads
	chapter.
	* manual/nptl.texi: New file.

	* sysdeps/unix/sysv/linux/times.c (__times): Fix formatting.

2013-03-14  Petr Baudi≈°  <pasky@ucw.cz>

	* sysdeps/unix/sysv/linux/times.c (__times): On EFAULT, test
	for non-NULL pointer before the memory validity test. Pointed
	out by Holger Brunck <holger.brunck@keymile.com>.

2013-03-13  Andreas Schwab  <schwab@suse.de>

	* extra-lib.mk (extra-objs): Add static-only-routines as .oS
	instead of .os.

2013-03-13  Joseph Myers  <joseph@codesourcery.com>

	* timezone/zic.c: Update from tzcode 2013b.

2013-03-12  Carlos O'Donell  <carlos@redhat.com>

	* manual/install.texi (Configuring and compiling):
	Mention i686 and i586.
	* INSTALL: Regenerate.

2013-03-12  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/init_array/elf-init.c: New file.
	* csu/elf-init.c
	(__libc_csu_init) [!NO_INITFINI]: Conditionalize _init call on this.
	(__libc_csu_fini) [!NO_INITFINI]: Conditionalize _fini call on this.

	* csu/gmon-start.c [GMON_START_ARRAY_SECTION]: Don't define
	__gmon_start__ as global, but as static with a .preinit_array pointer.
	* sysdeps/init_array/gmon-start.c: New file.  Use that.
	* sysdeps/init_array/crti.S: New file, empty except for comments.
	* sysdeps/init_array/crtn.S: Likewise.

2013-03-11  Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* sysdeps/x86_64/memset.S: Remove USE_MULTIARCH conditional for
	definining bcopy.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Remove Prefer_SSE_for_memop.
	* sysdeps/x86_64/multiarch/init-arch.h: Remove
	bit_Prefer_SSE_for_memop, index_Prefer_SSE_for_memop,
	HAS_PREFER_SSE_FOR_MEMOP.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Remove
	memset-x86-64.
	* sysdeps/x86_64/multiarch/ifunc-impl-list.c (__libc_ifunc_impl_list):
	Remove bzero, memset ifunc support.
	* sysdeps/x86_64/multiarch/bzero.S: Remove file.
	* sysdeps/x86_64/multiarch/memset-x86-64.S: Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.

2013-03-11  Andreas Schwab  <schwab@suse.de>

	[BZ #15234]
	* Versions.def (libpthread): Add GLIBC_2.3, so that it can be used
	by SHLIB_COMPAT.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libpthread.abilist
	(GLIBC_2.16): Remove pthread_atfork.

2013-03-08  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* posix/Makefile (testcases.h): Set LC_ALL=C before sed.
	(ptestcases.h): Likewise.

2013-03-08  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig ($(common-objpfx)config.status): Depend on
	sysdeps/*/preconfigure{,.in} too.

2013-03-08  Joseph Myers  <joseph@codesourcery.com>

	* malloc/malloc.h (__malloc_ptr_t): Remove macro.
	(__free_hook): Use void * instead of __malloc_ptr_t.
	(__malloc_hook): Likewise.
	(__realloc_hook): Likewise.
	(__memalign_hook): Likewise.
	(__after_morecore_hook): Likewise.
	* malloc/arena.c (save_malloc_hook): Likewise.
	(save_free_hook): Likewise.
	* malloc/hooks.c (malloc_hook_ini): Likewise.
	(realloc_hook_ini): Likewise.
	(memalign_hook_ini): Likewise.
	* malloc/malloc.c (malloc_hook_ini): Likewise.
	(realloc_hook_ini): Likewise.
	(memalign_hook_ini): Likewise.
	(__free_hook): Likewise.
	(__malloc_hook): Likewise.
	(__realloc_hook): Likewise.
	(__memalign_hook): Likewise.
	(__libc_malloc): Likewise.
	(__libc_free): Likewise.
	(__libc_realloc): Likewise.
	(__libc_memalign): Likewise.
	(__libc_valloc): Likewise.
	(__libc_pvalloc): Likewise.
	(__libc_calloc): Likewise.
	(__posix_memalign): Likewise.
	* malloc/morecore.c (__sbrk): Likewise.
	(__default_morecore): Likewise.

	* malloc/morecore.c (__default_morecore): Use ISO C prototype.

	* malloc/malloc.h (__malloc_ptrdiff_t): Remove macro.
	* malloc/morecore.c (__default_morecore): Use ptrdiff_t instead of
	__malloc_ptrdiff_t.

	* malloc/malloc.h (__malloc_size_t): Remove macro.
	* malloc/mcheck.c (old_malloc_hook): Use size_t instead of
	__malloc_size_t.
	(old_memalign_hook): Likewise.
	(old_realloc_hook): Likewise.
	(struct hdr): Likewise.
	(flood): Likewise.
	(mallochook): Likewise.
	(memalignhook): Likewise.
	(reallochook): Likewise.
	* malloc/mtrace.c (tr_old_malloc_hook): Likewise.
	(tr_old_realloc_hook): Likewise.
	(tr_old_memalign_hook): Likewise.
	(tr_mallochook): Likewise.
	(tr_reallochook): Likewise.
	(tr_memalignhook): Likewise.

2013-03-08  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_pack): Rename to
	default_ldbl_pack and using as default implementation.
	(ldbl_unpack): Rename to default_ldbl_unpack and using as default
	implementation.
	* sysdeps/powerpc/fpu/math_ldbl.h (ldbl_extract_mantissa): Remove
	redundant definition.
	(ldbl_insert_mantissa): Likewise.
	(ldbl_canonicalize): Likewise.
	(ldbl_nearbyint): Likewise.
	(ldbl_pack): Rename to ldbl_pack_ppc.
	(ldbl_unpack): Rename to ldbl_unpack_ppc.
	* sysdeps/unix/sysv/linux/powerpc/Implies: Remove file.
	* sysdeps/powerpc/Implies: Add ieee754/ldbl-opt after ieee754/ldbl-128ibm.

2013-03-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Move file...
	* sysdeps/powerpc/power4/fpu/mpa.c: ... here.
	* sysdeps/powerpc/powerpc32/power4/fpu/Makefile: Move file...
	* sysdeps/powerpc/power4/fpu/Makefile: ... here.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Remove file.
	* sysdeps/powerpc/powerpc64/power4/fpu/Makefile: Remove file.
	* sysdeps/powerpc/powerpc32/power4/Implies: New file.
	* sysdeps/powerpc/powerpc64/power4/Implies: New file.

2013-03-07  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/mman-linux.h.

2013-03-07  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/slowexp.c [!USE_LONG_DOUBLE_FOR_MP]:
	Include mpa.h and declare __MPEXP.
	[USE_LONG_DOUBLE_FOR_MP] (__slowexp): Call __IEEE754_EXPL.
	* sysdeps/powerpc/powerpc32/power4/fpu/Makefile
	(CPPFLAGS-slowexp.c): Define USE_LONG_DOUBLE_FOR_MP.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowexp.c: Remove.
	* sysdeps/powerpc/powerpc64/power4/fpu/Makefile
	(CPPFLAGS-slowexp.c): Define USE_LONG_DOUBLE_FOR_MP.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowexp.c: Remove.

	* sysdeps/ieee754/dbl-64/slowpow.c [USE_LONG_DOUBLE_FOR_MP]
	(__slowpow): Use long double EXPL and LOGL functions to
	compute POW.
	* sysdeps/powerpc/powerpc32/power4/fpu/Makefile
	(CPPFLAGS-slowpow.c): Define USE_LONG_DOUBLE_FOR_MP.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowpow.c: Remove.
	* sysdeps/powerpc/powerpc64/power4/fpu/Makefile
	(CPPFLAGS-slowpow.c): Define USE_LONG_DOUBLE_FOR_MP.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowpow.c: Remove.

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__mul): Use
	intermediate variable to calculate exponent.
	(__sqr): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__mul):
	Likewise.
	(__sqr): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c [!NO__MUL]: Define __mul.
	[!NO__SQR]: Define __sqr.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: define NO__MUL
	and NO__SQR.  Remove all code except __mul and __sqr.  Include
	sysdeps/ieee754/dbl-64/mpa.c.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.

	[BZ #12723]
	* posix/Makefile (tests): Add tst-pathconf.
	* posix/tst-pathconf.c: New test case.
	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Remove
	_PC_PIPE_BUF.
	* sysdeps/unix/sysv/linux/pathconf.c (__pathconf): Likewise.

2013-03-06  Patsy Franklin  <pfrankli@redhat.com>

	* io/fcntl.h: Added a comment about AT_EACCESS and AT_REMOVEDIR.

2013-03-06  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/mman-linux.h (MAP_ANONYMOUS): Allow
	definition via __MAP_ANONYMOUS.

	* sysdeps/unix/sysv/linux/s390/bits/mman.h (MAP_GROWSUP): Remove,
	it's not part of Linux headers.

	* sysdeps/unix/sysv/linux/bits/mman-linux.h (MAP_HUGE_SHIFT): Define.
	(MAP_HUGE_MASK): Define.

	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h (PTRACE_O_EXIT_KILL):
	Define.
	(PTRACE_O_MASK): Adjust for PTRACE_O_EXITKILL.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h (PTRACE_O_EXIT_KILL):
	Define.
	(PTRACE_O_MASK): Adjust for PTRACE_O_EXITKILL.
	* sysdeps/unix/sysv/linux/sys/ptrace.h (PTRACE_O_EXIT_KILL):
	Define.
	(PTRACE_O_MASK): Adjust for PTRACE_O_EXITKILL.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h (PTRACE_O_EXITKILL):
	Define.
	(PTRACE_O_MASK): Adjust for PTRACE_O_EXITKILL.

	* sysdeps/unix/sysv/linux/x86/bits/msq.h (MSG_COPY): Likewise.
	* sysdeps/unix/sysv/linux/generic/bits/msq.h (MSG_COPY): Define.
	* sysdeps/unix/sysv/linux/powerpc/bits/msq.h (MSG_COPY): Likewise.
	* sysdeps/unix/sysv/linux/bits/msq.h (MSG_COPY): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/msq.h (MSG_COPY): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/msq.h (MSG_COPY): Define.

	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_filesize_max):
	Handle f2fs.

	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Handle f2fs and efivarfs.

	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_link_max): Handle
	f2fs.

	* sysdeps/unix/sysv/linux/linux_fsinfo.h (F2FS_SUPER_MAGIC): Add.
	(EFIVARFS_MAGIC): Add.
	(F2FS_LINK_MAX): Add.

2013-03-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* stdio-common/vfprintf.c: Replace __builtin_expect with
	__glibc_unlikely.

2013-03-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-sym.h: Remove file.
	* sysdeps/powerpc/powerpc64/bp-asm.h: Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__longjmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/cell/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/memcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/memset.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(memset): Don't use BP_SYM.
	(memset) [__BOUNDED_POINTERS__]: Remove conditional code.
	(memset) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(__bzero): Don't use BP_SYM.
	(__bzero) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__bzero) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power4/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	(memset) [__BOUNDED_POINTERS__]: Remove conditional code.
	(memset) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(__bzero): Don't use BP_SYM.
	(__bzero) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__bzero) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power6/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	(memset) [__BOUNDED_POINTERS__]: Remove conditional code.
	(memset) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(__bzero): Don't use BP_SYM.
	(__bzero) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__bzero) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__memchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/memcmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/mempcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__mempcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__memrchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	(__bzero): Likewise.
	* sysdeps/powerpc/powerpc64/power7/rawmemchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__rawmemchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__STRCMP): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strchrnul.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__strchrnul): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strlen.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strlen): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/powerpc/powerpc64/power7/strnlen.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__strnlen): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc64/setjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__GI__setjmp): Don't use BP_SYM.
	(_setjmp): Likewise.
	(__sigsetjmp): Likewise.
	* sysdeps/powerpc/powerpc64/start.S: Don't include "bp-sym.h".
	(L(start_addresses)): Don't use BP_SYM.
	(_start): Likewise.
	* sysdeps/powerpc/powerpc64/stpcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__stpcpy): Don't use BP_SYM, CHECK_BOUNDS_LOW,
	STORE_RETURN_BOUNDS, CHECK_BOUNDS_HIGH and STORE_RETURN_VALUE.
	(__stpcpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__stpcpy) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/strchr.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strchr): Don't use BP_SYM, CHECK_BOUNDS_LOW, STORE_RETURN_BOUNDS,
	CHECK_BOUNDS_HIGH_RTN and STORE_RETURN_VALUE.  Remove comment
	about bounded pointers.
	(strchr) [__BOUNDED_POINTERS__]: Remove conditional code.
	(strchr) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/strcmp.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strcmp): Don't use BP_SYM and CHECK_BOUNDS_LOW.  Remove comment
	about bounded pointers.  Remove GKM FIXME comments.
	(strcmp) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc64/strcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strcpy): Don't use BP_SYM, CHECK_BOUNDS_LOW and
	STORE_RETURN_BOUNDS.  Remove comment about bounded pointers.
	Remove GKM FIXME comments.
	(strcpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	(strcpy) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc64/strlen.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strlen): Don't use BP_SYM and CHECK_BOUNDS_LOW.  Remove comment
	about bounded pointers.  Remove GKM FIXME comment.
	* sysdeps/powerpc/powerpc64/strncmp.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.  Remove comment about bounded
	pointers.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/brk.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__brk): Don't use BP_SYM and DISCARD_BOUNDS.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__clone): Don't use BP_SYM and DISCARD_BOUNDS.  Remove GKM FIXME
	comment.

2013-03-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* stdio-common/vfprintf.c (vfprintf): Check malloc return; don't
	call free(NULL).

2013-03-05  David S. Miller  <davem@davemloft.net>

	* po/es.po: Update from translation team.

2013-03-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Include
	<bits/mman-linux.h>.
	(MCL_CURRENT, MCL_FUTURE): Do not define here, the generic value
	is fine.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Move include of
	<bits/mman-linux.h> to end of file.
	(MCL_CURRENT, MCL_FUTURE): Do not define here, the generic value
	is fine.
	* sysdeps/unix/sysv/linux/x86/bits/mman.h: Move include of
	<bits/mman-linux.h> to end of file.
	(MCL_CURRENT, MCL_FUTURE): Do not define here, the generic value
	is fine.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Move include of
	<bits/mman-linux.h> to end of file.

	* sysdeps/unix/sysv/linux/bits/mman-linux.h [!MCL_CURRENT]
	(MCL_CURRENT, MCL_FUTURE): Define here.

2013-03-05  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	[BZ #15232]
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: Use
	attribute_hidden.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: Likewise.

2013-03-05  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/getcontext.S: Set the
	fourth parameter needed for rt_sigprocmask syscall.
	* sysdeps/unix/sysv/linux/s390/s390-32/setcontext.S:
	* sysdeps/unix/sysv/linux/s390/s390-32/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/ucontext_i.sym: Define _NSIG8.

2013-03-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/powerpc/powerpc32/power4/strncmp.S (strncmp): Remove
	comment about bounded pointers.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S (strncmp): Likewise.
	* sysdeps/powerpc/powerpc32/strncmp.S (strncmp): Likewise.

2013-03-04  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/mman-linux.h: New file, with Linux
	common definitions.

	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Remove all defines
	provided by bits/mman-linux.h and include <bits/mman-linux.h>.
	* sysdeps/unix/sysv/linux/x86/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Likewise.

2013-03-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #15055]
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c (__ieee754_acoshl): Use
	__ieee754_sqrl instead of __sqrl.

2013-03-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/fpu/fpu_control.h: Move to ...
	* sysdeps/powerpc/fpu_control.h: ... here.
	* sysdeps/powerpc/fpu/bits/fenvinline.h: Move to ...
	* sysdeps/powerpc/bits/fenvinline.h: ... here.
	* sysdeps/powerpc/fpu/bits/mathinline.h: Move to ...
	* sysdeps/powerpc/bits/mathinline.h: ... here.

2013-03-01  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-hwcaps.c (_dl_important_hwcaps):
	Change [NEED_DL_SYSINFO || NEED_DL_SYSINFO_DSO] conditionals
	to just [NEED_DL_SYSINFO_DSO].
	* elf/dl-support.c: Likewise.
	* elf/dl-sysdep.c (_dl_sysdep_start): Likewise.
	* elf/rtld.c (dl_main): Likewise.
	* elf/setup-vdso.h (setup_vdso): Likewise.
	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro): Likewise.
	* sysdeps/unix/sysv/linux/dl-sysdep.c
	(_dl_discover_osversion): Likewise.

2013-03-01  Carlos O'Donell  <carlos@redhat.com>

	* csu/libc-start.c (__pthread_initialize_minimal): Revert last change.
	* csu/libc-tls.c (__pthread_initialize_minimal): Likewise.

2013-03-01  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* NEWS: Mention libm performance improvements and non-x86 PI
	futex support.

	* csu/libc-start.c (__pthread_initialize_minimal): Change
	function arguments.
	* csu/libc-tls.c (__pthread_initialize_minimal): Likewise.

2013-02-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/powerpc/powerpc32/bp-asm.h: Remove file.
	* sysdeps/powerpc/powerpc32/__longjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__longjmp): Don't use BP_SYM and CHECK_BOUNDS_BOTH_WIDE_LIT.
	* sysdeps/powerpc/powerpc32/a2/memcpy.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/add_n.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_add_n): Don't use BP_SYM.
	(__mpn_add_n) [__BOUNDED_POINTERS_]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/addmul_1.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(__mpn_addmul_1): Don't use BP_SYM.
	(__mpn_addmul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/bsd-_setjmp.S: Don't include
	<bp-sym.h>.
	(_setjmp): Don't use BP_SYM.
	(__novmx_setjmp): Likewise.
	(__GI__setjmp): Likewise.
	(__vmx_setjmp): Likewise.
	* sysdeps/powerpc/powerpc32/bsd-setjmp.S: Don't include
	<bp-sym.h>.
	* sysdeps/powerpc/powerpc32/bzero.S: Don't include <bp-sym.h>.
	(__bzero): Don't use BP_SYM.
	(__bzero) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__bzero) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/cell/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__longjmp): Don't use BP_SYM and CHECK_BOUNDS_BOTH_WIDE_LIT.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__sigsetjmp): Don't use BP_SYM and CHECK_BOUNDS_BOTH_WIDE_LIT.
	* sysdeps/powerpc/powerpc32/lshift.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_lshift): Don't use BP_SYM.
	(__mpn_lshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/memset.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(memset): Don't use BP_SYM.
	(memset) [__BOUNDED_POINTERS__]: Remove conditional code.
	(memset) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/mul_1.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_mul_1): Don't use BP_SYM.
	(__mpn_mul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power4/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power4/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power4/strncmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power6/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__memchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memcmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/mempcpy.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__mempcpy): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__memrchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/memset.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(memset): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/rawmemchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__rawmemchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__STRCMP): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strchr.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strchr): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strchrnul.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__strchrnul): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strlen.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strlen): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(strncmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/power7/strnlen.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__strnlen): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/rshift.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_rshift): Don't use BP_SYM.
	(__mpn_rshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/setjmp-common.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__sigsetjmp): Don't use BP_SYM.
	* sysdeps/powerpc/powerpc32/start.S: Don't include "bp-sym.h".
	(L(start_addresses)): Don't use BP_SYM.
	(_start): Likewise.
	* sysdeps/powerpc/powerpc32/stpcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__stpcpy): Don't use BP_SYM and macros from bp-asm.h.
	(__stpcpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__stpcpy) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/strchr.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strchr): Don't use BP_SYM.h and macros from bp-asm.h.
	(strchr) [__BOUNDED_POINTERS__]: Remove conditional code.
	(strchr) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/strcmp.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strcmp): Don't use BP_SYM and CHECK_BOUNDS_LOW.  Remove GKM FIXME
	comments.
	(strcmp) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/strcpy.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strcpy): Don't use BP_SYM and macros from bp-asm.h.  Remove GKM
	FIXME comments.
	(strcpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	(strcpy) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/powerpc/powerpc32/strlen.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(strlen): Don't use BP_SYM and CHECK_BOUNDS_LOW.  Remove GKM FIXME
	comment.
	* sysdeps/powerpc/powerpc32/strncmp.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(strncmp): Don't use BP_SYM,
	* sysdeps/powerpc/powerpc32/sub_n.S: Don't include <bp-sym.h> and
	<bp-asm.h>.
	(__mpn_sub_n): Don't use BP_SYM.
	(__mpn_sub_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/powerpc/powerpc32/submul_1.S: Don't include <bp-sym.h>
	and <bp-asm.h>.
	(__mpn_submul_1): Don't use BP_SYM.
	(__mpn_submul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/brk.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__brk): Don't use BP_SYM and DISCARD_BOUNDS.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S: Don't include
	<bp-sym.h> and <bp-asm.h>.
	(__clone): Don't use BP_SYM and DISCARD_BOUNDS.  Remove GKM FIXME
	comment.

2013-02-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (add_magnitudes):
	Use ZK to minimize writes to Z.
	(sub_magnitudes): Simplify code a bit.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (add_magnitudes):
	Use ZK to minimize writes to Z.
	(sub_magnitudes): Simplify code a bit.

2013-02-27  Roland McGrath  <roland@hack.frob.com>

	* csu/gmon-start.c: Add special exception to license text.

2013-02-27  Richard Henderson  <rth@redhat.com>

	* scripts/config.guess: Update from config.git.
	* scripts/config.sub: Likewise.

2013-02-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpsqrt.c: Reformat.

	* sysdeps/ieee754/dbl-64/mpatan2.c: Reformat.

	* sysdeps/ieee754/dbl-64/mpatan.c: Reformat.

	* sysdeps/ieee754/dbl-64/mptan.c: Reformat.

	* sysdeps/ieee754/dbl-64/mplog.c: Reformat.

2013-02-26  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig (%.v.i, %.v): Move these pattern rules outside of
	[$(build-shared = yes].

2013-02-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c: Include alloca.h.
	(__mul): Reduce iterations for calculating mantissa.

	* sysdeps/ieee754/dbl-64/sincos32.c (__c32): Use MPONE and
	MPTWO.
	(__mpranred): Likewise.

	[BZ #15160]
	* malloc/memusagestat.c (main): Draw graphs for heap and stack
	only if MAXSIZE_HEAP and MAXSIZE_STACK are non-zero.

2013-02-26  Paul Eggert  <eggert@cs.ucla.edu>

	* posix/regex_internal.h [__GNUC__ < 3 + (__GNUC_MINOR__ < 1]:
	Define __attribute__.

2013-02-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* locale/elem-hash.h (elem_hash): Mark as pure and possibly
	unused.
	* posix/regex_internal.h (__attribute): Remove.
	[!_LIBC && __i386__]: Use __attribute__ instead of __attribute.
	(re_string_context_at): Likewise.
	(bitset_not): Use __attribute__ and mark function as possibly
	unused.
	(bitset_merge): Likewise.
	(bitset_mask): Likewise.
	(re_string_char_size_at): Likewise.
	(re_string_wchar_at): Likewise.
	(re_string_elem_size_at): Likewise.

2013-02-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/sincos32.c (ss32): Remove commented
	code.
	(cc32): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c (mcr): Use long instead of int.
	(__acr): Likewise.
	(__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.

	* sysdeps/ieee754/dbl-64/slowexp.c: Reformat in GNU coding
	style.

	* sysdeps/ieee754/dbl-64/slowpow.c: Reformat in GNU coding
	style.

	* sysdeps/ieee754/dbl-64/slowexp.c (__slowexp): Remove commented
	code.

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__mp_dbl): Sync
	up changes with default code.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__mp_dbl):
	Likewise.

2013-02-24  Allan McRae  <allan@archlinux.org>

	* manual/socket.texi (The Internet Namespace): Order menu items
	to match that in the file.

	* manual/libc-texinfo.sh: Use @detailmenu around the detailed
	node listing of the info page menu.

2013-02-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/i386/bp-asm.h: Remove file.
	* sysdeps/i386/add_n.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_add_n): Do not use BP_SYM
	* sysdeps/i386/addmul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_addmul_1): Do not use BP_SYM
	* sysdeps/i386/bsd-_setjmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(SIGMSK): Likewise.
	(_setjmp): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/bsd-setjmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(SIGMSK): Likewise.
	(setjmp): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/fpu/s_frexp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__frexp): Do not use BP_SYM.
	(frexp): Likewise.
	* sysdeps/i386/fpu/s_frexpf.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__frexpf): Do not use BP_SYM.
	(frexpf): Likewise.
	* sysdeps/i386/fpu/s_frexpl.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__frexpl): Do not use BP_SYM.
	(frexpl): Likewise.
	* sysdeps/i386/fpu/s_remquo.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__remquo): Do not use BP_SYM.
	(remquo): Likewise.
	* sysdeps/i386/fpu/s_remquof.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__remquof): Do not use BP_SYM.
	(remquof): Likewise.
	* sysdeps/i386/fpu/s_remquol.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(__remquol): Do not use BP_SYM.
	(remquol): Likewise.
	* sysdeps/i386/i486/strcat.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(strcat): Remove GKM FIXME comment.  Do not use BP_SYM.
	* sysdeps/i386/i486/strlen.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(strlen): Do not use BP_SYM.
	* sysdeps/i386/i586/add_n.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_add_n): Do not use BP_SYM.
	* sysdeps/i386/i586/addmul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_addmul_1): Do not use BP_SYM.
	* sysdeps/i386/i586/bzero.S (__bzero): Do not use BP_SYM in
	weak_alias.
	(bzero): Likewise.
	* sysdeps/i386/i586/lshift.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S): Likewise.
	(SIZE): Likewise.
	(__mpn_lshift): Do not use BP_SYM.
	* sysdeps/i386/i586/memcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(memcpy): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i586/mempcpy.S (__mempcpy): Do not use BP_SYM in
	libc_hidden_def and weak_alias.
	(mempcpy): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/i586/memset.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(LEN): Likewise.
	[!BZERO_P] (CHR): Likewise.
	(memset): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i586/mul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_mul_1): Do not use BP_SYM.
	* sysdeps/i386/i586/rshift.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S): Likewise.
	(SIZE): Likewise.
	(__mpn_rshift): Do not use BP_SYM.
	* sysdeps/i386/i586/strchr.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(strchr): Likewise.  Do not use BP_SYM.
	(index): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/i586/strcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(STRCPY): Likewise.  Remove GKM FIXME comment.  Do not use BP_SYM.
	* sysdeps/i386/i586/strlen.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(strlen): Do not use BP_SYM.
	* sysdeps/i386/i586/sub_n.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_sub_n): Do not use BP_SYM.
	* sysdeps/i386/i586/submul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_submul_1): Do not use BP_SYM.
	* sysdeps/i386/i686/add_n.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_add_n): Do not use BP_SYM.
	* sysdeps/i386/i686/bzero.S (__bzero): Do not use BP_SYM in
	weak_alias.
	(bzero): Likewise.
	* sysdeps/i386/i686/memcmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(BLK2): Likewise.
	(LEN): Likewise.
	(memcmp): Do not use BP_SYM.
	(bcmp): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/i686/memcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(memcpy): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i686/memmove.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(memmove): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i686/mempcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(__mempcpy): Likewise.  Do not use BP_SYM.
	(mempcpy): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/i686/memset.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(LEN): Likewise.
	[!BZERO_P] (CHR): Likewise.
	(memset): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i686/strcmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR2): Likewise.
	(strcmp): Do not use BP_SYM.
	* sysdeps/i386/i686/strtok.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(DELIM): Likewise.
	[USE_AS_STRTOK_R] (SAVE): Likewise.
	(FUNCTION): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/i686/strtok_r.S (__strtok_r): Do not use BP_SYM in
	aliases.
	(strtok_r): Likewise.
	(__GI___strtok_r): Likewise.
	* sysdeps/i386/lshift.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S): Likewise.
	(SIZE): Likewise.
	(__mpn_lshift): Do not use BP_SYM.
	* sysdeps/i386/memchr.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(__memchr): Do not use BP_SYM.
	(memchr): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/memcmp.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(BLK2): Likewise.
	(LEN): Likewise.
	(memcmp): Do not use BP_SYM.
	(bcmp): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/mul_1.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_mul_1): Do not use BP_SYM.
	* sysdeps/i386/rawmemchr.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(__rawmemchr): Do not use BP_SYM.
	(rawmemchr): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/rshift.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S): Likewise.
	(SIZE): Likewise.
	(__mpn_rshift): Do not use BP_SYM.
	* sysdeps/i386/setjmp.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(SIGMSK): Likewise.
	(__sigsetjmp): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/start.S: Do not include "bp-sym.h".
	(_start): Do not use BP_SYM.
	* sysdeps/i386/stpcpy.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(__stpcpy): Likewise.  Do not use BP_SYM.
	(stpcpy): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/stpncpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(DEST): Likewise.
	(SRC): Likewise.
	(LEN): Likewise.
	(__stpncpy): Likewise.  Do not use BP_SYM.
	(stpncpy): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/strchr.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(strchr): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/strchrnul.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(__strchrnul): Likewise.  Do not use BP_SYM.
	(strchrnul): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/strcspn.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STOP): Likewise.
	(strcspn): Do not use BP_SYM.
	* sysdeps/i386/strpbrk.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(STOP): Likewise.
	(strpbrk): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/strrchr.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(CHR): Likewise.
	(strrchr): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/strspn.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(SKIP): Likewise.
	(strspn): Do not use BP_SYM.
	* sysdeps/i386/strtok.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(STR): Likewise.
	(DELIM): Likewise.
	(SAVE): Likewise.
	(FUNCTION): Likewise.  Do not use BP_SYM.
	* sysdeps/i386/strtok_r.S (__strtok_r): Do not use BP_SYM in
	aliases.
	(strtok_r): Likewise.
	(__GI___strtok_r): Likewise.
	* sysdeps/i386/sub_n.S: Do not include "bp-sym.h" and "bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(S2): Likewise.
	(SIZE): Likewise.
	(__mpn_sub_n): Do not use BP_SYM.
	* sysdeps/i386/submul_1.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(PARMS): Do not use macros from bp-asm.h.
	(S1): Likewise.
	(SIZE): Likewise.
	(__mpn_submul_1): Do not use BP_SYM.
	* sysdeps/unix/i386/sysdep.S: Do not include <bp-asm.h> and
	<bp-sym.h>.
	* sysdeps/unix/sysv/linux/i386/clone.S: Do not include <bp-sym.h>
	and <bp-asm.h>.
	(PARMS): Do not use macros from bp-asm.h.
	(FLAGS): Likewise.
	(PTID): Likewise.
	(TLS): Likewise.
	(CTID): Likewise.
	(__clone): Do not use BP_SYM.
	(clone): Do not use BP_SYM in weak_alias.
	* sysdeps/unix/sysv/linux/i386/mmap64.S: Do not include <bp-sym.h>
	and <bp-asm.h>.
	(PARMS): Do not use macros from bp-asm.h.
	(LEN): Likewise.
	(__mmap64): Do not use BP_SYM.
	(mmap64): Do not use BP_SYM in weak_alias.
	* sysdeps/unix/sysv/linux/i386/posix_fadvise64.S: Do not include
	<bp-sym.h> and <bp-asm.h>.
	(PARMS): Do not use macros from bp-asm.h.
	(__posix_fadvise64_l64): Do not use BP_SYM.
	* sysdeps/unix/sysv/linux/i386/semtimedop.S
	(PARMS): Do not use macros from bp-asm.h.
	(NSOPS): Likewise.
	(semtimedop): Do not use BP_SYM.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Do not include <bp-sym.h>
	and <bp-asm.h>.

2013-02-21  Allan McRae  <allan@archlinux.org>

	* manual/message.texi (Charset conversion in gettext):
	Move @end statement to beginning of line.

2013-02-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__inv): Mark as
	static.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__inv):
	Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c (norm): Fix whitespace.
	(denorm): Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (norm): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (norm): Likewise.

2013-02-21  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/dl-trampoline.S (_dl_runtime_profile): Do a
	tail-call to the resolved function if pltexit isn't needed.

2013-02-21  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__mul): Mark X
	or Y being zero as being unlikely.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__mul):
	Likewise.

2013-02-20  Carlos O'Donell  <carlos@redhat.com>

	* manual/nss.texi (System Databases and Name Service Switch):
	Remove frobnicate @pxref.

2013-02-20  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/ieee754/bits/nan.h [!__GNUC__] (__nan_union): Change
	__attribute__ ((unused)) to __attribute__ ((__unused__)).

2013-02-20  Petr Machata  <pmachata@redhat.com>

	* elf/elf.h (R_ARM_TARGET1): New macro.
	(R_ARM_SBREL31, R_ARM_V4BX, R_ARM_TARGET2): Likewise.
	(R_ARM_PREL31, R_ARM_MOVW_ABS_NC, R_ARM_MOVT_ABS): Likewise.
	(R_ARM_MOVW_PREL_NC, R_ARM_MOVT_PREL): Likewise.
	(R_ARM_THM_MOVW_ABS_NC, R_ARM_THM_MOVT_ABS): Likewise.
	(R_ARM_THM_MOVW_PREL_NC, R_ARM_THM_MOVT_PREL): Likewise.
	(R_ARM_THM_JUMP19, R_ARM_THM_JUMP6): Likewise.
	(R_ARM_THM_ALU_PREL_11_0, R_ARM_THM_PC12): Likewise.
	(R_ARM_ABS32_NOI, R_ARM_REL32_NOI): Likewise.
	(R_ARM_ALU_PC_G0_NC, R_ARM_ALU_PC_G0): Likewise.
	(R_ARM_ALU_PC_G1_NC, R_ARM_ALU_PC_G1): Likewise.
	(R_ARM_ALU_PC_G2, R_ARM_LDR_PC_G1, R_ARM_LDR_PC_G2): Likewise.
	(R_ARM_LDRS_PC_G0, R_ARM_LDRS_PC_G1): Likewise.
	(R_ARM_LDRS_PC_G2, R_ARM_LDC_PC_G0): Likewise.
	(R_ARM_LDC_PC_G1, R_ARM_LDC_PC_G2): Likewise.
	(R_ARM_ALU_SB_G0_NC, R_ARM_ALU_SB_G0): Likewise.
	(R_ARM_ALU_SB_G1_NC, R_ARM_ALU_SB_G1): Likewise.
	(R_ARM_ALU_SB_G2, R_ARM_LDR_SB_G0, R_ARM_LDR_SB_G1): Likewise.
	(R_ARM_LDR_SB_G2, R_ARM_LDRS_SB_G0): Likewise.
	(R_ARM_LDRS_SB_G1, R_ARM_LDRS_SB_G2): Likewise.
	(R_ARM_LDC_SB_G0, R_ARM_LDC_SB_G1, R_ARM_LDC_SB_G2): Likewise.
	(R_ARM_MOVW_BREL_NC, R_ARM_MOVT_BREL): Likewise.
	(R_ARM_MOVW_BREL, R_ARM_THM_MOVW_BREL_NC): Likewise.
	(R_ARM_THM_MOVT_BREL, R_ARM_THM_MOVW_BREL): Likewise.
	(R_ARM_PLT32_ABS, R_ARM_GOT_ABS, R_ARM_GOT_PREL): Likewise.
	(R_ARM_GOT_BREL12, R_ARM_GOTOFF12, R_ARM_GOTRELAX): Likewise.
	(R_ARM_TLS_LDO12, R_ARM_TLS_LE12, R_ARM_TLS_IE12GP): Likewise.
	(R_ARM_PRIVATE_0, R_ARM_PRIVATE_1, R_ARM_PRIVATE_2): Likewise.
	(R_ARM_PRIVATE_3, R_ARM_PRIVATE_4, R_ARM_PRIVATE_5): Likewise.
	(R_ARM_PRIVATE_6, R_ARM_PRIVATE_7, R_ARM_PRIVATE_8): Likewise.
	(R_ARM_PRIVATE_9, R_ARM_PRIVATE_10): Likewise.
	(R_ARM_PRIVATE_11, R_ARM_PRIVATE_12): Likewise.
	(R_ARM_PRIVATE_13, R_ARM_PRIVATE_14): Likewise.
	(R_ARM_PRIVATE_15, R_ARM_ME_TOO): Likewise.
	(R_ARM_THM_TLS_DESCSEQ16, R_ARM_THM_TLS_DESCSEQ32): Likewise.
	(R_ARM_THM_GOT_BREL12): Likewise.
	(R_ARM_PC24, R_ARM_PLT32): Updated a comment at this macro.
	(R_ARM_THM_PC11, R_ARM_THM_PC9): Likewise.
	(R_ARM_THM_ABS5, R_ARM_THM_PC22): Added a comment to this macro.
	(R_ARM_THM_PC8, R_ARM_THM_SWI8, R_ARM_XPC25): Likewise.
	(R_ARM_THM_XPC22, R_ARM_ALU_PCREL_7_0): Likewise.
	(R_ARM_ALU_PCREL_15_8, R_ARM_ALU_PCREL_23_15): Likewise.
	(R_ARM_LDR_SBREL_11_0, R_ARM_ALU_SBREL_19_12): Likewise.
	(R_ARM_ALU_SBREL_27_20, R_ARM_TLS_DESCSEQ): Likewise.
	(R_ARM_THM_TLS_DESCSEQ): Fixed whitespace.

2013-02-20  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/ieee754/bits/nan.h [!__GNUC__] (__nan_union): Change
	__attribute_used__ to __attribute__ ((unused)).

2013-02-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__sqr): Copy over comment from
	powerpc mpa.c.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__mul): Fix
	comment formatting.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__mul): Likewise.

2013-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/i386/bp-asm.h [__BOUNDED_POINTERS__] (BOUNDS_VIOLATED):
	Remove macro.
	(ENTER): Remove both macro definitions.
	(LEAVE): Likewise.
	(CHECK_BOUNDS_LOW): Likewise.
	(CHECK_BOUNDS_HIGH): Likewise.
	(CHECK_BOUNDS_BOTH): Likewise.
	(CHECK_BOUNDS_BOTH_WIDE): Likewise.
	(RETURN_BOUNDED_POINTER): Likewise.
	(RETURN_NULL_BOUNDED_POINTER): Likewise.
	(PUSH_ERRNO_LOCATION_RETURN): Likewise.
	(POP_ERRNO_LOCATION_RETURN): Likewise.
	* sysdeps/i386/add_n.S (__mpn_add_n): Do not use removed macros.
	(__mpn_add_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/addmul_1.S (__mpn_addmul_1): Do not use removed
	macros.
	(__mpn_addmul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/bsd-_setjmp.S (_setjmp): Do not use removed macros.
	* sysdeps/i386/bsd-setjmp.S (setjmp): Likewise.
	* sysdeps/i386/fpu/s_frexp.S (__frexp): Likewise.
	* sysdeps/i386/fpu/s_frexpf.S (__frexpf): Likewise.
	* sysdeps/i386/fpu/s_frexpl.S (__frexpl): Likewise.
	* sysdeps/i386/fpu/s_remquo.S (__remquo): Likewise.
	* sysdeps/i386/fpu/s_remquof.S (__remquof): Likewise.
	* sysdeps/i386/fpu/s_remquol.S (__remquol): Likewise.
	* sysdeps/i386/i486/strcat.S (strcat): Likewise.
	* sysdeps/i386/i486/strlen.S (strlen): Likewise.
	* sysdeps/i386/i586/add_n.S (__mpn_add_n): Likewise.
	(__mpn_add_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/addmul_1.S (__mpn_addmul_1): Do not use
	removed macros.
	(__mpn_addmul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/lshift.S (__mpn_lshift): Do not use removed
	macros.
	(__mpn_lshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/memcpy.S (memcpy): Do not use removed macros.
	* sysdeps/i386/i586/memset.S (memset): Likewise.
	* sysdeps/i386/i586/mul_1.S (__mpn_mul_1): Likewise.
	(__mpn_mul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/rshift.S (__mpn_rshift): Do not use removed
	macros.
	(__mpn_rshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/strchr.S (strchr): Do not use removed macros.
	Change uses of L(2) to L(out).
	* sysdeps/i386/i586/strcpy.S (STRCPY): Do not use removed macros.
	* sysdeps/i386/i586/strlen.S (strlen): Likewise.
	* sysdeps/i386/i586/sub_n.S (__mpn_sub_n): Likewise.
	(__mpn_sub_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i586/submul_1.S (__mpn_submul_1): Do not use
	removed macros.
	(__mpn_submul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i686/add_n.S (__mpn_add_n): Do not use removed
	macros.
	(__mpn_add_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i686/memcmp.S (ENTRANCE): Do not use macro ENTER.
	(RETURN): Do not use macro LEAVE.
	* sysdeps/i386/i686/memcpy.S (memcpy): Do not use removed macros.
	* sysdeps/i386/i686/memmove.S (memmove): Likewise.
	* sysdeps/i386/i686/mempcpy.S (mempcpy): Likewise.
	* sysdeps/i386/i686/memset.S (memset): Likewise.
	* sysdeps/i386/i686/strcmp.S (strcmp): Likewise.
	(strcmp) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(strcmp) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/i686/strtok.S (save_ptr) [__BOUNDED_POINTERS__]:
	Likewise.
	(save_ptr) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(FUNCTION): Do not use removed macros.  Combine labels L(1_1),
	L(1_2) and L(1_3) into L(1).
	(FUNCTION) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/lshift.S (__mpn_lshift): Do not use removed macros.
	(__mpn_lshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/memchr.S (__memchr): Do not use removed macros.
	(__memchr) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/memcmp.S (memcmp): Do not use removed macros.
	* sysdeps/i386/mul_1.S (__mpn_mul_1): Likewise.
	(__mpn_mul_1) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/rawmemchr.S (__rawmemchr): Do not use removed
	macros.
	* sysdeps/i386/rshift.S (__mpn_rshift): Likewise.
	(__mpn_rshift) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/setjmp.S (__sigsetjmp): Do not use removed macros.
	* sysdeps/i386/stpcpy.S (__stpcpy): Likewise.
	* sysdeps/i386/stpncpy.S (__stpncpy): Likewise.
	(__stpncpy) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/strchr.S (strchr): Do not use removed macros.
	* sysdeps/i386/strchrnul.S (__strchrnul): Likewise.
	* sysdeps/i386/strcspn.S (strcspn): Likewise.
	* sysdeps/i386/strpbrk.S (strpbrk): Likewise.
	* sysdeps/i386/strrchr.S (strrchr): Likewise.
	* sysdeps/i386/strspn.S (strspn): Likewise.
	* sysdeps/i386/strtok.S (save_ptr) [__BOUNDED_POINTERS__]: Remove
	conditional code.
	(save_ptr) [!__BOUNDED_POINTERS__]: Make code unconditional.
	(FUNCTION) [!__BOUNDED_POINTERS__]: Likewise.
	(FUNCTION) [__BOUNDED_POINTERS__]: Remove conditional code.
	(FUNCTION): Do not use removed macros.  Combine labels L(1_2) and
	L(1_3) into L(1_1).
	* sysdeps/i386/sub_n.S (__mpn_sub_n): Do not use removed macros.
	(__mpn_sub_n) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/i386/submul_1.S (__mpn_submul_1): Do not use removed
	macros.
	(__mpn_submul_1) [__BOUNDED_POINTERS__]: Remove conditional code.

2013-02-19  Jakub Jelinek  <jakub@redhat.com>

	* stdlib/strtod_l.c (__mpn_lshift_1): Rewritten as function-like
	macro.

2013-02-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* math/atest-exp.c (exp_mpn): Remove ROUND.
	* math/atest-exp2.c (exp_mpn): Likewise.
	* math/atest-sincos.c (sincosx_mpn): Remove ROUND and CHK.

	* stdlib/cxa_thread_atexit_impl.c: Fix Copyright year.
	* stdlib/tst-tls-atexit-lib.c: Likewise.
	* stdlib/tst-tls-atexit.c: Likewise.

2013-02-18  Mike Frysinger  <vapier@gentoo.org>

	* stdlib/stdlib.h (aligned_alloc): Use __attribute_malloc__
	and __attribute_alloc_size__.

2013-02-18  Mike Frysinger  <vapier@gentoo.org>

	* include/programs/xmalloc.h: Change __attribute_alloc_size to
	__attribute_alloc_size__.
	* include/sys/cdefs.h (__attribute_alloc_size): Macro removed.
	* misc/sys/cdefs.h (__attribute_alloc_size__): New macro.

2013-02-18  Mike Frysinger  <vapier@gentoo.org>

	* include/programs/xmalloc.h: New file.
	* catgets/gencat.c: Include it.
	(xmalloc, xcalloc, xrealloc, xstrdup): Don't declare them.
	* elf/pldd.c: Likewise.
	* iconv/iconv_charmap.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* iconv/strtab.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.h: Likewise.
	* locale/programs/simple-hash.c: Likewise.
	* nscd/nscd.h: Likewise.
	* nss/makedb.c: Likewise.
	* sysdeps/generic/ldconfig.h: Likewise.

2013-02-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* Versions.def: Add GLIBC_2.18.
	* include/link.h (struct link_map): New member l_tls_dtor_count.
	* include/stdlib.h (__cxa_thread_atexit_impl): Declare.
	(__call_tls_dtors): Likewise.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Add
	__cxa_thread_atexit_impl.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist:
	Likewise.
	* stdlib/Makefile (routines): Add __cxa_thread_atexit_impl.
	(tests): Add test case tst-tls-atexit.
	(modules-names): Add shared library for tst-tls-atexit.
	* stdlib/Versions (GLIBC_2.18): Add __cxa_thread_atexit_impl.
	(GLIBC_PRIVATE): Add __call_tls_dtors.
	* stdlib/cxa_thread_atexit_impl.c: New file with helper function
	for libstdc++.
	* stdlib/exit.c (__run_exit_handlers): Call __call_tls_dtors.
	* stdlib/tst-tls-atexit.c: New test case.
	* stdlib/tst-tls-atexit-lib.c: New test case.

	* misc/tst-pselect.c: Include stdlib.h for declaration of exit.

	* elf/Versions (ld): Add _dl_find_dso_for_object.
	* elf/dl-addr.c (_dl_addr): Use _dl_find_dso_for_object.
	* elf/dl-open.c (_dl_find_dso_for_object): New function.
	(dl_open_worker): Use _dl_find_dso_for_object.
	* elf/dl-sym.c (do_sym): Likewise.
	* sysdeps/generic/ldsodefs.h: Declare _dl_find_dso_for_object.

2013-02-18  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-64/dl-trampoline.S (_dl_runtime_resolve):
	Syntactic changes only.
	(_dl_runtime_profile): Do a tail-call to the resolved function.

2013-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/x86_64/bp-asm.h: Remove file.
	* sysdeps/unix/sysv/linux/x86_64/clone.S: Do not include
	<bp-sym.h> and <bp-asm.h>.
	(__clone): Do not use BP_SYM.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Do not include
	<bp-sym.h> and <bp-asm.h>.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/bsd-_setjmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(_setjmp): Do not use BP_SYM.
	* sysdeps/x86_64/bsd-setjmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(setjmp): Do not use BP_SYM.
	* sysdeps/x86_64/mempcpy.S (__mempcpy): Do not use BP_SYM in
	libc_hidden_def.
	(mempcpy): Do not use BP_SYM in weak_alias.
	* sysdeps/x86_64/rtld-strchr.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(strchr): Do not use BP_SYM.
	* sysdeps/x86_64/rtld-strlen.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	* sysdeps/x86_64/setjmp.S (__sigsetjmp): Do not use BP_SYM.
	* sysdeps/x86_64/start.S: Do not include "bp-sym.h".
	(_start): Do not use BP_SYM.
	* sysdeps/x86_64/strcat.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(strcat): Do not use BP_SYM.
	* sysdeps/x86_64/strcmp.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(STRCMP): Do not use BP_SYM.
	* sysdeps/x86_64/strcpy.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(STRCPY): Do not use BP_SYM.
	* sysdeps/x86_64/strcpy_chk.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	* sysdeps/x86_64/strtok.S: Do not include "bp-sym.h" and
	"bp-asm.h".
	(FUNCTION): Do not use BP_SYM.
	* sysdeps/x86_64/strtok_r.S (strtok_r): Do not use BP_SYM in
	weak_alias.
	(__GI___strtok_r): Do not use BP_SYM in strong_alias.

2013-02-17  Andreas Jaeger  <aj@suse.de>

	* time/Versions: Sort entries.
	* string/Versions: Likewise.
	* resolv/Versions: Likewise.
	* posix/Versions: Likewise.
	* iconv/Versions: Likewise.
	* elf/Versions: Likewise.
	* wcsmbs/Versions: Likewise.

2013-02-15  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__sqr): Avoid using LIM in
	loop termination condition.

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Use intermediate
	variable to calculate EZ.
	(__sqr): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Fix determination of
	the lower precision input.

2013-02-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* Makeconfig [!+link-bounded] (+link-bounded): Remove variable.
	[!link-extra-libs] (link-extra-libs-bounded): Likewise.
	(run-via-rtld-prefix): Do not handle %-bp tests.
	(test-via-rtld-prefix): Do not mention %-bp tests in comment.
	(all-object-suffixes): Remove .ob.
	(bppfx): Remove variable.
	[$(build-bounded) = yes] (object-suffixes): Do not add .ob.
	[$(build-bounded) = yes] (CPPFLAGS-.ob): Remove variable.
	[$(build-bounded) = yes] (CFLAGS-.ob): Likewise.
	[$(build-bounded) = yes] (libtype.ob): Likewise.
	* Makerules (elide-routines.ob): Remove variable.
	(do-tests-clean): Do not handle *-bp.out.
	(common-mostlyclean): Do not handle *-bp and *-bp.out.
	* Rules [$(build-bounded) = yes] (tests-bp.out): Remove variable.
	[$(build-bounded) = yes] (xtests-bp.out): Likewise.
	(tests): Do not include $(tests-bp.out).
	(xtests): Do not include $(xtests-bp.out).
	[$(build-bounded) = yes] (binaries-bounded): Remove variable.
	[$(build-bounded) = yes] ($(addprefix
	$(objpfx),$(binaries-bounded))): Remove rule.
	($(objpfx)%-bp.out): Remove rule.
	* config.make.in (build-bounded): Remove variable.
	* crypt/Makefile [$(build-bounded) = yes]
	($(tests:%=$(objpfx)%-bp)): Remove dependency.
	* csu/Makefile [$(build-bounded) = yes] (extra-objs): Do not
	append to variable.
	[$(build-bounded) = yes] (install-lib): Likewise.
	[$(build-bounded) = yes] (generated): Likewise.
	[!start-installed-name-rule] ($(objpfx)b$(start-installed-name)):
	Remove rule.
	* intl/Makefile [$(build-bounded) = yes]
	($(multithread-test-srcs:%=$(objpfx)%-bp)): Remove dependency.
	* math/Makefile [$(build-bounded) = yes]
	($(tests:%=$(objpfx)%-bp): Likewise.
	* misc/Makefile [$(build-bounded) = yes]
	($(objpfx)tst-tsearch-bp): Likewise.
	* nptl/Makeconfig (bounded-thread-library): Remove variable.
	* rt/Makefile [$(build-bounded) = yes] ($(tests:%=$(objpfx)%-bp)):
	Remove dependency.
	* string/Makefile (o-objects.ob): Remove variable.
	* sysdeps/i386/i686/Makefile [$(config-asflags-i686) = yes]
	(CFLAGS-.ob): Remove variable.
	[$(config-asflags-i686) = yes] (ASFLAGS-.ob): Likewise.
	* sysdeps/sparc/sparc32/sparcv9/Makefile (ASFLAGS-.ob): Remove
	both definitions of variable.
	* sysdeps/sparc/sparc64/Makefile [$(have-as-vis3) = yes]
	(ASFLAGS-.ob): Remove variable.

2013-02-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* config.h.in [USE_REGPARMS && !PROF && !__BOUNDED_POINTERS__]:
	Remove __BOUNDED_POINTERS__ from condition.
	* elf/dl-runtime.c [!PROF && !__BOUNDED_POINTERS__]: Likewise.
	* string/bits/string2.h [!__NO_STRING_INLINES &&
	!__BOUNDED_POINTERS__]: Likewise.
	* sysdeps/i386/dl-machine.h [!PROF && !__BOUNDED_POINTERS__]:
	Likewise.
	* sysdeps/unix/sysv/linux/shmat.c (shmat) [__BOUNDED_POINTERS__]:
	Remove conditional code.
	* sysdeps/x86/bits/string.h [!__NO_STRING_INLINES &&
	__USE_STRING_INLINES && __GNUC__ && __GNUC__ >= 2 &&
	!__BOUNDED_POINTERS__]: Remove __BOUNDED_POINTERS__ from
	condition.

	[BZ #13550]
	* csu/libc-start.c: Do not include <bp-sym.h>.
	[!LIBC_START_MAIN] (LIBC_START_MAIN): Do not use BP_SYM.
	* elf/dl-open.c: Do not include <bp-sym.h>.
	(_dl_sysdep_start): Do not use BP_SYM in weak_extern.
	* math/fegetenv.c: Do not include <bp-sym.h>.
	(fegetenv): Do not use BP_SYM in versioned symbols.
	* nptl/sysdeps/pthread/bits/libc-lockP.h
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]: Do not include
	<bp-sym.h>.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_init): Do not use BP_SYM in weak_extern.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_destroy): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_lock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_trylock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutex_unlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutexattr_init): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutexattr_destroy): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_mutexattr_settype): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_init): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_destroy): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_rdlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_tryrdlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_wrlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_trywrlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_rwlock_unlock): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_key_create): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_setspecific): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(__pthread_getspecific): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern] (__pthread_once):
	Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(_pthread_cleanup_push_defer): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(_pthread_cleanup_pop_restore): Likewise.
	[!__NO_WEAK_PTHREAD_ALIASES && weak_extern]
	(pthread_setcancelstate): Likewise.
	* string/memchr.c [HAVE_BP_SYM_H || _LIBC]: Do not include
	<bp-sym.h>.
	[!(HAVE_BP_SYM_H || _LIBC)] (BP_SYM): Remove macro definition.
	(memchr): Do not use BP_SYM in weak_alias.
	* sysdeps/i386/fpu/fegetenv.c: Do not include <bp-sym.h>.
	(fegetenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/i386/fpu/fesetenv.c: Do not include <bp-sym.h>.
	(fesetenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/i386/fpu/feupdateenv.c: Do not include <bp-sym.h>.
	(feupdateenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/i386/fpu/fsetexcptflg.c: Do not include <bp-sym.h>.
	(fesetexceptflag): Do not use BP_SYM in versioned symbols.
	* sysdeps/posix/open64.c: Do not include <bp-sym.h>.
	(__open64): Do not use BP_SYM in weak_alias and libc_hidden_weak.
	(open64): Do not use BP_SYM in weak_alias.
	* sysdeps/powerpc/fpu/fegetenv.c: Do not include <bp-sym.h>.
	(fegetenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/fesetenv.c: Do not include <bp-sym.h>.
	(fesetenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/feupdateenv.c: Do not include <bp-sym.h>.
	(feupdateenv): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/fgetexcptflg.c: Do not include <bp-sym.h>.
	(fegetexceptflag): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/fraiseexcpt.c: Do not include <bp-sym.h>.
	(feraiseexcept): Do not use BP_SYM in versioned symbols.
	* sysdeps/powerpc/fpu/fsetexcptflg.c: Do not include <bp-sym.h>.
	(fesetexceptflag): Do not use BP_SYM in versioned symbols.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.c: Do not include
	<bp-sym.h>.
	(__libc_start_main): Do not use BP_SYM.

2013-02-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__cpy): Remove
	redundant return line.
	(norm): Likewise.
	(denorm): Likewise.
	(dbl_mp): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(dbl_mp): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.

	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Use __sqr
	instead of __mul.
	* sysdeps/ieee754/dbl-64/mpsqrt.c (__mpsqrt): Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c (ss32): Likewise.
	(cc32): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.c (__sqr): New function.
	* sysdeps/ieee754/dbl-64/mpa.h (__sqr): Declare.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): use __sqr instead
	of __mul for squares.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__sqr): New
	function
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__sqr):
	Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpa-avx.c: Define __sqr.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: Likewise.

2013-02-13  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* misc/sys/cdefs.h [!__BOUNDED_POINTERS__]: Remove conditional
	code.
	* csu/libc-start.c (LIBC_START_MAIN): Do not use __unbounded in
	prototype or function definition.  Rename ubp_* variables and
	parameters.  Remove argv definitions conditional on
	[__BOUNDED_POINTERS__].
	* debug/backtrace.c (__backtrace): Do not use __unbounded.
	* elf/dl-runtime.c (_dl_fixup): Likewise.
	* include/set-hooks.h (RUN_HOOK): Likewise.
	* stdio-common/vfprintf.c (JUMP): Do not use __unbounded in either
	definition.
	* string/strcpy.c (strcpy): Do not use __unbounded.
	* sysdeps/generic/frame.h (struct layout): Likewise.
	* sysdeps/gnu/bits/msq.h (struct msqid_ds): Likewise.
	* sysdeps/i386/dl-machine.h (_dl_fixup): Likewise.
	* sysdeps/powerpc/powerpc32/backtrace.c (struct layout): Likewise.
	* sysdeps/powerpc/powerpc64/backtrace.c (struct layout): Likewise.
	* sysdeps/sparc/backtrace.c (struct layout): Likewise.
	(__backtrace): Likewise.
	* sysdeps/unix/sysv/linux/aio_sigqueue.c (__aio_sigqueue): Do not
	use __ptrvalue.
	* sysdeps/unix/sysv/linux/fxstat.c (__fxstat): Likewise.
	* sysdeps/unix/sysv/linux/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/gai_sigqueue.c (__gai_sigqueue):
	Likewise.
	* sysdeps/unix/sysv/linux/i386/brk.c (__brk): Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstat.c (__fxstat): Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c (__fxstatat): Likewise.
	* sysdeps/unix/sysv/linux/i386/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/i386/msgctl.c (struct __old_msqid_ds):
	Do not use __unbounded.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c (__new_setrlimit):
	Rename __unboundedrlimits parameter to rlimits in prototype.
	* sysdeps/unix/sysv/linux/i386/shmctl.c (struct __old_shmid_ds):
	Do not use __unbounded.
	* sysdeps/unix/sysv/linux/i386/sigaction.c (__libc_sigaction): Do
	not use __ptrvalue.
	* sysdeps/unix/sysv/linux/i386/xstat.c (__xstat): Likewise.
	* sysdeps/unix/sysv/linux/llseek.c (__llseek): Likewise.
	* sysdeps/unix/sysv/linux/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/mmap64.c (__mmap64): Do not use
	__ptrvalue or __unbounded.
	(__mmap64) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/unix/sysv/linux/msgctl.c (struct __old_msqid_ds): Do not
	use __unbounded.
	(__new_msgctl): Do not use __ptrvalue.
	* sysdeps/unix/sysv/linux/msgrcv.c (struct ipc_kludge): Do not use
	__unbounded.
	(__libc_msgrcv): Do not use __ptrvalue.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.c (struct
	startup_info): Do not use __unbounded.
	(__libc_start_main): Likewise.  Rename ubp_* variables and
	parameters.  Remove argv definitions conditional on
	[__BOUNDED_POINTERS__].
	* sysdeps/unix/sysv/linux/ptrace.c (ptrace): Do not use
	__ptrvalue.
	* sysdeps/unix/sysv/linux/semctl.c (struct __old_semid_ds): Do not
	use __unbounded.
	* sysdeps/unix/sysv/linux/shmat.c (shmat): Do not use __unbounded
	or __ptrvalue.
	* sysdeps/unix/sysv/linux/shmctl.c (struct __old_shmid_ds): Do not
	use __unbounded.
	(__new_shmctl): Do not use __ptrvalue.
	* sysdeps/unix/sysv/linux/shmdt.c (shmdt): Likewise.
	* sysdeps/unix/sysv/linux/sigaction.c (__libc_sigaction):
	Likewise.
	* sysdeps/unix/sysv/linux/sigqueue.c (__sigqueue): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c
	(__libc_sigaction): Likewise.
	* sysdeps/unix/sysv/linux/sysctl.c (__sysctl): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sigaction.c (__libc_sigaction):
	Likewise.
	* sysdeps/unix/sysv/linux/xstat.c (__xstat): Likewise.

2013-02-13   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* stdlib/Makefile (headers): Add bits/stdlib-bsearch.h.

	* string/mempcpy.c: Implement by calling memcpy.

2013-02-13  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Remove NFA.

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Faster polynomial
	evaluation.

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Don't bother with zero
	values in the mantissa.

	* sysdeps/ieee754/dbl-64/mpa.c (add_magnitudes): Use ZK to
	minimize writes to Z.
	(sub_magnitudes): Simplify code a bit.

2013-02-12  Roland McGrath  <roland@hack.frob.com>

	* include/libc-symbols.h (stub_warning): Remove "warning: " prefix
	from the message.  The linker prefixes all warnings with that already.

2013-02-12  Andreas Schwab  <schwab@suse.de>

	[BZ #15078]
	* posix/regexec.c (extend_buffers): Add parameter min_len.
	(check_matching): Pass minimum needed length.
	(clean_state_log_if_needed): Likewise.
	(get_subexp): Likewise.
	* posix/Makefile (tests): Add bug-regex34.
	(bug-regex34-ENV): Define.
	* posix/bug-regex34.c: New file.

	[BZ #11561]
	* posix/regcomp.c (parse_bracket_exp): When looking up collating
	elements compare against the byte sequence of it, not its name.
	* posix/Makefile (tests): Add bug-regex35.
	(bug-regex35-ENV): Define.
	* posix/bug-regex35.c: New file.

2013-02-11  Tom de Vries  <tom@codesourcery.com>

	* string/str-two-way.h:  Fix typo RESULT_TYPE -> RETURN_TYPE in
	comment.
	Add RET0_IF_0 and CHECK_EOL to macro list in comment.
	(AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J): Remove superfluous undef.
	(CHECK_EOL): Add undef.

2013-02-11   Ond≈ôej B√≠lka  <neleai@seznam.cz>

	* bits/stdlib-bsearch.h: New file.
	* stdlib/bsearch.c: Include bits/stdlib-bsearch.h.
	* stdlib/stdlib.h: Likewise.

2013-02-11  Roland McGrath  <roland@hack.frob.com>

	* manual/conf.texi (General Limits): Fix SSIZE_MAX type to ssize_t.
	* manual/errno.texi (Error Messages): Fix typo in error_print_progname
	declaration.
	* manual/search.texi (Array Search Function): Add missing const in
	lfind prototype.
	* manual/resource.texi (Limits on Resources): Fix RLIM_INFINITY
	declaration to use rlim_t.
	(Basic Scheduling Functions): Remove erroneous const from
	sched_getparam prototype.  Remove erroneous * from
	sched_get_priority_max and sched_get_priority_min prototypes.
	(Resource Usage): Fix summary @comment on vtimes to refer to
	sys/vtimes.h rather than vtimes.h.
	Add missing *s in vtimes prototype.
	(Limits on Resources): Fix ulimit prototype to return long int.
	* manual/math.texi (SVID Random): Fix lrand48_r and mrand48_r
	prototypes to use long int rather than double.
	(BSD Random): Fix initstate and setstate to use char *, not void *.
	* manual/llio.texi (Asynchronous Reads/Writes): Fix lio_listio64
	prototype to make second argument 'struct aiocb64 *const[]'.
	Fix aio_read64 and aio_write64 prototypes to use struct aiocb64.
	(Status of AIO Operations): Remove erroneous const in aio_return and
	aio_return64 prototypes.
	(Synchronizing I/O): Fix sync prototype to return void.
	* manual/startup.texi (Suboptions): Remove an erroneous const in
	getsubopt prototype.
	* manual/getopt.texi (Using Getopt): Add a const in getopt prototype.
	* manual/users.texi (Lookup Netgroup): Fix getnetgrent_r prototype to
	use size_t rather than int.
	(Scanning All Users): Likewise for getpwent_r.
	(Setting Groups): Add missing const to setgroups prototype.
	* manual/sysinfo.texi (mtab): Fix typo in getmntent_r prototype.
	* manual/socket.texi (Host Names): Fix gethostbyaddr and
	gethostbyaddr_r prototypes to use socklen_t rather than size_t and
	'const void *' rather than 'const char *'.
	(Host Address Functions): Likewise for inet_ntop.
	(Networks Database): Fix getnetbyaddr prototype to use uint32_t.
	(Receiving Data): Fix recv, recvfrom, recvmsg prototypes to use
	ssize_t for return value.
	(Sending Data): Likewise for send, sendto, sendmsg.
	(Socket Option Functions): Add a missing const in setsockopt prototype.
	* manual/stdio.texi (Simple Output): Fix fputwc_unlocked prototype to
	use wchar_t for the argument.
	(Formatted Input Functions): Fix swscanf prototype to use wchar_t *.
	* manual/arith.texi (Control Functions): Fix fegetexcept prototype to
	take no arguments.
	(Normalization Functions): Fix scalb, scalbf, scalbl prototypes to use
	double/float/long double for second argument.
	Fix return types of significand, significandf, significandl.
	* manual/filesys.texi (Setting Permissions): Use mode_t for second
	argument in fchmod prototype.
	(File Owner): Use uid_t and gid_t in fchown prototype.
	(File Times): Add const to utimes, futimes, and lutimes prototypes.
	(Making Special Files): Use mode_t and dev_t in mknod prototype.
	(Scanning Directory Content): Fix scandir and scandir64 prototypes to
	use 'const struct dirent **' as argument types to CMP function pointer
	argument.
	(Symbolic Links): Fix readlink prototype with ssize_t as return value.
	(File Times): Fix summary magic @comment for struct utimbuf and utime
	to refer to utime.h, not time.h.
	* manual/string.texi (Argz Functions): Add missing const in
	argz_extract and argz_next prototypes.
	(Finding Tokens in a String): Likewise for basename.
	(String/Array Comparison): Fix typo in wcscasecmp prototype.
	(Copying and Concatenation): Fix typo in wmemmove prototype.
	* manual/signal.texi (Using Pause): Use (void) in pause prototype.
	(Signal Stack): Remove erroneous const in sigstack prototype.
	* manual/time.texi (Setting an Alarm): Add missing const in setitimer
	prototype.
	(Simple Calendar Time): Likewise for stime.
	* manual/terminal.texi (BSD Terminal Modes): Add missing const in stty
	prototype.
	* manual/sysinfo.texi (System Parameters): Fix mentions of sysctl.h to
	say sys/sysctl.h instead.
	* manual/syslog.texi (syslog; vsyslog): Add missing const in syslog
	and vsyslog prototypes.

2013-02-11  Tom de Vries  <tom@codesourcery.com>

	* string/Makefile (CFLAGS-bug-strstr1.c, CFLAGS-bug-strcasestr1.c):
	Remove.

2013-02-11  Roland McGrath  <roland@hack.frob.com>

	* misc/sys/mman.h: Fix typo in mremap comment.

2013-02-08  Roland McGrath  <roland@hack.frob.com>

	* manual/examples/mkfsock.c (make_named_socket): Don't add one for
	the '\0' terminator.

2013-02-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* debug/segfault.c: Don't include <bp-checks.h>.
	* sysdeps/generic/bp-checks.h: Remove file.
	* sysdeps/unix/sysv/linux/getdents.c: Don't include <bp-checks.h>.
	(__GETDENTS): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/i386/brk.c: Don't include <bp-checks.h>.
	* sysdeps/unix/sysv/linux/i386/getgroups.c: Likewise.
	(__getgroups): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Likewise.
	(setgroups): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/mmap64.c: Don't include <bp-checks.h>.
	* sysdeps/unix/sysv/linux/msgrcv.c: Likewise.
	(__libc_msgrcv): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/msgsnd.c: Don't include <bp-checks.h>.
	(__libc_msgsnd): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c: Don't include
	<bp-checks.h>.
	(__libc_pread): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c: Don't
	include <bp-checks.h>.
	(__libc_pread64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c: Don't
	include <bp-checks.h>.
	(__libc_pwrite): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c: Don't
	include <bp-checks.h>.
	(__libc_pwrite64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c: Don't include
	<bp-checks.h>.
	(__libc_pread): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c: Don't
	include <bp-checks.h>.
	(__libc_pread64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c: Don't
	include <bp-checks.h>.
	(__libc_pwrite): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c: Don't
	include <bp-checks.h>.
	(__libc_pwrite64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/pread.c: Don't include <bp-checks.h>.
	(do_pread): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/pread64.c: Don't include <bp-checks.h>.
	(do_pread64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/pwrite.c: Don't include <bp-checks.h>.
	(do_pwrite): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/pwrite64.c: Don't include <bp-checks.h>.
	(do_pwrite64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/readv.c: Don't include <bp-checks.h>.
	(__libc_readv): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/semop.c: Don't include <bp-checks.h>.
	(semop): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/semtimedop.c: Don't include
	<bp-checks.h>.
	(semtimedop): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sh/pread.c: Don't include <bp-checks.h>.
	(__libc_pread): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sh/pread64.c: Don't include
	<bp-checks.h>.
	(__libc_pread64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sh/pwrite.c: Don't include
	<bp-checks.h>.
	(__libc_pwrite): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c: Don't include
	<bp-checks.h>.
	(__libc_pwrite64): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgrcv.c: Don't include
	<bp-checks.h>.
	(__libc_msgrcv): Don't use CHECK_N.
	* sysdeps/unix/sysv/linux/sysctl.c: Don't include <bp-checks.h>.
	(__sysctl): Don't use CHECK_N.  Remove GKM FIXME comment.
	* sysdeps/unix/sysv/linux/writev.c: Don't include <bp-checks.h>.
	(__libc_writev): Don't use CHECK_N.

2013-02-08  Roland McGrath  <roland@hack.frob.com>

	* string/strcpy.c: Removed unused variable.

	* Makeconfig (+sysdep-includes): Define with := rather than =.
	Use an existing include/ subdir of each sysdeps dir before it.

2013-02-08  Carlos O'Donell  <carlos@redhat.com>

	* nscd/connection.c (register_traced_file): Comment function.
	[HAVE_INOTIFY] (union __inev): Define.
	[HAVE_INOTIFY] (inotify_check_files): New function.
	[HAVE_INOTIFY] (clear_db_cache): Likewise.
	[HAVE_INOTIFY] (main_loop_poll): Call inotify_check_files and
	clear_db_cache.
	[HAVE_INOTIFY] (main_loop_epoll): Likewise.

2013-02-08  Carlos O'Donell  <carlos@redhat.com>

	* elf/dl-cache.c (_dl_load_cache_lookup): Comment that cache is
	loaded if not already and that a failure is permanent.

2013-02-08  Carlos O'Donell  <carlos@redhat.com>

	[BZ #15006]
	* sysdeps/generic/ldconfig.h: Define FLAG_ARM_LIBSF.
	* elf/cache.c (print_entry): Add FLAG_ARM_LIBSF support.

2013-02-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (CHECK_1): Remove all definitions.
	(CHECK_1_NULL_OK): Likewise.
	* sysdeps/unix/sysv/linux/fxstat.c: Do not include <bp-checks.h>.
	(__fxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/fxstat64.c: Do not include
	<bp-checks.h>.
	(___fxstat64): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/fxstatat.c: Do not include
	<bp-checks.h>.
	(__fxstatat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/fxstatat64.c: Do not include
	<bp-checks.h>.
	(__fxstatat64): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/fxstat.c: Do not include
	<bp-checks.h>.
	(__fxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c: Do not include
	<bp-checks.h>.
	(__fxstatat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/getresgid.c: Do not include
	<bp-checks.h>.
	(__getresgid): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/getresuid.c: Do not include
	<bp-checks.h>.
	(__getresuid): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/lxstat.c: Do not include
	<bp-checks.h>.
	(__lxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/msgctl.c: Do not include
	<bp-checks.h>.
	(__old_msgctl): Do not use CHECK_1.
	(__new_msgctl): Likewise.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c: Do not include
	<bp-checks.h>.
	(__new_setrlimit): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/i386/shmctl.c: Do not include
	<bp-checks.h>.
	(__old_shmctl): Do not use CHECK_1.
	(__new_shmctl): Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c: Do not include
	<bp-checks.h>.
	(__xstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/lxstat.c: Do not include <bp-checks.h>.
	(__lxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/lxstat64.c: Do not include
	<bp-checks.h>.
	(___lxstat64): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/msgctl.c: Do not include <bp-checks.h>.
	(__old_msgctl): Do not use CHECK_1.
	(__new_msgctl): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c: Do not include
	<bp-checks.h>.
	(__gettimeofday): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/ptrace.c: Do not include <bp-checks.h>.
	(ptrace) [__BOUNDED_POINTERS__]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/gettimeofday.c: Do not include
	<bp-checks.h>.
	(__gettimeofday): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/shmctl.c: Do not include <bp-checks.h>.
	(__old_shmctl): Do not use CHECK_1_NULL_OK.
	(__new_shmctl): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/sigtimedwait.c: Do not include
	<bp-checks.h>.
	(do_sigtimedwait): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c: Do not include
	<bp-checks.h>.
	(do_sigwaitinfo): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgctl.c: Do not include
	<bp-checks.h>.
	(msgctl): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/sparc/sparc64/shmctl.c: Do not include
	<bp-checks.h>.
	(shmctl): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/ustat.c: Do not include <bp-checks.h>.
	(ustat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/wordsize-64/fxstat.c: Do not include
	<bp-checks.h>.
	(__fxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/wordsize-64/fxstatat.c: Do not include
	<bp-checks.h>.
	(__fxstatat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/wordsize-64/lxstat.c: Do not include
	<bp-checks.h>.
	(__lxstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/wordsize-64/xstat.c: Do not include
	<bp-checks.h>.
	(__xstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/xstat.c: Do not include <bp-checks.h>.
	(__xstat): Do not use CHECK_1.
	* sysdeps/unix/sysv/linux/xstat64.c: Do not include <bp-checks.h>.
	(___xstat64): Do not use CHECK_1.

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (CHECK_BOUNDS_LOW): Remove all
	definitions.
	(CHECK_BOUNDS_HIGH): Likewise.
	* string/strcpy.c: Do not include <bp-checks.h>.
	(strcpy): Do not use CHECK_BOUNDS_LOW and CHECK_BOUNDS_HIGH.

2013-02-07  Roland McGrath  <roland@hack.frob.com>

	* nscd/nscd-client.h (__nscd_drop_map_ref):
	Add __attribute__ ((unused)).
	* nis/nss-nisplus.h (niserr2nss): Likewise.

	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu): Define it only
	under [!(USE_AS_STRCASESTR && STRCASESTR_NONASCII)].

	* csu/libc-tls.c (init_static_tls, init_slotinfo):
	Remove inline keyword.
	* include/rounding-mode.h (round_away): Likewise.
	* libio/wfileops.c (adjust_wide_data): Likewise.
	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu): Likewise.
	(__m128i_strloadu_tolower): Likewise.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c
	(__m128i_strloadu_tolower): Likewise.
	* time/mktime.c (ydhms_diff): Likewise.
	* locale/elem-hash.h (elem_hash): Likewise.
	* locale/setlocale.c (setdata): Likewise.
	* posix/regex_internal.h (re_string_char_size_at): Likewise.
	(re_string_wchar_at): Likewise.
	(bitset_not, bitset_merge, bitset_mask): Likewise.
	[!(__GNUC__ > 3)] (inline): Remove macro.
	* nscd/nscd-client.h (__nscd_drop_map_ref): Remove inline keyword.
	* elf/dl-deps.c (_dl_map_object_deps: preload): Likewise.
	* elf/tlsdeschtab.h (_dl_tlsdesc_resolve_early_return_p): Likewise.
	(_dl_tlsdesc_wake_up_held_fixups): Likewise.
	* string/memcmp.c (memcmp_bytes): Likewise.
	* locale/programs/locarchive.c (compute_hashval): Likewise.
	* sysdeps/ieee754/dbl-64/x2y2m1.c (mul_split): Likewise.
	* sysdeps/unix/sysv/linux/fips-private.h (fips_enabled_p): Likewise.
	* resolv/res_send.c (evNowTime, evCmpTime): Likewise.
	* nss/getent.c (print_rpc, print_protocols): Likewise.
	(print_passwd, print_group, print_aliases): Likewise.
	* nis/nss-nisplus.h (niserr2nss): Likewise.
	* nscd/connections.c (restart_p): Likewise.
	Change return type to bool.

2013-02-05  Roland McGrath  <roland@hack.frob.com>

	* Makeconfig (all-Depend-files): Add existing
	$(sorted-subdirs:=/Depend) files.
	(all-subdirs): Remove nss.
	* sysdeps/unix/inet/Subdirs: Add it here instead.
	* hesiod/Depend: New file.

	* elf/dl-hwcaps.c (_dl_important_hwcaps): Use a variable-length array
	instead of calling alloca.

	* io/lseek.c (__lseek): Rename to __libc_lseek.
	Define __lseek as an alias.

	* sysdeps/generic/malloc-sysdep.h: Include <stdbool.h> and <unistd.h>.

2013-02-04  Carlos O'Donell  <carlos@redhat.com>

	* stdlib/getenv.c (getenv): Assume __BIG_ENDIAN in the
	else clause and remove check for non-standard endianness.

2013-02-04  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-02-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-checks.h [__BOUNDED_POINTERS__]
	(__ubp_memchr): Remove prototype.
	[__BOUNDED_POINTERS__] (_CHECK_STRING): Remove macro.
	[__BOUNDED_POINTERS__] (CHECK_STRING): Likewise.
	[__BOUNDED_POINTERS__] (CHECK_STRING_NULL_OK): Likewise.
	[!__BOUNDED_POINTERS__] (CHECK_STRING): Likewise.
	* sysdeps/i386/memchr.S [!__BOUNDED_POINTERS__] (__ubp_memchr):
	Remove alias.
	* sysdeps/sparc/sparc32/memchr.S [!__BOUNDED_POINTERS__]
	(__ubp_memchr): Likewise.
	* sysdeps/sparc/sparc64/memchr.S [!__BOUNDED_POINTERS__]
	(__ubp_memchr): Likewise.
	* sysdeps/unix/sysv/linux/execve.c: Do not include <bp-checks.h>.
	(__execve) [__BOUNDED_POINTERS__]: Remove conditional code.
	(__execve) [!__BOUNDED_POINTERS__]: Make code unconditional.
	* sysdeps/unix/sysv/linux/fxstatat.c (__fxstatat): Do not use
	CHECK_STRING.
	* sysdeps/unix/sysv/linux/fxstatat64.c (__fxstatat64): Likewise.
	* sysdeps/unix/sysv/linux/getcwd.c: Do not include <bp-checks.h>.
	(__getcwd): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/chown.c: Do not include
	<bp-checks.h>.
	(__real_chown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/fchownat.c: Do not include
	<bp-checks.h>.
	(fchownat): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c (__fxstatat): Do not use
	CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/lchown.c: Do not include
	<bp-checks.h>.
	(__lchown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/i386/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c (__xstat): Likewise.
	* sysdeps/unix/sysv/linux/lxstat.c (__lxstat): Likewise.
	* sysdeps/unix/sysv/linux/lxstat64.c (___lxstat64): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/truncate64.c: Do not
	include <bp-checks.h>.
	(truncate64): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/s390/s390-32/chown.c: Do not include
	<bp-checks.h>.
	(__real_chown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/s390/s390-32/lchown.c: Do not include
	<bp-checks.h>.
	(__lchown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/sh/chown.c: Do not include
	<bp-checks.h>.
	(__chown): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/truncate64.c: Do not include
	<bp-checks.h>.
	(truncate64): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/wordsize-64/lxstat.c (__lxstat):
	Likewise.
	* sysdeps/unix/sysv/linux/xmknod.c: Do not include <bp-checks.h>.
	(__xmknod): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/xmknodat.c: Do not include
	<bp-checks.h>.
	(__xmknodat): Do not use CHECK_STRING.
	* sysdeps/unix/sysv/linux/xstat.c (__xstat): Likewise.
	* sysdeps/unix/sysv/linux/xstat64.c (___xstat64): Likewise.

2013-02-04  Andreas Schwab  <schwab@suse.de>

	[BZ #14142]
	* include/errno.h: Redefine errno only if !NOT_IN_libc || IN_LIB.
	* include/netdb.h: Likewise for h_errno.
	* elf/tst-stackguard1.c: Include <tls.h>.

2013-02-02  Jan Kratochvil  <jan.kratochvil@redhat.com>

	* elf/link.h (struct link_map): Extend the l_addr comment.
	* include/link.h (struct link_map): Likewise.

2013-02-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (BOUNDED_N): Remove all definitions.
	(BOUNDED_1): Remove macro.
	* debug/backtrace.c: Don't include <bp-checks.h>.
	(ADVANCE_STACK_FRAME): Don't use BOUNDED_1.
	(__backtrace): Likewise.
	* sysdeps/powerpc/powerpc32/backtrace.c: Don't include
	<bp-checks.h>.
	(__backtrace): Don't use BOUNDED_1.
	* sysdeps/powerpc/powerpc64/backtrace.c: Don't include
	<bp-checks.h>.
	(__backtrace): Don't use BOUNDED_1.
	* sysdeps/sparc/backtrace.c: Don't include <bp-checks.h>.
	(__backtrace): Don't use BOUNDED_1.
	* sysdeps/unix/sysv/linux/shmat.c: Don't include <bp-checks.h>.
	(shmat): Don't use BOUNDED_N.

2013-01-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13550]
	* sysdeps/generic/bp-start.h: Remove file.
	* csu/libc-start.c: Don't include <bp-start.h>.
	(LIBC_START_MAIN): Set up __environ directly instead of using
	INIT_ARGV_and_ENVIRON.
	* sysdeps/unix/sysv/linux/powerpc/libc-start.c: Don't include
	<bp-start.h>.

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (CHECK_IOCTL): Remove both
	definitions.
	(CHECK_FCNTL): Likewise.
	(CHECK_N_PAGES): Likewise.

	[BZ #13550]
	* sysdeps/generic/bp-checks.h (CHECK_SIGSET): Remove both
	definitions.
	(CHECK_SIGSET_NULL_OK): Likewise.
	* sysdeps/unix/sysv/linux/sigpending.c: Don't include
	<bp-checks.h>.
	(sigpending): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sigprocmask.c: Don't include
	<bp-checks.h>.
	(__sigprocmask): Don't use CHECK_SIGSET and CHECK_SIGSET_NULL_OK.
	* sysdeps/unix/sysv/linux/sigsuspend.c: Don't include
	<bp-checks.h>.
	(do_sigsuspend): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sigtimedwait.c (do_sigtimedwait): Don't
	use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sigwait.c: Don't include <bp-checks.h>.
	(do_sigwait): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sigwaitinfo.c (do_sigwaitinfo): Don't
	use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigpending.c: Don't
	include <bp-checks.h>.
	(sigpending): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigprocmask.c: Don't
	include <bp-checks.h>.
	(__sigprocmask): Don't use CHECK_SIGSET and CHECK_SIGSET_NULL_OK.
	* sysdeps/unix/sysv/linux/x86_64/sigpending.c: Don't include
	<bp-checks.h>.
	(sigpending): Don't use CHECK_SIGSET.
	* sysdeps/unix/sysv/linux/x86_64/sigprocmask.c: Don't include
	<bp-checks.h>.
	(__sigprocmask): Don't use CHECK_SIGSET and CHECK_SIGSET_NULL_OK.

	[BZ #13550]
	* sysdeps/generic/bp-semctl.h: Remove file.
	* sysdeps/unix/sysv/linux/i386/semctl.c: Don't include
	<bp-checks.h> and <bp-semctl.h>.
	(__old_semctl): Don't use CHECK_SEMCTL.
	(__new_semctl): Likewise.
	* sysdeps/unix/sysv/linux/semctl.c: Don't include <bp-checks.h>
	and <bp-semctl.h>.
	(__old_semctl): Don't use CHECK_SEMCTL.
	(__new_semctl): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/semctl.c: Don't include
	<bp-checks.h> and <bp-semctl.h>.
	(__old_semctl): Don't use CHECK_SEMCTL.
	(__new_semctl): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/semctl.c: Don't include
	<bp-checks.h> and <bp-semctl.h>.
	(semctl): Don't use CHECK_SEMCTL.

	[BZ #13550]
	* Makerules (elide-bp-thunks): Remove variable.
	(elide-routines.oS): Don't use $(elide-bp-thunks).
	(elide-routines.os): Likewise.
	(elide-routines.o): Likewise.
	(elide-routines.op): Likewise.
	(elide-routines.og): Likewise.
	(objects): Don't use $(bp-thunks).
	* sysdeps/unix/Makefile ($(common-objpfx)s-proto-bp.d): Do not
	include.
	(common-generated): Do not add s-proto-bp.d.
	* sysdeps/unix/make-syscalls.sh (ptr): Remove variable.
	(int): Likewise.
	(typ): Likewise.
	Do not generate makefile rules for bounded-pointer thunks.
	* sysdeps/generic/bp-thunks.h: Remove file.
	* sysdeps/unix/sysv/linux/i386/bp-thunks.h: Likewise.
	* sysdeps/unix/s-proto-bp.S: Likewise.

	[BZ #15062]
	* math/k_casinh.c (__kernel_casinh): Compute real and imaginary
	parts of result separately when argument is not close to line from
	-i to i and one part of argument is small.
	* math/k_casinhf.c (__kernel_casinhf): Likewise.
	* math/k_casinhl.c (__kernel_casinhl): Likewise.
	* math/libm-test.inc (cacos_test): Add more tests.
	(casin_test): Likewise.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-01-31  David S. Miller  <davem@davemloft.net>

	* po/de.po: Update from translation team.

2013-01-25  Maxim Kuvyrkov  <maxim.kuvyrkov@gmail.com>

	* time/tzfile.c: Include stdint.h for SIZE_MAX.

2013-01-25  Thomas Schwinge  <thomas@codesourcery.com>

	* configure.in (_AC_PROG_CC_C89): New definition.
	* configure: Regenerate.

	* configure.in (AC_PROG_CPP): New definition.
	* configure: Regenerate.

2013-01-23  Joseph Myers  <joseph@codesourcery.com>

	* debug/tst-backtrace.h: New file.
	* debug/tst-backtrace2.c: Include tst-backtrace.h.
	(ret): Remove variable.
	(x): Likewise.
	(FAIL): Remove macro.
	(NO_INLINE): Likewise.
	(fn1): Use match function instead of strstr.
	* debug/tst-backtrace3.c: Include tst-backtrace.h.
	(ret): Remove variable.
	(x): Likewise.
	(FAIL): Remove macro.
	(NO_INLINE): Likewise.
	(fn): Use match function instead of strstr.
	* debug/tst-backtrace4.c: Include tst-backtrace.h.
	(ret): Remove variable.
	(x): Likewise.
	(FAIL): Remove macro.
	(NO_INLINE): Likewise.
	(handle_signal): Use match function instead of strstr.
	* debug/tst-backtrace5.c: Include tst-backtrace.h.
	(ret): Remove variable.
	(x): Likewise.
	(FAIL): Remove macro.
	(NO_INLINE): Likewise.
	(handle_signal): Use match function instead of strstr.

2013-01-23  Roland McGrath  <roland@hack.frob.com>

	* misc/sys/cdefs.h (__glibc_unlikely, __glibc_likely): Fix whitespace.

2013-01-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/bits/atomic.h
	(__arch_compare_and_exchange_val_32_acq): Use %g0 as second
	argument of CAS if possible.
	* sysdeps/sparc/sparc64/bits/atomic.h
	(__arch_compare_and_exchange_val_32_acq): Likewise.
	(__arch_compare_and_exchange_val_64_acq): Likewise.

2013-01-23  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/unix/sysv/linux/ulimit.c: Moved to ...
	* sysdeps/posix/ulimit.c: ... this.
	Include <limits.h>.
	* sysdeps/unix/bsd/ulimit.c: Remove file.

2013-01-23  Adam Conrad  <adconrad@0c3.net>

	* elf/Makefile (LDFLAGS-tst-array2): Add $(no-as-needed).
	(LDFLAGS-tst-array5): Likewise.

2013-01-23  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15036]
	* bits/wchar.h (__WCHAR_MAX): Define based on __WCHAR_MAX__, or
	based on [L'\0' - 1 > 0] if [!__WCHAR_MAX__].
	(__WCHAR_MIN): Likewise, using __WCHAR_MIN__.
	* sysdeps/unix/sysv/linux/x86/bits/wchar.h: Remove.

2013-01-21  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/backtrace.c: New file.
	* sysdeps/sparc/sparc32/backtrace.h: New file.
	* sysdeps/sparc/sparc32/sparcv9/backtrace.h: New file.
	* sysdeps/sparc/sparc64/backtrace.h: New file.
	* sysdeps/sparc/sparc64/backtrace.c: Delete.
	* sysdeps/sparc/Makefile (CFLAGS-backtrace.c): Add
	-funwind-tables.

2013-01-21  Andreas Schwab  <schwab@suse.de>

	[BZ #15020]
	* posix/wordexp.c (exec_comm): Avoid busy loop when command has
	closed its stdout.

2013-01-20  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Don't include
	"mpa2.h".
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.

2013-01-18  Joseph Myers  <joseph@codesourcery.com>
	    Mark Mitchell  <mark@codesourcery.com>
	    Tom de Vries  <tom@codesourcery.com>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	* debug/tst-backtrace2.c: New file.
	* debug/tst-backtrace3.c: Likewise.
	* debug/tst-backtrace4.c: Likewise.
	* debug/tst-backtrace5.c: Likewise.
	* debug/Makefile (CFLAGS-tst-backtrace2.c): New variable.
	(CFLAGS-tst-backtrace3.c): Likewise.
	(CFLAGS-tst-backtrace4.c): Likewise.
	(CFLAGS-tst-backtrace5.c): Likewise.
	(LDFLAGS-tst-backtrace2): Likewise.
	(LDFLAGS-tst-backtrace3): Likewise.
	(LDFLAGS-tst-backtrace4): Likewise.
	(LDFLAGS-tst-backtrace5): Likewise.
	(tests): Add new tests tst-backtrace2, tst-backtrace3,
	tst-backtrace4 and tst-backtrace5.

2013-01-18  Anton Blanchard  <anton@samba.org>
	    Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/init-first.c: Rename
	__kernel_vdso_get_tbfreq to __kernel_get_tbfreq.
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c: Add parameter to
	INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK to specify return type.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	(INTERNAL_VSYSCALL_NCS): Change "=&r" in inline asm output regs list to
	"+r" and remove output regs list as redundant.  Add explicit inline
	asm to specify register of return val to work around compiler codegen
	bug.  Remove (int) cast on return value.  Add return type parameter to
	use in macro so that this macro does not truncate return value for
	64-bit values.
	(INTERNAL_VSYSCALL_NO_SYSCALL_FALLBACK): Add return type parameter and
	pass to INTERNAL_VSYSCALL_NCS.
	(INLINE_VSYSCALL): Add 'long int' as return type to
	INTERNAL_VSYSCALL_NCS macro invocation.
	(INTERNAL_VSYSCALL): Add 'long int' as return type to
	INTERNAL_VSYSCALL_NCS macro invocation.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.

2013-01-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14496]
	* sysdeps/i386/fpu/fenv_private.h (libc_feupdateenv_test_sse):
	Fix application of SIMD FP exception mask.

	* sysdeps/ieee754/dbl-64/mpa.h (__pow_mp): New function to get an
	mp_no from a power of two.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Remove
	__mpexp_twomm1.  Use __pow_mp.

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Remove unnecessary
	multiplication.

2013-01-17  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-01-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #15023]
	* include/complex.h: Condition contents on [!_COMPLEX_H].
	(__kernel_casinhf): New prototype.
	(__kernel_casinh): Likewise.
	(__kernel_casinhl): Likewise.
	* math/Makefile (libm_calls): Add k_casinh.
	* math/k_casinh.c: New file.
	* math/k_casinhf.c: Likewise.
	* math/k_casinhl.c: Likewise.
	* math/s_cacos.c (__cacos): Implement using __kernel_casinh for
	finite nonzero arguments.
	* math/s_cacosf.c (__cacosf): Implement using __kernel_casinhf for
	finite nonzero arguments.
	* math/s_cacosl.c (__cacosl): Implement using __kernel_casinhl for
	finite nonzero arguments.
	* math/s_casinh.c: Do not include <float.h>.
	(__casinh): Move code for finite nonzero arguments to k_casinh.c.
	* math/s_casinhf.c: Do not include <float.h>.
	(__casinhf): Move code for finite nonzero arguments to
	k_casinhf.c.
	* math/s_casinhl.c: Do not include <float.h>.
	[LDBL_MANT_DIG == 106] (LDBL_EPSILON): Do not undefine and
	redefine.
	(__casinhl): Move code for finite nonzero arguments to
	k_casinhl.c.
	* math/libm-test.inc (cacos_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-01-17  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/unix/sysv/linux/malloc-sysdep.h (HAVE_MREMAP): New define.
	* malloc/malloc.c: Include <unistd.h> and <malloc-sysdep.h>.
	[!HAVE_MREMAP]: Remove [defined linux] case.
	* malloc/arena.c: Do not include <malloc-sysdep.h>.

2013-01-17  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c: Fix header comment.

2013-01-17  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/elf.h (R_386_SIZE32): New relocation.
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Handle
	R_386_SIZE32.
	(elf_machine_rela): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Handle
	R_X86_64_SIZE64 and R_X86_64_SIZE32.

2013-01-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/bits/mathdef.h [_SOFT_FLOAT || __NO_FPRS__]
	(FP_FAST_FMA): Do not define.
	[_SOFT_FLOAT || __NO_FPRS__] (FP_FAST_FMAF): Likewise.
	* sysdeps/powerpc/fpu/bits/fenvinline.h [__GNUC__ && !_SOFT_FLOAT
	&& !__NO_MATH_INLINES]: Add [!__NO_FPRS__] condition.
	* sysdeps/powerpc/fpu/bits/mathinline.h [__GNUC__ &&
	!_SOFT_FLOAT]: Likewise.
	* sysdeps/powerpc/fpu/fpu_control.h [_SOFT_FLOAT || __NO_FPRS__]
	[_SOFT_FLOAT || __NO_FPRS__] (_FPU_RESERVED): Define with generic
	value.
	[_SOFT_FLOAT || __NO_FPRS__] (_FPU_DEFAULT): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (fpu_control_t): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (_FPU_GETCW): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (_FPU_SETCW): Likewise.
	[_SOFT_FLOAT || __NO_FPRS__] (__fpu_control): Likewise.
	[!_SOFT_FLOAT && !__NO_FPRS__]: Condition previous contents of
	file.

2013-01-16  Andreas Schwab  <schwab@suse.de>

	[BZ #14327]
	* include/stdlib.h (__mktemp): Add declaration.
	* misc/mktemp.c (__mktemp): Renamed from mktemp, add weak alias.
	* misc/Versions (GLIBC_PRIVATE): Add __mktemp.

2013-01-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/atnat.h: Remove constant value
	definitions.
	* sysdeps/ieee754/dbl-64/atnat2.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.c: Do not include mpa2.h.
	* sysdeps/ieee754/dbl-64/mpa.h: Move all constant value
	definitions here.
	* sysdeps/ieee754/dbl-64/mpa2.h: Remove.
	* sysdeps/ieee754/dbl-64/mpatan.h: Remove constant value
	definitions.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Remove ZERO
	and ONE.
	* sysdeps/ieee754/dbl-64/mpexp.c: Do not include mpexp.h.
	* sysdeps/ieee754/dbl-64/mpexp.h: Remove.
	* sysdeps/ieee754/dbl-64/mpsqrt.h: Remove constant value
	definitions.
	* sysdeps/ieee754/dbl-64/mptan.c (__mptan): Remove MONE.
	* sysdeps/ieee754/dbl-64/ulog.h: Remove constant value
	definitions.
	* sysdeps/ieee754/dbl-64/utan.h: Likewise.

	* sysdeps/ieee754/dbl-64/mpa2.h: Fix the value of TWO.

2013-01-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add vis3
	trunc{,f} to libm-sysdep_routes.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_trunc-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_trunc.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_truncf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_truncf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_trunc.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_truncf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_trunc-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_trunc.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_truncf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_truncf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_trunc.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_truncf.S: New file.

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add vis3
	nearbyint{,f} to libm-sysdep_routes.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyint-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyint.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyintf-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_nearbyintf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_nearbyint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_nearbyintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_nearbyint-vis3.S: New
	file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_nearbyint.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_nearbyintf-vis3.S: New
	file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_nearbyintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_nearbyint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_nearbyintf.S: New file.

	* sysdeps/ieee754/dbl-64/s_nearbyint.c (__nearbyint): Use
	libc_feholdexcept and libc_fesetenv.

2013-01-15  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/scsi/sg.h: Include stddef.h.

2013-01-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc-ifunc.h (SPARC_ASM_IFUNC2): New macro.
	(SPARC_ASM_VIS2_IFUNC): Likewise.
	(SPARC_ASM_VIS3_VIS2_IFUNC): Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil-vis3.S: Make
	use of 'siam' instruction.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf-vis3.S:
	Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis3.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis3.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil-vis2.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf-vis2.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis2.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf-vis2.S: New
	file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis2.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis2.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis2.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis2.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: Hook in
	new VIS2 routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf.S:
	Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add new VIS2
	routines to libm-sysdep_routines.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Likewise.

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add vis3
	fdim/fdimf to libm-sysdep_routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdim.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdimf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fdimf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fdim.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fdimf.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_fdim.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_fdimf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fdim.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fdimf.S: New file.

2013-01-14  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Add a local variable
	to optimize copies.

	* sysdeps/ieee754/dbl-64/mpa.c: Fix formatting.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__inv): Remove
	local variable MPTWO.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__inv):
	Likewise.

2013-01-13  Mike Frysinger  <vapier@gentoo.org>

	* manual/pattern.texi (Flags for Globbing): Move GLOB_NOSORT after
	GLOB_NOESCAPE.

2013-01-13  Mike Frysinger  <vapier@gentoo.org>

	* manual/pattern.texi (Flags for Globbing): Highlight GNU extensions.

2013-01-13  Mike Frysinger  <vapier@gentoo.org>

	* manual/pattern.texi (glob_t): Document gl_flags.
	(glob64_t): Likewise.

2013-01-11  David S. Miller  <davem@davemloft.net>

	* math/Makefile (gmp-objs): Use $(gmp-sysdep_routines).
	* sysdeps/sparc/sparc64/multiarch/Makefile [$(subdir) = math]
	(gmp-sysdep_routines): New variable.  Add VIS3 optimized GMP routines.
	* sysdeps/sparc/sparc64/multiarch/add_n-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/add_n.S: New file.
	* sysdeps/sparc/sparc64/multiarch/addmul_1-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/addmul_1.S: New file.
	* sysdeps/sparc/sparc64/multiarch/mul_1-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/mul_1.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sub_n-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sub_n.S: New file.
	* sysdeps/sparc/sparc64/multiarch/submul_1-vis3.S: New file.
	* sysdeps/sparc/sparc64/multiarch/submul_1.S: New file.

	* sysdeps/sparc/sparc32/sparcv9/mul_1.S: Properly optimize for 32-bit
	sparc V9 rather than using V8 code.
	* sysdeps/sparc/sparc32/sparcv9/addmul_1.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/submul_1.S: Likewise.

	* sysdeps/sparc/sparc32/sparcv9/fpu/unix/sysv/linux/multiarch/Implies:
	Move to...
	* sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/fpu/multiarch/Implies:
	Here.

2013-01-11  Roland McGrath  <roland@hack.frob.com>

	[BZ #14941]
	* configure.in (sysnames): Use $multi_arch_d in setting up $mach list,
	not in the main loop.
	* configure: Regenerated.

2013-01-11  Joseph Myers  <joseph@codesourcery.com>

	* include/features.h (__GLIBC_HAVE_LONG_LONG): Remove.
	* bits/byteswap.h [__GLIBC_HAVE_LONG_LONG]: Change #elif condition
	to just #else.
	* bits/types.h [__GLIBC_HAVE_LONG_LONG]: Likewise.  Remove
	[!__GLIBC_HAVE_LONG_LONG] case.
	* posix/sys/types.h [__GLIBC_HAVE_LONG_LONG]: Change #elif
	condition to just #else.
	* stdlib/stdlib.h [__USE_ISOC99 || (__GLIBC_HAVE_LONG_LONG &&
	__USE_MISC)]: Change all uses to [__USE_ISOC99 || __USE_MISC].
	[__GLIBC_HAVE_LONG_LONG && __USE_BSD]: Change to [__USE_BSD].
	* string/byteswap.h [__GLIBC_HAVE_LONG_LONG]: Make code
	unconditional.
	* string/endian.h [__GLIBC_HAVE_LONG_LONG]: Likewise.
	* sysdeps/s390/bits/byteswap.h [__GLIBC_HAVE_LONG_LONG]: Change
	#elif condition to just #else.
	* sysdeps/unix/sysv/linux/sys/sysmacros.h
	[__GLIBC_HAVE_LONG_LONG]: Make code unconditional.
	* sysdeps/x86/bits/byteswap.h [__GLIBC_HAVE_LONG_LONG]: Change
	#elif condition to just #else.

2013-01-11  Steve Ellcey  <sellcey@mips.com>

	* elf/elf.h (EF_MIPS_ARCH_32): Fix value.
	(EF_MIPS_ARCH_64): Fix value.
	(EF_MIPS_ARCH_32R2): New.
	(EF_MIPS_ARCH_64R2): New.

2013-01-11  H.J. Lu  <hongjiu.lu@intel.com>

	* Makeconfig (+link-pie-before-libc): New.
	(+link-pie-after-libc): Likewise.
	(+link-pie-tests): Likewise.
	(+link-pie): Rewritten.
	(link-before-libc): Remove $(config-LDFLAGS).
	(+link): Add $(rtld-LDFLAGS) after $(+link-before-libc).
	(+link-tests): Add $(rtld-tests-LDFLAGS) after $(+link-before-libc).
	(config-LDFLAGS): Renamed to ...
	(rtld-LDFLAGS): This.
	(rtld-tests-LDFLAGS): New macro.
	(link-libc-rpath-link): Likewise.
	(link-libc-tests-rpath-link): Likewise.
	(link-libc-before-gnulib): Remove -Wl,-rpath-link=$(rpath-link).
	(link-libc): Prepand $(link-libc-rpath-link).
	(link-libc-tests): Prepand $(link-libc-tests-rpath-link).
	(test-program-prefix): New macro.
	(test-via-rtld-prefix): Likewise.
	(test-program-cmd): Likewise.
	(host-test-program-cmd): Likewise.
	* Makefile ($(common-objpfx)testrun.sh): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* Makerules ($(LINK.o)): Replace $(config-LDFLAGS) with
	$(rtld-LDFLAGS).
	($(common-objpfx)shlib.lds): Likewise.
	(build-module-helper): Likewise.
	($(common-objpfx)format.lds): Likewise.
	* Rules (binaries-pie-tests): New.
	(binaries-pie-notests): Likewise.
	(binaries-pie): Rewritten.
	($(addprefix $(objpfx),$(binaries-pie))): Renamed to ...
	($(addprefix $(objpfx),$(binaries-pie-notests))): This.
	($(addprefix $(objpfx),$(binaries-pie-tests))): New.
	(make-test-out): Replace $(host-built-program-cmd) with
	$(host-test-program-cmd).
	* config.make.in (build-hardcoded-path-in-tests): New variable.
	* configure.in (--enable-hardcoded-path-in-tests): New configure
	option.
	(hardcoded_path_in_tests): New AC_SUBST.
	* configure: Regenerated.
	* catgets/Makefile ($(objpfx)test-gencat.out): Replace
	$(built-program-cmd) with $(test-program-cmd).
	* catgets/test-gencat.sh (run_program_cmd): Renamed to ...
	(test_program_cmd): This.
	* elf/Makefile ($(objpfx)order.out): Run test with
	$(test-program-prefix).
	($(objpfx)order2.out): Likewise.
	($(objpfx)tst-initorder.out): Likewise.
	($(objpfx)tst-initorder2.out): Likewise.
	($(objpfx)tst-array1.out): Replace $(built-program-cmd) with
	$(test-program-cmd).
	($(objpfx)tst-array1-static.out): Likewise.
	($(objpfx)tst-array2.out): Likewise.
	($(objpfx)tst-array3.out): Likewise.
	($(objpfx)tst-array4.out): Likewise.
	($(objpfx)tst-array5.out): Likewise.
	($(objpfx)tst-array5-static.out): Likewise.
	(tst-stackguard1-ARGS): Replace $(built-program-cmd) with
	$(test-program-cmd).
	* grp/Makefile ($(objpfx)tst_fgetgrent.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* grp/tst_fgetgrent.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* iconvdata/Makefile ($(objpfx)tst-tables.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* iconvdata/tst-table.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* iconvdata/tst-tables.sh: Likewise.
	* intl/Makefile ($(objpfx)tst-gettext.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	($(objpfx)tst-translit.out): Likewise.
	($(objpfx)tst-gettext2.out): Likewise.
	($(objpfx)tst-gettext4.out): Likewise.
	($(objpfx)tst-gettext6.out): Likewise.
	* intl/tst-gettext.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* intl/tst-gettext2.sh: Likewise.
	* intl/tst-gettext4.sh  Likewise.
	* intl/tst-gettext6.sh: Likewise.
	* intl/tst-translit.sh: Likewise.
	* io/Makefile ($(objpfx)ftwtest.out): Replace $(run-program-cmd)
	with $(test-program-cmd).
	* libio/Makefile ($(objpfx)test-freopen.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* libio/test-freopen.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* malloc/Makefile ($(objpfx)tst-mtrace.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* malloc/tst-mtrace.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* manual/install.texi: Document --enable-hardcoded-path-in-tests.
	* posix/Makefile ($(objpfx)globtest.out): Replace
	$(run-via-rtld-prefix) and $(test-wrapper) with
	$(test-program-prefix) and $(test-via-rtld-prefix).
	($(objpfx)wordexp-tst.out): Replace $(run-program-prefix) with
	$(test-program-prefix).
	(tst-exec-ARGS): Replace $(host-built-program-cmd) with
	$(host-test-program-cmd).
	(tst-spawn-ARGS): Likewise.
	($(objpfx)tst-rxspencer-mem): Replace $(run-program-prefix) with
	$(test-program-prefix).
	* posix/globtest.sh (un_via_rtld_prefix): Renamed to ...
	(test_via_rtld_prefix): This.
	(test_wrapper): Renamed to ...
	(test_program_prefix): This.
	(run_program_prefix): Replaced by test_program_prefix.
	* posix/wordexp-tst.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* rt/Makefile (tst-mqueue7-ARGS): Replace $(host-built-program-cmd)
	with $(host-test-program-cmd).
	* stdio-common/Makefile ($(objpfx)tst-unbputc.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	($(objpfx)tst-printf.out): Likewise.
	($(objpfx)tst-setvbuf1.out): Replace $(built-program-cmd) with
	$(test-program-cmd).
	* stdio-common/tst-printf.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* stdio-common/tst-unbputc.sh: Likewise.
	* stdlib/Makefile ($(objpfx)tst-fmtmsg.out): Replace
	$(run-program-prefix) with $(test-program-prefix).
	* stdlib/tst-fmtmsg.sh (run_program_prefix): Renamed to ...
	(test_program_prefix): This.
	* string/Makefile ($(objpfx)tst-svc.out):  Replace
	$(built-program-cmd) with $(test-program-cmd).

2013-01-11  Andreas Jaeger  <aj@suse.de>

	[BZ #15003]
	* sysdeps/unix/sysv/linux/bits/socket.h (MSG_FASTOPEN): New
	value. Sync with Linux 3.7.

2013-01-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/mul_1.S: Revert previous changes.
	* sysdeps/sparc/sparc32/sparcv9/addmul_1.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/submul_1.S: Likewise.

2013-01-10  Roland McGrath  <roland@hack.frob.com>

	* configure.in (sysnames): Drop use of $m0sub and $msub, which are
	never set.
	* configure: Regenerated.

2013-01-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/mul_1.S: Properly optimize for 32-bit
	sparc V9 rather than using V8 code.
	* sysdeps/sparc/sparc32/sparcv9/addmul_1.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/submul_1.S: Likewise.

2013-01-10  Roland McGrath  <roland@hack.frob.com>

	* elf/elf.h (DT_SPARC_REGISTER, DT_SPARC_NUM): Fix whitespace.
	(EF_MIPS_NOREORDER, EF_MIPS_PIC, EF_MIPS_CPIC, EF_MIPS_XGOT): Likewise.
	(EF_MIPS_64BIT_WHIRL, EF_MIPS_ABI2, EF_MIPS_ABI_ON32): Likewise.
	(EF_MIPS_ARCH, EF_MIPS_ARCH_1, EF_MIPS_ARCH_2): Likewise.
	(EF_MIPS_ARCH_3, EF_MIPS_ARCH_4, EF_MIPS_ARCH_5): Likewise.
	(EF_MIPS_ARCH_32, EF_MIPS_ARCH_64): Likewise.
	(E_MIPS_ARCH_1): Define in terms of EF_MIPS_ARCH_* counterpart.
	(E_MIPS_ARCH_2, E_MIPS_ARCH_3, E_MIPS_ARCH_4, E_MIPS_ARCH_5): Likewise.
	(E_MIPS_ARCH_32, E_MIPS_ARCH_64): Likewise.
	(SHN_MIPS_ACOMMON, SHN_MIPS_TEXT, SHN_MIPS_DATA): Fix whitespace.
	(SHN_MIPS_SCOMMON, SHN_MIPS_SUNDEFINED): Likewise.
	(SHT_MIPS_LIBLIST, SHT_MIPS_MSYM, SHT_MIPS_CONFLICT): Likewise.
	(SHT_MIPS_GPTAB, SHT_MIPS_UCODE, SHT_MIPS_DEBUG): Likewise.
	(SHT_MIPS_REGINFO, SHT_MIPS_PACKAGE, SHT_MIPS_PACKSYM): Likewise.
	(SHT_MIPS_RELD, SHT_MIPS_IFACE, SHT_MIPS_CONTENT): Likewise.
	(SHT_MIPS_OPTIONS, SHT_MIPS_SHDR, SHT_MIPS_FDESC): Likewise.
	(SHT_MIPS_EXTSYM, SHT_MIPS_DENSE, SHT_MIPS_PDESC): Likewise.
	(SHT_MIPS_LOCSYM, SHT_MIPS_AUXSYM, SHT_MIPS_OPTSYM): Likewise.
	(SHT_MIPS_LOCSTR, SHT_MIPS_LINE, SHT_MIPS_RFDESC): Likewise.
	(SHT_MIPS_DELTASYM, SHT_MIPS_DELTAINST, SHT_MIPS_DELTACLASS): Likewise.
	(SHT_MIPS_DELTADECL, SHT_MIPS_SYMBOL_LIB, SHT_MIPS_EVENTS): Likewise.
	(SHT_MIPS_TRANSLATE, SHT_MIPS_PIXIE, SHT_MIPS_XLATE): Likewise.
	(SHT_MIPS_XLATE_DEBUG, SHT_MIPS_WHIRL, SHT_MIPS_EH_REGION): Likewise.
	(SHT_MIPS_XLATE_OLD, SHT_MIPS_PDR_EXCEPTION): Likewise.
	(SHF_MIPS_GPREL, SHF_MIPS_MERGE, SHF_MIPS_ADDR): Likewise.
	(SHF_MIPS_STRINGS, SHF_MIPS_NOSTRIP, SHF_MIPS_LOCAL): Likewise.
	(SHF_MIPS_NAMES, SHF_MIPS_NODUPE): Likewise.

2013-01-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-01-10  H.J. Lu  <hongjiu.lu@intel.com>

	* posix/Makefile (tests-static): New variable.
	(tests): Add $(tests-static).
	(tst-exec-static-ARGS): New variable.
	(tst-spawn-static-ARGS): Likewise.
	* posix/tst-exec-static.c: New file.
	* posix/tst-spawn-static.c: Likewise.
	* posix/tst-exec.c: Support run directly.
	* posix/tst-spawn.c: Likewise.

2013-01-10  Joseph Myers  <joseph@codesourcery.com>

	* elf/link.h (struct dl_phdr_info): Use __extension__ with long
	long.
	* math/bits/mathcalls.h (llrint): Likewise.
	(llround): Likewise.
	* stdlib/stdlib.h (struct drand48_data): Likewise.
	* sysdeps/generic/inttypes.h (imaxdiv_t): Likewise.
	* sysdeps/s390/bits/byteswap.h (__bswap_64): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ipc.h (struct ipc_perm):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h (struct fpu):
	Likewise.
	* sysdeps/unix/sysv/linux/x86/sys/procfs.h [__x86_64__]
	(elf_greg_t): Likewise.
	* sysdeps/x86/bits/setjmp.h [__x86_64__ && __WORDSIZE != 64]
	(__jmp_buf): Likewise.
	* sysdeps/x86/fpu/bits/mathinline.h (llrintf): Likewise, for all
	definitions.
	(llrint): Likewise, for all definitions.
	(llrintl): Likewise.

	* string/string.h [__USE_BSD && __USE_GNU && __GNUC__] (ffsll):
	Remove [__GNUC__] condition.
	* wcsmbs/wchar.h [__USE_ISOC99 || (__GNUC__ && __USE_GNU)]: Change
	condition to just [__USE_ISOC99].
	[__GNUC__ && __USE_GNU]: Change condition to just [__USE_GNU].

2013-01-10  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14200]
	* sysdeps/unix/sysv/linux/x86/bits/environments.h
	(_POSIX_V7_ILP32_OFF32): Defined as 1 only if __x86_64__ isn't
	defined.
	(_POSIX_V6_ILP32_OFF32): Likewise.
	(_XBS5_ILP32_OFF32): Likewise.
	(__ILP32_OFFBIG_CFLAGS): Defined as "-mx32" for x32.
	(__ILP32_OFFBIG_LDFLAGS): Likewise.

2013-01-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpexp.c: Fix formatting.

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): New array of
	doubles __mpexp_twomm1.  Adjust usage.
	* sysdeps/ieee754/dbl-64/mpexp.h (__mpexp_twomm1):
	Remove.

2013-01-10  Andreas Schwab  <schwab@suse.de>

	[BZ #14964]
	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (FALLOC_FL_KEEP_SIZE)
	(FALLOC_FL_PUNCH_HOLE) [__USE_GNU]: New macros.

2013-01-09  David S. Miller  <davem@davemloft.net>

	[BZ #15003]
	* sysdeps/gnu/netinet/tcp.h (TCP_COOKIE_TRANSACTIONS)
	(TCP_THIN_LINEAR_TIMEOUTS, TCP_THIN_DUPACK, TCP_USER_TIMEOUT)
	(TCP_REPAIR, TCP_REPAIR_QUEUE, TCP_QUEUE_SEQ, TCP_REPAIR_OPTIONS)
	(TCP_FASTOPEN): Define.
	(tcp_repair_opt): New structure.
	(TCP_NO_QUEUE, TCP_RECV_QUEUE, TCP_SEND_QUEUE, TCP_QUEUES_NR): New
	enum values.
	(TCP_COOKIE_MIN, TCP_COOKIE_MAX, TCP_COOKIE_PAIR_SIZE)
	(TCP_COOKIE_IN_ALWAYS, TCP_COOKIE_OUT_NEVER, TCP_S_DATA_IN)
	(TCP_S_DATA_OUT, TCP_MSS_DEFAULT, TCP_MSS_DESIRED): Define.
	(tcp_cookie_transactions): New structure.

2013-01-09  Anton Blanchard  <anton@samba.org>

	* sysdeps/unix/sysv/linux/powerpc/sched_getcpu.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/Versions: Add __vdso_getcpu.
	* sysdeps/unix/sysv/linux/powerpc/bits/libc-vdso.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c: Likewise.

2013-01-09  Joseph Myers  <joseph@codesourcery.com>

	* include/features.h (__USE_ANSI): Remove.

2013-01-09  Roland McGrath  <roland@hack.frob.com>

	* posix/Makefile (others): Depend on $(objpfx)getconf.speclist.

	* misc/error.c (error_tail: ALLOCA_LIMIT): Remove unused macro.

2013-01-09  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/fpu/libm-test-ulps: Update.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/dbl-64/mpa.c (mcr): Reword comment.
	(__acr): Likewise.
	(__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (mcr): Likewise.
	(__acr): Likewise.
	(__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (mcr): Likewise.
	(__acr): Likewise.
	(__cpy): Likewise.
	(norm): Likewise.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__dbl_mp): Likewise.
	(add_magnitudes): Likewise.
	(sub_magnitudes): Likewise.
	(__add): Likewise.
	(__sub): Likewise.
	(__mul): Likewise.
	(__inv): Likewise.
	(__dvd): Likewise.

2013-01-08  Joseph Myers  <joseph@codesourcery.com>

	* io/sys/stat.h [__GNUC__ && __GNUC__ >= 2 &&
	__USE_EXTERN_INLINES]: Change condition to [__USE_EXTERN_INLINES].
	* sysdeps/unix/sysv/linux/sys/sysmacros.h [__GNUC__ && __GNUC__ >=
	2 && __USE_EXTERN_INLINES]: Likewise.

2013-01-08  Andreas Jaeger  <aj@suse.de>

	[BZ #14985]
	* sysdeps/unix/sysv/linux/sparc/bits/epoll.h (EPOLL_NONBLOCK):
	Remove.
	* sysdeps/unix/sysv/linux/bits/epoll.h (EPOLL_NONBLOCK): Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/epoll.h (EPOLL_NONBLOCK): Likewise.

2013-01-07  Anton Blanchard  <anton@samba.org>

	* sysdeps/powerpc/fpu/feholdexcpt.c: Fixed spelling errors.
	* sysdeps/powerpc/fpu/feupdateenv.c: Likewise.
	* sysdeps/powerpc/fpu/math_ldbl.h: Likewise.
	* sysdeps/powerpc/powerpc32/bits/atomic.h: Likewise.
	* sysdeps/powerpc/powerpc32/cell/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc32/dl-start.S: Likewise.
	* sysdeps/powerpc/powerpc32/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/w_sqrtf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrt.S: Likewise.
	* sysdeps/powerpc/powerpc32/power5/fpu/w_sqrtf.S: Likewise.
	* sysdeps/powerpc/powerpc32/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memchr.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/bits/atomic.h: Likewise.
	* sysdeps/powerpc/powerpc64/cell/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_ceill.S: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintl.S: Likewise.
	* sysdeps/powerpc/powerpc64/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc64/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power6/memcpy.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memcmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/strncmp.S: Likewise.

2013-01-07  Joseph Myers  <joseph@codesourcery.com>

	* malloc/malloc.h (__MALLOC_P): Remove all definitions.
	(__MALLOC_PMT): Likewise.
	[__GNUC__] (__MALLOC_HOOK_VOLATILE): Make not conditional on
	[__GNUC__], only on [_LIBC].
	[__GNUC__] (__MALLOC_DEPRECATED): Likewise.
	[!__GNUC__] (__MALLOC_HOOK_VOLATILE): Remove definition.
	[!__GNUC__] (__MALLOC_DEPRECATED): Likewise.
	* malloc/malloc.c (malloc_hook_ini): Do not use __MALLOC_P in
	forward declaration.
	(realloc_hook_ini): Likewise.
	(memalign_hook_ini): Likewise.
	(__libc_memalign): Do not use __MALLOC_PMT in variable
	declaration.
	(__libc_valloc): Likewise.
	(__libc_pvalloc): Likewise.
	(__libc_calloc): Likewise.
	(__posix_memalign): Likewise.

	[BZ #14996]
	* math/s_casinh.c: Include <float.h>.
	(__casinh): Do not do computation with squaring and square root
	for large arguments.
	* math/s_casinhf.c: Include <float.h>.
	(__casinhf): Do not do computation with squaring and square root
	for large arguments.
	* math/s_casinhl.c: Include <float.h>.
	[LDBL_MANT_DIG == 106] (LDBL_EPSILON): Undefine and redefine.
	(__casinhl): Do not do computation with squaring and square root
	for large arguments.
	* math/libm-test.inc (casin_test): Add more tests.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-01-04  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/cacheinfo.c (__x86_64_data_cache_size): Removed.
	(__x86_64_raw_data_cache_size): Likewise.
	(__x86_64_data_cache_size_half): Likewise.
	(__x86_64_raw_data_cache_size_half): Likewise.
	(__x86_64_shared_cache_size): Likewise.
	(__x86_64_raw_shared_cache_size): Likewise.
	(__x86_64_shared_cache_size_half): Likewise.
	(__x86_64_raw_shared_cache_size_half): Likewise.
	* sysdeps/x86_64/cacheinfo.c (__x86_64_data_cache_size): Renamed
	to ...
	(__x86_data_cache_size): This.
	(__x86_64_raw_data_cache_size): Renamed to ...
	(__x86_raw_data_cache_size): This.
	(__x86_64_data_cache_size_half): Renamed to ...
	(__x86_data_cache_size_half): This.
	(__x86_64_raw_data_cache_size_half): Renamed to ...
	(__x86_raw_data_cache_size_half): This.
	(__x86_64_shared_cache_size): Renamed to ...
	(__x86_shared_cache_size): This.
	(__x86_64_raw_shared_cache_size): Renamed to ...
	(__x86_raw_shared_cache_size): This.
	(__x86_64_shared_cache_size_half): Renamed to ...
	(__x86_shared_cache_size_half): This.
	(__x86_64_raw_shared_cache_size_half): Renamed to ...
	(__x86_raw_shared_cache_size_half): This.
	* sysdeps/x86_64/memcpy.S: Updated.
	* sysdeps/x86_64/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Likewise.

2013-01-04  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2013-01-04  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/test-powerpc-snan.c (_GNU_SOURCE): Define as
	1 to avoid redefinition warning.
	(__USE_GNU): Don't define.
	(init_signaling_nan): Protoize.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2013-01-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c: Remove commented code.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (__cr): Remove.
	(__cpymn): Likewise.
	(norm): Remove commented code.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__inv): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (__cr): Remove.
	(__cpymn): Likewise.
	(norm): Remove commented code.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__inv): Likewise.

	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c (mpone): Define
	mp_no value for 1.0 and 2.0.
	(norm): Use RADIXI instead of radixi.d.
	(denorm): Likewise.
	(__mul): Use 0.0 instead of zero.d.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c (mpone): Define
	mp_no value for 1.0 and 2.0.
	(norm): Use RADIXI instead of radixi.d.
	(denorm): Likewise.
	(__mul): Use 0.0 instead of zero.d.

2013-01-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14994]
	* math/s_casinh.c (__casinh): Reduce finite argument to first
	quadrant then set signs of results at the end.
	* math/s_casinhf.c (__casinhf): Likewise.
	* math/s_casinhl.c (__casinhl): Likewise.
	* math/libm-test.inc (casin_test): Add more tests.
	(casinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2013-01-04  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.h: Fix code formatting.

	* sysdeps/ieee754/dbl-64/mpa.h: Clean up comment for MP_NO.

	* sysdeps/ieee754/dbl-64/mpa.c(norm): Remove commented
	declarations.
	(denorm): Likewise.
	(__mp_dbl): Likewise.
	(__inv): Likewise.

	* sysdeps/ieee754/dbl-64/mpa.h: Remove commented declarations
	and adjust the header comment.

	* sysdeps/ieee754/dbl-64/mpa.h (__mpexp): Remove unnecessary
	variable name from declaration.

2013-01-03  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Initialize COMMON_CPUID_INDEX_7 element.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_RTM): New macro.
	(CPUID_RTM): Likewise.
	(HAS_RTM): Likewise.
	(COMMON_CPUID_INDEX_7): New enum.

2013-01-03  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14981]
	* malloc/mtrace.c (tr_reallochook): If realloc returns NULL when
	size is zero, record memory as freed.

2013-01-03  Andreas Jaeger  <aj@suse.de>

	* po/ia.po: Add new Interlingua translation.

2012-01-03  Allan McRae  <allan@archlinux.org>

	* locale/programs/localedef.c: Fix description of '--posix' flag.

2013-01-02  Joseph Myers  <joseph@codesourcery.com>

	* NEWS: Update dates in second copyright notice.
	* README: Update copyright dates in example.
	* manual/libc.texinfo: Update copyright dates.
	* scripts/test-installation.pl: Update copyright date in --version
	output.

	* hurd/ctty-input.c: Fix copyright notice formatting.
	* hurd/ctty-output.c: Likewise.
	* hurd/dtable.c: Likewise.
	* hurd/hurd-raise.c: Likewise.
	* hurd/hurdprio.c: Likewise.
	* hurd/msgportdemux.c: Likewise.
	* misc/sys/file.h: Likewise.
	* misc/sys/ioctl.h: Likewise.
	* sysdeps/gnu/netinet/ip_icmp.h: Likewise.
	* sysdeps/mach/hurd/chdir.c: Likewise.
	* sysdeps/mach/hurd/fchdir.c: Likewise.
	* sysdeps/mach/hurd/rename.c: Likewise.
	* sysdeps/mach/hurd/rmdir.c: Likewise.
	* sysdeps/mach/hurd/seekdir.c: Likewise.
	* sysdeps/mach/hurd/setsid.c: Likewise.
	* sysdeps/posix/wait3.c: Likewise.

	* All files with FSF copyright notices: Update copyright dates
	using scripts/update-copyrights.
	* intl/plural.c: Regenerated.
	* locale/programs/charmap-kw.h: Likewise.
	* locale/programs/locfile-kw.h: Likewise.

2013-01-02  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpexp.h (__mpexp_twomm1): Fix first
	four values.

	* sysdeps/ieee754/dbl-64/mpa.c (__mul): Split mantissa
	calculation loop and add branch prediction.

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Add assert to
	check access beyond bounds of m1np.

	* sysdeps/ieee754/dbl-64/mpa.c [! NO__CONST]: New constant
	MPTWO.
	(__inv): Remove local variable MPTWO to use the global
	constant.
	* sysdeps/ieee754/dbl-64/mpa.h: Declare MPTWO.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Remove local
	variable MPTWO.
	* sysdeps/ieee754/dbl-64/mpsqrt.c (__mpsqrt): Make MPHALF and
	MP3HALFS static const.

2013-01-01  David S. Miller  <davem@davemloft.net>

	* po/ca.po: Update from translation team.

2013-01-01  Joseph Myers  <joseph@codesourcery.com>

	* scripts/update-copyrights: New file.
	* Makeconfig: Reformat copyright notice.
	* ctype/ctype.h: Likewise.
	* debug/swprintf_chk.c: Likewise.
	* elf/dl-cache.c: Likewise.
	* elf/dl-debug.c: Likewise.
	* elf/dl-object.c: Likewise.
	* grp/initgroups.c: Likewise.
	* hurd/Makefile: Likewise.
	* hurd/hurd/signal.h: Likewise.
	* hurd/hurdfault.c: Likewise.
	* hurd/hurdioctl.c: Likewise.
	* hurd/hurdlookup.c: Likewise.
	* hurd/intr-msg.c: Likewise.
	* iconv/gconv_open.c: Likewise.
	* libio/swprintf.c: Likewise.
	* locale/lc-ctype.c: Likewise.
	* locale/nl_langinfo.c: Likewise.
	* mach/Machrules: Likewise.
	* mach/Makefile: Likewise.
	* malloc/obstack.h: Likewise.
	* manual/Makefile: Likewise.
	* manual/tsort.awk: Likewise.
	* misc/bits/stab.def: Likewise.
	* nis/nis_print_group_entry.c: Likewise.
	* nis/nis_table.c: Likewise.
	* nis/nss_compat/compat-pwd.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.
	* po/Makefile: Likewise.
	* posix/fnmatch.c: Likewise.
	* posix/regex.h: Likewise.
	* resolv/Makefile: Likewise.
	* resolv/nss_dns/dns-network.c: Likewise.
	* resolv/res_hconf.c: Likewise.
	* scripts/gen-sorted.awk: Likewise.
	* soft-fp/soft-fp.h: Likewise.
	* stdio-common/printf.h: Likewise.
	* stdlib/monetary.h: Likewise.
	* stdlib/random.c: Likewise.
	* stdlib/random_r.c: Likewise.
	* sysdeps/generic/Makefile: Likewise.
	* sysdeps/gnu/Makefile: Likewise.
	* sysdeps/ieee754/dbl-64/doasin.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mplog.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/mptan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowpow.c: Likewise.
	* sysdeps/ieee754/ldbl-128/ldbl2mpn.c: Likewise.
	* sysdeps/ieee754/ldbl-128/mpn2ldbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/mpn2ldbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/printf_fphex.c: Likewise.
	* sysdeps/mach/hurd/errnos.awk: Likewise.
	* sysdeps/mach/hurd/fork.c: Likewise.
	* sysdeps/mach/hurd/getcwd.c: Likewise.
	* sysdeps/mach/hurd/i386/trampoline.c: Likewise.
	* sysdeps/mach/hurd/mmap.c: Likewise.
	* sysdeps/mach/hurd/utimes.c: Likewise.
	* sysdeps/mach/hurd/xmknod.c: Likewise.
	* sysdeps/posix/profil.c: Likewise.
	* sysdeps/posix/readdir_r.c: Likewise.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.
	* sysdeps/powerpc/bits/setjmp.h: Likewise.
	* sysdeps/powerpc/powerpc32/__longjmp-common.S: Likewise.
	* sysdeps/powerpc/powerpc32/memset.S: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/mpa.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowpow.c: Likewise.
	* sysdeps/pthread/lio_listio.c: Likewise.
	* sysdeps/sparc/dl-procinfo.h: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/aio_sigqueue.c: Likewise.
	* sysdeps/unix/sysv/linux/fstatvfs64.c: Likewise.
	* sysdeps/unix/sysv/linux/getdents.c: Likewise.
	* sysdeps/unix/sysv/linux/msgctl.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/semctl.c: Likewise.
	* sysdeps/unix/sysv/linux/shmctl.c: Likewise.
	* sysdeps/unix/sysv/linux/speed.c: Likewise.
	* sysdeps/unix/sysv/linux/xstatconv.h: Likewise.
	* sysdeps/wordsize-32/divdi3.c: Likewise.
	* time/sys/time.h: Likewise.
	* wcsmbs/Makefile: Likewise.

2013-01-01  David S. Miller  <davem@davemloft.net>

	* po/fr.po: Update from translation team.

	* catgets/gencat.c: Update copyright year.
	* csu/version.c: Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/pcprofiledump.c: Likewise.
	* debug/xtrace.sh: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/pldd.c: Likewise.
	* elf/sotruss.ksh: Likewise.
	* elf/sprof.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* login/programs/pt_chown.c: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/memusagestat.c: Likewise.
	* malloc/mtrace.pl: Likewise.
	* nscd/nscd.c: Likewise.
	* nss/getent.c: Likewise.
	* nss/makedb.c: Likewise.
	* posix/getconf.c: Likewise.

2012-12-31  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpa.c (__mp_dbl): Favour normal
	numbers.

2012-12-30  Mike Frysinger  <vapier@gentoo.org>

	* math/bits/mathcalls.h (modf): Use __nonnull.

2012-12-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/branred.h: Include dla.h.
	(split): Use macro CN instead of the bare value.
	* sysdeps/ieee754/dbl-64/dla.h: Add comment to explain why CN
	could be used.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Use CN
	instead of the bare value.
	(power1): Likewise.

2012-12-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Remove
	__ATAN_TWOM.
	* sysdeps/ieee754/dbl-64/mpatan.h: Likewise.

	* sysdeps/ieee754/dbl-64/atnat.h: Replaced constants with
	their values.
	* sysdeps/ieee754/dbl-64/atnat2.h: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Likewise.
	* sysdeps/ieee754/dbl-64/ulog.h: Likewise.
	* sysdeps/ieee754/dbl-64/utan.h: Likewise.

2012-12-28  Andreas Jaeger  <aj@suse.de>

	* elf/elf.h (NT_S390_TDB, NT_FILE, NT_SIGINFO): Define.  New
	values are from Linux 3.7.

	* sysdeps/gnu/netinet/tcp.h (TCPI_OPT_SYN_DATA)
	(TCPI_OPT_ECN_SEEN): Define.  Sync with Linux 3.7.

2012-12-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* misc/sys/cdefs.h (__glibc_likely): Wrap __builtin_expect for
	TRUE case.

	* sysdeps/ieee754/dbl-64/mpa.c (norm): Define R as RADIXI.
	(norm): Likewise.
	* sysdeps/ieee754/dbl-64/mpa2.h: Remove all static const
	variables with preprocessor constants.
	* sysdeps/ieee754/dbl-64/mpatan.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.h: Likewise.

2012-12-27  Bruno Haible  <bruno@clisp.org>

	[BZ #14317]
	* string/xpg-strerror.c (__xpg_strerror_r): Optimize, call strlen
	only if needed.

2012-12-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Eliminate __mpexp_nn
	and use variable directly.
	* sysdeps/ieee754/dbl-64/mpexp.h (__mpexp_nn): Remove.

	* sysdeps/ieee754/dbl-64/mpa.c [! NO__CONST]: New constant
	MPONE.
	* sysdeps/ieee754/dbl-64/mpa.h: Declare MPONE.
	* sysdeps/ieee754/dbl-64/mpatan.c (__mpatan): Remove local
	variable MPONE.
	* sysdeps/ieee754/dbl-64/mpatan2.c (__mpatan2): Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.c (__mpexp): Likewise.
	* sysdeps/ieee754/dbl-64/mplog.c (__mplog): Remove mplog.h
	include directive.  Remove local variable MPONE.
	* sysdeps/ieee754/dbl-64/mplog.h: Remove.
	* sysdeps/x86_64/fpu/multiarch/mpa-avx.c: Define NO__CONST.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: Likewise.

2012-12-25  David S. Miller  <davem@davemloft.net>

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.17.90".
	* NEWS: Add 2.18 section.

2012-12-21  David S. Miller  <davem@davemloft.net>

	* po/hr.po: Update from translation team.

2012-12-21  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Refreshed.

2012-12-19  Steve Ellcey  <sellcey@mips.com>

	* NEWS:  Mention new memcpy for MIPS.

2012-12-18  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* manual/contrib.texi (Contributors): Spelling correction.

2012-12-15  David S. Miller  <davem@davemloft.net>

	* po/ru.po: Update from translation team.

2012-12-13  David S. Miller  <davem@davemloft.net>

	* NEWS: Mention IFUNC testsuite enhancements.

	* po/pl.po: Update from translation team.
	* po/bg.po: Likewise.

	* manual/contrib.texi (Contributors): Update entries for Hongjiu
	Lu and Joseph S. Myers.  Add entry for Marcus Shawcroft.

2012-12-11  David S. Miller  <davem@davemloft.net>

	* po/sv.po: Update from translation team.

	* po/vi.po: Update from translation team.

	* po/cs.po: Update from translation team.

	* po/de.po: Update from translation team.
	* po/eo.po: Likewise.
	* po/nl.po: Likewise.

2012-12-11  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14246]
	* manual/argp.texi (Argp Helper Functions): Move node to follow
	Argp Parsing State.

	[BZ #14872]
	* manual/conf.texi (Limits on File System Capacity): Mention if
	terminating null is included in the max size.

2012-12-10  Andreas Jaeger  <aj@suse.de>

	* po/cs.po: Update from translation team.

2012-12-08  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/s390/jmpbuf-unwind.h (_jmpbuf_sp): Declare SP as
	void pointer and cast to uintptr_t.
	* sysdeps/s390/s390-64/memcmp.S: Pick sysdep.h from include
	path.
	* sysdeps/s390/s390-64/memcpy.S: Likewise.
	* sysdeps/s390/s390-64/memset.S: Likewise.

2012-12-08  Benno Schulenberg  <bensberg@justemail.net>

	[BZ #14833]
	* menual/message.texi (Message Translation): Fix typos.
	(Helper programs for gettext): Likewise.

2012-12-07  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14898]
	* include/link.h (FORCED_DYNAMIC_TLS_OFFSET) [NO_TLS_OFFSET == 0]:
	Change to -1.

2012-12-07  David S. Miller  <davem@davemloft.net>

	* po/libc.pot: Update.

2012-12-07  Richard Henderson  <rth@redhat.com>

	[BZ #10114]
	* soft-fp/op-common.h (_FP_MUL): Pull computation of R_e from the
	normal/normal case to before the switch.
	(_FP_DIV): Likewise.

2012-12-06  Carlos O'Donell  <carlos@systemhalted.org>
	    Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/posix_fadvise.c (posix_fadvise): Also
	check for __NR_fadvise64_64.

2012-12-06  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/generic/fpu_control.h (_FPU_GETCW): Define to set cw to
	0, not just to plain "0" as a statement.
	(_FPU_SETCW): Define to (void) (cw), rather than doing nothing
	with cw.

2012-12-06  Joseph Myers  <joseph@codesourcery.com>

	* NEWS: Use sourceware.org in Bugzilla URL.

2012-12-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h
	(INTERNAL_SYSCALL_DECL): Use __attribute__ ((unused)).

	* stdio-common/tst-put-error.c (do_test): Add newline to the
	padded test to ensure flush.

2012-12-05  Jeff Law  <law@redhat.com>

	* sunrpc/etc.rpc (fedfs_admin): Add entry.

2012-12-05  Joseph Myers  <joseph@codesourcery.com>

	* README: Don't refer to ports add-on as distributed separately.
	Mention AArch64 in list of systems supported in the ports add-on.

	* LICENSES: Add more non-FSF copyright and license notices.

	* soft-fp/op-common.h (_FP_DECL): Declare X##_s with __attribute__
	((unused)).

	* sysdeps/ieee754/ldbl-128ibm/x2y2m1l.c: Include <stdlib.h>.

	* stdio-common/tst-put-error.c (do_test): Use 10000000 instead of
	10000 as width of padded output.

2012-12-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/sysdep.h (_SYS_AUXV_H): Define to 1 not empty.

	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c (__ieee754_atanhl): Mark
	variable LX with __attribute__ ((unused)).
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c (__ieee754_rem_pio2l):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c (___isnanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Mark variable LY
	with __attribute__ ((unused)).

2012-12-04  David S. Miller  <davem@abraco.davemloft.net>

	* sysdeps/generic/memcopy.h: Add multiple inclusion protection.

2012-12-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-opt/Makefile [$(subdir) = math]
	(CFLAGS-nldbl-acos.c): New variable.
	[$(subdir) = math] (CFLAGS-nldbl-acosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-asin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-asinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-atan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-atan2.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-atanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cabs.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cacos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cacosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-carg.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-casin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-casinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-catan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-catanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cbrt.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ccos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ccosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ceil.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cexp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cimag.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-clog.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-clog10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-conj.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-copysign.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cosh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cpow.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-cproj.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-creal.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-csin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-csinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-csqrt.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ctan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ctanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-drem.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-erf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-erfc.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-exp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-exp10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-exp2.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-expm1.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fabs.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fdim.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-finite.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-floor.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fmax.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fmin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-fmod.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-frexp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-gamma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-hypot.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ilogb.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-isinf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-isnan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-j0.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-j1.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-jn.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-ldexp.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lgamma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lgamma_r.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-llrint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-llround.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log1p.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-log2.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-logb.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lrint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-lround.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-modf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nearbyint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nextafter.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nexttoward.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-nexttowardf.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-pow.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-pow10.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-remainder.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-remquo.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-rint.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-round.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-scalb.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-scalbln.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-scalbn.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-significand.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sin.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sincos.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sinh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-sqrt.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-tan.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-tanh.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-tgamma.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-trunc.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-y0.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-y1.c): Likewise.
	[$(subdir) = math] (CFLAGS-nldbl-yn.c): Likewise.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h
	(INTERNAL_SYSCALL_DECL): Use __attribute__ ((unused)).

	[BZ #14914]
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Clear
	whole low double instead of just low 47 bits when splitting values
	into two parts.

2012-12-03  Allan McRae  <allan@archlinux.org>

	* manual/stdio.texi (Predefined Printf Handlers): Remove
	@hsep and @vsep usage.

2012-12-03  Mike Frysinger  <vapier@gentoo.org>

	* bits/byteswap.h [__GNUC__]: Change __GNUC_PREREQ from 4.2 to 4.3.
	* sysdeps/x86/bits/byteswap.h [__GNUC__]: Likewise.

2012-12-03  Jeff Law  <law@redhat.com>

	* time/sys/time.h (settimeofday): Do not mark TV argument
	as __nonnull.

2012-12-01  Mike Frysinger  <vapier@gentoo.org>

	* libio/fileops.c (_IO_new_file_close_it): Do not always flush
	when currently writing and seek to current position when not.
	* libio/Makefile (tests): Remove bug-fclose1.
	* libio/bug-fclose1.c: Delete.

2012-12-01  Joseph Myers  <joseph@codesourcery.com>

	* manual/arith.texi (feenableexcept): Fix typo.
	(fedisableexcept): Likewise.

2012-11-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/powerpc/powerpc64/entry.h (TEXT_START): Define using a
	second, differently-typed declaration, rather than a cast.

2012-11-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* sunrpc/rpc/svc.h (__svc_accept_failed): Move declaration...
	* include/rpc/svc.h: ... here.

2012-11-30  Aurelien Jarno  <aurel32@debian.org>

	[BZ #13013]
	* resolv/res_query.c(__libc_res_nquery): Assign hp and hp2
	depending n and resplen2 to catch cases where answer
	equals answerp2.

2012-11-29  Carlos O'Donell  <carlos@systemhalted.org>

	* elf/get-dynamic-info.h (elf_get_dynamic_info): Warn
	for unsupported DF_1_* bits when DL_DEBUG_FILES is set.

2012-11-29  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c (HAS_CPUCLOCK): Delete.

2012-11-29  Roland McGrath  <roland@hack.frob.com>

	* inet/tst-inet6_rth.c (do_test): Use a union rather than type punning.

2012-11-28  Jeff Law  <law@redhat.com>

	[BZ #13761]
	* nscd/grpcache.c (cache_addgr): Rename alloca_used to
	dataset_temporary.  Track alloca usage into alloca_used.
	If dataset is large allocate and release it via malloc/free.

2012-06-04  Florian Weimer  <fweimer@redhat.com>

	[BZ #14197]
	* debug/test-strcpy_chk.c: Mention __chk_fail ABI test.

2012-11-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-11-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14803]
	* sysdeps/ieee754/ldbl-96/e_asinl.c (pio2_hi): Use hex float value
	of pi/2 rounded to nearest to 64 bits.
	(pio2_lo): Use hex float value of pi/2 - pio2_hi rounded to
	nearest to 64 bits.
	(pio4_hi): Use hex float value of pi/4 rounded to nearest to 64
	bits.

2012-11-28  Jeff Law <law@redhat.com>
	    Martin Osvald <mosvald@redhat.com>

	[BZ #14889]
	* sunrpc/rpc/svc.h (__svc_accept_failed): New prototype.
	* sunrpc/svc.c: Include time.h.
	(__svc_accept_failed): New function.
	* sunrpc/svc_tcp.c (rendezvous_request): If the accept fails for
	any reason other than EINTR, call __svc_accept_failed.
	* sunrpc/svc_udp.c (svcudp_recv): Similarly.
	* sunrpc/svc_unix.c (rendezvous_request): Similarly.

2012-11-28  Andreas Schwab  <schwab@suse.de>

	* scripts/abilist.awk: Also handle indirect functions in .opd
	section.

2012-11-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13881]
	* sysdeps/x86/fpu/powl_helper.c: New file.
	* sysdeps/x86/fpu/Makefile: Likewise.
	* sysdeps/i386/fpu/e_powl.S (limit): Remove object.
	(p3): New object.
	(__ieee754_powl): Use __powl_helper for finite arguments except
	integer exponents below 8.
	* sysdeps/x86_64/fpu/e_powl.S (limit): Remove object.
	(p3): New object.
	(__ieee754_powl): Use __powl_helper for finite arguments except
	integer exponents below 8.
	* math/libm-test.inc (pow_test): Add more tests and enable some
	previously disabled tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-11-28  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Carlos O'Donell  <carlos_odonell@mentor.com>

	* nss/makedb.c (is_prime): Assert that input is odd and greater
	than 4.  Note that fact in a comment too.
	(next_prime): Add 4 to input.

2012-11-27  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #11741]
	* libio/Makefile (tests): Add test case tst-fwrite-error.
	* libio/iofwrite.c (_IO_fwrite): Return 0 on EOF.
	* libio/iofwrite_u.c (fwrite_unlocked): Likewise.
	* libio/tst-fwrite-error.c: New test case.

2012-11-26  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-load.c (_dl_map_object_from_fd): Cast to uintptr_t
	before casting to void *.
	* include/libc-internal.h (__pointer_type): New macro.
	(__integer_if_pointer_type_sub): Likewise.
	(__integer_if_pointer_type): Likewise.
	(cast_to_integer): Likewise.
	* sysdeps/x86_64/bits/atomic.h: Include <libc-internal.h>.
	(__arch_c_compare_and_exchange_val_64_acq): Use cast_to_integer
	before casting to atomic64_t.
	(atomic_exchange_acq): Likewise.
	(__arch_exchange_and_add_body): Likewise.
	(__arch_add_body): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.

2012-11-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/unwind-dw2-fde.c (get_pc_begin): New function.
	(fde_unencoded_compare): Use get_pc_begin instead of type-punning.
	(add_fdes): Likewise.
	(linear_search_fdes): Likewise.
	(binary_search_unencoded_fdes): Likewise.

2012-11-26  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/sotruss.ksh: Correctly locate argument of -F and -T options.

2012-11-24  Adam Conrad  <adconrad@0c3.net>

	* configure.in: Autodetect C++ header directories.
	* configure: Regenerated.

2012-11-23  Mike Frysinger  <vapier@gentoo.org>

	* elf/Makefile ($(objpfx)ld.so): Change readelf to $(READELF).

2012-11-23  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-11-22  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (fma_test_towardzero) [TEST_LDOUBLE &&
	LDBL_MANT_DIG == 106]: Disable some tests.
	(fma_test_downward) [TEST_LDOUBLE && LDBL_MANT_DIG == 106]:
	Likewise.
	(fma_test_upward) [TEST_LDOUBLE && LDBL_MANT_DIG == 106]:
	Likewise.

	[BZ #14871]
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c (__atanl): Return the
	input for small inputs.  Return +/- pi/2 for large inputs.
	* math/libm-test.inc (atan_test): Add more tests.

	* sysdeps/generic/unwind-dw2-fde-glibc.c
	(_Unwind_IteratePhdrCallback): Declare P_DYNAMIC with
	__attribute__ ((unused)).

	[BZ #14645]
	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c (__fmal): Compute result as
	x * y if x and y are nonzero and z is zero.

	[BZ #14811]
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (__ieee754_powl): Saturate
	nonzero exponents with absolute value below 0x1p-117 to +/-
	0x1p-117.

	[BZ #14869]
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl): Scale
	up arguments below 2**-450, not just those below 2**-500.
	* math/libm-test.inc (hypot_test): Add another test.

	[BZ #14868]
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c (__ieee754_hypotl):
	Return a+b for ratio over 2**120, not 2**60.
	* math/libm-test.inc (hypot_test): Add another test.

	* math/libm-test.inc (clog_test): Use
	UNDERFLOW_EXCEPTION_LDOUBLE_IBM on two tests.
	(clog10_test): Likewise.

	[BZ #6778]
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c (big): Change to 1e290L.

2012-11-22  Andreas Schwab  <schwab@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-11-22  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/x86_64/multiarch/test-multiarch.c (get_cpuinfo): Terminate
	printf output with newline.

2012-11-21  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14865]
	* aclocal.m4 (LIBC_LINKER_FEATURE): New macro.
	* configure.in: Use LIBC_LINKER_FEATURE to check -z nodelete,
	-z nodlopen, -z initfirst and -z execstack support.
	* configure: Regenerated.

	* elf/elf.h (DF_1_NODIRECT): New macro.
	(DF_1_IGNMULDEF): Likewise.
	(DF_1_NOKSYMS): Likewise.
	(DF_1_NOHDR): Likewise.
	(DF_1_EDITED): Likewise.
	(DF_1_NORELOC): Likewise.
	(DF_1_SYMINTPOSE): Likewise.
	(DF_1_GLOBAUDIT): Likewise.
	(DF_1_SINGLETON): Likewise.
	* elf/get-dynamic-info.h (elf_get_dynamic_info): Assert
	DT_1_SUPPORTED_MASK bits.
	* include/elf.h (DT_1_SUPPORTED_MASK): New macro.

2012-11-20  Carlos O'Donell  <carlos_odonell@mentor.com>

	* sysdeps/unix/make-syscalls.sh: Document prefixes.

2012-11-20  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/sh/dl-machine.h (ELF_MACHINE_RUNTIME_FIXUP_PARAMS): New
	macro.

	* sysdeps/unix/sysv/linux/bits/socket.h (struct mmsghdr, recvmmsg)
	(sendmmsg): Move declarations...
	* socket/sys/socket.h: ... here.
	* sysdeps/unix/sysv/linux/recvmmsg.c [!defined __NR_recvmmsg &&
	!defined __NR_socketcall] (recvmmsg): Move ENOSYS stub into and
	include it from...
	* socket/recvmmsg.c: ... this new file.
	* sysdeps/unix/sysv/linux/internal_sendmmsg.S [__ASSUME_SENDMMSG]
	(sendmmsg): Rename to __sendmmsg, create weak alias and make
	definition of __sendmmsg hidden.
	* sysdeps/unix/sysv/linux/sendmmsg.c (sendmmsg): Likewise.
	[!defined __NR_sendmmsg && !defined __NR_socketcall] (sendmmsg):
	Move ENOSYS stub into and include it from...
	* socket/sendmmsg.c: ... this new file.
	* sysdeps/unix/sysv/linux/Makefile [subdir=socket]
	(sysdep_routines): Move recvmmsg and sendmmsg...
	* socket/Makefile (routines): ... here.
	* socket/Versions (GLIBC_2.17): Add recvmmsg and sendmmsg.
	(GLIBC_PRIVATE): Add __sendmmsg.
	* include/sys/socket.h (__sendmmsg): Add declarations.
	* resolv/res_send.c (send_dg): Invoke __sendmmsg instead of
	sendmmsg.

2012-11-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c (__nearbyintl): Mark
	variable I1 with __attribute__ ((unused)).
	* sysdeps/ieee754/ldbl-128/s_rintl.c (__rintl): Likewise.

2012-11-19  Joseph Myers  <joseph@codesourcery.com>

	* stdio-common/_itowa.c (_itowa) [BITS_PER_MP_LIMB == 64]: Declare
	DUMMY variables with __attribute__ ((unused)).

	* bits/byteswap.h: Include <bits/types.h>.
	(__bswap_64): Use __uint64_t instead of unsigned long long int.

2012-11-19  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/ptsname.c (ptsname): Change the type of PEERNAME to
	string_t.  Do not manually set errno.
	(__ptsname_r): Change the type of PEERNAME to string_t, and check its
	length with __strnlen.  Make sure to both set errno and return it on
	failure.

2012-11-19  David S. Miller  <davem@davemloft.net>

	With help from Joseph Myers.
	* sysdeps/ieee754/ldbl-128/s_atanl.c (__atanl): Handle tiny and
	very large arguments properly.
	* math/libm-test.inc (atan_test): New tests.
	(atan2_test): New tests.
	* sysdeps/sparc/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-11-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14856]
	* posix/bits/posix1_lim.h [!__USE_XOPEN2K] (_POSIX_TZNAME_MAX):
	Define to 3.

	* conform/data/errno.h-data [POSIX] (EADDRINUSE): Do not expect.
	[POSIX] (EADDRNOTAVAIL): Likewise.
	[POSIX] (EAFNOSUPPORT): Likewise.
	[POSIX] (EALREADY): Likewise.
	[POSIX] (ECONNABORTED): Likewise.
	[POSIX] (ECONNREFUSED): Likewise.
	[POSIX] (ECONNRESET): Likewise.
	[POSIX] (EDESTADDRREQ): Likewise.
	[POSIX] (EDQUOT): Likewise.
	[POSIX] (EHOSTUNREACH): Likewise.
	[POSIX] (EIDRM): Likewise.
	[POSIX] (EISCONN): Likewise.
	[POSIX] (ELOOP): Likewise.
	[POSIX] (EMULTIHOP): Likewise.
	[POSIX] (ENETDOWN): Likewise.
	[POSIX] (ENETUNREACH): Likewise.
	[POSIX] (ENOBUFS): Likewise.
	[POSIX] (ENODATA): Likewise.
	[POSIX] (ENOLINK): Likewise.
	[POSIX] (ENOMSG): Likewise.
	[POSIX] (ENOPROTOOPT): Likewise.
	[POSIX] (ENOSR): Likewise.
	[POSIX] (ENOSTR): Likewise.
	[POSIX] (ENOTCONN): Likewise.
	[POSIX] (ENOTSOCK): Likewise.
	[POSIX] (EOPNOTSUPP): Likewise.
	[POSIX] (EOVERFLOW): Likewise.
	[POSIX] (EPROTO): Likewise.
	[POSIX] (EPROTONOSUPPORT): Likewise.
	[POSIX] (EPROTOTYPE): Likewise.
	[POSIX] (ESTALE): Likewise.
	[POSIX] (ETIME): Likewise.
	[POSIX] (ETXTBSY): Likewise.
	[POSIX] (EWOULDBLOCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (E*): Do not allow.
	* conform/data/fcntl.h-data [POSIX] (SEEK_SET): Allow.
	[POSIX] (SEEK_CUR): Likewise.
	[POSIX] (SEEK_END): Likewise.
	[POSIX || UNIX98] (mode_t): Do not require.
	[POSIX] (off_t): Likewise.
	[POSIX] (pid_t): Likewise.
	[POSIX] (sys/stat.h): Do not allow header.
	[POSIX] (unistd.h): Likewise.
	[!ISO && !ISO99 && !ISO11] (timespec): Do not allow.
	[!ISO && !ISO99 && !ISO11] (tv_nsec): Likewise.
	[!ISO && !ISO99 && !ISO11] (tv_sec): Likewise.
	* conform/data/locale.h-data [POSIX] (LC_MESSAGES): Do not
	require.
	* conform/data/mqueue.h-data [!ISO && !ISO99 && !ISO11] (struct
	sigevent): Specify elements.
	[XOPEN2K8 || POSIX2008] (struct sigevent): Remove duplicate type
	entry.
	[!ISO && !ISO99 && !ISO11] (mq_*): Allow.
	[!ISO && !ISO99 && !ISO11] (MQ_*): Likewise.

	* conform/data/cpio.h-data [POSIX]: Disable whole file.
	* conform/data/glob.h-data [POSIX] (GLOB_NOSYS): Do not expect.
	* conform/data/limits.h-data [!ISO && !ISO99 && !ISO11]
	(AIO_LIST_MAX): Change to AIO_LISTIO_MAX.
	[!ISO && !ISO99 && !ISO11] (ATEXT_MAX): Remove.
	[!ISO && !ISO99 && !ISO11 && !POSIX && !XPG3] (ATEXIT_MAX): Allow.
	[POSIX || POSIX2008 || XPG3] (IOV_MAX): Do not allow.
	[POSIX || POSIX2008 || XPG3] (_XOPEN_IOV_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (MQ_PRIO_MAX): Allow.
	[!ISO && !ISO99 && !ISO11] (RE_DUP_MAX): Remove duplicate entry.
	[POSIX || XPG3 || XPG4 || UNIX98] (SS_REPL_MAX): Do not allow.
	[POSIX || XPG3 || XPG4 || UNIX98] (SYMLOOP_MAX): Likewise.
	[POSIX || XPG3 || XPG4] (FILESIZEBITS): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_ALLOC_SIZE_MIN):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_REC_INCR_XFER_SIZE):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_REC_MAX_XFER_SIZE):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (POSIX_REC_XFER_ALIGN):
	Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (SYMLINK_MAX): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (_POSIX_SS_REPL_MAX): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (_POSIX_SYMLINK_MAX): Likewise.
	[POSIX || XPG3 || XPG4 || UNIX98] (_POSIX_SYMLOOP_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (BC_BASE_MAX): Use macro-constant.
	Specify lower bound on value.
	[!ISO && !ISO99 && !ISO11] (BC_DIM_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (BC_SCALE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (BC_STRING_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (COLL_WEIGHTS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (EXPR_NEST_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (RE_DUP_MAX): Likewise.
	[POSIX || XPG3 || XPG4] (CHARCLASS_NAME_MAX): Do not allow.
	[!ISO && !ISO99 && !ISO11] (_POSIX_CLOCKRES_MIN): Specify exact
	value.
	[!ISO && !ISO99 && !ISO11] (_POSIX_AIO_LISTIO_MAX): Do not specify
	as optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX_AIO_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_ARG_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_CHILD_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_DELAYTIMER_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_LINK_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_LOGIN_NAME_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MAX_CANON): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MAX_INPUT): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MQ_OPEN_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_MQ_PRIO_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_NAME_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_NGROUPS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_OPEN_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_PATH_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_PIPE_BUF): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_RE_DUP_MAX): Remove duplicate
	entry.
	[!ISO && !ISO99 && !ISO11] (_POSIX_RTSIG_MAX): Do not specify as
	optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SEM_NSEMS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SEM_VALUE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SIGQUEUE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_SSIZE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_STREAM_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_THREAD_DESTRUCTOR_ITERATIONS):
	Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_THREAD_KEYS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_THREAD_THREADS_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_TIMER_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_TTY_NAME_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX_TZNAME_MAX): Likewise.  Give
	value as 3 for [POSIX || XPG3 || XPG4 || UNIX98].
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_BASE_MAX): Do not specify
	as optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_DIM_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_SCALE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_BC_STRING_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_CHARCLASS_NAME_MAX):
	Likewise.  Do not allow for [POSIX || XPG3 || XPG4 || UNIX98].
	[!ISO && !ISO99 && !ISO11] (_POSIX2_COLL_WEIGHTS_MAX): Do not
	specify as optional.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_EXPR_NEST_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_LINE_MAX): Likewise.
	[!ISO && !ISO99 && !ISO11] (_POSIX2_RE_DUP_MAX): Likewise.
	[POSIX || POSIX2008 || XPG3] (_XOPEN_IOV_MAX): Do not allow.
	[POSIX || XPG3] (NL_ARGMAX): Do not allow.
	[XPG3] (NL_LANGMAX): Likewise.
	[POSIX || XPG3] (NL_MSGMAX): Likewise.
	[POSIX || XPG3] (NL_NMAX): Likewise.
	[POSIX || XPG3] (NL_SETMAX): Likewise.
	[POSIX || XPG3] (NL_TEXTMAX): Likewise.
	[XPG3] (NZERO): Likewise.
	[XPG4 || UNIX98] (TMP_MAX): Only enable for these conditions.
	[POSIX || XPG3 || XPG4 || UNIX98] (*_MIN): Do not allow.
	[!ISO && !ISO99 && !ISO11] (*_t): Allow.
	* conform/data/regex.h-data [!ISO && !ISO99 && !ISO11]
	(REG_ERANGE): Expect.
	* conform/data/stdio.h-data [POSIX] (L_cuserid): Use
	optional-constant.
	[POSIX || XOPEN2K || XOPEN2K8 || POSIX2008] (getchar_unlocked):
	Use (void) in prototype.
	[POSIX] (*_t): Allow.
	* conform/data/sys/times.h-data [POSIX]: Enable whole file.
	* conform/data/wordexp.h-data [!ISO && !ISO99 && !ISO11]
	(WRDE_BADVAL): Expect.

	* conform/data/fcntl.h-data [XPG3 || XPG4] (O_DSYNC): Do not
	expect.
	[XPG3 || XPG4] (O_RSYNC): Likewise.
	* conform/data/signal.h-data [XPG3 || XPG4] (pthread_kill):
	Likewise.
	[XPG3 || XPG4] (pthread_sigmask): Likewise.
	[XPG3 || XPG4] (sigqueue): Likewise.
	[XPG3 || XPG4] (sigtimedwait): Likewise.
	[XPG3 || XPG4] (sigwaitinfo): Likewise.
	* conform/data/stdio.h-data [XPG3 || XPG4] (snprintf): Likewise.
	[XPG3 || XPG4] (vsnprintf): Likewise.
	* conform/data/sys/stat.h-data [XPG3 || XPG4] (blkcnt_t):
	Likewise.
	[XPG3 || XPG4] (blksize_t): Likewise.
	* conform/data/time.h-data [XPG3 || XPG4] (struct timespec):
	Likewise.
	[XPG3 || XPG4] (CLOCK_PROCESS_CPUTIME_ID): Likewise.
	[XPG3 || XPG4] (CLOCK_THREAD_CPUTIME_ID): Likewise.
	[XPG3 || XPG4] (struct itimerspec): Likewise.
	[XPG3 || XPG4] (CLOCK_REALTIME): Likewise.
	[XPG3 || XPG4] (TIMER_ABSTIME): Likewise.
	[XPG3 || XPG4] (CLOCK_MONOTONIC): Likewise.
	[XPG3 || XPG4] (clockid_t): Likewise.
	[XPG3 || XPG4] (timer_t): Likewise.
	[XPG3 || XPG4] (clock_getres): Likewise.
	[XPG3 || XPG4] (clock_gettime): Likewise.
	[XPG3 || XPG4] (clock_settime): Likewise.
	[XPG3 || XPG4] (nanosleep): Likewise.
	[XPG3 || XPG4] (timer_create): Likewise.
	[XPG3 || XPG4] (timer_delete): Likewise.
	[XPG3 || XPG4] (timer_gettime): Likewise.
	[XPG3 || XPG4] (timer_getoverrun): Likewise.
	[XPG3 || XPG4] (timer_settime): Likewise.
	* conform/data/unistd.h-data [XPG3 || XPG4] (fdatasync): Likewise.
	[XPG3 || XPG4] (getlogin_r): Likewise.
	[XPG3 || XPG4] (pread): Likewise.
	[XPG3 || XPG4] (pthread_atfork): Likewise.
	[XPG3 || XPG4] (pwrite): Likewise.

	[BZ #14835]
	* signal/signal.h [__USE_XOPEN_EXTENDED]: Include
	<bits/siginfo.h>.

2012-11-19  Pino Toscano  <toscano.pino@tiscali.it>

	* malloc/mtrace.c (muntrace): Reset MALLSTREAM and the hooks before
	finalizing MALLSTREAM.

	* sysdeps/mach/hurd/syncfs.c: New file.

2012-11-19  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14719]
	* nss/getXXbyYY_r.c (INTERNAL (REENTRANT_NAME)): Set h_errno to
	NETDB_INTERNAL when NSS_STATUS_UNAVAIL.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname3_r): Set
	h_errno to NETDB_INTERNAL when errno is EMFILE or ENFILE.
	(_nss_dns_gethostbyname4_r): Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Set result to
	EAI_SYSTEM if NSS_STATUS_UNAVAIL.

2012-11-19  Peng Haitao  <penght@cn.fujitsu.com>

	[BZ #13763]
	* sunrpc/bindrsvprt.c: Add lock to protect static variable.

2012-11-19  Steve McIntyre  <steve.mcintyre@linaro.org>

	* sysdeps/generic/ldconfig.h (FLAG_AARCH64_LIB64): New macro.
	* elf/cache.c (print_entry): Print ",AArch64" for
	FLAG_AARCH64_LIB64

	* sysdeps/generic/ldconfig.h (FLAG_ARM_LIBHF): New macro.
	* elf/cache.c (print_entry): Print ",hard-float" for
	FLAG_ARM_LIBHF.

2012-11-18  David S. Miller  <davem@davemloft.net>

	With help from Joseph Myers.
	* sysdeps/ieee754/flt-32/e_j0f.c (__ieee754_y0f): Adjust tinyness
	cutoff to 2**-13.
	* sysdeps/ieee754/flt-32/e_j1f.c (__ieee754_y1f): Adjust tinyness
	cutoff to 2**-25.
	* sysdeps/ieee754/ldbl-128/e_j0l.c (U0): New constant.
	( __ieee754_y0l): Avoid arithmetic underflow when 'x' is very
	small.
	* sysdeps/ieee754/ldbl-128/e_j1l.c (__ieee754_y1l): Likewise.
	* math/libm-test.inc (y0_test): New tests.
	(y1_test): New tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.
	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-11-18  Andreas Schwab  <schwab@linux-m68k.org>

	* configure.in (libc_cv_ld_gnu_indirect_function): Use .quad on
	64-bit targets.
	* configure: Regenerated.

2012-11-17  David S. Miller  <davem@davemloft.net>

	[BZ #14811]
	* sysdeps/ieee754/ldbl-128/e_powl.c (__ieee754_powl): Saturate
	nonzero exponents with absolute value below 0x1p-128 to +/-
	0x1p-128.

2012-11-17  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/fxstatat.c: Include <string.h>.

	* elf/dl-runtime.c [!ELF_MACHINE_NO_PLT]: Make code unconditional.

	* posix/getconf-speclist.c: New file.
	* posix/posix-envs.def: Likewise.
	* posix/confstr.c (START_ENV_GROUP): New macro.
	(END_ENV_GROUP): Likewise.
	(KNOWN_ABSENT_ENVIRONMENT): Likewise.
	(KNOWN_PRESENT_ENV_STRING): Likewise.
	(KNOWN_PRESENT_ENVIRONMENT): Likewise.
	(UNKNOWN_ENVIRONMENT): Likewise.
	(confstr): Include posix-envs.def instead of handling
	_CS_V7_WIDTH_RESTRICTED_ENVS, _CS_V6_WIDTH_RESTRICTED_ENVS and
	_CS_V5_WIDTH_RESTRICTED_ENVS directly here.
	* sysdeps/posix/sysconf.c (START_ENV_GROUP): New macro.
	(END_ENV_GROUP): Likewise.
	(KNOWN_ABSENT_ENVIRONMENT): Likewise.
	(KNOWN_PRESENT_ENVIRONMENT): Likewise.
	(UNKNOWN_ENVIRONMENT): Likewise.
	(__sysconf): Include posix-envs.def instead of handling associated
	cases directly here.
	* posix/Makefile ($(objpfx)getconf.speclist): Generate by
	preprocessing getconf-speclist.c rather than running getconf or
	generating empty file.

2012-11-16  Pino Toscano  <toscano.pino@tiscali.it>

	* scripts/check-local-headers.sh: Ignore 'mach' headers.

2012-11-16  Andrej Lajovic  <natrij@gmail.com>

	[BZ #14672]
	* iconv/iconv_prog.c (main): Fix -c handling of '/'.

2012-11-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/ieee754/ldbl-128/s_log1pl.c (__log1pl): If xm1 is
	smaller than LDBL_EPSILON/2.0L, just return xm1.

2012-11-16  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-array1.c (init): Set constructor priority to 1000.
	(fini): Set destructor priority to 1000.
	* elf/tst-array2dep.c: Likewise.

2012-11-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #11741]
	* libio/fileops.c (_IO_new_file_write): Correctly return error.
	(_IO_new_file_xsputn): Also return EOF if none of the input
	data was written when overflow failed.
	* libio/iopadn.c (_IO_padn): Likewise.
	* libio/iowpadn.c (_IO_wpadn): Likewise.
	* stdio-common/tst-put-error.c: Add copyright notice.
	(do_test): Add case for printing padded string.
	* stdio-common/vfprintf [!COMPILE_WPRINTF] (PAD): Flag error if
	_IO_padn returned error.
	[COMPILE_WPRINTF] (PAD): Flag error if _IO_wpadn returned error.
	* libio/libioP.h (_IO_xsputn_t): Note in comment that xsputn can
	return EOF.

2012-11-16  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/libioP.h: Add comment note that the references to C++
	bits are now obsolete.

2012-11-15  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* math/libm-test.inc (check_complex): Use asprintf.

2012-11-14  Joseph Myers  <joseph@codesourcery.com>

	* debug/pcprofiledump.c (print_version): Update copyright year.
	* malloc/memusagestat.c (print_version): Likewise.

2012-11-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14831]
	* elf/Makefile (tests): Add tst-audit8.
	($(objpfx)tst-audit8): Also depend on $(common-objpfx)math/libm.so.
	($(objpfx)tst-audit8.out): New target.
	(tst-audit8-ENV): New variable.
	* elf/dl-runtime.c (_dl_profile_fixup): Call _dl_fixup to skip
	audit if l_reloc_result is NULL.
	(ELF_MACHINE_RUNTIME_FIXUP_PARAMS): Issue an error if it isn't
	defined and ELF_MACHINE_RUNTIME_FIXUP_ARGS is defined.
	* elf/tst-audit8.c: New file.

2012-11-14  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* io/Makefile (CFLAGS-open.c, CFLAGS-open64.c): Define.
	* misc/Makefile (CFLAGS-select.c): Define.
	* posix/Makefile (CFLAGS-pause.c): Define.

2012-11-13  David S. Miller  <davem@davemloft.net>

	* crypt/Makefile: Move test targets after toplevel Rules
	inclusion.  Grab any necessary sysdep routines when linking.
	* crypt/md5.c (md5_process_block): Remove define, we will always
	name it __md5_process_block.
	(md5_finish_ctx): Update md5_process_block call.
	(md5_stream): Likewise.
	(md5_process_bytes): Likewise.
	(md5_process_block): Rename to __md5_process_block and move to ...
	* crypt/md5-block.c: ... here.
	* crypt/sha256.c (sha256_process_block): Move to ...
	* crypt/sha256-block.c: ... here.
	* crypt/sha512.c (sha512_process_block): Move to ...
	* crypt/sha512-block.c: ... here.
	* locale/Makefile (CFLAGS-md5.c): Define to add crypt/ to include
	path.
	* sysdeps/sparc/sparc-ifunc.c (sparc_libc_ifunc): Define.
	* sysdeps/sparc/sparc64/multiarch/Makefile
	(libcrypt-sysdep_routines): Add crypto assembler sysdeps when in
	crypt subdir.
	(localedef-aux): Add md5 crypto assembler when in locale subdir.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/Makefile: Mirror sparc64
	multiarch changes.
	* sysdeps/sparc/sparc64/multiarch/md5-block.c: New file.
	* sysdeps/sparc/sparc64/multiarch/md5-crop.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sha256-block.c: New file.
	* sysdeps/sparc/sparc64/multiarch/sha256-crop.S: New file.
	* sysdeps/sparc/sparc64/multiarch/sha512-block.c: New file.
	* sysdeps/sparc/sparc64/multiarch/sha512-crop.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/md5-block.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/md5-crop.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha256-block.c: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha256-crop.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha512-block.c: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/sha512-crop.S: New file.

2012-11-13  Joseph Myers  <joseph@codesourcery.com>

	* timezone/tzselect.ksh: Update from tzcode git revision
	a435f9f0ecafa56d9e0263835836bd0c64cd7307.
	* timezone/zdump.c: Likewise.
	* timezone/zic.c: Likewise.
	* timezone/Makefile ($(objpfx)version.h): Only include $(version)
	in TZVERSION setting, not $(PKGVERSION).
	($(objpfx)tzselect): Likewise.  Also substitute PKGVERSION and
	REPORT_BUGS_TO settings.

	[BZ #14838]
	* resolv/netdb.h [__USE_XOPEN_EXTENDED] (IPPORT_RESERVED): Define
	macro.

2012-11-13  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* soft-fp/op-common.h (_FP_PACK_SEMIRAW): Move underflow
	detection to immediately after _FP_ROUND().
	* soft-fp/soft-fp.h (_FP_ROUND): Don't round if working
	bits are 0.

2012-11-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c: Include
	inttypes.h
	(__get_clockfreq_via_proc_openprom): Use __open, __read, and
	__close rather than their public counterparts.

2012-11-10  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/semaphore.h-data [XPG3 || XPG4]: Disable whole
	file.
	[UNIX98] (sem_timedwait): Do not expect.
	* conform/data/sys/socket.h-data [XPG3]: Disable whole file.
	[XPG4 || UNIX98] (sockatmark): Do not expect.
	* conform/data/time.h-data [XPG3 || XPG4 || UNIX98]
	(clock_getcpuclockid): Do not expect.
	[XPG3 || XPG4 || UNIX98] (clock_nanosleep): Do not expect.
	* conform/data/unistd.h-data [XPG3 || XPG4 || UNIX98] (setegid):
	Do not expect.
	[XPG3 || XPG4 || UNIX98] (seteuid): Likewise.
	* conform/data/wchar.h-data [UNIX98] (vfwscanf): Do not expect.
	[UNIX98] (vwscanf): Likewise.
	[UNIX98] (vswscanf): Likewise.

2012-11-09  Joseph Myers  <joseph@codesourcery.com>

	* timezone/version.h: Remove file.
	* timezone/README: Do not refer to version.h.
	* timezone/Makefile ($(objpfx)zic.o): New dependency on
	$(objpfx)version.h.
	($(objpfx)zdump.o): Likewise.
	($(objpfx)version.h): New target.

	* timezone/tzselect.ksh: Change to verbatim copy from tzcode
	2012i.
	* timezone/README: Don't mention modification to tzselect.ksh.
	* timezone/Makefile ($(objpfx)tzselect): Update substitutions to
	work on unmodified tzselect.ksh.  Substitute version numbers in
	tzselect.ksh.

	* Makefile (format-me): Remove.
	(INSTALL): Adjust indentation.  Use commands directly instead of
	using $(format-me).

	* aclocal.m4 (ACX_PKGVERSION): New macro.
	(ACX_BUGURL): Likewise.
	* configure.in: Use ACX_PKGVERSION and ACX_BUGURL.
	(PKGVERSION): New AC_DEFINE_UNQUOTED.
	(REPORT_BUGS_TO): Likewise.
	* configure: Regenerated.
	* config.h.in (PKGVERSION): New macro.
	(REPORT_BUGS_TO): Likewise.
	* config.make.in (PKGVERSION): New variable.
	(PKGVERSION_TEXI): Likewise.
	(REPORT_BUGS_TO): Likewise.
	(REPORT_BUGS_TEXI): Likewise.
	* Makefile (format-me): Use -I$(common-objpfx)manual.
	(INSTALL): Depend on $(common-objpfx)manual/pkgvers.texi.
	($(common-objpfx)manual/%): New target.
	(manual/%): Remove target.
	* catgets/gencat.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* csu/version.c (banner): Use PKGVERSION and REPORT_BUGS_TO.
	* debug/Makefile ($(objpfx)catchsegv): Also substitute PKGVERSION
	and REPORT_BUGS_TO.
	($(objpfx)xtrace): Likewise.
	* debug/catchsegv.sh: Use PKGVERSION and REPORT_BUGS_TO.
	* debug/pcprofiledump.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* debug/xtrace.sh (do_help): Use REPORT_BUGS_TO.
	(do_version): Use PKGVERSION.
	* elf/Makefile ($(objpfx)sotruss): Also substitute PKGVERSION and
	REPORT_BUGS_TO.
	(common-ldd-rewrite): Likewise.
	* elf/dl-close.c (_dl_close_worker): Use REPORT_BUGS_TO.
	* elf/ldconfig.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* elf/ldd.bash.in: Use PKGVERSION and REPORT_BUGS_TO.
	* elf/pldd.c (argp_program_bug_address): Remove variable.
	(more_help): New function.
	(argp): Use more_help.
	(print_version): Use PKGVERSION.
	* elf/sln.c (main): Use PKGVERSION.
	(usage): Use REPORT_BUGS_TO.
	* elf/sotruss.ksh (do_help): Use REPORT_BUGS_TO.
	(top level): Use PKGVERSION.
	* elf/sprof.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* iconv/iconv_prog.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* iconv/iconvconfig.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* locale/programs/locale.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* locale/programs/localedef.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* login/programs/pt_chown.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* malloc/Makefile ($(objpfx)mtrace): Also substitute PKGVERSION
	and BUGURL.
	($(objpfx)memusage): Likewise.
	* malloc/memusage.sh (do_help): Use REPORT_BUGS_TO.
	(do_version): Use PKGVERSION.
	* malloc/memusagestat.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* malloc/mtrace.pl ($PACKAGE): Remove variable.
	($PKGVERSION): New variable.
	($REPORT_BUGS_TO): Likewise.
	(usage): Use $REPORT_BUGS_TO.
	(top level): Use $PKGVERSION.
	* manual/Makefile (libc-texi-generated): Add pkgvers.texi.
	($(objpfx)pkgvers.texi): New rule.
	($(objpfx)stamp-pkgvers): Likewise.
	* manual/install.texi: Include pkgvers.texi.
	(--with-pkgversion): Document new configure option.
	(--with-bugurl): Likewise.
	(Reporting Bugs): Describe Bugzilla as upstream tracker rather
	than necessarily for this particular distribution.  Use
	REPORT_BUGS_TO for where to report bugs.
	* INSTALL: Regenerated.
	* manual/libc.texinfo: Include pkgvers.texi.
	[!PKGVERSION_DEFAULT]: Include PKGVERSION in version information.
	* nscd/nscd.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* nss/getent.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* nss/makedb.c (more_help): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* posix/getconf.c (main): Use PKGVERSION and REPORT_BUGS_TO.
	* sunrpc/proto.h [IS_IN_build] (_libc_intl_domainname): Remove
	macro.
	* sunrpc/rpc_main.c (options_usage): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* sunrpc/rpcinfo.c (usage): Use REPORT_BUGS_TO.
	(print_version): Use PKGVERSION.
	* sysdeps/unix/sysv/linux/lddlibc4.c (main): Use REPORT_BUGS_TO
	and PKGVERSION.

	* timezone/checktab.awk: Update from tzcode 2012i.
	* timezone/ialloc.c: Likewise.
	* timezone/private.h: Likewise.
	* timezone/scheck.c: Likewise.
	* timezone/tzfile.h: Likewise.
	* timezone/tzselect.ksh: Merge in changes from tzcode 2012i.
	(TZVERSION): Hardcode tzcode version number.
	* timezone/zdump.c: Update from tzcode 2012i.
	* timezone/zic.c: Likewise.
	* timezone/version.h: New file.
	* timezone/README: Describe version.h.  Update upstream location.

	[BZ #14824]
	* stdlib/stdlib.h [__USE_XOPEN_EXTENDED && __USE_XOPEN2K]
	(mktemp): Enable declaration.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K] (ecvt): Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K] (fcvt): Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K] (gcvt): Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (qecvt):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (qfcvt):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (qgcvt):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (ecvt_r):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (fcvt_r):
	Likewise.
	[__USE_XOPEN_EXTENDED && __USE_XOPEN2K && __USE_MISC] (gcvt_r):
	Likewise.

	[BZ #14821]
	* sunrpc/clnt_tcp.c (clnttcp_control): Access values at fixed
	offset in buffer as u_int32_t not u_long.  Consistently use memcpy
	for copies of such integer values.
	* sunrpc/clnt_udp.c (clntudp_control): Likewise.
	* sunrpc/clnt_unix.c (clntunix_control): Likewise.

2012-11-09  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Remove all
	definitions and declarations that are provided by
	<bits/fcntl-linux.h> and include <bits/fcntl-linux.h>.

2012-11-08  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/dl-procinfo.c (_dl_s390_cap_flags): Add "te".
	* sysdeps/s390/dl-procinfo.h (HWCAP_S390_TE): Add enum value.
	* sysdeps/unix/sysv/linux/s390/hwcap.h (HWCAP_S390_TE): Add macro
	definition.

2012-11-08  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/elf.h: Update comment before AArch64 relocations.

2012-11-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/__start_context.S: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/makecontext.c
	(__start_context): Declare.
	(__makecontext_ret): Delete.
	(__makecontext): Hook up __start_context instead of
	__makecontext_ret.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile
	(sysdep_routines): Add __start_context when in stdlib.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/x86/Makefile ($(objpfx)tst-xmmymm.out): Pass $(NM),
	$(OBJDUMP) and $(READELF) to tst-xmmymm.sh.
	* sysdeps/x86/tst-xmmymm.sh (NM): New variable.  Use it instead of
	hardcoded "nm".
	(OBJDUMP): New variable.  Use it instead of hardcoded "objdump".
	(READELF): New variable.  Use it instead of hardcoded "readelf".

2012-11-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Makefile ($(objpfx)tst-xmmymm.out): Moved to ...
	* sysdeps/x86/Makefile: Here.
	* sysdeps/x86_64/tst-xmmymm.sh: Renamed to ...
	* sysdeps/x86/tst-xmmymm.sh: This.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/pthread.h-data [XPG3 || XPG4]: Disable all
	expectations.
	[UNIX98] (pthread_barrier_t): Do not expect.
	[UNIX98] (pthread_barrierattr_t): Likewise.
	[UNIX98] (pthread_spinlock_t): Likewise.
	[UNIX98] (pthread_barrier_destroy): Likewise.
	[UNIX98] (pthread_barrier_init): Likewise.
	[UNIX98] (pthread_barrier_wait): Likewise.
	[UNIX98] (pthread_barrierattr_destroy): Likewise.
	[UNIX98] (pthread_barrierattr_getpshared): Likewise.
	[UNIX98] (pthread_barrierattr_init): Likewise.
	[UNIX98] (pthread_barrierattr_setpshared): Likewise.
	[UNIX98] (pthread_getcpuclockid): Likewise.
	[UNIX98] (pthread_mutex_timedlock): Likewise.
	[UNIX98] (pthread_rwlock_timedrdlock): Likewise.
	[UNIX98] (pthread_rwlock_timedwrlock): Likewise.
	[UNIX98] (pthread_sigmask): Likewise.
	[UNIX98] (pthread_spin_destroy): Likewise.
	[UNIX98] (pthread_spin_init): Likewise.
	[UNIX98] (pthread_spin_lock): Likewise.
	[UNIX98] (pthread_spin_trylock): Likewise.
	[UNIX98] (pthread_spin_unlock): Likewise.
	* conform/data/sys/types.h-data [XPG3 || XPG4] (pthread_attr_t):
	Do not expect.
	[XPG3 || XPG4 || UNIX98] (pthread_barrier_t): Likewise.
	[XPG3 || XPG4 || UNIX98] (pthread_barrierattr_t): Likewise.
	[XPG3 || XPG4] (pthread_cond_t): Likewise.
	[XPG3 || XPG4] (pthread_condattr_t): Likewise.
	[XPG3 || XPG4] (pthread_key_t): Likewise.
	[XPG3 || XPG4] (pthread_mutex_t): Likewise.
	[XPG3 || XPG4] (pthread_mutexattr_t): Likewise.
	[XPG3 || XPG4] (pthread_once_t): Likewise.
	[XPG3 || XPG4] (pthread_rwlock_t): Likewise.
	[XPG3 || XPG4] (pthread_rwlockattr_t): Likewise.
	[XPG3 || XPG4 || UNIX98] (pthread_spinlock_t): Likewise.
	[XPG3 || XPG4] (pthread_t): Likewise.

	* conform/data/stdlib.h-data [XPG3 || XPG4 || UNIX98] (setenv): Do
	not expect.
	[XPG3 || XPG4 || UNIX98] (unsetenv): Likewise.

	* conform/data/math.h-data [XPG3 || XPG4 || UNIX98] (isnan):
	Change function return type to int.

	* conform/data/sys/mman.h-data [!POSIX] (POSIX_MADV_NORMAL):
	Change condition to [!POSIX && !XPG3 && !XPG4 && !UNIX98].
	[!POSIX] (POSIX_MADV_SEQUENTIAL): Likewise.
	[!POSIX] (POSIX_MADV_RANDOM): Likewise.
	[!POSIX] (POSIX_MADV_WILLNEED): Likewise.
	[!POSIX] (POSIX_MADV_DONTNEED): Likewise.
	[!POSIX] (posix_madvise): Likewise.
	(POSIX_TYPED_MEM_ALLOCATE): Condition on [!POSIX && !XPG3 && !XPG4
	&& !UNIX98].
	(POSIX_TYPED_MEM_ALLOCATE_CONTIG): Likewise.
	(POSIX_TYPED_MEM_MAP_ALLOCATABLE): Likewise.
	(mode_t): Likewise.
	(posix_mem_offset): Likewise.
	(posix_typed_mem_get_info): Likewise.
	(posix_typed_mem_open): Likewise.

	* conform/data/sys/stat.h-data [!POSIX && !POSIX2008] (mknodat):
	Change condition to [XOPEN2K8].

	* conform/conformtest.pl: Preprocess allow-header data with -x c
	instead of from stdin.
	(@headers): Add stdalign.h, stdbool.h and stdnoreturn.h.
	* conform/data/complex.h-data [C99-based standards] (cerf): Allow.
	[C99-based standards] (cerfc): Likewise.
	[C99-based standards] (cexp2): Likewise.
	[C99-based standards] (cexpm1): Likewise.
	[C99-based standards] (clog10): Likewise.
	[C99-based standards] (clog1p): Likewise.
	[C99-based standards] (clog2): Likewise.
	[C99-based standards] (clgamma): Likewise.
	[C99-based standards] (ctgamma): Likewise.
	[C99-based standards] (cerff): Likewise.
	[C99-based standards] (cerfcf): Likewise.
	[C99-based standards] (cexp2f): Likewise.
	[C99-based standards] (cexpm1f): Likewise.
	[C99-based standards] (clog10f): Likewise.
	[C99-based standards] (clog1pf): Likewise.
	[C99-based standards] (clog2f): Likewise.
	[C99-based standards] (clgammaf): Likewise.
	[C99-based standards] (ctgammaf): Likewise.
	[C99-based standards] (cerfl): Likewise.
	[C99-based standards] (cerfcl): Likewise.
	[C99-based standards] (cexp2l): Likewise.
	[C99-based standards] (cexpm1l): Likewise.
	[C99-based standards] (clog10l): Likewise.
	[C99-based standards] (clog1pl): Likewise.
	[C99-based standards] (clog2l): Likewise.
	[C99-based standards] (clgammal): Likewise.
	[C99-based standards] (ctgammal): Likewise.
	* conform/data/inttypes.h-data [C99-based standards]: Include
	stdint.h-data.  Remove all expectations for stdint.h contents.
	[C99-based standards] (PRI*): Do not allow.
	[C99-based standards] (SCN*): Likewise.
	[C99-based standards] (*_t): Likewise.
	[C99-based-standards] (PRId8): Expect macro.
	[C99-based-standards] (PRIi8): Likewise.
	[C99-based-standards] (PRIo8): Likewise.
	[C99-based-standards] (PRIu8): Likewise.
	[C99-based-standards] (PRIx8): Likewise.
	[C99-based-standards] (PRIX8): Likewise.
	[C99-based-standards] (SCNd8): Likewise.
	[C99-based-standards] (SCNi8): Likewise.
	[C99-based-standards] (SCNo8): Likewise.
	[C99-based-standards] (SCNu8): Likewise.
	[C99-based-standards] (SCNx8): Likewise.
	[C99-based-standards] (PRIdLEAST8): Likewise.
	[C99-based-standards] (PRIiLEAST8): Likewise.
	[C99-based-standards] (PRIoLEAST8): Likewise.
	[C99-based-standards] (PRIuLEAST8): Likewise.
	[C99-based-standards] (PRIxLEAST8): Likewise.
	[C99-based-standards] (PRIXLEAST8): Likewise.
	[C99-based-standards] (SCNdLEAST8): Likewise.
	[C99-based-standards] (SCNiLEAST8): Likewise.
	[C99-based-standards] (SCNoLEAST8): Likewise.
	[C99-based-standards] (SCNuLEAST8): Likewise.
	[C99-based-standards] (SCNxLEAST8): Likewise.
	[C99-based-standards] (PRIdFAST8): Likewise.
	[C99-based-standards] (PRIiFAST8): Likewise.
	[C99-based-standards] (PRIoFAST8): Likewise.
	[C99-based-standards] (PRIuFAST8): Likewise.
	[C99-based-standards] (PRIxFAST8): Likewise.
	[C99-based-standards] (PRIXFAST8): Likewise.
	[C99-based-standards] (SCNdFAST8): Likewise.
	[C99-based-standards] (SCNiFAST8): Likewise.
	[C99-based-standards] (SCNoFAST8): Likewise.
	[C99-based-standards] (SCNuFAST8): Likewise.
	[C99-based-standards] (SCNxFAST8): Likewise.
	[C99-based-standards] (PRId16): Likewise.
	[C99-based-standards] (PRIi16): Likewise.
	[C99-based-standards] (PRIo16): Likewise.
	[C99-based-standards] (PRIu16): Likewise.
	[C99-based-standards] (PRIx16): Likewise.
	[C99-based-standards] (PRIX16): Likewise.
	[C99-based-standards] (SCNd16): Likewise.
	[C99-based-standards] (SCNi16): Likewise.
	[C99-based-standards] (SCNo16): Likewise.
	[C99-based-standards] (SCNu16): Likewise.
	[C99-based-standards] (SCNx16): Likewise.
	[C99-based-standards] (PRIdLEAST16): Likewise.
	[C99-based-standards] (PRIiLEAST16): Likewise.
	[C99-based-standards] (PRIoLEAST16): Likewise.
	[C99-based-standards] (PRIuLEAST16): Likewise.
	[C99-based-standards] (PRIxLEAST16): Likewise.
	[C99-based-standards] (PRIXLEAST16): Likewise.
	[C99-based-standards] (SCNdLEAST16): Likewise.
	[C99-based-standards] (SCNiLEAST16): Likewise.
	[C99-based-standards] (SCNoLEAST16): Likewise.
	[C99-based-standards] (SCNuLEAST16): Likewise.
	[C99-based-standards] (SCNxLEAST16): Likewise.
	[C99-based-standards] (PRIdFAST16): Likewise.
	[C99-based-standards] (PRIiFAST16): Likewise.
	[C99-based-standards] (PRIoFAST16): Likewise.
	[C99-based-standards] (PRIuFAST16): Likewise.
	[C99-based-standards] (PRIxFAST16): Likewise.
	[C99-based-standards] (PRIXFAST16): Likewise.
	[C99-based-standards] (SCNdFAST16): Likewise.
	[C99-based-standards] (SCNiFAST16): Likewise.
	[C99-based-standards] (SCNoFAST16): Likewise.
	[C99-based-standards] (SCNuFAST16): Likewise.
	[C99-based-standards] (SCNxFAST16): Likewise.
	[C99-based-standards] (PRId32): Likewise.
	[C99-based-standards] (PRIi32): Likewise.
	[C99-based-standards] (PRIo32): Likewise.
	[C99-based-standards] (PRIu32): Likewise.
	[C99-based-standards] (PRIx32): Likewise.
	[C99-based-standards] (PRIX32): Likewise.
	[C99-based-standards] (SCNd32): Likewise.
	[C99-based-standards] (SCNi32): Likewise.
	[C99-based-standards] (SCNo32): Likewise.
	[C99-based-standards] (SCNu32): Likewise.
	[C99-based-standards] (SCNx32): Likewise.
	[C99-based-standards] (PRIdLEAST32): Likewise.
	[C99-based-standards] (PRIiLEAST32): Likewise.
	[C99-based-standards] (PRIoLEAST32): Likewise.
	[C99-based-standards] (PRIuLEAST32): Likewise.
	[C99-based-standards] (PRIxLEAST32): Likewise.
	[C99-based-standards] (PRIXLEAST32): Likewise.
	[C99-based-standards] (SCNdLEAST32): Likewise.
	[C99-based-standards] (SCNiLEAST32): Likewise.
	[C99-based-standards] (SCNoLEAST32): Likewise.
	[C99-based-standards] (SCNuLEAST32): Likewise.
	[C99-based-standards] (SCNxLEAST32): Likewise.
	[C99-based-standards] (PRIdFAST32): Likewise.
	[C99-based-standards] (PRIiFAST32): Likewise.
	[C99-based-standards] (PRIoFAST32): Likewise.
	[C99-based-standards] (PRIuFAST32): Likewise.
	[C99-based-standards] (PRIxFAST32): Likewise.
	[C99-based-standards] (PRIXFAST32): Likewise.
	[C99-based-standards] (SCNdFAST32): Likewise.
	[C99-based-standards] (SCNiFAST32): Likewise.
	[C99-based-standards] (SCNoFAST32): Likewise.
	[C99-based-standards] (SCNuFAST32): Likewise.
	[C99-based-standards] (SCNxFAST32): Likewise.
	[C99-based-standards] (PRId64): Likewise.
	[C99-based-standards] (PRIi64): Likewise.
	[C99-based-standards] (PRIo64): Likewise.
	[C99-based-standards] (PRIu64): Likewise.
	[C99-based-standards] (PRIx64): Likewise.
	[C99-based-standards] (PRIX64): Likewise.
	[C99-based-standards] (SCNd64): Likewise.
	[C99-based-standards] (SCNi64): Likewise.
	[C99-based-standards] (SCNo64): Likewise.
	[C99-based-standards] (SCNu64): Likewise.
	[C99-based-standards] (SCNx64): Likewise.
	[C99-based-standards] (PRIdLEAST64): Likewise.
	[C99-based-standards] (PRIiLEAST64): Likewise.
	[C99-based-standards] (PRIoLEAST64): Likewise.
	[C99-based-standards] (PRIuLEAST64): Likewise.
	[C99-based-standards] (PRIxLEAST64): Likewise.
	[C99-based-standards] (PRIXLEAST64): Likewise.
	[C99-based-standards] (SCNdLEAST64): Likewise.
	[C99-based-standards] (SCNiLEAST64): Likewise.
	[C99-based-standards] (SCNoLEAST64): Likewise.
	[C99-based-standards] (SCNuLEAST64): Likewise.
	[C99-based-standards] (SCNxLEAST64): Likewise.
	[C99-based-standards] (PRIdFAST64): Likewise.
	[C99-based-standards] (PRIiFAST64): Likewise.
	[C99-based-standards] (PRIoFAST64): Likewise.
	[C99-based-standards] (PRIuFAST64): Likewise.
	[C99-based-standards] (PRIxFAST64): Likewise.
	[C99-based-standards] (PRIXFAST64): Likewise.
	[C99-based-standards] (SCNdFAST64): Likewise.
	[C99-based-standards] (SCNiFAST64): Likewise.
	[C99-based-standards] (SCNoFAST64): Likewise.
	[C99-based-standards] (SCNuFAST64): Likewise.
	[C99-based-standards] (SCNxFAST64): Likewise.
	[C99-based-standards] (PRIdMAX): Likewise.
	[C99-based-standards] (PRIiMAX): Likewise.
	[C99-based-standards] (PRIoMAX): Likewise.
	[C99-based-standards] (PRIuMAX): Likewise.
	[C99-based-standards] (PRIxMAX): Likewise.
	[C99-based-standards] (PRIXMAX): Likewise.
	[C99-based-standards] (SCNdMAX): Likewise.
	[C99-based-standards] (SCNiMAX): Likewise.
	[C99-based-standards] (SCNoMAX): Likewise.
	[C99-based-standards] (SCNuMAX): Likewise.
	[C99-based-standards] (SCNxMAX): Likewise.
	[C99-based-standards] (PRIdPTR): Likewise.
	[C99-based-standards] (PRIiPTR): Likewise.
	[C99-based-standards] (PRIoPTR): Likewise.
	[C99-based-standards] (PRIuPTR): Likewise.
	[C99-based-standards] (PRIxPTR): Likewise.
	[C99-based-standards] (PRIXPTR): Likewise.
	[C99-based-standards] (SCNdPTR): Likewise.
	[C99-based-standards] (SCNiPTR): Likewise.
	[C99-based-standards] (SCNoPTR): Likewise.
	[C99-based-standards] (SCNuPTR): Likewise.
	[C99-based-standards] (SCNxPTR): Likewise.
	* conform/data/iso646.h-data [ISO C standards] (*_t): Do not
	allow.
	* conform/data/stdint.h-data: Update comments to clarify
	requirements.
	[C99-based standards] (INT8_MIN): Use macro-int-constant.  Specify
	type.
	[C99-based standards] (INT8_MAX): Likewise.
	[C99-based standards] (INT16_MIN): Likewise.
	[C99-based standards] (INT16_MAX): Likewise.
	[C99-based standards] (INT32_MIN): Likewise.
	[C99-based standards] (INT32_MAX): Likewise.
	[C99-based standards] (INT64_MIN): Likewise.
	[C99-based standards] (INT64_MAX): Likewise.
	[C99-based standards] (UINT8_MAX): Likewise.
	[C99-based standards] (UINT16_MAX): Likewise.
	[C99-based standards] (UINT32_MAX): Likewise.
	[C99-based standards] (UINT64_MAX): Likewise.
	[C99-based standards] (INT_LEAST8_MIN): Likewise.
	[C99-based standards] (INT_LEAST8_MAX): Likewise.
	[C99-based standards] (INT_LEAST16_MIN): Likewise.
	[C99-based standards] (INT_LEAST16_MAX): Likewise.
	[C99-based standards] (INT_LEAST32_MIN): Likewise.
	[C99-based standards] (INT_LEAST32_MAX): Likewise.
	[C99-based standards] (INT_LEAST64_MIN): Likewise.
	[C99-based standards] (INT_LEAST64_MAX): Likewise.
	[C99-based standards] (UINT_LEAST8_MAX): Likewise.
	[C99-based standards] (UINT_LEAST16_MAX): Likewise.
	[C99-based standards] (UINT_LEAST32_MAX): Likewise.
	[C99-based standards] (UINT_LEAST64_MAX): Likewise.
	[C99-based standards] (INT_FAST8_MIN): Likewise.
	[C99-based standards] (INT_FAST8_MAX): Likewise.
	[C99-based standards] (INT_FAST16_MIN): Likewise.
	[C99-based standards] (INT_FAST16_MAX): Likewise.
	[C99-based standards] (INT_FAST32_MIN): Likewise.
	[C99-based standards] (INT_FAST32_MAX): Likewise.
	[C99-based standards] (INT_FAST64_MIN): Likewise.
	[C99-based standards] (INT_FAST64_MAX): Likewise.
	[C99-based standards] (UINT_FAST8_MAX): Likewise.
	[C99-based standards] (UINT_FAST16_MAX): Likewise.
	[C99-based standards] (UINT_FAST32_MAX): Likewise.
	[C99-based standards] (UINT_FAST64_MAX): Likewise.
	[C99-based standards] (INTPTR_MIN): Likewise.
	[C99-based standards] (INTPTR_MAX): Likewise.
	[C99-based standards] (UINTPTR_MAX): Likewise.
	[C99-based standards] (INTMAX_MIN): Likewise.
	[C99-based standards] (INTMAX_MAX): Likewise.
	[C99-based standards] (UINTMAX_MAX): Likewise.
	[C99-based standards] (PTRDIFF_MIN): Likewise.
	[C99-based standards] (PTRDIFF_MAX): Likewise.
	[C99-based standards] (SIG_ATOMIC_MAX): Likewise.
	[C99-based standards] (SIZE_MAX): Likewise.
	[C99-based standards] (WCHAR_MAX): Likewise.
	[C99-based standards] (WINT_MAX): Likewise.
	[C99-based standards] (SIG_ATOMIC_MIN): Likewise.  Do not specify
	constraint on value.
	[C99-based standards] (WCHAR_MIN): Likewise.
	[C99-based standards] (WINT_MIN): Likewise.
	[C99-based standards] (*_t): Allow.
	* conform/data/tgmath.h-data [XOPEN2K || POSIX2008]: Change
	condition to [!ISO && !POSIX && !XPG3 && !XPG4 && !UNIX98].
	Include math.h-data and complex.h-data.  Remove all expectations
	of math.h and complex.h contents.
	* conform/data/uchar.h-data [ISO11] (c16rtomb): Remove stray "16"
	at end of line.
	* conform/data/wchar.h-data [!ISO && !POSIX && !XPG3 && !XPG4]
	(struct tm): Expect tag.
	[C99-based-standards] (wcstof): Expect function.
	[C99-based-standards] (wcstold): Likewise.
	[C99-based-standards] (wcstoll): Likewise.
	[C99-based-standards] (wcstoull): Likewise.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WCHAR_MIN): Use
	macro-int-constant.  Specify type.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WCHAR_MAX): Likewise.  Specify
	constraint on value.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WEOF): Use macro-constant.
	Specify type.
	[!ISO && !POSIX && !XPG3 && !XPG4] (NULL): Use macro-constant.
	Specify value.
	[ISO C standards]: Do not allow headers.
	[!ISO && !POSIX && !XPG3 && !XPG4] (wcs*): Change to
	wcs[abcdefghijklmnopqrstuvwxyz]*.
	[ISO C standards] (*_t): Do not allow.
	* conform/data/wctype.h-data [C99-based standards] (iswblank):
	Expect function.
	[XOPEN2K8 || POSIX2008] (iswblank_l): Likewise.
	[!ISO && !POSIX && !XPG3 && !XPG4] (WEOF): Use macro-constant.
	Specify type.
	[ISO C standards]: Do not allow headers.
	[!ISO && !POSIX && !XPG3 && !XPG4] (is*): Change to
	is[abcdefghijklmnopqrstuvwxyz]*.
	[!ISO && !POSIX && !XPG3 && !XPG4] (to*): Change to
	to[abcdefghijklmnopqrstuvwxyz]*.
	[ISO C standards] (*_t): Do not allow.
	* conform/data/stdalign.h-data: New file.
	* conform/data/stdbool.h-data: Likewise.
	* conform/data/stdnoreturn.h-data: Likewise.

2012-11-07  Roland McGrath  <roland@hack.frob.com>

	[BZ #14815]
	* manual/filesys.texi (Directory Entries): Typo fix.
	Reported by <h-iwamoto@kit.hi-ho.ne.jp>.

2012-11-07  Marcus Shawcroft  <marcus.shawcroft@linaro.org>

	* elf/elf.h (EM_AARCH64): New macro.
	(R_AARCH64_NONE, R_AARCH64_ABS64, R_AARCH64_ABS32): Likewise.
	(R_AARCH64_COPY, R_AARCH64_GLOB_DAT, R_AARCH64_JUMP_SLOT): Likewise.
	(R_AARCH64_RELATIVE, R_AARCH64_TLS_DTPMOD64): Likewise.
	(R_AARCH64_TLS_DTPREL64, R_AARCH64_TLS_TPREL64): Likewise.
	(R_AARCH64_TLSDESC): Likewise.
	(NT_ARM_TLS): Likewise.
	(NT_ARM_HW_BREAK): Likewise.
	(NT_ARM_HW_WATCH): Likewise.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14811]
	* sysdeps/i386/fpu/e_powl.S (pm79): New object.
	(__ieee754_powl): Saturate nonzero exponents with absolute value
	below 0x1p-79 to +/- 0x1p-79.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Saturate nonzero
	exponents with absolute value below 0x1p-64 to +/- 0x1p-64.
	* sysdeps/ieee754/flt-32/e_powf.c (__ieee754_powf): Saturate
	nonzero exponents with absolute value below 0x1p-32 to +/-
	0x1p-32.
	* sysdeps/x86_64/fpu/e_powl.S (pm79): New object.
	(__ieee754_powl): Saturate nonzero exponents with absolute value
	below 0x1p-79 to +/- 0x1p-79.
	* math/libm-test.inc (pow_test): Add more tests.

2012-11-07  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/dl-procinfo.c (_dl_s390_cap_flags): Sync
	_dl_s390_cap_flags with kernel. Increase string length.
	(_dl_s390_platforms): Add z196 and zEC12.

2012-11-07  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/time.h-data [!XOPEN21K && !XOPEN2K8 && !POSIX2008]:
	Change XOPEN21K to XOPEN2K.

2012-11-06  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* string/memmove.c: Use memcpy when possible.

2012-11-06  Andreas Jaeger  <aj@suse.de>

	* po/eo.po: Update from translation team.

2012-11-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14793]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): In case of large z
	exponent and small x and y exponents, scale x or y up.  Increase
	by 2 the exponent used in scaling up.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-11-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14805]
	* sysdeps/sh/sh4/fpu/bits/fenv.h (FE_DFL_ENV): Use cast to const
	fenv_t *.

	[BZ #14801]
	* sysdeps/s390/fpu/bits/fenv.h (fenv_t): Use implementation
	namespace for names of struct fields.
	* sysdeps/s390/fpu/fegetenv.c (fegetenv): Update references to
	fenv_t fields.
	* sysdeps/s390/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/s390/fpu/fesetenv.c (fesetenv): Likewise.

2012-11-04  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	[BZ #3665]
	* sysdeps/mach/hurd/bits/errno.h: Regenerated.

2012-11-04  Thomas Schwinge  <thomas@codesourcery.com>

	* csu/libc-start.c (LIBC_START_MAIN): Conditionalize use of
	PTR_DEMANGLE.

	[BZ #5246]
	* sysdeps/mach/hurd/i386/____longjmp_chk.S: Conditionalize use of
	PTR_DEMANGLE.

2012-11-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14797]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Compute cases that
	definitely overflow as x * y not x * y + z.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-11-04  Thomas Schwinge  <thomas@codesourcery.com>

	[BZ #157]

	* include/stub-tag.h: Remove file.
	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Don't emit
	'#include' of it.
	* manual/maint.texi (Porting): Don't reference it.
	* Makerules ($(objpfx)stubs): Likewise.
	* dirent/closedir.c: Don't include <stub-tag.h>.
	* dirent/dirfd.c: Likewise.
	* dirent/fdopendir.c: Likewise.
	* dirent/getdents.c: Likewise.
	* dirent/getdents64.c: Likewise.
	* dirent/opendir.c: Likewise.
	* dirent/readdir.c: Likewise.
	* dirent/readdir64.c: Likewise.
	* dirent/readdir64_r.c: Likewise.
	* dirent/readdir_r.c: Likewise.
	* dirent/rewinddir.c: Likewise.
	* dirent/seekdir.c: Likewise.
	* dirent/telldir.c: Likewise.
	* gmon/profil.c: Likewise.
	* grp/setgroups.c: Likewise.
	* inet/if_index.c: Likewise.
	* io/access.c: Likewise.
	* io/chdir.c: Likewise.
	* io/chmod.c: Likewise.
	* io/chown.c: Likewise.
	* io/close.c: Likewise.
	* io/dup.c: Likewise.
	* io/dup2.c: Likewise.
	* io/dup3.c: Likewise.
	* io/euidaccess.c: Likewise.
	* io/faccessat.c: Likewise.
	* io/fchdir.c: Likewise.
	* io/fchmod.c: Likewise.
	* io/fchmodat.c: Likewise.
	* io/fchown.c: Likewise.
	* io/fchownat.c: Likewise.
	* io/fcntl.c: Likewise.
	* io/flock.c: Likewise.
	* io/fstatfs.c: Likewise.
	* io/fstatfs64.c: Likewise.
	* io/fstatvfs.c: Likewise.
	* io/fstatvfs64.c: Likewise.
	* io/futimens.c: Likewise.
	* io/fxstat.c: Likewise.
	* io/fxstat64.c: Likewise.
	* io/fxstatat.c: Likewise.
	* io/fxstatat64.c: Likewise.
	* io/getcwd.c: Likewise.
	* io/isatty.c: Likewise.
	* io/lchmod.c: Likewise.
	* io/lchown.c: Likewise.
	* io/link.c: Likewise.
	* io/linkat.c: Likewise.
	* io/lseek.c: Likewise.
	* io/lseek64.c: Likewise.
	* io/lxstat64.c: Likewise.
	* io/mkdir.c: Likewise.
	* io/mkdirat.c: Likewise.
	* io/mkfifo.c: Likewise.
	* io/mkfifoat.c: Likewise.
	* io/open.c: Likewise.
	* io/open64.c: Likewise.
	* io/openat.c: Likewise.
	* io/openat64.c: Likewise.
	* io/pipe.c: Likewise.
	* io/pipe2.c: Likewise.
	* io/poll.c: Likewise.
	* io/posix_fadvise.c: Likewise.
	* io/posix_fadvise64.c: Likewise.
	* io/posix_fallocate.c: Likewise.
	* io/posix_fallocate64.c: Likewise.
	* io/read.c: Likewise.
	* io/readlink.c: Likewise.
	* io/readlinkat.c: Likewise.
	* io/rmdir.c: Likewise.
	* io/sendfile.c: Likewise.
	* io/sendfile64.c: Likewise.
	* io/statfs.c: Likewise.
	* io/statfs64.c: Likewise.
	* io/statvfs.c: Likewise.
	* io/statvfs64.c: Likewise.
	* io/symlink.c: Likewise.
	* io/symlinkat.c: Likewise.
	* io/ttyname.c: Likewise.
	* io/ttyname_r.c: Likewise.
	* io/umask.c: Likewise.
	* io/unlink.c: Likewise.
	* io/unlinkat.c: Likewise.
	* io/utime.c: Likewise.
	* io/utimensat.c: Likewise.
	* io/write.c: Likewise.
	* io/xmknod.c: Likewise.
	* io/xmknodat.c: Likewise.
	* io/xstat.c: Likewise.
	* io/xstat64.c: Likewise.
	* login/getpt.c: Likewise.
	* login/grantpt.c: Likewise.
	* login/unlockpt.c: Likewise.
	* math/e_acoshl.c: Likewise.
	* math/e_acosl.c: Likewise.
	* math/e_asinl.c: Likewise.
	* math/e_atan2l.c: Likewise.
	* math/e_atanhl.c: Likewise.
	* math/e_coshl.c: Likewise.
	* math/e_expl.c: Likewise.
	* math/e_fmodl.c: Likewise.
	* math/e_gammal_r.c: Likewise.
	* math/e_hypotl.c: Likewise.
	* math/e_j0l.c: Likewise.
	* math/e_j1l.c: Likewise.
	* math/e_jnl.c: Likewise.
	* math/e_lgammal_r.c: Likewise.
	* math/e_log10l.c: Likewise.
	* math/e_log2l.c: Likewise.
	* math/e_logl.c: Likewise.
	* math/e_powl.c: Likewise.
	* math/e_rem_pio2l.c: Likewise.
	* math/e_sinhl.c: Likewise.
	* math/e_sqrtl.c: Likewise.
	* math/fclrexcpt.c: Likewise.
	* math/fedisblxcpt.c: Likewise.
	* math/feenablxcpt.c: Likewise.
	* math/fegetenv.c: Likewise.
	* math/fegetexcept.c: Likewise.
	* math/fegetround.c: Likewise.
	* math/feholdexcpt.c: Likewise.
	* math/fesetenv.c: Likewise.
	* math/fesetround.c: Likewise.
	* math/feupdateenv.c: Likewise.
	* math/fgetexcptflg.c: Likewise.
	* math/fraiseexcpt.c: Likewise.
	* math/fsetexcptflg.c: Likewise.
	* math/ftestexcept.c: Likewise.
	* math/k_cosl.c: Likewise.
	* math/k_rem_pio2l.c: Likewise.
	* math/k_sinl.c: Likewise.
	* math/k_tanl.c: Likewise.
	* math/s_asinhl.c: Likewise.
	* math/s_atanl.c: Likewise.
	* math/s_cbrtl.c: Likewise.
	* math/s_erfl.c: Likewise.
	* math/s_expm1l.c: Likewise.
	* math/s_log1pl.c: Likewise.
	* math/s_tanhl.c: Likewise.
	* misc/acct.c: Likewise.
	* misc/brk.c: Likewise.
	* misc/chflags.c: Likewise.
	* misc/chroot.c: Likewise.
	* misc/fchflags.c: Likewise.
	* misc/fgetxattr.c: Likewise.
	* misc/flistxattr.c: Likewise.
	* misc/fremovexattr.c: Likewise.
	* misc/fsetxattr.c: Likewise.
	* misc/fsync.c: Likewise.
	* misc/ftruncate.c: Likewise.
	* misc/futimes.c: Likewise.
	* misc/futimesat.c: Likewise.
	* misc/getdomain.c: Likewise.
	* misc/getdtsz.c: Likewise.
	* misc/gethostid.c: Likewise.
	* misc/gethostname.c: Likewise.
	* misc/getloadavg.c: Likewise.
	* misc/getpagesize.c: Likewise.
	* misc/getsysstats.c: Likewise.
	* misc/getxattr.c: Likewise.
	* misc/gtty.c: Likewise.
	* misc/ioctl.c: Likewise.
	* misc/lgetxattr.c: Likewise.
	* misc/listxattr.c: Likewise.
	* misc/llistxattr.c: Likewise.
	* misc/lremovexattr.c: Likewise.
	* misc/lsetxattr.c: Likewise.
	* misc/lutimes.c: Likewise.
	* misc/madvise.c: Likewise.
	* misc/mincore.c: Likewise.
	* misc/mlock.c: Likewise.
	* misc/mlockall.c: Likewise.
	* misc/mmap.c: Likewise.
	* misc/mprotect.c: Likewise.
	* misc/msync.c: Likewise.
	* misc/munlock.c: Likewise.
	* misc/munlockall.c: Likewise.
	* misc/munmap.c: Likewise.
	* misc/preadv.c: Likewise.
	* misc/preadv64.c: Likewise.
	* misc/ptrace.c: Likewise.
	* misc/pwritev.c: Likewise.
	* misc/pwritev64.c: Likewise.
	* misc/readv.c: Likewise.
	* misc/reboot.c: Likewise.
	* misc/remap_file_pages.c: Likewise.
	* misc/removexattr.c: Likewise.
	* misc/revoke.c: Likewise.
	* misc/select.c: Likewise.
	* misc/setdomain.c: Likewise.
	* misc/setegid.c: Likewise.
	* misc/seteuid.c: Likewise.
	* misc/sethostid.c: Likewise.
	* misc/sethostname.c: Likewise.
	* misc/setregid.c: Likewise.
	* misc/setreuid.c: Likewise.
	* misc/setxattr.c: Likewise.
	* misc/sstk.c: Likewise.
	* misc/stty.c: Likewise.
	* misc/swapoff.c: Likewise.
	* misc/swapon.c: Likewise.
	* misc/sync.c: Likewise.
	* misc/syncfs.c: Likewise.
	* misc/syscall.c: Likewise.
	* misc/truncate.c: Likewise.
	* misc/ualarm.c: Likewise.
	* misc/usleep.c: Likewise.
	* misc/ustat.c: Likewise.
	* misc/utimes.c: Likewise.
	* misc/vhangup.c: Likewise.
	* misc/writev.c: Likewise.
	* posix/_exit.c: Likewise.
	* posix/alarm.c: Likewise.
	* posix/execve.c: Likewise.
	* posix/fexecve.c: Likewise.
	* posix/fork.c: Likewise.
	* posix/fpathconf.c: Likewise.
	* posix/getaddrinfo.c: Likewise.
	* posix/getegid.c: Likewise.
	* posix/geteuid.c: Likewise.
	* posix/getgid.c: Likewise.
	* posix/getgroups.c: Likewise.
	* posix/getlogin.c: Likewise.
	* posix/getlogin_r.c: Likewise.
	* posix/getpgid.c: Likewise.
	* posix/getpid.c: Likewise.
	* posix/getppid.c: Likewise.
	* posix/getresgid.c: Likewise.
	* posix/getresuid.c: Likewise.
	* posix/getsid.c: Likewise.
	* posix/getuid.c: Likewise.
	* posix/glob64.c: Likewise.
	* posix/nanosleep.c: Likewise.
	* posix/pathconf.c: Likewise.
	* posix/pause.c: Likewise.
	* posix/posix_madvise.c: Likewise.
	* posix/pread.c: Likewise.
	* posix/pread64.c: Likewise.
	* posix/pwrite.c: Likewise.
	* posix/pwrite64.c: Likewise.
	* posix/sched_getaffinity.c: Likewise.
	* posix/sched_getp.c: Likewise.
	* posix/sched_gets.c: Likewise.
	* posix/sched_primax.c: Likewise.
	* posix/sched_primin.c: Likewise.
	* posix/sched_rr_gi.c: Likewise.
	* posix/sched_setaffinity.c: Likewise.
	* posix/sched_setp.c: Likewise.
	* posix/sched_sets.c: Likewise.
	* posix/sched_yield.c: Likewise.
	* posix/setgid.c: Likewise.
	* posix/setlogin.c: Likewise.
	* posix/setpgid.c: Likewise.
	* posix/setresgid.c: Likewise.
	* posix/setresuid.c: Likewise.
	* posix/setsid.c: Likewise.
	* posix/setuid.c: Likewise.
	* posix/sleep.c: Likewise.
	* posix/spawni.c: Likewise.
	* posix/sysconf.c: Likewise.
	* posix/times.c: Likewise.
	* posix/wait.c: Likewise.
	* posix/wait3.c: Likewise.
	* posix/wait4.c: Likewise.
	* posix/waitpid.c: Likewise.
	* resolv/gai_sigqueue.c: Likewise.
	* resource/getpriority.c: Likewise.
	* resource/getrlimit.c: Likewise.
	* resource/getrusage.c: Likewise.
	* resource/nice.c: Likewise.
	* resource/setpriority.c: Likewise.
	* resource/setrlimit.c: Likewise.
	* resource/ulimit.c: Likewise.
	* rt/aio_cancel.c: Likewise.
	* rt/aio_fsync.c: Likewise.
	* rt/aio_read.c: Likewise.
	* rt/aio_sigqueue.c: Likewise.
	* rt/aio_suspend.c: Likewise.
	* rt/aio_write.c: Likewise.
	* rt/clock_getres.c: Likewise.
	* rt/clock_gettime.c: Likewise.
	* rt/clock_nanosleep.c: Likewise.
	* rt/clock_settime.c: Likewise.
	* rt/lio_listio.c: Likewise.
	* rt/mq_close.c: Likewise.
	* rt/mq_getattr.c: Likewise.
	* rt/mq_notify.c: Likewise.
	* rt/mq_open.c: Likewise.
	* rt/mq_receive.c: Likewise.
	* rt/mq_send.c: Likewise.
	* rt/mq_setattr.c: Likewise.
	* rt/mq_timedreceive.c: Likewise.
	* rt/mq_timedsend.c: Likewise.
	* rt/mq_unlink.c: Likewise.
	* rt/shm_open.c: Likewise.
	* rt/shm_unlink.c: Likewise.
	* rt/timer_create.c: Likewise.
	* rt/timer_delete.c: Likewise.
	* rt/timer_getoverr.c: Likewise.
	* rt/timer_gettime.c: Likewise.
	* rt/timer_settime.c: Likewise.
	* setjmp/__longjmp.c: Likewise.
	* setjmp/setjmp.c: Likewise.
	* signal/kill.c: Likewise.
	* signal/killpg.c: Likewise.
	* signal/raise.c: Likewise.
	* signal/sigaction.c: Likewise.
	* signal/sigaltstack.c: Likewise.
	* signal/sigblock.c: Likewise.
	* signal/sigignore.c: Likewise.
	* signal/sigintr.c: Likewise.
	* signal/signal.c: Likewise.
	* signal/sigpause.c: Likewise.
	* signal/sigpending.c: Likewise.
	* signal/sigqueue.c: Likewise.
	* signal/sigreturn.c: Likewise.
	* signal/sigset.c: Likewise.
	* signal/sigsetmask.c: Likewise.
	* signal/sigstack.c: Likewise.
	* signal/sigsuspend.c: Likewise.
	* signal/sigtimedwait.c: Likewise.
	* signal/sigvec.c: Likewise.
	* signal/sigwait.c: Likewise.
	* signal/sigwaitinfo.c: Likewise.
	* signal/sysv_signal.c: Likewise.
	* socket/accept.c: Likewise.
	* socket/accept4.c: Likewise.
	* socket/bind.c: Likewise.
	* socket/connect.c: Likewise.
	* socket/getpeername.c: Likewise.
	* socket/getsockname.c: Likewise.
	* socket/getsockopt.c: Likewise.
	* socket/isfdtype.c: Likewise.
	* socket/listen.c: Likewise.
	* socket/recv.c: Likewise.
	* socket/recvfrom.c: Likewise.
	* socket/recvmsg.c: Likewise.
	* socket/send.c: Likewise.
	* socket/sendmsg.c: Likewise.
	* socket/sendto.c: Likewise.
	* socket/setsockopt.c: Likewise.
	* socket/shutdown.c: Likewise.
	* socket/sockatmark.c: Likewise.
	* socket/socket.c: Likewise.
	* socket/socketpair.c: Likewise.
	* stdio-common/ctermid.c: Likewise.
	* stdio-common/cuserid.c: Likewise.
	* stdio-common/remove.c: Likewise.
	* stdio-common/rename.c: Likewise.
	* stdio-common/renameat.c: Likewise.
	* stdio-common/tempname.c: Likewise.
	* stdlib/getcontext.c: Likewise.
	* stdlib/makecontext.c: Likewise.
	* stdlib/setcontext.c: Likewise.
	* stdlib/swapcontext.c: Likewise.
	* stdlib/system.c: Likewise.
	* streams/fattach.c: Likewise.
	* streams/fdetach.c: Likewise.
	* streams/getmsg.c: Likewise.
	* streams/getpmsg.c: Likewise.
	* streams/putmsg.c: Likewise.
	* streams/putpmsg.c: Likewise.
	* sysdeps/unix/bsd/getpt.c: Likewise.
	* sysdeps/unix/sysv/linux/epoll_pwait.c: Likewise.
	* sysdeps/unix/sysv/linux/futimens.c: Likewise.
	* sysdeps/unix/sysv/linux/lutimes.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sync_file_range.c:
	Likewise.
	* sysdeps/unix/sysv/linux/readahead.c: Likewise.
	* sysdeps/unix/sysv/linux/sync_file_range.c: Likewise.
	* sysdeps/unix/sysv/linux/utimensat.c: Likewise.
	* sysvipc/msgctl.c: Likewise.
	* sysvipc/msgget.c: Likewise.
	* sysvipc/msgrcv.c: Likewise.
	* sysvipc/msgsnd.c: Likewise.
	* sysvipc/semctl.c: Likewise.
	* sysvipc/semget.c: Likewise.
	* sysvipc/semop.c: Likewise.
	* sysvipc/semtimedop.c: Likewise.
	* sysvipc/shmat.c: Likewise.
	* sysvipc/shmctl.c: Likewise.
	* sysvipc/shmdt.c: Likewise.
	* sysvipc/shmget.c: Likewise.
	* termios/tcdrain.c: Likewise.
	* termios/tcflow.c: Likewise.
	* termios/tcflush.c: Likewise.
	* termios/tcgetattr.c: Likewise.
	* termios/tcgetpgrp.c: Likewise.
	* termios/tcsendbrk.c: Likewise.
	* termios/tcsetattr.c: Likewise.
	* termios/tcsetpgrp.c: Likewise.
	* time/adjtime.c: Likewise.
	* time/clock.c: Likewise.
	* time/getitimer.c: Likewise.
	* time/gettimeofday.c: Likewise.
	* time/setitimer.c: Likewise.
	* time/settimeofday.c: Likewise.
	* time/stime.c: Likewise.
	* time/time.c: Likewise.

2012-11-04  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/generic/paths.h (_PATH_STDPATH): Remove /usr/contrib/bin and
	/usr/old/bin.

	* sysdeps/generic/paths.h (_PATH_MNTTAB, _PATH_MOUNTED): Use tabs
	instead of spaces.
	* sysdeps/unix/sysv/linux/paths.h (_PATH_UTMP, _PATH_WTMP): Likewise.

2012-11-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14796]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Set rounding mode to
	FE_TONEAREST before applying Dekker multiplication and Knuth
	addition.  Clear inexact exceptions and check for exact zero
	results afterwards.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	* sysdeps/generic/math_private.h (default_libc_fesetround): New
	function.
	(libc_fesetround): New macro.
	(libc_fesetroundf): Likewise.
	(libc_fesetroundl): Likewise.
	* sysdeps/i386/fpu/fenv_private.h (libc_fesetround_sse): New
	function.
	(libc_fesetround_387): Likewise.
	(libc_fesetroundf): New macro.
	(libc_fesetround): Likewise.
	(libc_fesetroundl): Likewise.
	* sysdeps/sparc/fpu/fenv_private.h (libc_fesetround): New
	function.
	(libc_fesetroundf): New macro.
	(libc_fesetround): Likewise.
	(libc_fesetroundl): Likewise.
	* include/fenv.h (feclearexcept): Add libm_hidden_proto.
	* math/fclrexcpt.c (feclearexcept): Add libm_hidden_ver.
	* sysdeps/i386/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_ver.
	* sysdeps/powerpc/fpu/fclrexcpt.c (feclearexcept): Likewise.
	* sysdeps/s390/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_def.
	* sysdeps/sh/sh4/fpu/fclrexcpt.c (feclearexcept): Likewise.
	* sysdeps/sparc/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_ver.
	* sysdeps/x86_64/fpu/fclrexcpt.c (feclearexcept): Add
	libm_hidden_def.

	[BZ #3439]
	* sysdeps/powerpc/bits/fenv.h (FE_INEXACT): Define macro to
	integer constant usable in #if and use that to give value to enum
	constant.
	(FE_DIVBYZERO): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_INVALID): Likewise.
	(FE_INVALID_SNAN): Likewise.
	(FE_INVALID_ISI): Likewise.
	(FE_INVALID_IDI): Likewise.
	(FE_INVALID_ZDZ): Likewise.
	(FE_INVALID_IMZ): Likewise.
	(FE_INVALID_COMPARE): Likewise.
	(FE_INVALID_SOFTWARE): Likewise.
	(FE_INVALID_SQRT): Likewise.
	(FE_INVALID_INTEGER_CONVERSION): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_TOWARDZERO): Likewise.
	(FE_UPWARD): Likewise.
	(FE_DOWNWARD): Likewise.
	* sysdeps/s390/fpu/bits/fenv.h (FE_INVALID): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_INEXACT): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_DOWNWARD): Likewise.
	(FE_UPWARD): Likewise.
	(FE_TOWARDZERO): Likewise.
	* sysdeps/sh/sh4/fpu/bits/fenv.h (FE_INEXACT): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_INVALID): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_TOWARDZERO): Likewise.
	* sysdeps/sparc/fpu/bits/fenv.h (FE_INVALID): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_INEXACT): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_TOWARDZERO): Likewise.
	(FE_UPWARD): Likewise.
	(FE_DOWNWARD): Likewise.
	* sysdeps/x86/fpu/bits/fenv.h (FE_INVALID): Likewise.
	(FE_DIVBYZERO): Likewise.
	(FE_OVERFLOW): Likewise.
	(FE_UNDERFLOW): Likewise.
	(FE_INEXACT): Likewise.
	(FE_TONEAREST): Likewise.
	(FE_DOWNWARD): Likewise.
	(FE_UPWARD): Likewise.
	(FE_TOWARDZERO): Likewise.

2012-11-02  Chris Metcalf  <cmetcalf@tilera.com>

	* elf/elf.h (R_TILEGX_IMM16_X[01]_HW[012]_(|LAST_)PLT_PCREL): Add.

2012-11-03  Andreas Schwab  <schwab@linux-m68k.org>

	* scripts/cross-test-ssh.sh (command): Use newlines to separate
	commands.  Quote $PWD.
	(blacklist_exports): Don't use remove_newlines.  Replace "declare
	-x" by "export".
	(remove_newlines): Remove.

2012-11-02  H.J. Lu  <hongjiu.lu@intel.com>

	* stdlib/Makefile (headers): Add bits/stdlib-float.h.
	* stdlib/stdlib.h (atof): Moved to ...
	* include/bits/stdlib-float.h: Here.  New file.
	* stdlib/stdlib.h: Include <bits/stdlib-float.h>.
	* stdlib/bits/stdlib-float.h: New file.
	* sysdeps/x86/Makefile (CFLAGS-.os): Compile rtld routines with
	-mno-sse -mno-mmx.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c: Include
	<xmmintrin.h>.

2012-11-02  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl (@headers): Add fenv.h.
	* conform/data/fenv.h-data: New file.
	* include/fenv.h [_ISOMAC]: Disable all contents of file except
	include of <math/fenv.h>.

	* conform/data/complex.h-data [ISO99 || ISO11 || XOPEN2K ||
	POSIX2008]: Change condition to [!ISO && !POSIX && !XPG3 && !XPG4
	&& !UNIX98].  Enables tests for XOPEN2K8.
	* conform/data/inttypes.h-data [ISO99 || ISO11 || XOPEN2K ||
	POSIX2008]: Likewise.

	* conform/data/sys/wait.h-data [XPG3 || XOPEN2K8 || POSIX2008]
	(struct rusage): Do not expect type or its members.

	[BZ #3439]
	* math/math.h (FP_NAN): Define macro to integer constant usable in
	#if and use that to give value to enum constant.
	(FP_INFINITE): Likewise.
	(FP_ZERO): Likewise.
	(FP_SUBNORMAL): Likewise.
	(FP_NORMAL): Likewise.

2012-11-02  Andreas Schwab  <schwab@linux-m68k.org>

	* iconvdata/bug-iconv8.c (do_test): Use %z for size_t arguments.
	* iconvdata/bug-iconv9.c (do_test): Use %t for ptrdiff_t
	arguments.

2012-11-02  Roland McGrath  <roland@hack.frob.com>

	* aclocal.m4 (GLIBC_AUTOCONF_VERSION): New macro.
	Check that AC_AUTOCONF_VERSION matches it and m4_fatal at
	autoconf-time if not.
	* configure.in: Remove AC_PREREQ.

2012-11-02  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/sys/platform/ppc.h (__ppc_get_timebase): Use
	__builtin_ppc_get_timebase when building with GCC >= 4.8 instead
	of the internal implementation.

2012-11-02  Joseph Myers  <joseph@codesourcery.com>

	* include/sys/syslog.h [_ISOMAC]: Disable all contents of file
	except include of <misc/sys/syslog.h>.

2012-11-01  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S: If the
	function returns with a NULL context exit with zero.

2012-11-01  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile (cflags): Remove -mnew-mnemonics.

2012-11-01  H.J. Lu  <hongjiu.lu@intel.com>

	* catgets/test-gencat.sh (run_program_prefix): Renamed to ...
	(run_program_cmd): This.
	* localedata/tst-langinfo.sh (run_program_prefix): Removed.
	(tst_langinfo): New variable.  Use it.

2012-11-01  Sebastan Andrzej Siewior  <bigeasy@linutronix.de>

	* sysdeps/powerpc/powerpc32/dl-trampoline.S: Put __NO_FPRS__ around
	floating point opcodes.

2012-11-01  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/hurd/Makefile (link-libc-static-tests): New
	variable.

	* elf/dl-support.c: Unconditionally include "setup-vdso.h".

	* sysdeps/mach/hurd/powerpc: Remove directory.
	* sysdeps/mach/powerpc: Likewise.

2012-11-01  Andreas Schwab  <schwab@linux-m68k.org>

	* scripts/check-local-headers.sh: Ignore c++ headers.

2012-11-01  Thomas Schwinge  <thomas@codesourcery.com>

	* libio/genops.c (_IO_flush_all_lockp): Use NULL rather than 0 for
	__libc_cleanup_region_start argument.

2012-11-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14784]
	[BZ #14785]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Handle cases with small
	x * y using scaling, not as x * y + z.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-11-01  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/hurd/bits/param.h: Remove stray #endif.

2012-10-31  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/sh/Makefile [$(subdir) = debug] (CFLAGS-backtrace.c):
	New variable.

2012-10-31  Thomas Schwinge  <thomas@codesourcery.com>

	* rt/tst-shm.c (worker): Correct checking for mmap failure.

2012-10-31  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Fix sort order.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.

2012-10-31  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Fix the order of the list for glibc 2.17.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.

2012-10-31  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-10-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14610]
	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c (__ieee754_atan2l): Check
	for low part of x being zero before using __atanl (y).
	* math/libm-test.inc (atan2_test): Add another test.

	* manual/install.texi (Configuring and compiling): Document
	general use of test-wrapper and test-wrapper-env.
	* INSTALL: Regenerated.

	* sysdeps/ieee754/dbl-64/s_fma.c: Include <tininess.h>.
	(__fma): Do not extract and scale down low bits on after-rounding
	systems when result rounded to normal precision would have normal
	exponent.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: Include <tininess.h>.
	(__fmal): Do not extract and scale down low bits on after-rounding
	systems when result rounded to normal precision would have normal
	exponent.
	* sysdeps/ieee754/ldbl-96/s_fmal.c: Include <tininess.h>.
	(__fmal): Do not extract and scale down low bits on after-rounding
	systems when result rounded to normal precision would have normal
	exponent.
	* math/libm-test.inc (UNDERFLOW_EXCEPTION_BEFORE_ROUNDING): New
	macro.
	(fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

2012-10-30  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/tininess.h: Renamed to ...
	* sysdeps/x86/tininess.h: This.
	* sysdeps/x86_64/tininess.h: Removed.

2012-10-30  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile ($(objpfx)tst-array1.out): Depend on comparison
	input.  Use $(build-program-cmd).
	($(objpfx)tst-array1-static.out): Likewise.
	($(objpfx)tst-array2.out): Likewise.
	($(objpfx)tst-array3.out): Likewise.
	($(objpfx)tst-array4.out): Likewise.
	($(objpfx)tst-array5.out): Likewise.
	($(objpfx)tst-array5-static.out): Likewise.

2012-10-30  Chris Metcalf  <cmetcalf@tilera.com>

	* elf/dl-load.c (_dl_map_object_from_fd): Call DL_AFTER_LOAD
	if defined.

	* nss/nsswitch.h (nss_interface_function): Provide new
	macro for use with NSS functions.
	* grp/initgroups.c: Use new macro.
	* nss/getXXbyYY.c: Likewise.
	* nss/getXXbyYY_r.c: Likewise.
	* nss/getXXent.c: Likewise.
	* nss/getXXent_r.c: Likewise.
	* sysdeps/posix/getaddrinfo.c: Likewise.

2012-10-30  Andreas Jaeger  <aj@suse.de>

	* po/ru.po: Update Russion translation from translation project.

2012-10-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14152]
	[BZ #14783]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Extract low bits of
	result and shift together with sticky bit instead of replicating
	round-to-nearest rounding.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.  Do not permit
	missing underflow exceptions.
	(fma_test_towardzero): Add more tests.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.

	[BZ #14047]
	* sysdeps/generic/tininess.h: New file.
	* sysdeps/i386/tininess.h: Likewise.
	* sysdeps/sh/tininess.h: Likewise.
	* sysdeps/x86_64/tininess.h: Likewise.
	* stdlib/tst-strtod-underflow.c: Likewise.
	* stdlib/tst-tininess.c: Likewise.
	* stdlib/strtod_l.c: Include <tininess.h>.
	(round_and_return): Do not set errno for exact underflow cases.
	Force an underflow exception when setting errno for underflow.
	Determine underflow based on rounding to normal precision if
	TININESS_AFTER_ROUNDING.
	* stdlib/tst-strtod.c (tests): Do not expect errno to be set to
	ERANGE for exact underflow cases.
	* stdlib/Makefile (tests): Add tst-tininess and
	tst-strtod-underflow.
	($(objpfx)tst-tininess): Use $(link-libm).
	($(objpfx)tst-strtod-underflow): Likewise.

2012-10-30  Andreas Jaeger  <aj@suse.de>

	[BZ #14767]
	* elf/Makefile (tests): Remove conditional for have-initfini-array
	since this is now always required and the variable does not exist
	anymore.
	(tests-static): Likewise.
	(modules-names): Likewise.

	* po/eo.po: Add Esperanto translation from translation project.

	* elf/tst-array1.c (fini_array): Make writeable so that it can be
	merged with constructor/destructor.
	(init_array): Likewise.
	* elf/tst-array2dep.c (fini_array): Likewise.
	(init_array): Likewise.

2012-10-29  Mike Frysinger  <vapier@gentoo.org>

	* manual/message.texi: Delete @cartouche tags.

2012-10-29  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/fdatasync.c: Turn ERR into EINVAL if it is
	EOPNOTSUPP.
	* sysdeps/mach/hurd/fsync.c: Likewise.

	* sysdeps/pthread/aio_notify.c (__aio_notify_only)
	[_POSIX_REALTIME_SIGNALS]: Change condition to
	[_POSIX_REALTIME_SIGNALS > 0].

2012-10-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h (__O_LARGEFILE)
	[!__x86_64]: Do not define, take value from <bits/fcntl-linux.h>.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (__O_LARGEFILE):
	[__WORDSIZE != 64]: Likewise.

2012-10-26  H.J. Lu  <hongjiu.lu@intel.com>

	*  iconvdata/tst-table.sh: Remove ${SHELL}.
	*  iconvdata/tst-tables.sh: Likewise.

2012-10-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_proc_openprom): Use strtoumax instead
	of strtoull.

	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Add comments for
	ifunc-impl-list.c
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/ifunc-impl-list.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/ifunc-impl-list.c: New
	file.

2012-10-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_proc_openprom): Use __getdents instead of
	__getdirentries.

2012-10-25  Joseph Myers  <joseph@codesourcery.com>
	    Jim Blandy  <jimb@codesourcery.com>

	* scripts/cross-test-ssh.sh: New file.
	* manual/install.texi (Configuring and compiling): Document use of
	cross-test-ssh.sh.
	* INSTALL: Regenerated.

2012-10-25  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/ptrace.c (ptrace): Use __hurd_fail to return
	EOPNOTSUPP.

2012-10-25  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (run-program-prefix): Fix comment.

2012-10-24  Joseph Myers  <joseph@codesourcery.com>
	    Jim Blandy  <jimb@codesourcery.com>

	* Makeconfig (test-wrapper): New variable,
	(test-wrapper-env): Likewise.
	[$(cross-compiling) = yes && $(test-wrapper) != ""]
	(run-built-tests): Define to yes.
	(run-program-prefix): Use $(test-wrapper).
	(built-program-cmd): Likewise.
	* Rules (make-test-out): Use $(test-wrapper-env) and
	$(host-built-program-cmd).
	* elf/Makefile ($(objpfx)order.out): Use $(test-wrapper).
	($(objpfx)tst-pathopt.out): Pass $(test-wrapper-env) to
	tst-pathopt.sh.
	($(objpfx)tst-rtld-load-self.out): Pass $(test-wrapper) and
	$(test-wrapper-env) to tst-rtld-load-self.sh.
	($(objpfx)order2.out): Use $(test-wrapper).
	($(objpfx)tst-initorder.out): Likewise.
	($(objpfx)tst-initorder2.out): Likewise.
	($(objpfx)tst-unused-dep.out): Use $(test-wrapper-env).
	* elf/tst-pathopt.sh (run_program_prefix): Remove unused variable.
	(test_wrapper_env): New variable.  Use it to run ld.so.
	* elf/tst-rtld-load-self.sh (test_wrapper): New variable.
	Use it to run ld.so.
	(test_wrapper_env): Likewise.
	* iconvdata/Makefile ($(objpfx)iconv-test.out): Pass
	$(test-wrapper) to run-iconv-test.sh.
	* iconvdata/run-iconv-test.sh (test_wrapper): New variable.
	(ICONV): Use $test_wrapper.
	* posix/Makefile ($(objpfx)globtest.out): Pass
	$(run-via-rtld-prefix), $(test-wrapper) and $(test-wrapper-env) to
	globtest.sh, not $(run-program-prefix).
	* posix/globtest.sh (run_via_rtld_prefix): New variable.
	(test_wrapper): Likewise.
	(test_wrapper_env): Likewise.  Use it to run globtest with HOME
	set together with run_via_rtld_prefix.
	(run_program_prefix): Define in terms of test_wrapper and
	run_via_rtld_prefix.

2012-10-24  Roland McGrath  <roland@hack.frob.com>

	* nscd/Makefile ($(objpfx)nscd): Remove librt dependency.
	* posix/Makefile ($(objpfx)tst-regex, $(objpfx)tst-regex2):
	Targets	removed.

	[BZ #14743]
	* include/time.h: Remove librt_hidden_proto (clock_gettime).
	Declare __clock_getres, __clock_gettime, __clock_settime,
	__clock_nanosleep, and __clock_getcpuclockid.
	* rt/clock_gettime.c: Define __clock_gettime as an alias.
	Remove librt_hidden_def (clock_gettime).
	* sysdeps/unix/clock_gettime.c: Likewise.
	* rt/clock_getcpuclockid.c: Define __clock_getcpuclockid as an alias.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c: Likewise.
	* rt/clock_getres.c: Define __clock_getres as an alias.
	* sysdeps/posix/clock_getres.c: Likewise.
	* rt/clock_settime.c: Define __clock_settime as an alias.
	* sysdeps/unix/clock_settime.c: Likewise.
	* rt/clock_nanosleep.c: Define __clock_nanosleep as an alias.
	* sysdeps/unix/clock_nanosleep.c: Likewise.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c: Likewise.
	* rt/clock-compat.c: New file.
	* rt/Makefile (librt-routines): Add clock-compat and move
	$(clock-routines) to ...
	(routines): ... here, new variable.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (sysdep_routines):
	Don't add get_clockfreq here.
	* rt/Versions (libc: GLIBC_2.17): New version set.
	Add clock_* symbols here.
	(libc: GLIBC_PRIVATE): New version set.  Add __clock_* symbols here.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist
	(GLIBC_2.17): Add clock_* symbols.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Likewise.
	* NEWS: Mention the move.

	* sysdeps/unix/sysv/linux/i386/get_clockfreq.c (__get_clockfreq):
	Use __open, __read, __close rather than their public counterparts.
	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_cpuinfo): Likewise.
	(__get_clockfreq_via_proc_openprom): Likewise, and __getdirentries.
	(__get_clockfreq_via_dev_openprom): Likewise, and __ioctl.

	* config.h.in (HAVE_IFUNC): New #undef.
	* configure.in: Define it if libc_cv_ld_gnu_indirect_function
	was successful.
	* configure: Regenerated.

2012-10-24  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Move READELF check to start of file.
	(libc_cv_ld_gnu_indirect_function): Change to a link test. Rename from
	libc_cv_asm_gnu_indirect_function in the process.
	* configure: Regenerated.

2012-10-24  Mike Frysinger  <vapier@gentoo.org>

	* configure.in (libc_cv_gcc_static_libgcc): Drop -q flag to grep and
	send the output to /dev/null.
	(libc_cv_cc_with_libunwind): Likewise.
	(libc_cv_as_noexecstack): Likewise.
	* configure: Regenerate.

2012-10-24  Joseph Myers  <joseph@codesourcery.com>

	* io/ftwtest-sh (tmp): Define to ${objpfx}io, not using `pwd`.

	* posix/globtest.sh (TMPDIR): Do not set.
	(testdir): Define using ${common_objpfx}posix not $TMPDIR.
	(testout): Likewise.

2012-10-24  Andreas Jaeger  <aj@suse.de>

	* io/fcntl.h: Always define mode_t, off_t, pid_t and use these
	types for creat, creat64, lockf, posix_fadvise, posix_fallocate.
	[__USE_LARGEFILE64 && !__off64_t_defined]: Define off64_t.
	[__USE_LARGEFILE64]: Use off64_t in declaration of lock64,
	posix_fadvise64, posix_fallocate64.

	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h (F_GETLK, F_SETLK)
	(F_SETLKW) [__x86_64]: Remove, provided by <bits/fcntl-linux.h>.
	(F_GETLK, F_SETLK, F_SETLKW) [!__USE_FILE_OFFSET64 && !__x86_64__]:
	Likewise.
	(F_GETLK, F_SETLK, F_SETLKW) [__USE_FILE_OFFSET64 && ! __x86_64__]:
	Likewise.
	(F_GETLK64, F_SETLK64, F_SETLKW64) [!__x86_64__]: Likewise.

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (F_GETLK, F_SETLK)
	(F_SETLKW) [__USE_FILE_OFFSET64]: Remove, provided by
	<bits/fcntl-linux.h>.
	(F_GETLK64, F_SETLK64, F_SETLKW64) [__WORDSIZE == 64]: Likewise.

	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (F_DUPFD, F_GETFD)
	(F_SETFD, F_GETFL, F_SETFL): Remove, provided by <bits/fcntl-linux.h>.
	(F_GETLK, F_SETLK, F_SETLKW) [__WORDSIZE == 64]: Likewise.
	(F_GETLK, F_SETLK, F_SETLKW, F_GETLK64, F_SETLK64, F_SETLKW64)
	[__WORDSIZE != 64]: Likewise.

2012-10-23  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (run-built-tests): New variable.
	* Rules [$(cross-compiling) = yes]: Change condition to
	[$(run-built-tests) = no].
	* catgets/Makefile [$(cross-compiling) != yes]: Change condition
	to [$(run-built-tests) = yes].
	* elf/Makefile [$(cross-compiling) = no]: Likewise.
	* grp/Makefile [$(cross-compiling) = no]: Likewise.
	* iconv/Makefile [$(cross-compiling) != yes]: Likewise.
	* iconvdata/Makefile [$(cross-compiling) = no]: Likewise.
	* intl/Makefile [$(cross-compiling) = no]: Likewise.
	* io/Makefile [$(cross-compiling) = no]: Likewise.
	* libio/Makefile [$(cross-compiling) = no]: Likewise.
	* malloc/Makefile [$(cross-compiling) = no]: Likewise.
	* misc/Makefile [$(cross-compiling) = no]: Likewise.
	* posix/Makefile [$(cross-compiling) = no]: Likewise.
	* resolv/Makefile [$(cross-compiling) = no]: Likewise.
	* stdio-common/Makefile [$(cross-compiling) = no]: Likewise.
	* stdlib/Makefile [$(cross-compiling) = no]: Likewise.
	* string/Makefile [$(cross-compiling) = no]: Likewise.

	* posix/Makefile ($(objpfx)globtest.out): Pass
	$(run-program-prefix) to globtest.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* posix/globtest.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(library_path): Likewise.
	(run_program_prefix): New variable.  Use for running globtest
	binary.

2012-10-23  Jim Blandy  <jimb@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig (host-built-program-cmd): New variable.
	* elf/Makefile (tst-stackguard1-ARGS): Use
	$(host-built-program-cmd).
	* posix/Makefile (tst-exec-ARGS): Use $(host-built-program-cmd).
	(tst-spawn-ARGS): Likewise.
	* rt/Makefile (tst-mqueue7-ARGS): Use $(host-built-program-cmd).

2012-10-23  Joseph Myers  <joseph@codesourcery.com>
	    Jim Blandy  <jimb@codesourcery.com>

	* Makeconfig (run-via-rtld-prefix): New variable.
	(run-program-prefix): Define in terms of $(run-via-rtld-prefix).
	(built-program-cmd): Likewise.

2012-10-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (O_RSYNC): Define to
	__O_RSYNC if it exists, otherwise to O_SYNC.

2012-10-22  Jim Blandy  <jimb@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* iconvdata/run-iconv-test.sh: Redirect iconv stdin in loops from
	/dev/null.
	* iconvdata/tst-tables.sh: Redirect tst-table.sh stdin in loop
	from /dev/null
	* posix/tst-getconf.sh: Redirect getconf stdin in loop from
	/dev/null.

2012-10-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (__O_LARGEFILE):
	Define always.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (__O_LARGEFILE): Likewise.

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/fcntl-linux.h.

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h (F_GETLK, F_SETLK)
	(F_SETLKW) [!F_GETLK]: Define values for [!__USE_FILE_OFFSET64].

	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h (O_LARGEFILE): Rename
	to __O_LARGEFILE.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (O_LARGEFILE): Rename
	to __O_LARGEFILE.

2012-10-21  Jim Blandy  <jimb@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* config.make.in (NM): New variable.

2012-10-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Remove all
	definitions and declarations that are provided by
	<bits/fcntl-linux.h> and include <bits/fcntl-linux.h>.

2012-10-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14683]
	* elf/Makefile (tests-static): Add tst-leaks1-static.
	(tests): Also depend on $(objpfx)tst-leaks1-static-mem.
	($(objpfx)tst-leaks1-static): New rule.
	($(objpfx)tst-leaks1-static-mem): Likewise.
	(tst-leaks1-static-ENV): New macro.
	* elf/dl-open.c (dl_open_worker): Check the main application
	only if SHARED is defined.
	* elf/tst-leaks1-static.c: New file.

2012-10-20  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/fcntl-linux.h: New file, contains
	generic values for Linux.
	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h: Remove all definitions
	and declarations that are provided by <bits/fcntl-linux.h> and
	include <bits/fcntl-linux.h>.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.

2012-10-20  Roland McGrath  <roland@hack.frob.com>

	* io/fcntl.h: Move include of <bits/types.h> to the top and
	include it unconditionally.

2012-10-20  H.J. Lu  <hongjiu.lu@intel.com>

	* wcsmbs/Makefile (tests-ifunc): New variable.
	(tests): Add $(tests-ifunc).
	* wcsmbs/test-wcschr-ifunc.c: New file.
	* wcsmbs/test-wcscmp-ifunc.c: Likewise.
	* wcsmbs/test-wcscpy-ifunc.c: Likewise.
	* wcsmbs/test-wcslen-ifunc.c: Likewise.
	* wcsmbs/test-wcsrchr-ifunc.c: Likewise.
	* wcsmbs/test-wmemcmp-ifunc.c: Likewise.

	* string/Makefile (tests-ifunc): New variable.
	(tests): Add $(tests-ifunc).
	* string/test-memccpy.c (TEST_NAME): New macro.
	* string/test-memchr.c (TEST_NAME): Likewise.
	* string/test-memcmp.c (TEST_NAME): Likewise.
	* string/test-memcpy.c (TEST_NAME): Likewise.
	* string/test-memmem.c (TEST_NAME): Likewise.
	* string/test-memmove.c (TEST_NAME): Likewise.
	* string/test-memset.c (TEST_NAME): Likewise.
	* string/test-rawmemchr.c (TEST_NAME): Likewise.
	* string/test-stpcpy.c (TEST_NAME): Likewise.
	* string/test-stpncpy.c (TEST_NAME): Likewise.
	* string/test-strcasecmp.c (TEST_NAME): Likewise.
	* string/test-strcasestr.c (TEST_NAME): Likewise.
	* string/test-strcat.c (TEST_NAME): Likewise.
	* string/test-strchr.c (TEST_NAME): Likewise.
	* string/test-strcmp.c(TEST_NAME): Likewise.
	* string/test-strcpy.c (TEST_NAME): Likewise.
	* string/test-strcspn.c (TEST_NAME): Likewise.
	* string/test-strlen.c (TEST_NAME): Likewise.
	* string/test-strncasecmp.c (TEST_NAME): Likewise.
	* string/test-strncmp.c (TEST_NAME): Likewise.
	* string/test-strncpy.c (TEST_NAME): Likewise.
	* string/test-strnlen.c (TEST_NAME): Likewise.
	* string/test-strpbrk.c (TEST_NAME): Likewise.
	* string/test-strrchr.c (TEST_NAME): Likewise.
	* string/test-strspn.c (TEST_NAME): Likewise.
	* string/test-strstr.c (TEST_NAME): Likewise.
	* string/test-bcopy-ifunc.c: New file.
	* string/test-bzero-ifunc.c: Likewise.
	* string/test-memccpy-ifunc.c: Likewise.
	* string/test-memchr-ifunc.c: Likewise.
	* string/test-memcmp-ifunc.c: Likewise.
	* string/test-memcpy-ifunc.c: Likewise.
	* string/test-memmem-ifunc.c: Likewise.
	* string/test-memmove-ifunc.c: Likewise.
	* string/test-mempcpy-ifunc.c: Likewise.
	* string/test-memset-ifunc.c: Likewise.
	* string/test-rawmemchr-ifunc.c: Likewise.
	* string/test-stpcpy-ifunc.c: Likewise.
	* string/test-stpncpy-ifunc.c: Likewise.
	* string/test-strcasecmp-ifunc.c: Likewise.
	* string/test-strcasestr-ifunc.c: Likewise.
	* string/test-strcat-ifunc.c: Likewise.
	* string/test-strchr-ifunc.c: Likewise.
	* string/test-strchrnul-ifunc.c: Likewise.
	* string/test-strcmp-ifunc.c: Likewise.
	* string/test-strcpy-ifunc.c: Likewise.
	* string/test-strcspn-ifunc.c: Likewise.
	* string/test-strlen-ifunc.c: Likewise.
	* string/test-strncasecmp-ifunc.c: Likewise.
	* string/test-strncat-ifunc.c: Likewise.
	* string/test-strncmp-ifunc.c: Likewise.
	* string/test-strncpy-ifunc.c: Likewise.
	* string/test-strnlen-ifunc.c: Likewise.
	* string/test-strpbrk-ifunc.c: Likewise.
	* string/test-strrchr-ifunc.c: Likewise.
	* string/test-strspn-ifunc.c: Likewise.
	* string/test-strstr-ifunc.c: Likewise.

	* debug/Makefile (tests-ifunc): New variable.
	(tests): Add $(tests-ifunc).
	* debug/test-stpcpy_chk.c (TEST_NAME): New macro.
	* debug/test-strcpy_chk.c (TEST_NAME): Likewise.
	* debug/test-stpcpy_chk-ifunc.c: New file.
	* debug/test-strcpy_chk-ifunc.c: Likewise.

2012-10-20  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13601]
	* elf/dl-load.c (open_verify): Retry read if the entire ELF
	header is not read in.

2012-10-19  Joseph Myers  <joseph@codesourcery.com>

	* io/Makefile ($(objpfx)ftwtest.out): Depend on ftwtest-sh.  Pass
	script to $(SHELL) as $<.  Pass $(common-objpfx) to script
	directly.  Pass built executable to script as
	$(built-program-cmd).
	* io/ftwtest-sh (ldso): Remove variable.  Run ftwtest directly as
	$testprogram without using LD_LIBRARY_PATH and $ldso.

	* grp/Makefile ($(objpfx)tst_fgetgrent.out): Pass
	$(run-program-prefix) to tst_fgetgrent.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* grp/tst_fgetgrent.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(library_path): Likewise.
	(run_program_prefix): New variable.  Use it to run tst_fgetgrent.
	* iconvdata/Makefile ($(objpfx)tst-tables.out): Pass
	$(run-program-prefix) to tst-tables.sh.
	* iconvdata/tst-table.sh (run_program_prefix): New variable.  Use
	it to run tst-table-from and tst-table-to.
	* iconvdata/tst-tables.sh (run_program_prefix): New variable.
	Pass it to tst-table.sh.
	* intl/Makefile ($(objpfx)tst-gettext.out): Pass
	$(run-program-prefix) to tst-gettext.sh.
	($(objpfx)tst-translit.out): Pass $(run-program-prefix) to
	tst-translit.sh.
	($(objpfx)tst-gettext2.out): Pass $(run-program-prefix) to
	tst-gettext2.sh.
	* intl/tst-gettext.sh (run_program_prefix): New variable.  Use it
	to run tst-gettext.
	* intl/tst-gettext2.sh (run_program_prefix): New variable.  Use it
	to run tst-gettext2.
	* intl/tst-translit.sh (run_program_prefix): New variable.  Use it
	to run tst-translit.
	* malloc/Makefile ($(objpfx)tst-mtrace.out): Pass
	$(run-program-prefix) to tst-mtrace.sh.
	* malloc/tst-mtrace.sh (run_program_prefix): New variable.  Use it
	to run tst-mtrace.
	* posix/Makefile ($(objpfx)wordexp-tst.out): Pass
	$(run-program-prefix) to wordexp-tst.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* posix/wordexp-tst.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(run_program_prefix): New variable.  Use it to run wordexp-test.

	* Makeconfig (ARCH): Remove all definitions.
	(machine): Likewise.
	[ARCH]: Remove conditional code.
	[!objdir]: Give error.
	[!objdir] (objpfx): Remove.
	[!objdir] (common-objpfx): Likewise.
	[!objdir] (common-objdir): Likewise.
	* configure.in (config_makefile): Remove.  Hardcode Makefile in
	AC_CONFIG_FILES call.
	* configure: Regenerated.

	[BZ #13888]
	* io/ftwtest-sh (tmp): Set to use the working directory, not /tmp
	or TMPDIR.
	(testout): Likewise.

	* posix/Makefile ($(objpfx)tst-getconf.out): Pass
	$(built-program-cmd) to tst-getconf.sh, not $(elf-objpfx) and
	$(rtld-installed-name).
	* posix/tst-getconf.sh (elf_objpfx): Remove variable.
	(rtld_installed_name): Likewise.
	(runit): Remove function.
	(run_getconf): New variable,  Use it for running getconf binary.

2012-10-18  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14716]
	* string/test-memmem.c (check_result): New function.
	(do_one_test): Use it.
	(check1): New function.
	(test_main): Use it.

2012-10-18  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* math/Makefile: Comment on slow compilation of test-tgmath2.c.

2012-10-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/_G_config.h (_G_OPEN64): Remove.
	(_G_LSEEK64): Likewise.
	(_G_MMAP64): Likewise.
	(_G_FSTAT64): Likewise.
	* sysdeps/unix/sysv/linux/_G_config.h (_G_OPEN64): Remove.
	(_G_LSEEK64): Likewise.
	(_G_MMAP64): Likewise.
	(_G_FSTAT64): Likewise.
	* libio/fileops.c (mmap_remap_check) [_G_MMAP64]: Make code
	unconditional.  Call __mmap64 directly.
	(mmap_remap_check) [!_G_MMAP64]: Remove conditional code.
	(mmap_remap_check) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(mmap_remap_check) [!_G_LSEEK64]: Remove conditional code.
	(decide_maybe_mmap) [_G_MMAP64]: Make code unconditional.  Call
	__mmap64 directly.
	(decide_maybe_mmap) [!_G_MMAP64]: Remove conditional code.
	(decide_maybe_mmap) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(decide_maybe_mmap) [!_G_LSEEK64]: Remove conditional code.
	(_IO_file_sync_mmap) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(_IO_file_sync_mmap) [!_G_LSEEK64]: Remove conditional code.
	(_IO_file_seek) [_G_LSEEK64]: Make code unconditional.  Call
	__lseek64 directly.
	(_IO_file_seek) [!_G_LSEEK64]: Remove conditional code.
	(_IO_file_stat) [_G_FSTAT64]: Make code unconditional.  Call
	__fxstat64 directly.
	(_IO_file_stat) [!_G_FSTAT64]: Remove conditional code.
	* libio/freopen64.c (freopen64) [_G_OPEN64]: Make code
	unconditional.
	(freopen64) [!_G_OPEN64]: Remove conditional code.
	* libio/fseeko64.c (fseeko64) [_G_LSEEK64]: Make code
	unconditional.
	(fseeko64) [!_G_LSEEK64]: Remove conditional code.
	* libio/ftello64.c (ftello64) [_G_LSEEK64]: Make code
	unconditional.
	(ftello64) [!_G_LSEEK64]: Remove conditional code.
	* libio/iofgetpos64.c (_IO_new_fgetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_new_fgetpos64) [!_G_LSEEK64]: Remove conditional code.
	* libio/iofopen64.c (_IO_fopen64) [_G_OPEN64]: Make code
	unconditional.
	(_IO_fopen64) [!_G_OPEN64]: Remove conditional code.
	* libio/iofsetpos64.c (_IO_new_fsetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_new_fsetpos64) [!_G_LSEEK64]: Remove conditional code.
	* libio/oldiofgetpos64.c (_IO_old_fgetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_old_fgetpos64) [!_G_LSEEK64]: Remove conditional code.
	* libio/oldiofsetpos64.c (_IO_old_fsetpos64) [_G_LSEEK64]: Make code
	unconditional.
	(_IO_old_fsetpos64) [!_G_LSEEK64]: Remove conditional code.

2012-10-18  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #12140]
	* manual/memory.texi (Malloc Tunable Parameters): Add note
	about free list pointers overwriting some perturb bytes.
	Wording suggested by Roland McGrath.

2012-10-17  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (gamma_test): Do not call feclearexcept.
	(lgamma_test): Likewise.
	(tgamma_test): Likewise.

2012-10-16  Florian Weimer  <fweimer@redhat.com>

	[BZ #14700]
	* sysdeps/posix/opendir.c (MAX_DIR_BUFFER_SIZE): New constant.
	(__alloc_dir): Limit buffer to MAX_DIR_BUFFER_SIZE.

2012-10-16  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* NEWS: Mention BZ #14716.
	* string/str-two-way.h (two_way_short_needle): Fix thinko introduced
	when removing AVAILABLE1_USES_J macro.

2012-10-12  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86/bits/byteswap.h: Include <bits/types.h>.
	(__bswap_64): __uint64_t for unsigned 64-bit int.

2012-10-12  Andreas Schwab  <schwab@linux-m68k.org>

	* include/string.h (memmem): Declare libc hidden alias.
	* string/memmem.c (memmem): Define libc hidden alias.
	* sysdeps/unix/sysv/linux/powerpc/get_clockfreq.c: Use __open,
	__read, __close instead of open, read, close.

2012-10-11  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/ifunc-impl-list.c: New file.
	* sysdeps/x86_64/multiarch/memcmp.S (__memcmp_sse2): Make it
	global and hidden.
	* sysdeps/x86_64/multiarch/memcpy.S (__memcpy_sse2): Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S (__mempcpy_sse2): Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr.S (__rawmemchr_sse42):
	Likewise.
	(__rawmemchr_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strcat.S (STRCAT_SSE2): Likewise.
	* sysdeps/x86_64/multiarch/strchr.S (__strchr_sse42): Likewise.
	(__strchr_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S (STRCMP_SSE42): Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S (STRCMP_SSE2): Likewise.
	(__strcasecmp_sse2): Likewise.
	(__strncasecmp_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S (STRCPY_SSE2): Likewise.
	* sysdeps/x86_64/multiarch/strlen.S (__strlen_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strnlen.S (__strnlen_sse2): Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S (__strrchr_sse42): Likewise.
	(__strrchr_sse2): Likewise.
	* sysdeps/x86_64/multiarch/memcmp.S: Add comments for
	ifunc-impl-list.c.
	* sysdeps/x86_64/multiarch/memcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memmove.c: Likewise.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/memset.S: Likewise.
	* sysdeps/x86_64/multiarch/memset_chk.S: Likewise.
	* sysdeps/x86_64/multiarch/rawmemchr.S: Likewise.
	* sysdeps/x86_64/multiarch/stpcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/stpncpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcasecmp_l.S: Likewise.
	* sysdeps/x86_64/multiarch/strcasestr-c.c: Likewise.
	* sysdeps/x86_64/multiarch/strcat.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strcspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen.S: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l.S: Likewise.
	* sysdeps/x86_64/multiarch/strncat.S: Likewise.
	* sysdeps/x86_64/multiarch/strncmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strncpy.S: Likewise.
	* sysdeps/x86_64/multiarch/strnlen.S: Likewise.
	* sysdeps/x86_64/multiarch/strpbrk.S: Likewise.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strspn.S: Likewise.
	* sysdeps/x86_64/multiarch/strstr-c.c: Likewise.
	* sysdeps/x86_64/multiarch/wcscpy.S: Likewise.
	* sysdeps/x86_64/multiarch/wmemcmp.S: Likewise.

	* sysdeps/i386/i686/multiarch/bcopy.S (__bcopy_ia32): Make it
	global and hidden.
	* sysdeps/i386/i686/multiarch/bzero.S (__bzero_ia32): Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S (__memcmp_ia32): Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S (__memcpy_ia32): Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S (__memmove_ia32):
	Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S (__mempcpy_ia32):
	Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S (STRCAT_IA32): Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S (__STRCMP_IA32): Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S (STRCPY_IA32): Likewise.
	* sysdeps/i386/i686/multiarch/bcopy.S: Add comments for
	ifunc-impl-list.c.
	* sysdeps/i386/i686/multiarch/bzero.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/stpcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/stpncpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp_l.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasestr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase_l.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strnlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strpbrk.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strstr-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/ifunc-impl-list.c: New file.

	* Rules [$(multi-arch) = no] (tests): Filter out $(tests-ifunc).
	[$(multi-arch) = no] (xtests): Filter out $(xtests-ifunc).
	* include/ifunc-impl-list.h: New file.
	* misc/ifunc-impl-list.c: Likewise.
	* misc/Makefile (routines): Add ifunc-impl-list.
	* misc/Versions (GLIBC_PRIVATE): Add __libc_ifunc_impl_list.
	* string/test-string.h: Include <ifunc-impl-list.h>.
	(func_list, func_count, impl_count, impl_array) [TEST_IFUNC &&
	TEST_NAME]: New variables.
	(FOR_EACH_IMPL): Support func_list if TEST_IFUNC and TEST_NAME
	are defined.
	(test_init): Call __libc_ifunc_impl_list to initialize
	func_list if TEST_IFUNC and TEST_NAME are defined.

	* string/Makefile (strop-tests): Add bcopy and bzero.
	* string/test-bcopy.c: New file.
	* string/test-bzero.c: Likewise.
	* string/test-memmove.c: Support bcopy test if TEST_BCOPY is
	defined.
	* string/test-memset.c: Support bzero test if TEST_BZERO is
	defined.
	* sysdeps/x86_64/multiarch/bcopy.S (bcopy): Jump to
	__libc_memmove.
	* sysdeps/x86_64/multiarch/bzero.S (__bzero): Jump to
	__libc_memset.
	* sysdeps/x86_64/multiarch/memset.S (__libc_memset): New alias
	of memset.

2012-10-10  Joseph Myers  <joseph@codesourcery.com>

	* configure.in: Run $CXX, not cc1plus, to locate C++ headers.
	* configure: Regenerated.

	* Makeconfig (+link-static-before-libc): Don't include
	$(link-static-libc).

	* libio/libio.h (_IO_pos_t): Remove.

2012-10-10  Alexandre Oliva <aoliva@redhat.com>

	* NEWS: Add note about FIPS mode.  Wording suggested by Roland
	McGrath.

2012-10-10  Alexandre Oliva <aoliva@redhat.com>

	* crypt/crypt-entry.c: Include fips-private.h.
	(__crypt_r, __crypt): Disable MD5 and DES if FIPS is enabled.
	* crypt/md5c-test.c (main): Tolerate disabled MD5.
	* sysdeps/unix/sysv/linux/fips-private.h: New file.
	* sysdeps/generic/fips-private.h: New file, dummy fallback.

2012-10-10  Alexandre Oliva <aoliva@redhat.com>

	* crypt/crypt-private.h: Include stdbool.h.
	(_ufc_setup_salt_r): Return bool.
	* crypt/crypt-entry.c: Include errno.h.
	(__crypt_r): Return NULL with EINVAL for bad salt.
	* crypt/crypt_util.c (bad_for_salt): New.
	(_ufc_setup_salt_r): Check that salt is long enough and within
	the specified alphabet.
	* crypt/badsalttest.c: New file.
	* crypt/Makefile (tests): Add it.
	($(objpfx)badsalttest): New.

2012-10-09  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* NEWS: Add entry for BZ #14602.

2012-10-09  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle comparison macros as
	type-generic.
	* math/libm-test.inc: Update comment listing what functions and
	macros are tested.
	(isgreater_test): New function.
	(isgreaterequal_test): Likewise.
	(isless_test): Likewise.
	(islessequal_test): Likewise.
	(islessgreater_test): Likewise.
	(isunordered_test): Likewise.
	(main): Call the new functions.

2012-10-09  Roland McGrath  <roland@hack.frob.com>

	* aclocal.m4 (GLIBC_PROVIDES): Provide _AS_BASENAME_PREPARE,
	_AS_ME_PREPARE, _AS_VAR_ARITH_PREPARE, AS_SHELL_FN_as_fn_set_status,
	AS_SHELL_FN_as_fn_exit, AS_SHELL_FN_ac_fn_c_try_compile.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/ieee754/ldbl-opt/configure: Regenerated.
	* sysdeps/mach/configure: Regenerated.
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/powerpc/configure: Regenerated.
	* sysdeps/powerpc/powerpc32/configure: Regenerated.
	* sysdeps/powerpc/powerpc64/configure: Regenerated.
	* sysdeps/s390/s390-32/configure: Regenerated.
	* sysdeps/s390/s390-64/configure: Regenerated.
	* sysdeps/sh/configure: Regenerated.
	* sysdeps/sparc/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/powerpc/configure: Regenerated.
	* sysdeps/x86_64/configure: Regenerated.

	* dlfcn/dlerror.c (check_free): Call _dl_addr only if SHARED is
	defined.  Don't check if MAP is NULL.

2012-10-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/_G_config.h (_G_off64_t): Remove.
	(_G_stat64): Likewise.
	* sysdeps/unix/sysv/linux/_G_config.h (_G_off64_t): Remove.
	(_G_stat64): Likewise.
	* libio/filedoalloc.c (_IO_file_doallocate): Use struct stat64
	instead of struct _G_stat64.
	* libio/fileops.c (mmap_remap_check): Likewise.
	(decide_maybe_mmap): Likewise.
	(_IO_new_file_seekoff): Likewise.
	(_IO_file_stat): Likewise.
	* libio/libio.h (_IO_off64_t): Define to __off64_t, not
	_G_off64_t.
	* libio/oldfileops.c (_IO_old_file_seekoff): Use struct stat64
	instead of struct _G_stat64.
	* libio/wfileops.c (_IO_wfile_seekoff): Likewise.

2012-10-08  Maxim Kuvyrkov  <maxim@codesourcery.com>

	[BZ #14602]
	* string/str-two-way.h (AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J):
	Replace with ...
	(CHECK_EOL): New macro.
	(two_way_short_needle): Check beginning of haystack for EOL.  Use
	CHECK_EOL.
	* string/strcasestr.c (AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J):
	Replace with CHECK_EOL.
	* string/strstr.c (AVAILABLE1, AVAILABLE2, AVAILABLE1_USES_J):
	Replace with CHECK_EOL.

2012-10-08  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (parse_args): Handle isinf and isnan as
	type-generic.
	* math/libm-test.inc: Update comment listing what functions and
	macros are tested.
	(finite_test): New function.
	(isinf_test): Likewise.
	(isnan_test): Likewise.
	(fpclassify_test): Test subnormal input.
	(isfinite_test): Likewise.
	(isnormal_test): Likewise.
	(main): Call the new functions.

2012-10-08  Jonathan Nieder  <jrnieder@gmail.com>

	[BZ #14660]
	* Makerules (%.dynsym): Force C locale when running
	$(OBJDUMP) --dynamic-syms.

2012-10-08  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/get_timebase_freq.c: Include
	<stdint.h>.

2012-10-06  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara4.S: On 32-bit, clear
	upper 32-bits of the length value in %o2 since we use branch-on-register
	tests which consider the entire 64-bit register.

2012-10-06  H.J. Lu  <hongjiu.lu@intel.com>

	* string/test-strstr.c (check2): Add a test for page boundary.

2012-10-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/multiarch/memset-niagara4.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/memset-niagara4.S: New
	file.
	* sysdeps/sparc/sparc64/multiarch/Makefile: Add to
	sysdep_routines.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Use Niagara-4 memset
	and bzero when HWCAP_SPARC_CRYPTO is present.

2012-10-05  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14602]
	* string/test-strstr.c (check2): New function.
	(test_main): Call check2.

	* string/Makefile (tests): Remove bug-strstr1, bug-strcasestr1
	and bug-strchr1.
	* string/bug-strcasestr1.c (do_test): Moved to ...
	* string/test-strcasestr.c (check1): Here.  New function.
	(do_one_test): Break out result checking code into ...
	(check_result): This.  New function.
	(do_one_test): Call check_result.
	(test_main): Call check1.
	* string/bug-strchr1.c (do_test): Moved to ...
	* string/test-strchr.c (check1): Here.  New function.
	(do_one_test): Break out result checking code into ...
	(check_result): This.  New function.
	(do_one_test): Call check_result.
	(test_main): Call check1.
	* string/bug-strstr1.c (main): Moved to ...
	* string/test-strstr.c (check1): Here.  New function.
	(do_one_test): Break out result checking code into ...
	(check_result): This.  New function.
	(do_one_test): Call check_result.
	(test_main): Call check1.
	* string/bug-strcasestr1.c: Removed.
	* string/bug-strchr1.c: Likewise.
	* string/bug-strstr1.c: Likewise.

	* elf/Makefile (dl-routines): Add hwcaps.
	* elf/dl-support.c (_dl_important_hwcaps): Removed.
	* elf/dl-sysdep.c (_DL_FIRST_EXTRA): Likewise.
	(_dl_important_hwcaps): Moved to ...
	* elf/dl-hwcaps.c: Here.  New file.
	* sysdeps/mach/hurd/dl-sysdep.c (_dl_important_hwcaps): Removed.

	[BZ #14557]
	* elf/setup-vdso.h (setup_vdso): Set GL(dl_nns) to 1 for vDSO
	if IS_IN_rtld isn't defined.

	* elf/dl-support.c (_dl_sysinfo_map): New.
	Include "get-dynamic-info.h" and "setup-vdso.h".
	(_dl_non_dynamic_init): Call setup_vdso.
	* elf/dynamic-link.h: Don't include <assert.h>.
	(elf_get_dynamic_info): Moved to ...
	* elf/get-dynamic-info.h: Here.  New file.
	* elf/dynamic-link.h: Include "get-dynamic-info.h".
	* elf/rtld.c (dl_main): Break out vDSO setup code into ...
	* elf/setup-vdso.h: Here.  New file.
	* elf/rtld.c: Include "setup-vdso.h".
	(dl_main): Call setup_vdso.

2012-10-05  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc: List nexttoward, cimag, clog10, conf and
	creal in comment listing functions tested.  List finite, isinf,
	isnan, isless, islessequal, isgreater, isgreaterequal,
	islessgreater, isunordered, lgamma_r and pow10 as functions and
	macros not tested.  Mention which functions not tested are aliases
	for other functions.  Fix typo.  Note that signs of NaNs are not
	tested.

	* scripts/config.guess: Update from config.git.
	* scripts/config.sub: Likewise.

2012-10-04  Roland McGrath  <roland@hack.frob.com>

	* misc/Versions (GLIBC_PRIVATE): New set, add __madvise.
	* misc/madvise.c (madvise): Renamed to __madvise.
	Make madvise a weak alias.
	* include/sys/mman.h: Declare __madvise.
	Replace libc_hidden_proto (madvise) with libc_hidden_proto (__madvise).
	* sysdeps/unix/syscalls.list
	(madvise): Make __madvise the strong name, and madvise a weak alias.
	* sysdeps/unix/sysv/linux/syscalls.list
	(madvise, mmap): Remove redundant entries.
	* malloc/arena.c (shrink_heap): Use __madvise, not madvise.
	* malloc/malloc.c (mtrim): Likewise.
	* sysdeps/mach/hurd/malloc-machine.h (madvise): Renamed to __madvise.

2012-10-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/mach/hurd/dl-cache.c: File removed.
	* config.h.in (USE_LDCONFIG): New #undef.
	* configure.in (use_ldconfig): If set, define USE_LDCONFIG.
	* configure: Regenerated.
	* elf/Makefile (dl-routines): Add dl-cache only under
	[$(use-ldconfig) = yes].
	* elf/dl-load.c (_dl_map_object): Conditionalize code consulting the
	cache on [USE_LDCONFIG].
	* elf/dl-open.c (_dl_open): Call _dl_unload_cache only under
	[USE_LDCONFIG].
	* elf/rtld.c (dl_main): Likewise.

2012-10-03  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/posix/sysconf.c (__sysconf): Return 0 also for
	_SC_LEVEL4_CACHE_LINESIZE.

2012-10-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/bsd/confstr.h: File removed.

2012-10-02  Alexandre Oliva <aoliva@redhat.com>

	* scripts/check-local-headers.sh: Exclude sys/sdt.h and
	sys/sdt-config.h.

2012-10-02  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-load.c (_dl_map_object_from_fd: struct loadcmd):
	Make 'mapoff' field ElfW(Off) rather than off_t.

2012-10-02  Dmitry V. Levin  <ldv@altlinux.org>

	* nscd/Makefile: Remove nscd-cflags and all its users.
	(CPPFLAGS-nonlib): Add preprocessor flags for nscd modules.
	(CFLAGS-nonlib): Add compiler flags for nscd modules.

	[BZ #10631]
	* malloc.c (malloc_printerr): Clarify error message.

2012-10-02  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14648]
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_FMA_Usable if FMA is supported.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_FMA_Usable): New
	macro.
	(bit_FMA4_Usable): Updated.
	(index_FMA_Usable): New macro.
	(CPUID_FMA): Likewise.
	(HAS_FMA): Defined with bit_FMA_Usable.

2012-10-01  Roland McGrath  <roland@hack.frob.com>

	* bits/types.h (__swblk_t): Type removed.
	* bits/typesizes.h (__SWBLK_T_TYPE): Macro removed.
	* sysdeps/mach/hurd/bits/typesizes.h (__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SWBLK_T_TYPE): Likewise.

2012-10-01  Patsy Franklin <pfrankli@redhat.com>
	    Honza Horak <hhorak@redhat.com>

	* nis/yp_xdr.c (xdr_domainname): Use YPMAXDOMAIN as maxsize.
	(xdr_mapname): Use YPMAXMAP as maxsize.
	(xdr_peername): Use YPMAXPEER as maxsize.
	(xdr_keydat): Use YPAXRECORD as maxsize.
	(xdr_valdat): Use YPMAXRECORD as maxsize.

2012-10-01  Roland McGrath  <roland@hack.frob.com>

	* io/openat.c [!__ASSUME_ATFCTS] (__have_atfcts): New global variable.

	* sysdeps/unix/sysv/linux/init-first.c: Moved to ...
	* csu/init-first.c: ... here.
	* sysdeps/unix/sysv/linux/powerpc/init-first.c: Update #include.
	* sysdeps/unix/sysv/linux/s390/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/init-first.c: Likewise.
	* sysdeps/i386/init-first.c: File removed.
	* sysdeps/sh/init-first.c: File removed.

2012-10-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14645]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Compute result as x * y
	if x * y might underflow to zero and z is zero.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (min_subnorm_value): New variable.
	(fma_test): Add more tests.
	(fma_test_towardzero): Likewise.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	(initialize): Set min_subnorm_value.

2012-09-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14638]
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Use x * y + z for exact
	0 + 0.
	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Use original rounding
	mode for addition resulting in exact zero.
	* sysdeps/ieee754/ldbl-128/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Use x * y + z for
	exact 0 + 0.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Likewise.
	* sysdeps/ieee754/ldbl-96/s_fmal.c (__fmal): Likewise.
	* math/libm-test.inc (fma_test): Add more tests.
	(fma_test_towardzero): New function.
	(fma_test_downward): Likewise.
	(fma_test_upward): Likewise.
	(main): Call the new functions.

2012-09-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Fix garbage in file.

2012-09-28  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/sleep.c (__sleep): Rewritten using __nanosleep
	instead of SIGALRM.

	* sysdeps/gnu/_G_config.h: Moved to ...
	* sysdeps/unix/sysv/linux/_G_config.h: ... here.
	* sysdeps/mach/hurd/_G_config.h: Moved to ...
	* sysdeps/generic/_G_config.h: ... here.

	* io/open.c (__open): Renamed to __libc_open.  Make __open an alias.

	* posix/Makefile ($(objpfx)config-name.h): Do $(make-target-directory).

	* nss/Makefile ($(objpfx)/libnss_test1.so$(libnss_test1.so-version)):
	Conditionalize target on [libnss_test1.so-version].

	* elf/dl-sysdep.c: Conditionalize whole contents on [SHARED].

	* Makeconfig (nssobjdir, resolvobjdir): Remove variables.
	(elfobjdir): Move out of conditionals.

	* nss/nsswitch.c (nss_new_service): Conditionalize definition and
	declaration on [!DO_STATIC_NSS || SHARED], matching its only caller.
	(__nss_lookup_function): Conditionalize label remove_from_tree on
	[!DO_STATIC_NSS || SHARED], matching its only use.

2012-09-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara4.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/memcpy-niagara4.S: New
	file.
	* sysdeps/sparc/sparc64/multiarch/Makefile: Add to
	sysdep_routines.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/Makefile: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Use Niagara-4 memcpy
	when HWCAP_SPARC_CRYPTO is present.

2012-09-28  Pino Toscano  <toscano.pino@tiscali.it>

	* io/tst-mknodat.c: Create a FIFO instead of a socket.

2012-09-28  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #6530]
	* stdio-common/vfprintf.c (process_string_arg): Revert
	2000-07-22 change.

2011-09-28  Jonathan Nieder  <jrnieder@gmail.com>

	* stdio-common/Makefile (tst-sprintf-ENV): Set environment
	for testcase.
	* stdio-common/tst-sprintf.c: Include <locale.h>
	(main): Test sprintf's handling of incomplete multibyte
	characters.

2012-09-28  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-runtime.c (VERSYMIDX): Removed.
	* elf/dl-version.c (VERSYMIDX): Likewise.
	* elf/do-rel.h (VERSYMIDX): Likewise.
	(VALIDX): Likewise.
	* elf/dynamic-link.h (VERSYMIDX): Likewise.
	* elf/rtld.c (VALIDX): Likewise.
	(ADDRIDX): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (VALIDX): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (VALIDX): Likewise.
	* sysdeps/x86_64/dl-tlsdesc.h (ADDRIDX): Likewise.
	* sysdeps/generic/ldsodefs.h (VERSYMIDX): New macro.
	(VALIDX): Likewise.
	(ADDRIDX): Likewise.

2012-09-28  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/pthread/aio_fsync.c: Fix the file mode checking.

2012-09-28  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #11438]
	* sysdeps/posix/getaddrinfo.c (default_scopes): Map RFC 1918 addresses
	to global scope.
	* posix/tst-rfc3484.c: Verify 10/8, 172.16/12 and 196.128/16
	addresses are in the same scope as 192.0.2/24.
	* posix/gai.conf: Document new scope table defaults.

2012-09-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #5298]
	* libio/fileops.c (_IO_new_file_seekoff): Don't flush buffer
	for ftell.  Compute offsets from write pointers instead.
	* libio/wfileops.c (_IO_wfile_seekoff): Likewise.

2012-09-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14543]
	* libio/Makefile (tests): New test case tst-fseek.
	* libio/tst-fseek.c: New test case to verify that fseek/ftell
	combination works in wide mode.
	* libio/wfileops.c (_IO_wfile_seekoff): Adjust internal buffer
	state when the external buffer state changes.

2012-09-27  David S. Miller  <davem@davemloft.net>

	[BZ #14376]
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Do not
	pass reloc->r_addend in as the 'high' argument to
	sparc64_fixup_plt when handling R_SPARC_JMP_IREL relocations.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-09-28  Pino Toscano  <toscano.pino@tiscali.it>

	* rt/tst-aio2.c: Include <pthread.h>.
	* rt/tst-aio3.c: Likewise.

2012-09-27  Steve Ellcey  <sellcey@mips.com>

	* sysdeps/ieee754/ldbl-128/bits/huge_vall.h: Remove.

2012-09-27  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/strncmp-ssse3.S: Conditionalize
	contents on [SHARED].

2012-09-26  Marek Polacek  <polacek@redhat.com>

	[BZ #14530]
	[BZ #13741]
	* misc/sys/cdefs.h: Define __extern_inline and __extern_always_inline
	for C++ and GCC <4.3 as well as for non GCC compilers.

2012-09-26  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-09-25  Roland McGrath  <roland@hack.frob.com>

	* Makefile.in (all, install): Declare with .PHONY.
	Reported by Michael Hope <michael.hope@linaro.org>.

2012-09-25  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* manual/platform.texi (PowerPC): Document __ppc_get_timebase_freq.
	* sysdeps/powerpc/sys/platform/ppc.h: Include the operating
	system header.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (sysdep_headers):
	Likewise.
	(sydep_routines): Add the new and the internal functions.
	* sysdeps/unix/sysv/linux/powerpc/bits/ppc.h: New file.
	* sysdeps/unix/sysv/linux/powerpc/get_timebase_freq.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Versions
	(GLIBC_2.17): Add the new function.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist
	(GLIBC_2.17): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Versions
	(GLIBC_2.17): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist
	(GLIBC_2.17): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/test-gettimebasefreq.c: New file.

2012-09-25  Alan Modra  <amodra@gmail.com>

	* sysdeps/unix/sysv/linux/powerpc/pthread_once.c (__pthread_once):
	Add release barrier before setting once_control to say
	initialisation is done.  Add hints on lwarx.  Use macro in
	place of isync.
	(clear_once_control): Add release barrier.

2012-09-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c (__clog): Handle more values close to |z| = 1
	specially.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/Makefile (libm-calls): Add x2y2m1.
	* sysdeps/generic/math_private.h (__x2y2m1f): Declare.
	(__x2y2m1): Likewise.
	(__x2y2m1l): Likewise.
	* sysdeps/ieee754/dbl-64/x2y2m1.c: New file.
	* sysdeps/ieee754/dbl-64/x2y2m1f.c: Likewise.
	* sysdeps/ieee754/ldbl-128/x2y2m1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/x2y2m1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/x2y2m1.c: Likewise.
	* sysdeps/ieee754/ldbl-96/x2y2m1l.c: Likewise.
	* math/libm-test.inc (clog_test, clog10_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #14621]
	* posix/glob.c (next_brace_sub): Use size_t instead of unsigned
	int as type of variable DEPTH.
	(glob): Use size_t instead of int as type of variables NEWCOUNT
	and OLD_PATHC.

2012-09-25  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/Makefile (sysdep_routines):
	Add s_sincosf-sse2.
	* sysdeps/i386/i686/fpu/multiarch/s_sincosf.c: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_sincosf-sse2.S: New file.
	* sysdeps/ieee754/flt-32/s_sincosf.c (SINCOSF, SINCOSF_FUNC): Add
	macros for using routine as __sincosf_ia32.
	Use macro for function declaration and weak_alias.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	* sysdeps/x86_64/fpu/s_sincosf.S: New file.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* math/s_ccoshf.c (__ccoshf): Fix wrong usage of sincos for
	subnormal argument.
	* math/s_cexpf.c (__cexpf): Likewise.
	* math/s_csinf.c (__csinf): Likewise.
	* math/s_csinhf.c (__csinhf): Likewise.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ccosh.c (__ccoshf): Likewise.
	* math/s_cexp.c (__cexpl): Likewise.
	* math/s_csin.c (__csin): Likewise.
	* math/s_csinh.c (__csinh): Likewise.
	* math/s_ctan.c (__ctan): Likewise.
	* math/s_ctanh.c (ctanh): Likewise.
	* math/s_ccoshl.c (__ccoshl): Likewise.
	* math/s_cexpl.c (__cexpl): Likewise.
	* math/s_csinl.c (__csinl): Likewise.
	* math/s_csinhl.c (__csinhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.

2012-09-25  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h (_IO_size_t): Define to size_t, not _G_size_t.
	(_IO_ssize_t): Define to __ssize_t, not _G_ssize_t.
	(_IO_off_t): Define to __off_t, not _G_off_t.
	(_IO_pid_t): Define to __pid_t, not _G_pid_t.
	(_IO_uid_t): Define to __uid_t, not _G_uid_t.
	(_IO_wint_t): Define to wint_t, not _G_wint_t.
	* libio/libioP.h (struct _IO_jump_t): Use size_t not _G_size_t as
	type of __dummy and __dummy2 fields.
	* sysdeps/generic/_G_config.h (_G_size_t): Remove.
	(_G_ssize_t): Likewise.
	(_G_off_t): Likewise.
	(_G_pid_t): Likewise.
	(_G_uid_t): Likewise.
	(_G_wchar_t): Likewise.
	(_G_wint_t): Likewise.
	* sysdeps/gnu/_G_config.h (_G_size_t): Remove.
	(_G_ssize_t): Likewise.
	(_G_off_t): Likewise.
	(_G_pid_t): Likewise.
	(_G_uid_t): Likewise.
	(_G_wchar_t): Likewise.
	(_G_wint_t): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_size_t): Remove.
	(_G_ssize_t): Likewise.
	(_G_off_t): Likewise.
	(_G_pid_t): Likewise.
	(_G_uid_t): Likewise.
	(_G_wchar_t): Likewise.
	(_G_wint_t): Likewise.

2012-09-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/arena.c: Include malloc-sysdep.h.
	(shrink_heap): Use check_may_shrink_heap to decide if madvise
	is sufficient to shrink the heap or an unmap is needed.
	* sysdeps/generic/malloc-sysdep.h: New file.  Define
	new function check_may_shrink_heap.
	* sysdeps/unix/sysv/linux/malloc-sysdep.h: New file.  Define
	new function check_may_shrink_heap.

2012-09-25  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/fileops.c (_IO_new_file_seekoff): Fix typos in
	comments.

2012-09-24  Dmitry V. Levin  <ldv@altlinux.org>

	* catgets/test-gencat.sh: Add "set -e".
	* elf/tst-pathopt.sh: Likewise.
	* grp/tst_fgetgrent.sh: Likewise.
	* iconvdata/run-iconv-test.sh: Likewise.
	* intl/tst-gettext.sh: Likewise.
	* intl/tst-gettext2.sh: Likewise.
	* intl/tst-gettext4.sh: Likewise.
	* intl/tst-gettext6.sh: Likewise.
	* intl/tst-translit.sh: Likewise.
	* io/ftwtest-sh: Likewise.
	* libio/test-freopen.sh: Likewise.
	* malloc/tst-mtrace.sh: Likewise.
	* posix/globtest.sh: Likewise.
	* posix/tst-getconf.sh: Likewise.
	* posix/wordexp-tst.sh: Likewise.
	* stdio-common/tst-printf.sh: Likewise.
	* stdio-common/tst-unbputc.sh: Likewise.
	* stdlib/tst-fmtmsg.sh: Likewise.
	* sysdeps/x86_64/tst-xmmymm.sh: Likewise.
	* catgets/Makefile: Do not specify -e option when running
	testsuite shell scripts.
	* elf/Makefile: Likewise.
	* grp/Makefile: Likewise.
	* iconvdata/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* io/Makefile: Likewise.
	* libio/Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* posix/Makefile: Likewise.
	* stdio-common/Makefile: Likewise.
	* stdlib/Makefile: Likewise.
	* sysdeps/x86_64/Makefile: Likewise.

	* io/ftwtest-sh: Add copyright header.
	* posix/globtest.sh: Likewise.
	* posix/tst-getconf.sh: Likewise.
	* posix/wordexp-tst.sh: Likewise.
	* sysdeps/x86_64/tst-xmmymm.sh: Likewise.

2012-09-24  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #13679]
	* Makeconfig (+link): Defined as $(+link-static) if
	$(build-shared) isn't yes.
	(link-tests): Defined as $(+link-static-tests) if $(build-shared)
	isn't yes.
	(static-gnulib): Add -lgcc_eh if $(build-shared) isn't yes.

	* Makeconfig (+postctorT): Replace crtendS.o with crtend.o.

	[BZ #14562]
	* malloc/arena.c (heap_trim): Properly get fencepost and adjust
	new chunk size with MALLOC_ALIGN_MASK.

2012-09-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5044]
	* stdio-common/printf_fphex.c: Include <stdbool.h> and
	<rounding-mode.h>.
	(__printf_fphex): Determine rounding using get_rounding_mode and
	round_away.
	* stdio-common/tst-printf-round.c (struct hex_test): New
	structure.
	(hex_tests): New variable.
	(test_hex_in_one_mode): New function.
	(do_test): Also run tests for hex float output.

2012-09-21  Joseph Myers  <joseph@codesourcery.com>

	* libio/iopopen.c [_IO_HAVE_SYS_WAIT]: Make code unconditional.
	[!_IO_HAVE_SYS_WAIT]: Remove conditional code.
	* libio/libio.h (_IO_HAVE_SYS_WAIT): Remove.
	* libio/oldiopopen.c [_IO_HAVE_SYS_WAIT]: Make code unconditional.
	[!_IO_HAVE_SYS_WAIT]: Remove conditional code.
	* sysdeps/generic/_G_config.h (_G_HAVE_SYS_WAIT): Remove.
	* sysdeps/gnu/_G_config.h (_G_HAVE_SYS_WAIT): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_HAVE_SYS_WAIT): Likewise.

2012-09-20  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h [_G_NEED_STDARG_H]: Make code unconditional.
	* sysdeps/generic/_G_config.h (_G_NEED_STDARG_H): Remove.
	* sysdeps/gnu/_G_config.h (_G_NEED_STDARG_H): Remove.
	* sysdeps/mach/hurd/_G_config.h (_G_NEED_STDARG_H): Remove.

2012-09-19  Dmitry V. Levin  <ldv@altlinux.org>

	[BZ #14579]
	* elf/rtld.c (dl_main): Limit the check for self loading to normal
	mode only.
	* elf/tst-rtld-load-self.sh: New test.
	* elf/Makefile: Run it.

2012-09-18  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/wordsize-64/Makefile [$(subdir) = misc]
	(tst-writev-ENV): Remove.
	* sysdeps/wordsize-64/tst-writev.c (TIMEOUT): Define.

2012-09-17  Chris Metcalf  <cmetcalf@tilera.com>

	* crypt/md5test-giant.c (TIMEOUT): Increase to 8 minutes for tilegx.

2012-09-17  Joseph Myers  <joseph@codesourcery.com>

	* libio/iogetline.c [_LIBC || !_G_HAVE_IO_GETLINE_INFO]: Make code
	unconditional.
	* libio/iogetwline.c [_LIBC || !_G_HAVE_IO_GETLINE_INFO]:
	Likewise.
	* sysdeps/generic/_G_config.h (_G_HAVE_IO_GETLINE_INFO): Remove.
	* sysdeps/gnu/_G_config.h (_G_HAVE_IO_GETLINE_INFO): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_HAVE_IO_GETLINE_INFO):
	Likewise.

2012-09-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14587]
	* Makeconfig (ASFLAGS): Remove $(have-cpp-asm-debuginfo) check.
	* config.make.in (have-cpp-asm-debuginfo): Removed.
	* configure.in: Don't substitute libc_cv_cpp_asm_debuginfo.
	* configure: Regenerated.

2012-09-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5044]
	* stdio-common/printf_fp.c: Include <stdbool.h> and
	<rounding-mode.h>.
	(___printf_fp): Determine rounding using get_rounding_mode and
	round_away.
	* stdio-common/tst-printf-round.c: New file.
	* stdio-common/Makefile (tests): Add tst-printf-round.
	(link-libm): New variable.
	($(objpfx)tst-printf-round): Depend in $(link-libm).

2012-09-13  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14576]
	* bits/libc-lock.h (__rtld_lock_init_recursive): Removed.
	* sysdeps/mach/bits/libc-lock.h (__rtld_lock_init_recursive):
	Likewise.
	* sysdeps/mach/hurd/bits/libc-lock.h (__rtld_lock_init_recursive):
	Likewise.

2012-09-13  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h [!_G_HAVE_PRINTF_FP] (_IO_USE_DTOA): Remove.
	* sysdeps/generic/_G_config.h (_G_HAVE_PRINTF_FP): Likewise.
	* sysdeps/gnu/_G_config.h (_G_HAVE_PRINTF_FP): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_HAVE_PRINTF_FP): Likewise.

2012-09-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14518]
	* include/rounding-mode.h: New file.
	* sysdeps/generic/get-rounding-mode.h: Likewise.
	* sysdeps/s390/fpu/get-rounding-mode.h: Likewise.
	* stdlib/strtod_l.c: Include <rounding-mode.h>.
	(MAX_VALUE): New macro.
	(MIN_VALUE): Likewise.
	(overflow_value): New function.
	(underflow_value): Likewise.
	(round_and_return): Use overflow_value and underflow_value to
	determine return values in overflow and underflow cases.  Use
	round_away to determine rounding depending on rounding mode.
	(____STRTOF_INTERNAL): Use overflow_value and underflow_value to
	determine return values in overflow and underflow cases.
	* stdlib/tst-strtod-round.c: Include <fenv.h>.
	(struct test_results): New structure.
	(struct test): Use struct test_results to store expected results
	for all rounding modes.
	(TEST): Include expected results for all rounding modes.
	(test_in_one_mode): New function.
	(do_test): Use test_in_one_mode to compute and check results.
	Check results for all rounding modes.
	* stdlib/Makefile ($(objpfx)tst-strtod-round): Depend on
	$(link-libm).

2012-12-09  Allan McRae  <allan@archlinux.org>

	* sysdeps/i386/fpu/libm-test-ulps: Update

2012-09-11  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/_G_config.h (_G_int16_t): Remove.
	(_G_int32_t): Likewise.
	(_G_uint16_t): Likewise.
	(_G_uint32_t): Likewise.
	(_G_HAVE_BOOL): Likewise.
	(_G_HAVE_ATEXIT): Likewise.
	(_G_HAVE_LONG_DOUBLE_IO): Likewise.
	(_G_HAVE_IO_FILE_OPEN): Likewise.
	* sysdeps/gnu/_G_config.h (_G_int16_t): Remove.
	(_G_int32_t): Likewise.
	(_G_uint16_t): Likewise.
	(_G_uint32_t): Likewise.
	(_G_HAVE_BOOL): Likewise.
	(_G_HAVE_ATEXIT): Likewise.
	(_G_HAVE_LONG_DOUBLE_IO): Likewise.
	(_G_HAVE_IO_FILE_OPEN): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_int16_t): Remove.
	(_G_int32_t): Likewise.
	(_G_uint16_t): Likewise.
	(_G_uint32_t): Likewise.
	(_G_HAVE_BOOL): Likewise.
	(_G_HAVE_ATEXIT): Likewise.
	(_G_HAVE_LONG_DOUBLE_IO): Likewise.
	(_G_HAVE_IO_FILE_OPEN): Likewise.

2012-09-11  H.J. Lu  <hongjiu.lu@intel.com>

	* csu/libc-tls.c: Update copyright years.

2012-09-10  Joseph Myers  <joseph@codesourcery.com>

	* libioP.h [_G_USING_THUNKS]: Make code unconditional.
	[!_G_USING_THUNKS]: Remove conditional code.
	* sysdeps/gnu/_G_config.h (_G_USING_THUNKS): Remove.
	* sysdeps/mach/hurd/_G_config.h (_G_USING_THUNKS): Likewise.

	* libio/libioP.h [__GNUC__] (VTABLE_LABEL): Remove.
	[!builtinbuf_vtable && __cplusplus] (builtinbuf_vtable): Likewise.
	* sysdeps/generic/_G_config.h (_G_NAMES_HAVE_UNDERSCORE): Remove.
	(_G_VTABLE_LABEL_PREFIX): Likewise.
	(_G_VTABLE_LABEL_HAS_LENGTH): Likewise.
	* sysdeps/gnu/_G_config.h (_G_NAMES_HAVE_UNDERSCORE): Remove.
	(_G_VTABLE_LABEL_HAS_LENGTH): Likewise.
	(_G_VTABLE_LABEL_PREFIX): Likewise.
	(_G_VTABLE_LABEL_PREFIX_ID): Likewise.
	* sysdeps/mach/hurd/_G_config.h (_G_NAMES_HAVE_UNDERSCORE): Remove.
	(_G_VTABLE_LABEL_HAS_LENGTH): Likewise.
	(_G_VTABLE_LABEL_PREFIX): Likewise.
	(_G_VTABLE_LABEL_PREFIX_ID): Likewise.

2012-09-10  H.J. Lu  <hongjiu.lu@intel.com>

	* libio/Makefile: Include ../Makeconfig before tests.
	(tests): Add tst-fopenloc and depend on $(objpfx)tst-fopenloc.check
	only if $(build-shared) is yes.

	* iconv/gconv_db.c: Update copyright years.

2012-09-10  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/s_sinf-sse2.S: Fix
	unwind info if defined PIC. Fix special cases description.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf-sse2.S: Likewise.

	* sysdeps/x86_64/fpu/s_sinf.S: Fix special cases description, fix
	DP_HI_MASK entry.
	* sysdeps/x86_64/fpu/s_cosf.S: Likewise.

2012-09-07  H.J. Lu  <hongjiu.lu@intel.com>

	* scripts/check-local-headers.sh: Add "shopt -s nullglob".

	* iconv/gconv_db.c (free_derivation): Check if deriv->steps
	is NULL.

	* debug/Makefile (LDFLAGS-tst-chk4): Renamed to ...
	(LDLIBS-tst-chk4): This.
	(LDFLAGS-tst-chk5): Renamed to ...
	(LDLIBS-tst-chk5): This.
	(LDFLAGS-tst-chk6): Renamed to ...
	(LDLIBS-tst-chk6): This.
	(LDFLAGS-tst-lfschk4): Renamed to ...
	(LDLIBS-tst-lfschk4): This.
	(LDFLAGS-tst-lfschk5): Renamed to ...
	(LDLIBS-tst-lfschk5): This.
	(LDFLAGS-tst-lfschk6): Renamed to ...
	(LDLIBS-tst-lfschk6): This.

	* Makefile ($(inst_includedir)/gnu/stubs.h): Remove dependency
	on $(common-objpfx)soversions.mk.

2012-09-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10014]
	* manual/examples/inetcli.c (SERVERHOST): Use www.gnu.org as
	example host name.

2012-09-07  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* malloc/arena.c (arena_get_retry): New function that gets
	another arena for the caller to try its request on.
	* malloc/malloc.c (__libc_malloc): Use get_another_arena if the
	current arena cannot fulfill the request.
	(__libc_memalign): Likewise.
	(__libc_memalign): Likewise.
	(__libc_pvalloc): Likewise.
	(__libc_calloc): Likewise.

2012-09-05  John Tobey  <john.tobey@gmail.com>

	[BZ #13542]
	* manual/arith.texi (Operations on Complex): Fix description
	of carg branch cut.

2012-09-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10014]
	* manual/socket.texi (Host Addresses): Use www.gnu.org as example
	host name.

	[BZ #10038]
	* manual/memory.texi (Memory): Make order of menu items match
	order of sections.

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/dl-tls.c (DL_INITIAL_DTV): Removed.
	(_dl_initial_dtv): New.  Defined if SHARED isn't defined.
	(_dl_deallocate_tls): Restore GL(dl_initial_dtv).

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	* csu/libc-tls.c (static_dtv): Renamed to ...
	(_dl_static_dtv): This.  Make it global.
	(_dl_initial_dtv): Removed.
	(__libc_setup_tls): Updated.
	* elf/dl-tls.c (DL_INITIAL_DTV): New macro.
	(_dl_deallocate_tls): Replace GL(dl_initial_dtv) with
	DL_INITIAL_DTV.

2012-09-06  Petr Machata  <pmachata@redhat.com>

	* elf/elf.h (NT_S390_HIGH_GPRS): New macro.
	(NT_S390_TIMER, NT_S390_TODCMP, NT_S390_TODPREG): Likewise.
	(NT_S390_CTRS, NT_S390_PREFIX, NT_S390_LAST_BREAK): Likewise.
	(NT_S390_SYSTEM_CALL, NT_ARM_VFP): Likewise.

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14545]
	* csu/libc-tls.c (_dl_initial_dtv): New variable.
	* elf/dl-tls.c (_dl_deallocate_tls): Always check dtv before
	freeing dtv[-1].

2012-09-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14544]
	* Makeconfig (link-static-before-libc): Replace $(+prector)
	with $(+prectorT).
	(link-static-after-libc): Replace $(+postctor) with
	$(+postctorT).
	(link-bounded): Replace $(+prector)/$(+postctor) with
	$(+prectorT)/$(+postctorT).
	(+prectorT): New macro.
	(+postctorT): Likewise.

2012-09-06  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/gen-tst-strtod-round.c: Include <assert.h>.
	(round_str): Handle values above the maximum for IBM long double
	as inexact.
	* stdlib/tst-strtod-round.c (tests): Regenerated.

2012-09-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/multiarch/Makefile: Remove -mzarch
	assembler flag.
	* sysdeps/s390/s390-32/multiarch/memcmp.S: Use .machinemode
	zarch_nohighgprs around the zarch optimized routines.
	* sysdeps/s390/s390-32/multiarch/memcpy.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/memset.S: Likewise.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: Explicitly check
	for zarch.

2012-09-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/bits/hwcap.h (HWCAP_SPARC_PAUSE)
	(HWCAP_SPARC_CBCOND, HWCAP_SPARC_CRYPTO): Define.
	* sysdeps/sparc/dl-procinfo.h (_DL_HWCAP_COUNT): Increase to 27.
	* sysdeps/sparc/dl-procinfo.c (_dl_sparc_cap_flags): Add new
	entries.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/arena.c: Fold copyright years.
	* malloc/mcheck.c, malloc/memusage.c: Likewise.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/malloc.c (__libc_mallopt) <M_MMAP_MAX>: Fix indentation.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* manual/contrib.texi (Contributors): Fix typo.  Complete entry.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/malloc.c (__libc_mallopt) <M_MMAP_THRESHOLD>: Do not
	change internal state upon failure.

2012-09-05  Alexandre Oliva  <aoliva@redhat.com>

	* malloc/mcheck.c (mcheck_check_all): Fix typo.
	* malloc/memusage.c (mmap): Likewise.
	(mmap64, mremap): Likewise.  Adjust name in comment.

2012-09-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* libio/fileops.c: Fix typos in comments.
	* libio/oldfileops.c: Likewise.
	* libio/wfileops.c: Likewise.

2012-09-05  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #1349]
	* malloc/Makefile (tests): Add tst-malloc-usable test case.
	(tst-malloc-usable-ENV): Set environment for test case.
	* malloc/hooks.c (malloc_check_get_size): New function to get
	requested size.
	* malloc/malloc.c (musable): Use malloc_check_get_size.
	* malloc/tst-malloc-usable.c: New test case.

2012-09-05  Andreas Schwab  <schwab@linux-m68k.org>

	* stdlib/tst-strtod-overflow.c (TIMEOUT): Define.

2012-09-05  Allan McRae  <allan@archlinux.org>

	[BZ #13966]
	* configure.in (CXX_SYSINCLUDES): Use compiler output to
	determine header location.
	* configure: Regenerated.

2012-09-05  Andreas Schwab  <schwab@linux-m68k.org>

	* stdlib/gen-tst-strtod-round.c (formats): Add Motorola extended
	float format.
	* stdlib/tst-strtod-round.c (TEST) [LDBL_MANT_DIG == 64 &&
	LDBL_MAX_EXP == 16384]: Add case for Motorola extended float
	format.
	(test): Regenerate.

2012-09-04  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/addmul_1.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/submul_1.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/mul_1.S: New file.

2012-09-04  Florian Weimer  <fweimer@redhat.com>

	* stdlib/tst-secure-getenv.c (alternative_main): Only warn on SGID
	failures.

	* stdlib/tst-secure-getenv.c: Fix whitespace in comments.

2012-09-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9914]
	* libio/iogetdelim.c: Include <limits.h>.
	(_IO_getdelim): Avoid integer overflow in testing whether cur_len
	+ len + 1 would overflow.

2012-09-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-09-03  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/Makefile (sysdep_routines):
	Add s_sinf-sse2, s_conf-sse2.

	* sysdeps/i386/i686/fpu/multiarch/s_sinf-sse2.S: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf-sse2.S: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_sinf.c: New file.
	* sysdeps/i386/i686/fpu/multiarch/s_cosf.c: New file.

	* sysdeps/ieee754/flt-32/s_sinf.c (SINF, SINF_FUNC): Add macros
	for using routine as __sinf_ia32.
	Use macro for function declaration and weak_alias.
	* sysdeps/ieee754/flt-32/s_cosf.c (COSF, COSF_FUNC): Add macros
	for using routine as __cosf_ia32.
	Use macro for function declaration and weak_alias.

	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S: Fix Copyright.
	* sysdeps/i386/i686/fpu/multiarch/e_expf.c: Fix Copyright.

	* sysdeps/x86_64/fpu/s_sinf.S: New file.
	* sysdeps/x86_64/fpu/s_cosf.S: New file.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* math/libm-test.inc (cos_test): Add more test cases.
	(sin_test): Likewise.
	(sincos_test): Likewise.

2012-09-03  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c
	(IFUNC_RESOLVE): Make pointers to the specialized implementations
	hidden.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: Likewise.

2012-09-02  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14538]
	* sysdeps/x86_64/dl-machine.h (elf_machine_dynamic): Use the
	first element of the GOT.
	(elf_machine_load_address): Return the difference between
	the runtime address of _DYNAMIC and elf_machine_dynamic ().

2012-09-01  Allan McRae  <allan@archlinux.org>

	[BZ #13412]
	* configure.in (AWK): Require gawk version 3.0 or later.
	* configure: Regenerated.

2012-09-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_POSIX_CPU_TIMERS): Remove.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c
	[__NR_clock_getres]: Make code unconditional.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remoce conditional code.
	(clock_getcpuclockid): Remove code left unreachable by removal of
	conditionals.
	* sysdeps/unix/sysv/linux/clock_getres.c [__NR_clock_getres]: Make
	code unconditional.
	[__ASSUME_POSIX_CPU_TIMERS]: Likewise.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_gettime.c [__NR_clock_gettime]:
	Make code unconditional.
	[__ASSUME_POSIX_CPU_TIMERS]: Likewise.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_settime.c
	[__ASSUME_POSIX_CPU_TIMERS <= 0 && __NR_clock_settime]: Remove
	conditional code.
	[__ASSUME_POSIX_CPU_TIMERS]: Make code unconditional.
	[!__ASSUME_POSIX_CPU_TIMERS]: Remove conditional code.

2012-08-29  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14476]
	* Makefile (install): Also pass LD_SO=$(ld.so-version) to
	scripts/test-installation.pl.

	* scripts/test-installation.pl: Use LD_SO to get $ld_so_name
	and $ld_so_version if it is set.

2012-08-29  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14516]
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Don't return
	failure if reading from procfs failed.
	* sysdeps/unix/sysv/linux/ttyname_r.c (ttyname_r): Likewise.

2012-08-27  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_STAT64_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/fxstat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/fxstatat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/fxstat.c
	[!__ASSUME_STAT64_SYSCALL]: Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/fxstatat.c
	[!__ASSUME_STAT64_SYSCALL]: Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/lxstat.c
	[!__ASSUME_STAT64_SYSCALL]: Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/xstat.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/lxstat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sparc/sparc64/xstat.c: Do not include
	<kernel-features.h>.
	[__NR_stat64 && !__ASSUME_STAT64_SYSCALL] (__have_no_stat64):
	Remove.
	* sysdeps/unix/sysv/linux/xstat64.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional code.
	[__ASSUME_STAT64_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/xstatconv.c [!__ASSUME_STAT64_SYSCALL]:
	Remove conditional.

2012-08-27  Mike Frysinger  <vapier@gentoo.org>

	[BZ #5400]
	* NEWS: Add fixed bug number.

2012-08-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14519]
	* stdlib/strtod_l.c (round_and_return): Return -0.0 for
	underflowing exponent in case of negative sign.
	* stdlib/tst-strtod-round-data: Add more tests.
	* stdlib/tst-strtod-round.c (tests): Regenerated.

	[BZ #3479]
	* stdlib/strtod_l.c (NDIG): Remove.
	(HEXNDIG): Likewise.
	(MPNSIZE): Increase to represent 10^n where 2^-n is 1/4 ulp of the
	smallest representable value.
	(____STRTOF_INTERNAL): Use all fractional decimal digits that may
	lie within an exact representation of 1/2 ulp of the result.
	* stdlib/fpioconst.c (__tens): Include 10^2^9 and 10^2^10
	unconditionally.
	(TENS_P9_IDX): Define unconditionally.
	(TENS_P9_SIZE): Likewise.
	(TENS_P10_IDX): Likewise.
	(TENS_P10_SIZE): Likewise.
	[BITS_PER_MP_LIMB == 32]: Change condition for larger powers of 10
	to !defined __NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ > 1024.
	[!__NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ > 1024] (__tens): Add
	entries for 10^2^13 and 10^2^14.
	[!__NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ > 1024]
	(TENS_P13_IDX): Define.
	(TENS_P13_SIZE): Likewise.
	(TENS_P14_IDX): Likewise.
	(TENS_P14_SIZE): Likewise.
	(_fpioconst_pow10): Change array size to
	FPIOCONST_POW10_ARRAY_SIZE.  Make entries for 10^2^9 and 10^2^10
	unconditional.
	(_fpioconst_pow10) [!__NO_LONG_DOUBLE_MATH && __LDBL_MAX_EXP__ >
	1024]: Add entries for 10^2^13 and 10^2^14.
	[LAST_POW10 > _LAST_POW10]: Remove #error.
	* stdlib/fpioconst.h (FPIOCONST_POW10_ARRAY_SIZE): Define.
	(_fpioconst_pow10): Change array size to
	FPIOCONST_POW10_ARRAY_SIZE.
	* stdlib/gen-fpioconst.c: New file.
	* stdlib/gen-tst-strtod-round.c: Likewise.
	* stdlib/tst-strtod-round-data: Likewise.
	* stdlib/tst-strtod-round.c: Likewise.
	* stdlib/Makefile (tests): Add tst-strtod-round.

	[BZ #14459]
	* stdlib/strtod_l.c: Include <stdint.h>.
	(NDEBUG): Do not define.
	(round_and_return): Change EXPONENT parameter to type intmax_t.
	Rearrange calculations to avoid internal overflow possibilities.
	(str_to_mpn): Change EXPONENT parameter to type intmax_t *.
	Rearrange calculations to avoid internal overflow possibilities.
	Assert that number fits inside MPNSIZE limbs.
	(____STRTOF_INTERNAL): Change EXPONENT variable to type intmax_t.
	Change DIG_NO, INT_NO and LEAD_ZERO to type size_t.  Rearrange
	calculations and add assertions to avoid internal overflow
	possibilities.  Add casts to avoid signed/unsigned operations.
	* stdlib/tst-strtod-overflow.c: New file.
	* stdlib/Makefile (tests): Add tst-strtod-overflow.

2012-08-25  Marek Polacek  <polacek@redhat.com>

	* time/time.h: Fix some typos in comments.

2012-08-23  Roland McGrath  <roland@hack.frob.com>

	* posix/tst-rfc3484.c: #undef USE_NSCD before including getaddrinfo.c.
	* posix/tst-rfc3484-2.c: Likewise.
	* posix/tst-rfc3484-3.c: Likewise.

2012-08-23  Steve McIntyre  <steve.mcintyre@linaro.org>

	* elf/elf.h (EF_ARM_ABI_FLOAT_SOFT): New macro.
	(EF_ARM_ABI_FLOAT_HARD): Likewise.

2012-08-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/dl-fxstatat64.c: Use <> instead of "" in
	#include of fxstatat64.c.

2012-08-22  Roland McGrath  <roland@hack.frob.com>

	* shadow/getspent.c: #undef USE_NSCD before #include that gets the code.
	* shadow/getspent_r.c: Likewise.
	* shadow/getspnam.c: Likewise.
	* shadow/getspnam_r.c: Likewise.
	* gshadow/getsgent.c: Likewise.
	* gshadow/getsgent_r.c: Likewise.
	* gshadow/getsgnam.c: Likewise.
	* gshadow/getsgnam_r.c: Likewise.
	* inet/getnetbyad.c: Likewise.
	* inet/getnetbyad_r.c: Likewise.
	* inet/getnetbynm.c: Likewise.
	* inet/getnetbynm_r.c: Likewise.
	* inet/getnetent.c: Likewise.
	* inet/getnetent_r.c: Likewise.
	* inet/getproto.c: Likewise.
	* inet/getproto_r.c: Likewise.
	* inet/getprtent.c: Likewise.
	* inet/getprtent_r.c: Likewise.
	* inet/getprtname.c: Likewise.
	* inet/getprtname_r.c: Likewise.
	* inet/getrpcbyname.c: Likewise.
	* inet/getrpcbyname_r.c: Likewise.
	* inet/getrpcbynumber.c: Likewise.
	* inet/getrpcbynumber_r.c: Likewise.
	* inet/getrpcent.c: Likewise.
	* inet/getrpcent_r.c: Likewise.
	* inet/getaliasent.c: Likewise.
	* inet/getaliasent_r.c: Likewise.
	* inet/getaliasname.c: Likewise.
	* inet/getaliasname_r.c: Likewise.
	* nscd/getgrgid_r.c: Likewise.
	* nscd/getgrnam_r.c: Likewise.
	* nscd/gethstbyad_r.c: Likewise.
	* nscd/gethstbynm3_r.c: Likewise.
	* nscd/getpwnam_r.c: Likewise.
	* nscd/getpwuid_r.c: Likewise.
	* nscd/getsrvbynm_r.c: Likewise.
	* nscd/getsrvbypt_r.c: Likewise.
	* nscd/gai.c: Likewise.

	* configure.in (build_nscd): New substituted variable, set
	by --disable-build-nscd and defaults to $use_nscd.
	* configure: Regenerated.
	* config.make.in (build-nscd): New substituted variable.
	* nscd/Makefile (others, others-pie, install-sbin, extra-objs):
	Change conditional to require [$(build-nscd) = yes] as well.
	* NEWS: Mention --disable-build-nscd in the --disable-nscd item.

	[BZ #13696]
	* configure.in (use_nscd): New substituted variable, set by
	--disable-nscd.  If enabled, define USE_NSCD.
	* configure: Regenerated.
	* config.h.in: Add USE_NSCD.
	* config.make.in (use-nscd): New substituted variable.
	* inet/Makefile (CFLAGS-gethstbyad_r.c): Likewise.
	(CFLAGS-gethstbynm_r.c, CFLAGS-gethstbynm2_r.c): Likewise.
	(CFLAGS-getsrvbynm_r.c, CFLAGS-getsrvbypt_r.c): Variables removed.
	* grp/Makefile (CFLAGS-getgrgid_r.c): Remove -DUSE_NSCD.
	(CFLAGS-getgrnam_r.c): Likewise.
	(CFLAGS-initgroups.c): Likewise.
	* posix/Makefile (CFLAGS-getaddrinfo.c): Remove -DUSE_NSCD.
	* pwd/Makefile (CFLAGS-getpwuid_r.c, CFLAGS-getpwnam_r.c):
	Variables removed.
	* inet/getnetgrent_r.c
	(nscd_setnetgrent): New function, broken out of ...
	(setnetgrent): ... here.  Call it.
	(innetgr): Conditionalize nscd bits on [USE_NSCD].
	(nscd_getnetgrent): Conditionalize on [USE_NSCD].
	(__internal_getnetgrent_r): Conditionalize its use on [USE_NSCD].
	* nscd/Makefile (routines, aux): Move definitions after include of
	Makeconfig.  Conditionalize on [$(use-nscd) != no].
	* nss/nsswitch.c (nss_load_all_libraries, __nss_disable_nscd):
	Conditionalize on [USE_NSCD].
	(is_nscd, nscd_init_cb): Likewise.
	(nss_load_library): Conditionalize init callback on [USE_NSCD].
	* nss/nss_files/files-init.c: Conditionalize body on [USE_NSCD].
	* nss/nss_db/db-init.c: Likewise.
	* nscd/nscd.c (main): Conditionalize __nss_disable_nscd call on
	[USE_NSCD].
	* sysdeps/unix/sysv/linux/check_pf.c (get_nl_timestamp): New function.
	(make_request): Use it.
	(cache_valid_p): New function.
	(__check_pf): Use it.
	* NEWS: Add item for --disable-nscd.

2012-08-22  Dmitry V. Levin  <ldv@altlinux.org>

	* configure.in (SED): Update AC_CHECK_PROG_VER's version extract regexp
	to support sed >= 4.2.1-20-ga9bf076.
	* configure: Regenerated.

2012-08-22  Roland McGrath  <roland@hack.frob.com>

	* csu/libc-start.c (apply_irel): Move extern declarations inside here.
	Conditionalize whole body on [IREL].

2012-08-22  Jeff Law <law@redhat.com>

	[BZ #14505]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Only use gethostbyname4_r
	if the family is PF_UNSPEC.

2012-08-22  Mike Frysinger  <vapier@gentoo.org>

	* Makerules (lib-version): Rename from V.
	(install-lib-nosubdir): Change V to lib-version.

2012-08-22  Will Schmidt  <will_schmidt@vnet.ibm.com>

	[BZ #14252]
	* powerpc32/power6/wcschr.c: New file.
	* powerpc32/power6/wcscpy.c: New file.
	* powerpc32/power6/wcsrchr.c: New file.
	* powerpc64/power6/wcschr.c: New file.
	* powerpc64/power6/wcscpy.c: New file.
	* powerpc64/power6/wcsrchr.c: New file.

2012-08-21  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* string/str-two-way.h (AVAILABLE1_USES_J): New macro, define default.
	(two_way_short_needle): Use it.
	* string/strstr.c (AVAILABLE1_USES_J): Define.
	* string/strcasestr.c: Likewise.

	* string/str-two-way.h (two_way_short_needle): Use pointers instead of
	array references.
	* string/strcasestr.c (TOLOWER): Make side-effect safe.

	[BZ #11607]
	* NEWS: Add an entry.
	* string/str-two-way.h (AVAILABLE1, AVAILABLE2, RET0_IF_0): New macros,
	define their defaults.
	(two_way_short_needle): Detect end-of-string on-the-fly.
	* string/strcasestr.c, string/strstr.c (AVAILABLE): Update.
	(AVAILABLE1, AVAILABLE2, RET0_IF_0, AVAILABLE_USES_J): Define.
	* string/bug-strcasestr1.c: New test.
	* string/Makefile: Run it.

2012-08-21  Maxim Kuvyrkov  <maxim@codesourcery.com>

	[BZ #11607]
	* string/str-two-way.h (two_way_short_needle): Optimize matching of
	the first character.

2012-08-21  Roland McGrath  <roland@hack.frob.com>

	* csu/elf-init.c (__libc_csu_irel): Function removed.
	* csu/libc-start.c (apply_irel): New function.
	(LIBC_START_MAIN): Call it instead of __libc_csu_irel.

2012-08-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_FADVISE64_64_SYSCALL): Remove.
	* sysdeps/unix/sysv/linux/i386/posix_fadvise64.S: Do not include
	<kernel-features.h>.
	[__NR_fadvise64_64]: Make code unconditional.
	[!__ASSUME_FADVISE64_64_SYSCALL]: Remove conditional code.
	[__NR_fadvise64 && (!__ASSUME_FADVISE64_64_SYSCALL ||
	!__NR_fadvise64_64)]: Likewise.
	[!(__NR_fadvise64 && (!__ASSUME_FADVISE64_64_SYSCALL ||
	!__NR_fadvise64_64))]: Likewise.
	[__NR_fadvise64]: Make code unconditional.
	[!__NR_fadvise64]: Remove conditional code.
	* sysdeps/unix/sysv/linux/posix_fadvise64.c: Do not include
	<kernel-features.h>.
	(__posix_fadvise64_l64) [__NR_fadvise64_64]: Make code
	unconditional.
	(_posix_fadvise64_l64) [!__ASSUME_FADVISE64_64_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/posix_fadvise64.c: Do
	not include <kernel-features.h>.
	(__posix_fadvise64_l64) [__NR_fadvise64_64]: Make code
	unconditional.
	(_posix_fadvise64_l64) [!__ASSUME_FADVISE64_64_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/posix_fadvise64.c: Do not
	include <kernel-features.h>.
	(__posix_fadvise64_l64) [__NR_fadvise64_64]: Make code
	unconditional.
	(_posix_fadvise64_l64) [!__ASSUME_FADVISE64_64_SYSCALL]: Remove
	conditional code.

2012-08-21  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/memchr.S: Unrolled short loop and
	slight instruction rearrangements per scrollpipe analysis.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: Likewise.

2012-08-20  Roland McGrath  <roland@hack.frob.com>

	* manual/syslog.texi (syslog; vsyslog, closelog):
	Fix typo repeated twice: @file{dev/log} -> @file{/dev/log}.
	Reported by Ricardo Catalinas Jim√©nez <jimenezrick@gmail.com>.

	* elf/dl-sysdep.c (_dl_important_hwcaps): Fix conditional on using
	DSOCAPS to match condition on defining it.

2012-08-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SWAPCONTEXT_SYSCALL): Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext.S
	[__ASSUME_SWAPCONTEXT_SYSCALL]: Make code unconditional.
	[!__ASSUME_SWAPCONTEXT_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/setcontext.S
	[__ASSUME_SWAPCONTEXT_SYSCALL]: Make code unconditional.
	[!__ASSUME_SWAPCONTEXT_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/swapcontext.S
	[__ASSUME_SWAPCONTEXT_SYSCALL]: Make code unconditional.
	[!__ASSUME_SWAPCONTEXT_SYSCALL]: Remove conditional code.

	* sysdeps/unix/sysv/linux/kernel-features.h [__s390__ &&
	__LINUX_KERNEL_VERSION >= 0x020616] (__ASSUME_UTIMES): Define.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_MMAP2_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/mmap64.c [__NR_mmap2]: Make code
	unconditional.
	[!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/mmap.S (__mmap)
	[__ASSUME_MMAP2_SYSCALL]: Make code unconditional.
	(__mmap) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/mmap64.S (__mmap64) [__NR_mmap2]:
	Make code unconditional.
	(__mmap64) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	(__mmap64) [!__NR_mmap2]: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap.S (__mmap)
	[__ASSUME_MMAP2_SYSCALL]: Make code unconditional.
	(__mmap) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/mmap64.S (__mmap64)
	[__NR_mmap2]: Make code unconditional.
	(__mmap64) [!__ASSUME_MMAP2_SYSCALL]: Remove conditional code.
	(__mmap64) [!__NR_mmap2]: Likewise.

2012-08-20  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/getrlimit.c: Remove.

2012-08-18  Andreas Jaeger  <aj@suse.de>

	* stdio-common/_itoa.c (_itoa): Add missing DUMMY variable.

2012-08-18  Mike Frysinger  <vapier@gentoo.org>

	* include/sys/socket.h (__have_sock_cloexec): Add attribute_hidden.
	* include/unistd.h (__have_sock_cloexec): Likewise.
	(__have_pipe2): Likewise.
	(__have_dup3): Likewise.

2012-08-18  Mike Frysinger  <vapier@gentoo.org>

	[BZ #9685]
	* include/unistd.h (__have_pipe2): Change define into an extern int.
	(__have_dup3): Likewise.
	* socket/have_sock_cloexec.c: Include fcntl.h.
	(__have_pipe2): New variable.
	(__have_dup3): Likewise.

2012-08-17  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/nice.c: Adjust #include.

2012-08-17  Marek Polacek  <polacek@redhat.com>

	* sysdeps/ieee754/ldbl-96/s_sincosl.c (__sincosl): Use __attribute__
	((unused)) on I1, which is set by GET_LDOUBLE_WORDS but never used.

2012-08-17  Roland McGrath  <roland@hack.frob.com>

	* configure.in: Add AC_SUBST for sysheaders.
	* configure: Regenerated.
	* config.make.in (sysheaders): New substituted variable.

	* sysdeps/unix/mkfifo.c: Moved ...
	* sysdeps/posix/mkfifo.c: ... here.
	* sysdeps/unix/mkfifoat.c: Moved ...
	* sysdeps/posix/mkfifoat.c: ... here.

	* sysdeps/unix/utime.c: Moved ...
	* sysdeps/posix/utime.c: ... here.

	* sysdeps/unix/time.c: Moved ...
	* sysdeps/posix/time.c: ... here.
	* sysdeps/unix/sysv/linux/time.c: Adjust #include.
	* sysdeps/unix/sysv/linux/sparc/sparc64/time.c: Likewise.

	* sysdeps/unix/nice.c: Moved ...
	* sysdeps/posix/nice.c: ... here.

	* sysdeps/unix/alarm.c: Moved ...
	* sysdeps/posix/alarm.c: ... here.

	* intl/Makefile ($(codeset_mo)): Depend on the input file.

2012-08-17  Jeff Law <law@redhat.com>

	* intl/Makefile (codeset_mo): New variable.
	($(codeset_mo)): New target.
	(tst-codeset.out): Depend on that.  Remove explicit rule.
	(tst-gettext3.out, tst-gettext5.out): Likewise.
	(LOCPATH-ENV, tst-codeset-ENV): New variables.
	(tst-gettext3-ENV, tst-gettext5-ENV): Likewise.
	* intl/tst-codeset.sh: Remove.
	* intl/tst-gettext3.sh: Likewise.
	* intl/tst-gettext5.sh: Likewise.

2012-08-17  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/inet/syscalls.list: File removed.  Move contents into ...
	* sysdeps/unix/syscalls.list: ... here.

	* sysdeps/posix/getaddrinfo.c
	(save_gaiconf_mtime, check_gaiconf_mtime): New functions.
	(gaiconf_init, gaiconf_reload): Use them.
	[!_STATBUF_ST_NSEC]
	(gaiconf_mtime, save_gaiconf_mtime, check_gaiconf_mtime):
	Define using time_t rather than struct timespec.

	* sysdeps/generic/malloc-machine.h (MUTEX_INITIALIZER): New macro.
	(atomic_full_barrier, atomic_read_barrier, atomic_write_barrier):
	Macros removed.
	* malloc/arena.c (save_malloc_hook, save_free_hook): Conditionalize on
	[!NO_THREADS].
	(malloc_atfork, free_atfork, atfork_recursive_cntr): Likewise.
	(ptmalloc_lock_all, ptmalloc_unlock_all, ptmalloc_unlock_all2):
	Likewise.

	* elf/dl-iteratephdr.c (__dl_iterate_phdr): Use NULL rather than 0 for
	__libc_cleanup_push argument.

	* bits/param.h: New file.
	* misc/sys/param.h: New file.
	* include/sys/param.h: New file.
	* misc/Makefile (headers): Add bits/param.h.
	* sysdeps/generic/sys/param.h: File removed.
	* sysdeps/unix/sysv/linux/bits/param.h: New file.
	* sysdeps/unix/sysv/linux/sys/param.h: File removed.
	* sysdeps/mach/hurd/bits/param.h: New file.
	* sysdeps/mach/hurd/sys/param.h: File removed.

	* elf/dl-close.c (_dl_close_worker): Add a cast and a comment to the
	last change.

	* libio/genops.c (_IO_unbuffer_write): Conditionalize locking code on
	[_IO_MTSAFE_IO].
	* libio/libioP.h [!_IO_MTSAFE_IO && !NOT_IN_libc]
	(_IO_acquire_lock, _IO_acquire_lock_clear_flags2, _IO_release_lock):
	New macros.

	* Makeconfig [$(libc-reentrant) = yes] (libio-mtsafe): New variable.
	* libio/Makefile (CPPFLAGS): Append $(libio-mtsafe) unconditionally
	rather than -D_IO_MTSAFE_IO conditionally.
	* stdio-common/Makefile (CPPFLAGS): Likewise.
	* wcsmbs/Makefile (CPPFLAGS): Likewise.
	* stdlib/Makefile (CFLAGS-strfmon.c, CFLAGS-strfmon_l.c):
	Use $(libio-mtsafe).
	* debug/Makefile (CFLAGS-sprintf_chk.c): Use $(libio-mtsafe) instead
	of -D_IO_MTSAFE_IO.
	(CFLAGS-snprintf_chk.c, CFLAGS-vsprintf_chk.c): Likewise.
	(CFLAGS-vsnprintf_chk.c, CFLAGS-asprintf_chk.c): Likewise.
	(CFLAGS-vasprintf_chk.c, CFLAGS-obprintf_chk.c): Likewise.
	(CFLAGS-dprintf_chk.c, CFLAGS-vdprintf_chk.c): Likewise.
	(CFLAGS-printf_chk.c, CFLAGS-fprintf_chk.c): Likewise.
	(CFLAGS-vprintf_chk.c, CFLAGS-vfprintf_chk.c): Likewise.
	(CFLAGS-gets_chk.c, CFLAGS-fgets_chk.c): Likewise.
	(CFLAGS-fgets_u_chk.c, CFLAGS-fread_chk.c): Likewise.
	(CFLAGS-fread_u_chk.c): Likewise.
	(CFLAGS-swprintf_chk.c, CFLAGS-vswprintf_chk.c): Likewise.
	(CFLAGS-wprintf_chk.c, CFLAGS-fwprintf_chk.c): Likewise.
	(CFLAGS-vwprintf_chk.c, CFLAGS-vfwprintf_chk.c): Likewise.
	(CFLAGS-fgetws_chk.c, CFLAGS-fgetws_u_chk.c): Likewise.
	* grp/Makefile (CFLAGS-fgetgrent_r.c, CFLAGS-putgrent.c): Likewise.
	* gshadow/Makefile (CFLAGS-fgetsgent_r.c, CFLAGS-putsgent.c): Likewise.
	* misc/Makefile (CFLAGS-mntent_r.c): Likewise.
	* pwd/Makefile (CFLAGS-fgetpwent_r.c): Likewise.
	* shadow/Makefile (CFLAGS-fgetspent_r.c, CFLAGS-putspent.c): Likewise.

	* libio/Makefile: Test [$(libc-reentrant) = yes]
	instead of [$(filter %REENTRANT, $(defines)) nonempty].

	* Makeconfig
	[$(libc-reentrant) = yes] (defines): Append -D_LIBC_REENTRANT.
	* sysdeps/pthread/configure: File removed.
	* sysdeps/pthread/Makeconfig: New file.
	* sysdeps/mach/hurd/Makeconfig (libc-reentrant): New variable.
	* sysdeps/mach/hurd/configure.in: Don't touch DEFINES here.

2012-08-16  Gary Benson  <gbenson@redhat.com>

	* elf/dl-close.c (_dl_close_worker): Also set r->r_map when
	unmapping the first object in a namespace.

2012-08-16  Roland McGrath  <roland@hack.frob.com>

	* inet/getnetgrent_r.c (internal_setnetgrent): Renamed to ...
	(__internal_setnetgrent): ... this.  Add internal_function to
	definition.  Add libc_hidden_def.
	(setnetgrent): Update caller.
	(internal_endnetgrent): Renamed to ...
	(__internal_endnetgrent): ... this.  Add internal_function to
	definition.  Add libc_hidden_def.
	(endnetgrent): Update caller.
	(internal_getnetgrent_r): Renamed to ...
	(__internal_getnetgrent_r): ... this.  Add internal_function to
	definition.  Add libc_hidden_def.
	(__getnetgrent_r): Update caller.
	* inet/netgroup.h: Update declarations.  Add libc_hidden_proto uses.

2012-08-16  Joseph Myers  <joseph@codesourcery.com>

	* stdlib/longlong.h: Update from GCC.

2012-08-16  Roland McGrath  <roland@hack.frob.com>

	* stdlib/gmp-impl.h (udiv_qrnnd_preinv): Use __attribute__ ((unused))
	on _QL, which is set by umul_ppmm but never used.
	* stdio-common/_itoa.c (_itoa): Use __attribute__ ((unused)) on DUMMY
	variables, which are set by GMP macros but never used.
	* stdio-common/_itowa.c (_itowa): Likewise.
	* stdlib/divmod_1.c (mpn_divmod_1): Likewise.
	* stdlib/mod_1.c (mpn_mod_1): Likewise.

2012-08-16  Carlos O'Donell  <carlos_odonell@mentor.com>

	* sysdeps/sh/ldsodefs.h (ARCH_PLTENTER_MEMBERS) <sh_gnu_pltenter>:
	struct La_sh_regs is not constant.
	* sysdeps/sparc/ldsodefs.h (ARCH_PLTENTER_MEMBERS)
	<sparc32_gnu_pltenter, sparc64_gnu_pltenter>: struct La_sparc32_regs
	and struct La_sparc64_regs are not constant.

2012-08-16  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_POSIX_TIMERS): Remove.
	* sysdeps/unix/sysv/linux/clock_getcpuclockid.c
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_getres.c [__ASSUME_POSIX_TIMERS]:
	Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_gettime.c [__ASSUME_POSIX_TIMERS]:
	Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_nanosleep.c
	[__ASSUME_POSIX_TIMERS]: Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/clock_settime.c [__ASSUME_POSIX_TIMERS]:
	Make code unconditional.
	[!__ASSUME_POSIX_TIMERS]: Remove conditional code.
	[__ASSUME_POSIX_CPU_TIMERS <= 0 && __NR_clock_settime]
	(__libc_missing_posix_timers): Remove.

2012-08-15  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-load.c (_dl_map_object_from_fd) [SHARED]: Conditionalize
	check of GL(dl_error_catch_tsd) on [_LIBC_REENTRANT].

	* bits/libc-lock.h (__rtld_lock_initialize): New macro.

	* elf/dl-sym.c: Include <stdlib.h>.

	* posix/regcomp.c (init_word_char): Use temporaries to hold the 64-bit
	constants, which avoids warnings in 32-bit builds.

	* bits/fcntl.h [__USE_POSIX199309 || __USE_UNIX98]:
	(O_DSYNC, O_RSYNC): New macros (with NetBSD values).

	* misc/lseek.c: File moved to ...
	* io/lseek.c: ... here.

	* rt/clock_nanosleep.c: Include <time.h>, not <sys/time.h>.

	* crypt/sha512.c (sha512_process_block) [!USE_TOTAL128]: Avoid
	shifting LEN more than 31 bits at once.

2012-08-15  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #14195]
	* sysdeps/i386/i686/multiarch/strcmp-sssse3.S: Fix
	segmentation fault for a case of two empty input strings.
	* string/test-strncasecmp.c (check1): Renamed to...
	(bz12205): ...this.
	(bz14195): Add new testcase for two empty input strings and N > 0.
	(test_main): Call new testcase, adapt for renamed function.

2012-08-15  Andreas Jaeger  <aj@suse.de>

	[BZ #14090]
	* crypt/md5test2.c: New test, based on test supplied by Serge
	Belyshev <belyshev@depni.sinp.msu.ru>.
	* crypt/Makefile (xtests): Add md5test-giant..
	* crypt/Makefile ($(objpfx)md5test-giant): Add.

2012-08-15  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #14090]
	* crypt/md5.c (md5_process_block): Don't assume the buffer
	length is less than 2**32.
	* crypt/sha512.c (sha512_process_block): Don't assume the buffer
	length is less than 2**64.

2012-08-15  Roland McGrath  <roland@hack.frob.com>

	* string/str-two-way.h: Include <sys/param.h>.
	(MAX): Macro removed.

	* sysdeps/x86_64/multiarch/strstr-c.c: Add copyright header.
	Move #define and #undef of memmove to just before and after
	including <string.h>.

	* sysdeps/x86_64/multiarch/memmove.c: Don't include <stddef.h>.
	[!NOT_IN_libc]: Move #define and #undef of memmove to just before
	and after including <string.h>.  Move declarations of
	__memmove_sse2, __memmove_ssse3, and __memmove_ssse3_back
	to before #include "string/memmove.c".

	* include/dirent.h: Declare __getdirentries.

	* sysdeps/posix/system.c (do_system): Cast SUB_REF () to void when not
	using its value, to avoid warnings in the [!_LIBC_REENTRANT] case.

2012-08-14  Mike Frysinger  <vapier@gentoo.org>

	* config.h.in (HAVE_CPP_ASM_DEBUGINFO): Delete.
	* sysdeps/i386/configure.in: Remove assembler-with-cpp debug check.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/i386/sysdep.h (ENTRY): Remove calls to STABS_CURRENT_FILE1,
	STABS_CURRENT_FILE, and STABS_FUN.
	(END): Remove call to STABS_FUN_END.
	(STABS_CURRENT_FILE1): Delete.
	(STABS_CURRENT_FILE): Likewise.
	(STABS_FUN): Likewise.
	(STABS_FUN_END): Likewise.
	(STABS_FUN2): Likewise.
	* sysdeps/x86_64/configure.in: Remove assembler-with-cpp debug check.
	* sysdeps/x86_64/configure: Regenerated.

2012-08-14  Roland McGrath  <roland@hack.frob.com>

	* elf/dl-open.c: Include <atomic.h>.
	* elf/dl-lookup.c: Likewise.

2012-08-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_CLONE_THREAD_FLAGS): Remove.
	* sysdeps/unix/sysv/linux/s390/system.c (FORK): Define
	unconditionally.
	* sysdeps/unix/sysv/linux/sparc/system.c (FORK): Define
	unconditionally.
	* sysdeps/unix/sysv/linux/system.c [!FORK] (FORK): Do not
	condition on __ASSUME_CLONE_THREAD_FLAGS.

2012-08-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-08-13  Maxim Kuvyrkov  <maxim@codesourcery.com>

	* include/atomic.h (atomic_exchange_and_add): Split into ...
	(atomic_exchange_and_add_acq, atomic_exchange_and_add_rel): ... these.
	New atomic macros.

2012-08-13  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-08-13  Jeff Law <law@redhat.com>

	* manual/stdio.texi (snprintf): Clarify handling of the trailing
	null byte in the output string.

2012-08-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL): Define.
	[__LINUX_KERNEL_VERSION >= __LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL]
	(__ASSUME_ARG_MAX_STACK_BASED): Define.
	* sysdeps/unix/sysv/linux/sysconf.c (__sysconf)
	[__LINUX_KERNEL_VERSION < 0x020617]: Change condition to
	!__ASSUME_ARG_MAX_STACK_BASED.  Compare version with
	__LINUX_ARG_MAX_STACK_BASED_MIN_KERNEL.

2012-08-09  Jeff Law <law@redhat.com>

	[BZ #13939]
	* malloc.c/arena.c (reused_arena): New parameter, avoid_arena.
	When avoid_arena is set, don't retry in the that arena.  Pick the
	next one, whatever it might be.
	(arena_get2): New parameter avoid_arena, pass through to reused_arena.
	(arena_lock): Pass in new parameter to arena_get2.
	* malloc/malloc.c (__libc_memalign): Pass in new parameter to
	arena_get2.
	(__libc_malloc): Unify retrying after main arena failure with
	__libc_memalign version.
	(__libc_valloc, __libc_pvalloc, __libc_calloc): Likewise.

2012-08-09  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14166]
	* sysdeps/i386/i686/multiarch/strstr-c.c (strstr): Redefined
	to __redirect_strstr.
	(__strstr_sse42): Use typeof __redirect_strstr.
	(__strstr_ia32): Likewise.
	(__libc_strstr): New prototype.
	(strstr): Renamed to ...
	(__libc_strstr): This.
	(strstr): New strong alias of __libc_strstr.
	* sysdeps/x86_64/multiarch/strstr-c.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/time.c (time): Redefined to
	__redirect_time.
	Include <time.h>.
	(__libc_time): New prototype.
	(time_ifunc): Replace time with __libc_time.
	(time): New strong alias and hidden definition of __libc_time.
	(__GI_time): Remove strong alias.
	* sysdeps/x86_64/multiarch/memmove.c: Don't include <string.h>.
	Include <stddef.h>.
	(memmove): Redefined to __redirect_memmove.
	(__memmove_sse2): Use typeof __redirect_memmove.
	(__memmove_ssse3): Likewise.
	(__memmove_ssse3_back): Likewise.
	(__libc_memmove): New prototype.
	(memmove): Renamed to ...
	(__libc_memmove): This.
	(memmove): New strong alias of __libc_memmove.

2012-08-08  Mark Salter  <msalter@redhat.com>

	* elf/elf.h
	(R_MN10300_TLS_GD): Define.
	(R_MN10300_TLS_LD): Likewise.
	(R_MN10300_TLS_LDO): Likewise.
	(R_MN10300_TLS_GOTIE): Likewise.
	(R_MN10300_TLS_IE): Likewise.
	(R_MN10300_TLS_LE): Likewise.
	(R_MN10300_TLS_DTPMOD): Likewise.
	(R_MN10300_TLS_DTPOFF): Likewise.
	(R_MN10300_TLS_TPOFF): Likewise.
	(R_MN10300_SYM_DIFF): Likewise.
	(R_MN10300_ALIGN): Likewise.
	(R_MN10300_NUM): Update.

2012-08-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_TGKILL):
	Remove.

2012-08-08  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/fdopendir.c: Include <stddef.h>.

	* sysdeps/unix/sysv/linux/readdir64_r.c: Update #include for
	sysdeps/unix -> sysdeps/posix move.
	* sysdeps/unix/sysv/linux/i386/readdir64_r.c: Likewise.

2012-08-07	Allan McRae	<allan@archlinux.org>

	[BZ #14303]
	* sunrpc/rpc_main.c (SVR4_CPP): Remove.
	(SUNOS_CPP): Likewise.
	(find_cpp): Fall back to selecting system cpp when /lib/cpp is
	not found.
	(open_input): Call CPP using execvp.

2012-08-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_PROT_GROWSUPDOWN): Remove.
	(__ASSUME_NO_CLONE_DETACHED): Likewise.
	(__ASSUME_GETDENTS32_D_TYPE): Likewise.
	(__ASSUME_WAITID_SYSCALL): Likewise.
	* sysdeps/unix/sysv/linux/dl-execstack.c
	(_dl_make_stack_executable) [PROT_GROWSDOWN || PROT_GROWSUP]: Make
	code unconditional.
	(_dl_make_stack_executable) [!__ASSUME_PROT_GROWSUPDOWN]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/getdents.c (__GETDENTS)
	[__ASSUME_GETDENTS32_D_TYPE]: Make code unconditional.
	(__GETDENTS) [!__ASSUME_GETDENTS32_D_TYPE]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/waitid.c [__NR_waitid]: Make code
	unconditional.
	[__ASSUME_WAITID_SYSCALL]: Likewise.
	[!__ASSUME_WAITID_SYSCALL]: Remove conditional code.

2012-08-07  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/closedir.c: Renamed to ...
	* sysdeps/posix/closedir.c: ... here.
	* sysdeps/unix/dirfd.c: Renamed to ...
	* sysdeps/posix/dirfd.c: ... here.
	* sysdeps/unix/dirstream.h: Renamed to ...
	* sysdeps/posix/dirstream.h: ... here.
	* sysdeps/unix/fdopendir.c: Renamed to ...
	* sysdeps/posix/fdopendir.c: ... here.
	* sysdeps/unix/opendir.c: Renamed to ...
	* sysdeps/posix/opendir.c: ... here.
	* sysdeps/unix/readdir.c: Renamed to ...
	* sysdeps/posix/readdir.c: ... here.
	* sysdeps/unix/readdir_r.c: Renamed to ...
	* sysdeps/posix/readdir_r.c: ... here.
	* sysdeps/unix/rewinddir.c: Renamed to ...
	* sysdeps/posix/rewinddir.c: ... here.
	* sysdeps/unix/seekdir.c: Renamed to ...
	* sysdeps/posix/seekdir.c: ... here.
	* sysdeps/unix/telldir.c: Renamed to ...
	* sysdeps/posix/telldir.c: ... here.
	* sysdeps/unix/sysv/linux/opendir.c: Update #include.
	* sysdeps/unix/sysv/linux/readdir64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/readdir64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/readdir.c: Likewise.

	* sysdeps/unix/bsd/bsd4.4/bits/fcntl.h: Renamed to ...
	* bits/fcntl.h: ... here.

	* sysdeps/unix/bsd/bsd4.4/bits/fcntl.h (O_NOCTTY): Define to 0x8000,
	not 0.
	(O_ASYNC, O_FSYNC, O_SYNC): Move outside [__USE_MISC].
	[__USE_XOPEN2K8] (O_DIRECTORY, O_NOFOLLOW, O_CLOEXEC): New macros.
	(FCREAT, FEXCL, FTRUNC, FNOCTTY, FNONBLOCK): Macros removed.
	(struct flock): Move l_start, l_len to the beginning.
	Use __pid_t for l_pid.
	[__USE_XOPEN2K] (POSIX_FADV_NORMAL, POSIX_FADV_RANDOM): New macros.
	[__USE_XOPEN2K] (POSIX_FADV_SEQUENTIAL, POSIX_FADV_WILLNEED): Likewise.
	[__USE_XOPEN2K] (POSIX_FADV_DONTNEED, POSIX_FADV_NOREUSE): Likewise.
	(F_GETLK64, F_SETLK64, F_SETLKW64): New macros.
	[__USE_XOPEN2K8] (F_DUPFD_CLOEXEC): New macro.
	[__USE_LARGEFILE64] (struct flock64): New type.
	(F_GETOWN, F_SETOWN): Also define for [__USE_XOPEN2K8].

	* sysdeps/unix/bsd/bsd4.4/bits/dirent.h: Renamed to ...
	* bits/dirent.h: ... here.

	* sysdeps/unix/bsd/bsd4.4/bits/dirent.h
	[__INO_T_MATCHES_INO64_T] (_DIRENT_MATCHES_DIRENT64): New macro.

2012-08-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change from 2.6.0 to 2.6.16.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_POSIX_CPU_TIMERS): Define unconditionally.
	(__ASSUME_TGKILL): Define conditional on architectures, not kernel
	version.
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_CLONE_STOPPED): Remove.
	(__ASSUME_FADVISE64_64_SYSCALL): Define conditional on
	architectures, not kernel version.
	(__ASSUME_PROT_GROWSUPDOWN): Define unconditionally.
	(__ASSUME_NO_CLONE_DETACHED): Likewise.
	(__ASSUME_GETDENTS32_D_TYPE): Likewise.
	(__ASSUME_WAITID_SYSCALL): Likewise.
	[__sparc__ && __arch64__] (__ASSUME_STAT64_SYSCALL): Do not
	condition definition on __LINUX_KERNEL_VERSION >= 0x02060c.
	* README: State 2.6.16 as minimum Linux kernel version.  Do not
	refer to older versions.

2012-08-06  Roland McGrath  <roland@hack.frob.com>

	* dirent/alphasort.c [_DIRENT_MATCHES_DIRENT64]:
	Define alphasort64 as an alias.
	* dirent/versionsort.c [_DIRENT_MATCHES_DIRENT64]:
	Define versionsort64 as an alias.
	* dirent/scandir.c [_DIRENT_MATCHES_DIRENT64]:
	Define scandir64 as an alias.
	* dirent/scandirat.c [_DIRENT_MATCHES_DIRENT64]:
	Define scandirat64 as an alias.
	* dirent/alphasort64.c (alphasort64):
	Conditionalize on [!_DIRENT_MATCHES_DIRENT64].
	* dirent/versionsort64.c: Likewise.
	* dirent/scandir64.c: Likewise.
	* dirent/scandirat64.c: Likewise.
	* sysdeps/wordsize-64/alphasort.c: File removed.
	* sysdeps/wordsize-64/alphasort64.c: File removed.
	* sysdeps/wordsize-64/scandir.c: File removed.
	* sysdeps/wordsize-64/scandir64.c: File removed.
	* sysdeps/wordsize-64/scandirat.c: File removed.
	* sysdeps/wordsize-64/scandirat64.c: File removed.
	* sysdeps/wordsize-64/versionsort.c: File removed.
	* sysdeps/wordsize-64/versionsort64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort64.c: File removed.

	* bits/typesizes.h [__LP64__] (__INO_T_MATCHES_INO64_T): New macros.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h:
	[__s390x__] (__INO_T_MATCHES_INO64_T): New macro.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	[defined __arch64__ || defined __sparcv9]
	(__INO_T_MATCHES_INO64_T): New macro.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h
	[__x86_64__] (__INO_T_MATCHES_INO64_T): New macro.
	* bits/dirent.h (_DIRENT_MATCHES_DIRENT64): New macro.
	* sysdeps/unix/sysv/linux/bits/dirent.h
	[defined __OFF_T_MATCHES_OFF64_T && defined __INO_T_MATCHES_INO64_T]
	(_DIRENT_MATCHES_DIRENT64): New macro.

	* io/lockf.c [__OFF_T_MATCHES_OFF64_T]:
	Define lockf64 as an alias.
	* libio/fseeko.c [__OFF_T_MATCHES_OFF64_T]:
	Define fseeko64 as an alias.
	* libio/ftello.c [__OFF_T_MATCHES_OFF64_T]:
	Define ftello64 as an alias.
	* libio/iofgetpos.c [__OFF_T_MATCHES_OFF64_T]:
	Define _IO_fgetpos64 and fgetpos64 as aliases.
	* libio/iofsetpos.c [__OFF_T_MATCHES_OFF64_T]:
	Define _IO_fsetpos64 and fsetpos64 as aliases.
	* io/lockf64.c [!__OFF_T_MATCHES_OFF64_T]:
	Conditionalize body on this.
	* libio/fseeko64.c: Likewise.
	* libio/ftello64.c: Likewise.
	* libio/iofgetpos64.c: Likewise.
	* libio/iofsetpos64.c: Likewise.
	* sysdeps/wordsize-64/lockf.c: File removed.
	* sysdeps/wordsize-64/lockf64.c: File removed.
	* sysdeps/wordsize-64/fseeko.c: File removed.
	* sysdeps/wordsize-64/fseeko64.c: File removed.
	* sysdeps/wordsize-64/ftello.c: File removed.
	* sysdeps/wordsize-64/ftello64.c: File removed.
	* sysdeps/wordsize-64/iofgetpos.c: File removed.
	* sysdeps/wordsize-64/iofgetpos64.c: File removed.
	* sysdeps/wordsize-64/iofsetpos.c: File removed.
	* sysdeps/wordsize-64/iofsetpos64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos64.c: File removed.

	* bits/typesizes.h [__LP64__] (__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h:
	[__s390x__] (__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	[defined __arch64__ || defined __sparcv9]
	(__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h
	[__x86_64__] (__OFF_T_MATCHES_OFF64_T): New macro.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__OFF_T_MATCHES_OFF64_T): New macro.

2012-08-06  H.J. Lu  <hongjiu.lu@intel.com>

	* stdlib/secure-getenv.c (__secure_getenv): Replace
	GLIBC_2_16 with GLIBC_2_17.

2012-08-06  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen.c: Removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen64.c: Likewise.

2012-08-03  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-08-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_AT_SECURE):
	Remove.
	(__ASSUME_CORRECT_SI_PID): Likewise.
	(__ASSUME_BRK_PAGE_ROUNDED): Likewise.
	(__ASSUME_TMPFS_NAME): Likewise.
	* sysdeps/unix/sysv/linux/dl-sysdep.c (frob_brk)
	[!__ASSUME_BRK_PAGE_ROUNDED]: Remove conditional code.
	* sysdeps/unix/sysv/linux/ldsodefs.h [__ASSUME_AT_SECURE]
	(HAVE_AUX_SECURE): Make definition unconditional.
	* sysdeps/unix/sysv/linux/shm_open.c (where_is_shmfs)
	[!__ASSUME_TMPFS_NAME]: Remove conditional code.

2012-08-03  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/mach/hurd/sys/param.h (MAXSYMLINKS): Macro removed.
	* sysdeps/mach/hurd/bits/local_lim.h (SYMLOOP_MAX): Macro removed.
	* sysdeps/mach/hurd/eloop-threshold.h: New file.
	* hurd/lookup-retry.c (__hurd_file_name_lookup_retry): Use
	__eloop_threshold instead of SYMLOOP_MAX.

	* sysdeps/generic/eloop-threshold.h: New file.
	* stdlib/canonicalize.c (__realpath): Use __eloop_threshold instead
	of MAXSYMLINKS.
	* elf/chroot_canon.c (chroot_canon): Likewise.

2012-08-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change to 2.6.0 everywhere.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SET_THREAD_AREA_SYSCALL): Remove.
	(__ASSUME_CLONE_THREAD_FLAGS): Condition on architectures, not
	kernel versions.
	(__ASSUME_POSIX_TIMERS): Define unconditionally.
	(__ASSUME_FUTEX_REQUEUE): Remove.
	(__ASSUME_STATFS64): Define unconditionally.
	(__ASSUME_AT_SECURE): Likewise.
	(__ASSUME_CORRECT_SI_PID): Likewise.
	(__ASSUME_TGKILL): Define without depending on kernel version for
	i386.
	(__ASSUME_UTIMES): Likewise.
	(__ASSUME_SWAPCONTEXT_SYSCALL): Condition on architecture, not
	kernel version.
	(__ASSUME_BRK_PAGE_ROUNDED): Define unconditionally.
	(__ASSUME_TMPFS_NAME): Likewise.
	* README: Update reference to Linux kernel versions.

2012-08-02  Marek Polacek  <polacek@redhat.com>

	[BZ #14150]
	* configure.in (libc_cv_asm_type_prefix): Remove test.  Replace
	libc_cv_asm_type_prefix with %.
	* configure: Regenerated.
	* include/libc-symbols.h: Remove comment about
	ASM_TYPE_DIRECTIVE_PREFIX.  Replace ASM_TYPE_DIRECTIVE_PREFIX with %.
	(declare_symbol_alias_1_paste) [__ASSEMBLER__]: Do not define.
	(declare_symbol_alias_1_paste_1) [__ASSEMBLER__]: Likewise.
	(declare_symbol_alias_1_stringify) [!__ASSEMBLER__]: Likewise.
	(declare_symbol_alias_1_stringify_1) [!__ASSEMBLER__]: Likewise.
	* elf/tst-unique2mod2.c: Replace ASM_TYPE_DIRECTIVE_PREFIX with %.
	[HAVE_ASM_UNIQUE_OBJECT]: Do not define S.
	[HAVE_ASM_UNIQUE_OBJECT]: Do not define _S.
	* elf/tst-unique2mod1.c: Likewise.
	* elf/tst-unique1mod2.c: Likewise.
	* elf/tst-unique1mod1.c: Likewise.
	* config.h.in: Do not undef ASM_TYPE_DIRECTIVE_PREFIX.
	* sysdeps/s390/s390-32/sysdep.h: Do not define ASM_TYPE_DIRECTIVE.
	Replace ASM_TYPE_DIRECTIVE with .type.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h:
	Do not define ASM_TYPE_DIRECTIVE.
	* sysdeps/powerpc/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h:
	Replace ASM_TYPE_DIRECTIVE with .type.
	* sysdeps/s390/s390-32/s390-mcount.S: Likewise.
	* sysdeps/s390/s390-64/s390x-mcount.S: Likewise.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_expl.S: Likewise.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/e_acosh.S: Likewise.
	* sysdeps/i386/fpu/e_pow.S: Likewise.
	* sysdeps/i386/fpu/s_asinhl.S: Likewise.
	* sysdeps/i386/fpu/e_acoshl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1.S: Likewise.
	* sysdeps/i386/fpu/s_frexpf.S: Likewise.
	* sysdeps/i386/fpu/e_log2.S: Likewise.
	* sysdeps/i386/fpu/e_log2l.S: Likewise.
	* sysdeps/i386/fpu/e_scalb.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtf.S: Likewise.
	* sysdeps/i386/fpu/e_logl.S: Likewise.
	* sysdeps/i386/fpu/s_cbrt.S: Likewise.
	* sysdeps/i386/fpu/s_frexpl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1f.S: Likewise.
	* sysdeps/i386/fpu/e_log2f.S: Likewise.
	* sysdeps/i386/fpu/e_acoshf.S: Likewise.
	* sysdeps/i386/fpu/e_log.S: Likewise.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/e_logf.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/e_atanh.S: Likewise.
	* sysdeps/i386/fpu/s_asinhf.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/s_frexp.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/s_asinh.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtl.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S: Likewise.
	* sysdeps/i386/i686/fpu/e_logl.S: Likewise.
	* sysdeps/i386/i686/strtok.S: Likewise.
	* sysdeps/i386/i386-mcount.S: Likewise.
	* sysdeps/i386/strtok.S: Likewise.
	* sysdeps/x86_64/fpu/e_expl.S: Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Likewise.
	* sysdeps/x86_64/fpu/e_expf.S: Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysignf.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysign.S: Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S: Likewise.
	* sysdeps/x86_64/_mcount.S: Likewise.
	* sysdeps/x86_64/strtok.S: Likewise.
	* sysdeps/sh/_mcount.S: Likewise.

2012-08-01  Roland McGrath  <roland@hack.frob.com>

	* libio/iofopen.c: Include <fcntl.h>.
	[_LIBC] [!defined O_LARGEFILE || O_LARGEFILE == 0]
	(_IO_fopen64, fopen64): Define as aliases.
	* libio/iofopen64.c: Include <fcntl.h>.
	[!defined _LIBC || (defined O_LARGEFILE && O_LARGEFILE != 0)]:
	Conditionalize body on this.
	* sysdeps/wordsize-64/iofopen.c: File removed.
	* sysdeps/wordsize-64/iofopen64.c: File removed.

2012-08-01  Marek Polacek  <polacek@redhat.com>

	* libc/Makeconfig: Use elf in place of binfmt-subdir.
	Use dlfcn directly instead of a variable.
	(binfmt-subdir): Do not define.
	(dlfcn): Likewise.

2012-08-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_FCNTL64):
	Remove all definitions.
	* sysdeps/unix/sysv/linux/i386/fcntl.c: Do not include
	<kernel-features.h>.
	[!__ASSUME_FCNTL64] (__have_no_fcntl64): Remove.
	(miss_F_GETOWN_EX): Remove all definitions.
	[NO_CANCELLATION && !__ASSUME_FCNTL64] (__fcntl_nocancel): Remove
	macro definition.
	[!__ASSUME_FCNTL64]: Remove conditional code.
	[__ASSUME_FCNTL64]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/lockf64.c: Do not include
	<kernel-features.h>.
	[__NR_fcntl64 && !__ASSUME_FCNTL64] (__have_no_fcntl64): Remove.
	(lockf64) [!__ASSUME_FCNTL64]: Remove conditional code.
	(lockf64) [__NR_fcntl64]: Make code unconditional.
	(lockf64) [__ASSUME_FCNTL64]: Likewise.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_VFORK_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/i386/vfork.S (__vfork) [__NR_vfork]:
	Make code unconditional.
	(__vfork) [__ASSUME_VFORK_SYSCALL]: Likewise.
	(__vfork) [!__ASSUME_VFORK_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/vfork.S (__vfork)
	[__NR_vfork]: Make code unconditional.
	(__vfork) [__ASSUME_VFORK_SYSCALL]: Likewise.
	(__vfork) [!__ASSUME_VFORK_SYSCALL]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S (__vfork)
	[__NR_vfork]: Make code unconditional.
	(__vfork) [__ASSUME_VFORK_SYSCALL]: Likewise.
	(__vfork) [!__ASSUME_VFORK_SYSCALL]: Remove conditional code.

2012-08-01  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/sys/param.h (NGROUPS): Define only if [NGROUPS_MAX].
	(MAXSYMLINKS): Define only if [SYMLOOP_MAX].

	* misc/mkstemp.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkstemp64 as an alias.
	* misc/mkstemps.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkstemps64 as an alias.
	* misc/mkostemp.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkostemp64 as an alias.
	* misc/mkostemps.c [!defined O_LARGEFILE || O_LARGEFILE == 0]:
	Define mkostemps64 as an alias.
	* misc/mkstemp64.c [defined O_LARGEFILE && O_LARGEFILE != 0]:
	Conditionalize body on this.
	* misc/mkostemp64.c: Likewise.
	* misc/mkostemps64.c: Likewise.
	* misc/mkstemps64.c: Likewise.
	* sysdeps/wordsize-64/mkstemp64.c: File removed.
	* sysdeps/wordsize-64/mkostemp64.c: File removed.
	* sysdeps/wordsize-64/mkostemp.c: File removed.
	* sysdeps/wordsize-64/mkstemp.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp.c: File removed.

	[BZ #14138]
	* sysdeps/unix/sysv/linux/syscalls.list: Add getrlimit/ugetrlimit line.
	* sysdeps/unix/sysv/linux/i386/getrlimit.c: File removed.
	* sysdeps/unix/sysv/linux/powerpc/getrlimit.c: File removed.
	* sysdeps/unix/sysv/linux/sh/getrlimit.c: File removed.

	* sysdeps/unix/make-syscalls.sh: Emit uses of the versioned_symbol and
	compat_symbol macros from <shlib-compat.h> rather than the underlying
	default_symbol_version and symbol_version macros, so that DEFAULT
	lines in shlib-versions are respected.
	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Likewise.

2012-08-01  Florian Weimer  <fweimer@redhat.com>

	[BZ #2705]
	* posix/unistd.h (setuid, setreuid, seteuid, setresuid):
	Declare with warn_unused_result.
	(setgid, setregid, setegid, setresgid): Likewise.
	* sysdeps/unix/sysv/linux/sys/fsuid.h (setfsuid, setfsgid):
	Likewise.
	* WUR-REPORT: Remove set*id functions.

2012-07-31  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/renameat.c: New file, mostly copied from rename.c.

2012-07-31  Roland McGrath  <roland@hack.frob.com>

	[BZ #10191]
	* include/sys/socket.h (__libc_accept, __libc_accept4):
	Add attribute_hidden.
	* socket/accept4.c (__libc_accept4): Remove libc_hidden_def.

	* nss/getXXbyYY_r.c (INTERNAL (REENTRANT_NAME)): Conditionalize
	use of PTR_MANGLE.
	* inet/getnetgrent_r.c (setup): Likewise.

	* sysdeps/generic/siglist.h: Put SIGWINCH under #ifdef.

2012-07-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-07-31  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c (__clog): Use __log1p if larger part has absolute
	value between 1.0 and 2.0 and smaller part has absolute value less
	than 1.0.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-31  Florian Weimer  <fweimer@redhat.com>

	* stdlib/tst-secure-getenv.c: Use printf for error reporting.
	Exit with zero in case no suitable GID is found, and write a
	message to standard error.

2012-07-30  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/generic/sys/param.h (MAXSYMLINKS): Define to SYMLOOP_MAX
	rather than to 1.
	(NBBY, NGROUPS, CANBSIZ, NCARGS): New macros.
	(MAXPATHLEN): Removed.
	(NOGROUP, NODEV): New macros.
	(setbit, clrbit, isset, isclr): New macros.
	(howmany, roundup, powerof2): New macros.
	(DEV_BSIZE): New macro.

	* include/unistd.h: Add attribute_hidden on __libc_pwrite64.
	* sysdeps/posix/pwrite64.c: Remove libc_hidden_def (__libc_pwrite64).

	* sysdeps/ieee754/k_standard.c (__kernel_standard_l): Conditionalize
	definition on [!__NO_LONG_DOUBLE_MATH].

	* nss/nsswitch.c (__nss_lookup_function): Conditionalize use of
	PTR_MANGLE and PTR_DEMANGLE.

	* socket/accept4.c (accept4): Rename to __libc_accept4.
	Define accept4 as a weak alias.

	* sysdeps/posix/getcwd.c (__getcwd): Conditionalize d_type field use
	on [_DIRENT_HAVE_D_TYPE].
	* io/ftw.c (ftw_dir): Likewise.

	* io/xmknod.c (__xmknod): Don't check PATH for being null.

	* libio/genops.c (flush_cleanup): Move inside [_IO_MTSAFE_IO].

	* bits/signum.h (SIGSTOP, SIGCONT, SIGTSTP, SIGTTIN, SIGTTOU, SIGCHLD):
	Use the BSD numbers rather than the arbitrary ones we had.
	(SIGBUS, SIGIO, SIGPOLL, SIGPROF, SIGSYS): New macros.
	(SIGTRAP, SIGURG, SIGUSR1, SIGUSR2, SIGVTALRM): New macros.
	(SIGXCPU, SIGXFSZ): New macros.
	(_NSIG): Now 32.

	* elf/rtld.c (_rtld_global): Conditionalize .dl_ns[LM_ID_BASE]
	initializer on [_LIBC_REENTRANT].

	* iconv/iconv_charmap.c (charmap_conversion): Move ST, ADDR
	definitions inside [_POSIX_MAPPED_FILES].

	* posix/regex.c: Include <sys/param.h> for MIN/MAX.

	* dirent/opendir.c: Include <fcntl.h>.

	* bits/libc-lock.h (__libc_setspecific): Evaluate arguments.
	(__libc_getspecific): Likewise.
	(__libc_key_create): Likewise.

	* stdio-common/tmpfile64.c: Include <fcntl.h> first.
	[defined O_LARGEFILE && O_LARGEFILE != 0]: Conditionalize on this.
	* stdio-common/tmpfile.c [!defined O_LARGEFILE || O_LARGEFILE == 0]
	(tmpfile64): Define as alias.
	* sysdeps/wordsize-64/tmpfile.c: File removed.
	* sysdeps/wordsize-64/tmpfile64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile64.c: File removed.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile.c: File removed.

	* stdio-common/vfscanf.c: Include <stdbool.h>.
	* nss/makedb.c: Likewise.
	* stdio-common/_i18n_number.h: Likewise.
	* argp/argp-help.c: Likewise.
	* posix/wordexp.c: Likewise.
	* sysdeps/posix/spawni.c: Likewise.
	* nss/nss_files/files-initgroups.c: Likewise.
	* stdio-common/reg-modifier.c: Include <stdlib.h>.
	* nss/nss_files/files-initgroups.c: Likewise.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_db/db-initgroups.c: Likewise.
	* io/fchmodat.c: Include <sys/stat.h>.

	* sysdeps/generic/ldsodefs.h (struct rtld_global): Use
	__rtld_lock_define_recursive macro instead of __rtld_lock_recursive_t.

	* intl/loadmsgcat.c (_nl_load_domain): Don't use MAP_FAILED outside of
	[HAVE_MMAP].

	* bits/stat.h: Fix inclusion guard to accept _FCNTL_H too.
	Add multiple inclusion protection.

2012-07-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-07-27  Gary Benson  <gbenson@redhat.com>

	[BZ #14298]
	* elf/rtld.c: Include <stap-probe.h>.
	(dl_main): Added static probes "init_start" and "init_complete".
	* elf/dl-load.c: Include <stap-probe.h>.
	(lose): Take new parameter "nsid".
	Added static probe "map_failed".
	(_dl_map_object_from_fd): Pass namespace id to lose.
	Added static probe "map_start".
	(open_verify): Pass namespace id to lose.
	* elf/dl-open.c: Include <stap-probe.h>.
	(dl_open_worker) Added static probes "map_complete", "reloc_start"
	and "reloc_complete".
	* elf/dl-close.c: Include <stap-probe.h>.
	(_dl_close_worker): Added static probes "unmap_start" and
	"unmap_complete".
	* elf/rtld-debugger-interface.txt: New file documenting the above.

2012-07-26  Roland McGrath  <roland@hack.frob.com>

	* sunrpc/rpc_hout.c (pdeclaration): Call f_print with a "%s" format
	rather than a string variable.
	* sunrpc/rpc_main.c (h_output): Likewise.
	* sunrpc/rpc_svcout.c (write_real_program): Likewise.

2012-07-26  Pino Toscano  <toscano.pino@tiscali.it>

	* inet/check_native.c: New file.

2012-07-26  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c (__clog): Use __log1p or direct log1p calculation
	if larger part has absolute value 1.0.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* elf/tst-auditmod1.c (pltenter): Remove all definitions of macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	Update #error for removed macros to refer only to definitions in
	tst-audit.h.
	* elf/tst-auditmod3b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod4b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod5b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod6b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod6c.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* elf/tst-auditmod7b.c (pltenter): Remove all definitions of
	macro.
	(pltexit): Likewise.
	(La_regs): Likewise.
	(La_retval): Likewise.
	(int_retval): Likewise.
	* sysdeps/generic/tst-audit.h: Update comment to refer only to
	macro definitions in tst-audit.h.
	* sysdeps/i386/tst-audit.h: New file.
	* sysdeps/powerpc/powerpc32/tst-audit.h: Likewise.
	* sysdeps/powerpc/powerpc64/tst-audit.h: Likewise.
	* sysdeps/s390/s390-32/tst-audit.h: Likewise.
	* sysdeps/s390/s390-64/tst-audit.h: Likewise.
	* sysdeps/sh/tst-audit.h: Likewise.
	* sysdeps/sparc/sparc32/tst-audit.h: Likewise.
	* sysdeps/sparc/sparc64/tst-audit.h: Likewise.
	* sysdeps/x86_64/tst-audit.h: Likewise.

2012-07-26  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Add __THROW for
	ptrace.

	* sysdeps/unix/sysv/linux/sys/ptrace.h (__ptrace_eventcodes): Add
	new value PTRACE_EVENT_SECCOMP from Linux 3.5.
	(__ptrace_setoptions): Add new value PTRACE_O_TRACESECCOMP, adjust
	PTRACE_O_MASK.
	* sysdeps/unix/sysv/linux/s390/bits/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/ptrace.h: Likewise.

	* sysdeps/unix/sysv/linux/sys/epoll.h (EPOLLWAKEUP): Add new
	value.

	* sysdeps/unix/sysv/linux/bits/siginfo.h (siginfo_t): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new macro.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h (siginfo_t): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new marcro.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h (siginfo_t): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new macro.
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h (struct): Add
	_sigsys.
	(si_call_addr, si_syscall, si_arch): Define new macro.

2012-07-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change to 2.4.21 where previously 2.4.1.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h [(__powerpc__ ||
	__sh__) && !__powerpc64__] (__ASSUME_FCNTL64): Do not condition on
	Linux kernel version.
	(__ASSUME_STD_AUXV): Remove.
	[__powerpc__] (__ASSUME_VFORK_SYSCALL): Do not condition on Linux
	kernel version.
	[__powerpc__ && !__powerpc64] (__ASSUME_MMAP2_SYSCALL): Likewise.
	(__ASSUME_NEW_PRCTL_SYSCALL): Remove.
	(__ASSUME_FIXED_CLONE_SYSCALL): Likewise.
	(__ASSUME_NEW_RT_SIGRETURN_SYSCALL): Likewise.
	(__ASSUME_NETLINK_SUPPORT): Likewise.
	* nscd/gai.c [NEED_NETLINK && __ASSUME_NETLINK_SUPPORT == 0]
	(__no_netlink_support): Remove conditional definition.
	* sysdeps/unix/sysv/linux/check_pf.c (__no_netlink_support):
	Remove.
	(__check_pf) [!__ASSUME_NETLINK_SUPPORT]: Remove conditional code.
	[__ASSUME_NETLINK_SUPPORT]: Make code unconditional.
	* sysdeps/unix/sysv/linux/if_index.c [!__ASSUME_NETLINK_SUPPORT]
	(if_nameindex_ioctl): Remove.
	(if_nameindex_netlink): Do not handle __no_netlink_support.
	(if_nameindex) [!__ASSUME_NETLINK_SUPPORT]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/ifaddrs.c [!__ASSUME_NETLINK_SUPPORT]:
	Remove conditional code.
	(__netlink_open) [!__ASSUME_NETLINK_SUPPORT]: Remove conditional
	code.
	(getifaddrs_internal) [__ASSUME_NETLINK_SUPPORT]: Make code
	unconditional.
	[!__ASSUME_NETLINK_SUPPORT]: Remove conditional code.
	[__ASSUME_NETLINK_SUPPORT] (freeifaddrs): Make code unconditional.
	* sysdeps/unix/sysv/linux/netlinkaccess.h (__no_netlink_support):
	Remove.
	* sysdeps/unix/sysv/linux/powerpc/dl-sysdep.c
	[!__ASSUME_STD_AUXV]: Remove conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/clone.S (__clone)
	[!__ASSUME_FIXED_CLONE_SYSCALL]: Remove conditional code.
	[__ASSUME_FIXED_CLONE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_mask.c
	[!__ASSUME_NEW_PRCTL_SYSCALL] (fe_mask_handler): Remove.
	(__fe_mask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove conditional
	code.
	[__ASSUME_NEW_PRCTL_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/fe_nomask.c
	[!__ASSUME_NEW_PRCTL_SYSCALL] (fe_nomask_handler): Remove.
	(__fe_nomask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove
	conditional code.
	[__ASSUME_NEW_PRCTL_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_mask.c
	(__fe_mask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove conditional
	code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/fpu/fe_nomask.c
	(__fe_nomask_env) [!__ASSUME_NEW_PRCTL_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/getcontext.S
	(__novec_getcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make
	code unconditional.
	(__novec_getcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	(__getcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__getcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(__makecontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__makecontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/setcontext.S
	(__novec_setcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make
	code unconditional.
	(__novec_setcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	(__setcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__setcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/swapcontext.S
	(__novec_swapcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make
	code unconditional.
	(__novec_swapcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.
	(__swapcontext) [__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Make code
	unconditional.
	(__swapcontext) [!__ASSUME_NEW_RT_SIGRETURN_SYSCALL]: Remove
	conditional code.

2012-07-25  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/i386/accept4.S: Remove pseudo_end label.
	* sysdeps/unix/sysv/linux/i386/call_sync_file_range.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/epoll_pwait.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/mmap64.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/semtimedop.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/socket.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (PSEUDO): Likewise.
	* sysdeps/unix/sysv/linux/i386/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/getcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/setcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (PSEUDO): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/swapcontext.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/vfork.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Likewise.

2012-07-25  Florian Weimer  <fweimer@redhat.com>

	* Versions.def: Add GLIBC_2.17.
	* stdlib/stdlib.h: Rename __secure_getenv to secure_getenv.
	* include/stdlib.h: Rename __secure_getenv to secure_getenv.
	Introduce __libc_secure_getenv.
	* stdlib/Versions (2.17): Add secure_getenv
	(GLIBC_PRIVATE): Add __libc_secure_getenv.
	* stdlib/secure-getenv.c: Rename __secure_getenv to
	__libc_secure_getenv.  Add secure_getenv alias.  Add compatibility
	symbol __secure_getenv for GLIBC_2.0.
	* stdlib/tst-secure-getenv.c: New.
	* stdlib/Makefile (tests): Add testcase.
	* manual/startup.texi (Environment Access): Document
	secure_getenv.
	* hesiod/hesiod.c (hesiod_init): Rename __secure_getenv to
	__libc_secure_getenv.
	* inet/ruserpass.c (ruserpass): Likewise.
	* malloc/mtrace.c (mtrace): Likewise.
	* sysdeps/mach/hurd/tmpfile.c (__tmpfile): Likewise.
	* sysdeps/posix/libc_fatal.c (__libc_fatal): Likewise.
	* sysdeps/posix/sysconf.c (__sysconf__check_spec): Likewise.
	* sysdeps/posix/tempname.c: Likewise.  Evaluate
	HAVE_SECURE_GETENV.
	* sysdeps/unix/sysv/linux/libc_fatal.c (__libc_message): Rename
	__secure_getenv to __libc_secure_getenv.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Add secure_getenv.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist: Likewise.

2012-07-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/generic/ldsodefs.h (struct La_i86_regs): Remove.
	(struct La_i86_retval): Likewise.
	(struct La_x86_64_regs): Likewise.
	(struct La_x86_64_retval): Likewise.
	(struct La_x32_regs): Likewise.
	(struct La_x32_retval): Likewise.
	(struct La_ppc32_regs): Likewise.
	(struct La_ppc32_retval): Likewise.
	(struct La_ppc64_regs): Likewise.
	(struct La_ppc64_retval): Likewise.
	(struct La_sh_regs): Likewise.
	(struct La_sh_retval): Likewise.
	(struct La_s390_32_regs): Likewise.
	(struct La_s390_32_retval): Likewise.
	(struct La_s390_64_regs): Likewise.
	(struct La_s390_64_retval): Likewise.
	(struct La_sparc32_regs): Likewise.
	(struct La_sparc32_retval): Likewise.
	(struct La_sparc64_regs): Likewise.
	(struct La_sparc64_retval): Likewise.
	(struct audit_ifaces): Remove architecture-specific pltenter and
	pltexit members.
	* sysdeps/i386/ldsodefs.h: New file.
	* sysdeps/powerpc/ldsodefs.h: Likewise.
	* sysdeps/s390/ldsodefs.h: Likewise.
	* sysdeps/sh/ldsodefs.h: Likewise.
	* sysdeps/sparc/ldsodefs.h: Likewise.
	* sysdeps/x86_64/ldsodefs.h: Likewise.

2012-07-25  Marek Polacek  <polacek@redhat.com>

	[BZ #6808]
	* math/libm-test.inc (yn_test): Add another test.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c (__ieee754_ynl): Set errno
	to ERANGE when the result is +-Inf.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_ynl): Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c (__ieee754_ynf): Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c (__ieee754_ynl): Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c (__ieee754_yn): Likewise.

2012-07-24  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/time.h-data (NULL): Use macro-constant.  Require
	equal to 0.
	(CLOCKS_PER_SEC): Use macro instead of constant.  Specify type as
	clock_t.
	[ISO11] (TIME_UTC): Use macro-int-constant.  Require value > 0.

2012-07-23  Thomas Schwinge  <thomas@codesourcery.com>

	* configure.in <sysdeps resolving>: Correct printing
	Implies_before.
	* configure: Regenerate.

2012-07-22  Thomas Schwinge  <thomas@codesourcery.com>

	* math/w_ilogb.c: Include <limits.h>.
	* math/w_ilogbl.c: Likewise.

2012-07-20  Joseph Myers  <joseph@codesourcery.com>

	* manual/lang.texi (__va_copy): Document primarily as ISO C99
	va_copy.  Document allowing for unavailable va_copy only as
	pre-C99 compatibility.
	* manual/string.texi (Copying and Concatenation): Use va_copy
	instead of __va_copy in concat example.

2012-07-20  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/sendto.c (create_address_port): New subroutine.
	(__sendto): Use create_address_port.  Initialize APORT and deallocate
	it if not null.

	* sysdeps/mach/hurd/llistxattr.c: New file, copied from listxattr.c
	with O_NOLINK passed to __file_name_lookup.

	* sysdeps/mach/hurd/lremovexattr.c: New file, copied from removexattr.c
	with O_NOLINK passed to __file_name_lookup.

	* sysdeps/mach/hurd/getgroups.c: Return -1 and set EINVAL for
	negative N or less than NGIDS.

	* sysdeps/mach/hurd/getlogin_r.c: Make LOGIN non-static and change its
	type to string_t.  Set ERANGE as errno and return it if NAME is not big
	enough.  Use memcpy instead of strncpy.

2012-07-20  Joseph Myers  <joseph@codesourcery.com>

	* elf/Makefile (check-data): Remove.
	(localplt.data): New vpath directive.
	($(objpfx)check-localplt.out): Use localplt.data from vpath
	instead of $(check-data).
	* scripts/data/localplt-generic.data: Move to ...
	* sysdeps/generic/localplt.data: ... here.
	* scripts/data/localplt-i386-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/i386/nptl/localplt.data: ... here.
	* scripts/data/localplt-powerpc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/localplt.data:
	... here.
	* scripts/data/localplt-powerpc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/localplt.data:
	... here.
	* scripts/data/localplt-s390-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/localplt.data:
	... here.
	* scripts/data/localplt-s390x-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/localplt.data:
	... here.
	* scripts/data/localplt-sparc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/localplt.data:
	... here.
	* scripts/data/localplt-sparc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/localplt.data:
	... here.

2012-07-19 Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/tls-macros.h: Split PowerPC definitions in
	PPC32 and PPC64 files.
	* sysdeps/powerpc/powerpc32/tls-macros.h: New file.
	* sysdeps/powerpc/powerpc64/tls-macros.h: Likewise.

2012-07-19  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/makecontext.c: Move
	__makecontext_ret to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/__makecontext_ret.S:
	... here and call exit if uc_link is NULL.  New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/Makefile: Add
	__makecontext_ret.S.
	* sysdeps/unix/sysv/linux/s390/s390-64/makecontext.c: Move
	__makecontext_ret to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/__makecontext_ret.S:
	... here and call exit if uc_link is NULL.  New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/Makefile: Add
	__makecontext_ret.S.

2012-07-19  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* elf/elf.h (R_390_IRELATIVE): New definition.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela): Invoke the
	resolver function for IFUNC symbols.  Support R_390_IRELATIVE.
	(elf_machine_lazy_rel): Support R_390_IRELATIVE.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_rela):
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/dl-irel.h: New file.
	* sysdeps/s390/s390-64/memcpy.S: New asm code.
	* sysdeps/s390/s390-64/memset.S: New asm code.
	* sysdeps/s390/s390-64/memcmp.S: New asm code.
	* sysdeps/s390/s390-64/multiarch/memset.S: New file.
	* sysdeps/s390/s390-64/multiarch/ifunc-resolve.c: New file.
	* sysdeps/s390/s390-64/multiarch/memcmp.S: New file.
	* sysdeps/s390/s390-64/multiarch/memcpy.S: New file.
	* sysdeps/s390/s390-64/multiarch/Makefile: New file.
	* sysdeps/s390/s390-32/multiarch/ifunc-resolve.c: New file.
	* sysdeps/s390/s390-32/multiarch/Makefile: New file.
	* sysdeps/s390/s390-32/multiarch/memcmp.S: New file.
	* sysdeps/s390/s390-32/multiarch/memcpy.S: New file.
	* sysdeps/s390/s390-32/multiarch/memset.S: New file.
	* sysdeps/s390/s390-32/memcpy.S: New asm code.
	* sysdeps/s390/s390-32/memset.S: New asm code.
	* sysdeps/s390/s390-32/memcmp.S: New asm code.

2012-07-17  Marek Polacek  <polacek@redhat.com>

	[BZ #14349]
	* sysdeps/s390/s390-32/configure.in: Remove TLS check.
	* sysdeps/s390/s390-64/configure.in: Likewise.
	* sysdeps/sparc/configure.in: Likewise.
	* sysdeps/powerpc/powerpc32/configure.in: Likewise.
	* sysdeps/powerpc/powerpc64/configure.in: Likewise.
	* sysdeps/i386/configure.in: Likewise.
	* sysdeps/x86_64/configure.in: Likewise.
	* sysdeps/sh/configure.in: Likewise.
	* sysdeps/s390/s390-32/configure: Regenerated.
	* sysdeps/s390/s390-64/configure: Likewise.
	* sysdeps/x86_64/configure: Likewise.
	* sysdeps/sh/configure: Likewise.
	* sysdeps/powerpc/powerpc64/configure: Likewise.
	* sysdeps/powerpc/powerpc32/configure: Likewise.
	* sysdeps/sparc/configure: Likewise.
	* sysdeps/i386/configure: Likewise.

	* elf/dl-open.c: Comment fixes.

2012-07-17  Joseph Myers  <joseph@codesourcery.com>

	* Makefile [CXX] (check-data): Remove.
	[CXX] (c++-types.data): New vpath directive.
	[CXX] ($(objpfx)c++-types-check.out): Use c++-types.data from
	vpath.  Do not allow for C++ type data being missing.
	* scripts/data/c++-types-alpha-linux-gnu.data: Move to
	ports/sysdeps/unix/sysv/linux/alpha/nptl/c++-types.data.
	* scripts/data/c++-types-ia64-linux-gnu.data: Move to
	ports/sysdeps/unix/sysv/linux/ia64/nptl/c++-types.data.
	* scripts/data/c++-types-i386-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/i386/nptl/c++-types.data: ... here.
	* scripts/data/c++-types-powerpc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-powerpc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-s390-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-s390x-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-sparc-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-sparc64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-x32-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/c++-types.data:
	... here.
	* scripts/data/c++-types-x86_64-linux-gnu.data: Move to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/c++-types.data: ... here.

	* elf/tls-macros.h (TLS_LE): Move architecture-specific
	definitions to architecture-specific files.
	(TLS_IE): Likewise.
	(TLS_LD): Likewise.
	(TLS_GD): Likewise.
	* sysdeps/i386/tls-macros.h: New file.
	* sysdeps/powerpc/tls-macros.h: Likewise.
	* sysdeps/s390/s390-32/tls-macros.h: Likewise.
	* sysdeps/s390/s390-64/tls-macros.h: Likewise.
	* sysdeps/sh/tls-macros.h: Likewise.
	* sysdeps/sparc/sparc32/tls-macros.h: Likewise.
	* sysdeps/sparc/sparc64/tls-macros.h: Likewise.
	* sysdeps/x86_64/tls-macros.h: Likewise.

2012-07-17  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Preserve
	zero value for regular exit case.

	* sysdeps/unix/sysv/linux/x86_64/__start_context.S
	(__start_context): Preserve zero value for regular exit case.

2012-07-17  Thomas Schwinge  <thomas@codesourcery.com>
	    Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* manual/setjmp.texi (setcontext): Clarify normal process
	termination when uc_link is the null pointer.
	* stdlib/tst-makecontext.c (cf): Exercise this: remove explicit
	exit call.

2012-07-16  Andreas Schwab  <schwab@linux-m68k.org>

	* stdlib/bug-getcontext.c (do_test): Don't test FE_ALL_EXCEPT in
	preprocessor.  Test for each exception mask separately.

2012-07-16  Andreas Jaeger  <aj@suse.de>

	* po/ru.po: Update from translation team.

2012-07-15  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/string.h-data (NULL): Use macro-constant.  Require
	equal to 0.
	[ISO || ISO99 || ISO11] (stddef.h): Do not allow header.
	(str*): Change to str[abcdefghijklmnopqrstuvwxyz]*.
	(wcs*): Change to wcs[abcdefghijklmnopqrstuvwxyz]*.
	(mem[abcdefghijklmnopqrstuvwxyz]*): Allow.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.

2012-07-13  Andreas Jaeger  <aj@suse.de>

	* po/fr.po: Update from translation team.

2012-07-12  Marek Polacek  <polacek@redhat.com>

	[BZ #14173]
	* math/libm-test.inc (yn_test): Add test for BZ #14173.
	* sysdeps/ieee754/ldbl-96/e_jnl.c (__ieee754_ynl): Correct
	loop condition.

2012-07-12  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel):
	Change to 2.4.1 where previously 2.4.0.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/kernel-features.h [!__sh__]
	(__ASSUME_ST_INO_64_BIT): Do not condition definition on kernel
	version.
	[__i386__ || __sparc__] (__ASSUME_FCNTL64): Likewise.
	(__ASSUME_AT_CLKTCK): Remove.
	(__ASSUME_AT_PAGESIZE): Likewise.
	(__ASSUME_AT_XID): Likewise.
	(__ASSUME_GETDENTS64_SYSCALL): Define unconditionally.
	[__i386__] (__ASSUME_VFORK_SYSCALL): Define unconditionally.
	* sysdeps/unix/sysv/linux/ldsodefs.h (HAVE_AUX_XID): Define
	unconditionally.
	(HAVE_AUX_PAGESIZE): Likewise.
	* sysdeps/unix/sysv/linux/prof-freq.c (__profile_frequency)
	[__ASSUME_AT_CLKTCK]: Make code unconditional.
	[!__ASSUME_AT_CLKTCK]: Remove conditional code.

2012-07-12  Jeroen van Bemmel  <jvb127@gmail.com>

	[BZ #14307]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Increase the size of
	the temporary buffer used to invoke __gethostbyname2_r,
	__gethostbyaddr_r and gethostbyname4_r to make room for struct
	host_data / struct gaih_addrtuple.
	* resolv/nss_dns/dns-host.c (global scope): Move definition of
	implementation constants MAX_NR_ALIASES and MAX_NR_ADDRS to
	header file nss/nsswitch.h.
	* nss/nsswitch.h (global scope): Add definition of implementation
	constants MAX_NR_ALIASES and MAX_NR_ADDRS (moved from
	resolv/nss_dns/dns-host.c).

2012-07-11  Andreas Jaeger  <aj@suse.de>

	* po/fr.po: Update from translation team.

	* po/sv.po: Update from translation team
	* po/fr.po: Another update from translation team.

2012-07-11  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c: Do not call sinh and cosh
	for subnormals or multiply small sinh result by itself.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c: Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-07-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-07-10  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14347]
	* misc/sys/syslog.h (LOG_MAKEPRI): Don't shift first argument.
	(INTERNAL_MARK): Shift it here.

2012-07-10  Marek Polacek  <polacek@redhat.com>

	[BZ #14151]
	* configure.in (libc_cv_asm_global_directive): Remove test.  Replace
	libc_cv_asm_global_directive with .globl.
	* configure: Regenerated.
	* sysdeps/i386/configure.in: Replace libc_cv_asm_global_directive
	with .globl.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/x86_64/configure.in: Replace libc_cv_asm_global_directive
	with .globl.
	* sysdeps/x86_64/configure: Regenerated.
	* config.h.in: Do not undefine ASM_GLOBAL_DIRECTIVE.
	* include/libc-symbols.h: Replace ASM_GLOBAL_DIRECTIVE with .globl.
	* elf/tst-unique2mod2.c: Likewise.
	* elf/tst-unique2mod1.c: Likewise.
	* elf/tst-unique1mod2.c: Likewise.
	* elf/tst-unique1mod1.c: Likewise.
	* sysdeps/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/s390/s390-32/s390-mcount.S: Likewise.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/s390x-mcount.S: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/i386/i386-mcount.S: Likewise.
	* sysdeps/x86_64/_mcount.S: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.
	* sysdeps/sh/_mcount.S: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/gprsave1.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/fprrest.S: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/fprsave.S: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/gprrest1.S: Likewise.
	* sysdeps/powerpc/powerpc32/gprsave0.S: Likewise.
	* sysdeps/powerpc/powerpc32/gprrest0.S: Likewise.
	* locale/localeinfo.h: Likewise.
	(_NL_CURRENT_DEFINE_STRINGIFY): Delete macro.
	(_NL_CURRENT_DEFINE_STRINGIFY_1): Likewise.

2012-07-09  Roland McGrath  <roland@hack.frob.com>

	[BZ #14336]
	* manual/charset.texi (Extended Char Intro): Word use fix, "operating
	system".
	* manual/message.texi (The Uniforum approach): Likewise.
	* manual/charset.texi (Extended Char Intro): Spelling fix, "affected".
	(glibc iconv Implementation): Likewise.

2012-07-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14337]
	* math/s_clog.c (__clog): Avoid scaling a value down where that
	could result in underflow.
	* math/s_clog10.c (__clog10): Likewise.
	* math/s_clog10f.c (__clog10f): Likewise.
	* math/s_clog10l.c (__clog10l): Likewise.
	* math/s_clogf.c (__clogf): Likewise.
	* math/s_clogl.c (__clogl): Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-06  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14283]
	* sysdeps/powerpc/fpu/k_rem_pio2f.c (__fp_kernel_rem_pio2f): Shift
	by 7 not 8 to examine high bit of fractional part.

	[BZ #14042]
	* sysdeps/powerpc/powerpc32/ppc-mcount.S [SHARED]: Don't use PLT
	for call to __mcount_internal.
	* sysdeps/powerpc/powerpc32/Makefile (sysdep_routines)
	(shared-only-routines) [$(subdir) = gmon]: Add compat-ppc-mcount.
	* sysdeps/powerpc/powerpc32/compat-ppc-mcount.S: New file.

2012-07-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14154]
	* sysdeps/ieee754/flt-32/k_tanf.c (__kernel_tanf): Use linear
	approximation for values within 0x1p-13f of an odd multiple of
	pi/4.
	* math/libm-test.inc (tan_test): Do not allow spurious underflow
	exception.  Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	[BZ #6778]
	* sysdeps/i386/fpu/s_expm1.S (__expm1): Check for large negative
	inputs and return -1 for them.  Do not check for +Inf in case not
	reachable for +Inf.
	* sysdeps/i386/fpu/s_expm1f.S (__expm1f): Likewise.
	* sysdeps/i386/fpu/e_expl.S [USE_AS_EXPM1L] (csat): Do not define.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Check for large negative inputs
	and return -1 for them.  Do not check for +Inf in case not
	reachable for +Inf.
	* sysdeps/x86_64/fpu/e_expl.S [USE_AS_EXPM1L] (csat): Do not
	define.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Check for large negative inputs
	and return -1 for them.  Do not check for +Inf in case not
	reachable for +Inf.
	* math/libm-test.inc (expm1_test): Add more tests.  Do not allow
	spurious underflow.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-06  Mike Frysinger  <vapier@gentoo.org>

	* sunrpc/rpc_clntout.c: Change <rpc/types.h> to "rpc/types.h".

2012-07-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14157]
	[BZ #14331]
	* math/s_csqrt.c (__csqrt): Avoid multiplying by 0.5 where this
	could result in spurious underflow.  Scale down values above
	DBL_MAX / 4.0 instead of DBL_MAX / 2.0.
	* math/s_csqrtf.c (__csqrtf): Likewise.
	* math/s_csqrtl.c (__csqrtl): Likewise.
	* math/libm-test.inc (csqrt_test): Add more tests.  Do not allow
	spurious underflow.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-04  Andreas Schwab  <schwab@linux-m68k.org>

	* catgets/Makefile ($(objpfx)de.msg): Use xopen-msg.awk instead of
	xopen-msg.sed.
	* catgets/xopen-msg.awk: New file.
	* catgets/xopen-msg.sed: Removed.

	* intl/Makefile ($(objpfx)msgs.h): Use po2test.awk instead of
	po2text.sed.
	* intl/po2test.awk: New file.
	* intl/po2test.sed: Removed.

2012-07-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14328]
	* math/s_ctan.c (__ctan): Do not call sinh and cosh for subnormals
	or multiply small sinh result by itself.
	* math/s_ctanf.c (__ctanf): Likewise.
	* math/s_ctanh.c (__ctanh): Likewise.
	* math/s_ctanhf.c (__ctanhf): Likewise.
	* math/s_ctanhl.c (__ctanhl): Likewise.
	* math/s_ctanl.c (__ctanl): Likewise.
	* math/libm-test.inc (ctan_test_tonearest): New function.
	(ctan_test_towardzero): Likewise.
	(ctan_test_downward): Likewise.
	(ctan_test_upward): Likewise.
	(ctanh_test_tonearest): Likewise.
	(ctanh_test_towardzero): Likewise.
	(ctanh_test_downward): Likewise.
	(ctanh_test_upward): Likewise.
	(main): Call these new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-07-03  Mike Frysinger  <vapier@gentoo.org>

	* .gitignore: Delete /ports entry.

2012-07-03  Andreas Jaeger  <aj@suse.de>

	* po/bg.po: Update from translation team.
	* po/cs.po: Likewise.
	* po/de.po: Likewise.
	* po/hr.po: Likewise.
	* po/nl.pl: Likewise.
	* po/pl.po: Likewise.
	* po/vi.po: Likewise.

2012-07-03  Joseph Myers  <joseph@codesourcery.com>

	* Makeconfig [!+link] (+link-before-libc): New variable.
	[!+link] (+link-after-libc): Likewise.
	[!+link] (+link-tests): Likewise.
	[!+link] (+link): Define in terms of $(+link-before-libc) and
	$(+link-after-libc).
	[!+link-static] (+link-static-before-libc): New variable.
	[!+link-static] (+link-static-after-libc): Likewise.
	[!+link-static] (+link-static-tests): Likewise.
	[!+link-static] (+link-static): Define in terms of
	$(+link-static-before-libc) and $(+link-static-after-libc).
	[build-shared] (link-libc-before-gnulib): New variable.
	[build-shared] (link-libc-tests): Likewise.
	[build-shared] (link-libc): Define in terms of
	$(link-libc-before-gnulib).
	[!build-shared] (link-libc-tests): New variable.
	(link-libc-static-tests): New variable.
	[!gnulib] (gnulib-arch): New variable.
	[!gnulib] (gnulib-tests): Likewise.
	[!gnulib] (static-gnulib-arch): Likewise.
	[!gnulib] (static-gnulib-tests): Likewise.
	[!gnulib] (gnulib): Use $(gnulib-arch).  Do not use $(libgcc_eh).
	Define with "=" instead of ":=".
	[!gnulib] (static-gnulib): Use $(static-gnulib-arch).  Do not use
	-lgcc_eh $(libunwind).  Define with "=" instead of ":=".
	* Rules (binaries-all-notests): New variable.
	(binaries-all-tests): Likewise.
	(binaries-static-notests): Likewise.
	(binaries-static-tests): Likewise.
	(binaries-all): Define using $(binaries-all-notests) and
	$(binaries-all-tests).
	(binaries-static): Define using $(binaries-static-notests) and
	$(binaries-static-tests).
	(binaries-shared-tests): New variable.
	(binaries-shared-notests): Likewise.
	(binaries-shared): Remove variable.
	($(addprefix $(objpfx),$(binaries-shared-notests))): New rule.
	($(addprefix $(objpfx),$(binaries-shared-tests))): Likewise.
	($(addprefix $(objpfx),$(binaries-shared))): Remove rule.
	($(addprefix $(objpfx),$(binaries-static-notests))): New rule.
	($(addprefix $(objpfx),$(binaries-static-tests))): Likewise.
	($(addprefix $(objpfx),$(binaries-static))): Remove rule.
	* elf/Makefile (sln-modules): New variable.
	(extra-objs): Add $(sln-modules:=.o).
	(ldconfig-modules): Add static-stubs.
	($(objpfx)sln): Depend on $(sln-modules:%=$(objpfx)%.o).
	* elf/static-stubs.c: New file.

	[BZ #14283]
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c (__kernel_rem_pio2f): Shift
	by 7 not 8 to examine high bit of fractional part.  Use volatile
	variables when splitting into final array of floats if
	__FLT_EVAL_METHOD__ != 0.
	* math/libm-test.inc (cos_test): Add another test.
	(sin_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.

	[BZ #14273]
	* math/libm-test.inc (cosh_test): Add more tests.

	* version.h (RELEASE): Set to "development".
	(VERSION): Set to "2.16.90".

2012-06-30  Carlos O'Donell  <carlos_odonell@mentor.com>

	* NEWS: Update copyright. Remove last-updated date.
	Mention math library bug fixes and timezone data changes.
	* README: Mention GNU/Hurd, x32, and HPPA support status.

2012-06-28  Thomas Schwinge  <thomas@codesourcery.com>

	* manual/contrib.texi (Contributors): Sort alphabetically by last name.

2012-06-27  Andreas Jaeger  <aj@suse.de>

	* manual/contrib.texi (Contributors): Add Samuel Thibault.

2012-06-25  Andreas Jaeger  <aj@suse.de>

	* sysdeps/s390/fpu/libm-test-ulps: Update.

2012-06-23  Andreas Schwab  <schwab@linux-m68k.org>
	    Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/syscalls.list: Add fanotify_mark.
	* sysdeps/unix/sysv/linux/sh/Versions (GLIBC_2.16): Add fanotify_mark.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist (GLIBC_2.16): Add
	fanotify_mark.

2012-06-23  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/mach/start.c: Remove file.
	* sysdeps/mach/hurd/i386/static-start.S: Fix start.S include.
	* sysdeps/i386/init-first.c: Fix comment regarding start.S.
	* sysdeps/sh/init-first.c: Likewise.

	* sysdeps/sh/____longjmp_chk.S (CALL_FAIL): Preserve r12 and pr
	registers for frame unwinding purposes, add CFI directives.
	* sysdeps/unix/sysv/linux/sh/____longjmp_chk.S (CALL_FAIL): Likewise.
	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h (SYSCALL_ERROR_HANDLER):
	Likewise.

	* sysdeps/sh/____longjmp_chk.S (CALL_FAIL): Don't plan for the call to
	__fortify_fail returning.
	* sysdeps/unix/sysv/linux/sh/____longjmp_chk.S (CALL_FAIL): Likewise.

	* sysdeps/unix/sysv/linux/sh/____longjmp_chk.S: New file, based on
	sysdeps/sh/____longjmp_chk.S.
	* sysdeps/unix/sysv/linux/sh/sigaltstack-offsets.sym: New file, based
	on sysdeps/unix/sysv/linux/x86_64/sigaltstack-offsets.sym.
	* sysdeps/unix/sysv/linux/sh/Makefile [subdir=misc]
	(gen-as-const-headers): Append sigaltstack-offsets.sym.

	* sysdeps/sh/abort-instr.h: New file.
	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Terminate the
	process in case exit returns.

	* sysdeps/unix/sysv/linux/sh/makecontext.S (.Lexitcode): Always
	initialize the GOT register before use.

	* sysdeps/unix/sysv/linux/sh/makecontext.S (__makecontext): Fix
	calculation of ARGC > 4.

	* sysdeps/unix/sysv/linux/sh/makecontext.S: Add comments and give more
	meaningful names to some local labels.

2012-06-22  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>
	    Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/sysv/linux/sh/bits/atomic.h
	(__arch_compare_and_exchange_val_8_acq): Remove explicit nop.
	(__arch_compare_and_exchange_val_16_acq): Likewise.
	(__arch_compare_and_exchange_val_32_acq): Likewise.
	(atomic_exchange_and_add): Fix gUSA sequence.
	(atomic_add): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.
	(atomic_bit_test_set): Likewise.

2012-06-22  Andreas Schwab  <schwab@redhat.com>

	[BZ #13579]
	* include/link.h (struct link_map): Add l_free_initfini.
	* elf/dl-deps.c (_dl_map_object_deps): Set it when assigning
	l_initfini.
	* elf/dl-close.c (_dl_close_worker): Don't free l_initfini.
	* elf/rtld.c (dl_main): Clear it on all objects loaded on startup.
	* elf/dl-libc.c (free_mem): Free l_initfini if l_free_initfini is
	set.

2012-06-22  Carlos O'Donell  <carlos_odonell@mentor.com>

	* configure.in: Use AC_LANG_SOURCE.
	* configure: Regenerate.

2012-06-22  Roland McGrath  <roland@hack.frob.com>

	* configure.in (libc_cv_localstatedir): New substituted variable.
	* configure: Regenerated.
	* config.make.in (localstatedir): New variable, substituted from
	libc_cv_localstatedir.
	* Makeconfig (vardbdir): Use $(localstatedir) in place of /var.
	* sysdeps/gnu/configure.in (libc_cv_localstatedir): Change
	${prefix}/var to /var when we change ${prefix}/etc to /etc.
	* sysdeps/gnu/configure: Regenerated.

2012-06-21  Jeff Law  <law@redhat.com>

	[BZ #14277]
	* intl/dcigettext.c (_nl_find_msg): Avoid use after potential
	free.  Simplify list management for _LIBC case.

2012-06-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14273]
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c (__ieee754_cosh):
	Clear sign bit of 64-bit integer value before comparing against
	overflow value.

	* sysdeps/mach/configure: Regenerated.

2012-06-21  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14278]
	* sysdeps/i386/sysdep.h (SYSCALL_PIC_SETUP): Fix a typo.

2012-06-21  Jeff Law  <law@redhat.com>

	[BZ #13882]
	* elf/dl-deps.c (_dl_map_object_deps): Fix cycle detection.  Use
	uint16_t for elements in the "seen" array to avoid char overflows.
	* elf/dl-fini.c (_dl_sort_fini): Likewise.
	* elf/dl-open.c (dl_open_worker): Likewise.

2012-06-21  Carlos O'Donell  <carlos_odonell@mentor.com>

	* scripts/list-sources.sh: Scan PORTS for translations.
	* po/libc.pot: Regenerated.

2012-06-21  Andreas Jaeger  <aj@suse.de>

	[BZ #12194]
	* sysdeps/s390/bits/byteswap-16.h (__bswap_16): Avoid -Wconversion
	warning.
	* sysdeps/s390/bits/byteswap.h (__bswap_constant_16): Likewise.
	* bits/byteswap-16.h (__bswap_16): Likewise.
	* bits/byteswap.h (__bswap_constant_16): Likewise.

2012-06-18  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/fpu_control.h: Removed.
	* sysdeps/x86_64/fpu_control.h: Moved to ...
	* sysdeps/x86/fpu_control.h: Here.

	* sysdeps/x86_64/fpu_control.h (_FPU_GETCW): Add __volatile__.
	(_FPU_SETCW): Likewise.

2012-06-15  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/fpu/bits/mathinline.h: Renamed to ...
	* sysdeps/x86/fpu/bits/mathinline.h: This.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Removed.

	[BZ #14050]
	[BZ #14117]
	* sysdeps/i386/fpu/bits/mathinline.h: Disable x87 inline
	functions if __x86_64__ is defined.

2012-06-15  Chung-Lin Tang  <cltang@codesourcery.com>

	* string/endian.h: Add !__ASSEMBLER__ condition for including
	conversion interfaces.

2012-06-15  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14241]
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Use 0.0 instead
	of ABS(x) in calculating zero to negative powers other than odd
	integers.
	* math/libm-test.inc (pow_test): Add more tests.

2012-06-15  Andreas Jaeger  <aj@suse.de>

	* manual/contrib.texi (Contributors): Update entry of Liubov
	Dmitrieva and add entries for Will Schmidt and Tulio Magno Quites
	Machado Filho.

2012-06-15  Cyril Hrubis  <metan@ucw.cz>

	* string/string.h: Add __wur to GNU version of strerror_r.

2012-06-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14229]
	* string/Makefile (tests): Add tst-strtok_r.
	* string/tst-strtok_r.c: New file.
	* sysdeps/x86_64/strtok.S: Use LP_SIZE on save_ptr and use
	RAX_LP/RDX_LP on SAVE_PTR.

2012-06-14  Roland McGrath  <roland@hack.frob.com>

	* manual/Makefile ($(objpfx)texis): Do $(make-target-directory).

2012-06-14  Joseph Myers  <joseph@codesourcery.com>

	* libm_test.inc (csqrt_test): Allow more spurious underflow
	exceptions.
	(j0_test): Likewise.
	(j1_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.

2012-06-13  Carlos O'Donell  <carlos_odonell@mentor.com>

	* po/Makefile (libc.pot): Use UTF-8 charset.

2012-06-13  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14210]
	Suppress sign-conversion warning from FD_SET.
	See <http://sourceware.org/ml/libc-alpha/2012-05/msg01794.html>.
	* debug/fdelt_chk.c (__fdelt_chk): Accept and return long int,
	not unsigned long int.
	* misc/bits/select2.h (__fdelt_chk, __fdelt_warn, __FD_ELT): Likewise.

2012-06-12  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14050]
	[BZ #14117]
	* sysdeps/i386/fpu/bits/mathinline.h (__MATH_INLINE): Check
	__extern_always_inline instead of __extern_inline.
	(__signbitf): Support __SSE2_MATH__ and C++ namespace.
	(__signbit): Likewise.
	(__signbitl): Support C++ namespace.
	(lrintf): New inline function.
	(lrint): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.
	(fmaxf): Likewise.
	(fmax): Likewise.
	(fminf): Likewise.
	(fmin): Likewise.
	(rint): Likewise.
	(rintf): Likewise.
	(ceil): Likewise.
	(ceilf): Likewise.
	(floor): Likewise.
	(floorf): Likewise.
	(nearbyint): Likewise.
	(nearbyintf): Likewise.

2012-06-12  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/unix/Makefile ($(objpfx)stub-syscalls.c): Fix case for
	non-default versions.

2012-06-11  Roland McGrath  <roland@hack.frob.com>

	[BZ #14218]
	* manual/argp.texi (Argp): Reword argp_parse description slightly.

2012-06-09  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/sh/sh4/fpu/bits/fenv.h (__FE_UNDEFINED): Define.
	(FE_UPWARD, FE_DOWNWARD): Don't define.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Adapt to that.
	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Likewise.

	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Do not re-write fpscr after
	reading it.
	* sysdeps/sh/sh4/fpu/fegetexcept.c (fegetexcept): Likewise.
	* sysdeps/sh/sh4/fpu/ftestexcept.c (fetestexcept): Likewise.

2012-06-09  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/unix/sysv/linux/sh/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/sh/nptl/libm.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/sh/nptl/librt.abilist: Refreshed.

2012-06-06  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/fpu/bits/fenv.h: Removed.
	* sysdeps/i386/fpu/Implies: New file.
	* sysdeps/x86_64/fpu/Implies: Likewise.
	* sysdeps/x86_64/fpu/bits/fenv.h: Renamed to ...
	* sysdeps/x86/fpu/bits/fenv.h: This.

	* sysdeps/x86_64/fpu/bits/fenv.h (feraiseexcept): Check
	__SSE_MATH__.

2012-06-06  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #14134]
	* iconvdata/ibm930.c (BODY) [FROM_LOOP]: Check for invalid
	character 0xffff that matches the last element of the
	conversion table.

2012-06-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c: Fix for wrong ldbl128-ibm
	fmodl commit.

2012-06-05  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Fix spurious underflow for
	values higher than 25.6283.

2012-06-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c (__ieee754_fmodl): Fix
	subnormal exponent extraction and add some __builtin_expect.
	* sysdeps/ieee754/ldbl-128ibm/math_ldbl.h (ldbl_extract_mantissa):
	Fix for subnormal mantissa calculation.

2012-06-04  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/tst-getcpu.c (do_test): Call perror when
	cpu2 is -1 and errno is not ENOSYS.

2012-06-04  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/i486/bits/string.h: Renamed to ...
	* sysdeps/x86/bits/string.h: This.
	* sysdeps/x86_64/bits/string.h: Removed.

	* sysdeps/i386/i486/bits/string.h: Define inline functions only
	if not compiling for x86-64, but compiling for >= i486.

	* sysdeps/unix/sysv/linux/x86_64/bits/sigcontext.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/sigcontext.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/sigcontext.h (FP_XSTATE_MAGIC1):
	New macro from Linux kernel 3.4.0.
	(FP_XSTATE_MAGIC2): Likewise.
	(FP_XSTATE_MAGIC2_SIZE): Likewise.
	(X86_FXSR_MAGIC): New macro from Linux i386 kernel.
	(struct _fpx_sw_bytes): New struct.
	(struct _xsave_hdr): Likewise.
	(struct _ymmh_state): Likewise.
	(struct _xstate): Likewise.

	* sysdeps/unix/sysv/linux/i386/sys/debugreg.h: Removed.
	* sysdeps/unix/sysv/linux/i386/sys/reg.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/debugreg.h: This.
	* sysdeps/unix/sysv/linux/x86_64/sys/reg.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/reg.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/io.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/io.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/io.h: This.
	* sysdeps/unix/sysv/linux/i386/sys/perm.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/perm.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/perm.h: This.

2012-06-04  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #13743]
	* sysdeps/powerpc/sys/platform/ppc.h: New file for PowerPC features.
	* sysdeps/powerpc/Makefile (tests): Add test-gettimebase.
	(sysdep_headers): Include sys/platform/ppc.h.
	* sysdeps/powerpc/test-gettimebase.c: Test for
	__ppc_get_timebase() to catch future ISA opcode/insn changes.
	* manual/Makefile (appendices): Include platform.texi.
	* manual/contrib.texi (Contributors): Update @node pointers.
	* manual/maint.texi (Maintenance): Likewise.
	(Platform): New node.
	* manual/platform.texi: New file.  Document the new features.

2012-06-04  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Jakub Jelinek  <jakub@redhat.com>

	[BZ #14188]
	* misc/sys/cdefs.h (__glibc_unlikely): New macro to wrap cases
	where __builtin_expect is unavailable.

2012-06-03  David S. Miller  <davem@davemloft.net>

	* stdlib/longlong.h: Updated from GCC.

2012-06-02  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14042]
	* sysdeps/powerpc/powerpc32/mcount.c: New file.
	* sysdeps/powerpc/powerpc32/Versions (GLIBC_2.16): Add
	__mcount_internal.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist
	(GLIBC_2.16): Likewise.

2012-06-01  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sys/io.h (outsw): Fix a typo.

2012-06-01  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/Makefile
	(default-abi): New variable.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/Makefile: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/Makefile (default-abi): New
	variable.
	* sysdeps/unix/sysv/linux/s390/s390-64/Makefile (default-abi):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/Makefile (default-abi):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile (default-abi):
	Likewise.

	* Makeconfig [abi-variants && !default-abi] (default-abi): Remove
	definition.  Document in comment.

2012-06-01  David S. Miller  <davem@davemloft.net>

	* stdlib/longlong.h: Updated from GCC.

2012-06-01  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/i386/Makefile (sysdep_headers):
	Don't add sys/elf.h sys/perm.h sys/reg.h sys/vm86.h
	sys/debugreg.h sys/io.h here.
	* sysdeps/unix/sysv/linux/x86/Makefile (sysdep_headers): Add
	sys/elf.h sys/perm.h sys/reg.h sys/vm86.h sys/debugreg.h
	sys/io.h.
	* sysdeps/unix/sysv/linux/x86_64/Makefile (sysdep_headers):
	Don't add sys/perm.h sys/reg.h sys/debugreg.h sys/io.h here.
	* sysdeps/unix/sysv/linux/i386/sys/elf.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/elf.h: This.
	* sysdeps/unix/sysv/linux/i386/sys/vm86.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/vm86.h: This.

	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h (DR_LEN_8):
	Define only if __x86_64__ is defined.

2012-06-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14048]
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c (__ieee754_fmod):
	Use int64_t for variable i.
	* math/libm-test.inc (fmod_test): Add more tests.

	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Ensure temp + (double)
	z computation is not scheduled after fetestexcept.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: Include <math_private.h>.
	Use math_force_eval instead of asm to ensure calculation scheduled
	before exception test.
	* sysdeps/ieee754/ldbl-96/s_fmal.c: Include <math_private.h>.
	Ensure a1 + u.d computation is not scheduled after fetestexcept.

2012-06-01  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Ensure a1 + u.d
	computation is not scheduled after fetestexcept.

2012-06-01  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/i386/bits/wchar.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/wchar.h: This.

2012-06-01  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/k_cosf.c: Fix underflow generation.
	* sysdeps/powerpc/fpu/k_sinf.c: Likewise.

2012-05-31  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/i386/bits/wchar.h: Include
	<bits/wordsize.h>.
	(__WCHAR_MIN): Support __WORDSIZE == 64.
	(__WCHAR_MAX): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/typesizes.h: This.

	[BZ #14183]
	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h (__FSWORD_T_TYPE):
	Defined with __SWORD_TYPE if __x86_64__ isn't defined.

	[BZ #14117]
	* sysdeps/unix/sysv/linux/x86_64/bits/siginfo.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/siginfo.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/stat.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/stat.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/stat.h (_STAT_VER_KERNEL):
	Defined to 1 if __x86_64__ isn't defined.
	(_STAT_VER_LINUX_OLD): New.
	(st_atime): Remove duplicate.
	(st_mtime): Likewise.
	(st_ctime): Likewise.

2012-05-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Remove sqrt(2) and sqrt test
	entries.

2012-06-01  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Sort through
	gen-libm-test.pl.

	[BZ #14132]
	* elf/dl-reloc.c: Include <_itoa.h>.
	(_dl_reloc_bad_type): Remove use of INTUSE.
	* elf/dl-minimal.c (_itoa, _itoa_lower_digits): Likewise.
	* stdio-common/_itoa.c (_itoa_word, _itoa): Likewise.
	* stdio-common/psiginfo.c (psiginfo): Likewise.
	* stdio-common/psignal.c (psignal): Likewise.
	* string/strsignal.c (strsignal): Likewise.
	* include/signal.h (_sys_siglist): Declare hidden proto.
	* stdio-common/itoa-digits.c: Include <_itoa.h>.  Replace
	INTVARDEF with libc_hidden_data_def.
	* stdio-common/itoa-udigits.c: Likewise.
	* sysdeps/generic/_itoa.h (_itoa_upper_digits_internal)
	(_itoa_lower_digits_internal): Remove declaration.
	(_itoa_upper_digits, _itoa_lower_digits): Declare hidden proto.
	* sysdeps/gnu/siglist.c (_sys_siglist_internal)
	(_sys_sigabbrev_internal): Remove aliases.
	(_sys_siglist): Define hidden alias.

2012-05-31  Markus Trippelsdorf  <markus@trippelsdorf.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/sysctl.h.

2012-05-31  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/unix/sysv/linux/x86_64/bits/sysctl.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/sysctl.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/ucontext.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/ucontext.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/ucontext.h: This.
	* sysdeps/unix/sysv/linux/i386/sys/user.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/user.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/user.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/procfs.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/sys/procfs.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/sys/procfs.h: This.

	* sysdeps/unix/sysv/linux/x86_64/sys/io.h (insb): Replace addr
	with __addr.
	(insw): Likewise.
	(insl): Likewise.
	(outsb): Likewise.
	(outsw): Likewise.
	(outsl): Likewise.

	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/mman.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/msq.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/msq.h: This.
	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/sem.h: This.
	* sysdeps/unix/sysv/linux/x86_64/bits/shm.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/shm.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/ipctypes.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/ipctypes.h: This.

	* sysdeps/unix/sysv/linux/x86_64/bits/epoll.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/epoll.h: This.

	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/fcntl.h: This.

	* sysdeps/unix/sysv/linux/i386/bits/environments.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/environments.h: Renamed
	to ...
	* sysdeps/unix/sysv/linux/x86/bits/environments.h: This.

	* sysdeps/unix/sysv/linux/i386/bits/a.out.h: Removed.
	* sysdeps/unix/sysv/linux/x86_64/bits/a.out.h: Renamed to ...
	* sysdeps/unix/sysv/linux/x86/bits/a.out.h: This.

	* sysdeps/unix/sysv/linux/i386/sys/elf.h: Error when compiling
	for x86-64.
	* sysdeps/unix/sysv/linux/i386/sys/vm86.h: Likewise.

2012-05-31  Joseph Myers  <joseph@codesourcery.com>

	* math/math.h (M_El): Use two more decimal places.
	(M_LOG2El): Likewise.
	(M_LOG10El): Likewise.
	(M_LN2l): Likewise.
	(M_LN10l): Likewise.
	(M_PIl): Likewise.
	(M_PI_2l): Likewise.
	(M_PI_4l): Likewise.
	(M_1_PIl): Likewise.
	(M_2_PIl): Likewise.
	(M_2_SQRTPIl): Likewise.
	(M_SQRT2l): Likewise.
	(M_SQRT1_2l): Likewise.

2012-05-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/memcpy.S: Use fsrc2 to move 64-bit
	values between float registers.
	* sysdeps/sparc/sparc64/memset.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Likewise.

2012-05-31  Mike Frysinger  <vapier@gentoo.org>

	* debug/Makefile (CFLAGS-tst-longjmp_chk.c): Delete
	-D_FORTIFY_SOURCE=1.
	(CPPFLAGS-tst-longjmp_chk.c): Define.
	(CFLAGS-tst-longjmp_chk2.c): Delete -D_FORTIFY_SOURCE=1.
	(CPPFLAGS-tst-longjmp_chk2.c): Define.
	* wcsmbs/Makefile (CPPFLAGS-tst-wchar-h.c): Rename from
	CFLAGS-tst-wchar-h.c.

2012-05-31  Marek Polacek  <polacek@redhat.com>

	[BZ #14132]
	* include/mntent.h (__setmntent_internal, __getmntent_r_internal
	__endmntent_internal): Remove declaration.
	(__setmntent, __endmntent, __getmntent_r) [NOT_IN_libc]: Remove macro.
	(__setmntent, __endmntent, __getmntent_r): Declare hidden proto.
	* misc/mntent_r.c: Replace INTDEF with libc_hidden_def.

2012-05-30  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/soft-fp/q_util.c
	(___Q_simulate_exceptions): Use real FP ops rather than writing
	into the %fsr.
	* sysdeps/sparc/sparc32/soft-fp/q_util.c (__Qp_handle_exceptions):
	Likewise.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/x86_64/bits/xtitypes.h: Renamed to ...
	* sysdeps/x86/bits/xtitypes.h: This.

	* sysdeps/x86_64/bits/wordsize.h: Renamed to ...
	* sysdeps/x86/bits/wordsize.h: This.

	* sysdeps/i386/bits/huge_vall.h: Renamed to ...
	* sysdeps/x86/bits/huge_vall.h: This.

	* sysdeps/i386/bits/select.h: Removed.
	* sysdeps/x86_64/bits/select.h: Renamed to ...
	* sysdeps/x86/bits/select.h: This.

	* sysdeps/i386/bits/setjmp.h: Removed.
	* sysdeps/x86_64/bits/setjmp.h: Renamed to ...
	* sysdeps/x86/bits/setjmp.h: This.

	* sysdeps/i386/bits/mathdef.h: Removed.
	* sysdeps/x86_64/bits/mathdef.h: Renamed to ...
	* sysdeps/x86/bits/mathdef.h: This.

2012-05-30  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14132]
	* include/sys/socket.h (__connect_internal)
	(__libc_sa_len_internal): Remove declaration.
	(__connect, __libc_sa_len): Declare hidden_proto.
	(SA_LEN): Remove use of INTUSE.
	* socket/connect.c: Add libc_hidden_def.
	* sysdeps/mach/hurd/connect.c: Replace INTDEF by libc_hidden_def.
	* sysdeps/unix/sysv/linux/sa_len.c: Likewise.
	* sysdeps/unix/inet/syscalls.list: Remove __connect_internal
	alias.
	* sysdeps/unix/sysv/linux/s390/s390-64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/connect.S: Use libc_hidden_weak instead
	of adding _internal alias.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14117]
	* sysdeps/i386/bits/link.h: Removed.
	* sysdeps/i386/bits/linkmap.h: Likewise.
	* sysdeps/x86_64/bits/link.h: Renamed to ...
	* sysdeps/x86/bits/link.h: This.
	* sysdeps/x86_64/bits/linkmap.h: Renamed to ...
	* sysdeps/x86/bits/linkmap.h: This.

	* sysdeps/i386/bits/endian.h: Removed.
	* sysdeps/x86_64/bits/endian.h: Renamed to ...
	* sysdeps/x86/bits/endian.h: This.

	* sysdeps/i386/bits/byteswap.h: Removed.
	* sysdeps/i386/bits/byteswap-16.h: Likewise.
	* sysdeps/x86_64/bits/byteswap.h: Renamed to ...
	* sysdeps/x86/bits/byteswap.h: This.
	* sysdeps/x86_64/bits/byteswap-16.h: Renamed to ...
	* sysdeps/x86/bits/byteswap-16.h: This.
	* sysdeps/i386/Implies: Add x86.
	* sysdeps/x86_64/Implies: Likewise.

2012-05-30  David S. Miller  <davem@davemloft.net>

	* soft-fp/soft-fp.h (FP_CUR_EXCEPTIONS): Define.
	(FP_TRAPPING_EXCEPTIONS): Provide default implementation.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h
	(FP_TRAPPING_EXCEPTIONS): Define.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h
	(FP_TRAPPING_EXCEPTIONS): Define.
	* soft-fp/op-common.h (_FP_PACK_SEMIRAW): Signal underflow for
	subnormals only when inexact has been signalled or underflow
	exceptions are enabled.
	(_FP_PACK_CANONICAL): Likewise.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14183]
	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h (__NLINK_T_TYPE):
	Defined with __UWORD_TYPE if __x86_64__ isn't defined.

2012-05-30  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/make-syscalls.sh: Protect symbol_version output
	with #ifndef NOT_IN_libc.

	* scripts/abilist.awk: Accept 8 fields.  Handle Alpha functions
	marked to avoid plt entry.

2012-05-30  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14112]
	* Makeconfig (default-abi): New macro.
	(abi-includes): Likewise.
	($(common-objpfx)soversions.mk): Remove WORDSIZE check.  Use
	$(abi-$(default-abi)-lib-soname) for soname if defined.
	($(common-objpfx)gnu/lib-names.stmp): Generate from
	abi-variants.
	* Makefile (installed-stubs): Likewise.
	* include/stubs-biarch.h: Removed.
	* scripts/lib-names.awk: Only handle one library at a time.
	* scripts/soversions.awk: Remove WORDSIZE support.
	* shlib-versions: Remove WORDSIZE and i.86/s390x/powerpc64 ld
	entries.
	* sysdeps/unix/sysv/linux/Makefile (syscall-list-variants):
	Removed.
	(syscall-list-default-condition): Likewise.
	(syscall-list-default-condition): Likewise.
	(syscall-list-includes): Likewise.
	($(objpfx)bits/syscall%h $(objpfx)bits/syscall%d): Replace
	syscall-list-* with abi-*.  Handle undefined abi-variants.
	* sysdeps/unix/sysv/linux/i386/Makefile (default-abi): New macro.
	* sysdeps/unix/sysv/linux/i386/Implies: New file.
	* sysdeps/unix/sysv/linux/x86/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/64/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/Implies: Add unix/sysv/linux/x86.
	* sysdeps/unix/sysv/linux/x86_64/Makefile (syscall-list-variants):
	Removed.
	(syscall-list-32-options): Likewise.
	(syscall-list-32-condition): Likewise.
	(syscall-list-64-options): Likewise.
	(syscall-list-64-condition): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile (default-abi): New
	macro.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (syscall-list-*):
	Renamed to ...
	(abi-*): This.
	(abi-64-ld-soname): New macro.
	* sysdeps/unix/sysv/linux/s390/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/sparc/Makefile (syscall-list-*):
	Renamed to ...
	(abi-*): This.
	* sysdeps/x86_64/64/shlib-versions: Remove ld entry.
	* sysdeps/x86_64/x32/shlib-versions: Likewise.

2012-05-30  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_TRUNCATE64_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/ftruncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	* sysdeps/unix/sysv/linux/truncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/ftruncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/truncate64.c: Do not
	include <kernel-features.h>.
	[!__NR_ftruncate64]: Remove conditional code.
	[!__ASSUME_TRUNCATE64_SYSCALL]: Likewise.
	[__NR_ftruncate64]: Make code unconditional.
	[__ASSUME_TRUNCATE64_SYSCALL]: Likewise.

	* configure.in (libc_cv_fpie): Weaken to a compile test using
	LIBC_TRY_CC_OPTION.
	* configure: Regenerated.

2012-05-29  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/ld.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libm.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/librt.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libutil.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/ld.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libm.abilist: Refreshed.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	Refreshed.

2012-05-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/soft-fp/q_util.c (___Q_numbers): Delete.
	(___Q_zero): New.
	(__Q_simulate_exceptions): Return void.  Change to simulate
	exceptions by writing into the %fsr.
	* sysdeps/sparc/sparc64/soft-fp/qp_util.c
	(__Qp_handle_exceptions): Likewise.
	(numbers): Delete.
	* sysdeps/sparc/sparc64/soft-fp/Versions: Remove entry for
	__Qp_handle_exceptions.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Remove
	__Qp_handle_exceptions.
	* sysdeps/sparc/sparc32/soft-fp/sfp-machine.h (_FP_DECL_EX): Mark
	as unused and give dummy FP_RND_NEAREST initializer.
	(FP_INHIBIT_RESULTS): Define.
	(___Q_simulate_exceptions): Update declaration.
	(FP_HANDLE_EXCEPTIONS): Use ___Q_zero and tidy inline asm
	formatting.
	* sysdeps/sparc/sparc64/soft-fp/sfp-machine.h (_FP_DECL_EX): Mark
	as unused and give dummy FP_RND_NEAREST initializer.
	(__Qp_handle_exceptions): Update declaration.
	(FP_HANDLE_EXCEPTIONS, QP_NO_EXCEPTIONS): Tidy inline asm
	formatting.

2012-05-27  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/sh/sh4/fpu/fclrexcpt.c (feclearexcept): Use fpu_control_t for
	the temporary FPU control word.
	* sysdeps/sh/sh4/fpu/fedisblxcpt.c (fedisableexcept): Likewise.
	* sysdeps/sh/sh4/fpu/feenablxcpt.c (feenableexcept): Likewise.
	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Likewise.
	* sysdeps/sh/sh4/fpu/fegetexcept.c (fegetexcept): Likewise.
	* sysdeps/sh/sh4/fpu/fegetround.c (fegetround): Likewise.
	* sysdeps/sh/sh4/fpu/feholdexcpt.c (feholdexcept): Likewise.
	* sysdeps/sh/sh4/fpu/fesetenv.c (fesetenv): Likewise.
	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Likewise.
	* sysdeps/sh/sh4/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sh/sh4/fpu/fsetexcptflg.c (fesetexceptflag): Likewise.
	* sysdeps/sh/sh4/fpu/ftestexcept.c (fetestexcept): Likewise.

2012-05-27  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/sh4/fpu/fraiseexcpt.c (feraiseexcept): Restore fpscr flag
	fields.

2012-05-27  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/sh/_mcount.S (_mount): Add CFI directives.
	* sysdeps/unix/sh/sysdep.S (__syscall_error): Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/setcontext.S (__setcontext): Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/swapcontext.S (__swapcontext):
	Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/setcontext.S (__setcontext): Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/swapcontext.S (__swapcontext):
	Likewise.

2012-05-27  Ulrich Drepper  <drepper@gmail.com>

	* po/h.po: Update from translation team.

2012-05-26  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/dl-irel.h: Include <ldsodefs.h>.

	* sysdeps/ieee754/dbl-64/s_logb.c (__logb): Optimize
	handling of denormals.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c (__logbf): Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c (_logb): Likewise.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c (_logbl):
	Likewise.

2012-05-26  Marek Polacek  <polacek@redhat.com>

	[BZ #14152]
	* math/libm-test.inc (fma_test): Don't always expect underflow
	exception.

2012-05-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #12416]
	* elf/tst-execstack.c: Include stackinfo.h.
	(do_test): Adjust test case to ensure that pthread_getattr_np
	behaviour remains the same after marking stack executable.

2012-05-25  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_NEW_GETRLIMIT_SYSCALL): Remove all definitions.
	* sysdeps/unix/sysv/linux/i386/getrlimit.c: Do not include
	kernel-features.h.
	[!__ASSUME_NEW_GETRLIMIT_SYSCALL]: Remove conditional code.
	[__ASSUME_NEW_GETRLIMIT_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c Do not include
	kernel-features.h.
	[!__ASSUME_NEW_GETRLIMIT_SYSCALL]: Remove conditional code.
	[__ASSUME_NEW_GETRLIMIT_SYSCALL]: Make code unconditional.

2012-05-25  H.J. Lu  <hongjiu.lu@intel.com>

	* configure.in: Define the default includes to being none.
	* configure: Regenerated.

2012-05-25  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/__longjmp.S: Add a static probe here.
	* sysdeps/x86_64/setjmp.S: Likewise.
	* sysdeps/i386/bsd-setjmp.S: Likewise.
	* sysdeps/i386/bsd-_setjmp.S: Likewise.
	* sysdeps/i386/setjmp.S: Likewise.
	* sysdeps/i386/__longjmp.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/____longjmp_chk.S: Likewise.

	* include/stap-probe.h: New file.
	* configure.in: Handle --enable-systemtap.
	* configure: Regenerated.
	* config.h.in (USE_STAP_PROBE): New #undef.
	* extra-lib.mk (CPPFLAGS-$(lib)): Add -DIN_LIB=$(lib).
	* elf/Makefile (CPPFLAGS-.os): Add -DIN_LIB=rtld.
	* elf/rtld-Rules (rtld-CPPFLAGS): Likewise.

2012-05-25  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel): Set
	to 2.4.0 where earlier.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/i386/chown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/fchown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/fchownat.c (fchownat)
	[__ASSUME_32BITUIDS]: Make code unconditional.
	(fchownat) [!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getegid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/geteuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getgroups.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getresgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getresuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/getuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/lchown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/msgctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/semctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setegid.c: Do not include
	<kernel-features.h>.
	[__NR_setresgid] (__setresgid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/seteuid.c: Do not include
	<kernel-features.h>.
	[__NR_setresuid] (__setresuid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setfsgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setfsuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setregid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setresgid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setresuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setreuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/setuid.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/i386/shmctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_SETRESUID_SYSCALL): Remove.
	(__ASSUME_SETRESGID_SYSCALL): Likewise.
	(__ASSUME_32BITUIDS): Likewise.
	(__ASSUME_LDT_WORKS): Likewise.
	(__ASSUME_O_DIRECTORY): Likewise.
	(__ASSUME_NEW_GETRLIMIT_SYSCALL): Define conditional on
	architecture but not kernel version.
	(__ASSUME_TRUNCATE64_SYSCALL): Likewise.
	(__ASSUME_MMAP2_SYSCALL): Likewise.
	(__ASSUME_STAT64_SYSCALL): Likewise.
	(__ASSUME_IPC64): Likewise.
	* sysdeps/unix/sysv/linux/local-setxid.h: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/opendir.c: Do not include
	<kernel-features.h>.
	[__ASSUME_O_DIRECTORY]: Make code unconditional.
	* sysdeps/unix/sysv/linux/opensock.c [__LINUX_KERNEL_VERSION <
	132096]: Remove conditional code.
	[__LINUX_KERNEL_VERSION >= 132096]: Make code unconditional.
	* sysdeps/unix/sysv/linux/s390/s390-32/chown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/s390/s390-32/lchown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/setegid.c: Do not include
	<kernel-features.h>.
	[__NR_setresgid || __ASSUME_SETRESGID_SYSCALL]: Make code
	unconditional.
	(__setresgid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/seteuid.c: Do not include
	<kernel-features.h>.
	[__NR_setresuid || __ASSUME_SETRESUID_SYSCALL]: Make code
	unconditional.
	(__setresuid): Do not declare.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/sh/chown.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.
	* sysdeps/unix/sysv/linux/sparc/sparc32/semctl.c: Do not include
	<kernel-features.h>.
	[__ASSUME_32BITUIDS]: Make code unconditional.
	[!__ASSUME_32BITUIDS]: Remove conditional code.

2012-05-25  Richard Henderson  <rth@twiddle.net>

	* sysdeps/powerpc/powerpc32/dl-irel.h (elf_ifunc_invoke): Pass
	dl_hwcap to ifunc resolver.
	* sysdeps/powerpc/powerpc32/dl-machine.h (elf_machine_rela): Use
	elf_ifunc_invoke.
	* sysdeps/powerpc/powerpc64/dl-irel.h (elf_ifunc_invoke): Pass
	dl_hwcap to ifunc resolver.
	* sysdeps/powerpc/powerpc64/dl-machine.h (resolve_ifunc): Likewise.

2012-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14153]
	* sysdeps/ieee754/flt-32/e_acosf.c (__ieee754_acosf): Return pi/2
	for |x| <= 2**-26, not 2**-57.
	* math/libm-test.inc (acos_test): Do not allow spurious underflow
	exception.

2012-05-24  Jeff Law  <law@redhat.com>

	* stdio-common/Makefile (tests): Add bug25.
	* stdio-common/bug25.c: New test.

2012-05-24  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #13576]
	* malloc/malloc.c (sYSMALLOc): Free the old top chunk with a
	multiple of MALLOC_ALIGNMENT in size.
	(_int_free): Check chunk size is a multiple of MALLOC_ALIGNMENT.

2012-05-24  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/stdio.h-data (BUFSIZ): Use macro-int-constant.
	Require >= 256.
	(FILENAME_MAX): Use macro-int-constant.
	(FOPEN_MAX): Use macro-int-constant.  Require >= 8.
	(_IOFBF): Use macro-int-constant.
	(_IOLBF): Likewise.
	(_IONBF): Likewise.
	(SEEK_CUR): Likewise.
	(SEEK_END): Likewise.
	(SEEK_SET): Likewise.
	(TMP_MAX): Likewise.
	(EOF): Use macro-int-constant.  Require < 0.
	(NULL): Use macro-constant.  Require == 0.
	(stdin): Require type to be FILE *.
	(stdout): Likewise.
	(stderr): Likewise.
	* conform/data/stdlib.h-data (EXIT_FAILURE): Use
	macro-int-constant.
	(EXIT_SUCCESS): Likewise.
	(NULL): Use macro-constant.  Require == 0.
	(RAND_MAX): Use macro-int-constant.
	[ISO99 || ISO11] (lldiv_t): Require also for these standards.
	[C99-based standards] (strtof): Require function.
	[C99-based standards] (strtold): Likewise.
	[C99-based standards] (strtoll): Likewise.
	[C99-based standards] (strtoull): Likewise.
	[ISO || ISO99 || ISO11] (stddef.h): Do not allow header.
	[ISO || ISO99 || ISO11] (limits.h): Likewise.
	[ISO || ISO99 || ISO11] (math.h): Likewise.
	[ISO || ISO99 || ISO11] (sys/wait.h): Likewise.
	(str*): Change to str[abcdefghijklmnopqrstuvwxyz]*.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.

2012-05-24  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14132]
	* argp/argp-help.c (dgettext) [_LIBC]: Remove use of INTUSE.
	* argp/argp-parse.c (dgettext) [_LIBC]: Likewise.
	* intl/dgettext.c (DCGETTEXT): Likewise.
	* intl/gettext.c (DCGETTEXT): Likewise.
	* intl/l10nflist.c (__argz_count, __argz_stringify): Likewise.
	* posix/regex_internal.h (gettext): Likewise.
	* include/libintl.h (__dcgettext_internal, __dcngettext_internal):
	Remove declaration.
	* include/argz.h (__argz_count_internal)
	(__argz_stringify_internal): Remove declaration.
	(__argz_count, __argz_stringify): Declare hidden proto.
	* intl/dcgettext.c: Remove use of INTDEF.
	* string/argz-count.c: Replace INTDEF with libc_hidden_def.
	* string/argz-stringify.c: Likewise.
	* include/libio.h (_IO_free_backup_area, _IO_free_wbackup_area)
	(_IO_padn, _IO_putc, _IO_sgetn, _IO_vfprintf, _IO_vfscanf):
	Declare hidden proto.
	* include/libio.h (_IO_free_backup_area, _IO_free_wbackup_area)
	(_IO_padn, _IO_putc, _IO_sgetn, _IO_vfprintf, _IO_vfscanf):
	Declare hidden proto.
	* include/stdio.h (__asprintf_internal): Don't declare.
	(__asprintf): Don't define as macro.  Declare hidden proto.
	* include/stdio_ext.h (__fsetlocking_internal): Don't declare.
	(__fsetlocking): Declare hidden proto.
	* libio/iolibio.h (_IO_fdopen, _IO_fflush, _IO_ftell, _IO_fread)
	(_IO_fwrite, _IO_setbuffer, _IO_setvbuf, _IO_vsprintf): Declare
	hidden proto.
	(_IO_vprintf, _IO_freopen, _IO_freopen64, _IO_setbuf)
	(_IO_setlinebuf): Remove use of INTUSE.
	(_IO_setbuffer_internal, _IO_fread_internal, _IO_fdopen_internal)
	(_IO_vsprintf_internal, _IO_fflush_internal, _IO_fwrite_internal)
	(_IO_ftell_internal, _IO_fputs_internal, _IO_setvbuf_internal):
	Remove declaration.
	* libio/libioP.h (INTUSE, INTDEF, INTDEF2): Don't define.
	(_IO_do_flush): Remove use of INTUSE.
	(_IO_switch_to_get_mode, _IO_init, _IO_sputbackc, _IO_un_link)
	(_IO_link_in, _IO_doallocbuf, _IO_unsave_markers, _IO_setb)
	(_IO_adjust_column, _IO_least_wmarker)
	(_IO_switch_to_main_wget_area, _IO_switch_to_wbackup_area)
	(_IO_switch_to_wget_mode, _IO_wsetb, _IO_sputbackwc)
	(_IO_wdoallocbuf, _IO_default_uflow, _IO_wdefault_uflow)
	(_IO_default_doallocate, _IO_wdefault_doallocate)
	(_IO_default_finish, _IO_wdefault_finish, _IO_default_pbackfail)
	(_IO_wdefault_pbackfail, _IO_default_xsputn, _IO_wdefault_xsputn)
	(_IO_default_xsgetn, _IO_wdefault_xsgetn, _IO_do_write)
	(_IO_wdo_write, _IO_flush_all, _IO_flush_all_linebuffered)
	(_IO_file_doallocate, _IO_file_setbuf, _IO_file_seekoff)
	(_IO_file_xsputn, _IO_file_xsgetn, _IO_file_stat, _IO_file_close)
	(_IO_file_underflow, _IO_file_overflow, _IO_file_init)
	(_IO_file_attach, _IO_file_fopen, _IO_file_read, _IO_file_sync)
	(_IO_file_close_it, _IO_file_seek, _IO_file_finish)
	(_IO_wfile_xsputn, _IO_wfile_sync, _IO_wfile_underflow)
	(_IO_wfile_overflow, _IO_wfile_seekoff, _IO_str_underflow)
	(_IO_str_overflow, _IO_str_pbackfail, _IO_str_seekoff)
	(_IO_getline, _IO_getline_info, _IO_list_all): Declare hidden
	proto.
	(_IO_flush_all_internal, _IO_adjust_column_internal)
	(_IO_default_uflow_internal, _IO_default_finish_internal)
	(_IO_default_pbackfail_internal, _IO_default_xsputn_internal)
	(_IO_default_xsgetn_internal, _IO_default_doallocate_internal)
	(_IO_wdefault_finish_internal, _IO_wdefault_pbackfail_internal)
	(_IO_wdefault_xsputn_internal, _IO_wdefault_xsgetn_internal)
	(_IO_wdefault_doallocate_internal, _IO_wdefault_uflow_internal)
	(_IO_file_doallocate_internal, _IO_file_setbuf_internal)
	(_IO_file_seekoff_internal, _IO_file_xsputn_internal)
	(_IO_file_xsgetn_internal, _IO_file_stat_internal)
	(_IO_file_close_internal, _IO_file_close_it_internal)
	(_IO_file_underflow_internal, _IO_file_overflow_internal)
	(_IO_file_init_internal, _IO_file_attach_internal)
	(_IO_file_fopen_internal, _IO_file_read_internal)
	(_IO_file_sync_internal, _IO_file_seek_internal)
	(_IO_file_finish_internal, _IO_wfile_xsputn_internal)
	(_IO_wfile_seekoff_internal, _IO_wfile_sync_internal)
	(_IO_str_underflow_internal, _IO_str_overflow_internal)
	(_IO_str_pbackfail_internal, _IO_str_seekoff_internal)
	(_IO_file_jumps_internal, _IO_wfile_jumps_internal)
	(_IO_list_all_internal, _IO_link_in_internal)
	(_IO_sputbackc_internal, _IO_wdoallocbuf_internal)
	(_IO_sgetn_internal, _IO_flush_all_linebuffered_internal)
	(_IO_switch_to_wget_mode_internal, _IO_unsave_markers_internal)
	(_IO_switch_to_main_wget_area_internal, _IO_wdo_write_internal)
	(_IO_do_write_internal, _IO_padn_internal)
	(_IO_getline_info_internal, _IO_getline_internal)
	(_IO_free_wbackup_area_internal, _IO_free_backup_area_internal)
	(_IO_switch_to_wbackup_area_internal, _IO_setb_internal)
	(_IO_sputbackwc_internal, _IO_switch_to_get_mode_internal)
	(_IO_vfscanf_internal, _IO_vfprintf_internal)
	(_IO_doallocbuf_internal, _IO_wsetb_internal, _IO_putc_internal)
	(_IO_init_internal, _IO_un_link_internal): Don't declare.
	* libio/fileops.c: Replace INTDEF with libc_hidden_def and INTDEF2
	with libc_hidden_ver, remove use of INTUSE.
	* libio/genops.c: Likewise.
	* libio/freopen.c: Likewise.
	* libio/freopen64.c: Likewise.
	* libio/iofclose.c: Likewise.
	* libio/iofdopen.c: Likewise.
	* libio/iofflush.c: Likewise.
	* libio/iofflush_u.c: Likewise.
	* libio/iofgets.c: Likewise.
	* libio/iofgets_u.c: Likewise.
	* libio/iofopen.c: Likewise.
	* libio/iofopncook.c: Likewise.
	* libio/iofread.c: Likewise.
	* libio/iofread_u.c: Likewise.
	* libio/ioftell.c: Likewise.
	* libio/iofwrite.c: Likewise.
	* libio/iogetline.c: Likewise.
	* libio/iogets.c: Likewise.
	* libio/iogetwline.c: Likewise.
	* libio/iopadn.c: Likewise.
	* libio/iopopen.c: Likewise.
	* libio/ioseekoff.c: Likewise.
	* libio/ioseekpos.c: Likewise.
	* libio/iosetbuffer.c: Likewise.
	* libio/iosetvbuf.c: Likewise.
	* libio/ioungetc.c: Likewise.
	* libio/ioungetwc.c: Likewise.
	* libio/iovdprintf.c: Likewise.
	* libio/iovsprintf.c: Likewise.
	* libio/iovsscanf.c: Likewise.
	* libio/memstream.c: Likewise.
	* libio/obprintf.c: Likewise.
	* libio/oldfileops.c: Likewise.
	* libio/oldiofclose.c: Likewise.
	* libio/oldiofdopen.c: Likewise.
	* libio/oldiofopen.c: Likewise.
	* libio/oldiopopen.c: Likewise.
	* libio/oldstdfiles.c: Likewise.
	* libio/putc.c: Likewise.
	* libio/setbuf.c: Likewise.
	* libio/setlinebuf.c: Likewise.
	* libio/stdfiles.c: Likewise.
	* libio/strops.c: Likewise.
	* libio/vasprintf.c: Likewise.
	* libio/vscanf.c: Likewise.
	* libio/vsnprintf.c: Likewise.
	* libio/vswprintf.c: Likewise.
	* libio/wfiledoalloc.c: Likewise.
	* libio/wfileops.c: Likewise.
	* libio/wgenops.c: Likewise.
	* libio/wmemstream.c: Likewise.
	* libio/wstrops.c: Likewise.
	* libio/__fpurge.c: Likewise.
	* libio/__fsetlocking.c: Likewise.
	* assert/assert.c: Likewise.
	* debug/fgets_chk.c: Likewise.
	* debug/fgets_u_chk.c: Likewise.
	* debug/fread_chk.c: Likewise.
	* debug/fread_u_chk.c: Likewise.
	* debug/gets_chk.c: Likewise.
	* debug/obprintf_chk.c: Likewise.
	* debug/vasprintf_chk.c: Likewise.
	* debug/vdprintf_chk.c: Likewise.
	* debug/vsnprintf_chk.c: Likewise.
	* debug/vsprintf_chk.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* misc/error.c: Likewise.
	* misc/syslog.c: Likewise.
	* stdio-common/asprintf.c: Likewise.
	* stdio-common/fxprintf.c: Likewise.
	* stdio-common/getw.c: Likewise.
	* stdio-common/isoc99_fscanf.c: Likewise.
	* stdio-common/isoc99_scanf.c: Likewise.
	* stdio-common/isoc99_vfscanf.c: Likewise.
	* stdio-common/isoc99_vscanf.c: Likewise.
	* stdio-common/isoc99_vsscanf.c: Likewise.
	* stdio-common/printf-prs.c: Likewise.
	* stdio-common/printf_fp.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/printf_size.c: Likewise.
	* stdio-common/putw.c: Likewise.
	* stdio-common/scanf.c: Likewise.
	* stdio-common/sprintf.c: Likewise.
	* stdio-common/tmpfile.c: Likewise.
	* stdio-common/vfprintf.c: Likewise.
	* stdio-common/vfscanf.c: Likewise.
	* stdlib/strfmon_l.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-compat.c: Likewise.
	* sysdeps/mach/hurd/tmpfile.c: Likewise.

2012-05-24  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/syscalls.list: New file.

	* sysdeps/unix/make-syscalls.sh: Support "syscall:vdso_name@VDSOVER"
	in the third column, to generate for the shared library an IFUNC
	that uses _dl_vdso_vsym.
	* Makerules (COMPILE.c, compile-stdin.c): New variables.
	* Makeconfig (object-suffixes-noshared): New variable.

	* sysdeps/unix/sysv/linux/dl-vdso.h (PREPARE_VERSION_KNOWN): New macro.
	(VDSO_NAME_LINUX_2_6, VDSO_HASH_LINUX_2_6): New macros.
	(VDSO_NAME_LINUX_2_6_15, VDSO_HASH_LINUX_2_6_15): New macros.
	(VDSO_NAME_LINUX_2_6_29, VDSO_HASH_LINUX_2_6_29): New macros.

	[BZ #14132]
	* include/sys/time.h (__gettimeofday): Remove macro.
	(__gettimeofday, gettimeofday): Add libc_hidden_proto.
	* time/gettimeofday.c (__gettimeofday): Remove #undef.
	Remove INTDEF.
	(__gettimeofday): Add libc_hidden_def.
	(gettimeofday): Add libc_hidden_weak.
	* sysdeps/mach/gettimeofday.c: Likewise.
	* sysdeps/posix/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/gettimeofday.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c
	(__gettimeofday_internal): Remove strong_alias.
	(__gettimeofday): Add libc_hidden_def.
	(gettimeofday): Add libc_hidden_weak.
	* sysdeps/unix/syscalls.list (gettimeofday):
	Remove __gettimeofday_internal alias.

2012-05-24  Daniel Jacobowitz  <drow@false.org>
	    H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12495]
	* malloc/malloc.c (SMALLBIN_CORRECTION): New.
	(MIN_LARGE_SIZE, smallbin_index): Use it to handle 16-byte alignment.
	(largebin_index_32_big): New.
	(largebin_index): Use it for 16-byte alignment.
	(sYSMALLOc): Handle MALLOC_ALIGNMENT > 2 * SIZE_SZ.  Don't update
	correction with front_misalign.

2012-05-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libBrokenLocale.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libanl.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libc.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libcrypt.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libdl.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libm.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libnsl.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libpthread.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libresolv.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/librt.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libthread_db.abilist:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/nptl/libutil.abilist:
	Likewise.

	* scripts/data/c++-types-x32-linux-gnu.data: New file.
	* sysdeps/x86_64/x32/shlib-versions: Add x32 ABI entry.

2012-05-24  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10846]
	[BZ #14036]
	* math/libm-test.inc (exp_test): Add test from bug 14036.
	(pow_test): Add test from bug 10846.

	* math/gen-libm-test.pl (%beautify): Remove entries for exceptions
	and other flags.
	(special_function): Do not include flags in test name.
	(parse_args): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/s390/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* math/gen-libm-test.pl (%beautify): Add entries for underflow
	exceptions.
	* math/libm-test.inc ("Philosophy"): Update comment about
	exception testing.
	(UNDERFLOW_EXCEPTION): New macro.
	(UNDERFLOW_EXCEPTION_OK): Likewise.
	(UNDERFLOW_EXCEPTION_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_OK_FLOAT): Likewise.
	(UNDERFLOW_EXCEPTION_DOUBLE): Likewise.
	(UNDERFLOW_EXCEPTION_LDOUBLE_IBM): Likewise.
	(INVALID_EXCEPTION_OK): Update value.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(test_exceptions): Handle underflow exceptions.
	(acos_test): Update for underflow exception expectations.
	(cexp_test): Likewise.
	(clog_test): Likewise.
	(clog10_test): Likewise.
	(csqrt_test): Likewise.
	(ctan_test): Likewise.
	(ctanh_test): Likewise.
	(exp_test): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(fma_test): Likewise.
	(j0_test): Likewise.
	(jn_test): Likewise.
	(nexttoward_test): Likewise.
	(pow_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.
	(tan_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-05-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c
	(__libc_sigaction): Remove unused local variables.

2012-05-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/configure: New file.

2012-05-23  Paul Eggert  <eggert@cs.ucla.edu>

	mktime: avoid signed integer overflow
	* time/mktime.c (__mktime_internal): Do not mishandle the case
	where diff == INT_MIN.

	mktime: simplify computation of average
	* time/mktime.c (ranged_convert): Use new time_t_avg function
	instead of rolling our own (probably-slower) code.

	mktime: do not assume signed right shift propagates sign bit
	* time/mktime.c (isdst_differ): New static function.
	(__mktime_internal): No need to normalize tm_isdst now.
	(__mktime_internal, not_equal_tm): Use isdst_differ to compare
	tm_isdst values.

	mktime: merge another wrapv change from gnulib
	* time/mktime.c (TYPE_MAXIMUM): Rework slightly to avoid diagnostics
	from some compilers.

	mktime: remove incorrect attempt at unusual arithmetics
	* time/mktime.c (TYPE_ONES_COMPLEMENT, TYPE_SIGNED_MAGNITUDE): Remove.
	The code didn't really work on such machines anyway.
	(TYPE_MINIMUM): Assume two's complement.
	(twos_complement_arithmetic): Verify that long_int and time_t
	are two's complement (or unsigned, in the latter case).

	mktime: check signed shifts on long_int and time_t, too
	* time/mktime.c (SHR): Check that shifts work as desired
	on the types long_int and time_t too, as SHR is used on
	such types.

	mktime: do not assume 'long' is wide enough
	* time/mktime.c (verify): Move decl up.
	(long_int): New type.
	(leapyear, ydhms_diff, guess_time_tm, __mktime_internal): Use it,
	to remove assumption in the code that 'long' is wide enough to
	store year values.  This assumption is not true on x32 and on
	some non-glibc platforms.

	mktime: merge wrapv change from gnulib
	* time/mktime.c (WRAPV): New macro.
	(time_t_avg, time_t_add_ok, time_t_int_add_ok): New static functions.
	(guess_time_tm, __mktime_internal): Do not assume that signed
	integer overflow wraps around; modern compilers generate code
	where this assumption is no longer valid.

2012-05-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/i386/sysdep.h (SYSCALL_ERROR_HANDLER):
	Replace "jmp L(pseudo_end)" with "ret".
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (SYSCALL_ERROR_HANDLER):
	Likewise.

2012-05-23  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/syscalls.list: Add poll.
	* sysdeps/unix/sysv/linux/poll.c: Remove file.

2012-05-23  Andreas Jaeger  <aj@suse.de>
	    Maximilian Attems  <max@stro.at>

	* sysdeps/unix/sysv/linux/sys/reboot.h (RB_SW_SUSPEND, RB_KEXEC):
	New macros.

2012-05-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Rearrange
	code so that pseudo_end is just ret and the stack pointer is
	correct also for static library in error case.

2012-05-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/powerpc/chown.c: Add comment suggesting
	move to syscalls.list.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c: Likewise.

	* manual/install.texi (Running make install): Do not mention Linux
	kernel version for which pt_chown is not needed.
	(Linux): Do not mention problems with nscd with 2.0 kernels.
	* INSTALL: Regenerated.

2012-05-23  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): New macros from Linux 3.4.
	macro.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/i386/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h
	(MADV_DONTDUMP,MADV_DODUMP): Likewise.
	* sysdeps/unix/sysv/linux/bits/in.h
	(IP_MULTICAST_ALL,IP_UNICAST_IF): Likewise.

2012-05-22  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/dl-vdso.h (CHECK_HASH): Macro removed.
	(PREPARE_VERSION): Just use assert instead, it will be elided
	under [NDEBUG] anyway.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/Makefile: Include
	$(firstword $(wildcard $(sysdirs:=/sysctl.mk))).
	(sysdep_routines): Remove sysctl.
	* sysdeps/unix/sysv/linux/bits/sysctl.h: New file.
	* sysdeps/unix/sysv/linux/sysctl.mk: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/sysctl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sysctl.mk: Likewise.
	* sysdeps/unix/sysv/linux/sys/sysctl.h: Include <bits/sysctl.h>.

2012-05-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S: Rearrange code so
	that pseudo_end is just ret and the stack pointer is correct also
	for static library in error case.

2012-05-22  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14122]
	* nss/nsswitch.c (defconfig_entries): New variable.
	(__nss_database_lookup): Don't leak defconfig entries.
	(nss_parse_service_list): Don't leak on error paths.
	(free_database_entries): New function.
	(free_defconfig): New function.
	(free_mem): Move common code to free_database_entries.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile (sysdep_routines):
	Add arch_prctl.
	* sysdeps/unix/sysv/linux/x86_64/x32/arch_prctl.c: New file.

	* sysdeps/unix/sysv/linux/wordsize-64/posix_fallocate.c
	(posix_fallocate): Use INTERNAL_SYSCALL_TYPES if it is defined.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (INLINE_SYSCALL_TYPES):
	New macro.
	(INTERNAL_SYSCALL_NCS_TYPES): Likewise.
	(INTERNAL_SYSCALL_TYPES): Likewise.
	(LOAD_ARGS_TYPES_[1-6]): Likewise.
	(LOAD_REGS_TYPES_[1-6]): Likewise.
	(LOAD_ARGS_[1-6]): Use LOAD_ARGS_TYPES_[1-6].
	(LOAD_REGS_[1-6]): Use LOAD_REGS_TYPES_[1-6].

2012-05-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysign.S: Add compat symbol
	copysignl for GLIBC_2_0.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_finite.S: Add compat symbol
	finitel for GLIBC_2.0 and __finitel for GLIBC_2_1.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c: Add compat symbol
	logbl for GLIBC_2_0.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysign.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_finite.S: Likewise.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Don't include
	<bits/wordsize.h>.  Check __x86_64__ instead of __WORDSIZE.

	* sysdeps/unix/sysv/linux/i386/sysdep.h (SYSCALL_ERROR_HANDLER):
	Use "neg %eax".

	* time/mktime.c: Update copyright years.

2012-05-22  Paul Eggert  <eggert@cs.ucla.edu>

	mktime: merge comment-quoting-style change from gnulib
	* time/mktime.c: Quote 'like this' in comments.
	The GNU coding standards suggest that we no longer quote `like this',
	as "`" and "'" are typically rendered asymmetrically nowadays.
	The typical gnulib style is to quote 'like this' when quoting
	code, and "like this" when quoting English.

	* time/mktime.c (compile-command): Add "-I.".

	mktime: merge mktime-internal.h change from gnulib
	* time/mktime.c [!_LIBC]: Include "mktime-internal.h".

	mktime: merge time_r change from gnulib
	* time/mktime.c [!_LIBC]: Do not include "time_r.h".

	mktime: merge DEBUG change from gnulib
	* time/mktime.c (mktime) [DEBUG]: #undef before #define-ing, in
	case system <time.h> has a #define.

	mktime: merge <sys/types.h> change from gnulib
	* time/mktime.c: Do not include <sys/types.h>; no longer needed,
	since <time.t> is now guaranteed to define time_t.

	mktime: merge HAVE_CONFIG_H change from gnulib
	* time/mktime.c: Include <config.h> if !_LIBC, not if HAVE_CONFIG_H.

2012-05-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (SYSCALL_SET_ERRNO):
	Use "neg %eax".

	* sysdeps/unix/sysv/linux/bits/resource.h (RLIM_INFINITY): Use
	__rlim_t cast.
	(struct rusage): Use anonymous union to pad each field to
	__syscall_slong_t.

2012-05-21  David S. Miller  <davem@davemloft.net>

	* Makefules (o-iterator): Remove .s cases.
	(compile-command.s): Delete.
	(COMPILE.s): Delete.
	* sysdeps/unix/make-syscalls.sh: Remove .s file tests.

2012-05-21  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (libc_cv_predef_stack_protector): Only consider
	"foobar" and "__stack_chk_fail" lines in libc_undefs.
	* configure: Regenerated.

2012-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (SYSCALL_SET_ERRNO):
	New macro.  Use R*LP on int and pointer.
	(SYSCALL_ERROR_HANDLER): Use SYSCALL_SET_ERRNO.
	* sysdeps/unix/sysv/linux/x86_64/x32/lseek.S: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/llseek.S: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sysdep.h: Likewise.

	* sysdeps/gnu/bits/utmp.h (struct lastlog): Check
	[__WORDSIZE_TIME64_COMPAT32] instead of
	[__WORDSIZE == 64 && __WORDSIZE_COMPAT32].
	(struct utmp): Likewise.
	* sysdeps/gnu/bits/utmpx.h (struct utmpx): Likewise.
	* sysdeps/powerpc/powerpc32/bits/wordsize.h (__WORDSIZE_COMPAT32):
	Renamed to ...
	(__WORDSIZE_TIME64_COMPAT32): This.
	* sysdeps/powerpc/powerpc64/bits/wordsize.h: Likewise.
	* sysdeps/sparc/sparc32/bits/wordsize.h: Likewise.
	* sysdeps/sparc/sparc64/bits/wordsize.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/wordsize.h: Likewise.
	* sysdeps/x86_64/bits/wordsize.h (__WORDSIZE_COMPAT32): Removed.
	(__WORDSIZE_TIME64_COMPAT32): New macro.

2012-05-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/i686/multiarch/wcschr-c.c: Redefine libc_hidden_def
	only if [SHARED]. Add prototype for __wcschr_ia32.

2012-05-21  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/setjmp.S [PTR_MANGLE] [__ILP32__]: Preserve high bits
	of %rbp unmolested in the jmp_buf while mangling the low bits.
	* sysdeps/x86_64/__longjmp.S [PTR_DEMANGLE] [__ILP32__]: Restore the
	unmolested high bits of %rbp while demangling the low bits.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S: Likewise.

2012-05-21  Andreas Jaeger  <aj@suse.de>

	* include/shlib-compat.h (libc_sunrpc_symbol): New macro.
	* sunrpc/svc_simple.c: Use it for registerrpc.
	* sunrpc/xcrypt.c: Use it for passwd2des.

	* malloc/malloc.c: Include shlib-compat.h for SHLIB_COMPAT.

2012-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/statvfs.h (_STATVFSBUF_F_UNUSED):
	Don't define if [__SYSCALL_WORDSIZE != 32].
	* sysdeps/x86_64/bits/wordsize.h (__SYSCALL_WORDSIZE):
	New macro.

2012-05-21  Bruno Haible  <bruno@clisp.org>
	    Andreas Jaeger  <aj@suse.de>

	[BZ #13691], Revert breakage of iconv() converter for TCVN-5712.
	* iconvdata/tcvn5712-1.c (BODY for FROM_LOOP): Don't consider
	inptr and inend for must_buffer_ch.
	* wcsmbs/tst-mbsnrtowcs.c: Remove file.
	* wcsmbs/Makefile (tests): Remove tst-mbsnrtowcs.
	* stdio-common/Makefile (tests): Remove bug15.
	(bug15-ENV): Remove macro.
	* stdio-common/bug15.c: Remove, we do not support vi_VN.TCVN5712-1
	anymore.

2012-05-19  Andreas Jaeger  <aj@suse.de>
	    Roland McGrath  <roland@hack.frob.com>

	* manual/contrib.texi: Completely rewritten. It contains now an
	alphabetical list of contributors and their contributions.

2012-05-21  Richard Henderson  <rth@twiddle.net>

	* misc/getauxval.c (__getauxval): Use unsigned long int.
	* misc/sys/auxv.h: Include <sys/cdefs.h>.
	(getauxval): Use unsigned long int.

2012-05-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/syscalls.list: New file.

2012-05-21  Roland McGrath  <roland@hack.frob.com>

	* malloc/malloc.c [!SHLIB_COMPAT (libc, GLIBC_2_0, GLIBC_2_16)]
	(MALLOC_ALIGNMENT): Set it to the greater of 2 * SIZE_SZ and
	__alignof__ (long double).

2012-05-21  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-05-20  Richard Henderson  <rth@twiddle.net>

	* misc/getauxval.c: New file.
	* misc/sys/auxv.h: New file.
	* misc/Makefile (headers): Add sys/auxv.h, bits/hwcap.h.
	(routines): Add getauxval.
	* misc/Versions (GLIBC_2.16): Add __getauxval, getauxval.
	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro): Add _dl_auxv.
	* elf/dl-sysdep.c (_dl_auxv): Remove.
	(_dl_sysdep_start, _dl_show_auxv): Use GLRO to access _dl_auxv.
	* elf/dl-support.c (_dl_auxv): New variable.
	(_dl_aux_init): Initialize it.
	* manual/startup.texi (Auxiliary Vector): New node.
	* sysdeps/generic/bits/hwcap.h: New file.
	* sysdeps/powerpc/bits/hwcap.h: New file, split out from ...
	* sysdeps/powerpc/sysdep.h: ... here.  Include it.
	* sysdeps/sparc/bits/hwcap.h: New file, split out from ...
	* sysdeps/sparc/sysdep.h: ... here.  Include it.
	* sysdeps/unix/sysv/linux/s390/bits/hwcap.h: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: Update.
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Update.

2012-05-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-05-19  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-05-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14123]
	* math/s_ccosh.c: Include <float.h>
	(__ccosh): Avoid internal overflow calculating sinh and cosh
	values before multiplying by sin and cos values.
	* math/s_ccoshf.c: Likewise.
	* math/s_ccoshl.c: Likewise.
	* math/s_csin.c: Likewise.
	* math/s_csinf.c: Likewise.
	* math/s_csinl.c: Likewise.
	* math/s_csinh.c: Likewise.
	* math/s_csinhf.c: Likewise.
	* math/s_csinhl.c: Likewise.
	* math/libm-test.inc (ccos_test): Add more tests.
	(ccosh_test): Likewise.
	(csin_test): Likewise.
	(csinh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-05-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/wordsize-64/preadv.c: New file.
	* sysdeps/unix/sysv/linux/wordsize-64/pwritev.c: Likewise.

	* sysdeps/x86_64/x32/_itoa.h: Add comment.

2012-05-19  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/soft-fp/Makefile: Remove file.
	* sysdeps/powerpc/soft-fp/Subdirs: Likewise.
	* sysdeps/powerpc/soft-fp/Versions: Likewise.
	* sysdeps/powerpc/soft-fp/q_add.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_cmp.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_cmpe.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_div.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_dtoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_feq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fge.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fgt.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fle.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_flt.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_fne.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_itoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_lltoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_mul.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_neg.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtod.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtoi.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtoll.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtos.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtou.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_qtoull.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_sqrt.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_stoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_sub.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_ulltoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_util.c: Likewise.
	* sysdeps/powerpc/soft-fp/q_utoq.c: Likewise.
	* sysdeps/powerpc/soft-fp/sfp-machine.h: Likewise.

2012-05-18  Andreas Jaeger  <aj@suse.de>

	* csu/.gitignore: Delete.

2012-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/timex.h: Include <bits/types.h>.
	(timex): Use __syscall_slong_t.

2012-05-18  Andreas Jaeger  <aj@suse.de>
	    Carlos O'Donell  <carlos_odonell@mentor.com>

	* manual/install.texi (Configuring and compiling): Update
	description about files modified in the source directory.
	* INSTALL: Regenerated.

2012-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/x86_64/sysdep.S: Use RAX_LP to access return
	value.  Use "or" to set return value to -1.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.S: Use RAX_LP to
	negate return value.

2012-05-18  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power4/Makefile (CFLAGS-wordcopy.c)
	(CFLAGS-memmove.c): remove -ftree-loop-linear which causes a build
	failure if the compiler has Graphite support disabled.
	* sysdeps/powerpc/powerpc32/power4/fpu/Makefile (CFLAGS-mpa.c):
	Likewise.
	* sysdeps/powerpc/powerpc64/power4/Makefile (CFLAGS-wordcopy.c)
	(CFLAGS-memmove.c): Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/Makefile (CFLAGS-mpa.c):
	Likewise.

2012-05-18  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/_itoa.h: New file.

	* sysdeps/unix/sysv/linux/getdents.c (__GETDENTS): Use
	getdents system call only if kernel and user dirents have the
	same d_ino and d_off.

	* stdio-common/_itoa.c: Check _ITOA_NEEDED instead of
	LLONG_MAX != LONG_MAX.
	(_itoa_word): Use _ITOA_WORD_TYPE on value.
	(_fitoa_word): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/sigcontextinfo.h: Fold copyright
	years.
	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/reg.h: Likewise.

	* sysdeps/unix/sysv/linux/x86_64/bits/sigcontext.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.
	(sigcontext): Use "__uint64_t" instead of "unsigned long int"
	if __x86_64__ is defined.  Use anonymous union on fpstate.

	* sysdeps/unix/sysv/linux/x86_64/sys/user.h (user): Use
	anonymous union.

2012-05-18  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/dl-start.S (_dl_start_user): Use
	INTUSE on _dl_argv, and _rtld_local instead of _rtld_global.
	* sysdeps/powerpc/powerpc32/fpu/__longjmp-common.S [IS_IN_rtld]:
	Refer to _rtld_local_ro instead of _rtld_global_ro.
	* sysdeps/powerpc/powerpc32/fpu/setjmp-common.S [IS_IN_rtld]:
	Likewise.
	* sysdeps/powerpc/powerpc64/__longjmp-common.S [IS_IN_rtld]:
	Likewise.
	* sysdeps/powerpc/powerpc64/setjmp-common.S [IS_IN_rtld]:
	Likewise.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S [SHARED]: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Use _rtld_local instead
	of _rtld_global, and rtld_progname instead of _dl_argv[0].

	[BZ #10882]
	* sysdeps/powerpc/powerpc32/dl-machine.c
	(__elf_machine_runtime_setup) [PROF]: Don't reference
	_dl_prof_resolve.

2012-05-18  Andreas Jaeger  <aj@suse.de>

	* sysdeps/x86_64/fpu/bits/mathinline.h (lrintf): Make inline
	function only available for GCCs before 3.4 since GCC 3.4
	introduced a builtin.
	(lrint): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.
	(fmaxf): Likewise.
	(fmax): Likewise.
	(fminf): Likewise.
	(fmin): Likewise.
	(rint): Likewise.
	(rintf): Likewise.
	(nearbyint): Likewise.
	(nearbyintf): Likewise.
	(ceil): Likewise.
	(ceilf): Likewise.
	(floor): Likewise.
	(floorf): Likewise.

2012-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/pselect.c (data): Use __syscall_ulong_t
	on both fields and cast pointer to __syscall_ulong_t.

	* bits/types.h (__fsword_t): New type.
	* bits/typesizes.h (__FSWORD_T_TYPE): New macro.
	sysdeps/mach/hurd/bits/typesizes.h (__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h
	(__FSWORD_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/bits/statfs.h (statfs): Replace
	__SWORD_TYPE with __fsword_t.
	(statfs64): Likewise.

2012-05-17  David S. Miller  <davem@davemloft.net>

	* crypt/sha512c-test.c (TIMEOUT): Increase to 32.

2012-05-17  Andreas Jaeger  <aj@suse.de>

	* elf/tst-relsort1.c (do_test): Fix function declaration to avoid
	warning.

2012-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/tst-mallocalign1.c (test): Cast to unsigned long.

2012-05-17  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/dl-machine.h (elf_machine_rel): Declare refsym only
	when it is used.

2012-05-17  Chris Metcalf  <cmetcalf@tilera.com>

	* stdio-common/bug22.c (TIMEOUT): Bump up from 30 to 60.

2012-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Makefile (tests): Add tst-mallocalign1.
	* sysdeps/x86_64/tst-mallocalign1.c: New file.

2012-05-17  Andreas Jaeger  <aj@suse.de>
	    Carlos O'Donell  <carlos_odonell@mentor.com>

	[BZ #14059]
	* sysdeps/x86_64/multiarch/init-arch.h
	(bit_YMM_Usable): Rename to...
	(bit_AVX_Usable): ... this.
	(bit_FMA4_Usable): New macro.
	(bit_XMM_state): New macro.
	(bit_YMM_state): New macro.
	[__ASSEMBLER__] (index_YMM_Usable): Rename to...
	[__ASSEMBLER__] (index_AVX_Usable): ... this.
	[__ASSEMBLER__] (index_FMA4_Usable): New macro.
	(CPUID_OSXSAVE): New macro.
	(CPUID_AVX): New macro.
	(CPUID_FMA4): New macro.
	(index_YMM_Usable): Rename to...
	(index_AVX_Usable): ... this.
	(HAS_AVX): Use HAS_ARCH_FEATURE.
	(HAS_FMA4): Likewise.
	(HAS_YMM_USABLE): Remove.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Enable AVX or FMA4 IFF YMM and XMM states are usable and the features
	are present.
	* sysdeps/x86_64/multiarch/strcmp.S: Use bit_AVX_Usable.
	* sysdeps/i386/i686/multiarch/Makefile: Add test-multiarch to tests.
	* sysdeps/x86_64/multiarch/Makefile: Likewise.
	* sysdeps/i386/i686/multiarch/test-multiarch.c: New file.
	* sysdeps/x86_64/multiarch/test-multiarch.c: New file.

2012-05-17  Chris Metcalf  <cmetcalf@tilera.com>

	* math/libm-test.c: Support platforms without multiple rounding modes.
	* math/bug-nextafter.c: Support platforms without FP exceptions.
	* math/bug-nexttoward.c: Likewise.
	* math/test-fenv.c: Likewise.
	* math/test-misc.c: Likewise.
	* stdlib/bug-getcontext.c: Likewise.

2012-05-17  Andreas Jaeger  <aj@suse.de>

	* manual/examples/search.c (critter_cmp): Change signature to
	avoid warnings.
	* manual/string.texi (Collation Functions): Likewise.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h: Fold copyright years.
	* bits/typesizes.h: Likewise.
	* sysdeps/mach/hurd/bits/typesizes.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h: Likewise.
	* time/time.h: Likewise.

2012-05-16  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #208]
	* malloc.c (int_mallinfo): Add parameter to accumulate statistics
	in instead of returning them.  Return void.
	(__libc_mallinfo): Accumulate over all arenas.
	(__malloc_stats): Adjust for change in int_mallinfo interface.

2012-05-16  Roland McGrath  <roland@hack.frob.com>

	[BZ #10375]
	* configure.in (NM): Add AC_CHECK_TOOL for it.
	(libc_extra_cflags): New substituted variable.
	Check for -fstack-protector being used implicitly.
	* configure: Regenerated.
	* config.make.in (config-extra-cflags): New variable,
	gets @libc_extra_cflags@.
	* Makeconfig (CFLAGS): Add $(config-extra-cflags) near the front.

	[BZ #10375]
	* configure.in: Check for _FORTIFY_SOURCE being predefined.
	(CPPUNDEFS): New substituted variable; add -U_FORTIFY_SOURCE if needed.
	* configure: Regenerated.
	* config.make.in (CPPUNDEFS): New substituted variable.
	* Makeconfig (CPPFLAGS): Put $(CPPUNDEFS) at the beginning.
	* Makerules ($(stdio_lim:h=st)): Use $(CPPUNDEFS).
	* time/ctime.c: Don't #undef __OPTIMIZE__ and ctime.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/mqueue.h: Include <bits/types.h>.
	(mq_attr): Use __syscall_slong_t.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/stat.h (_STAT_VER_SVR4):
	Check __x86_64__ instead of __WORDSIZE.
	(_STAT_VER_LINUX): Likewise.
	(stat): Check __x86_64__ instead of __WORDSIZE.  Use
	__syscall_ulong_t and __syscall_slong_t.
	(stat64): Likewise.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/typesizes.h: New file.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/bits/ipctypes.h: New file.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/bits/ipc.h (ipc_perm): Use
	__syscall_ulong_t.

	* sysdeps/unix/sysv/linux/x86_64/sys/ucontext.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.
	(greg_t): Use "__extension__ long long int" if __x86_64__ is
	defined.
	(mcontext_t): Replace "unsigned long" with "unsigned long long".

	* sysdeps/unix/sysv/linux/x86_64/sys/user.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.
	(user_regs_struct): Use "__extension__ unsigned long long"
	instead of "unsigned long" if __x86_64__ is defined.
	(user): Likewise.  Pad after pointer field if __ILP32__ is
	defined.

2012-05-16  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (makeinfo): Require version 4.5 or later.  Allow
	versions 5 to 9.
	* configure: Regenerated.
	* manual/install.texi (texinfo): Increase version requirement to
	4.5 or later.
	* INSTALL: Regenerated.

	* include/stdc-predef.h (__STDC_ISO_10646__): Increase to 201103L.

2012-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/gmp-mparam.h: New file.

	* sysdeps/x86_64/x32/ffs.c: New file.

	* sysdeps/unix/sysv/linux/x86_64/bits/shm.h (shmatt_t): Use
	__syscall_ulong_t.
	(shmid_ds): Add __unused1 and __unused2 only if __x86_64__ isn't
	defined.  Use __syscall_ulong_t.
	(shminfo): Use __syscall_ulong_t.
	(shm_info): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h (semid_ds): Use
	__syscall_ulong_t.

	* sysdeps/unix/sysv/linux/x86_64/bits/msq.h: Don't include
	<bits/wordsize.h>.
	(msgqnum_t): Use __syscall_ulong_t.
	(msglen_t): Likewise.
	(msqid_ds): Check __x86_64__ instead of __WORDSIZE.  Use
	__syscall_ulong_t.

	* sysdeps/unix/sysv/linux/x86_64/bits/a.out.h: Don't include
	<bits/wordsize.h>.  Check __x86_64__ instead of __WORDSIZE.

	* sysdeps/unix/sysv/linux/x86_64/bits/siginfo.h: New file.

	* sysdeps/x86_64/x32/divdi3.c: New dummy file.
	* sysdeps/x86_64/x32/symbol-hacks.h: Likewise.

	* sysvipc/sys/msg.h (msgbuf): Replace long int with
	__syscall_slong_t.

	* sysdeps/unix/sysv/linux/x86_64/sys/reg.h: Don't
	include <bits/wordsize.h>.  Check __x86_64__ instead of
	__WORDSIZE.

	* sysdeps/unix/sysv/linux/x86_64/sys/procfs.h (elf_greg_t): Use
	"unsigned long long int" if __x86_64__ is defined.
	(elf_fpregset_t): Check __x86_64__ instead of __WORDSIZE.

	* sysdeps/unix/sysv/linux/x86_64/sys/debugreg.h: Don't include
	<bits/wordsize.h>.  Check __x86_64__ instead of __WORDSIZE.
	(DR_CONTROL_RESERVED): Use ULL instead of UL suffix.

	* sysdeps/unix/sysv/linux/x86_64/sigcontextinfo.h: Include
	<stdint.h>.
	(GET_PC): Cast to uintptr_t first.
	(GET_FRAME): Likewise.
	(GET_STACK): Likewise.

	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/alphasort64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/fseeko64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftello64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftw.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/ftw64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/glob.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofgetpos64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofopen64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/iofsetpos64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/lockf64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkostemp64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/mkstemp64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandir64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/scandirat64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/tmpfile64.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/versionsort64.c: Likewise.

2012-05-16  Andreas Schwab  <schwab@linux-m68k.org>

	* Makerules (+depfiles): Also collect depfiles from .oS in
	$(extra-objs).
	* sysdeps/ieee754/ldbl-opt/Makefile (extra-objs): Add $(addsuffix
	.oS, $(libnldbl-routines)).

	* Makerules (native-compile-mkdep-flags): Define.
	* sunrpc/Makefile (extra-objs): Add $(addprefix
	cross-,$(rpcgen-objs)), don't add $(cross-rpcgen-objs).
	($(cross-rpcgen-objs)): Use $(native-compile-mkdep-flags) instead
	of $(compile-mkdep-flags).  Depend on $(before-compile) instead of
	calling $(make-target-directory).

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h (__snseconds_t): Removed.
	* time/time.h (struct timespec): Replace __snseconds_t with
	__syscall_slong_t.
	* bits/typesizes.h (__SNSECONDS_T_TYPE): Removed.
	* sysdeps/mach/hurd/bits/typesizes.h (__SNSECONDS_T_TYPE):
	Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/mach/hurd/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): New macro.
	(__SYSCALL_ULONG_TYPE): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h (__syscall_slong_t): New type.
	(__syscall_ulong_t): Likewise.

	* bits/typesizes.h (__SYSCALL_SLONG_TYPE): New macro.
	(__SYSCALL_ULONG_TYPE): Likewise.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): Likewise.
	(__SYSCALL_ULONG_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): Likewise.
	(__SYSCALL_ULONG_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SYSCALL_SLONG_TYPE): Likewise.
	(__SYSCALL_ULONG_TYPE): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/Makefile (gen-as-const-headers):
	Add sigaltstack-offsets.sym.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S: Include
	<sigaltstack-offsets.h>.
	(CALL_FAIL): Use RSP_LP to operate on stack.  Use RDI_LP on
	longjmp_msg pointer.
	(____longjmp_chk): Use R8_LP and RDX_LP on SP and PC.  Use
	R*_LP, sizeSS, oSS_FLAGS, oSS_SP and oSS_SIZE for alternate
	signal stack.
	* sysdeps/unix/sysv/linux/x86_64/sigaltstack-offsets.sym: New.

2012-05-15  Joseph Myers  <joseph@codesourcery.com>

	* elf/stackguard-macros.h: Remove file.
	* sysdeps/generic/stackguard-macros.h: New file.
	* sysdeps/i386/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc32/stackguard-macros.h: Likewise.
	* sysdeps/powerpc/powerpc64/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-32/stackguard-macros.h: Likewise.
	* sysdeps/s390/s390-64/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc32/stackguard-macros.h: Likewise.
	* sysdeps/sparc/sparc64/stackguard-macros.h: Likewise.
	* sysdeps/x86_64/stackguard-macros.h: Likewise.
	* nptl/tst-stackguard1.c: Include <stackguard-macros.h> not
	<elf/stackguard-macros.h>.

	[BZ #14109]
	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h (elf_vrreg_t): Use
	__aligned__ in attribute.
	* sysdeps/unix/sysv/linux/s390/sys/ucontext.h (__psw_t): Likewise.
	(gregset_t): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/Implies (wordsize-64): Moved to ....
	* sysdeps/x86_64/64/Implies-after: Here.  New file.
	* sysdeps/x86_64/x32/Implies-after: New file.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.h: Use R*_LP to pass arguments
	and access return value for _dl_profile_fixup.  Use R10_LP to
	load frame size.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/init-first.c: New.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/sysdep.h: Allowed to be include more than once.
	* sysdeps/x86_64/x32/sysdep.h: New file.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/__longjmp.S: Use R*_LP on SP and PC.
	* sysdeps/x86_64/setjmp.S: Likewise.

2012-05-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/e_log10.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_log2.c: New file.
	* sysdeps/ieee754/dbl-64/e_log2.c: Fixing indents.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise and also
	remove unused global constant.

2012-05-15  Chris Metcalf  <cmetcalf@tilera.com>

	* sysdeps/unix/sysv/linux/getsysstats.c: Remove duplicate
	include of <not-cancel.h>.

2012-05-15  Roland McGrath  <roland@hack.frob.com>

	* nscd/nscd-client.h (__nscd_acquire_maplock): Fix formatting.

2012-05-15  Jeff Law  <law@redhat.com>
	    Andreas Jaeger  <aj@suse.de>

	[BZ #13594]
	* nscd/nscd-client.h (__nscd_acquire_maplock): New function, split
	out from...
	* nscd/nscd_helper.c (__nscd_get_map_ref): ... here.
	* nscd/nscd-client.h: Add __nscd_acquire_maplock.
	* nscd/nscd_gethst_r.c (__nscd_get_nl_timestamp): Add locking to
	code changing __hst_map_handle.map.

2012-05-15  Roland McGrath  <roland@hack.frob.com>

	* configure.in (sysnames): Look for Implies-before and Implies-after
	files.
	* configure: Regenerated.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sigaction.c (RESTORE2): Replace
	8-byte data alignment with LP_SIZE alignment.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/clone.S: Load pointer to TID
	into R10_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/dl-cache.h: New.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/x32/Makefile: New file.
	* sysdeps/unix/sysv/linux/x86_64/x32/getcpu.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu-static.c:
	Likewise.
	* sysdeps/unix/sysv/linux/x86_64/x32/sched_getcpu.S: Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/stackinfo.h (stackinfo_get_sp): Use RSP_LP.
	(stackinfo_sub_sp): Likewise.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Load pointers into
	RAX_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Load cache sizes
	into R*_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Load cache
	sizes into R*_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/strcmp.S: Load pointers into R*_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memcpy.S: Load __x86_64_data_cache_size_half
	into R11_LP and load __x86_64_shared_cache_size_half into
	R8_LP.

2012-05-15  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Load cache size into
	R8_LP.

2012-05-15  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/fpu/s_logb.c: New file. Optimized
	logb for POWER7.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbf.c: New file. Optimized
	logbf for POWER7.
	* sysdeps/powerpc/powerpc32/power7/fpu/s_logbl.c: New file. Optimized
	logbl for POWER7.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logb.c: New file. Use
	powerpc32/power7/fpu/s_logb.c via #include.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbf.c: New file. Use
	powerpc32/power7/fpu/s_logbf.c via #include.
	* sysdeps/powerpc/powerpc64/power7/fpu/s_logbl.c: New file. Use
	powerpc32/power7/fpu/s_logbl.c via #include.

2012-05-15  Joseph Myers  <joseph@codesourcery.com>

	* README.libm: Remove file.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/start.S: Simulate popping 4-byte argument
	count for x32.  Use R*_LP and omit operand-size suffix.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* shlib-versions: Move x86_64-.*-linux.* entries to ...
	* sysdeps/x86_64/64/shlib-versions: Here.  New file.
	* sysdeps/x86_64/x32/shlib-versions: New file.

2012-05-14  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/dl-osinfo.h (dl_fatal): Function removed.
	* elf/rtld.c (dl_main) [DL_SYSDEP_OSCHECK]:
	Use _dl_fatal_printf instead.

2012-05-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/configure.in (minimum_kernel): Always
	set if not set by the user.  Do not allow for being unset.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_load_address): Remove
	the `q' suffix from lea and replace .quad with ASM_ADDR.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/sysdep.h (PTR_MANGLE): Remove
	the `q' suffix from xor/rol instructions.  Use $2*LP_SIZE+1
	instead of $17.
	(PTR_DEMANGLE): Likewise.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/sysdep.h (LP_SIZE): New macro.
	(LP_OP): Likewise.
	(ASM_ADDR): Likewise.
	(RAX_LP): Likewise.
	(RBP_LP): Likewise.
	(RBX_LP): Likewise.
	(RCX_LP): Likewise.
	(RDI_LP): Likewise.
	(RSI_LP): Likewise.
	(RSP_LP): Likewise.
	(R8_LP): Likewise.
	(R9_LP): Likewise.
	(R10_LP): Likewise.
	(R10_LP): Likewise.
	(R11_LP): Likewise.
	(R12_LP): Likewise.
	(R13_LP): Likewise.
	(R14_LP): Likewise.
	(R15_LP): Likewise.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/x32/dl-machine.h: New file.

2012-05-14  Andreas Jaeger  <aj@suse.de>

	* manual/Makefile (subdir): Remove export of subdir.
	(all): Remove target.
	(.PHONY): Remove all from list.
	(mkinstalldirs): Remove.
	(.PHONY): Remove installdirs from list.
	($(inst_infodir)/libc.info): Use make-target-directory.
	(installdirs): Remove.
	(subdir_%): Remove.
	(glibc-targets): Remove.
	(lib): Remove.
	(stubs): Remove.
	($(objpfx)stubs ../po/manual.pot): Remove.
	($(objpfx)stamp%): Remove.
	(make-target-directory): Remove.
	(subdir_install): Remove.
	(routines): Remove.
	(aux): Remove.
	(sources): Remove.
	(objects): Remove.
	(headers): Remove.

	[BZ #13750]
	* manual/.gitignore: Remove, it's not needed anymore.
	* manual/libc-texinfo.sh: Pass OUTDIR as extra argument, create
	all files in it.
	* manual/Makefile (dvi, pdf, info, html): Depend on files in build
	directory.
	(texis): Renamed to $(objpfx)texis.
	(texis-path): New, contains path to generated files.
	(chapters.%): Use texis-path for complete path, add extra argument
	libc-texinfo.sh.
	(libc.dvi, libc.pdf, libc.info, libc.pdf): Add $(objfpx) as prefix.
	(libc/index.html, summary.texi): Add $(objpfx) as prefix.
	(summary,texi, stamp-summary): Use complete path of
	files. Generate files in build dir.
	(dir-add.texi): Build in build dir.
	(libm-err.texi,stamp-libm-err): Likewise.
	(version.texi, stamp-version): Likewise.
	(.%c.texi): Likewise.
	(%.info,%.dvi,%.pdf): Add $(objpfx) as prefix, build in build dir.
	(mostlyclean): Remove target.
	(realclean): Remove target.
	(generated): Add new variable with contents from mostlyclean and
	realclean, remove entries duplicated in	common-mostlyclean, add
	stamp-libm-err and stamp-version.
	(generated-dirs): Add libc directory.
	($(inst_infodir)/libc.info): Install files from build dir.

	* manual/install.texi (Configuring and compiling): Adjust since
	the info files are not part of the tar ball anymore.

2012-05-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/getcwd.c (__getcwd): Remove unused
	variable.

2012-05-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13717]
	* sysdeps/unix/sysv/linux/configure.in (arch_minimum_kernel): Set
	to 2.2.0 where earlier.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/unix/sysv/linux/getcwd.c [!__ASSUME_GETCWD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_GETCWD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/i386/chown.c [!__ASSUME_LCHOWN_SYSCALL]:
	Remove conditional code.
	[!__NR_lchown]: Likewise.
	[__ASSUME_LCHOWN_SYSCALL]: Make code unconditional.
	[__NR_lchown]: Likewise.
	* sysdeps/unix/sysv/linux/i386/fchownat.c (fchownat): Remove
	comment referencing __ASSUME_LCHOWN_SYSCALL.
	* sysdeps/unix/sysv/linux/i386/sigaction.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/if_index.c [!__ASSUME_SIOCGIFNAME]:
	Remove conditional code.
	[__ASSUME_SIOCGIFNAME ]: Make code unconditional.
	(__protocol_available): Remove #if 0 code.
	* sysdeps/unix/sysv/linux/ifreq.c [!__ASSUME_SIOCGIFNAME]: Remove
	conditional code.
	[__ASSUME_SIOCGIFNAME]: Make code unconditional.
	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_GETCWD_SYSCALL): Don't define.
	(__ASSUME_REALTIME_SIGNALS): Likewise.
	(__ASSUME_PREAD_SYSCALL): Likewise.
	(__ASSUME_PWRITE_SYSCALL): Likewise.
	(__ASSUME_POLL_SYSCALL): Likewise.
	(__ASSUME_LCHOWN_SYSCALL): Likewise.
	(__ASSUME_SETRESUID_SYSCALL): Define for all kernel versions for
	non-SPARC.
	(__ASSUME_SIOCGIFNAME): Don't define.
	(__ASSUME_MSG_NOSIGNAL): Likewise.
	(__ASSUME_SENDFILE): Define unconditionally.
	(__ASSUME_PROC_SELF_FD_SYMLINK): Don't define.
	* sysdeps/unix/sysv/linux/poll.c [!__ASSUME_POLL_SYSCALL]: Remove
	conditional code.
	[__ASSUME_POLL_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/chown.c (__chown)
	[!__ASSUME_LCHOWN_SYSCALL]: Remove conditional code.
	(__chown) [__ASSUME_LCHOWN_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/fchownat.c (fchownat)
	[!__ASSUME_LCHOWN_SYSCALL]: Remove conditional code.
	(fchownat) [__ASSUME_LCHOWN_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pread64.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/pwrite64.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pread64.c
	[!__ASSUME_PREAD_SYSCALL]: Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/pwrite64.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/pread.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/pread64.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/ptsname.c (__ptsname_internal)
	[__LINUX_KERNEL_VERSION < 131443]: Remove conditional code.
	* sysdeps/unix/sysv/linux/pwrite.c [!__ASSUME_PWRITE_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/pwrite64.c [!__ASSUME_PWRITE_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pread.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pread64.c [!__ASSUME_PREAD_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PREAD_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pwrite.c [!__ASSUME_PWRITE_SYSCALL]:
	Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sh/pwrite64.c
	[!__ASSUME_PWRITE_SYSCALL]: Remove conditional code.
	[__ASSUME_PWRITE_SYSCALL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigaction.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigpending.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigprocmask.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sigsuspend.c
	[!__ASSUME_REALTIME_SIGNALS]: Remove conditional code.
	[__ASSUME_REALTIME_SIGNALS]: Make code unconditional.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c
	(__libc_missing_rt_sigs): Remove.
	(__libc_sigaction) [__NR_rt_sigaction]: Make code unconditional.
	(__libc_sigaction): Do not handle ENOSYS from rt_sigaction.
	* sysdeps/unix/sysv/linux/syslog.c [!__ASSUME_MSG_NOSIGNAL]:
	Remove conditional code.
	[__ASSUME_MSG_NOSIGNAL]: Make code unconditional.
	* sysdeps/unix/sysv/linux/testrtsig.h (kernel_has_rtsig): Always
	return 1.
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname)
	[!__ASSUME_PROC_SELF_FD_SYMLINK]: Remove conditional code.
	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r)
	[!__ASSUME_PROC_SELF_FD_SYMLINK]: Likewise.

2012-05-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/bits/mathinline.h (__pow2): Remove,
	it's not used in glibc.
	(__coshm1): Likewise.
	(__acosh1p): Likewise.
	(__sgn): Likewise.

	* manual/string.texi (Copying and Concatenation): Add missing
	variable in concat example.
	Reported by David C. Rankin <drankinatty@suddenlinkmail.com>.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14103]
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Replace
	__builtin_clzl with __builtin_clzll.

2012-05-14  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #14104]
	* sysdeps/unix/sysv/linux/check_pf.c (cache): Use
	libc_freeres_ptr.

2012-05-14  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/fpu/multiarch/Makefile: New file.
	* sysdeps/i386/i686fpu/multiarch/e_expf.c: New file.
	* sysdeps/i386/i686fpu/multiarch/e_expf-ia32.S: New file.
	* sysdeps/i386/i686/fpu/multiarch/e_expf-sse2.S: New file.

2012-05-14  Mike Frysinger  <vapier@gentoo.org>

	* NEWS: Update ia64 info.

2012-05-12  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/memmove.c (MEMMOVE): Don't return a value if
	used as bcopy.

2012-05-12  Thomas Schwinge  <thomas@codesourcery.com>

	* io/dup3.c (dup3): Rename to __dup3, add weak alias for dup3.
	* sysdeps/unix/syscalls.list (dup3): Likewise.
	* libio/freopen.c (freopen): Invoke __dup3 instead of dup3.
	* libio/freopen64.c (freopen64): Invoke __dup3 instead of dup3.

2012-05-11  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/stackguard-macros.h (STACK_CHK_GUARD) [__x86_64__]: Use
	"%c1" with "i" (offsetof (tcbhead_t, stack_guard)).

2012-05-11  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tls-macros.h (TLS_LE): Use mov instead of movq to load
	thread pointer.
	(TLS_IE): Use mov/add instead of movq/addq to load thread
	pointer.
	(TLS_GD_PREFIX): New.
	(TLS_GD): Use it.

2012-05-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/bits/fenv.h (__fenv_stfsr): Add __volatile__.
	* sysdeps/sparc/fpu/fpu_control.h (_FPU_GETCW):	Likewise.
	(_FPU_SETCW): Likewise.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.S: Check if RTLD_SAVESPACE_SSE
	is 32-byte aligned.

2012-05-11  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #11837]
	* iconvdata/gb18030.c: Update tables.
	(BODY for FROM_LOOP): Update.  Handle two-byte encoded non-BMP
	characters specially.
	(BODY for TO_LOOP): Add encoding of missing ranges.

2012-05-11  Thomas Schwinge  <thomas@codesourcery.com>

	[BZ #13673]
	* sysdeps/mach/hurd/accept4.c: Replace FSF snail mail address with URL.
	* sysdeps/mach/hurd/dup3.c: Likewise.
	* sysdeps/mach/hurd/readlinkat.c: Likewise.
	* sysdeps/powerpc/memmove.c:: Likewise.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_rela_relative): Handle
	R_X86_64_RELATIVE64 only if RTLD_BOOTSTRAP isn't defined.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/elf.h (R_X86_64_RELATIVE64): New.
	(R_X86_64_NUM): Updated.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Handle
	R_X86_64_RELATIVE64.  Always use Elf64_Addr with R_X86_64_64.
	(elf_machine_rela_relative): Handle R_X86_64_RELATIVE64.
	* sysdeps/x86_64/Makefile (tests): Add tst-quad1 tst-quad2
	tst-quad1pie tst-quad2pie
	(modules-names): Add tst-quadmod1 tst-quadmod2.
	($(objpfx)tst-quad1): New dependency.
	($(objpfx)tst-quad2): Likewise.
	($(objpfx)tst-quad1pie): Likewise.
	($(objpfx)tst-quad2pie): Likewise.
	* sysdeps/x86_64/tst-quad1.c: New file.
	* sysdeps/x86_64/tst-quad1pie.c: New file.
	* sysdeps/x86_64/tst-quad2.c: Likewise.
	* sysdeps/x86_64/tst-quad2pie.c: Likewise.
	* sysdeps/x86_64/tst-quadmod1.S: Likewise.
	* sysdeps/x86_64/tst-quadmod1pie.S: Likewise.
	* sysdeps/x86_64/tst-quadmod2.S: Likewise.
	* sysdeps/x86_64/tst-quadmod2pie.S: Likewise.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* io/fcntl.h (mode_t, off_t, pid_t): Define types.
	(__mode_t_defined, __off_t_defined, __pid_t_defined): Define macros.
	* streams/stropts.h (t_scalar_t): Define type.

	* sysdeps/generic/paths.h (_PATH_MAN): Set to "/usr/share/man"
	(_PATH_PRESERVE): Set to "/var/lib".
	(_PATH_RWHODIR): Set to "/var/spool/rwho".

	* sysdeps/mach/hurd/openat.c (__openat): Set type of MODE to mode_t
	instead of int.

	* sysdeps/mach/hurd/xmknodat.c (__xmknodat): Deallocate NODE port only
	if __dir_mkfile succeeded.

	* sysdeps/mach/hurd/dup3.c: Lock _hurd_dtable_lock before
	checking for _hurd_dtablesize.  Unlock it right after having
	finished _hurd_dtable allocation.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/configure.in: Remove warning for --prefix=[...].
	* sysdeps/mach/hurd/configure: Regenerated.
	* sysdeps/unix/sysv/linux/configure.in: Move --prefix=/usr
	special-casing to...
	* sysdeps/gnu/configure.in: ... this new file.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* sysdeps/gnu/configure: New generated file.

	* sysdeps/mach/hurd/bits/stat.h (struct stat): Align to what is done
	for Linux: use nsec instead of usec, as well as:
	[__USE_MISC || __USE_XOPEN2K8] (st_atim, st_mtim, st_ctim): New
	members of type struct timespec.
	[__USE_MISC || __USE_XOPEN2K8] (st_atime, st_mtime, st_ctime):
	New macros.
	(struct stat64): Likewise.
	(_STATBUF_ST_NSEC): New macro.
	* sysdeps/mach/hurd/xstatconv.c (xstat64_conv): Adapt to that.

	* hurd/lookup-retry.c (__hurd_file_name_lookup_retry): Use
	__strtoul_internal rather than strtoul.

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* hurd/hurdsock.c (_hurd_socket_server): Check for negative domains,
	and reject them.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/setresgid.c (__setresgid): Handle the -1 case,
	which preserves existing values.
	* sysdeps/mach/hurd/setresuid.c (__setresuid): Likewise.

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* hurd/hurdselect.c (_hurd_select): Return EINVAL for negative
	TIMEOUT values.  Return EINVAL for NFDS values either negative or
	greater than FD_SETSIZE.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/brk.c (_hurd_set_brk): When more space needs to be
	allocated, call __vm_protect to finish enabling the existing space, and
	pass a copy of _hurd_data_end instead of PAGEBRK to __vm_allocate to
	allocate the remainder.

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/recvfrom.c (__recvfrom): Check also for a null
	address port.  Set ADDR_LEN to 0 when not filling ADDRARG.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/readlinkat.c: New file, heavily derived from
	sysdeps/mach/hurd/readlink.c.

	* posix/tst-sysconf.c (posix_options): Only use
	_POSIX_PRIORITIZED_IO, _POSIX_PRIORITY_SCHEDULING, and
	_POSIX_SYNCHRONIZED_IO when they are defined
	* sysdeps/mach/hurd/bits/posix_opt.h:
	(_POSIX_PRIORITY_SCHEDULING): Undefine macro.
	(_XOPEN_REALTIME): Undefine macro.
	(_XOPEN_REALTIME_THREADS): Undefine macro.
	(_XOPEN_SHM): Undefine macro.
	[__USE_XOPEN2K8] (_POSIX_THREAD_ROBUST_PRIO_INHERIT): Define
	macro to -1.
	[__USE_XOPEN2K8] (_POSIX_THREAD_ROBUST_PRIO_PROTECT): Define
	macro to -1.
	(_POSIX_ASYNC_IO): Undefine macro.
	(_POSIX_PRIORITIZED_IO): Undefine macro.
	(_POSIX_SPIN_LOCKS): Define macro to -1.

	* bits/sigaction.h [__USE_XOPEN2K8]: Define SA_RESTART,
	SA_NODEFER, SA_RESETHAND.
	* sysdeps/mach/hurd/bits/fcntl.h [__USE_XOPEN2K8]: Define
	O_NOFOLLOW, O_DIRECTORY, O_CLOEXEC, F_GETOWN, F_SETOWN,
	F_DUPFD_CLOEXEC.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* elf/Makefile (pldd-modules): Define unconditionally.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/opendir.c (__opendirat): New function.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurdchdir.c (_hurd_change_directory_port_from_name):
	Return ENOENT when name is empty.
	* sysdeps/mach/hurd/chroot.c (chroot): Likewise.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* include/libc-symbols.h [NO_HIDDEN] (hidden_nolink): New macro.

	* nss/makedb.c (MAP_POPULATE): If not defined, define to zero.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix mlock in all cases except non-readable pages.
	* sysdeps/mach/hurd/mlock.c (mlock): Give VM_PROT_READ
	instead of VM_PROT_ALL as parameter to __vm_wire function.

	* sysdeps/mach/hurd/mkdir.c: Include <string.h>.
	(__mkdir): When path is `/', just fail with EEXIST.
	* sysdeps/mach/hurd/mkdirat.c: Likewise.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* nss/makedb.c: Include <sys/param.h> (for MAX and roundup), and
	<sys/uio.h> (for writev).
	* nss/nss_db/db-initgroups.c: Include <limits.h> (for ULONG_MAX),
	and <sys/param.h> (for MIN).

2012-05-10  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/nanosleep.c: Return EINVAL for invalid values of
	REQUESTED_TIME.  Properly set the remaining time and return EINTR
	if interrupted.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/Makefile ($(common-objpfx)linkobj/libc.so):
	Depend on against $(link-rpcuserlibs).

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/generic/ldsodefs.h [LIBC_STACK_END_NOT_RELRO]
	(__libc_stack_end): Do not use attribute_relro.
	* sysdeps/mach/hurd/dl-sysdep.h (LIBC_STACK_END_NOT_RELRO): Define.
	* sysdeps/mach/hurd/i386/init-first.c (init): Update __libc_stack_end
	to libthread-provided value.
	* sysdeps/mach/hurd/dl-sysdep.c (__libc_stack_end): Do not use
	attribute_relro.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	[BZ #3748]
	* bits/libc-lock.h (__libc_once_get): New macro.
	* sysdeps/mach/bits/libc-lock.h: Likewise.
	* sysdeps/mach/hurd/bits/libc-lock.h: Likewise.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Use __libc_once_get
	instead of using implementation details.

	* libio/fileops.c: Unconditionally include <kernel-features.h>.
	* libio/freopen.c: Likewise.
	* libio/freopen64.c: Likewise.
	* misc/syslog.c: Likewise.
	* nscd/connections.c: Likewise.
	* nscd/netgroupcache.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.

2012-05-10  Roland McGrath  <roland@hack.frob.com>

	* math/w_ilogbf.c: Add #include <limits.h>.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/setitimer.c (setitimer_locked): Use common exit
	path instead of returning without unlocking.

	* sysdeps/mach/hurd/bits/ioctls.h (_IOIW): New macro for
	immediate-write ioctls.
	* sysdeps/mach/hurd/ioctl.c: Handle cases with no arguments.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/i386/init-first.c (init): Use
	__builtin_frame_address instead of making assumptions about the
	location of the return address relative to DATA.  Force early load of
	the return address.
	(_dl_init_first, doinit1 in doinit in _hurd_stack_setup): Don't use
	__builtin_frame_address.

	dup3 for GNU Hurd.
	* include/unistd.h: Declare __dup3 and use libc_hidden_proto on it.
	* sysdeps/mach/hurd/dup3.c: New file, copy from dup2.c.  Evolve it to
	implement dup3 and do some further code clean-ups.
	* sysdeps/mach/hurd/dup2.c (__dup2): Reimplement using __dup3.
	* sysdeps/mach/hurd/kernel-features.h (__ASSUME_DUP3): Define.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/dl-sysdep.c: Conditionalize contents on [SHARED].

	* hurd/hurd/fd.h (_hurd_fd_get): Call HURD_CRITICAL_BEGIN/
	HURD_CRITICAL_END around holding _hurd_dtable_lock.
	* sysdeps/mach/hurd/dirfd (dirfd): Likewise.
	* sysdeps/mach/hurd/opendir.c (_hurd_fd_opendir): Call
	HURD_CRITICAL_BEGIN/HURD_CRITICAL_END around holding
	d->port.lock.

	* hurd/catch-signal.c (hurd_catch_signal): Use sigsetjmp/siglongjmp
	instead of setjmp/longjmp to restore the signal mask.  Call sigsetjmp
	when handler == SIG_ERR, not when handler != SIG_ERR.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/bits/socket.h: New file, copy from the bsd4.4 one.
	(SOCK_MAX, SOCK_TYPE_MASK, SOCK_CLOEXEC, SOCK_NONBLOCK): New
	definitions.

	accept4 for GNU Hurd.
	* include/sys/socket.h (__libc_accept4): New prototype.
	* sysdeps/mach/hurd/accept4.c: New file, copy from accept.c.  Evolve it
	to implement __libc_accept4.
	* sysdeps/mach/hurd/accept.c (accept): Reimplement using
	__libc_accept4.
	* sysdeps/mach/hurd/kernel-features.h (__ASSUME_ACCEPT4): Define.

	* sysdeps/mach/hurd/i386/____longjmp_chk.S: New file.
	* sysdeps/mach/hurd/i386/signal-defines.sym: New file.
	* sysdeps/mach/hurd/i386/Makefile (gen-as-const-headers): Add
	signal-defines.sym.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/in.h (SOL_IP, SOL_IPV6, SOL_ICMPV6): New macros.

2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	* sysdeps/mach/hurd/dl-sysdep.c (open_file): Do not raise
	assertion on O_CLOEXEC flag.
	* hurd/hurd/fd.h: Update comment to mention O_CLOEXEC.
	* hurd/intern-fd.c: Likewise.
	* hurd/port2fd.c: Likewise.

2012-05-10  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	[BZ #3906]
	* bits/in.h (IPV6_PKTINFO): Define new macro.
	(IPV6_RXINFO,IPV6_TXINFO,SCM_SRCINFO): Redefine to IPV6_PKTINFO.

2012-05-09  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13954]
	[BZ #13955]
	[BZ #13956]
	* sysdeps/ieee754/dbl-64/s_logb.c (__logb): Fix for subnormal number.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c (__logb): Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c (__logf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c (__logbl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c (__logbl): Likewise.
	* math/libm-test.inc (logb_test) : Additional logb tests.

2012-05-09  Andreas Schwab  <schwab@linux-m68k.org>
	    Andreas Jaeger  <aj@suse.de>

	* configure.in (obsolete-rpc): Add new option --enable-obsolete-rpc.
	* configure: Regenerated.
	* config.h.in (LINK_OBSOLETE_RPC): New macro.
	* config.make.in (link-obsolete-rpc): New substituted variable.
	* include/libc-symbols.h (libc_hidden_nolink_sunrpc): Rename from
	libc_hidden_nolink and define based on LINK_OBSOLETE_RPC.
	* sunrpc/Makefile (headers) [link-obsolete-rpc]: Add rpc headers.
	(shared-only-routines): Don't set it under [link-obsolete-rpc],
	so that libc.a contains the symbols.
	* nis/Makefile (headers) [link-obsolete-rpc]: Add rpc headers.
	* sunrpc/auth_des.c: Use libc_hidden_nolink_sunrpc.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/des_crypt.c: Likewise.
	* sunrpc/des_soft.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/key_prot.c: Likewise.
	* sunrpc/netname.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_prot.c: Likewise.
	* sunrpc/pmap_prot2.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/publickey.c: Likewise.
	* sunrpc/rpc_cmsg.c: Likewise.
	* sunrpc/rpc_common.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rpc_prot.c: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc.c: Likewise.
	* sunrpc/svc_auth.c: Likewise.
	* sunrpc/svc_raw.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xcrypt.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_float.c: Likewise.
	* sunrpc/xdr_intXX_t.c: Likewise.
	* sunrpc/xdr_mem.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

2012-05-10  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Fix typo in last
	change.  Update copyright years.

2012-05-10  Joseph Myers  <joseph@codesourcery.com>

	* include/stdc-predef.h (__STDC_NO_THREADS__): Define.

2012-05-10  Maxim Kuvyrkov  <maxim@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14012]
	* sunrpc/Makefile [cross-compiling] (headers): Enable additions
	requiring rpcgen.
	[cross-compiling] (extra-libs): Likewise.
	[cross-compiling] (extra-libs-others): Likewise.
	[cross-compiling] (librpcsvc-routines): Likewise.
	[cross-compiling] (librpcsvc-inhibit-o): Likewise.
	[cross-compiling] (omit-deps): Likewise.
	(sunrpc-CPPFLAGS): New variable.
	(CPPFLAGS): Define using $(sunrpc-CPPFLAGS).
	(BUILD_CPPFLAGS): Append $(sunrpc-CPPFLAGS).
	(cross-rpcgen-objs): New variable.
	(extra-objs): Append $(cross-rpcgen-objs).
	($(cross-rpcgen-objs)): New rule.
	($(objpfx)cross-rpcgen): Likewise.
	(rpcgen-cmd): Define to use $(built-program-file).  Expand
	comment.
	($(objpfx)rpcsvc/%.stmp): Depend on cross-rpcgen.
	($(objpfx)x%.stmp): Likewise.
	* sunrpc/proto.h [IS_IN_build] (_): Define.
	[IS_IN_build] (_libc_intl_domainname): Likewise.

2012-05-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h (elf_machine_rela) [__ILP32__]:
	Sign extend relocation result to 64 bits for R_X86_64_DTPOFF64
	and R_X86_64_TPOFF64.

2012-05-10  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/syscalls.list (alarm): Add entry from
	sysdeps/unix/sysv/syscalls.list.
	(stime): Likewise.
	(utime): Likewise.
	* sysdeps/unix/sysv/syscalls.list: Remove file.

2012-05-10  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #3440]
	* locale/bits/locale.h (__LC_CTYPE, __LC_NUMERIC, __LC_TIME)
	(__LC_COLLATE, __LC_MONETARY, __LC_MESSAGES, __LC_ALL, __LC_PAPER)
	(__LC_NAME, __LC_ADDRESS, __LC_TELEPHONE, __LC_MEASUREMENT)
	(__LC_IDENTIFICATION): Make these macros useful in #if
	expressions, as required by C99.

2012-05-10  Andreas Schwab  <schwab@linux-m68k.org>

	* sunrpc/Makefile (extra-objs) [$(build-shared) = yes]: Add
	$(addsuffix .os,$(rpc-compat-routines)).  Move include ../Rules
	after this.

2012-05-09  H.J. Lu  <hongjiu.lu@intel.com>

	* stdlib/longlong.h: Updated from GCC.

2012-05-09  Andreas Jaeger  <aj@suse.de>

	* nscd/nscd.c (run_modes): Make named enum, reorder so that
	default is first entry.
	(run_mode): Set type.
	(main): Remove informal message about syslog.
	(options): Fix typo.

	[BZ #14053]
	* sysdeps/x86_64/fpu/bits/mathinline.h (lrintf): Add __volatile
	to asm.
	(lrint): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.
	(rint): Likewise.
	(rintf): Likewise.
	(nearbyint): Likewise.
	(nearbyintf): Likewise.

2012-05-09  Andreas Jaeger  <aj@suse.de>
	    Pedro Alves  <palves@redhat.com>

	* nscd/nscd.c (run_mode): Use enum.
	(main): Cleanup coding style issue.

2012-05-09  Alexandre Oliva  <aoliva@redhat.com>
	    Andreas Jaeger  <aj@suse.de>

	* nscd/nscd.c (go_background): Replaced with...
	(run_mode): ... this.
	(RUN_FOREGROUND, RUN_DAEMONIZE, RUN_DEBUG): Add.
	(options): Add -F --foreground.
	(main): Implement it.
	(parse_opt): Parse it.

2012-05-09  Andreas Jaeger  <aj@suse.de>

	[BZ #14083]
	* string/bits/string2.h (strspn) [__GNUC_PREREQ(3, 2) &&
	!_HAVE_STRING_ARCH_strspn]: Cast zero to size_t to avoid
	-Wconversion warning.
	(strspn) [!__GNUC_PREREQ(3, 2) && !_HAVE_STRING_ARCH_strspn]:
	Likewise.

2012-05-09  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/locale.h-data (NULL): Use macro-constant.  Require
	== 0.
	(LC_ALL): Use macro-int-constant.
	(LC_COLLATE): Likewise.
	(LC_CTYPE): Likewise.
	(LC_MESSAGES): Likewise.
	(LC_MONETARY): Likewise.
	(LC_NUMERIC): Likewise.
	(LC_TIME): Likewise.
	[ISO || ISO99 || ISO11] (LC_MESSAGES): Do not require.
	(LC_*): Change to LC_[ABCDEFGHIJKLMNOPQRSTUVWXYZ]*.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	* conform/data/math.h-data (HUGE_VAL): Use macro-constant.
	Specify type.
	[C99-based standards] (float_t): Expect type.
	[C99-based standards] (double_t): Expect type.
	[C99-based standards] (HUGE_VALF): Use macro-constant.  Specify
	type.
	[C99-based standards] (HUGE_VALL): Likewise.
	[C99-based standards] (INFINITY): Likewise.
	[C99-based standards] (NAN): Likewise.
	[C99-based standards] (FP_INFINITE): Use macro-int-constant.
	[C99-based standards] (FP_NAN): Likewise.
	[C99-based standards] (FP_NORMAL): Likewise.
	[C99-based standards] (FP_SUBNORMAL): Likewise.
	[C99-based standards] (FP_ZERO): Likewise.
	[C99-based standards] (FP_FAST_FMA): Use
	optional-macro-int-constant.  Specify type.  Require == 1.
	[C99-based standards] (FP_FAST_FMAF): Likewise.
	[C99-based standards] (FP_FAST_FMAL): Likewise.
	[C99-based standards] (FP_ILOGB0): Use macro-int-constant.
	[C99-based standards] (FP_ILOGBNAN): Likewise.
	[C99-based standards] (MATH_ERRNO): Use macro-int-constant.
	Specify type.
	[C99-based standards] (MATH_ERREXCEPT): Likewise.
	[C99-based standards] (math_errhandling): Specify type.
	[ISO99 || ISO11] (signgam): Do not allow.
	[non-C99-based standards] (copysignf): Do not allow.
	[non-C99-based standards] (exp2f): Likewise.
	[non-C99-based standards] (log2f): Likewise.
	[non-C99-based standards] (modff): Allow.
	[non-C99-based standards] (erff): Do not allow.
	[non-C99-based standards] (erfcf): Likewise.
	[non-C99-based standards] (gammaf): Likewise.
	[non-C99-based standards] (hypotf): Likewise.
	[non-C99-based standards] (j0f): Likewise.
	[non-C99-based standards] (j1f): Likewise.
	[non-C99-based standards] (jnf): Likewise.
	[non-C99-based standards] (lgammaf): Likewise.
	[non-C99-based standards] (tgammaf): Likewise.
	[non-C99-based standards] (y0f): Likewise.
	[non-C99-based standards] (y1f): Likewise.
	[non-C99-based standards] (ynf): Likewise.
	[non-C99-based standards] (isnanf): Likewise.
	[non-C99-based standards] (acoshf): Likewise.
	[non-C99-based standards] (asinhf): Likewise.
	[non-C99-based standards] (atanhf): Likewise.
	[non-C99-based standards] (cbrtf): Likewise.
	[non-C99-based standards] (expm1f): Likewise.
	[non-C99-based standards] (ilogbf): Likewise.
	[non-C99-based standards] (log1pf): Likewise.
	[non-C99-based standards] (logbf): Likewise.
	[non-C99-based standards] (nextafterf): Likewise.
	[non-C99-based standards] (remainderf): Likewise.
	[non-C99-based standards] (rintf): Likewise.
	[non-C99-based standards] (scalbf): Likewise.
	[non-C99-based standards] (copysignl): Likewise.
	[non-C99-based standards] (exp2l): Likewise.
	[non-C99-based standards] (log2l): Likewise.
	[non-C99-based standards] (modfl): Allow.
	[non-C99-based standards] (erfl): Do not allow.
	[non-C99-based standards] (erfcl): Likewise.
	[non-C99-based standards] (gammal): Likewise.
	[non-C99-based standards] (hypotl): Likewise.
	[non-C99-based standards] (j0l): Likewise.
	[non-C99-based standards] (j1l): Likewise.
	[non-C99-based standards] (jnl): Likewise.
	[non-C99-based standards] (lgammal): Likewise.
	[non-C99-based standards] (tgammal): Likewise.
	[non-C99-based standards] (y0l): Likewise.
	[non-C99-based standards] (y1l): Likewise.
	[non-C99-based standards] (ynl): Likewise.
	[non-C99-based standards] (isnanl): Likewise.
	[non-C99-based standards] (acoshl): Likewise.
	[non-C99-based standards] (asinhl): Likewise.
	[non-C99-based standards] (atanhl): Likewise.
	[non-C99-based standards] (cbrtl): Likewise.
	[non-C99-based standards] (expm1l): Likewise.
	[non-C99-based standards] (ilogbl): Likewise.
	[non-C99-based standards] (log1pl): Likewise.
	[non-C99-based standards] (logbl): Likewise.
	[non-C99-based standards] (nextafterl): Likewise.
	[non-C99-based standards] (remainderl): Likewise.
	[non-C99-based standards] (rintl): Likewise.
	[non-C99-based standards] (scalbl): Likewise.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	[non-C99-based standards] (FP_*): Do not allow.
	[C99-based standards] (FP_*): Change to
	FP_[ABCDEFGHIJKLMNOPQRSTUVWXYZ]*.
	* conform/data/setjmp.h-data [ISO || ISO99 || ISO11] (*_t): Do not
	allow.
	* conform/data/signal.h-data (SIG_DFL): Use macro-constant.
	(SIG_ERR): Likewise.
	[X/Open-based standards] (SIG_HOLD): Likewise.
	(SIG_IGN): Likewise.
	(SIGABRT): Use macro-int-constant.  Specify type.  Require
	positive value.
	(SIGFPE): Likewise.
	(SIGILL): Likewise.
	(SIGINT): Likewise.
	(SIGSEGV): Likewise.
	(SIGTER): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGALRM): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGHUP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGIO): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGKILL): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGPIPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGQUIT): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGUSR1): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGUSR2): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGCHLD): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGCONT): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGSTOP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGTSTP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGTTIN): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGTTOU): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGBUS): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGPOLL): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGPROF): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGSYS): Likewise.
	[X/Open-based standards] (SIGTRAP): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGURG): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGVTALRM): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGXCPU): Likewise.
	[!ISO && !ISO99 && !ISO11] (SIGXFSZ): Likewise.
	* conform/data/stdarg.h-data [ISO || ISO99 || ISO11] (*_t): Do not
	allow.

2012-05-08  Ian Wienand  <ianw@vmware.com>

	[BZ #14080]
	* time/tzset.c (__tzset_parse_tz): Update default rules for
	daylight time changes in the Energy Policy Act of 2005.

2012-05-09  Andreas Jaeger  <aj@suse.de>

	[BZ #13983]
	* elf/ldconfig.c (parse_conf): Change string to make clear that
	ldconfig only issued a warning if ld.so.conf does not exist.

2012-05-08  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis3.S: Use
	movxtod instead of popping the value on the stack.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-05-08  Carlos O'Donell  <carlos_odonell@mentor.com>

	* config.h.in: Add HAVE_ARM_PCS_VFP.

2012-05-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #13979]
	* include/features.h: Warn if user requests __FORTIFY_SOURCE
	checking but the checks are disabled for any reason.

2012-05-08  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-machine.h: Replace Elf64_XXX with ElfW(XXX)
	and ELF64_R_TYPE with ELFW(R_TYPE).

2012-05-08  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/syscalls.list (pause): Remove.
	(ulimit): Likewise.

	* sysdeps/unix/sysv/syscalls.list (setrlimit): Remove.
	(settimeofday): Likewise.

2012-05-08  Mike Frysinger  <vapier@gentoo.org>

	* inet/arpa/tftp.h (struct tftphdr): Rename th_u to th_u1.  Add
	a struct th_u2 inside the union, and move tu_block/tu_code into
	a new th_u3 union of tu_block/tu_code inside of that.  Move
	th_data[1] into the th_u2 as tu_data[0].  Change tu_stuff[1] to
	tu_stuff[0].  Add a new tu_padding[4] to keep sizeof() the same.
	(th_block): Change to th_u1.th_u2.th_u3.tu_block.
	(th_code): Change to th_u1.th_u2.th_u3.tu_code.
	(th_stuff): Change to th_u1.tu_stuff.
	(th_data): Define.
	(th_msg): Change to th_u1.th_u2.tu_data.

2012-05-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	[BZ #14074]
	* sysdeps/sparc/sysdep.h (SPARC_PIC_THUNK_CALL): New macro.
	(SETUP_PIC_REG): Use it.
	(SETUP_PIC_REG_LEAF): Use it.

2012-05-07  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13885]
	[BZ #13923]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXPM1L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Support use as expm1l.
	* sysdeps/i386/fpu/s_expm1l.S: Define USE_AS_EXPM1L and include
	e_expl.S.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXPM1L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(IEEE754_EXPL) [USE_AS_EXPM1L]: Support use as expm1l.
	* sysdeps/x86_64/fpu/s_expm1l.S: Define USE_AS_EXPM1L and include
	e_expl.S.
	* math/libm-test.inc (expm1_test): Add more tests.  Do not disable
	test of -max_value argument for long double.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-05-06  David S. Miller  <davem@davemloft.net>

	* scripts/data/localplt-sparc-linux-gnu.data: Add '?' markers to
	quad soft-float symbols whose references which are compiler
	generated.
	* scripts/data/localplt-sparc64-linux-gnu.data: Likewise.

2012-05-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13884]
	[BZ #13914]
	* sysdeps/i386/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXP10L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(c0): Likewise.
	(c1): Likewise.
	(__ieee754_expl): Change to IEEE754_EXPL.  Use FLDLOG macro.
	Adjust comments for base varying.
	(__expl_finite): Change alias to EXPL_FINITE.
	* sysdeps/i386/fpu/e_exp10l.S: Define USE_AS_EXP10L and include
	e_expl.S.
	* sysdeps/ieee754/dbl-64/e_exp10.c: New file.
	* sysdeps/ieee754/ldbl-128/e_exp10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_exp10l.c: Likewise.
	* sysdeps/x86_64/fpu/e_exp10l.S: Likewise.
	* sysdeps/x86_64/fpu/e_expl.S (IEEE754_EXPL): Define conditional on
	USE_AS_EXP10L.
	(EXPL_FINITE): Likewise.
	(FLDLOG): Likewise.
	(c0): Likewise.
	(c1): Likewise.
	(__ieee754_expl): Change to IEEE754_EXPL.  Use FLDLOG macro.
	Adjust comments for base varying.
	(__expl_finite): Change alias to EXPL_FINITE.
	* math/libm-test.inc (exp10_test): Add more tests.  Do not disable
	tests for bugs.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	[BZ #14064]
	* math/libm-test.inc (check_float_internal): Correct ulp
	calculation for subnormal expected results.

2012-05-06  Andreas Jaeger  <aj@suse.de>

	* Makeconfig (+math-flags): New, set to -frounding-math.
	(+cflags): Add +math-flags so that all of glibc gets compiled with
	it.

	* sysdeps/x86_64/fpu/libm-test-ulps: Updated.

2012-05-05  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (hypot_test) [TEST_DOUBLE && TEST_INLINE]:
	Disable one test.

	[BZ #13787]
	[BZ #13922]
	[BZ #14036]
	* sysdeps/i386/fpu/e_expl.S (csat): New constant.
	(__ieee754_expl): Allow for and saturate large arguments.
	* sysdeps/ieee754/dbl-64/w_exp.c (o_threshold): Remove variable.
	(u_threshold): Likewise.
	(__exp): Call __ieee754_exp before checking for overflow and
	underflow.
	* sysdeps/ieee754/flt-32/w_expf.c (o_threshold): Remove variable.
	(u_threshold): Likewise.
	(__expf): Call __ieee754_expf before checking for overflow and
	underflow.
	* sysdeps/ieee754/ldbl-96/w_expl.c (o_threshold): Remove variable.
	(u_threshold): Likewise.
	(__expl): Call __ieee754_expl before checking for overflow and
	underflow.
	* sysdeps/x86_64/fpu/e_expl.S (csat): New constant.
	(__ieee754_expl): Allow for and saturate large arguments.
	* math/libm-test.inc (exp_test): Add another test.  Do not allow
	missing overflow exception on overflow.
	(expm1_test): Do not allow missing overflow exception on overflow.

	* sysdeps/i386/fpu/e_expl.c: Move to ...
	* sysdeps/i386/fpu/e_expl.S: ... here.  Write directly in assembly
	rather than using inline asm.
	* sysdeps/x86_64/fpu/e_expl.c: Remove file.
	* sysdeps/x86_64/fpu/e_expl.S: Copy from
	sysdeps/i386/fpu/e_expl.S, adjusted for x86_64.

	* sysdeps/unix/sysv/syscalls.list (ftime): Remove.
	(nice): Likewise.
	(poll): Likewise.
	(signal): Likewise.
	(time): Likewise.
	(times): Likewise.

2012-05-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/syscalls.list (adjtime): Add entry from
	sysdeps/unix/common/syscalls.list.
	(fchmod): Likewise.
	(fchown): Likewise.
	(ftruncate): Likewise.
	(getrusage): Likewise.
	(gettimeofday): Likewise.
	(setpgid): Likewise.
	(setregid): Likewise.
	(setreuid): Likewise.
	(sigaction): Likewise.
	(truncate): Likewise.
	(vhangup): Likewise.
	* sysdeps/unix/common/syscalls.list: Remove file.
	* sysdeps/unix/bsd/Implies: Don't include unix/common.
	* sysdeps/unix/sysv/linux/Implies: Likewise.

2012-05-04  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/nptl/ld.abilist: Moved to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/ld.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libBrokenLocale.abilist:
	Moved to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libBrokenLocale.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libanl.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libanl.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libc.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libc.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libcrypt.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libcrypt.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libdl.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libdl.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libm.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libm.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libnsl.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libnsl.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libpthread.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libpthread.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libresolv.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libresolv.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/librt.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/librt.abilist: Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libthread_db.abilist:
	Moved to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libthread_db.abilist:
	Here.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libutil.abilist: Moved
	to ...
	* sysdeps/unix/sysv/linux/x86_64/64/nptl/libutil.abilist: Here.

2012-05-04  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/common/bits/dirent.h: Remove file.
	* sysdeps/unix/common/bits/fcntl.h: Likewise.

	* sysdeps/unix/bsd/bits/dirent.h: Remove file.
	* sysdeps/unix/bsd/bits/fcntl.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/isatty.c: Likewise.
	* sysdeps/unix/bsd/isatty.c: Likewise.
	* sysdeps/unix/bsd/tcdrain.c: Likewise.
	* sysdeps/unix/bsd/tcgetattr.c: Likewise.
	* sysdeps/unix/bsd/tcsetattr.c: Likewise.

2012-05-04  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13563]
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c (__ieee754_acosl): Fix
	long double comparison inaccuracies.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c (__ieee754_asinl): Likewise.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-05-04  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/make-syscalls.sh: Fix check for version aliases.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Revert last change.

2012-05-04  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14049]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Check for trailing
	nonzero digits before rounding a hex value.
	* stdlib/tst-strtod.c (tests): Add another test.

2012-05-03  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/fpu/libm-test-ulps: Update.

2012-05-03  Andreas Jaeger  <aj@suse.de>

	* malloc/mcheck.c (mcheck): Add barrier so that malloc/free pair
	does not get optimized out.
	(malloc_opt_barrier): New.

2012-05-03  Andreas Jaeger  <aj@suse.de>
	    Roland McGrath  <roland@hack.frob.com>

	* Makerules (.PRECIOUS): Add %.symlist pattern to prevent
	intermediate file deletion.
	(generated): Add .symlist files.

2012-05-03  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13775]
	* libio/bits/stdio-ldbl.h [__USE_XOPEN2K8] (__dprintf_chk):
	Redirect under this condition.
	[__USE_XOPEN2K8] (__vdprintf_chk): Likewise.
	[__USE_GNU] (__dprintf_chk): Not under this condition.
	[__USE_GNU] (__vdprintf_chk): Likewise.
	* libio/bits/stdio2.h [__USE_XOPEN2K8] (__dprintf_chk): Declare
	under this condition.
	[__USE_XOPEN2K8] (__vdprintf_chk): Likewise.
	[__USE_XOPEN2K8] (dprintf): Define under this condition.
	[__USE_XOPEN2K8] (vdprintf): Likewise.
	[__USE_GNU] (__dprintf_chk): Not under this condition.
	[__USE_GNU] (__vdprintf_chk): Likewise.
	[__USE_GNU] (dprintf): Likewise.
	[__USE_GNU] (vdprintf): Likewise.

2012-05-03  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile (common-generated): Set this instead of generated for
	.dyn, .phdr, .jmprel files.  Remove $(common-objpfx) from the
	$(all-built-dso)-derived lists.

2012-05-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

	* FAQ: Removed.
	* FAQ.in: Likewise.
	* scripts/gen-FAQ.pl: Likewise.
	* manual/install.texi (Installation): Point to online location of
	FAQ.
	* Makefile (files-for-dist): Remove FAQ.
	(FAQ): Remove.

2012-05-02  Allan McRae  <allan@archlinux.org>

	* elf/Makefile: (LDFLAGS-nodel2mod3.so: Use $(no-as-needed).
	(LDFLAGS-reldepmod5.so): Likewise.
	(LDFLAGS-reldep6mod1.so): Likewise.
	(LDFLAGS-reldep6mod4.so): Likewise.
	(LDFLAGS-reldep8mod3.so): Likewise.
	(LDFLAGS-unload4mod1.so): Likewise.
	(LDFLAGS-unload4mod2.so): Likewise.
	(LDFLAGS-tst-initorder): Likewise.
	(LDFLAGS-tst-initordera2.so): Likewise.
	(LDFLAGS-tst-initordera3.so): Likewise.
	(LDFLAGS-tst-initordera4.so): Likewise.
	(LDFLAGS-tst-initorderb2.so): Likewise.
	(LDFLAGS-noload): Likewise.
	(LDFLAGS-next): Likewise.
	(LDFLAGS-order2mod1.so): Likewise.
	(LDFLAGS-order2mod2.so): Likewise.
	(LDFLAGS-tst-initorder2): Likewise.
	(LDFLAGS-tst-initorder2a.so): Likewise.
	(LDFLAGS-tst-initorder2b.so): Likewise.
	(LDFLAGS-tst-initorder2c.so): Likewise.
	* stdlib/Makefile: (LDFLAGS-tst-putenv): Likewise.

2012-05-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-05-02  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #14055]
	* elf/dl-sysdep.c (_dl_show_auxv): Add bounds check.

2012-05-02  Andreas Jaeger  <aj@suse.de>

	* math/Makefile (CPPFLAGS-test-ildoubl.c): Add -frounding-math
	since we manipulate rounding mode.
	(CPPFLAGS-test-idouble.c): Likewise.
	(CPPFLAGS-test-ifloat.c): Likewise.
	(CFLAGS-test-ldouble.c): Likewise.
	(CFLAGS-test-double.c): Likewise.
	(CFLAGS-test-float.c): Likewise.
	(CFLAGS-test-misc.c): Likewise.
	(CFLAGS-test-test-fenv.c): Likewise.

2012-05-02  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #2550]
	[BZ #2570]
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Use floating-point
	comparisons to determine direction to adjust input.

2012-05-01  Roland McGrath  <roland@hack.frob.com>

	* elf/Makefile ($(objpfx)check-localplt.out): Redirect the test's
	output to the target.

	* scripts/localplt.awk: New file.
	* elf/Makefile ($(objpfx)check-localplt): Target removed.
	(check-localplt-CFLAGS): Variable removed.
	($(all-built-dso:=.jmprel)): New static pattern rule.
	(generated): Add those targets.
	(localplt-built-dso): New variable.
	($(objpfx)check-localplt.out): Use the script on the .jmprel files.

	* elf/check-localplt.c: File removed.

	* scripts/check-execstack.awk: New file.
	* elf/Makefile ($(objpfx)check-execstack): Target removed.
	(check-execstack-CFLAGS): Variable removed.
	($(objpfx)check-execstack.h): Target removed.
	($(objpfx)execstack-default): New target.
	(generated): Add that instead of check-execstack.h.
	($(all-built-dso:=.phdr)): New static pattern rule.
	(generated): Add those targets.
	* elf/check-execstack.c: File removed.

	* scripts/check-textrel.awk: New file.
	* elf/Makefile ($(objpfx)check-textrel): Target removed.
	(check-textrel-CFLAGS): Variable removed.
	(all-built-dso): Use := to define.o
	($(all-built-dso:=.dyn)): New static pattern rule.
	(generated): Add those targets.
	($(objpfx)check-textrel.out): Use the script on the .dyn files.
	* config.make.in (READELF): New substituted variable.
	* elf/check-textrel.c: File removed.

2012-05-01  Joseph Myers  <joseph@codesourcery.com>

	* conform/data/assert.h-data [ISO || ISO99 || ISO11] (*_t): Do not
	allow.
	* conform/data/ctype.h-data [C99-based standards] (isblank):
	Expect function.
	(is*): Change to is[abcdefghijklmnopqrstuvwxyz]*.
	(to*): Change to to[abcdefghijklmnopqrstuvwxyz]*.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	* conform/data/errno.h-data (EDOM): Use macro-int-constant.
	Specify type.  Require positive value.
	(EILSEQ): Likewise.
	(ERANGE): Likewise.
	[ISO || POSIX] (EILSEQ): Do not expect.
	[!ISO && !ISO99 && !ISO11] (E2BIG): Use macro-int-constant.
	Specify type.  Require positive value.
	[!ISO && !ISO99 && !ISO11] (EACCES): Likewise.
	[!ISO && !ISO99 && !ISO11] (EADDRINUSE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EADDRNOTAVAIL): Likewise.
	[!ISO && !ISO99 && !ISO11] (EAFNOSUPPORT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EAGAIN): Likewise.
	[!ISO && !ISO99 && !ISO11] (EALREADY): Likewise.
	[!ISO && !ISO99 && !ISO11] (EBADF): Likewise.
	[!ISO && !ISO99 && !ISO11] (EBADMSG): Likewise.
	[!ISO && !ISO99 && !ISO11] (EBUSY): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECANCELED): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECHILD): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECONNABORTED): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECONNREFUSED): Likewise.
	[!ISO && !ISO99 && !ISO11] (ECONNRESET): Likewise.
	[!ISO && !ISO99 && !ISO11] (EDEADLK): Likewise.
	[!ISO && !ISO99 && !ISO11] (EDESTADDRREQ): Likewise.
	[!ISO && !ISO99 && !ISO11] (EDQUOT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EEXIST): Likewise.
	[!ISO && !ISO99 && !ISO11] (EFAULT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EFBIG): Likewise.
	[!ISO && !ISO99 && !ISO11] (EHOSTUNREACH): Likewise.
	[!ISO && !ISO99 && !ISO11] (EIDRM): Likewise.
	[!ISO && !ISO99 && !ISO11] (EINPROGRESS): Likewise.
	[!ISO && !ISO99 && !ISO11] (EINTR): Likewise.
	[!ISO && !ISO99 && !ISO11] (EINVAL): Likewise.
	[!ISO && !ISO99 && !ISO11] (EIO): Likewise.
	[!ISO && !ISO99 && !ISO11] (EISCONN): Likewise.
	[!ISO && !ISO99 && !ISO11] (EISDIR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ELOOP): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMFILE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMLINK): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMSGSIZE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EMULTIHOP): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENAMETOOLONG): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENETDOWN): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENETUNREACH): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENFILE): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOBUFS): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENODATA): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENODEV): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOENT): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOEXEC): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOLCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOLINK): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOMEM): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOMSG): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOPROTOOPT): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSPC): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSTR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOSYS): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTCONN): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTDIR): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTEMPTY): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTSOCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTSUP): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENOTTY): Likewise.
	[!ISO && !ISO99 && !ISO11] (ENXIO): Likewise.
	[!ISO && !ISO99 && !ISO11] (EOPNOTSUPP): Likewise.
	[!ISO && !ISO99 && !ISO11] (EOVERFLOW): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPERM): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPIPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPROTO): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPROTONOSUPPORT): Likewise.
	[!ISO && !ISO99 && !ISO11] (EPROTOTYPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (EROFS): Likewise.
	[!ISO && !ISO99 && !ISO11] (ESPIPE): Likewise.
	[!ISO && !ISO99 && !ISO11] (ESRCH): Likewise.
	[!ISO && !ISO99 && !ISO11] (ESTALE): Likewise.
	[!ISO && !ISO99 && !ISO11] (ETIME): Likewise.
	[!ISO && !ISO99 && !ISO11] (ETIMEDOUT): Likewise.
	[!ISO && !ISO99 && !ISO11] (ETXTBSY): Likewise.
	[!ISO && !ISO99 && !ISO11] (EWOULDBLOCK): Likewise.
	[!ISO && !ISO99 && !ISO11] (EXDEV): Likewise.
	[XOPEN2K8 || defined POSIX2008] (ENOTRECOVERABLE): Likewise.
	[XOPEN2K8 || defined POSIX2008] (EOWNERDEAD): Likewise.
	* conform/data/float.h-data (FLT_RADIX): Use macro-int-constant.
	Require >= 2.
	(FLT_ROUNDS): Expect as macro, not constant.
	(FLT_MANT_DIG): Use macro-int-constant.
	(DBL_MANT_DIG): Likewise.
	(LDBL_MANT_DIG): Likewise.
	(FLT_DIG): Likewise.
	(DBL_DIG): Likewise.
	(LDBL_DIG): Likewise.
	(FLT_MIN_EXP): Use macro-int-constant.  Require < 0.
	(DBL_MIN_EXP): Likewise.
	(LDBL_MIN_EXP): Likewise.
	(FLT_MAX_EXP): Use macro-int-constant.
	(DBL_MAX_EXP): Likewise.
	(LDBL_MAX_EXP): Likewise.
	(FLT_MAX_10_EXP): Likewise.
	(DBL_MAX_10_EXP): Likewise.
	(LDBL_MAX_10_EXP): Likewise.
	(FLT_MAX): Use macro-constant.
	(DBL_MAX): Likewise.
	(LDBL_MAX): Likewise.
	(FLT_EPSILON): Use macro-constant.  Give upper bound.
	(DBL_EPSILON): Likewise.
	(LDBL_EPSILON): Likewise.
	(FLT_MIN): Likewise.
	(DBL_MIN): Likewise.
	(LDBL_MIN): Likewise.
	[C99-based standards] (DECIMAL_DIG): Use macro-int-constant.
	[C99-based standards] (FLT_EVAL_METHOD): Likewise.
	[ISO11] (DBL_HAS_SUBNORM): Use macro-int-constant.
	[ISO11] (FLT_HAS_SUBNORM): Likewise.
	[ISO11] (LDBL_HAS_SUBNORM): Likewise.
	[ISO11] (DBL_DECIMAL_DIG): Likewise.
	[ISO11] (FLT_DECIMAL_DIG): Likewise.
	[ISO11] (LDBL_DECIMAL_DIG): Likewise.
	[ISO11] (DBL_TRUE_MIN): Use macro-constant.
	[ISO11] (FLT_TRUE_MIN): Likewise.
	[ISO11] (LDBL_TRUE_MIN): Likewise.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.
	* conform/data/limits.h-data (CHAR_BIT): Use macro-int-constant.
	(SCHAR_MIN): Use macro-int-constant.  Specify type.
	(SCHAR_MAX): Likewise.
	(UCHAR_MAX): Likewise.
	(CHAR_MIN): Likewise.
	(CHAR_MAX): Likewise.
	(MB_LEN_MAX): Use macro-int-constant.
	(SHRT_MIN): Use macro-int-constant.  Specify type.
	(SHRT_MAX): Likewise.
	(USHRT_MAX): Likewise.
	(INT_MAX): Likewise.
	(INT_MIN): Use macro-int-constant.  Specify type.  Make upper
	bound negative.
	(UINT_MAX): Use macro-int-constant.  Specify type.  Suffix lower
	bound with "U".
	(LONG_MAX): Use macro-int-constant.  Specify type.  Suffix lower
	bound with "L".
	(LONG_MIN): Use macro-int-constant.  Specify type.  Make upper
	bound negative.  Suffix upper bound with "L".
	(ULONG_MAX): Use macro-int-constant.  Specify type.  Suffix lower
	bound with "UL".
	[C99-based standards] (LLONG_MIN): Use macro-int-constant.
	Specify type.
	[C99-based standards] (LLONG_MAX): Likewise.
	[C99-based standards] (ULLONG_MAX): Likewise.
	* conform/data/stddef.h-data (NULL): Use macro-constant.  Require
	== 0.
	[ISO11] (max_align_t): Require type.
	[ISO || ISO99 || ISO11] (*_t): Do not allow.

	* conform/conformtest.pl ($CFLAGS_namespace): Define separately
	from $CFLAGS, without defining away __attribute__ calls.
	(checknamespace): Use $CFLAGS_namespace.

	* conform/conformtest.pl (@keywords): Only include C99 keywords
	for standards based on C99 or C11.

	* conform/data/iso646.h-data [ISO || POSIX || XPG3 || XPG4]:
	Disable tests.
	* conform/data/stdint.h-data [ISO || POSIX || XPG3 || XPG4 ||
	UNIX98]: Likewise.

	* conform/conformtest.pl: Handle "macro-int-constant" and test for
	usability of symbols in #if.

	* conform/conformtest.pl: If macro or constant types start
	"promoted:", expect the symbol to be of the following type
	promoted by the integer promotions.

	* conform/conformtest.pl: Parse all "constant" and "macro" lines
	in one place.  Also handle "macro-constant".

	* conform/conformtest.pl: Only accept expected macro values with
	"==".  Parse all "macro" lines in one place.
	* conform/data/stdlib.h-data: Use "==" form on "macro" lines.

	* conform/conformtest.pl: Handle braced types on "constant" lines
	instead of handling "typed-constant".
	* conform/data/signal.h-data: Use "constant" instead of
	"typed-constant".

	* conform/conformtest.pl: Handle "optional-" at start of lines in
	one place rather than duplicating several cases.  Handle each
	format of "macro" line with initial "optional-".

	* conform/conformtest.pl: Only accept expected constant or
	optional-constant values with "==".  Parse all "constant" lines in
	one place.  Parse all "optional-constant" lines in one place.
	* conform/data/cpio.h-data: Use "==" form on "constant" lines.
	* conform/data/fmtmsg.h-data: Likewise.
	* conform/data/netinet/in.h-data: Likewise.
	* conform/data/tar.h-data: Likewise.
	* conform/data/limits.h-data: Use "==" form on "constant" and
	"optional-constant" lines.

	* conform/conformtest.pl: Use -ansi for XPG3, XPG4 and UNIX98.
	Use -std=c99 for XOPEN2K.
	(@knownproblems): Remove.
	(newtoken): Don't check %isknown.

	* conform/data/math.h-data [XPG3 || XPG4 || UNIX98] (fpclassify):
	Do not expect macro.
	[XPG3 || XPG4 || UNIX98] (isfinite): Likewise.
	[XPG3 || XPG4 || UNIX98] (isinf): Likewise.
	[XPG3 || XPG4 || UNIX98] (isnan): Likewise.
	[XPG3 || XPG4 || UNIX98] (isnormal): Likewise.
	[XPG3 || XPG4 || UNIX98] (signbit): Likewise.
	[XPG3 || XPG4 || UNIX98] (isgreater): Likewise.
	[XPG3 || XPG4 || UNIX98] (isgreaterequal): Likewise.
	[XPG3 || XPG4 || UNIX98] (isless): Likewise.
	[XPG3 || XPG4 || UNIX98] (islessequal): Likewise.
	[XPG3 || XPG4 || UNIX98] (islessgreater): Likewise.
	[XPG3 || XPG4 || UNIX98] (isunordered): Likewise.
	[XPG3 || XPG4 || UNIX98] (isnan): Expect as function.
	[XPG3 || XPG4 || UNIX98] (HUGE_VALF): Do not expect.
	[XPG3 || XPG4 || UNIX98] (HUGE_VALL): Likewise.
	[XPG3 || XPG4 || UNIX98] (INFINITY): Likewise.
	[XPG3 || XPG4 || UNIX98] (NAN): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_INFINITE): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_NAN): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_NORMAL): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_SUBNORMAL): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_ZERO): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_FAST_FMA): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_FAST_FMAF): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_FAST_FMAL): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_ILOGB0): Likewise.
	[XPG3 || XPG4 || UNIX98] (FP_ILOGBNAN): Likewise.
	[XPG3 || XPG4 || UNIX98] (copysign): Likewise.
	[XPG3 || XPG4 || UNIX98] (exp2): Likewise.
	[XPG3 || XPG4 || UNIX98] (log2): Likewise.
	[XPG3 || XPG4 || UNIX98] (tgama): Likewise.
	[XPG3] (acosh): Likewise.
	[XPG3] (asinh): Likewise.
	[XPG3] (atanh): Likewise.
	[XPG3] (cbrt): Likewise.
	[XPG3] (expm1): Likewise.
	[XPG3] (ilogb): Likewise.
	[XPG3] (log1p): Likewise.
	[XPG3] (logb): Likewise.
	[XPG3] (nextafter): Likewise.
	[XPG3 || XPG4 || UNIX98] (nexttoward): Likewise.
	[XPG3 || XPG4 || UNIX98] (nearbyint): Likewise.
	[XPG3] (remainder): Likewise.
	[XPG3] (rint): Likewise.
	[XPG3 || XPG4 || UNIX98] (round): Likewise.
	[XPG3 || XPG4 || UNIX98] (trunc): Likewise.
	[XPG3 || XPG4 || UNIX98] (lrint): Likewise.
	[XPG3 || XPG4 || UNIX98] (llrint): Likewise.
	[XPG3 || XPG4 || UNIX98] (lround): Likewise.
	[XPG3 || XPG4 || UNIX98] (llround): Likewise.
	[XPG3 || XPG4 || UNIX98] (remquo): Likewise.
	[UNIX98 || XOPEN2K] (scalb): Expect.
	[XPG3 || XPG4 || UNIX98] (scalbn): Do not expect.
	[XPG3 || XPG4 || UNIX98] (scalbln): Likewise.
	[XPG3 || XPG4 || UNIX98] (fdim): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmax): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmin): Likewise.
	[XPG3 || XPG4 || UNIX98] (fma): Likewise.
	[XPG3 || XPG4 || UNIX98] (nan): Likewise.
	[XPG3 || XPG4 || UNIX98] (acosf): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinf): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanf): Likewise.
	[XPG3 || XPG4 || UNIX98] (atan2f): Likewise.
	[XPG3 || XPG4 || UNIX98] (ceilf): Likewise.
	[XPG3 || XPG4 || UNIX98] (copysignf): Likewise.
	[XPG3 || XPG4 || UNIX98] (cosf): Likewise.
	[XPG3 || XPG4 || UNIX98] (coshf): Likewise.
	[XPG3 || XPG4 || UNIX98] (expf): Likewise.
	[XPG3 || XPG4 || UNIX98] (exp2f): Likewise.
	[XPG3 || XPG4 || UNIX98] (fabsf): Likewise.
	[XPG3 || XPG4 || UNIX98] (floorf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmodf): Likewise.
	[XPG3 || XPG4 || UNIX98] (frexpf): Likewise.
	[XPG3 || XPG4 || UNIX98] (ldexpf): Likewise.
	[XPG3 || XPG4 || UNIX98] (logf): Likewise.
	[XPG3 || XPG4 || UNIX98] (log10f): Likewise.
	[XPG3 || XPG4 || UNIX98] (log2f): Likewise.
	[XPG3 || XPG4 || UNIX98] (modff): Likewise.
	[XPG3 || XPG4 || UNIX98] (powf): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinf): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (sqrtf): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanf): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (erff): Likewise.
	[XPG3 || XPG4 || UNIX98] (erfcf): Likewise.
	[XPG3 || XPG4 || UNIX98] (gammaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (hypotf): Likewise.
	[XPG3 || XPG4 || UNIX98] (j0f): Likewise.
	[XPG3 || XPG4 || UNIX98] (j1f): Likewise.
	[XPG3 || XPG4 || UNIX98] (jnf): Likewise.
	[XPG3 || XPG4 || UNIX98] (lgammaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (tgammaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (y0f): Likewise.
	[XPG3 || XPG4 || UNIX98] (y1f): Likewise.
	[XPG3 || XPG4 || UNIX98] (ynf): Likewise.
	[XPG3 || XPG4 || UNIX98] (acoshf): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanhf): Likewise.
	[XPG3 || XPG4 || UNIX98] (cbrtf): Likewise.
	[XPG3 || XPG4 || UNIX98] (expm1f): Likewise.
	[XPG3 || XPG4 || UNIX98] (ilogbf): Likewise.
	[XPG3 || XPG4 || UNIX98] (log1pf): Likewise.
	[XPG3 || XPG4 || UNIX98] (logbf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nextafterf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nexttowardf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nearbyintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (remainderf): Likewise.
	[XPG3 || XPG4 || UNIX98] (rintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (roundf): Likewise.
	[XPG3 || XPG4 || UNIX98] (truncf): Likewise.
	[XPG3 || XPG4 || UNIX98] (lrintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (llrintf): Likewise.
	[XPG3 || XPG4 || UNIX98] (lroundf): Likewise.
	[XPG3 || XPG4 || UNIX98] (llroundf): Likewise.
	[XPG3 || XPG4 || UNIX98] (remquof): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbf): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbnf): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalblnf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fdimf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmaxf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fminf): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmaf): Likewise.
	[XPG3 || XPG4 || UNIX98] (nanf): Likewise.
	[XPG3 || XPG4 || UNIX98] (acosl): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinl): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanl): Likewise.
	[XPG3 || XPG4 || UNIX98] (atan2l): Likewise.
	[XPG3 || XPG4 || UNIX98] (ceill): Likewise.
	[XPG3 || XPG4 || UNIX98] (copysignl): Likewise.
	[XPG3 || XPG4 || UNIX98] (cosl): Likewise.
	[XPG3 || XPG4 || UNIX98] (coshl): Likewise.
	[XPG3 || XPG4 || UNIX98] (expl): Likewise.
	[XPG3 || XPG4 || UNIX98] (exp2l): Likewise.
	[XPG3 || XPG4 || UNIX98] (fabsl): Likewise.
	[XPG3 || XPG4 || UNIX98] (floorl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmodl): Likewise.
	[XPG3 || XPG4 || UNIX98] (frexpl): Likewise.
	[XPG3 || XPG4 || UNIX98] (ldexpl): Likewise.
	[XPG3 || XPG4 || UNIX98] (logl): Likewise.
	[XPG3 || XPG4 || UNIX98] (log10l): Likewise.
	[XPG3 || XPG4 || UNIX98] (log2l): Likewise.
	[XPG3 || XPG4 || UNIX98] (modfl): Likewise.
	[XPG3 || XPG4 || UNIX98] (powl): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinl): Likewise.
	[XPG3 || XPG4 || UNIX98] (sinhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (sqrtl): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanl): Likewise.
	[XPG3 || XPG4 || UNIX98] (tanhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (erfl): Likewise.
	[XPG3 || XPG4 || UNIX98] (erfcl): Likewise.
	[XPG3 || XPG4 || UNIX98] (gammal): Likewise.
	[XPG3 || XPG4 || UNIX98] (hypotl): Likewise.
	[XPG3 || XPG4 || UNIX98] (j0l): Likewise.
	[XPG3 || XPG4 || UNIX98] (j1l): Likewise.
	[XPG3 || XPG4 || UNIX98] (jnl): Likewise.
	[XPG3 || XPG4 || UNIX98] (lgammal): Likewise.
	[XPG3 || XPG4 || UNIX98] (tgammal): Likewise.
	[XPG3 || XPG4 || UNIX98] (y0l): Likewise.
	[XPG3 || XPG4 || UNIX98] (y1l): Likewise.
	[XPG3 || XPG4 || UNIX98] (ynl): Likewise.
	[XPG3 || XPG4 || UNIX98] (acoshl): Likewise.
	[XPG3 || XPG4 || UNIX98] (asinhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (atanhl): Likewise.
	[XPG3 || XPG4 || UNIX98] (cbrtl): Likewise.
	[XPG3 || XPG4 || UNIX98] (expm1l): Likewise.
	[XPG3 || XPG4 || UNIX98] (ilogbl): Likewise.
	[XPG3 || XPG4 || UNIX98] (log1pl): Likewise.
	[XPG3 || XPG4 || UNIX98] (logbl): Likewise.
	[XPG3 || XPG4 || UNIX98] (nextafterl): Likewise.
	[XPG3 || XPG4 || UNIX98] (nexttowardl): Likewise.
	[XPG3 || XPG4 || UNIX98] (nearbyintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (remainderl): Likewise.
	[XPG3 || XPG4 || UNIX98] (rintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (roundl): Likewise.
	[XPG3 || XPG4 || UNIX98] (truncl): Likewise.
	[XPG3 || XPG4 || UNIX98] (lrintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (llrintl): Likewise.
	[XPG3 || XPG4 || UNIX98] (lroundl): Likewise.
	[XPG3 || XPG4 || UNIX98] (llroundl): Likewise.
	[XPG3 || XPG4 || UNIX98] (remquol): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbl): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalbnl): Likewise.
	[XPG3 || XPG4 || UNIX98] (scalblnl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fdiml): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmaxl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fminl): Likewise.
	[XPG3 || XPG4 || UNIX98] (fmal): Likewise.
	[XPG3 || XPG4 || UNIX98] (nanl): Likewise.

	* conform/conformtest.pl: Define _XOPEN_SOURCE as well as
	_XOPEN_SOURCE_EXTENDED for XPG4.

	* conform/conformtest.pl: Handle "symbol" lines for allow-header.

	* Makeconfig (localtime): Remove variable.
	(inst_localtime-file): Likewise.

2012-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/ld.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libc.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libm.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/libpthread.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/fpu/nptl/librt.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm.abilist:
	Update.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	Update.

2012-05-01  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2550]
	[BZ #2570]
	* math/s_nexttowardf.c (__nexttowardf): Use floating-point
	comparisons to determine direction to adjust input.
	* sysdeps/i386/fpu/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c(__nexttowardf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c (__nexttoward):
	Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c (__nexttoward): Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c (__nexttowardf):
	Likewise.
	* sysdeps/ieee754/ldbl-opt/s_nexttowardfd.c (__nldbl_nexttowardf):
	Likewise.
	* math/libm-test.inc (nexttoward_test): Add more tests.

2012-05-01  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14040]
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S (nearbyintl): Define
	in version GLIBC_2.1, not GLIBC_2.0.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyint.S (nearbyintl):
	Likewise.

2012-04-30  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13942]
	* sysdeps/i386/fpu/e_acos.S (__ieee754_acos): Calculate 1 - x^2 as
	(1 - x) * (1 + x).
	* sysdeps/i386/fpu/e_acosl.c (__ieee754_acosl): Likewise.
	* sysdeps/i386/fpu/e_asin.S (__ieee754_asin): Likewise.
	* math/libm-test.inc (acos_test): Add more tests.
	(asin_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #14034]
	* sysdeps/i386/fpu/e_acos.S (__ieee754_acos): Take absolute value
	of square root.
	* sysdeps/i386/fpu/e_acosf.S (__ieee754_acosf): Likewise.
	* sysdeps/i386/fpu/e_acosl.c (__ieee754_acosl): Likewise.
	* math/libm-test.inc (acos_test_tonearest): New function.
	(acos_test_towardzero): Likewise.
	(acos_test_downward): Likewise.
	(acos_test_upward): Likewise.
	(asin_test_tonearest): Likewise.
	(asin_test_towardzero): Likewise.
	(asin_test_downward): Likewise.
	(asin_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	[BZ #13884]
	[BZ #13924]
	* math/e_exp10.c: Include <float.h>.
	(__ieee754_exp10): Handle underflow here rather than multiplying
	large negative argument by M_LN10.
	* math/e_exp10f.c (__ieee754_exp10f): Call __ieee754_exp instead
	of __ieee754_expf.
	* math/e_exp10l.c: Include <float.h>.
	(__ieee754_exp10l): Handle underflow here rather than multiplying
	large negative argument by M_LN10l.
	* math/libm-test.inc (exp10_test): Add another test.  Do not allow
	spurious overflow exception on underflow.

2012-04-29  Marek Polacek  <polacek@redhat.com>

	* misc/sys/cdefs.h (__attribute_artificial__): New macro.
	(__fortify_function): New macro.
	(__extern_always_inline): Don't use __attribute__ ((__artificial__)).
	* libio/bits/stdio-ldbl.h: Use __fortify_function in place of
	__extern_always_inline.
	* libio/bits/stdio2.h: Likewise.
	* libio/bits/stdio.h: Likewise.
	* string/string.h: Likewise.
	* string/bits/string3.h: Likewise.
	* include/stdio.h: Likewise.
	* stdlib/bits/stdlib.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* rt/bits/mqueue2.h: Likewise.
	* rt/mqueue.h: Likewise.
	* posix/bits/unistd.h: Likewise.
	* posix/unistd.h: Likewise.
	* io/bits/poll2.h: Likewise.
	* io/bits/fcntl2.h: Likewise.
	* io/fcntl.h: Likewise.
	* io/sys/poll.h: Likewise.
	* misc/bits/syslog.h: Likewise.
	* misc/bits/syslog-ldbl.h: Likewise.
	* misc/sys/syslog.h: Likewise.
	* socket/bits/socket2.h: Likewise.
	* socket/sys/socket.h: Likewise.
	* debug/tst-chk1.c: Likewise.
	* wcsmbs/bits/wchar2.h: Likewise.
	* wcsmbs/bits/wchar-ldbl.h: Likewise.
	* wcsmbs/wchar.h: Likewise.

2012-04-29  Andreas Jaeger  <aj@suse.de>

	* Makerules (tests): Remove enable-check-abi protection.
	(check-abi-warn): Remove.
	(check-abi-%): Remove check-abi-warn usage.

	* configure.in: Remove check-abi configure option.
	* configure: Regenerated.
	* config.make.in (enable-check-abi): Remove.

2012-04-28  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #14033]
	* math/bits/math-finite.h [__NO_LONG_DOUBLE_MATH]: Redirect long
	double functions to double *_finite functions.

	[BZ #13941]
	* sysdeps/ieee754/ldbl-128ibm/ldbl2mpn.c
	(__mpn_extract_long_double): Use DBL_MIN_EXP instead of
	LDBL_MIN_EXP.
	* stdio-common/Makefile (tests): Add tst-sprintf3.
	* stdio-common/tst-sprintf3.c: New file.

	* elf/Makefile ($(objpfx)tst-leaks1-mem, $(objpfx)noload-mem)
	($(objpfx)tst-unused-dep.out): Don't run when cross-compiling.

2012-04-28  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl: Remove duplicate typed-constant
	handling.

2012-04-28  David S. Miller  <davem@davemloft.net>

	* Makerules (%.abilist): Add vpath on sysdep_dirs.
	(check-abi-%): Remove AWK script prerequisite and explicit
	abilist directory.
	(check-abi): Rewrite to just diff the symlist with the abilist.
	(config-tls, config-abi-config): Delete, no longer used.
	(update-abi-%): Remove AWK script and explicit abilist directory.
	(update-abi): Rewrite to simply compare and conditionally copy the
	symlist and the sysdep abilist file.  Remove update-abi-config
	checks.
	* abilist/ld.abilist: Remove.
	* abilist/libBrokenLocale.abilist: Remove.
	* abilist/libanl.abilist: Remove.
	* abilist/libcrypt.abilist: Remove.
	* abilist/libdl.abilist: Remove.
	* abilist/librt.abilist: Remove.
	* abilist/libthread_db.abilist: Remove.
	* abilist/libutil.abilist: Remove.
	* scripts/extract-abilist.awk: Remove.
	* scripts/merge-abilist.awk: Remove.
	* sysdeps/generic/libcidn.abilist: New file.
	* sysdeps/generic/libnss_compat.abilist: New file.
	* sysdeps/generic/libnss_db.abilist: New file.
	* sysdeps/generic/libnss_dns.abilist: New file.
	* sysdeps/generic/libnss_files.abilist: New file.
	* sysdeps/generic/libnss_hesiod.abilist: New file.
	* sysdeps/generic/libnss_nis.abilist: New file.
	* sysdeps/generic/libnss_nisplus.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libBrokenLocale.abilist: New
	file.
	* sysdeps/unix/sysv/linux/i386/nptl/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/i386/nptl/libthread_db.abilist: New
	file.
	* sysdeps/unix/sysv/linux/i386/nptl/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libBrokenLocale.abilist: New
	file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libpthread.abilist: New
	file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libthread_db.abilist: New
	file.
	* sysdeps/unix/sysv/linux/x86_64/nptl/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/ld.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libanl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libc.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libcrypt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libdl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libm.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libnsl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/librt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powercp32/fpu/nptl/libutil.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/ld.abilist: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libanl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libcrypt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libdl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libnsl.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/librt.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/nptl/libutil.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libresolv.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-32/nptl/libutil.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libresolv.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/s390/s390-64/nptl/libutil.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sh/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libanl.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libBrokenLocale.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sh/nptl/libc.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libcrypt.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libdl.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libm.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libnsl.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libpthread.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libresolv.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/librt.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libthread_db.abilist: New file.
	* sysdeps/unix/sysv/linux/sh/nptl/libutil.abilist: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/nptl/libutil.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/ld.abilist: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libanl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libBrokenLocale.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libc.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libcrypt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libdl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libm.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libnsl.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libpthread.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libresolv.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/librt.abilist: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libthread_db.abilist:
	New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/nptl/libutil.abilist: New
	file.

2012-04-28  Joseph Myers  <joseph@codesourcery.com>

	* conform/conformtest.pl: Fix typo in handling typed-constant from
	allow-header.

2012-04-27  Joseph Myers  <joseph@codesourcery.com>

	* README: Cut down references to pre-2.6 Linux kernels and
	Linuxthreads.  Update lists of configurations in libc and ports
	and sort alphabetically.  Say "or newer" with Linux kernel version
	requirements.

	* config.h.in [IS_IN_build]: Allow compiling without optimization.

2012-04-27  Ryan S. Arnold  <rsa@linux.vnet.ibm.com>

	[BZ #887]
	* math/libm-test.inc (logb_test_downward): New test to expose
	erroneous negative sign on -0.0 result of logb[l](1) in FE_DOWNWARD
	rounding mode.

2012-04-27  Joseph Myers  <joseph@codesourcery.com>

	[BZ #14027]
	* math/fclrexcpt.c (__feclearexcept): Return zero if nothing needs
	to be done.
	* math/fraiseexcpt.c (__feraiseexcept): Likewise.
	* math/fsetexcptflg.c (__fesetexceptflag): Likewise.

2012-04-26  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/i386/brk.S: Remove file.
	* sysdeps/unix/i386/dl-brk.S: Likewise.
	* sysdeps/unix/i386/pipe.S: Likewise.
	* sysdeps/unix/i386/sigreturn.S: Likewise.
	* sysdeps/unix/i386/syscall.S: Likewise.
	* sysdeps/unix/i386/vfork.S: Likewise.
	* sysdeps/unix/i386/wait.S: Likewise.

	* sysdeps/unix/common/tcsendbrk.c: Move to ...
	* sysdeps/unix/sysv/linux/tcsendbrk.c: ... here.

	* configure.in (arm*-none*): Do not allow without
	--enable-hacker-mode.
	(netbsd*): Remove case setting base_os.
	(386bsd*): Likewise.
	(freebsd*): Likewise.
	(bsdi*): Likewise.
	(osf*): Likewise.
	(sunos*): Likewise.
	(ultrix*): Likewise.
	(newsos*): Likewise.
	(dynix*): Likewise.
	(*bsd*): Likewise.
	(sysv*): Likewise.
	(isc*): Likewise.
	(esix*): Likewise.
	(sco*): Likewise.
	(minix*): Likewise.
	(irix4*): Likewise.
	(irix6*): Likewise.
	(solaris[2-9]*): Likewise.
	(none): Likewise.
	* configure: Regenerated.

2012-04-26  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #11521]
	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c (__ctanhl): Avoid internal
	overflow or cancellation in calculating denominator.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c (__ctanl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c (__ieee754_sinhl): Breaking
	down expression to avoid unexpected rounding in newer GCCs.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update for ctan, ctanh fix.

2012-04-26  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: Generate
	long-double compat symbols.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_isnan.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_llrint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rint.S: Likewise.

2012-04-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/bits/atomic.h: Include sysdep.h to get
	HWCAP_* values only after the memory barriers have been defined.
	(atomic_full_barrier): Define.
	(atomic_read_barrier): Define.
	(atomic_write_barrier): Define.

2012-04-26  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* shlib-versions: Add libgcc_s version information.
	* sysdeps/generic/libgcc_s.h: Remove.
	* sysdeps/generic/framestate.c: Include gnu/lib-names.h instead of
	libgcc_s.h.
	* sysdeps/gnu/unwind-resume.c: Likewise.
	* scripts/test-installation.pl: Remove libgcc_s from link_libs.

2012-04-25  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sparc/brk.S: Delete.
	* sysdeps/unix/sparc/dl-brk.S: Delete.
	* sysdeps/unix/sparc/pipe.S: Delete.
	* sysdeps/unix/sparc/sysdep.S: Delete.
	* sysdeps/unix/sparc/sysdep.h: Delete.
	* sysdeps/unix/sparc/vfork.S: Delete.
	* sysdeps/sparc/sysdep.h (SPARC_PIC_THUNK, SPARC_PIC_REG)
	(SPARC_PIC_REG_LEAF, ENTRY, END, LOC): Define.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (ret, ret_NOERRNO)
	(ret_ERRVAL, r0, r1, MOVE): Define.
	(JUMPTARGET): Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Don't include
	sysdeps/unix/sparc/sysdep.h
	(ENTRY, END): Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.

2012-04-25  Joseph Myers  <joseph@codesourcery.com>

	* Makerules (native-compile): Use $(BUILD_LDFLAGS).
	(ALL_BUILD_CFLAGS): Use $(BUILD_CPPFLAGS) -D_GNU_SOURCE
	-DIS_IN_build.

	* timezone/README: Update upstream location and email address for
	tzcode and tzdata.
	* timezone/zdump.c: Update from tzcode 2012b.
	* timezone/zic.c: Likewise.

	* configure.in (libc_cv_as_needed): Remove test.
	* configure: Regenerated.
	* Makeconfig [$(have-as-needed) != yes] (as-needed): Remove
	conditional definition.
	[$(have-as-needed) != yes] (no-as-needed): Likewise.
	[$(have-as-needed) != yes] (libgcc_eh): Likewise.
	* config.make.in (have-as-needed): Remove variable.

2012-04-25  Siddhesh Poyarekar  <siddhesh@redhat.com>
	    Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-minimal.c (__strtoul_internal): Parse hexadecimal and octal
	strings correctly.

2012-04-25  Chung-Lin Tang  <cltang@codesourcery.com>

	* sysdeps/sh/memcpy.S: Remove include of endian.h, change
	preprocessor endian tests to '#ifdef __BIG_ENDIAN__'.
	* sysdeps/sh/strlen.S: Likewise.

2012-04-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/fork.S: Remove file.
	* sysdeps/unix/i386/fork.S: Likewise.
	* sysdeps/unix/sparc/fork.S: Likewise.

	* sysdeps/unix/system.c: Remove file.
	* sysdeps/unix/bsd/bsd4.4/system.c: Likewise.

	* sysdeps/unix/getegid.S: Remove file.
	* sysdeps/unix/geteuid.S: Likewise.

2012-04-24  Roland McGrath  <roland@hack.frob.com>

	* scripts/check-localplt.awk: New file.
	* elf/Makefile ($(objpfx)check-localplt.out): Use that script instead
	of diff.
	* scripts/data/localplt-generic.data: Add a comment.

	* sysdeps/mach/hurd/symlink.c: Don't call __mach_port_deallocate on
	NODE when __dir_mkfile failed.
	* sysdeps/mach/hurd/symlinkat.c: Likewise.
	Reported by Ludovic Court√®s <ludo@gnu.org>.

2012-04-24  Andreas Jaeger  <aj@suse.de>

	* Makerules (common-clean): Also remove gen-as-const-headers
	files.

2012-04-24  Joseph Myers  <joseph@codesourcery.com>

	* Makerules (native-compile): Do not change working directory for
	build.  Use $(OUTPUT_OPTION) in command.
	(ALL_BUILD_CFLAGS): Use $(common-objpfx) to find config.h.

2012-04-24  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #13886]
	* sysdeps/powerpc/powerpc64/fpu/s_floorl.S: Delete file. Use the
	sysdeps/ieee754/ldbl-128ibm/s_floorl.c version instead.
	* math/libm-test.inc (floor_test): Add more tests.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update for pow tests.

2012-04-24  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/getdents.c: Remove file.
	* sysdeps/unix/sysv/getdents.c: Likewise.
	* sysdeps/unix/sysv/syscalls.list (s_getdents): Remove.

	* sysdeps/unix/syscalls.list (madvise): Add syscall from
	sysdeps/unix/mman/syscalls.list.
	(mmap): Likewise.
	(mprotect): Likewise.
	(msync): Likewise.
	(munmap): Likewise.
	* sysdeps/unix/bsd/bsd4.4/Implies: Remove.
	* sysdeps/unix/mman/syscalls.list: Remove.
	* sysdeps/unix/sysv/linux/Implies: Don't include unix/mman.

	* configure.in (libc_cv_libgcc_s_suffix): Remove test.
	(libc_cv_as_needed): Don't use $libc_cv_libgcc_s_suffix.
	* configure: Regenerated.
	* Makeconfig [$(have-as-needed) = yes] (libgcc_eh): Don't use
	$(libgcc_s_suffix).
	* config.make.in (libgcc_s_suffix): Remove variable.

2012-04-23  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/gethostname.c: Move to ...
	* sysdeps/posix/gethostname.c: ... here.

	* sysdeps/unix/execve.S: Remove file.

	* sysdeps/unix/_exit.S: Remove file.

2012-04-23  Andreas Jaeger  <aj@suse.de>

	[BZ #13739]
	* manual/Makefile: Remove make dist support, there's no
	need for a stand-alone documentation tar ball.
	(TEXI2DVI): Define always, it's not in Makeconfig.
	(dist): Removed.
	(tar-it): Removed.
	(edition): Removed.
	(glibc-doc-$(edition).tar): Removed
	(%.Z): Removed.
	(%.gz): Removed.
	(%.uu): Removed.
	(ETAGS): Remove, it's in Makeconfig.
	(move-if-change): Remove, it's in Makeconfig.

2012-04-23  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #13970]
	* stdlib/stdlib.h: Remove warn_unused_result attribute from strtol etc.
	(strtod, strtof, strtold, strtol, strtoul, strtoq)
	(strtouq, strtoll, strtoull, strtol_l, strtoul_l, strtoll_l, strtoull_l)
	(strtod_l, strtof_l, strtold_l): Remove __wur.
	It is not necessarily an error to ignore strtol's return value.
	One can reliably look at the stored endptr to decide whether
	the number had valid syntax.

2012-04-21  Andreas Jaeger  <aj@suse.de>

	[BZ #13739]
	* sysdeps/s390/s390-64/Makefile (distribute): Remove variable.

2012-04-21  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/Versions (GLIBC_2.0): Add sysinfo.
	* sysdeps/unix/sysv/Versions: Remove file.

2012-04-21  Markus Trippelsdorf  <markus@trippelsdorf.de>

	[BZ #13927]
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-04-21  Nick Alcock  <nick.alcock@oracle.com>

	[BZ #7064]
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Omit explicit
	version	from __vm86.

2012-04-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/common/lxstat.c: Remove file.
	* sysdeps/unix/common/syscalls.list (sys_lstat): Remove.

	* sysdeps/unix/sysv/Makefile: Remove file.

	* sysdeps/unix/sysv/direct.h: Remove file.

	* sysdeps/unix/sysv/bits/dirent.h: Remove file.
	* sysdeps/unix/sysv/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/bits/local_lim.h: Likewise.
	* sysdeps/unix/sysv/bits/signum.h: Likewise.
	* sysdeps/unix/sysv/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/bits/utmp.h: Likewise.
	* sysdeps/unix/sysv/bits/utsname.h: Likewise.

	* sysdeps/unix/sysv/setrlimit.c: Remove file.

	* sysdeps/unix/xmknod.c: Remove file.
	* sysdeps/unix/syscalls.list (sys_mknod): Remove.

	* sysdeps/unix/sysv/settimeofday.c: Remove file.

	* sysdeps/unix/sysv/i386/time.S: Remove file.

	* sysdeps/unix/fxstat.c: Remove file.
	* sysdeps/unix/xstat.c: Likewise.
	* sysdeps/unix/syscalls.list (sys_fstat, sys_stat): Remove.

	* sysdeps/unix/sysv/sigaction.c: Remove file.

	* sysdeps/unix/sysv/Makefile [termio.h not in sysdep_headers]
	(sysdep_headers): Remove variable.
	[termio.h not in sysdep_headers] (generated): Likewise.
	[termio.h not in sysdep_headers] ($(objpfx)termio.h): Remove rule.
	* sysdeps/unix/sysv/sysv_termio.h: Remove file.
	* sysdeps/unix/sysv/tcdrain.c: Likewise.
	* sysdeps/unix/sysv/tcflow.c: Likewise.
	* sysdeps/unix/sysv/tcflush.c: Likewise.
	* sysdeps/unix/sysv/tcgetattr.c: Likewise.
	* sysdeps/unix/sysv/tcgetpgrp.c: Likewise.
	* sysdeps/unix/sysv/tcsendbrk.c: Likewise.
	* sysdeps/unix/sysv/tcsetattr.c: Likewise.
	* sysdeps/unix/sysv/tcsetpgrp.c: Likewise.

	* sysdeps/unix/siglist.c: Remove file.

	* sysdeps/unix/getppid.S: Remove file.

	* sysdeps/unix/mkdir.c: Remove file.
	* sysdeps/unix/rmdir.c: Likewise.

2012-04-19  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/gnu/errlist-compat.awk (END): Correct computation of
	ERR_MAX value.
	* sysdeps/unix/sysv/linux/Versions (GLIBC_2.12): Adjust
	errlist-compat value.

2012-04-18  David S. Miller  <davem@davemloft.net>

	* sysdeps/generic/memcopy.h (reg_char): Delete.
	* debug/strcat_chk.c: Use char, not reg_char.
	* debug/strcpy_chk.c: Likewise.
	* debug/strncat_chk.c: Likewise.
	* debug/strncpy_chk.c: Likewise.
	* string/memchr.c: Likewise.
	* string/memrchr.c: Likewise.
	* string/rawmemchr.c: Likewise.
	* string/strcat.c: Likewise.
	* string/strchr.c: Likewise.
	* string/strchrnul.c: Likewise.
	* string/strcmp.c: Likewise.
	* string/strcpy.c: Likewise.
	* string/strncat.c: Likewise.
	* string/strncmp.c: Likewise.
	* string/strncpy.c: Likewise.

2012-04-18  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/memmove.c: New file based on string/memmove.c where
	__builtin_memcopy is called when src and dest ranges are known to not
	overlap.

2012-04-18  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power6/wordcopy.c
	(_wordcopy_fwd_dest_aligned): Replace switch with a parameterized
	fwd_align_merge macro call.
	(_wordcopy_bwd_dest_aligned): Replace switch with a parameterized
	bwd_align_merge macro call.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Likewise.

2012-04-18  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc64/power6/wordcopy.c: Add fwd_align_merge and
	bwd_align_merge macros.
	(_wordcopy_fwd_dest_aligned): Use fwd_align_merge macro calls.
	(_wordcopy_bwd_dest_aligned): Use bwd_align_merge macro calls.
	* sysdeps/powerpc/powerpc32/power6/wordcopy.c: Likewise.

2012-04-18  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/memcopy.h: Delete.

2012-04-18  Andreas Jaeger  <aj@suse.de>

	[BZ #6794]
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_ilogbl.c: ... here.
	Rename __ilogbl to __ieee754_ilogbl and remove weak_alias.

	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-128/e_ilogbl.c: ... here.
	Rename __ilogbl to __ieee754_ilogbl and remove weak_alias.

	* sysdeps/ieee754/ldbl-64-128/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-64-128/e_ilogbl.c: ... here.
	Adjust for changed ldbl-128 files.

	* sysdeps/sparc/sparc64/soft-fp/s_ilogbl.c: Moved to ...
	* sysdeps/sparc/sparc64/soft-fp/e_ilogbl.c: ... here.
	Rename __ilogbl to __ieee754_ilogbl and remove weak_alias.

2012-04-17  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/memcopy.h: Delete.

2012-04-17  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/i386/fpu/e_ilogb.S: Remove __ilogb*_finite alias.
	* sysdeps/i386/fpu/e_ilogbf.S: Likewise.
	* sysdeps/i386/fpu/e_ilogbl.S: Likewise.
	* sysdeps/x86_64/fpu/e_ilogbl.S: Likewise.
	* sysdeps/ieee754/dbl-64/e_ilogb.c: Likewise.
	* sysdeps/ieee754/flt-32/e_ilogbf.c: Likewise.

2012-04-17  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	[BZ #6794]
	* math/Makefile: Add e_ilogb and w_ilogb, remove s_logb.
	* math/libm-test.inc: Add ilogb errno and exception tests.
	* math/w_ilogb.c: New file: ilogb wrapper.
	* math/w_ilogbf.c: New file: ilogbf wrapper.
	* math/w_ilogbl.c: New file: ilogbl wrapper.
	* sysdeps/generic/math_private.h: Add __ieee754_ilogb[l|f] prototypes.
	* sysdeps/i386/fpu/s_ilogb.S: Moved to ...
	* sysdeps/i386/fpu/e_ilogb.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/i386/fpu/s_ilogbf.S: Moved to ...
	* sysdeps/i386/fpu/e_ilogbf.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/i386/fpu/s_ilogbl.S: Moved to ...
	* sysdeps/i386/fpu/e_ilogbl.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/x86_64/fpu/s_ilogbl.S: Moved to ...
	* sysdeps/x86_64/fpu/e_ilogbl.S: ... here. Also fixed a FE_DIVBYZERO
	exception being thrown with 0.0 as argument.
	* sysdeps/ieee754/dbl-64/s_ilogb.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_ilogb.c: ... here.
	* sysdeps/ieee754/flt-32/s_ilogbf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_ilogbf.c: ... here.
	* sysdeps/ieee754/ldbl-128ibm/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-128ibm/e_ilogbl.c: ... here.
	* sysdeps/ieee754/ldbl-opt/s_ilogb.c: Moved to ...
	* sysdeps/ieee754/ldbl-opt/w_ilogb.c: ... here.
	* sysdeps/ieee754/ldbl-opt/w_ilogbl.c: New file: ilogbl wrapper.

2012-04-17  Petr Baudi≈°  <pasky@ucw.cz>

	* include/sys/uio.h: Change __vector to __iovec to avoid clash
	with altivec.

2012-04-16  Marek Polacek  <polacek@redhat.com>

	* elf/pldd-xx.c: Rename static_assert to pldd_assert.

2012-04-16  Marek Polacek  <polacek@redhat.com>

	* sysdeps/i386/fpu/bits/fenv.h (feraiseexcept): Reverse the
	operands of fdivp instruction.

2012-04-13  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-auditmod1.c: Check __ILP32__ instead of __LP64__.
	* elf/tst-auditmod3b.c: Likewise.
	* elf/tst-auditmod4b.c: Likewise.
	* elf/tst-auditmod5b.c: Likewise.
	* elf/tst-auditmod6b.c: Likewise.
	* elf/tst-auditmod6c.c: Likewise.
	* elf/tst-auditmod7b.c: Likewise.
	* sysdeps/x86_64/ffsll.c (ffsl): Likewise.
	* sysdeps/x86_64/preconfigure.in: Likewise.
	* sysdeps/x86_64/preconfigure: Regenerated.

2012-04-13  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/wordsize.h (__WORDSIZE): Also check
	__ILP32__.

2012-04-13  Antoine Balestrat <merkil33@gmail.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(__get_clockfreq_via_proc_openprom): Fix test on wrong variable.

2012-04-13  Chris Leonard  <cjlhomeaddress@gmail.com>

	[BZ #13973]
	* locale/iso-639.def: Fix gl language name. Spotted by
	Yaron Shahrabani.

2012-04-12  Roland McGrath  <roland@hack.frob.com>

	[BZ #2074]
	* libio/libio.h (__io_write_fn): Update comment.

2012-04-12  Petr Baudi≈°  <pasky@ucw.cz>

	[BZ #2074]
	* stdio.texi (Hook Functions): The user provided writer function
	is not allowed to return -1.

2012-04-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-04-11  Mike Frysinger  <vapier@gentoo.org>

	* .gitignore: Add /ports, /linuxthreads, and /linuxthreads_db.
	Add a leading slash to rtkaio.

2012-04-11  Jim Meyering  <meyering@redhat.com>

	[BZ #11959]
	* libio/stdio.h (fwrite, fwrite_unlocked): Remove __wur.
	It is not necessarily an error to ignore fwrite's return
	value.  One can reliably use ferror to test for errors after
	the fact.

2012-04-10  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/types.h (__snseconds_t): New type.
	* time/time.h (struct timespec): Use __snseconds_t on tv_nsec.

	* bits/typesizes.h (__SNSECONDS_T_TYPE): New macro.
	* sysdeps/unix/bsd/bsd4.4/freebsd/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/typesizes.h
	(__SNSECONDS_T_TYPE): Likewise.

2012-04-10  Andreas Jaeger  <aj@suse.de>

	[BZ #2636]
	* manual/time.texi (Processor Time): Return type of times is
	elapsed real time since an arbitrary point in the past.
	(CPU Time): Move CLK_TCK from here...
	(Processor Time): ...to here.  Correct description.
	* manual/conf.texi (Constants for Sysconf): Correct description of
	_SC_CLK_TCK.

2012-04-10  David S. Miller  <davem@davemloft.net>

	[BZ #13967]
	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Handle the case
	where the is a gap between DT_REL(A) and DT_JMPREL.

2012-04-10  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/byteswap.h: Include <features.h>.
	(__bswap_32): Use __builtin_bswap32 for GCC >= 4.2.
	(__bswap_64): Use __builtin_bswap64 for GCC >= 4.2.

2012-04-10  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* elf/dl-support.c (_dl_inhibit_cache): New variable.
	* elf/rtld.c (_rtld_global_ro): New member _dl_inhibit_cache.
	(dl_main): Handle --inhibit-cache.
	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro): New member
	_dl_inhibit_cache.
	* elf/dl-load.c (_dl_map_object): Use it.
	* elf/Makefile: Define SYSCONFDIR when building rtld.c.

2012-04-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13872]
	* sysdeps/i386/fpu/e_powl.S (p78): New object.
	(__ieee754_powl): Saturate large exponents rather than testing for
	overflow of y*log2(x).
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* math/libm-test.inc (pow_test): Do not permit spurious overflow
	exceptions.

	[BZ #11521]
	* math/s_ctan.c: Include <float.h>.
	(__ctan): Avoid internal overflow or cancellation in calculating
	denominator.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanl.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/libm-test.inc (ctan_test): Add more tests.
	(ctanh_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-04-09  Andreas Jaeger  <aj@suse.de>

	[BZ #6894]
	* manual/filesys.texi (Directory Entries): Mention that d_namlen
	is an optional BSD extension.

	[BZ #10254]
	* manual/stdio.texi (Opening Streams): Document additional fopen
	parameters.

2012-04-09  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/fpu/bits/mathinline.h (__sincos_code): Don't clobber
	%eax without telling the compiler.

2012-04-09  Carlos O'Donell  <carlos_odonell@mentor.com>

	[BZ # 13963]
	* manual/install.texi: Use sourceware.org.

2012-04-09  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13873]
	* sysdeps/ieee754/dbl-64/e_pow.c (huge, tiny): New variables.
	(__ieee754_pow): Generate overflow and underflow using huge*huge
	and tiny*tiny rather than just returning constant infinity or zero
	for large exponents.
	* math/libm-test.inc (pow_test): Require overflow exceptions for
	applicable cases of large exponents.

	[BZ #706]
	* sysdeps/i386/fpu/e_pow.S (p10): New object.
	(__ieee754_pow): Use iterative multiplication algorithm only for
	integer exponents with absolute value below 1024.  Check for odd
	integer exponents when using algorithm for real exponents.
	* math/libm-test.inc (pow_test): Add more tests.
	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

2012-04-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13705]
	* math/libm-test.inc (exp_test): Do not allow overflow exception
	on underflow test.

2012-04-08  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #13705]
	* sysdeps/ieee754/dbl-64/w_exp.c (__exp): Use __kernel_standard
	instead of __kernel_standard_f.

2012-04-08  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/i386/i686/memset_chk.S: Update copyright year.
	* sysdeps/x86_64/memset_chk.S: Likewise.

2012-04-08  Andreas Jaeger  <aj@suse.de>

	[BZ #10153]
	* manual/startup.texi (Environment Access): Describe return value
	for putenv and setenv.

	[BZ #6895]
	* manual/filesys.texi (Directory Entries): Add description for
	DT_LNK.

	[BZ #6890]
	* manual/filesys.texi (Directory Entries): Clarify that it's file
	system not operating system in the description of DT_UNKNOWN.

	[BZ #6578]
	* manual/syslog.texi (closelog): Fix reference, it's openlog.

2012-04-08  Stephen Compall  <s11@member.fsf.org>

	[BZ #6649]
	* manual/llio.texi (Opening and Closing Files): Add cross
	reference to explain mode argument.

2012-04-07  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/i386/i686/memset_chk.S: Change PIC to SHARED.
	* sysdeps/x86_64/memset_chk.S: Likewise.

2012-04-07  David S. Miller  <davem@davemloft.net>

	* elf/elf.h (R_SPARC_WDISP10): Define.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Handle
	R_SPARC_SIZE32.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Handle
	R_SPARC_SIZE64 and R_SPARC_H34.

2012-04-07  Carlos O'Donell  <carlos_odonell@mentor.com>

	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Simplify
	conditions and remove no longer applicable assertion.

2012-04-06  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/byteswap.h: Include <features.h>.
	(__bswap_32): Use __builtin_bswap32 for GCC >= 4.2.
	(__bswap_64): Use __builtin_bswap64 for GCC >= 4.2.

2012-04-06  H.J. Lu  <hongjiu.lu@intel.com>

	* bits/byteswap.h (__bswap_16): Removed.
	Include <bits/byteswap-16.h> to get __bswap_16.
	* sysdeps/i386/bits/byteswap.h: Likewise.
	* sysdeps/s390/bits/byteswap.h: Likewise.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.
	* bits/byteswap-16.h: New file.
	* sysdeps/i386/bits/byteswap-16.h: Likewise.
	* sysdeps/s390/bits/byteswap-16.h: Likewise.
	* sysdeps/x86_64/bits/byteswap-16.h: Likewise.
	* string/Makefile (headers): Add bits/byteswap-16.h.

2012-04-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #13895]
	* nss/nsswitch.c (nss_load_library, __nss_lookup_function): Avoid
	extra indirection.
	* nss/Makefile (tests-static, tests): Add tst-nss-static.
	* nss/tst-nss-static.c: New.

2012-04-06  Robert Millan  <rmh@gnu.org>

	[BZ #6486]
	* manual/llio.texi (File Position Primitive): lseek
	refers to WHENCE when it really means OFFSET.

2012-04-06  Andreas Jaeger  <aj@suse.de>

	* nss/nss_db/db-initgroups.c: Include <string.h> for strlen and
	strncmp	declarations.

	* abilist/libc.abilist: Add __poll and __ppoll.

2012-04-05  David S. Miller  <davem@davemloft.net>

	* scripts/check-local-headers.sh: Accept a host triplet in the
	path matched by the exclude regexp.

	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Reduce down to one
	definition.
	* sysdeps/powerpc/powerpc32/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Delete.
	* sysdeps/s390/s390-32/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h
	(ELF_MACHINE_PLTREL_OVERLAP): Likewise.

	* elf/rtld.c (dl_main): If DL_DEBUG_UNUSED is enabled, turn off
	lazy binding.
	* elf/dl-lookup.c (_dl_lookup_symbol_x): If DL_DEBUG_UNUSED, ignore
	undefined symbol errors.

	* elf/rtld.c (dl_main): Skip VDSO when checking for unused
	DT_NEEDED entries.

2012-04-05  Michael Matz  <matz@suse.de>

	[BZ #13592]
	* sysdeps/x86_64/memset.S: Fix size paramater comparisions.

2012-04-05  Andreas Jaeger  <aj@suse.de>

	[BZ #13908]
	* stdlib/stdlib.h: Don't warn about unused result of mktemp, fix
	comment.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fesetround.c (fesetround): Fix return value
	which ROUND is no valid rounding mode.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fegetenv.c (fegetenv): Set fpscr register which
	read again.
	* sysdeps/sh/sh4/fpu/ftestexcept.c: Likewise.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fraiseexcpt.c (feraiseexcept): Produce
	an exception using FPU order intentionally.

2012-04-05  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fedisblxcpt.c: New file.
	* sysdeps/sh/sh4/fpu/feenablxcpt.c: New file.
	* sysdeps/sh/sh4/fpu/fegetexcept.c: New file.
	* sysdeps/sh/sh4/fpu/feupdateenv.c: New file.

2012-04-05  Simon Josefsson  <simon@josefsson.org>

	[BZ #12340]
	* sysdeps/mach/hurd/ttyname_r.c (__ttyname_r): Return ERANGE instead of
	EINVAL when BUFLEN is too smal.

2012-04-05  Thomas Schwinge  <thomas@codesourcery.com>

	[BZ #13553]
	* sysdeps/mach/i386/machine-lock.h: Use volatile instead of __volatile.
	* sysdeps/mach/powerpc/machine-lock.h: Likewise.

2012-04-03  Andreas Jaeger  <aj@suse.de>

	[BZ #13938]
	* manual/setjmp.texi (System V contexts): Fix sentence.

	[BZ #13926]
	* sysdeps/i386/bits/byteswap.h [!__GNUC__](__bswap_constant_64):
	New macro for this case.
	[!__GNUC__] (__bswap_64): New inline function for this case.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.
	* bits/byteswap.h: Likewise.
	* sysdeps/s390/bits/byteswap.h: [!__GNUC__] (__bswap_64): Use
	ull, guard with __GLIBC_HAVE_LONG_LONG.

	* string/endian.h (htobe64,htole64,be64toh,le64toh): Guard with
	__GLIBC_HAVE_LONG_LONG.

	* string/byteswap.h (bswap_64): Guard with __GLIBC_HAVE_LONG_LONG.
	Include <features.h> for __GLIBC_HAVE_LONG_LONG.

2012-04-02 Tulio Magno Quites Machado Filho <tuliom@linux.vnet.ibm.com>

	[BZ #13691]
	* iconvdata/tcvn5712-1.c (FROM_LOOP): Test end of input using
	inptr and inend, rather than using last_ch.

2012-04-02  David S. Miller  <davem@davemloft.net>

	With help from Paul Eggert, Carlos O'Donell, and Roland McGrath.
	* stdio-common/printf-parse.h (read_int): Change return type to
	'int', return -1 on INT_MAX overflow.
	* stdio-common/vfprintf.c (vfprintf): Validate width and precision
	against overflow of INT_MAX.  Set errno to EOVERFLOW when 'done'
	overflows INT_MAX.  Check for overflow of in-format-string precision
	values properly.  Use EOVERFLOW rather than ERANGE throughout.  Use
	SIZE_MAX not INT_MAX for integer overflow test.
	* stdio-common/printf-parsemb.c: If read_int signals an overflow,
	skip the construct in the format string but do not record anything.
	* stdio-common/bug22.c: Adjust to test both width/prevision
	INT_MAX overflow as well as total length INT_MAX overflow.  Check
	explicitly for proper errno values.

2012-04-02  Thomas Schwinge  <thomas@codesourcery.com>

	* string/test-memcmp.c [! WIDE]: #include <limits.h> for CHAR_MIN,
	CHAR_MAX.
	* string/test-strcmp.c [! WIDE]: Likewise.
	* time/tst-mktime2.c: Likewise for INT_MAX.
	* string/test-string.h: #include <sys/param.h> for MIN.

	* csu/init-first.c (__libc_init_first): Call __ctype_init.
	* sysdeps/i386/init-first.c (init): Likewise.
	* sysdeps/mach/hurd/i386/init-first.c (posixland_init): Likewise.
	* sysdeps/mach/hurd/powerpc/init-first.c (posixland_init): Likewise.
	* sysdeps/sh/init-first.c (init): Likewise.

2012-04-01  Ulrich Drepper  <drepper@gmail.com>

	* po/ru.po: Update from translation team.
	* po/vi.po: Likewise.

2012-03-31  Siddhesh Poyarekar  <siddhesh@redhat.com>

	* resolv/nss_dns/dns-host.c: Merge copyright years.

2012-03-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Update.
	Optimize memcpy with prefetch if
	DATA_CACHE_SIZE_HALF <= len <  SHARED_CACHE_SIZE_HALF and
	src, dst pointers have unequal 16 byte alignments.

2012-03-30  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13928]
	* resolv/nss_dns/dns-host.c (getanswer_r): Also consider ttl
	from a CNAME entry and return the minimum ttl for the query.
	(gaih_getanswer_slice): Likewise.

2012-03-30  Jeff Law  <law@redhat.com>

	* crypt/md5-crypt.c (__md5_crypt_r): Avoid unbounded alloca uses
	due to long keys.
	* crypt/sha256-crypt.c (__sha256_crypt_r): Likewise.
	* crypt/sha512-crypt.c (__sha512_crypt_r): Likewise.

	* resolv/nss_dns/dns-host.c: Update copyright year.

2012-03-30  Ulrich Drepper  <drepper@gmail.com>

	* resolv/res_send.c (send_dg): Use sendmmsg if we have to write two
	requests to save a system call.  Fix check that all bytes are sent.

	* sysdeps/unix/sysv/linux/bits/socket.h (struct mmsghdr): Fix up
	comments for sendmmsg.

2012-03-30  Tulio Magno Quites Machado Filho  <tuliom@linux.vnet.ibm.com>

	[BZ #13691]
	* iconvdata/tcvn5712-1.c (FROM_LOOP): Fix a bug when converting strings
	with only 1 character between 0x0041 and 0x01b0.
	* wcsmbs/Makefile (tests): Add tst-mbsnrtowcs.
	* wcsmbs/tst-mbsnrtowcs.c: New file.

2012-03-29  David S. Miller  <davem@davemloft.net>

	* libio/fileops.c (_IO_new_file_xsputn): Don't try to optimize
	small copies by hand.

2012-03-28  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13761]
	* nis/nss_compat/compat-initgroups.c (getgrent_next_nss)
	(_nss_compat_initgroups_dyn): Fall back to malloc/free for large
	group memberships.

2012-03-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/memcpy.S: Implement mempcpy using a stub
	that branches into memcpy.
	* sysdeps/sparc/sparc64/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara1.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-niagara2.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy-ultra3.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Add mempcpy multiarch
	bits.
	* sysdeps/sparc/sparc64/rtld-memcpy.c: Include generic mempcpy
	implementation too.
	* sysdeps/sparc/mempcpy.S: New file.

	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Provide a hidden def to
	the IFUNC routine in the libc case.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Likewise.

	* sysdeps/sparc/sparc32/sparcv9/multiarch/rtld-memset.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/multiarch/rtld-memcpy.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/rtld-memset.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/rtld-memcpy.c: New file.
	* sysdeps/sparc/sparc64/multiarch/rtld-memset.c: New file.
	* sysdeps/sparc/sparc64/multiarch/rtld-memcpy.c: New file.
	* sysdeps/sparc/sparc64/rtld-memset.c: New file.
	* sysdeps/sparc/sparc64/rtld-memcpy.c: New file.

	* sysdeps/sparc/sparc64/multiarch/memset-niagara1.S: Unroll main
	loop to 256 bytes instead of 64 bytes and fix test signedness.

	* sysdeps/sparc/Makefile: Add -fPIC to ASFLAGS-.os here....
	* sysdeps/sparc/sparc32/Makefile: rather than here...
	* sysdeps/sparc/sparc64/Makefile: and here.

2012-03-28  Ulrich Drepper  <drepper@gmail.com>

	* malloc/mallocbug.c: Avoid warnings about unused variables.

2012-02-22  Siddhesh Poyarekar  <siddhesh@redhat.com>

	[BZ #13760]
	* resolv/nss_dns/dns-host.c (gaih_getanswer): Look for errno
	in the right place. Discard and retry query if response is
	larger than input buffer size.

2012-03-28  Joseph Myers  <joseph@codesourcery.com>

	[BZ #369]
	[BZ #2678]
	[BZ #3866]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Take absolute value of
	x for large integer exponent.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Likewise.
	* sysdeps/i386/fpu/e_powl.S (__ieee754_powl): Likewise.  Adjust
	sign of result as needed afterwards.
	* sysdeps/x86_64/fpu/e_powl.S (__ieee754_powl): Likewise.
	* sysdeps/ieee754/k_standard.c (__kernel_standard): Handle sign of
	result for underflowing pow the same as for overflow.
	(__kernel_standard_l): Handle powl overflow and underflow here
	rather than calling __kernel_standard.
	* math/libm-test.inc (pow_test): Add more tests.

	[BZ #3868]
	[BZ #13879]
	[BZ #13910]
	[BZ #13911]
	[BZ #13912]
	[BZ #13913]
	[BZ #13915]
	[BZ #13916]
	[BZ #13917]
	[BZ #13918]
	[BZ #13919]
	[BZ #13920]
	[BZ #13921]
	* sysdeps/generic/math_private.h (__kernel_standard_l): Declare.
	* sysdeps/ieee754/k_standard.c: Include <float.h>.
	(__kernel_standard_l): New function.
	* math/w_acoshl.c (__acoshl): Use __kernel_standard_l instead of
	__kernel_standard.
	* math/w_acosl.c (__acosl): Likewise.
	* math/w_asinl.c (__asinl): Likewise.
	* math/w_atan2l.c (__atan2l): Likewise.
	* math/w_atanhl.c (__atanhl): Likewise.
	* math/w_coshl.c (__coshl): Likewise.
	* math/w_exp10l.c (__exp10l): Likewise.
	* math/w_exp2l.c (__exp2l): Likewise.
	* math/w_fmodl.c (__fmodl): Likewise.
	* math/w_hypotl.c (__hypotl): Likewise.
	* math/w_j0l.c (__j0l, __y0l): Likewise.
	* math/w_j1l.c (__j1l, __y1l): Likewise.
	* math/w_jnl.c (__jnl, __ynl): Likewise.
	* math/w_lgammal.c (__lgammal): Likewise.
	* math/w_log10l.c (__log10l): Likewise.
	* math/w_log2l.c (__log2l): Likewise.
	* math/w_logl.c (__logl): Likewise.
	* math/w_powl.c (__powl): Likewise.
	* math/w_remainderl.c (__remainderl): Likewise.
	* math/w_scalbl.c (sysv_scalbl): Likewise.
	* math/w_sinhl.c (__sinhl): Likewise.
	* math/w_sqrtl.c (__sqrtl): Likewise.
	* math/w_tgammal.c (__tgammal): Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c (__expl): Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c (__expl): Likewise.
	* math/libm-test.inc (acos_test): Add more tests.
	(acosh_test): Likewise.
	(asin_test): Likewise.
	(atanh_test): Likewise.
	(exp_test): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(lgamma_test): Likewise.
	(log_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(pow_test): Do not allow some spurious overflow exceptions.
	(sqrt_test): Add more tests.
	(tgamma_test): Likewise.
	(y0_test): Likewise.
	(y1_test): Likewise.
	(yn_test): Likewise.

2012-03-27  Anton Blanchard  <anton@samba.org>

	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h: Define MAP_STACK and
	MAP_HUGETLB.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Likewise.

2012-03-27  David S. Miller  <davem@davemloft.net>

	* conform/Makefile: Run run-conformtest.sh using $(BASH).

	* sysdeps/sparc/sparc64/Makefile (ASFLAGS-.os): Move before
	have-as-vis3 check.

2012-03-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/x86_64/elf/configure.in: Moved to ...
	* sysdeps/x86_64/configure.in: ... here.
	* sysdeps/x86_64/elf/start.S: Moved to ...
	* sysdeps/x86_64/start.S: ... here.
	* sysdeps/x86_64/elf/configure: Delete.

	* sysdeps/x86_64/configure.in: Merge contents from
	sysdeps/i386/configure.in (without i686 check).

	* sysdeps/i386/elf/Versions: Merge into ...
	* sysdeps/i386/Versions: ... this.
	* sysdeps/i386/elf/Versions: Delete file.
	* sysdeps/i386/elf/start.S: Moved to ...
	* sysdeps/i386/start.S: ...here.
	* sysdeps/i386/elf/configure.in: Merge into...
	* sysdeps/i386/configure.in: ...here.
	* sysdeps/i386/elf/configure.in: Delete file.
	* sysdeps/i386/elf/configure: Delete file.

	* sysdeps/generic/elf/backtracesyms.c: Moved to ...
	* debug/backtracesyms.c: ... here.
	* sysdeps/generic/elf/backtracesymsfd.c: Moved to ...
	* debug/backtracesymsfd.c: ... here.
	* sysdeps/generic/elf/ifunc-sel.h: Moved to ...
	* sysdeps/generic/ifunc-sel.h: ... here.

	* sysdeps/unix/i386/start.c: Delete file.
	* sysdeps/unix/sparc/start.c: Delete file.
	* sysdeps/unix/start.c: Delete file.

	* sysdeps/sh/elf/configure.in: Moved to ...
	* sysdeps/sh/configure.in: ... here.
	* sysdeps/sh/elf/start.S: Moved to ...
	* sysdeps/sh/start.S: ... here.
	* sysdeps/sh/elf/configure: Delete file.

	* sysdeps/powerpc/powerpc64/elf/bzero.S: Moved to ...
	* sysdeps/powerpc/powerpc64/bzero.S: ... here.
	* sysdeps/powerpc/powerpc64/elf/entry.h: Moved to ...
	* sysdeps/powerpc/powerpc64/entry.h: ... here.
	* sysdeps/powerpc/powerpc64/elf/start.S: Moved to ...
	* sysdeps/powerpc/powerpc64/start.S: here.
	* sysdeps/powerpc/powerpc64/elf/Makefile: Merge into ...
	* sysdeps/powerpc/powerpc64/Makefile: ... this.
	* sysdeps/powerpc/powerpc64/elf/configure.in: Merge into ...
	* sysdeps/powerpc/powerpc64/configure.in: ... this.
	* sysdeps/powerpc/powerpc64/elf/configure: Delete file.

	* sysdeps/powerpc/powerpc32/elf/bzero.S: Moved to ...
	* sysdeps/powerpc/powerpc32/bzero.S: ... here.
	* sysdeps/powerpc/powerpc32/elf/start.S: Moved to ...
	* sysdeps/powerpc/powerpc32/start.S: ... here.
	* sysdeps/powerpc/powerpc32/elf/configure.in: Merge into ...
	* sysdeps/powerpc/powerpc32/configure.in: ... this.
	* sysdeps/powerpc/powerpc32/elf/configure: Delete file.

	* sysdeps/powerpc/elf/ifunc-sel.h: Moved to ...
	* sysdeps/powerpc/ifunc-sel.h: ... here.
	* sysdeps/powerpc/elf/rtld-global-offsets.sym: Moved to ...
	* sysdeps/powerpc/rtld-global-offsets.sym: ... here.

	* sysdeps/sparc/elf/configure.in: Moved to ...
	* sysdeps/sparc/configure.in: ... here.
	* sysdeps/sparc/elf/configure: Delete file.
	* sysdeps/sparc/sparc32/elf/start.S: Moved to ...
	* sysdeps/sparc/sparc32/start.S: ... here.
	* sysdeps/sparc/sparc64/elf/start.S: Moved to ...
	* sysdeps/sparc/sparc64/start.S: ... here.
	* sysdeps/sparc/sparc32/elf/Makefile: Merged into ...
	* sysdeps/sparc/sparc32/Makefile: ... this.
	* sysdeps/sparc/sparc64/elf/Makefile: Merged into ...
	* sysdeps/sparc/sparc64/Makefile: ... this.

	* sysdeps/s390/s390-32/elf/bsd-_setjmp.S: Moved to ...
	* sysdeps/s390/s390-32/bsd-_setjmp.S: ... here.
	* sysdeps/s390/s390-32/elf/bsd-setjmp.S: Moved to ...
	* sysdeps/s390/s390-32/bsd-setjmp.S: ... here.
	* sysdeps/s390/s390-32/elf/setjmp.S: Moved to ...
	* sysdeps/s390/s390-32/setjmp.S: ... here.
	* sysdeps/s390/s390-32/elf/configure.in: Moved to ...
	* sysdeps/s390/s390-32/configure.in: ... here.
	* sysdeps/s390/s390-32/elf/configure: Delete file.
	* sysdeps/s390/s390-32/elf/start.S: Moved to ...
	* sysdeps/s390/s390-32/start.S: ... here.

	* sysdeps/s390/s390-64/elf/bsd-_setjmp.S: Moved to ...
	* sysdeps/s390/s390-64/bsd-_setjmp.S: ... here.
	* sysdeps/s390/s390-64/elf/bsd-setjmp.S: Moved to ...
	* sysdeps/s390/s390-64/bsd-setjmp.S: ... here.
	* sysdeps/s390/s390-64/elf/setjmp.S: Moved to ...
	* sysdeps/s390/s390-64/setjmp.S: ... here.
	* sysdeps/s390/s390-64/elf/configure.in: Moved to ...
	* sysdeps/s390/s390-64/configure.in: ... here
	* sysdeps/s390/s390-64/elf/configure: Delete file.
	* sysdeps/s390/s390-64/elf/start.S: Moved to ...
	* sysdeps/s390/s390-64/start.S: ... here.
	* sysdeps/s390/s390-64/elf/configure: Delete.

	* configure.in: Remove support for elf directories in sysdeps.

	* configure: Regenerated.
	* sysdeps/i386/configure: Regenerated.
	* sysdeps/powerpc/powerpc32/configure: Regenerated.
	* sysdeps/powerpc/powerpc64/configure: Regenerated.
	* sysdeps/s390/s390-32/configure: Regenerated.
	* sysdeps/s390/s390-64/configure: Regenerated.
	* sysdeps/sh/configure: Regenerated.
	* sysdeps/sparc/configure: Regenerated.
	* sysdeps/x86_64/configure: Regenerated.

2012-03-26  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/ldbl-128ibm/e_expl.c (lomark): Adjust to take
	denormal result into account.

2012-03-25  Roland McGrath  <roland@hack.frob.com>

	* posix/confstr.c (confstr): Lift RESTENVS definition to function scope.
	Reported by Allan McRae <allan@archlinux.org>.

2012-03-23  Jeff Law  <law@redhat.com>

	* nss/getnssent.c (__nss_getent): Fix typo.

2012-03-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-tlsdesc.h (tlsdesc): Use anonymous union
	to pad to uint64_t for each field.
	(dl_tls_index): Replace unsigned long with uint64_t.

2012-03-23  Daniel Jacobowitz  <dmj@google.com>
	Paul Pluzhnikov  <ppluzhnikov@google.com>

	[BZ #6528]
	* grp/Makefile (otherlibs): Don't set it.
	* inet/Makefile (otherlibs): Likewise.
	* login/Makefile (otherlibs): Likewise.
	* nscd/Makefile (otherlibs): Likewise.
	* posix/Makefile (otherlibs): Likewise.
	* pwd/Makefile (otherlibs): Likewise.
	* rt/Makefile (otherlibs): Likewise.
	* sunrpc/Makefile (otherlibs): Likewise.
	* nss/Makefile (otherlibs): Likewise.
	Add libnss_files to routines and static-only-routines.
	($(objpfx)getent): Remove rule.
	* resolv/Makefile: Add libnss_dns and libresolv to routines and
	static-only-routines.

2012-03-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13892]
	* math/s_cexp.c: Include <float.h>.
	(__cexp): Handle exp result overflowing not necessarily
	overflowing both real and imaginary parts of result.
	* math/s_cexpf.c: Likewise.
	* math/s_cexpl.c: Likewise.
	* math/libm-test.inc (cexp_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* include/link.h (ELFW): New macro.
	* sysdeps/x86_64/dl-irel.h: Replace Elf64_XXX with ElfW(XXX).
	Replace ELF64_R_TYPE with ELFW(R_TYPE).

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-tls.h (dl_tls_index): Replace unsigned long
	with uint64_t.

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/generic/ldsodefs.h (struct La_x32_regs): New forward
	declaration.
	(struct La_x32_retval): Likewise.

2012-03-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/preconfigure.in: New file.
	* sysdeps/x86_64/preconfigure: New generated file.

2012-03-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13824]
	* math/e_exp2l.c: Include <float.h>.
	(__ieee754_exp2l): Handle overflow and underflow cases
	separately.  Only pass fractional part of argument to
	__ieee754_expl.
	* math/libm-test.inc (exp2_test): Add more tests.

	* sysdeps/ieee754/ldbl-128/k_cosl.c (__kernel_cosl): Negate y if
	negating x to take absolute value.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c (__kernel_sincosl):
	Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c (__kernel_cosl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c (__kernel_sincosl):
	Likewise.
	* sysdeps/ieee754/ldbl-128/k_sinl.c (__kernel_sinl): Negate y when
	computing low part if x was negated.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c (__kernel_sinl): Likewise.

2012-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* elf/tst-auditmod1.c: Support la_x32_gnu_pltenter and
	la_x32_gnu_pltexit.
	(pltexit): Cast int_retval to ptrdiff_t.
	* elf/tst-auditmod3b.c: Likewise.
	* elf/tst-auditmod4b.c: Likewise.
	* elf/tst-auditmod5b.c: Likewise.
	* elf/tst-auditmod6b.c: Likewise.
	* elf/tst-auditmod6c.c: Likewise.
	* elf/tst-auditmod7b.c: Likewise.

	* sysdeps/generic/ldsodefs.h (audit_ifaces): Add x32_gnu_pltenter
	and x32_gnu_pltexit.

	* sysdeps/x86_64/bits/link.h: Check __x86_64__ instead of
	__ELF_NATIVE_CLASS.
	(La_x32_regs): New macro.
	(La_x32_retval): Likewise.
	(la_x32_gnu_pltenter): New function prototype.
	(la_x32_gnu_pltexit): Likewise.

2012-03-21  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/ieee754/ldbl-128ibm/e_powl.c (huge, tiny): Correct
	exponent.

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* configure.in (libc_cv_cc_nofma): Check for option to disable
	generation of FMA instructions.
	* configure: Regenerate.
	* config.make.in (config-cflags-nofma): Set from libc_cv_cc_nofma.
	* sysdeps/ieee754/dbl-64/Makefile: New file.
	* sysdeps/x86_64/fpu/multiarch/Makefile (libm-sysdep_routines):
	Remove brandred-fma4.
	(CFLAGS-brandred-fma4.c): Remove.
	* sysdeps/x86_64/fpu/multiarch/brandred-fma4.c: Remove.
	* sysdeps/x86_64/fpu/multiarch/s_sin-fma4.c (__branred): Don't
	define.
	* sysdeps/x86_64/fpu/multiarch/s_tan-fma4.c (__branred): Don't
	define.

2012-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* stdio-common/_itoa.c: Check _ITOA_NEEDED instead of
	LLONG_MAX != LONG_MAX.
	(_itoa_word): Use _ITOA_WORD_TYPE on value.
	(_fitoa_word): Likewise.
	* stdio-common/_itowa.c: Check _ITOA_NEEDED instead of
	LLONG_MAX != LONG_MAX.
	* stdio-common/_itowa.h: Include <_itoa.h>.
	(_itowa_word): Use _ITOA_WORD_TYPE on value.
	(_itowa): New macro.  Defined only if _ITOA_NEEDED is false.
	* sysdeps/generic/_itoa.h (_ITOA_NEEDED): New macro.  Defined
	only if not defined.
	(_ITOA_WORD_TYPE): Likewise.
	(_itoa_word): Use _ITOA_WORD_TYPE on value.
	Check !_ITOA_NEEDED instead of LONG_MAX == LLONG_MAX.

2012-03-21  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-21  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/configure.in: Check x86_64* instead
	of x86_64 when setting libc_cv_slibdir, libdir and
	libc_cv_localedir.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

2012-03-21  Joseph Myers  <joseph@codesourcery.com>

	* manual/lang.texi (Old Varargs): Remove section.
	(How Variadic): Update menu.
	(va_start): Do not mention varargs.h.

2012-03-21  Thomas Schwinge  <thomas@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* configure.in (libc_cv_ssp): Use LIBC_TRY_CC_OPTION instead of a
	link test.
	* configure: Regenerated.

2012-03-21  Thomas Schwinge  <thomas@codesourcery.com>

	* conform/conformtest.pl: Handle --tmpdir argument, defaulting to /tmp.
	* conform/run-conformtest.sh: Pass --tmpdir argument when invoking
	conformtest.pl

2012-03-21  Joseph Myers  <joseph@codesourcery.com>

	* NOTES: Remove.
	* Makefile (files-for-dist): Remove NOTES.
	(NOTES): Remove rule.
	* README: Don't refer to NOTES.
	* manual/creature.texi: Don't include macros.texi.
	* manual/intro.texi (creature.texi): Remove comment referring to
	NOTES.

	* aclocal.m4 (LIBC_TRY_CC_OPTION): New macro.
	* configure.in (libc_cv_cc_submachine): Use LIBC_TRY_CC_OPTION.
	* configure: Regenerated.
	* sysdeps/i386/configure.in (libc_cv_cc_sse4): Use
	LIBC_TRY_CC_OPTION.
	(libc_cv_as_i686): Likewise.
	(libc_cv_cc_avx): Likewise.
	(libc_cv_cc_sse2avx): Likewise.
	(libc_cv_cc_fma4): Likewise.
	(libc_cv_cc_novzeroupper): Likewise.
	* sysdeps/i386/configure: Regenerated.

	[BZ #13883]
	* sysdeps/i386/fpu/s_cexp.S: Remove.
	* sysdeps/i386/fpu/s_cexpf.S: Likewise.
	* sysdeps/i386/fpu/s_cexpl.S: Likewise.
	* math/libm-test.inc (cexp_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-21  Allan McRae  <allan@archlinux.org>

	* timezone/Makefile: Do not install iso3166.tab and zone.tab

2012-03-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13871]
	* math/w_exp2.c: Do not include <float.h>.
	(o_threshold, u_threshold): Remove.
	(__exp2): Calculate result before checking finiteness and calling
	__kernel_standard.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/libm-test.inc (exp2_test): Require overflow exception for
	1e6 input.

	[BZ #3866]
	* sysdeps/i386/fpu/e_pow.S (__ieee754_pow): Test for y outside the
	range of signed 64-bit integers before using fistpll.  Remove
	checks for whether integers fit in mantissa bits.
	* sysdeps/i386/fpu/e_powf.S (__ieee754_powf): Test for y outside
	the range of signed 32-bit integers before using fistpl.  Remove
	checks for whether integers fit in mantissa bits.
	* sysdeps/i386/fpu/e_powl.S (p64): New object.
	(__ieee754_powl): Test for y outside the range of signed 64-bit
	integers before using fistpll.  Reduce 64-bit values to 63-bit
	ones as needed.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Ensure
	divide-by-zero is raised for zero to large negative powers.
	* sysdeps/x86_64/fpu/e_powl.S (p64): New object.
	(__ieee754_powl): Test for y outside the range of signed 64-bit
	integers before using fistpll.  Reduce 64-bit values to 63-bit
	ones as needed.
	* math/libm-test.inc (pow_test): Add more tests.

2012-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	* debug/backtracesymsfd.c: Include <_itoa.h> instead of
	<stdio-common/_itoa.h>.
	* debug/segfault.c: Likewise.
	* elf/dl-cache.c: Likewise.
	* elf/dl-minimal.c: Likewise.
	* elf/dl-misc.c: Likewise.
	* elf/dl-sysdep.c: Likewise.
	* elf/dl-version.c: Likewise.
	* elf/rtld.c: Likewise.
	* hurd/hurdsock.c: Likewise.
	* hurd/lookup-retry.c: Likewise.
	* malloc/malloc.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* nscd/nscd_getgr_r.c: Likewise.
	* nscd/nscd_getpw_r.c: Likewise.
	* nscd/nscd_getserv_r.c: Likewise.
	* posix/getopt_init.c: Likewise.
	* posix/wordexp.c: Likewise.
	* stdio-common/_itoa.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/vfprintf.c: Likewise.
	* string/_strerror.c: Likewise.
	* sysdeps/generic/elf/backtracesymsfd.c: Likewise.
	* sysdeps/i386/i686/hp-timing.h: Likewise.
	* sysdeps/mach/_strerror.c: Likewise.
	* sysdeps/mach/hurd/powerpc/register-dump.h: Likewise.
	* sysdeps/mach/hurd/sethostid.c: Likewise.
	* sysdeps/mach/hurd/xmknodat.c: Likewise.
	* sysdeps/mach/xpg-strerror.c: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc32/register-dump.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.c: Likewise.
	* sysdeps/powerpc/powerpc64/hp-timing.h: Likewise.
	* sysdeps/powerpc/powerpc64/register-dump.h: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/hp-timing.h: Likewise.
	* sysdeps/sparc/sparc64/hp-timing.h: Likewise.
	* sysdeps/unix/sysv/linux/fd_to_filename.h: Likewise.
	* sysdeps/unix/sysv/linux/futimes.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/ptsname.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh3/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sh4/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/register-dump.h: Likewise.
	* sysdeps/unix/sysv/linux/ttyname.c: Likewise.
	* sysdeps/unix/sysv/linux/ttyname_r.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/register-dump.h: Likewise.

	* stdio-common/_itoa.c: Include <_itoa.h> instead of "_itoa.h".

	* stdio-common/_itoa.h: Moved to ...
	* sysdeps/generic/_itoa.h: Here.

	* stdio-common/_itowa.c: Include <_itowa.h> instead of "_itowa.h".

	* stdio-common/printf_fphex.c: Include <_itoa.h> and <_itowa.h>
	instead of "_itoa.h" and "_itowa.h".
	* stdio-common/vfprintf.: Likewise.

2012-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h: Don't include
	<bits/wordsize.h>.
	(__signbitf): Check __x86_64__ instead of __WORDSIZE.
	(__signbit): Likewise.
	(llrintf): Likewise.
	(llrint): Likewise.

2012-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/setjmp.h (__jmp_buf): Support x86-64 with
	__WORDSIZE != 64.

2012-03-20  Joseph Myers  <joseph@codesourcery.com>

	* math/gen-libm-test.pl (%beautify): Add OVERFLOW_EXCEPTION and
	OVERFLOW_EXCEPTION_OK.
	* math/libm-test.inc ("Philosophy"): Update comment about
	exception testing.
	(OVERFLOW_EXCEPTION): Define.
	(OVERFLOW_EXCEPTION_OK): Likewise.
	(INVALID_EXCEPTION_OK): Renumber.
	(DIVIDE_BY_ZERO_EXCEPTION_OK): Likewise.
	(IGNORE_ZERO_INF_SIGN): Likewise.
	(test_exceptions): Handle FE_OVERFLOW.
	(exp10_test): Expect overflow exceptions.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(nextafter_test): Likewise.
	(pow_test): Likewise.
	(scalbn_test): Likewise.
	(scalbln_test): Likewise.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/atomic.h
	(__arch_c_compare_and_exchange_val_64_acq): Use atomic64_t on
	64bit integer.
	(atomic_exchange_acq): Likewise.
	(__arch_exchange_and_add_body): Likewise.
	(__arch_add_body): Likewise.
	(atomic_add_negative): Likewise.
	(atomic_add_zero): Likewise.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/bits/fenv.h: Don't include <bits/wordsize.h>.
	(fenv_t): Check __x86_64__ instead of __WORDSIZE.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/bits/mathdef.h: Don't include <bits/wordsize.h>.
	Check __x86_64__ instead of __WORDSIZE.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/ldd-rewrite.sed: Support x32.

2012-03-19  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/fpu/fenv_private.h: New file.
	* sysdeps/sparc/fpu/math_private.h: Use it.
	(libc_feholdexcept, libc_feholdexceptf, libc_feholdexceptl):
	Remove.
	(libc_feholdexcept_setround, libc_feholdexcept_setroundf)
	(libc_feholdexcept_setroundl): Remove.
	(libc_fetestexcept, libc_fetestexceptf, libc_fetestexceptl):
	Remove.
	(libc_fesetenv, libc_fesetenvf, libc_fesetenvl): Remove.
	(libc_feupdateenv, libc_feupdateenvf, libc_feupdateenvf): Remove.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/fpu/math_private.h (EXTRACT_WORDS64): Use
	int64_t instead of long int.
	(INSERT_WORDS64): Likewise.

2012-03-19  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/jmpbuf-unwind.h (_JMPBUF_CFA_UNWINDS_ADJ): Cast
	_Unwind_GetCFA return to _Unwind_Ptr first.

2012-03-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13629]
	* math/s_clog.c: Include <float.h>.
	(__clog): Scale large or subnormal inputs.
	* math/s_clogf.c: Likewise.
	* math/s_clogl.c: Likewise.
	* math/s_clog10.c: Include <float.h>.
	(M_LOG10_2): Define.
	(__clog10): Scale large or subnormal inputs.
	* math/s_clog10f.c: Likewise.
	* math/s_clog10l.c: Likewise.
	* math/libm-test.inc (clog_test): Add more tests.
	(clog10_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #11451]
	* sysdeps/ieee754/dbl-64/e_atan2.c (__ieee754_atan2): Scale large
	x and y.
	* math/libm-test.inc (atan2_test): Add another test.

	* Makerules (common-objdir-compile): Remove.
	* sysdeps/unix/Makefile (config-generated): Do not add
	$(unix-generated) to variable.
	[generic bits/local_lim.h] (mk-local_lim-CFLAGS): Remove variable.
	[generic bits/local_lim.h] ($(common-objpfx)bits/local_lim.h):
	Remove rule.
	[generic bits/local_lim.h] ($(common-objpfx)mk-local_lim):
	Likewise.
	[generic bits/local_lim.h] (before-compile): Do not append to
	variable.
	[generic bits/local_lim.h] (common-generated): Likewise.
	[generic sys/param.h] (before-compile): Do not append to variable.
	[generic sys/param.h] ($(common-objpfx)sys/param.h): Remove rule.
	[generic sys/param.h] ($(common-objpfx)param.h.c): Likewise.
	[generic sys/param.h] ($(common-objpfx)param.h.dep): Likewise.
	[generic sys/param.h] ($(common-objpfx)param.h.dep): Do not
	include.
	[generic sys/param.h] (sys/param.h-includes): Remove variable.
	[generic sys/param.h] (sys/param.h-includes): Remove rule.
	[generic sys/param.h] ($(addprefix
	$(common-objpfx),$(sys/param.h-includes))): Likewise.
	[generic sys/param.h] (common-generated): Do not append to
	variable.
	[generic sys/param.h] (sysdep_headers): Likewise.
	[generic bits/errno.h] (before-compile): Do not append to
	variable.
	[generic bits/errno.h] ($(common-objpfx)bits/errno.h): Remove
	rule.
	[generic bits/errno.h] ($(common-objpfx)make-errnos): Likewise.
	[generic bits/errno.h] ($(common-objpfx)make-errnos.c): Likewise.
	[generic bits/errno.h] ($(common-objpfx)errnos): Likewise.
	[generic bits/errno.h] (common-generated): Do not append to
	variable.
	[generic bits/ioctls.h] (before-compile): Do not append to
	variable.
	[generic bits/ioctls.h] ($(common-objpfx)bits/ioctls.h): Remove
	rule.
	[generic bits/ioctls.h] (ioctl-includes): Remove variable.
	[generic bits/ioctls.h] (make-ioctls-CFLAGS): Likewise.
	[generic bits/ioctls.h] ($(common-objpfx)make-ioctls): Remove
	rule.
	[generic bits/ioctls.h] ($(common-objpfx)make-ioctls.c): Likewise.
	[generic bits/ioctls.h] (bits_termios.h): Remove variable.
	[generic bits/ioctls.h] ($(common-objpfx)ioctls): Remove rule.
	[generic bits/ioctls.h] (common-generated): Do not append to
	variable.
	[generic sys/syscall.h] (syscall.h): Remove variable.
	[generic sys/syscall.h] ($(common-objpfx)sys/syscall.h): Remove
	rule.
	[generic sys/syscall.h] (before-compile): Do not append to
	variable.
	[generic sys/syscall.h] (common-generated): Likewise.
	* sysdeps/unix/errnos-tmpl.c: Remove file.
	* sysdeps/unix/errnos.awk: Likewise.
	* sysdeps/unix/ioctls-tmpl.c: Likewise.
	* sysdeps/unix/ioctls.awk: Likewise.
	* sysdeps/unix/mk-local_lim.c: Likewise.
	* sysdeps/unix/snarf-ioctls: Likewise.

2012-03-19  Richard Henderson  <rth@twiddle.net>

	* sysdeps/i386/fpu/fenv_private.h: New file.
	* sysdeps/i386/fpu/math_private.h: Use it.
	(math_opt_barrier, math_force_eval): Remove.
	(libc_feholdexcept_setround_53bit): Remove.
	(libc_feupdateenv_53bit): Remove.
	* sysdeps/x86_64/fpu/math_private.h: Likewise.
	(math_opt_barrier, math_force_eval): Remove.
	(libc_feholdexcept): Remove.
	(libc_feholdexcept_setround): Remove.
	(libc_fetestexcept, libc_fesetenv): Remove.
	(libc_feupdateenv_test): Remove.
	(libc_feupdateenv, libc_feholdsetround): Remove.
	(libc_feresetround): Remove.

	* sysdeps/i386/fpu/feholdexcpt.c (feholdexcept): Avoid the fldenv.
	* sysdeps/x86_64/fpu/feholdexcpt.c (feholdexcept): Likewise.

	* sysdeps/generic/math_private.h (default_libc_feupdateenv_test): New.
	(libc_feupdateenv_test, libc_feupdateenv_testf): New.
	(libc_feupdateenv_testl): New.
	* sysdeps/x86_64/fpu/math_private.h (libc_feupdateenv_test): New.
	(libc_feupdateenv_testf): New.
	(libc_feupdateenv): Use libc_feupdateenv_test.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Use libc_feupdateenv_test.
	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Likewise.

	* sysdeps/generic/math_private.h (libc_feholdsetround): New.
	(libc_feholdsetroundf, libc_feholdsetroundl): New.
	(libc_feresetround, libc_feresetroundf, libc_feresetroundl): New.
	(libc_feresetround_noex): New.
	(libc_feresetround_noexf): New.
	(libc_feresetround_noexl): New.
	(SET_RESTORE_ROUND, SET_RESTORE_ROUNDF, SET_RESTORE_ROUNDL): New.
	(SET_RESTORE_ROUND_NOEX, SET_RESTORE_ROUND_NOEXF): New.
	(SET_RESTORE_ROUND_NOEXL, SET_RESTORE_ROUND_53BIT): New.
	* sysdeps/ieee754/dbl-64/e_exp.c (__ieee754_exp): Use
	SET_RESTORE_ROUND.
	* sysdeps/ieee754/dbl-64/e_pow.c (__ieee754_pow): Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Use SET_RESTORE_ROUND_53BIT.
	(__cos): Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c (__tan): Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Use
	SET_RESTORE_ROUND_NOEX.
	* sysdeps/ieee754/dbl-64/e_exp2f.c (__ieee754_exp2f): Use
	SET_RESTORE_ROUND_NOEXF.
	* sysdeps/ieee754/flt-32/e_expf.c (__ieee754_expf): Likewise.
	* sysdeps/x86_64/fpu/math_private.h (libc_feholdsetround): New.
	(libc_feholdsetroundf): New.
	(libc_feresetround, libc_feresetroundf): New.

	* sysdeps/i386/fpu/math_private.h: Include <fenv.h>, <fpu_control.h>.
	(libc_feholdexcept_setround_53bit): Convert from macro to function.
	(libc_feupdateenv_53bit): Likewise.  Don't force _FPU_EXTENDED.

	* sysdeps/generic/math_private.h: Include <fenv.h>.
	(default_libc_feholdexcept): New.
	(default_libc_feholdexcept_setround): New.
	(default_libc_fesetenv, default_libc_feupdateenv): New.
	(libc_feholdexcept): Only define if undefined.
	(libc_feholdexceptf, libc_feholdexceptl): Likewise.
	(libc_feholdexcept_setround, libc_feholdexcept_setroundf): Likewise.
	(libc_feholdexcept_setroundl): Likewise.
	(libc_feholdexcept_setround_53bit): Likewise.
	(libc_fetestexcept, libc_fetestexceptf, libc_fetestexceptl): Likewise.
	(libc_fesetenv, libc_fesetenvf, libc_fesetenvl): Likewise.
	(libc_feupdateenv, libc_feupdateenvf, libc_feupdateenvl): Likewise.
	(libc_feupdateenv_53bit): Likewise.
	* sysdeps/x86_64/fpu/math_private.h: Include <fenv.h>.
	(libc_feholdexcept): Convert from macro to inline function.
	(libc_feholdexcept_setround, libc_fetestexcept): Likewise.
	(libc_fesetenv, libc_feupdateenv): Likewise.

	* sysdeps/generic/math_private.h (GET_HIGH_WORD): Define only if
	not previously defined.
	(GET_LOW_WORD, EXTRACT_WORDS64, INSERT_WORDS): Likewise.
	(INSERT_WORDS64, SET_HIGH_WORD, SET_LOW_WORD): Likewise.
	(GET_FLOAT_WORD, SET_FLOAT_WORD): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/math_private.h: New file.
	* sysdeps/ieee754/flt-32/math_private.h: New file.
	* sysdeps/x86_64/fpu/math_private.h: Move the include_next of
	math_private.h below SET_FLOAT_WORD.
	(__isnan, __isinf_ns, __finite): Remove.
	(__isnanf, __isinf_nsf, __finitef): Remove.

2012-03-18  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-17  David S. Miller  <davem@davemloft.net>

	[BZ #6471]
	* sysdeps/unix/sysv/linux/sparc/Versions: Add __getshmlba entry
	for 2.16.

2012-03-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/shmat.c (shmat): Use -1l to avoid
	warnings.

	[BZ #6471]
	* sysdeps/unix/sysv/linux/shmat.c (shmat): Test for syscall errors
	properly.
	* sysdeps/unix/sysv/linux/sparc/getshmlba.c: New file.
	* sysdeps/unix/sysv/linux/sparc/Makefile: Add getshmlba to
	sysdep_routines when subdir is sysvipc.
	* sysdeps/unix/sysv/linux/sparc/bits/shm.h (SHMLBA): Use new
	__getshmlba helper.

	* sysdeps/sparc/fpu/libm-test/ulps: Update.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/ffsll.c (ffsl): Define alias only under
	[__LP64__].

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Moved to ...
	* sysdeps/ieee754/dbl-64/wordsize-64/s_llround.c: This.
	(__lround): Renamed to ...
	(__llround): This.  Replace long int with long long int.
	Define lround functions as aliases of llround functions.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Empty file.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/makecontext.c (__makecontext):
	Use greg_t on sp.  Use unsigned int on idx_uc_link.  Cast
	adresses to uintptr_t.  Replace "long int" and "unsigned long
	int" with "greg_t" on va_arg.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/generic/ldconfig.h (FLAG_X8664_LIBX32): New macro.
	* elf/cache.c (print_entry): Handle FLAG_X8664_LIBX32.

	* sysdeps/unix/sysv/linux/i386/readelflib.c (process_elf_file):
	Move e_machine check before EI_CLASS check.  Handle x32
	libraries.  Check EM_IA_64 only if SKIP_EM_IA_64 isn't defined.
	* sysdeps/unix/sysv/linux/x86_64/readelflib.c: Just define
	SKIP_EM_IA_64 and include
	<sysdeps/unix/sysv/linux/i386/readelflib.c>.

	* sysdeps/unix/sysv/linux/x86_64/dl-cache.h:
	Don't include <sysdeps/unix/sysv/linux/sparc/dl-cache.h>.
	(add_system_dir): New macro.

	* sysdeps/unix/sysv/linux/x86_64/ldconfig.h
	(SYSDEP_KNOWN_INTERPRETER_NAMES): Add /libx32/ld-linux-x32.so.2.

2012-03-16  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2551]
	[BZ #2552]
	[BZ #2553]
	[BZ #2554]
	[BZ #2562]
	[BZ #2563]
	[BZ #2565]
	[BZ #2566]
	[BZ #2576]
	* math/w_j0.c (j0): Don't produce TLOSS errors for POSIX libm.
	(y0): Likewise.
	* math/w_j0f.c (j0f): Likewise.
	(y0f): Likewise.
	* math/w_j0l.c (__j0l): Likewise.
	(__y0l): Likewise.
	* math/w_j1.c (j1): Likewise.
	(y1): Likewise.
	* math/w_j1f.c (j1f): Likewise.
	(y1f): Likewise.
	* math/w_j1l.c (__j1l): Likewise.
	(__y1l): Likewise.
	* math/w_jn.c (jn): Likewise.
	(yn): Likewise.
	* math/w_jnf.c (jnf): Likewise.
	(ynf): Likewise.
	* math/w_jnl.c (__jnl): Likewise.
	(__ynl): Likewise.
	* math/libm-test.inc (j0_test): Add more tests.
	(j1_test): Likewise.
	(jn_test): Likewise.  Add trailing semicolon to existing test.
	(y0_test): Likewise.
	(y1_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #13851]
	[BZ #13854]
	* sysdeps/ieee754/dbl-64/s_tan.c (tan): Use
	libc_feholdexcept_setround_53bit and libc_feupdateenv_53bit.
	* sysdeps/ieee754/ldbl-96/k_tanl.c: New file.
	* sysdeps/ieee754/ldbl-96/s_tanl.c: Include <errno.h>.
	(__tanl): Set errno for infinite argument.
	* sysdeps/i386/fpu/mptan.c: Remove.
	* sysdeps/i386/fpu/s_tan.S: Likewise.
	* sysdeps/i386/fpu/s_tanl.S: Likewise.
	* sysdeps/x86_64/fpu/k_tanl.c: Likewise.
	* sysdeps/x86_64/fpu/s_tanl.S: Likewise.
	* math/libm-test.inc (tan_test): Add more tests and enable more
	tests for double and long double.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-16  Jan Kratochvil  <jan.kratochvil@redhat.com>

	* sysdeps/x86_64/elf/start.S: Include <sysdep.h>.
	(_start): Add cfi_startproc, cfi_undefined for rip and cfi_endproc.

2012-03-16  Roland McGrath  <roland@hack.frob.com>

	* aclocal.m4 (LIBC_PRECONFIGURE): New macro.
	* configure.in: Use it for both main tree and add-ons.
	* configure: Regenerated.

2012-03-16  H.J. Lu  <hongjiu.lu@intel.com>

	* time/offtime.c (__offtime): Use time_t on days, rem, y and yg.

2012-03-16  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/ldbl-96/t_sincosl.c: Include generator program
	in comment.

	[BZ #13851]
	* sysdeps/ieee754/ldbl-96/e_rem_pio2l.c: New file.
	* sysdeps/ieee754/ldbl-96/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/t_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cosl.c (__cosl): Correct test for
	infinite argument.
	* sysdeps/ieee754/ldbl-96/s_sinl.c (__sinl): Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Handle __FLT_EVAL_METHOD__
	!= 0 for prec == 2.
	* sysdeps/i386/fpu/e_rem_pio2l.c: Remove.
	* sysdeps/i386/fpu/k_rem_pio2.c: Likewise.
	* sysdeps/i386/fpu/s_cosl.S: Likewise.
	* sysdeps/i386/fpu/s_sincosl.S: Likewise.
	* sysdeps/i386/fpu/s_sinl.S: Likewise.
	* sysdeps/x86_64/fpu/e_rem_pio2l.c: Likewise.
	* sysdeps/x86_64/fpu/k_cosl.c: Likewise.
	* sysdeps/x86_64/fpu/k_sinl.c: Likewise.
	* sysdeps/x86_64/fpu/s_cosl.S: Likewise.
	* sysdeps/x86_64/fpu/s_sincosl.S: Likewise.
	* sysdeps/x86_64/fpu/s_sinl.S: Likewise.
	* math/libm-test.inc (cos_test): Add more tests and enable more
	tests for long double.
	(sin_test): Likewise.
	(sincos_test): Likewise.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-16  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/math_private.h: New file.

2012-03-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fma-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fma.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaf.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fma-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fma.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaf.c: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Add fma/fmaf
	sysdep routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Likewise.

	* sysdeps/sparc/sparc32/fpu/s_fma.c: New file.
	* sysdeps/sparc/sparc64/fpu/s_fma.c: New file.

	* sysdeps/sparc/sparc-ifunc.h: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: Use
	sparc-ifunc.h
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysign.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysignf.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabs.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabsf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrintf.S:
	Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rintf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finite.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finitef.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmax.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinff.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnan.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnanf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrintf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rintf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf.S: Likewise.

2012-03-15  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/e_hypotf.c: Use double precision instead of
	scaling.
	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-15  Andreas Jaeger  <aj@suse.de>

	[BZ #13852]
	* sysdeps/i386/fpu/e_rem_pio2f.c: Delete so that i386 uses the
	ieee754/flt-32 implementation for sin, cos and sincos.
	* sysdeps/i386/fpu/k_rem_pio2f.c: Likewise.
	* sysdeps/i386/fpu/s_cosf.S: Likewise.
	* sysdeps/i386/fpu/s_sincosf.S: Likewise.
	* sysdeps/i386/fpu/s_sinf.S: Likewise.
	* sysdeps/i386/fpu/s_tanf.S: Delete so that i386 uses the
	ieee754/flt-32 implementation for tan.

	* math/libm-test.inc (cos_test): Enable some large input tests for
	float as well
	(sin_test): Likewise.
	(sincos_test): Likewise.
	(tan_test): Add tests for large input.

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-03-15  Andreas Jaeger  <aj@suse.de>

	[BZ #13658]
	* math/libm-test.inc (cos_test): Add more test cases.
	(sin_test): Likewise.
	(sincos_test): Likewise.

2012-03-15  Andreas Jaeger  <aj@suse.de>

	[BZ #13837]
	* math/libm-test.inc (cos_test): Add a test case for large input
	value.
	(sin_test): Likewise.
	(sincos_test): Likewise.

2012-03-15  Andreas Jaeger  <aj@suse.de>
	    Joseph Myers  <joseph@codesourcery.com>

	[BZ #13658]
	* sysdeps/x86_64/fpu/s_sincos.S: Delete files so that
	x86-64 and i386 use the iee754/dbl-64 sin and cos implementation.
	* sysdeps/i386/fpu/branred.c: Likewise.
	* sysdeps/i386/fpu/dosincos.c: Likewise.
	* sysdeps/i386/fpu/mpa.c: Likewise.
	* sysdeps/i386/fpu/s_cos.S: Likewise.
	* sysdeps/i386/fpu/s_sin.S: Likewise.
	* sysdeps/i386/fpu/s_sincos.S: Likewise.
	* sysdeps/i386/fpu/sincos32.c: Likewise.

	* sysdeps/generic/math_private.h (libc_feholdexcept_setround_53bit):
	Define.
	(libc_feupdateenv_53bit): Define.
	* sysdeps/i386/fpu/math_private.h (libc_feholdexcept_setround_53bit):
	Define.
	(libc_feupdateenv_53bit): Define.

	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Do double arithmetic in
	53 bit (without extend i386 double precision).

	* math/libm-test.inc (sincos_test): Add tests for large input.
	(sin): Likewise.
	(cos): Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Update ULPs.

2012-03-15  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-15  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/fpu/s_fmax.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fmin.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_fminf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmax.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fmin.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fminf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmax.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fmin.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_fminf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmax.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmaxf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fmin.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fminf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Add new vis3
	fmin/fmax sysdep routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Likewise.

2012-03-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceil.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_ceilf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finite-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finite.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finitef-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_finitef.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floor.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_floorf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinff-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isinff.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnan-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnan.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnanf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_isnanf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrint-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrint.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrintf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_lrintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rint-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rint.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rintf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_rintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: Add new VIS3
	routines.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceil.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_ceilf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabs-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabs.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabsf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_fabsf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floor.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_floorf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrint.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrintf-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_llrintf.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rintf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_rintf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrt.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf-vis3.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/w_sqrtf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: Add new
	VIS3 routines.

	* sysdeps/sparc/sparc32/sparcv9/fpu/unix/sysv/linux/multiarch/Implies:
	New file.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/configure.in: New file.
	* sysdeps/sparc/configure: Generate.
	* configure.in (libc_cv_sparc_as_vis3): Substitute.
	* configure: Regenerate.
	* config.h.in (HAVE_AS_VIS3_SUPPORT): New.
	* config.make.in (have-as-vis3): New.
	* sysdeps/sparc/sparc32/sparcv9/Makefile (ASFLAGS-*): If VIS3 is
	available use -Av9d instead of -Av9a.
	* sysdeps/sparc/sparc64/Makefile: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/Makefile: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysign-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysign.S: New
	file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysignf-vis3.S:
	New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/multiarch/s_copysignf.S: New
	file.
	* sysdeps/sparc/sparc64/fpu/multiarch/Makefile: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbit.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf-vis3.S: New file.
	* sysdeps/sparc/sparc64/fpu/multiarch/s_signbitf.S: New file.

	* sysdeps/sparc/sparc64/fpu/s_copysign.S (__copysign): Use
	fzeros/fnegs to load 0x80000000 into a float register instead of
	using the stack.
	* sysdeps/sparc/sparc64/fpu/s_copysignf.S (__copysignf): Likewise.

2012-03-14  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/syscall.h.
	($(objpfx)syscall-%.h): Rename rule to $(objpfx)bits/syscall%h.
	($(objpfx)syscall-%.d): Rename rule to $(objpfx)bits/syscall%d.
	($(inst_includedir)/bits/syscall.h): Remove rule.
	($(objpfx)bits/syscall.d): Include instead of
	$(objpfx)syscall-list.d.
	(generated): Change syscall-list.h and syscall-list.d to
	bits/syscall.h and bits/syscall.d.

2012-03-14  Roland McGrath  <roland@hack.frob.com>

	[BZ #13846]
	* manual/llio.texi (Memory-mapped I/O): Fix wrong function name.

2012-03-14  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13841]
	* math/s_csqrt.c: Include <float.h>.
	(__csqrt): Scale large or subnormal inputs.
	* math/s_csqrtf.c: Likewise.
	* math/s_csqrtl.c: Likewise.
	* math/libm-test.inc (csqrt_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #13840]
	* math/libm-test.inc (hypot_test): Add more tests.

2012-03-13  David S. Miller  <davem@davemloft.net>

	[BZ #13840]
	* sysdeps/ieee754/flt-32/e_hypotf.c (__ieee754_hypotf): Rewrite to use
	double-precision for the calculation instead of scaling.

2012-03-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/ieee754/dbl-64/s_nearbyint.c (__nearbyint): Do not
	manipulate bits before adding and subtracting TWO52[sx].
	* sysdeps/ieee754/dbl-64/s_rint.c (__rint): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c (__nearbyint):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_rint.c (__rint): Likewise.

2012-03-13  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/Makefile: Remove rtld-global-offsets.sym handling.
	* sysdeps/sparc/elf/rtld-global-offsets.sym: Delete.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Don't include
	rtld-global-offsets.h
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.

	* sysdeps/ieee754/ldbl-128/s_expm1l.c (__expm1l): Use expl for
	large parameters.

	* sysdeps/unix/sysv/linux/sparc/sparc64/dl-fxstatat64.c: New file.

	* sysdeps/unix/sysv/linux/openat.c (OPENAT_NOT_CANCEL): Declare syscall
	'err' in the ifdef scope in which it is actually used.

	* nss/nss_db/db-init.c: Include string.h

2012-03-12  David S. Miller  <davem@davemloft.net>

	* sysdeps/generic/dl-osinfo.h (_dl_setup_stack_chk_guard): Fix
	masking out of the most significant byte of random value used.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Fix coding style in previous change.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_CLONE_THREAD_FLAGS): Set on sparc when 2.5.64 and later.
	(__ASSUME_TGKILL): Set on sparc when 2.6.1 and later, simplify
	expression.
	(__ASSUME_FADVISE64_64_SYSCALL): Set on sparc when 2.6.1 and
	later.

2012-03-11  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/makecontext.c
	(__makecontext): Fix signedness of pointer casts setting up 'sp'.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (INLINE_SYSCALL) Use 'long'
	for 'resultvar' otherwise things get truncated on 64-bit.

	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Fix masking out of the most significant byte of random value used.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-10  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-09  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Protect local
	variables with appropriate CPP guards.
	* sysdeps/sparc/sparc32/dl-trampoline.S: Propagate the stack_ptr
	from the frame pointer, not the stack pointer.  Correct layout
	comments.  Fix test on resulting framesize and the management of
	the outregs buffer for pltexit.  Preserve floating point return
	values across _dl_call_pltexit call.
	* sysdeps/sparc/sparc64/dl-trampoline.S: Fix test on resulting
	framesize and the management of the outregs buffer for pltexit.
	Preserve floating point return values across _dl_call_pltexit
	call.
	* elf/sotruss-lib.c (la_sparc32_gnu_pltenter)
	(la_sparc64_gnu_pltenter, la_sparc32_gnu_pltexit)
	(la_sparc64_gnu_pltexit): New functions.
	(print_exit): Fix format string for return register value.

2012-03-10  Joseph Myers  <joseph@codesourcery.com>

	* sunrpc/Makefile (others): Add rpcgen.
	($(objpfx)rpcgen): Remove special build rule and dependency on
	libc.
	* sunrpc/rpcgen.c: New file.

2012-03-09  Paul Eggert  <eggert@cs.ucla.edu>

	[BZ #13673]
	* posix/bug-regex33.c: Replace FSF snail mail address with URL.
	* stdio-common/bug-vfprintf-nargs.c: Likewise.
	* sysdeps/i386/crti.S: Likewise.
	* sysdeps/i386/crtn.S: Likewise.
	* sysdeps/powerpc/powerpc32/crti.S: Likewise.
	* sysdeps/powerpc/powerpc32/crtn.S: Likewise.
	* sysdeps/powerpc/powerpc64/crti.S: Likewise.
	* sysdeps/powerpc/powerpc64/crtn.S: Likewise.
	* sysdeps/sh/crti.S: Likewise.
	* sysdeps/sh/crtn.S: Likewise.
	* sysdeps/x86_64/fpu/e_expf.S: Likewise.

	[BZ #13673]
	* locale/programs/charmap-kw.gperf: Replace FSF snail mail address
	with URL.
	* locale/programs/locfile-kw.gperf: Likewise.
	* locale/programs/charmap-kw.h: Regenerated.
	* locale/programs/locfile-kw.h: Likewise.

	[BZ #13673]
	* intl/plural.y: Replace FSF snail mail address with URL.
	* intl/plural.c: Regenerated.

2012-03-09  Richard Henderson  <rth@twiddle.net>

	* include/math_private.h: Remove file.
	* math/math_private.h: Move file ...
	* sysdeps/generic/math_private.h: ... here.

	* sysdeps/i386/fpu/math_private.h: Use include_next for math_private.h.
	* sysdeps/powerpc/fpu/math_private.h: Likewise.
	* sysdeps/x86_64/fpu/math_private.h: Likewise.

	* sysdeps/i386/fpu/s_fpclassifyl.c: Use <> to include both <math.h>
	and <math_private.h>.
	* sysdeps/i386/fpu/s_isinfl.c: Likewise.
	* sysdeps/i386/fpu/s_isnanl.c: Likewise.
	* sysdeps/i386/fpu/s_nextafterl.c: Likewise.
	* sysdeps/i386/fpu/s_nexttoward.c: Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/dbl-64/branred.c: Likewise.
	* sysdeps/ieee754/dbl-64/doasin.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_cbrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_copysign.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fabs.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fpclassify.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ilogb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isinf_ns.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_llrint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_llround.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_lrint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_lround.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_round.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_scalbn.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_signbit.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_trunc.c: Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowpow.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf_ns.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_lround.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_modf.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_trunc.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acosf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_asinf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atan2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_coshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_fmodf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_hypotf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log10f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_logf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_powf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_remainderf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sinhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sqrtf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_asinhf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_atanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_cbrtf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ceilf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_copysignf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_expm1f.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fabsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_finitef.c: Likewise.
	* sysdeps/ieee754/flt-32/s_floorf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fpclassifyf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_frexpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ilogbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isinff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isnanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_llrintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_llroundf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_lrintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_lroundf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_modff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nearbyintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nextafterf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_remquof.c: Likewise.
	* sysdeps/ieee754/flt-32/s_rintf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_scalblnf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_scalbnf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_signbitf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_sincosf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_truncf.c: Likewise.
	* sysdeps/ieee754/k_standard.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cbrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isinf_nsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_truncl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_rem_pio2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ctanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_expm1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinf_nsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_log1pl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cbrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fpclassifyl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isinf_nsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isinfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_remquol.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_signbitl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_sincosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_truncl.c: Likewise.
	* sysdeps/ieee754/s_lib_version.c: Likewise.
	* sysdeps/ieee754/s_matherr.c: Likewise.
	* sysdeps/ieee754/s_signgam.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.
	* sysdeps/powerpc/fpu/e_rem_pio2f.c: Likewise.
	* sysdeps/powerpc/fpu/k_cosf.c: Likewise.
	* sysdeps/powerpc/fpu/k_rem_pio2f.c: Likewise.
	* sysdeps/powerpc/fpu/k_sinf.c: Likewise.
	* sysdeps/powerpc/fpu/s_cosf.c: Likewise.
	* sysdeps/powerpc/fpu/s_float_bitwise.h: Likewise.
	* sysdeps/powerpc/fpu/s_isnan.c: Likewise.
	* sysdeps/powerpc/fpu/s_rint.c: Likewise.
	* sysdeps/powerpc/fpu/s_rintf.c: Likewise.
	* sysdeps/powerpc/fpu/s_sinf.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc32/fpu/s_llrintf.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc32/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowexp.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/slowpow.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.

2012-03-09  Joseph Myers  <joseph@codesourcery.com>

	* sunrpc/rpc_cout.c: Remove __GNU_LIBRARY__ conditionals.
	* sunrpc/rpc_main.c: Likewise.
	* sunrpc/rpc_svcout.c: Likewise.

2012-03-09  David S. Miller  <davem@davemloft.net>

	* include/math_private.h: New file.

2012-03-09  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/socket_type.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/socket_type.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Get enum __socket_type
	from <bits/socket_type.h>.
	(enum __socket_type): Don't define here.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Remove.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/socket_type.h.

	[BZ #13566]
	* libio/stdio.h (gets): Always declare for C++ up to C++11 without
	checking __USE_GNU.

	* Makerules ($(inst_includedir)/%.h): New rule.
	* stdio-common/Makefile (headers): Add bits/stdio_lim.h.
	(install-others): Remove variable setting.
	($(inst_includedir)/bits/stdio_lim.h): Remove rule.

2012-03-08  Richard Henderson  <rth@twiddle.net>

	* sysdeps/powerpc/fpu/math_private.h (__ieee754_sqrt): Convert
	from macro to inline function; merge with the
	!__LIBC_INTERNAL_MATH_INLINES version.
	(__ieee754_sqrtf): Likewise.

	* sysdeps/x86_64/fpu/math_private.h (__rint): Convert from macro
	to inline function.
	(__rintf, __floor, __floorf): Likewise.

	* sysdeps/x86_64/fpu/math_private.h (__ieee754_sqrt): Convert from
	macro to inline function.
	(__ieee754_sqrtf, __ieee754_sqrtl): Likewise.

	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h: Include <math_private.h>,
	not <math/math_private.h>.

2012-03-08  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c: Update
	copyright year.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h: Likewise.

2012-03-08  Thomas Schwinge  <thomas@codesourcery.com>

	* resolv/gai_misc.c (handle_requests): Fix struct timespec
	normalization.
	* rt/tst-cpuclock2.c (test_nanosleep): Likewise.
	* sysdeps/pthread/aio_misc.c (handle_fildes_io): Likewise.

2012-03-08  Ulrich Drepper  <drepper@gmail.com>

	* stdio-common/tst-fphex.c: Various cleanups.  The macros cannot
	be defined individually, they must be defined as a block.  Define
	S for printing a string instead of hidint the different by using a
	macro for adding the 'l'.
	* stdio-common/tst-fphex-wide.c: Adjust.

2012-03-07  Marek Polacek  <polacek@redhat.com>

	* stdio-common/tst-long-dbl-fphex.c: Fix test for non ldbl-96 targets.

2012-03-08  Marek Polacek  <polacek@redhat.com>

	[BZ #13806]
	* stdio-common/Makefile (tests): Add tst-fphex-wide.
	* stdio-common/tst-fphex.c: Define a few macros to make the
	test reusable.  Use them.
	* stdio-common/tst-fphex-wide.c: New file.

2012-03-08  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6911]
	* manual/macros.texi (gnusystems): New macro.
	(nongnusystems): Likewise.
	(gnulinuxhurdsystems): Likewise.
	(gnuhurdsystems): Likewise..
	(gnulinuxsystems): Likewise.
	* manual/charset.texi: Use new macros or @theglibc{} to refer to
	variants of the GNU system, not "GNU system".
	* manual/conf.texi: Likewise.
	* manual/errno.texi: Likewise.  Update example of errno macro
	expansion.
	* manual/filesys.texi: Likewise.
	(getumask): Document as specific to GNU/Hurd.
	* manual/install.texi: Likewise.  Reword some references to
	GNU/Linux.
	* manual/intro.texi: Likewise.
	* manual/io.texi: Likewise.
	(File Name Portability): Detail which constraints are inapplicable
	to all GNU systems and which are only inapplicable to GNU/Hurd.
	* manual/job.texi: Likewise.
	* manual/llio.texi: Likewise.
	(O_NOCTTY): Document as present on GNU/Linux.
	* manual/maint.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/pattern.texi: Likewise.
	* manual/pipe.texi: Likewise.
	* manual/process.texi: Likewise.
	* manual/resource.texi: Likewise.
	(RUSAGE_CHILDREN): Remove statement about specifying a particular
	child on GNU/Hurd.
	* manual/setjmp.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/startup.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/terminal.texi: Likewise.
	(ONLCR): Document as POSIX.
	(OXTABS): Document availability on GNU/Linux as XTABS.
	(ONOEOT): Document availability separately from other bits.
	(VLNEXT, VDISCARD, VSTATUS): Document availability individually.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.
	* INSTALL: Regenerated.
	* sysdeps/gnu/errlist.c: Regenerated.

	* aclocal.m4 (LIBC_TRY_LINK_STATIC): New macro.
	* configure.in (libc_cv_preinit_array): Use LIBC_TRY_LINK_STATIC.
	(libc_cv_ctors_header): Likewise.  Use asm ("") instead of calling
	puts.
	* configure: Regenerated.

2012-03-07  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/configure.in (cpuid.h): Use AC_CHECK_HEADER with no
	default includes instead of AC_HEADER_CHECK.
	* sysdeps/i386/configure: Regenerated.

	[BZ #10716]
	* math/s_cacosh.c (__cacosh): Convert negative log results to 0.
	* math/s_cacoshf.c (__cacoshf): Likewise.
	* math/s_cacoshl.c (__cacoshl): Likewise.
	* math/s_casinh.c (__casinh): Set signs of result from argument.
	* math/s_casinhf.c (__casinhf): Likewise.
	* math/s_casinhl.c (__casinhl): Likewise.
	* math/libm-test.inc (cacos_test, cacosh_test, casin_test)
	(casinh_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-07  Ulrich Drepper  <drepper@gmail.com>

	* po/zh_TW.po: Update from translation team.

	* login/Makefile (distribute): Remove variable.
	* catgets/Makefile: Likewise.
	* mach/Makefile: Likewise.
	* malloc/Makefile: Likewise.
	* misc/Makefile: Likewise.
	* iconv/Makefile: Likewise.
	* nscd/Makefile: Likewise.
	* hurd/Makefile: Likewise.
	* manual/Makefile: Likewise.
	* locale/Makefile: Likewise.
	* intl/Makefile: Likewise.
	* conform/Makefile: Likewise.
	* nss/Makefile: Likewise.
	* time/Makefile: Likewise.
	* soft-fp/Makefile: Likewise.
	* dirent/Makefile: Likewise.
	* gmon/Makefile: Likewise.
	* po/Makefile: Likewise.
	* rt/Makefile: Likewise.
	* socket/Makefile: Likewise.
	* math/Makefile: Likewise.
	* signal/Makefile: Likewise.
	* debug/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* timezone/Makefile: Likewise.
	* stdlib/Makefile: Likewise.
	* iconvdata/Makefile: Likewise.
	* sunrpc/Makefile: Likewise.
	* io/Makefile: Likewise.
	* argp/Makefile: Likewise.
	* inet/Makefile: Likewise.
	* hesiod/Makefile: Likewise.
	* grp/Makefile: Likewise.
	* csu/Makefile: Likewise.
	* wctype/Makefile: Likewise.
	* crypt/Makefile: Likewise.
	* libio/Makefile: Likewise.
	* string/Makefile: Likewise.
	* nis/Makefile: Likewise.
	* resolv/Makefile: Likewise.
	* stdio-common/Makefile: Likewise.
	* wcsmbs/Makefile: Likewise.
	* dlfcn/Makefile: Likewise.
	* posix/Makefile: Likewise.

	[BZ #6959]
	* timezone/Makefile: Don't install timezone files, just the programs
	and scripts.

2012-03-06  Ulrich Drepper  <drepper@gmail.com>

	* nss/databases.def: Add missing gshadow entry.

	* stdio-common/vfprintf.c: Fix formatting.  Missing copyright update.

2012-03-06  Marek Polacek  <polacek@redhat.com>

	[BZ #13726]
	* sysdeps/ieee754/ldbl-96/printf_fphex.c: Adjust position of wnumstr.
	* sysdeps/x86_64/fpu/printf_fphex.c: Likewise.
	* stdio-common/Makefile (tests): Add tst-long-dbl-fphex.
	* stdio-common/tst-long-dbl-fphex.c: New file.

2012-03-06  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc64/get_clockfreq.c
	(set_obp_int): New function.
	(get_obp_int): New function.
	(__get_clockfreq_via_dev_openprom): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (INTERNAL_SYSCALL_ERROR_P):
	Avoid unused variable warnings on 'val' and use builtin_expect.
	(INLINE_SYSCALL): Don't wrap INTERNAL_SYSCALL_ERROR_P with
	__builtin_expect.
	(INLINE_CLONE_SYSCALL): Likewise.

2012-03-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

2012-03-05  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c: Drop exp(-x) term
	only for |x| >= 40.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Likewise.

2012-03-05  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c (gettimeofday_ifunc):
	Replace gettimeofday with __vdso_gettimeofday.

	* sysdeps/unix/sysv/linux/x86_64/init-first.c
	(_libc_vdso_platform_setup): Replace clock_gettime and getcpu with
	__vdso_clock_gettime and __vdso_getcpu.

	* sysdeps/unix/sysv/linux/x86_64/time.c (time_ifunc): Replace
	time with __vdso_time.

2012-03-05  Joseph Myers  <joseph@codesourcery.com>

	* manual/lang.texi (size_t): Note types to which size_t may be
	equivalent with the GNU C Library, but do not describe when
	differences between them are significant.

2012-03-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Update.

2012-03-05  Joseph Myers  <joseph@codesourcery.com>

	[BZ #3976]
	* sysdeps/ieee754/dbl-64/e_pow.c: Include <fenv.h>.
	(__ieee754_pow): Save and restore rounding mode and use
	round-to-nearest for main computations.
	* math/libm-test.inc (pow_test_tonearest): New function.
	(pow_test_towardzero): Likewise.
	(pow_test_downward): Likewise.
	(pow_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #3976]
	* math/libm-test.inc (cosh_test_tonearest): New function.
	(cosh_test_towardzero): Likewise.
	(cosh_test_downward): Likewise.
	(cosh_test_upward): Likewise.
	(sinh_test_tonearest): Likewise.
	(sinh_test_towardzero): Likewise.
	(sinh_test_downward): Likewise.
	(sinh_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-05  Tom de Vries  <tom@codesourcery.com>

	* sysdeps/generic/dl-osinfo.h (_dl_setup_stack_chk_guard): Ensure
	default stack guard is set in last bytes.
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard): Same.

2012-03-05  Kees Cook  <keescook@chromium.org>

	* stdio-common/vfprintf.c (vfprintf): add missing errno settings.

	[BZ #13656]
	* stdio-common/vfprintf.c (vfprintf): Check for nargs overflow and
	possibly allocate from heap instead of stack.
	* stdio-common/bug-vfprintf-nargs.c: New file.
	* stdio-common/Makefile (tests): Add nargs overflow test.

2012-03-03  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Update.

2012-03-03  Marek Polacek  <polacek@redhat.com>

	* include/sys/cdefs.h: Remove __GNUC_PREREQ macro.
	* math/math_private.h: Likewise.
	* stdlib/tst-strtod.c: Likewise.
	* sysdeps/i386/i486/bits/atomic.h: Likewise.
	* sysdeps/x86_64/bits/atomic.h: Likewise.

2012-03-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_llrint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_llrintf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_lrintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_llrint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_llrintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_lrint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_lrintf.S: New file.

2012-03-02  Roland McGrath  <roland@hack.frob.com>

	[BZ #13792]
	* manual/examples/README: New file, says the example source files
	can be used under GPL>=2.
	* manual/Makefile (%.c.texi): Eat the leading part of the file until a
	line containing just "*/".
	* manual/examples/add.c: Add copyright header (GPL>=2).
	* manual/examples/argp-ex1.c: Likewise.
	* manual/examples/argp-ex2.c: Likewise.
	* manual/examples/argp-ex3.c: Likewise.
	* manual/examples/argp-ex4.c: Likewise.
	* manual/examples/atexit.c: Likewise.
	* manual/examples/db.c: Likewise.
	* manual/examples/dir.c: Likewise.
	* manual/examples/dir2.c: Likewise.
	* manual/examples/execinfo.c: Likewise.
	* manual/examples/filecli.c: Likewise.
	* manual/examples/filesrv.c: Likewise.
	* manual/examples/fmtmsgexpl.c: Likewise.
	* manual/examples/genpass.c: Likewise.
	* manual/examples/inetcli.c: Likewise.
	* manual/examples/inetsrv.c: Likewise.
	* manual/examples/isockad.c: Likewise.
	* manual/examples/longopt.c: Likewise.
	* manual/examples/memopen.c: Likewise.
	* manual/examples/memstrm.c: Likewise.
	* manual/examples/mkfsock.c: Likewise.
	* manual/examples/mkisock.c: Likewise.
	* manual/examples/mygetpass.c: Likewise.
	* manual/examples/pipe.c: Likewise.
	* manual/examples/popen.c: Likewise.
	* manual/examples/rprintf.c: Likewise.
	* manual/examples/search.c: Likewise.
	* manual/examples/select.c: Likewise.
	* manual/examples/setjmp.c: Likewise.
	* manual/examples/sigh1.c: Likewise.
	* manual/examples/sigusr.c: Likewise.
	* manual/examples/stpcpy.c: Likewise.
	* manual/examples/strdupa.c: Likewise.
	* manual/examples/strftim.c: Likewise.
	* manual/examples/strncat.c: Likewise.
	* manual/examples/subopt.c: Likewise.
	* manual/examples/swapcontext.c: Likewise.
	* manual/examples/termios.c: Likewise.
	* manual/examples/testopt.c: Likewise.
	* manual/examples/testpass.c: Likewise.
	* manual/examples/timeval_subtract.c: Likewise.

	[BZ #13792]
	* manual/time.texi (Elapsed Time): Move timeval_subtract example
	function to ...
	* manual/timeval_subtract.c.texi: ... here, new file.

2012-03-02  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/fpu/libm-test-ulps: Update for recently added tests.

2012-03-02  Joseph Myers  <joseph@codesourcery.com>

	[BZ #3976]
	* sysdeps/ieee754/dbl-64/s_sin.c: Include <fenv.h>
	(__sin): Save and restore rounding mode and use round-to-nearest
	for all computations.
	(__cos): Save and restore rounding mode and use round-to-nearest
	for all computations.
	* sysdeps/ieee754/dbl-64/s_tan.c: Include "math_private.h" and
	<fenv.h>.
	(tan): Save and restore rounding mode and use round-to-nearest for
	all computations.
	* math/libm-test.inc (cos_test_tonearest): New function.
	(cos_test_towardzero): Likewise.
	(cos_test_downward): Likewise.
	(cos_test_upward): Likewise.
	(sin_test_tonearest): Likewise.
	(sin_test_towardzero): Likewise.
	(sin_test_downward): Likewise.
	(sin_test_upward): Likewise.
	(tan_test_tonearest): Likewise.
	(tan_test_towardzero): Likewise.
	(tan_test_downward): Likewise.
	(tan_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	[BZ #10135]
	* sysdeps/ieee754/dbl-64/s_scalbln.c (__scalbln): First test for
	small n, then large n, before computing and testing k+n.
	* sysdeps/ieee754/dbl-64/s_scalbn.c (__scalbn): Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c (__scalbln):
	Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c (__scalbn):
	Likewise.
	* sysdeps/ieee754/flt-32/s_scalblnf.c (__scalblnf): Likewise.
	* sysdeps/ieee754/flt-32/s_scalbnf.c (__scalbnf): Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c (__scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c (__scalbnl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c (__scalblnl): Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c (__scalbnl): Likewise.
	* math/libm-test.inc (scalbn_test): Add more tests.
	(scalbln_test): Likewise.

	* manual/filesys.texi (mode_t): Describe constraints on size and
	signedness, not exact equivalence to a particular type.
	(ino_t): Likewise.
	(ino64_t): Likewise.
	(dev_t): Likewise.
	(nlink_t): Likewise.
	(blkcnt_t): Likewise.
	(blkcnt64_t): Likewise.
	* manual/llio.texi (off_t): Likewise.

	[BZ #3976]
	* sysdeps/ieee754/dbl-64/e_exp.c: Include <fenv.h>.
	(__ieee754_exp): Save and restore rounding mode and use
	round-to-nearest for all computations.
	* math/libm-test.inc (exp_test_tonearest): New function.
	(exp_test_towardzero): Likewise.
	(exp_test_downward): Likewise.
	(exp_test_upward): Likewise.
	(main): Call the new functions.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-01  Chris Demetriou  <cgd@google.com>

	* sysdeps/gnu/errlist-compat.awk: Don't depend on AWK internals to
	have predictable order.

2012-03-01  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/getpagesize.c: Delete.

	* sysdeps/sparc/sparc64/fpu/s_finite.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_finitef.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isinf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isinff.S: New file.

	* sysdeps/sparc/sparc32/fpu/s_signbit.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_signbitf.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_signbitl.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_isnan.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isnan.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_isnanf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_signbit.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_signbitf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_signbitl.S: New file.

	* sysdeps/sparc/fpu/libm-test-ulps: Update.

	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: Move...
	* sysdeps/sparc/fpu/libm-test-ulps: to here.
	* sysdeps/sparc/sparc64/fpu/libm-test-ulps: Delete.

	* sysdeps/sparc/crti.S: Remove HAVE_BINUTILS_GOTDATA checks.
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc32/elf/start.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/fpu/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrtf.S: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc64/elf/start.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrt.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/w_sqrtf.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* config.h.in (HAVE_BINUTILS_GOTDATA): Delete.
	* sysdeps/sparc/elf/configure.in: Remove binutils GOTDATA checks.
	* sysdeps/sparc/elf/configure: Regenerated.

2012-03-01  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (AS, LD): Require binutils 2.20 or later.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Give binutils 2.20
	as required minimum version.
	* INSTALL: Regenerated.

	[BZ #2541]
	[BZ #4108]
	* sysdeps/ieee754/flt-32/s_erff.c (__erfcf): Mask out one more bit
	before squaring exponent.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c (__erfcl): Mask out whole
	bottom long double and 27 bits of top long double before squaring
	exponent.
	* math/libm-test.inc (erfc_test): Add more tests.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-03-01  Kai Tietz  <ktietz@redhat.com>

	* soft-fp/soft-fp.h (_FP_STRUCT_LAYOUT): New macro.
	* soft-fp/quad.h (_FP_UNION_Q): Use _FP_STRUCT_LAYOUT on struct
	containing bit-fields.
	* soft-fp/extended.h (_FP_UNION_E): Likewise.
	* soft-fp/single.h (_FP_UNION_S): Likewise.
	* soft-fp/double.h (_FP_UNION_D): Likewise.

2012-02-29  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13786]
	* sysdeps/i386/i686/multiarch/strcmp.S [USE_AS_STRCASECMP_L]: Do
	not include ../strcmp.S.
	[USE_AS_STRNCASECMP_L]: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-c.c
	(__strcasecmp_l_ia32): Define as alias to __strcasecmp_l_nonascii.
	* sysdeps/i386/i686/multiarch/strncase_l-c.c
	(__strncasecmp_l_ia32): Define as alias to
	__strncasecmp_l_nonascii.

	[BZ #5794]
	* math/libm-test.inc (expm1_test): Add test for bug 5794.
	* sysdeps/i386/fpu/libm-test-ulps: Update.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Reduce some expected errors.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-02-29  Jeff Law  <law@redhat.com>

	* resolv/res_query.c (__libc_res_nquerydomain): Avoid
	out of bounds read.

2012-02-29  Marek Polacek  <polacek@redhat.com>

	[BZ #13706]
	* elf/rtld.c (dl_main): Always set l_used to 1 for vDSO.
	* elf/Makefile: Add rules to run tst-unused-dep.out.

2012-02-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/w_sqrt.S: New file.
	* sysdeps/sparc/sparc32/fpu/w_sqrtf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrt.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/w_sqrtf.S: New file.
	* sysdeps/sparc/sparc64/fpu/w_sqrt.S: New file.
	* sysdeps/sparc/sparc64/fpu/w_sqrtf.S: New file.

2012-02-29  Joseph Myers  <joseph@codesourcery.com>

	* math/libm-test.inc (llround_test): Move one test from
	lround_test.  Use TEST_f_L in moved test.
	(lround_test): Move misplaced test to llround_test.  Add testcase
	from bug 2561.

2012-02-28  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/e_expf.S: New file.
	Contributed by Dmitrieva Liubov <liubov.dmitrieva@gmail.com>.

2012-02-28  Stanislav Brabec  <sbrabec@suse.cz>

	[BZ #13637]
	* posix/regex_internal.c (re_string_skip_chars): Fix miscomputation
	of remain_len that may cause incomplete multi-byte character and
	false match.
	* posix/bug-regex33.c: New file.
	* posix/Makefile (tests): Add bug-regex33.

2012-02-28  Joseph Myers  <joseph@codesourcery.com>

	* manual/macros.texi: New file.
	* Makefile (INSTALL, NOTES): Depend on manual/macros.texi.
	* manual/libc.texinfo: Include macros.texi.
	* manual/creatute.texi: Likewise.
	* manual/install.texi: Likewise.
	* manual/arith.texi: Use macros @Theglibc{}, @theglibc{} and
	@glibcadj{} in references to the GNU C Library.
	* manual/charset.texi: Likewise.
	* manual/conf.texi: Likewise.
	* manual/contrib.texi: Likewise.  Consistently use "GNU C Library"
	when not using those macros.
	* manual/creature.texi: Likewise.
	* manual/crypt.texi: Likewise.
	* manual/errno.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/header.texi: Likewise.
	* manual/install.texi: Likewise.
	* manual/intro.texi: Likewise.
	* manual/io.texi: Likewise.
	* manual/job.texi: Likewise.
	* manual/lang.texi: Likewise.
	* manual/libc.texiinfo: Likewise.
	* manual/llio.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/maint.texi: Likewise.
	* manual/math.texi: Likewise.
	* manual/memory.texi: Likewise.
	* manual/message.texi: Likewise.
	* manual/nss.texi: Likewise.
	* manual/pattern.texi: Likewise.
	* manual/process.texi: Likewise.
	* manual/resource.texi: Likewise.
	* manual/search.texi: Likewise.
	* manual/setjmp.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/socket.texi: Likewise.
	* manual/startup.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* manual/sysinfo.texi: Likewise.
	* manual/syslog.texi: Likewise.
	* manual/terminal.texi: Likewise.
	* manual/time.texi: Likewise.
	* manual/users.texi: Likewise.
	* INSTALL: Regenerated.
	* NOTES: Regenerated.
	* sysdeps/gnu/errlist.c: Regenerated.

2012-02-28  Andreas Schwab  <schwab@linux-m68k.org>

	* include/dirent.h: Include <dirstream.h> before
	<dirent/dirent.h>.

2012-02-28  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/s_copysign.S: New file.
	* sysdeps/sparc/sparc32/fpu/s_copysignf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_copysign.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_copysignf.S: New file.

2012-02-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floor.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_floorf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_floor.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_floorf.S: New file.

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Fix accidental use of
	frame pointer instead of stack pointer relative arg slot.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: Likewise.

2012-02-27  Carlos O'Donell  <carlos_odonell@mentor.com>

	[BZ #3992]
	* stdlib/fmtmsg.c: Use of uint32_t requires stdint.h.

2012-02-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: Fix comment formatting.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rint.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rintf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_rint.S: Likewise.
	* sysdeps/sparc/sparc64/fpu/s_rintf.S: Likewise.

2012-02-27  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (CC): Restrict allowed GCC versions to 4.3 and
	later.  Allow versions 5-9.
	* configure: Regenerated.
	* manual/install.texi (Tools for Compilation): Give GCC 4.3 as
	required minimum version and 4.6 as recommended version.  Do not
	mention bugs in GCC 2.7 and 2.8.
	* INSTALL: Regenerated.

2012-02-27  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceil.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_ceilf.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rint.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_rintf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_ceil.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_ceilf.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_rint.S: New file.
	* sysdeps/sparc/sparc64/fpu/s_rintf.S: New file.

	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c (__nearbyintl): Do not
	manipulate bits before adding and subtracting TWO112[sx].
	* sysdeps/ieee754/ldbl-128/s_rintl.c (__rintl): Likewise.

2012-02-27  Roland McGrath  <roland@hack.frob.com>

	[BZ #13775]
	* libio/bits/stdio-ldbl.h (vdprintf, dprintf): Put these under
	[__USE_XOPEN2K8] rather than [__USE_GNU], to match the stdio.h decls.
	* libio/stdio.h (vdprintf, dprintf): Remove comment about these not
	being in POSIX, because they are in 1003.1-2008.

	* rt/tst-aio.c: Include <fcntl.h>.
	* rt/tst-aio7.c: Likewise.
	* rt/tst-aio64.c: Likewise.

	* stdio-common/tst-fmemopen.c (main): Remove spurious const.

2012-02-27  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi (--with-headers): Describe headers as
	interface headers, not private headers.
	(Specific advice for GNU/Linux systems): Describe use of headers
	from "make headers_install", not private headers from older
	kernels.
	* INSTALL: Regenerated.
	* sysdeps/unix/sysv/linux/configure.in (LIBC_LINUX_VERSION):
	Change to 2.6.19.
	* sysdeps/unix/sysv/linux/configure: Regenerated.

	* manual/llio.texi (fclean): Remove documentation.

	* manual/Makefile (libc-texi-generated): New variable.  Include
	version.texi.
	(libc.dvi, libc.pdf, libc.info, libc/index.html): Depend on
	$(libc-texi-generated), not duplicated list of files.
	(version.texi, stamp-version): New rules.
	(realclean): Remove $(libc-texi-generated), not individual files
	from that list.  Do not remove dir-add.texinfo.
	* manual/libc.texinfo: Comment out uses of edition numbers and
	references to printed manual.  Remove last-updated dates.
	(EDITION): Comment out.
	(ISBN): Likewise.
	(VERSION, UPDATED): Remove.
	(version.texi): Include.

2012-02-27  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/posix/spawni.c: Include <signal.h>.
	* sysdeps/pthread/aio_cancel.c: Include <fcntl.h>.
	* sysdeps/pthread/aio_fsync.c: Likewise.

2012-02-26  Ulrich Drepper  <drepper@gmail.com>

	* conform/Makefile (tests): Run only when not cross-compiling and
	when fast-check is not defined.

	* conform/conformtest.pl: XPG7 and POSIX2008 require C99.
	* conform/data/limits.h-data: Fixes for POSIX2008.
	* conform/run-conformtest.sh: Run all tests.
	* include/arpa/inet.h: Changes to allow conformtest.pl to use the
	headers.
	* include/bits/dlfcn.h: Likewise.
	* include/langinfo.h: Likewise.
	* include/monetary.h: Likewise.
	* include/sys/poll.h: Likewise.

	* io/fcntl.h: Define AT_NO_AUTOMOUNT and AT_EMPTY_PATH only
	for __USE_GNU.
	* posix/spawn.h: Define __need_sigset_t.
	* posix/sys/wait.h: Don't include <sys/resource.h>, define id_t here.
	* posix/unistd.h: Declare ctermid only for XPG before XPG6.
	* rt/aio.h: Don't include fcntl.h and signal.h.  Use bits/siginfo.h
	to get sigevent_t only.
	* sysdeps/unix/sysv/linux/bits/socket.h: Declare sendmmsg and recvmmsg
	only for __USE_GNU.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/uio.h: Declare process_vm_readv and
	process_vm_writev only for __USE_GNU.
	* termios/termios.h: Declare tcgetsid also for POSIX2008.

	* conform/Makefile: For now ignore errors from run-conformtest.
	* conform/conformtest.pl: Simplify code.  Add -ansi to CFLAGS for
	POSIX to avoid namespace pollution.  Don't prepend headers.
	* conform/data/aio.h-data: Fixes for POSIX testing.
	* conform/data/fcntl.h-data: Likewise.
	* conform/data/glob.h-data: Likewise.
	* conform/data/grp.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* conform/data/pwd.h-data: Likewise.
	* conform/data/signal.h-data: Likewise.
	* conform/data/spawn.h-data: Likewise.
	* conform/data/stdio.h-data: Likewise.
	* conform/data/stdlib.h-data: Likewise.
	* conform/data/stropts.h-data: Likewise.
	* conform/data/sys/mman.h-data: Likewise.
	* conform/data/sys/stat.h-data: Likewise.
	* conform/data/sys/types.h-data: Likewise.
	* conform/data/sys/wait.h-data: Likewise.
	* conform/data/time.h-data: Likewise.
	* conform/data/unistd.h-data: Likewise.
	* conform/data/utime.h-data: Likewise.

	* io/sys/stat.h: fchmod was always in POSIX.
	* posix/sys/wait.h: Include <sys/resource.h> only for waitid.
	* posix/unistd.h: fsync and ftruncate were in early POSIX as well.
	* rt/aio.h: Define __need_timespec before including <time.h>.
	* sysdeps/unix/sysv/linux/bits/siginfo.h: Don't name siginfo_t
	struct.  Add forward declaration of pthread_attr_t and use it in
	sigevent.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/time.h: Don't let __STRICT_ANSI__
	always remove CLK_TCK definition.

2012-02-26  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/ieee754/dbl-64/k_tan.c: Replace with empty file.

2012-02-25  Ulrich Drepper  <drepper@gmail.com>

	* conform/run-conformtest.sh: New file.
	* conform/Makefile: Run run-conformtest for tests.
	* conform/conformtest.pl: Many bug fixes.  Add ISO C99, ISO C11
	support.

	* conform/data/uchar.h-data: New file.
	* conform/data/aio.h-data: Fixes for ISO C and POSIX 1995 testing.
	* conform/data/arpa/inet.h-data: Likewise.
	* conform/data/assert.h-data: Likewise.
	* conform/data/complex.h-data: Likewise.
	* conform/data/cpio.h-data: Likewise.
	* conform/data/ctype.h-data: Likewise.
	* conform/data/dirent.h-data: Likewise.
	* conform/data/dlfcn.h-data: Likewise.
	* conform/data/errno.h-data: Likewise.
	* conform/data/fcntl.h-data: Likewise.
	* conform/data/float.h-data: Likewise.
	* conform/data/fmtmsg.h-data: Likewise.
	* conform/data/fnmatch.h-data: Likewise.
	* conform/data/ftw.h-data: Likewise.
	* conform/data/glob.h-data: Likewise.
	* conform/data/grp.h-data: Likewise.
	* conform/data/iconv.h-data: Likewise.
	* conform/data/inttypes.h-data: Likewise.
	* conform/data/langinfo.h-data: Likewise.
	* conform/data/libgen.h-data: Likewise.
	* conform/data/limits.h-data: Likewise.
	* conform/data/locale.h-data: Likewise.
	* conform/data/math.h-data: Likewise.
	* conform/data/monetary.h-data: Likewise.
	* conform/data/mqueue.h-data: Likewise.
	* conform/data/ndbm.h-data: Likewise.
	* conform/data/net/if.h-data: Likewise.
	* conform/data/netdb.h-data: Likewise.
	* conform/data/netinet/in.h-data: Likewise.
	* conform/data/nl_types.h-data: Likewise.
	* conform/data/poll.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* conform/data/pwd.h-data: Likewise.
	* conform/data/regex.h-data: Likewise.
	* conform/data/sched.h-data: Likewise.
	* conform/data/search.h-data: Likewise.
	* conform/data/semaphore.h-data: Likewise.
	* conform/data/setjmp.h-data: Likewise.
	* conform/data/signal.h-data: Likewise.
	* conform/data/spawn.h-data: Likewise.
	* conform/data/stdarg.h-data: Likewise.
	* conform/data/stdio.h-data: Likewise.
	* conform/data/stdlib.h-data: Likewise.
	* conform/data/string.h-data: Likewise.
	* conform/data/strings.h-data: Likewise.
	* conform/data/stropts.h-data: Likewise.
	* conform/data/sys/ipc.h-data: Likewise.
	* conform/data/sys/mman.h-data: Likewise.
	* conform/data/sys/msg.h-data: Likewise.
	* conform/data/sys/resource.h-data: Likewise.
	* conform/data/sys/select.h-data: Likewise.
	* conform/data/sys/sem.h-data: Likewise.
	* conform/data/sys/shm.h-data: Likewise.
	* conform/data/sys/socket.h-data: Likewise.
	* conform/data/sys/stat.h-data: Likewise.
	* conform/data/sys/statvfs.h-data: Likewise.
	* conform/data/sys/time.h-data: Likewise.
	* conform/data/sys/timeb.h-data: Likewise.
	* conform/data/sys/times.h-data: Likewise.
	* conform/data/sys/types.h-data: Likewise.
	* conform/data/sys/uio.h-data: Likewise.
	* conform/data/sys/un.h-data: Likewise.
	* conform/data/sys/utsname.h-data: Likewise.
	* conform/data/sys/wait.h-data: Likewise.
	* conform/data/syslog.h-data: Likewise.
	* conform/data/tar.h-data: Likewise.
	* conform/data/termios.h-data: Likewise.
	* conform/data/utime.h-data: Likewise.
	* conform/data/utmpx.h-data: Likewise.
	* conform/data/varargs.h-data: Likewise.
	* conform/data/wchar.h-data: Likewise.
	* conform/data/wctype.h-data: Likewise.
	* conform/data/wordexp.h-data: Likewise.

	* include/stropts.h: New file.
	* include/uchar.h: New file.
	* include/aio.h: Changes to allow conformtest.pl to use the headers.
	* include/assert.h: Likewise.
	* include/ctype.h: Likewise.
	* include/dirent.h: Likewise.
	* include/dlfcn.h: Likewise.
	* include/fcntl.h: Likewise.
	* include/fnmatch.h: Likewise.
	* include/glob.h: Likewise.
	* include/grp.h: Likewise.
	* include/libio.h: Likewise.
	* include/locale.h: Likewise.
	* include/math.h: Likewise.
	* include/net/if.h: Likewise.
	* include/netdb.h: Likewise.
	* include/netinet/in.h: Likewise.
	* include/pthread.h: Likewise.
	* include/pwd.h: Likewise.
	* include/regex.h: Likewise.
	* include/sched.h: Likewise.
	* include/search.h: Likewise.
	* include/setjmp.h: Likewise.
	* include/signal.h: Likewise.
	* include/stdio.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/string.h: Likewise.
	* include/sys/cdefs.h: Likewise.
	* include/sys/mman.h: Likewise.
	* include/sys/msg.h: Likewise.
	* include/sys/resource.h: Likewise.
	* include/sys/select.h: Likewise.
	* include/sys/socket.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/sys/statvfs.h: Likewise.
	* include/sys/time.h: Likewise.
	* include/sys/times.h: Likewise.
	* include/sys/uio.h: Likewise.
	* include/sys/utsname.h: Likewise.
	* include/sys/wait.h: Likewise.
	* include/termios.h: Likewise.
	* include/time.h: Likewise.
	* include/ulimit.h: Likewise.
	* include/unistd.h: Likewise.
	* include/utime.h: Likewise.
	* include/wchar.h: Likewise.
	* include/wctype.h: Likewise.
	* include/wordexp.h: Likewise.

	* posix/tar.h (TSVTX): Should not be visible for POSIX before 2008.

	* time/time.h: TIME_UTC must be a macro.
	Make timespec_get available for ISO C11 only as well.

2012-02-24  Ulrich Drepper  <drepper@gmail.com>

	* stdlib/fmtmsg.c (fmtmsg): Lock around use of severity list.
	Reported by Peng Haitao <penght@cn.fujitsu.com>.

2012-02-24  Joseph Myers  <joseph@codesourcery.com>

	* configure.in: Use -o not -a in test for unsupported multi-arch.

2012-02-24  Joseph Myers  <joseph@codesourcery.com>

	* manual/texinfo.tex: Update to version 2012-01-19.16.

2012-02-24  Joseph Myers  <joseph@codesourcery.com>

	* manual/Makefile (licenses): Change fdl-1.1.texi to fdl-1.3.texi.

2012-02-24  Roland McGrath  <roland@hack.frob.com>

	[BZ #13738]
	* manual/libc.texinfo (FDL_VERSION): Set to 1.3.
	* manual/fdl-1.3.texi: New file.
	* manual/fdl-1.1.texi: File removed.

	[BZ #13738]
	* manual/libc.texinfo (FDL_VERSION): New @set.
	Use it for mention of FDL in cover text.
	(Documentation License): Use it in @include file name.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>
	    Roland McGrath  <roland@hack.frob.com>

	[BZ #5461]
	* manual/arith.texi (strtoll): Refer to LLONG_MAX and LLONG_MIN)
	(not LONG_LONG_MAX and LONG_LONG_MIN.
	* manual/lang.texi (LONG_LONG_MIN): Document first as ISO
	LLONG_MIN.  Refer to LONG_LONG_MIN only as older GCC-specific
	name.
	(LONG_LONG_MAX, LLONG_MAX, ULONG_LONG_MAX, ULLONG_MAX): Likewise.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2547]
	[BZ #11365]
	* sysdeps/ieee754/flt-32/s_nearbyintf.c (__nearbyintf): Do not
	manipulate bits before adding and subtracting TWO23[sx].
	* math/libm-test.inc (nearbyint_test): Add more tests.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #2548]
	* sysdeps/ieee754/flt-32/s_rintf.c (__rintf): Do not manipulate
	bits before adding and subtracting TWO23[sx].
	* math/libm-test.inc (rint_test): Add more tests.
	(rint_test_tonearest): Likewise.
	(rint_test_towardzero): Likewise.
	(rint_test_downward): Likewise.
	(rint_test_upward: Likewise.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10110]
	* include/stdc-predef.h: New file.  Extracted from features.h.
	* include/features.h: Include stdc-predef.h.
	* Makefile (headers): Add stdc-predef.h.
	* CONFORMANCE (Compiler limitations): Update.

2012-02-22  Joseph Myers  <joseph@codesourcery.com>

	* manual/libc.texinfo (VERSION, UPDATED): Revert.

2012-02-21  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: More jn test ULP updates.
	* sysdeps/sparc/sparc64/fpu/libm-test-ulps: Likewise.

2012-02-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/__longjmp.S: Unwind in the 'thread' path
	using a normal save/restore sequence, rather than allocating a
	dummy stack frame just to store a frame pointer and restore.
	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Likewise.

2012-02-21  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi: Fix stray word in line-wrapped comment.

2012-02-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/elf/configure.in (PI_STATIC_AND_HIDDEN): Define if
	both binutils and gcc support GOTDATA.

	* sysdeps/unix/sparc/sysdep.h: Document why we don't use
	"rd %pc" in the PIC register setup sequences.

	* sysdeps/sparc/crti.S: Try to use GOTDATA relocs.
	* sysdeps/sparc/sparc32/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc32/elf/start.S: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (RTLD_START): Likewise.
	* sysdeps/sparc/sparc64/elf/start.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h
	(SYSCALL_ERROR_HANDLER): Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/____longjmp_chk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/brk.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h
	(SYSCALL_ERROR_HANDLER): Likewise.

	* config.h.in (HAVE_BINUTILS_GOTDATA): New.
	(HAVE_GCC_GOTDATA): New.
	* sysdeps/sparc/elf/configure.in: Test for GOTDATA
	relocation support in both binutils and gcc.
	* sysdeps/sparc/elf/configure: Regenerate.

	* sysdeps/sparc/sparc32/elf/configure.in: Delete.
	* sysdeps/sparc/sparc32/elf/configure: Delete.
	* sysdeps/sparc/sparc64/elf/configure.in: Delete.
	* sysdeps/sparc/sparc64/elf/configure: Delete.
	* sysdeps/sparc/elf/configure.in: New file.
	* sysdeps/sparc/elf/configure: Generate.

	* sysdeps/sparc/sparc32/elf/configure.in: Delete WDISP22 check.
	* sysdeps/sparc/sparc32/elf/configure: Regenerate.
	* sysdeps/sparc/sparc64/elf/configure.in: Likewise.
	* sysdeps/sparc/sparc64/elf/configure: Regenerate.
	* config.h.in (BROKEN_SPARC_WDISP22): Remove.

2012-02-21  Joseph Myers  <joseph@codesourcery.com>

	* manual/install.texi: Do not mention specific glibc version
	numbers.
	* manual/libc.texinfo (VERSION, UPDATED): Update.
	(@copying): Use @copyright{} and range of years.

2012-02-21  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13695]
	* csu/Makefile (distribute): Remove initfini.c and defs.awk.
	[crti.S not in sysdirs] (generated): Do not append.
	[crti.S not in sysdirs] (omit-deps): Likewise.
	[crti.S not in sysdirs] ($(crtstuff:%=$(objpfx)%.o)): Remove rule.
	[crti.S not in sysdirs] ($(objpfx)initfini.s): Likewise.
	[crti.S not in sysdirs] ($(objpfx)crti.S): Likewise.
	[crti.S not in sysdirs] ($(objpfx)crtn.S): Likewise.
	[crti.S not in sysdirs] ($(patsubst %,$(objpfx)crt%.o,i n)):
	Likewise.
	[crti.S not in sysdirs] ($(objpfx)defs.h): Likewise.
	[crti.S not in sysdirs] (CFLAGS-initfini.s): Remove variable.
	[crti.S not in sysdirs] (initfini.c): Remove vpath directive.
	* csu/defs.awk: Remove file.
	* sysdeps/generic/initfini.c: Likewise.
	* sysdeps/powerpc/powerpc32/Makefile (CFLAGS-initfini.s): Remove
	variable.
	* sysdeps/powerpc/powerpc64/Makefile (CFLAGS-initfini.s):
	Likewise.

2012-02-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/epoll.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h: Remove
	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/epoll.h: Get flags from
	<bits/epoll.h>.
	(EPOLL_CLOEXEC, EPOLL_NONBLOCK): Don't define here.
	(__EPOLL_PACKED): Define to empty if not defined by
	<bits/epoll.h>.
	(struct epoll_event): Use __EPOLL_PACKED to make possibly packed.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/epoll.h.

2012-02-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/timerfd.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/timerfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/timerfd.h: Remove.
	* sysdeps/unix/sysv/linux/sys/timerfd.h: Get flags from
	<bits/timerfd.h>.
	(TFD_CLOEXEC, TFD_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/timerfd.h.

2012-02-20  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/fpu/libm-test-ulps: Resort with gen-libm-test.pl -n
	in C locale.
	* sysdeps/powerpc/fpu/libm-test-ulps: Likewise.
	* sysdeps/sh/sh4/fpu/libm-test-ulps: Likewise.
	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: Likewise.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

2012-02-20  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/sparc/sparc32/fpu/libm-test-ulps: Adjust ULPs for jn tests.
	* sysdeps/sparc/sparc64/fpu/libm-test-ulps: Likewise.

2012-02-19  Andreas Schwab  <schwab@linux-m68k.org>

	* manual/errno.texi (Error Codes): Add EHWPOISON entry.
	* sysdeps/unix/sysv/linux/bits/errno.h (EHWPOISON): Define if not
	defined.
	* sysdeps/unix/sysv/linux/sparc/bits/errno.h (EHWPOISON):
	Likewise.
	* sysdeps/unix/sysv/linux/sparc/Versions: Add new errlist compat
	entry for 2.16.

2012-02-19  Aurelien Jarno  <aurelien@aurel32.net>

	* math/w_acos.c: Use non-signaling floating-point comparisons.
	* math/w_acosf.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/w_exp.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/w_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c: Likewise.

2012-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9739]
	* manual/string.texi (strnlen): Use correct parameter name in
	equivalent expression.

2012-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #11174]
	* manual/users.texi (seteuid): Consistently use neweuid for
	argument name.

2012-02-19  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13704]
	* manual/nss.texi (Services in the NSS configuration): Correct
	list of services in example configuration file.

2012-02-19  Nick Bowler  <nbowler@draconx.ca>

	[BZ #11322]
	* manual/arith.texi: Remove statements about negative zero
	behaving identically to zero.

2012-02-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5993]
	* manual/install.texi: Do not document upgrading from libc5.

2012-02-18  Joseph Myers  <joseph@codesourcery.com>

	[BZ #4596]
	* manual/conf.texi (_POSIX_VERSION): Do not mention __POSIX__.

2012-02-18  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sparc/sysdep.h (SPARC_PIC_THUNK): New macro.
	(SETUP_PIC_REG): Use SPARC_PIC_THUNK and don't save and restore
	%o7 across the call.
	(SETUP_PIC_REG_LEAF): Do %o7 save/restore in this new macro
	instead.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Use
	SETUP_PIC_REG_LEAF.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/sparc/crti.S: Use SETUP_PIC_REG.
	* sysdeps/sparc/crtn.S: Likewise.

2012-02-17  Ulrich Drepper  <drepper@gmail.com>

	* aout/Makefile: Remove.

2012-02-18  Rafe Kettler  <rafe.kettler@gmail.com>

	[BZ #13058]
	* manual/examples/argp-ex1.c (main): Format definition in GNU
	style.
	* manual/examples/argp-ex2.c (main): Likewise.
	* manual/examples/argp-ex3.c (main): Likewise.
	* manual/examples/argp-ex4.c (main): Likewise.
	* manual/examples/longopt.c (main): Use new-style prototype
	definition.
	* manual/examples/strncat.c (main): Specify return type and use
	(void) for arguments.
	* manual/examples/subopt.c (main): Use char **argv argument.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #5077]
	* manual/lang.texi (FLT_EPSILON): Avoid description depending on
	rounding modes.

2012-02-17  Fabrice Bauzac  <fabrice.bauzac@wanadoo.fr>

	[BZ #6907]
	* manual/string.texi (strchr): Change when strchrnul is
	recommended.

2012-02-17  Dwayne Grant McConnell  <decimal@us.ibm.com>

	[BZ #174]
	* manual/locale.texi (setlocale): Document LOCPATH.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10210]
	* manual/process.texi (execle): Move @dots{} before last argument.

2012-02-17  Paul Bolle  <pebolle@tiscali.nl>

	[BZ #12047]
	* manual/charset.texi (Generic Charset Conversion): Fix typo
	(LC_TYPE -> LC_CTYPE).

2012-02-17  Nicolas Boulenguez  <nicolas.boulenguez@free.fr>

	[BZ #5805]
	* manual/arith.texi (scalbn): Use @var{} on parameter names.
	(scalbnf): Likewise.
	(scalbnl): Likewise.
	(scalbln): Likewise.
	(scalblnf): Likewise.
	(scalblnl): Likewise.
	* manual/errno.texi (vwarn): Name last parameter as @var{ap}.
	(vwarnx): Likewise.
	(verr): Likewise.
	(verrx): Likewise.
	* manual/filesys.texi (telldir): Use braces around return type.
	* manual/llio.texi (mmap): Add space after comma.
	(mmap64): Likewise.
	* manual/math.texi (jn): Use @var{} on parameter names.
	(jnf): Likewise.
	(jnl): Likewise.
	(yn): Likewise.
	(ynf): Likewise.
	(ynl): Likewise.
	* manual/memory.texi (alloca): Remove semicolon on @deftypefun
	line.
	* manual/resource.texi (ulimit): Use @dots{} instead of literal
	"...".
	(sched_get_priority_min): Remove semicolon on @deftypefun line.
	(sched_get_priority_max): Likewise.
	* manual/signal.texi (sigvec): Add space after comma.
	* manual/socket.texi (if_nametoindex): Use @var{} on parameter
	names.
	(if_indextoname): Likewise.
	(if_freenameindex): Likewise.
	(sendto): Use ',' instead of '.' in prototype.
	* manual/startup.texi (syscall): Use @dots{} instead of literal
	"...".
	* manual/stdio.texi (__fpending): Separate initial words of
	paragraph from @deftypefun line.
	* manual/syslog.texi (syslog): Use @dots{} instead of literal
	"...".
	(vsyslog): Use @var{} on parameter names.
	* manual/terminal.texi (stty): Use @var{} on parameter names.
	* manual/users.texi (getutmp): Use @var{} on parameter names.
	(getutmpx): Likewise.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #6884]
	* manual/stdio.texi (fopen): Fix typos in description of
	",ccs=STRING".

2012-02-17  Aurelien Jarno  <aurelien@aurel32.net>

	[BZ #4026]
	* sysdeps/unix/sysv/linux/clock_settime.c: include <time.h> to
	get clock_id definition.

2012-02-17  Thomas Schwinge  <thomas@schwinge.name>

	[BZ #4822]
	* sysdeps/mach/hurd/malloc-machine.h: #include <sys/mman.h>.
	(madvise): Cast every argument to void on its own.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #9902]
	* manual/startup.texi (Exit Status): Fix typo.

2012-02-17  Joseph Myers  <joseph@codesourcery.com>

	[BZ #10140]
	* manual/examples/argp-ex1.c: Include <stdlib.h>.
	* manual/examples/argp-ex2.c: Likewise.
	* manual/examples/argp-ex3.c: Likewise.

2012-02-16  Richard Henderson  <rth@redhat.com>

	* sysdeps/s390/s390-32/crti.S, sysdeps/s390/s390-32/crtn.S: New files.
	* sysdeps/s390/s390-32/initfini.c: Remove.
	* sysdeps/s390/s390-64/crti.S, sysdeps/s390/s390-64/crtn.S:
	* sysdeps/s390/s390-64/initfini.c: Remove.

2012-02-15  Kaz Kojima  <kkojima@rr.iij4u.or.jp>

	* sysdeps/sh/crti.S, sysdeps/sh/crtn.S: New files, based on
	compiler output for sysdeps/generic/initfini.c.
	* sysdeps/sh/elf/initfini.c: Remove file.

2012-02-16  David S. Miller  <davem@davemloft.net>

	[BZ #11494]
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (O_FSYNC): Define.

	* sysdeps/sparc/Makefile: Add -fPIC when building crt{i,n}.S
	* sysdeps/sparc/crti.S: New file.
	* sysdeps/sparc/crtn.S: New file.
	* sysdeps/sparc/sparc32/Makefile: Remove initfini handling.
	* sysdeps/sparc/sparc64/Makefile: Likewise.

2012-02-15  Mike Frysinger  <vapier@gentoo.org>

	[BZ #3335]
	* sysdeps/unix/sysv/linux/getcwd.c: Include sys/param.h.

2012-02-15  Roland McGrath  <roland@hack.frob.com>

	[BZ #4822]
	* sysdeps/mach/hurd/malloc-machine.h (madvise): New macro.

	* mach/devstream.c (cookie_io_functions_t): Macro removed.
	(write, read, close): Likewise.
	Patch by Aurelien Jarno <aurelien@aurel32.net>.

2012-02-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/signalfd.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/signalfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/signalfd.h: Remove.
	* sysdeps/unix/sysv/linux/sys/signalfd.h: Get flags from
	<bits/signalfd.h>.
	(SFD_CLOEXEC, SFD_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/signalfd.h.

2012-02-14  Marek Polacek  <polacek@redhat.com>

	* sysdeps/x86_64/crti.S: New file.
	* sysdeps/x86_64/crtn.S: New file.
	* sysdeps/x86_64/elf/initfini.c: Remove file.

2012-02-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/inotify.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/inotify.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/inotify.h: Remove.
	* sysdeps/unix/sysv/linux/sys/inotify.h: Get flags from
	<bits/inotify.h>.
	(IN_CLOEXEC, IN_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/inotify.h.

2012-02-13  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/bits/eventfd.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/eventfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/eventfd.h: Remove.
	* sysdeps/unix/sysv/linux/sys/eventfd.h: Get flags from
	<bits/eventfd.h>.
	(EFD_SEMAPHORE, EFD_CLOEXEC, EFD_NONBLOCK): Don't define here.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/eventfd.h.

2012-02-10  Thomas Schwinge  <thomas@codesourcery.com>

	* sysdeps/i386/fpu/feupdateenv.c (__feupdateenv): Invoke
	__feraiseexcept instead of feraiseexcept.

	* rt/tst-cpuclock1.c: Add a few comments, and error checking for
	nanosleep invocations.
	* rt/tst-cpuclock2.c: Print some values as intended, fix explanatory
	strings, and add error checking for a nanosleep invocations.

2012-02-09  Paul Eggert  <eggert@cs.ucla.edu>

	Replace FSF snail mail address with URLs, as per GNU coding standards.
	Most of the snail mail addresses were wrong anyway, and omitting
	them makes the source code easier to maintain.  Almost all of the
	changes are to license notices and to locale LC_IDENTIFICATION
	addresses, except for this one:
	* manual/libc.texinfo: In "Published by", give the FSF's URL,
	not its snail mail address.

2012-02-09  Richard Henderson  <rth@twiddle.net>

	* sysdeps/unix/sysv/linux/internal_statvfs.c: Use <> for include
	of kernel-features.h.

	* elf/dl-tls.c (update_get_addr): Avoid pointer type mismatch warning.

2012-02-08  Marek Polacek  <polacek@redhat.com>

	* libio/libio.h: Remove _G_HAVE_SYS_CDEFS conditional.
	* sysdeps/mach/hurd/_G_config.h: Remove _G_HAVE_SYS_CDEFS macro.
	* sysdeps/gnu/_G_config.h: Likewise.
	* sysdeps/generic/_G_config.h: Likewise.

2012-02-08  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/i386/fpu/libm-test-ulps: Reduce ldouble ULPs for jn
	tests.
	* sysdeps/x86_64/fpu/libm-test-ulps: Likewise.

	* sysdeps/powerpc/powerpc32/crti.S: New file.
	* sysdeps/powerpc/powerpc32/crtn.S: New file.
	* sysdeps/powerpc/powerpc64/crti.S: New file.
	* sysdeps/powerpc/powerpc64/crtn.S: New file.

	* Makeconfig (have-initfini): Don't set.
	* config.make.in (have-initfini, need-nopic-initfini): Don't set.
	* configure.in (nopic_initfini): Don't substitute.
	* config.h.in (HAVE_INITFINI): Don't #undef.
	* csu/Makefile (CPPFLAGS): Don't add -DHAVE_INITFINI.
	* csu/gmon-start.c: Assume HAVE_INITFINI is defined.

2012-02-08  Joseph Myers  <joseph@codesourcery.com>

	Support crti.S and crtn.S provided directly by architectures.
	* csu/Makefile [crti.S in sysdirs] (generated): Do not append.
	[crti.S in sysdirs] (omit-deps): Likewise.
	[crti.S in sysdirs] (CFLAGS-initfini.s): Do not define variable.
	[crti.S in sysdirs] ($(crtstuff:%=$(objpfx)%.o)): Disable rule.
	[crti.S in sysdirs] ($(objpfx)initfini.s): Likewise.
	[crti.S in sysdirs] ($(objpfx)crti.S): Likewise.
	[crti.S in sysdirs] ($(objpfx)crtn.S): Likewise.
	[crti.S in sysdirs] ($(patsubst %,$(objpfx)crt%.o,i n)): Likewise.
	[crti.S in sysdirs] ($(objpfx)defs.h): Likewise.
	[crti.S in sysdirs] (initfini.c): Remove vpath directive.
	* sysdeps/i386/crti.S, sysdeps/i386/crtn.S: New files, based on
	compiler output for sysdeps/generic/initfini.c.
	* sysdeps/i386/elf/Makefile: Remove file.
	* sysdeps/i386/Makefile (CFLAGS-initfini.s): Remove variable.

2012-02-07  Marek Polacek  <polacek@redhat.com>

	* sysdeps/generic/_G_config.h: Remove _G_ARGS macro.
	* sysdeps/gnu/_G_config.h: Likewise.
	* sysdeps/mach/hurd/_G_config.h: Likewise.

2012-02-07  Marek Polacek  <polacek@redhat.com>

	* math/Makefile (tests): Add tst-CMPLX2.
	* math/tst-CMPLX2.c: New file.

2012-02-07  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/fpu/libm-test-ulps: Adjust ULPs for jn tests.

	* math/libm-test.inc (jn_test): Add missing L suffix.

2012-02-06  Marek Polacek  <polacek@redhat.com>

	* sysdeps/s390/asm-syntax.h: Remove __ELF__ conditionals.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/s_cexpl.S: Likewise.
	* sysdeps/i386/fpu/e_acosh.S: Likewise.
	* sysdeps/i386/fpu/e_pow.S: Likewise.
	* sysdeps/i386/fpu/s_asinhl.S: Likewise.
	* sysdeps/i386/fpu/e_acoshl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1.S: Likewise.
	* sysdeps/i386/fpu/s_frexpf.S: Likewise.
	* sysdeps/i386/fpu/e_log2.S: Likewise.
	* sysdeps/i386/fpu/e_log2l.S: Likewise.
	* sysdeps/i386/fpu/e_scalb.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.
	* sysdeps/i386/fpu/s_log1p.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtf.S: Likewise.
	* sysdeps/i386/fpu/e_logl.S: Likewise.
	* sysdeps/i386/fpu/s_cbrt.S: Likewise.
	* sysdeps/i386/fpu/s_expm1l.S: Likewise.
	* sysdeps/i386/fpu/s_frexpl.S: Likewise.
	* sysdeps/i386/fpu/s_expm1f.S: Likewise.
	* sysdeps/i386/fpu/e_log2f.S: Likewise.
	* sysdeps/i386/fpu/e_acoshf.S: Likewise.
	* sysdeps/i386/fpu/e_log.S: Likewise.
	* sysdeps/i386/fpu/s_cexp.S: Likewise.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/s_log1pl.S: Likewise.
	* sysdeps/i386/fpu/e_logf.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/e_atanh.S: Likewise.
	* sysdeps/i386/fpu/s_log1pf.S: Likewise.
	* sysdeps/i386/fpu/s_asinhf.S: Likewise.
	* sysdeps/i386/fpu/s_cexpf.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/s_frexp.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/s_asinh.S: Likewise.
	* sysdeps/i386/fpu/s_cbrtl.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* sysdeps/i386/i686/fpu/e_logl.S: Likewise.
	* sysdeps/i386/asm-syntax.h: Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Likewise.
	* sysdeps/x86_64/fpu/s_expm1l.S: Likewise.
	* sysdeps/x86_64/fpu/s_log1pl.S: Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysignf.S: Likewise.
	* sysdeps/x86_64/fpu/s_copysign.S: Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S: Likewise.
	* sysdeps/powerpc/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc64/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/sysdep.h: Likewise.

2012-02-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #411]
	* sysdeps/i386/sysdep.h (__i686): Undefine and redefine.

2012-02-06  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h: Include <features.h>.
	(GET_PC_THUNK, GET_PC_THUNK_STR): Define conditionally on compiler
	version.

2012-02-05  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h (SETUP_PIC_REG_STR, LOAD_PIC_REG_STR):
	Define.
	* sysdeps/unix/sysv/linux/i386/sysdep.h (check_consistency): Use
	LOAD_PIC_REG_STR.

2012-02-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h (GET_PC_THUNK, GET_PC_THUNK_STR): Define.
	(SETUP_PIC_REG): Use GET_PC_THUNK.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Use GET_PC_THUNK_STR
	macro.

2012-02-03  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/i386/sysdep.h (SETUP_PIC_REG, LOAD_PIC_REG): Define also
	for non-PIC compilation.
	(SETUP_PIC_REG): Add .p2align directive.
	* sysdeps/i386/i686/memcmp.S: Use macros for PIC register setup.
	* sysdeps/i386/i686/multiarch/bcopy.S: Likewise.
	* sysdeps/i386/i686/multiarch/bzero.S: Likewise.
	* sysdeps/i386/i686/multiarch/memchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/memcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove.S: Likewise.
	* sysdeps/i386/i686/multiarch/memmove_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/mempcpy_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/memrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2-rep.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset.S: Likewise.
	* sysdeps/i386/i686/multiarch/memset_chk.S: Likewise.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcat.S: Likewise.
	* sysdeps/i386/i686/multiarch/strchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strnlen.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/strspn.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcschr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcscpy.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcslen.S: Likewise.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp.S: Likewise.

2012-02-03  Joseph Myers  <joseph@codesourcery.com>

	* math/tst-CMPLX.c: Include <stdio.h>.

2012-01-31  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/powerpc/bits/mathdef.h (float_t): Always define as
	float.
	* sysdeps/sh/sh4/bits/mathdef.h: Likewise.
	* sysdeps/sparc/bits/mathdef.h: Likewise.

2012-01-31  Marek Polacek  <polacek@redhat.com>

	* libio/libio.h: Don't define _PARAMS.
	* locale/programs/config.h: Don't define PARAMS.
	* stdlib/strtol_l.c: Likewise.
	(__strtol_l): Remove PARAMS from the prototype.

2012-01-31  Ulrich Drepper  <drepper@gmail.com>

	* malloc/malloc.c: Remove name translation.  Don't use mixed-cap
	names.  Just use the correct names.  Remove unnecessary wrapper
	functions.
	* malloc/arena.c: Likewise.
	* malloc/hooks.c: Likewise.

	* malloc/arena.c (arena_get2): Really don't call __get_nprocs if
	ARENA_TEST says not to.  Simplify test for creation of a new arena.
	Partially based on a patch by Siddhesh Poyarekar <siddhesh@redhat.com>.

2012-01-30  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-tls.c (__tls_get_addr): Optimize by transforming all calls
	into tail calls.
	(update_get_addr): New function.
	(tls_get_addr_tail): Take GET_ADDR_ARGS parameter, remove
	GET_ADDR_MODULE parameter.

2012-01-30  Joseph Myers  <joseph@codesourcery.com>

	* crypt/cert.c: Remove __STDC__ conditionals.
	* crypt/crypt-entry.c: Likewise.
	* crypt/crypt_util.c: Likewise.
	* libio/filedoalloc.c: Likewise.
	* libio/fileops.c: Likewise.
	* libio/genops.c: Likewise.
	* libio/iofclose.c: Likewise.
	* libio/iofdopen.c: Likewise.
	* libio/iofopen.c: Likewise.
	* libio/iofopen64.c: Likewise.
	* libio/iogetdelim.c: Likewise.
	* libio/iopopen.c: Likewise.
	* libio/obprintf.c: Likewise.
	* libio/oldfileops.c: Likewise.
	* libio/oldiofclose.c: Likewise.
	* libio/oldiofdopen.c: Likewise.
	* libio/oldiofopen.c: Likewise.
	* libio/oldiopopen.c: Likewise.
	* libio/wfiledoalloc.c: Likewise.
	* libio/wgenops.c: Likewise.
	* locale/programs/xmalloc.c: Likewise.
	* misc/syslog.c: Likewise.
	* stdio-common/xbug.c: Likewise.
	* string/memchr.c: Likewise.
	* string/memcmp.c: Likewise.
	* string/memrchr.c: Likewise.
	* string/rawmemchr.c: Likewise.
	* sysdeps/posix/getcwd.c: Likewise.
	* time/strftime_l.c: Likewise.

2012-01-30  Joseph Myers  <joseph@codesourcery.com>

	* configure.in (libc_cv_cc_sse2avx): AC_SUBST.
	* config.make.in (config-cflags-sse2avx): Define.
	* sysdeps/x86_64/fpu/multiarch/Makefile (CFLAGS-slowexp-avx.c):
	Fix typo.

2012-01-29  Chris Metcalf  <cmetcalf@tilera.com>

	* scripts/config.guess: Update from upstream config git repository.
	* scripts/config.sub: Likewise.

2012-01-28  Chris Metcalf  <cmetcalf@tilera.com>

	* elf/elf.h (EM_TILEPRO, EM_TILEGX): New macros.
	(EM_NUM): Update.
	(R_TILEPRO_*, R_TILEGX_*): New macros.

	* scripts/firstversions.awk: Fix bug in version range handling.

	* sysdeps/unix/sysv/linux/grantpt.c: Use <> brackets for not-cancel.h.

	* sysdeps/unix/sysv/linux/faccessat.c (faccessat): Call __fxstatat64.

	* include/sys/epoll.h: New file.
	* sysdeps/unix/sysv/linux/epoll_pwait.c (epoll_pwait): Mark as
	libc_hidden_def.

2012-01-28  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h (__signbitl): Optimize a bit.
	Avoid unnecessary __WORDSIZE == 64 test.
	(fmaxf): Use VEX format if possible.
	(fmax): Likewise.
	(fminf): Likewise.
	(fmin): Likewise.

	* config.h.in: Define HAVE_SSE2AVX_SUPPORT.
	* math/math_private.h: Remove libc_fegetround* and
	libc_fesetround*.
	* sysdeps/i386/configure.in: Check for -msse2avx.
	* sysdeps/x86_64/fpu/math_private.h: Use VEX-encoded instructions
	also if SSE2AVX is defined.
	Remove libc_fegetround* and libc_fesetround*.
	* sysdeps/x86_64/fpu/multiarch/Makefile: Compile *-avx functions
	if config-cflags-sse2avx is yes.  Also add -DSSE2AVX to defines.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Use HAS_AVX again instead
	of HAS_YMM_USABLE.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.

	* sysdeps/x86_64/fpu/math_private.h: Simplify use of AVX instructions.

2012-01-19  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/a2/memcpy.S: Fix for when cache line
	size is not set.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Likewise.

2012-01-27  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13618]
	* elf/dl-open.c (dl_open_worker): Sort objects by dependency before
	relocation.
	* Makeconfig (libm): Define.
	* elf/Makefile: Add rules to build and run tst-relsort1.
	* elf/tst-relsort1.c: New file.
	* elf/tst-relsort1mod1.c: New file.
	* elf/tst-relsort1mod2.c: New file.

2012-01-27  Joseph Myers  <joseph@codesourcery.com>

	* math/s_ldexp.c: Remove __STDC__ conditionals.
	* math/s_ldexpf.c: Likewise.
	* math/s_ldexpl.c: Likewise.
	* math/s_nextafter.c: Likewise.
	* math/s_nexttowardf.c: Likewise.
	* math/s_significand.c: Likewise.
	* math/s_significandf.c: Likewise.
	* math/s_significandl.c: Likewise.
	* math/w_jnl.c: Likewise.
	* sysdeps/i386/fpu/s_isinfl.c: Likewise.
	* sysdeps/i386/fpu/s_isnanl.c: Likewise.
	* sysdeps/i386/fpu/s_nextafterl.c: Likewise.
	* sysdeps/i386/fpu/s_nexttoward.c: Likewise.
	* sysdeps/i386/fpu/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: Likewise.
	* sysdeps/ieee754/dbl-64/k_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_copysign.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_erf.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_fabs.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_frexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ilogb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_logb.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_nearbyint.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tanh.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_asinf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: Likewise.
	* sysdeps/ieee754/flt-32/k_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/k_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_atanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_copysignf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_cosf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_erff.c: Likewise.
	* sysdeps/ieee754/flt-32/s_fabsf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_finitef.c: Likewise.
	* sysdeps/ieee754/flt-32/s_frexpf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ilogbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_isnanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_logbf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nextafterf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_sinf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_tanhf.c: Likewise.
	* sysdeps/ieee754/k_standard.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/w_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/k_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_llroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lrintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_lroundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_modfl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_roundl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_tanl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/s_truncl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ceill.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_copysignl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_cosl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_erfl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_fabsl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_finitel.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_floorl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_frexpl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_isnanl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_logbl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nextafterl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_rintl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_sinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_tanl.c: Likewise.
	* sysdeps/ieee754/s_matherr.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/w_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/power4/fpu/w_sqrtf.c: Likewise.

2012-01-26  Joseph Myers  <joseph@codesourcery.com>

	* crypt/md5.h: Remove __STDC__ conditionals.
	* libio/libioP.h: Likewise.
	* locale/programs/config.h: Likewise.
	* sysdeps/generic/sysdep.h: Likewise.
	* sysdeps/i386/asm-syntax.h: Likewise.
	* sysdeps/s390/asm-syntax.h: Likewise.
	* sysdeps/unix/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h: Likewise.

2012-01-26  Joseph Myers  <joseph@codesourcery.com>

	* libio/libio.h: Remove __STDC__ conditionals.
	* malloc/obstack.h: Likewise.
	* math/complex.h: Likewise.
	* math/math.h: Likewise.
	* sysdeps/generic/_G_config.h: Likewise.
	* sysdeps/gnu/_G_config.h: Likewise.
	* sysdeps/mach/hurd/_G_config.h: Likewise.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.
	* sysdeps/sh/sh4/bits/mathdef.h: Likewise.
	* sysdeps/sparc/bits/mathdef.h: Likewise.

2012-01-26  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13583]
	* sysdeps/x86_64/multiarch/init-arch.h: Define bit_OSXSAVE.
	Clean up HAS_* macros.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): If
	bit_AVX is set also check OSXAVE/XCR0 and set bit_YMM_Usable if
	possible.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Use HAS_YMM_USABLE, not
	HAS_AVX.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.

2012-01-25  Joseph Myers  <joseph@codesourcery.com>

	* elf/tst-unique3.cc (gets): Remove declaration.
	* elf/tst-unique3lib.cc (gets): Likewise.
	* elf/tst-unique3lib2.cc (gets): Likewise.
	* elf/tst-unique4.cc (gets): Likewise.

2012-01-24  Ulrich Drepper  <drepper@gmail.com>

	* include/stdio.h: Add C++ protection.  Add gets declarations and
	definitions.
	* debug/tst-chk1.c: Don't declare gets here.
	* stdio-common/tst-gets.c: Likewise.

2012-01-24  Joseph Myers  <joseph@codesourcery.com>

	* posix/glob: Remove directory.

2012-01-24  Joseph Myers  <joseph@codesourcery.com>

	* wcsmbs/Makefile (tst-c16c32-1-ENV): Define.

2012-01-22  Pino Toscano  <toscano.pino@tiscali.it>

	* sysdeps/mach/hurd/socket.c (__socket): Return EAFNOSUPPORT instead
	of the non-standard EPFNOSUPPORT.

2011-12-26  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/mmap.c (__mmap): When MAPADDR is nonzero, try
	__vm_allocate and __vm_map with ANYWHERE set to 0 first, and try with
	ANYWHERE set to 1 only on KERN_NO_SPACE error.

2012-01-21  Ulrich Drepper  <drepper@gmail.com>

	* wcsmbs/uchar.h: Test __STDC_VERSION__.

2012-01-20  Ulrich Drepper  <drepper@gmail.com>

	* nscd/aicache.c (addhstaiX): Do not cache negative results of
	transient errors.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/pwdcache.c (cache_addpw): Likewise.
	* nscd/servicescache.c (cache_addserv): Likewise.

2012-01-16  Ulrich Drepper  <drepper@gmail.com>

	* malloc/malloc.c: Various cleanups.
	* malloc/hooks.c: Likewise.

	* stdlib/Makefile (tests): Add bug-fmtmsg1.
	* stdlib/bug-fmtmsg1.c: New file.

	* stdlib/fmtmsg.c (init): Add missing unlock.
	Patch by Peng Haitao <penght@cn.fujitsu.com>.

2012-01-12  Marek Polacek  <polacek@redhat.com>

	* libio/bits/stdio2.h: Do not define gets for ISO C11, ISO C++11,
	and _GNU_SOURCE.

2012-01-04  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* powerpc/powerpc32/sysdep.h: Add GLUE and GENERATE_GOT_LABEL macros.
	* unix/sysv/linux/powerpc/powerpc32/getcontext-common.S: Call
	macro to ensure uniqueness of label name.
	* unix/sysv/linux/powerpc/powerpc32/setcontext-common.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S: Likewise.

2012-01-11  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/e_acosh.c: New file.

	* sysdeps/ieee754/dbl-64/s_scalbln.c: Add branch prediction.
	* sysdeps/ieee754/flt-32/s_scalblnf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbln.c: New file.

2012-01-10  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_modf.c: New file.

	* sysdeps/ieee754/dbl-64/s_modf.c: Add branch prediction.
	* sysdeps/ieee754/flt-32/s_modff.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_modfl.c: Likewise.

	* math/bits/mathcalls.h: Add const attribute to fmin and fmax.

	* sysdeps/ieee754/dbl-64/s_scalbn.c: Add branch prediction.
	* sysdeps/ieee754/flt-32/s_scalbnf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_scalbn.c: New file.

	* math/bits/math-finite.h: Add ldexp support.

2012-01-10  Marek Polacek  <polacek@redhat.com>

	* locale/programs/localedef.h (show_archive_content): Add noreturn
	attribute.

2012-01-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/s_log1p.c (__log1p): Add branch prediction.

2012-01-08  Ulrich Drepper  <drepper@gmail.com>

	* io/bits/poll2.h: Add __BEGIN/__END_DECLS.

	* io/Makefile (headers): Add bits/poll2.h.

2011-01-05  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/getcontext.S: Fix a
	typo #include statement.

2012-01-08  Ulrich Drepper  <drepper@gmail.com>

	* include/sys/cdefs.h: Define __attribute_alloc_size.
	* catgets/gencat.c: Add alloc_size attribute and apply consistently
	the malloc attribute to xmalloc, xcalloc, xrealloc, and xstrdup.
	* elf/pldd.c: Likewise.
	* iconv/iconv_charmap.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* iconv/strtab.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.h: Likewise.
	* locale/programs/simple-hash.c: Likewise.
	* nscd/nscd.h: Likewise.
	* nss/makedb.c: Likewise.
	* sysdeps/generic/ldconfig.h: Likewise.
	* locale/programs/localedef.c: Remove xmalloc prototype.
	* nscd/mem.c: Remove xmalloc and xcalloc prototypes.

2012-01-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* stdio-common/vfscanf.c (_IO_vfscanf_internal): Use alloca when
	appropriate.

2012-01-08  Ulrich Drepper  <drepper@gmail.com>

	* math/Makefile (tests): Add tst-CMPLX.
	* math/tst-CMPLX.c: New file.

	* math/complex.h (CMPLXL): Fix typo.

	* debug/Makefile (routines): Add poll_chk and ppoll_chk.
	* debug/Versions: Export __pool_chk and __ppoll_chk from libc for
	GLIBC_2.16.
	* debug/tst-chk1.c: Add poll and ppoll tests.
	* io/sys/poll.h: Include bits/poll2.h for _FORTIFY_SOURCE.
	* include/sys/poll.h: Add hidden proto for ppoll.
	* sysdeps/unix/sysv/linux/ppoll.c: Add hidden def.
	* sysdeps/mach/hurd/ppoll.c: Likewise.
	* io/ppoll.c: Likewise.
	* debug/poll_chk.c: New file.
	* debug/ppoll_chk.c: New file.
	* include/bits/poll2.h: New file.
	* io/bits/poll2.h: New file.

	[BZ #1350]
	* math/complex.h (CMPLX, CMPLXF, CMPLXL): Define.

	* configure.in: static is always set to yes.  Remove.
	* config.make.in: Don't set build-static.
	* Makeconfig: Remove use of build-static.
	* dlfcn/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* math/Makefile: Likewise.
	* misc/Makefile: Likewise.
	* nptl/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.

	* configure.in: PWD_P is not used anymore.
	* config.make.in: Remove PWD_P entry.

	* configure.in: Remove last remnants of RANLIB.
	No need to check for signed size_t anymore.
	Don't set libc_commonpagesize and libc_relro_required here for Alpha
	and IA-64.
	Remove __builtin_expect test because we require at least gcc 3.4.
	* aclocal.m4: Likewise.

	* wcsmbs/mbrtoc16.c: Implement using towc function.
	* wcsmbs/wcsmbsload.h: No need for toc16 and fromc16 functions.
	* wcsmbs/wcsmbsload.c: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_builtin.h: Likewise.
	* iconv/iconv_prog.c: Remove CHAR16 handling.

	* wcsmbs/c16rtomb.c: Remove #if 0'ed code.

	* wcsmbs/mbrtowc.c: Better check for invalid inputs.

	* configure.in: Remove --with-elf and --enable-bounded options.
	Dont set base_machine for ia64.  More non-ELF conditions removed.
	Remove testing and setting of leading underscore information.
	* config.make.in (build-bounded): Set to no.
	* config.h.in: Remove NO_UNDERSCORES entry.
	* include/libc-symbols.h: Don't define HAVE_WEAK_SYMBOLS.  ELF has
	them.
	* csu/start.c: Remove !NO_UNDERSCORE code.
	* locale/localeinfo.h: Likewise.
	* sysdeps/generic/machine-gmon.h: Likewise.
	* sysdeps/generic/sysdep.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/sparc/sparc32/alloca.S: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sparc/start.c: Likewise.
	* sysdeps/unix/sparc/sysdep.S: Likewise.
	* sysdeps/unix/sparc/sysdep.h: Likewise.
	* sysdeps/unix/start.c: Likewise.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.

2012-01-07  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13553]
	* misc/sys/cdefs.h: Remove __const, __signed, and __volatile definition
	for non-gcc.
	* argp/argp-fmtstream.h: Use const instead __const.
	* argp/argp.h: Likewise.
	* assert/assert.h: Likewise.
	* bits/fenv.h: Likewise.
	* bits/sched.h: Likewise.
	* bits/sigset.h: Likewise.
	* bits/sigthread.h: Likewise.
	* catgets/nl_types.h: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* crypt/crypt-private.h: Likewise.
	* crypt/crypt.h: Likewise.
	* crypt/crypt_util.c: Likewise.
	* ctype/ctype.h: Likewise.
	* debug/execinfo.h: Likewise.
	* debug/mbsnrtowcs_chk.c: Likewise.
	* debug/mbsrtowcs_chk.c: Likewise.
	* debug/wcsnrtombs_chk.c: Likewise.
	* debug/wcsrtombs_chk.c: Likewise.
	* debug/wcstombs_chk.c: Likewise.
	* dirent/dirent.h: Likewise.
	* dlfcn/dlfcn.h: Likewise.
	* elf/neededtest4.c: Likewise.
	* grp/grp.h: Likewise.
	* gshadow/gshadow.h: Likewise.
	* iconv/gconv.h: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconv/iconv.h: Likewise.
	* iconv/loop.c: Likewise.
	* iconv/skeleton.c: Likewise.
	* include/aio.h: Likewise.
	* include/aliases.h: Likewise.
	* include/argz.h: Likewise.
	* include/arpa/inet.h: Likewise.
	* include/assert.h: Likewise.
	* include/dirent.h: Likewise.
	* include/dlfcn.h: Likewise.
	* include/execinfo.h: Likewise.
	* include/fcntl.h: Likewise.
	* include/fenv.h: Likewise.
	* include/glob.h: Likewise.
	* include/grp.h: Likewise.
	* include/libintl.h: Likewise.
	* include/mntent.h: Likewise.
	* include/netdb.h: Likewise.
	* include/pwd.h: Likewise.
	* include/rpc/netdb.h: Likewise.
	* include/sched.h: Likewise.
	* include/search.h: Likewise.
	* include/shadow.h: Likewise.
	* include/signal.h: Likewise.
	* include/stdio.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/string.h: Likewise.
	* include/sys/socket.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/sys/statfs.h: Likewise.
	* include/sys/statvfs.h: Likewise.
	* include/sys/syslog.h: Likewise.
	* include/sys/time.h: Likewise.
	* include/sys/uio.h: Likewise.
	* include/time.h: Likewise.
	* include/unistd.h: Likewise.
	* include/utmp.h: Likewise.
	* include/wchar.h: Likewise.
	* include/wctype.h: Likewise.
	* inet/aliases.h: Likewise.
	* inet/arpa/inet.h: Likewise.
	* inet/netinet/ether.h: Likewise.
	* inet/netinet/in.h: Likewise.
	* intl/libintl.h: Likewise.
	* io/bits/fcntl2.h: Likewise.
	* io/fcntl.h: Likewise.
	* io/ftw.h: Likewise.
	* io/sys/poll.h: Likewise.
	* io/sys/stat.h: Likewise.
	* io/sys/statfs.h: Likewise.
	* io/sys/statvfs.h: Likewise.
	* io/utime.h: Likewise.
	* libio/bits/stdio.h: Likewise.
	* libio/bits/stdio2.h: Likewise.
	* libio/libio.h: Likewise.
	* libio/libioP.h: Likewise.
	* libio/stdio.h: Likewise.
	* locale/lc-ctype.c: Likewise.
	* locale/locale.h: Likewise.
	* login/utmp.h: Likewise.
	* malloc/arena.c: Likewise.
	* malloc/malloc.c: Likewise.
	* malloc/malloc.h: Likewise.
	* malloc/mcheck.c: Likewise.
	* malloc/mtrace.c: Likewise.
	* math/bits/mathcalls.h: Likewise.
	* math/fenv.h: Likewise.
	* math/math_private.h: Likewise.
	* misc/bits/error.h: Likewise.
	* misc/bits/syslog.h: Likewise.
	* misc/err.h: Likewise.
	* misc/error.h: Likewise.
	* misc/fstab.h: Likewise.
	* misc/mntent.h: Likewise.
	* misc/regexp.h: Likewise.
	* misc/search.h: Likewise.
	* misc/sgtty.h: Likewise.
	* misc/sys/mman.h: Likewise.
	* misc/sys/syslog.h: Likewise.
	* misc/sys/uio.h: Likewise.
	* misc/sys/xattr.h: Likewise.
	* misc/ttyent.h: Likewise.
	* nis/rpcsvc/ypclnt.h: Likewise.
	* nss/nss.h: Likewise.
	* posix/bits/unistd.h: Likewise.
	* posix/fnmatch.h: Likewise.
	* posix/glob.h: Likewise.
	* posix/sched.h: Likewise.
	* posix/spawn.h: Likewise.
	* posix/sys/wait.h: Likewise.
	* posix/unistd.h: Likewise.
	* posix/wordexp.h: Likewise.
	* pwd/pwd.h: Likewise.
	* resolv/netdb.h: Likewise.
	* resource/sys/resource.h: Likewise.
	* rt/aio.h: Likewise.
	* rt/bits/mqueue2.h: Likewise.
	* rt/mqueue.h: Likewise.
	* shadow/shadow.h: Likewise.
	* signal/signal.h: Likewise.
	* socket/send.c: Likewise.
	* socket/sendto.c: Likewise.
	* socket/sys/socket.h: Likewise.
	* stdio-common/printf.h: Likewise.
	* stdlib/bits/stdlib.h: Likewise.
	* stdlib/fmtmsg.h: Likewise.
	* stdlib/monetary.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* stdlib/ucontext.h: Likewise.
	* streams/stropts.h: Likewise.
	* string/argz.h: Likewise.
	* string/bits/string2.h: Likewise.
	* string/string.h: Likewise.
	* string/strings.h: Likewise.
	* sunrpc/rpc/auth.h: Likewise.
	* sunrpc/rpc/auth_des.h: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sunrpc/rpc/netdb.h: Likewise.
	* sunrpc/rpc/pmap_clnt.h: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sysdeps/generic/inttypes.h: Likewise.
	* sysdeps/generic/net/if.h: Likewise.
	* sysdeps/generic/sys/swap.h: Likewise.
	* sysdeps/gnu/net/if.h: Likewise.
	* sysdeps/gnu/utmpx.h: Likewise.
	* sysdeps/i386/fpu/bits/fenv.h: Likewise.
	* sysdeps/i386/i486/bits/string.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/nldbl-strtold_l.c: Likewise.
	* sysdeps/s390/bits/string.h: Likewise.
	* sysdeps/s390/fpu/bits/fenv.h: Likewise.
	* sysdeps/sparc/fpu/bits/fenv.h: Likewise.
	* sysdeps/sparc/fpu/bits/mathinline.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/resource.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sched.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigset.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sys_errlist.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/uio.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/glob64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/olddirent.h: Likewise.
	* sysdeps/unix/sysv/linux/preadv.c: Likewise.
	* sysdeps/unix/sysv/linux/prlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/pwritev.c: Likewise.
	* sysdeps/unix/sysv/linux/readv.c: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmp-convert.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/utmpx32.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/timerfd.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/acct.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/mount.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/swap.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/timerfd.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Likewise.
	* sysdeps/x86_64/fpu/bits/fenv.h: Likewise.
	* sysdeps/x86_64/strcasecmp_l-nonascii.c: Likewise.
	* sysdeps/x86_64/strncase_l-nonascii.c: Likewise.
	* sysvipc/sys/ipc.h: Likewise.
	* sysvipc/sys/msg.h: Likewise.
	* sysvipc/sys/sem.h: Likewise.
	* sysvipc/sys/shm.h: Likewise.
	* termios/termios.h: Likewise.
	* time/sys/time.h: Likewise.
	* time/time.h: Likewise.
	* wcsmbs/bits/wchar2.h: Likewise.
	* wcsmbs/uchar.h: Likewise.
	* wcsmbs/wchar.h: Likewise.
	* wctype/wctype.h: Likewise.

	[BZ #13551]
	* Makeconfig: Remove all but ELF support including AIX support.
	* Makerules: Likewise.
	* config.h.in: Likewise.
	* config.make.in: Likewise.
	* configure: Likewise.
	* configure.in: Likewise.
	* csu/Makefile: Likewise.
	* csu/version.c: Likewise.
	* debug/Makefile: Likewise.
	* dlfcn/Makefile: Likewise.
	* elf/Makefile: Likewise.
	* extra-lib.mk: Likewise.
	* iconv/Makefile: Likewise.
	* include/libc-symbols.h: Likewise.
	* include/shlib-compat.h: Likewise.
	* resolv/Makefile: Likewise.
	* resolv/res_libc.c: Likewise.
	* rt/Makefile: Likewise.
	* sysdeps/i386/asm-syntax.h: Likewise.
	* sysdeps/i386/sysdep.h: Likewise.
	* sysdeps/ieee754/ldbl-opt/math_ldbl_opt.h: Likewise.
	* sysdeps/mach/sysdep.h: Likewise.
	* sysdeps/powerpc/powerpc32/Makefile: Likewise.
	* sysdeps/powerpc/powerpc64/Makefile: Likewise.
	* sysdeps/s390/asm-syntax.h: Likewise.
	* sysdeps/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/sh/sysdep.h: Likewise.
	* sysdeps/unix/sparc/sysdep.h: Likewise.
	* sysdeps/wordsize-32/divdi3.c: Likewise.
	* sysdeps/x86_64/sysdep.h: Likewise.

	* argp/Versions: Remove _argp_unlock_xxx.

	[BZ #13559]
	* abilist/ld.abilist: Update.  Adjust for removal of tls option.
	* abilist/libBrokenLocale.abilist: Likewise.
	* abilist/libanl.abilist: Likewise.
	* abilist/libc.abilist: Likewise.
	* abilist/libcrypt.abilist: Likewise.
	* abilist/libdl.abilist: Likewise.
	* abilist/libm.abilist: Likewise.
	* abilist/libnsl.abilist: Likewise.
	* abilist/libpthread.abilist: Likewise.
	* abilist/libresolv.abilist: Likewise.
	* abilist/librt.abilist: Likewise.
	* abilist/libthread_db.abilist: Likewise.
	* abilist/libutil.abilist: Likewise.
	* abilist/libnss_db.abilist: New file.

	* scripts/abilist.awk: Add support for indirect functions.

	* sysdeps/unix/sysv/linux/configure.in: Remove m68k support.

	* sysdeps/generic/ldsodefs.h: Remove Alpha support.

	* shlib-versions: Remove entries for ports architectures.

	* elf/tls-macros.h: Remove support for Alpha and IA-64.  Should be in
	files in ports.
	* elf/stackguard-macros.h: Remove support for IA-64.
	* elf/tst-auditmod1.c: Likewise.
	* sysdeps/generic/ldsodefs.h: Likewise.

	* sysdeps/unix/sysv/linux/configure.in: Ports should define
	libc_cv_gcc_unwind_find_fde and arch_minimum_kernel in their
	configure files.

	[BZ #13552]
	* configure.in: Remove --enable-omitfp support.
	* FAQ.in: Adjust.
	* config.make.in: Likewise.
	* Makeconfig: Likewise.
	* manual/install.texi: Likewise.

	In case anyone cares, the IA-64 architecture could move to ports.
	* sysdeps/ia64/*: Removed.
	* sysdeps/unix/sysv/linux/ia64/*: Removed.
	* sysdeps/unix/sysv/linux/kernel-features.h: Remove IA-64 support.

	[BZ #13555]
	* configure.in: Remove entries for unsupported architectures.

	[BZ #13533]
	* iconv/gconv_builtin.h: Use CHAR16 for the char16_t conversions.
	* iconv/gconv_simple.c: Rename char16_t routines.  Add char16_t<->utf8
	routines.
	* iconv/gconv_int.h: Adjust prototypes for char16_t routines.
	* iconv/iconv_prog.c: Recognize CHAR16 as internal name.
	* wcsmbs/c16rtomb.c: Fix a few problems.  Disable all the code and
	fall back to using wcrtomb.
	* wcsmbs/mbrtoc16.: Fix implementation to handle real conversions.
	* wcsmbs/wcsmbsload.c: Make char16 routines optional.  Adjust for
	renaming.
	* wcsmbs/Makefile (tests): Add tst-c16c32-1:
	* wcsmbs/tst-c16c32-1.c: New file.

	* wcsmbs/wcrtomb.c: Use MB_LEN_MAX instead of MB_CUR_MAX for sizing
	local variable.

	* libio/stdio.h: Do not declare gets at all for _GNU_SOURCE.

	* elf/tst-unique3.cc: Add explicit declaration of gets.
	* elf/tst-unique3lib.cc: Likewise.
	* elf/tst-unique3lib2.cc: Likewise.
	* elf/tst-unique4.cc: Likewise.

	* string/test-strcpy.c (do_one_test): Fix format string for WIDE use.

2012-01-06  Joseph Myers  <joseph@codesourcery.com>

	[BZ #13566]
	* assert/assert.h (static_assert): Don't define for C++.
	* libio/stdio.h (gets): Do declare for C++ <= C++11.
	* wcsmbs/uchar.h (char16_t, char32_t): Don't typedef for C++11.

2012-01-03  Ulrich Drepper  <drepper@gmail.com>

	* iconv/loop.c (single loop): Fix assertion in storing of
	remaining bytes.

	* posix/regcomp.c (init_word_char): Optimize a bit for sane encodings.

2012-01-01  Ulrich Drepper  <drepper@gmail.com>

	* posix/getconf.c: Update copyright year.
	* nss/getent.c: Likewise.
	* nss/makedb.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/pldd.c: Likewise.
	* elf/sotruss.ksh: Likewise.
	* catgets/gencat.c: Likewise.
	* csu/version.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* login/programs/pt_chown.c: Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* debug/xtrace.sh: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/mtrace.pl: Likewise.
	* debug/catchsegv.sh: Likewise.

2011-12-30  Jakub Jelinek  <jakub@redhat.com>

	* posix/regex_internal.c (re_string_fetch_byte_case): Remove
	pure attribute.

2011-12-24  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13533]
	* iconv/gconv_simple.c: Add ASCII<->UTF-16 transformations.
	* iconv/gconv_builtin.h: Add entries for internal ASCII<->UTF-16
	transformations.
	* iconv/gconv_int.h: Likewise.
	* wcsmbs/Makefile (routines): Add mbrtoc16 and c16rtomb.
	* wcsmbs/Versions: Export mbrtoc16, c16rtomb, mbrtoc32, c32rtomb
	from libc for GLIBC_2.16.
	* wcsmbs/mbrtowc.c: Define mbrtoc32 alias.
	* wcsmbs/wcrtomb.c: Define c32rtomb alias.
	* wcsmbs/uchar.h: Really define mbstate_t.
	* wcsmbs/wchar.h: Allow defining mbstate_t in uchar.h.
	* wcsmbs/c16rtomb.c: New file.
	* wcsmbs/mbrtoc16.c: New file.
	* wcsmbs/wcsmbsload.c: Add static definitions for c16 conversions
	for C/POSIX locale.
	(__wcsmbs_load_conv): Do not fill in c16 routines yet.
	* wcsmbs/wcsmbsload.h (gconv_fcts): Add entries for c16 routines.

	* wcsmbs/wchar.h: Add missing __restrict.

2011-12-23  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13532]
	* time/Makefile (routines): Add timespec_get.
	* time/Versions: Export timespec_get from libc for GLIBC_2.16.
	* time/time.h: Define TIME_UTC and declare timespec_get.  Define
	timespec for ISO C11.
	* time/timespec_get.c: New file.
	* sysdeps/unix/sysv/linux/timespec_get.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/timespec_get.c: New file.

	[BZ #13531]
	* malloc/malloc.c: Define alias aligned_alloc for public_mEMALIGn.
	* stdlib/stdlib.h: Declare aligned_alloc.
	* Versions.def: Add GLIBC_2.16 for libc.
	* malloc/Versions: Export aligned_alloc from libc for GLIBC_2.16.

	[BZ 13527]
	* stdlib/stdlib.h: Make at_quick_exit and quick_exit available for
	ISO C11.

	* include/features.h: Define __USE_ISOCXX11 when compiling ISO C++11
	code.

	[BZ #13528]
	* libio/stdio.h: Do not declare gets for ISO C11 and _GNU_SOURCE.

	[BZ #13529]
	* assert/assert.h (static_assert): Define.

	* version.h: Update for 2.16 development version.

	[BZ #13526]
	* include/features.h: Handle __STDC_VERSION__ >= 201112 and
	_ISOC11_SOURCE.

	* version.h (RELEASE): Bump for 2.15 release.
	* include/features.h (__GLIBC_MINOR__): Bump to 15.

	* sysdeps/x86_64/dl-machine.h: Fix typos in comments.
	Patch by Marek Polacek <mpolacek@redhat.com>.

	* bits/byteswap.h: Protect long long constants with __extension__.
	* sysdeps/i386/bits/byteswap.h: Likewise.
	* sysdeps/ia64/bits/byteswap.h: Likewise.
	* sysdeps/s390/bits/byteswap.h: Likewise.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.

2011-12-23  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #13540]
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: Fix overrun in
	destination buffer.
	* sysdeps/x86_64/multiarch/wcscpy-ssse3.S: Likewise.

2011-12-23  Marek Polacek  <polacek@redhat.com>

	* elf/dl-addr.c (determine_info): Add inline keyword.
	* elf/tst-auditmod4b.c (check_avx): Likewise.
	* elf/tst-auditmod6b.c (check_avx): Likewise.
	* elf/tst-auditmod6c.c (check_avx): Likewise.
	* elf/tst-auditmod7b.c (check_avx): Likewise.

2011-12-23  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/fpu/bits/fenv.h (feraiseexcept): Also enable for
	!__SSE_MATH__.

2011-12-23  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #13540]
	* sysdeps/i386/i686/multiarch/wcscpy-ssse3.S: Fix wrong copying
	processing for last bytes.

2011-08-06  Bruno Haible  <bruno@clisp.org>

	[BZ #13061]
	* iconvdata/cp1258.c (comp_table_data): Combine U+00A8 U+0301 to
	U+0385, not to U+1FEE.

	[BZ #13062]
	* iconvdata/tcvn5712-1.c (comp_table_data): Remove useless and wrong
	entry for U+00A5 U+0301.

2011-12-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13166]
	* inet/getnameinfo.c (getnameinfo): Return EAI_OVERFLOW if the
	buffer for the output is too small.

	* sysdeps/i386/fpu/bits/fenv.h [__SSE_MATH__]: Add feraiseexcept
	optimization.

	[BZ #13185]
	* sysdeps/i386/fpu/fgetexcptflg.c (__fegetexceptflag): Also return
	SSE flags if possible.

2011-12-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	[BZ #13540]
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Fix wrong copying
	processing for last bytes.

2011-12-22  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/Makefile (syscall-list-variants)
	(syscall-list-default-options, syscall-list-default-condition)
	(syscall-list-includes): Define.
	($(objpfx)syscall-%.h $(objpfx)syscall-%.d): Support arbitrary
	list of ABIs and options and #if conditions for each ABI.  Do not
	handle common syscalls between ABIs specially.
	* sysdeps/unix/sysv/linux/powerpc/Makefile (64bit-predefine):
	Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.
	* sysdeps/unix/sysv/linux/s390/Makefile (64bit-predefine): Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.
	* sysdeps/unix/sysv/linux/sparc/Makefile (64bit-predefine):
	Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.
	* sysdeps/unix/sysv/linux/x86_64/Makefile (64bit-predefine):
	Remove.
	(syscall-list-variants, syscall-list-32bit-options)
	(syscall-list-32bit-condition, syscall-list-64bit-options)
	(syscall-list-64bit-condition): Define.

2011-12-22  Ulrich Drepper  <drepper@gmail.com>

	* locale/iso-639.def: Add brx entry.

	[BZ #13328]
	* malloc/mtrace.c (tr_freehook): Avoid unnecessary unlock/lock.
	Proposed by Mariusz_Cukr <marcukr@op.pl>.

	* sysdeps/x86_64/fpu/bits/fenv.h: Use __REDIRECT_NTH for
	__feraiseexcept_renamed.

2011-12-21  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13538]
	* sysdeps/unix/sysv/linux/sys/epoll.h: Initialize EPOLLONESHOT and
	EPOLLET with unsigned values.
	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h: Likewise.

	* math/s_cacosh.c: Use Kahan's formula if the subtraction could lead
	to large cancellation.
	* math/s_cacoshf.c: Likewise.
	* math/s_cacoshl.c: Likewise.

2011-11-18  Richard B. Kreckel  <kreckel@ginac.de>

	[BZ #13305]
	[BZ #12786]
	* math/s_cacosh.c: Fix rare miscomputation in cacosh().
	* math/s_cacoshf.c: Likewise.
	* math/s_cacoshl.c: Likewise.

2011-12-21  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13439]
	* iconv/gconv.h: Define __GCONV_SWAP.
	* iconvdata/unicode.c: The swap bit must be stored in __flags.
	* iconvdata/utf-16.c: Likewise.
	* iconvdata/utf-32.c: Likewise.

2011-12-21  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #13524]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Clear lowest limb of
	numerator after shifting it by one limb.

2011-12-19  Rafael √Åvila de Esp√≠ndola  <rafael.espindola@gmail.com>

	* sysdeps/x86_64/fpu/bits/fenv.h (feraiseexcept): Define it only
	under [__USE_EXTERN_INLINES].

2011-12-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13446]
	* stdio-common/vfprintf.c (vfprintf): Fix extension of specs array.

2011-11-22  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/Makefile: Added locale-defines.sym generation.
	* sysdeps/powerpc/locale-defines.sym: Locale definitions for strcasecmp
	optimized code.
	* sysdeps/powerpc/powerpc32/power7/Makefile: New file.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strcasecmp_l.S: New file.
	* sysdeps/powerpc/powerpc64/power7/Makefile: Added unroll-loop option
	for strncasecmp/strncasecmp_l compilation.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strcasecmp_l.S: New file.

2011-12-08  Marek Polacek  <mpolacek@redhat.com>

	[BZ #13484]
	* math/bits/math-finite.h: Use __REDIRECT_NTH and __NTH instead
	of __asm__.

2011-12-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13506]
	* time/tzfile.c (__tzfile_read): Check values from file header.

2011-11-21  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* powerpc/powerpc32/sysdep.h: Define SETUP_GOT_ACCESS() macro.
	* powerpc/powerpc32/a2/memcpy.S: Use SETUP_GOT_ACCESS() macro.
	* powerpc/powerpc32/dl-start.S: Likewise.
	* powerpc/powerpc32/elf/start.S: Likewise.
	* powerpc/powerpc32/fpu/__longjmp-common.S: Likewise.
	* powerpc/powerpc32/fpu/s_ceil.S: Likewise.
	* powerpc/powerpc32/fpu/s_ceilf.S: Likewise.
	* powerpc/powerpc32/fpu/s_floor.S: Likewise.
	* powerpc/powerpc32/fpu/s_floorf.S: Likewise.
	* powerpc/powerpc32/fpu/s_lround.S: Likewise.
	* powerpc/powerpc32/fpu/s_rint.S: Likewise.
	* powerpc/powerpc32/fpu/s_rintf.S: Likewise.
	* powerpc/powerpc32/fpu/s_round.S: Likewise.
	* powerpc/powerpc32/fpu/s_roundf.S: Likewise.
	* powerpc/powerpc32/fpu/s_trunc.S: Likewise.
	* powerpc/powerpc32/fpu/s_truncf.S: Likewise.
	* powerpc/powerpc32/fpu/setjmp-common.S: Likewise.
	* powerpc/powerpc32/memset.S: Likewise.
	* powerpc/powerpc32/power4/fpu/s_llround.S: Likewise.
	* powerpc/powerpc32/power4/fpu/w_sqrt.S: Likewise.
	* powerpc/powerpc32/power4/fpu/w_sqrtf.S: Likewise.
	* powerpc/powerpc32/power5/fpu/w_sqrt.S: Likewise.
	* powerpc/powerpc32/power5/fpu/w_sqrtf.S: Likewise.
	* powerpc/powerpc32/power7/fpu/s_finite.S: Likewise.
	* powerpc/powerpc32/power7/fpu/s_isinf.S: Likewise.
	* powerpc/powerpc32/power7/fpu/s_isnan.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/____longjmp_chk.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/brk.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/getcontext-common.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/setcontext-common.S: Likewise.
	* unix/sysv/linux/powerpc/powerpc32/swapcontext-common.S: Likewise.

2011-11-18  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* math/libm-test.inc: Added more nearbyint tests.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyint.S: New file.
	* sysdeps/powerpc/powerpc32/fpu/s_nearbyintf.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyint.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/s_nearbyintf.S: New file.

2011-11-21  Ross Lagerwall  <rosslagerwall@gmail.com>

	* resolv/res_init.c (__res_vinit): Open /etc/resolv.conf with
	FD_CLOEXEC.

2011-11-14  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/Makefile [subdir=wcsmbs] (sysdep_routines):
	Add wcscpy-ssse3 wcscpy-c.
	* sysdeps/x86_64/multiarch/wcscpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/wcscpy-c.c: New file.
	* sysdeps/x86_64/multiarch/wcscpy.S: New file.
	* sysdeps/x86_64/wcschr.S: New file.
	* sysdeps/x86_64/wcsrchr.S: New file.
	* string/test-strcmp.c: Remove checking of wcscmp function for
	wrong alignments.
	* sysdeps/i386/i686/multiarch/Makefile [subdir=wcsmbs]
	(sysdep_routines): Add wcscpy-ssse3 wcscpy-c wcschr-sse2 wcschr-c
	wcsrchr-sse2 wcsrchr-c.
	* sysdeps/i386/i686/multiarch/wcschr.S: New file.
	* sysdeps/i386/i686/multiarch/wcschr-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcschr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/wcsrchr.S: New file.
	* sysdeps/i386/i686/multiarch/wcsrchr-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcsrchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/wcscpy.S: New file.
	* sysdeps/i386/i686/multiarch/wcscpy-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcscpy-ssse3.S: New file.
	* wcsmbc/wcschr.c (WCSCHR): New macro.

2011-11-17  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* wcsmbs/Makefile (strop-tests): Add wcsrchr wcscpy.
	* wcsmbs/test-wcsrchr.c: New file.
	* string/test-strrchr.c: Add wcsrchr support.
	(WIDE): New macro.
	* wcsmbs/test-wcscpy.c: New file.
	* string/test-strcpy.c: Add wcscpy support.
	(WIDE): New macro.

2011-12-10  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/generic/dl-hash.h (_dl_elf_hash): Lift one operation out of
	the inner loop.

2011-12-06  Andreas Schwab  <schwab@linux-m68k.org>

	[BZ #13472]
	* sysdeps/powerpc/fpu/e_hypot.c (twoM600): Correct value.

2011-12-04  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/generic/dl-hash.h (_dl_elf_hash): Fix attribute.
	Minor optimizations.

	* sunrpc/clnt_unix.c (clntunix_control): Fix aliasing issues.
	* sunrpc/clnt_tcp.c (clnttcp_control): Likewise.
	* sunrpc/clnt_udp.c (clntudp_call): Likewise.

2011-12-03  Ulrich Drepper  <drepper@gmail.com>

	* inet/netinet/in.h: Provide versions of IN6_IS_ADDR_UNSPECIFIED,
	IN6_IS_ADDR_LOOPBACK, IN6_IS_ADDR_LINKLOCAL, IN6_IS_ADDR_SITELOCAL,
	IN6_IS_ADDR_V4MAPPED, IN6_IS_ADDR_V4COMPAT, and IN6_ARE_ADDR_EQUAL
	for gcc to avoid warnings.
	* inet/Makefile (tests): Add tst-checks.
	* inet/tst-checks.c: New file.

	* sysdeps/generic/dl-hash.h (_dl_elf_hash): Add attribute to avoid
	warning.

	* sysdeps/x86_64/multiarch/wmemcmp-c.c: Provide prototype for
	__wmemcmp_sse2.

	* sysdeps/x86_64/fpu/s_scalbln.c: Removed.
	* sysdeps/x86_64/fpu/s_scalbn.c: Removed.

	* malloc/mcheck.h: Fix use of incorrect encoding in comment.

2011-12-02  Ulrich Drepper  <drepper@gmail.com>

	* nis/nis_findserv.c (__nis_findfastest_with_timeout): Avoid aliasing
	problem.

	* nscd/aicache.c (addhstaiX): Avoid unused variable warning.

2011-11-29  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/sh/bits/atomic.h (rNOSP): Define
	conditional on GCC version.
	(__arch_compare_and_exchange_val_8_acq)
	(__arch_compare_and_exchange_val_16_acq)
	(__arch_compare_and_exchange_val_32_acq, atomic_exchange_and_add)
	(atomic_add, atomic_add_negative, atomic_add_zero, atomic_bit_set)
	(atomic_bit_test_set): Use rNOSP instead of "r" constraints.

2011-12-02  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/sh/backtrace.c: New file.

2011-12-02  Andreas Schwab  <schwab@redhat.com>

	* misc/bits/select2.h (__FD_ELT): Mark as extension.  Add
	parenthesis.

2011-12-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/futimes.c: Truncate time values when
	falling back to utime.

2011-11-30  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/s390/fpu/libm-test-ulps: Relax cpow (2 + 3 i, 4 + 0 i)
	expectations for float.

2011-11-29  Andreas Schwab  <schwab@redhat.com>

	* locale/weight.h (findidx): Add parameter len.
	* locale/weightwc.h (findidx): Likewise.
	* posix/fnmatch_loop.c (FCT): Adjust caller.
	* posix/regcomp.c (build_equiv_class): Likewise.
	* posix/regex_internal.h (re_string_elem_size_at): Likewise.
	* posix/regexec.c (check_node_accept_bytes): Likewise.
	* string/strcoll_l.c (STRCOLL): Likewise.
	* string/strxfrm_l.c (STRXFRM): Likewise.

2011-11-17  Ulrich Drepper  <drepper@gmail.com>

	* Makefile.in: Remove CVSOPT handling.
	* configure.in: Remove use of AC_REVISION.
	* iconvdata/Makefile (distribute): No need to filter out CVS.
	* scripts/list-sources.sh: Remove CVS, subversion and monotone
	handling.

2011-11-16  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S
	[USE_AS_STRCASECMP_L]: Fix argument offsets for non-PIC.
	[USE_AS_STRNCASECMP_L]: Likewise.
	(__strcasecmp_ssse3, __strncasecmp_ssse3): Handle
	NO_TLS_DIRECT_SEG_REFS.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S [USE_AS_STRCASECMP_L]:
	Fix argument offsets for non-PIC.
	[USE_AS_STRNCASECMP_L]: Likewise.
	(__strcasecmp_sse4_2, __strncasecmp_sse4_2): Handle
	NO_TLS_DIRECT_SEG_REFS.

2011-11-15  Ulrich Drepper  <drepper@gmail.com>

	* locale/loadarchive.c (_nl_load_locale_from_archive): Open files with
	O_CLOEXEC.
	* locale/loadlocale.c (_nl_load_locale): Likewise.

2011-11-15  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/clock_gettime.c (SYSDEP_GETTIME_CPU)
	[__ASSUME_POSIX_CPU_TIMERS > 0]: Assign to retval and break.
	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c
	(SYSCALL_GETTIME): Set errno on error.

	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Properly
	count references to noai6ai_cached.

2011-11-15  Ulrich Drepper  <drepper@gmail.com>

	* time/getdate.c (__getdate_r): Set FD_CLOEXEC for given file.

	* sysdeps/unix/sysv/linux/readonly-area.c (__readonly_area): Set
	FD_CLOEXEC for /proc/self/maps.

	* sysdeps/unix/sysv/linux/getsysstats.c (phys_pages_info): Set
	FD_CLOEXEC for /proc/meminfo.

	* sysdeps/posix/getaddrinfo.c (gaiconf_init): Set FD_CLOEXEC for
	gai.conf.

	* resolv/res_query.c (res_hostalias):  Don't allow cancellation and set
	FD_CLOEXEC for given file.

	* resolv/res_hconf.c (do_init): Set FD_CLOEXEC for host.conf.

	* resolv/gethnamaddr.c (_sethtent): Don't allow cancellation and set
	FD_CLOEXEC for /etc/hosts.
	(_gethtent): Likewise.

	* nss/nsswitch.c (nss_parse_file): Set FD_CLOEXEC.

	* nss/nss_files/files-netgrp.c (_nss_files_setnetgrent): Don't allow
	cancellation and set FD_CLOEXEC for /etc/netgroup.

	* nss/nss_files/files-key.c (search): Don't allow cancellation when
	reading /etc/publickey.

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn): Don't
	allow cancellation when reading /etc/group.

	* nss/nss_files/files-alias.c (internal_setent): Don't allow
	cancellation.
	(get_next_alias): Likewise for included file.  Also set FD_CLOEXEC.

	* nss/nss_files/files-XXX.c (internal_setent): Don't allow cancellation
	when using data file.

	* nis/nss-default.c (init): Set FD_CLOEXEC for /etc/default/nss.

	* nis/nis_file.c (read_nis_obj): Set FD_CLOEXEC.
	(write_nis_obj): Use "c" and "e" in fopen.

	* misc/mntent_r.c (__setmntent): Also append e to fopen format.

	* misc/getusershell.c (initshells): Set FD_CLOEXEC for /etc/shells.

	* misc/getttyent.c (setttyent): Set FD_CLOEXEC.

	* misc/getpass.c (getpass): Set FD_CLOEXEC for /dev/tty.

	* intl/localealias.c (read_alias_file): Set FD_CLOEXEC for
	locale.alias.

	* inet/ruserpass.c (ruserpass): Set FD_CLOEXEC for .netrc.

	* inet/rcmd.c (iruserfopen): Set FD_CLOEXEC for hosts.equiv.

	* iconv/gconv_conf.c (read_conf_file): Set FD_CLOEXEC for config file.

	* hesiod/hesiod.c (parse_config_file): Prevent cancellation in config
	file parsing and set FD_CLOEXEC.

2011-11-14  Ulrich Drepper  <drepper@gmail.com>

	* time/tzfile.c (__tzfile_read): Use "e" in fopen call.

2011-11-14  Andreas Schwab  <schwab@redhat.com>

	* malloc/arena.c (arena_get2): Don't call reused_arena when
	_int_new_arena failed.

2011-11-14  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/i686/multiarch/Makefile [subdir=string]
	(sysdep_routines): Add strcasecmp_l-sse4 and strncase_l-sse4.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: Re-enable SSE4.2 code.
	* sysdeps/i386/i686/multiarch/strcmp.S: Likewise.
	* sysdeps/i386/i686/multiarch/strncase.S: Likewise.
	* sysdeps/i386/i686/multiarch/strcmp-sse4.S: Change to allow reuse
	to compile strcasecmp and strncasecmp.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-sse4.S: New file.
	* sysdeps/i386/i686/multiarch/strncase_l-sse4.S: New file.

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Use L macro consistently.

2011-11-13  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/i686/multiarch/Makefile [subdir=string]: Add
	locale-defines.sym to gen-as-const-headers.
	(sysdep_routines): Add strcasecmp_l-c, strcasecmp-c,
	strcasecmp_l-ssse3, strncase_l-c, strncase-c, and strncase_l-ssse3.
	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Change to allow reuse
	to compile strcasecmp and strncasecmp.
	* sysdeps/i386/i686/multiarch/strcmp.S: Allow to use for
	strcasecmp_l and strncasecmp_l.
	* sysdeps/i386/i686/multiarch/locale-defines.sym: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp-c.c: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp.S: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-c.c: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp_l-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strcasecmp_l.S: New file.
	* sysdeps/i386/i686/multiarch/strncase-c.c: New file.
	* sysdeps/i386/i686/multiarch/strncase.S: New file.
	* sysdeps/i386/i686/multiarch/strncase_l-c.c: New file.
	* sysdeps/i386/i686/multiarch/strncase_l-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strncase_l.S: New file.

2011-11-12  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/clock_gettime.c (clock_gettime): No need to assign
	result of SYSDEP_GETTIME_CPU to retval.
	* sysdeps/unix/sysv/linux/clock_gettime.c (SYSDEP_GETTIME_CPU): Add
	parameter list to macro.  Remove trailing semicolon.  Adjust users.

	* resolv/getaddrinfo_a.c (getaddrinfo_a): Avoid warning about unused
	variable.

	* sysdeps/ieee754/ldbl-96/e_j0l.c (__ieee754_j0l): Avoid storing
	mantissa words.
	* sysdeps/ieee754/ldbl-96/e_j1l.c (__ieee754_j1l): Likewise.

	* sysdeps/ieee754/ldbl-96/e_hypotl.c (__ieee754_hypotl): Avoid warning
	from unused variable.

	* sysdeps/generic/sysdep.h: Clean up, pretty print, use dwarf2.h for
	DWARF definitions.
	* sysdeps/generic/dwarf2.h: Don't define enums when using the file
	for assembling.

	* elf/dl-iteratephdr.c [!SHARED] (__dl_iterate_phdr): Don't iterate
	over namespaces.

	* sunrpc/rpc_prot.c (rejected): Fix case value.

	* sysdeps/unix/sysv/linux/internal_statvfs.c (INTERNAL_STATVFS): Use
	unsigned long long int to avoid warnings in shift.

	* posix/regex_internal.c (re_string_reconstruct): Actually use result
	of use of trans.
	* posix/regex_internal.h (re_string_wchar_at): Remove temporary
	variable tmp.

	* sysdeps/i386/i686/multiarch/wcscmp-c.c: Avoid warning.
	* sysdeps/i386/i686/multiarch/wcslen-c.c: Likewise.
	* sysdeps/i386/i686/multiarch/wmemcmp-c.c: Likewise.

	* nis/nis_table.c (nis_list): Use variable of correct type for
	result of __follow_path call.

2011-11-07  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/math_private.h: Using inline assembly version
	of math functions ceil, trunc, floor, round, and sqrt, when
	avaliable on the platform.
	* sysdeps/powerpc/fpu/e_sqrt.c: Undefine __ieee754_sqrt to avoid
	name clash.
	* sysdeps/powerpc/fpu/e_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrtf.c: Likewise.

2011-10-30  Marek Polacek  <mpolacek@redhat.com>

	* libio/wfileops.c (_IO_wfile_underflow_mmap): Remove unused variable.
	* sysdeps/ieee754/dbl-64/mpsqrt.c (__mpsqrt): Likewise.

2011-11-11  Roland McGrath  <roland@hack.frob.com>

	* include/unistd.h: Fix __readlink return type.
	Reported by Chris Metcalf <cmetcalf@tilera.com>.

2011-11-11  Ulrich Drepper  <drepper@gmail.com>

	* stdlib/ucontext.h: Undo last change for makecontext.

2011-11-11  Andreas Schwab  <schwab@redhat.com>

	* nss/db-Makefile ($(VAR_DB)/group.db): Fix typo in awk script.

	* misc/sys/cdefs.h (__REDIRECT_NTHNL): Define.
	* setjmp/setjmp.h: Mark functions as non-leaf.
	* setjmp/bits/setjmp2.h: Likewise.
	* stdlib/ucontext.h: Likewise.

2011-11-10  Andreas Schwab  <schwab@redhat.com>

	* malloc/arena.c (_int_new_arena): Don't increment narenas.
	(reused_arena): Don't check arena limit.
	(arena_get2): Atomically check arena limit.

2011-11-08  Ulrich Drepper  <drepper@gmail.com>

	* locale/findlocale.c (_nl_find_locale): Use __strcasecmp_l.
	* intl/localealias.c (strcasecmp): Define using __strcasecmp_l.

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S: Remove unnecessary
	instructions.

2011-11-07  Andreas Schwab  <schwab@redhat.com>

	* libio/genops.c (_IO_flush_all_lockp): Only register cleanup
	handler when locking.

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn):
	Fix size of allocated buffer.

2011-11-04  Andreas Schwab  <schwab@redhat.com>

	[BZ #10103]
	* math/math.h [__NO_LONG_DOUBLE_MATH && !_LIBC]: Provide
	declarations for long double functions.
	* math/complex.h [__NO_LONG_DOUBLE_MATH && !_LIBC]: Likewise.

	* elf/sprof.c (load_shobj): Fix off-by-one when reading link name.

2011-11-03  Andreas Schwab  <schwab@redhat.com>

	* nscd/nscd.c (main): Don't start AVC thread until credentials are
	installed.

	* nss/makedb.c (set_file_creation_context): Do nothing if SELinux
	is disabled.

2011-11-02  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/ioctl-types.h (_IOT_sgttyb): Set number of chars to 4.

2011-11-01  Andreas Schwab  <schwab@linux-m68k.org>

	* include/alloca.h (stackinfo_alloca_round): Define.
	(extend_alloca): Use it.
	[_STACK_GROWS_UP]: Correct check for adjacent allocation.
	* elf/dl-deps.c (_dl_map_object_deps): Don't round alloca size
	here.

	* scripts/check-local-headers.sh: Ignore libaudit.h.

	* nscd/Makefile (extra-objs): Make recursively expanded.

2011-11-01  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/strcmp.S: Fix test for non-ASCII locales.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Likewise.

	* posix/tst-rfc3484.c: Add missing __free_in6ai dummy function.
	* posix/tst-rfc3484-2.c: Likewise.
	* posix/tst-rfc3484-3.c: Likewise.

	* sysdeps/unix/sysv/linux/bits/uio.h: Declare process_vm_readv and
	process_vm_writev.
	* sysdeps/unix/sysv/linux/syscalls.list: Add process_vm_readv and
	process_vm_writev.
	* sysdeps/unix/sysv/linux/Versions: Export process_vm_readv and
	process_vm_writev from libc using GLIBC_2.15 version.

	* nscd/connections.c: Use kernel headers instead of <netlink/netlink.h>.

2011-10-31  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* elf/dl-deps.c (_dl_map_object_deps): Reuse alloca space to reduce
	stack usage.

2011-10-31  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13367]
	* nss/getent.c (initgroups_keys): Show error message in case no group
	names are given.

	* include/ifaddrs.h: Declare __free_in6ai and __bump_nl_timestamp.
	* inet/check_pf.c: Provide dummy versions of __free_in6ai and
	__bump_nl_timestamp.
	* nscd/connections (nscd_init): When host database is served open
	netlink socket and request notification about configuration changes.
	(main_loop_poll): Track netlink file descriptor and bump timestamp
	in case data becomes available.
	(main_loop_epoll): Likewise.
	* nscd/nscd-client.h (DB_VERSION): Bump to 2.
	(database_pers_head): Add extra_data fileds.
	Declare __nscd_get_mapping and __nscd_get_nl_timestamp.
	* nscd/nscd_gethst_r.c (__nscd_get_nl_timestamp): New function.
	* nscd/nscd_helper.c (__nscd_get_mapping): Renamed from get_mapping.
	Adjust caller.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Don't call free on
	in6ai data, call __free_in6ai.
	* sysdeps/unix/sysv/linux/Makefile [subdir=nscd] (sysdep-CFLAGS):
	Add -DHAVE_NETLINK.
	* sysdeps/unix/sysv/linux/check_pf.c: Major rewrite.  Cache the
	interface information.  Reuse previous data if netlink timestamp
	is not changed.
	(__bump_nl_timestamp): New function.
	(__free_in6ai): New function.

2011-10-30  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/check_pf.c (make_request): Don't call
	close_not_cancel_no_status here.
	(__check_pf): Reorganize code a bit to not call close twice if OOM.

2011-10-29  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13276]
	* malloc/malloc.c (munmap_chunk): Don't use assertion to check munmap
	return value.

	* posix/sys/wait.h: Mark wait3 and wait4 with __THROWNL.
	* libio/stdio.h: Mark sprintf, vsprintf snprintf, vsnprintf, vasprintf,
	asprintf, __asprintf, obstack_printf, obstack_vprintf with __THROWNL.

2011-07-03  Andreas Jaeger  <aj@suse.de>

	[BZ #10709]
	* sysdeps/ieee754/dbl-64/s_sin.c (__sin): Fix incorrect rounding
	of sin. Patch suggested by Paul Zimmermann <zimmerma+gcc@loria.fr>.
	* math/libm-test.inc (sin_test): Add test case.

2011-10-29  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13337]
	* elf/sprof.c (load_shobj): Correctly NUL-terminate link name.
	Patch by Thomas Jarosch <thomas.jarosch@intra2net.com>.

	* elf/chroot_canon.c (chroot_canon): Cleanups.

	* elf/dl-lookup.c (_dl_setup_hash): Avoid warning.

	[BZ #13335]
	* elf/chroot_canon.c (chroot_canon): Fix readlink call.
	Patch by Thomas Jarosch <thomas.jarosch@intra2net.com>.

	* string/test-strchr.c: Make usable for strchrnul testing.
	* string/test-strchrnul.c: New file.
	* string/Makefile (strop-tests): Add strchrnul.

	* po/it.po: Update from translation team.
	* po/es.po: Likewise.

2011-10-28  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu_tolower): Take
	the three constants needed as parameters.  Drop the others.
	(strcasestr_sse42): Load uclow, uchigh, and lcqword and pass to
	__m128i_strloadu_tolower.
	Create and initialize variable zero and use it in all the places
	where _mm_setzero_si128 was used.

	* sysdeps/x86_64/fpu/multiarch/Makefile: Don't build brandred-avx.c,
	doasin-avx.c, dosincos-avx.c, e_asin-avx.c, mpatan-avx.c,
	mpatan2-avx.c, mpsqrt-avx.c, mptan-avx.c, sincos32-avx.c.
	* sysdeps/x86_64/fpu/multiarch/e_asin.c: There are no _avx variants
	anymore.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-avx.c: Don't redirect __mpatan2.
	* sysdeps/x86_64/fpu/multiarch/s_atan-avx.c: Don't redirect __mpatan.
	* sysdeps/x86_64/fpu/multiarch/s_sin-avx.c: Don't redirect __branred,
	__docos, __dubsin, __mpcos, __mpcos1, __mpsin, __mpsin1.
	* sysdeps/x86_64/fpu/multiarch/s_tan-avx.c: Don't redirect __branred,
	__mpranred, __mptan.
	* sysdeps/x86_64/fpu/multiarch/brandred-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/doasin-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/dosincos-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/e_asin-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mpatan-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/mptan-avx.c: Removed.
	* sysdeps/x86_64/fpu/multiarch/sincos32-avx.c: Removed.

2011-10-28  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strnlen-c.c (libc_hidden_def): Only
	redefine if SHARED.
	* sysdeps/i386/i686/multiarch/wcscmp-c.c (libc_hidden_def): Likewise.

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Move
	wide char related routines to wcsmbs subdir.

2011-10-27  Andreas Schwab  <schwab@redhat.com>

	[BZ #13344]
	* misc/sys/cdefs.h (__THROWNL): Define.
	* posix/unistd.h: Use __THREADNL instead of __THREAD
	for memory synchronization functions.

2011-10-26  Roland McGrath  <roland@hack.frob.com>

	[BZ #13349]
	* libio/Versions (GLIBC_2.0): Remove open_obstack_stream, which
	doesn't exist.
	* manual/stdio.texi (Obstack Streams): Node removed.

2011-10-26  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/ieee754/flt-32/e_j0f.c: Fix use of math_force_eval.
	* sysdeps/ieee754/dbl-64/s_round.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundf.c: Likewise.

	* math/math_private.h (math_force_eval): Allow non-addressable
	arguments.
	* sysdeps/i386/fpu/math_private.h (math_force_eval): Likewise.

2011-10-25  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/e_rem_pio2.c: Comment everything out, the
	file is not needed.

	* sysdeps/x86_64/fpu/multiarch/e_asin.c: Support AVX variants.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/Makefile: Fix some CFLAGS-* variables.
	Add AVX variants.
	* sysdeps/x86_64/fpu/multiarch/brandred-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/doasin-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/dosincos-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_asin-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_exp-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_log-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpa-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpexp-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mplog-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mptan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_atan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_sin-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_tan-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/sincos32-avx.c: New file.
	* sysdeps/x86_64/fpu/multiarch/slowexp-avx.c: New file.

	* sysdeps/x86_64/multiarch/init-arch.h: Make bit_* macros available
	all the time.  Define bit_AVX.  Define HAS_* macros using bit_* macros.

	* sysdeps/x86_64/multiarch/strcmp-sse42.S: Move common code to earlier
	place.  Use VEX encoding when compiling for AVX.

2011-10-25  Andreas Schwab  <schwab@redhat.com>

	* wcsmbs/wcscmp.c (WCSCMP): Compare as wchar_t, not wint_t.
	* wcsmbs/wmemcmp.c (WMEMCMP): Likewise.

	* string/test-strchr.c (do_test): Don't generate NUL bytes.

2011-10-25  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/e_atanh.c: Use math_force_eval instead of a
	useless if() expression.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_expm1.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_log1p.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_round.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_round.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ceilf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_expm1f.c: Likewise.
	* sysdeps/ieee754/flt-32/s_floorf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_log1pf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_roundf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_roundl.c: Likewise.

	* sysdeps/x86_64/fpu/math_private.h: Use VEX encoding when possible.

2011-10-25  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-deps.c (_dl_map_object_deps): Remove always true
	condition.
	* elf/dl-fini.c (_dl_sort_fini): Likewise.

2011-10-25  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/branred.c: Move FMA4 code into separate
	.text section.  Avoid duplicate constants.
	* sysdeps/ieee754/dbl-64/doasin.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpa.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpatan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpexp.h: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/mpsqrt.h: Likewise.
	* sysdeps/ieee754/dbl-64/mptan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_sin.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.
	* sysdeps/ieee754/dbl-64/sincos32.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowexp.c: Likewise.
	* sysdeps/ieee754/dbl-64/slowpow.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/brandred-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/doasin-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/dosincos-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_asin-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_exp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_log-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/e_pow-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/halfulp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpatan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpexp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mplog-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/mptan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_atan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_sin-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_tan-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/sincos32-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/slowexp-fma4.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/slowpow-fma4.c: Likewise.

2011-10-24  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/dla.h: Move to ...
	* sysdeps/x86_64/fpu/dla.h: ...here.
	(DLA_FMS): Some compilers fail to inline __builtin_fma in some
	situations.  Use __builtin_fma only for gcc 4.6 and up.

	* config.make.in: Add have-mfma4 entry.
	* configure.in: Substitute libc_cv_cc_fma4.
	* math/Makefile (dbl-only-routines): Add sincostab.
	* sysdeps/ieee754/dbl-64/dosincos.c: Don't include sincos.tbl.
	Use __sincostab not sincos.
	* sysdeps/ieee754/dbl-64/e_asin.c: Don't define aliases when function
	name is a macro.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.  Define singArctan2
	using __copysign.
	* sysdeps/ieee754/dbl-64/mpa.c: Don't export __acr.  Don't define
	__cr and __cpymn.  Define __cpy unless NO___CPY is defined.  Define
	norm, denorm, and __mp_dbl unless NO___MP_DBL is defined.
	* sysdeps/ieee754/dbl-64/mpa.h: Don't declare __acr, __cr, __cpymn,
	and __inv.
	* sysdeps/ieee754/dbl-64/mpsqrt.c: Make fastiroot static.
	* sysdeps/ieee754/dbl-64/s_atan.c: Define __signArctan using
	__copysign.
	* sysdeps/ieee754/dbl-64/s_sin.c: Use __sincostab not sincos.  Don't
	define aliases when function name is a macro.
	* sysdeps/ieee754/dbl-64/sincostab.c: Renamed from
	sysdeps/ieee754/dbl-64/sincos.tbl.
	* sysdeps/x86_64/fpu/multiarch/Makefile: Add entries to build
	fma4-enabled routines.
	* sysdeps/x86_64/fpu/multiarch/brandred-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/doasin-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/dosincos-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_asin-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_asin.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_atan2-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_atan2.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_exp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_exp.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_log-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_log.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_pow-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/e_pow.c: New file.
	* sysdeps/x86_64/fpu/multiarch/halfulp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpa-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpatan2-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpexp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mplog-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mpsqrt-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/mptan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_atan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_atan.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_sin-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_sin.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_tan-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_tan.c: New file.
	* sysdeps/x86_64/fpu/multiarch/sincos32-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/slowexp-fma4.c: New file.
	* sysdeps/x86_64/fpu/multiarch/slowpow-fma4.c: New file.

	* sysdeps/ieee754/dbl-64/doasin.c: Adjust for DLA_FMA -> DLA_FMS
	rename.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.

2011-10-24  Andreas Schwab  <schwab@redhat.com>

	* wcsmbs/wcslen.c: Don't define WCSLEN, reverse logic.

2011-10-23  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_remquo.c: New file.

	* sysdeps/ieee754/dbl-64/e_fmod.c (__ieee754_fmod): Add some branch
	prediction.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_fmod.c: New file.

	* string/strnlen.c: Don't define STRNLEN, reverse logic.
	Remove unused variable magic_bits.
	* sysdeps/i386/i686/multiarch/rtld-strnlen.c: New file.

	* string/strnlen.c: Define and use STRNLEN macro.
	* sysdeps/i386/i686/multiarch/Makefile [string] (sysdep_routines):
	Add strnlen-sse2, strnlen-c, wcslen-sse2, and wcslen-c.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Add support for strnlen.
	* wcsmbs/wcslen.c: Define and use WCSLEN.
	* sysdeps/i386/i686/multiarch/strnlen-c.c: New file.
	* sysdeps/i386/i686/multiarch/strnlen-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strnlen.S: New file.
	* sysdeps/i386/i686/multiarch/wcslen-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcslen-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/wcslen.S: New file.
	Patch by Liubov Dmitrieva <liubov.dmitrieva@gmail.com>.

2011-10-20  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strnlen-sse2-no-bsf.
	Rename strlen-no-bsf to strlen-sse2-no-bsf.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Rename to
	* sysdeps/x86_64/multiarch/strlen-sse2-no-bsf.S:
	Add strnlen support.
	(USE_AS_STRNLEN): New macro.
	* sysdeps/x86_64/multiarch/strnlen-sse2-no-bsf.S: New file.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: Update.
	Rename strlen-no-bsf.S to strlen-sse2-no-bsf.S
	* sysdeps/x86_64/wcslen.S: New file.

2011-10-20  Michael Zolotukhin  <michael.v.zolotukhin@gmail.com>

	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Update.
	XMM-moves are used for copying on small sizes.

2011-10-19  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* wcsmbs/Makefile (strop-tests): Add wcschr.
	* wcsmbs/test-wcschr.c: New file.
	* string/test-strchr.c: Update.
	Add wcschr support.
	(WIDE): New macro.

2011-10-18  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* wcsmbs/Makefile (strop-tests): Add wcslen.
	* wcsmbs/test-wcslen.c: New file.
	* string/test-strlen.c: Update.
	Add wcslen support.
	(WIDE): New macro.

2011-10-23  Ulrich Drepper  <drepper@gmail.com>

	* po/it.po: Update from translation team.

2011-09-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/wcscmp.S: Update.
	Fix wrong comparison semantics.
	wcscmp shall use signed comparison not unsigned.
	Don't use substraction to avoid overflow bug.
	* sysdeps/i386/i686/multiarch/wcscmp-sse2.S: Likewise.
	* wcsmbc/wcscmp.c: Likewise.
	* string/test-strcmp.c: Likewise.
	Add new tests to check cases with negative values.

2011-10-23  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/dla.h: Move DLA_FMA definition to...
	* sysdeps/x86_64/dla.h: ...here.  New file.
	* sysdeps/ieee754/dbl-64/doasin.c: Use <dla.h> not "dla.h".
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.

2011-10-23  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Add __jnl_finite and
	__ynl_finite aliases.

2011-10-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/libm-test-ulps: Update.

	* sysdeps/ieee754/dbl-64/dla.h: When compiling with FMA4 support
	define DLA_FMA.
	[DLA_FMA] (EMULV): Use DLA_FMA.
	[DLA_FMA] (MUL12): Use EMULV.
	* sysdeps/ieee754/dbl-64/doasin.c [DLA_FMA]: Don't define variables
	that are not needed.
	* sysdeps/ieee754/dbl-64/dosincos.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_atan.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_tan.c: Likewise.

2011-10-22  Andreas Schwab  <schwab@linux-m68k.org>

	* math/s_nan.c: Undef __nan.
	* math/s_nanf.c: Undef __nanf.
	* math/s_nanl.c: Undef __nanl.
	* sysdeps/ieee754/ldbl-128ibm/s_atanl.c: Include <math.h> before
	"math_private.h".

2011-10-22  Ulrich Drepper  <drepper@gmail.com>

	* math/s_catan.c: Add branch predictions.
	* math/s_catanf.c: Likewise.
	* math/s_catanh.c: Likewise.
	* math/s_catanhf.c: Likewise.
	* math/s_catanhl.c: Likewise.
	* math/s_catanl.c: Likewise.
	* math/s_cexp.c: Likewise.
	* math/s_cexpf.c: Likewise.
	* math/s_cexpl.c: Likewise.
	* math/s_clog.c: Likewise.
	* math/s_clog10.c: Likewise.
	* math/s_clog10f.c: Likewise.
	* math/s_clog10l.c: Likewise.
	* math/s_clogf.c: Likewise.
	* math/s_clogl.c: Likewise.
	* math/s_csqrt.c: Likewise.
	* math/s_csqrtf.c: Likewise.
	* math/s_csqrtl.c: Likewise.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/s_ctanl.c: Likewise.

	* math/math_private.h: Define __nan, __nanf, __nanl.
	* math/s_cacosh.c: Include <math_private.h>.
	* math/s_cacoshl.c: Likewise.
	* math/s_casinh.c: Likewise.
	* math/s_casinhf.c: Likewise.
	* math/s_casinhl.c: Likewise.
	* math/s_ccos.c: Rely entire on ccosh.
	* math/s_ccosf.c: Rely entire on ccoshf.
	* math/s_ccosl.c: Rely entirely on ccoshl.
	* math/s_ccosh.c: Add branch predicion helpers.  Add branch prediction.
	Remove tests for FE_INVALID.
	* math/s_ccoshf.c: Likewise.
	* math/s_ccoshl.c: Likewise.
	* math/s_csin.c: Likewise.
	* math/s_csinf.c: Likewise.
	* math/s_csinh.c Likewise.
	* math/s_csinhf.c: Likewise.
	* math/s_csinhl.c: Likewise.
	* math/s_csinl.c: Likewise.
	* math/s_ctan.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Use __ieee754_sqrt.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Use __ieee754_sqrtf.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: Use __ieee754_sqrtl.

2011-10-21  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): Fix
	compilation problems.

	* sysdeps/ieee754/dbl-64/e_log.c (__ieee754_log): Add a few more
	__builtin_expect.

2011-10-20  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/configure.in: Test for -mfma4 option.
	* config.h.in: Add HAVE_FMA4_SUPPORT entry.
	* sysdeps/x86_64/multiarch/init-arch.h: Define HAS_FMA4 and
	COMMON_CPUID_INDEX_80000001.
	* sysdeps/x86_64/multiarch/init-arch.c: Read 80000001 leaf for AMD.
	* sysdeps/x86_64/fpu/multiarch/s_fma.c: Test for FMA4 support and
	use it if FMA3 is not supported.
	* sysdeps/x86_64/fpu/multiarch/s_fmaf.c: Likewise.

	* sysdeps/x86_64/multiarch/s_fma.c: Moved to ../fpu/multiarch.
	* sysdeps/x86_64/multiarch/s_fmaf.c: Likewise.

2011-10-20  Andreas Schwab  <schwab@redhat.com>

	[BZ #12892]
	* elf/dl-fini.c (_dl_sort_fini): Ignore relocation dependency if
	it would create a cycle with a link time dependency.

2011-10-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/multiarch/rawmemchr.S: Small optimization to safe an
	instruction.
	* string/Makefile (strop-tests): Add rawmemchr.
	* string/test-rawmemchr.c: New file.

	* sysdeps/x86_64/multiarch/init-arch.h: Define bit_AVX and index_AVX.
	* sysdeps/x86_64/multiarch/strcmp-sse42.S: New file.  Split out from...
	* sysdeps/x86_64/multiarch/strcmp.S: ...here.  Include strcmp-sse42.S
	when compiling str{,n}casecmp and when AVX is available.  Hook up
	new optimized code in initializers.

2011-10-19  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/math_private.h (libc_feupdateenv): Use
	__feraiseexcept instead of feraiseexcept.

2011-10-18  Ulrich Drepper  <drepper@gmail.com>

	* math/math_private.h: Define defaults for libc_fetestexcept and
	libc_feupdateenv.
	* sysdeps/ieee754/dbl-64/s_fma.c: Use libc_fe* interfaces.
	* sysdeps/ieee754/dbl-64/s_fmaf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_exp2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_expf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_nearbyintf.c: Likewise.
	* sysdeps/x86_64/fpu/math_private.h: Define special versions of
	libc_fetestexcept and libc_feupdateenv.

	* math/math_private.h: Define defaults for libc_feholdexcept_setround,
	libc_feholdexcept_setroundf, libc_feholdexcept_setroundl.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Use libc_feholdexcept_setround.
	* sysdeps/x86_64/fpu/math_private.h: Define special version of
	libc_feholdexcept_setround.

	* sysdeps/x86_64/fpu/multiarch/Makefile [math] (libm-sysdep-routines):
	Add s_nearbyint-c and s_nearbyintf-c.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Define nearbyint and
	nearbyintf inlines.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyint-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyint.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyintf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_nearbyintf.S: New file.

	* math/math_private.h: Define defaults for libc_fegetround,
	libc_fegetroundf, libc_fegetroundl, libc_fesetround, libc_fesetroundf,
	libc_fesetroundl, libc_feholdexcept, libc_feholdexceptf,
	libc_feholdexceptl, libc_fesetenv, libc_fesetenvf, libc_fesetenvl.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_nearbyint.c: Use
	libc_feholdexcept, libc_fesetround, libc_fesetenv instead of the
	standard functions.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Likewise.
	Remove comments and hacks for old compiler versions.
	* sysdeps/x86_64/fpu/math_private.h: Define special versions of
	libc_fegetround, libc_fesetround, libc_feholdexcept, and
	libc_feholdexceptl.

2011-10-18  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/bits/fenv.h: Add C linkage markers.
	(__feraiseexcept_renamed): Add __NTH.
	(feraiseexcept): Add __NTH.  Rename local variables to fix
	namespace violations.

2011-10-17  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/e_exp2.c (__ieee754_exp2): Small optimization.

	* sysdeps/ieee754/dbl-64/wordsize-64/s_frexp.c: New file.

	* sysdeps/x86_64/fpu/math_private.h: Relax asm requirements for
	recently added interfaces.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Likewise.

	* sysdeps/x86_64/fpu/math_private.h: Add some parenthesis to be safe
	about macro parameter expansion.

	* sysdeps/x86_64/fpu/bits/mathinline.h: Don't define inlines if
	__NO_MATH_INLINES is defined.  Cleanups.

	* sysdeps/x86_64/fpu/math_private.h: Define __rint, __rintf, __floor,
	and __floorf is target has SSE4.1.
	* sysdeps/x86_64/fpu/multiarch/s_floor-c.c: Undef first.
	* sysdeps/x86_64/fpu/multiarch/s_floorf-c.: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_rint-c.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/s_rintf-c.c: Likewise.

	* sysdeps/x86_64/fpu/bits/mathinline.h (floor): Use correct function
	name.
	(floorf): Likewise.

	* nscd/netgroupcache.c (addgetnetgrentX): Fix #ifdef nesting.

2011-10-17  Andreas Schwab  <schwab@redhat.com>

	* misc/sys/cdefs.h: Fix last change.

	* grp/initgroups.c (internal_getgrouplist): Fix initgroups
	database lookup.

2011-10-16  Ulrich Drepper  <drepper@gmail.com>

	* misc/sys/cdefs.h: Use leaf function attribute in __THROW.

	* sysdeps/ieee754/dbl-64/s_ceil.c: Avoid alias renamed.
	* sysdeps/ieee754/dbl-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_rint.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_ceil.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: Likewise.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_rint.c: Likewise.
	* sysdeps/ieee754/flt-32/s_ceilf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_floorf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_rintf.c: Likewise.
	* sysdeps/x86_64/fpu/multiarch/Makefile: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceil-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceil.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceilf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_ceilf.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floor-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floor.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floorf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_floorf.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rint-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rint.S: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rintf-c.c: New file.
	* sysdeps/x86_64/fpu/multiarch/s_rintf.S: New file.

	* sysdeps/x86_64/fpu/bits/mathinline.h: Add inlines for rint, rintf,
	ceil, ceilf, floor, floorf.

	* elf/do-rel.h (elf_dynamic_do_Rel): Work around linker problem.
	Perform IRELATIVE relocations last.

	* elf/do-rel.h: Add another parameter nrelative, replacing the
	local variable with the same name.  Change name of the function
	to end in Rel or Rela (uppercase).
	* elf/dynamic-link.h (_ELF_DYNAMIC_DO_RELOC): Add new element
	nrelative to ranges.  Only nonzero for DT_REL/DT_RELA.  Pass to the
	elf_dynamic_do_##reloc function.

2011-10-15  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/i686/fpu/e_log.S: No need for the fyl2xp1 use, fyl2x
	is sufficient, at least on modern CPUs.

	* sysdeps/ieee754/dbl-64/wordsize-64/s_floor.c: New file.

	* sysdeps/ieee754/dbl-64/e_cosh.c: Cleanup.
	* sysdeps/ieee754/dbl-64/wordsize-64/e_cosh.c: New file.

	* math/Versions [libm] (GLIBC_2.15): Add __exp_finite, __expf_finite,
	__expl_finite.
	* math/bits/math-finite.h: Add entries for exp.
	* math/e_expl.c: Add __*_finite alias.
	* sysdeps/i386/fpu/e_exp.S: Likewise.
	* sysdeps/i386/fpu/e_expf.S: Likewise.
	* sysdeps/i386/fpu/e_expl.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp.c: Likewise.
	* sysdeps/ieee754/flt-32/e_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_expl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_expl.c: Likewise.
	* sysdeps/ieee754/dbl-64/w_exp.c: Complete rewrite.
	* sysdeps/ieee754/flt-32/w_expf.c: Likewise.
	* sysdeps/ieee754/ldbl-96/w_expl.c: Likewise.

	* sysdeps/i386/i686/fpu/e_logf.S: No need for the fyl2xp1 use, fyl2x
	is sufficient, at least on modern CPUs.

	* ctype/ctype-info.c (__ctype_init): Define.
	* include/ctype.h (__ctype_init): Declare.
	(__ctype_b_loc): The variable is always initialized.
	(__ctype_toupper_loc): Likewise.
	(__ctype_tolower_loc): Likewise.
	* ctype/Versions: Export __ctype_init for GLIBC_PRIVATE.
	* sysdeps/unix/sysv/linux/init-first.c (_init): Call __ctype_init.

2011-10-15  Andreas Schwab  <schwab@linux-m68k.org>

	* wcsmbs/wmemcmp.c (WMEMCMP): Define.

	* configure.in: Also look in $cxxmachine/include for C++ system
	headers.

2011-09-27  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/Makefile: (sysdep_routines): Add
	memcmp-ssse3 wmemcmp-sse4 wmemcmp-ssse3 wmemcmp-c
	* sysdeps/x86_64/multiarch/memcmp-ssse3: New file.
	* sysdeps/x86_64/multiarch/memcmp.S: Update.  Add __memcmp_ssse3.
	* sysdeps/x86_64/multiarch/memcmp-sse4.S: Update.
	(USE_AS_WMEMCMP): New macro.
	Fixing indents.
	* sysdeps/x86_64/multiarch/wmemcmp.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-sse4.S: New file.
	* sysdeps/x86_64/multiarch/wmemcmp-c.S: New file.
	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	wmemcmp-ssse3 wmemcmp-sse4 wmemcmp-c
	* sysdeps/i386/i686/multiarch/wmemcmp.S: New file.
	* sysdeps/i386/i686/multiarch/wmemcmp-c.c: New file.
	* sysdeps/i386/i686/multiarch/wmemcmp-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/wmemcmp-sse4.S: New file.
	* sysdeps/i386/i686/multiarch/memcmp-sse4.S: Update.
	(USE_AS_WMEMCMP): New macro.
	* sysdeps/i386/i686/multiarch/memcmp-ssse3: Likewise.
	* sysdeps/string/test-memcmp.c: Update.
	Fix simple_wmemcmp.
	Add new tests.
	* wcsmbs/wmemcmp.c: Update.
	(WMEMCMP): New macro.
	Fix overflow bug.

2011-10-12  Andreas Jaeger  <aj@suse.de>

	[BZ #13268]
	* math/bits/mathcalls.h: Mark argument 2 of modf as non-null.

2011-10-15  Ulrich Drepper  <drepper@gmail.com>

	* libio/iofwide.c (do_length): Avoid warning.

	* ctype/ctype.h (__isctype_f): Add missing __THROW.

2011-10-14  Ulrich Drepper  <drepper@gmail.com>

	* elf/pldd-xx.c (find_maps): Remove leftover debug message.

	* sysdeps/i386/fpu/e_log.S: Add real definition of __log_finite.
	* sysdeps/i386/fpu/e_logf.S: Add real definition of __logf_finite.
	* sysdeps/i386/fpu/e_logl.S: Add real definition of __logl_finite.
	* sysdeps/i386/i686/fpu/e_log.S: New file.
	* sysdeps/i386/i686/fpu/e_logf.S: New file.
	* sysdeps/i386/i686/fpu/e_logl.S: New file.

	* ctype/ctype.h: Add support for inlined isXXX functions when
	compiling C++ code.

2011-10-14  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/s390/fpu/libm-test-ulps: Adjust ULPs for jn tests.

	* sysdeps/x86_64/fpu/fraiseexcpt.c: Fix last change.

2011-10-13  Roland McGrath  <roland@hack.frob.com>

	[BZ #13291]
	* manual/string.texi (String/Array Comparison): Typo fix in strverscmp.

2011-10-13  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/fraiseexcpt.c: Add __feraiseexcept alias.
	* sysdeps/x86_64/fpu/feupdateenv.c: Use __feraiseexcept instead of
	feraiseexcept.

	* sysdeps/x86_64/memrchr.S: Check for zero size.

	* string/stratcliff.c: Add memrchr tests.

2011-10-12  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	memchr-sse2 memchr-sse2-bsf memrchr-sse2 memrchr-sse2-bsf memrchr-c
	rawmemchr-sse2 rawmemchr-sse2-bsf.
	* sysdeps/i386/i686/multiarch/memchr.S: New file.
	* sysdeps/i386/i686/multiarch/memchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/memchr-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/memrchr.S: New file.
	* sysdeps/i386/i686/multiarch/memrchr-c.c: New file.
	* sysdeps/i386/i686/multiarch/memrchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/memrchr-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/rawmemchr.S: New file.
	* sysdeps/i386/i686/multiarch/rawmemchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/rawmemchr-sse2-bsf.S: New file.
	* string/memrchr.c (MEMRCHR): New macro.

2011-10-12  Ulrich Drepper  <drepper@gmail.com>

	Add integration with gcc's -ffinite-math-only and optimize wrapper
	functions in libm.
	* Versions.def: Define GLIBC_2.15 version for libm.
	* math/Makefile (headers): Add bits/math-finite.h.
	* math/bits/math-finite.h: New file.
	* sysdeps/ia64/fpu/bits/math-finite.h: New file.
	* math/Versions [libm] (GLIBC_2.15): Export __*_finite symbols.
	* math/e_acoshl.c: Add __*_finite alias.
	* math/e_acosl.c: Likewise.
	* math/e_asinl.c: Likewise.
	* math/e_atan2l.c: Likewise.
	* math/e_atanhl.c: Likewise.
	* math/e_coshl.c: Likewise.
	* math/e_exp10.c: Likewise.
	* math/e_exp10f.c: Likewise.
	* math/e_exp10l.c: Likewise.
	* math/e_exp2l.c: Likewise.
	* math/e_fmodl.c: Likewise.
	* math/e_gammal_r.c: Likewise.
	* math/e_hypotl.c: Likewise.
	* math/e_j0l.c: Likewise.
	* math/e_j1l.c: Likewise.
	* math/e_jnl.c: Likewise.
	* math/e_lgammal_r.c: Likewise.
	* math/e_log10l.c: Likewise.
	* math/e_log2l.c: Likewise.
	* math/e_logl.c: Likewise.
	* math/e_powl.c: Likewise.
	* math/e_sinhl.c: Likewise.
	* math/e_sqrtl.c: Likewise.
	* math/e_scalb.c: Completely rewritten and optimized.
	* math/e_scalbf.c: Likewise.
	* math/e_scalbl.c: Likewise.
	* math/w_acos.c: Likewise.
	* math/w_acosf.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atan2.c: Likewise.
	* math/w_atan2f.c: Likewise.
	* math/w_atan2l.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_exp10.c: Likewise.
	* math/w_exp10f.c: Likewise.
	* math/w_exp10l.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* math/w_scalb.c: Likewise.
	* math/w_scalbf.c: Likewise.
	* math/w_scalbl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* math/math.h: Define __MATH_DECLARE_LDOUBLE if long double functions
	are declared.  Include <bits/math-finite.h> if -ffinite-math-only is
	used.
	* math/math_private.h: Declare __kernel_standard_f.
	* math/w_cosh.c: Remove cruft and optimize a bit.
	* math/w_coshf.c: Likewise.
	* math/w_coshl.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_exp2l.c: Likewise.
	* math/w_hypot.c: Likewise.
	* math/w_hypotf.c: Likewise.
	* math/w_hypotl.c: Likewise.
	* math/w_lgamma.c: Likewise.
	* math/w_lgamma_r.c: Likewise.
	* math/w_lgammaf.c: Likewise.
	* math/w_lgammaf_r.c: Likewise.
	* math/w_lgammal.c: Likewise.
	* math/w_lgammal_r.c: Likewise.
	* math/w_sinh.c: Likewise.
	* math/w_sinhf.c: Likewise.
	* math/w_sinhl.c: Likewise.
	* math/w_tgamma.c: Likewise.
	* math/w_tgammaf.c: Likewise.
	* math/w_tgammal.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atanh.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atanhf.c: Likewise.
	* sysdeps/i386/fpu/e_acos.S: Add __*_finite alias.
	Minor optimizations.  Pretty printing.  Remove cruft.
	* sysdeps/i386/fpu/e_acosf.S: Likewise.
	* sysdeps/i386/fpu/e_acosh.S: Likewise.
	* sysdeps/i386/fpu/e_acoshf.S: Likewise.
	* sysdeps/i386/fpu/e_acoshl.S: Likewise.
	* sysdeps/i386/fpu/e_acosl.c: Likewise.
	* sysdeps/i386/fpu/e_asin.S: Likewise.
	* sysdeps/i386/fpu/e_asinf.S: Likewise.
	* sysdeps/i386/fpu/e_atan2.S: Likewise.
	* sysdeps/i386/fpu/e_atan2f.S: Likewise.
	* sysdeps/i386/fpu/e_atan2l.c: Likewise.
	* sysdeps/i386/fpu/e_atanh.S: Likewise.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/e_exp10.S: Likewise.
	* sysdeps/i386/fpu/e_exp10f.S: Likewise.
	* sysdeps/i386/fpu/e_exp10l.S: Likewise.
	* sysdeps/i386/fpu/e_exp2.S: Likewise.
	* sysdeps/i386/fpu/e_exp2f.S: Likewise.
	* sysdeps/i386/fpu/e_exp2l.S: Likewise.
	* sysdeps/i386/fpu/e_fmod.S: Likewise.
	* sysdeps/i386/fpu/e_fmodf.S: Likewise.
	* sysdeps/i386/fpu/e_fmodl.c: Likewise.
	* sysdeps/i386/fpu/e_hypot.S: Likewise.
	* sysdeps/i386/fpu/e_hypotf.S: Likewise.
	* sysdeps/i386/fpu/e_log.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/e_log2.S: Likewise.
	* sysdeps/i386/fpu/e_log2f.S: Likewise.
	* sysdeps/i386/fpu/e_log2l.S: Likewise.
	* sysdeps/i386/fpu/e_logf.S: Likewise.
	* sysdeps/i386/fpu/e_logl.S: Likewise.
	* sysdeps/i386/fpu/e_pow.S: Likewise.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.
	* sysdeps/i386/fpu/e_remainder.S: Likewise.
	* sysdeps/i386/fpu/e_remainderf.S: Likewise.
	* sysdeps/i386/fpu/e_remainderl.S: Likewise.
	* sysdeps/i386/fpu/e_scalb.S: Likewise.
	* sysdeps/i386/fpu/e_scalbf.S: Likewise.
	* sysdeps/i386/fpu/e_scalbl.S: Likewise.
	* sysdeps/i386/fpu/e_sqrt.S: Likewise.
	* sysdeps/i386/fpu/e_sqrtf.S: Likewise.
	* sysdeps/i386/fpu/e_sqrtl.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_acosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_asin.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_atan2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_cosh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_exp2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_fmod.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_gamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_hypot.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j0.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_j1.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_jn.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log10.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_log2.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_pow.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_remainder.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sinh.c: Likewise.
	* sysdeps/ieee754/dbl-64/e_sqrt.c: Likewise.
	* sysdeps/ieee754/dbl-64/halfulp.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_asinh.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acosf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_acoshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_asinf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_atan2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_coshf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_exp2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_fmodf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_gammaf_r.c: Likewise.
	* sysdeps/ieee754/flt-32/e_hypotf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j0f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_j1f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log10f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_log2f.c: Likewise.
	* sysdeps/ieee754/flt-32/e_logf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_powf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_remainderf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sinhf.c: Likewise.
	* sysdeps/ieee754/flt-32/e_sqrtf.c: Likewise.
	* sysdeps/ieee754/flt-32/s_asinhf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_acosl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_fmodl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log10l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_log2l.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_logl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_powl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_asinl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atan2l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_coshl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j0l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_j1l.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_lgammal_r.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_remainderl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_sinhl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypot.c: Likewise.
	* sysdeps/powerpc/fpu/e_hypotf.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/fpu/e_sqrtf.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrt.c: Likewise.
	* sysdeps/powerpc/powerpc64/fpu/e_sqrtf.c: Likewise.
	* sysdeps/s390/fpu/e_sqrt.c: Likewise.
	* sysdeps/s390/fpu/e_sqrtf.c: Likewise.
	* sysdeps/s390/fpu/e_sqrtl.c: Likewise.
	* sysdeps/sparc/sparc32/e_sqrt.c: Likewise.
	* sysdeps/sparc/sparc64/fpu/e_sqrtl.c: Likewise.
	* sysdeps/x86_64/fpu/e_exp2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_fmodl.S: Likewise.
	* sysdeps/x86_64/fpu/e_log10l.S: Likewise.
	* sysdeps/x86_64/fpu/e_log2l.S: Likewise.
	* sysdeps/x86_64/fpu/e_logl.S: Likewise.
	* sysdeps/x86_64/fpu/e_powl.S: Likewise.
	* sysdeps/x86_64/fpu/e_remainderl.S: Likewise.
	* sysdeps/x86_64/fpu/e_scalbl.S: Likewise.
	* sysdeps/x86_64/fpu/e_sqrt.c: Likewise.  Fix parameter order
	* sysdeps/x86_64/fpu/e_sqrtf.c: Likewise.
	* sysdeps/x86_64/fpu/math_private.h (__isnan): Cast d parameter.
	(__isnanf): Likewise.
	(__isinf_ns): Likewise.
	(__isinf_nsf): Likewise.
	(__finite): Likewise.
	(__finitef): Likewise.
	(__ieee754_sqrt): Define as macro.
	(__ieee754_sqrtf): Define as macro.
	(__ieee754_sqrtl): Define as macro.
	* sysdeps/x86_64/fpu/bits/fenv.h (feraiseexcept): Add partially
	inlined copy.
	* sysdeps/x86_64/fpu/bits/mathinline.h: Make use of
	__FINITE_MATH_ONLY__ consistent.
	* sysdeps/ieee754/k_standard.c (__kernel_standard_f): New function.

2011-10-10  Andreas Schwab  <schwab@linux-m68k.org>

	* inet/getnetgrent_r.c (nscd_getnetgrent): Use __rawmemchr instead
	of rawmemchr.

	* sysdeps/ieee754/ldbl-128ibm/s_isinf_nsl.c: New file.

2011-10-09  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

2011-10-08  Roland McGrath  <roland@hack.frob.com>

	* locale/programs/locarchive.c (prepare_address_space): New function.
	(create_archive, enlarge_archive, open_archive): Use it.

	* sysdeps/unix/sysv/linux/x86_64/time.c: Move #include <dl-vdso.h>
	inside [SHARED], where it is used.

	* nscd/nscd_proto.h: Declare __nscd_setnetgrent.

	* nss/getent.c (netgroup_keys): Remove unused variable.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: Likewise.

2011-10-08  Ulrich Drepper  <drepper@gmail.com>

	* include/math.h: Declare __isinf_ns, __isinf_nsf, __isinf_nsl.
	* sysdeps/ieee754/dbl-64/s_isinf_ns.c: New file.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isinf_ns.c: New file.
	* sysdeps/ieee754/flt-32/s_isinf_nsf.c: New file.
	* sysdeps/ieee754/ldbl-128/s_isinf_nsl.c: New file.
	* sysdeps/ieee754/ldbl-96/s_isinf_nsl.c: New file.
	* math/Makefile (libm-calls): Add s_isinf_ns.
	* math/divtc3.c: Use __isinf_nsl instead of isinf.
	* math/multc3.c: Likewise.
	* math/s_casin.c: Likewise.
	* math/s_casinf.c: Likewise.
	* math/s_casinl.c: Likewise.
	* math/s_ccos.c: Likewise.
	* math/s_ccosf.c: Likewise.
	* math/s_ccosl.c: Likewise.
	* math/s_ctan.c: Likewise.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/s_ctanl.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* sysdeps/ieee754/dbl-64/s_finite.c: Undefine __finite.
	* sysdeps/ieee754/dbl-64/s_isnan.c: Undefine __isnan.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: Undefine __finite.
	* sysdeps/ieee754/dbl-64/wordsize-64/s_isnan.c: Undefine __nan.
	* sysdeps/ieee754/flt-32/s_finitef.c: Undefine __finitef.
	* sysdeps/ieee754/flt-32/s_isnanf.c: Undefine __nan.
	* sysdeps/x86_64/fpu/math_private.h: Add optimized versions of __isnsn,
	__isnanf, __isinf_ns, __isinf_nsf, __finite, and __finitef.

	* stdio-common/printf_fp.c: Use the fact that isinf returns the sign
	of the number.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/printf_size.c: Likewise.

	* math/e_exp10.c: Include math_private.h using <...> not "...".
	* math/e_exp10f.c: Likewise.
	* math/e_exp10l.c: Likewise.
	* math/e_exp2l.c: Likewise.
	* math/e_j0l.c: Likewise.
	* math/e_j1l.c: Likewise.
	* math/e_jnl.c: Likewise.
	* math/e_lgammal_r.c: Likewise.
	* math/e_rem_pio2l.c: Likewise.
	* math/e_scalb.c: Likewise.
	* math/e_scalbf.c: Likewise.
	* math/e_scalbl.c: Likewise.
	* math/k_cosl.c: Likewise.
	* math/k_sinl.c: Likewise.
	* math/k_tanl.c: Likewise.
	* math/s_cacoshf.c: Likewise.
	* math/s_catan.c: Likewise.
	* math/s_catanf.c: Likewise.
	* math/s_catanh.c: Likewise.
	* math/s_catanhf.c: Likewise.
	* math/s_catanhl.c: Likewise.
	* math/s_catanl.c: Likewise.
	* math/s_ccosh.c: Likewise.
	* math/s_ccoshf.c: Likewise.
	* math/s_ccoshl.c: Likewise.
	* math/s_cexp.c: Likewise.
	* math/s_cexpf.c: Likewise.
	* math/s_cexpl.c: Likewise.
	* math/s_clog.c: Likewise.
	* math/s_clog10.c: Likewise.
	* math/s_clog10f.c: Likewise.
	* math/s_clog10l.c: Likewise.
	* math/s_clogf.c: Likewise.
	* math/s_clogl.c: Likewise.
	* math/s_csin.c: Likewise.
	* math/s_csinf.c: Likewise.
	* math/s_csinh.c: Likewise.
	* math/s_csinhf.c: Likewise.
	* math/s_csinhl.c: Likewise.
	* math/s_csinl.c: Likewise.
	* math/s_csqrt.c: Likewise.
	* math/s_csqrtf.c: Likewise.
	* math/s_csqrtl.c: Likewise.
	* math/s_ctan.c: Likewise.
	* math/s_ctanf.c: Likewise.
	* math/s_ctanh.c: Likewise.
	* math/s_ctanhf.c: Likewise.
	* math/s_ctanhl.c: Likewise.
	* math/s_ctanl.c: Likewise.
	* math/s_ldexp.c: Likewise.
	* math/s_ldexpf.c: Likewise.
	* math/s_ldexpl.c: Likewise.
	* math/s_significand.c: Likewise.
	* math/s_significandf.c: Likewise.
	* math/s_significandl.c: Likewise.
	* math/w_acos.c: Likewise.
	* math/w_acosf.c: Likewise.
	* math/w_acosh.c: Likewise.
	* math/w_acoshf.c: Likewise.
	* math/w_acoshl.c: Likewise.
	* math/w_acosl.c: Likewise.
	* math/w_asin.c: Likewise.
	* math/w_asinf.c: Likewise.
	* math/w_asinl.c: Likewise.
	* math/w_atan2.c: Likewise.
	* math/w_atan2f.c: Likewise.
	* math/w_atan2l.c: Likewise.
	* math/w_atanh.c: Likewise.
	* math/w_atanhf.c: Likewise.
	* math/w_atanhl.c: Likewise.
	* math/w_cosh.c: Likewise.
	* math/w_coshf.c: Likewise.
	* math/w_coshl.c: Likewise.
	* math/w_dremf.c: Likewise.
	* math/w_exp10.c: Likewise.
	* math/w_exp10f.c: Likewise.
	* math/w_exp10l.c: Likewise.
	* math/w_exp2.c: Likewise.
	* math/w_exp2f.c: Likewise.
	* math/w_fmod.c: Likewise.
	* math/w_fmodf.c: Likewise.
	* math/w_fmodl.c: Likewise.
	* math/w_hypot.c: Likewise.
	* math/w_hypotf.c: Likewise.
	* math/w_hypotl.c: Likewise.
	* math/w_j0.c: Likewise.
	* math/w_j0f.c: Likewise.
	* math/w_j0l.c: Likewise.
	* math/w_j1.c: Likewise.
	* math/w_j1f.c: Likewise.
	* math/w_j1l.c: Likewise.
	* math/w_jn.c: Likewise.
	* math/w_jnf.c: Likewise.
	* math/w_jnl.c: Likewise.
	* math/w_lgamma.c: Likewise.
	* math/w_lgamma_r.c: Likewise.
	* math/w_lgammaf.c: Likewise.
	* math/w_lgammaf_r.c: Likewise.
	* math/w_lgammal.c: Likewise.
	* math/w_lgammal_r.c: Likewise.
	* math/w_log.c: Likewise.
	* math/w_log10.c: Likewise.
	* math/w_log10f.c: Likewise.
	* math/w_log10l.c: Likewise.
	* math/w_log2.c: Likewise.
	* math/w_log2f.c: Likewise.
	* math/w_log2l.c: Likewise.
	* math/w_logf.c: Likewise.
	* math/w_logl.c: Likewise.
	* math/w_pow.c: Likewise.
	* math/w_powf.c: Likewise.
	* math/w_powl.c: Likewise.
	* math/w_remainder.c: Likewise.
	* math/w_remainderf.c: Likewise.
	* math/w_remainderl.c: Likewise.
	* math/w_scalb.c: Likewise.
	* math/w_scalbf.c: Likewise.
	* math/w_scalbl.c: Likewise.
	* math/w_sinh.c: Likewise.
	* math/w_sinhf.c: Likewise.
	* math/w_sinhl.c: Likewise.
	* math/w_sqrt.c: Likewise.
	* math/w_sqrtf.c: Likewise.
	* math/w_sqrtl.c: Likewise.
	* math/w_tgamma.c: Likewise.
	* math/w_tgammaf.c: Likewise.
	* math/w_tgammal.c: Likewise.

	* po/ja.po: Update from translation team.

2011-09-29  Andreas Jaeger  <aj@suse.de>

	[BZ #13179]
	* sunrpc/netname.c (netname2host): Fix logic.

	[BZ #6779]
	[BZ #6783]
	* math/w_remainderl.c (__remainderl): Handle (NaN, 0) and (Inf,y)
	correctly.
	* math/w_remainder.c (__remainder): Likewise.
	* math/w_remainderf.c (__remainderf): Likewise.
	* math/libm-test.inc (remainder_test): Add test cases.

2011-10-04  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* stdlib/longlong.h: Update from GCC.  Fix zarch smul_ppmm and
	sdiv_qrnnd.

2011-10-07  Ulrich Drepper  <drepper@gmail.com>

	* string/test-memcmp.c: Avoid unncessary #defines.
	Patch by Liubov Dmitrieva <liubov.dmitrieva@gmail.com>.

2011-08-31  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/rawmemchr.S: Update.
	Use new sse2 version for core i3 - i7 as it's faster
	than sse42 version.
	(bit_Prefer_PMINUB_for_stringop): New.
	* sysdeps/x86_64/rawmemchr.S: Update.
	Replace with faster SSE2 version.
	* sysdeps/x86_64/memrchr.S: New file.
	* sysdeps/x86_64/memchr.S: Update.
	Replace with faster SSE2 version.

2011-09-12  Marek Polacek  <mpolacek@redhat.com>

	* elf/dl-load.c (lose): Add cast to avoid warning.

2011-10-07  Ulrich Drepper  <drepper@gmail.com>

	* po/ca.po: Update from translation team.

	* inet/getnetgrent_r.c: Hook up nscd.
	* nscd/Makefile (routines): Add nscd_netgroup.
	(nscd-modules): Add netgroupcache.
	(CFLAGS-netgroupcache.c): Define.
	* nscd/cache.c (readdfcts): Add entries for GETNETGRENT and INNETGR.
	(cache_search): Add const to second parameter.
	* nscd/connections.c (serv2str): Add entries for GETNETGRENT and
	INNETGR.
	(dbs): Add netgrdb entry.
	(reqinfo): Add entries for GETNETGRENT, INNETGR, and GETFDNETGR.
	(verify_persistent_db): Handle netgrdb.
	(handle_request): Handle GETNETGRENT, INNETGR, and GETFDNETGR.
	* nscd/nscd-client.h (request_type): Add GETNETGRENT, INNETGR, and
	GETFDNETGR.
	(netgroup_response_header): Define.
	(innetgroup_response_header): Define.
	(datahead): Add netgroup_response_header and innetgroup_response_header
	elements.
	* nscd/nscd.conf: Add entries for netgroup cache.
	* nscd/nscd.h (dbtype): Add netgrdb.
	(_PATH_NSCD_NETGROUP_DB): Define.
	(netgroup_iov_disabled): Declare.
	(xmalloc, xcalloc, xrealloc): Move declarations here.
	(cache_search): Adjust prototype.
	Add netgroup-related prototypes.
	* nscd/nscd_conf.c (dbnames): Add netgrdb entry.
	* nscd/nscd_proto.h (__nss_not_use_nscd_netgroup): Declare.
	(__nscd_innetgr): Declare.
	* nscd/selinux.c (perms): Use access_vector_t as element type and
	add netgroup-related initializers.
	* nscd/netgroupcache.c: New file.
	* nscd/nscd_netgroup.c: New file.
	* nss/Versions [libc] (GLIBC_PRIVATE): Export __nss_lookup.
	* nss/getent.c (netgroup_keys): Use setnetgrent only for one parameter.
	For four parameters use innetgr.
	* nss/nss_files/files-init.c: Add definition and callback for netgr.
	* nss/nsswitch.c (__nss_lookup): Add libc_hidden_def.
	(__nss_disable_nscd): Set __nss_not_use_nscd_netgroup.
	* nss/nsswitch.h (__nss_lookup): Add libc_hidden_proto.

	* nscd/connections.c (register_traced_file): Don't register file
	for disabled databases.

2011-10-06  Ulrich Drepper  <drepper@gmail.com>

	* nscd/grpcache.c (cache_addgr): Initialize written in all cases.

	* nss/nsswitch.c (__nss_lookup_function): Fix order of deleting
	from tree and freeing node.

2011-09-25  Jiri Olsa  <jolsa@redhat.com>

	* nss/nsswitch.c (__nss_database_lookup): Handle
	nss_parse_service_list out of memory case.

2011-09-15  Jiri Olsa  <jolsa@redhat.com>

	* nss/nsswitch.c (__nss_lookup_function): Handle __tsearch
	out of memory case.

2011-10-04  Andreas Schwab  <schwab@redhat.com>

	* include/dlfcn.h (__RTLD_NOIFUNC): Define.
	* elf/do-rel.h (elf_dynamic_do_rel): Add parameter skip_ifunc and
	pass it down.
	* elf/dynamic-link.h: Adjust prototypes of elf_machine_rel,
	elf_machine_rela, elf_machine_lazy_rel.
	(_ELF_DYNAMIC_DO_RELOC): Add parameter skip_ifunc and pass it down.
	(ELF_DYNAMIC_DO_REL): Likewise.
	(ELF_DYNAMIC_DO_RELA): Likewise.
	(ELF_DYNAMIC_RELOCATE): Likewise.
	* elf/dl-reloc.c (_dl_relocate_object): Pass __RTLD_NOIFUNC down
	to ELF_DYNAMIC_DO_REL.
	* elf/rtld.c (_dl_start): Adjust use of ELF_DYNAMIC_RELOCATE.
	(dl_main): In trace mode always set __RTLD_NOIFUNC.
	* elf/dl-conflict.c (_dl_resolve_conflicts): Adjust call to
	elf_machine_rela.
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Add parameter
	skip_ifunc, don't call ifunc function if non-zero.
	(elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	(elf_machine_lazy_rela): Likewise.
	* sysdeps/ia64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h (elf_machine_rela):
	Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-32/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/s390/s390-64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sh/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/x86_64/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.

2011-09-28  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-init.c (_nss_files_init): Use static
	initialization for all the *_traced_file variables.

2011-09-28  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Adjust ULPs for jn tests.

2011-09-27  Roland McGrath  <roland@hack.frob.com>

	[BZ #13226]
	* manual/signal.texi (Longjmp in Handler): Grammar fixes.

2011-09-27  Andreas Schwab  <schwab@redhat.com>

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn):
	Reread the line before reparsing it.

2011-09-26  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h: Use __asm instead of asm.

2011-09-21  Chung-Lin Tang  <cltang@codesourcery.com>
	    Maxim Kuvyrkov  <maxim@codesourcery.com>
	    Joseph Myers  <joseph@codesourcery.com>

	* resolv/Makefile (LDLIBS-resolv.so): Link in $(elfobjdir)/ld.so
	if needed for __stack_chk_guard.

2011-09-19  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/posix/spawni.c (script_execute): Always define it.
	It will be optimized away if unused.
	(maybe_script_execute): New function.
	(__spawni): Call it.

	* Makerules: Don't include tls.make.
	(config-tls): Always set to thread.
	* tls.make.c: File removed.

2011-09-19  Mike Frysinger  <vapier@gentoo.org>

	* Makeconfig (CPPFLAGS): Prepend $(CPPFLAGS-config).
	* config.make.in (CPPFLAGS-config): New substituted variable.

2011-09-15  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_finite.c: New file.

	[BZ #13192]
	* sysdeps/unix/sysv/linux/bits/in.h (IP_MULTICAST_ALL): Define.
	Patch mostly by Neil Horman <nhorman@tuxdriver.com>.

2011-09-15  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/unix/sysv/linux/i386/____longjmp_chk.S
	(CALL_FAIL): Use HIDDEN_JUMPTARGET for __fortify_fail.
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S
	(CALL_FAIL): Likewise.
	* sysdeps/unix/sysv/linux/ia64/____longjmp_chk.S (CHECK_RSP): Likewise.
	(CALL_FAIL): Macro removed.
	Patch mostly by Mike Frysinger <vapier@gentoo.org>.

2011-09-15  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/bits/mathinline.h: Add fmax and fmin optimizations
	for __FINITE_MATH_ONLY__ == 1.

2011-09-15  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/powerpc/fpu/e_hypot.c (__ieee754_hypot): Use
	__ieee754_sqrt instead of sqrt.
	* sysdeps/powerpc/fpu/e_hypotf.c (__ieee754_hypotf): Use
	__ieee754_sqrtf instead of sqrtf.
	* sysdeps/powerpc/fpu/e_rem_pio2f.c (__ieee754_rem_pio2f): Use
	__floorf instead of floorf.
	* sysdeps/powerpc/fpu/k_rem_pio2f.c (__fp_kernel_rem_pio2f): Use
	__floorf, __truncf instead of floorf, truncf.

2011-09-14  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/fpu/s_copysign.S [ELF]: Use correct section.

	* sysdeps/x86_64/fpu/bits/mathinline.h (__MATH_INLINE): Use
	__extern_always_inline.
	Define lrint{f,} and llrint{f,} for 64-bit and in some situations for
	32-bit.

2011-09-14  Andreas Schwab  <schwab@redhat.com>

	* elf/rtld.c (dl_main): Also relocate in dependency order when
	doing symbol dependency testing.

2011-09-13  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Always define `refsym'.

2011-09-13  Andreas Schwab  <schwab@redhat.com>

	* misc/sys/select.h (__FD_MASK): Renamed from __FDMASK.
	(__FD_ELT): Renamed from __FDELT.
	* misc/bits/select2.h (__FD_ELT): Likewise.
	* bits/select.h (__FD_SET, __FD_CLR, __FD_ISSET): Use __FD_ELT,
	__FD_MASK instead of __FDELT, __FDMASK.
	* sysdeps/i386/bits/select.h (__FD_SET, __FD_CLR, __FD_ISSET):
	Likewise.
	* sysdeps/x86_64/bits/select.h (__FD_SET, __FD_CLR, __FD_ISSET):
	Likewise.

	* elf/Makefile (gen-ldd): Fix pattern.

	* elf/rtld.c (dl_main): Only use USE___THREAD when defined.
	(init_tls): Likewise.

2011-09-12  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/ieee754/dbl-64/wordsize-64/s_logb.c: New file.

2011-09-12  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/bits/socket.h (__cmsg_nxthdr): Cast to
	`struct cmsghdr *' instead of `void *'.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h (__cmsg_nxthdr):
	Likewise.

2011-09-11  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/Makefile (gen-ldd): Prepend $(..) to $(ldd-rewrite-script)
	if non-absolute.
	* sysdeps/unix/sysv/linux/configure.in: Remove leading ../ from
	ldd_rewrite_script.

2011-09-11  Ulrich Drepper  <drepper@gmail.com>

	* configure.in: Remove --with-tls option.
	* config.h.in: Remove HAVE_TLS_SUPPORT entry.
	* sysdeps/i386/elf/configure.in: Always test for TLS support and err
	out in case it is missing.
	* sysdeps/ia64/elf/configure.in: Likewise.
	* sysdeps/powerpc/powerpc32/elf/configure.in: Likewise.
	* sysdeps/powerpc/powerpc64/elf/configure.in: Likewise.
	* sysdeps/s390/s390-32/elf/configure.in: Likewise.
	* sysdeps/s390/s390-64/elf/configure.in: Likewise.
	* sysdeps/sh/elf/configure.in: Likewise.
	* sysdeps/sparc/sparc32/elf/configure.in: Likewise.
	* sysdeps/sparc/sparc64/elf/configure.in: Likewise.
	* sysdeps/x86_64/elf/configure.in: Likewise.
	* sysdeps/mach/hurd/i386/tls.h: Remove test for HAVE_TLS_SUPPORT.
	* sysdeps/mach/hurd/tls.h: Likewise.

	[BZ #13067]
	* malloc/obstack.h [!GNUC] (obstack_free): Avoid cast to int.

	[BZ #13090]
	* configure.in: Fix use of AC_INIT.

	* elf/dl-support.c (_dl_pagesize): Initialize to EXEC_PAGESIZE.

2011-09-10  Ulrich Drepper  <drepper@gmail.com>

	* malloc/malloc.c: Replace MALLOC_FAILURE_ACTION with use of
	__set_errno.
	* malloc/hooks.c: Likewise.

	[BZ #11929]
	* malloc/arena.c (ptmalloc_init_minimal): Removed.  Initialize all
	variables statically.
	(narenas): Initialize.
	(list_lock): Initialize.
	(ptmalloc_init): Don't call ptmalloc_init_minimal.  Remove
	initializtion of main_arena and list_lock.  Small cleanups.
	Replace all uses of malloc_getpagesize with GLRO(dl_pagesize).
	* malloc/malloc.c: Remove malloc_getpagesize.  Include <ldsodefs.h>.
	Add initializers to main_arena and mp_.
	(malloc_state): Remove pagesize member.  Change all users to use
	GLRO(dl_pagesize).

	* elf/rtld.c (rtld_global_ro): Initialize _dl_pagesize.
	* sysdeps/unix/sysv/linux/getpagesize.c: Simplify.  GLRO(dl_pagesize)
	is always initialized.

	* malloc/malloc.c: Removed unused configurations and dead code.
	* malloc/arena.c: Likewise.
	* malloc/hooks.c: Likewise.
	* malloc/Makefile (CPPFLAGS-malloc.c): Don't add -DATOMIC_FASTBINS.

	* include/tls.h: Removed.  USE___THREAD must always be defined.
	* bits/libc-tsd.h: Don't handle !USE___THREAD.
	* elf/dl-libc.c: Likewise.
	* elf/dl-tsd.c: Likewise.
	* include/errno.h: Likewise.
	* include/netdb.h: Likewise.
	* include/resolv.h: Likewise.
	* inet/herrno-loc.c: Likewise.
	* inet/herrno.c: Likewise.
	* malloc/arena.c: Likewise.
	* malloc/hooks.c: Likewise.
	* malloc/malloc.c: Likewise.
	* resolv/res-state.c: Likewise.
	* resolv/res_libc.c: Likewise.
	* sysdeps/i386/dl-machine.h: Likewise.
	* sysdeps/ia64/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc32/dl-machine.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h: Likewise.
	* sysdeps/s390/s390-32/dl-machine.h: Likewise.
	* sysdeps/s390/s390-64/dl-machine.h: Likewise.
	* sysdeps/sh/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.
	* sysdeps/unix/i386/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/i386/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.S: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Likewise.
	* sysdeps/unix/x86_64/sysdep.S: Likewise.
	* sysdeps/x86_64/dl-machine.h: Likewise.
	* tls.make.c: Likewise.

	* configure.in: Remove --with-__thread option.  Make tests for
	--no-whole-archive, __builtin_expect, symbol redirection, __thread,
	tls_model attribute fail if no support is available.  Remove
	USE_IN_LIBIO.
	* Makeconfig: Adjust for dropped configure option.  All features are
	now mandatory.
	* Makerules: Likewise.
	* Versions.def: Likewise.
	* argp/argp-fmtstream.c: Likewise.
	* argp/argp-fmtstream.h: Likewise.
	* argp/argp-help.c: Likewise.
	* assert/assert.c: Likewise.
	* config.h.in: Likewise.
	* config.make.in: Likewise.
	* configure: Likewise.
	* configure.in: Likewise.
	* csu/Versions: Likewise.
	* csu/init.c: Likewise.
	* elf/tst-audit2.c: Likewise.
	* elf/tst-tls10.c: Likewise.
	* elf/tst-tls10.h: Likewise.
	* elf/tst-tls11.c: Likewise.
	* elf/tst-tls12.c: Likewise.
	* elf/tst-tls14.c: Likewise.
	* elf/tst-tlsmod11.c: Likewise.
	* elf/tst-tlsmod12.c: Likewise.
	* elf/tst-tlsmod13.c: Likewise.
	* elf/tst-tlsmod13a.c: Likewise.
	* elf/tst-tlsmod14a.c: Likewise.
	* elf/tst-tlsmod15b.c: Likewise.
	* elf/tst-tlsmod16a.c: Likewise.
	* elf/tst-tlsmod16b.c: Likewise.
	* elf/tst-tlsmod7.c: Likewise.
	* elf/tst-tlsmod8.c: Likewise.
	* elf/tst-tlsmod9.c: Likewise.
	* gmon/gmon.c: Likewise.
	* grp/fgetgrent_r.c: Likewise.
	* grp/putgrent.c: Likewise.
	* hurd/fopenport.c: Likewise.
	* include/libc-symbols.h: Likewise.
	* include/tls.h: Likewise.
	* intl/gettextP.h: Likewise.
	* intl/loadinfo.h: Likewise.
	* locale/global-locale.c: Likewise.
	* locale/localeinfo.h: Likewise.
	* mach/devstream.c: Likewise.
	* malloc/arena.c: Likewise.
	* malloc/set-freeres.c: Likewise.
	* misc/err.c: Likewise.
	* misc/getttyent.c: Likewise.
	* misc/mntent_r.c: Likewise.
	* posix/getopt.c: Likewise.
	* posix/wordexp.c: Likewise.
	* pwd/fgetpwent_r.c: Likewise.
	* resolv/Versions: Likewise.
	* resolv/res_hconf.c: Likewise.
	* shadow/fgetspent_r.c: Likewise.
	* shadow/putspent.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/tmpfile.c: Likewise.
	* stdlib/abort.c: Likewise.
	* stdlib/fmtmsg.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

2011-09-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/fpu/libm-test-ulps: Adjust ULPs for jn tests.

2011-07-03  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc (jn_test): Add tests for BZ#11589.
	* sysdeps/x86_64/fpu/libm-test-ulps: Add new ULPs for jn_test,
	regenerate with gen-libm-tests.pl.

2010-05-12  Petr Baudi≈°  <pasky@suse.cz>

	[BZ #11589]
	* sysdeps/ieee754/dbl-64/e_jn.c: Compensate major precision loss
	around j0() zero points by switching to j1().
	* sysdeps/ieee754/flt-32/e_jnf.c: Likewise.
	* sysdeps/ieee754/ldbl-128/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-128ibm/e_jnl.c: Likewise.
	* sysdeps/ieee754/ldbl-96/e_jnl.c: Likewise.

2011-09-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/bsd/bsd4.4/bits/socket.h (__cmsg_nxthdr): Use NULL
	instead of 0.
	* sysdeps/unix/sysv/linux/bits/socket.h (__cmsg_nxthdr): Use (void*)0
	instead of 0.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.
	Patch in part by Pavel Roskin <proski@gnu.org>.

	[BZ #13138]
	* stdio-common/vfscanf.c (ADDW): Allocate large memory block with
	realloc.
	(_IO_vfscanf_internal): Remove reteof.  Use errout after setting done.
	Free memory block if necessary.

	[BZ #12847]
	* libio/genops.c (INTDEF): For string streams the _lock pointer can
	be NULL.  Don't lock in this case.

2011-09-09  Roland McGrath  <roland@hack.frob.com>

	* elf/elf.h (ELFOSABI_GNU): New macro.
	(ELFOSABI_LINUX): Define to that.

2011-07-29  Denis Zaitceff  <zaitceff@gmail.com>

	* string/strncat.c (strncat): Undef the symbol in case it has been
	defined in bits/string.h.

2011-09-09  Ulrich Drepper  <drepper@gmail.com>

	* elf/sotruss.ksh: Clean up, fix, and complete help messages.

	* elf/dl-iteratephdr.c (__dl_iterate_phdr): Fill in data from the real
	link map.

2011-08-17  Andreas Jaeger  <aj@suse.de>

	* elf/sprof.c (load_shobj): Remove unused variable log_hashfraction.

2011-08-18  Paul Pluzhnikov  <ppluzhnikov@google.com>
	    Ian Lance Taylor  <iant@google.com>

	* math/libm-test.inc (lround_test): New testcase.
	* sysdeps/ieee754/dbl-64/s_lround.c (__lround): Don't lose precision.

2011-09-08  Ulrich Drepper  <drepper@gmail.com>

	* Makefile: Remove support for automatic cvs check-ins.
	* Makerules: Likewise.
	* config.make.in: Likewise.
	* configure.in: Likewise.
	* intl/Makefile: Likewise.
	* locale/Makefile: Likewise.
	* po/Makefile: Likewise.
	* posix/Makefile: Likewise.
	* sysdeps/gnu/Makefile: Likewise.
	* sysdeps/mach/hurd/Makefile: Likewise.
	* sysdeps/sparc/sparc32/Makefile: Likewise.

	[BZ #13118]
	* posix/Makefile (bug-regex32-ENV): Define.
	Patch by John Stanley <jpsinthemix@verizon.net>.

	* misc/Makefile (headers): Add bits/select2.h.
	* misc/sys/select.h: Include bits/select2.h for _FORTIFY_SOURCE.
	* misc/bits/select2.h: New file.
	* include/bits/select2.h: New file.
	* debug/Makefile (routines): Add fdelt_chk.
	* debug/Versions: Export __fdelt_chk and __fdelt_warn for GLIBC_2.15.
	* debug/tst-chk1.c (do_test): Add tests for FD_SET, FD_CLR, and
	FD_ISSET.
	* debug/fdelt_chk.c: New file.

	* wcsmbs/test-wcscmp.c: Moved from string/*.  Adjust.
	* wcsmbs/test-wmemcmp.c: Likewise.
	* string/Makefile (strop-tests): Remove wcscmp and wmemcmp.
	* wcsmbs/Makefile (strop-tests): Add wcscmp and wmemcmp.

2011-09-08  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* string/Makefile (strop-tests): Add memcmp.
	* string/test-wmemcmp.c: New file.
	* string/test-memcmp.c: Add wmemcmp support.

2011-09-08  Roland McGrath  <roland@hack.frob.com>

	[BZ #13153]
	* manual/libc.texinfo (EDITION, VERSION, UPDATED): Update for
	2011-07-19 change.

	* sysdeps/mach/hurd/fork.c (__fork): Initialize REFS so we don't use a
	garbage value in a __mach_port_mod_refs call in the cases of the
	task-self and thread-self ports.

2011-09-06  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/sys/param.h (DEV_BSIZE): New macro.

2011-09-08  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-load.c (lose): Check for non-null L.

2011-09-07  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (open_verify): Use O_CLOEXEC.

	* elf/dl-libc.c (dlerror_run): Pass back error code from
	dl_catch_error.

	[BZ #13123]
	* elf/dl-load.c (lose): Free l_origin if it is valid.

	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: Fix mixup in section
	names.
	* sysdeps/i386/i686/multiarch/strchr-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2.S: Likewise.
	Patch by Liubov Dmitrieva <liubov.dmitrieva@intel.com>.

2011-08-01  Adhemerval Zanella  <azanella@linux.vnet.ibm.com>

	* sysdeps/powerpc/fpu/e_hypot.c: New file.
	* sysdeps/powerpc/fpu/e_hypotf.c: New file.
	* sysdeps/powerpc/fpu/e_rem_pio2f.c: New file.
	* sysdeps/powerpc/fpu/k_rem_pio2f.c: New file.
	* sysdeps/powerpc/fpu/k_cosf.c: New file.
	* sysdeps/powerpc/fpu/k_sinf.c: New file.
	* sysdeps/powerpc/fpu/s_cosf.c: New file.
	* sysdeps/powerpc/fpu/s_sinf.c: New file.
	* sysdeps/powerpc/fpu/s_scalbnf.c: New file.
	* sysdeps/powerpc/fpu/s_float_bitwise.h: New file.

2011-08-15  Alan Modra  <amodra@gmail.com>

	[BZ #13092]
	* sysdeps/powerpc/Makefile (gmon): Move sysdep_routines to..
	* sysdeps/powerpc/powerpc64/Makefile (gmon): ..here..
	* sysdeps/powerpc/powerpc32/Makefile (gmon): ..and here.  Add
	ppc_mcount to static-only-routines.
	* sysdeps/powerpc/powerpc32/Versions: Export GLIBC_PRIVATE
	__mcount_internal.
	* sysdeps/powerpc/powerpc32/ppc-mcount.S (_mcount): Call
	__mcount_internal with usual JUMPTARGET.  Remove useless nop.

2011-08-18  David Flaherty  <flaherty@linux.vnet.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/s_fmal.c: New file which checks
	for finite and infinity parameters.

2011-08-04  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Adjust the alignment
	and add nop instructions for throughput optimization.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.

2011-07-28  Will Schmidt  <will_schmidt@vnet.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Optimize the
	aligned copy for power7 with vector-scalar instructions.
	* sysdeps/powerpc/powerpc64/power7/memcpy.S: Likewise.

2011-07-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Simplify
	AVX check.

2011-09-07  Andreas Schwab  <schwab@redhat.com>

	[BZ #13144]
	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h (semdid_ds): Revert
	last change.

2011-09-07  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/x86_64/init-first.c
	(_libc_vdso_platform_setup): If vDSO is not present store pointer to
	syscall wrapper around clock_gettime in __vdso_clock_gettime.
	* sysdeps/unix/sysv/linux/x86_64/syscalls.list: Add entry for
	clock_gettime.

2011-09-06  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c (INTERNAL_GETTIME):
	Forgot to demangle the pointer.

	* sysdeps/i386/sysdep.h: Define atom_text_section.
	* sysdeps/x86_64/sysdep.h: Likewise.
	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: Place function in
	section with atom_text_section.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: Likewise.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr-sse2-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strrchr-sse2-no-bsf.S: Likewise.

	* sysdeps/unix/sysv/linux/x86_64/clock_gettime.c: New file.
	* sysdeps/unix/sysv/linux/clock_gettime.c (SYSCALL_GETTIME): Allow
	already be defined.  Change to take two parameters and don't assign
	result to variable.  Adjust all users.
	Define INTERNAL_GETTIME if not already defined.
	Use INTERNAL_GETTIME instead of INTERNAL_VSYSCALL got clock_gettime
	call.
	* sysdeps/unix/sysv/linux/x86_64/sysdep.h: Don't define
	HAVE_CLOCK_GETTIME_VSYSCALL.
	* sysdeps/unix/clock_gettime.c: Adjust use of SYSDEP_GETTIME_CPU.

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Don't use
	gettimeofday vsyscall, just use time.

2011-09-06  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c [!SHARED]: Include
	<errno.h>.

2011-09-06  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/kernel-features.h: Add entry for getcpu
	syscall on x86-64.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c [!SHARED]: Use real
	syscall.
	* sysdeps/unix/sysv/linux/x86_64/time.c: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S [!SHARED]: Use real
	syscall if possible.

2011-09-05  Ulrich Drepper  <drepper@gmail.com>

	* elf/pldd.c (get_process_info): Don't read whole ELF header, just
	e_ident.  Don't pass to find_mapsXX.
	* elf/pldd-xx.c (find_mapsXX): Remove second parameter.

2011-07-20  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strchr-sse2-no-bsf strrchr-sse2-no-bsf
	* sysdeps/x86_64/multiarch/strchr.S: Update.
	Check bit_slow_BSF bit.
	* sysdeps/x86_64/multiarch/strrchr.S: Likewise.
	* sysdeps/x86_64/multiarch/strchr-sse2-no-bsf.S: New file.
	* sysdeps/x86_64/multiarch/strrchr-sse2-no-bsf.S: New file.

2011-09-05  Ulrich Drepper  <drepper@gmail.com>

	[BZ #13134]
	* sysdeps/posix/spawni.c (script_execute): Define only for compatibility
	before glibc 2.15.
	(tryshell): Define.
	(__spawni): Change last parameter to be flag.  Test
	SPAWN_XFLAGS_USE_PATH flag to use path or not.
	Don't try to use shell unless SPAWN_XFLAGS_TRY_SHELL is set.
	* sysdeps/mach/hurd/spawni.c: Change last parameter and adjust user.
	* posix/spawni.c: Likewise.
	* posix/spawn.c: Add compat version which passed SPAWN_XFLAGS_TRY_SHELL.
	* posix/spawnp.c: Likewise.  Change normal version to use
	SPAWN_XFLAGS_USE_PATH.
	* posix/spawn_int.c: Define SPAWN_XFLAGS_USE_PATH and
	SPAWN_XFLAGS_TRY_SHELL.

	[BZ #13150]
	* posix/glob.h: Remove gcc 1.x support.

	[BZ #13068]
	* elf/dl-misc.c (_dl_sysdep_read_whole_file): Use O_CLOEXEC.

2011-07-20  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strchr-sse2 strrchr-sse2 strchr-sse2-bsf
	strrchr-sse2-bsf
	* sysdeps/i386/i686/multiarch/strchr.S: New file.
	* sysdeps/i386/i686/multiarch/strrchr.S: New file.
	* sysdeps/i386/i686/multiarch/strchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strchr-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/strrchr-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strrchr-sse2-bsf.S: New file.

2011-08-29  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/wcscmp.S: New file.

	* sysdeps/i386/i686/multiarch/Makefile: (sysdep_routines): Add
	wcscmp-c wcscmp-sse2
	* sysdeps/i386/i686/multiarch/wcscmp-c.c: New file.
	* sysdeps/i386/i686/multiarch/wcscmp.S: New file.
	* sysdeps/i386/i686/multiarch/wcscmp-sse2.S: New file.
	* wcsmbs/wcscmp.c: Allow renaming.

2011-09-05  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/fpu/s_fabsf.S: Use first argument
	stack slot, rather than the struct return pointer slot.
	* sysdeps/sparc/sparc32/fpu/s_fabs.c: Delete.
	* sysdeps/sparc/sparc32/fpu/s_fabs.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/fpu/s_fabs.S: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sparcv9/fpu/Implies: Likewise.

2011-09-05  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

	[BZ #13144]
	* sysdeps/unix/sysv/linux/x86_64/bits/sem.h (semdid_ds): Fix to match
	kernel in 64-bit binaries.

2011-09-01  David S. Miller  <davem@davemloft.net>

	* elf/elf.h (HWCAP_SPARC_*): Move to..
	* sysdeps/sparc/sysdep.h: this new file and add new values.
	* sysdeps/unix/sparc/sysdep.h: Include sysdeps/sparc/sysdep.h
	* sysdeps/sparc/dl-procinfo.h: Include sysdep.h and increase
	_DL_HWCAP_COUNT to 24.
	* sysdeps/sparc/dl-procinfo.c (_dl_sparc_cap_flags): Add new
	entries.
	* sysdeps/sparc/sparc32/bits/atomic.h: Don't use magic local
	__ATOMIC_HWCAP_SPARC_V9 define, use sysdep.h one instead.
	* sysdeps/sparc/sparc32/dl-machine.h: Include sysdep.h
	* sysdeps/sparc/sparc64/multiarch/memcpy.S: Use HWCAP_SPARC_*
	instead of magic constants.
	* sysdeps/sparc/sparc64/multiarch/memset.S: Likewise.

2011-08-31  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sparc/sysdep.h (SETUP_PIC_REG): Define.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h (PSEUDO):
	Reimplement to do errno handling inline.
	(SYSCALL_ERROR_HANDLER): New macro.
	(__SYSCALL_STRING): Do not do errno handling in asm.
	(__CLONE_SYSCALL_STRING): Delete.
	(__INTERNAL_SYSCALL_STRING): Delete.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h: Include
	sysdeps/unix/sparc/sysdep.h instead of sysdeps/unix/sysdep.h
	(PSEUDO): Reimplement to do errno handling inline.
	(ret, ret_NOERRNO, ret_ERRVAL, r0, r1, MOVE): Don't redefine.
	(SYSCALL_ERROR_HANDLER): New macro.
	(__SYSCALL_STRING): Do not do errno handling in asm.
	(__CLONE_SYSCALL_STRING): Delete.
	(__INTERNAL_SYSCALL_STRING): Delete.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h (INLINE_SYSCALL):
	Implement in terms of INTERNAL_SYSCALL and __set_errno, just like
	i386.
	(INTERNAL_SYSCALL_DECL): Declare %g1 var for err state.
	(inline_syscall*): Add 'err' argument.
	(INTERNAL_SYSCALL, INTERNAL_SYSCALL_NCS,
	INTERNAL_SYSCALL_ERROR_P): Likewise and pass it down.
	(INLINE_CLONE_SYSCALL): Reimplement in terms of __SYSCALL_STRING,
	INTERNAL_SYSCALL_ERRNO, and INTERNAL_SYSCALL_ERROR_P.

	* scripts/data/localplt-sparc-linux-gnu.data: Remove 'ffs'.
	* scripts/data/localplt-sparc64-linux-gnu.data: Likewise.

2011-08-30  Andreas Schwab  <schwab@redhat.com>

	* elf/rtld.c (dl_main): Relocate objects in dependency order.

2011-08-29  Jiri Olsa <jolsa@redhat.com>

	* sysdeps/i386/dl-trampoline.S (_dl_runtime_profile): Fix cfi
	directive.

2011-08-24  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/strcmp.S: Rewrite.

2011-08-24  Andreas Schwab  <schwab@redhat.com>

	* elf/Makefile: Add rules to build and run unload8 test.
	* elf/unload8.c: New file.
	* elf/unload8mod1.c: New file.
	* elf/unload8mod1x.c: New file.
	* elf/unload8mod2.c: New file.
	* elf/unload8mod3.c: New file.

	* elf/dl-close.c (_dl_close_worker): Reset private search list if
	it wasn't used.

2011-08-23  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc64/dl-machine.h (DL_STACK_END): Do not
	subtract stack bias.
	* sysdeps/sparc/sparc64/jmpbuf-unwind.h (_JMPBUF_UNWINDS): Use
	%sp not %fp in calculations.
	(_JMPBUF_UNWINDS_ADJ): Likewise.

	* sysdeps/pthread/aio_suspend.c (do_aio_misc_wait): New function.
	(aio_suspend): Call it to force an exception region around the
	AIO_MISC_WAIT() invocation.

2011-08-23  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strspn.S (ENTRY): Add missing
	backslash.

2011-07-04  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/powerpc/dl-tls.h: Add _PPC_DL_TLS_H inclusion
	protection macro.
	* sysdeps/powerpc/powerpc64/dl-irel.h: Include <ldsodefs.h>
	and <dl-machine.h>.
	(Elf64_FuncDesc): Remove.

2011-08-22  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/sparc32/____longjmp_chk.S: Fix
	sigaltstack check, add missing cfi directives.
	* sysdeps/unix/sysv/linux/sparc/sparc64/____longjmp_chk.S: Add
	missing cfi directives, and sigaltstack handling.

2011-08-16  Andreas Schwab  <schwab@redhat.com>

	[BZ #11724]
	* elf/dl-deps.c (_dl_map_object_deps): Only assume cycle when
	object is seen twice.
	* elf/dl-fini.c (_dl_sort_fini): Likewise.

	* elf/Makefile (distribute): Add tst-initorder2.c.
	(tests): Add tst-initorder2.
	(modules-names): Add tst-initorder2a tst-initorder2b
	tst-initorder2c tst-initorder2d.  Add rules to build them.
	($(objpfx)tst-initorder2.out): New rule.
	* elf/tst-initorder2.c: New file.
	* elf/tst-initorder2.exp: New file.

2011-08-22  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/i386/scandir64.c: Include <string.h>.

	* elf/dl-deps.c (_dl_map_object_deps): Move check for missing
	dependencies back to end of function.

	* dlfcn/Makefile (LDLIBS-bug-atexit3-lib.so): Readd
	$(elfobjdir)/ld.so.

2011-08-21  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.S: Removed.
	* sysdeps/unix/sysv/linux/x86_64/time.S: Removed.
	* sysdeps/unix/sysv/linux/x86_64/gettimeofday.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/time.c: New file.
	* sysdeps/unix/sysv/linux/x86_64/bits/libc-vdso.h: Remove declaration
	of __vdso_gettimeofday.
	* sysdeps/unix/sysv/linux/x86_64/init-first.c: Remove definition of
	__vdso_gettimeofday and __vdso_time.  Define __vdso_getcpu with
	attribute_hidden.
	(_libc_vdso_platform_setup): Remove initialization of
	__vdso_gettimeofday and __vdso_time.

2011-08-20  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-alias.c (get_next_alias): Use feof_unlocked
	and fgetc_unlocked.
	* nss/nss_files/files-key.c (search): Use fgets_unlocked and
	getc_unlocked.

	* elf/dl-open.c (add_to_global): Report additions to the global scope
	for LD_DEBUG=scopes.
	(dl_open_worker): Also print scope of newly loaded dependencies.
	(_dl_show_scope): Indicate if there is no scope.

	[BZ #13114]
	* stdio-common/Makefile (tests): Add bug24.
	* stdio-common/bug24.c: New file.

2011-08-19  Andreas Jaeger  <aj@suse.de>

	[BZ #13114]
	* libio/fileops.c (_IO_new_file_fopen): Fix handling of
	non-existant file when using close-on-exec mode.

2011-08-20  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_resolve): Fix CFI for
	the very first instruction.

	* sysdeps/x86_64/dl-trampoline.h: If MORE_CODE is defined, restore
	the CFI state in the end.
	* sysdeps/x86_64/dl-trampoline.S: Define MORE_CODE before first
	inclusion of dl-trampoline.h.
	Based on a patch by Jiri Olsa <jolsa@redhat.com>.

2011-08-19  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/powerpc/fpu/libm-test-ulps: Relax ctan (0.75 + 1.25 i)
	expectations for long double.

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/scandir64.c: Renamed
	from sysdeps/unix/sysv/linux/powerpc/scandir64.c.

2011-08-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-tst-writev.c): The
	artificual limit depends upon the system page size.

2011-08-17  Ulrich Drepper  <drepper@gmail.com>

	* Makeconfig (override CFLAGS): Add library-specific CFLAGS.
	* resolv/Makefile: Define CFLAGS-libresolv.

2011-08-17  Andreas Schwab  <schwab@redhat.com>

	* nss/makedb.c (compute_tables): Make variables used in nested
	function static.

2011-08-17  Ulrich Drepper  <drepper@gmail.com>

	* elf/pldd-xx.c (r_debug): Explicitly add padding when needed.
	* elf/pldd.c (get_process_info): Use pread to re-read auxiliary vector
	if buffer was too small.

	* elf/pldd.c (main): Attach to all threads in the process.
	Rewrite /proc handling to use *at functions.

2011-08-16  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-open.c (_dl_show_scope): Take additional parameter which
	specifies first scope to show.
	(dl_open_worker): Update callers.  Move printing scope of new
	object to before the relocation.
	* elf/rtld.c (dl_main): Update _dl_show_scope call.
	* sysdeps/generic/ldsodefs.h: Update declaration.

	* elf/dl-open.c (_dl_show_scope): Use _dl_debug_printf to generate the
	string for the scope number.

2011-08-14  Ulrich Drepper  <drepper@gmail.com>

	* nscd/servicescache.c (cache_addserv): Make sure written is always
	initialized.

2011-08-14  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/i486/bits/atomic.h
	(__arch_compare_and_exchange_val_64_acq): Use RET alone at end of
	statement expression, so as to suppress "set but not used" warning.
	(__arch_c_compare_and_exchange_val_64_acq): Likewise.

	* string/strncat.c (STRNCAT): Use prototype definition.

	* locale/Makefile (locale-CPPFLAGS): Renamed CPPFLAGS-locale-programs.
	(locale-CPPFLAGS): New variable; put LOCALEDIR, LOCALE_ALIAS_PATH and
	-Iprograms here.
	(cppflags-iterator.mk sequence): Use locale-programs in place of nonlib.
	(localedef-modules): Add localedef.
	(locale-modules): Add locale.

	* sysdeps/generic/ldsodefs.h (struct unique_sym): Add a const.
	* elf/rtld.c (dl_main): Invert order of assignment in last change,
	to avoid a warning.

2011-08-14  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/sparc/bits/resource.h (RLIM_INFINITY,
	RLIM64_INFINITY): Fix 64-bit values for 32-bit sparc.

2011-08-13  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-open.c: Rename show_scope to _dl_show_scope and export.
	(dl_open_worker): Call _dl_show_scope when DL_DEBUG_SCOPES is set.
	* elf/rtld.c (dl_main): Set l_name of vDSO.
	Call _dl_show_scope when DL_DEBUG_SCOPES.
	(process_dl_debug): Recognize scopes flag and also set it for all.
	* sysdeps/generic/ldsodefs.h: Define DL_DEBUG_SCOPES.
	Declare _dl_show_scope.

	* elf/dl-libc.c (do_dlopen_args): Add caller_dlopen.
	(do_dlopen): Pass caller_dlopen to dl_open.
	(__libc_dlopen_mode): Initialize caller_dlopen.

	* intl/l10nflist.c (_nl_normalize_codeset): Make it compile outside
	of libc.  Make tolower call locale-independent.  Optimize a bit by
	using isdigit instead of isalnum.
	* locale/Makefile (locale-CPPFLAGS): Add -DNOT_IN_libc.

2011-08-12  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (_dl_map_object): Show in debug output whether a DSO
	was a dependency or dynamically loaded.

2011-08-11  Ulrich Drepper  <drepper@gmail.com>

	* intl/l10nflist.c: Allow architecture-specific pop function.
	* sysdeps/x86_64/l10nflist.c: New file.

	* intl/l10nflist.c (_nl_make_l10nflist): Use locale-independent
	classification.

2011-08-10  Andreas Schwab  <schwab@redhat.com>

	* include/dirent.h: Add libc_hidden_proto for scandirat and
	scandirat64.  Don't declare __scandirat64.
	* dirent/scandirat.c: Add libc_hidden_def.
	* dirent/scandirat64.c (SCANDIRAT): Remove underscores.
	* sysdeps/unix/sysv/linux/i386/scandir64.c (SCANDIRAT): Likewise.

2011-08-10  David S. Miller  <davem@davemloft.net>

	* sysdeps/unix/sysv/linux/ia64/sys/ptrace.h: Add missing comma in
	enum.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.

2011-08-09  Ulrich Drepper  <drepper@gmail.com>

	* Versions.def [libc]: Add GLIBC_2.15.
	* dirent/Makefile (routines): Add scandirat and scandirat64.
	* dirent/Versions [libc]: Export scandirat and scandirat64 for
	GLIBC_2.15.
	* dirent/dirent.h: Declare scandirat and scandirat64.
	* dirent/scandirat.c: New file.
	* dirent/scandirat64.c: New file.
	* sysdeps/wordsize-64/scandirat.c: New file.
	* sysdeps/wordsize-64/scandirat64.c: New file.
	* dirent/opendir.c: Define opendirat.
	* dirent/scandir.c: Move code to scandirat.c.  Implement scandir
	using scandirat.
	* dirent/scandir64.c: Adjust for scandir.c change.
	* include/dirent.h: Define scandir_cancel_struct.  Declare __opendirat,
	__scandirat64, and __scandir_cancel_handler.
	* sysdeps/unix/opendir.c: Rename __opendir to __opendirat.  Take
	additional parameter and use openat instead of open (outside of ld.so).
	Add new __opendir as wrapper around __opendirat.
	* sysdeps/unix/sysv/linux/i386/scandir64.c: Reimplement __old_scandir64
	here without requiring old scandirat implementation.

2011-08-08  Ulrich Drepper  <drepper@gmail.com>

	* dirent/scandir.c (cancel_handler): Renamed to
	__scandir_cancel_handler.  Do not define if SKIP_SCANDIR_CANCEL is
	defined.  Adjust users.
	* dirent/scandir64.c: Define SKIP_SCANDIR_CANCEL.
	* sysdeps/unix/sysv/linux/i386/scandir64.c: Likewise.

2011-08-04  Ulrich Drepper  <drepper@gmail.com>

	* string/test-string.h (IMPL): Use __STRING to expand name and then
	stringify it.

	* string/test-strcmp.c: Unify most of the WIDE and !WIDE code.  Lots
	of cleanups.

2011-07-22  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* string/Makefile: Update.
	(strop-tests): Append strncat.
	* string/test-wcscmp.c: New file.
	New comprehensive test for wcscmp.
	* string/test-strcmp.c: Update.
	(WIDE): New define.

2011-07-22  Andreas Schwab  <schwab@redhat.com>

	* resolv/res_init.c (__res_vinit): Properly tokenize nameserver
	line.

2011-07-26  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't discard result of
	encoding to ACE if AI_IDN.

2011-08-01  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/ieee754/dbl-64/k_rem_pio2.c (__kernel_rem_pio2): Fix up fq
	to y conversion for prec 3 and __FLT_EVAL_METHOD__ != 0.

2011-07-22  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/strcat-sse2.S: Update.
	Fix overflow bug in strncat.
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Likewise.

	* string/test-strncat.c: Update.
	Add new tests for checking overflow bugs.

2011-07-15  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strcat-ssse3 strcat-sse2 strncat-ssse3 strncat-sse2 strncat-c.
	* sysdeps/i386/i686/multiarch/strcat.S: New file.
	* sysdeps/i386/i686/multiarch/strcat-c.c: New file.
	* sysdeps/i386/i686/multiarch/strcat-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strcat-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strncat.S: New file.
	* sysdeps/i386/i686/multiarch/strncat-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strncat-ssse3.S: New file.

	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S
	(USE_AS_STRCAT): Define.
	Add strcat and strncat support.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: Likewise.

2011-07-25  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i486/bits/string.h (__strncat_g): Correctly handle
	__n bigger than INT_MAX+1.
	(__strncmp_g): Likewise.

2011-07-23  Ulrich Drepper  <drepper@gmail.com>

	* posix/unistd.h: Define SEEK_DATA and SEEK_HOLE.
	* libio/stido.h: Likewise.

	* sysdeps/unix/sysv/linux/bits/socket.h (PF_NFC): Define.
	(AF_NFC): Define.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h (PF_NFC): Define.
	(AF_NFC): Define.

	* sysdeps/unix/sysv/linux/sys/ptrace.h: Add new constants.
	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/sys/ptrace.h: Likewise.

	[BZ #13021]
	* scripts/test-installation.pl: Don't expect libnss_test1 to be
	installed.

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix one more
	typo.
	(_dl_x86_64_save_sse): Likewise.

2011-07-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix test for
	OSXSAVE.
	(_dl_x86_64_save_sse): Likewise.

	* crypt/crypt_util.c (__init_des_r): Optimize memset calls.

	* crypt/crypt_util.c (__init_des_r): Add read barrier as well.

2011-07-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): Fix last
	change.
	(_dl_x86_64_save_sse): Use correct AVX check.

2011-07-21  Liubov Dmitrieva  <liubov.dmitrieva@gmail.com>

	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Fix overfow
	bug in strncpy/strncat.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: Likewise.

2011-07-21  Ulrich Drepper  <drepper@gmail.com>

	* string/tester.c (test_strcat): Add tests for different alignments
	of source and destination.
	(test_strncat): Likewise.

2011-07-20  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12852]
	* posix/glob.c (glob): Check passed in values before using them in
	expressions to avoid some overflows.
	(glob_in_dir): Likewise.

	[BZ #13007]
	* sysdeps/x86_64/dl-trampoline.S (_dl_runtime_profile): More complete
	check for AVX enablement so that we don't crash with old kernels and
	new hardware.
	* elf/tst-audit4.c: Add same checks here.
	* elf/tst-audit6.c: Likewise.

	* sysdeps/x86_64/bits/link.h (La_x86_64_ymm): Force 16-byte alignment.

2011-07-09  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/pathconf.c: Include <string.h>.

2011-07-20  Ulrich Drepper  <drepper@gmail.com>

	* po/cs.po: Update from translation team.
	* po/bg.po: Likewise.

2011-07-12  Marek Polacek  <mpolacek@redhat.com>

	* misc/sys/cdefs.h: Add support for const attribute.
	* sysdeps/unix/sysv/linux/sys/sysmacros.h: Add __attribute_const__
	to gnu_dev_{major,minor,makedev} functions.

2011-07-20  Marek Polacek  <mpolacek@redhat.com>

	* intl/dcigettext.c (get_output_charset): Add missing bracket.

2011-07-20  Andreas Schwab  <schwab@redhat.com>

	* resolv/res_query.c (__libc_res_nquerydomain): Use size_t for
	strlen results.

2011-07-13  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/unix/sysv/linux/s390/s390-32/sysdep.h
	(INTERNAL_VSYSCALL_NCS): Use r10 for backing up the return address
	register in order to avoid conflicts with the soft frame pointer
	being held in r11 when necessary.
	* sysdeps/unix/sysv/linux/s390/s390-64/sysdep.h
	(INTERNAL_VSYSCALL_NCS): Likewise.

2011-07-14  Marek Polacek  <mpolacek@redhat.com>

	* elf/dl-fini.c (_dl_sort_fini): Remove unused link_map *l argument,
	* elf/dl-fini.c (_dl_fini): Adjust caller.
	* elf/dl-close.c (_dl_close_worker): Likewise.
	* sysdeps/generic/ldsodefs.h: Adjust declaration.

2011-07-15  Marek Polacek  <mpolacek@redhat.com>

	* elf/cache.c (load_aux_cache): Remove unnecessary condition of
	"aux_cache->nlibs < 0".

	* nscd/nscd_conf.c (nscd_parse_file): Remove unnecessary condition
	in the reload-count case.

2011-07-15  Liubov Dmitrieva  <liubov.dmitrieva@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcat-ssse3 strcat-sse2-unaligned strncat-ssse3
	strncat-sse2-unaligned strncat-c strlen-sse2-pminub
	* sysdeps/x86_64/multiarch/strcat-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strcat.S: New file.
	* sysdeps/x86_64/multiarch/strncat.S: New file.
	* sysdeps/x86_64/multiarch/strncat-c.c: New file.
	* sysdeps/x86_64/multiarch/strcat-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strncat-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strncat-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S
	(USE_AS_STRCAT): Define.
	Add strcat and strncat support.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Likewise.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: Likewise.
	* sysdeps/x86_64/multiarch/strlen-sse2-pminub.S: New file.
	* string/strncat.c: Update.
	(USE_AS_STRNCAT): Define.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Turn on bit_Prefer_PMINUB_for_stringop for Intel Core i3, i5
	and i7.
	* sysdeps/x86_64/multiarch/init-arch.h
	(bit_Prefer_PMINUB_for_stringop): New.
	(index_Prefer_PMINUB_for_stringop): Likewise.
	* sysdeps/x86_64/multiarch/strlen.S (strlen): Check
	bit_Prefer_PMINUB_for_stringop.

2011-07-19  Ulrich Drepper  <drepper@gmail.com>

	* crypt/sha512.h (struct sha512_ctx): Move buffer into union and add
	buffer64.
	* crypt/sha512.c (__sha512_finish_ctx): Use buffer64 for writes instead
	of casting of buffer.
	* crypt/sha256.h (struct sha256_ctx): Move buffer into union and add
	buffer32 and buffer64.
	* crypt/sha256.c (__sha256_finish_ctx): Use buffer32 or buffer64 for
	writes instead of casting of buffer.
	* crypt/md5.h (struct md5_ctx): Move buffer into union and add
	buffer32.
	* crypt/md5.c (md5_finish_ctx): Use buffer32 for writes instead of
	casting of buffer.

2011-07-19  Andreas Schwab  <schwab@redhat.com>

	* string/strxfrm_l.c (STRXFRM): Fix alloca accounting.

2011-07-19  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd.c (termination_handler): Don't do anything for a database
	if it has not yet been initialized.

2011-07-18  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/bits/sched.h (__CPU_EQUAL_S): Fix a typo.

2011-07-15  Marek Polacek  <mpolacek@redhat.com>

	* bits/sched.h (__CPU_EQUAL_S): Fix a typo.

2011-07-18  Ulrich Drepper  <drepper@gmail.com>

	* po/nl.po: Update from translation team.
	* po/sv.po: Likewise.

2011-07-16  Roland McGrath  <roland@hack.frob.com>

	* sysdeps/i386/Makefile: Never use -mpreferred-stack-boundary=2,
	now disallowed by GCC.

	* configure.in (use-default-link): Default to yes if a test -shared
	link meets our qualifications.
	* configure: Regenerated.

	* config.make.in (output-format): New variable.
	* configure.in: Check for ld --print-output-format support.
	* configure: Regenerated.
	* Makerules ($(common-objpfx)format.lds)
	[$(output-format) != unknown]: Just use $(output-format),
	instead of the linker-script munging.

2011-07-14  Roland McGrath  <roland@hack.frob.com>

	* Makefile ($(common-objpfx)linkobj/libc.so): Use $(shlib-lds) instead
	of $(common-objpfx)shlib.lds.
	* elf/Makefile ($(objpfx)sotruss-lib.so): Likewise.

	* sysdeps/i386/i686/multiarch/strstr-c.c (libc_hidden_builtin_def):
	Conditionalize redefinition on [SHARED && DO_VERSIONING && !NO_HIDDEN].

	* configure.in (-z relro check): Adjust test code to add a large
	writable data section after it.
	* configure: Regenerated.

2011-07-11  Roland McGrath  <roland@hack.frob.com>

	* configure.in (-z relro check): Fix test code to make the variable
	truly const.
	* configure: Regenerated.

2011-07-11  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd.h (struct traced_file): Define.
	(struct database_dyn): Remove inotify_descr, reset_res, and filename
	elements.  Add traced_files.
	(inotify_fd): Declare.
	(register_traced_file): Declare.
	* nscd/connections.c (dbs): Remove reset_res and filename initializers.
	(inotify_fd): Export.
	(resolv_conf_descr): Remove.
	(nscd_init): Move inotify descriptor creation to main.
	Don't register files for notification here.
	(register_traced_file): New function.
	(invalidate_cache): Don't use reset_res to determine whether to call
	res_init, go through the list of registered files.
	(main_loop_poll): The inotify descriptors are now stored in the
	structures for the traced files.
	(main_loop_epoll): Likewise.
	* nscd/nscd.c (main): Create inotify socket here.  Pass extra argument
	to __nss_disable_nscd.
	* nscd/cache.c (prune_cache): There is no single inotify descriptor
	for a database anymore.  Check the records for all the registered
	files instead.
	* nss/Makefile (libnss_files-routines): Add files-init.
	(libnss_db-routines): Add db-init.
	* nss/Versions [libnss_files] (GLIBC_PRIVATE): Add _nss_files_init.
	[libnss_db] (GLIBC_PRIVATE): Add _nss_db_init.
	* nss/nss_db/db-init.c: New file.
	* nss/nss_files/files-init.c: New file.
	* nss/nsswitch.c (nss_load_library): New function.  Broken out of
	__nss_lookup_function.
	(__nss_lookup_function): Call nss_load_library.
	(nss_load_all_libraries): New function.
	(__nss_disable_nscd): Take parameter with callback function for files
	to register.  Set is_nscd.  Load all the DSOs for the NSS modules
	used for the cached services.
	* nss/nsswitch.h (__nss_disable_nscd): Adjust prototype.
	* sysdeps/unix/sysv/linux/Makefile [subdir=nscd]: Pass the various -D
	options for features to all the files in nscd.

	* nss/nsswitch.c (nss_parse_file): Add missing fclose.

2011-07-10  Roland McGrath  <roland@hack.frob.com>

	* csu/elf-init.c (__libc_csu_init): Comment typo.

2011-07-09  Ulrich Drepper  <drepper@gmail.com>

	* po/pl.po: Update from translation team.
	* po/ja.po: Likewise.
	* po/ru.po: Likewise.
	* po/ko.po: Likewise.
	* po/fr.po: Likewise.

2011-07-09  Roland McGrath  <roland@hack.frob.com>

	* configure.in (.ctors/.dtors header and trailer check):
	Use an empirical test on a built program.
	* configure: Regenerated.

	* configure.in (-z relro check): Use an empirical test on a built DSO.
	Detect, but do not require, on ia64.
	* configure: Regenerated.

	* configure.in (READELF): Find it with AC_CHECK_TOOL.
	Update tests that use readelf to use $READELF instead.
	* configure: Regenerated.

2011-07-08  Ulrich Drepper  <drepper@gmail.com>

	* malloc/hooks.c (memalign_check): Avoid using checked_request2size
	if the result is not used.

2011-07-05  Andreas Jaeger  <aj@suse.de>

	[BZ #9696]
	* stdlib/tst-strtod.c: Add testcase.

2011-07-07  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/pathconf.c (distinguish_extX): New function.
	(__statfs_link_max): Use it to distinguish between ext2/3 and ext4.
	The latter has a higher limit.  Take additional parameter to pass to
	the new function.
	(__pathconf): Pass file to __statfs_link_max.
	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Pass fd to
	__statfs_link_max.
	* sysdeps/unix/sysv/linux/pathconf.h: Adjust prototype of
	__statfs_link_max.

	[BZ #12868]
	* sysdeps/unix/sysv/linux/linux_fsinfo.h: Define Lustre constants.
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Handle Lustre.
	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_link_max): Likewise.
	(__statfs_filesize_max): Likewise.
	Patch mostly by Andreas Dilger <adilger@whamcloud.com>.

2011-07-05  Andreas Jaeger  <aj@suse.de>

	* resolv/res_comp.c (dn_skipname): Remove unused variable.

2011-07-06  Marek Polacek  <mpolacek@redhat.com>

	* nis/nss_nisplus/nisplus-spwd.c (_nss_nisplus_setspent): Honour the
	`status' variable.
	* nis/nss_nisplus/nisplus-ethers.c (_nss_nisplus_setetherent):
	Likewise.

2011-07-04  H.J. Lu  <hongjiu.lu@intel.com>

	* Makefile (strop-tests): Add strncat.
	* string/test-strncat.c: New file.

2011-06-30  Marek Polacek  <mpolacek@redhat.com>

	* iconvdata/johab.c: Don't inline `johab_sym_hanja_to_ucs' function.

2011-06-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/s390/s390-64/Makefile ($(inst_gconvdir)/gconv-modules):
	Copy rule from iconvdata/Makefile.

2011-07-06  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12922]
	* posix/getopt.c (_getopt_internal_r): When "W;" is in short options
	but no long options are defined, just return 'W'.

2011-06-22  Marek Polacek  <mpolacek@redhat.com>

	[BZ #9696]
	* stdlib/strtod_l.c (round_and_return): Set ERANGE instead of EDOM.

2011-07-06  Ulrich Drepper  <drepper@gmail.com>

	* inet/getnetgrent_r.c (internal_getnetgrent_r): Fix check for known
	netgroups to read.
	(innetgr): Likewise.

2011-07-05  Roland McGrath  <roland@hack.frob.com>

	* config.make.in (install_root): Default to $(DESTDIR).

2011-07-05  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd_getserv_r.c (nscd_getserv_r): Add cast to avoid warning.

2011-07-02  Roland McGrath  <roland@hack.frob.com>

	* Makerules ($(common-objpfx)format.lds): Fail if result is empty.

	* Makefile ($(common-objpfx)testrun.sh): Generate to work relative to
	containing directory rather than embedding absolute directory names.

	* scripts/check-local-headers.sh: Rewritten using awk.
	Match by word, not by line.  Print error messages for matches.
	* Makefile ($(objpfx)check-local-headers.out): Pass AWK in to it.

	* Makerules [shlib-lds-flags empty]:
	($(common-objpfx)libc_pic.opts): New target.
	($(common-objpfx)libc_pic.os.clean): New target.
	($(common-objpfx)libc.so): Link it instead of libc_pic.os.

	* config.make.in (OBJCOPY): New variable.
	* aclocal.m4 (LIBC_PROG_BINUTILS): Substitute OBJCOPY too.
	* configure: Regenerated.

	* config.make.in (use-default-link): New variable.
	* configure.in (use_default_link): Grok --with-default-link to set it.
	* configure: Regenerated.
	* Makerules [$(elf) = yes] [$(use-default-link) = yes]:
	(shlib-lds, shlib-lds-flags): Define to empty.

	* Makerules (shlib-lds): New variable.
	(shlib-lds-flags): New variable.
	(build-shlib, build-moduile, build-module-asneeded): Use it.
	($(common-objpfx)libc.so): Use $(shlib-lds).
	($(extra-modules-build:%=$(objpfx)%.so)): Likewise.
	* iconvdata/extra-module.mk ($(objpfx)$(mod).so): Likewise.

	* elf/dynamic-link.h (elf_get_dynamic_info): Make asserts accept
	DT_FLAGS/DT_FLAGS_1 with zero flags.

	* elf/Makefile ($(objpfx)ld.so): Use -defsym=_begin=0 instead of
	linker script munging.

2011-07-02  Ulrich Drepper  <drepper@gmail.com>

	* crypt/sha512.h (struct sha512_ctx): Add union to access total also
	as 128-bit value.
	* crypt/sha512.c (sha512_process_block): Perform total addition using
	128-bit if possible.
	(__sha512_finish_ctx): Likewise.
	* crypt/sha256.h (struct sha256_ctx): Add union to access total also
	as 64-bit value.
	* crypt/sha256.c (SWAP64): Define.
	(sha256_process_block): Perform total addition using 64-bit if
	possible.
	(__sha256_finish_ctx): Likewise.

2011-07-01  Ulrich Drepper  <drepper@gmail.com>

	* nscd/pwdcache.c (cache_addpw): Cleanup.  Add branch prediction.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/aicache.c (addhstaiX): Likewise.
	* nscd/servicescache.c (cache_addserv): Handle zero negtimeout.

2011-07-01  Thorsten Kukuk  <kukuk@suse.de>

	* nscd/pwdcache.c (cache_addpw): Handle zero negtimeout.
	* nscd/initgrcache.c (addinitgroupsX): Likewise.
	* nscd/hstcache.c (cache_addhst): Likewise.
	* nscd/grpcache.c (cache_addgr): Likewise.
	* nscd/aicache.c (addhstaiX): Likewise.

2011-07-01  Andreas Schwab  <schwab@redhat.com>

	* nis/nss_compat/compat-pwd.c (getpwent_next_nss_netgr): Query NIS
	domain only when needed.

2011-06-30  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Make sure RES_USE_INET6
	is always restored.

2011-06-29  Ulrich Drepper  <drepper@gmail.com>

	* nscd/grpcache.c (cache_addgr): Don't write notfound reply if we
	are re-adding the entry.
	* nscd/servicescache.c (cache_addserv): Likewise.

2011-06-30  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/generic/dl-irel.h: fix protection against multiple
	inclusions.
	* sysdeps/generic/dl-irel.h (elf_ifunc_invoke): New.

2011-06-28  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12935]
	* malloc/memusage.sh: Fix quoting in message.
	* debug/xtrace.sh: Likewise.

	* configure.in: Remove support for --experimental-malloc option, make
	it the default.
	* config.make.in: Likewise.
	* malloc/Makefile: Likewise.

2011-06-27  Andreas Schwab  <schwab@redhat.com>

	* iconvdata/gb18030.c (BODY for TO_LOOP): Fix encoding of non-BMP
	two-byte characters.

2011-06-27  Roland McGrath  <roland@hack.frob.com>

	* configure.in (NO_CTORS_DTORS_SECTIONS): Give this check its own
	AC_CACHE_CHECK invocation.
	* configure: Regenerated.

	* elf/soinit.c (__CTOR_LIST__, __DTOR_LIST__): Add used attribute.

2011-06-27  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12350]
	* nscd/aicache.c (addhstaiX):  Restore only RES_USE_INET6
	bit from old_res_options.

	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-servicescache.c): Define.

	* inet/getnetgrent_r.c (innetgr): Minimal cleanup, use correct return
	value type for setfct.

2011-06-23  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Use
	__gettimeofday instead of gettimeofday.

2011-06-26  Ulrich Drepper  <drepper@gmail.com>

	* elf/Makefile (all-built-dso): No need to check linkobj/libc.so.

2011-06-24  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/strcpy-sse2.S (RETURN): Fix a typo.

	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: Correct unwind
	info.

2011-06-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strcpy-ssse3 strncpy-ssse3 stpcpy-ssse3 stpncpy-ssse3
	strcpy-sse2-unaligned strncpy-sse2-unaligned
	stpcpy-sse2-unaligned stpncpy-sse2-unaligned.
	* sysdeps/x86_64/multiarch/stpcpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/stpcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/stpncpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/stpncpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strcpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strncpy-sse2-unaligned.S: New file.
	* sysdeps/x86_64/multiarch/strncpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strcpy.S: Remove strcpy with SSSE3.
	(STRCPY): Support SSE2 and SSSE3 versions.

2011-06-24  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12874]
	* sysdeps/unix/sysv/linux/Makefile (CFLAGS-tst-writev.c): Define.
	* sysdeps/wordsize-64/tst-writev.c: Work around problem with 2.6.38+
	kernels which artificially limit size of requests.

2011-06-22  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strncpy-c strcpy-ssse3 strncpy-ssse3 stpcpy-ssse3 stpncpy-ssse3
	strcpy-sse2 strncpy-sse2 stpcpy-sse2 stpncpy-sse2.
	* sysdeps/i386/i686/multiarch/stpcpy-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/stpcpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/stpncpy-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/stpncpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/stpncpy.S : New file.
	* sysdeps/i386/i686/multiarch/strcpy-sse2.S : New file.
	* sysdeps/i386/i686/multiarch/strcpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strcpy.S: New file.
	* sysdeps/i386/i686/multiarch/strncpy-c.c: New file.
	* sysdeps/i386/i686/multiarch/strncpy-sse2.S: New file.
	* sysdeps/i386/i686/multiarch/strncpy-ssse3.S: New file.
	* sysdeps/i386/i686/multiarch/strncpy.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Enable unaligned load optimization for Intel Core i3, i5 and i7
	processors.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Fast_Unaligned_Load):
	Define.
	(index_Fast_Unaligned_Load): Define.
	(HAS_FAST_UNALIGNED_LOAD): Define.

2011-06-23  Marek Polacek  <mpolacek@redhat.com>

	* nss/nss_db/db-open.c: Include <unistd.h> for read declaration.

2011-06-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12907]
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Avoid calling __check_pf
	until it is clear that the information is realy needed.
	Patch mostly by David Hanisch <david.hanisch@nsn.com>.

2011-06-22  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Fix last change.

2011-06-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Use
	/sys/devices/system/cpu/online if it is usable.

	* sysdeps/unix/sysv/linux/getsysstats.c (__get_nprocs): Rate limit
	reading the information from the /proc filesystem to once a second.

2011-06-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/sigcontext.h: Fix definition of
	NULL after inclusion of kernel headers.

2011-06-21  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_db/db-XXX.c (nss_db_setENT): Only set entidx for successful
	calls to internal_setent.

	[BZ #12885]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): When looking up only IPv6
	addresses using gethostbyname4_r ignore IPv4 addresses.

	* sysdeps/posix/getaddrinfo.c (gaih_inet): After the last change the
	branch using gethostbyname2 is only for AF_INET.  Optimize accordingly.

	* inet/getnetgrent_r.c: Use DL_CALL_FCT in several places.

2011-06-20  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/dl-plt.h: Protect against multiple
	inclusions.
	* sysdeps/sparc/sparc64/dl-plt.h: Likewise.

	* sysdeps/i386/dl-irel.h (elf_ifunc_invoke): New.
	(elf_irel): Use it.
	* sysdeps/powerpc/powerpc32/dl-irel.h: Likewise.
	* sysdeps/powerpc/powerpc64/dl-irel.h: Likewise.
	* sysdeps/sparc/sparc32/dl-irel.h: Likewise.
	* sysdeps/sparc/sparc64/dl-irel.h: Likewise.
	* sysdeps/x86_64/dl-irel.h: Likewise.

	* elf/dl-runtime.c: Use elf_ifunc_invoke.
	* elf/dl-sym.c: Likewise.

2011-06-15  Ulrich Drepper  <drepper@gmail.com>

	* resolv/res_send.c (__libc_res_nsend): Fix typos in last patch.  We
	need to dereference resplen2.

2011-06-14  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/wordsize-64/dl-fxstatat64.c: New file.

2011-06-15  Ulrich Drepper  <drepper@gmail.com>

	* Makeconfig: Define vardbdir and inst_vardbdir.
	* nss/Makefile: Add rules to install db-Makefile.

	* nss/nss_db/db-XXX.c: Cleanup.

	* nss/Makefile (libnss_db-dbs): Add db-initgroups.
	* nss/Versions [libnss_db]: Add _nss_db_initgroups_dyn for
	GLIBC_PRIVATE.
	* nss/db-Makefile (groups.db): Emit entries for initgroups lookups.
	* nss/makedb.c: Implement -g option to specify that value strings
	are generated and should not be added to table iterated over for
	get*ent calls.
	* nss/nss_db/db-initgroups.c: New file.

	* nss/getent.c: Add support for initgroups lookups through getgrouplist
	interface.

	* grp/initgroups.c (__nss_initgroups_database): Renamed and exported.
	(internal_getgrouplist): Adjust to name change.
	Update use_initgroups_entry if this is not the first call.
	* nss/databases.def: Add initgroups entry.

	* nss/makedb.c (compute_tables): Check result of multiple hash table
	sizes to minimize maximum chain length.

2011-06-14  Ulrich Drepper  <drepper@gmail.com>

	* Versions.def: Add entry for libnss_db.
	* shlib-versions: Likewise.
	* nss/Makefile: Add rules to build libnss_db.
	* nss/Versions: Add libnss_db information.  Organize libnss_files
	entries better.
	* nss/db-Makefile: Add gshadow support.  Change rules for the new
	makedb progra.  Some minor improvements to generate smaller files.
	* nss/nss_db/nss_db.h: Move NSS database header data structures to
	here from...
	* nss/makedb.c: ...here.
	Improve database format to be smaller and require less memory at
	runtime.
	* nss/nss_db/db-XXX.x: Adjust for new database format.  Don't use
	db anymore.
	* nss/nss_db/db-netgrp.c: Likewise.
	* nss/nss_db/db-open.c: Likewise.
	* nss/nss_files/flies-XXX.x: Adjust comments.
	* nss/nss_files/files-ethers.c: Adjust for new DB_LOOKUP definition.
	* nss/nss_files/files-grp.c: Likewise.
	* nss/nss_files/files-hosts.c: Likewise.
	* nss/nss_files/files-network.c: Likewise.
	* nss/nss_files/files-proto.c: Likewise.
	* nss/nss_files/files-pwd.c: Likewise.
	* nss/nss_files/files-rpc.c: Likewise.
	* nss/nss_files/files-service.c: Likewise.
	* nss/nss_files/files-sgrp.c: Likewise.
	* nss/nss_files/files-spwd.c: Likewise.
	* nss/nss_db/db-alias.c: Removed.
	* nss/nss_db/dummy-db.h: Removed.

2011-06-02  Ulrich Drepper  <drepper@gmail.com>

	* nss/makedb.c: Rewritten to not use database library.
	* nss/Makefile: Update to build new makedb program.

2011-06-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/check_native.c: Include <string.h> for
	memset declaration.

2011-06-10  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Fix logic allocating
	tmpbuf.

2011-06-10  Roland McGrath  <roland@hack.frob.com>

	* Makerules (shlib.lds): Fail if the linker script comes out empty.
	* elf/Makefile ($(objpfx)ld.so): Likewise.

	* Makefile ($(common-objpfx)linkobj/libc.so): Break long lines with \.
	Don't list ld.so twice in dependencies.

	* posix/bug-regex31.c: Include <stdlib.h>.

	* nscd/hstcache.c (cache_addhst): Remove unused variable.

	* nis/nss_compat/compat-spwd.c
	(getspent_next_nss_netgr): Remove unused variable.
	* nis/nss_compat/compat-pwd.c (getpwent_next_nss_netgr): Likewise.

	* nis/nis_print_group_entry.c (nis_print_group_entry): Fix "Implicit
	nonmembers" output to use the right array.

	* resolv/nss_dns/dns-network.c (getanswer_r): Remove unused variable.

	* elf/dl-open.c (_dl_open): Quash warnings when DL_NNS==1.

	* locale/programs/ld-ctype.c (ctype_read): Remove unused variable.
	* locale/programs/ld-collate.c (add_to_tablewc): Likewise.
	* catgets/gencat.c (read_input_file): Likewise.
	* locale/programs/locarchive.c (enlarge_archive): Likewise.

	* sunrpc/clnt_udp.c (__libc_clntudp_bufcreate): Move DONTBLOCK
	variable definition inside #if's controlling its use.

	* inet/getnetgrent_r.c (innetgr): Remove unused variable.

	* resolv/res_hconf.c (_res_hconf_reorder_addrs): Fix errno restoration.

	* misc/syslog.c (__vsyslog_chk): Remove unused variable.

	* io/fts.c (fts_build): Use if (0 && ...) rather than #if 0 for
	unreachable code.

	* stdio-common/printf_fp.c (___printf_fp): Remove unused variable.

	* configure.in (nss-crypt check): Use AC_LANG_PROGRAM.
	* configure: Regenerated.

	* Makerules: Revert last change.
	* elf/Makefile: Likewise.

2011-06-09  Roland McGrath  <roland@hack.frob.com>

	* Makerules ($(common-objpfx)libc_pic.os): Use -Wl, before -r.
	* elf/Makefile ($(objpfx)librtld.os): Likewise.
	(reloc-link): Likewise.

2011-06-09  Ulrich Drepper  <drepper@gmail.com>

	* elf/Makefile: Add rules to build pldd.
	* elf/pldd.c: New file.
	* elf/pldd-xx.c: New file.

2011-06-07  Ulrich Drepper  <drepper@gmail.com>

	* version.h: Update for 2.15 development version.

2011-06-07  David S. Miller  <davem@davemloft.net>

	* sysdeps/sparc/sparc32/dl-irel.h (elf_irela): Pass dl_hwcap to
	ifuncs.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela,
	elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/dl-irel.h (elf_irela): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela,
	elf_machine_lazy_rel): Likewise.
	* sysdeps/sparc/sparc64/multiarch/memcpy.S (memcpy): Fetch
	dl_hwcap via passed in argument.
	* sysdeps/sparc/sparc64/multiarch/memset.S (memset, bzero):
	Likewise.

2011-06-06  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* stdlib/longlong.h: Update from GCC.  Fix smul_ppmm for S/390.

2011-06-06  Roland McGrath  <roland@hack.frob.com>

	[BZ #12849]
	* manual/fdl-1.1.texi: New file, verbatim from:
	http://www.gnu.org/licenses/old-licenses/fdl-1.1.texi
	* manual/lgpl-2.1.texi: New file, verbatim from:
	http://www.gnu.org/licenses/old-licenses/lgpl-2.1.texi
	* manual/Makefile (licenses): New variable, list those new file names.
	(texis): Use it.
	(chapters.% top-menu.%): Include $(licenses) with $(appendices).

	* manual/fdl.texi: File removed.
	* manual/lesser.texi: File removed.
	* manual/libc.texinfo (Copying, Documentation License):
	Use new @include file names, put @appendix directive before @include.

2011-06-04  Jakub Jelinek  <jakub@redhat.com>

	[BZ #12841]
	* rt/bits/mqueue2.h (__mq_open_2): Add __THROW.
	(__mq_open_alias): Use __REDIRECT_NTH instead of __REDIRECT.
	(mq_open): Add __NTH.

2011-06-02  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Assume Intel Core i3/i5/i7 processor if AVX is available.

2011-05-31  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard): Fix
	typo.

2011-05-31  Andreas Schwab  <schwab@redhat.com>

	* nscd/nscd_getserv_r.c (nscd_getserv_r): Don't free non-malloced
	memory.  Use alloca_account.  Fix memory leak when retrying.

2011-05-31  Ulrich Drepper  <drepper@gmail.com>

	* version.h (RELEASE): Bump for 2.14 release.
	* include/features.h (__GLIBC_MINOR__): Bump to 14.

	* config.make.in (RANLIB): Remove entry.

2011-05-30  Ulrich Drepper  <drepper@gmail.com>

	* po/Makefile (po-sed-cmd): Add ksh to extensions.
	(libc.pot): Work around missing support for .ksh extension in xgettext.

	[BZ #12684]
	* resolv/res_send.c (__libc_res_nsend): Only go to the next name server
	if both request failed.
	(send_dg): In case of server errors clear resplen or *resplen2.

	[BZ #12454]
	* elf/dl-deps.c (_dl_map_object_deps): Run initializer sorting only
	when there are multiple maps.
	* elf/dl-fini.c (_dl_sort_fini): Check for list of one.
	(_dl_fini): Remove test here.

	* elf/rtld.c (dl_main): Don't allow the loader to load itself.

2011-05-29  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12350]
	* sysdeps/posix/getaddrinfo.c (gethosts): Restore only RES_USE_IENT6
	bit from old_res_options.
	(gaih_inet): Likewise.

	[BZ #11099]
	* shadow/sgetspent_r.c (LINE_PARSER): Interpret numeric field values
	as signed.

	* resolv/res_init.c (res_setoptions): Make the code more compact.

	[BZ #11558]
	* resolv/res_init.c (res_setoptions): Recognize use-vc option and
	set RES_USEVC.

	[BZ #11634]
	* elf/Makefile (tests): Don't add tst-audit[67] without working -mavx.

	* malloc/malloc.h: Mark malloc hook variables as deprecated.

	[BZ #11781]
	* malloc/malloc.h: Declare malloc hook variables as volatile.

	* locale/programs/locarchive.c (add_locale_to_archive): Fix typo
	in last patch.

	[BZ #11799]
	* sysdeps/unix/sysv/linux/bits/siginfo.h (SI_USER): Don't mention
	raise in the comment.
	* sysdeps/unix/sysv/linux/s390/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/siginfo.h: Likewise.

2011-05-28  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12811]
	* posix/regex_internal.c (build_wcs_buffer): Don't signal we have to
	grow the buffers more if it already has to be sufficient.
	(build_wcs_upper_buffer): Likewise.
	* posix/regexec.c (check_matching): Likewise.
	(clean_state_log_if_needed): Likewise.
	(extend_buffers): Don't enlarge buffers beyond size of the input
	buffer.
	Patches mostly by Emil Wojak <emil@wojak.eu>.
	* posix/bug-regex32.c: New file.
	* posix/Makefile (tests): Add bug-regex32.

	* locale/findlocale.c (_nl_find_locale): Return right away if
	_nl_explode_name failed.
	* locale/programs/locarchive.c (add_locale_to_archive): Likewise.

	* sysdeps/unix/sysv/linux/socketcall.h (SOCKOP_sendmmsg): Define.

	* debug/xtrace.sh: Unify messages.
	* malloc/memusage.sh: Likewise.

	[BZ #12813]
	* sysdeps/unix/sysv/linux/x86_64/init-first.c (__vdso_time): Retrieve
	time symbol from vDSO.  Substitute with vsyscall if not available.
	* sysdeps/unix/sysv/linux/x86_64/time.S [SHARED]: Use
	__vdso_time.

	* sysdeps/unix/sysv/linux/internal_sendmmsg.S: New file.
	* sysdeps/unix/sysv/linux/sendmmsg.c: New file.
	* sysdeps/unix/sysv/linux/Makefile [subdir=socket] (sysdep_routines):
	Add sendmmsg and internal_sendmmsg.
	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14]: Add sendmmsg.
	* sysdeps/unix/sysv/linux/bits/socket.h: Declare sendmmsg.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define __ASSUME_SENDMMSG.

	* sysdeps/unix/sysv/linux/syscalls.list: Add setns entry.
	* sysdeps/unix/sysv/linux/bits/sched.h: Declare setns.
	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14]: Add setns.

2011-05-27  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12813]
	* sysdeps/unix/sysv/linux/x86_64/init-first.c (__vdso_getcpu):
	Retrieve getcpu symbol from vDSO.  Substitute with vsyscall if not
	available.
	* sysdeps/unix/sysv/linux/x86_64/sched_getcpu.S [SHARED]: Use
	__vdso_getcpu.

	[BZ #12814]
	* iconvdata/Makefile (tests): Add bug-iconv9.
	* iconvdata/bug-iconv9.c: New file.

2011-05-27  Andreas Schwab  <schwab@redhat.com>

	[BZ #12814]
	* iconvdata/iso-2022-jp.c (BODY): Fix invalid variable shadowing.

2011-05-25  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/sys/user.h
	(struct user_regs_struct): Change intcs field back to cs.

2011-05-25  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

2011-05-23  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12795]
	* sysdeps/unix/sysv/linux/bits/resource.h (RLIMIT_RTTIME): Define.
	* sysdeps/unix/sysv/linux/sparc/bits/resource.h: Likewise.

2011-05-20  Andreas Schwab  <schwab@redhat.com>

	* stdlib/longlong.h: Update from GCC.

2011-05-23  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/ia64/sysconf.c (HAS_CPUCLOCK): Add
	parameter name.
	* sysdeps/unix/sysv/linux/sysconf.c (has_cpuclock, HAS_CPUCLOCK):
	Add parameter name.
	(__sysconf): Pass it down.

2011-05-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12671]
	* nis/nss_nis/nis-alias.c (_nss_nis_getaliasbyname_r): Use malloc in
	some situations.
	* nscd/nscd_getserv_r.c (nscd_getserv_r): Likewise.
	* posix/glob.c (glob_in_dir): Take additional parameter alloca_used.
	add in in __libc_use_alloca calls.  Adjust callers.
	(glob): Use malloc in some situations.

	* elf/dl-runtime.c (_dl_profile_fixup): Also store LA_SYMB_NOPLTENTER
	and LA_SYMB_NOPLTEXIT in flags which are passed to pltenter and
	pltexit.

2011-05-21  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/bits/time.h: Define CLOCK_REALTIME_ALARM
	and CLOCK_BOOTTIME_ALARM.

	[BZ #12782]
	* string/xpg-strerror.c (__xpg_strerror_r): Fill buffer even if error
	is returned.

	* string/_strerror.c (__strerror_r): Print negative errors as signed
	numbers.

	[BZ #12777]
	* iconvdata/cp1258.c (comp_table_data): Remove entry 0x00A5 0xEC.
	(decomp_table): Change U0385 entry to emit 0xA5 0xEC.
	* iconvdata/CP1258.irreversible: Adjust entry 0xA8EC.

	* configure.in: Fix typo in redirection and correct removal of test
	files in two cases.

	[BZ #12788]
	* locale/setlocale.c (new_composite_name): Fix test to check for
	identical name of all categories.

	[BZ #12792]
	* libio/filedoalloc.c (local_isatty): New function.
	(_IO_file_doallocate): Use local_isatty.
	* stdio-common/perror.c (perror): In case a new stream is used
	forward the stream error.
	* stdio-common/vfprintf.c (ARGCHECK): For read-only streams also set
	error flag.

2011-05-20  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11884]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't unconditionally use
	alloca.
	* include/alloca.h (extend_alloca_account): Define.

	[BZ #11857]
	* posix/regex.h: Fix comments with documentation of user-accessible
	fields after compilation and describe correct free'ing of pattern
	after re_compile_pattern.
	Patch by Reuben Thomas <rrt@sc3d.org>.

2011-05-18  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/powerpc/powerpc64/Makefile (no-special-regs): Add -mno-vsx
	and -mno-altivec to prevent the compiler from using Altivec and/or
	VSX instructions when the corresponding registers are not available.

2011-05-19  Andreas Schwab  <schwab@redhat.com>

	* grp/compat-initgroups.c (__libc_use_alloca): Don't define.

2011-05-19  Ulrich Drepper  <drepper@gmail.com>

	* libio/freopen.c (freopen): Use __dup2, not dup2.
	* libio/freopen64.c (freopen64): Likewise.

2011-05-17  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12775]
	* sysdeps/x86_64/fpu/e_powl.S: Fix a typo.
	* math/Makefile (tests): Add test-powl.
	(CFLAGS-test-powl.c): Define.
	* math/test-powl.c: New file.

2011-05-16  H.J. Lu  <hongjiu.lu@intel.com>

	* fileops.c (_IO_new_file_fopen): Get fd from _IO_fileno.

2011-05-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11837]
	* iconvdata/gb18030.c: Update to GB18020-2005.

2011-05-16  Ulrich Drepper  <drepper@gmail.com>

	* posix/regex.h (RE_SYNTAX_AWK, RE_SYNTAX_GNU_AWK,
	RE_SYNTAX_POSIX_AWK): Update to match recent development.
	Patch by Aharon Robbins <arnold@skeeve.com>.

	[BZ #11892]
	* stdlib/putenv.c (putenv): Don't always create copy of the variable
	on the stack.

	[BZ #11895]
	* misc/pselect.c (__pselect): Handle timeout value errors hidden
	through underflows.

	[BZ #12766]
	* misc/error.c (error_at_line): Ensure file_name and old_file_name
	point to strings before performing equality test for error_one_per_line
	mode.

	[BZ #11697]
	* login/programs/pt_chown.c (do_pt_chown): Always call chown.

	[BZ #11820]
	* sysdeps/unix/sysv/linux/x86_64/sys/user.h
	(struct user_fpregs_struct): Avoid __uint*_t types.

	[BZ #6420]
	* malloc/mtrace.c (tr_where): Add additional parameter to point to
	symbol info.  Use it instead of calling _dl_addr locally.
	(lock_and_info): New function.
	(tr_freehook): Call lock_and_info and pass symbol info as additional
	parameter to tr_where.
	(tr_mallochook): Likewise.
	(tr_reallochook): Likewise.
	(tr_memalignhook): Likewise.

	* malloc/mtrace.c: Remove support for USE_MTRACE_FILE.  It is not
	used and couldn't be at all thread-safe.

2011-05-15  Ulrich Drepper  <drepper@gmail.com>

	* libio/freopen.c (freopen): Don't close old file descriptor
	before the new one is opened.  Instead dup the new file descriptor
	to the old one after the new stream is created.
	* libio/freopen64.c (freopen64): Likewise.
	* libio/libio.h: Define _IO_FLAGS2_NOCLOSE and _IO_FLAGS2_CLOEXEC.
	* libio/fileops.c (_IO_new_file_close_it): Handle new
	_IO_FLAGS2_NOCLOSE flag.
	(_IO_new_file_fopen): Set _IO_FLAGS2_CLOEXEC for "e" mode.
	If _IO_file_open didn't set FD_CLOEXEC do it after the call.
	* libio/oldfileops.c (_IO_old_file_close_it): Handle new
	_IO_FLAGS2_NOCLOSE flag.
	* include/unistd.h: Add hidden_proto for dup3.
	Define __have_dup3.
	* io/dup3.c: Define hidden symbol.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define __ASSUME_DUP3.

	[BZ #7101]
	* posix/getopt.c (_getopt_internal_r): List all ambigious possibilities
	when an incomplete long option is used.
	* posix/tst-getopt_long1.c: New file.
	* posix/Makefile (tests): Add tst-getopt_long1.

	[BZ #10138]
	* scripts/config.guess: Update from autoconf-2.68.
	* scripts/config.sub: Likewise.

	[BZ #10157]
	* sysdeps/unix/sysv/linux/sysconf.c (__sysconf): Split out CPUTIME
	tests into ...
	(has_cpuclock): ...this.  New function.
	* sysdeps/unix/sysv/linux/ia64/sysconf.c: Just define HAS_CPUCLOCK
	macro here based on has_cpuclock code.

	[BZ #10149]
	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	First byte (not low byte) is now always NUL.
	* sysdeps/generic/dl-osinfo.h (_dl_setup_stack_chk_guard): Likewise.

	* sysdeps/unix/sysv/linux/dl-osinfo.h (_dl_setup_stack_chk_guard):
	Use non-cancelable interfaces.

	[BZ #9809]
	* locale/iso-639.def: Add entry for Sorani.

	[BZ #11901]
	* include/stdlib.h: Move include protection to the right place.
	Define abort_msg_s.  Declare __abort_msg with it.
	* stdlib/abort.c (__abort_msg): Adjust type.
	* assert/assert.c (__assert_fail_base): New function.  Majority
	of code from __assert_fail.  Allocate memory for __abort_msg with
	mmap.
	(__assert_fail): Now call __assert_fail_base.
	* assert/assert-perr.c: Remove bulk of implementation.  Use
	__assert_fail_base.
	* include/assert.hL Declare __assert_fail_base.
	* sysdeps/posix/libc_fatal.c: Allocate memory for __abort_msg with
	mmap.
	* sysdeps/unix/sysv/linux/libc_fatal.c: Likewise.

2011-05-14  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11952]
	[BZ #12453]
	* elf/dl-open.c (dl_open_worker): Delay calls to _dl_update_slotinfo
	until all modules are registered in the DTV.
	* elf/Makefile: Add rules to build and run tst-tls19.
	* elf/tst-tls19.c: New file.
	* elf/tst-tls19mod1.c: New file.
	* elf/tst-tls19mod2.c: New file.
	* elf/tst-tls19mod3.c: New file.
	Patch mostly by Martin von Gagern <Martin.vGagern@gmx.net>.

	[BZ #12083]
	* sysdeps/pthread/aio_misc.c (__aio_init): Compute optim.aio_num
	correctly.

	[BZ #12601]
	* iconvdata/cp932.c (BODY to UCS4): Fix incrementing inptr in case of
	two-byte sequence errors.
	* iconvdata/Makefile (tests): Add bug-iconv8.
	* iconvdata/bug-iconv8.c: New file.

	[BZ #12626]
	* sysdeps/generic/elf/backtracesymsfd.c (__backtrace_symbols_fd): Move
	buf2 definition.

	* libio/fileops.c (_IO_new_file_close_it): Initialize write_status.

	[BZ #12432]
	* sysdeps/ia64/backtrace.c (struct trace_reg): Add cfa element.
	(dummy_getcfa): New function.
	(init): Get _Unwind_GetCFA address, use dummy if not found.
	(backtrace_helper): In recursion check, also check whether CFA changes.
	(__backtrace): Completely initialize arg.

	* iconv/loop.c (SINGLE) [STORE_REST]: Add input bytes to bytebuf before
	storing incomplete byte sequence in state object.  Avoid testing for
	guaranteed too small input if we know there is enough data available.

2011-05-11  Andreas Schwab  <schwab@redhat.com>

	* Makeconfig (+link-pie): Indent.
	* Rules (binaries-pie): Define if $(have-fpie) and
	$(build-shared).
	(binaries-shared): Also filter out $(binaries-pie).
	($(addprefix $(objpfx),$(binaries-pie))): New rule.
	* nscd/Makefile (others-pie): Add nscd.
	(LDFLAGS-nscd): Set this instead of relro-LDFLAGS.
	($(objpfx)nscd): Remove command override.
	* login/Makefile (others-pie): Add pt_chown.
	($(objpfx)pt_chown): Remove command override.
	* elf/Makefile: Add PIE tests to tests and tests-pie variables and
	remove command overrides.

2011-05-13  Ulrich Drepper  <drepper@gmail.com>

	* libio/tst_putwc.c: Fix error messages.

	[BZ #12724]
	* libio/fileops.c (_IO_new_file_close_it): Always flush when
	currently writing and seek to current position when not.
	* libio/Makefile (tests): Add bug-fclose1.
	* libio/bug-fclose1.c: New file.

2011-05-12  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12511]
	* elf/dl-lookup.c (enter): Don't test for copy relocation here and
	don't set DF_1_NODELETE here.
	(do_lookup_x): When entering new entry test for copy relocation
	and if necessary set DF_1_NODELETE flag.
	* elf/tst-unique4.cc: New file.
	* elf/tst-unique4.h: New file.
	* elf/tst-unique4lib.cc: New file.
	* elf/Makefile: Add rules to build and run tst-unique4.
	Patch by Piotr Bury <pbury@goahead.com>.

2011-05-11  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12052]
	* sysdeps/posix/spawni.c (__spawni): Fix sched_setscheduler call.

	[BZ #12625]
	* misc/mntent_r.c (addmntent): Flush the stream after the output

	[BZ #12393]
	* elf/dl-load.c (is_trusted_path): Remove unnecessary test.
	(is_trusted_path_normalize): Skip initial colon.  Append slash
	to empty buffer.  Duplicate is_trusted_path code but allow
	constructed patch to be prefix.
	(is_dst): Allow $ORIGIN followed by /.
	(_dl_dst_substitute): Correct clearing of check_for_trusted.
	Correct testing of result of is_trusted_path_normalize
	(decompose_rpath): Fix warning.

2011-05-10  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11257]
	* grp/initgroups.c (internal_getgrouplist): When we found the service
	list through the initgroups entry in nsswitch.conf do not always
	continue on a successful lookup.  Don't always use the
	__nss_group_database value if it is set.
	* nss/nsswitch.conf (initgroups): Change action for successful db
	lookup to continue for compatibility.

2011-05-09  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11532]
	* iconvdata/Makefile: Add rules to build CP770, CP771, CP772, CP773,
	and CP774 modules.
	* iconvdata/gconv-modules: Add entries for CP770, CP771, CP772, CP773,
	and CP774 modules.
	* iconvdata/tst-tables.sh: Likewise.
	* iconvdata/cp770.c: New file.
	* iconvdata/cp771.c: New file.
	* iconvdata/cp772.c: New file.
	* iconvdata/cp773.c: New file.
	* iconvdata/cp774.c: New file.
	* iconvdata/testdata/CP770: New file.
	* iconvdata/testdata/CP770..UTF8: New file.
	* iconvdata/testdata/CP771: New file.
	* iconvdata/testdata/CP771..UTF8: New file.
	* iconvdata/testdata/CP772: New file.
	* iconvdata/testdata/CP772..UTF8: New file.
	* iconvdata/testdata/CP773: New file.
	* iconvdata/testdata/CP773..UTF8: New file.
	* iconvdata/testdata/CP774: New file.
	* iconvdata/testdata/CP774..UTF8: New file.

	* iconvdata/gen-8bit-gap-1.sh: End reading of charmap file at
	END CHARMAP line.
	* iconvdata/gen-8bit-gap.sh: Likewise.
	* iconvdata/gen-8bit.sh: Likewise.

	* locale/iso-639.def: Add ary entry.

	[BZ #11258]
	* locale/C-translit.h.in: Add U20A1 transliteration.

	[BZ #12178]
	* locale/iso-639.def: Add wae entry.
	Patch by Kevin Bortis <bortis@translate-wae.ch>.

	[BZ #12545]
	* locale/programs/localedef.c (construct_output_path): Use ssize_t
	for n.

	[BZ #12711]
	* locale/C-translit.h.in: Add entry for U20B9.
	Patch by pravin.d.s@gmail.com.

2011-05-08  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12713]
	* sysdeps/unix/sysv/linux/getcwd.c: If getcwd syscall report
	ENAMETOOLONG use generic getcwd.
	* sysdeps/posix/getcwd.c: Add support to use openat.  Make usable
	in rtld.  Use *stat64.
	* sysdeps/unix/sysv/linux/Makefile [subdir=elf] (sysdep-rtld-routines):
	Add dl-getcwd, dl-openat64, dl-opendir, dl-fxstatat64.
	* sysdeps/unix/sysv/linux/dl-getcwd.c: New file.
	* sysdeps/unix/sysv/linux/dl-openat64.c: New file.
	* sysdeps/unix/sysv/linux/dl-opendir.c: New file.
	* sysdeps/unix/sysv/linux/dl-fxstat64.c: New file.
	* include/sys/stat.h: Define __fstatat, __lstat64, __fstat64, and
	__fstatat64 macros.
	* include/dirent.h: Add libc_hidden_proto for rewinddir.
	* dirent/rewinddir.c: Add libc_hidden_def.
	* sysdeps/mach/hurd/rewinddir.c: Likewise.
	* sysdeps/unix/rewinddir.c: Likewise.  Don't do locking outside libc.

	* include/dirent.h (__alloc_dir): Add flags parameter.
	* sysdeps/unix/fdopendir.c (__fdopendir): Pass flags to __alloc_dir.
	* sysdeps/unix/opendir.c (__opendir): Pass 0 in new parameter to
	__alloc_dir.
	(__alloc_dir): Take new parameter.  Don't call fcntl for invocations
	from fdopendir if O_CLOEXEC is already set.

2011-03-15  Alan Modra  <amodra@gmail.com>

	* elf/dl-reloc.c (_dl_try_allocate_static_tls <TLS_DTV_AT_TP>): Handle
	l_tls_firstbyte_offset non-zero.  Save padding offset in
	l_tls_firstbyte_offset for later use.
	* elf/dl-close.c (_dl_close_worker <TLS_DTV_AT_TP>): Correct code
	freeing static tls block.

2011-03-05  Jonathan Nieder  <jrnieder@gmail.com>

	* sysdeps/unix/sysv/linux/sys/param.h: Fix an #ifndef __undef_ARG_MAX
	where #ifdef was intended.  The intent is to prevent ARG_MAX from
	being defined by the kernel headers.

2011-05-07  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12734]
	* resolv/resolv.h: Define RES_NOTLDQUERY.
	* resolv/res_init.c (res_setoptions): Recognize no_tld_query and
	no-tld-query and set RES_NOTLDQUERY.
	* resolv/res_debug.c (p_option): Handle RES_NOTLDQUERY.
	* resolv/res_query.c (__libc_res_nsearch): Backport changes from
	modern BIND to search name as TLD unless forbidden.

2011-05-07  Petr Baudi≈°  <pasky@suse.cz>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ #12393]
	* elf/dl-load.c (fillin_rpath): Move trusted path check...
	(is_trusted_path): ...to here.
	(is_trusted_path_normalize): Wrapper for /../ and /./ normalization.
	(_dl_dst_substitute): Verify expanded $ORIGIN path elements
	using is_trusted_path_normalize() in setuid scripts.

2011-05-06  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* sysdeps/unix/sysv/linux/sys/sysmacros.h: Add missing
	__BEGIN/__END_DECLS.

2011-05-06  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn): Return
	NSS_STATUS_NOTFOUND if no record was found.

2011-05-05  Andreas Schwab  <schwab@redhat.com>

	* sunrpc/Makefile (headers): Add rpc/netdb.h.
	(headers-not-in-tirpc): Remove rpc/netdb.h
	* resolv/netdb.h: Revert last change.

2011-05-05  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* Makeconfig (link-libc-static): Use --{start,end}-group to handle
	circular dependency between libgcc.a and libc.a.

2011-05-05  Andreas Schwab  <schwab@redhat.com>

	* resolv/netdb.h: Don't include <rpc/netdb.h>.
	* nis/Makefile: Don't install rpcsvc/*.
	* inet/protocols/timed.h: Include <sys/types.h> and <sys/time.h>
	instead of <rpc/types.h>.
	(MAXHOSTNAMELEN): Define.

2011-05-03  Andreas Schwab  <schwab@redhat.com>

	* elf/ldconfig.c (add_dir): Don't crash on empty path.

2011-04-28  Maciej Babinski  <mbabinski@google.com>

	[BZ #12714]
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't bypass
	gethostbyname4_r when IPv6 results are possible.

2011-05-02  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12723]
	* sysdeps/unix/sysv/linux/pathconf.c (__pathconf): Implement
	_PC_PIPE_BUF handling.

2011-04-30  Bruno Haible  <bruno@clisp.org>

	[BZ #12717]
	* conform/data/netdb.h-data (getnameinfo): Make POSIX compliant.
	* resolv/netdb.h (getnameinfo): Change type of flags parameter
	to 'int'.
	* inet/getnameinfo.c (getnameinfo): Likewise.

2011-04-29  Ulrich Drepper  <drepper@gmail.com>

	* grp/initgroups.c (internal_getgrouplist): Prefer initgroups setting
	to groups setting in database lookup.
	* nss/nsswitch.conf: Add initgroups entry.

2011-04-22  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12685]
	* libio/fileops.c (_IO_new_file_fopen): Scan up to 7 bytes of the
	mode string.
	Patch by Eric Blake <eblake@redhat.com>.

2011-04-20  H.J. Lu  <hongjiu.lu@intel.com>

	* sunrpc/Makefile (need-export-routines): Add svc_run.
	(routines): Remove svc_run.
	($(objpfx)thrsvc): Add $(common-objpfx)linkobj/libc.so.
	* sunrpc/clnt_perr.c (clnt_perrno): Export.
	* sunrpc/svc_run.c (svc_run): Likewise.
	* sunrpc/svc_udp.c (svcudp_create): Likewise.

2011-04-21  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-initgroups.c (_nss_files_initgroups_dyn): Fix
	problem in reallocation in last patch.

2011-04-20  Ulrich Drepper  <drepper@gmail.com>

	* sunrpc/Makefile: Move inclusion of Rules.

2011-04-19  Ulrich Drepper  <drepper@gmail.com>

	* nss/nss_files/files-initgroups.c: New file.
	* nss/Makefile (libnss_files-routines): Add files-initgroups.
	* nss/Versions (libnss_files) [GLIBC_PRIVATE]: Export
	_nss_files_initgroups_dyn.

2011-03-31  Richard Sandiford  <richard.sandiford@linaro.org>

	* elf/elf.h (R_ARM_IRELATIVE): Define.

2011-04-19  Ulrich Drepper  <drepper@gmail.com>

	* po/ru.po: Update from translation team.

2011-04-17  Ulrich Drepper  <drepper@gmail.com>

	* sunrpc/Makefile ($(rpc-compat-routines.os)): Add before-compile to
	dependencies.

2011-02-06  Mike Frysinger  <vapier@gentoo.org>

	[BZ #12653]
	* sysdeps/i386/i686/multiarch/memcpy-ssse3-rep.S: Only protect
	MEMCPY_CHK with USE_AS_BCOPY ifdef check.
	* sysdeps/i386/i686/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: Likewise.
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: Likewise.

2011-03-28  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/powerpc/powerpc32/power4/strncmp.S: Don't read past
	differing bytes.
	* sysdeps/powerpc/powerpc64/power4/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: Likewise.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: Likewise.

2011-04-17  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12420]
	* sysdeps/unix/sysv/linux/x86_64/getcontext.S: Reload context after
	storing it.
	* stdlib/bug-getcontext.c: New file.
	* stdlib/Makefile: Add rules to build and run bug-getcontext.

2011-04-13  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-64/utf16-utf32-z9.c: Wrap the z9-109
	instructions into .machine "z9-109".
	* sysdeps/s390/s390-64/utf8-utf16-z9.c: Likewise.
	* sysdeps/s390/s390-64/utf8-utf32-z9.c: Likewise.

2011-04-11  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	* sysdeps/s390/s390-32/elf/start.S (_start): Skip extra zeroes
	between environment variables and auxiliary vector.

2011-04-16  Ulrich Drepper  <drepper@gmail.com>

	* Makefile: Add rules to build linkobj/libc.so.
	* include/libc-symbols.h: Define libc_hidden_nolink.
	* include/rpc/auth.h: Mark functions which are to be hidden.
	* include/rpc/auth_des.h: Likewise.
	* include/rpc/auth_unix.h: Likewise.
	* include/rpc/clnt.h: Likewise.
	* include/rpc/des_crypt.h: Likewise.
	* include/rpc/key_prot.h: Likewise.
	* include/rpc/pmap_clnt.h: Likewise.
	* include/rpc/pmap_prot.h: Likewise.
	* include/rpc/pmap_rmt.h: Likewise.
	* include/rpc/rpc_msg.h: Likewise.
	* include/rpc/svc.h: Likewise.
	* include/rpc/svc_auth.h: Likewise.
	* include/rpc/xdr.h: Likewise.
	* nis/Makefile: Link all DSOs against linkobj/libc.so.
	* nss/Makefile: Likewise.
	* sunrpc/Makefile: Don't install headers.  Build library with normal
	entry points.  Don't build rpcinfo.  Link RPC tests appropriately.
	* sunrpc/auth_des.c: Hide exported symbols by default, export some
	for the compat linking library.  Remove use of INTDEF/INTUSE.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/des_crypt.c: Likewise.
	* sunrpc/des_soft.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/key_prot.c: Likewise.
	* sunrpc/netname.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_prot.c: Likewise.
	* sunrpc/pmap_prot2.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/publickey.c: Likewise.
	* sunrpc/rpc_cmsg.c: Likewise.
	* sunrpc/rpc_common.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rpc_prot.c: Likewise.
	* sunrpc/rpc_thread.c: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc.c: Likewise.
	* sunrpc/svc_auth.c: Likewise.
	* sunrpc/svc_authux.c: Likewise.
	* sunrpc/svc_raw.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xcrypt.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_float.c: Likewise.
	* sunrpc/xdr_intXX_t.c: Likewise.
	* sunrpc/xdr_mem.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

2011-04-10  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12650]
	* sysdeps/i386/dl-tls.h: Define TLS_DTV_UNALLOCATED.
	* sysdeps/ia64/dl-tls.h: Likewise.
	* sysdeps/powerpc/dl-tls.h: Likewise.
	* sysdeps/s390/dl-tls.h: Likewise.
	* sysdeps/sh/dl-tls.h: Likewise.
	* sysdeps/sparc/dl-tls.h: Likewise.
	* sysdeps/x86_64/dl-tls.h: Likewise.
	* elf/dl-tls.c: Don't define TLS_DTV_UNALLOCATED here.

2011-03-14  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-load.c (_dl_dst_substitute): When skipping the first
	rpath element also skip the following colon.
	(expand_dynamic_string_token): Add is_path parameter and pass
	down to DL_DST_REQUIRED and _dl_dst_substitute.
	(decompose_rpath): Call expand_dynamic_string_token with
	non-zero is_path.  Ignore empty rpaths.
	(_dl_map_object_from_fd): Call expand_dynamic_string_token
	with zero is_path.

2011-04-08  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sync_file_range.c:
	Make cancelable.

2011-04-09  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12655]
	* sysdeps/unix/sysv/linux/sys/syscall.h: Fix comment.
	Patch by Filipe David Manana <fdmanana@apache.org>.

2011-04-07  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S (CALL_FAIL):
	Maintain aligned stack.
	(CHECK_RSP): Remove unused macro.

2011-04-03  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/cacheinfo.c (intel_02_known): Fix typo in table.
	* sysdeps/unix/sysv/linux/i386/sysconf.c (intel_02_known): Likewise.

2011-04-02  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/bits/time.h (CLOCK_BOOTTIME): Define.

	* include/features.h: Mention __USE_XOPEN2K8 in comment.

2011-03-26  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12518]
	* sysdeps/x86_64/Versions: Add memcpy to GLIBC_2.14.
	* sysdeps/x86_64/memcpy.S: Provide GLIBC_2_14 memcpy.
	* sysdeps/x86_64/memmove.c: New file.
	* sysdeps/x86_64/multiarch/memcpy.S: Include <shlib-compat.h>.
	(memcpy): Renamed to ...
	(__new_memcpy): This.
	(memcpy): Provide GLIBC_2_14 memcpy.
	* sysdeps/x86_64/multiarch/memmove.c: Include <shlib-compat.h>.
	(memcpy): Provide GLIBC_2_2_5 memcpy.

2011-04-01  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12631]
	* wcsmbs/wchar.h: Make wcpcpy and wcpncpy visible for __USE_XOPEN2K8.

2011-03-30  Andreas Schwab  <schwab@redhat.com>

	* misc/syncfs.c: New file.
	* misc/Makefile (routines): Add syncfs.
	* posix/unistd.h: Declare syncfs.
	* sysdeps/unix/syscalls.list: Add syncfs.

2011-04-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/Versions: Rename open_by_handle to
	open_by_handle_at.
	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.

2011-04-01  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Define O_PATH.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.

	* io/Makefile: Compile fallocate.c, fallocate64.c, and
	sync_file_range.c with -fexceptions.
	* sysdeps/unix/sysv/linux/fallocate.c: Make cancelable.
	* sysdeps/unix/sysv/linux/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/fallocate64.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/fallocate.c: Likewise.
	* sysdeps/unix/sysv/linux/sync_file_range.c: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Mark
	sync_file_range as cancellation point
	* sysdeps/unix/sysv/linux/i386/sync_file_range.c: New file.  This is
	now a wrapper around __call_sync_file_range with cancellation handling.
	* sysdeps/unix/sysv/linux/i386/sync_file_range.S: Renamed to ...
	* sysdeps/unix/sysv/linux/i386/call_sync_file_range.S: ...this.  Change
	function name to __call_sync_file_range.
	* sysdeps/unix/sysv/linux/i386/Makefile [subdir=io] (sysdep_routines):
	Add call_sync_file_range.

2011-04-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Add
	bits/timex.h.

2011-04-01  Ulrich Drepper  <drepper@gmail.com>

	* iconv/iconv.h: Fix typo in comment.
	* io/fcntl.h: Likewise.
	* libio/stdio.h: Likewise.
	* posix/spawn.h: Likewise.
	* posix/unistd.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* time/time.h: Likewise.
	* wcsmbs/wchar.h: Likewise.

	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14] (name_to_handle_at,
	open_by_handle): Add.
	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Define struct file_handle
	and MAX_HANDLE_SZ.  Declare name_to_handle_at and open_by_handle.
	Augment a few comments.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/syscalls.list: Add name_to_handle_at and
	open_by_handle.

	* io/fcntl.h (AT_EMPTY_PATH): Define.

2011-03-30  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add clock_adjtime.
	* sysdeps/unix/sysv/linux/bits/time.h: New file.
	* sysdeps/unix/sysv/linux/sys/timex.h: Move struct timex definition
	to...
	* sysdeps/unix/sysv/linux/bits/timex.h: ...here.  New file.
	* Versions.def: Add GLIBC_2.14.
	* sysdeps/unix/sysv/linux/Versions [GLIBC_2.14] (clock_adjtime):
	Export.

2011-03-22  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/i386/sysconf.c (intel_check_word): Increment
	round counter.
	* sysdeps/x86_64/cacheinfo.c (intel_check_word): Likewise.

2011-03-20  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12597]
	* string/test-strncmp.c (do_page_test): New function.
	(check2): Likewise.
	(test_main): Call check2.
	* sysdeps/x86_64/multiarch/strcmp.S: Properly cross page boundary.

2011-03-20  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12587]
	* sysdeps/unix/sysv/linux/i386/sysconf.c (intel_check_word):
	Handle cache information in CPU leaf 4.
	* sysdeps/x86_64/cacheinfo.c (intel_check_word): Likewise.

2011-03-18  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12583]
	* posix/fnmatch.c (fnmatch): Check size of pattern in wide
	character representation.
	Partly based on a patch by Tomas Hoger <thoger@redhat.com>.

2011-03-16  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/powerpc/powerpc32/power6/fpu/s_isnanf.S (isnanf): Fix
	END(__isnan) to END(__isnanf) to match function entry point/label
	EALIGN(__isnanf,...).

2011-03-10  Jakub Jelinek  <jakub@redhat.com>

	* wcsmbs/wchar.h (wmemcmp): Remove __restrict qualifiers.

2011-03-10  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12510]
	* elf/dl-lookup.c (do_lookup_x): For copy relocations of unique objects
	copy from the symbol referenced in the relocation to initialize the
	used variable.
	Patch by Piotr Bury <pbury@goahead.com>.
	* elf/Makefile: Add rules to build and tst-unique3.
	* include/bits/dlfcn.h: Remove _dl_mcount_wrapper_check declaration.
	* elf/tst-unique3.cc: New file.
	* elf/tst-unique3.h: New file.
	* elf/tst-unique3lib.cc: New file.
	* elf/tst-unique3lib2.cc: New file.

	* elf/Makefile: Don't run tst-execstack* tests of SELinux is enabled.

2011-03-10  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/sparc/sparc64/elf/configure.in (libc_cv_sparc64_tls): Add
	$LDFLAGS and -nostdlib -nostartfiles to linking step.  Change main
	to _start.

2011-03-06  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-load.c (_dl_map_object): If we are looking for the first
	to-be-loaded object along a path to loader is ld.so.

2011-03-02  Harsha Jagasia  <harsha.jagasia@amd.com>
	    Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/x86_64/memset.S: After aligning destination, code
	branches to different locations depending on the value of
	misalignment, when multiarch is enabled. Fix this.

2011-03-02  Harsha Jagasia  <harsha.jagasia@amd.com>

	* sysdeps/x86_64/cacheinfo.c (init_cacheinfo):
	Set _x86_64_preferred_memory_instruction for AMD processsors.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_Prefer_SSE_for_memop for AMD processors.

2011-03-04  Ulrich Drepper  <drepper@gmail.com>

	* libio/fmemopen.c (fmemopen): Optimize a bit.

2011-03-03  Andreas Schwab  <schwab@redhat.com>

	* libio/fmemopen.c (fmemopen): Don't read past end of buffer.

2011-03-03  Roland McGrath  <roland@redhat.com>

	* setjmp/bits/setjmp2.h: Canonicalize comment formatting.

2011-02-28  Aurelien Jarno  <aurelien@aurel32.net>

	* sysdeps/sparc/sparc64/multiarch/memset.S(__bzero): Call
	__bzero_ultra1 instead of __memset_ultra1.

2011-02-23  Andreas Schwab  <schwab@redhat.com>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ #12509]
	* include/link.h (struct link_map): Add l_orig_initfini.
	* elf/dl-load.c (_dl_map_object_from_fd): Free realname before
	returning unsuccessfully.
	* elf/dl-close.c (_dl_close_worker): If this is the last explicit
	close of a file loaded at startup, restore the original l_initfini
	list.
	* elf/dl-deps.c (_dl_map_object_deps): Don't free old l_initfini
	list, store the pointer.
	* elf/Makefile ($(objpfx)noload-mem): New rule.
	(noload-ENV): Define.
	(tests): Add $(objpfx)noload-mem.
	* elf/noload.c: Include <memcheck.h>.
	(main): Call mtrace.  Close all opened handles.

2011-02-17  Andreas Schwab  <schwab@redhat.com>

	[BZ #12454]
	* elf/dl-deps.c (_dl_map_object_deps): Signal error early when
	dependencies are missing.

2011-02-22  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Fix __if_freereq crash: Unlike the generic version which uses free,
	Hurd needs munmap.
	* sysdeps/mach/hurd/ifreq.h: New file.

2011-01-27  Petr Baudi≈°  <pasky@suse.cz>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ 12445]#
	* stdio-common/vfprintf.c (vfprintf): Pass correct newlen
	to extend_alloca().
	* stdio-common/bug23.c: New file.
	* stdio-common/Makefile (tests): Add bug23.

2010-09-28  Andreas Schwab  <schwab@redhat.com>
	    Ulrich Drepper  <drepper@gmail.com>

	[BZ #12489]
	* elf/rtld.c (dl_main): Move setting of GLRO(dl_init_all_dirs)
	before performing relro protection.  At old place add assertion
	to make sure nothing changed.

2011-02-17  Nathan Sidwell  <nathan@codesourcery.com>
	    Glauber de Oliveira Costa  <glommer@gmail.com>

	* elf/elf.h: Add new ARM TLS relocs.

2011-02-16  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/unix/sysv/linux/powerpc/powerpc64/sysdep.h:
	(INTERNAL_VSYSCALL_NCS INTERNAL_SYSCALL_NCS): Remove erroneous (int)
	cast from r3.
	* sysdeps/wordsize-64/Makefile: New file.  Add tst-writev to
	'tests' variable.
	* sysdeps/wordsize-64/tst-writev.c: New file.

2011-02-15  Ryan S. Arnold  <rsa@us.ibm.com>

	* sysdeps/powerpc/powerpc64/power7/Makefile: New file which adds
	-mno-vsx to the CFLAGS-rtld.c variable to avoid using VSX registers and
	insns in _dl_start to prevent a TOC reference before relocs are
	resolved.

2011-02-15  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12469]
	* Makeconfig: Remove RANLIB definition.
	* Makerules: Don't use RANLIB.
	* aclocal.m4: Remove ranlib test.
	* configure.in: No need to check for ranlib.
	* elf/rtld-Rules: Don't use RANLIB.

2011-02-16  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/i386/sysdep.h: Add _MACH_I386_SYSDEP_H inclusion
	protection macro.
	* sysdeps/mach/i386/thread_state.h: Add _MACH_I386_THREAD_STATE_H
	inclusion protection macro.

	* stdio-common/psiginfo.c (psiginfo): Check pinfo->si_signo against
	SIGRTMIN and SIGRTMAX and print information in that case only when
	SIGRTMIN is defined.

2011-02-11  Jakub Jelinek  <jakub@redhat.com>

	* stdio-common/printf-parsemb.c (__parse_one_specmb): Handle
	arginfo fn returning -1.

	* stdio-common/_i18n_number.h (_i18n_number_rewrite): Ensure decimal
	and thousands string is zero terminated.

2011-02-03  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Sync with
	sysdeps/unix/sysv/linux/bits/socket.h.

2011-01-30  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* bits/sched.h (__CPU_ZERO, __CPU_SET, __CPU_CLR, __CPU_ISSET)
	(__CPU_COUNT): Remove old macros.
	(__CPU_ZERO_S, __CPU_SET_S, __CPU_CLR_S, __CPU_ISSET_S)
	(__CPU_COUNT, __CPU_EQUAL_S, __CPU_OP_S, __CPU_ALLOC_SIZE)
	(__CPU_ALLOC, __CPU_FREE): Add macros.
	(__sched_cpualloc, __sched_cpufree): Add declarations.

2011-02-05  Ulrich Drepper  <drepper@gmail.com>

	* nscd/nscd-client.h: Define MAX_TIMEOUT_VALUE.
	(struct datahead): Reuse 32 bits of the alignment for a TTL field.
	* nscd/aicache.c (addhstaiX): Return timeout of added value.
	(readdhstai): Return value of addhstaiX call.
	* nscd/grpcache.c (cache_addgr): Return timeout of added value.
	(addgrbyX): Return value returned by cache_addgr.
	(readdgrbyname): Return value returned by addgrbyX.
	(readdgrbygid): Likewise.
	* nscd/pwdcache.c (cache_addpw): Return timeout of added value.
	(addpwbyX): Return value returned by cache_addpw.
	(readdpwbyname): Return value returned by addhstbyX.
	(readdpwbyuid): Likewise.
	* nscd/servicescache.c (cache_addserv): Return timeout of added value.
	(addservbyX): Return value returned by cache_addserv.
	(readdservbyname): Return value returned by addservbyX:
	(readdservbyport): Likewise.
	* nscd/hstcache.c (cache_addhst): Return timeout of added value.
	(addhstbyX): Return value returned by cache_addhst.
	(readdhstbyname): Return value returned by addhstbyX.
	(readdhstbyaddr): Likewise.
	(readdhstbynamev6): Likewise.
	(readdhstbyaddrv6): Likewise.
	* nscd/initgrcache.c (addinitgroupsX): Return timeout of added value.
	(readdinitgroups): Return value returned by addinitgroupsX.
	* nscd/cache.c (readdfcts): Change return value of functions to time_t.
	(prune_cache): Keep track of timeout value of re-added entries.
	* nscd/connections.c (nscd_run_prune): Use MAX_TIMEOUT_VALUE.
	* nscd/nscd.h: Adjust prototypes of readd* functions.

2011-02-04  Roland McGrath  <roland@redhat.com>

	* nis/nis_server.c (nis_servstate): Use the right name for 0.
	(nis_stats): Likewise.
	* nis/nis_modify.c (nis_modify): Likewise.
	* nis/nis_remove.c (nis_remove): Likewise.
	* nis/nis_add.c (nis_add): Likewise.

	* elf/dl-object.c (_dl_new_object): Remove unused variable L.

	* posix/fnmatch_loop.c: Add some consts.

	* sysdeps/x86_64/multiarch/memset-x86-64.S: Add an #undef.

2011-02-02  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12460]
	* config.make.in (config-cflags-novzeroupper): Define.
	* configure.in: Substitute libc_cv_cc_novzeroupper.
	* elf/Makefile (AVX-CFLAGS): Define.
	(CFLAGS-tst-audit4.c): Replace -mavx with $(AVX-CFLAGS).
	(CFLAGS-tst-auditmod4a.c): Likewise.
	(CFLAGS-tst-auditmod4b.c): Likewise.
	(CFLAGS-tst-auditmod6b.c): Likewise.
	(CFLAGS-tst-auditmod6c.c): Likewise.
	(CFLAGS-tst-auditmod7b.c): Likewise.
	* sysdeps/i386/configure.in: Check -mno-vzeroupper.

2011-02-02  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-runtime.c (_dl_call_pltexit): Pass correct address of the
	function to the callback.
	Patch partly by Jiri Olsa <jolsa@redhat.com>.

2011-02-02  Andreas Schwab  <schwab@redhat.com>

	* shadow/sgetspent.c: Check return value of __sgetspent_r instead
	of errno.

2011-01-19  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11724]
	* elf/dl-deps.c (_dl_map_object_deps): Rewrite sorting determining order
	of constructors.
	* elf/dl-fini.c (_dl_sort_fini): Rewrite sorting determining order
	of destructors.
	(_dl_fini): Don't call _dl_sort_fini if there is only one object.

	[BZ #11724]
	* elf/Makefile: Add rules to build and run new test.
	* elf/tst-initorder.c: New file.
	* elf/tst-initorder.exp: New file.
	* elf/tst-initordera1.c: New file.
	* elf/tst-initordera2.c: New file.
	* elf/tst-initordera3.c: New file.
	* elf/tst-initordera4.c: New file.
	* elf/tst-initorderb1.c: New file.
	* elf/tst-initorderb2.c: New file.
	* elf/tst-order-a1.c: New file.
	* elf/tst-order-a2.c: New file.
	* elf/tst-order-a3.c: New file.
	* elf/tst-order-a4.c: New file.
	* elf/tst-order-b1.c: New file.
	* elf/tst-order-b2.c: New file.
	* elf/tst-order-main.c: New file.
	New test case by George Gensure <werkt0@gmail.com>.

2010-10-01  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't discard result of
	decoding ACE if AI_CANONIDN.

2011-01-18  Ulrich Drepper  <drepper@gmail.com>

	* elf/Makefile: Build IFUNC tests unless multi-arch = no.

2011-01-17  Ulrich Drepper  <drepper@gmail.com>

	* version.h (RELEASE): Bump for 2.13 release.
	* include/features.h: (__GLIBC_MINOR__): Bump to 13.

	* io/fcntl.h: Define AT_NO_AUTOMOUNT.

	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Define MADV_HUGEPAGE and
	MADV_NOHUGEPAGE.
	* sysdeps/unix/sysv/linux/ia64/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h: Likewise.

	* posix/getconf.c: Update copyright year.
	* catgets/gencat.c: Likewise.
	* csu/version.c: Likewise.
	* debug/catchsegv.sh: Likewise.
	* debug/xtrace.sh: Likewise.
	* elf/ldconfig.c: Likewise.
	* elf/ldd.bash.in: Likewise.
	* elf/sprof.c (print_version): Likewise.
	* iconv/iconv_prog.c: Likewise.
	* iconv/iconvconfig.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* malloc/memusage.sh: Likewise.
	* malloc/mtrace.pl: Likewise.
	* nscd/nscd.c (print_version): Likewise.
	* nss/getent.c: Likewise.

	* sysdeps/unix/sysv/linux/bits/socket.h: Define AF_CAIF, AF_ALG,
	PF_CAIF, and PF_ALG.
	* sysdeps/unix/sysv/linux/sparc/bits/socket.h: Likewise.

2011-01-16  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/Makefile (tlsmod17a-modules, tlsmod18a-modules): Define.
	(modules-names): Use them.
	(ifunc-test-modules, ifunc-pie-tests): Define.
	(extra-test-objs): Add tlsmod17a-modules, tlsmod18a-modules,
	tst-pie1, ifunc-test-modules and ifunc-pie-tests objects.
	(test-extras): Likewise.
	($(patsubst %,$(objpfx)%.os,$(tlsmod17a-modules))): Use
	$(compile-command.c).
	($(patsubst %,$(objpfx)%.os,$(tlsmod18a-modules))): Likewise.
	(all-built-dso): Define.
	(check-textrel.out, check-execstack.out): Depend on it.

	* configure.in: Don't override --enable-multi-arch.

2011-01-15  Ulrich Drepper  <drepper@gmail.com>

	[BZ #6812]
	* nscd/hstcache.c (tryagain): Define.
	(cache_addhst): Return tryagain not notfound for temporary errors.
	(addhstbyX): Also set h_errno to TRY_AGAIN when memory allocation
	failed.

2011-01-14  Ulrich Drepper  <drepper@gmail.com>

	[BZ #10563]
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Use INLINE_SETXID_SYSCALL
	to make the syscall.
	* sysdeps/unix/sysv/linux/setgroups.c: New file.

	[BZ #12378]
	* posix/fnmatch_loop.c (FCT): When matching '[' keep track of beginning
	and fall back to matching as normal character if the string ends before
	the matching ']' is found.  This is what POSIX requires.
	* posix/testfnm.c: Adjust test result.
	* posix/globtest.sh: Adjust test result.  Add new test.
	* posix/tst-fnmatch.input: Likewise.
	* posix/tst-fnmatch2.c: Add new test.

2010-12-28  Andreas Schwab  <schwab@linux-m68k.org>

	* elf/Makefile (check-execstack): Revert last change.  Depend on
	check-execstack.h.
	(check-execstack.h): New target.
	(generated): Add check-execstack.h.
	* elf/check-execstack.c: Include "check-execstack.h".
	(main): Revert last change.
	(handle_file): Return zero if GNU_STACK is absent and
	DEFAULT_STACK_PERMS doesn't include PF_X.

2011-01-13  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/posix/spawni.c (__spawni): Don't fail if close file action
	in child fails because the descriptor is already closed.
	* include/sys/resource.h: Add libc_hidden_proto for getrlimit64.
	* sysdeps/unix/sysv/linux/getrlimit64.c: Add libc_hidden_def.
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c: Likewise.

	[BZ #12397]
	* sysdeps/unix/sysv/linux/mkdirat.c (mkdirat): Fix handling of missing
	syscall.

	[BZ #10484]
	* nss/nss_files/files-hosts.c (HOST_DB_LOOKUP): Handle overflows of
	temporary buffer used to handle multi lookups locally.
	* include/alloca.h: Add libc_hidden_proto for __libc_alloca_cutoff.

2011-01-12  Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-dst.h (DL_DST_REQUIRED): Allow l_origin to be NULL when
	loader is ld.so.

2011-01-10  Paul Pluzhnikov  <ppluzhnikov@google.com>

	* sysdeps/i386/Makefile: stdlib/cxa_finalize.c needs 16-byte stack
	alignment for SSE2.

2011-01-12  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12394]
	* stdio-common/printf_fp.c (__printf_fp): Add more room for grouping
	characters.  When rounding increased number of integer digits recompute
	number of groups.
	* stdio-common/tst-grouping.c: New file.
	* stdio-common/Makefile: Add rules to build and run tst-grouping.

2011-01-09  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/bits/select.h: Don't use asm code for __FD_SET,
	__FD_CLR, and __FS_ISSET.  gcc generates better code on its own.

	* sysdeps/x86_64/bits/select.h: Mark value of __FD_SET and __FD_CLR as
	void.
	* bits/select.h: Likewise.

2011-01-08  Ulrich Drepper  <drepper@gmail.com>

	* po/ja.po: Update from translation team.

2011-01-04  David S. Miller  <davem@sunset.davemloft.net>

	[BZ #11155]
	* sysdeps/unix/sysv/linux/sparc/sparc64/fxstat.c: Use i386's
	implementation just like for lxstat, fxstatat, et al.

2010-12-27  Jim Meyering  <meyering@redhat.com>

	[BZ #12348]
	* posix/regexec.c (build_trtable): Return failure indication upon
	calloc failure.  Otherwise, re_search_internal could infloop on OOM.

2010-12-25  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12201]
	* sysdeps/unix/sysv/linux/getrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/setrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c: Use ../getrlimit64.c.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define __ASSUME_PRLIMIT64.

	[BZ #12207]
	* malloc/malloc.c (do_check_malloc_state): Use fastbin macro.

	[BZ #12204]
	* string/xpg-strerror.c (__xpg_strerror_r): Return error code, not -1.
	* sysdeps/mach/xpg-strerror.c (__xpg_strerror_r): Likewise.

2010-12-15  H.J. Lu  <hongjiu.lu@intel.com>

	* config.h.in (NO_CTORS_DTORS_SECTIONS): Define.
	* configure.in: Define NO_CTORS_DTORS_SECTIONS if linker
	script has SORT_BY_INIT_PRIORITY.
	* elf/sofini.c: Remove `.ctors' and `.dtors' sections if
	NO_CTORS_DTORS_SECTIONS is defined.
	* elf/soinit.c: Likewise.
	* sysdeps/i386/init-first.c: Don't call __libc_global_ctors if
	NO_CTORS_DTORS_SECTIONS is defined.
	* sysdeps/mach/hurd/i386/init-first.c: Likewise.
	* sysdeps/mach/hurd/powerpc/init-first.c: Likewise.
	* sysdeps/sh/init-first.c: Likewise.
	* sysdeps/unix/sysv/linux/init-first.c: Likewise.

2010-12-24  Ulrich Drepper  <drepper@gmail.com>

	* stdio-common/vfprintf.c (vfprintf): If printf handlers are installed
	always use the slow path.

2010-12-15  Ryan S. Arnold  <rsa@us.ibm.com>

	* elf/Makefile: (check-execstack): Replace $(native-compile) with a
	similar rule which adds the sysdep directories to the header search in
	order to pick up the correct platform stackinfo.h.
	* elf/check-execstack.c (main): Check DEFAULT_STACK_PERMS for PF_X and
	perform test if it is, otherwise return successfully without testing.
	* elf/dl-load.c (_dl_map_object_from_fd): Source stack_flags from
	DEFAULT_STACK_PERMS define in stackinfo.h.
	* elf/dl-support.c (_dl_stack_flags): Source from DEFAULT_STACK_PERMS
	defined in stackinfo.h.
	* elf/rtld.c (_dl_starting_up): Source ._dl_stack_flags from
	DEFAULT_STACK_PERMS defined in stackinfo.h.
	* sysdeps/i386/stackinfo.h: Define DEFAULT_STACK_PERMS with PF_X.
	* sysdeps/ia64/stackinfo.h: Likewise.
	* sysdeps/s390/stackinfo.h: Likewise.
	* sysdeps/sh/stackinfo.h: Likewise.
	* sysdeps/sparc/stackinfo.h: Likewise.
	* sysdeps/x86_64/stackinfo.h: Likewise.
	* sysdeps/powerpc/stackinfo.h: Define DEFAULT_STACK_PERMS without
	PF_X for powerpc64.  Retain PF_X for powerpc32.

2010-12-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/readdir_r.c (__READDIR_R): Compute reclen more
	accurately.
	* sysdeps/unix/sysv/linux/wordsize-64/readdir_r.c: Define
	GETDENTS_64BIT_ALIGNED.

2010-12-14  Ulrich Drepper  <dreper@gmail.com>

	* sysdeps/i386/i686/multiarch/strcmp.S: Undo accidental checkin.

2010-12-10  Andreas Schwab  <schwab@redhat.com>

	* wcsmbs/wchar.h (wcpcpy, wcpncpy): Only declare under
	_GNU_SOURCE.

	* wcsmbs/wchar.h (wcpcpy, wcpncpy): Add __restrict.
	* wcsmbs/bits/wchar2.h (__wmemmove_chk_warn, wmemmove, wmemset):
	Remove __restrict.
	(wcscpy, __wcpcpy_chk, __wcpcpy_alias, wcpcpy, wcsncpy, wcpncpy)
	(wcscat, wcsncat, __wcrtomb_chk, wcrtomb): Add __restrict.

2010-12-09  Ulrich Drepper  <drepper@gmail.com>

	[BZ #11655]
	* stdlib/msort.c (qsort_r): Make sure both phys_pages and pagesize
	are initialized.

2010-12-09  Jakub Jelinek  <jakub@redhat.com>

	* string/bits/string3.h (memmove, bcopy): Remove __restrict.

2010-12-03  Ulrich Drepper  <drepper@gmail.com>

	* po/it.po: Update from translation team.

2010-12-01  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/strcmp-ssse3.S (STRCMP): Remove
	unused codes.

2010-11-30  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/fpu/libm-test-ulps: Relax ynf(10,0.75) test expectations.

2010-11-24  Andreas Schwab  <schwab@redhat.com>

	* resolv/nss_dns/dns-host.c (getanswer_r): Don't handle ttl == 0
	specially.
	(gaih_getanswer_slice): Likewise.

2010-10-20  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Fix up inline asm.

2010-05-31  Petr Baudi≈°  <pasky@suse.cz>

	[BZ #11149]
	* elf/ldconfig.c (main): Allow aux_cache_file open()ing to fail
	silently even in the chroot mode.

2010-11-22  Ulrich Drepper  <drepper@gmail.com>

	* nis/nss_compat/compat-initgroups.c (internal_getgrent_r): Optimize
	last patch a bit.  Pretty printing

2010-05-31  Petr Baudi≈° <pasky@suse.cz>

	[BZ #10085]
	* nis/nss_compat/compat-initgroups.c (internal_getgrent_r): Fix
	initialization of skip_initgroups_dyn.

2010-11-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/i386/bits/mman.h: Define MAP_HUGETLB.
	* sysdeps/unix/sysv/linux/x86_64/bits/mman.h: Likewise.

2010-11-16  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/unix/sysv/linux/sys/swap.h (SWAP_FLAG_DISCARD): Define.

2010-11-11  Andreas Schwab  <schwab@redhat.com>

	* posix/fnmatch_loop.c (NEW_PATTERN): Fix use of alloca.
	* posix/Makefile (tests): Add $(objpfx)tst-fnmatch-mem.
	(tst-fnmatch-ENV): Set MALLOC_TRACE.
	($(objpfx)tst-fnmatch-mem): New rule.
	(generated): Add tst-fnmatch-mem and tst-fnmatch.mtrace.
	* posix/tst-fnmatch.c (main): Call mtrace.

2010-11-11  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Support Intel processor model 6 and model 0x2c.

2010-11-10  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/ieee754/ldbl-128ibm/e_sqrtl.c (__ieee754_sqrtl): Force
	  signed comparison.

2010-11-09  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12205]
	* string/test-strncasecmp.c (check_result): New function.
	(do_one_test): Use it.
	(check1): New function.
	(test_main): Use it.
	* sysdeps/i386/i686/multiarch/strcmp.S (nibble_ashr_use_sse4_2_exit):
	Support strcasecmp and strncasecmp.

2010-11-08  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12194]
	* sysdeps/i386/bits/byteswap.h: Avoid warning in __bswap_16.
	* sysdeps/x86_64/bits/byteswap.h: Likewise.

2010-11-07  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/memset.S: Check USE_MULTIARCH and USE_SSE2 for
	IFUNC support.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memset-x86-64.
	* sysdeps/x86_64/multiarch/bzero.S: New file.
	* sysdeps/x86_64/multiarch/cacheinfo.c: New file.
	* sysdeps/x86_64/multiarch/memset-x86-64.S: New file.
	* sysdeps/x86_64/multiarch/memset.S: New file.
	* sysdeps/x86_64/multiarch/memset_chk.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Set bit_Prefer_SSE_for_memop for Intel processors.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Prefer_SSE_for_memop):
	Define.
	(index_Prefer_SSE_for_memop): Define.
	(HAS_PREFER_SSE_FOR_MEMOP): Define.

2010-11-04  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/mempcpy.S: New file.
	* sysdeps/powerpc/powerpc64/power7/mempcpy.S: New file.

2010-11-03  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #12191]
	* sysdeps/i386/i686/cacheinfo.c (__x86_64_raw_data_cache_size): New.
	(__x86_64_raw_data_cache_size_half): Likewise.
	(__x86_64_raw_shared_cache_size): Likewise.
	(__x86_64_raw_shared_cache_size_half): Likewise.

	* sysdeps/x86_64/cacheinfo.c (__x86_64_raw_data_cache_size): New.
	(__x86_64_raw_data_cache_size_half): Likewise.
	(__x86_64_raw_shared_cache_size): Likewise.
	(__x86_64_raw_shared_cache_size_half): Likewise.
	(init_cacheinfo): Set __x86_64_raw_data_cache_size,
	__x86_64_raw_data_cache_size_half, __x86_64_raw_shared_cache_size
	and __x86_64_raw_shared_cache_size_half.  Round
	__x86_64_data_cache_size_half, __x86_64_data_cache_size
	__x86_64_shared_cache_size_half and __x86_64_shared_cache_size,
	to multiple of 256 bytes.

2010-11-03  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12167]
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Recognize new mangling
	of inacessible symlinks.  Verify result of symlink before returning it.
	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r): Likewise.
	Patch mostly by Miklos Szeredi <miklos@szeredi.hu>.

2010-10-28  Erich Ritz  <erichritz@gmail.com>

	* math/math.h (isinf): Fix typo in comment.

2010-11-01  Ulrich Drepper  <drepper@gmail.com>

	* po/da.po: Update from translation team.

2010-10-26  Ulrich Drepper  <drepper@gmail.com>

	* elf/rtld.c (dl_main): Move assertion after the point where rtld map
	is added to the list.

2010-10-20  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>
	    Ulrich Drepper  <drepper@gmail.com>

	* elf/dl-object.c (_dl_new_object): Don't append the new object to
	the global list here.  Move code to...
	(_dl_add_to_namespace_list): ...here.  New function.
	* elf/rtld.c (dl_main): Invoke _dl_add_to_namespace_list.
	* sysdeps/generic/ldsodefs.h (_dl_add_to_namespace_list): Declare.
	* elf/dl-load.c (lose): Don't remove the element from the list.
	(_dl_map_object_from_fd): Invoke _dl_add_to_namespace_list.
	(_dl_map_object): Likewise.

2010-10-25  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12159]
	* sysdeps/x86_64/multiarch/strchr.S: Fix propagation of search byte
	into all bytes of SSE register.
	Patch by Richard Li <richardpku@gmail.com>.

2010-10-24  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12140]
	* malloc/malloc.c (_int_free): Fill correct number of bytes when
	perturbing.

2010-10-20  Michael B. Brutman  <brutman@us.ibm.com>

	* sysdeps/powerpc/dl-procinfo.c: Add support for ppca2 platform
	* sysdeps/powerpc/dl-procinfo.h: Add support for ppca2 platform
	* sysdeps/powerpc/powerpc32/a2/memcpy.S: New file.
	* sysdeps/powerpc/powerpc64/a2/memcpy.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/a2/Implies: New
	submachine.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/a2/Implies: Likewise.

2010-10-22  Andreas Schwab  <schwab@redhat.com>

	* include/dlfcn.h (__RTLD_SECURE): Define.
	* elf/dl-load.c (_dl_map_object): Remove preloaded parameter.  Use
	mode & __RTLD_SECURE instead.
	(open_path): Rename preloaded parameter to secure.
	* sysdeps/generic/ldsodefs.h (_dl_map_object): Adjust declaration.
	* elf/dl-open.c (dl_open_worker): Adjust call to _dl_map_object.
	* elf/dl-deps.c (openaux): Likewise.
	* elf/rtld.c (struct map_args): Remove is_preloaded.
	(map_doit): Don't use it.
	(dl_main): Likewise.
	(do_preload): Use __RTLD_SECURE instead of is_preloaded.
	(dlmopen_doit): Add __RTLD_SECURE to mode bits.

2010-09-09  Andreas Schwab  <schwab@redhat.com>

	* Makeconfig (sysd-rules-patterns): Add rtld-%:rtld-%.
	(sysd-rules-targets): Remove duplicates.
	* elf/rtld-Rules ($(objpfx)rtld-%.os): Add pattern rules with
	rtld-%.$o dependency.

2010-10-18  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-open.c (dl_open_worker): Don't expand DST here, let
	_dl_map_object do it.

2010-10-19  Ulrich Drepper  <drepper@gmail.com>

	* sysdeps/i386/bits/mathdef.h (FP_FAST_FMA): If the GCC 4.6 port has
	fast fma builtins, define the macros in the C99 standard.
	(FP_FAST_FMAF): Likewise.
	(FP_FAST_FMAL): Likewise.
	* sysdeps/x86_64/bits/mathdef.h: Likewise.

	* bits/mathdef.h: Update copyright year.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.

2010-10-19  Michael Meissner  <meissner@linux.vnet.ibm.com>

	* bits/mathdef.h (FP_FAST_FMA): If the GCC 4.6 port has fast fma
	builtins, define the macros in the C99 standard.
	(FP_FAST_FMAF): Likewise.
	(FP_FAST_FMAL): Likewise.
	* sysdeps/powerpc/bits/mathdef.h (FP_FAST_FMA): Define, ppc as
	multiply/add.
	(FP_FAST_FMAF): Likewise.

2010-10-15  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Some new testcases.
	* sysdeps/ieee754/ldbl-128/s_fmal.c: New file.
	* sysdeps/ieee754/ldbl-96/s_fma.c (__fma): Fix fma with finite x and
	y and infinite z.  Do multiplication by C already in long double.
	* sysdeps/ieee754/ldbl-96/s_fmal.c: New file.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Fix fma with finite x and
	y and infinite z.  Do bitwise or of inexact bit into u.d.
	* sysdeps/ieee754/ldbl-64-128/s_fmal.c: New file.
	* sysdeps/i386/fpu/s_fmaf.S: Removed.
	* sysdeps/i386/fpu/s_fma.S: Removed.
	* sysdeps/i386/fpu/s_fmal.S: Removed.

2010-10-16  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add IEEE quad long double fmal tests.
	* sysdeps/ieee754/ldbl-128/s_fmal.c (__fmal): Ensure a1 + u.d
	computation is not scheduled after fetestexcept.  Fix value
	of minimum denormal long double.

2010-10-14  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add some more tests.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Handle underflows
	correctly.

2010-10-15  Andreas Schwab  <schwab@redhat.com>

	* scripts/data/localplt-s390-linux-gnu.data: New file.
	* scripts/data/localplt-s390x-linux-gnu.data: New file.

2010-10-13  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Some more fmaf and fma tests.
	* sysdeps/i386/i686/multiarch/s_fma.c: Include ldbl-96 version
	instead of dbl-64.
	* sysdeps/i386/fpu/bits/mathinline.h (fma, fmaf, fmal): Remove
	inlines.
	* sysdeps/ieee754/ldbl-96/s_fma.c: New file.
	* sysdeps/ieee754/dbl-64/s_fma.c (__fma): Fix exponent adjustment
	if one of x and y is very large and the other is subnormal.
	* sysdeps/s390/fpu/s_fmaf.c: New file.
	* sysdeps/s390/fpu/s_fma.c: New file.
	* sysdeps/powerpc/fpu/s_fmaf.S: New file.
	* sysdeps/powerpc/fpu/s_fma.S: New file.
	* sysdeps/powerpc/powerpc32/fpu/s_fma.S: New file.
	* sysdeps/powerpc/powerpc64/fpu/s_fma.S: New file.
	* sysdeps/unix/sysv/linux/s390/fpu/s_fma.c: New file.

2010-10-12  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add some more fmaf tests, add
	fma tests.
	* sysdeps/ieee754/dbl-64/s_fmaf.c (__fmaf): Fix Inf/Nan check.
	* sysdeps/ieee754/dbl-64/s_fma.c: New file.
	* sysdeps/i386/i686/multiarch/s_fma.c: Include
	sysdeps/ieee754/dbl-64/s_fma.c instead of math/s_fma.c.
	* sysdeps/x86_64/multiarch/s_fma.c: Likewise.
	* sysdeps/ieee754/ldbl-opt/s_fma.c: Likewise.
	* sysdeps/ieee754/ldbl-128/s_fma.c: New file.

2010-10-12  Ulrich Drepper  <drepper@redhat.com>

	[BZ #12078]
	* posix/regcomp.c (parse_branch): One more memory leak plugged.
	* posix/bug-regex31.input: Add test case.

2010-10-11  Ulrich Drepper  <drepper@gmail.com>

	* posix/bug-regex31.c: Rewrite to run multiple tests from stdin.
	* posix/bug-regex31.input: New file.

	[BZ #12078]
	* posix/regcomp.c (parse_branch): Free memory when allocation failed.
	(parse_sub_exp): Fix last change, use postorder.

	* posix/bug-regex31.c: New file.
	* posix/Makefile: Add rules to build and run bug-regex31.

	* posix/regcomp.c (parse_bracket_exp): Add missing re_free calls.

	[BZ #12078]
	* posix/regcomp.c (parse_sub_exp): Free tree data when it is not used.

	[BZ #12108]
	* stdio-common/psiginfo.c (psiginfo): Don't expext SIGRTMIN..SIGRTMAX
	to have entries in sys_siglist.

	[BZ #12093]
	* sysdeps/unix/sysv/linux/check_pf.c (__check_pf): ->ifa_addr might
	be NULL.

2010-10-07  Jakub Jelinek  <jakub@redhat.com>

	[BZ #3268]
	* math/libm-test.inc (fma_test): Add 2 fmaf tests.
	* sysdeps/ieee754/dbl-64/s_fmaf.c: New file.
	* sysdeps/i386/i686/multiarch/s_fmaf.c: Include
	sysdeps/ieee754/dbl-64/s_fmaf.c instead of math/s_fmaf.c.
	* sysdeps/x86_64/multiarch/s_fmaf.c: Likewise.
	* include/fenv.h (feupdateenv, fetestexcept): Add libm_hidden_proto.
	* math/feupdateenv.c (feupdateenv): Add libm_hidden_ver.
	* sysdeps/i386/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/powerpc/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/x86_64/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c (feupdateenv): Likewise.
	* sysdeps/ia64/fpu/feupdateenv.c (feupdateenv): Add libm_hidden_def.
	* sysdeps/s390/fpu/feupdateenv.c (feupdateenv): Likewise.
	* math/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/ia64/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/i386/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/s390/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/powerpc/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/x86_64/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/sparc/fpu/ftestexcept.c (fetestexcept): Likewise.
	* sysdeps/sh/sh4/fpu/ftestexcept.c (fetestexcept): Likewise.

2010-10-11  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12107]
	* stdio-common/psiginfo.c (psiginfo): Terminate all strings with
	newline.

2010-10-06  Ulrich Drepper  <drepper@gmail.com>

	* string/bug-strstr1.c: New file.
	* string/Makefile: Add rules to build and run bug-strstr1.

2010-10-05  Eric Blake  <eblake@redhat.com>

	[BZ #12092]
	* string/str-two-way.h (two_way_long_needle): Always clear memory
	when skipping input due to the shift table.

2010-10-03  Ulrich Drepper  <drepper@gmail.com>

	[BZ #12005]
	* malloc/mcheck.c: Handle large requests.

	[BZ #12077]
	* sysdeps/x86_64/strcmp.S: Fix handling of remaining bytes in buffer
	for strncmp and strncasecmp.
	* string/stratcliff.c: Add tests for strcmp and strncmp.
	* wcsmbs/wcsatcliff.c: Adjust for stratcliff change.

2010-09-28  Nobuhiro Iwamatsu  <iwamatsu@nigauri.org>

	* sysdeps/sh/sh4/fpu/fpu_control.h: Add 'extern "C"' protection to
	__set_fpscr.

2010-09-30  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux_fsinfo.h (BTRFS_SUPER_MAGIC): Define.
	(CGROUP_SUPER_MAGIC): Define.
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Handle btrfs and cgroup file systems.
	* sysdeps/unix/sysv/linux/pathconf.c (__statfs_filesize_max):
	Likewise.

2010-09-27  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/rtld-memset.c: New file.
	* sysdeps/powerpc/powerpc64/rtld-memset.c: New file.

2010-09-29  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>

	[BZ #12067]
	* sysdeps/s390/s390-32/elf/start.S: Fix address calculation when
	trying to locate the ELF header.

2010-09-27  Andreas Schwab  <schwab@redhat.com>

	[BZ #11611]
	* sysdeps/unix/sysv/linux/internal_statvfs.c (INTERNAL_STATVFS):
	Mask out sign-bit copies when constructing f_fsid.

2010-09-24  Petr Baudi≈° <pasky@suse.cz>

	* debug/stack_chk_fail_local.c: Add missing licence exception.
	* debug/warning-nop.c: Likewise.

2010-09-15  Joseph Myers  <joseph@codesourcery.com>

	* sysdeps/unix/sysv/linux/getdents.c (__GETDENTS): When
	implementing getdents64 using getdents syscall, set d_type if
	__ASSUME_GETDENTS32_D_TYPE.

2010-09-16  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-close.c (free_slotinfo, free_mem): Move to...
	* elf/dl-libc.c (free_slotinfo, free_mem): ... here.

2010-09-21  Ulrich Drepper  <drepper@redhat.com>

	[BZ #12037]
	* posix/unistd.h: Undo change of feature selection for ftruncate from
	2010-01-11.

2010-09-20  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/strcmp.S: Fix another typo in x86-64 strncasecmp limit
	detection.

2010-09-20  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Add
	fanotify_mark.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list: Likewise.

2010-09-14  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/s390/s390-32/__longjmp.c (__longjmp): Define register
	variables after CHECK_SP call.
	* sysdeps/s390/s390-64/__longjmp.c (__longjmp): Likewise.

2010-09-13  Andreas Schwab  <schwab@redhat.com>
	    Ulrich Drepper  <drepper@redhat.com>

	* elf/rtld.c (dl_main): Set GLRO(dl_init_all_dirs) just before
	re-relocationg ld.so.
	* elf/dl-support.c (_dl_non_dynamic_init): And here after the
	_dl_init_paths call.
	* elf/dl-load.c (_dl_init_paths).  Don't set GLRO(dl_init_all_dirs)
	here anymore.

2010-09-14  Ulrich Drepper  <drepper@redhat.com>

	* resolv/res_init.c (__res_vinit): Count the default server we added.

2010-09-08  Chung-Lin Tang  <cltang@codesourcery.com>
	    Ulrich Drepper  <drepper@redhat.com>

	[BZ #11968]
	* sysdeps/unix/sysv/linux/x86_64/____longjmp_chk.S
	(____longjmp_chk): Use %ebx for saving value across system call.
	Add unwind info.

2010-09-06  Andreas Schwab  <schwab@redhat.com>

	* manual/Makefile: Don't mix pattern rules with normal rules.

2010-09-05  Andreas Schwab  <schwab@linux-m68k.org>

	* debug/vdprintf_chk.c (__vdprintf_chk): Remove undefined
	operation.
	* libio/iofdopen.c (_IO_new_fdopen): Likewise.
	* libio/iofopncook.c (_IO_cookie_init): Likewise.
	* libio/iovdprintf.c (_IO_vdprintf): Likewise.
	* libio/oldiofdopen.c (_IO_old_fdopen): Likewise.
	* sysdeps/powerpc/powerpc64/dl-machine.h (elf_machine_rela):
	Likewise.

2010-09-04  Ulrich Drepper  <drepper@redhat.com>

	[BZ #11979]
	* iconvdata/gconv-modules: Remove EBCDIC-CP-AR2 alias from
	IBM-930, IBM-933, IBM-935, IBM-937, and IBM-939.

2010-09-02  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/add_n.S: Update from GMP 5.0.1.
	* sysdeps/x86_64/addmul_1.S: Likewise.
	* sysdeps/x86_64/lshift.S: Likewise.
	* sysdeps/x86_64/mul_1.S: Likewise.
	* sysdeps/x86_64/rshift.S: Likewise.
	* sysdeps/x86_64/sub_n.S: Likewise.
	* sysdeps/x86_64/submul_1.S: Likewise.

2010-09-01  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	This aligns bits/sched.h onto sysdeps/unix/sysv/linux/bits/sched.h:
	Define __sched_param instead of SCHED_* and sched_param when
	<bits/sched.h> is included with __need_schedparam defined.
	* bits/sched.h [__need_schedparam]
	(SCHED_OTHER, SCHED_FIFO, SCHED_RR, sched_param): Do not define.
	[!__defined_schedparam && (__need_schedparam || _SCHED_H)]
	(__defined_schedparam): Define to 1.
	(__sched_param): New structure, identical to sched_param.
	(__need_schedparam): Undefine.

2010-08-31  Mike Frysinger  <vapier@gentoo.org>

	* sysdeps/unix/sysv/linux/sparc/sys/epoll.h (epoll_create2): Delete.
	(epoll_create1): Declare.

	* sysdeps/unix/sysv/linux/x86_64/sys/epoll.h: Fix typo.

2010-08-31  Andreas Schwab  <schwab@redhat.com>

	[BZ #7066]
	* stdlib/strtod_l.c (____STRTOF_INTERNAL): Fix array overflow when
	shifting retval into place.

2010-09-01  Ulrich Drepper  <drepper@redhat.com>

	* nis/rpcsvc/nis.h: Update copyright notice.
	* nis/rpcsvc/nis.x: Likewise.
	* nis/rpcsvc/nis_callback.h: Likewise.
	* nis/rpcsvc/nis_callback.x: Likewise.
	* nis/rpcsvc/nis_object.x: Likewise.
	* nis/rpcsvc/nis_tags.h: Likewise.
	* nis/rpcsvc/yp.h: Likewise.
	* nis/rpcsvc/yp.x: Likewise.
	* nis/rpcsvc/ypupd.h: Likewise.
	* nis/yp_xdr.c: Likewise.
	* nis/ypupdate_xdr.c: Likewise.

	* sunrpc/pm_getport.c (__libc_rpc_getport): New function.  This is
	mainly the body of pmap_getport.  Add parameters to specify timeouts.
	(pmap_getport): Use __libc_rpc_getport.
	* sunrpc/Versions: Export __libc_rpc_getport with GLIBC_PRIVATE.
	* include/rpc/pmap_clnt.h: Declare __libc_rpc_getport.
	* nis/nis_findserv.c: Remove pmap_getport copy. Use __libc_rpc_getport.

2010-08-31  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list: Add
	fanotify_mark.

2010-08-27  Roland McGrath  <roland@redhat.com>

	* sysdeps/i386/i686/multiarch/Makefile
	(CFLAGS-varshift.c): New variable.

2010-08-27  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/i386/i686/multiarch/varshift.S: File removed.
	* sysdeps/i386/i686/multiarch/varshift.c: New file.

	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: Move to .text.slow section.

	* sysdeps/x86_64/strlen.S: Minimal code improvement.

2010-08-26  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/x86_64/strlen.S: Unroll the loop.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	strlen-sse2 strlen-sse2-bsf.
	* sysdeps/x86_64/multiarch/strlen.S ((strlen): Return
	__strlen_no_bsf if bit_Slow_BSF is set.
	(__strlen_sse42): Removed.
	* sysdeps/x86_64/multiarch/strlen-no-bsf.S: New file.
	* sysdeps/x86_64/multiarch/strlen-sse4.S: New file.

2010-08-25  Roland McGrath  <roland@redhat.com>

	* sysdeps/x86_64/multiarch/varshift.S: File removed.
	* sysdeps/x86_64/multiarch/varshift.c: New file.
	* sysdeps/x86_64/multiarch/Makefile (CFLAGS-varshift.c): New variable.
	* sysdeps/x86_64/multiarch/varshift.h: Clean up decls, fix a cast.
	* sysdeps/x86_64/multiarch/memmove.c: Move decls around.
	* sysdeps/x86_64/multiarch/memmove_chk.c: Likewise.

2010-08-25  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strlen-sse2 strlen-sse2-bsf.
	* sysdeps/i386/i686/multiarch/strlen.S (strlen): Return
	__strlen_sse2_bsf if bit_Slow_BSF is unset.
	(__strlen_sse2): Removed.
	* sysdeps/i386/i686/multiarch/strlen-sse2-bsf.S: New file.
	* sysdeps/i386/i686/multiarch/strlen-sse2.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features): Set
	bit_Slow_BSF for Atom.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Slow_BSF): Define.
	(index_Slow_BSF): Define.
	(HAS_SLOW_BSF): Define.

2010-08-25  Ulrich Drepper  <drepper@redhat.com>

	[BZ #10851]
	* resolv/res_init.c (__res_vinit): When no server address at all
	is given default to loopback.

2010-08-24  Roland McGrath  <roland@redhat.com>

	* configure.in: Remove config-name.h generation.
	* configure: Regenerated.
	* config-name.in: File removed.
	* scripts/config-uname.sh: New file.
	* posix/Makefile (uname.c): Depend on $(objdir)config-name.h.
	($(objdir)config-name.h): New target.

	* sunrpc/rpc_parse.h: Avoid nested comment.

2010-08-24  Richard Henderson  <rth@redhat.com>
	    Ulrich Drepper  <drepper@redhat.com>
	    H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add varshift.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Likewise.
	* sysdeps/x86_64/multiarch/strcspn-c.c: Include "varshift.h".
	Replace _mm_srli_si128 with __m128i_shift_right.  Replace
	_mm_alignr_epi8 with _mm_loadu_si128.
	* sysdeps/x86_64/multiarch/strspn-c.c: Likewise.
	* sysdeps/x86_64/multiarch/strstr.c: Include "varshift.h".
	(__m128i_shift_right): Removed.
	* sysdeps/i386/i686/multiarch/varshift.h: New file.
	* sysdeps/i386/i686/multiarch/varshift.S: New file.
	* sysdeps/x86_64/multiarch/varshift.h: New file.
	* sysdeps/x86_64/multiarch/varshift.S: New file.

2010-08-21  Mike Frysinger  <vapier@gentoo.org>

	* configure.in: Move assembler checks to before sysdep dir checking.

2010-08-20  Petr Baudi≈°  <pasky@suse.cz>

	* LICENSES: Sync the sunrpc license.

2010-08-19  Ulrich Drepper  <drepper@redhat.com>

	* sunrpc/auth_des.c: Update copyright notice once again.
	* sunrpc/auth_none.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/bindrsvprt.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/des_crypt.c: Likewise.
	* sunrpc/des_soft.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/getrpcport.c: Likewise.
	* sunrpc/key_call.c: Likewise.
	* sunrpc/key_prot.c: Likewise.
	* sunrpc/openchild.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pm_getport.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_prot.c: Likewise.
	* sunrpc/pmap_prot2.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/rpc/auth.h: Likewise.
	* sunrpc/rpc/auth_unix.h: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sunrpc/rpc/des_crypt.h: Likewise.
	* sunrpc/rpc/key_prot.h: Likewise.
	* sunrpc/rpc/netdb.h: Likewise.
	* sunrpc/rpc/pmap_clnt.h: Likewise.
	* sunrpc/rpc/pmap_prot.h: Likewise.
	* sunrpc/rpc/pmap_rmt.h: Likewise.
	* sunrpc/rpc/rpc.h: Likewise.
	* sunrpc/rpc/rpc_des.h: Likewise.
	* sunrpc/rpc/rpc_msg.h: Likewise.
	* sunrpc/rpc/svc.h: Likewise.
	* sunrpc/rpc/svc_auth.h: Likewise.
	* sunrpc/rpc/types.h: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sunrpc/rpc_clntout.c: Likewise.
	* sunrpc/rpc_cmsg.c: Likewise.
	* sunrpc/rpc_common.c: Likewise.
	* sunrpc/rpc_cout.c: Likewise.
	* sunrpc/rpc_dtable.c: Likewise.
	* sunrpc/rpc_hout.c: Likewise.
	* sunrpc/rpc_main.c: Likewise.
	* sunrpc/rpc_parse.c: Likewise.
	* sunrpc/rpc_parse.h: Likewise.
	* sunrpc/rpc_prot.c: Likewise.
	* sunrpc/rpc_sample.c: Likewise.
	* sunrpc/rpc_scan.c: Likewise.
	* sunrpc/rpc_scan.h: Likewise.
	* sunrpc/rpc_svcout.c: Likewise.
	* sunrpc/rpc_tblout.c: Likewise.
	* sunrpc/rpc_util.c: Likewise.
	* sunrpc/rpc_util.h: Likewise.
	* sunrpc/rpcinfo.c: Likewise.
	* sunrpc/rpcsvc/bootparam_prot.x: Likewise.
	* sunrpc/rpcsvc/key_prot.x: Likewise.
	* sunrpc/rpcsvc/klm_prot.x: Likewise.
	* sunrpc/rpcsvc/mount.x: Likewise.
	* sunrpc/rpcsvc/nfs_prot.x: Likewise.
	* sunrpc/rpcsvc/nlm_prot.x: Likewise.
	* sunrpc/rpcsvc/rex.x: Likewise.
	* sunrpc/rpcsvc/rstat.x: Likewise.
	* sunrpc/rpcsvc/rusers.x: Likewise.
	* sunrpc/rpcsvc/sm_inter.x: Likewise.
	* sunrpc/rpcsvc/spray.x: Likewise.
	* sunrpc/rpcsvc/yppasswd.x: Likewise.
	* sunrpc/rtime.c: Likewise.
	* sunrpc/svc.c: Likewise.
	* sunrpc/svc_auth.c: Likewise.
	* sunrpc/svc_authux.c: Likewise.
	* sunrpc/svc_raw.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/svcauth_des.c: Likewise.
	* sunrpc/xcrypt.c: Likewise.
	* sunrpc/xdr.c: Likewise.
	* sunrpc/xdr_array.c: Likewise.
	* sunrpc/xdr_float.c: Likewise.
	* sunrpc/xdr_mem.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

	* sysdeps/x86_64/multiarch/strcmp.S: Fix two typos in strncasecmp
	handling.

2010-08-19  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/strspn.S [!SHARED]: Fix SSE4.2 check.

2010-08-19  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/memrchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/rawmemchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strchr.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strchrnul.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strlen.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strnlen.S: New file.
	* sysdeps/powerpc/powerpc64/power7/memchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/memrchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/rawmemchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strchr.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strchrnul.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strlen.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strnlen.S: New file.

2010-07-26  Anton Blanchard  <anton@samba.org>

	* malloc/malloc.c (sYSTRIm): Replace divide and multiply with mask.
	* malloc/arena.c (heap_trim): Likewise.

2010-08-16  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/syscalls.list: Add entry for fanotify_init
	here.  Not...
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: ...here...
	* sysdeps/unix/sysv/linux/i386/syscalls.list: ... orhere.

2010-08-12  H.J. Lu  <hongjiu.lu@intel.com>

	* sysdeps/i386/elf/Makefile: New file.

2010-08-14  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/sys/fanotify.h: Remove third argument
	from fanotify_init.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.

2010-08-15  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/strcmp.S: Use correct register for fourth parameter
	of strncasecmp_l.
	* sysdeps/multiarch/strcmp.S: Likewise.

2010-08-14  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/Makefile [subdir=string] (sysdep_routines): Add
	strncase_l-nonascii.
	* sysdeps/x86_64/multiarch/Makefile [subdir=string] (sysdep_routines):
	Add strncase_l-ssse3.
	* sysdeps/x86_64/multiarch/strcmp.S: Prepare for use as strncasecmp.
	* sysdeps/x86_64/strcmp.S: Likewise.
	* sysdeps/x86_64/multiarch/strncase_l-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/strncase_l.S: New file.
	* sysdeps/x86_64/strncase.S: New file.
	* sysdeps/x86_64/strncase_l-nonascii.c: New file.
	* sysdeps/x86_64/strncase_l.S: New file.
	* string/Makefile (strop-tests): Add strncasecmp.
	* string/test-strncasecmp.c: New file.

	* sysdeps/x86_64/strcasecmp_l-nonascii.c: Add prototype to avoid
	warning.

	* sysdeps/x86_64/strcmp.S: Move definition of NO_NOLOCALE_ALIAS to...
	* sysdeps/x86_64/multiarch/strcasecmp_l-ssse3.S: ... here.

2010-08-14  Andreas Schwab  <schwab@linux-m68k.org>

	* sysdeps/unix/sysv/linux/prlimit.c: Make it compile.

2010-08-12  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/bits/termios.h: Define EXTPROC.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h: Likewise.

2010-05-01  Alan Modra  <amodra@gmail.com>

	* sysdeps/powerpc/powerpc32/power4/memcmp.S: Correct cfi for r24.
	* sysdeps/powerpc/powerpc64/bsd-_setjmp.S: Move contents..
	* sysdeps/powerpc/powerpc64/bsd-setjmp.S: ..and these too..
	* sysdeps/powerpc/powerpc64/setjmp.S: ..to here..
	* sysdeps/powerpc/powerpc64/setjmp-common.S: ..and here, with some
	tidying.  Don't tail-call __sigjmp_save for static lib.
	* sysdeps/powerpc/powerpc64/sysdep.h (SAVE_ARG, REST_ARG): Correct
	save location.
	(CFI_SAVE_ARG, CFI_REST_ARG): New macros.
	(CALL_MCOUNT): Add eh info, and nop after bl.
	(TAIL_CALL_SYSCALL_ERROR): New macro.
	(PSEUDO_RET): Use it.
	* sysdeps/powerpc/powerpc64/dl-trampoline.S (_dl_runtime_resolve):
	Correct save location of integer regs and cr.
	(_dl_profile_resolve): Correct cr save location.  Delete nops
	after bl when SHARED.  Reduce cfi size a little by better
	placement of cfi directives.
	* sysdeps/powerpc/powerpc64/fpu/s_copysign.S (__copysign): Don't
	make a stack frame.  Instead use parm save area as a temp.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/brk.S (__brk): Don't
	make a stack frame.  Use TAIL_CALL_SYSCALL_ERROR.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/clone.S (__clone):
	Don't make a stack frame for parent, use parm save area.
	Increase child stack frame to 112 bytes.  Don't save unused reg,
	and adjust reg usage.  Set up cfi on error recovery and
	epilogue of parent, and use TAIL_CALL_SYSCALL_ERROR, PSEUDO_RET.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/makecontext.S
	(__makecontext): Add dummy nop after jump to exit.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/socket.S (__socket):
	Use correct parm save area and cr save, reduce stack frame.
	Correct cfi for possible PSEUDO_RET frame setup.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/vfork.S (__vfork):
	Branch to local label emitted by PSEUDO_RET rather than
	__syscall_error.

2010-08-12  Andreas Schwab  <schwab@redhat.com>

	[BZ #11904]
	* locale/programs/locale.c (print_assignment): New function.
	(show_locale_vars): Use it.

2010-08-11  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/bits/statfs.h (struct statfs): Add f_flags
	field.
	(struct statfs64): Likewise.
	(_STATFS_F_FLAGS): Define.
	* sysdeps/unix/sysv/linux/s390/bits/statfs.h: Likewise.
	* sysdeps/unix/sysv/linux/internal_statvfs.c (__statvfs_getflags):
	Don't define if __ASSUME_STATFS_F_FLAGS is defined.
	(ST_VALID): Define locally.
	(INTERNAL_STATVFS): If f_flags has ST_VALID set don't call
	__statvfs_getflags, use the provided value.
	* sysdeps/unix/sysv/linux/kernel-features.h: Define
	__ASSUME_STATFS_F_FLAGS.

	* sysdeps/unix/sysv/linux/sys/inotify.h (IN_EXCL_UNLINK): Define.

	* sysdeps/unix/sysv/linux/Makefile [subdir=misc] (sysdep_headers):
	Add sys/fanotify.h.
	* sysdeps/unix/sysv/linux/Versions [libc]: Export fanotify_init and
	fanotify_mask for GLIBC_2.13.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add entries for
	fanotify_init and fanotify_mark.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sys/fanotify.h: New file.

	* sysdeps/unix/sysv/linux/Makefile [subdir=misc] (sysdep_routines):
	Add prlimit.
	* sysdeps/unix/sysv/linux/Versions [libc]: Export prlimit and
	prlimit64 for GLIBC_2.13.
	* sysdeps/unix/sysv/linux/bits/resource.h: Declare prlimit and
	prlimit64.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add entry for prlimit64
	syscall.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/s390/s390-32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sh/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.lis: Likewise.
	* sysdeps/unix/sysv/linux/wordsize-64/syscalls.list: Likewise.  Also
	add prlimit alias.
	* sysdeps/unix/sysv/linux/prlimit.c: New file.

	[BZ #11903]
	* sysdeps/generic/netinet/ip.h (IPTOS_CLASS): Fix definition.
	Patch by Evgeni Bikov <bikovevg@iitp.ru>.

	* nss/Makefile: Add rules to build and run tst-nss-test1.
	* shlib-versions: Add entry for libnss_test1.
	* nss/nss_test1.c: New file.
	* nss/tst-nss-test1.c: New file.

	* nss/nsswitch.c (__nss_database_custom): Define new variable.
	(__nss_configure_lookup): Set appropriate entry in
	__nss_configure_lookup to true.
	* nss/nsswitch.h: Define enum with indeces of databases in
	databases and __nss_database_custom arrays.  Declare
	__nss_database_custom.
	* grp/initgroups.c (internal_getgrouplist): Use __nss_database_custom
	to avoid using nscd when custom rules are installed.
	* nss/getXXbyYY_r.c: Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet): Likewise.

	* nss/nss_files/files-parse.c: Whitespace fixes.

2010-08-09  Ulrich Drepper  <drepper@redhat.com>

	[BZ #11883]
	* posix/fnmatch.c: Keep track of alloca use and fall back on malloc.
	* posix/fnmatch_loop.c: Likewise.

2010-07-17  Andi Kleen  <ak@linux.intel.com>

	* sysdeps/i386/i386-mcount.S (__fentry__): Define.
	* sysdeps/x86_64/_mcount.S (__fentry__): Define.
	* stdlib/Versions (__fentry__): Add for GLIBC 2.13
	* Versions.def [GLIBC_2.13]: Add.

2010-08-06  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid):
	Also fail if tpwd after pwuid call is NULL.

2010-07-31  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* hurd/hurdselect.c (_hurd_select): Round timeout up instead of down
	when converting to ms.

2010-06-06  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	* sysdeps/mach/hurd/ttyname.c (ttyname): Replace MIG_BAD_ID and
	EOPNOTSUPP errors with ENOTTY.
	* sysdeps/mach/hurd/ttyname_r.c (__ttyname_r): Replace MIG_BAD_ID and
	EOPNOTSUPP errors with ENOTTY.

2010-07-31  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/Makefile [subdir=string] (sysdep_routines):
	Add strcasecmp_l-ssse3.
	* sysdeps/x86_64/multiarch/strcmp.S: Add support to compile for
	strcasecmp.
	* sysdeps/x86_64/strcmp.S: Allow more flexible compiling of strcasecmp.
	* sysdeps/x86_64/multiarch/strcasecmp_l.S: New file.
	* sysdeps/x86_64/multiarch/strcasecmp_l-ssse3.S: New file.

2010-07-30  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strcmp.S: Pretty printing.

	* string/Makefile (strop-tests): Add strcasecmp.
	* sysdeps/x86_64/Makefile [subdir=string] (sysdep_routines): Add
	strcasecmp_l-nonascii.
	(gen-as-const-headers): Add locale-defines.sym.
	* sysdeps/x86_64/strcmp.S: Add support for strcasecmp implementation.
	* sysdeps/x86_64/strcasecmp.S: New file.
	* sysdeps/x86_64/strcasecmp_l.S: New file.
	* sysdeps/x86_64/strcasecmp_l-nonascii.c: New file.
	* sysdeps/x86_64/locale-defines.sym: New file.
	* string/test-strcasecmp.c: New file.

	* string/test-strcasestr.c: Test both ends of the range of characters.
	* sysdeps/x86_64/multiarch/strstr.c: Fix UCHIGH definition.

2010-07-29  Roland McGrath  <roland@redhat.com>

	[BZ #11856]
	* manual/locale.texi (Yes-or-No Questions): Fix example code.

2010-07-27  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strcmp-ssse3.S: Avoid compiling the file
	for ld.so.

2010-07-27  Andreas Schwab  <schwab@redhat.com>

	* manual/memory.texi (Malloc Tunable Parameters): Document
	M_PERTURB.

2010-07-26  Roland McGrath  <roland@redhat.com>

	[BZ #11840]
	* configure.in (-fgnu89-inline check): Set and substitute
	gnu89_inline, not libc_cv_gnu89_inline.
	* configure: Regenerated.
	* config.make.in (gnu89-inline-CFLAGS): Use @gnu89_inline@.

2010-07-26  Ulrich Drepper  <drepper@redhat.com>

	* string/test-strnlen.c: New file.
	* string/Makefile (strop-tests): Add strnlen.
	* string/tester.c (test_strnlen): Add a few more test cases.
	* string/tst-strlen.c: Better error reporting.

	* sysdeps/x86_64/strnlen.S: New file.

2010-07-24  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strstr.c (__m128i_strloadu_tolower): Use
	lower-latency instructions.

2010-07-23  Ulrich Drepper  <drepper@redhat.com>

	* string/test-strcasestr.c: New file.
	* string/test-strstr.c: New file.
	* string/Makefile (strop-tests): Add strstr and strcasestr.
	* string/str-two-way.h: Don't undefine MAX.
	* string/strcasestr.c: Don't define alias if NO_ALIAS is defined.

2010-07-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/i386/i686/multiarch/Makefile (sysdep_routines): Add
	strcasestr-nonascii.
	(CFLAGS-strcasestr-nonascii.c): Define.
	* sysdeps/i386/i686/multiarch/strcasestr-nonascii.c: New file.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c (STRSTR_SSE42):
	Remove unused attribute.

2010-07-20  Roland McGrath  <roland@redhat.com>

	* elf/dl-sysdep.c (_dl_important_hwcaps): Add dsocaps mask to
	dl_hwcap_mask as well as dl_hwcap.  Without this, dsocaps matching in
	ld.so.cache was broken.  With it, there is no way to disable dsocaps
	like LD_HWCAP_MASK can disable hwcaps.

2010-06-02  Emilio Pozuelo Monfort  <pochu27@gmail.com>

	* sysdeps/mach/hurd/sendmsg.c (__libc_sendmsg): Fix memory leaks.

2010-07-16  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/x86_64/multiarch/strstr.c: Rewrite to avoid indirect function
	call in strcasestr.
	* sysdeps/x86_64/multiarch/strcasestr.c: Declare
	__strcasestr_sse42_nonascii.
	* sysdeps/x86_64/multiarch/Makefile: Add rules to build
	strcasestr-nonascii.c.
	* sysdeps/x86_64/multiarch/strcasestr-nonascii.c: New file.

2010-06-15  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysign.S: New file.
	* sysdeps/powerpc/powerpc32/power6/fpu/s_copysignf.S: New file.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysign.S: New file.
	* sysdeps/powerpc/powerpc64/power6/fpu/s_copysignf.S: New file.

2010-07-09  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Use __fcntl not
	fcntl.

2010-07-06  Andreas Schwab  <schwab@redhat.com>

	[BZ #11577]
	* elf/dl-version.c (match_symbol): Don't pass NULL occation to
	dl_signal_cerror.

2010-07-06  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Implement
	_PC_PIPE_BUF using F_GETPIPE_SZ.

2010-07-05  Roland McGrath  <roland@redhat.com>

	* manual/arith.texi (Rounding Functions): Fix rint description
	implicit in round description.

2010-07-02  Ulrich Drepper  <drepper@redhat.com>

	* elf/Makefile: Fix linking for a few tests to make recent linker
	happy.

2010-06-30  Andreas Schwab  <schwab@redhat.com>

	* dlfcn/Makefile (LDLIBS-bug-atexit3-lib.so): Readd
	$(common-objpfx)libc_nonshared.a.

2010-06-21  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/970/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/power5/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/power5+/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/power6x/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/970/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/power5/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/power5+/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc64/power6x/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/970/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power4/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5+/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6x/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power7/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/970/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power4/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5+/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6x/fpu/Implies: Remove.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power7/fpu/Implies: Remove.
	* sysdeps/powerpc/powerpc32/970/Implies: Point to power4.
	* sysdeps/powerpc/powerpc32/power5/Implies: Point to power4.
	* sysdeps/powerpc/powerpc32/power5+/Implies: Point to power5.
	* sysdeps/powerpc/powerpc32/power6/Implies: Point to power5+.
	* sysdeps/powerpc/powerpc32/power6x/Implies: Point to power6.
	* sysdeps/powerpc/powerpc64/970/Implies: Point to power4.
	* sysdeps/powerpc/powerpc64/power5/Implies: Point to power4.
	* sysdeps/powerpc/powerpc64/power5+/Implies: Point to power5.
	* sysdeps/powerpc/powerpc64/power6/Implies: Point to power5+.
	* sysdeps/powerpc/powerpc64/power6x/Implies: Point to power6.
	* sysdeps/powerpc/powerpc32/power7/Implies: New file.
	* sysdeps/powerpc/powerpc64/power7/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/970/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/cell/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power4/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power5/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power6x/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc32/power7/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/970/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/cell/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power4/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power5/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power6x/Implies: New file.
	* sysdeps/unix/sysv/linux/powerpc/powerpc64/power7/Implies: New file.

2010-06-25  H.J. Lu  <hongjiu.lu@intel.com>

	* debug/memmove_chk.c (__memmove_chk): Renamed to ...
	(MEMMOVE_CHK): ...this.  Default to __memmove_chk.
	* string/memmove.c (memmove): Renamed to ...
	(MEMMOVE): ...this.  Default to memmove.
	* sysdeps/x86_64/memcpy.S: Use ENTRY_CHK and END_CHK.
	* sysdeps/x86_64/sysdep.h (ENTRY_CHK): Define.
	(END_CHK): Define.
	* sysdeps/x86_64/multiarch/Makefile (sysdep_routines): Add
	memcpy-ssse3 mempcpy-ssse3 memmove-ssse3 memcpy-ssse3-back
	mempcpy-ssse3-back memmove-ssse3-back.
	* sysdeps/x86_64/multiarch/bcopy.S: New file .
	* sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: New file.
	* sysdeps/x86_64/multiarch/memcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/memcpy.S: New file.
	* sysdeps/x86_64/multiarch/memcpy_chk.S: New file.
	* sysdeps/x86_64/multiarch/memmove-ssse3-back.S: New file.
	* sysdeps/x86_64/multiarch/memmove-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/memmove.c: New file.
	* sysdeps/x86_64/multiarch/memmove_chk.c: New file.
	* sysdeps/x86_64/multiarch/mempcpy-ssse3-back.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy-ssse3.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy.S: New file.
	* sysdeps/x86_64/multiarch/mempcpy_chk.S: New file.
	* sysdeps/x86_64/multiarch/init-arch.h (bit_Fast_Copy_Backward):
	Define.
	(index_Fast_Copy_Backward): Define.
	(HAS_ARCH_FEATURE): Define.
	(HAS_FAST_REP_STRING): Define.
	(HAS_FAST_COPY_BACKWARD): Define.

2010-06-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid):
	Restore proper fallback handling.

2010-06-19  Ulrich Drepper  <drepper@redhat.com>

	[BZ #11701]
	* posix/group_member.c (__group_member): Correct checking loop.

	* sysdeps/unix/sysv/linux/getlogin_r.c (__getlogin_r_loginuid): Handle
	OOM in getpwuid_r correctly.  Return error number when the caller
	should return, otherwise -1.
	(getlogin_r): Adjust to return also for result of __getlogin_r_loginuid
	call returning > 0 value.
	* sysdeps/unix/sysv/linux/getlogin.c (getlogin): Likewise.

2010-06-07  Andreas Schwab  <schwab@redhat.com>

	* dlfcn/Makefile: Remove explicit dependencies on libc.so and
	libc_nonshared.a from targets in modules-names.

2010-06-02  Kirill A. Shutemov  <kirill@shutemov.name>

	* elf/dl-reloc.c: Flush cache after solving TEXTRELs if arch
	requires it.

2010-06-10  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memcmp.S: New file
	* sysdeps/powerpc/powerpc64/power7/memcmp.S: New file.
	* sysdeps/powerpc/powerpc32/power7/strncmp.S: New file.
	* sysdeps/powerpc/powerpc64/power7/strncmp.S: New file.

2010-06-02  Andreas Schwab  <schwab@redhat.com>

	* nis/nss_nis/nis-initgroups.c (get_uid): Properly resize buffer.

2010-06-14  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/powerpc/bits/fcntl.h: Define F_SETPIPE_SZ
	and F_GETPIPE_SZ.
	* sysdeps/unix/sysv/linux/i386/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/x86_64/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/s390/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/sh/bits/fcntl.h: Likewise.
	* sysdeps/unix/sysv/linux/ia64/bits/fcntl.h: Likewise.

2010-06-14  Roland McGrath  <roland@redhat.com>

	* manual/libc.texinfo (@copying): Change to GFDL v1.3.

2010-06-07  Jakub Jelinek  <jakub@redhat.com>

	* libio/stdio.h (sscanf, vsscanf): Use __REDIRECT_NTH instead of
	__REDIRECT followed by __THROW.
	* wcsmbs/wchar.h (swscanf, vswscanf): Likewise.
	* posix/getopt.h (getopt): Likewise.

2010-06-02  Emilio Pozuelo Monfort  <pochu27@gmail.com>

	* hurd/lookup-at.c (__file_name_lookup_at): Accept
	AT_SYMLINK_FOLLOW in AT_FLAGS.  Fail with EINVAL if both
	AT_SYMLINK_FOLLOW and AT_SYMLINK_NOFOLLOW are present
	in AT_FLAGS.
	* hurd/hurd/fd.h (__file_name_lookup_at): Update comment.
	* sysdeps/mach/hurd/linkat.c (linkat): Pass O_NOLINK in FLAGS.

2010-05-28  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memcpy.S: Exchange srdi for srwi.

2010-05-26  H.J. Lu  <hongjiu.lu@intel.com>

	[BZ #11640]
	* sysdeps/x86_64/multiarch/init-arch.c (__init_cpu_features):
	Properly check family and model.

2010-05-26  Takashi Yoshii  <takashi.yoshii.zj@renesas.com>

	* sysdeps/unix/sysv/linux/sh/sh4/register-dump.h: Fix iov[] size.

2010-05-24  Luis Machado  <luisgpm@br.ibm.com>

	* sysdeps/powerpc/powerpc32/power7/memset.S: POWER7 32-bit memset fix.

2010-05-21  Ulrich Drepper  <drepper@redhat.com>

	* elf/dl-runtime.c (_dl_profile_fixup): Don't crash on unresolved weak
	symbol reference.

2010-05-19  Andreas Schwab  <schwab@redhat.com>

	* elf/dl-runtime.c (_dl_fixup): Don't crash on unresolved weak
	symbol reference.

2010-05-21  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add recvmmsg
	and internal_recvmmsg.
	* sysdeps/unix/sysv/linux/recvmmsg.c: New file.
	* sysdeps/unix/sysv/linux/internal_recvmmsg.S: New file.
	* sysdeps/unix/sysv/linux/socketcall.h (SOCKOP_recvmmsg): Define.
	* sysdeps/unix/sysv/linux/syscalls.list (recvmmsg): Remove.

	* sunrpc/clnt_tcp.c (clnttcp_control): Add missing break.
	* sunrpc/clnt_udp.c (clntudp_control): Likewise.
	* sunrpc/clnt_unix.c (clntunix_control): Likewise.

2010-05-20  Andreas Schwab  <schwab@redhat.com>

	* sysdeps/unix/sysv/linux/sys/timex.h: Use __REDIRECT_NTH.

2010-05-17  Luis Machado  <luisgpm@br.ibm.com>

	POWER7 optimizations.
	* sysdeps/powerpc/powerpc64/power7/memset.S: New file.
	* sysdeps/powerpc/powerpc32/power7/memset.S: New file.

2010-05-19  Ulrich Drepper  <drepper@redhat.com>

	* version.h: Update for 2.13 development version.

2010-05-12  Andrew Stubbs  <ams@codesourcery.com>

	* sysdeps/sh/sh4/fpu/feholdexcpt.c (feholdexcept): Really disable all
	exceptions.  Return 0.

2010-05-07  Roland McGrath  <roland@redhat.com>

	* elf/ldconfig.c (main): Add a const.

2010-05-06  Ulrich Drepper  <drepper@redhat.com>

	* nss/getent.c (idn_flags): Default to AI_IDN|AI_CANONIDN.
	(args_options): Add no-idn option.
	(ahosts_keys_int): Add idn_flags to ai_flags.
	(parse_option): Handle 'i' option to clear idn_flags.

	* malloc/malloc.c (_int_free): Possible race in the most recently
	added check.  Only act on the data if no current modification
	happened.

See ChangeLog.17 for earlier changes.
