2000-02-28  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/powerpc/fprsave.S: New file.
	* sysdeps/powerpc/fprrest.S: New file.
	* sysdeps/powerpc/Makefile [$(subdir)=misc] (sysdep_routines):
	Add fprsave and fprrest.

	* sysdeps/powerpc/gprrest0.S: Use ASM_GLOBAL_DIRECTIVE instead of
	.globl.
	* sysdeps/powerpc/gprsave0.S: Likewise.
	* sysdeps/powerpc/gprrest1.S: Likewise.
	* sysdeps/powerpc/gprsave1.S: Likewise.

	* sysdeps/powerpc/fpu/s_copysign.S: Use L() instead of local labels.
	* sysdeps/powerpc/submul_1.S: Likewise.
	* sysdeps/powerpc/sub_n.S: Likewise.
	* sysdeps/powerpc/strcpy.S: Likewise.
	* sysdeps/powerpc/strcmp.S: Likewise.
	* sysdeps/powerpc/stpcpy.S: Likewise.
	* sysdeps/powerpc/rshift.S: Likewise.
	* sysdeps/powerpc/mul_1.S: Likewise.
	* sysdeps/powerpc/memset.S: Likewise.
	* sysdeps/powerpc/lshift.S: Likewise.
	* sysdeps/powerpc/addmul_1.S: Likewise.
	* sysdeps/powerpc/add_n.S: Likewise.

	* sysdeps/unix/start.c: Initialize __errno and add comment
	explaining why.  Remove K&R compatibility.

	* sysdeps/powerpc/fpu/s_isnan.c: Avoid using asm statement to
	declare aliases.

	* sysdeps/powerpc/Makefile: Always pass flags to compile for ppc
	and not rs6000.
	[$(subdir)=misc] (sysdep_routines): Add gprsave0, gprrest0,
	gprsave1 , and gprrest1.
	Don't pass special flags to compiler for init and gmon-start if
	this is no ELF platform.
	* sysdeps/powerpc/gprrest0.S: New file.
	* sysdeps/powerpc/gprsave0.S: New file.
	* sysdeps/powerpc/gprrest1.S: New file.
	* sysdeps/powerpc/gprsave1.S: New file.
	* sysdeps/powerpc/Versions: Export _savegpr* and _restgpr*
	functions.

	* sysdeps/mach/hurd/bits/statfs.h: Define _STATFS_F_NAMELEN.
	* sysdeps/unix/sysv/linux/bits/statfs.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/statfs.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/statfs.h: Likewise.
	* sysdeps/posix/fpathconf.c: Don't unconditionally use f_namelen
	in statfs.  Check feature macro and use f_name_max or NAME_MAX
	instead.
	* sysdeps/posix/pathconf.c: Likewise.

	* dlfcn/dlfcn.h: Remove DL_CALL_FCT definition here.
	* sysdeps/generic/bits/dlfcn.h: Define DL_CALL_FCT here.
	* sysdeps/mips/bits/dlfcn.h: Define DL_CALL_FCT here.
	* iconv/skeleton.c: If DL_CALL_FCT is not yet defined, add dummy
	definition here.

	* sysdeps/generic/libc-start.c: Fix typo in comment.

	* include/set-hooks.h: Allow systems to not define
	symbol_set_define.

	* configure.in: Unify machine names rs6000 and powerpc.

2000-02-25  Andreas Jaeger  <aj@suse.de>

	* malloc/Versions: Change version of __libc_freeres to 2.1 in
	accordance with usage in glibc 2.1.3.

2000-02-28  Ulrich Drepper  <drepper@redhat.com>

	* stdlib/msort.c (qsort): Limit the amount of memory spend on a
	temporary array for the mergesort.

2000-02-28  Andreas Jaeger  <aj@suse.de>

	* stdlib/canonicalize.c: Include <stddef.h> for ptrdiff_t.

2000-02-27  Ulrich Drepper  <drepper@redhat.com>

	* conform/conformtest.pl (@headers): Add wordexp.h, wctype.h, wchar.h,
	varargs.h, utmpx.h, utime.h, unistd.h, ulimit.h, ucontext.h, time.h,
	termios.h, tar.h, sys/wait.h, sys/uio.h, sys/types.h, sys/times.h,
	sys/timeb.h, sys/time.h, sys/statvfs.h, sys/stat.h, sys/shm.h,
	sys/sem.h, and sys/resource.h.
	Implement handling of allow-header.
	* conform/data/fcntl.h-data: Correct various bugs.
	* conform/data/fnmatch.h-data: Likewise.
	* conform/data/math.h-data: Likewise.
	* conform/data/ndbm.h-data: Likewise.
	* conform/data/nl_types.h-data: Likewise.
	* conform/data/poll.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* conform/data/semaphore.h-data: Likewise.
	* conform/data/setjmp.h-data: Likewise.
	* conform/data/signal.h-data: Likewise.
	* conform/data/stdarg.h-data: Likewise.
	* conform/data/stddef.h-data: Likewise.
	* conform/data/stdio.h-data: Likewise.
	* conform/data/stdlib.h-data: Likewise.
	* conform/data/string.h-data: Likewise.
	* conform/data/strings.h-data: Likewise.
	* conform/data/stropts.h-data: Likewise.
	* conform/data/syslog.h-data: Likewise.
	* conform/data/sys/ipc.h-data: Likewise.
	* conform/data/sys/mman.h-data: Likewise.
	* conform/data/sys/msg.h-data: Likewise.
	* conform/data/tar.h-data: New file.
	* conform/data/termios.h-data: New file.
	* conform/data/time.h-data: New file.
	* conform/data/ucontext.h-data: New file.
	* conform/data/ulimit.h-data: New file.
	* conform/data/unistd.h-data: New file.
	* conform/data/utime.h-data: New file.
	* conform/data/utmpx.h-data: New file.
	* conform/data/varargs.h-data: New file.
	* conform/data/wchar.h-data: New file.
	* conform/data/wctype.h-data: New file.
	* conform/data/wordexp.h-data: New file.
	* conform/data/sys/resource.h-data: New file.
	* conform/data/sys/sem.h-data: New file.
	* conform/data/sys/shm.h-data: New file.
	* conform/data/sys/stat.h-data: New file.
	* conform/data/sys/statvfs.h-data: New file.
	* conform/data/sys/time.h-data: New file.
	* conform/data/sys/timeb.h-data: New file.
	* conform/data/sys/times.h-data: New file.
	* conform/data/sys/types.h-data: New file.
	* conform/data/sys/uio.h-data: New file.
	* conform/data/sys/wait.h-data: New file.

	* grp/grp.h (getgrent_r): Declare only if __USE_GNU.

	* include/sys/time.h (__itimes): Fix type of second parameter.

	* io/sys/stat.h (S_IFLNK): Define also if __USE_XOPEN.
	(S_ISVTX): Likewise.

	* io/sys/statvfs.h: Define fsblkcnt_t and fsfilcnt_t.

	* locale/langindo.h: Make ERA_YEAR, INT_CURR_SYMBOL, CURRENCY_SYMBOL,
	MON_DECIMAL_POINT, MON_THOUSANDS_SEP, MON_GROUPING, POSITIVE_SIGN,
	NEGATIVE_SIGN, INT_FRAC_DIGITS, FRAC_DIGITS, P_CS_PRECEDES,
	P_SEP_BY_SPACE, N_CS_PRECEDES, N_SEP_BY_SPACE, P_SIGN_POSN,
	N_SIGN_POSN, DECIMAL_POINT, THOUSANDS_SEP, GROUPING, YESEXPR,
	NOEXPR, YESSTR, and NOSTR only available if __USE_GNU.

	* math/bits/mathcalls.h: Don't declare tgamma and scalbn if only
	__USE_XOPEN.

	* posix/unistd.h: Don't define ptrdiff_t.
	(sbrk): Correct type of parameter.
	* sysdeps/generic/sbrk.c: Likewise.
	* sysdeps/mach/hurd/sbrk.c: Likewise.

	* posix/sys/types.h: Allow id_t, suseconds_t, fsblkcnt_t, and
	fsfilcnt_t being defined elsewhere.

	* resource/sys/resource.h: Define id_t.
	If __USE_XOPEN use int for type of first parameter if getrlimit,
	getrlimit64, setrlimit, setrlimit64, getrusage, getpriority, and
	setpriority.
	* sysdeps/generic/getpriority.c: Fix type of second parameter.
	* sysdeps/generic/setpriority.c: Likewise.
	* sysdeps/mach/hurd/getpriority.c: Likewise.
	* sysdeps/mach/hurd/setpriority.c: Likewise.
	* sysdeps/unix/sysv/irix4/getpriority.c: Likewise.
	* sysdeps/unix/sysv/irix4/setpriority.c: Likewise.
	* sysdeps/unix/sysv/linux/getpriority.c: Likewise.

	* sysdeps/generic/utimes.c: Fix parameter of third parameter.
	* sysdeps/mach/hurd/utimes.c: Likewise.
	* sysdeps/posix/utimes.c: Likewise.

	* sysdeps/generic/bits/shm.h: Define shmatt_t type and use it in
	struct shmid_ds definition.
	* sysdeps/gnu/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/shm.h: Likewise.

	* sysvipc/sys/shm.h: Define time_t.

	* sysvipc/sys/sem.h (struct sembuf): Make sem_num field unsigned.

	* sysdeps/gnu/bits/sem.h: Rename anonymous type struct sem_queue and
	struct sem_undo to struct __sem_queue and struct __sem_undo resp.

	* time/time.h: Define suseconds_t if not already done.

	* sysdeps/unix/sysv/linux/bits/statvfs.h: Rename f_spare to __f_spare.
	* sysdeps/unix/sysv/linux/fstatvfs64.c: Likewise.
	* sysdeps/unix/sysv/linux/statvfs64.c: Likewise.
	* sysdeps/unix/sysv/linux/internal_statvfs.c: Likewise.

	* intl/bindtextdom.c: Use rwlock to avoid surprising results in
	multithreaded applications.
	* intl/dcigettext.c: Likewise.
	* intl/textdomain.c: Likewise.
	* intl/*.c: Update copyright.
	* sysdeps/generic/bits/libc-lock.h: Define __libc_rwlock_* stubs.

2000-02-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/configure.in: Treat also "/usr/" as
	prefix especially.

2000-02-27  Ulrich Drepper  <drepper@redhat.com>

	* po/de.po: Update from translation team.
	* po/ko.po: Likewise.

2000-02-25  Andreas Jaeger  <aj@suse.de>

	* math/Versions: Move fe* function to GLIBC_2.2.  The patches have
	not been added to glibc 2.1.3.
	* Versions.def: Remove 2.1.3 entry for math.
	* sysdeps/alpha/fpu/fclrexcpt.c: Change default version to GLIBC_2.2.
	* sysdeps/alpha/fpu/fegetenv.c: Likewise.
	* sysdeps/alpha/fpu/fesetenv.c: Likewise.
	* sysdeps/alpha/fpu/feupdateenv.c: Likewise.
	* sysdeps/alpha/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/alpha/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/alpha/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/arm/fpu/fclrexcpt.c: Likewise.
	* sysdeps/arm/fpu/fegetenv.c: Likewise.
	* sysdeps/arm/fpu/fesetenv.c: Likewise.
	* sysdeps/arm/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/arm/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/generic/fclrexcpt.c: Likewise.
	* sysdeps/generic/fegetenv.c: Likewise.
	* sysdeps/generic/fesetenv.c: Likewise.
	* sysdeps/generic/feupdateenv.c: Likewise.
	* sysdeps/generic/fgetexcptflg.c: Likewise.
	* sysdeps/generic/fraiseexcpt.c: Likewise.
	* sysdeps/generic/fsetexcptflg.c: Likewise.
	* sysdeps/i386/fpu/fclrexcpt.c: Likewise.
	* sysdeps/i386/fpu/fegetenv.c: Likewise.
	* sysdeps/i386/fpu/fesetenv.c: Likewise.
	* sysdeps/i386/fpu/feupdateenv.c: Likewise.
	* sysdeps/i386/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/i386/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/i386/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/m68k/fpu/fclrexcpt.c: Likewise.
	* sysdeps/m68k/fpu/fegetenv.c: Likewise.
	* sysdeps/m68k/fpu/fesetenv.c: Likewise.
	* sysdeps/m68k/fpu/feupdateenv.c: Likewise.
	* sysdeps/m68k/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/m68k/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/m68k/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/mips/fpu/fclrexcpt.c: Likewise.
	* sysdeps/mips/fpu/fegetenv.c: Likewise.
	* sysdeps/mips/fpu/fesetenv.c: Likewise.
	* sysdeps/mips/fpu/feupdateenv.c: Likewise.
	* sysdeps/mips/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/powerpc/fclrexcpt.c: Likewise.
	* sysdeps/powerpc/fpu/fegetenv.c: Likewise.
	* sysdeps/powerpc/fpu/fesetenv.c: Likewise.
	* sysdeps/powerpc/fpu/feupdateenv.c: Likewise.
	* sysdeps/powerpc/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/powerpc/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/powerpc/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/sparc/fpu/fclrexcpt.c: Likewise.
	* sysdeps/sparc/fpu/fegetenv.c: Likewise.
	* sysdeps/sparc/fpu/fesetenv.c: Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c: Likewise.
	* sysdeps/sparc/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/sparc/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/sparc/fpu/fsetexcptflg.c: Likewise.

2000-02-25  Andreas Jaeger  <aj@suse.de>

	* sysdeps/alpha/fpu/fraiseexcpt.c (__feraiseexcept): Correct
	declaration to return value.

	* sysdeps/ieee754/Makefile (CFLAGS-k_standard.c): Added.

	* math/Makefile: Remove -Wno-write-strings since it's only needed
	by one file.

	* intl/Makefile (CFLAGS-bindtextdom.c): The code has been fixed,
	we don't need to disable the warnings anymore, remove them.
	(CFLAGS-finddomain.c): Likewise.
	(CFLAGS-localealias.c): Likewise.

2000-02-25  Andreas Jaeger  <aj@suse.de>

	* configure.in: Allow sed 3.02 or newer versions.

	* manual/install.texi (Tools for Compilation): Document sed
	requirement.

2000-02-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/powerpc/bzero.S: Moved to...
	* sysdeps/powerpc/elf/bzero.S: ...here.  New file.

	* posix/environ.c: Moved to...
	* sysdeps/generic/environ.c: ...here.  New file.

2000-02-25  Andreas Jaeger  <aj@suse.de>

	* stdio-common/Makefile (CFLAGS-_itoa.c): The code has been
	fixed, we don't need to disable the warnings anymore, remove them.
	* elf/Makefile (CFLAGS-dl-load.c): Likewise.

	* posix/Makefile (CFLAGS-regex.c): Remove not needed warning
	flag.

	* posix/regex.c (regex_compile): Remove unused variables.

2000-02-25  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/msq.h (struct msqid_ds): Use
	__pid_t.
	* sysdeps/unix/sysv/linux/alpha/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/msq.h: Likewise.

2000-02-25  Andreas Jaeger  <aj@suse.de>

	* locale/programs/ld-ctype.c (allocate_arrays): Add missing
	variable declaration.

2000-02-25  Ulrich Drepper  <drepper@redhat.com>

	* conform/conformtest.pl (@headers): Add "sys/msg.h", "sys/mman.h",
	"sys/ipc.h", "syslog.h", and "stropts.h".
	Handle / in header names correctly.
	* conform/data/stropts.h-data: New file.
	* conform/data/syslog.h-data: New file.
	* conform/data/sys/ipc.h-data: New file.
	* conform/data/sys/mman.h-data: New file.
	* conform/data/sys/msg.h-data: New file.

	* misc/sys/mman.h: Define off_t and mode_t if not already done.

	* streams/stropts.h: Define gid_t and uid_t if not already done.

	* sysdeps/gnu/bits/ipc.h (IPC_INFO): Only define if __USE_GNU.
	* sysdeps/unix/sysv/linux/alpha/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ipc.h: Likewise.

	* sysvipc/sys/msg.h: Don't include sys/types.h.
	Define time_t, pid_t, and ssize_t if not already done.
	(struct msgbuf): Define only if __USE_GNU.

	* sysdeps/generic/bits/msq.h: Include bits/types.h, not sys/types.h.
	(MSG_EXCEPT): Only define if __USE_GNU.
	Define msgqnum_t and msglen_t and use them in struct msqid_ds
	definition.
	* sysdeps/gnu/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/msq.h: Likewise.

	* sysdeps/generic/bits/stropts.h (I_GWROPT): Renamed from I_GWRSET.
	(FLUSHBAND): Only define is __USE_GNU.
	(RPROTMASK): Likewise.
	(SNDPIPE): Likewise.
	(MUXID_ALL): Likewise.
	(struct strrecvfd): Rename fill to __fill.

2000-02-24  Ulrich Drepper  <drepper@redhat.com>

	* stdlib/stdlib.h: Move definition X/Open compatibility stuff
	inside the main #ifdef.

2000-02-24  Geoff Clare  <gwc@unisoft.com>

	* posix/wordexp-test.c: Updated to include tests for all the
	problems fixed by the last changes to wordexp.c.

2000-02-24  Ulrich Drepper  <drepper@redhat.com>

	* posix/sys/wait.h: Handle definitions duplicated in stdlib.h
	correctly.
	* stdlib/stdlib.h: Handle definition of wait macros correctly.

	* posix/sys/wait.h: Add missing #endif.

	* stdlib/stdlib.h (setstate): Don't mark argument as const (yet).
	* stdlib/random_r.c: Change parameter types for initstate_t and
	setstate_r.
	* include/stdlib.h: Change parameter types for __initstate_t and
	__setstate_r.

2000-02-24  Andreas Jaeger  <aj@suse.de>

	* include/stdlib.h: Fix prototypes of __initstate and __setstate.

	* manual/time.texi (Precision Time): Fix typo.
	Patch by John Tobey <jtobey@ne.mediaone.net>, PR libc/1576.

2000-02-24  Ulrich Drepper  <drepper@redhat.com>

	* conform/conformtest.pl (@headers): Add string.h and strings.h.
	* conform/data/string.h-data: New file.
	* conform/data/strings.h-data: New file.

	* string/string.h [__USE_XOPEN]: Don't declare functions from
	<strings.h> here as well.

2000-02-23  Ulrich Drepper  <drepper@redhat.com>

	* posix/sys/wait.h: Pretty printing.  Allow WEXITSTATUS etc be
	defined elsewhere.
	* stdlib/stdlib.h [__USE_XOPEN]: Define WEXITSTATUS etc.
	* sysdeps/generic/bits/waitflags.h: Allow including from stdlib.h.
	* sysdeps/unix/bsd/bits/waitflags.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/waitflags.h: Likewise.
	* sysdeps/unix/sysv/sysv4/bits/waitflags.h: Likewise.
	* sysdeps/generic/bits/waitstatus.h: Likewise.

	* posix/wordexp.c: Use $HOME to expand ~ (if set); fix off-by-one
	error in expansion of ~user; correct handling of WRDE_APPEND and
	WRDE_DOOFFS; return WRDE_SYNTAX for syntax errors in command
	substitutions; limit removal of newlines to those that are
	really `trailing'; allow for current word to continue after
	a command substitution (e.g. "a$(echo b)c"); restore pwordexp
	members properly on error returns.
	Patch by Geoff Clare <gwc@unisoft.com>.

	* locale/programs/ld-ctype.c (allocate_arrays): Make sure the end
	of width table is 4-byte aligned.
	(ctype_output): Write out the entire width array.

	* sysdeps/unix/sysv/linux/bits/waitflags.h: Add __WALL.

2000-02-23  Andreas Jaeger  <aj@suse.de>

	* dlfcn/dlopen.c: Include <stddef.h> for NULL.
	* dlfcn/dlopenold.c: Likewise.
	* dlfcn/dlsym.c: Likewise.
	* dlfcn/dlvsym.c: Likewise.
	* iconv/gconv.c: Likewise.

2000-02-23  Ulrich Drepper  <drepper@redhat.com>

	* conform/conformtest.pl (@headers): Add stdlib.h.
	* conform/data/stdlib.h-data: New file.

2000-02-22  Ulrich Drepper  <drepper@redhat.com>

	* dlfcn/dlfcn.h (RTLD_DEFAULT): Don't use NULL.

	* iconv/iconv.h (iconv): Fix prototype.

	* misc/libgen.h: When using gcc using renaming feature to get XPG
	definition of basename.

	* misc/search.h (struct entry): Fix type of element data.

	* posix/unistd.h (getpagesize): Declare as const function.

	* sysdeps/unix/sysv/linux/alpha/bits/sigaction.h: Define SA_NOCLDWAIT.
	* sysdeps/unix/sysv/linux/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/sigaction.h: Likewise.

	* signal/signal.h [__USE_XOPEN]: Define uid_t.
	(sigstack): Correct type of first parameter.
	* sysdeps/generic/sigstack.c (sigstack): Likewise.
	* sysdeps/unix/sysv/linux/sigstack.c (sigstack): Likewise.

	* sysdeps/unix/sysv/linux/alpha/bits/siginfo.h: New file.  Copy of
	old sysdeps/unix/sysv/linux/bits/siginfo.h.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/siginfo.h [struct siginfo] (si_band):
	Change type to `long int'.

	* signal/signal.h [__USE_XOPEN]: Declare sigpause to redirect to
	__xpg_sigpause.
	* sysdeps/generic/sigpause.c: Define __xpg_sigpause.
	* sysdeps/posix/sigpause.c: Likewise.

	* conform/conformtest.pl: Correct bugs.  Add more functionality.
	* conform/data/dlfcn.h-data: Correct typos.
	* conform/data/ftw.h-data: Likewise.
	* conform/data/iconv.h-data: Likewise.
	* conform/data/nl_types.h-data: Likewise.
	* conform/data/search.h-data: Likewise.
	* conform/data/semaphore.h-data: New file.
	* conform/data/setjmp.h-data: New file.
	* conform/data/signal.h-data: New file.
	* conform/data/stdarg.h-data: New file.
	* conform/data/stddef.h-data: New file.
	* conform/data/stdio.h-data: New file.

	* po/de.po: Update from translation team.

1999-12-31  Martin Buchholz  <martin@xemacs.org>

	* argp/argp-help.c: Fix typos.
	* argp/argp.h: Likewise.
	* elf/dl-object.c: Likewise.
	* elf/dl-open.c: Likewise.
	* elf/elf.h: Likewise.
	* elf/rtld.c: Likewise.
	* iconv/gconv_open.c: Likewise.
	* localedata/tst-fmon.data: Likewise.
	* localedata/tst-rpmatch.sh: Likewise.
	* login/programs/xtmp.h: Likewise.
	* manual/arith.texi: Likewise.
	* manual/charset.texi: Likewise.
	* manual/creature.texi: Likewise.
	* manual/llio.texi: Likewise.
	* manual/search.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/string.texi: Likewise.
	* manual/sysinfo.texi: Likewise.
	* manual/users.texi: Likewise.
	* manual/examples/argp-ex2.c: Likewise.
	* manual/examples/argp-ex3.c: Likewise.
	* manual/examples/argp-ex4.c: Likewise.
	* manual/examples/mkfsock.c: Likewise.
	* math/test-fenv.c: Likewise.
	* nscd/nscd_gethst_r.c: Likewise.
	* nss/test-netdb.c: Likewise.
	* posix/regex.c: Likewise.
	* scripts/test-installation.pl: Likewise.
	* stdlib/canonicalize.c: Likewise.
	* stdlib/fmtmsg.c: Likewise.
	* string/argz-replace.c: Likewise.
	* string/argz.h: Likewise.
	* string/bits/string2.h: Likewise.
	* sysdeps/generic/glob.c: Likewise.
	* sysdeps/generic/setenv.c: Likewise.
	* sysdeps/i386/memcmp.S: Likewise.
	* sysdeps/posix/waitid.c: Likewise.
	* time/tzset.c: Likewise.

2000-02-21  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add
	getrlimit@GLIBC_2.0.
	Reported by Yoshito Kawada <KAWADA@jp.ibm.com>.

	* sysdeps/unix/sysv/linux/powerpc/setrlimit64.c: Removed.
	Reported by Kaoru Fukui <k_fukui@highway.ne.jp>.

	* elf/elf.h (ELF32_ST_OTHER): Removed.
	(ELF64_ST_OTHER): Likewise.

	* sysdeps/alpha/fpu/fpu_control.h: Update comment.

	* malloc/Makefile (tests): Add tst-valloc.
	* malloc/tst-valloc.c: New file.

2000-02-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/in.h (IPV6_RXSRCRT): Renamed to
	IPV6_RTHDR; added IPV6_RTHDR_LOOSE, IPV6_RTHDR_STRICT and
	IPV6_RTHDR_TYPE_0 to synch with RFC 2292.
	* sysdeps/generic/bits/in.h: Likewise.

2000-02-21  Ulrich Drepper  <drepper@redhat.com>

	* po/gl.po: Update from translation team.

	* timezone/antarctica: Update from tzdata2000b.
	* timezone/asia: Likewise.
	* timezone/australasia: Likewise.
	* timezone/europe: Likewise.

	* malloc/malloc.c (vALLOc): Call ptmalloc_init before mEMALIGn
	call to initialize malloc_getpagesize.
	(pvALLOc): Likewise.

2000-02-20  Ulrich Drepper  <drepper@redhat.com>

	* po/it.po: Update from translation team.

2000-02-20  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/arm/mmap64.S: Fix off by one error.

2000-02-20  Ulrich Drepper  <drepper@redhat.com>

	* sunrpc/rpc_main.c (checkfiles): Add comment to help translators.

	* po/de.po: Update from translation team.

2000-02-19  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/i386/sys/ucontext.h: Add definition of
	_libc_fpreg and _libc_fpstate and use it to define fpregset_t.
	* sysdeps/unix/sysv/linux/i386/sys/procfs.h (prgregset_t): Define
	using elf_gregset_t.
	(prfpregset_t): Define using elf_fpregset_t.

	* sysdeps/unix/sysv/linux/i386/sys/ucontext.h: Make fpregset_t
	definition compatible with definition in 2.1.2 and before.
	(struct ucontext): Use fpregset_t.
	* sysdeps/unix/sysv/linux/i386/sys/procfs.h (prfpregset_t): Define
	as pointer to fpregset_t.

2000-02-18  Ulrich Drepper  <drepper@redhat.com>

	* string/bits/string2.h (strnlen): Add cast to prevent warning.

	* nscd/connections.c (handle_request): Don't abort() if unknown
	command is sent.

2000-02-17  Ulrich Drepper  <drepper@redhat.com>

	* nscd/hstcache.c (cache_addhst): Don't cache name->record entries
	if more than one IP address is available.

2000-02-17  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/bits/termios.h: Sync with kernel.

2000-02-16  Ulrich Drepper  <drepper@redhat.com>

	* locale/programs/charmap.c (charmap_read): Find charmap also in
	the standard directory.

	* sysdeps/unix/sysv/linux/powerpc/mmap64.c: Correct prototype for
	__syscall_mmap2.

	* sysdeps/unix/sysv/linux/execve.c: Pretty print.

	* po/it.po: New file.
	* po/pl.po: Update from translation team.

2000-02-16  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/mmap64.c (__mmap64): Fix return
	value.

2000-02-16  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/powerpc/ftruncate64.c (ftruncate64): Fix
	typo.

2000-02-15  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Add one value for AMD K7.

2000-02-15  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc (nearbyint_test): Add some tests.
	(rint_test): Likewise.

2000-02-14  Ulrich Drepper  <drepper@redhat.com>

	* locale/programs/repertoire.c (repertoire_new_char): NUL
	terminated names of character in range.

	* stdio-common/vfprintf.c (vfprintf): Initialize thousands_sep.
	Define and initialize use_outdigits in the inner loops.

	* sysdeps/posix/sigwait.c: Don't look for signal 0 since it does
	not exist.  Patch by Miloslav Trmač <mitr@volny.cz> (PR libc/1601).

	* sysdeps/i386/fpu/s_nearbyint.S: Disable raising exception, not
	enable it.  Patch by Miloslav Trmač <mitr@volny.cz> (PR libc/1600).
	* sysdeps/i386/fpu/s_nearbyintf.S: Likewise.
	* sysdeps/i386/fpu/s_nearbyintl.S: Likewise.

2000-02-14  Andreas Jaeger  <aj@suse.de>

	* elf/rtld.c (dl_main): Fix check for references to dynamic linker.

2000-02-14  Ulrich Drepper  <drepper@redhat.com>

	* manual/job.texi: Fix typos.
	* manual/process.texi: Likewise.
	* manual/signal.texi: Likewise.

	* sysdeps/powerpc/atomicity.h: Remove white space to avoid
	compiler warning.

2000-02-14  Scott Bambrough  <scottb@netwinder.org>

	* sysdeps/unix/sysv/linux/arm/ioperm.c (_iopl, _ioperm):  Add
	Rebel-NetWinder to platform table so _ioperm platform lookup via
	/proc/cpuinfo works on later version NetWinders.

2000-02-13  Ulrich Drepper  <drepper@redhat.com>

	* locale/programs/charmap.c (charmap_read): Remove erronous free
	call.

	* sysdeps/i386/fpu/s_cosf.S: Domain of opcode is not large enough
	so test for overflow and handle it.
	* sysdeps/i386/fpu/s_sinf.S: Likewise.
	* sysdeps/i386/fpu/s_tanf.S: Likewise.
	Patch by Miloslav Trmač <mitr@volny.cz> (PR libc/1563).

	* iconvdata/Makefile (modules): Add UTF-16.
	(distribute): Add utf-16.c.
	* iconvdata/gconv-modules: Add entries for UTF-16, UTF-16BE, and
	UTF-16LE.
	* iconvdata/utf-16.c: New file.
	* iconv/gconv_builtin.h: Remove UTF-16 entries here.
	* iconv/gconv_simple.c: Remove conversion functions to and from UTF-16.
	PR libc/1580 and libc/1581.

	* iconv/skeleton.c: Increment __invocation_counter after every call
	to the loops.

2000-02-12  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/i386/msgctl.c (__new_msgctl): Move errno
	declaration to place where it's needed to avoid compiler warning.
	* sysdeps/unix/sysv/linux/i386/semctl.c (__new_semctl): Likewise.

2000-02-12  Ulrich Drepper  <drepper@redhat.com>

	* locale/weightwc.h (findidx): Correct find index value.

	* locale/nl_langinfo.h: Add casts to prevent warnings.

	* wctype/iswctype_l.c: Use correct types for mapped data.
	* wctype/wcfuncs.c: Add one more comment for clarification.
	* wctype/wcfuncs_l.c: Use __ctype32_tolower and __ctype32_toupper.
	* wctype/wctrans.c: Likewise.

2000-02-12  Andreas Jaeger  <aj@suse.de>

	* sysdeps/mips/dl-machine.h (__start): Rewritten for 2.2 startup
	conventions.
	(elf_machine_rel): Use R_MIPS_REL32 for RESOLVE.
	(elf_machine_runtime_setup,elf_machine_got_rel): Move at end of
	file and make dependend on RESOLVE.
	(ELF_MACHINE_RUNTIME_TRAMPOLINE): Fix arguments to _dl_lookup_symbol.
	(RESOLVE_GOTSYM): Fix arguments to _dl_lookup_symbol.

2000-02-11  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/unix/sysv/linux/i386/shmctl.c: Fix handling of save_errno.

	* locale/langinfo.h: Make CRNCYSTR a separate entry instead of an
	alias for CURRENCY_SYMBOL.
	* locale/programs/ld-monetary.c: Add support to write out CRNCYSTR
	information.  [PR libc/1583].

2000-02-08  Shinya Hanataka  <hanataka@abyss.rim.or.jp>

	* locale/weightwc.h: Fix problem with collating-element.

	* locale/programs/ld-collate.c (collate_finish): Output wide
	character collating-symbol, which has no wide strings.

	* locale/programs/ld-collate.c (collate_output): Fix problem with
	wide character collating-element.

2000-02-09  Andreas Jaeger  <aj@suse.de>

	* time/strptime.c (strptime_internal): Fix pointer dereference.
	Patch by Juergen Heinzl <juergen@monocerus.demon.co.uk>, closes PR
	libc/1591.

2000-02-08  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/alpha/msgctl.c: New file.
	* sysdeps/unix/sysv/linux/alpha/semctl.c: New file.
	* sysdeps/unix/sysv/linux/alpha/shmctl.c: New file.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list (msgctl, semctl,
	shmctl): Make them EXTRA as __old_* and as GLIBC_2.0 symbols.
	* sysdeps/unix/sysv/linux/alpha/Makefile: Add oldmsgctl, oldsemctl
	and oldshmctl to sysdep-routines.

2000-02-08  Andreas Jaeger  <aj@suse.de>

	* locale/programs/locale.c (write_locales): Fix handling of
	whitespace lines.
	Fixes PR libc/1588, reported by Miroslav Holcak
	<miroslav.holcak@vitkovice.cz>.

2000-02-07  Thorsten Kukuk  <kukuk@suse.de>

	* config.make.in: Add infodir.
	* sysdeps/unix/sysv/linux/sparc/bits/termios.h: Sync with kernel
	header files.

2000-02-11  Ulrich Drepper  <drepper@redhat.com>

	* posix/getopt.c: Suppress messages if first character of
	optstring is a colon (PR libc/1584).

	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h: Define ELF_* constants
	and elf_* types to interpret values passed up from the kernel.
	Patch by Franz Sirl <Franz.Sirl-kernel@lauterbach.com>.

	* locale/nl_langinfo.c: Correct return value in error case.  Don't
	set errno (PR libc/1582).
	* manual/locale.texi: Update to reflect change.

2000-02-02  Andreas Schwab  <schwab@suse.de>

	* malloc/Makefile (distribute): Add memprof.h.
	* malloc/memprof.c: Move definition of GETSP and GETTIME to new
	header memprof.h.
	* sysdeps/generic/memprof.h: New file.
	* sysdeps/alpha/memprof.h: New file.
	* sysdeps/i386/memprof.h: New file.
	* sysdeps/m68k/memprof.h: New file.
	* sysdeps/mips/memprof.h: New file.
	* sysdeps/powerpc/memprof.h: New file.
	* sysdeps/sparc/memprof.h: New file.

2000-02-01  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/getresgid.c: Move...
	* sysdeps/unix/sysv/linux/i386/getresgid.c: ...here.
	(getresgid): Use getresgid32 if __libc_missing_32bit_uids
	is -1 or 0.
	* sysdeps/unix/sysv/linux/getresuid.c: Move...
	* sysdeps/unix/sysv/linux/i386/getresuid.c: ...here.
	(getresuid): Use getresuid32 if __libc_missing_32bit_uids
	is -1 or 0.
	* sysdeps/unix/sysv/linux/i386/getuid.c: Document new tristate
	__libc_missing_32bit_uids.
	(__getuid): Use 32bit uid syscall if __libc_missing_32bit_uids is
	-1 or 0.
	* sysdeps/unix/sysv/linux/i386/chown.c (__real_chown): Likewise.
	* sysdeps/unix/sysv/linux/i386/fchown.c (__fchown): Likewise.
	* sysdeps/unix/sysv/linux/i386/getegid.c (__getegid): Likewise.
	* sysdeps/unix/sysv/linux/i386/geteuid.c (__geteuid): Likewise.
	* sysdeps/unix/sysv/linux/i386/getgroups.c (__getgroups): Likewise.
	* sysdeps/unix/sysv/linux/i386/getgid.c (__getgid): Likewise.
	* sysdeps/unix/sysv/linux/i386/lchown.c (__lchown): Likewise.
	* sysdeps/unix/sysv/linux/i386/setfsgid.c (setfsgid): Likewise.
	* sysdeps/unix/sysv/linux/i386/setfsuid.c (setfsuid): Likewise.
	* sysdeps/unix/sysv/linux/i386/setgid.c (__setgid): Likewise.
	* sysdeps/unix/sysv/linux/i386/setgroups.c (setgroups): Likewise.
	* sysdeps/unix/sysv/linux/i386/setregid.c (__setregid): Likewise.
	* sysdeps/unix/sysv/linux/i386/setresgid.c (setresgid): Likewise.
	* sysdeps/unix/sysv/linux/i386/setresuid.c (__setresuid): Likewise.
	* sysdeps/unix/sysv/linux/i386/setreuid.c (__setreuid): Likewise.
	* sysdeps/unix/sysv/linux/i386/setuid.c (__setuid): Likewise.
	* sysdeps/unix/sysv/linux/m68k/chown.c (__chown): Likewise.
	* sysdeps/unix/sysv/linux/arm/getresuid.c: New file.
	* sysdeps/unix/sysv/linux/arm/getresgid.c: New file.
	* sysdeps/unix/sysv/linux/arm/msgctl.c: New file.
	* sysdeps/unix/sysv/linux/arm/semctl.c: New file.
	* sysdeps/unix/sysv/linux/arm/shmctl.c: New file.
	* sysdeps/unix/sysv/linux/i386/msgctl.c: New file.
	* sysdeps/unix/sysv/linux/i386/semctl.c: New file.
	* sysdeps/unix/sysv/linux/i386/shmctl.c: New file.
	* sysdeps/unix/sysv/linux/m68k/getresgid.c: New file.
	* sysdeps/unix/sysv/linux/m68k/getresuid.c: New file.
	* sysdeps/unix/sysv/linux/m68k/msgctl.c: New file.
	* sysdeps/unix/sysv/linux/m68k/semctl.c: New file.
	* sysdeps/unix/sysv/linux/m68k/shmctl.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/msgctl.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/semctl.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/shmctl.c: New file.
	* sysdeps/unix/sysv/linux/mips/syscalls.list (getresuid):
	Make syscall directly, no stubs needed.
	(getresgid): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list (getresuid):
	Likewise.
	(getresgid): Likewise.

2000-02-11  Ulrich Drepper  <drepper@redhat.com>

	* iconvdata/gconv-modules: Add aliases CN-GB and CN-BIG5.
	Reported by Bruno Haible <haible@ilog.fr>.

	* stdio-common/printf-parse.h (parse_one_spec): Set wide elements.

	* stdio-common/printf_fp.c: Truely support wide characater output.
	Finally handle decimal points and thousands separator characters
	correctly for multibyte output.
	* stdio-common/printf_size.c: Likewise.
	* sysdeps/generic/printf_fphex.c: Likewise.
	* sysdeps/ieee754/ldbl-96/printf_fphex.c: Likewise.

	* stdio-common/vfscanf.c: Implement I modifier for numbers to read
	locale dependent digits.

	* locale/C-monetary.c (_nl_C_LC_MONETARY): Change wide character
	decimal point and thousands separator values to wide characters from
	wide character strings.
	* locale/C-numeric.c (_nl_C_LC_NUMERIC): Likewise.

	* locale/indigitswc.h: Dereference wcdigits array elements.

2000-02-03  Jakub Jelinek  <jakub@redhat.com>

	* stdlib/canonicalize.c (canonicalize): Zero terminate
	path to copy on error.

2000-02-01  Cristian Gafton  <gafton@redhat.com>

	* misc/syslog.c (closelog): Reset LogType to SOCK_DGRAM.

2000-01-31  Philip Blundell  <philb@gnu.org>

	* sysdeps/arm/fpu/fpu_control.h (_FPU_DEFAULT): Set the AC bit.

2000-01-31  Andreas Jaeger  <aj@suse.de>

	* intl/Makefile (generated): msgs.h is generated.

	* localedata/Makefile (generated-dirs): Add de_DE.437.

2000-01-31  Jakub Jelinek  <jakub@redhat.com>

	* config.make.in: Allow default localedir to come from configure.
	* configure.in: Export libc_cv_localedir.
	* sysdeps/unix/sysv/linux/configure.in: For sparc64, put locale
	stuff into $exec_prefix/lib/locale because it can be shared between
	32bit and 64bit libraries.
	* configure: Rebuilt.
	* sysdeps/unix/sysv/linux/configure: Rebuilt.

2000-01-31  Andreas Jaeger  <aj@suse.de>

	* inet/tst-network.c: New file.
	* inet/Makefile (tests): Add tst-network.

	* inet/inet_net.c (inet_network): Don't overwrite memory or allow
	to great last digits.

2000-02-10  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/clone.S: Rewritten.
	Based on a patch by Hiroyuki Machida <machida@sm.sony.co.jp>.

2000-02-09  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/sys/syscall.h: Add new syscalls.

	* sysdeps/unix/sysv/linux/mips/syscalls.list: Add missing syscalls.

2000-02-08  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/sigcontextinfo.h (GET_PC): Fix typo.

	* sysdeps/unix/sysv/linux/mips/register-dump.h (register_dump):
	Make it compile.

	* sysdeps/unix/sysv/linux/mips/bits/termios.h: Remove members
	c_ispeed and c_ospeed which are not implemented.

	* sysdeps/unix/sysv/linux/mips/pwrite64.c: Define __libc_* variant
	for cancelation wrapper; use __ASSUME_PWRITE_SYSCALL macro.
	* sysdeps/unix/sysv/linux/mips/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/pread.c: Likewise.

2000-02-05  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/bits/mman.h (MS_SYNC): 0 will not
	work - set to 4 in accordance with changes made in the Linux/MIPS
	kernel.  Using MS_SYNC on older kernels with MS_SYNC == 0 doesn't
	actually work.

2000-02-04  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/bits/mman.h: Use correct values for
	the defines.

2000-02-03  Andreas Jaeger  <aj@suse.de>

	* sysdeps/mips/abort-instr.h: New file.

	* sysdeps/unix/sysv/linux/mips/sigcontextinfo.h: New file.

	* sysdeps/unix/sysv/linux/mips/register-dump.h: New file.

	* sysdeps/mips/stackinfo.h: New file.

2000-02-01  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/syscalls.list: Remove duplicates.

	* sysdeps/unix/sysv/linux/mips/lxstat.c: Removed, we can use the
	generic function.
	* sysdeps/unix/sysv/linux/mips/fxstat.c: Likewise.

	* sysdeps/unix/sysv/linux/mips/init-first.h: New file, from Ralf
	Bächle <ralf@gnu.org>.

	* sysdeps/unix/sysv/linux/mips/brk.c: New file.

	* sysdeps/unix/sysv/linux/mips/sys/ucontext.h: Add missing ints.

	* sysdeps/mips/elf/start.S: Rewritten for __libc_start_main.

2000-01-31  Andreas Jaeger  <aj@suse.de>

	* inet/inet_net.c (inet_network): Synch with bind 8.2.2.  Fixes PR
	libc/1567.

2000-01-30  Ulrich Drepper  <drepper@redhat.com>

	* sysdeps/alpha/fpu/feholdexcpt.c: Correct return value according to
	the standard.
	* sysdeps/alpha/fpu/fesetround.c: Likewise.
	* sysdeps/arm/fpu/feholdexcpt.c: Likewise.
	* sysdeps/arm/fpu/fesetround.c: Likewise.
	* sysdeps/generic/feholdexcpt.c: Likewise.
	* sysdeps/generic/fesetround.c: Likewise.
	* sysdeps/i386/fpu/feholdexcpt.c: Likewise.
	* sysdeps/i386/fpu/fesetround.c: Likewise.
	* sysdeps/m68k/fpu/feholdexcpt.c: Likewise.
	* sysdeps/m68k/fpu/fesetround.c: Likewise.
	* sysdeps/mips/fpu/fesetround.c: Likewise.
	* sysdeps/powerpc/fpu/feholdexcpt.c: Likewise.
	* sysdeps/powerpc/fpu/fesetround.c: Likewise.
	* sysdeps/sparc/fpu/feholdexcpt.c: Likewise.
	* sysdeps/sparc/fpu/fesetround.c: Likewise.
	Patch by Miloslav Trmač <mitr@volny.cz>.

	* locale/programs/ld-collate.c (struct locale_collate_t): Change
	type of plane_size and plane_cnt to uint32_t.
	Reported by Jakub Jelinek.

2000-01-29  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.h
	(SYSCALL_ERROR_HANDLER): Optimize.
	(__SYSCALL_STRING, __SYSCALL_CLOBBERS): Define.
	Include linux/sparc/sysdep.h.
	Use a different guard define than linux/sparc/sysdep.h.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Remove
	stubs for inlined syscalls.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.h
	(SYSCALL_ERROR_HANDLER): Optimize.
	(__SYSCALL_STRING, __SYSCALL_CLOBBERS): Define.
	Include linux/sparc/sysdep.h.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Remove
	stubs for inlined syscalls.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c (__sigaction):
	Use INLINE_SYSCALL.
	* sysdeps/unix/sysv/linux/sparc/sparc64/Makefile: Remove.
	* sysdeps/unix/sysv/linux/sparc/sysdep.h: New file.

2000-01-29  Ulrich Drepper  <drepper@redhat.com>

	* locale/loadlocale.c (_nl_load_locale): Optimize a bit.  Pretty
	print.  Add checks for _POSIX_MMAPPED_FILES where necessary.
	(_nl_unload_locale): If locale data was mmapped use munmap.

2000-01-29  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/i386/sys/io.h: Add missing ints, use
	_EXTERN_INLINE, compile inline assembler functions only with gcc.

2000-01-29  Ulrich Drepper  <drepper@redhat.com>

	* catgets/catgets.c (catopen): Handle NL_CAT_LOCALE correctly.
	* catgets/gencat.c (read_input_file): Remove messages correctly.
	* catgets/open_catalog.c (__open_catalog): Handle trailing colons and
	adjacent colons correctly.  Correct loops to read territory and
	and codeset part.
	Patches by Geoff Clare <gwc@unisoft.com> (PR libc/1559).

	* rt/aio_misc.c (get_elem): Assign pointer to new row to correct
	pool entry.
	Patch by Jens Moeller <jens.moeller@waii.com> (PR libc/1558).

2000-01-28  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/arm/Versions: Export the new *rlimit
	interface with symbol version GLIBC_2.2.
	* sysdeps/unix/sysv/linux/i386/Versions: Likewise.
	* sysdeps/unix/sysv/linux/i386/getrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setrlimit.c: Likewise.

2000-01-27  Scott Bambrough  <scottb@netwinder.org>

	* sysdeps/unix/sysv/linux/arm/Makefile: Backout rlimit changes for
	resource directory.
	* sysdeps/unix/sysv/linux/arm/syscalls.list: Backout changes for
	versioning setrlimit and getrlimit.

2000-01-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/powerpc/fpu/libm-ulps: Renamed to ...
	* sysdeps/powerpc/fpu/libm-test-ulps: ...this.

2000-01-27  Ruediger Oertel  <ro@suse.de>

	* sysdeps/unix/sysv/linux/i386/sys/io.h: Change "::" to ": :" for g++.

2000-01-29  Ulrich Drepper  <drepper@redhat.com>

	* locale/programs/ld-numeric.c (numeric_output): Increment cnt in
	correct place to avoid uninitialized memory passed to writev.

	* locale/programs/ld-monetary.c (STR_ELEM_WC): Fix test for too
	long string in definition.Only enable returning wide character
	strings if really needed.
	* locale/programs/ld-numeric.c (STR_ELEM): Likewise.

	* configure.in: Add check for recent enough sed version.

2000-01-28  Ulrich Drepper  <drepper@redhat.com>

	* stdio-common/vfprintf.c [COMPILE_WPRINT] (_i18n_itoa_word,
	_i18n_itoa): Fix parameter lists.

	* locale/C-monetary.c: Add initializers for new fields.
	* locale/C-numeric.c: Likewise.
	* locale/Makefile (distribute): Add indigits.h, indigitswc.h,
	outdigits.h, and outdigitswc.h.
	* locale/langinfo.h: Add _NL_MONETARY_DECIMAL_POINT_WC,
	_NL_MONETARY_THOUSANDS_SEP_WC, _NL_NUMERIC_DECIMAL_POINT_WC,
	and _NL_NUMERIC_THOUSANDS_SEP_WC.
	* locale/indigits.h: New file.
	* locale/indigitswc.h: New file.
	* locale/outdigits.h: New file.
	* locale/outdigitswc.h: New file.
	* locale/programs/ld-monetary.c: Write out decimal point and
	thousands separator info in wide character form.
	* locale/programs/ld-numeric.c: Likewise.
	* stdio-common/Makefile (routines): Add _i18n_itoa and _i18n_itowa.
	(distribute): Add _i18n_itoa.h and _i18n_itowa.h.
	* stdio-common/_i18n_itoa.c: New file.
	* stdio-common/_i18n_itoa.h: New file.
	* stdio-common/_i18n_itowa.c: New file.
	* stdio-common/_i18n_itowa.h: New file.
	* stdio-common/printf-parse.h: Parse 'I' flag.
	* stdio-common/printf.h (struct printf_info): Add i18n field.
	* stdio-common/vfprintf.c: Implement 'I' flag to print using locales'
	outdigits.

2000-01-27  Geoff Keating  <geoffk@cygnus.com>

	* csu/Makefile ($(objpfx)version-info.h): Don't use echo -n
	unnecessarily.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_STAT64_SYSCALL, __ASSUME_TRUNCATE64_SYSCALL,
	__ASSUME_NEW_GETRLIMIT_SYSCALL): Define on powerpc for kernels >=
	2.3.35.

	* sysdeps/unix/sysv/linux/powerpc/bits/resource.h: New file.
	* sysdeps/unix/sysv/linux/powerpc/ftruncate64.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/getrlimit.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/getrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/mmap64.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/setrlimit.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/setrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list: Add
	s_fstat64, s_ftruncate64, s_lstat64, s_mmap2, s_stat64,
	s_truncate64.
	* sysdeps/unix/sysv/linux/powerpc/truncate64.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/Versions: New file.

	* sysdeps/unix/sysv/linux/powerpc/brk.S [!PIC]: Don't access
	__curbrk off the small data area register.  Reported by
	Andrew Haley <aph@pasanda.cygnus.co.uk>.

2000-01-26  Andreas Jaeger  <aj@suse.de>

	* Make-dist (+sysdep-tscrs): Add libm-test-ulps.

2000-01-26  Ulrich Drepper  <drepper@cygnus.com>

	* locale/Makefile (distribute): Remove nonexisting files.
	* sysdeps/powerpc/Dist: Move FPU specific files to...
	* sysdeps/powerpc/fpu/Dist: ...here.  New file.
	* nss/Makefile: Distribute files for new libdb interface.
	* math/Makefile (distribute): Add README.libm-test.
	Patch by Andreas Jaeger.

2000-01-26  David McCann  <david.mccann@alcatel.at>

	* libio/libioP.h [!_G_HAVE_MMAP]: Define ALLOC_WBUF.

2000-01-25  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/configure.in: Set CPPFLAGS for kernel
	version check since we're using cpp.

2000-01-26  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list (getresgid):
	Fix a typo.

2000-01-26  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/i386/lxstat.c (__lxstat): Avoid warning
	about unitialised variable kbuf.
	* sysdeps/unix/sysv/linux/i386/xstat.c (__xstat): Likewise.
	* sysdeps/unix/sysv/linux/i386/fxstat.c (__fxstat): Likewise.

2000-01-26  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c (check_duplicate): Fix printing of error
	messages.
	(collate_read): Remove unnecessary `if'.

2000-01-25  Ulrich Drepper  <drepper@cygnus.com>

	* libio/fileops.c (_IO_new_file_open): Recognize ,ccs= in mode string
	and load appropriate conversions.
	* libio/iofwide.c (__libio_codecvt): Renamed from libio_codecvt and
	made global.
	* libio/libioP.h: Declare __libio_codecvt.
	* manual/stdio.texi: Document ,ccs= option for fopen.
	* wcsmbs/wcsmbsload.c (__wcsmbs_named_conv): New function.
	* wcsmbs/wcsmbsload.h (__wcsmbs_named_conv): Declare.

	* libio/iofclose.c: Free conversion data if stream was wide-oriented.

	* sysdeps/unix/sysv/linux/i386/Dist: Add sys/io.h.

	* sysdeps/unix/sysv/linux/Dist: Remove sys/io.h.

	* posix/fnmatch_loop.c: Fix problem with FNM_LEADING_DIR.
	* posix/testfnm.c: Add a few more tests.  Rearrange test output.

2000-01-25  Andreas Schwab  <schwab@suse.de>

	* posix/testfnm.c: Add new test case.  Use FNM_PATHNAME instead of
	FNM_FILE_NAME consistently.

2000-01-25  Ulrich Drepper  <drepper@cygnus.com>

	* posix/fnmatch.c: Define STRCOLL appropriately for the loop
	definition.
	* posix/fnmatch_loop.c: Undefine STRCOLL.

	* sysdeps/unix/sysv/linux/i386/fxstat.c: Correct code to handle
	kernels with stat64 support.
	* sysdeps/unix/sysv/linux/i386/lxstat.c: Likewise
	* sysdeps/unix/sysv/linux/i386/xstat.c: Likewise.
	Patch by SL Baur <steve@xemacs.org>.

	* string/strxfrm.c: Don't count in the terminating NUL byte/word.

2000-01-24  Paul Eggert  <eggert@twinsun.com>

	* posix/fnmatch_loop.c (FCT): Use locale's collating sequence when
	deciding whether a character falls within a character range.

2000-01-24  Paul Eggert  <eggert@twinsun.com>

	* posix/fnmatch_loop.c (FCT): When matching [A-Z] and folding case,
	lower-case A too.

2000-01-24  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/unix/sysv/linux/i386/syscalls.list: Remove old[gs]etrlimit.

2000-01-23  Paul Eggert  <eggert@twinsun.com>

	* posix/regex.c (GET_UNSIGNED_NUMBER): Allow only ASCII digits.

2000-01-23  Paul Eggert  <eggert@twinsun.com>

	* posix/regex.c (compile_range): When matching a character
	range, use the current collating sequence, as POSIX requires.

2000-01-25  Ulrich Drepper  <drepper@cygnus.com>

	* string/argz-stringify.c: Handle case of missing \0 at the end of
	the given argz.

2000-01-24  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/hstcache.c: Don't count in mapped IPv6 addresses in total
	size anymore.

	* locale/programs/ld-collate.c (collate_output): Also handle
	IGNOREd characters in the simple way when generating the multibyte
	table.

	* locale/programs/ld-ctype.c (allocate_arrays): Move codeset_name
	handling to ...
	(ctype_finish): ...here.  Check for missing codeset name.

	* sysdeps/unix/sysv/linux/Dist: Add ipc_priv.h.
	* sysdeps/unix/sysv/linux/alpha/Dist: Likewise.

2000-01-24  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/bits/ipc.h: Move private decls...
	* sysdeps/unix/sysv/linux/ipc_priv.h: ...here.
	* sysdeps/unix/sysv/linux/bits/msq.h: Move private decls...
	* sysdeps/unix/sysv/linux/msgctl.c: ...here.  Include ipc_priv.h.
	* sysdeps/unix/sysv/linux/bits/sem.h: Move private decls...
	* sysdeps/unix/sysv/linux/semctl.c: ...here.  Include ipc_priv.h.
	* sysdeps/unix/sysv/linux/bits/shm.h: Move private decls...
	* sysdeps/unix/sysv/linux/shmctl.c: ...here.  Include ipc_priv.h.
	* sysdeps/unix/sysv/linux/alpha/bits/ipc.h: Move private decls...
	* sysdeps/unix/sysv/linux/alpha/ipc_priv.h: ...here.
	* sysdeps/unix/sysv/linux/alpha/bits/msq.h: Remove private decls.
	* sysdeps/unix/sysv/linux/alpha/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/msq.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/sem.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/shm.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgctl.c: Include ipc_priv.h.
	* sysdeps/unix/sysv/linux/sparc/sparc64/semctl.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/shmctl.c: Likewise.
	* sysdeps/unix/sysv/linux/msgget.c: Likewise.
	* sysdeps/unix/sysv/linux/msgrcv.c: Likewise.
	* sysdeps/unix/sysv/linux/msgsnd.c: Likewise.
	* sysdeps/unix/sysv/linux/semget.c: Likewise.
	* sysdeps/unix/sysv/linux/semop.c: Likewise.
	* sysdeps/unix/sysv/linux/shmat.c: Likewise.
	* sysdeps/unix/sysv/linux/shmdt.c: Likewise.
	* sysdeps/unix/sysv/linux/shmget.c: Likewise.

2000-01-24  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/arm/bits/resource.h: New file.
	* sysdeps/unix/sysv/linux/arm/Makefile: Remove oldsetrlimit64.c.
	* sysdeps/unix/sysv/linux/i386/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/i386/Dist: Likewise.
	* sysdeps/unix/sysv/linux/arm/Versions: Remove
	setrlimit64@GLIBC_2.1.3.
	* sysdeps/unix/sysv/linux/i386/Versions: Likewise.
	* sysdeps/unix/sysv/linux/arm/oldsetrlimit64.c: Remove.
	* sysdeps/unix/sysv/linux/i386/oldsetrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/oldgetrlimit64.c: Call __new_getrlimit,
	so that setrlimit64@GLIBC_2.1 can report limits above 2G.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list (getrlimit,
	setrlimit): Remove syscall stubs, add normal syscalls.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list (setrlimit):
	Remove syscall stub.

2000-01-22  Andreas Jaeger  <aj@suse.de>

	* localedata/tst-locale.sh: Enable test for de_DE.437.

2000-01-23  Ulrich Drepper  <drepper@cygnus.com>

	* string/Versions: Export __strndup.

2000-01-23  Philip Blundell  <philb@gnu.org>

	Add basic support for RPC over IPv6:
	* sunrpc/rpc/svc.h (struct SVCXPRT): Use `struct sockaddr_storage'
	for remote address.
	(svcudp6_create, svcudp6_bufcreate, svctcp6_create): New
	prototypes.
	* sunrpc/rpc/clnt.h (clnttcp6_create, clntudp6_create,
	clntudp6_bufcreate): New prototypes.
	* inet/netinet/in.h (bindresport6): Likewise.
	* sunrpc/Makefile (routines): Add svc_tcp6, svc_udp6, bindrsvprt6.
	* sunrpc/Versions: Add svcfd6_create, svctcp6_create,
	svcudp6_create, svcudp6_bufcreate, svcudp6_enablecache,
	bindresvport6 for GLIBC_2.2.
	* sunrpc/rpc_main.c: Support `tcp6' and `udp6' transport types.
	* sunrpc/rpc_svcout.c: Likewise.
	* sunrpc/svc_tcp.c (rendezvous_request): Use memcpy rather than
	simple assignment when copying addresses.
	* sunrpc/svc_udp.c (cache_get): Likewise.
	* sunrpc/svc_unix.c (rendezvous_request): Likewise.
	* sunrpc/bindrsvprt6.c, sunrpc/clnt_tcp6.c, sunrpc/clnt_udp6.c,
	sunrpc/svc_tcp6.c, sunrpc/svc_udp6.c: New files.

2000-01-05  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/arm/mmap64.S: Correct check for ENOSYS.

2000-01-23  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/i386/fxstat.c (__fxstat): Pass right
	parameter to fstat calls.

2000-01-18  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/generic/bits/socket.h
	(__ss_aligntype, struct sockaddr_storage): Make these like Linux
	version, replacing old type name `__ss_align'.

2000-01-05  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/generic/lseek64.c (__libc_lseek64): Renamed from __lseek64.
	(__lseek64, lseek64): Make these weak aliases for __libc_lseek64.
	* sysdeps/mach/hurd/lseek.c (__libc_lseek): Renamed from __lseek.
	(__lseek, lseek): Make these weak aliases for __libc_lseek.
	* sysdeps/mach/hurd/fcntl.c (__libc_fcntl): Renamed from __fcntl.
	(__fcntl, fcntl): Make these weak aliases for __libc_fcntl.
	* sysdeps/mach/hurd/open.c (__libc_open): Renamed from __open.
	(__open, open): Make these weak aliases for __libc_open.

	* sysdeps/generic/bits/socket.h (enum __socket_type): Remove
	trailing comma.
	(anonymous enum for MSG_*): Likewise.
	(anonymous enum for SO_*): Likewise.

2000-01-23  Ulrich Drepper  <drepper@cygnus.com>

	* string/bits/string2.h: Fix typo (__GNU_SOURCE -> __USE_GNU)
	(PR libc/1553).

2000-01-08  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/setitimer.c (quantize_timeval): New function.
	(setitimer_locked): Use it to quantize the timer values.  Use
	quantized timer values to check if the timeout changed.

2000-01-22  Andreas Jaeger  <aj@suse.de>

	* sunrpc/rpc/svc.h: Fix description for svc_register.

2000-01-23  Mark Kettenis  <kettenis@gnu.org>

	* inet/rexec.c (rexec_af): Use SA_LEN instead of __libc_sa_len.

2000-01-22  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/xdr_rec.c: Don't set frag_sent if no more data,
	fixes part 2 of bug 1549.
	* sunrpc/rpc_des.h: Remove unused defines.

2000-01-22  Mark Kettenis  <kettenis@gnu.org>

	* intl/Makefile ($(objpfx)msgs.h): Do $(make-target-directory) first.

2000-01-22  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Remove sys/io.h.
	* sysdeps/unix/sysv/linux/alpha/Makefile: Add sys/io.h.
	* sysdeps/unix/sysv/linux/arm/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/i386/Makefile: Likewise.
	* sysdeps/unix/sysv/linux/sys/io.h: Move from here ...
	* sysdeps/unix/sysv/linux/i386/sys/io.h: ... to here, add inb, outb
	and other inline functions for port access.
	* sysdeps/unix/sysv/linux/alpha/sys/io.h: Add prototypes for port
	access functions.

2000-01-23  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_simple.c: Fix two problems in UTF-8 decoder.
	Patch by Bruno Haible <haible@ilog.fr>.

2000-01-05  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/errnos.awk: Rediddle to collect lines and print
	them all at the end, eliding the final comma.
	* sysdeps/mach/hurd/bits/errno.h: Regenerated.

2000-01-21  Ulrich Drepper  <drepper@cygnus.com>

	* intl/libintl.h: Add format_arg attributes to declarations of new
	functions.

	* intl/Makefile (routines): Add dcigettext, dcngettext, dngettxt,
	ngettext, and plural.
	(distribute): Add plural.y, po2test.sed, and tst-gettext.sh.
	(test-srcs): Add tst-gettext.
	(before-compile): Add $(objpfx)msgs.h.
	Add rules for plural.c and msgs.h generation and running tst-gettext.\
	* intl/Versions [GLIBC_2.2]: Add __dcngettext, dcngettext, dngettext,
	and ngettext.
	* intl/dcgettext.c: Move most code into dcigettext.c.  Add call
	dcigettext with appropriate parameters.
	* intl/dcigettext.c: New file.
	* intl/dcngettext.c: New file.
	* intl/dngettext.c: New file.
	* intl/ngettext.c: New file.
	* intl/gettextP.h (struct expression): Define.
	(struct loaded_domain): Add plural and nplurals members.
	Add prototypes for new internal functions.
	* intl/libintl.h: Declare new functions.  Add optimizations for them.
	* intl/loadinfo.h: Add new parameter to _nl_find_msg declaration.
	* intl/loadmsgcat.c (_nl_load_domain): Search for plural information in
	header entry and parse and store the expression.
	* intl/plural.y: New file.
	* intl/po2test.sed: New file.
	* intl/tst-gettext.c: New file.
	* intl/tst-gettext.sh: New file.
	* manual/message.texi: Document new interfaces.

	* intl/gettext.c: Call __dcgettext directly.

2000-01-20  Ulrich Drepper  <drepper@cygnus.com>

	* manual/getopt.texi (Using the getopt function): Fix description of
	return value for format string starting with '-' (PR libc/1551).
	Patch by Raúl Núñez de Arenas Coronado <dervishd@jazzfree.com>

	* sunrpc/clnt_perr.c (rpc_errlist): Fix index for RPC_PROGVERSMISMATCH.
	Patch by jens.moeller@westgeo.com (PR libc/1550).

	* locale/programs/ld-collate.c (struct element_t): Add wclast
	and compute it where necessary.
	(collate_output): Insert indirect references in the right order.

	* math/Makefile (tests): Add test-misc.
	* math/test-misc.c: New file.

2000-01-19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/ieee754/ldbl-96/s_modfl.c: Correct handling of arguments
	with exponent >31 and < 63 (PR libc/1548).

	* locale/programs/ld-collate.c (output_weightwc): Return index
	measured in words, not bytes.  Don't write out words for ignored
	characters.
	(collate_output): Correct various problems with alignment in the
	output file.
	* locale/weight.h: Adjust for last change in ld-collate.c of adding
	alignment padding.

	* stdlib/strfmon.c: Don't report an error if final NUL is at the
	end of the buffer.  Set errno correctly if floating-point number
	would overflow buffer.

	* posix/regex.h: Update comment of RE_SYNTAX_POSIX_MINIMAL_EXTENDED.

	* locale/weight.h (findidx): Little optimization.  Correctly return
	offset in indirect table.
	* locale/programs/ld-collate.c (struct element_t): Add mblast
	and compute it where necessary.
	(insert_weights): Correctly handle missing weights in ellipsis
	expression.
	(handle_ellipsis): Correctly enqueue new element.
	(collate_output): Insert indirect references in the right order.

2000-01-18  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/mbrtowc.c: Create temporary state object if no output is
	written.
	* wcsmbs/mbsrtowcs.c: Likewise.
	* wcsmbs/wcrtomb.c: Likewise.
	* wcsmbs/wcsrtombs.c: Likewise.

	* wcsmbs/wcrtomb.c: Compute result correctly for successful call
	with s == NULL.

	* wcsmbs/mbsrtowcs.c: Compute return value correctly after change
	in gconv function.

	* wcsmbs/mbrtowc.c: Don't set errno if byte sequence is only
	incomplete but correct.

	* locale/programs/charmap.c: NUL-terminate names of generated
	entries for ellipsis.

2000-01-18  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/i386/lxstat.c: New file, handles 32bit UIDs.
	* sysdeps/unix/sysv/linux/i386/fxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/xstat.c (__xstat): Move
	_STAT_VER_KERNEL handling up; don't save errno.
	* sysdeps/unix/sysv/linux/arm/fxstat.c: New file.
	* sysdeps/unix/sysv/linux/arm/lxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/xstat.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/fxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/lxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/xstat.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/fxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/lxstat.c: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/xstat.c: Likewise.

2000-01-18  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/loop.c (COUNT_CONVERTED): Remove macro, comment, and all uses.
	Remove done variable and all uses.
	* iconv/skeleton.c: Update comment for *written modification.
	* iconv/gconv_int.h (__gconv): Update comment.
	Reported by Bruno Haible.

2000-01-18  Bruno Haible  <haible@ilog.fr>

	* posix/fnmatch.c (ISWCTYPE): New macro.
	(__wcschrnul): New function.
	(BTOWC): New macro. Define it instead of __btowc.
	(is_char_class) [!_LIBC]: Fix 'mstate_t' typo. Fix 2nd arg to
	wcsrtombs. Call wctype, not __wctype.
	* posix/fnmatch_loop.c (FCT): Use ISWCTYPE instead of __iswctype, and
	BTOWC instead of __btowc.

2000-01-18  Andreas Jaeger  <aj@suse.de>

	* inet/Versions: Add new functions added on 2000-01-17.

2000-01-18  Jakub Jelinek  <jakub@redhat.com>

	* dirent/dirent.h (getdentries): Correct prototype to use __off64_t.

2000-01-18  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/antarctica: Update from tzdata2000a.
	* timezone/asia: Likewise.
	* timezone/australasia: Likewise.
	* timezone/backward: Likewise.
	* timezone/northamerica: Likewise.
	* timezone/southamerica: Likewise.
	* timezone/zone.tab: Likewise.

	* nscd/connections.c (dbs): Use
	PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP for .lock.
	Pretty printing.

	* nscd/hstcache.c (cache_addhst): Don't automatically add IPv6
	address.  Suggested by Philip Blundell.

	* posix/TESTS: Fix expected result for test cases with * with no
	leading expression.

	* sysdeps/unix/sysv/linux/fstatvfs.c: Move actual code in...
	* sysdeps/unix/sysv/linux/internal_statvfs.c: ...here.  New file.
	* sysdeps/unix/sysv/linux/statvfs.c: Don't use fstatvfs since the
	open call would require read permission.
	Patch by James Antill <james@and.org>.

	* sysdeps/unix/sysv/linux/Dist: Add internal_fnmatch.c.

	* inet/getnameinfo.c: Terminate host name for NI_NOFQDN.
	* sysdeps/posix/getaddrinfo.c: Correct modifications done for
	PR1515.  Patches by Hideaki YOSHIFUJI <yoshfuji@ecei.tohoku.ac.jp>.

	* posix/regex.h (RE_SYNTAX_POSIX_EXTENDED): Add RE_CONTEXT_INVALID_OPS.
	* posix/regex.c (regex_compile): Return appropriate errors for
	unterminated brace expressions.  Detect invalid characters
	in brace expressions.
	* posix/bits/posix2_lim.h: Define RE_DUP_MAX correctly.
	* sysdeps/posix/sysconf.c: Include regex.h.
	Reported by Geoff Clare <gwc@unisoft.com> (PR libc/1522).

2000-01-17  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/getaddrinfo.c (gaih_local): If name is given and
	AI_NUMERICHOST flag is set, return an error.
	Patch by Hideaki YOSHIFUJI <yoshfuji@ecei.tohoku.ac.jp>.

	* inet/rcmd.c: Implement rcmd_af, rresvport_af, ruserok_af, and
	iruserok_af.
	* inet/rexec.c: Implement rexec_af.
	Patch by Hideaki YOSHIFUJI <yoshfuji@ecei.tohoku.ac.jp>.

	* resolv/netdb.h: Add declarations of rcmd_af, rexec_af, ruserok_af,
	and rresvport_af.

2000-01-17  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/bits/ipc.h: New file.
	* sysdeps/unix/sysv/linux/bits/sem.h: New file.
	* sysdeps/unix/sysv/linux/bits/shm.h: New file.
	* sysdeps/unix/sysv/linux/bits/msg.h: New file.
	* sysdeps/unix/sysv/linux/bits/alpha/ipc.h: Update for new ipc.
	* sysdeps/unix/sysv/linux/bits/alpha/sem.h: New file.
	* sysdeps/unix/sysv/linux/bits/alpha/shm.h: New file.
	* sysdeps/unix/sysv/linux/bits/alpha/msg.h: New file.
	* sysdeps/unix/sysv/linux/bits/sparc/ipc.h: New file.
	* sysdeps/unix/sysv/linux/bits/sparc/sem.h: New file.
	* sysdeps/unix/sysv/linux/bits/sparc/shm.h: New file.
	* sysdeps/unix/sysv/linux/bits/sparc/msg.h: New file.

	* sysdeps/unix/sysv/linux/msgctl.c (__old_msgctl):
	Renamed from msgctl.
	(__new_msgctl): New function.
	* sysdeps/unix/sysv/linux/semctl.c (__old_semctl):
	Renamed from semctl.
	(__new_semctl): New function.
	* sysdeps/unix/sysv/linux/shmctl.c (__old_shmctl):
	Renamed from shmctl.
	(__new_shmctl): New function.

	* sysdeps/unix/sysv/linux/msgget.c: Define __LIBC_IPC_INTERNAL.
	* sysdeps/unix/sysv/linux/msgrcv.c: Likewise.
	* sysdeps/unix/sysv/linux/semget.c: Likewise.
	* sysdeps/unix/sysv/linux/msgsnd.c: Likewise.
	* sysdeps/unix/sysv/linux/semop.c: Likewise.
	* sysdeps/unix/sysv/linux/shmat.c: Likewise.
	* sysdeps/unix/sysv/linux/shmdt.c: Likewise.
	* sysdeps/unix/sysv/linux/shmget.c: Likewise.

	* sysdeps/unix/sysv/linux/sparc/sparc64/semctl.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/msgctl.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/shmctl.c: New file.

	* sysdeps/unix/sysv/linux/Versions: Add msgctl, semctl, shmctl.

2000-01-17  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/seteuid.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setegid.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/Dist: Remove setres[ug]id.
	* sysdeps/unix/sysv/linux/sparc/sparc32/mmap64.c: Kill warnings.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Define needed
	syscalls.

	* sysdeps/unix/sysv/linux/pwrite64.c: Use proper prototype.
	* sysdeps/unix/sysv/linux/truncate64.c: Likewise.

	* sysdeps/unix/sysv/linux/kernel-features.h: [gs]etres[ug]id are
	available on sparc since 2.3.39.

	* sysdeps/unix/sysv/linux/execve.c: Kill warnings.

2000-01-17  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/i386/chown.c (__syscall_chown): Use proper
	prototype.
	(__real_chown): Return EINVAL if owner or group are out of the range
	-1U .. 65534.
	* sysdeps/unix/sysv/linux/i386/lchown.c (__lchown): Likewise.
	* sysdeps/unix/sysv/linux/i386/fchown.c (__fchown): Likewise.
	* sysdeps/unix/sysv/linux/i386/setresuid.c (__setresuid): Return
	EINVAL if ruid, euid or suid are out of the range -1U .. 65534.
	* sysdeps/unix/sysv/linux/i386/setresgid.c (__setresgid): Similarly.
	* sysdeps/unix/sysv/linux/i386/setreuid.c (__setreuid): Simplify.
	* sysdeps/unix/sysv/linux/i386/setregid.c (__setregid): Likewise.
	* sysdeps/unix/sysv/linux/m68k/chown.c (__syscall_chown): Use proper
	prototype.
	Don't include non-existant header.
	(__chown): Return EINVAL if owner or group are out of the range
	-1U .. 65534.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list (setresuid,
	setresgid): Inherit standard linux/syscalls.list definitions.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setresuid.c: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc32/setresgid.c: Remove.
	* sysdeps/unix/sysv/linux/syscalls.list (setresgid): Provide
	__setresgid symbol.

2000-01-17  Ulrich Drepper  <drepper@cygnus.com>

	* locale/iso-639.def: Update Hebrew, Yiddish, and Indonesian entry
	from 1989 change in ISO 639.

2000-01-12  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/xstatconv.c (xstat32_conv): New
	function; needed for 32bit uid support.

	* sysdeps/unix/sysv/linux/i386/xstat.c: New file, handles 32bit
	uids correctly.

2000-01-17  Ulrich Drepper  <drepper@cygnus.com>

	* intl/locale.alias: Add entries for galician.

	* locale/programs/ld-ctype.c (get_character): If tok_ucs4 found, first
	try to get sequence from charmap with Uxxxxxxxx name.
	(charclass_ucs4_ellipsis): Likewise.
	(charclass_charcode_ellipsis): Allow byte sequence missing.
	(read_writestring): Free allocated memory in case of an error.
	(set_class_defaults): Don't search repertoire map for wide character
	default values; we know it's UCS4.

	* locale/programs/repertoire.c (repertoire_find_value): Just return an
	error if no repertoire map was loaded.
	(repertoire_find_symbol): Likewise.
	(repertoire_find_seq): Likewise.

	* posix/fnmatch.c: Put internal_fnmatch in separate file.  Include
	twice, to define singlebyte and multibyte version.
	(fnmatch): Differentiate between singlebyte and multibyte locale and
	call appropriate internal function.
	* posix/fnmatch_loop.c: New file.
	* posix/Makefile (distribute): Add fnmatch_loop.c.

	* locale/programs/repertoire.c (repertoire_read): Don't print
	error message when repertoire map is missing.
	(repertoire_complain): Print error message for missing map, but only
	once.
	* locale/programs/repertoire.h (repertoire_complain): Add prototype.

	* locale/programs/linereader.c (get_string): Prefer getting names
	from charseq entries.  Try finding Uxxxxxxxx names in charmap
	before trying to map from repertoire.

2000-01-16  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/getgroups.c: Fix missing brace
	error in last change.
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Likewise.

	* stdlib/longlong.h: Fix typo in last patch.

2000-01-12  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_32BITUIDS):
	Added for Linux 2.3.39+.

	* sysdeps/unix/sysv/linux/getresgid.c: Support 32bit UIDs and
	32bit GIDs.
	* sysdeps/unix/sysv/linux/getresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/getgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setegid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setfsgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setfsuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setgroups.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setregid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setresgid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setresuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setreuid.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/setuid.c: Likewise.
	* sysdeps/unix/sysv/linux/setegid.c: Likewise.

	* sysdeps/unix/sysv/linux/arm/chown.c: New file.
	* sysdeps/unix/sysv/linux/arm/fchown.c: New file.
	* sysdeps/unix/sysv/linux/arm/geteuid.c: New file.
	* sysdeps/unix/sysv/linux/arm/getegid.c: New file.
	* sysdeps/unix/sysv/linux/arm/getuid.c: New file.
	* sysdeps/unix/sysv/linux/arm/getgid.c: New file.
	* sysdeps/unix/sysv/linux/arm/lchown.c: New file.
	* sysdeps/unix/sysv/linux/i386/fchown.c: New file.
	* sysdeps/unix/sysv/linux/i386/getegid.c: New file.
	* sysdeps/unix/sysv/linux/i386/geteuid.c: New file.
	* sysdeps/unix/sysv/linux/i386/getgid.c: New file.
	* sysdeps/unix/sysv/linux/i386/getuid.c: New file.
	* sysdeps/unix/sysv/linux/i386/lchown.c: New file.
	* sysdeps/unix/sysv/linux/m68k/chown.c: New file.
	* sysdeps/unix/sysv/linux/m68k/fchown.c: New file.
	* sysdeps/unix/sysv/linux/m68k/getegid.c: New file.
	* sysdeps/unix/sysv/linux/m68k/geteuid.c: New file.
	* sysdeps/unix/sysv/linux/m68k/getgid.c: New file.
	* sysdeps/unix/sysv/linux/m68k/getuid.c: New file.
	* sysdeps/unix/sysv/linux/m68k/lchown.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/chown.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/fchown.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getegid.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/geteuid.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getgid.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/getuid.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/lchown.c: New file.
	Based on a patch by Chris Wing <wingc@engin.umich.edu>.

2000-01-14  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/sys/procfs.h: New file.

2000-01-13  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/generic/backtrace.c: Include signal.h which
	sigcontextinfo.h headers are used to expect.
	* sysdeps/unix/sysv/linux/sparc/sparc32/register-dump.h
	(register_dump): Fix a typo in the printout.
	Avoid using reg_window, so that asm/ptrace.h is not necessary.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigcontextinfo.h
	(ADVANCE_STACK_FRAME): Likewise.

	* stdlib/longlong.h: Avoid using __sparc_v9__ ifdefs.
	* sysdeps/sparc/sparc32/bits/wordsize.h: Likewise.
	* sysdeps/sparc/sparc64/bits/wordsize.h: Likewise.

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Include bits/wordsize.h
	to make it clear this file depends on __WORDSIZE.
	* sysdeps/unix/sysv/linux/ftruncate64.c (__have_no_truncate64):
	Renamed from have_no_truncate64.
	* sysdeps/unix/sysv/linux/truncate64.c (__have_no_truncate64):
	Likewise.

2000-01-16  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (rpath-dirs): Remove db2.
	(dbojdir): Remove variable.

	* locale/programs/locfile.h (handle_copy): Take repertoire map
	name as parameter, not pointer to repertoire structure.
	* locale/programs/ld-address.c: Change caller.
	* locale/programs/ld-ctype.c: Likewise.
	* locale/programs/ld-identification.c: Likewise.
	* locale/programs/ld-measurement.c: Likewise.
	* locale/programs/ld-messages.c: Likewise.
	* locale/programs/ld-monetary.c: Likewise.
	* locale/programs/ld-name.c: Likewise.
	* locale/programs/ld-numeric.c: Likewise.
	* locale/programs/ld-paper.c: Likewise.
	* locale/programs/ld-telephone.c: Likewise.
	* locale/programs/ld-time.c: Likewise.

2000-01-13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/mmap64.S: Fix code generated if
	mmap2 is available when compiling but no at runtime.

2000-01-12  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/iso-ir-165.c: New file.
	* iconvdata/iso-ir-165.h: New file.
	* iconvdata/Makefile: Add rules to build libISOIR165.

	* Makefile (install): Correct passing -r parameter to ldconfig.

	* iconvdata/gconv-modules: Add aliases ISO-IR-199 and ISO-IR-203.
	Reported by Bruno Haible <haible@ilog.fr>.

2000-01-11  Andreas Schwab  <schwab@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Adjust some epsilons.

2000-01-10  Thorsten Kukuk  <kukuk@suse.de>

	* nss/getent.c: Add ipv6 support for hosts.

2000-01-05  Philip Blundell  <pb@futuretv.com>

	* sysdeps/unix/sysv/linux/arm/Versions: Add getrlimit, setrlimit,
	getrlimit64, setrlimit64 for GLIBC_2.1.3.
	* sysdeps/unix/sysv/linux/arm/syscalls.list: Add oldgetrlimit,
	oldsetrlimit.
	* sysdeps/unix/sysv/linux/arm/oldsetrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/arm/oldgetrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getrlimit64.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/setrlimit.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/getrlimit.c: Likewise.

	* sysdeps/unix/sysv/linux/arm/Makefile [subdir=resource]
	(sysdep_routines): Add oldgetrlimit64, oldsetrlimit64.
	[subdir=misc] (sysdep_headers): Add sys/elf.h.

2000-01-09  Andreas Jaeger  <aj@suse.de>

	* manual/install.texi (Tools for Compilation): Update required
	compiler version.
	(Configuring and compiling): Restore old comments about
	configparms; modify to reflect current usage.

2000-01-09  Philip Blundell  <philb@gnu.org>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't attempt name
	resolution if the hints included AI_NUMERICHOST.

2000-01-11  Andreas Schwab  <schwab@suse.de>

	* sysdeps/mips/__longjmp.c (__longjmp): Change call to abort into
	infinite loop to avoid pulling in stdio in the dynamic linker.
	* sysdeps/mips/mips64/__longjmp.c (__longjmp): Likewise.

2000-01-10  Andreas Jaeger  <aj@suse.de>

	* sysdeps/mips/dl-machine.h (elf_machine_matches_host): Follow
	change from 1999-10-07 to elf/elf.h and rename EM_MIPS_RS4_BE to
	EM_MIPS_RS3_LE.
	* sysdeps/mips/mips64/dl-machine.h: Likewise.

	* sysdeps/unix/sysv/linux/mips/sys/procfs.h: Remove greg_t,
	gregset_t, fpregset_t, and NGREG definitions.

	* sysdeps/mips/Implies: Add wordsize-32.

	* sysdeps/unix/sysv/linux/mips/bits/ioctl-types.h: Add missing
	int's.

	* sysdeps/unix/sysv/linux/mips/sys/acct.h: Remove K&R support, add
	missing int's.

	* sysdeps/unix/sysv/linux/mips/bits/errno.h: Remove K&R support.
	* sysdeps/unix/sysv/linux/mips/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/sigaction.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sys/cachectl.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sys/sysmips.h: Likewise.

2000-01-09  Philip Blundell  <philb@gnu.org>

	* sysdeps/arm/dl-machine.h (CLEAR_CACHE): System calls clobber R0.
	(dl_platform_init): Allow _dl_platform to be NULL.

	* sysdeps/unix/sysv/linux/arm/sysdep.h (UNDOARGS_5): Fix error in
	last change.

2000-01-08  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/connections.c (handle_request): Handle systems without
	SO_PEERCRED.
	(nscd_run): Likewise.

2000-01-07  Andreas Jaeger  <aj@suse.de>

	Add support for Berkeley db 3.0.x and merge db support:
	* nss/nss_db/dummy-db.h (struct db30): New.
	(struct dbc30): New.
	Added DB30* flags.

	* nss/makedb.c: Move all database routines to db-open.c.
	(main): Adjust to interface changes.
	Load database early to initialize version dependend variables.

	* nss/db-open.c: Merge database routines from makedb.c.
	Define version dependend constansts as variables.
	(load_db): Check also for db 3.
	(internal_setent): Call dbopen.
	(db_cursor): New function from makedb; handles db 3 now.
	(dbopen): New function from makedb; handles db 3.

	* nss/nss_db/db-XXX.c: Use db_notfound since the value is
	different in different DB versions.

	* nss/nss_db/nss_db.h: Add version dependend constants as
	variables, add exportet interfaces from db-open.c.

	* nss/Makefile ($(objpfx)makedb): Link against db-open.

2000-01-07  Ulrich Drepper  <drepper@cygnus.com>

	* misc/error.c: Don't use `defined _LIBC', only `_LIBC'.
	Reported by Jim Meyering.

	* time/strftime.c: Pretty printing.

2000-01-07  Andreas Jaeger  <aj@suse.de>

	* manual/socket.texi (Host Names): Fix example.
	Reported by Marco Budde <budde@telos.de>.

2000-01-06  Ulrich Drepper  <drepper@cygnus.com>

	* localedata/Makefile (install-locales): Create locale directory
	if it does not exist.

	* locale/programs/charmap.c (charmap_read): Call lr_open here and
	not in parse_charmap.  Try also the directories on the I18NPATH.
	(parse_charmap): Change accordingly.

2000-01-05  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/Dist: Distribute oldgetrlimit64.c
	and oldsetrlimit64.c.

	* sysdeps/unix/sysv/linux/arm/Dist: Distribute sys/elf.h and
	sys/procfs.h.

	* manual/texinfo.tex: Updated from latest official version.

	* debug/Makefile (distribute): Add frame.h.

2000-01-05  Philip Blundell  <philb@gnu.org>

	* sysdeps/arm/frame.h: New file.
	* sysdeps/generic/frame.h: Likewise.
	* sysdeps/generic/segfault.c (struct layout): Delete definition;
	include the above file instead.
	* sysdeps/generic/backtrace.c (struct layout): Likewise.
	(__backtrace): Use ADVANCE_STACK_FRAME.
	* sysdeps/unix/sysv/linux/arm/sigcontextinfo.h
	(ADVANCE_STACK_FRAME): New macro.
	(GET_FRAME): Apply above to returned value.

	* sysdeps/unix/sysv/linux/arm/bits/armsigctx.h: Add `fault_address'.

2000-01-05  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/getaddrinfo.c: Add support for SOCK_RAW.
	Patch by YOSHIFUJI Hideaki <yoshifuji@ecei.tohoku.ac.jp>.

	* io/ftw.c (process_entry): Cache object dev/inode only for
	directories (PR libc/1514).

2000-01-05  Andreas Schwab  <schwab@suse.de>

	* locale/programs/charmap.c (charmap_read): Fix typo.

2000-01-05  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/charset.c: Removed.

	* iconvdata/Makefile: Add rules for ISO-8859-16 module.
	* iconvdata/gconv-modules: Likewise.
	* iconvdata/iso8859-16.c: New file.

2000-01-05  Andreas Schwab  <schwab@suse.de>

	* iconv/iconv_prog.c (process_block): Add cast to avoid warning.

2000-01-05  Andreas Jaeger  <aj@suse.de>

	* intl/locale.alias: Add lithunian entry.
	Reported by Kestutis Kupciunas <kesha@soften.ktu.lt>, PR libc/1507.

2000-01-04  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/stringtrans.c: Removed.
	* locale/programs/stringtrans.h: Removed.
	* locale/programs/linereader.c: Remove #include of stringtrans.h.

	* locale/findlocale.c (_nl_find_locale): Don't try using mmap is
	_POSIX_MAPPED_FILES is not defined.

	* locale/findlocale.c (_nl_find_locale): Correct memory allocation
	for loc_name copy.

	* locale/setlocale.c (new_composite_name): Use _nl_C_name and
	_nl_POSIX_name instead of "C" and "POSIX" strings.

	* ctype/ctype-info.c (__ctype32_tolower): Use _nl_C_CTYPE_tolower.
	(__ctype32_toupper): Use _nl_C_CTYPE_toupper.
	* locale/C-ctype.c (_nl_C_LC_CTYPE_tolower32): Removed.  We can
	reuse the _nl_C_LC_CTYPE_tolower table.
	(_nl_C_LC_CTYPE_toupper32): Likewise.
	(_nl_C_LC_CTYPE): Use normal table to initialize tolower32 and
	toupper32 entries.

	* locale/C-ctype.c (_nl_C_LC_CTYPE_class): Clear ISNCTRL bit for
	characters >= 0x80.
	(_nl_C_LC_CTYPE_class32): Likewise.

	* rt/aio.h (struct aioinit): Replace one aio_reserved value with
	aio_idle_time.
	* rt/aio_misc.c: Rewrite to not automatically terminate worker threads
	after the operation is done.  Let them linger for a user-definable
	time.
	* rt/aio_cancel.c: Likewise.
	Patch by Willian M Shubert <william.m.shubert@intel.com>.

	* sysdeps/i386/i686/add_n.S: New file.

2000-01-02  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/arm/ioperm.c: Use sysctl by preference
	to obtain port mapping information.  Avoid use of mprotect.

2000-01-04  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (O_LARGEFILE): Add
	definition from 2.3.36.

2000-01-04  Andreas Jaeger  <aj@suse.de>

	* nss/nss_db/dummy-db.h (struct db24): Add missing field flags.
	(struct db27): Add missing fields byteswapped, join and flags;
	remove wrong member handleq.
	(struct dbc27): Correct lock field.

	* nss/makedb.c: Remove __P.

2000-01-04  Andreas Jaeger  <aj@suse.de>

	* nss/nss_db/db-open.c (internal_setent): Check for db_open for
	success, fix a memory leak and clean up function.

2000-01-04  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (install): Pass $(install_root) to ldconfig.
	Patch by Akira YOSHIYAMA <yosshy@tkf.att.ne.jp>.

2000-01-03  Jakub Jelinek  <jakub@redhat.com>

	* soft-fp/op-1.h: Fix division for machines using not normalizing
	version of udiv_qrnnd in longlong.h.
	* soft-fp/sysdeps/mips/sfp-machine.h: Likewise.
	* soft-fp/sysdeps/mips/mips64/sfp-machine.h: Likewise.
	* soft-fp/sysdeps/sparc/sparc64/sfp-machine.h: Likewise.
	Patch by Eddie C. Dost <ecd@skynet.be>.

	* soft-fp/soft-fp.h (QItype, UQItype): New types used by longlong.h.

2000-01-03  Andreas Schwab  <schwab@suse.de>

	* sysdeps/generic/dl-sysdep.c: Initialize __libc_multiple_libcs,
	needed for change in common symbol handing in newer binutils.

2000-01-03  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/mmap64.S: Fix code for running on
	kernel without mmap2 syscall.

2000-01-03  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/kernel-features.h (__ASSUME_MMAP2_SYSCALL,
	__ASSUME_TRUNCATE64_SYSCALL, __ASSUME_STAT64_SYSCALL): Define on
	ARM for kernels >= 2.3.35.

2000-01-03  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/arm/mmap.S: Remove mmap64 alias.
	Optimise error handling a little.
	* sysdeps/unix/sysv/linux/arm/mmap64.S: New file.

2000-01-03  Andreas Jaeger  <aj@suse.de>

	* include/resolv.h: Remove declarations for __ns_name_ntop and
	__ns_name_unpack since those are available in resolv/arpa/nameser.h.

2000-01-03  Andreas Jaeger  <aj@suse.de>

	* time/tst-strptime.c (test_tm): Add tests for all fields of
	struct tm.

2000-01-03  Ulrich Drepper  <drepper@cygnus.com>

	* string/bits/string2.h (__strsep_g): Don't handle empty __S special.

2000-01-03  Andreas Jaeger  <aj@suse.de>

	* string/tester.c (test_strsep): Add one more test.

2000-01-03  Philip Blundell  <philb@gnu.org>

	* string/tester.c (test_mempcpy): New function.
	(main): Call it.
	(test_memcpy): Test unaligned cases too.

	* sysdeps/arm/bits/string.h (_HAVE_STRING_ARCH_mempcpy): Define.

	* sysdeps/arm/fpu/bits/mathdef.h: New file.

2000-01-02  Ulrich Drepper  <drepper@cygnus.com>

	* posix/Makefile (tests): Add tst-mmap.
	* posix/tst-mmap.c: New file.

	* sysdeps/unix/sysv/linux/i386/mmap64.S: Pop registers after mmap2
	call before handling error.

	* sysdeps/unix/sysv/linux/i386/mmap64.S: Handle unaligned offsets.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Likewise.

	* iconvdata/ksc5601.c (__ksc5601_sym_to_ucs): Add mapping for
	0xa2e6 and 0xa2e7.
	(__ksc5601_sym_from_ucs): Add mapping back from U00AE and U20AC.
	* iconvdata/ksc5601.h (KSC5601_SYMBOL): Adjust for the two new
	mappings.
	* iconvdata/testdata/EUC-KR: Add Euro and Registered sign.
	* iconvdata/testdata/ISO-2022-KR: Likewise.

	* sysdeps/unix/sysv/linux/llseek.c: Formulate warning message stronger.

	* iconvdata/gconv-modules: Remove BALTIC.  It's the same as
	ISO-8859-13.
	* iconvdata/Makefile (distribute): Remove baltic.c.
	(modules): Remove BALTIC.
	(gen-8bit-gap-modules): Remove baltic.
	* iconvdata/baltic.c: Removed.

	* sysdeps/posix/system.c: Correct return value for LINE == NULL.

	* signal/Versions [GLIBC_2.1.3] (libc): Export __sigsuspend.

	* sysdeps/unix/sysv/linux/sparc/sparc32/mmap64.c (__mmap64): Fix
	typos (__ASSUME_TRUNCATE64_SYSCALL -> __ASSUME_MMAP2_SYSCALL).
	Reported by Philip Blundell <Philip.Blundell@pobox.com>.

	* nss/Makefile: Add rules to build makedb.
	* nss/nss_db/nss_db.h: Add definitions needed for makedb.
	* nss/nss_db/dummy-db.h: Likewise.
	* nss/makedb.c: New file.  Copied from file in db2, modified to not
	depend on being linked against libdb.

2000-01-01  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (all-subdirs): Remove db and db2.
	* db/*: Removed.
	* db2/*: Removed.

	* nss/nss_db/db-XXX.c: Move internal_setent and internal_endent
	functions from here...
	* nss/db-alias.c: ...and here...
	* nss/db-netgrp.c: ...and here...
	* nss/nss_db/db-open.c: ...to here.  New file.
	* nss/nss_db/dummy-db.h: New file.
	* nss/nss_db/nss_db.h: New file.
	* nss/Depend: Depend in dlfcn, not db2.
	* nss/Makefile (libnss_db-routines): Add db-open.
	(distribute): Add nss_db.h dummy-db.h.
	(libnss_db.so): Replace libdb dependency by $(libdl).
	Based on a patch by Zack Weinberg.

	* locale/programs/ld-ctype.c: Implement rest of transliteration
	definition parsing.
	* locale/programs/locfile-kw.gperf: New keyword translit_ignore.
	* locale/programs/locfile-token.h: Add tok_translit_ignore.

1999-12-31  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c (collate_output): Emit correct
	information for collation elements.
	Don't write over end of array idx.
	* posix/regex.c: Handle also collation elements at end of range.

	* posix/PTESTS: Fix a few typos.

	* posix/bits/posix2_lim.h: Remove _POSIX2_EQUIV_CLASS_MAX.  I have
	no idea where this came from.
	* sysdeps/posix/sysconf.c: Remove _POSIX2_EQUIV_CLASS_MAX handling.

1999-12-31  Andreas Jaeger  <aj@suse.de>

	* libio/strfile.h: Remove K&R compatibility.
	* locale/langinfo.h: Likewise.
	* locale/localeconv.c (localeconv): Likewise.
	* locale/programs/simple-hash.h: Likewise.
	* nis/nis_xdr.h: Likewise.
	* nis/rpcsvc/nislib.h: Likewise.
	* nis/rpcsvc/nis_callback.h: Likewise.
	* nis/rpcsvc/nis.h: Likewise.
	* nis/ypclnt.c: Likewise.
	* nscd/nscd_proto.h: Likewise.
	* nscd/nscd.c: Likewise.
	* sysdeps/generic/inttypes.h: Likewise.
	* sysdeps/gnu/utmpx.h: Likewise.

	* nis/nis_intern.h: Remove K&R compatibility; add missing ints.
	* sunrpc/rpcsvc/rusers.x: Likewise.

	* nis/rpcsvc/ypclnt.h: Remove K&R compatibility; reformat.

	* elf/dl-misc.c: Remove __libc_write prototype since it's already
	in include/unistd.h.
	* elf/dl-profile.c: Likewise.
	* elf/dl-load.c: Likewise for __libc_read.

	* elf/dl-profile.c: Remove __P.
	* elf/sprof.c: Likewise.
	* elf/sln.c: Likewise.

1999-12-31  Ulrich Drepper  <drepper@cygnus.com>

	* locale/langinfo.h: Add constants for wide character collation
	symbol table.
	* locale/categories.def: Add appropriate entries for collate symbol
	table entries.
	* locale/C-collate.c: Add initializers for new entries.
	Remove commented out code.
	* locale/elem-hash.h: New file.
	* locale/Makefile (distribute): Add elem-hash.h.
	* locale/programs/ld-collate.c: Implement output of collate symbol
	table.

	* posix/regex.c: Implement collation class handling.

1999-12-30  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regex.c (regex_compile): Implement equivalence class handling.

1999-12-30  Geoffrey Keating  <geoffk@cygnus.com>

	* sysdeps/powerpc/dl-machine.c: Many minor formatting changes.
	(OPCODE_LWZU): New macro.
	(OPCODE_ADDIS_HI): New macro.
	(OPCODE_LIS_HI): New macro.
	(__elf_machine_runtime_setup): Change PLT code-generation scheme
	for thread safety even with very large PLTs, better efficiency,
	and to fix a cache-flushing bug.  Also support the Motorola
	8xx processors which have a different cache line size than all
	the others.
	(__elf_machine_fixup_plt): Likewise.
	(__process_machine_rela): Don't use elf_machine_fixup_plt.

1999-12-30  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wcscoll.c: Use multibyte character version.
	* wcsmbs/wcsxfrm.c: Likewise.
	* string/strcoll.c: Prepare to be used for the wide character version.
	* string/strxfrm.c: Likewise.
	* locale/weightwc.h: New file.

1999-12-30  Geoff Keating  <geoffk@cygnus.com>

	* sysdeps/powerpc/fpu/bits/fenvinline.h (feraiseexcept): Remove
	the (void) casts as now feraiseexcept returns a value.
	(feclearexcept): Likewise.

	* sysdeps/unix/sysv/linux/powerpc/sysdep.h: Don't use '%r0',
	it interferes with the macros for AIX.

1999-12-30  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c (collate_finish): Always define
	weight for UNDEFINED if not defined by the user but don't complain
	unless it is needed in the multibyte character table.
	(collate_output): Add extra dummy elements in wide char tables in the
	same way done for multibyte.  Always output undefined entry in
	wide character table.

	* locale/Makefile (categories): Remove commented-out old definition.

	* locale/programs/ld-collate.c (insert_value): Don't pass wide string
	to new_element if the wide char is not valid.
	(handle_ellipsis): Likewise.
	(collate_read): It's no problem if the string in the collating element
	definition cannot be represented as multibyte or wide char string.

1999-12-13  Andreas Jaeger  <aj@suse.de>

	* resolv/resolv.h: Remove K&R compatibility.

	* resolv/res_libc.c: Move definition of _res after res_init,
	res_init should use the threaded specific context.

	* resolv/Makefile (+cflags): Remove -Wno-comment since it's not
	needed anymore.

1999-12-29  Ulrich Drepper  <drepper@cygnus.com>

	* locale/langinfo.h: Add constants for wide character collation data.
	* locale/categories.def: Add appropriate entries for collate entries.
	* locale/C-collate.c: Add initializers for new entries.
	* locale/programs/ld-collate.c: Implement output of wide character
	tables.

	* locale/programs/ld-ctype.c (allocate_arrays): Change algorithm to
	compute wide character table size a bit: it now gives up a bit of
	total table size for fewer levels.

	* soft-fp/*: Tons of new files to implement floating-point arithmetic
	in software.
	Contributed by Richard Henderson, Jakub Jelinek and others.

1999-12-29  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/alpha/sys/io.h: Don't include
	<asm/io.h>; remove K&R compatibility; add missing ints.

	* sysdeps/unix/sysv/linux/arm/sys/io.h: Remove K&R compatibility,
	add missing ints.

	* sysdeps/unix/sysv/linux/sys/io.h: Don't include <asm/io.h>.

1999-12-29  Andreas Jaeger  <aj@suse.de>

	* manual/getopt.texi (Using Getopt): Document ordering of options.

1999-12-29  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/llseek.c: Emit link time warning for llseek.
	Requested by Michael Deutschmann <michael@talamasca.wkpowerlink.com>.

1999-12-14  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/scsi/scsi.h: Add new defines from Linux
	2.3.32.

1999-12-28  Jakub Jelinek  <jakub@redhat.com>

	* elf/sprof.c (load_shobj): Fix error message.
	(generate_call_graph): Cast %*s length argument to int.
	* locale/programs/localedef.c (construct_output_path): Likewise.
	* locale/programs/ld-ctype.c (ctype_finish): Use proper format
	specifier.
	(ctype_class_new): Likewise.
	* locale/programs/ld-time.c (time_finish): Likewise.
	* sunrpc/svc_simple.c (register_rpc): Likewise.
	* nscd/connections.c (nscd_run, start_threads): Use long instead of
	int to avoid cast warnings.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c (__ieee754_atan2l): Kill
	warning.
	* sysdeps/ieee754/ldbl-128/s_roundl.c (__roundl): Remove unused
	variable se.

	* time/strftime.c (my_strftime): Provide wide era string when
	requested.

	* sysdeps/sparc/fpu/bits/mathinline.h (__signbit, __signbitl):
	Separate into 32bit and 64bit versions.

1999-12-28  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile (modules): Add ISO-2022-CN.
	Add link rules for this module.
	(distribute): Add iso-2022-cn.c and cns11643l2.h.
	* iconvdata/cns11643l2.h: New file.
	* iconvdata/iso-2022-cn.c: New file.
	* iconvdata/gconv-modules: Add entries for ISO-2022-CN module.

	* iconvdata/cns11643l1.h (cns11643l1_to_ucs4): Make string argument
	unsigned.
	(ucs4_to_cns11643l1): Likewise.
	* iconvdata/euc-tw.c: Correct parameter passed to cns11643l1_to_ucs4.

	* iconvdata/iso-2022-kr.c: Remove unnecessary test from conversion
	loop to UCS4.
	Optimize recognition of escape sequences a bit.

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Remove oldgetrlimit
	and oldsetrlimit definitions.

1999-12-27  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/run-iconv-test.sh: Improve test output a bit to allow
	identifying errors more easily.

	* iconvdata/testdata/EUC-CN..UTF8: New file.
	* iconvdata/testdata/GBK..UTF8: New file.

	* iconvdata/gbk.c: In mapping from UCS4: don't crash for undefined
	mappings.  Fix last patch.
	* iconvdata/TESTS: Add GBK.
	* iconvdata/testdata/GBK: New file.

	* iconvdata/gb2312.h (ucs4_to_gb2312): Fix mapping of 0x0101,
	0x2312, and 0x2500..0x254b.
	* iconvdata/TESTS: Add EUC-CN.
	* iconvdata/testdata/EUC-CN: New file.

	* iconvdata/gbgbk.c: New file.
	* iconvdata/Makefile (modules): Add GBGBK.
	(distribute): Add gbgbk.c.
	* iconvdata/gconv-modules: Add entries for GBGBK modules.

	* iconvdata/euc-cn.c: Fix comment.

	* iconvdata/gbk.c: Optimize the switch statement in the conversion
	to GBK a bit.

	* locale/programs/charmap.c (charmap_new_char): Recognize special
	character names Uxxxx and Pxxxx and initialize the UCS4 value from
	the value of xxxx.

1999-12-17  Andreas Jaeger  <aj@suse.de>

	* stdlib/Versions: Export __cxa_atexit and __cxa_finalize.

1999-12-16  Mark Mitchell  <mark@codesourcery.com>

	* stdlib/Makefile (routines): Add cxa_atexit and cxa_finalize.
	* stdlib/exit.h (flavor): Add ef_cxa.
	(exit_function): Add cxa variant.
	* stdlib/exit.c (exit): Handle ef_cxa exit functions.
	* stdlib/cxa_atexit.c: New file.
	* stdlib/cxa_finalize.c: New file.

1999-12-27  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/gb2312.c: Update mapping of GB 0x212c from latest
	Unicode tables.

1999-12-26  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/fxstat64.c: Rename have_no_stat64 to
	__have_no_stat64.
	* sysdeps/unix/sysv/linux/lxstat64.c: Likewise.
	* sysdeps/unix/sysv/linux/xstat64.c: Likewise.

	* sysdeps/unix/sysv/linux/mips/bits/resource.h: Remove inclusion
	of <asm/resource.h>.

1999-12-26  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/arm/syscalls.list: Remove vm86.  Set
	argument count for `syscall' to 7.
	* sysdeps/unix/sysv/linux/arm/sysdep.h: Add support for syscalls
	with more than five arguments.
	(DOARGS_5, UNDOARGS_5): Don't corrupt the calling stack frame.

1999-12-26  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c (collate_output): Don't start with empty
	extrapool and indirectpool obstacks since we need the offsets to be
	nonzero.
	(collate_read): Call load_locale, not find_locale.
	* locale/programs/ld-ctype.c (ctype_finish): If LC_CTYPE category
	wasn't defined in the file also initialize repertoire if possible.
	* locale/programs/ld-time.c (time_finish): Fix message string.
	* locale/programs/linereader.c: Cast parameters of lr_error to
	correct type to prevnet warning.
	* locale/programs/localedef.c (load_locale): New file.
	* locale/programs/localedef.h: Add its prototype.
	* locale/programs/repertoire.c (repertoire_new_char): Add missing
	parameters to lr_error call.

	* localedata/Makefile: Enable running tests again.
	* localedata/tests/test2.def: Adjust syntax to new specification.
	* localedata/tests/test3.def: Likewise.
	* localedata/tst-trans.sh: Redirect output of program into file.

	* string/strcoll.c: Fix many error in new implementation to make it
	pass (at least) the test suite.

	* locale/Makefile: Don't link localedef statically anymore.

	* locale/ld-collate.c (struct element_t): Add field is_character and
	use it to distinguish real character from collating elements and
	symbols.
	(new_element): Take new parameter to initialize is_character.  Change
	all callers.
	(handle_ellipsis): Use is_character field to make sure ellipsis is
	only used with characters.
	(collate_read): Fix reading of collating elements.

	* string/strxfrm.c: Correct loop end detection and memory access
	in the little optimization at the end.

	* locale/programs/ld-monetary.c (monetary_finish): Correct code to
	emit warnings.  Provide default value for mon_decimal_point.

	* locale/programs/ld-collate.c (collate_finish): Don't crash if this
	category wasn't defined.
	(collate_output): Likewise.

	* locale/programs/ld-address.c: Don't emit message about not defined
	category if be_quiet.
	* locale/programs/ld-ctype.c: Likewise.
	* locale/programs/ld-identification.c: Likewise.
	* locale/programs/ld-measurement.c: Likewise.
	* locale/programs/ld-messages.c: Likewise.
	* locale/programs/ld-monetary.c: Likewise.
	* locale/programs/ld-name.c: Likewise.
	* locale/programs/ld-numeric.c: Likewise.
	* locale/programs/ld-paper.c: Likewise.
	* locale/programs/ld-telephone.c: Likewise.
	* locale/programs/ld-time.c: Likewise.

	* locale/programs/locfile.c (write_locale_data): Correct memory
	allocation for fname.

1999-12-25  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c (read_directions): Fix a few messages.
	(collate_finish): Test that position is used in all sections for
	a level or in none.

	* string/strxfrm.c: Optimize a bit.  We don't need the highest bit
	of the index returned by findidx.

	* string/strcoll.c: Complete rewrite for new collate implementation.
	* wcsmbs/wcscoll.c: Don't use strcoll.c, implement dummy implementation
	locally.

	* locale/C-collate.c (_nl_C_LC_COLLATE): Add one more entry for the
	indirect table.
	* locale/langinfo.h: Likewise.
	* locale/categories.def: Likewise.  Remove reference to postload
	functions.
	* locale/lc-collate.c (_nl_postload_collate): Removed.  Also remove
	__collate_tablemb, __collate_weightmb, and __collate_extramb.
	* locale/localeinfo.h: Remove declaration for removed variables above.
	Remove prototype for _nl_get_era_entry.
	* locale/weight.h: Complete rewrite for new collate implementation.
	* locale/programs/ld-collate.c: Many changes to make output file
	usable in strxfrm/strcoll.
	* string/strxfrm.c: Complete rewrite for new collate implementation.
	* wcsmbs/wcsxfrm.c: Don't use strxfrm.c, implement dummy implementation
	locally.

1999-12-25  Shinya Hanataka  <hanataka@abyss.rim.or.jp>

	* locale/programs/ld-ctype.c (allocate_arrays): Correctly assign
	transformation values for chars >255.
	* wctype/wctrans.c: Return pointer unmodified.

1999-12-24  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/system.c (__libc_system): Check whether command
	processor is available if LINE is NULL.  Don't return immediately
	if wait call returned with EINTR.
	Patches by Geoff Clare <gwc@unisoft.com> (PR libc/1497 and libc/1498).

1999-12-23  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-monetary.c (monetary_finish): Add cast to
	prevent warning.

	* locale/programs/ld-collate.c: Implement writing out multibyte
	collation data.

	* locale/setlocale.c (setlocale): Allow setting LC_COLLATE again.
	* locale/localeinfo.h: Declare variables only for currently implemented
	collate functionality.  Remove FORWARD_CHAR and ELLIPSIS_CHAR.
	* locale/lc-collate.c: Define variables only for currently implemented
	functionality.
	* locale/langinfo.h: Define symbols only for currently implemented
	functionality.
	* locale/categories.def: Define elements for currently implemented
	functionality.
	* locale/C-collate.c: Comment out definitions of arrays with symbol
	name definitions etc.
	(_nl_C_LC_COLLATE): Update for currently defined information.

	* intl/libintl.h: Remove dcgettext macro definition.
	* intl/gettextP.h: Declare _nl_msg_cat_cntr.

	* locale/iso-4217.def: Add NAD.  Remove a few obsolete entries.

	* sysdeps/generic/glob.c (glob): Pass alternate file access functions
	also in recursive call.  Patch by Joe Orton <joe@orton.demon.co.uk>.

1999-12-22  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/sparc/fpu/ftestexcept.c (fetestexcept): Use proper type
	for __fenv_stfsr argument.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Add
	truncate64, ftruncate64, fstat64, lstat64, stat64 and mmap2.
	Remove ugetrlimit.
	* sysdeps/unix/sysv/linux/sparc/sparc32/mmap64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/kernel_stat.h
	(XSTAT_IS_XSTAT64): Define.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Add
	__libc_lseek64, __libc_pread, __libc_pread64, __libc_pwrite
	and __libc_pwrite64.
	Remove oldgetrlimit and oldsetrlimit.
	* sysdeps/unix/sysv/linux/sparc/sparc64/fxstat64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/lxstat64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/xstat64.c: New file.

	* sysdeps/unix/sysv/linux/fxstat64.c (__fxstat64): Pass the buf
	pointer to the syscall, not address of that pointer.
	* sysdeps/unix/sysv/linux/lxstat64.c (__lxstat64): Likewise.
	* sysdeps/unix/sysv/linux/xstat64.c (__xstat64): Likewise.
	(__syscall_stat64): Provide proper prototype.

	* sysdeps/unix/sysv/linux/ftruncate64.c (ftruncate64): Share
	has_no_truncate64 between truncate64 and ftruncate64.
	* sysdeps/unix/sysv/linux/truncate64.c (truncate64): Likewise.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_TRUNCATE64_SYSCALL, __ASSUME_MMAP2_SYSCALL,
	__ASSUME_STAT64_SYSCALL): Define on Sparc for kernels >= 2.3.35.

1999-12-22  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add __libc_lseek64,
	__libc_pread, __libc_pread64, __libc_pwrite and __libc_pwrite64.

1999-12-21  Shinya Hanataka  <hanataka@abyss.rim.or.jp>

	* locale/lc-time.c: Extend structure era_entry.
	* locale/localeinfo.h: Likewise.
	* locale/lc-time.c: Handle '-' direction used in locale's era part
	properly.
	* time/strptime.c: Likewise.
	* time/strftime.c: Likewise.
	* locale/programs/ld-time.c: Consider negative values in era part
	of locale as B.C..
	* time/strptime.c (strptime_internal): Merged Yoshiyama's
	%E[CyY] implementation.

1999-12-21  Akira Yoshiyama  <yosshy@debian.or.jp>

	* time/strptime.c (strptime_internal): Fix segV bugs of a couple
	of recursive() call.
	* time/strptime.c (strptime_internal): Implement `%EC',`%Ey',`%EY'
	parsing.

1999-12-21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/arm/dl-machine.c (CLEAR_CACHE): Fix a2 value.
	Patch by Scott Bambrough <scottb@netwinder.org>.

1999-12-21  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/pread.c: Fix typo.

	* include/unistd.h: Declare __libc_lseek.

1999-12-21  Andreas Jaeger  <aj@suse.de>

	* stdlib/longlong.h: Remove __P.

1999-12-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/powerpc/fpu/libm-ulps: New file.

1999-12-21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h: Include	sys/ucontext.h
	and remove definitions for NREGS, greg_t, gregset_t, and fpregset_t.

1999-12-21  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/m68k/putpmsg.c: Add missing #.
	* sysdeps/unix/sysv/linux/mips/putpmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/putpmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/mips/getmsg.c: Add missing #.
	* sysdeps/unix/sysv/linux/mips/putmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/putmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/getmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/putmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/m68k/getpmsg.c: Add missing #.
	* sysdeps/unix/sysv/linux/mips/getpmsg.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/getpmsg.c: Likewise.

1999-12-21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/getmsg.c: New file.
	* sysdeps/unix/sysv/linux/i386/getpmsg.c: New file.
	* sysdeps/unix/sysv/linux/i386/putmsg.c: New file.
	* sysdeps/unix/sysv/linux/i386/putpmsg.c: New file.
	* sysdeps/unix/sysv/linux/m68k/getmsg.c: New file.
	* sysdeps/unix/sysv/linux/m68k/getpmsg.c: New file.
	* sysdeps/unix/sysv/linux/m68k/putmsg.c: New file.
	* sysdeps/unix/sysv/linux/m68k/putpmsg.c: New file.
	* sysdeps/unix/sysv/linux/mips/getmsg.c: New file.
	* sysdeps/unix/sysv/linux/mips/getpmsg.c: New file.
	* sysdeps/unix/sysv/linux/mips/putmsg.c: New file.
	* sysdeps/unix/sysv/linux/mips/putpmsg.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/getmsg.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/getpmsg.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/putmsg.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/putpmsg.c: New file.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list: Add getpmsg and
	putpmsg.

1999-12-20  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/lxstat64.c: Include "kernel-features.h"
	before testing for __ASSUME_STAT64_SYSCALL.
	* sysdeps/unix/sysv/linux/fxstat64.c: Likewise.
	* sysdeps/unix/sysv/linux/xstat64.c: Likewise.

1999-12-20  Andreas Schwab  <schwab@suse.de>

	* manual/install.texi (Running make install): Clearify that
	install_root should be an absolute file name.

1999-12-20  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv.c (__gconv): Deal with outbuf being NULL.

	* iconv/iconv.c (iconv): Allow omitting output buffer if no input
	buffer is given to place conversion descriptor in initial state.
	* iconvdata/gconv-modules: Correct aliases CSPC850MULTILINGUAL and
	CSPC862LATINHEBREW.
	* iconvdata/gconv-modules: Add aliases GB2312 and csGB2312
	(according to IANA registry).
	Reported by Bruno Haible <haible@ilog.fr>.

	* iconvdata/johab.c: Correct completely broken conversion to JOHAB.

	* locale/categories.def: Remove most of the collate definitions.
	* locale/langinfo.h: Comment out corresponding definitions.
	* locale/programs/locale-spec.c (locale_special): Don't recognize the
	collate names yet.
	* locale/programs/ld-collate.c: Correct and optimize computation of
	weights.  Set up list of all definitions correctly.  Start writing
	function to generate output file.

	* locale/programs/ld-ctype.c (allocate_arrays): Increment counter in
	loop to compute default mapping.

1999-12-19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/powerpc/pread.c: Define __libc_* variant for
	cancelation wrapper.
	* sysdeps/unix/sysv/linux/powerpc/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/pwrite64.c: Likewise.

1999-12-19  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/libc-start.c: Remove declaration of
	__libc_open.  Move declaration of __libc_fcntl to ...
	* include/fcntl.h: ...here.

	* include/unistd.h: Move __libc_open and __libc_open64 to ...
	* include/fcntl.h: ...here.

	* malloc/malloc.h (__attribute_malloc__): Only define if hasn't
	happened yet.

	* malloc/Versions: __libc_freeres was exported with glibc 2.1.3,
	rename label.

1999-12-19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/resource.h: Remove <asm/resource.h>
	inclusion.

1999-12-19  Andreas Jaeger  <aj@suse.de>

	* include/string.h: Mark __strndup with __attribute_malloc__.

1999-12-19  Ulrich Drepper  <drepper@cygnus.com>

	* locale/langinfo.h: Always define CODESET.
	(CODESET): Define also as macro.

	* stdio-common/printf_fp.c (__printf_fp): Allocate buffer to
	generate mantissa output in using malloc if it is larger than
	20000 characters.
	Reported by Jim Meyering <meyering@ascend.com>.

1999-12-18  Ulrich Drepper  <drepper@cygnus.com>

	* misc/sys/cdefs.h: Define __attribute_malloc__ according to
	available gcc version.
	* string/string.h: Mark strdup, __strdup, and strndup with
	__attribute_malloc__.
	* stdlib/stdlib.h: Make malloc, calloc, realloc, and valloc with
	__attribute_malloc__.
	* malloc/malloc.h: Make malloc, calloc, realloc, valloc, pvalloc,
	and __default_morecore with __attribute_malloc__.
	Provide default definition for __attribute_malloc__.
	* libio/stdio.h: Make tempnam with __attribute_malloc__.

	* include/unistd.h: Declare __libc_open64, __libc_lseek64,
	__libc_pread, __libc_pread64, __libc_pwrite, and __libc_pwrite64.
	* io/Versions: Export __libc_open64 and __libc_lseek64.
	* posix/Versions: Export __libc_pread, __libc_pread64, __libc_pwrite,
	and __libc_pwrite64.
	* sysdeps/generic/open64.c: Define __libc_* variant for cancelation
	wrapper.
	* sysdeps/generic/pread.c: Likewise.
	* sysdeps/generic/pread64.c: Likewise.
	* sysdeps/generic/pwrite.c: Likewise.
	* sysdeps/generic/pwrite64.c: Likewise.
	* sysdeps/posix/open64.c: Likewise.
	* sysdeps/posix/pread.c: Likewise.
	* sysdeps/posix/pread64.c: Likewise.
	* sysdeps/posix/pwrite.c: Likewise.
	* sysdeps/posix/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/llseek.c: Likewise.
	* sysdeps/unix/sysv/linux/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/pwrite64.c: Likewise.

	* sysdeps/posix/open64.c: Help gcc generating better code.

	* sysdeps/generic/libc-start.c (check_one_fd): Use __libc_open
	instead of __open.

1999-12-11  H.J. Lu  <hjl@gnu.org>

	* sysdeps/generic/libc-start.c (check_one_fd): Use __libc_fcntl
	instead of __fcntl.

1999-12-18  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/isiri-3342.c: New file.
	* iconvdata/Makefile (modules): Add ISIRI-3342.
	(distribute): Add isiri-3342.c.
	(gen-8bit-gap-modules): Add isiri-3342.
	* iconvdata/gconv-modules: Add entries for ISIRI-3342.

	* malloc/Versions: Export __libc_freeres for GLIBC_2.1.

	* sysdeps/unix/sysv/linux/i386/setrlimit.c: Declare local variable
	result if necessary.

	* sysdeps/unix/sysv/linux/i386/bits/resource.h: Don't depend on the
	unreliable kernel headers.
	* sysdeps/unix/sysv/linux/bits/resource.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/resource.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/resource.h: New file.
	* sysdeps/unix/sysv/linux/mips/bits/resource.h: New file.

1999-12-18  Andreas Jaeger  <aj@suse.de>

	* config.make.in (datadir): Added.
	Closes PR libc/1491. Patch by dervishd@jazzfree.com.

1999-12-18  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/ftruncate64.c (ftruncate64): Save and
	set errno.
	* sysdeps/unix/sysv/linux/truncate64.c (truncate64): Likewise.

1999-12-18  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/fxstat64.c: Rewrite to use fstat64
	syscall if available.
	* sysdeps/unix/sysv/linux/lxstat64.c: Likewise for lstat64.
	* sysdeps/unix/sysv/linux/xstat64.c: Likewise for stat64.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_STAT64_SYSCALL): New.

1999-12-17  Scott Bambrough  <scottb@netwinder.org>

	* sysdeps/arm/dl-machine.h (CLEAR_CACHE): New macro to force a
	cache flush.
	* elf/dl-reloc.c (_dl_relocate_object): Add call to flush cache
	after .text segment fixups.

1999-12-16  Andreas Jaeger  <aj@suse.de>

	* rt/aio.h: Remove erroneous __restrict declarations.

1999-12-18  Ulrich Drepper  <drepper@cygnus.com>

	* scripts/rellns-sh: Find pwd program also in /usr/bin and let shell
	do the job if it is there neither.
	Patch by David R. Conrad <drc@adni.net> (PR libc/1485).

1999-12-16  Andreas Jaeger  <aj@suse.de>

	* sysdeps/ieee754/bits/nan.h (NAN): Rename union to avoid
	duplicate definition with function __nan.
	Closes PR libc/1487 reported by <diana@kai.com>.

1999-12-17  Ulrich Drepper  <drepper@cygnus.com>

	* string/bits/string2.h (__strsep): Help gcc optimizing string access.

	* locale/programs/ld-collate.c: Implement handling of absolute
	ellipsis.  Parsing of file and constructing the internal data
	structures should now be complete.
	(collate_finish): Start adding support to generate the data
	structures which are written out to the file.

	* intl/dcgettext.c: Rewrite to handle caching of previous results here
	instead of in the dcgettext macro.
	* intl/libintl.h (dcgettext): Don't define for systems using this
	glibc or systems with tsearch.

	* sysdeps/generic/mathdef.h: Protect definitions for math.h
	against double inclusion.
	* sysdeps/alpha/fpu/bits/mathdef.h: Likewise.
	* sysdeps/i386/fpu/bits/mathdef.h: Likewise.
	* sysdeps/m68k/fpu/bits/mathdef.h: Likewise.
	* sysdeps/powerpc/fpu/bits/mathdef.h: Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: Add more deltas (are mobile PIIs
	that different?).

1999-12-17  Andreas Jaeger  <aj@suse.de>

	* rt/aio.h (struct aiocb64): Add member __next_prio to sync the
	struct with aiocb.

	* rt/Makefile (tests): Added tst-aio64.
	Added dependency rules for tst-aio64.

	* rt/tst-aio64.c: New file, copied from tst-aio.c and changed for
	64bit tests.

1999-12-15  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/unix/sysv/linux/alpha/oldgetrlimit64.c: Removed.
	* sysdeps/unix/sysv/linux/alpha/oldsetrlimit64.c: Removed.
	* sysdeps/unix/sysv/linux/bits/resource.h: Change RLIM_INFINITY back to
	old value (signed long).
	* sysdeps/unix/sysv/linux/i386/bits/resource.h: New, with unsigned
	long RLIM_INFINITY.
	* sysdeps/unix/sysv/linux/getrlimit.c: Moved from here to ...
	* sysdeps/unix/sysv/linux/i386/getrlimit.c: ... here.
	* sysdeps/unix/sysv/linux/getrlimit64.c: Moved from here to ...
	* sysdeps/unix/sysv/linux/i386/getrlimit64.c: ... here.
	* sysdeps/unix/sysv/linux/oldgetrlimit64.c: Moved from here to ...
	* sysdeps/unix/sysv/linux/i386/oldgetrlimit64.c: ... here.
	* sysdeps/unix/sysv/linux/oldsetrlimit64.c: Moved from here to ...
	* sysdeps/unix/sysv/linux/i386/oldsetrlimit64.c: ... here.
	* sysdeps/unix/sysv/linux/setrlimit.c: Moved from here to ...
	* sysdeps/unix/sysv/linux/i386/setrlimit.c: ... here.
	* sysdeps/unix/sysv/linux/setrlimit64.c: Moved from here to ...
	* sysdeps/unix/sysv/linux/i386/setrlimit64.c: ... here.
	* sysdeps/unix/sysv/linux/sparc/bits/resource.h: New.
	* sysdeps/unix/sysv/linux/sparc/sparc64/oldgetrlimit64.c: Removed.
	* sysdeps/unix/sysv/linux/sparc/sparc64/oldsetrlimit64.c: Removed.

1999-12-17  Andreas Jaeger  <aj@suse.de>

	* elf/ldconfig.c: Add new option -l to manualy link shared
	libraries.
	(options): Added option.
	(parse_opt): Set option.
	(main): Handle option.
	(manual_link): New function.

1999-12-17  Thorsten Kukuk  <kukuk@suse.de>

	* string/bits/string2.h: Fix patch from 1999-12-07.

1999-12-16  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/strsep.c: If delim string has only one character
	don't run over end of string.

	* locale/programs/ld-collate.c (insert_weights): Also update next
	pointer of last cursor element.
	(insert_value): Return nonzero value if nothing got inserted.
	(handle_ellipsis): Don't do anything if to-value cannot be inserted.

1999-12-10  Jakub Jelinek  <jakub@redhat.com>

	* stdlib/longlong.h (__sparc_v9__): Use %rDIGIT instead of %DIGIT
	where appropriate.

1999-12-10  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c (__sigaction):
	Copy sa_flags into kernel sigaction structure.

1999-12-14  Andreas Jaeger  <aj@suse.de>

	* string/tester.c (test_strsep): More tests for access beyond
	the final NUL.  The first two tests come from PR libc/1486 by
	martinea@iro.umontreal.ca.

1999-12-14  Thorsten Kukuk  <kukuk@suse.de>

	* nis/ypclnt.c: Correct handling of cached client handles.
	(__xdr_ypresp_all): Call callback function for errors, too,
	like Solaris does.
	* nis/nss_compat/compat-grp.c: Make sure errno is always set correct.
	* nis/nss_compat/compat-initgroups.c: Likewise.
	* nis/nss_compat/compat-spwd.c: Likewise.
	* nis/nss_nis/nis-alias.c: Likewise.
	* nis/nss_nis/nis-ethers.c: Likewise.
	* nis/nss_nis/nis-grp.c: Likewise.
	* nis/nss_nis/nis-hosts.c: Likewise.
	* nis/nss_nis/nis-netgrp.c: Likewise.
	* nis/nss_nis/nis-publickey.c: Likewise.
	* nis/nss_nis/nis-service.c: Likewise. Also use services.byservicename
	Map if available, optimize query if name/port and protocol is known.

1999-12-12  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c (collate_read): Make symbolic
	ellipsis work.  Remove old and unused code.

1999-12-11  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c (collate_read): Implement
	reorder-section handling.

1999-12-10  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c: Implement "copy" in LC_COLLATE.

	* locale/programs/ld-collate.c (collate_read): Add handling of
	reorder-after.

	* locale/programs/ld-collate.c: Many changes to implement parsing
	of collation definition (still not complete).

1999-12-09  Andreas Jaeger  <aj@suse.de>

	* nis/nss_compat/compat-pwd.c (internal_getpwuid_r): Always set
	errno to ENOENT when returning NSS_STATUS_NOTFOUND.
	Reported by Christian Starkjohann <cs@obdev.at>.

1999-12-09  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/fpu/libm-test-ulps: Added some ulps.

1999-12-09  Jakub Jelinek  <jakub@redhat.com>

	* stdlib/longlong.h: Update from latest egcs version.

	* sysdeps/sparc/fpu/fegetenv.c: Add semicolons.

	* sysdeps/unix/sysv/linux/bits/errno.h (__errno_location): __THROW
	has to preceede __attribute__, otherwise g++ barfs.

	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Make things compile
	on sparc64-*-linux.

	* sysdeps/unix/sysv/linux/sparc/sparc64/register-dump.h: Changed to
	use sigcontext.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigcontextinfo.h: Likewise.

1999-12-05  Wolfram Gloger  <wg@malloc.de>

	* malloc/malloc.c (arena_get2): If generating a new arena fails,
	try to generate a minimal one and hope for mmap_chunk() to succeed
	later.

1999-11-07  Wolfram Gloger  <wg@malloc.de>

	* malloc/thread-m.h [NO_THREADS]: The mutex_* macros now let
	mutex_t work as an `in-use' flag even without threads.
	* malloc/malloc.c (USE_ARENAS): New feature flag, controls support
	for multiple arenas separately from NO_THREADS.
	(mALLOc, chunk_realloc, mEMALIGn, cALLOc) [USE_ARENAS]: try to
	fall back to an mmap()ed arena when sbrk() has failed.

1999-12-09  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/Versions: Add getrlimit, setrlimit,
	getrlimit64, setrlimit64 for GLIBC_2.1.3.
	* sysdeps/unix/sysv/linux/i386/Versions: Add getrlimit, setrlimit,
	getrlimit64, setrlimit64 for GLIBC_2.1.3.
	* sysdeps/unix/sysv/linux/i386/Makefile: Add rules for
	oldgetrlimit and oldsetrlimit.
	* sysdeps/unix/sysv/linux/i386/syscalls.list: Add oldgetrlimit and
	oldsetrlimit.
	* sysdeps/unix/sysv/linux/Makefile: Move oldgetrlimit and
	oldsetrlimit rules into 32-bit arch subdirs.
	* sysdeps/unix/sysv/linux/syscalls.list: Likewise.

	* locale/programs/ld-collate.c (insert_value): If this is the
	first symbol the cursor can be the same as the next pointer.

1999-12-08  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-ctype.c (ctype_output): Correct sizes of mapping
	arrays.
	(allocate_arrays): Allocate memory for map32.  Correctly install
	default values in it and install defined mappings.

	* locale/programs/ld-monetary.c (monetary_finish): Provide default
	value for mon_grouping.

	* elf/readlib.c: Include a.out.h last since the Linux/Alpha
	headers are not clean enough.

	* sysdeps/unix/sysv/linux/getrlimit.c: Remove K&R compatibility.

	* sysdeps/unix/sysv/linux/kernel-features.h: Define
	__ASSUME_TRUNCATE64_SYSCALL and __ASSUME_MMAP2_SYSCALL for 2.3.31
	on x86.
	* sysdeps/unix/sysv/linux/ftruncate64.c: New file.
	* sysdeps/unix/sysv/linux/truncate64.c: New file.
	* sysdeps/unix/sysv/linux/i386/mmap.S: Allow using mmap2.
	* sysdeps/unix/sysv/linux/i386/mmap64.S: New file.

	* ctype/Versions: Add __ctype32_tolower and __ctype32_toupper.
	* ctype/ctype-info.c: Define __ctype32_tolower and __ctype32_toupper.
	* locale/C-ctype.c: Add _nl_C_LC_CTYPE_toupper32 and
	_nl_C_LC_CTYPE_tolower32 tables.
	Don't compile it names of 14652 classes and maps.
	* locale/langinfo.h: Define _NL_CTYPE_TOUPPER32 and
	_NL_CTYPE_TOLOWER32.
	* locale/lc-ctype.c (_nl_postload_ctype): Initialize __ctype32_toupper
	and __ctype32_tolower.
	* locale/programs/ld-ctype.c (struct locale_ctype_t): Add map32.
	(ctype_output): Write out map32 values.
	(allocate_arrays): Compute mapping tables correctly.
	* wctype/wcfuncs.c (towlower): Use __ctype32_tolower.
	(towupper): Use __ctype32_toupper.
	* wctype/wctype.h: Optimize towupper and towlower for values < 256.

	* locale/programs/ld-ctype.c (set_class_defaults): Correctly
	determine tolower mapping for 8bit table if the tolower keyword is
	not given.

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Don't fail if host has
	only IPv6 address.  Reported by Artur Frysiak <wiget@pld.org.pl>.

1999-12-07  Jakub Jelinek  <jakub@redhat.com>

	* string/bits/string2.h (__memset_gc, __mempcpy_small, __strcpy_small,
	__stpcpy_small): Cast switch expressions to int to shut up compiler
	warnings.

1999-12-07  Scott Bambrough <scottb@netwinder.org>

	* sysdeps/arm/dl-machine.h (elf_machine_rel): Fixup R_ARM_PC24
	relocs if possible.

1999-12-06  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/setrlimit.c: First find out wether the
	ugetrlimit syscall exists.

	* sysdeps/unix/sysv/linux/getrlimit.c: Only put versions on
	exported symbols.
	* sysdeps/unix/sysv/linux/setrlimit.c: Likewise.

1999-12-07  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/ansi_x3.110.c (from_ansi_x3_110): Don't increment
	pointers if character is illegal.
	Reported by Bruno Haible <haible@ilog.fr>.

	* iconv/gconv_db.c (gen_steps): Set __counter initialy to 1.
	(increment_counter): New function.  Broken out of find_derivation.
	(find_derivation): No need for a lock.  Increment counter only when
	the derivation was already available.
	* iconv/gconv_dl.c: Add debugging functions.
	(known_compare): We have to use strcmp.
	Reported by Bruno Haible <haible@ilog.fr>.

1999-12-06  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/sami-ws2.c (CHARSET_NAME): Fix typo.
	* iconvdata/iso_2033.c (CHARSET_NAME): Fix typo.
	* iconvdata/ecma-cyrillic.c (CHARSET_NAME): Fix typo.
	* iconvdata/gconv-modules: Correct ISO646-PT2 alias.  Add
	SHIFT_JIS alias.
	Reported by Bruno Haible <haible@ilog.fr>.

	* locale/programs/xstrdup.c: It's _LIBC, not __LIBC.

1999-12-03  Andreas Jaeger  <aj@suse.de>

	* nss/getXXbyYY.c: Include <resolv.h>
	(FUNCTION_NAME): Use res_ninit instead of res_init.

	* nss/getXXbyYY_r.c [NEED__RES]: Include <resolv.h> for _res
	declaration and prototypes.
	Remove extra _res declaration.
	(INTERNAL): Use thread aware res_ninit function.

	* inet/gethstbyad_r.c: Include <resolv.h>.

	* resolv/res_data.c: Update from Bind 8.2.2-P5.  Moved res_init to
	res_libc.c.  Disabled unneeded functions.

	* resolv/res_libc.c: New file.

	* Versions.def: Add version GLIBC_2.2 for libpthread.
	Add versions GLIBC_2.1 and GLIBC_2.2 for libresolv.

	* include/resolv.h: Add internal interfaces.

	* resolv/Makefile (routines): Add new files.
	(libresolv-routines): Likewise.
	(distribute): Likewise.

	* resolv/gethnamaddr.c: Use thread safe resolver functions.
	* resolv/nss_dns/dns-host.c: Likewise.
	* resolv/nss_dns/dns-network.c: Likewise.

	* resolv/arpa/nameser.h: Update from Bind 8.2.2-P5.
	* resolv/nsap_addr.c: Likewise.
	* resolv/res_comp.c: Likewise.
	* resolv/res_debug.c: Likewise.
	* resolv/res_init.c: Likewise.
	* resolv/res_mkquery.c: Likewise.
	* resolv/res_query.c: Likewise.
	* resolv/res_send.c: Likewise.
	* resolv/resolv.h: Likewise.

	* resolv/Versions: Add __res_state and __res_ninit with version
	GLIBC_2.2 to libc.
	Add new interfaces with version GLIBC_2.2 to libresolv.

	* resolv/Banner: Update.

	* include/arpa/nameser_compat.h: New file.

	* resolv/ns_name.c: New file from Bind 8.2.2-P5.
	* resolv/ns_netint.c: Likewise.
	* resolv/ns_parse.c: Likewise.
	* resolv/ns_print.c: Likewise.
	* resolv/ns_samedomain.c: Likewise.
	* resolv/ns_ttl.c: Likewise.
	* resolv/arpa/nameser_compat.h: Likewise.
	* resolv/res_debug.h: Likewise.

	Some patches are based on work done by Adam D. Bradley
	<artdodge@cs.bu.edu>.

1999-11-30  Andreas Jaeger  <aj@suse.de>

	Add ldconfig:
	* elf/Makefile (extra-objs): Added ldconfig-modules.
	(ldconfig-modules): New.
	Added vpath for xstrdup and xmalloc.
	Check for use-ldconfig instead of has-ldconfig.
	($(objpfx)ldconfig): New rule with dependencies.
	(distribute): Add new files.

	* sysdeps/unix/sysv/linux/sparc/readelflib.c: New file,
	developed together with Jakub Jelinek <jakub@redhat.com>.
	* sysdeps/generic/readelflib.c: Likewise.

	* elf/cache.c: New file.
	* elf/ldconfig.c: New file.
	* elf/ldconfig.h: New file.
	* elf/readlib.c: New file.

	* Makefile (install): Remove flag -d in ldconfig call.

	* configure.in: Rename has_ldconfig to use_ldconfig, set it to no
	by default.

	* config.make.in (has-ldconfig): Renamed to use-ldconfig, changed
	comment.

	* sysdeps/unix/sysv/linux/configure.in: Remove check for ldconfig,
	set always use_ldconfig instead.

1999-12-03  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/bits/stropts.h: Update with LiS types and
	values.  Patch by David Grothe <dave@gcom.com>.

	* sysdeps/unix/sysv/linux/bits/types.h (__t_scalar_t, __t_uscalar_t):
	Make long types.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/types.h: Likewise.

1999-12-02  Akira Yoshiyama  <yosshy@debian.or.jp>

	* locale/lc-time.c (_nl_get_era_entry): Separate eras
	initialization as _nl_init_era_entry().
	* locale/lc-time.c (_nl_get_era_nf_entry): New function.
	* locale/lc-time.c (_nl_get_era_year_offset): New function.
	* locale/lc-time.c (_nl_get_era_year_start): New function.
	* locale/localeinfo.h: Declare new functions.
	Define ERA_NAME_FORMAT_MEMBERS, ERA_M_NAME, ERA_M_FORMAT, ERA_W_NAME,
	and ERA_W_FORMAT.

1999-12-02  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regex.c (SYNTAX): Make more portable.
	Patch by Aharon Robbins <arnold@skeeve.com>.

1999-11-18  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdsig.c (_hurdsig_init): If __hurd_threadvar_stack_mask is
	nonzero, use cthread_fork to create the signal thread.
	* hurd/msgportdemux.c (_hurd_msgport_receive): Initialize
	_hurd_msgport_thread here (to self).
	* sysdeps/mach/hurd/fork.c (__fork): When __hurd_sigthread_stack_end
	is zero, instead compute child signal thread's starting SP from parent
	signal thread's current SP and the threadvar_stack variables.
	* hurd/Versions (GLIBC_2.1.3): Add cthread_fork, cthread_detach.
	These are now referenced weakly by _hurdsig_init.

	* hurd/report-wait.c (_S_msg_report_wait): Fix typo:
	&_hurd_itimer_thread not &_hurd_msgport_thread.

1999-10-01  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdfchdir.c (_hurd_change_directory_port_from_fd): Rewrite
	without HURD_DPORT_USE to clean up warnings.
	* hurd/dtable.c (get_dtable_port): Likewise.

	* hurd/hurdioctl.c (rectty_dtable): Renamed to install_ctty.
	(install_ctty): Do the changing of the cttyid port cell here, inside
	the critical section while we holding the dtable lock.
	(_hurd_setcttyid, tiocsctty, tiocnotty): Use that instead of changing
	the port cell and calling rectty_dtable.
	(_hurd_locked_install_cttyid): New function, split out of install_ctty.
	(install_ctty): Use it inside a critical section, with the lock held.
	* sysdeps/mach/hurd/setsid.c (__setsid): Use
	_hurd_locked_install_cttyid to effect the cttyid and dtable changes
	after proc_setsid, having held the dtable lock throughout.
	* hurd/dtable.c (ctty_new_pgrp): With the dtable lock held, check the
	cttyid port for null and bail out early if so.  The dtable lock
	serializes us after any cttyid change and its associated dtable update.

1999-11-14  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/nfs/nfs.h: New file, empty but for comments.
	Its presence lets librpcsvc compile ok.  This from Mark Kettenis.
	We don't install this file for users.
	* sysdeps/mach/hurd/Dist: Add it.
	* sysdeps/mach/hurd/Makefile [$(subdir) = sunrpc] (sysdep_headers):
	Append nfs/nfs.h here.

1999-12-01  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/if_index.c (__protocol_available): Add missing
	int for parameter.

	* stdio/stdio.h: Fix typo.
	Patches by Marcus G. Daniels <mgd@santafe.edu>.

1999-12-01  Andreas Jaeger  <aj@suse.de>

	* scripts/test-installation.pl (installation_problem): Filter out
	libpthread_db.

1999-12-01  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Fix signedness of
	__rlim_t and __rlim64_t.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/types.h: Likewise.

1999-12-01  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/Makefile (sysdep_routines): Add
	oldgetrlimit64 and oldsetrlimit64 for subdir = resource.
	* sysdeps/unix/sysv/linux/Versions: Add getrlimit, setrlimit,
	getrlimit64 and setrlimit64 to version GLIBC_2.1.3.
	* sysdeps/unix/sysv/linux/setrlimit.c: Correct handling of old and
	new kernel version.  Add symbol versions.
	* sysdeps/unix/sysv/linux/syscalls.list: Add oldsetrlimit and
	oldgetrlimit.
	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list: Add s_getrlimit
	and s_ugetrlimit.
	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Likewise.
	* sysdeps/unix/sysv/linux/getrlimit.c: New file.
	* sysdeps/unix/sysv/linux/getrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/oldgetrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/oldsetrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/setrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/oldgetrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/alpha/oldsetrlimit64.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/oldgetrlimit64.c: New
	file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/oldsetrlimit64.c: New
	file.

1999-12-01  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/usleep.c: Fix typo.

	* sysdeps/generic/sys/ptrace.h: Remove K&R compatibility.

	* sysdeps/unix/Makefile (param.h.dep): Filter out sys/param.h
	itself.

	* sysdeps/unix/sysv/bits/utsname.h: Test for _SYS_UTSNAME_H, not
	_UTSNAME_H.

	* malloc/set-freeres.c: Really use already_called variable.

	* libio/iosetbuffer.c: Use _IO_WSETBUF instead of constructing
	function call directly.
	* libio/iosetvbuf.c: Likewise.

1999-11-29  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Add AIX 4.3 support.

	* iconvdata/gconv-modules: Correct alias for ISO-8859-10.  This
	standard was issued in 1992.
	Reported by Bruno Haible <haible@ilog.fr>.

1999-11-29  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/unix/sysv/linux/sparc/bits/signum.h: Add define for
	SIGCLD als SIGCHLD.

1999-11-29  Andreas Jaeger  <aj@suse.de>

	* manual/time.texi (Basic CPU Time): Better describe wrap around.
	Patch by Andries Brouwer <Andries.Brouwer@cwi.nl>.

1999-11-29  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/gconv-modules: Fix typos in LATIN8/L8 aliases.
	Patch by Bruno Haible <haible@ilog.fr>.

1999-11-29  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: Remove K&R compatibility.

1999-11-29  Andreas Schwab  <schwab@suse.de>

	* sysdeps/m68k/bits/byteswap.h (__bswap_32): Rename local variable
	__v to __bswap_32_v.
	(__bswap_64): Rename local variables __v and __r to __bswap_64_v
	and __bswap_64_r to avoid clash with __bswap_32 macro.

1999-11-28  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/t.61.c (CHARSET_NAME): Correct name to what is used in
	gconv-modules.

1999-11-26  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-ctype.c (allocate_arrays): Complete last
	patch.  Use wch instead of idx to compute index.
	Patch by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

	* inet/rcmd.c (ruserok): Use iruserok2 not iruserok.

	* locale/iso-3166.def: Update from latest official list.

1999-11-26  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/unix/sysv/linux/sparc/sparc32/register-dump.h: Include
	asm/ptrace.h, since this will not be done with 2.3.xx automatically
	* sysdeps/unix/sysv/linux/sparc/sparc64/register-dump.h: Likewise.

1999-11-26  Andreas Jaeger  <aj@suse.de>

	* libio/libioP.h: Remove duplicate declaration of _IO_wsetb.

1999-11-26  Andreas Jaeger  <aj@suse.de>

	* inet/rcmd.c: Include stdlib for declaration of free.
	Declare iruserok.

1999-11-25  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv.c (__gconv): Always initialize
	cd->__data[last_step].__outbuf and cd->__data[last_step].__outbufend.

	* iconvdata/iso-2022-kr.c (EMIT_SHIFT_TO_INIT): Update number of
	written bytes.
	* iconvdata/iso-2022-jp.c: Likewise.

1999-11-25  H.J. Lu  <hjl@gnu.org>

	* stdlib/exit.c (exit): Run funtions only if
	__exit_funcs->idx > 0.

1999-11-25  Ulrich Drepper  <drepper@cygnus.com>

	* manual/charset.texi (iconv Examples): Add iconv call to flush
	state.  Reported by Andrew Clausen <clausen@alphalink.com.au>.

1999-11-25  Andreas Jaeger  <aj@suse.de>

	* manual/install.texi (Running make install): Better describe
	update from libc5.
	Patch by Michael Deutschmann <michael@talamasca.wkpowerlink.com>.

1999-11-25  Andreas Jaeger  <aj@suse.de>

	* include/sys/mman.h: Remove K&R compatibility.

1999-11-15  Andreas Jaeger  <aj@suse.de>

	* misc/sys/mman.h: Use __REDIRECT for mmap, correct prototype to
	use __off64_t.

1999-11-25  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/iconv_prog.c (process_block): For stateful charsets write
	out byte sequence to get to initial state at the end of the file.

1999-11-25  Andreas Schwab  <schwab@suse.de>

	* Makeconfig: Include sys-dirs and sys-sorted earlier.
	($(common-objpfx)soversions.mk): Wait until subdirs is complete.
	($(common-objpfx)sysd-sorted): Emit marker when this file is
	complete.

1999-11-24  Ulrich Drepper  <drepper@cygnus.com>

	* manual/setjmp.texi: Many changes to correct bad English introduced
	mainly by me.
	* manual/time.texi: Likewise.
	Patches by Neil Booth <neil@rosenet.ne.jp>.

	* include/string.h: Remove K&R compatibility.

1999-11-23  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/signum.h (SIGSYS): New definition.

	* sysdeps/unix/sysv/linux/net/if_arp.h (ARPHRD_IEEE802_TR): Added.

	* string/stratcliff.c: Add one more strchr test for something
	which was reported to not work (which proofed to be wrong).

	* iconv/skeleton.c: It's __is_last, not is_last.

	* locale/programs/ld-ctype.c (ctype_finish): Correct method to find
	the UCS value.
	(allocate_arrays): Likewise.
	(find_idx): Correctly increase array size.
	Patches by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

1999-11-23  Thorsten Kukuk  <kukuk@suse.de>

	* iconv/skeleton.c: Don't access next_step->fct if data->is_last
	is true.

1999-11-23  Andreas Jaeger  <aj@suse.de>

	* include/sys/select.h: Remove K&R compatibility.
	* include/sys/statfs.h: Likewise.
	* include/gnu/libc-version.h: Likewise.
	* include/db_185.h: Likewise.
	* include/dlfcn.h: Likewise.
	* include/search.h: Likewise.
	* include/setjmp.h: Likewise.
	* include/signal.h: Likewise.
	* include/stdio.h: Likewise.
	* include/unistd.h: Likewise.

1999-11-23  Andreas Jaeger  <aj@suse.de>

	* include/aio.h: Remove __THROW from internal interfaces.  __THROW
	is only need in external header files that might be compiled by a
	C++ compiler.
	* include/alloca.h: Likewise.
	* include/db.h: Likewise.
	* include/dirent.h: Likewise.
	* include/execinfo.h: Likewise.
	* include/fpu_control.h: Likewise.
	* include/glob.h: Likewise.
	* include/grp.h: Likewise.
	* include/libintl.h: Likewise.
	* include/math.h: Likewise.
	* include/math.h: Likewise.
	* include/mntent.h: Likewise.
	* include/mntent.h: Likewise.
	* include/netdb.h: Likewise.
	* include/pwd.h: Likewise.
	* include/sched.h: Likewise.
	* include/shadow.h: Likewise.
	* include/stdlib.h: Likewise.
	* include/sys/file.h: Likewise.
	* include/sys/gmon.h: Likewise.
	* include/sys/ioctl.h: Likewise.
	* include/sys/socket.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/sys/sysinfo.h: Likewise.
	* include/sys/time.h: Likewise.
	* include/sys/times.h: Likewise.
	* include/sys/uio.h: Likewise.
	* include/sys/wait.h: Likewise.
	* include/termios.h: Likewise.
	* include/time.h: Likewise.
	* include/ulimit.h: Likewise.
	* include/utmp.h: Likewise.
	* include/wchar.h: Likewise.

1999-11-22  Andreas Jaeger  <aj@suse.de>

	* sunrpc/rpc_clntout.c (printbody): Fix -CLMNab output.
	Patch by Jerry Perkins 	<jrperkins@iname.com>, closes PR
	libc/1456+1457.

1999-11-22  Jakub Jelinek  <jakub@redhat.com>

	* sysdeps/generic/siglist.h: Avoid declaring the same field
	twice if SIGPWR is defined to SIGLOST.
	* sysdeps/sparc/sparc32/memcpy.S: bcopy takes size_t argument,
	not signed, so we should not special case it for negative args.
	* sysdeps/sparc/sparc32/sparcv9/memmove.c: Don't use generic
	memmove, use the one provided in memcpy.S.
	* sysdeps/sparc/sparc64/memcpy.S: bcopy should handle overlapping
	copies like memmove, while the previous version worked like memcpy.
	Implement optimized assembly memmove.
	* sysdeps/sparc/sparc64/memmove.c: New file.

1999-11-23  Ulrich Drepper  <drepper@cygnus.com>

	* po/cs.po: Update from translators.

1999-11-23  Andreas Jaeger  <aj@suse.de>

	* sysdeps/mips/dl-machine.h (elf_machine_dynamic): New function.
	(elf_machine_got): Removed, not needed anymore.
	(ELF_MACHINE_RELOC_NOPLT): Removed.
	(ELF_MACHINE_JMP_SLOT): Added.
	(_RTLD_PROLOGUE): We use gcc, no need to check for __STDC__.
	(_RTLD_EPILOGUE): Likewise.
	(RESOLVE_GOTSYM): Use R_MIPS_REL32.
	(ELF_MACHINE_RUNTIME_TRAMPOLINE): Likewise.
	Based on patches from Maciej W. Rozycki <macro@ds2.pg.gda.pl> and
	Ralf Bächle <baechle@uni-koblenz.de>.

	* sysdeps/mips/mips64/dl-machine.h: Apply same patches.

1999-11-22  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wcsmbsload.c (__wcsmbs_load_conv): Don't use the charset
	name from the locale name.  Only use the value in the LC_CTYPE
	locale data file.

	* locale/loadlocale.c (_nl_load_locale): Allow index of entry in
	file be equal to file size.

	* stdlib/longlong.h: Add count_trailing_zeros back.

	* stdlib/longlong.h: Update from latest egcs version.

1999-11-22  Andreas Jaeger  <aj@suse.de>

	* locale/programs/ld-collate.c (insert_value): Correct order of
	arguments for lr_error call.

	* sysdeps/unix/sysv/linux/mips/syscalls.list: Add
	__syscall_setrlimit.

	* sysdeps/unix/sysv/linux/mips/bits/ipc.h: Include <sys/types.h>
	for key_t.
	Patch by Maciej W. Rozycki <macro@ds2.pg.gda.pl>.

1999-11-21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/libm-test-ulps: Increase error value for latest
	gcc version.

	* locale/programs/ld-ctype.c (ctype_read): Correctly implement
	14652-style definition of new maps and classes.

1999-11-20  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-monetary.c (monetary_finish): Don't print
	individual error message if nothing is defined.

	* locale/programs/ld-time.c (time_startup): Test for lr being
	nonzero, not time.

	* locale/programs/ld-numeric.c (numeric_finish): Don't crash if
	decimal_point is not defined.

	* wctype/wctrans.c (wctrans): Use correct base index to access
	extra mapping tables.

	* locale/loadlocale.c (_nl_load_locale): Use actual number of
	entries from file and not the fixed (minimal number from the
	langinfo.h list.

	* locale/programs/ld-ctype.c (ctype_read): Fix reading of <U....>
	values in charmaps.

1999-11-18  Paul Eggert  <eggert@twinsun.com>

	* time/strftime.c (my_strftime): Some old compilers object to
	'\a', so don't bother optimizing for it.

1999-11-19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/setrlimit.c (__setrlimit): Don't modify
	the rlimits structure passed in.

1999-11-19  Andreas Jaeger  <aj@suse.de>

	* include/sys/resource.h (__setrlimit): Add prototype.

1999-11-19  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c (_dl_init_paths): Allocate correct number of
	entries for rtld_search_dirs[0].
	Patch by David Mosberger <davidm@hpl.hp.com>.

1999-11-18  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-ctype.c: Don't predefine the character
	classes and mappings of ISO 14652.

	* locale/programs/ld-ctype.c: Punt if character class definitions
	to not consists of tok_bsymbol (for now).

	* time/strptime.c (day_of_the_week): Make sure result is never
	negative.
	(strptime_internal): Allow %C without %y.

1999-11-18  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/linux_fsinfo.h: Sorted entries and added
	comments.

	* sysdeps/unix/sysv/linux/getpt.c: Include linux_fsinfo.h instead
	of defining *_SUPER_MAGIC.
	* sysdeps/unix/sysv/linux/grantpt.c: Likewise.

1999-11-18  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/locale.c: Don't handle LC_ALL together with the
	other categories when printing the value.
	Patch by Akira YOSHIYAMA <yosshy@tkf.att.ne.jp>.

	* locale/locale.h: Correct comment about LC_ALL.

1999-11-17  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-ctype.c (ctype_output): Correct computation of
	nelems.  Correctly compute index for additional character classes.
	(ctype_read): Handle charclass and charconv definitions.  Also
	recognize arbitrary strings as mapping names.
	* locale/programs/ld-time.c (time_finish): Correctly skip over wide
	character era strings.
	* locale/lc-time.c (_nl_get_era_entry): Correctly skip era name
	and format for wide characters.
	* time/strftime.c: Correctly determine era information for wide
	wcsftime.
	* wctype/wctrans.c: Fix after removal of second endianess table.
	* wctype/wctype.h (_ISwbit): Correctly handle bits > 16.
	Patches by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

	* wcsmbs/wcwidth.h (internal_wcwidth): Reject non-printable characters.
	* wcsmbs/wcswidth.c (wcswidth): Don't forget to decrement counter n.

	* sysdeps/unix/sysv/linux/alpha/sys/procfs.h: Remove greg_t,
	gregset_t, fpregset_t, and NGREG definitions.

	* locale/programs/ld-ctype.c: Implement character width information
	handling.

1999-11-09  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/grantpt.c (grantpt): Add support for devfs.

	* sysdeps/unix/sysv/linux/getpt.c (__getpt): Check for devfs.
	Patch by German Jose Gomez Garcia <german@pinon.ccu.uniovi.es>.

	* sysdeps/unix/sysv/linux/linux_fsinfo.h (DEVFS_SUPER_MAGIC): Added.

1999-11-17  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/gnu/netinet/tcp.h: Add TCP_CORK definition.

1999-11-07  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/scsi/scsi_ioctl.h: New file with some
	defines from Linux scsi_ioctl.h header.

	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Added
	scsi_ioctl.h.
	* sysdeps/unix/sysv/linux/Dist: Likewise.

	* sysdeps/unix/sysv/linux/scsi/sg.h: Synced with Linux 2.3.26;
	pretty printed.

	* sysdeps/unix/sysv/linux/scsi/scsi.h (TYPE_ENCLOSURE): Added to
	sync with Linux 2.3.26.

1999-11-17  Andreas Jaeger  <aj@suse.de>

	* shlib-versions: Allow mipsel for libm.
	Patch by Maciej W. Rozycki <macro@ds2.pg.gda.pl>.

1999-11-16  Andreas Jaeger  <aj@suse.de>

	* math/fenv.h: Fix typos in comments.  Reported by Andreas Schwab.

1999-11-16  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-ctype.c (set_class_defaults): Set default
	value for alpha and alnum correctly.

	* locale/programs/ld-address.c (address_output): Fix output of
	country_num.

1999-11-15  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/asia: Update from tzdata1999j.
	* timezone/australasia: Likewise.
	* timezone/europe: Likewise.
	* timezone/northamerica: Likewise.
	* timezone/southamerica: Likewise.
	* timezone/zone.tab: Likewise.

1999-11-14  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sys/procfs.h: Remove duplicate definitions.
	* sysdeps/unix/sysv/linux/mips/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h: Likewise.

1999-11-15  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Add
	__syscall_setrlimit.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.

1999-11-14  Ulrich Drepper  <drepper@cygnus.com>

	* scripts/versions.awk: Don't expect to read predecessor versions,
	compute them.
	* Versions.def: Remove predecessors.  They now get computed.

1999-11-14  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/execve.c: Add __syscall_execve prototype.
	* sysdeps/unix/sysv/linux/setrlimit.c: Add __syscall_setrlimit
	prototype.
	* sysdeps/unix/sysv/linux/powerpc/syscalls.list: Add setrlimit.
	* sysdeps/powerpc/stackinfo.h: New file.
	Patches by Franz Sirl <Franz.Sirl@lauterbach.com>.

1999-11-13  Roland McGrath  <roland@baalperazim.frob.com>

	* Versions.def (libc): Move GLIBC_2.2 dependency from GLIBC_2.1.1 to
	GLIBC_2.1.3.

1999-11-13  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/Versions (GLIBC_2.1.3): Define, adding directory_name_split and
	hurd_directory_name_split.
	* Versions.def (libc): Add GLIBC_2.1.3.

1999-11-09  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/report-wait.c (describe_port): Return char * and use __stpcpy
	to return the location of the null byte written into the string.
	(describe_number): Likewise.
	(describe_number): Remove assert, not always used with #.
	If FLAVOR is null, don't use it.
	(describe_number): Take signed argument and print a - if negative.
	(_S_msg_report_wait): Report system call number for system calls that
	aren't mach_msg.  Soup up reporting for mach_msg: If destination port
	matches SS->intr_port, bracket port description with [...] to indicate
	a Hurd interruptible RPC; if destination port is null, examine the
	receive port and report that state; if receive port is also null,
	check for timeout and report its value.
	* sysdeps/mach/hurd/i386/intr-msg.h (MSG_EXAMINE): Return int that is
	zero iff we managed to examine the stack; take new args RCV_NAME,
	SEND_NAME, OPTION, and TIMEOUT to fill in with mach_msg args.

	* hurd/report-wait.c (describe_port): Recognize MACH_PORT_NULL and
	MACH_PORT_DEAD specially.

1999-10-04  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdlookup.c (__hurd_directory_name_split): New function.
	(__directory_name_split): New function.
	* hurd/hurd.h: Declare them.
	* sysdeps/mach/hurd/rmdir.c: Use __directory_name_split instead of
	__file_name_split, so we ignore trailing slashes properly.
	* sysdeps/mach/hurd/rename.c: Likewise.

1999-11-13  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/unix/sysv/linux/sparc/bits/signum.h: Add SIGPWR define
	from current kernel headers.

	* sunrpc/key_call.c: Use /usr/etc/keyenvoy only if we don't have
	SO_PASSCRED defined.

1999-11-12  Ulrich Drepper  <drepper@cygnus.com>

	* locale/C-ctype.c: Fix typo in char class name.

	* configure.in: Allow user so specify --enable-kernel=current.

1999-11-12  Thorsten Kukuk  <kukuk@suse.de>

	* nis/nss_nisplus/nisplus-publickey.c: Check for snprintf return value.

	* sysdeps/unix/sysv/linux/alpha/sys/procfs.h: Follow changes from
	i386 version.
	* sysdeps/unix/sysv/linux/arm/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/procfs.h: Likewise.

1999-11-12  Ulrich Drepper  <drepper@cygnus.com>

	* intl/locale.alias: Add Estonian entries.
	Patch by Marko Kreen <marko@et.ee> [PR libc/1444].

1999-11-02  Andreas Jaeger  <aj@suse.de>

	* Versions.def: Add version GLIBC_2.2 for libm.
	* math/fenv.h: Add prototypes for fegetexcept, feenableexcept and
	fedisableexcept.
	* sysdeps/generic/feenablxcpt.c: Stub file.
	* sysdeps/generic/fedisblxcpt.c: Stub file.
	* sysdeps/generic/fegetexcept.c: Stub file.
	* sysdeps/i386/fpu/fedisblxcpt.c: New file.
	* sysdeps/i386/fpu/feenablxcpt.c: New file.
	* sysdeps/i386/fpu/fegetexcept.c: New file.
	* math/Makefile (libm-support): Add new files.
	* math/Versions: Add new functions with version GLIBC_2.2.
	* manual/arith.texi (Control Functions): Document fegetexcept,
	feenableexcept and fedisableexcept.

1999-11-01  Wolfram Gloger  <wg@malloc.de>

	* malloc/malloc.h: Describe __malloc_initialize_hook.
	* manual/memory.texi: Document __malloc_initialize_hook.

1999-11-11  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/setrlimit.c: Correctly use rlimits.

1999-11-09  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/getlogin_r.c (getlogin_r): Sync with getlogin
	implementation for ttyname_r call; fix inverted condition; return
	ut_user.
	Closes PR libc/1438.

1999-11-10  Ulrich Drepper  <drepper@cygnus.com>

	* math/fenv.h: Include bits/fenvinline.h if optimizing.
	* sysdeps/powerpc/fpu/bits/fenv.h: Remove inline functions.  Moved to..
	* sysdeps/powerpc/fpu/bits/fenvinline.h: ...here.  New file.
	* sysdeps/generic/bits/fenv.h: New file.

1999-11-10  Ulrich Drepper  <drepper@cygnus.com>

	* misc/tst-efgcvt.c (output_r_error): Remove extra parameter to
	printf call.

1999-11-10  Andreas Jaeger  <aj@suse.de>

	* misc/tst-efgcvt.c: Also test ecvt_r and fcvt_r.

1999-11-10  Andreas Jaeger  <aj@suse.de>

	* string/strsignal.c (strsignal): Correct check for snprintf
	return value.
	* argp/argp-fmtstream.c (__argp_fmtstream_printf): Likewise.

	* misc/efgcvt_r.c (APPEND): Correct check for too small buffer
	according to changed snprintf return value.
	Reported by Lawrence K. Chen <lchen@opentext.com>.

	* misc/tst-efgcvt.c (special): Add tests for a too small buffer
	for ecvt_r and fcvt_r.

1999-11-09  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c (_dl_dst_count): Allow $ORIGIN to point to
	directory with the reference since this is as secure as using the
	object with the dependency.
	(_dl_dst_substitute): Likewise.

	* elf/dl-load.c (_dl_dst_count): Change strings in first two
	strncmp calls to allow reuse.
	(_dl_dst_substitute): Likewise.

1999-11-01  Arnold D. Robbins  <arnold@skeeve.com>

	* posix/regex.c (init_syntax_once): move below definition of
	ISALNUM etc., then use ISALNUM to init the table, so that
	the word ops will work if i18n'ed.
	(SYNTAX): And subscript with 0xFF for 8bit character sets.

1999-11-09  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/getlogin_r.c (getlogin_r): Sync with getlogin
	implementation for ttyname_r call; fix inverted condition; return
	ut_user.  Closes PR libc/1438.

1999-11-09  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/checktab.awk: Update from tzcode1999h.
	* timezone/africa: Update from tzdata1999i.
	* timezone/asia: Likewise.
	* timezone/australasia: Likewise.
	* timezone/backward: Likewise.
	* timezone/europe: Likewise.
	* timezone/northamerica: Likewise.
	* timezone/southamerica: Likewise.
	* timezone/iso3166.tab: Likewise.
	* timezone/zone.tab: Likewise.

	* sysdeps/unix/sysv/linux/bits/resource.h: Define values also as
	macros.  Patch by brg@csua.berkeley.edu [PR libc/1439].

1999-11-09  Andreas Jaeger  <aj@suse.de>

	* posix/Makefile (tests): Added tst-getlogin.

	* posix/tst-getlogin.c: New file, contains simple tests for
	getlogin and getlogin_r.

1999-11-09  Andreas Schwab  <schwab@suse.de>

	* misc/syslog.c: For LOG_PERROR only append a newline if
	necessary.

1999-11-08  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Add STT_REGISTER, STT_HP_OPAQUE, and STT_ST_STUB
	definitions.

1999-11-08  Andreas Jaeger  <aj@suse.de>

	* locale/findlocale.c (_nl_find_locale): Free normalized_codeset;
	this fixes a memory leak (closes PR libc/1435).

	* intl/l10nflist.c (_nl_normalize_codeset): Update comment to
	reflect memory allocation.

	* intl/loadinfo.h: Comment _nl_normalize_codeset, comment memory
	allocation in _nl_explode_name.

1999-11-06  Andreas Jaeger  <aj@suse.de>

	* time/tzset.c: Use __libc_lock_define_initialized for tzset_lock
	to initialize it.
	Reported by wes@surety.com, closes PR libc/1432.

1999-11-05  Geoff Keating  <geoffk@cygnus.com>

	* sysdeps/powerpc/fpu/bits/fenv.h: Don't put commas at the end of
	enumerator lists (-pedantic complains).
	(feraiseexcept): Use i#*X as the constraint.  Fix a bug in the
	test for 'one bit set'.
	(feclearexcept): Likewise.

1999-11-05  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/setrlimit.c: New file.

	* sysdeps/unix/sysv/linux/bits/resource.h (RLIM_INFINITY): Adjust
	for kernel changes.
	* sysdeps/unix/sysv/linux/bits/types.h (__rlim_t, __rlim64_t): Make
	unsigned.

1999-10-04  Tim Waugh  <twaugh@redhat.com>

	* posix/wordexp-test.c: More tests.

	* posix/wordexp.c (wordexp): Explicit null words should be kept.

1999-11-04  Shinya Hanataka  <hanataka@abyss.rim.or.jp>

	* locale/programs/linereader.c (get_string): Correct type of buf2
	variable.
	* locale/programs/ld-ctype.c (ctype_output): Store index correctly
	for _NL_CTYPE_INDIGITS_MB_LEN, _NL_CTYPE_INDIGITS_WC_LEN,
	_NL_CTYPE_INDIGITS*_MB, _NL_CTYPE_OUTDIGIT*_MB, and
	_NL_CTYPE_OUTDIGIT*_WC.
	(allocate_arrays): Completely initialize mapping tables.
	* locale/programs/ld-time.c (time_startup): We need the wide car
	string.
	(time_finish): Correct handling of era.
	(time_output): Fix a few array indeces.
	(time_read): Pass the repertoire map to lr_token.

1999-11-03  Ulrich Drepper  <drepper@cygnus.com>

	* Versions.def: Add version for libthread_db.

1999-11-02  Andreas Jaeger  <aj@suse.de>

	* manual/header.texi (Library Summary): The command @indexfonts
	doesn't exist anymore, use @smallfonts instead.

1999-11-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/sys/procfs.h: Include sys/ucontext.h
	instead of duplicating definitions.

1999-11-01  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/sys/procfs.h: Add more pr* types used
	by the debugger.
	* sysdeps/unix/sysv/linux/arm/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/procfs.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/procfs.h: Likewise.

1999-11-01  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/net/if_arp.h: Add ARPHDR_HWX25.

	* sysdeps/unix/sysv/linux/kernel-features.h
	(__ASSUME_NEW_GETRLIMIT_SYSCALL): New definition.
	* sysdeps/unix/sysv/linux/i386/getrlimit.c: New file.

	* manual/texinfo.tex: Updated.

1999-11-01  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/sys/reboot.h: Remove K&R compatibility.

	* inet/gethstbynm2_r.c: Reorder addresses.

1999-09-11  Paul Eggert  <eggert@twinsun.com>

	* posix/glob.h (glob): If #defining to glob64, do this before
	declaring it, so that all declarations and uses match, and do not
	declare glob64, to avoid a declaration clash.
	(globfree): Likewise with globfree64.

1999-09-08  Eli Zaretskii  <eliz@is.elta.co.il>

	* sysdeps/generic/glob.c (prefix_array) [__MSDOS__,WINDOWS32]:
	Keep the trailing slash unless DIRNAME is just "x:/".

1999-10-11  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/siginfo.h (SI_KERNEL): Added.
	* sysdeps/unix/sysv/linux/mips/bits/siginfo.h: Likewise.
	Closes PR libc/1384.

1999-10-20  Andreas Schwab  <schwab@suse.de>

	* math/Makefile (libm-tests-generated): Remove libm-test.stmp.
	(generated): Add it here.
	(before-compile): Add libm-test.c.
	($(addprefix $(objpfx), $(libm-tests-generated))): Depend on
	libm-test.stmp.
	($(objpfx)libm-test.stmp): Use $(objpfx) instead of
	$(objdir)/math/.

1999-10-31  Ulrich Drepper  <drepper@cygnus.com>

	* Makefile (pdf): New goal.
	* manual/Makefile: Add definitions and rules for PDF generation.

	* Versions.def (libm): Add GLIBC_2.1.3.

	ISO C99 TR1 changes various fe* functions to return an error value.
	* math/Versions [GLIBC_2.1.3]: Add feclearexcept, fegetexceptflag,
	feraiseexcept, fesetexceptflag, fegetenv, fesetenv, and feupdateenv.
	* sysdeps/alpha/fpu/fclrexcpt.c: Return value and add alias.
	* sysdeps/alpha/fpu/fegetenv.c: Likewise.
	* sysdeps/alpha/fpu/fesetenv.c: Likewise.
	* sysdeps/alpha/fpu/feupdateenv.c: Likewise.
	* sysdeps/alpha/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/alpha/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/alpha/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/arm/fpu/fclrexcpt.c: Likewise.
	* sysdeps/arm/fpu/fegetenv.c: Likewise.
	* sysdeps/arm/fpu/fesetenv.c: Likewise.
	* sysdeps/arm/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/arm/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/generic/fclrexcpt.c: Likewise.
	* sysdeps/generic/fegetenv.c: Likewise.
	* sysdeps/generic/fesetenv.c: Likewise.
	* sysdeps/generic/feupdateenv.c: Likewise.
	* sysdeps/generic/fgetexcptflg.c: Likewise.
	* sysdeps/generic/fraiseexcpt.c: Likewise.
	* sysdeps/generic/fsetexcptflg.c: Likewise.
	* sysdeps/i386/fpu/fclrexcpt.c: Likewise.
	* sysdeps/i386/fpu/fegetenv.c: Likewise.
	* sysdeps/i386/fpu/fesetenv.c: Likewise.
	* sysdeps/i386/fpu/feupdateenv.c: Likewise.
	* sysdeps/i386/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/i386/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/i386/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/m68k/fpu/fclrexcpt.c: Likewise.
	* sysdeps/m68k/fpu/fegetenv.c: Likewise.
	* sysdeps/m68k/fpu/fesetenv.c: Likewise.
	* sysdeps/m68k/fpu/feupdateenv.c: Likewise.
	* sysdeps/m68k/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/m68k/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/m68k/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/mips/fclrexcpt.c: Likewise.
	* sysdeps/mips/fegetenv.c: Likewise.
	* sysdeps/mips/fesetenv.c: Likewise.
	* sysdeps/mips/feupdateenv.c: Likewise.
	* sysdeps/mips/fgetexcptflg.c: Likewise.
	* sysdeps/powerpc/fclrexcpt.c: Likewise.
	* sysdeps/powerpc/fegetenv.c: Likewise.
	* sysdeps/powerpc/fesetenv.c: Likewise.
	* sysdeps/powerpc/feupdateenv.c: Likewise.
	* sysdeps/powerpc/fgetexcptflg.c: Likewise.
	* sysdeps/powerpc/fraiseexcpt.c: Likewise.
	* sysdeps/powerpc/fsetexcptflg.c: Likewise.
	* sysdeps/sparc/fpu/fclrexcpt.c: Likewise.
	* sysdeps/sparc/fpu/fegetenv.c: Likewise.
	* sysdeps/sparc/fpu/fesetenv.c: Likewise.
	* sysdeps/sparc/fpu/feupdateenv.c: Likewise.
	* sysdeps/sparc/fpu/fgetexcptflg.c: Likewise.
	* sysdeps/sparc/fpu/fraiseexcpt.c: Likewise.
	* sysdeps/sparc/fpu/fsetexcptflg.c: Likewise.
	* math/fenv.h: Adjust prototypes.: Likewise.
	* manual/arith.texi: Adjust documentation for these changes.

	* manual/arith.texi: Document feraiseexcept.

	* sysdeps/powerpc/fegetenv.c: Moved to...
	* sysdeps/powerpc/fpu/fegetenv.c: ...here.
	* sysdeps/powerpc/fegetround.c: Moved to...
	* sysdeps/powerpc/fpu/fegetround.c: ...here.
	* sysdeps/powerpc/feholdexcpt.c: Moved to...
	* sysdeps/powerpc/fpu/feholdexcpt.c: ...here.
	* sysdeps/powerpc/fesetenv.c: Moved to...
	* sysdeps/powerpc/fpu/fesetenv.c: ...here.
	* sysdeps/powerpc/fenv_libc.h: Moved to...
	* sysdeps/powerpc/fpu/fenv_libc.h: ...here.
	* sysdeps/powerpc/feupdateenv.c: Moved to...
	* sysdeps/powerpc/fpu/feupdateenv.c: ...here.
	* sysdeps/powerpc/fgetexcptflg.c: Moved to...
	* sysdeps/powerpc/fpu/fgetexcptflg.c: ...here.
	* sysdeps/powerpc/fraiseexcpt.c: Moved to...
	* sysdeps/powerpc/fpu/fraiseexcpt.c: ...here.
	* sysdeps/powerpc/fsetexcptflg.c: Moved to...
	* sysdeps/powerpc/fpu/fsetexcptflg.c: ...here.
	* sysdeps/powerpc/ftestexcept.c: Moved to...
	* sysdeps/powerpc/fpu/ftestexcept.c: ...here.
	* sysdeps/powerpc/fesetround.c: Moved to...
	* sysdeps/powerpc/fpu/fesetround.c: ...here
	* sysdeps/powerpc/fenv_const.c: Moved to...
	* sysdeps/powerpc/fpu/fenv_const.c: ...here.

	* sysdeps/mips/fclrexcpt.c: Moved to...
	* sysdeps/mips/fpu/fclrexcpt.c: ...here.
	* sysdeps/mips/fegetenv.c: Moved to...
	* sysdeps/mips/fpu/fegetenv.c: ...here.
	* sysdeps/mips/fegetround.c: Moved to...
	* sysdeps/mips/fpu/fegetround.c: ...here.
	* sysdeps/mips/fesetenv.c: Moved to...
	* sysdeps/mips/fpu/fesetenv.c: ...here.
	* sysdeps/mips/fesetround.c: Moved to...
	* sysdeps/mips/fpu/fesetround.c: ...here.
	* sysdeps/mips/feupdateenv.c: Moved to...
	* sysdeps/mips/fpu/feupdateenv.c: ...here.
	* sysdeps/mips/fgetexcptflg.c: Moved to...
	* sysdeps/mips/fpu/fgetexcptflg.c: ...here.
	* sysdeps/mips/ftestexcept.c: Moved to...
	* sysdeps/mips/fpu/ftestexcept.c: ...here.

1999-10-29  Jakub Jelinek  <jakub@redhat.com>

	* stdlib/longlong.h: Avoid UDIV_TIME redefinition.
	* sysdeps/sparc/sparc32/dl-machine.h: Fix loading of SPARC v8plus
	libraries from statically linked programs.
	* sysdeps/unix/sysv/linux/sparc/bits/sigaction.h: POSIX 199309
	fix for sigaction on SPARC.
	Patches by David S. Miller <davem@redhat.com>.

	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h: Declare
	gregset_t and other required structures and defines for SPARC 64bit
	ABI as well, not only 32bit ABI.

1999-10-31  Andreas Jaeger  <aj@suse.de>

	* sysdeps/sparc/sparc64/fpu/bits/huge_val.h: Replace __USE_ISOC9X
	by __USE_ISOC99 and update comments.

	* math/complex.h: Update comments for ISO C99.
	* math/fenv.h: Likewise.
	* math/test-fenv.c: Likewise.
	* math/tgmath.h: Likewise.
	* libio/stdio.h: Likewise.
	* posix/sys/types.h: Likewise.
	* sysdeps/generic/inttypes.h: Likewise.
	* sysdeps/generic/stdint.h: Likewise.

1999-10-31  Ulrich Drepper  <drepper@cygnus.com>

	* manual/creature.texi (Feature Test Macros): Mention _ISOC99_SOURCE.

	* includes/features.h: Replace __USE_ISOC9X by __USE_ISOC99 and also
	recognize _ISOC99_SOURCE.
	* libio/stdio.h: Likewise.
	* math/math.h: Likewise.
	* math/bits/mathcalls.h: Likewise.
	* math/stdio.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* sysdeps/alpha/fpu/bits/mathdef.h: Likewise.
	* sysdeps/alpha/fpu/bits/mathinline.h: Likewise.
	* sysdeps/arm/bits/huge_val.h: Likewise.
	* sysdeps/generic/bits/mathdef.h: Likewise.
	* sysdeps/i386/bits/huge_val.h: Likewise.
	* sysdeps/i386/fpu/bits/mathdef.h: Likewise.
	* sysdeps/i386/fpu/bits/mathinline.h: Likewise.
	* sysdeps/ieee754/bits/huge_val.h: Likewise.
	* sysdeps/m68k/bits/huge_val.h: Likewise.
	* sysdeps/m68k/fpu/bits/mathdef.h: Likewise.
	* sysdeps/m68k/fpu/bits/mathinline.h: Likewise.
	* sysdeps/powerpc/bits/mathdef.h: Likewise.
	* sysdeps/powerpc/bits/mathinline.h: Likewise.
	* sysdeps/sparc/fpu/bits/mathdef.h: Likewise.
	* sysdeps/sparc/fpu/bits/mathinline.h: Likewise.
	* sysdeps/sparc/sparc32/fpu/bits/huge_val.h: Likewise.
	* wcsmbs/wchar.h: Likewise.

	* sysdeps/powerpc/bits/mathdef.h: Moved to...
	* sysdeps/powerpc/fpu/bits/mathdef.h: ...here.
	* sysdeps/powerpc/bits/mathinline.h: Moved to...
	* sysdeps/powerpc/fpu/bits/mathinline.h: ...here.
	* sysdeps/powerpc/bits/fenv.h: Moved to...
	* sysdeps/powerpc/fpu/bits/fenv.h: ...here.

1999-10-31  Andreas Jaeger  <aj@suse.de>

	* manual/math.texi (Errors in Math Functions): Correct TeX code.

1999-10-31  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc:  Change comments to use ISO C99 instead of
	ISO C9x.
	* math/w_lgamma.c: Likewise.
	* math/w_lgammaf.c: Likewise.
	* math/w_lgammal.c: Likewise.
	* math/test-fenv.c: Likewise.
	* sysdeps/ieee754/ldbl-96/printf_fphex.c: Likewise.
	* sysdeps/ieee754/ldbl-128/printf_fphex.c: Likewise.
	* sysdeps/generic/printf_fphex.c: Likewise.

1999-10-31  Andreas Jaeger  <aj@suse.de>

	* manual/arith.texi (Parsing of Floats): Remove C from ISO C comment.

	* manual/math.texi: Change ISO C9x to ISO C99.
	* manual/startup.texi: Likewise.
	* manual/stdio.texi: Likewise.

1999-10-31  Andreas Jaeger  <aj@suse.de>

	* manual/arith.texi: Change ISO C9x to ISO C99.
	* manual/time.texi (Low-Level Time String Parsing): Likewise.

1999-10-30  Ulrich Drepper  <drepper@cygnus.com>

	* socket/Makefile (distribute): Add ifreq.h.

	* manual/time.texi (Formatting Date and Time): Revise comments about
	origins of the formats with ISO C99 references.

1999-10-30  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/ifreq.h: New file.

1999-10-29  Andreas Jaeger  <aj@suse.de>

	* manual/arith.texi (Parsing of Floats): Document the hexadecimal
	input format; mention that strtof and strtold are part of ISO C99.

1999-10-29  Ulrich Drepper  <drepper@cygnus.com>

	* manual/math.texi (Errors in Math Functions): New section.
	* math/libm-err-tab.pl: Moved to...
	* manual/libm-err-tab.pl: ...here.
	* manual/Makefile: Add rules for math function error table generation.

	* stdlib/tst-strtod.c: Add more hexadecimal tests.

	* stdlib/strtod.c: Handle hexadecimal numbers with leading digit
	!= 1 correctly and more than one digit before decimal point..

1999-10-27  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/ifreq.h: New file.

	* resolv/res_hconf.c: Add missing includes to get all prototypes.
	(_res_hconf_reorder_addrs): Rewrite.  This never worked before.
	Reported by John DiMarco <jdd@cs.toronto.edu>.

	(_res_hconf_reorder_addrs): Made thread safe.
	(free_mem): New function, needed for malloc debugging.

1999-10-29  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/if_index.c (opensock): Move function to ...
	* sysdeps/generic/opensock.c (__opensock): ...here in a new file.
	* sysdeps/unix/sysv/linux/if_index.c: Change all callers of
	opensock to use __opensock.

	* socket/Makefile (routines): Add opensock.

	* include/sys/socket.h (__opensock): Add prototype declaration.

1999-10-29  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/mips/bits/ioctl-types.h: Added missing
	N_* constants.
	* sysdeps/unix/sysv/linux/powerpc/bits/termios.h: Likewise.

	* sysdeps/unix/sysv/linux/bits/ioctl-types.h (N_SYNC_PPP): Added
	new constant from Linux 2.3.25pre1.

	* sysdeps/unix/sysv/linux/linux_fsinfo.h (BFS_MAGIC): Added.

1999-10-29  Andreas Jaeger  <aj@suse.de>

	* math/libm-err-tab.pl: New file to generate a table of
	libm-test-ulps values.

1999-10-29  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/sys/ptrace.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/profil-counter.h: Expect
	struct sigcontext* object as second parameter for profil_counter.
	Patches by Jakub Jelinek <jakub@redhat.com>.

1999-10-29  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/fpathconf.c (__fpathconf): Handle reiserfs.
	* sysdeps/unix/sysv/linux/pathconf.c: Likewise.

	* sysdeps/unix/sysv/linux/linux_fsinfo.h: Add values for devpts,
	efs, qnx4 and reiser file systems.

1999-10-29  Andreas Jaeger  <aj@suse.de>

	* locale/Makefile (others): Set to localedef and locale for make
	clean.

	* debug/Makefile (generated): Add xtrace for make clean to work.

1999-10-29  Andreas Jaeger  <aj@suse.de>

	* stdlib/tst-strtod.c: Add two testcases for hexadecimal input.

1999-10-25  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc: Added code to ignore the given max ulps.
	(print_max_error): Check for ignore_max_ulp.
	(check_float_internal): Likewise.
	(parse_opt): Parse --ignore-max-ulp.
	(main): Initialize ignore_max_ulp.

1999-10-26  Andreas Jaeger  <aj@suse.de>

	* stdlib/msort.c: Include <alloca.h> for prototype.
	Remove K&R compatibility and _quicksort prototype.

	* stdlib/qsort.c: Make code and comments 64 bit clean; clarify
	some comments.
	Reported by Bernd Loechner <loechner@informatik.uni-kl.de>.
	Remove K&R compatibility.
	Move prototype declaration to include/stdlib.h.
	Include <alloca.h> for prototype; include <limits.h> for CHAR_BIT.

	* include/stdlib.h: Prototype declaration for _quicksort.

1999-10-27  Andreas Jaeger  <aj@suse.de>

	* stdlib/rand_r.c (rand_r): Really use 31 bits, the result was
	shifted a bit too much.
	Reported by Eugen Dedu <dedu@ese-metz.fr>.

1999-10-25  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/gethnamaddr.c: Account bytes needed for alignment in
	buflen.  Patch by Olaf Kirch <okir@lst.de>.

	* md5-crypt/md5test.c: Correct names of MD5 functions after
	removing of public names.

	* configure.in: Don't allow --enable-kernel without parameter.

1999-10-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/libm-test-ulps: Remove entries caused by +-0
	problems.

1999-10-25  Thorsten Kukuk  <kukuk@suse.de>

	* md5-crypt/md5.h: Remove prototypes for public interface.  md5 is
	only used internally.
	* md5-crypt/md5-crypt.c: Use internal names for md5 functions,
	remove weak alias for public names.
	* md5-crypt/md5.c: Remove weak aliase.

1999-10-25  Andreas Jaeger  <aj@suse.de>

	* math/README.libm-test: New file, documents libm-test.inc.

1999-10-25  Andreas Jaeger  <aj@suse.de>

	* math/gen-libm-test.pl: Only generate a new ulps file when -n is
	given.
	(print_ulps_file): Fix loops to not read @tests and @functions
	since those are not initialized with -n now.
	(parse_ulps): Set $results{..}{"kind"}.

1999-10-25  Andreas Jaeger  <aj@suse.de>

	* math/gen-libm-test.pl (parse_ulps): Ignore 0 has ulp.

	* math/libm-test.inc (check_float_internal): Don't print ulps for
	wrong sign of zero.

1999-10-20  Andreas Jaeger  <aj@suse.de>

	* manual/socket.texi (Address Formats): Describe usage of AF_UNIX
	versus AF_LOCAL.
	Patch by Robert Bihlmeyer <robbe@orcus.priv.at>.

1999-10-24  Ulrich Drepper  <drepper@cygnus.com>

	* math/libm-test.inc: Disable some boundary case tests for inline
	function testing.

	* math/math.h: Pretty printing.

	* sysdeps/i386/fpu/e_atanh.S: Correct handling of NaN.
	* sysdeps/i386/fpu/e_atanhf.S: Likewise.
	* sysdeps/i386/fpu/e_atanhl.S: Likewise.
	* sysdeps/i386/fpu/e_log10.S: Likewise.
	* sysdeps/i386/fpu/e_log10f.S: Likewise.
	* sysdeps/i386/fpu/e_log10l.S: Likewise.
	* sysdeps/i386/fpu/s_log1p.S: Likewise.
	* sysdeps/i386/fpu/s_log1pf.S: Likewise.
	* sysdeps/i386/fpu/s_log1pl.S: Likewise.
	* sysdeps/i386/fpu/s_log2.S: Likewise.
	* sysdeps/i386/fpu/s_log2f.S: Likewise.
	* sysdeps/i386/fpu/s_log2l.S: Likewise.

	* sysdeps/i386/fpu/libm-test-ulps: New file.

	* sysdeps/i386/fpu/bits/mathinline.h (__expm1_code): Correct return
	value for x == 0.
	(pow): Correct case x == 0.
	(__sgn1l): Correct handling of -0.0.

1999-10-22  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc (asinh_test): Add test for NaN as input parameter.
	(atan_test): Likewise.
	(atanh_test): Likewise.
	(atan2_test): Likewise.
	(carg_test): Likewise.
	(ceil_test): Likewise.
	(cos_test): Likewise.
	(cosh_test): Likewise.
	(cpow_test): Likewise.
	(erf_test): Likewise.
	(erfc_test): Likewise.
	(exp_test): Likewise.
	(exp10_test): Likewise.
	(exp2_test): Likewise.
	(expm1_test): Likewise.
	(fabs_test): Likewise.
	(floor_test): Likewise.
	(fmod_test): Likewise.
	(gamma_test): Likewise.
	(lgamma_test): Likewise.
	(log10_test): Likewise.
	(log1p_test): Likewise.
	(log2_test): Likewise.
	(logb_test): Likewise.
	(nearbyint_test): Likewise.
	(remainder_test): Likewise.
	(remquo_test): Likewise.
	(sin_test): Likewise.
	(sincos_test): Likewise.
	(sinh_test): Likewise.
	(sqrt_test): Likewise.
	(tan_test): Likewise.
	(tanh_test): Likewise.
	(tgamma_test): Likewise.

1999-10-21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/ieee754/ldbl-96/s_nexttoward.c: If x == y, return y.

	* sysdeps/ieee754/dbl-64/e_lgamma_r.c: Don't handle -Inf special.

	* sysdeps/ieee754/dbl-64/e_gamma_r.c (__ieee754_gamma_r): Check
	for -Inf and return NaN.

	* configure.in: Correct test for Cygnus gcc versions.

1999-10-21  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc (cimag_test): New function, tests cimag.
	(creal_test): New function, tests creal.
	(conj_test): New function, tests conj.
	(main): Add new functions.

1999-10-20  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc: Rewrite to allow different deltas for real
	and imaginary part of complex functions.
	* math/gen-libm-test.pl: Likewise.

1999-10-19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/s_nextafterl.c: Add __nextafterl and nextafterl
	aliases.

	* sysdeps/ieee754/flt-32/e_lgammaf_r.c: Don't handle -Inf special.

	* sysdeps/ieee754/flt-32/e_gammaf_r.c (__ieee754_gammaf_r): Check
	for -Inf and return NaN.

	* math/gen-libm-test.pl: Fix program name in help message.

	* math/libm-test.inc (check_complex): It's Imaginary, not Complex.

	* math/libm-test.inc (gamma_test): Result of gamma(-inf) is +inf.

	* sysdeps/i386/Implies: Correct order of libm directories.

1999-10-19  Andreas Jaeger  <aj@suse.de>

	* include/bits/ipc.h: Remove K&R compatibility.
	* include/libintl.h: Likewise.
	* include/math.h: Likewise.
	* include/mntent.h: Likewise
	* include/netdb.h: Likewise.
	* include/pwd.h: Likewise.
	* include/sched.h: Likewise.
	* include/shadow.h: Likewise
	* include/stdlib.h: Likewise.
	* include/sys/file.h: Likewise.
	* include/sys/gmon.h: Likewise.
	* include/sys/ioctl.h: Likewise.
	* include/sys/mman.h: Likewise.
	* include/sys/resource.h: Likewise.
	* include/sys/socket.h: Likewise.
	* include/sys/stat.h: Likewise.
	* include/sys/sysinfo.h: Likewise.
	* include/sys/time.h: Likewise.
	* include/sys/times.h: Likewise.
	* include/sys/uio.h: Likewise.
	* include/sys/wait.h: Likewise.
	* include/termios.h: Likewise.
	* include/time.h: Likewise.
	* include/ulimit.h: Likewise.
	* include/utmp.h: Likewise.
	* include/wchar.h: Likewise.
	* include/wctype.h: Likewise.

1999-10-19  Andreas Jaeger  <aj@suse.de>

	* math/libm-test.inc: Remove one K&R compatibility.
	(main): Enable nexttoward_test.

	* math/gen-libm-test.pl (output_ulps): Output name of Ulps file to
	libm-test-ulps.h; pretty print output a bit.

1999-10-19  Andreas Jaeger  <aj@suse.de>

	* iconv/iconv_prog.c (main): Set exit value in case that reading
	from stdin failed [PR libc/1404].

1999-10-18  Andreas Jaeger  <aj@suse.de>

	Added improved math testsuite:
	* math/libm-test.inc: New file, contains all tests from
	libm-test.c but in a different form.
	* math/libm-test.c: Removed.
	* sysdeps/generic/libm-test-ulps: New file: Fallback ulps file.
	* math/gen-libm-test.pl: New file: Preprocessor.
	* math/test-double.c: Adopted to new testsuite.
	* math/test-idouble.c: Likewise.
	* math/test-float.c: Likewise.
	* math/test-ifloat.c: Likewise.
	* math/test-ldouble.c: Likewise.
	* math/test-ildoubl.c: Likewise.
	* math/Makefile: Added rules to generate new suite.

1999-10-18  Ulrich Drepper  <drepper@cygnus.com>

	* inet/rcmd.c (iruserok2): Initialize isbad to -1 [PR libc/1405].
	Patch by J. Richard Sladkey <jrs@world.std.com>.

	* scripts/config.sub: Update from latest autoconf version.
	* scripts/config.guess: Likewise.

1999-10-18  Andreas Jaeger  <aj@suse.de>

	* inet/arpa/inet.h: Remove K&R compatibility.
	* math/fenv.h: Likewise.

1999-10-18  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/kernel_sigaction.h (struct
	kernel_sigaction): Remove K&R compatibility.
	* sysdeps/unix/sysv/linux/net/if.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/acct.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/fsuid.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/io.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/kdaemon.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/klog.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/mount.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/prctl.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/ptrace.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/quota.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/sendfile.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/swap.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/sysctl.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/sysinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/timex.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sys/vm86.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/sys/perm.h: Likewise.

1999-10-18  Andreas Jaeger  <aj@suse.de>

	* iconv/iconv_prog.c (process_block): Save errno value from iconv call.
	Patch by Bruno Haible <haible@ilog.fr> [libc/1402].

1999-10-18  Ulrich Drepper  <drepper@cygnus.com>

	* po/gl.po: New file.

1999-10-18  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/alpha/bits/sigaction.h: Correct
	namespace selection.

1999-10-18  Andreas Schwab  <schwab@suse.de>

	* debug/xtrace.sh: Use TERMINAL_PROG instead of TERM to avoid
	clash with the TERM environment variable.

1999-10-18  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/s_cproj.c (__cproj): Fix bug: NaN + i NaN
	returns now NaN + i NaN.
	* sysdeps/generic/s_cprojf.c (__cprojf): Likewise
	* sysdeps/generic/s_cprojl.c (__cprojl): Likewise.

1999-10-18  Andreas Jaeger  <aj@suse.de>

	* include/aio.h: Remove K&R compatiblity.
	* include/alloca.h: Likewise.
	* include/db.h: Likewise.
	* include/dirent.h: Likewise.
	* include/fcntl.h: Likewise.
	* include/fpu_control.h: Likewise.
	* include/glob.h: Likewise.
	* include/grp.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/errno.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sched.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/siginfo.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.

	* include/execinfo.h: Add __THROW.

1999-10-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/mips/Implies: Remove wordsize-32 reference.
	* sysdeps/mips/mips3/Implies: Add it here.

1999-10-17  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Add various platform and architecture extensions.

	* locale/lc-collate.c (_nl_postload_collate): Disable code for now.
	* locale/setlocale.c (setlocale): Don't call _nl_find_locale for
	LC_ALL.

	* socket/sys/socket.h: Remove K&R compatibility.

1999-10-16  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/bits/in.h: Added struct in_pktinfo.

1999-10-15  Andreas Jaeger  <aj@suse.de>

	* stdlib/Makefile (tests): Added tst-xpg-basename.

	* stdlib/tst-xpg-basename.c: New test file.

1999-10-14  Cristian Gafton  <gafton@redhat.com>

	* string/bits/string2.h (__stpcpy_small): Make -pedantic shut up.

1999-10-14  Andreas Jaeger  <aj@suse.de>

	* resolv/inet_addr.c (inet_aton): Fix last patch.  The little
	endian version works for both endiannesses.

	* sysdeps/unix/sysv/linux/sleep.c (__sleep): Optimize for zero
	seconds.

1999-10-12  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/sys/ucontext.h: Don't define
	register names unconditionally, only if __USE_GNU.

	* debug/Makefile: Fix rules to generate pcprofiledump.

	* include/ucontext.h: New file.

	* locale/setlocale.c: Fix gcc warning about uninitialized variable.

1999-10-12  Andreas Jaeger  <aj@suse.de>

	* stdlib/tst-environ.c: Include <string.h> for strcpy declaration.

	* math/basic-test.c: Fix typo.

	* locale/programs/xstrdup.c: Include string.h for glibc
	compilation to get string prototypes.

	* sysdeps/unix/sysv/linux/alpha/sys/ucontext.h: Add definition of
	gregset_t and fpregset_t.

	* sysdeps/generic/s_nexttowardf.c: Add parenthesis to shut up gcc
	warnings.  Correct value for x == 0.

	* argp/argp-help.c: Remove broken definition of flockfile and
	funlockfile.

1999-10-12  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/alpha/bits/sigaction.h: Update to match
	generic Linux version.

1999-10-12  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/sigaction.h: Remove K&R compatibility.

1999-10-11  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h: Add gregset_t
	and fpregset_t definitions.

	* malloc/memprof.c (GETSP): Define for PowerPC.
	(GETTIME): Fix generic version.

1999-10-10  Philip Blundell  <philb@gnu.org>

	* sunrpc/xdr_float.c (LSW): Depend on __FLOAT_WORD_ORDER not
	__BYTE_ORDER.

1999-10-11  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/powerpc/socket.S: Adjust asm syntax.
	* sysdeps/unix/sysv/linux/powerpc/clone.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/syscall.S: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/brk.S: Likewise.

	* sysdeps/powerpc/Makefile [math] (libm-support): Remove t_sqrt.

	* sysdeps/powerpc/e_sqrt.c: Moved to...
	* sysdeps/powerpc/fpu/e_sqrt.c: ...here.
	* sysdeps/powerpc/e_sqrtf.c: Moved to...
	* sysdeps/powerpc/fpu/e_sqrtf.c: ...here.

	* sysdeps/powerpc/submul_1.S: Adjust asm syntax.
	* sysdeps/powerpc/sub_n.S: Likewise.
	* sysdeps/powerpc/strlen.S: Likewise.
	* sysdeps/powerpc/strcpy.S: Likewise.
	* sysdeps/powerpc/strcmp.S: Likewise.
	* sysdeps/powerpc/strchr.S: Likewise.
	* sysdeps/powerpc/stpcpy.S: Likewise.
	* sysdeps/powerpc/setjmp.S: Likewise.
	* sysdeps/powerpc/rshift.S: Likewise.
	* sysdeps/powerpc/ppc-mcount.S: Likewise.
	* sysdeps/powerpc/mul_1.S: Likewise.
	* sysdeps/powerpc/memset.S: Likewise.
	* sysdeps/powerpc/lshift.S: Likewise.
	* sysdeps/powerpc/dl-start.S: Likewise.
	* sysdeps/powerpc/bzero.S: Likewise.
	* sysdeps/powerpc/bsd-setjmp.S: Likewise.
	* sysdeps/powerpc/bsd-_setjmp.S: Likewise.
	* sysdeps/powerpc/addmul_1.S: Likewise.
	* sysdeps/powerpc/add_n.S: Likewise.
	* sysdeps/powerpc/__longjmp.S: Likewise.
	* sysdeps/powerpc/elf/start.S: Likewise.

1999-10-11  Cristian Gafton  <gafton@redhat.com>

	* sysdeps/unix/sysv/linux/alpha/bits/sigaction.h: Declare
	SA_SIGINFO.

1999-10-10  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/atexit.c (initial): New variable.  Use to initialize
	__exit_funcs.
	* stdlib/exit.c (exit): Beware to not free statically allocated
	list element [PR libc/1305].

	* stdlib/xpg_basename.c (__xpg_basename): Don't return pointer to
	slash before the basename [PR libc/1383].

	* argp/argp.h: Fix typo in last patch.

	* sysdeps/powerpc/sysdep.h: New file.
	* sysdeps/unix/powerpc/sysdep.h: New file.
	* sysdeps/unix/sysv/linux/powerpc/sysdep.h: Include
	sysdeps/unix/powerpc/sysdep.h, not sysdeps/unix/sysdep.h.
	* sysdeps/powerpc/fpu/s_copysign.S: Use symbolic names for registers
	instead of bare numbers.
	* sysdeps/powerpc/fpu/s_fabs.S: Likewise.
	* sysdeps/powerpc/fpu/s_fmax.S: Likewise.
	* sysdeps/powerpc/fpu/s_fmin.S: Likewise.

	* sysdeps/hppa/sysdep.h: New file.

1999-10-10  Andreas Jaeger  <aj@suse.de>

	* misc/sgtty.h: Fix typo in last patch.

1999-10-09  Ulrich Drepper  <drepper@cygnus.com>

	* nss/getXXbyYY_r.c (do_weak_alias): Remove unnecessary parenthesis.
	* sysdeps/powerpc/s_copysign.S: Move to...
	* sysdeps/powerpc/fpu/s_copysign.S: ...here.  Use portable asm syntax.
	* sysdeps/powerpc/s_copysignf.S: Move to...
	* sysdeps/powerpc/fpu/s_copysignf.S: ...here.
	* sysdeps/powerpc/s_fabs.S: Move to...
	* sysdeps/powerpc/fpu/s_fabs.S: ...here.  Use portable asm syntax.
	* sysdeps/powerpc/s_fabsf.S: Move to...
	* sysdeps/powerpc/fpu/s_fabsf.S: ...here.
	* sysdeps/powerpc/s_fdim.c: Move to...
	* sysdeps/powerpc/fpu/s_fdim.c: ...here.
	* sysdeps/powerpc/s_fdimf.c: Move to...
	* sysdeps/powerpc/fpu/s_fdimf.c: ...here.
	* sysdeps/powerpc/s_fmax.S: Move to...
	* sysdeps/powerpc/fpu/s_fmax.S: ...here.  Use portable asm syntax.
	* sysdeps/powerpc/s_fmaxf.S: Move to...
	* sysdeps/powerpc/fpu/s_fmaxf.S: ...here.
	* sysdeps/powerpc/s_fmin.S: Move to...
	* sysdeps/powerpc/fpu/s_fmin.S: ...here.  Use portable asm syntax.
	* sysdeps/powerpc/s_fminf.S: Move to...
	* sysdeps/powerpc/fpu/s_fminf.S: ...here.
	* sysdeps/powerpc/s_isnan.S: Move to...
	* sysdeps/powerpc/fpu/s_isnan.c: ...here.
	* sysdeps/powerpc/s_isnanf.S: Move to...
	* sysdeps/powerpc/fpu/s_isnanf.S: ...here.
	* sysdeps/powerpc/s_llrint.c: Move to...
	* sysdeps/powerpc/fpu/s_llrint.c: ...here.
	* sysdeps/powerpc/s_llrintf.c: Move to...
	* sysdeps/powerpc/fpu/s_llrintf.c: ...here.
	* sysdeps/powerpc/s_llround.c: Move to...
	* sysdeps/powerpc/fpu/s_llround.c: ...here.
	* sysdeps/powerpc/s_llroundf.c: Move to...
	* sysdeps/powerpc/fpu/s_llroundf.c: ...here.
	* sysdeps/powerpc/s_lrint.c: Move to...
	* sysdeps/powerpc/fpu/s_lrint.c: ...here.
	* sysdeps/powerpc/s_lrintf.S: Move to...
	* sysdeps/powerpc/fpu/s_lrintf.S: ...here.
	* sysdeps/powerpc/s_lround.c: Move to...
	* sysdeps/powerpc/fpu/s_lround.c: ...here.
	* sysdeps/powerpc/s_lroundf.c: Move to...
	* sysdeps/powerpc/fpu/s_lroundf.c: ...here.
	* sysdeps/powerpc/s_rint.c: Move to...
	* sysdeps/powerpc/fpu/s_rint.c: ...here.
	* sysdeps/powerpc/s_rintf.c: Move to...
	* sysdeps/powerpc/fpu/s_rintf.c: ...here.
	* sysdeps/powerpc/t_sqrt.c: Move to...
	* sysdeps/powerpc/fpu/t_sqrt: ...here.
	* sysdeps/powerpc/w_sqrt.c: Move to...
	* sysdeps/powerpc/fpu/w_sqrt.c: ...here.
	* sysdeps/powerpc/w_sqrtf.c: Move to...
	* sysdeps/powerpc/fpu/w_sqrtf.c: ...here.
	* configure.in: Support platforms which have no .text pseudo-op.
	Patches partly by Jimi X <jimix@pobox.com>.

	* Makeconfig: Look also in all subdirs for shlib-versions files.

	* malloc/memprof.sh: Fix --help string a bit.

	* argp/argp.h: Remove K&R compatiblity.
	* assert/assert.h: Likewise.
	* catgets/nl_types.h: Likewise.
	* ctype/ctype.h: Likewise.
	* db/db.h: Likewise.
	* db/ndbm.h: Likewise.
	* db2/db.h: Likewise.
	* db2/db_185.h: Likewise.
	* debug/execinfo.h: Likewise.
	* dirent/dirent.h: Likewise.
	* dlfcn/dlfcn.h: Likewise.
	* gmon/sys/gmon.h: Likewise.
	* grp/grp.h: Likewise.
	* iconv/gconv.h: Likewise.
	* iconv/iconv.h: Likewise.
	* include/execinfo.h: Likewise.
	* inet/aliases.h: Likewise.
	* inet/netinet/ether.h: Likewise.
	* inet/netinet/in.h: Likewise.
	* intl/libintl.h: Likewise.
	* io/fcntl.h: Likewise.
	* io/fts.h: Likewise.
	* io/ftw.h: Likewise.
	* io/utime.h: Likewise.
	* io/sys/poll.h: Likewise.
	* io/sys/stat.h: Likewise.
	* io/sys/statfs.h: Likewise.
	* io/sys/statvfs.h: Likewise.
	* libio/libio.h: Likewise.
	* libio/stdio.h: Likewise.
	* linuxthreads/sysdeps/pthread/pthread.h: Likewise.
	* locale/locale.h: Likewise.
	* login/pty.h: Likewise.
	* login/utmp.h: Likewise.
	* malloc/mcheck.h: Likewise.
	* math/complex.h: Likewise.
	* math/math.h: Likewise.
	* math/math_private.h: Likewise.
	* misc/err.h: Likewise.
	* misc/fstab.h: Likewise.
	* misc/libgen.h: Likewise.
	* misc/mntent.h: Likewise.
	* misc/regexp.h: Likewise.
	* misc/search.h: Likewise.
	* misc/sgtty.h: Likewise.
	* misc/ttyent.h: Likewise.
	* misc/sys/cdefs.h: Likewise.
	* misc/sys/file.h: Likewise.
	* misc/sys/ioctl.h: Likewise.
	* misc/sys/mman.h: Likewise.
	* misc/sys/select.h: Likewise.
	* misc/sys/syslog.h: Likewise.
	* misc/sys/uio.h: Likewise.
	* misc/sys/ustat.h: Likewise.
	* nss/nss.h: Likewise.
	* posix/sched.h: Likewise.
	* posix/unistd.h: Likewise.
	* posix/wordexp.h: Likewise.
	* posix/sys/times.h: Likewise.
	* posix/sys/utsname.h: Likewise.
	* posix/sys/wait.h: Likewise.
	* pwd/pwd.h: Likewise.
	* resolv/netdb.h: Likewise.
	* resolv/resolv.h: Likewise.
	* resource/ulimit.h: Likewise.
	* resource/sys/resource.h: Likewise.
	* resource/sys/vlimit.h: Likewise.
	* resource/sys/vtimes.h: Likewise.
	* rt/aio.h: Likewise.
	* setjmp/setjmp.h: Likewise.
	* shadow/shadow.h: Likewise.
	* signal/signal.h: Likewise.
	* socket/socket.h: Likewise.
	* stdio/stdio.h: Likewise.
	* stdio-common/_itoa.h: Likewise.
	* stdio-common/_itowa.h: Likewise.
	* stdio-common/printf.h: Likewise.
	* stdlib/alloca.h: Likewise.
	* stdlib/fmtmsg.h: Likewise.
	* stdlib/monetary.h: Likewise.
	* stdlib/stdlib.h: Likewise.
	* stdlib/ucontext.h: Likewise.
	* streams/stropts.h: Likewise.
	* string/argz.h: Likewise.
	* string/envz.h: Likewise.
	* string/string.h: Likewise.
	* string/strings.h: Likewise.
	* string/bits/string2.h: Likewise.
	* sunrpc/rpc/auth.h: Likewise.
	* sunrpc/rpc/auth_des.h: Likewise.
	* sunrpc/rpc/auth_unix.h: Likewise.
	* sunrpc/rpc/clnt.h: Likewise.
	* sunrpc/rpc/des_crypt.h: Likewise.
	* sunrpc/rpc/netdb.h: Likewise.
	* sunrpc/rpc/pmap_clnt.h: Likewise.
	* sunrpc/rpc/pmap_prot.h: Likewise.
	* sunrpc/rpc/pmap_rmt.h: Likewise.
	* sunrpc/rpc/rpc_msg.h: Likewise.
	* sunrpc/rpc/svc.h: Likewise.
	* sunrpc/rpc/svc_auth.h: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/sigstack.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.
	* sysvipc/sys/ipc.h: Likewise.
	* sysvipc/sys/msg.h: Likewise.
	* sysvipc/sys/sem.h: Likewise.
	* sysvipc/sys/shm.h: Likewise.
	* termios/termios.h: Likewise.
	* time/time.h: Likewise.
	* time/sys/time.h: Likewise.
	* time/sys/timeb.h: Likewise.
	* wcsmbs/wchar.h: Likewise.
	* wctype/wctype.h: Likewise.

1999-10-05  Roland McGrath  <roland@baalperazim.frob.com>

	* mach/mach/mig_support.h [! __USE_GNU]: Use #error to insist that
	_GNU_SOURCE be defined.

1999-10-08  Ulrich Drepper  <drepper@cygnus.com>

	* ctype/ctype.h: Pretty print.

	* po/cs.po: Fix typos.

	* nis/nss_nisplus/nisplus-parser.c (_nss_nisplus_parse_spent): Fix
	handling of empty entries.  [PR libc/1345]
	Patch by Thorsten Kukuk <kukuk@suse.de>.

1999-10-08  Andreas Schwab  <schwab@suse.de>

	* debug/xtrace.sh: Fix quoting bugs.  Implement --help and --version.

1999-10-08  Andreas Schwab  <schwab@suse.de>

	* debug/pcprofiledump.c: Fix typos.

1999-10-07  Andreas Jaeger  <aj@suse.de>

	* math/Makefile (tests): Added basic-tests.

	* math/basic-test.c: New file.  Contains function basic_tests from
	libm-test.

1999-10-07  Andreas Schwab  <schwab@suse.de>

	* malloc/memprof.sh: Fix quoting bugs.

1999-10-08  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/europe: Update from tzdata1999h.

1999-10-07  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Update from last gABI draft.

	* elf/elf.h: Remove EM_486 entry.
	* sysdeps/i386/dl-machine.h (elf_machine_matches_host): Remove
	test for EM_486.

1999-10-07  Ulrich Drepper  <drepper@cygnus.com>

	* debug/Makefile (install-bin): Add pcprofiledump and xtrace.
	Add rules for both programs.
	* debug/pcprofiledump.c: New file.
	* debug/xtrace.sh: New file.
	* debug/pcprofile.c: Allow creating output file.  Add magic signature
	to let reader recognize file format.

1999-10-06  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-ctype.c (ctype_read): Fix typos in last patch.

1999-10-05  Andreas Jaeger  <aj@suse.de>

	* locale/programs/ld-identification.c: Fix typo in comment.
	* locale/programs/ld-messages.c: Likewise.
	* locale/programs/ld-monetary.c: Likewise.
	* locale/programs/ld-name.c: Likewise.

	* locale/programs/ld-collate.c (read_lc_collate): Fix typo in comment.
	(collate_read): Remove unnecessary comparisons with ignore_content.

	* locale/programs/ld-ctype.c (ctype_finish): Loop only over actual
	assigned elements.
	(ctype_read): Remove unnecessary comparisons with ignore_content.
	Fix typos in comments.

	* locale/programs/ld-address.c (STR_ELEM): Remove unnecessary
	comparisons with ignore_content.

1999-10-05  Ulrich Drepper  <drepper@cygnus.com>

	* po/cs.po: Update.

	* time/time.h: Move __gmtime_r declaration to ...
	* include/time.h: ...here.

1999-10-05  Andreas Jaeger  <aj@suse.de>

	* manual/message.texi (The message catalog files): Fix description
	to match gencat implementation and Unix98: Message fields are
	separated by a single blank space.

1999-10-05  Andreas Jaeger  <aj@suse.de>

	* manual/string.texi (Search Functions): Add missing end for
	memrchr description.

1999-10-04  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/memprof.sh: Various small cleanups.  Add short options.
	Write error messages to stderr.

	* malloc/Makefile ($(objpfx)memprof): Fix typo in rule.

	* malloc/memprof.sh: Take options to control memprofstat.

	* malloc/Makefile: Add rule to generate memprof script.
	* malloc/memprof.sh: New file.

	* elf/ldd.bash.in: Add "Usage: " in help message to comply with
	GNU standard.

1999-10-04  Andreas Jaeger  <aj@suse.de>

	* configure.in: Allow makeinfo 4.*.

1999-10-04  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c: Correct last patch and use outchar
	instead of PUTC to output single characters.
	* stdio-common/Makefile (tests): Add bug13.
	* stdio-common/bug13.c: New file.

	* configure.in: Add additional options --with-gd-include and
	--with-gd-lib to help people with strange installations.

	* malloc/Makefile: Add libdl dependency to libmemprof.so.
	* malloc/Depend: New file.

1999-10-04  Andreas Jaeger  <aj@suse.de>

	* timezone/README: Change wording to not mention the current
	version.  This way we can't forget to update the file.

1999-10-04  Andreas Jaeger  <aj@suse.de>

	* manual/time.texi (Basic CPU Time): Fix typo.
	Reported by Ben Pfaff <pfaffben@msu.edu>.

1999-10-04  Ulrich Drepper  <drepper@cygnus.com>

	* string/string.h: Move __memrchr declaration to ...
	* include/string.h: ...here.

1999-10-03  Ulrich Drepper  <drepper@cygnus.com>

	* string/Makefile (routines): Add memrchr.

	* sysdeps/generic/memrchr.c: Don't undef memchr, undef memrchr.
	Correct order of tests for matching bytes.

	* string/tester.c: Add tests for memrchr.

	* sysdeps/i386/i486/bits/string.h (__memrchr): Correct implementation.
	Start from the last character and take decrement not increment
	into account for correction in return line.  Add memrchr alias.
	* sysdeps/i386/bits/string.h: Likewise.

1999-10-04  Roland McGrath  <roland@baalperazim.frob.com>

	* stdlib/stdlib.h [__USE_BSD]: Declare getloadavg.

1999-10-03  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/i486/bits/string.h (__memrchr): New function.

	* sysdeps/i386/bits/string.h (__memrchr): Add cld to comply to
	conventions.

	* string/Versions: Export memrchr.

1999-10-04  Roland McGrath  <roland@baalperazim.frob.com>

	* misc/Versions (GLIBC_2.2): Add getloadavg.
	* misc/Makefile (routines): Add getloadavg.
	* sysdeps/generic/getloadavg.c: New file.
	* sysdeps/mach/getloadavg.c: New file.
	* sysdeps/unix/sysv/linux/getloadavg.c: New file.

	* sysdeps/generic/memrchr.c: New file, adapted from memchr.c.
	* sysdeps/i386/bits/string.h (__memrchr): New function.
	* string/string.h: Declare memrchr, __memrchr.
	* manual/string.texi (Search Functions): Document memrchr.

1999-10-03  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Accept --with-gd option and set all libgd-LDFLAGS,
	CFLAGS-memprofstat.c, and LIBGD variables.
	* config.make.in: Add LIBGD.
	* malloc/Makefile: Add rules to generate libmemprof.so and
	memprofstat.
	* malloc/memprof.c: New file.
	* malloc/memprofstat.c: New file.

1999-10-02  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/nsap_addr.c (inet_nsap_addr): Little optimization.

	* resolv/inet_ntop.c (inet_ntop4): Little optimization.
	(inet_ntop6): Likewise.

	* resolv/inet_net_pton.c (inet_net_pton_ipv4): Prevent buffer
	overruns.

	* resolv/tst-aton.c (main): Add more tests.

	* resolv/inet_addr.c (inet_aton): Correct some problems with to
	large numbers.  Optimize a bit.

1999-10-01  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/inet_net_ntop.c (inet_net_ntop_ipv4): If BITS is zero
	account for added '0'.

	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyaddr_r): Align
	handling of IPv6 tunnel address handling with bind 8.2.1.  Allow
	len argument to be greater than needed address size.

1999-10-01  Andreas Jaeger  <aj@suse.de>

	* locale/programs/ld-collate.c (insert_value): Add cast to avoid
	warning.
	* intl/finddomain.c (_nl_find_domain): Likewise.

1999-09-30  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/alpha/ioperm.c: Disable debug messages.

1999-09-30  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/lshift.S: Correct assembler commands to fix warnings.
	* sysdeps/i386/rshift.S: Likewise.
	* sysdeps/i386/strchrnul.S: Likewise.
	* sysdeps/i386/strchr.S: Likewise.
	Patch by Michael Deutschmann <michael@talamasca.wkpowerlink.com>,
	PR libc/1339.

1999-09-30  Andreas Jaeger  <aj@suse.de>

	* manual/examples/pipe.c: Close other end of pipe to make example work.

1999-10-01  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/checktab.awk: Update from tzcode1999g.
	* timezone/tzselect.ksh: Likewise.
	* timezone/africa: Update from tzdata1999g.
	* timezone/asia: Likewise.
	* timezone/australasia: Likewise.
	* timezone/europe: Likewise.
	* timezone/northamerica: Likewise.
	* timezone/southamerica: Likewise.
	* timezone/iso3166.tab: Likewise.
	* timezone/zone.tab: Likewise.

1999-09-27  Andreas Jaeger  <aj@suse.de>

	* resolv/netdb.h: Remove declaration of getnodebyname.  It has
	been renamed to getipnodebyname.  Move flags around.

1999-09-27  Andreas Schwab  <schwab@suse.de>

	* manual/message.texi (Locating gettext catalog): Fix typos.

1999-09-27  Andreas Jaeger  <aj@suse.de>

	* manual/socket.texi (Out-of-Band Data): Correct example program,
	rename some variables for clarity.
	Reported by James Antill <james@and.org>, close PR libc/1329.

1999-09-27  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-collate.c (insert_value): Add hack to not
	crash in incomplete collate implementation.

	* locale/programs/ld-collate.c (read_directions): Read new token
	after accepting sorting rule.

1999-09-26  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/ld-ctype.c (charclass_symbolic_ellipsis): Fix
	error message printing.  Correctly test whether all characters of
	current token are used.
	(ctype_read): NUL terminate last_str.

1999-09-26  Thorsten Kukuk  <kukuk@suse.de>

	* nscd/connections.c: Invalidate caches on request.
	* nscd/nscd-client.h: Add INVALIDATE to request_type.
	* nscd/nscd.c: Add invalidate cache option.
	* nscd/nscd.conf: Change log directory to /var/log (FHS).

1999-09-24  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_nisplus/nisplus-parser.c (_nss_nisplus_parse_grent): Do
	not ovverwrite last group member with NULL pointer.
	Reported by Thomas Winder <thomas.winder@newlogic.at>.

1999-09-24  Andreas Jaeger  <aj@suse.de>

	* stdio-common/tst-printf.c (main): Add a testcase for large
	precision.  Reported by Tymm Twillman <tymm@coe.missouri.edu>.

1999-09-24  Andreas Schwab  <schwab@suse.de>

	* math/bits/mathcalls.h: Fix last change.  Also declare __finite.

1999-09-24  Andreas Jaeger  <aj@suse.de>

	* intl/finddomain.c (_nl_find_domain): Fix memory leak: Free
	normalized_codeset.  Reported by Belicky Zsolt <zsolt@prolan.hu>.

1999-09-23  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/unix/sysv/linux/Makefile [malloc] (CFLAGS-malloc.c): New
	variable.  Define MORECORE_CLEARS to 2.

	* malloc/malloc.c (cALLOc): Correctly handle systems where sbrk
	doesn't clear the contents of memory that is reallocated after
	decrementing the break value first.  Update comment about
	MORECORE_CLEARS, explaining the meaning of the values it can be
	set to.

1999-09-23  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_compat/compat-pwd.c (internal_getpwuid_r): Set errno in
	one more case.

	* sysdeps/i386/fpu/bits/mathinline.h (atan): Add st(1) to clobbers.
	(log): Likewise.
	(log10): Likewise.
	(log1p): Likewise.
	(log2): Likewise.

1999-09-22  Andreas Jaeger  <aj@suse.de>

	* stdio-common/tstscanf.c (main): Add test case from PR libc/1313
	reported by Ben Caradoc-Davies <bmcd@physics.otago.ac.nz>.

1999-09-22  Andreas Schwab  <schwab@suse.de>

	* stdio-common/vfscanf.c: Fix width handling when scanning floats.

1999-04-02  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/Makefile (CFLAGS-multiload.c): Change to allow building in
	the source directory.  Fixes PR libc/1059.

1999-09-21  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/repertoire.c (repertoire_find_value): Abort if
	rep parameter is NULL.
	(repertoire_find_symbol): Likewise.
	(repertoire_find_seq): Likewise.

1999-09-20  Jean-Louis Martineau  <martinea@IRO.UMontreal.CA>

	* nis/nss_compat/compat-pwd.c (getpwuid_plusgroup): Correct
	returned errno value in some cases.

1999-09-19  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile (modules): Add GBK.
	(distribute): Add gbk.c.
	* iconvdata/gbk.c: New file.
	* iconvdata/gconv-modules: Add GBK entry.
	Contributed by Sean Chen <sean.chen@turbolinux.com>.

	* locale/programs/ld-monetary.c (monetary_output): Remove
	byte-order code.

	* locale/programs/ld-time.c (time_output): Correct expected number
	of iov entries.

	* manual/filesys.texi (Testing File Access): Correct description of
	SUID.

1999-080-25  H.J. Lu  <hjl@gnu.org>

	* csu/defs.awk (.end): Only match with leading white spaces.
	(.align): Likewise.

1999-09-19  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/isomac.c: Add va_copy to allowed macros.

	* po/pl.po: Updated.

1999-09-17  Andreas Schwab  <schwab@suse.de>

	* Makefile (clean): Also remove $(postclean) files.

1999-09-15  Andreas Jaeger  <aj@suse.de>

	* pwd/Makefile (otherlibs): Add for building with static-nss.
	* inet/Makefile (otherlibs): Likewise.

1999-09-15  Andreas Jaeger  <aj@suse.de>

	* sysdeps/generic/aio_sigqueue.c (__aio_sigqueue): Use old style
	function definition to avoid a compilation failure.

1999-09-15  Andreas Jaeger  <aj@suse.de>

	* stdlib/tst-environ.c (main): Add getenv regression test for
	environment variable that's one character long.

1999-09-15  Andreas Jaeger  <aj@suse.de>

	* sysdeps/unix/sysv/linux/i386/sigaction.c: Protect real time
	signal definitions to let glibc compile with older Linux versions
	(2.0.10 to 2.1.100 or so).

1999-09-18  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/wait4.c (__wait4): When proc_wait returns EAGAIN,
	return zero to indicate no children died yet (assuming WNOHANG).

	* sysdeps/mach/hurd/setsid.c: #include <hurd/fd.h>.

1999-09-17  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/port2fd.c (_hurd_port2fd): Never change CTTYID port.

	* sysdeps/mach/hurd/setsid.c (__setsid): Fix return type -> pid_t.
	Return _hurd_pgrp instead of 0.

1999-09-19  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/brk.c (_hurd_set_brk): Deallocate and reallocate
	pages rather than just reprotecting them.  This way we don't hold on
	to the backing space.

	* hurd/hurdprio.c (_hurd_priority_which_map): Rearrange the code a bit.
	Use __munmap instead of __vm_deallocate.

1999-09-18  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nss_compat/compat-grp.c (getgrgid_plusgroup): Correct
	returned errno value in some cases.

1999-09-17  Andreas Jaeger  <aj@suse.de>

	* sysdeps/i386/Makefile (CFLAGS-initfini.s): Add also -mcpu=i386
	to override user settings.

1999-09-17  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/semctl.c: Copy the argument instead of
	using a pointer to it.

1999-09-16  Ulrich Drepper  <drepper@cygnus.com>

	* time/getdate.c (__getdate_r): Pass correct year to check_mday.
	Reported by Vern Staats <staatsvr@asc.hpc.mil>.

1999-09-14  Ulrich Drepper  <drepper@cygnus.com>

	* db2/mutex/sparc.gcc (TSL_UNSET): Dereference pointer.

	* elf/elf.h (PF_MASKOS): New definition.
	(EM_VAX): New definition.

1999-08-09  Scott Bambrough  <scottb@netwinder.org>

	* sysdeps/unix/sysv/linux/arm/sys/user.h: Added members
	'unsigned char ftype[8]', and 'unsigned int init_flag' to
	struct user_fp.  These were added in version 2.2.12 of the
	ARM Linux kernel.
	* sysdeps/unix/sysv/linux/arm/sys/elf.h: New file.
	* sysdeps/unix/sysv/linux/arm/sys/procfs.h: New file.
	The generic procfs.h included <asm/elf.h>.  This causes
	structure redefinition errors when <sys/user.h> and <sys/procfs.h>
	are included in the same source file.  Found when building GDB.

1999-09-13  Ulrich Drepper  <drepper@cygnus.com>

	* locale/langinfo.h: Remove byte-order dependent names.
	* locale/categories.def: Update after removal of byte-order dependent
	names.
	* locale/loadlocale.c (_nl_load_locale): Don't allow locale files
	with magic number in other byte order.
	* locale/newlocale.c (__newlocale): Remove byte-order dependent code.
	* locale/C-collate.c: Remove initializers for other byte-order.
	* locale/C-ctype.c: Likewise.
	* locale/C-monetary.c: Likewise.
	* locale/C-paper.c: Likewise.
	* locale/C-time.c: Likewise.
	* locale/lc-collate.c: Remove byte-order oriented initialization.
	* locale/lc-ctype.c: Likewise.
	* locale/lc-monetary.c: Likewise.
	* locale/lc-time.c: Likewise.
	* locale/programs/ld-address.c: Don't generate output in both
	byte-orders.
	* locale/programs/ld-ctype.c: Likewise.
	* locale/programs/ld-paper.c: Likewise.
	* locale/programs/ld-time.c: Likewise.
	* time/strftime.c (NLW): Don't use different byte-orders.
	* wctype/cname-lookup.h (cname_lookup): Likewise.

	* Makeconfig (localedir): Define using libdir, not datadir.
	(msgcatdir): New variable.
	* catgets/Makefile (CPPFLAGS): Define NLSPATH using msgcatdir.
	* elf/Makefile (bash-ldd-rewrite): Replace @TEXTDOMAINDIR@ using
	msgcatdir.
	* intl/Makefile (install-others): Install locale.alias in msgcatdir.
	(CPPFLAGS): Define paths using msgcatdir.
	* locale/Makefile (CPPFLAGS): Define LOCALE_ALIAS_PATH using msgcatdir.
	* po/Makefile (mo-installed): Define using msgcatdir.

	* sysdeps/unix/sysv/linux/net/if_arp.h: Fix typo.

1999-09-12  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c: Remove limitation on size of precision
	for integers.

	* posix/fnmatch.c (internal_fnmatch): Make it compilable outside
	glibc by defining internal_function if it isn't already.

	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyname2_r): If res_search
	fails don't rely on errno value.
	(getanswer_r): Set *ERRNOP in error cases.

	* sysdeps/posix/getaddrinfo.c (gaih_local): Test protocol and socktype.
	(gaih_inet_serv): Return EIA_NODATA if name is known but has no
	associated data.  Test for matching numeric address and family.
	(getaddrinfo): Remember EAI_NODATA result and return this in case
	everything fails.
	Reported by Arkadiusz Miskiewicz <misiek@misiek.eu.org>.

	* locale/programs/ld-address.c: Fix handling of non-existing
	definitions for this category.  Correctly ignore content of this
	category is this is necessary.
	* locale/programs/ld-collate.c: Likewise.
	* locale/programs/ld-ctype.c: Likewise.
	* locale/programs/ld-identification.c: Likewise.
	* locale/programs/ld-measurement.c: Likewise.
	* locale/programs/ld-messages.c: Likewise.
	* locale/programs/ld-monetary.c: Likewise.
	* locale/programs/ld-name.c: Likewise.
	* locale/programs/ld-numeric.c: Likewise.
	* locale/programs/ld-paper.c: Likewise.
	* locale/programs/ld-telephone.c: Likewise.
	* locale/programs/ld-time.c: Likewise.
	* locale/programs/locfile.h (handle_copy): Take extra parameter
	with result pointer.  Fill in name of locale from which to copy.
	Correctly read token after `END'.

	* locale/programs/localedef.c (main): Correct handling copy.
	(add_to_readlist): Take extra parameter which says whether we
	are supposed to read the file or not.
	(find_locale): Call add_to_readlist with extra parameter set to 0.

	* locale/programs/localedef.h (struct localedef_t): Use __LC_LAST
	instead of wrong number in array definitions.
	(add_to_readlist): Update prototype.

	* locale/programs/locfile.c (locfile_read): Mark categories not
	available in source file as read.
	(write_all_categories): Fix typo.

	* locale/programs/locales.h: Removed.

1999-09-10  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h (SHF_MASKOS): Added.

	* sysdeps/unix/sysv/linux/sys/raw.h (RAW_MAJOR): Added.

1999-09-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Configuring and compiling): Mention GCC 2.95.

1999-09-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Fix make version test for make 3.77.95 and later
	versions.
	Based on a patch by Paul D. Smith <psmith@baynetworks.com>.

1999-09-10  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wchar.h (WCHAR_MIN, WCHAR_MAX): Use all-numeric values.

	* sysdeps/generic/stdint.h: Correct WCHAR_MIN, WCHAR_MAX, and
	WINT_MAX values.

	* wctype/wctype.h: Remove incorrect towlower/towupper optimizations.

1999-09-09  Andreas Schwab  <schwab@suse.de>

	* elf/link.h: Fix comment.

1999-09-10  Ulrich Drepper  <drepper@cygnus.com>

	* math/bits/mathcalls.h: Add __isnan declaration [PR libc/1294].

	* math/math.h: Pretty print.

1999-09-10  Andreas Schwab  <schwab@suse.de>

	* sysdeps/generic/getenv.c (getenv): Fix lookup for single
	character variable on bigendian platforms without unaligned memory
	access.

1999-09-07  Cristian Gafton  <gafton@redhat.com>

	* sysdeps/unix/sysv/linux/sys/raw.h: New file
	* sysdeps/unix/sysv/linux/Dist: Add raw.h.
	* sysdeps/unix/sysv/linux/Makefile [misc] (sysdep_headers): Add raw.h.

1999-09-06  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/alpha/Dist: Add sys/user.h.

	* time/ap.c: Removed.  It was not used.
	* time/date.c: Likewise.
	* sysdeps/unix/nlist.c: Likewise.
	* sysdeps/generic/nlist.c: Likewise.
	* sysdeps/generic/varargs.h: Likewise.
	* stdio-common/scanf11.c: Likewise.
	* stdio-common/scanf6.c: Likewise.
	* scripts/=__ify: Likewise.
	* scripts/printsources: Likewise.
	* resolv/getnetnamadr.c: Likewise.
	* posix/id.c: Likewise.
	* misc/ioctltst.c: Likewise.
	* misc/nlist.h: Likewise.
	* math/test-math.h: Likewise.
	* include/nlist.h: Likewise.

1999-09-06  Andreas Schwab  <schwab@suse.de>

	* time/tzset.c (compute_change): Replace slow loop to compute T by
	simple algorithm.

1999-09-06  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/iso-2022-jp.c: When translating to ISO-2022-JP* write
	escape sequences out even if the character itself does not fit
	into the buffer.

	* iconvdata/jis0201.h (ucs4_to_jisx0201): Correct mapping for U005C.

1999-08-31  H.J. Lu  <hjl@gnu.org>

	* nscd/nscd_getgr_r.c (nscd_getgr_r): Cleanup the buffer count.

1999-09-05  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdprio.c (_hurd_priority_which_map): If WHO is zero default
	it to getpid () for PRIO_PROCESS, geteuid () for PRIO_USER.
	(_hurd_priority_which_map):

1999-09-04  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/getaddrinfo.c: Little optimization.

1999-09-03  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/syscalls.list: Rename strong name for
	fork from __syscall_fork to __libc_fork.
	* posix/Versions: Add __libc_fork and __vfork to version
	GLIBC_2.1.2.

1999-08-30  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* io/ftwtest-sh: Set LC_ALL and LANG to fix locale
	dependencies in sort.

1999-09-01  H.J. Lu  <hjl@gnu.org>

	* sysdeps/unix/sysv/linux/alpha/sys/user.h: New file.

	* sysdeps/unix/sysv/linux/alpha/sys/procfs.h: Include
	<sys/user.h> instead of <asm/user.h>.

1999-09-02  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Update PARISC-specific flags and symbolic names.

1999-09-01  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Update PARISC relocations.

1999-08-31  Scott Bambrough  <scottb@netwinder.org>

	* sysdeps/unix/sysv/linux/arm/bits/armsigctx.h: Enclose header in an
	#ifdef statement to prevent it from being included twice.
	* sysdeps/unix/sysv/linux/arm/sigcontextinfo.h:
	#include <bits/armsigctx.h>.

1999-08-31  Andreas Schwab  <schwab@suse.de>

	* locale/C-collate.c: Add missing initialisations.
	* locale/C-ctype.c: Likewise.

1999-08-31  Ulrich Drepper  <drepper@cygnus.com>

	* time/strftime.c (my_strftime): Remove unneeded variable len.

	* time/strptime.c: Undo last change.

1999-08-30  Ulrich Drepper  <drepper@cygnus.com>

	* locale/Makefile (distribute): Add iso-639.def and iso-3166.def.
	Change charset.h to charmap.h.
	(categories): Add new categories.  Leave out collate for now.
	Update build rules.
	* locale/categories.def: Add definitions for new categories.
	* locale/langinfo.h: Likewise.
	* locale/locale.h: Likewise.
	* locale/C-address.c: New file.
	* locale/C-identification.c: New file.
	* locale/C-measurement.c: New file.
	* locale/C-name.c: New file.
	* locale/C-paper.c: New file.
	* locale/C-telephone.c: New file.
	* locale/lc-address.c: Likewise.
	* locale/lc-identification.c: Likewise.
	* locale/lc-measurement.c: Likewise.
	* locale/lc-name.c: Likewise.
	* locale/lc-paper.c: Likewise.
	* locale/lc-telephone.c: Likewise.
	* locale/C-ctype.c: Update for locale rewrite.
	* locale/C-messages.c: Likewise.
	* locale/C-monetary.c: Likewise.
	* locale/C-time.c: Likewise.
	* locale/lc-collate.c: Likewise.
	* locale/lc-ctype.c: Likewise.
	* locale/lc-monetary.c: Likewise.
	* locale/lc-time.c: Likewise.
	* locale/localeinfo.h: Likewise.
	* locale/newlocale.c: Likewise.
	* locale/setlocale.c: Likewise.
	* locale/weight.h: Likewise.
	* locale/findlocale.c: Unconditionally use mmap.
	Handle new categories.
	* locale/loadlocale.c: Likewise.
	* locale/iso-3166.def: New file.
	* locale/iso-639.def: New file.
	* locale/programs/charmap-kw.gperf: Add new keywords.
	* locale/programs/locfile-kw.gperf: Likewise.
	* locale/programs/locfile-token.h: Define new tokens.
	* locale/programs/charmap.c: Rewrite to handle multibyte charsets.
	* locale/programs/charmap.h: New file.
	* locale/programs/charset.h: Removed.
	* locale/programs/config.h: Add __LC_LAST.
	* locale/programs/lc-address.c: New file.
	* locale/programs/lc-identification.c: New file.
	* locale/programs/lc-measurement.c: New file.
	* locale/programs/lc-name.c: New file.
	* locale/programs/lc-paper.c: New file.
	* locale/programs/lc-telephone.c: New file.
	* locale/programs/lc-collate.c: Update for locale rewrite.
	* locale/programs/lc-ctype.c: Likewise.
	* locale/programs/lc-messages.c: Likewise.
	* locale/programs/lc-monetary.c: Likewise.
	* locale/programs/lc-numeric.c: Likewise.
	* locale/programs/lc-time.c: Likewise.
	* locale/programs/locale.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* locale/programs/locfile.c: Likewise.
	* locale/programs/repertoire.c: Likewise.
	* locale/programs/repertoire.h: Likewise.
	* locale/programs/locfile.c: Update prototypes.
	Update handle_copy definition.
	* locale/programs/linereader.c: Add handling of wide char strings and
	new definition file syntax.
	* locale/programs/linereader.h (struct token): Add elements for wide
	character strings.
	* locale/programs/locale-spec.c: Disable handling of collation
	elements for now.
	* locale/programs/simple-hash.h: Cleanup.
	* locale/programs/stringtrans.h: Handle quite of end of line.
	* string/strcoll.c: Fall back on strcmp for now.
	* string/strxfrm.c: Fall back on strncpy/strlen for now.
	* time/strftime.c: Use new wide character data for wcsftime.
	* time/strptime.c: Remove _nl_C_LC_TIME declaration.
	* wctype/cname-lookup.h: Update for new LC_CTYPE data.

	* sysdeps/i386/Makefile [csu]: Define CFLAGS-initfini.s to force
	compiling for i386 to avoid i686-like GOT pointer computation.

	* db2/db_int.h: Change tsl_t type to u_int32_t.
	* db2/mutex/mutex.c: Allow Alpha mutex definitions.
	* db2/mutex/alpha.h: New file.
	* db2/mutex/sparc.gcc: Fix store code for v9.  Simplify clear code.
	* sysdeps/alpha/Makefile [db2]: Set CFLAGS of mutex.c to make spinlocks
	known.
	Patches by Richard Henderson.

	* stdlib/tst-environ.c: Add cast to avoid warning.
	* timezone/test-tz.c: Use setenv instead of putenv.

1999-08-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/libc.texinfo: Update version and date.

	* manual/locale.texi (Formatting Numbers): Fix @node pointers.

	* manual/filesys.texi (Working with Directory Trees): Add missing @code.
	(File System Interface): Correct entry.
	(Permission Bits): Add missing commata after @xref.

1999-08-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* timezone/tst-timezone.c (main): Don't pass const strings to
	putenv to avoid warnings.

	* posix/regexbug1.c: Include <stdio.h> for puts prototype.

1999-08-29  Thorsten Kukuk  <kukuk@suse.de>

	* nis/Versions: Add _nss_*_getipnodebyname_r.
	* nis/nss_nis/nis-hosts.c: Add _nss_nis_getipnodebyname_r.
	* nis/nss_nisplus/nisplus-hosts.c: Add _nss_nisplus_getipnodebyname_r.
	* nss/Versions: Add _nss_files_getipnodebyname_r.

1999-08-28  H.J. Lu  <hjl@gnu.org>

	* nscd/nscd_getgr_r.c (nscd_getgr_r): Don't count the alloca'ed
	memory for buffer.

1999-08-27  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netpacket/packet.h: Update from 2.3.15
	kernel.
	* inet/netinet/in.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/socket.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/socket.h: Likewise.

1999-08-28  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c (ptmalloc_init): Don't use variables to set
	thresholds for SUID binaries.  [PR libc/1277]

	* posix/regexbug1.c: Add one more similar case.

1999-08-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Running make install): Give examples for
	timezone and locale installation.

1999-08-28  Zack Weinberg  <zack@bitmover.com>

	* glibcbug.in: Get CCVERSION from autoconf substitution.
	* configure.in: Calculate and substitute CCVERSION.

1999-08-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/mips/bits/sigaction.h: Fix sa_flags,
	partially reverting a patch from 1998-12-29.  We just can't change
	the flags, kernels with different flags lead to
	incompatibilities.

1999-08-26  Andreas Schwab  <schwab@suse.de>

	* locale/langinfo.h (YESSTR, NOSTR): Still define if __USE_GNU.

1999-08-27  Ulrich Drepper  <drepper@cygnus.com>

	* inet/rexec.c (rexec): Free memory if strings were allocated in
	ruserpass.  Reported by Andrew Morton <morton@nortelnetworks.com>.

1999-08-27  Ulrich Drepper  <drepper@cygnus.com>

	* locale/categories.def: Use __YESSTR amd __NOSTR in definition.

	* manual/argp.texi: Fixing language and typos.
	* manual/conf.texi: Likewise.
	* manual/contrib.texi: Likewise.
	* manual/ctype.texi: Likewise.
	* manual/filesys.texi: Likewise.
	* manual/install.texi: Likewise.
	* manual/job.texi: Likewise.
	* manual/lang.texi: Likewise.
	* manual/llio.texi: Likewise.
	* manual/locale.texi: Likewise.
	* manual/math.texi: Likewise.
	* manual/nss.texi: Likewise.
	* manual/pipe.texi: Likewise.
	* manual/signal.texi: Likewise.
	* manual/socket.texi: Likewise.
	* manual/stdio.texi: Likewise.
	* manual/sysinfo.texi: Likewise.
	* manual/users.texi: Likewise.
	Patches by Neil Booth <NeilB@earthling.net>.

1999-08-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/fpu/bits/mathinline.h (__finite): Mark constant as
	unsigned to avoid warning.  [PR libc/1271].

	* conform/conformtest.pl: Allow testing regex.h which requires
	sys/types.h being included.

	* conform/data/regex.h-data: Allow *_t types.
	* conform/data/pwd.h-data: Likewise.
	* conform/data/sched.h-data: Likewise.
	* conform/data/pthread.h-data: Likewise.
	* conform/data/search.h-data: Likewise.

	* misc/search.h: Avoid namespace pollution.

	* conform/conformtest.pl (@headers): Add search.h, sched.h, regex.h,
	pwd.h, and pthread.h.
	* conform/data/pthread.h-data: New file.
	* conform/data/pwd.h-data: New file.
	* conform/data/regex.h-data: New file.
	* conform/data/sched.h-data: New file.
	* conform/data/search.h-data: New file.

	* NAMESPACE: Add REG_ for regex.h.

	* locale/langinfo.h: Don't define YESSTR and NOSTR for XPG6 since
	they are removed.

	* configure.in (libc_cv_asm_global_directive): Indent .text in
	test code so that the lame HPUX compiler recognizes it.
	* sysdeps/hppa/bits/endian.h: New file.
	* sysdeps/unix/sysv/hpux/bits/errno.h: New file.
	* sysdeps/unix/sysv/hpux/bits/setjmp.h: New file.
	* sysdeps/unix/sysv/hpux/bits/stat.h: New file.
	* sysdeps/unix/sysv/hpux/bits/types.h: New file.

	* sysdeps/unix/sysv/sysv4/solaris2/getdents.c: New file.
	Patch by John Tobey <jtobey@banta-im.com>.

	* sysdeps/unix/sysv/sysv4/solaris2/bits/dirent.h: New file.

	* sysdeps/unix/sysv/linux/if_index.c (if_nameindex): Move
	old_siocfifconf definition to toplevel.
	(__protocol_available): Remove old_siocfifconf definition.

1999-08-25  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/unix/sysv/linux/ptsname.c: Add checks to make sure we're
	really dealing with a master pseudo terminal, and really returning
	the name of the associated slave pseudo terminal by checking the
	device number.
	* sysdeps/unix/sysv/linux/pty-private.h: Removed.
	* login/programs/pt_chown.c (do_pt_chown): Don't use unix98_pseudo_p.

1999-08-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/mips/syscalls.list: Add missing
	underscore in _llseek entry.

	* sysdeps/unix/sysv/linux/mips/syscalls.list: Fix typo in execve
	entry.

	* sysdeps/unix/sysv/linux/bits/errno.h: Fix comment.
	* sysdeps/unix/sysv/linux/mips/bits/errno.h: Likewise.

	* elf/Makefile ($(objpfx)ld.so): Fix rtld-ldscript dependency.
	Patch by Ralf Bächle <ralf@uni-koblenz.de>.

1999-08-25  Ulrich Drepper  <drepper@cygnus.com>

	* inet/Makefile (routines): Add getipnodebynm.
	* inet/getipnodebynm.c: New file.
	* nss/digits_dots.c: If HAVE_TYPE is define type contains the
	interface type.
	* nss/nss_files/files-XXX.c: Define EXTRA_ARGS, EXTRA_ARGS_DECL, and
	EXTRA_ARGS_VALUE is not already done.
	(internal_getent): Allow extra parameters and pass them to parse_line.
	(_nss_files_get,ENTNAME_r): Pass extra parameters to internal_getent.
	(_nss_files_get##name##_r): Likewise.
	* nss/nss_files/files-hosts.c: Define EXTRA_ARGS, EXTRA_ARGS_DECL,
	and EXTRA_ARGS_VALUE to pass flags and type to parser.
	Add getipnodebyname function.
	* nss/nss_files/files-parse.c: Define EXTRA_ARGS, EXTRA_ARGS_DECL, and
	EXTRA_ARGS_VALUE is not already done.
	(parse_line): Add EXTRA_ARGS_DECL to parameter list.
	* nss/nss_db/db-XXX.c (lookup): Allow extra parameters and pass them
	to parse_line.
	(_nss_db_get##name##_r): Pass extra parameters to lookup.
	(_nss_db_get,ENTNAME_r): Likewise.
	* sysdeps/generic/if_index.c (__protocol_available): New function.
	* sysdeps/unix/sysv/linux/if_index.c: Likewise.

1999-08-24  Ulrich Drepper  <drepper@cygnus.com>

	* login/pty-private.h: Move to...
	* sysdeps/generic/pty-private.h: ...here.
	* sysdeps/unix/sysv/linux/pty-private.h: New file.  Linux specific
	version.
	* login/programs/pt_chown.c (do_pt_chown): Use unix98_pseudo_p is
	available.

	* libio/fileops.c (_IO_new_file_xsputn): Use _IO_OVERFLOW instead
	of __overflow.

	* conform/conformtest.pl (@headers): Add monetary.h-data,
	mqueue.h-data, ndbm.h-data, nl_types.h-data, and poll.h-data.
	* conform/data/monetary.h-data: New file.
	* conform/data/mqueue.h-data: New file.
	* conform/data/ndbm.h-data: New file.
	* conform/data/nl_types.h.h-data: New file.
	* conform/data/poll.h-data: New file.

	* stdio-common/Makefile (test): Add tst-cookie.
	* stdio-common/tst-cookie.c: New file.

	* sysdeps/unix/sysv/linux/mips/bits/errno.h: Fix EILSEQ value
	changed in last patch.  Reported by Ralf Bächle.

1999-08-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/mips/sysdep.h: Use __syscall_error.

	* sysdeps/unix/mips/sysdep.S: Rewrite, don't declare errno here.
	Patches by Ralf Bächle <ralf@uni-koblenz.de>

1999-08-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/net/if_arp.h: Add new constants from
	Linux 2.3.15.

1999-08-24  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/syscalls.list: Add execve
	syscall.
	* sysdeps/unix/sysv/linux/sparc/sparc64/syscalls.list: Likewise.

	* misc/libgen.h: Don't take basename macro as taking arguments.

	* sysdeps/arm/bits/huge_val.h: Use hexadecimal floating-point constants
	for gcc >= 2.95.
	* sysdeps/i386/bits/huge_val.h: Likewise.
	* sysdeps/i386/bits/huge_val.h: Likewise.
	* sysdeps/ieee754/bits/huge_val.h: Likewise.
	* sysdeps/m68k/bits/huge_val.h: Likewise.
	* sysdeps/sparc/sparc32/fpu/bits/huge_val.h: Likewise.
	* sysdeps/sparc/sparc64/fpu/bits/huge_val.h: Likewise.

	* conform/Makefile: New file.
	* conform/conformtest.pl: New file.
	* conform/data/aio.h-data: New file.
	* conform/data/assert.h-data: New file.
	* conform/data/cpio.h-data: New file.
	* conform/data/ctype.h-data: New file.
	* conform/data/dirent.h-data: New file.
	* conform/data/dlfcn.h-data: New file.
	* conform/data/errno.h-data: New file.
	* conform/data/fcntl.h-data: New file.
	* conform/data/float.h-data: New file.
	* conform/data/fmtmsg.h-data: New file.
	* conform/data/fnmatch.h-data: New file.
	* conform/data/ftw.h-data: New file.
	* conform/data/glob.h-data: New file.
	* conform/data/grp.h-data: New file.
	* conform/data/iconv.h-data: New file.
	* conform/data/inttypes.h-data: New file.
	* conform/data/iso646.h-data: New file.
	* conform/data/langinfo.h-data: New file.
	* conform/data/libgen.h-data: New file.
	* conform/data/locale.h-data: New file.
	* conform/data/math.h-data: New file.

1999-08-23  Ulrich Drepper  <drepper@cygnus.com>

	* posix/execvp.c (execvp): Correct copying of file name.

1999-08-23  Mark Kettenis  <kettenis@gnu.org>

	* hurd/hurdsig.c (_hurd_internal_post_signal): Add missing else.

1999-08-23  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/Makefile: Move addition to routines to the right place.

1999-08-23  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/mips/bits/errno.h: New file.  Neccessary
	since mips*-linux has ECANCELED.

1999-08-23  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/m68k/sigcontextinfo.h: Define
	SIGCONTEXT_EXTRA_ARGS.
	* sysdeps/unix/sysv/linux/i386/sigcontextinfo.h: Likewise.
	* sysdeps/generic/sigcontextinfo.h: Likewise.
	* sysdeps/mach/hurd/i386/sigcontextinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/sigcontextinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/arm/sigcontextinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sigcontextinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc32/sigcontextinfo.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigcontextinfo.h: Likewise.

1999-08-23  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regexbug1.c: Make it an error if the test fails.

1999-08-23  Andreas Schwab  <schwab@suse.de>

	* posix/regex.c (re_match_2_internal): Correct check for charset
	after exactn in loop.

1999-08-22  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/powerpc/syscalls.list: Add execve syscall.
	* sysdeps/unix/sysv/linux/mips/syscalls.list: Likewise.
	Patch by Joel Klecker.

	* iconv/gconv_int.h (GCONV_AVOID_NOCONV): New definition.
	(__gconv_find_transform): Update prototype.
	(__gconv_open): Likewise.
	* iconv/gconv_open.c: Take extra parameter and pass it to
	__gconv_find_transform.
	* iconv/gconv_db.c (__gconv_find_transform): Take extra parameter with
	flags.  If GCONV_AVOID_NOCONV flag is set don't return copying
	transformation.
	* iconv/iconv_open.c: Pass extra parameter to __gconv_open.
	* wcsmbs/wcsmbsload.c: Likewise.
	* intl/dcgettext.c (_nl_find_msg): Rewrite to use gconv instead of
	iconv for glibc.
	* intl/gettextP.h: Likewise.
	* intl/loadmsgcat.c: Likewise.

	* posix/regexbug1.c: New file.
	* posix/Makefile (tests): Add regexbug1.

1999-08-22  Mark Kettenis  <kettenis@gnu.org>

	* hurd/new-fd.c (_hurd_new_fd): Initialize fcntl flags.
	* hurd/port2fd.c (_hurd_port2fd): Reset the fcntl flags when
	installing PORT in the descriptor cell.

1999-08-19  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/i386/intr-msg.h (INTR_MSG_TRAP): Mark OPTION and
	TIMEOUT as outputs of the asm to indicate that the signal thread
	might mutate them.
	* hurd/intr-msg.c (_hurd_intr_rpc_mach_msg): Short circuit to plain
	mach_msg if only sending or only receiving (i.e., not an RPC).  When
	making an RPC that might get interrupted, save OPTION and the portion
	of the message buffer that gets clobbered by an EINTR reply message,
	and properly restore them before attempting to retry the request
	message send.

1999-08-21  Mark Kettenis  <kettenis@gnu.org>

	* stdio-common/vfscanf.c [! USE_IN_LIBIO]: Add necessary
	definitions for MEMCPY, ISSPACE, ISDIGIT, ISXDIGIT, TOLOWER, L_,
	CHAR_T, UCHAR_T and WIN_T to make the code compile again when
	stdio is used instead of libio.
	* stdio-common/vfprintf.c [! USE_IN_LIBIO]: Add necessary
	definitions for CHAR_T, UCHAR_T, INT_T, L_, ISDIGIT, PAD and PUTC
	to make the code compile again when stdio is used instead of
	libio.
	(vfprintf): Only check for correct orientation if ORIENT is
	defined.
	* stdio-common/Makefile (routines): Only add vfwprintf and
	vfwscanf if we're using libio.

1999-08-21  Mark Kettenis  <kettenis@gnu.org>

	* include/stdio.h [! USE_IN_LIBIO && __need_FILE]: Avoid defining
	any additional prototype just as we do for libio.

1999-08-21  Mark Kettenis  <kettenis@gnu.org>

	* include/bits/xopen_lim.h: Do not define STREAM_MAX and
	TZNAME_MAX.  These limits are not X/Open specific.
	* stdio-common/stdio_lim.h.in: Allow inclusion when __need_IOV_MAX
	is defined.

1999-08-21  Mark Kettenis  <kettenis@gnu.org>

	* Rules: When generated stdio_lim.h, avoid defining IOV_MAX if
	UIO_MAXIOV is left undefined in sys/uio.h.
	* stdio-common/stdio_lim.h.in: Adapt for change above.

1999-08-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/mips/bits/sigaction.h (SA_RESETHAND): Add it.
	* sysdeps/mips/bits/dlfcn.h: Remove SGI specific calls, add RTLD_LOCAL.
	Patches by Ralf Bächle <ralf@uni-koblenz.de>

1999-08-21  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/fmtmsg.h: Don't define NULL to keep namespace clean.

1999-08-20  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/execve.c: Define weak alias execve.

	* sysdeps/unix/sysv/linux/init-first.c (init): Remove personality
	call.  It should not be necessary andis harmful for Alpha.

	* sysdeps/posix/getcwd.c: Correct comment saying < 0 is ok for size
	type.  [PR libc/1269]

	* posix/execvp.c (execvp): Allocate array name of correct size.
	Optimize inner loop.  Use execve directly, not execv.

	* elf/elf.h: Corrected SHT_ values from new draft.

	* intl/gettextP.h (struct loaded_domain): Add conv element.
	* intl/dcgettext.c (find_msg): Rename to _nl_find_msg and make public.
	Instead of returning found message directly convert it using iconv
	if a conversion was found when opening the file.
	* intl/loadinfo.h: Protect against multiple inclusion.
	Declare _nl_find_msg.
	* intl/loadmsgcat.c (_nl_load_domain): Try to determine charset used
	in the message file and if necessary find approrpiate
	conversion to match currently selected charset.
	* include/libintl.h: Declare __dgettext and __dcgettext.
	* include/iconv.h: New file.

1999-08-20  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/sys/sendfile.h: Fix typo.

1999-08-19  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/execve.c: New file.  This version terminates
	all threads [PR libc/1223].

	* elf/rtld.c (_dl_start): Initialize bootstrap_map.l_info to zero.
	[PR libc/1165].

	* configure.in: Search for programs with prefix gnu* and g* first.
	[PR libc/1104].

	* dirent/Makefile (routines): Add getdents64.
	* sysdeps/unix/sysv/linux/Makefile [dirent] (sysdep_routines):
	Remove getdents64.
	* dirent/dirent.h: Redirect getdirentries to getdirentries64 if
	compiled with _FILE_OFFSET_BITS=64.
	* sysdeps/generic/getdents64.c: New file.
	* sysdeps/unix/sysv/linux/getdirentries.c: Also redefine off_t and
	__lseek for getdirentries64 definition.

	* sysdeps/unix/sysv/linux/llseek.c: Make __lseek64 a strong alias.

	* sysdeps/unix/sysv/linux/sys/sendfile.h: Don't allow use with
	_FILE_OFFSET_BITS=64.

	* sysdeps/unix/bsd/telldir.c (seekdir): Correct type of second
	parameter.

	* sysdeps/generic/setenv.c (__add_to_environ): Initialize ep
	after we have the lock.

	* sysdeps/unix/sysv/linux/alpha/sigcontextinfo.h: New file.
	Patch by Richard Henderson.

1999-08-19  Andreas Schwab  <schwab@suse.de>

	* libio/iovswscanf.c (vswscanf): Make stream unoriented initially
	and call _IO_fwide, to get the wide stream state initialized
	correctly.  Don't set _IO_JUMPS.
	* libio/vsnprintf.c (_IO_vsnprintf): Avoid casts to _IO_FILE *.
	* libio/vswprintf.c (_IO_vswprintf): Likewise.  Pass
	_IO_wstrn_jumps to _IO_no_init instead of setting _IO_WIDE_JUMPS
	directly.

1999-08-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (jn_test): Fix typo in description.
	(erfc_test): Add some more tests.
	(erf_test): Add some more tests.

1999-08-19  Andreas Schwab  <schwab@suse.de>

	* csu/Makefile ($(objpfx)initfini.s): Replace $(no-exceptions) by
	expression using $(exceptions).

1999-08-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/setenv.c: Avoid warning about uninitialized variable.

	* libio/fileops.c (_IO_file_xsgetn): Allocate buffer if none is
	allocated so far.  [PR libc/1261].

	* math/libm-test.c (j0_test): Adjust deltas for m68k.
	(jn_test): Likewise.

	* dirent/dirent.h: Only define ino64_t if not already done.
	* posix/sys/types.h: Likewise.

	* ctype/ctype.h: Avoid useless #endif #if pairs.

	* dirent/dirent.h: Define ino_t and ino64_t if not done already.
	(seekdir): Fix type of second parameter.
	* sysdeps/generic/seekdir.c: Likewise.
	* sysdeps/mach/hurd/seekdir.c: Likewise.
	* sysdeps/unix/seekdir.c: Likewise.

	* dlfcn/dlfcn.h: Define RTLD_NEXT and RTLD_DEFAULT only if __USE_GNU.

1999-08-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Configuring and compiling): Clarify ix86
	situation.

1999-08-18  Ulrich Drepper  <drepper@cygnus.com>

	* Rules: When generating stdio_lim.h also rewrite IOV_MAX definition.
	* stdio-common/stdio_lim.h.in: Add IOV_MAX template.
	* include/bits/xopen_lim.h: Don't define IOV_MAX here, get it from
	stdio_lim.h.  Define LONG_BIT and WORD_BIT.

	* include/features.h: Define __USE_XOPEN2K if _XOPEN_SOURCE == 600.

	* libio/stdio.h: Don't declare cuserid and getopt for X/Open issue 6.

	* misc/search.h: Don't define NULL.

	* posix/sys/types.h: Define blksize_t if it hasn't happened.
	Only define key_t and blkcnt_t if it hasn't happened before.
	Define blksize_t if not happened before.
	* io/sys/stat.h: Don't define pid_t.  Define blkcnt_t and blksize_t.
	* sysdeps/generic/bits/types.h: Define __blksize_t.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/types.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/types.h: Likewise.
	* sysdeps/mach/hurd/bits/stat.h (struct stat): Use __blksize_t for
	st_blksize member.
	(struct stat64): Likewise.
	* sysdeps/unix/bsd/bits/stat.h: Likewise.
	* sysdeps/unix/bsd/osf/alpha/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/stat.h: Likewise.
	* sysdeps/unix/sysv/sysv4/i386/bist/stat.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/stat.h: Likewise.

	* stdlib/getsubopt.c: Correct type of second argument.
	* stdlib/stdlib.h: Likewise.

	* stdlib/monetary.h: Don't include sys/types.h.  Define only size_t
	and ssize_t.

	* sysdeps/generic/putenv.c: Correct type of parameter.
	* stdlib/stdlib.h: Likewise.

	* sysdeps/generic/msgsnd.c: Correct type of second parameter.
	* sysdeps/unix/sysv/linux/msgsnd.c: Likewise.
	* sysvips/sys/msg.h: Likewise.

	* sysdeps/generic/semop.c: Correct type of third parameter.
	* sysdeps/unix/sysv/linux/semop.c: Likewise.
	* sysvipc/sys/sem.h: Likewise.  Don't include sys/types.h, define
	size_t.

	* sysdeps/generic/shmget.c: Correct type of second parameter.
	* sysdeps/unix/sysv/linux/shmget.c: Likewise.
	* sysvips/sys/shm.h: Likewise.  Don't include unistd.h and sys/types.h.
	Declare __getpagesize here.

	* sysdeps/generic/bits/ipc.h: Include bits/types.h instead of
	sys/types.h.
	* sysdeps/gnu/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/ipc.h: Likewise.
	* sysdeps/unix/sysv/linux/powerpc/bits/ipc.h: Likewise.
	* sysvipc/sys/ipc.h: Define uid_t, gid_t, mode_t, and key_t if not
	already done.

	* sysdeps/unix/bsd/usleep.c: Correct type of parameter.

	* debug/versions: Export __cyg_profile_func_enter and
	__cyg_profile_func_exit.

	* math/bits/mathcalls.h: Pretty print.

1999-08-17  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/tst-timezone.c (tests): Update America/Sao_Paulo test
	case for new tzdata.

	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Make __useconds_t
	unsigned.
	* sysdeps/unix/sysv/linux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/types.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/types.h: Likewise.

	* sysdeps/generic/bits/types.h: Make __useconds_t unsigned.

	* sysdeps/generic/ualarm.c (ualarm): Change return value and
	parameter type to useconds_t.
	* sysdeps/unix/bsd/ualarm.c: Likewise.

	* sysdeps/generic/usleep.c (usleep): Change parameter type to
	useconds_t.
	* sysdeps/unix/sysv/linux/usleep.c: Likewise.
	* sysdeps/mach/usleep.c: Likewise.

	* locale/weight.h: Include <errno.h>.

	* posix/sys/types.h: Define type useconds_t if not done already.
	* posix/unistd.h: Likewise.  Use this in ualarm and usleep
	declarations.
	* sysdeps/generic/bits/types.h: Define type __useconds_t.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/types.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/types.h: Likewise.

	* dirent/dirent.h (telldir): Change return type to long int.
	* sysdeps/generic/telldir.c: Likewise.
	* sysdeps/mach/hurd/telldir.c: Likewise.
	* sysdeps/unix/telldir.c: Likewise.
	* sysdeps/unix/bsd/telldir.c: Likewise.  Fix locking problem.

	* locale/weight.h: Set errno if an invalid character is found.

1999-08-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (erfc_test): Add test for example from PR
	libc/1259.
	(erf_test): Likewise.

1999-08-17  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/ieee754/dbl-64/s_erf.c: Correct type in performance increase
	rewrite.  Patch by Alan Stern <stern@kitsilano.rowland.org>.

	* timezone/private.h: Update from tzcode1999e.
	* timezone/zic.c: Likewise.

	* timezone/africa: Update from tzdata1999e.
	* timezone/antarctica: Likewise.
	* timezone/asia: Likewise.
	* timezone/australasia: Likewise.
	* timezone/europe: Likewise.
	* timezone/leapseconds: Likewise.
	* timezone/northamerica: Likewise.
	* timezone/southamerica: Likewise.

	* stdio-common/vfprintf.c (process_string_arg): Correct last patch
	and write correct number of bytes in case of %ls with precision.
	Reported by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

1999-08-16  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/nscd.init: Test for kernel version and make LSB compliant.
	Patch by Christian Gafton.

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h: Define O_DSYNC and
	O_RSYNC.  Patch by Christian Gafton.

	* stdio-common/vfprintf.c (process_string_arg) [printf]: Handle
	possibly unterminated strings for %ls when a precision is
	specified.
	Patch by Akira YOSHIYAMA <yosshy@tkf.att.ne.jp>.

	* wcsmbs/wcsmbsload.c (__wcsmbs_clone_conv): Call
	update_conversion_ptrs.
	Reported by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

1999-08-15  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wcsnlen.c: Correct decrement of maxlen.
	Reported by Shinya Hanataka <hanataka@abyss.rim.or.jp>.

	* wcsmbs/Makefile (tests): Add tst-wcsnlen.
	* wcsmbs/tst-wcsnlen.c: New file.

1999-08-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libio/ioputs.c (_IO_puts): Add missing brace.

1999-07-20  Geoff Keating  <geoffk@cygnus.com>

	* math/libm-test.c: Tweak deltas for a clean run on ppc.

1999-08-10  H.J. Lu  <hjl@gnu.org>

	* stdio-common/vfprintf.c (ORIENT): Check for the old stream.
	(vfprintf): Likewise.
	* stdio-common/vfscanf.c (ORIENT): Likewise.
	* libio/genops.c (__underflow): Likewise.
	(__uflow): Likewise.
	* libio/iofputs.c (_IO_fputs): Likewise.
	* libio/ioftell.c (_IO_ftell): Likewise.
	* libio/iofwrite.c (_IO_fwrite): Likewise.
	* libio/ioputs.c (_IO_puts): Likewise.
	* libio/iosetbuffer.c (_IO_setbuffer): Likewise.
	* libio/iosetvbuf.c (_IO_setvbuf): Likewise.

1999-08-15  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_builtin.h: Add ISO registry alias for UTF8.

1999-08-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/job.texi (Process Group Functions): Document getpgid,
	getsid.

1999-08-15  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/aio_sigqueue.c: Take extra parameter and
	initialize si_pid from it.
	* sysdeps/generic/aio_sigqueue.c (__aio_sigqueue): Take extra
	parameter.
	* rt/aio_misc.c (__aio_enqueue_request): Initialize caller_pid.
	* rt/aio_misc.h (struct waitlist): Add caller_pid element.
	(struct requestlist): Likewise.
	Adjust prototypes of __aio_notify_only and __aio_sigqueue.
	* rt/aio_notify.c (__aio_notify_only): Take extra parameter.  Pass it
	to __aio_sigqueue.
	(__aio_notify): Pass caller PID to __aio_notify_only.
	* rt/aio_suspend.c: Initialize caller_pid.
	* rt/lio_listio.c: Likewise.
	* rt/lio_listio64.c: Likewise.

	* rt/lio_listio.c: If nothing has to be done free mutex before
	signalling.
	* rt/lio_listio64.c: Likewise.

1999-08-10  H.J. Lu  <hjl@gnu.org>

	* resolv/nss_dns/dns-host.c (getanswer_r): Cleanup out-of-buffer
	handling.

1999-08-15  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Define ElfXX_Versym.
	* elf/link.h (struct link_map): Use ElfXX_Versym for l_versyms
	definition.

	* stdio-common/vfprintf.c (process_string_arg): Handle precisions
	for string output correctly in the wide character case.
	Patch by Akira YOSHIYAMA <yosshy@tkf.att.ne.jp>.

	* intl/locale.alias: Add catalan.

1999-08-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Configuring and compiling): Mention CFLAGS.

1999-08-15  Ulrich Drepper  <drepper@cygnus.com>

	* po/pt_BR.po: New file.

1999-08-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (yn_test): Adjust deltas for i386.
	(ccosh_test): Likewise.
	(jn_test): Likewise.

1999-08-15  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/_G_config.h: Get definition of mbstate_t.

1999-08-13  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/tstscanf.c: Add test for hexadecimal float parsing
	problem.

1999-08-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: install-sh lives now in scripts subdir.
	PR libc/1255 (bug 4).

1999-08-13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/_G_config.h: Update _G_iconv_t type from Linux
	version.

	* po/fr.po: Update.

1999-08-11  Thorsten Kukuk  <kukuk@suse.de>

	* nis/nis_callback.c (internal_nis_do_callback): Free my_pollfd.

1999-08-13  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfscanf.c: Don't recognize hexadecimal floats without
	exponent.

1999-08-10  Andreas Schwab  <schwab@suse.de>

	* elf/dl-load.c (_dl_map_object_from_fd): Fix check for valid elf
	header.

1999-08-09  Scott Bambrough  <scottb@netwinder.org>

	* elf/elf.h: Added definition of ELFOSABI_ARM.
	* elf/dl-load.c (_dl_map_object_from_fd): Use VALID_ELF_HEADER,
	VALID_ELF_OSABI, VALID_ELF_ABIVERSION to decide whether an
	object's header and ABI values are acceptable.
	(VALID_ELF_HEADER): New macro; provide default definition.
	(VALID_ELF_OSABI): New macro; provide default definition.
	(VALID_ELF_ABIVERSION): New macro; provide default definition.
	* sysdeps/arm/dl-machine.h Define ARM specific versions of
	VALID_ELF_HEADER, VALID_ELF_OSABI, VALID_ELF_ABIVERSION.

1999-08-09  Andreas Schwab  <schwab@suse.de>

	* inet/tst-ipnode.c (main): Don't compare integer with NULL.

1999-08-09  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/svc_run.c (svc_run): Free my_pollfd.

1999-08-09  Andreas Schwab  <schwab@suse.de>

	* sunrpc/svc.c (svc_getreq_poll): Fix argument of xprt_unregister.

1999-08-08  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/ieee754/ieee754.h: Handle platforms with special
	__FLOAT_WORD_ORDER.  Patch by Joel Klecker <jk@espy.org>.

	* string/bits/string2.h: Mark void* operations as extensions.
	* sysdeps/i386/i486/bits/string.h: Likewise.

	* debug/Makefile (routines): Add noophooks.
	(extra-libs): Add libpcprofile.  Add rules to build libpcprofile.
	* debug/noophooks.c: New file.
	* debug/pcprofile.c: New file.

1999-08-06  Ulrich Drepper  <drepper@cygnus.com>

	* rt/aio_misc.c (handle_fildes_io): Imitate the behaviour on other
	systems which allow using the functions also on non-seekable
	devices.

	* resolv/res_send.c (res_send): Recompute timeout for poll for
	each jump to `wait'.

	* inet/netinet/in.h (IN6ADDR_ANY_INIT): Add correct number of
	braces to avoid warnings.
	(IN6ADDR_LOOPBACK_INIT): Likewise.

	* sysdeps/unix/sysv/linux/bits/socket.h: Fix typo (MSG_TRUNC ->
	MSG_DONTWAIT).

1999-08-06  H.J. Lu  <hjl@gnu.org>

	* malloc/malloc.c: Initialize __libc_pagesize early.

1999-08-06  Ulrich Drepper  <drepper@cygnus.com>

	* string/string-inlines.c: Undefined __USE_STRING_INLINES before
	defining it.

	* inet/Makefile (tests): Add tst-ipnode.
	* inet/tst-ipnode.c: New file.

1999-08-06  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/sparc/bits/fcntl.h (O_DSYNC, O_RSYNC):
	New definitions.
	(O_DIRECTORY, O_NOFOLLOW): Define only if __USE_GNU.
	(O_LARGEFILE): Define only if __USE_LARGEFILE64.
	* sysdeps/unix/sysv/linux/mips/bits/fcntl.h (O_DSYNC, O_RSYNC):
	New definitions.
	(O_LARGEFILE): Define only if __USE_LARGEFILE64.
	* sysdeps/unix/sysv/linux/alpha/bits/fcntl.h (O_LARGEFILE): Likewise.

1999-08-06  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/ieee754/ldbl-128/e_expl.c: New file.
	* sysdeps/ieee754/ldbl-128/t_expl.h: New file.
	* sysdeps/ieee754/ldbl-128/Dist: Add t_expl.h.

1999-08-06  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/res_send.c (res_send): Don't test file descriptor for
	range, we use poll now.  [PR libc/1240]

1999-08-05  Ulrich Drepper  <drepper@cygnus.com>

	* libio/genops.c (_IO_flush_all): Don't access elements beyond what
	2.0 defined if they are not available.

1999-08-05  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/unix/sysv/linux/alpha/bits/fcntl.h (O_RSYNC, O_DSYNC):
	Define.

1999-08-04  Ulrich Drepper  <drepper@cygnus.com>

	* rt/aio_read.c: Fix return value.
	* rt/aio_read64.c: Likewise.
	Reported by Christian Gafton.

	* rt/aio_write.c: Fix return value.
	* rt/aio_write64.c: Likewise.
	* rt/aio_fsync.c: Likewise.

	* rt/aio_misc.c: Set errno at correct place.

	* rt/aio_fsync.c: Test OP parameter for correct values.

	* hesiod/hesiod.c: Avoid emitting rcsid in object file.

1999-08-04  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/alpha/getsysstats.c (GET_NPROCS_PARSER):
	Initialize result to one.
	(GET_NPROCS_CONF_PARSER): Likewise.

1999-08-03  Ulrich Drepper  <drepper@cygnus.com>

	* inet/ether_hton.c: Pass errno pointer to NSS function.
	* inet/getnetgrent_r.c: Likewise.
	Reported by Marty Leisner <leisner@rochester.rr.com>.

1999-08-02  Thorsten Kukuk  <kukuk@suse.de>

	* nis/nis_callback.c: Fix port problem on big-endian machines
	* sunrpc/clnt_udp.c: Cast to uint32_t pointer, not short. RPC
	fields are always 32 bit.
	Patches from Paul Mackerras <paulus@cs.anu.edu.au>

	* nis/nss_nis/nis-service.c: Remove htons, port is always in
	network-byte-order.
	* nis/nss_nisplus/nisplus-service.c: Rename number to port.

1999-08-03  Andreas Schwab  <schwab@suse.de>

	* sysdeps/posix/sigset.c: Unblock the signal after setting its
	disposition.  Use SIG_BLOCK/SIG_UNBLOCK instead of SIG_SETMASK to
	avoid two calls to sigprocmask.

1999-08-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/s_nexttowardf.c: Fix typo.

1999-08-02  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c (__sigaction):
	Only allow rt signal frames. No SA_SIGINFO signals will have the
	siginfo_t just not filled out with SI_NOINFO code.
	* sysdeps/unix/sysv/linux/sparc/sparc64/register-dump.h
	(register_dump): Take the above change into account.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigcontextinfo.h
	(rt_signal_frame): Likewise.

	* sysdeps/unix/sysv/linux/sparc/getsysstats.c: New file.

1999-08-02  Thorsten Kukuk  <kukuk@suse.de>

	* nis/nis_callback.c (internal_nis_do_callback): Use poll()
	instead of select().

1999-08-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/s_nextafter.c: Define __nexttoward and
	nexttoward so something else so that aliasing works.

1999-08-02  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/generic/math_ldbl.h: Fix typo.
	* sysdeps/generic/strtold.c: Remove unbalanced #endif.
	* sysdeps/alpha/fpu/e_sqrt.c: Use new path for e_sqrt.c.

1999-08-02  Ulrich Drepper  <drepper@cygnus.com>

	* elf/resolvfail.c: Include stdio.h.  Also test dlerror.

1999-08-01  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile (tests): Add resolvfail.  Add rules to build the
	program.
	* elf/resolvfail.c: New file.

	* elf/dl-sym.c (_dl_sym): Always determine module of the caller to
	pass it to _dl_lookup_symbol.

	* elf/dl-error.c (_dl_signal_error): Optimize string generation a
	bit.  Reword message.

	* dlfcn/dlerror.c: Make code thread-safe.

1999-07-31  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/intr-msg.c (_hurd_intr_rpc_mach_msg): Fix msgt_size member
	initializer in CHECK: a bit size, not the type code repeated!

1999-07-31  Ulrich Drepper  <drepper@cygnus.com>

	* string/tester.c: Add tests with constant arguments for strcpy
	and stpcpy.

1999-07-31  H.J. Lu  <hjl@gnu.org>

	* string/bits/string2.h (__strcpy_small): Fix a typo.

1999-07-31  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (link-libc): Always define it, not only for shared
	builds.

	* sysdeps/i386/fpu/e_pow.S: Use addl %esp instead of pop.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.  [PR libc/1213].

	* sysdeps/generic/e_lgammal_r.c: Set *signgam to zero.
	* sysdeps/generic/e_gammal_r.c: Likewise.  [PR libc/1212].

1999-07-30  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/getsysstats.c (GET_NPROCS_PARSER): New
	definition.
	(__get_nprocs): Use it.
	(__get_nprocs_conf): Define as separate function if
	GET_NPROCS_CONF_PARSER is defined.
	* sysdeps/unix/sysv/linux/alpha/getsysstats.c: New file.

	* include/sys/sysinfo.h: New file.
	* sysdeps/generic/sys/sysinfo.h: Remove declaration of internal
	interface.
	* sysdeps/unix/sysv/linux/sys/sysinfo.h: Likewise.

1999-07-30  H.J. Lu  <hjl@gnu.org>

	* libio/iofflush.c (fflush_unlocked): Weak aliase if
	_IO_MTSAFE_IO is not defined.
	* libio/clearerr.c (clearerr_unlocked): Likewise.
	* libio/feof.c (feof_unlocked): Likewise.
	* libio/ferror.c (ferror_unlocked): Likewise.
	* libio/fputc.c (fputc_unlocked): Likewise.
	* libio/getc.c (getc_unlocked, fgetc_unlocked): Likewise.
	* libio/getchar.c (getchar_unlocked): Likewise.
	* libio/putc.c (putc_unlocked): Likewise.
	* libio/putchar.c (putchar_unlocked): Likewise.

1999-07-30  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/Versions: Add svc_getreq_common, svc_getreq_poll,
	  svc_max_pollfd and svc_pollfd to GLIBC_2.2
	* sunrpc/rpc/svc.h: Use rpc*_t types, add new prototypes
	  for svc_run/poll interface.
	* sunrpc/rpc/types.h: Add rpc*_t typedefs.
	* sunrpc/rpc_common.c: Add svc_pollfd and svc_max_pollfd as
	  global variable.
	* sunrpc/svc.c: Add svc_getreq_poll and svc_getreq_common,
	  rewrite other svc_getreq* functions to use svc_getreq_common.
	* sunrpc/svc_run.c: Use poll().

1999-07-30  Andreas Schwab  <schwab@suse.de>

	* Makerules: Put sysd-versions and Versions.all on
	postclean-generated instead of common-generated.

1999-07-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/time.texi (Basic CPU Time): Note that clock_t can wrap
	around and CLOCKS_PER_SEC is 1e6.

1999-07-30  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Add test for local label subtraction.
	* config.h.in: Ad HAVE_SUBTRACT_LOCAL_LABELS.
	* stdio-common/vfprintf.c (vfprintf): Use subtraction of local
	labels to reduce number of runtime relocations and move jump
	tables in read-only seciton.

	* malloc/malloc.c (ptmalloc_init): Correct last patch.  The
	assignment cannot be moved.

1999-07-29  H.J. Lu  <hjl@gnu.org>

	* malloc/malloc.c (ptmalloc_init): Also initialize __libc_pagesize
	if no threads are used.

	* libio/iofwrite.c: Add weak alias for _unlocked function if not
	_IO_MTSAFE_IO.
	* libio/iofread.c: Likewise.
	* libio/iofgets.c: Likewise.
	* libio/iofputs.c: Likewise.

	* sysdeps/generic/bits/libc-lock.h (__libc_cleanup_end): New
	definition.

	* stdlib/mbtowc.c: Include <string.h>.
	* stdlib/wctomb.c: Likewise.
	* sysdeps/unix/sysv/linux/fstatfs64.c: Likewise.
	* sysdeps/unix/sysv/linux/statfs64.c: Likewise.

	* misc/mntent_r.c: Include <alloca.h>.
	* elf/dl-runtime.c: Likewise.

1999-07-29  Andreas Schwab  <schwab@suse.de>

	* misc/efgcvt.c (NDIGIT_MAX): Provide precomputed constants for
	all floating point formats supported by gcc.  Error out for
	unhandled precisions.
	* misc/efgcvt_r.c (NDIGIT_MAX): Likewise.
	* misc/qefgcvt.c (NDIGIT_MAX): Likewise.
	* misc/qefgcvt_r.c (NDIGIT_MAX): Likewise.

1999-07-29  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/setenv.c: Move setenv code in new function
	__add_to_environ.  Add new parameter specifying already
	constructed string for the environment.
	(setenv): Call __add_to_environ with new parameter set to NULL.
	(unsetenv): Really test all elements for duplicated name.  Missed those
	cases where the two are following each other.
	* sysdeps/generic/putenv.c: Use __add_to_environ instead of setenv.
	* include/stdlib.h: Add prototype of __add_to_environ.
	* stdlib/tst-environ.c: New file.
	* stdlib/Makefile (tests): Add tst-environ.

	* sysdeps/i386/bits/string.h (__memset_cc): Fix typo in last patch.

	* nis/nss_nis/nis-initgroups.c (_nss_nis_initgroups): Correct size
	argument in realloc call.
	* nis/nss_compat/compat-initgroups.c (_nss_compat_initgroups):
	Likewise.
	Reported by Danny Braniss <danny@cs.huji.ac.il>.

1999-07-28  Ulrich Drepper  <drepper@cygnus.com>

	* misc/efgcvt.c: Use IEEE 854 formula to compute the number of digits
	to print.
	* misc/efgcvt_r.c: Likewise.
	* misc/qefgcvt.c: Likewise.
	* misc/qefgcvt_r.c: Likewise.
	* misc/tst-efgcvt.c: Remove one test which cannot reliably be run
	anymore.

1999-07-27  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/math.texi (FP Function Optimization): Mention drawbacks.

1999-07-28  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/mblen.c: Use static state.
	Reported by Bruno Haible <haible@ilog.fr>.

	* stdlib/mbtowc.c: Reset state for s == NULL.
	* stdlib/wctomb.c: Likewise.
	Reported by Bruno Haible <haible@ilog.fr>.

	* stdlib/mbstowcs.c: Do not use global state.
	Reported by Bruno Haible <haible@ilog.fr>.

1999-07-28  Andeas Schwab  <schwab@suse.de>

	* iconvdata/Makefile: Don't try to run iconv tests when cross
	compiling.

1999-07-27  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/i386/init-first.c (init): Move the inline
	assembler code to switch stacks and call init1 outside this
	function.  Inside `init' the code was optimized away by gcc
	2.95 since it was "clearly" unreachable.
	* sysdeps/mach/hurd/i386/trampoline.c (_hurd_setup_sighandler):
	Do something similar for the trampoline code.

1999-07-27  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): Only return information
	for the hinted protocol.

1999-07-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* time/Versions: Add POSIX.1b timer and clock functions to GLIBC_2.2.

1999-07-25  Jakub Jelinek  <jj@ultra.linux.cz>

	* elf/link.h (struct link_map): Use Elf_Symndx instead of ElfXX_Symndx.
	* elf/dl-lookup.c (_dl_setup_hash): Likewise.
	* elf/dl-load.c (_dl_map_object): Likewise.
	* elf/do-lookup.h (do_lookup*): Likewise.
	* sysdeps/generic/bits/elfclass.h: Define Elf_Symndx as uint32_t.
	* sysdeps/unix/sysv/linux/alpha/bits/elfclass.h: Define Elf_Symndx
	as uint64_t.
	* elf/elf.h: Remove Elf32_Symndx and Elf64_Symndx.

1999-07-26  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/sysv4/setsid.c: Correct types.
	* sysdeps/generic/getpgrp.c: Likewise.
	* sysdeps/unix/sysv/sysv4/setpgid.c: Likewise.
	* sysdeps/unix/sysv/sysv4/getpgid.c: Likewise.
	Patch by John Tobey <jtobey@banta-im.com>.

	* sysdeps/posix/wait3.c: Help compiling in presence of
	__transparent_union__.  Reported by John Tobey <jtobey@banta-im.com>.

1999-07-25  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/sparc/sparc64/add_n.S: Avoid using %g2, %g3, %g7 registers
	as much as possible. Declare them using .register pseudo-op if they
	are still used.
	* sysdeps/sparc/sparc64/lshift.S: Likewise.
	* sysdeps/sparc/sparc64/memchr.S: Likewise.
	* sysdeps/sparc/sparc64/memcmp.S: Likewise.
	* sysdeps/sparc/sparc64/memcpy.S: Likewise.
	* sysdeps/sparc/sparc64/memset.S: Likewise.
	* sysdeps/sparc/sparc64/rawmemchr.S: Likewise.
	* sysdeps/sparc/sparc64/rshift.S: Likewise.
	* sysdeps/sparc/sparc64/stpcpy.S: Likewise.
	* sysdeps/sparc/sparc64/stpncpy.S: Likewise.
	* sysdeps/sparc/sparc64/strcat.S: Likewise.
	* sysdeps/sparc/sparc64/strchr.S: Likewise.
	* sysdeps/sparc/sparc64/strcmp.S: Likewise.
	* sysdeps/sparc/sparc64/strcpy.S: Likewise.
	* sysdeps/sparc/sparc64/strcspn.S: Likewise.
	* sysdeps/sparc/sparc64/strlen.S: Likewise.
	* sysdeps/sparc/sparc64/strncmp.S: Likewise.
	* sysdeps/sparc/sparc64/strncpy.S: Likewise.
	* sysdeps/sparc/sparc64/strpbrk.S: Likewise.
	* sysdeps/sparc/sparc64/strspn.S: Likewise.
	* sysdeps/sparc/sparc64/sub_n.S: Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h: Likewise.
	Optimize trampoline code for .plt4-.plt32767.
	Fix trampolines for .plt32768+.

1999-07-25  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/sparc/sparc32/sparcv8/Makefile: -mv8 is deprecated, use
	-mcpu=v8.
	* sysdeps/sparc/sparc32/sparcv9/Makefile: Likewise.
	* sysdeps/sparc/sparc64/Makefile: Make %g7 register available for
	libc's private use (as assembly routine clobber it anyway).

1999-07-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* README.template (configurations): The crypt add-on has a new
	ftp site.
	* manual/install.texi (Installation): Likewise.

1999-07-26  Ulrich Drepper  <drepper@cygnus.com>

	* time/time.h: Add forward for struct sigevent.  Unix98 maybe
	requires to have a full definition but we wait for a bug report
	based on the test suite.

	* sysdeps/generic/clock_getres.c: New file.
	* sysdeps/generic/clock_gettime.c: New file.
	* sysdeps/generic/clock_settime.c: New file.
	* sysdeps/generic/timer_create.c: New file.
	* sysdeps/generic/timer_delete.c: New file.
	* sysdeps/generic/timer_getoverr.c: New file.
	* sysdeps/generic/timer_gettime.c: New file.
	* sysdeps/generic/timer_settime.c: New file.

	* sysdeps/generic/bits/time.h: Define __clockid_t, __timer_t,
	CLOCK_REALTIME, and TIMER_ABSTIME.
	* sysdeps/mach/hurd/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/time.h: Likewise.

	* sysdeps/unix/sysv/linux/bits/posix_opt.h: Define _POSIX_TIMERS.

	* sysdeps/unix/sysv/linux/bits/siginfo.h: Define si_timer1 and
	si_timer2.

	* sysdeps/unix/sysv/linux/syscalls.list: Add clock and timer syscalls.

	* time/Makefile (routines): Add clock_getres, clock_gettime,
	clock_setres, timer_create, timer_delete, timer_getoverr,
	timer_gettime, and timer_settime.

	* time/time.h: Define clockid_t, timer_t, and struct itimerspec for
	POSIX.1b.  Add prototypes for clock and timer functions.

1999-07-26  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdprio.c (_hurd_priority_which_map): Initialize PIDS.
	Fix from Marcus Brinkmann <Marcus.Brinkmann@ruhr-uni-bochum.de>.

1999-07-26  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/wcstombs.c: Do not use global state.
	Reported by Bruno Haible <haible@ilog.fr>.

	* wcsmbs/wctob.c: Avoid sign extension when returning character.
	Reported by Bruno Haible <haible@ilog.fr>.

	* wcsmbs/wcsrtombs.c (__wcsrtombs): When computing maximum number
	of wide characters to convert do it right and don't overestimate
	by multiplying with MB_CUR_MAX.
	Reported by Bruno Haible <haible@ilog.fr>.

1999-07-26  Jakub Jelinek  <jj@ultra.linux.jz>

	* string/bits/string2.h (__strcpy_small): Avoid compile time warning.
	(__stpcpy_small): Likewise.
	Union has no __uc member but __c.

1999-07-26  Andreas Schwab  <schwab@suse.de>

	* sysdeps/m68k/dl-machine.h (RTLD_START): Call pre-init funtions.

1999-07-25  Ulrich Drepper  <drepper@cygnus.com>

	* libio/iofclose.c (_IO_new_fclose): Only fall back on
	_IO_old_fclose if doing versioning.

	* libio/iofclose.c (_IO_new_fclose): Detect new streams and handle
	them appropriately.
	* libio/oldiofclose.c (_IO_old_fclose): Likewise.

	* misc/mntent_r.c: Allow spaces and tabs in entry names by
	encoding these characters.
	* misc/tst-mntent.c: Add test case for addmntent and getmntent.

	* string/bits/string2.h: Fix aliasing problems.
	* sysdeps/i386/i486/bits/string.h: Likewise.
	* sysdeps/i386/bits/string.h: Likewise.

1998-12-28  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/powerpc/dl-machine.c: Handle shared library profiling.
	* elf/rtld.c (dl_main): Don't call malloc() between
	re-relocating the dynamic linker and running the application's crt0.

1999-07-21  Paul D. Smith  <psmith@gnu.org>

	* sysdeps/generic/glob.c: Move getlogin{,_r} prototypes below
	glob.h to get __P() macro.

	* posix/fnmatch.c (internal_fnmatch): Use K&R definition syntax,
	not ANSI.
	(__strchrnul): This won't exist outside GLIBC, so create one.

1999-07-25  Jakub Jelinek   <jj@ultra.linux.cz>

	* sysdeps/unix/sysv/linux/sparc/bits/types.h: Always define __qaddr_t.
	__ino64_t should be 32bit unsigned type on sparc32.
	Define __off64_t to __quad_t instead of __int64_t.
	Make __pic_pid_t unsigned on sparc32.

1999-07-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* localedata/tst-rpmatch.sh: Use "&" instead of "§" to avoid a bug
	in bash 2.03.

1999-07-25  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/euc-kr.c (euckr_from_ucs4): Set cp[0] to '\0' in case
	of an error.  Patch by Changwoo Ryu <cwryu@debian.org>.

1999-07-24  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/ksc5601.h (ksc5601_to_ucs4): Avoid invalid memory
	accesses.

	* resolv/res_send.c: Add locks for res_send and res_close use.

	* elf/Makefile (dl-routines): Add preinit.
	* elf/Versions [ld.so] (GLIBC_2.2): Export _dl_preinit_next.
	* elf/link.h (struct link_map): Add new field l_preinitcount.
	* elf/dl-preinit.c: New file.
	* elf/dynamic-link.h: Initialize l_preinitcount.
	* sysdeps/i386/dl-machine.h (RTLD_START): Call pre-init functions.

	* elf/dl-fini.c: Handle DT_FINI_ARRAY.
	* elf/link.h (struct link_map): Remove l_init_running.  Add l_runcount
	and l_initcount.
	* elf/dl-init.c: Handle DT_INIT_ARRAY.
	* elf/dynamic-link.h: Change parameters.  Now only get link_map
	pointer.  Calculate l_initcount.

	* elf/link.h (struct link_map): Add l_runpath_dirs.
	* elf/dynamic-link.h: If RUNPATH is given, set RPATH to NULL.
	* elf/dl-load.c: Pretty print.
	(decompose_rpath): Take new parameter with info from where the path
	comes.  Pass it the fillin_rpath.
	(_dl_init_paths): Initialize l_runpath_dirs.
	(_dl_map_object): Don't search using RPATHs if object has RUNPATH.
	Search using RUNPATH after LD_LIBRARY_PATH.
	* elf/dl-support.c: Adjust comment.
	* elf/rtld.c: Adjust help message.

1999-07-24  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/rtld.c (dl_main): Adopt to changed _dl_lookup_symbol
	interface.

1999-07-23  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/generic/bits/termios.h (ONOEOT): Change value to 1<<3, to
	match BSD value; previous value of 1<<8 was a typo.  I bet nothing
	ever used this, so I'm not going to worry about compatibility.
	[__USE_GNU] (IUCLC, OLCUC): New macros.

1999-07-23  Ulrich Drepper  <drepper@cygnus.com>

	* include/libintl.h: Undefine N_ and _ first to avoid warnings.

	* elf/elf.h: Add ET_LOOS and ET_HIOS.
	Add various EM_* constants.
	Add SHN_LOOS and SHN_HIOS.
	Add SHT_INIT_ARRAY, SHT_FINI_ARRAY, and SHT_PREINIT_ARRAY.
	Add SHF_MERGE and SHF_STRINGS.
	(ElfXX_Sym): Update description of st_other field.
	Add STT_COMMON.
	Add ELFXX_ST_VISIBILITY and ELFXX_ST_OTHER.
	Add STV_* macros.
	Update comment on DT_RPATH.  Add DT_RUNPATH, DT_FLAGS, DT_ENCODING,
	DT_PREINIT_ARRAY, DT_PREINIT_ARRAYSZ.
	Add DF_ORIGIN, DF_SYMBOLIC, DF_TEXTREL, and DF_BIND_NOW.

	* posix/unistd.h: Move declaration of __libc_enable_secure to...
	* include/unistd.h: ...here.

	* elf/dl-open.c (dl_open_worker): If DST is used in SUID program punt.
	* elf/dl-deps.c (expand_dst): Likewise.

	* elf/dynamic-link.h: Set DT_SYMBOLIC, DT_TEXTREL, and DT_BIND_NOW
	based on DT_FLAGS value.

	* elf/do-lookup.h: Remove reference_name parameter, add undef_map.
	Add test for symbols marked STV_HIDDEN.
	* elf/dl-lookup.c (_dl_lookup_symbol): Remove reference_name parameter,
	add undef_map.  Compute reference_name locally.  Update call to
	do_lookup.
	(_dl_lookup_symbol_skip): Likewise.
	(_dl_lookup_versioned_symbol): Likewise.
	(_dl_lookup_versioned_symbol_skip): Likewise.
	* elf/dl-libc.c: Update call to _dl_lookup_*symbol.
	* elf/dl-runtime.c: Likewise.
	* elf/dl-sym.c: Likewise.
	* elf/dl-symbol.c: Likewise.
	* elf/ldsodefs.h: Adjust prototypes.

	* elf/dl-reloc.c (RESOLV): Add test for STV_PROTECTED flag set and
	handle appropriately.  Add comment about DT_TEXTREL.
	* elf/dl-runtime.c: Likewise.

1999-07-21  Roland McGrath  <roland@baalperazim.frob.com>

	* elf/dl-reloc.c (_dl_reloc_bad_type): New function.
	* elf/ldsodefs.h: Declare it.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Use it
	instead of assert.
	(elf_machine_lazy_rel): Likewise.  Take new arg MAP.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/mips/dl-machine.h (elf_machine_rel): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/mips/mips64/dl-machine.h (elf_machine_rel): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/m68k/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/generic/dl-machine.h (elf_machine_rel): Likewise.
	* sysdeps/arm/dl-machine.h (elf_machine_rel): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/alpha/dl-machine.h (elf_machine_rela): Likewise.
	(elf_machine_lazy_rel): Likewise.
	* sysdeps/powerpc/dl-machine.h (elf_machine_lazy_rel): Likewise.
	* sysdeps/powerpc/dl-machine.c (__process_machine_rela): Use
	_dl_reloc_bad_type instead of _dl_signal_error.
	* elf/do-rel.h (elf_dynamic_do_rel): Pass MAP to elf_machine_lazy_rel.

1999-07-20  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/_strerror.c: Include <libintl.h>.

1999-07-19  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdsig.c (_hurd_internal_post_signal): If a
	hurd_signal_preemptor matches but its `preemptor' field is null, use
	its `handler' field directly.  This is to comply with behavior
	documented in <hurd/sigpreempt.h>.

1999-07-21  Andreas Schwab  <schwab@suse.de>

	* libio/fileops.c (_IO_new_file_underflow): Set error indicator
	when reading from write-only stream.
	* libio/oldfileops.c (_IO_old_file_underflow): Likewise.
	* libio/wfileops.c (_IO_wfile_underflow): Likewise.

1999-07-21  Andreas Schwab  <schwab@suse.de>

	* nss/test-netdb.c (output_hostent): Don't crash if h_aliases is
	NULL.

1999-07-21  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/read.c: Do not include <hurd.h> and
	<hurd/fd.h>.
	* sysdeps/mach/hurd/write.c: Do not include <hurd.h> and
	<hurd/fd.h>.
	(__libc_write): Call __pwrite instead of __pread.

1999-07-20  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/mmap.c (__mmap): Use correct arguments in
	__vm_allocate calls.

	* sysdeps/mach/hurd/pread.c (__pread): Include <hurd/fd.h>.  Fix typo.
	* sysdeps/mach/hurd/pwrite.c (__pwrite): Include <hurd/fd.h>.

	* sysdeps/mach/hurd/sysd-stdio.c (__stdio_read): Call
	_hurd_fd_read with new OFFSET argument set to -1.
	(__stdio_write): Call _hurd_fd_write with new OFFSET argument set
	to -1.

1999-07-17  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdexec.c (_hurd_exec): Prune trailing null ports from the
	descriptor table sent in the RPC.

1999-07-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* time/strptime.c [!_LIBC]: Fix __mon_day size.  Reported by
	bill@taniwha.org [PR libc/1211].

1999-07-19  Andreas Schwab  <schwab@suse.de>

	* libio/Makefile (routines): Add fwprintf.

	PowerPC has own version of w_sqrt.c and w_sqrtf.c.
	* math/w_sqrt.c: Moved to ...
	* sysdeps/generic/w_sqrt.c: ... here.
	* math/w_sqrtf.c: Moved to ...
	* sysdeps/generic/w_sqrtf.c: ... here.

	* Make-dist (generic-dirs): New variable.
	(try-sysdeps, +sysdep-names): Use it.
	* extra-lib.mk (all-$(lib)-routines): New variable.  Use it
	instead of $(lib)-routines.
	* elf/Makefile (distribute): Add dl-cache.h.
	* db2/Makefile (distribute): Add all new files.
	* iconvdata/Makefile (distribute): Don't distribute CVS
	directory.
	* math/Makefile (distribute): Remove machine/endian.h, add
	math_ldbl.h.
	* stdio-common/Makefile (distribute): Add _itowa.h.
	* sysdeps/generic/Dist: Remove make_siglist.c, add siglist.h.
	* sysdeps/gnu/Dist: Add eval.c
	* sysdeps/gnu/Makefile (libdl-sysdep_routines) [$(subdir) =
	dlfcn]: Add to this instead of libdl-routines.
	* sysdeps/ieee754/ldbl-128/Dist: New file.
	* sysdeps/mach/hurd/Dist: Add siglist.h
	* sysdeps/unix/sysv/linux/Dist: Add kernel-features.h.

1999-07-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/Dist: Add ldd-rewrite.sed.

	* inet/Makefile (routines): Add getipnodebyad and freehostent.
	* inet/Versions [GLIBC_2.2] (libc): Add getipnodebyad and freehostent.
	* inet/freehostent.c: New file.
	* inet/getipnodebyad.c: New file.
	* resolv/netdb.h: Add prototypes for getipnodebyaddr, freehostent,
	and getipnodebyname.  The latter comes soon.
	* nss/digits_dots.c: Fail if IPv6 is found and IPv4 is requested.
	Add support for getipnode* functions.

	* nss/digits_dots.c: Don't use __set_h_errno, assign to *h_errnop.
	Set h_aliases to NULL and not to a pointer to an array with a NULL
	pointer following XNS 5.2.

	* posix/sched.h: Remove internal interfaces.
	* include/sched.h: Add internal interfaces.

	* nss/getXXbyYY.c: Provide variable h_errnop to help shared code.

	* nss/digits_dots.c: Set h_errnop if memory allcoation failed.

	* inet/gethstbyad_r.c (PREPROCESS): Test for unspecified IPv6 address
	and return an error in this case.
	* nss/getXXbyYY_r.c: Allow PREPROCESS be defined and use it if
	available.

1999-07-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nscd/nscd_proto.h (__nscd_gethostbyaddr_r): Follow change from
	1999-07-17 and adjust len parameter.
	* nscd/nscd_gethst_r.c (__nscd_gethostbyaddr_r): Likewise.
	* nscd/gethstbyad_r.c (ADD_PARAMS): Likewise.
	* manual/socket.texi (Host Names): Likewise.
	* nis/nss_nis/nis-hosts.c (_nss_nis_gethostbyaddr_r): Likewise.
	* nis/nss_nisplus/nisplus-hosts.c (_nss_nisplus_gethostbyaddr_r):
	Likewise.
	* resolv/nss_dns/dns-host.c (_nss_dns_gethostbyaddr_r): Likewise.
	* resolv/gethnamaddr.c (gethostbyaddr): Likewise.
	(ht_gethostbyaddr): Likewise.
	(_gethtbyaddr): Likewise.

1999-07-17  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/netdb.h: Adjust parameters of gethostbyaddr and
	gethostbyaddr_r.
	* include/netdb.h: Likewise.
	* inet/gethstbyad.c: Correct type of len parameter.
	* inet/gethstbyad_r.c: Likewise.

	* sysdeps/unix/sysv/linux/arm/Versions: Undo last change.

1999-07-17  Zack Weinberg  <zack@rabi.columbia.edu>

	* include/libc-symbol.h: Clean up definitions of weak_alias,
	strong_alias, symbol_version, etc. etc.
	* posix/getopt.h: Use ctype.h to get features.h included, and don't
	include it at all if __GNU_LIBRARY__ is already defined.

1999-07-17  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/bug1.c: Include <stdlib.h> to get prototype for free.

	* malloc/malloc.c: Add missing chunk of patch from 1999-07-04.

	* sysdeps/unix/sysv/linux/bits/time.h (timeval): Use __suseconds_t
	type for tv_usec element.
	* sysdeps/unix/sysv/linux/alpha/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/bits/types.h: Define __suseconds_t.
	* sysdeps/generic/bits/time.h: Likewise.
	* sysdeps/mach/hurd/bits/time.h: Likewise.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/sparc/bits/types.h: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/bits/types.h: Likewise.
	* sysdeps/generic/bits/types.h: Likewise.
	* posix/sys/types.h: Define suseconds_t for X/Open.

1999-07-15  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/bug1.c: Avoid memory leak.

	* sysdeps/i386/fpu/e_pow.S: Use addl instead of pop/pop to keep
	program deterministic.
	* sysdeps/i386/fpu/e_powf.S: Likewise.
	* sysdeps/i386/fpu/e_powl.S: Likewise.

1999-07-15  Jakub Jelinek  <jj@ultra.linux.cz>

	* math/Makefile: Add t_sincosl and k_sincosl support routines.
	* math/math_private.h (__kernel_sincosl): New declaration.
	* sysdeps/generic/t_sincosl.c: New file.
	* sysdeps/generic/k_sincosl.c: New file.
	* sysdeps/ieee754/ldbl-128/k_cosl.c: New file.
	* sysdeps/ieee754/ldbl-128/k_sinl.c: New file.
	* sysdeps/ieee754/ldbl-128/k_sincosl.c: New file.
	* sysdeps/ieee754/ldbl-128/t_sincosl.c: New file.
	* sysdeps/ieee754/ldbl-128/e_rem_pio2l.c: New file.
	* sysdeps/ieee754/ldbl-128/s_sincosl.c (__sincosl): Use
	__kernel_sincosl.
	* sysdeps/ieee754/ldbl-128/math_ldbl.h (GET_LDOUBLE_LSW64): New
	definition.

1999-07-15  Ulrich Drepper  <drepper@cygnus.com>

	* posix/unistd.h: Use __PMT for exit.

1999-07-15  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/unix/sysv/linux/arm/Versions (_inb, _inw, _inl, _outb,
	_outw, _outl): Added to GLIBC_2.1.2.

1999-07-15  Ulrich Drepper  <drepper@cygnus.com>

	* posix/fnmatch.h: Use __name instead of __string in prototype to
	allow use outside glibc.

1999-07-14  Ulrich Drepper  <drepper@cygnus.com>

	* time/tst-strptime.c (main): Add one more test case.  Produce
	output even when result is ok.

	* time/strptime.c (get_number): Handle number parsing more
	consistent with strftime.  Only parse a given number of digits.
	(get_alt_number):  Fix implementation.  Was broken.
	(strptime_internal): Add third parameter to get_number and
	get_alt_number calls.

1999-07-13  Jakub Jelinek  <jj@ultra.linux.cz>

	* elf/ldd.bash.in: Add support for multiple dynamic linkers.
	* sysdeps/unix/sysv/linux/sparc/ldd-rewrite.sed: On sparc*linux*,
	try both 32bit and 64bit dynamic linker.
	* sysdeps/unix/sysv/linux/configure.in: Apply sparc ldd-rewrite
	script on all sparc targets.

1999-07-13  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/unix/sysv/linux/shmat.c (shmat): Avoid casting a pointer
	to int.

1999-07-13  Andreas Schwab  <schwab@suse.de>

	* elf/dl-runtime.c (fixup, profile_fixup): Call alloca to prevent
	inlining.  Fixes PR libc/1198.

1999-07-14  Andreas Schwab  <schwab@suse.de>

	* Makerules (common-generated): Don't prepend $(common-objpfx).

1999-07-12  Jakub Jelinek  <jj@ultra.linux.cz>

	* stdio-common/printf_fp.c (__printf_fp): Adjust for IEEE quad
	as _FPIO_CONST_OFFSET does not cover all bits after binary dot.
	* sysdeps/generic/printf_fphex.c (__printf_fphex): Support IEEE
	quad by moving long double support into PRINT_FPHEX_LONG_DOUBLE
	macro.
	* sysdeps/alpha/Implies: Imply ieee754/flt-32 and ieee754/dbl-64
	instead of ieee754.
	* sysdeps/arm/Implies: Likewise.
	* sysdeps/i386/Implies: Imply ieee754/flt-32, ieee754/dbl-64, and
	ieee754/ldbl-96 instead of ieee754.
	* sysdeps/i386/i686/Implies: Remove implication for libm-i387/i686.
	* sysdeps/generic/e_atanhl.c: New file.
	* sysdeps/generic/e_coshl.c: New file.
	* sysdeps/generic/e_sinhl.c: New file.
	* sysdeps/generic/e_gammal_r.c: New file.
	* sysdeps/generic/e_hypotl.c: New file.
	* sysdeps/generic/s_cbrtl.c: New file.
	* sysdeps/generic/s_asinhl.c: New file.
	* sysdeps/generic/s_tanhl.c: New file.
	* sysdeps/generic/w_expl.c: New file.
	* sysdeps/i960/Implies: Imply ieee754/flt-32 and ieee754/dbl-64
	instead of ieee754.
	* sysdeps/m68k/Implies: Imply ieee754/flt-32, ieee754/dbl-64, and
	ieee754/ldbl-96 instead of ieee754.
	* sysdeps/m68k/strtold.c: Include ldbl-96 version of strtold.
	* sysdeps/m68k/printf_fphex.c: Include ldbl-96 version of
	printf_fphex.
	* sysdeps/mips/Implies: Imply ieee754/flt-32 and ieee754/dbl-64
	instead of ieee754.
	* sysdeps/mips/mips64/Implies: Likewise.
	* sysdeps/powerpc/Implies: Likewise.
	* sysdeps/sparc/Implies: Remove.
	* sysdeps/sparc/sparc32/Implies: Imply ieee754/flt-32 and
	ieee754/dbl-64.
	* sysdeps/sparc/sparc64/Implies: Imply ieee754/flt-32, ieee754/dbl-64,
	and ieee754/ldbl-128.

	* sysdeps/sparc/bits/wordsize.h: Remove.
	* sysdeps/sparc/fpu/bits/mathinline.h: New file.
	* sysdeps/sparc/fpu/bits/mathdef.h: __NO_LONG_DOUBLE_MATH
	only for sparc32.
	* sysdeps/sparc/sparc32/fpu/bits/huge_val.h: New file.
	* sysdeps/sparc/sparc32/bits/wordsize.h: New file.
	* sysdeps/sparc/sparc64/fpu/bits/huge_val.h: New file.
	* sysdeps/sparc/sparc64/bits/wordsize.h: New file.
	* sysdeps/sparc/sparc64/Makefile: Add IEEE quad long double
	support.

	* sysdeps/sparc/sparc64/addmul_1.S: Fix miscalculation
	of carries. Optimize.

	* sysdeps/libm-ieee754/e_exp10.c: Moved to ...
	* sysdeps/generic/e_exp10.c: ...here.
	* sysdeps/libm-ieee754/e_exp10f.c: Moved to ...
	* sysdeps/generic/e_exp10f.c: ...here.
	* sysdeps/libm-ieee754/e_exp10l.c: Moved to ...
	* sysdeps/generic/e_exp10l.c: ...here.
	* sysdeps/libm-ieee754/e_scalb.c: Moved to ...
	* sysdeps/generic/e_scalb.c: ...here.
	* sysdeps/libm-ieee754/e_scalbf.c: Moved to ...
	* sysdeps/generic/e_scalbf.c: ...here.
	* sysdeps/libm-ieee754/e_scalbl.c: Moved to ...
	* sysdeps/generic/e_scalbl.c: ...here.
	* sysdeps/libm-ieee754/s_cacos.c: Moved to ...
	* sysdeps/generic/s_cacos.c: ...here.
	* sysdeps/libm-ieee754/s_cacosf.c: Moved to ...
	* sysdeps/generic/s_cacosf.c: ...here.
	* sysdeps/libm-ieee754/s_cacosh.c: Moved to ...
	* sysdeps/generic/s_cacosh.c: ...here.
	* sysdeps/libm-ieee754/s_cacoshf.c: Moved to ...
	* sysdeps/generic/s_cacoshf.c: ...here.
	* sysdeps/libm-ieee754/s_cacoshl.c: Moved to ...
	* sysdeps/generic/s_cacoshl.c: ...here.
	* sysdeps/libm-ieee754/s_cacosl.c: Moved to ...
	* sysdeps/generic/s_cacosl.c: ...here.
	* sysdeps/libm-ieee754/s_casin.c: Moved to ...
	* sysdeps/generic/s_casin.c: ...here.
	* sysdeps/libm-ieee754/s_casinf.c: Moved to ...
	* sysdeps/generic/s_casinf.c: ...here.
	* sysdeps/libm-ieee754/s_casinh.c: Moved to ...
	* sysdeps/generic/s_casinh.c: ...here.
	* sysdeps/libm-ieee754/s_casinhf.c: Moved to ...
	* sysdeps/generic/s_casinhf.c: ...here.
	* sysdeps/libm-ieee754/s_casinhl.c: Moved to ...
	* sysdeps/generic/s_casinhl.c: ...here.
	* sysdeps/libm-ieee754/s_casinl.c: Moved to ...
	* sysdeps/generic/s_casinl.c: ...here.
	* sysdeps/libm-ieee754/s_catan.c: Moved to ...
	* sysdeps/generic/s_catan.c: ...here.
	* sysdeps/libm-ieee754/s_catanf.c: Moved to ...
	* sysdeps/generic/s_catanf.c: ...here.
	* sysdeps/libm-ieee754/s_catanh.c: Moved to ...
	* sysdeps/generic/s_catanh.c: ...here.
	* sysdeps/libm-ieee754/s_catanhf.c: Moved to ...
	* sysdeps/generic/s_catanhf.c: ...here.
	* sysdeps/libm-ieee754/s_catanhl.c: Moved to ...
	* sysdeps/generic/s_catanhl.c: ...here.
	* sysdeps/libm-ieee754/s_catanl.c: Moved to ...
	* sysdeps/generic/s_catanl.c: ...here.
	* sysdeps/libm-ieee754/s_ccos.c: Moved to ...
	* sysdeps/generic/s_ccos.c: ...here.
	* sysdeps/libm-ieee754/s_ccosf.c: Moved to ...
	* sysdeps/generic/s_ccosf.c: ...here.
	* sysdeps/libm-ieee754/s_ccosh.c: Moved to ...
	* sysdeps/generic/s_ccosh.c: ...here.
	* sysdeps/libm-ieee754/s_ccoshf.c: Moved to ...
	* sysdeps/generic/s_ccoshf.c: ...here.
	* sysdeps/libm-ieee754/s_ccoshl.c: Moved to ...
	* sysdeps/generic/s_ccoshl.c: ...here.
	* sysdeps/libm-ieee754/s_ccosl.c: Moved to ...
	* sysdeps/generic/s_ccosl.c: ...here.
	* sysdeps/libm-ieee754/s_cexp.c: Moved to ...
	* sysdeps/generic/s_cexp.c: ...here.
	* sysdeps/libm-ieee754/s_cexpf.c: Moved to ...
	* sysdeps/generic/s_cexpf.c: ...here.
	* sysdeps/libm-ieee754/s_cexpl.c: Moved to ...
	* sysdeps/generic/s_cexpl.c: ...here.
	* sysdeps/libm-ieee754/s_clog.c: Moved to ...
	* sysdeps/generic/s_clog.c: ...here.
	* sysdeps/libm-ieee754/s_clog10.c: Moved to ...
	* sysdeps/generic/s_clog10.c: ...here.
	* sysdeps/libm-ieee754/s_clog10f.c: Moved to ...
	* sysdeps/generic/s_clog10f.c: ...here.
	* sysdeps/libm-ieee754/s_clog10l.c: Moved to ...
	* sysdeps/generic/s_clog10l.c: ...here.
	* sysdeps/libm-ieee754/s_clogf.c: Moved to ...
	* sysdeps/generic/s_clogf.c: ...here.
	* sysdeps/libm-ieee754/s_clogl.c: Moved to ...
	* sysdeps/generic/s_clogl.c: ...here.
	* sysdeps/libm-ieee754/s_cpow.c: Moved to ...
	* sysdeps/generic/s_cpow.c: ...here.
	* sysdeps/libm-ieee754/s_cpowf.c: Moved to ...
	* sysdeps/generic/s_cpowf.c: ...here.
	* sysdeps/libm-ieee754/s_cpowl.c: Moved to ...
	* sysdeps/generic/s_cpowl.c: ...here.
	* sysdeps/libm-ieee754/s_cproj.c: Moved to ...
	* sysdeps/generic/s_cproj.c: ...here.
	* sysdeps/libm-ieee754/s_cprojf.c: Moved to ...
	* sysdeps/generic/s_cprojf.c: ...here.
	* sysdeps/libm-ieee754/s_cprojl.c: Moved to ...
	* sysdeps/generic/s_cprojl.c: ...here.
	* sysdeps/libm-ieee754/s_csin.c: Moved to ...
	* sysdeps/generic/s_csin.c: ...here.
	* sysdeps/libm-ieee754/s_csinf.c: Moved to ...
	* sysdeps/generic/s_csinf.c: ...here.
	* sysdeps/libm-ieee754/s_csinh.c: Moved to ...
	* sysdeps/generic/s_csinh.c: ...here.
	* sysdeps/libm-ieee754/s_csinhf.c: Moved to ...
	* sysdeps/generic/s_csinhf.c: ...here.
	* sysdeps/libm-ieee754/s_csinhl.c: Moved to ...
	* sysdeps/generic/s_csinhl.c: ...here.
	* sysdeps/libm-ieee754/s_csinl.c: Moved to ...
	* sysdeps/generic/s_csinl.c: ...here.
	* sysdeps/libm-ieee754/s_csqrt.c: Moved to ...
	* sysdeps/generic/s_csqrt.c: ...here.
	* sysdeps/libm-ieee754/s_csqrtf.c: Moved to ...
	* sysdeps/generic/s_csqrtf.c: ...here.
	* sysdeps/libm-ieee754/s_csqrtl.c: Moved to ...
	* sysdeps/generic/s_csqrtl.c: ...here.
	* sysdeps/libm-ieee754/s_ctan.c: Moved to ...
	* sysdeps/generic/s_ctan.c: ...here.
	* sysdeps/libm-ieee754/s_ctanf.c: Moved to ...
	* sysdeps/generic/s_ctanf.c: ...here.
	* sysdeps/libm-ieee754/s_ctanh.c: Moved to ...
	* sysdeps/generic/s_ctanh.c: ...here.
	* sysdeps/libm-ieee754/s_ctanhf.c: Moved to ...
	* sysdeps/generic/s_ctanhf.c: ...here.
	* sysdeps/libm-ieee754/s_ctanhl.c: Moved to ...
	* sysdeps/generic/s_ctanhl.c: ...here.
	* sysdeps/libm-ieee754/s_ctanl.c: Moved to ...
	* sysdeps/generic/s_ctanl.c: ...here.
	* sysdeps/libm-ieee754/s_fdim.c: Moved to ...
	* sysdeps/generic/s_fdim.c: ...here.
	* sysdeps/libm-ieee754/s_fdimf.c: Moved to ...
	* sysdeps/generic/s_fdimf.c: ...here.
	* sysdeps/libm-ieee754/s_fdiml.c: Moved to ...
	* sysdeps/generic/s_fdiml.c: ...here.
	* sysdeps/libm-ieee754/s_fma.c: Moved to ...
	* sysdeps/generic/s_fma.c: ...here.
	* sysdeps/libm-ieee754/s_fmaf.c: Moved to ...
	* sysdeps/generic/s_fmaf.c: ...here.
	* sysdeps/libm-ieee754/s_fmal.c: Moved to ...
	* sysdeps/generic/s_fmal.c: ...here.
	* sysdeps/libm-ieee754/s_fmax.c: Moved to ...
	* sysdeps/generic/s_fmax.c: ...here.
	* sysdeps/libm-ieee754/s_fmaxf.c: Moved to ...
	* sysdeps/generic/s_fmaxf.c: ...here.
	* sysdeps/libm-ieee754/s_fmaxl.c: Moved to ...
	* sysdeps/generic/s_fmaxl.c: ...here.
	* sysdeps/libm-ieee754/s_fmin.c: Moved to ...
	* sysdeps/generic/s_fmin.c: ...here.
	* sysdeps/libm-ieee754/s_fminf.c: Moved to ...
	* sysdeps/generic/s_fminf.c: ...here.
	* sysdeps/libm-ieee754/s_fminl.c: Moved to ...
	* sysdeps/generic/s_fminl.c: ...here.
	* sysdeps/libm-ieee754/s_ldexp.c: Moved to ...
	* sysdeps/generic/s_ldexp.c: ...here.
	* sysdeps/libm-ieee754/s_ldexpf.c: Moved to ...
	* sysdeps/generic/s_ldexpf.c: ...here.
	* sysdeps/libm-ieee754/s_ldexpl.c: Moved to ...
	* sysdeps/generic/s_ldexpl.c: ...here.
	* sysdeps/libm-ieee754/s_nan.c: Moved to ...
	* sysdeps/generic/s_nan.c: ...here.
	* sysdeps/libm-ieee754/s_nanf.c: Moved to ...
	* sysdeps/generic/s_nanf.c: ...here.
	* sysdeps/libm-ieee754/s_nanl.c: Moved to ...
	* sysdeps/generic/s_nanl.c: ...here.
	* sysdeps/libm-ieee754/s_significand.c: Moved to ...
	* sysdeps/generic/s_significand.c: ...here.
	* sysdeps/libm-ieee754/s_significandf.c: Moved to ...
	* sysdeps/generic/s_significandf.c: ...here.
	* sysdeps/libm-ieee754/s_significandl.c: Moved to ...
	* sysdeps/generic/s_significandl.c: ...here.
	Avoid conversion from int to double and then to long double.
	* sysdeps/libm-ieee754/w_acos.c: Moved to ...
	* math/w_acos.c: ...here.
	* sysdeps/libm-ieee754/w_acosf.c: Moved to ...
	* math/w_acosf.c: ...here.
	* sysdeps/libm-ieee754/w_acosh.c: Moved to ...
	* math/w_acosh.c: ...here.
	* sysdeps/libm-ieee754/w_acoshf.c: Moved to ...
	* math/w_acoshf.c: ...here.
	* sysdeps/libm-ieee754/w_acoshl.c: Moved to ...
	* math/w_acoshl.c: ...here.
	* sysdeps/libm-ieee754/w_acosl.c: Moved to ...
	* math/w_acosl.c: ...here.
	* sysdeps/libm-ieee754/w_asin.c: Moved to ...
	* math/w_asin.c: ...here.
	* sysdeps/libm-ieee754/w_asinf.c: Moved to ...
	* math/w_asinf.c: ...here.
	* sysdeps/libm-ieee754/w_asinl.c: Moved to ...
	* math/w_asinl.c: ...here.
	* sysdeps/libm-ieee754/w_atan2.c: Moved to ...
	* math/w_atan2.c: ...here.
	* sysdeps/libm-ieee754/w_atan2f.c: Moved to ...
	* math/w_atan2f.c: ...here.
	* sysdeps/libm-ieee754/w_atan2l.c: Moved to ...
	* math/w_atan2l.c: ...here.
	* sysdeps/libm-ieee754/w_atanh.c: Moved to ...
	* math/w_atanh.c: ...here.
	* sysdeps/libm-ieee754/w_atanhf.c: Moved to ...
	* math/w_atanhf.c: ...here.
	* sysdeps/libm-ieee754/w_atanhl.c: Moved to ...
	* math/w_atanhl.c: ...here.
	* sysdeps/libm-ieee754/w_cosh.c: Moved to ...
	* math/w_cosh.c: ...here.
	* sysdeps/libm-ieee754/w_coshf.c: Moved to ...
	* math/w_coshf.c: ...here.
	* sysdeps/libm-ieee754/w_coshl.c: Moved to ...
	* math/w_coshl.c: ...here.
	* sysdeps/libm-ieee754/w_drem.c: Moved to ...
	* math/w_drem.c: ...here.
	* sysdeps/libm-ieee754/w_dremf.c: Moved to ...
	* math/w_dremf.c: ...here.
	* sysdeps/libm-ieee754/w_dreml.c: Moved to ...
	* math/w_dreml.c: ...here.
	* sysdeps/libm-ieee754/w_exp10.c: Moved to ...
	* math/w_exp10.c: ...here.
	* sysdeps/libm-ieee754/w_exp10f.c: Moved to ...
	* math/w_exp10f.c: ...here.
	* sysdeps/libm-ieee754/w_exp10l.c: Moved to ...
	* math/w_exp10l.c: ...here.
	* sysdeps/libm-ieee754/w_exp2.c: Moved to ...
	* math/w_exp2.c: ...here.
	* sysdeps/libm-ieee754/w_exp2f.c: Moved to ...
	* math/w_exp2f.c: ...here.
	* sysdeps/libm-ieee754/w_exp2l.c: Moved to ...
	* math/w_exp2l.c: ...here.
	* sysdeps/libm-ieee754/w_fmod.c: Moved to ...
	* math/w_fmod.c: ...here.
	* sysdeps/libm-ieee754/w_fmodf.c: Moved to ...
	* math/w_fmodf.c: ...here.
	* sysdeps/libm-ieee754/w_fmodl.c: Moved to ...
	* math/w_fmodl.c: ...here.
	* sysdeps/libm-ieee754/w_hypot.c: Moved to ...
	* math/w_hypot.c: ...here.
	* sysdeps/libm-ieee754/w_hypotf.c: Moved to ...
	* math/w_hypotf.c: ...here.
	* sysdeps/libm-ieee754/w_hypotl.c: Moved to ...
	* math/w_hypotl.c: ...here.
	* sysdeps/libm-ieee754/w_j0.c: Moved to ...
	* math/w_j0.c: ...here.
	* sysdeps/libm-ieee754/w_j0f.c: Moved to ...
	* math/w_j0f.c: ...here.
	* sysdeps/libm-ieee754/w_j0l.c: Moved to ...
	* math/w_j0l.c: ...here.
	* sysdeps/libm-ieee754/w_j1.c: Moved to ...
	* math/w_j1.c: ...here.
	* sysdeps/libm-ieee754/w_j1f.c: Moved to ...
	* math/w_j1f.c: ...here.
	* sysdeps/libm-ieee754/w_j1l.c: Moved to ...
	* math/w_j1l.c: ...here.
	* sysdeps/libm-ieee754/w_jn.c: Moved to ...
	* math/w_jn.c: ...here.
	* sysdeps/libm-ieee754/w_jnf.c: Moved to ...
	* math/w_jnf.c: ...here.
	* sysdeps/libm-ieee754/w_jnl.c: Moved to ...
	* math/w_jnl.c: ...here.
	* sysdeps/libm-ieee754/w_lgamma.c: Moved to ...
	* math/w_lgamma.c: ...here.
	* sysdeps/libm-ieee754/w_lgamma_r.c: Moved to ...
	* math/w_lgamma_r.c: ...here.
	* sysdeps/libm-ieee754/w_lgammaf.c: Moved to ...
	* math/w_lgammaf.c: ...here.
	* sysdeps/libm-ieee754/w_lgammaf_r.c: Moved to ...
	* math/w_lgammaf_r.c: ...here.
	* sysdeps/libm-ieee754/w_lgammal.c: Moved to ...
	* math/w_lgammal.c: ...here.
	* sysdeps/libm-ieee754/w_lgammal_r.c: Moved to ...
	* math/w_lgammal_r.c: ...here.
	* sysdeps/libm-ieee754/w_log.c: Moved to ...
	* math/w_log.c: ...here.
	* sysdeps/libm-ieee754/w_log10.c: Moved to ...
	* math/w_log10.c: ...here.
	* sysdeps/libm-ieee754/w_log10f.c: Moved to ...
	* math/w_log10f.c: ...here.
	* sysdeps/libm-ieee754/w_log10l.c: Moved to ...
	* math/w_log10l.c: ...here.
	* sysdeps/libm-ieee754/w_logf.c: Moved to ...
	* math/w_logf.c: ...here.
	* sysdeps/libm-ieee754/w_logl.c: Moved to ...
	* math/w_logl.c: ...here.
	* sysdeps/libm-ieee754/w_pow.c: Moved to ...
	* math/w_pow.c: ...here.
	* sysdeps/libm-ieee754/w_powf.c: Moved to ...
	* math/w_powf.c: ...here.
	* sysdeps/libm-ieee754/w_powl.c: Moved to ...
	* math/w_powl.c: ...here.
	* sysdeps/libm-ieee754/w_remainder.c: Moved to ...
	* math/w_remainder.c: ...here.
	* sysdeps/libm-ieee754/w_remainderf.c: Moved to ...
	* math/w_remainderf.c: ...here.
	* sysdeps/libm-ieee754/w_remainderl.c: Moved to ...
	* math/w_remainderl.c: ...here.
	* sysdeps/libm-ieee754/w_scalb.c: Moved to ...
	* math/w_scalb.c: ...here.
	* sysdeps/libm-ieee754/w_scalbf.c: Moved to ...
	* math/w_scalbf.c: ...here.
	* sysdeps/libm-ieee754/w_scalbl.c: Moved to ...
	* math/w_scalbl.c: ...here.
	* sysdeps/libm-ieee754/w_sinh.c: Moved to ...
	* math/w_sinh.c: ...here.
	* sysdeps/libm-ieee754/w_sinhf.c: Moved to ...
	* math/w_sinhf.c: ...here.
	* sysdeps/libm-ieee754/w_sinhl.c: Moved to ...
	* math/w_sinhl.c: ...here.
	* sysdeps/libm-ieee754/w_sqrt.c: Moved to ...
	* math/w_sqrt.c: ...here.
	* sysdeps/libm-ieee754/w_sqrtf.c: Moved to ...
	* math/w_sqrtf.c: ...here.
	* sysdeps/libm-ieee754/w_sqrtl.c: Moved to ...
	* math/w_sqrtl.c: ...here.
	* sysdeps/libm-ieee754/w_tgamma.c: Moved to ...
	* math/w_tgamma.c: ...here.
	* sysdeps/libm-ieee754/w_tgammaf.c: Moved to ...
	* math/w_tgammaf.c: ...here.
	* sysdeps/libm-ieee754/w_tgammal.c: Moved to ...
	* math/w_tgammal.c: ...here.
	* sysdeps/libm-i387/e_acos.S: Moved to ...
	* sysdeps/i386/fpu/e_acos.S: ...here.
	* sysdeps/libm-i387/e_acosf.S: Moved to ...
	* sysdeps/i386/fpu/e_acosf.S: ...here.
	* sysdeps/libm-i387/e_acosh.S: Moved to ...
	* sysdeps/i386/fpu/e_acosh.S: ...here.
	* sysdeps/libm-i387/e_acoshf.S: Moved to ...
	* sysdeps/i386/fpu/e_acoshf.S: ...here.
	* sysdeps/libm-i387/e_acoshl.S: Moved to ...
	* sysdeps/i386/fpu/e_acoshl.S: ...here.
	* sysdeps/libm-i387/e_acosl.S: Moved to ...
	* sysdeps/i386/fpu/e_acosl.S: ...here.
	* sysdeps/libm-i387/e_asin.S: Moved to ...
	* sysdeps/i386/fpu/e_asin.S: ...here.
	* sysdeps/libm-i387/e_asinf.S: Moved to ...
	* sysdeps/i386/fpu/e_asinf.S: ...here.
	* sysdeps/libm-i387/e_asinl.S: Moved to ...
	* sysdeps/i386/fpu/e_asinl.S: ...here.
	* sysdeps/libm-i387/e_atan2.S: Moved to ...
	* sysdeps/i386/fpu/e_atan2.S: ...here.
	* sysdeps/libm-i387/e_atan2f.S: Moved to ...
	* sysdeps/i386/fpu/e_atan2f.S: ...here.
	* sysdeps/libm-i387/e_atan2l.S: Moved to ...
	* sysdeps/i386/fpu/e_atan2l.S: ...here.
	* sysdeps/libm-i387/e_atanh.S: Moved to ...
	* sysdeps/i386/fpu/e_atanh.S: ...here.
	* sysdeps/libm-i387/e_atanhf.S: Moved to ...
	* sysdeps/i386/fpu/e_atanhf.S: ...here.
	* sysdeps/libm-i387/e_atanhl.S: Moved to ...
	* sysdeps/i386/fpu/e_atanhl.S: ...here.
	* sysdeps/libm-i387/e_exp.S: Moved to ...
	* sysdeps/i386/fpu/e_exp.S: ...here.
	* sysdeps/libm-i387/e_exp10.S: Moved to ...
	* sysdeps/i386/fpu/e_exp10.S: ...here.
	* sysdeps/libm-i387/e_exp10f.S: Moved to ...
	* sysdeps/i386/fpu/e_exp10f.S: ...here.
	* sysdeps/libm-i387/e_exp10l.S: Moved to ...
	* sysdeps/i386/fpu/e_exp10l.S: ...here.
	* sysdeps/libm-i387/e_expf.S: Moved to ...
	* sysdeps/i386/fpu/e_expf.S: ...here.
	* sysdeps/libm-i387/e_expl.S: Moved to ...
	* sysdeps/i386/fpu/e_expl.S: ...here.
	* sysdeps/libm-i387/e_fmod.S: Moved to ...
	* sysdeps/i386/fpu/e_fmod.S: ...here.
	* sysdeps/libm-i387/e_fmodf.S: Moved to ...
	* sysdeps/i386/fpu/e_fmodf.S: ...here.
	* sysdeps/libm-i387/e_fmodl.S: Moved to ...
	* sysdeps/i386/fpu/e_fmodl.S: ...here.
	* sysdeps/libm-i387/e_hypot.S: Moved to ...
	* sysdeps/i386/fpu/e_hypot.S: ...here.
	* sysdeps/libm-i387/e_hypotf.S: Moved to ...
	* sysdeps/i386/fpu/e_hypotf.S: ...here.
	* sysdeps/libm-i387/e_log.S: Moved to ...
	* sysdeps/i386/fpu/e_log.S: ...here.
	* sysdeps/libm-i387/e_log10.S: Moved to ...
	* sysdeps/i386/fpu/e_log10.S: ...here.
	* sysdeps/libm-i387/e_log10f.S: Moved to ...
	* sysdeps/i386/fpu/e_log10f.S: ...here.
	* sysdeps/libm-i387/e_log10l.S: Moved to ...
	* sysdeps/i386/fpu/e_log10l.S: ...here.
	* sysdeps/libm-i387/e_logf.S: Moved to ...
	* sysdeps/i386/fpu/e_logf.S: ...here.
	* sysdeps/libm-i387/e_logl.S: Moved to ...
	* sysdeps/i386/fpu/e_logl.S: ...here.
	* sysdeps/libm-i387/e_pow.S: Moved to ...
	* sysdeps/i386/fpu/e_pow.S: ...here.
	* sysdeps/libm-i387/e_powf.S: Moved to ...
	* sysdeps/i386/fpu/e_powf.S: ...here.
	* sysdeps/libm-i387/e_powl.S: Moved to ...
	* sysdeps/i386/fpu/e_powl.S: ...here.
	* sysdeps/libm-i387/e_rem_pio2l.c: Moved to ...
	* sysdeps/i386/fpu/e_rem_pio2l.c: ...here.
	* sysdeps/libm-i387/e_remainder.S: Moved to ...
	* sysdeps/i386/fpu/e_remainder.S: ...here.
	* sysdeps/libm-i387/e_remainderf.S: Moved to ...
	* sysdeps/i386/fpu/e_remainderf.S: ...here.
	* sysdeps/libm-i387/e_remainderl.S: Moved to ...
	* sysdeps/i386/fpu/e_remainderl.S: ...here.
	* sysdeps/libm-i387/e_scalb.S: Moved to ...
	* sysdeps/i386/fpu/e_scalb.S: ...here.
	* sysdeps/libm-i387/e_scalbf.S: Moved to ...
	* sysdeps/i386/fpu/e_scalbf.S: ...here.
	* sysdeps/libm-i387/e_scalbl.S: Moved to ...
	* sysdeps/i386/fpu/e_scalbl.S: ...here.
	* sysdeps/libm-i387/e_sqrt.S: Moved to ...
	* sysdeps/i386/fpu/e_sqrt.S: ...here.
	* sysdeps/libm-i387/e_sqrtf.S: Moved to ...
	* sysdeps/i386/fpu/e_sqrtf.S: ...here.
	* sysdeps/libm-i387/e_sqrtl.S: Moved to ...
	* sysdeps/i386/fpu/e_sqrtl.S: ...here.
	* sysdeps/libm-i387/k_rem_pio2l.c: Moved to ...
	* sysdeps/i386/fpu/k_rem_pio2l.c: ...here.
	* sysdeps/libm-i387/s_asinh.S: Moved to ...
	* sysdeps/i386/fpu/s_asinh.S: ...here.
	* sysdeps/libm-i387/s_asinhf.S: Moved to ...
	* sysdeps/i386/fpu/s_asinhf.S: ...here.
	* sysdeps/libm-i387/s_asinhl.S: Moved to ...
	* sysdeps/i386/fpu/s_asinhl.S: ...here.
	* sysdeps/libm-i387/s_atan.S: Moved to ...
	* sysdeps/i386/fpu/s_atan.S: ...here.
	* sysdeps/libm-i387/s_atanf.S: Moved to ...
	* sysdeps/i386/fpu/s_atanf.S: ...here.
	* sysdeps/libm-i387/s_atanl.S: Moved to ...
	* sysdeps/i386/fpu/s_atanl.S: ...here.
	* sysdeps/libm-i387/s_cbrt.S: Moved to ...
	* sysdeps/i386/fpu/s_cbrt.S: ...here.
	* sysdeps/libm-i387/s_cbrtf.S: Moved to ...
	* sysdeps/i386/fpu/s_cbrtf.S: ...here.
	* sysdeps/libm-i387/s_cbrtl.S: Moved to ...
	* sysdeps/i386/fpu/s_cbrtl.S: ...here.
	* sysdeps/libm-i387/s_ceil.S: Moved to ...
	* sysdeps/i386/fpu/s_ceil.S: ...here.
	* sysdeps/libm-i387/s_ceilf.S: Moved to ...
	* sysdeps/i386/fpu/s_ceilf.S: ...here.
	* sysdeps/libm-i387/s_ceill.S: Moved to ...
	* sysdeps/i386/fpu/s_ceill.S: ...here.
	* sysdeps/libm-i387/s_cexp.S: Moved to ...
	* sysdeps/i386/fpu/s_cexp.S: ...here.
	* sysdeps/libm-i387/s_cexpf.S: Moved to ...
	* sysdeps/i386/fpu/s_cexpf.S: ...here.
	* sysdeps/libm-i387/s_cexpl.S: Moved to ...
	* sysdeps/i386/fpu/s_cexpl.S: ...here.
	* sysdeps/libm-i387/s_copysign.S: Moved to ...
	* sysdeps/i386/fpu/s_copysign.S: ...here.
	* sysdeps/libm-i387/s_copysignf.S: Moved to ...
	* sysdeps/i386/fpu/s_copysignf.S: ...here.
	* sysdeps/libm-i387/s_copysignl.S: Moved to ...
	* sysdeps/i386/fpu/s_copysignl.S: ...here.
	* sysdeps/libm-i387/s_cos.S: Moved to ...
	* sysdeps/i386/fpu/s_cos.S: ...here.
	* sysdeps/libm-i387/s_cosf.S: Moved to ...
	* sysdeps/i386/fpu/s_cosf.S: ...here.
	* sysdeps/libm-i387/s_cosl.S: Moved to ...
	* sysdeps/i386/fpu/s_cosl.S: ...here.
	* sysdeps/libm-i387/s_exp2.S: Moved to ...
	* sysdeps/i386/fpu/s_exp2.S: ...here.
	* sysdeps/libm-i387/s_exp2f.S: Moved to ...
	* sysdeps/i386/fpu/s_exp2f.S: ...here.
	* sysdeps/libm-i387/s_exp2l.S: Moved to ...
	* sysdeps/i386/fpu/s_exp2l.S: ...here.
	* sysdeps/libm-i387/s_expm1.S: Moved to ...
	* sysdeps/i386/fpu/s_expm1.S: ...here.
	* sysdeps/libm-i387/s_expm1f.S: Moved to ...
	* sysdeps/i386/fpu/s_expm1f.S: ...here.
	* sysdeps/libm-i387/s_expm1l.S: Moved to ...
	* sysdeps/i386/fpu/s_expm1l.S: ...here.
	* sysdeps/libm-i387/s_fdim.S: Moved to ...
	* sysdeps/i386/fpu/s_fdim.S: ...here.
	* sysdeps/libm-i387/s_fdimf.S: Moved to ...
	* sysdeps/i386/fpu/s_fdimf.S: ...here.
	* sysdeps/libm-i387/s_fdiml.S: Moved to ...
	* sysdeps/i386/fpu/s_fdiml.S: ...here.
	* sysdeps/libm-i387/s_finite.S: Moved to ...
	* sysdeps/i386/fpu/s_finite.S: ...here.
	* sysdeps/libm-i387/s_finitef.S: Moved to ...
	* sysdeps/i386/fpu/s_finitef.S: ...here.
	* sysdeps/libm-i387/s_finitel.S: Moved to ...
	* sysdeps/i386/fpu/s_finitel.S: ...here.
	* sysdeps/libm-i387/s_floor.S: Moved to ...
	* sysdeps/i386/fpu/s_floor.S: ...here.
	* sysdeps/libm-i387/s_floorf.S: Moved to ...
	* sysdeps/i386/fpu/s_floorf.S: ...here.
	* sysdeps/libm-i387/s_floorl.S: Moved to ...
	* sysdeps/i386/fpu/s_floorl.S: ...here.
	* sysdeps/libm-i387/s_fma.S: Moved to ...
	* sysdeps/i386/fpu/s_fma.S: ...here.
	* sysdeps/libm-i387/s_fmaf.S: Moved to ...
	* sysdeps/i386/fpu/s_fmaf.S: ...here.
	* sysdeps/libm-i387/s_fmal.S: Moved to ...
	* sysdeps/i386/fpu/s_fmal.S: ...here.
	* sysdeps/libm-i387/s_fmax.S: Moved to ...
	* sysdeps/i386/fpu/s_fmax.S: ...here.
	* sysdeps/libm-i387/s_fmaxf.S: Moved to ...
	* sysdeps/i386/fpu/s_fmaxf.S: ...here.
	* sysdeps/libm-i387/s_fmaxl.S: Moved to ...
	* sysdeps/i386/fpu/s_fmaxl.S: ...here.
	* sysdeps/libm-i387/s_fmin.S: Moved to ...
	* sysdeps/i386/fpu/s_fmin.S: ...here.
	* sysdeps/libm-i387/s_fminf.S: Moved to ...
	* sysdeps/i386/fpu/s_fminf.S: ...here.
	* sysdeps/libm-i387/s_fminl.S: Moved to ...
	* sysdeps/i386/fpu/s_fminl.S: ...here.
	* sysdeps/libm-i387/s_frexp.S: Moved to ...
	* sysdeps/i386/fpu/s_frexp.S: ...here.
	* sysdeps/libm-i387/s_frexpf.S: Moved to ...
	* sysdeps/i386/fpu/s_frexpf.S: ...here.
	* sysdeps/libm-i387/s_frexpl.S: Moved to ...
	* sysdeps/i386/fpu/s_frexpl.S: ...here.
	* sysdeps/libm-i387/s_ilogb.S: Moved to ...
	* sysdeps/i386/fpu/s_ilogb.S: ...here.
	* sysdeps/libm-i387/s_ilogbf.S: Moved to ...
	* sysdeps/i386/fpu/s_ilogbf.S: ...here.
	* sysdeps/libm-i387/s_ilogbl.S: Moved to ...
	* sysdeps/i386/fpu/s_ilogbl.S: ...here.
	* sysdeps/libm-i387/s_llrint.S: Moved to ...
	* sysdeps/i386/fpu/s_llrint.S: ...here.
	* sysdeps/libm-i387/s_llrintf.S: Moved to ...
	* sysdeps/i386/fpu/s_llrintf.S: ...here.
	* sysdeps/libm-i387/s_llrintl.S: Moved to ...
	* sysdeps/i386/fpu/s_llrintl.S: ...here.
	* sysdeps/libm-i387/s_log1p.S: Moved to ...
	* sysdeps/i386/fpu/s_log1p.S: ...here.
	* sysdeps/libm-i387/s_log1pf.S: Moved to ...
	* sysdeps/i386/fpu/s_log1pf.S: ...here.
	* sysdeps/libm-i387/s_log1pl.S: Moved to ...
	* sysdeps/i386/fpu/s_log1pl.S: ...here.
	* sysdeps/libm-i387/s_log2.S: Moved to ...
	* sysdeps/i386/fpu/s_log2.S: ...here.
	* sysdeps/libm-i387/s_log2f.S: Moved to ...
	* sysdeps/i386/fpu/s_log2f.S: ...here.
	* sysdeps/libm-i387/s_log2l.S: Moved to ...
	* sysdeps/i386/fpu/s_log2l.S: ...here.
	* sysdeps/libm-i387/s_logb.S: Moved to ...
	* sysdeps/i386/fpu/s_logb.S: ...here.
	* sysdeps/libm-i387/s_logbf.S: Moved to ...
	* sysdeps/i386/fpu/s_logbf.S: ...here.
	* sysdeps/libm-i387/s_logbl.S: Moved to ...
	* sysdeps/i386/fpu/s_logbl.S: ...here.
	* sysdeps/libm-i387/s_lrint.S: Moved to ...
	* sysdeps/i386/fpu/s_lrint.S: ...here.
	* sysdeps/libm-i387/s_lrintf.S: Moved to ...
	* sysdeps/i386/fpu/s_lrintf.S: ...here.
	* sysdeps/libm-i387/s_lrintl.S: Moved to ...
	* sysdeps/i386/fpu/s_lrintl.S: ...here.
	* sysdeps/libm-i387/s_nearbyint.S: Moved to ...
	* sysdeps/i386/fpu/s_nearbyint.S: ...here.
	* sysdeps/libm-i387/s_nearbyintf.S: Moved to ...
	* sysdeps/i386/fpu/s_nearbyintf.S: ...here.
	* sysdeps/libm-i387/s_nearbyintl.S: Moved to ...
	* sysdeps/i386/fpu/s_nearbyintl.S: ...here.
	* sysdeps/libm-i387/s_remquo.S: Moved to ...
	* sysdeps/i386/fpu/s_remquo.S: ...here.
	* sysdeps/libm-i387/s_remquof.S: Moved to ...
	* sysdeps/i386/fpu/s_remquof.S: ...here.
	* sysdeps/libm-i387/s_remquol.S: Moved to ...
	* sysdeps/i386/fpu/s_remquol.S: ...here.
	* sysdeps/libm-i387/s_rint.S: Moved to ...
	* sysdeps/i386/fpu/s_rint.S: ...here.
	* sysdeps/libm-i387/s_rintf.S: Moved to ...
	* sysdeps/i386/fpu/s_rintf.S: ...here.
	* sysdeps/libm-i387/s_rintl.S: Moved to ...
	* sysdeps/i386/fpu/s_rintl.S: ...here.
	* sysdeps/libm-i387/s_scalbn.S: Moved to ...
	* sysdeps/i386/fpu/s_scalbn.S: ...here.
	* sysdeps/libm-i387/s_scalbnf.S: Moved to ...
	* sysdeps/i386/fpu/s_scalbnf.S: ...here.
	* sysdeps/libm-i387/s_scalbnl.S: Moved to ...
	* sysdeps/i386/fpu/s_scalbnl.S: ...here.
	* sysdeps/libm-i387/s_significand.S: Moved to ...
	* sysdeps/i386/fpu/s_significand.S: ...here.
	* sysdeps/libm-i387/s_significandf.S: Moved to ...
	* sysdeps/i386/fpu/s_significandf.S: ...here.
	* sysdeps/libm-i387/s_significandl.S: Moved to ...
	* sysdeps/i386/fpu/s_significandl.S: ...here.
	* sysdeps/libm-i387/s_sin.S: Moved to ...
	* sysdeps/i386/fpu/s_sin.S: ...here.
	* sysdeps/libm-i387/s_sincos.S: Moved to ...
	* sysdeps/i386/fpu/s_sincos.S: ...here.
	* sysdeps/libm-i387/s_sincosf.S: Moved to ...
	* sysdeps/i386/fpu/s_sincosf.S: ...here.
	* sysdeps/libm-i387/s_sincosl.S: Moved to ...
	* sysdeps/i386/fpu/s_sincosl.S: ...here.
	* sysdeps/libm-i387/s_sinf.S: Moved to ...
	* sysdeps/i386/fpu/s_sinf.S: ...here.
	* sysdeps/libm-i387/s_sinl.S: Moved to ...
	* sysdeps/i386/fpu/s_sinl.S: ...here.
	* sysdeps/libm-i387/s_tan.S: Moved to ...
	* sysdeps/i386/fpu/s_tan.S: ...here.
	* sysdeps/libm-i387/s_tanf.S: Moved to ...
	* sysdeps/i386/fpu/s_tanf.S: ...here.
	* sysdeps/libm-i387/s_tanl.S: Moved to ...
	* sysdeps/i386/fpu/s_tanl.S: ...here.
	* sysdeps/libm-i387/s_trunc.S: Moved to ...
	* sysdeps/i386/fpu/s_trunc.S: ...here.
	* sysdeps/libm-i387/s_truncf.S: Moved to ...
	* sysdeps/i386/fpu/s_truncf.S: ...here.
	* sysdeps/libm-i387/s_truncl.S: Moved to ...
	* sysdeps/i386/fpu/s_truncl.S: ...here.
	* sysdeps/libm-ieee754/k_standard.c: Moved to ...
	* sysdeps/ieee754/k_standard.c: ...here.
	* sysdeps/libm-ieee754/s_lib_version.c: Moved to ...
	* sysdeps/ieee754/s_lib_version.c: ...here.
	* sysdeps/libm-ieee754/s_matherr.c: Moved to ...
	* sysdeps/ieee754/s_matherr.c: ...here.
	* sysdeps/libm-ieee754/s_signgam.c: Moved to ...
	* sysdeps/ieee754/s_signgam.c: ...here.
	* sysdeps/ieee754/dbl2mpn.c: Moved to ...
	* sysdeps/ieee754/dbl-64/dbl2mpn.c: ...here.
	* sysdeps/ieee754/mpn2dbl.c: Moved to ...
	* sysdeps/ieee754/dbl-64/mpn2dbl.c: ...here.
	* sysdeps/libm-ieee754/e_acos.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_acos.c: ...here.
	* sysdeps/libm-ieee754/e_acosh.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_acosh.c: ...here.
	* sysdeps/libm-ieee754/e_asin.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_asin.c: ...here.
	* sysdeps/libm-ieee754/e_atan2.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_atan2.c: ...here.
	* sysdeps/libm-ieee754/e_atanh.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_atanh.c: ...here.
	* sysdeps/libm-ieee754/e_cosh.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_cosh.c: ...here.
	* sysdeps/libm-ieee754/e_exp.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_exp.c: ...here.
	* sysdeps/libm-ieee754/e_fmod.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_fmod.c: ...here.
	* sysdeps/libm-ieee754/e_gamma_r.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_gamma_r.c: ...here.
	* sysdeps/libm-ieee754/e_hypot.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_hypot.c: ...here.
	* sysdeps/libm-ieee754/e_j0.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_j0.c: ...here.
	* sysdeps/libm-ieee754/e_j1.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_j1.c: ...here.
	* sysdeps/libm-ieee754/e_jn.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_jn.c: ...here.
	* sysdeps/libm-ieee754/e_lgamma_r.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_lgamma_r.c: ...here.
	* sysdeps/libm-ieee754/e_log.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_log.c: ...here.
	* sysdeps/libm-ieee754/e_log10.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_log10.c: ...here.
	* sysdeps/libm-ieee754/e_pow.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_pow.c: ...here.
	* sysdeps/libm-ieee754/e_remainder.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_remainder.c: ...here.
	* sysdeps/libm-ieee754/e_sinh.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_sinh.c: ...here.
	* sysdeps/libm-ieee754/e_sqrt.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_sqrt.c: ...here.
	* sysdeps/libm-ieee754/k_cos.c: Moved to ...
	* sysdeps/ieee754/dbl-64/k_cos.c: ...here.
	* sysdeps/libm-ieee754/k_sin.c: Moved to ...
	* sysdeps/ieee754/dbl-64/k_sin.c: ...here.
	* sysdeps/libm-ieee754/k_tan.c: Moved to ...
	* sysdeps/ieee754/dbl-64/k_tan.c: ...here.
	* sysdeps/libm-ieee754/s_asinh.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_asinh.c: ...here.
	* sysdeps/libm-ieee754/s_atan.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_atan.c: ...here.
	* sysdeps/libm-ieee754/s_cbrt.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_cbrt.c: ...here.
	* sysdeps/libm-ieee754/s_ceil.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_ceil.c: ...here.
	* sysdeps/libm-ieee754/s_copysign.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_copysign.c: ...here.
	* sysdeps/libm-ieee754/s_cos.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_cos.c: ...here.
	* sysdeps/libm-ieee754/s_erf.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_erf.c: ...here.
	* sysdeps/libm-ieee754/s_exp2.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_exp2.c: ...here.
	* sysdeps/libm-ieee754/s_expm1.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_expm1.c: ...here.
	* sysdeps/libm-ieee754/s_fabs.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_fabs.c: ...here.
	* sysdeps/libm-ieee754/s_finite.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_finite.c: ...here.
	* sysdeps/libm-ieee754/s_floor.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_floor.c: ...here.
	* sysdeps/libm-ieee754/s_fpclassify.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_fpclassify.c: ...here.
	* sysdeps/libm-ieee754/s_frexp.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_frexp.c: ...here.
	* sysdeps/libm-ieee754/s_ilogb.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_ilogb.c: ...here.
	* sysdeps/libm-ieee754/s_isinf.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_isinf.c: ...here.
	* sysdeps/libm-ieee754/s_isnan.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_isnan.c: ...here.
	(__isnan): Comment above function says it returns 0 or 1, but it
	used to return 0 or -1.
	* sysdeps/libm-ieee754/s_llrint.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_llrint.c: ...here.
	* sysdeps/libm-ieee754/s_llround.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_llround.c: ...here.
	* sysdeps/libm-ieee754/s_log1p.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_log1p.c: ...here.
	* sysdeps/libm-ieee754/s_log2.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_log2.c: ...here.
	* sysdeps/libm-ieee754/s_logb.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_logb.c: ...here.
	* sysdeps/libm-ieee754/s_lrint.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_lrint.c: ...here.
	* sysdeps/libm-ieee754/s_lround.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_lround.c: ...here.
	* sysdeps/libm-ieee754/s_modf.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_modf.c: ...here.
	* sysdeps/libm-ieee754/s_nearbyint.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_nearbyint.c: ...here.
	* sysdeps/libm-ieee754/s_nextafter.c: Moved to ...
	* sysdeps/generic/s_nextafter.c: ...here.
	Add __nexttoward and nexttoward aliases if NO_LONG_DOUBLE.
	* sysdeps/libm-ieee754/s_remquo.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_remquo.c: ...here.
	* sysdeps/libm-ieee754/s_rint.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_rint.c: ...here.
	* sysdeps/libm-ieee754/s_round.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_round.c: ...here.
	* sysdeps/libm-ieee754/s_scalbn.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_scalbn.c: ...here.
	* sysdeps/libm-ieee754/s_signbit.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_signbit.c: ...here.
	* sysdeps/libm-ieee754/s_sin.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_sin.c: ...here.
	* sysdeps/libm-ieee754/s_sincos.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_sincos.c: ...here.
	* sysdeps/libm-ieee754/s_tan.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_tan.c: ...here.
	* sysdeps/libm-ieee754/s_tanh.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_tanh.c: ...here.
	* sysdeps/libm-ieee754/s_trunc.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_trunc.c: ...here.
	* sysdeps/libm-ieee754/t_exp2.h: Moved to ...
	* sysdeps/ieee754/dbl-64/t_exp2.h: ...here.
	* sysdeps/libm-ieee754/w_exp.c: Moved to ...
	* sysdeps/ieee754/dbl-64/w_exp.c: ...here.
	* sysdeps/ieee754/mpn2flt.c: Moved to ...
	* sysdeps/ieee754/flt-32/mpn2flt.c: ...here.
	* sysdeps/libm-ieee754/e_acosf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_acosf.c: ...here.
	* sysdeps/libm-ieee754/e_acoshf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_acoshf.c: ...here.
	* sysdeps/libm-ieee754/e_asinf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_asinf.c: ...here.
	* sysdeps/libm-ieee754/e_atan2f.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_atan2f.c: ...here.
	* sysdeps/libm-ieee754/e_atanhf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_atanhf.c: ...here.
	* sysdeps/libm-ieee754/e_coshf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_coshf.c: ...here.
	* sysdeps/libm-ieee754/e_expf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_expf.c: ...here.
	* sysdeps/libm-ieee754/e_fmodf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_fmodf.c: ...here.
	* sysdeps/libm-ieee754/e_gammaf_r.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_gammaf_r.c: ...here.
	* sysdeps/libm-ieee754/e_hypotf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_hypotf.c: ...here.
	* sysdeps/libm-ieee754/e_j0f.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_j0f.c: ...here.
	* sysdeps/libm-ieee754/e_j1f.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_j1f.c: ...here.
	* sysdeps/libm-ieee754/e_jnf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_jnf.c: ...here.
	* sysdeps/libm-ieee754/e_lgammaf_r.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_lgammaf_r.c: ...here.
	* sysdeps/libm-ieee754/e_log10f.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_log10f.c: ...here.
	* sysdeps/libm-ieee754/e_logf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_logf.c: ...here.
	* sysdeps/libm-ieee754/e_powf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_powf.c: ...here.
	* sysdeps/libm-ieee754/e_remainderf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_remainderf.c: ...here.
	* sysdeps/libm-ieee754/e_sinhf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_sinhf.c: ...here.
	* sysdeps/libm-ieee754/e_sqrtf.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_sqrtf.c: ...here.
	* sysdeps/libm-ieee754/k_cosf.c: Moved to ...
	* sysdeps/ieee754/flt-32/k_cosf.c: ...here.
	* sysdeps/libm-ieee754/k_sinf.c: Moved to ...
	* sysdeps/ieee754/flt-32/k_sinf.c: ...here.
	* sysdeps/libm-ieee754/k_tanf.c: Moved to ...
	* sysdeps/ieee754/flt-32/k_tanf.c: ...here.
	* sysdeps/libm-ieee754/s_asinhf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_asinhf.c: ...here.
	* sysdeps/libm-ieee754/s_atanf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_atanf.c: ...here.
	* sysdeps/libm-ieee754/s_cbrtf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_cbrtf.c: ...here.
	* sysdeps/libm-ieee754/s_ceilf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_ceilf.c: ...here.
	* sysdeps/libm-ieee754/s_copysignf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_copysignf.c: ...here.
	* sysdeps/libm-ieee754/s_cosf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_cosf.c: ...here.
	* sysdeps/libm-ieee754/s_erff.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_erff.c: ...here.
	* sysdeps/libm-ieee754/s_exp2f.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_exp2f.c: ...here.
	* sysdeps/libm-ieee754/s_expm1f.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_expm1f.c: ...here.
	* sysdeps/libm-ieee754/s_fabsf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_fabsf.c: ...here.
	* sysdeps/libm-ieee754/s_finitef.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_finitef.c: ...here.
	* sysdeps/libm-ieee754/s_floorf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_floorf.c: ...here.
	* sysdeps/libm-ieee754/s_fpclassifyf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_fpclassifyf.c: ...here.
	* sysdeps/libm-ieee754/s_frexpf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_frexpf.c: ...here.
	* sysdeps/libm-ieee754/s_ilogbf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_ilogbf.c: ...here.
	* sysdeps/libm-ieee754/s_isinff.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_isinff.c: ...here.
	* sysdeps/libm-ieee754/s_isnanf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_isnanf.c: ...here.
	* sysdeps/libm-ieee754/s_llrintf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_llrintf.c: ...here.
	* sysdeps/libm-ieee754/s_llroundf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_llroundf.c: ...here.
	* sysdeps/libm-ieee754/s_log1pf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_log1pf.c: ...here.
	* sysdeps/libm-ieee754/s_log2f.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_log2f.c: ...here.
	* sysdeps/libm-ieee754/s_logbf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_logbf.c: ...here.
	* sysdeps/libm-ieee754/s_lrintf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_lrintf.c: ...here.
	* sysdeps/libm-ieee754/s_lroundf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_lroundf.c: ...here.
	* sysdeps/libm-ieee754/s_modff.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_modff.c: ...here.
	* sysdeps/libm-ieee754/s_nearbyintf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_nearbyintf.c: ...here.
	* sysdeps/libm-ieee754/s_nextafterf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_nextafterf.c: ...here.
	* sysdeps/libm-ieee754/s_remquof.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_remquof.c: ...here.
	* sysdeps/libm-ieee754/s_rintf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_rintf.c: ...here.
	* sysdeps/libm-ieee754/s_roundf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_roundf.c: ...here.
	* sysdeps/libm-ieee754/s_scalbnf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_scalbnf.c: ...here.
	* sysdeps/libm-ieee754/s_signbitf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_signbitf.c: ...here.
	* sysdeps/libm-ieee754/s_sincosf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_sincosf.c: ...here.
	* sysdeps/libm-ieee754/s_sinf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_sinf.c: ...here.
	* sysdeps/libm-ieee754/s_tanf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_tanf.c: ...here.
	* sysdeps/libm-ieee754/s_tanhf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_tanhf.c: ...here.
	* sysdeps/libm-ieee754/s_truncf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_truncf.c: ...here.
	* sysdeps/libm-ieee754/t_exp2f.h: Moved to ...
	* sysdeps/ieee754/flt-32/t_exp2f.h: ...here.
	* sysdeps/libm-ieee754/w_expf.c: Moved to ...
	* sysdeps/ieee754/flt-32/w_expf.c: ...here.
	* sysdeps/libm-ieee754/e_acoshl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_acoshl.c: ...here.
	* sysdeps/libm-ieee754/e_atan2l.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_atan2l.c: ...here.
	* sysdeps/libm-ieee754/e_atanhl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_atanhl.c: ...here.
	* sysdeps/libm-ieee754/e_coshl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_coshl.c: ...here.
	* sysdeps/libm-ieee754/e_gammal_r.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_gammal_r.c: ...here.
	* sysdeps/libm-ieee754/e_hypotl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_hypotl.c: ...here.
	* sysdeps/libm-ieee754/e_remainderl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_remainderl.c: ...here.
	* sysdeps/libm-ieee754/e_sinhl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/e_sinhl.c: ...here.
	* sysdeps/libm-ieee754/s_asinhl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_asinhl.c: ...here.
	* sysdeps/libm-ieee754/s_cbrtl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_cbrtl.c: ...here.
	* sysdeps/libm-ieee754/s_ceill.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_ceill.c: ...here.
	* sysdeps/libm-ieee754/s_copysignl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_copysignl.c: ...here.
	* sysdeps/libm-ieee754/s_cosl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_cosl.c: ...here.
	* sysdeps/libm-ieee754/s_fabsl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_fabsl.c: ...here.
	* sysdeps/libm-ieee754/s_finitel.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_finitel.c: ...here.
	* sysdeps/libm-ieee754/s_floorl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_floorl.c: ...here.
	* sysdeps/libm-ieee754/s_fpclassifyl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_fpclassifyl.c: ...here.
	* sysdeps/libm-ieee754/s_frexpl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_frexpl.c: ...here.
	* sysdeps/libm-ieee754/s_ilogbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_ilogbl.c: ...here.
	* sysdeps/libm-ieee754/s_llrintl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_llrintl.c: ...here.
	* sysdeps/libm-ieee754/s_llroundl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_llroundl.c: ...here.
	* sysdeps/libm-ieee754/s_logbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_logbl.c: ...here.
	* sysdeps/libm-ieee754/s_lrintl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_lrintl.c: ...here.
	* sysdeps/libm-ieee754/s_lroundl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_lroundl.c: ...here.
	* sysdeps/libm-ieee754/s_modfl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_modfl.c: ...here.
	(__modfl): IEEE 854 long doubles should use SET_LDOUBLE_WORDS, not
	INSERT_WORDS.
	* sysdeps/libm-ieee754/s_nearbyintl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_nearbyintl.c: ...here.
	(__nearbyintl): Fix for exponents 2^30.
	* sysdeps/libm-ieee754/s_remquol.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_remquol.c: ...here.
	* sysdeps/libm-ieee754/s_rintl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_rintl.c: ...here.
	(__rintl): Fix for exponents 2^30.
	* sysdeps/libm-ieee754/s_roundl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_roundl.c: ...here.
	* sysdeps/libm-ieee754/s_scalbnl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_scalbnl.c: ...here.
	(__scalbnl): Fix exponent for subnormal result.
	* sysdeps/libm-ieee754/s_signbitl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_signbitl.c: ...here.
	* sysdeps/libm-ieee754/s_sincosl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_sincosl.c: ...here.
	* sysdeps/libm-ieee754/s_sinl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_sinl.c: ...here.
	* sysdeps/libm-ieee754/s_tanhl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_tanhl.c: ...here.
	* sysdeps/libm-ieee754/s_tanl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_tanl.c: ...here.
	* sysdeps/libm-ieee754/s_truncl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_truncl.c: ...here.
	* sysdeps/libm-ieee754/w_expl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/w_expl.c: ...here.
	* sysdeps/libm-i387/i686/s_fminl.S: Moved to ...
	* sysdeps/i386/i686/fpu/s_fminl.S: ...here.
	* sysdeps/libm-i387/s_scalblnf.c: Moved to ...
	* sysdeps/i386/fpu/s_scalblnf.c: ...here.
	* sysdeps/libm-ieee754/s_scalblnf.c: Moved to ...
	* sysdeps/ieee754/flt-32/s_scalblnf.c: ...here.
	* sysdeps/libm-i387/i686/s_fdiml.S: Moved to ...
	* sysdeps/i386/i686/fpu/s_fdiml.S: ...here.
	* sysdeps/libm-i387/e_rem_pio2f.c: Moved to ...
	* sysdeps/i386/fpu/e_rem_pio2f.c: ...here.
	* sysdeps/libm-ieee754/e_rem_pio2f.c: Moved to ...
	* sysdeps/ieee754/flt-32/e_rem_pio2f.c: ...here.
	* sysdeps/libm-i387/i686/s_fmin.S: Moved to ...
	* sysdeps/i386/i686/fpu/s_fmin.S: ...here.
	* sysdeps/libm-i387/k_rem_pio2.c: Moved to ...
	* sysdeps/i386/fpu/k_rem_pio2.c: ...here.
	* sysdeps/libm-ieee754/k_rem_pio2.c: Moved to ...
	* sysdeps/ieee754/dbl-64/k_rem_pio2.c: ...here.
	* sysdeps/libm-i387/k_rem_pio2f.c: Moved to ...
	* sysdeps/i386/fpu/k_rem_pio2f.c: ...here.
	* sysdeps/libm-ieee754/k_rem_pio2f.c: Moved to ...
	* sysdeps/ieee754/flt-32/k_rem_pio2f.c: ...here.
	* sysdeps/libm-i387/s_scalbln.c: Moved to ...
	* sysdeps/i386/fpu/s_scalbln.c: ...here.
	* sysdeps/libm-ieee754/s_scalbln.c: Moved to ...
	* sysdeps/ieee754/dbl-64/s_scalbln.c: ...here.
	* sysdeps/libm-i387/i686/s_fmax.S: Moved to ...
	* sysdeps/i386/i686/fpu/s_fmax.S: ...here.
	* sysdeps/libm-i387/t_exp.c: Moved to ...
	* sysdeps/i386/fpu/t_exp.c: ...here.
	* sysdeps/libm-ieee754/t_exp.c: Moved to ...
	* sysdeps/ieee754/dbl-64/t_exp.c: ...here.
	* sysdeps/libm-i387/e_rem_pio2.c: Moved to ...
	* sysdeps/i386/fpu/e_rem_pio2.c: ...here.
	* sysdeps/libm-ieee754/e_rem_pio2.c: Moved to ...
	* sysdeps/ieee754/dbl-64/e_rem_pio2.c: ...here.
	* sysdeps/libm-i387/s_isinfl.c: Moved to ...
	* sysdeps/i386/fpu/s_isinfl.c: ...here.
	* sysdeps/libm-ieee754/s_isinfl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_isinfl.c: ...here.
	* sysdeps/libm-i387/s_scalblnl.c: Moved to ...
	* sysdeps/i386/fpu/s_scalblnl.c: ...here.
	* sysdeps/libm-ieee754/s_scalblnl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_scalblnl.c: ...here.
	Fix exponent for subnormal result.
	* sysdeps/libm-ieee754/s_nexttowardl.c: Moved to ...
	* sysdeps/generic/s_nexttowardl.c: ...here.
	* sysdeps/libm-i387/i686/s_fmaxf.S: Moved to ...
	* sysdeps/i386/i686/fpu/s_fmaxf.S: ...here.
	* sysdeps/libm-i387/s_isnanl.c: Moved to ...
	* sysdeps/i386/fpu/s_isnanl.c: ...here.
	* sysdeps/libm-ieee754/s_isnanl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_isnanl.c: ...here.
	Comment above function says it returns 0 or 1, but it used to return
	0 or -1.
	* sysdeps/libm-i387/i686/s_fminf.S: Moved to ...
	* sysdeps/i386/i686/fpu/s_fminf.S: ...here.
	* sysdeps/libm-i387/i686/s_fdim.S: Moved to ...
	* sysdeps/i386/i686/fpu/s_fdim.S: ...here.
	* sysdeps/libm-i387/i686/s_fdimf.S: Moved to ...
	* sysdeps/i386/i686/fpu/s_fdimf.S: ...here.
	* sysdeps/libm-i387/i686/s_fmaxl.S: Moved to ...
	* sysdeps/i386/i686/fpu/s_fmaxl.S: ...here.
	* sysdeps/libm-ieee754/s_nexttoward.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_nexttoward.c: ...here.
	Cannot compare exponents with different biases without adjusting.
	* sysdeps/libm-ieee754/s_nexttowardf.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_nexttowardf.c: ...here.
	Cannot compare exponents with different biases without adjusting.
	* sysdeps/libm-i387/s_nextafterl.c: Moved to ...
	* sysdeps/i386/fpu/s_nextafterl.c: ...here.
	* sysdeps/libm-ieee754/s_nextafterl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/s_nextafterl.c: ...here.
	* sysdeps/ieee754/ldbl2mpn.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/ldbl2mpn.c: ...here.
	Removed __NO_LONG_DOUBLE_MATH ifndef around the whole file.
	* sysdeps/ieee754/mpn2ldbl.c: Moved to ...
	* sysdeps/ieee754/ldbl-96/mpn2ldbl.c: ...here.
	Removed __NO_LONG_DOUBLE_MATH ifndef around the whole file.
	* sysdeps/libm-ieee754/Dist: Split into ...
	* sysdeps/ieee754/dbl-64/Dist: ...this and ...
	* sysdeps/ieee754/flt-32/Dist: ...this file.

	* sysdeps/ieee754/dbl-64/s_nexttoward.c: New file.
	* sysdeps/ieee754/dbl-64/mpn2ldbl.c: New file.
	* sysdeps/ieee754/ldbl-96/math_ldbl.h: New file.
	* sysdeps/ieee754/ldbl-96/strtold.c: New file.
	* sysdeps/ieee754/ldbl-96/printf_fphex.c: New file.
	* sysdeps/ieee754/ldbl-128/s_sinl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_ceill.c: New file.
	* sysdeps/ieee754/ldbl-128/e_remainderl.c: New file.
	* sysdeps/ieee754/ldbl-128/ieee754.h: New file.
	* sysdeps/ieee754/ldbl-128/e_atan2l.c: New file.
	* sysdeps/ieee754/ldbl-128/s_finitel.c: New file.
	* sysdeps/ieee754/ldbl-128/s_roundl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_llrintl.c: New file.
	* sysdeps/ieee754/ldbl-128/e_gammal_r.c: New file.
	* sysdeps/ieee754/ldbl-128/s_llroundl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_sincosl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_cosl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_fpclassifyl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_ilogbl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_floorl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_logbl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_scalbnl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_remquol.c: New file.
	* sysdeps/ieee754/ldbl-128/s_nearbyintl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_tanl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_rintl.c: New file.
	* sysdeps/ieee754/ldbl-128/e_acoshl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_lroundl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_signbitl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_copysignl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_fabsl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_frexpl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_truncl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_modfl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_lrintl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_isinfl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_scalblnl.c: New file.
	* sysdeps/ieee754/ldbl-128/e_fmodl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_isnanl.c: New file.
	* sysdeps/ieee754/ldbl-128/math_ldbl.h: New file.
	* sysdeps/ieee754/ldbl-128/strtold.c: New file.
	* sysdeps/ieee754/ldbl-128/s_nextafterl.c: New file.
	* sysdeps/ieee754/ldbl-128/s_nexttoward.c: New file.
	* sysdeps/ieee754/ldbl-128/s_nexttowardf.c: New file.
	* sysdeps/ieee754/ldbl-128/printf_fphex.c: New file.
	* sysdeps/ieee754/ldbl-128/mpn2ldbl.c: New file.
	* sysdeps/ieee754/ldbl-128/ldbl2mpn.c: New file.

	* sysdeps/generic/math_ldbl.h: New file.
	* sysdeps/generic/s_nexttowardf.c: New file.
	* sysdeps/generic/strtold.c: New file.
	* sysdeps/generic/ldbl2mpn.c: New file.

	* math/machine/endian.h: Remove.
	* sysdeps/i386/fpu/Implies: Remove.
	* sysdeps/ieee754/Implies: Remove.

	* math/math_private.h: Move long double macros to math_ldbl.h
	header.

1999-07-12  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/getaddrinfo.c (gaih_inet): For non-passive
	connections without a hostname set address to localhost address.

1999-07-11  H.J. Lu  <hjl@gnu.org>

	* nscd/grpcache.c: Add prefix "__" to get[a-z]*_r () to get
	nscd's own strong version of the get[a-z]*_r function.
	* nscd/hstcache.c: Likewise.
	* nscd/pwdcache.c: Likewise.

1999-07-12  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Recognize 2.95 as gcc version number.
	Patch by Joel Klecker <jk@espy.org>.

1999-07-12  Andreas Schwab  <schwab@suse.de>

	* elf/rtld.c (dl_main): When putting back the interpreter object
	handle the case where a missing object might occur in the list of
	objects but not in the search list when in trace mode.

1999-07-11  Ulrich Drepper  <drepper@cygnus.com>

	* Versions.def (libnss_hesiod): Add GLIBC_2.2.
	* hesiod/Versions (libnss_hesiod) [GLIBC_2.2]: Add
	_nss_hesiod_initgroups.

1999-07-11  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/brk.c (static_data_start): New variable.
	(_hurd_set_brk, init_brk): Use that instead of &__data_start.
	Initialize it from &__data_start if defined, or else &_end.

1999-07-11  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/mmap.c (__mmap): Short-circuit to vm_allocate
	for MAP_ANON, prot==PROT_READ|PROT_WRITE.

1999-07-09  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c (buffered_vfprintf): Add locking.

1999-07-09  H.J. Lu  <hjl@gnu.org>

	* Versions.def (GLIBC_2.1.2): Added.

	* nss/getXXent_r.c: Make the new ABI GLIBC_2.1.2 and keep the
	old one as GLIBC_2.0.
	* nss/getXXbyYY_r.c: Likewise.

	* grp/Versions (getgrent_r, getgrgid_r, getgrnam_r): Added to
	GLIBC_2.1.2.
	* inet/Versions (getaliasbyname_r, getaliasent_r,
	gethostbyaddr_r, gethostbyname2_r, gethostbyname_r,
	gethostent_r, getnetbyaddr_r, getnetbyname_r, getnetent_r,
	getnetgrent_r, getprotobyname_r, getprotobynumber_r,
	getprotoent_r, getrpcbyname_r, getrpcbynumber_r, getrpcent_r,
	getservbyname_r): Likewise.
	* pwd/Versions (getpwent_r, getpwuid_r): Likewise.
	* shadow/Versions (getspent_r, getspnam_r): Likewise.

1999-07-09  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/bits/string.h (__memcpy_c): Help some stupid old
	compilers.
	(__memset_cc): Likewise.

	* sysdeps/generic/libc-start.c: For SUID binaries check whether
	the standard file descriptors are open.
	Reported by Chris Evans <chris@ferret.lmh.ox.ac.uk>.

	* sysdeps/unix/sysv/linux/syscalls.list: Remove mmap64 alias for mmap.
	* sysdeps/unix/sysv/linux/mmap64.c: Test whether mapped area is in
	range of mmap.  If not fail.
	Patches by Daniel Jacobowitz <dan@debian.org>.

	* elf/rtld.c: Split _dl_start in two pieces to prevent GOT usage
	before the relocation happened.
	Patch by Franz Sirl <Franz.Sirl-kernel@lauterbach.com>.

	* Versions.def (libnsl): Add GLIBC_2.2.
	* nis/Versions (libnsl) [GLIBC_2.2]: Add xdr_ypall.

1999-07-08  Cristian Gafton  <gafton@redhat.com>

	* nis/yp_xdr.c (xdr_ypall): New function.

1999-07-09  Andreas Schwab  <schwab@suse.de>

	* elf/Makefile (headers): Remove bits/dlfcn.h and dlfcn.h.

	* dlfcn/Makefile (headers): Add bits/dlfcn.h.

1999-07-09  Ulrich Drepper  <drepper@cygnus.com>

	* hesiod/Versions [GLIBC_2.2]: Add _nss_hesiod_initgroups.
	* hesiod/hesiod-grp.c: Add initgroups support.
	Patch by Nalin Dahyabhai <nsdahya1@pobox.com>.

1999-07-08  Andreas Schwab  <schwab@suse.de>

	* libio/iofopncook.c (fopencookie): Set _fileno to -2.

	* libio/libioP.h (_IO_file_is_open): Only check for -1, not all
	negative numbers.

	* libio/fileops.c (_IO_new_file_close_it): Set _fileno to -1, not
	EOF.
	* libio/oldfileops.c (_IO_old_file_close_it): Likewise.

1999-07-08  Andreas Schwab  <schwab@suse.de>

	* stdio-common/vfprintf.c (buffered_vfprintf): Initialize _mode.

1999-07-08  Andreas Schwab  <schwab@suse.de>

	* libio/fileno.c: Return -1 instead of EOF and set errno if the
	stream is not a real file stream.

1999-07-08  Andreas Schwab  <schwab@suse.de>

	* manual/charset.texi: Fix typos.

1999-07-07  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/gnu/Makefile (libdl-routines): Add eval.

1999-07-06  Zack Weinberg  <zack@rabi.columbia.edu>

	* dlfcn: New directory.  Move the following files from elf:
	dladdr.c, dlclose.c, dlerror.c, dlfcn.h, dlopen.c,
	dlopenold.c, dlsym.c, dlvsym.c.
	* dlfcn/Makefile: New file.
	* dlfcn/Versions: New file.
	* dlfcn/dlsym.c: All ELF-specific code split out to new
	function _dl_sym.
	* dlfcn/dlvsym.c: All ELF-specific code split out to new
	function _dl_vsym.
	* elf/dl-sym.c: New file.  _dl_sym and _dl_vsym are
	implemented here.

	* dlfcn/dladdr.c: Remove all references to ELF data structures
	or headers.
	* dlfcn/dlclose.c: Likewise.
	* dlfcn/dlerror.c: Likewise.
	* dlfcn/dlopen.c: Likewise.
	* dlfcn/dlopenold.c: Likewise.

	* Makeconfig (dlfcn): New variable - set to `dlfcn' if elf is
	yes, empty otherwise.
	(libdl): Set to dlfcn/libdl.so or libdl.a if elf is yes,
	depending on build-shared.
	(subdirs): Add $(dlfcn).
	(rpath-dirs): Add dlfcn.
	* elf/Makefile: Remove all references to libdl or its
	components, except the ones relating to the test cases.
	(routines): Add dl-sym.
	* elf/Versions (libc): Add _dl_sym and _dl_vsym for GLIBC_2.2.
	(libdl): Delete.

	* elf/dl-close.c (_dl_close): Change argument to void *.
	* elf/dl-open.c (_dl_open): Change return type to void *.
	* elf/eval.c: Removed.
	* elf/ldsodefs.h: Move prototypes of _dl_catch_error,
	_dlerror_run, _dl_open, _dl_close, _dl_addr, and
	_dl_mcount_wrapper_check to include/dlfcn.h.  Delete
	_CALL_DL_FCT macro.
	* include/dlfcn.h: Also prototype _dl_sym and _dl_vsym here.
	Include real header from dlfcn directory.
	* include/ldsodefs.h: Removed.

	* grp/initgroups.c: Use DL_CALL_FCT not _CALL_DL_FCT.
	* nss/getXXbyYY_r.c: Likewise.
	* nss/getXXent_r.c: Likewise.
	* iconv/gconv.c: Likewise.  Don't include ldsodefs.h.
	* iconv/gconv_db.c: Likewise.  Don't include ldsodefs.h.
	* iconv/skeleton.c: Don't include ldsodefs.h.
	* nss/nsswitch.h: Don't include ldsodefs.h.  Include dlfcn.h.

1999-07-07  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/setenv.c: Describe problem.

	* malloc/malloc.c (request2size): Also set errno if failing.

	* malloc/malloc.c (request2size): Take care of overflow in
	addition.

	* sysdeps/posix/getcwd.c: Correct last patch.  Handle getcwd
	(NULL, != 0) correctly.

	* elf/dl-load.c: Use a few more __builtin_expect.

	* sysdeps/posix/getcwd.c: When resizing buffer make sure new size
	is large enough.

1999-07-07  Andreas Schwab  <schwab@suse.de>

	* sysdeps/unix/sysv/linux/getpt.c: Check that /dev/pts is mounted.
	(_PATH_DEVPTS, DEVPTS_SUPER_MAGIC): New definitions.
	(_PATH_DEVPTMX): Use _PATH_DEV.

1999-07-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* malloc/tst-malloc.c: New file.  Tests some basic functionality.
	* malloc/Makefile (tests): Add tst-malloc.

1999-07-06  Ulrich Drepper  <drepper@cygnus.com>

	* libio/oldtmpfile.c: Adjust call of __gen_tempname to match new
	convention.

	* sysdeps/unix/sysv/linux/alpha/ioperm.c: Update for some more
	motherboards.
	Patch by Jay Estabrook.

	* sysdeps/unix/sysv/linux/configure.in: Don't test for libc4 in
	ldd for SPARC.
	* sysdeps/unix/sysv/linux/sparc/ldd-rewrite.sed: New file.
	Patch by Cristian Gafton.

1999-07-02  Cristian Gafton  <gafton@redhat.com>

	* sysdeps/unix/sysv/linux/bits/socket.h (__cmsg_nxthdr): "return 0"
	instead of "return NULL" to make C++ happy.

1999-07-04  Mark Kettenis  <kettenis@gnu.org>

	* libio/iofdopen.c (_IO_new_fdopen): Set EINVAL if MODE is not
	allowed by the file access mode of the open file.

1999-07-06  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/setfpucw.c: Include math.h to get all needed
	macros defined.

1999-07-03  Jakub Jelinek   <jj@ultra.linux.cz>

	* sysdeps/sparc/sparc64/submul_1.S: Fix carry handling. Optimize.
	* sysdeps/sparc/sparc64/lshift.S: Make a leaf subroutine. Optimize.
	* sysdeps/sparc/sparc64/rshift.S: Likewise.
	* sysdeps/sparc/sparc64/mul_1.S: Optimize.

1999-07-04  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c (request2size): Check for overflow and return
	NULL whenever it is encountered.

1999-07-04  Zack Weinberg  <zack@rabi.columbia.edu>

	* sysdeps/posix/tempname.c (__gen_tempname):   Add
	ability to create directories.  Replace OPENIT and LARGEFILE
	args with a single flags parameter.
	* sysdeps/generic/tempname.c: Likewise.
	* include/stdio.h: Adjust prototype of __gen_tempname to
	match.  Define symbolic constants for second argument.

	* misc/mkdtemp.c: New file, provides new function mkdtemp().
	* stdlib/stdlib.h: Prototype it.
	* misc/Versions: Export it.
	* misc/Makefile (routines): Add mktemp.
	* manual/filesys.texi: Document it.

	* misc/mktemp.c: Adjust call of __gen_tempname to match new
	convention.
	* misc/mkstemp.c: Likewise.
	* stdio-common/tempnam.c: Likewise.
	* stdio-common/tmpfile.c: Likewise.
	* stdio-common/tmpfile64.c: Likewise.
	* stdio-common/tmpnam.c: Likewise.
	* stdio-common/tmpnam_r.c: Likewise.

1999-07-05  Jakub Jelinek   <jj@ultra.linux.cz>

	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Support
	R_SPARC_OLO10 relocations.
	* elf/elf.h (R_SPARC_OLO10): Fix comment.

1999-07-02  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp-test.c: Revert bogus 'unset IFS' change.  It
	doesn't belong in the tests, but in the wordexp implementation.

	* posix/wordexp.c (exec_comm): Unset IFS so that subshells don't
	split fields.

1999-07-01  Cristian Gafton  <gafton@redhat.com>

	* time/strptime.c (strptime): Initialize the tm struct first to avoid
	returning bogus results on incomplete data.
	(strptime_internal): day_of_the_week() requres both tm_mon and
	tm_mday to be initialized.
	Compute them first if they are not given.
	(strptime_internal): (have_mon, have_mday): New variables.

1999-07-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* inet/rcmd.c (__icheckhost): Fix typo in last patch.

1999-07-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* wcsmbs/wcschr.c (wcschr): Fix last patch: Add missing semicolon.
	* wcsmbs/wcsrchr.c (wcsrchr): Likewise.

1999-07-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* posix/wordexp.c (parse_tilde): Handle failing call to
	get.*_r functions correctly for non-existing entry.
	* sysdeps/posix/cuserid.c (cuserid): Likewise.
	* sysdeps/posix/getaddrinfo.c (gaih_inet_serv): Likewise.

1999-06-30  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/gethostid.c: Handle failing call to
	getxxbyYY_r functions correctly for non-existing entry.
	* sunrpc/getrpcport.c: Likewise.
	* sunrpc/clnt_simp.c: Likewise.
	* inet/rexec.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* inet/rcmd.c: Likewise.
	* sysdeps/generic/glob.c: Likewise.

1999-06-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* pwd/Makefile (tests): Add rules for tst-getpw.

	* pwd/tst-getpw.c: New program to test getpw.

1999-06-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* inet/rcmd.c (__icheckhost): Test for gethostbyname_r result
	correctly.

1999-06-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/arith.texi (System V Number Conversion): Fix the
	description which confused pointer and value to pointer.
	Reported by Andries.Brouwer@cwi.nl.

1999-06-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* pwd/getpw.c (__getpw): Check for NULL result pointer.

1999-06-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/users.texi (Lookup User): Document POSIX return
	semantics for getpwuid_r and getgrgid_r.

	* manual/socket.texi (Host Names): Document that the result
	pointer is null in case of error or host not found and fix a
	typo.  Give a small example.

1999-06-30  Ulrich Drepper  <drepper@cygnus.com>

	* pwd/getpw.c: Add warning since no buffer size is given and
	therefore no overrun tests are possible.

1999-06-30  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* pwd/pwd.h: Add getpw prototype declaration.

1999-06-30  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wcsrchr.c: Fix handling of L'\0' parameter.
	* wcsmbs/wcschr.c: Likewise.

1999-06-28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/libm-ieee754/e_gamma_r.c: Initialize *signgamp for NaN
	returns.
	* sysdeps/libm-ieee754/e_gammaf_r.c: Likewise.
	* sysdeps/libm-ieee754/e_gammal_r.c: Likewise.
	Reported by John Reiser <jreiser@BitWagon.com> [PR libc/1185].

	* elf/dl-dst.h: Fix typo.
	* elf/dl-open.c: Likewise.

1999-06-26  Zack Weinberg  <zack@rabi.columbia.edu>

	* elf/dl-libc.c: New file, provides three functions:
	__libc_dlopen, __libc_dlclose, __libc_dlsym.
	* include/dlfcn.h: Prototype them.  Prototype _dl_addr.
	* elf/Makefile (routines): Add dl-libc.c.
	* elf/dl-profstub.c (_dl_mcount_wrapper): Change type of
	argument to void *.
	* elf/ldsodefs.h: Change proto and use of _dl_mcount_wrapper to match.

	* iconv/gconv.c: Include dlfcn.h.
	* iconv/gconv_db.c: Likewise.
	* malloc/mtrace.c: Likewise.  Don't include ldsodefs.h.

	* iconv/gconv_int.h (struct __gconv_loaded_object): Change
	`handle' to a void *.
	(__gconv_find_func): Delete prototype.

	* iconv/gconv_dl.c: Don't include ldsodefs.h.  Remove
	dlerror_run and related functions and structs.  Use
	__libc_dlopen, __libc_dlsym, __libc_dlclose.
	* nss/nsswitch.c: Likewise.

1999-06-28  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/gethostid.c: Test for gethostbyname_r
	function correctly.

	* sunrpc/getrpcport.c: Test for gethostbyname_r function
	correctly.

	* sunrpc/clnt_simp.c: Test for gethostbyname_r function correctly.

	* sunrpc/clnt_gen.c: Test for gethostbyname_r and getprotobyname_r
	functions correctly.

	* inet/rexec.c (rexec): Test for gethostbyname_r result correctly.

	* inet/rcmd.c: Test for gethostbyname_r result correctly.  Optimize
	file reading a bit.

	* sysdeps/generic/glob.c: Test for getpwnam_r result correctly.

1999-06-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/string.texi (Copying and Concatenation): Mention that
	strndup is a GNU extension.

1999-06-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* pwd/getpw.c (__getpw): Fix check for error return.

1999-06-25  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* elf/dl-deps.c (_dl_map_object_deps): When looking for the next
	occurence of the aux object start with the current list entry, not
	the new one.  Adjust tail pointer in the unique list.  Explain how
	the meaning of the variables changes [PR libc/1168].

1999-06-27  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/m68k/fpu/Dist: New file.

1999-06-26  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/m68k/fpu/bits/mathinline.h: Move all libm internal
	definitions...
	* sysdeps/m68k/fpu/mathimpl.h: ... here.  New file.
	* sysdeps/m68k/fpu/e_acos.c: Include "mathimpl.h".
	* sysdeps/m68k/fpu/e_atan2.c: Likewise.
	* sysdeps/m68k/fpu/e_fmod.c: Likewise.
	* sysdeps/m68k/fpu/e_pow.c: Likewise.
	* sysdeps/m68k/fpu/e_scalb.c: Likewise.
	* sysdeps/m68k/fpu/s_ccos.c: Likewise.
	* sysdeps/m68k/fpu/s_ccosh.c: Likewise.
	* sysdeps/m68k/fpu/s_cexp.c: Likewise.
	* sysdeps/m68k/fpu/s_csin.c: Likewise.
	* sysdeps/m68k/fpu/s_csinh.c: Likewise.
	* sysdeps/m68k/fpu/s_ilogb.c: Likewise.
	* sysdeps/m68k/fpu/s_llrint.c: Likewise.
	* sysdeps/m68k/fpu/s_llrintf.c: Likewise.
	* sysdeps/m68k/fpu/s_llrintl.c: Likewise.
	* sysdeps/m68k/fpu/s_modf.c: Likewise.

1999-06-25  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd.h, hurd/hurd/fd.h, hurd/hurd/port.h, hurd/hurd/signal.h,
	hurd/hurd/threadvar.h, hurd/hurd/userlink.h: Instead of
	_EXTERN_INLINE, use a macro specific to each file,
	_HURD_FD_H_EXTERN_INLINE and the like.
	* hurd/Makefile (inline-headers): New variable.
	(routines): Remove hurdinline.  Add $(inlines).
	(inlines): New variable.
	($(inlines:%=$(objpfx)%.c)): New static pattern rule to generate them.
	(generated): Append those here.
	* hurd/hurdinline.c: File removed.

	* sysdeps/generic/glob64.c: Include <stddef.h> for NULL.

	* mach/Versions (libc: GLIBC_2.0): Add __mig_strncpy.

1999-06-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nscd/connections.c (nscd_run): Use correct type for optlen variable.

1999-06-25  Ulrich Drepper  <drepper@cygnus.com>

	* string/bits/string2.h (strnlen): Remove extra prototype.

1999-06-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/filesys.texi (Working on Directory Trees): Fix typos.
	Reported by Andries.Brouwer@cwi.nl.

1999-06-24  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/connections.c (handle_request): Use correct type for optlen
	variable.

	* misc/tst-efgcvt.c (ecvt_tests): Test 92.0 with ndigits == 16.
	* misc/efgcvt_r.c (ecvt_r): Limit ndigits before passing it to fcvt_r.

1999-06-24  Thorsten Kukuk  <kukuk@suse.de>

	* nscd/grpcache.c: Add "notfound" data to cache, not iov pointer.
	* nscd/pwdcache.c: Likewise.
	* nscd/hstcache.c: Likewise.

1999-06-23  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/fpu_control.c: Include math.h for __P definition.

	* posix/getopt.h: Include stdio.h.

	* manual/arith.texi: Document restriction of ndigit parameter of
	ecvt and friends.
	* misc/efgcvt.c: Define NDIGIT_MAX.
	(gcvt): Limit precision in sprintf call to NDIGIT_MAX.
	Do not dynamically allocate the static buffers.  They are small enough.
	* misc/efgcvt_r.c: Define NDIGIT_MAX.
	(fcvt_r): Limit precision in snprintf call to NDIGIT_MAX.
	* misc/qefgcvt.c: Define NDIGIT_MAX.
	* misc/qefgcvt_r.c: Likewise.
	* misc/tst-efgcvt.c (special): Add test for large ndigit parameter.

1999-06-23  Zack Weinberg  <zack@rabi.columbia.edu>

	* libio/stdio.h: Define stdin, stdout, stderr as macros.
	* math/complex.h: Don't define CX_LIMITED_RANGE_{ON,OFF,DEFAULT}.
	These are *pragmas* not macros.
	* wcsmbs/wchar.h: Fix comment.

	* grp/grp.h: Use __foo_t_defined convention to typedef things
	only once.
	* io/sys/stat.h: Likewise.
	* libio/stdio.h: Likewise.
	* posix/unistd.h: Likewise.
	* posix/sys/types.h: Likewise.
	* posix/sys/wait.h: Likewise.
	* pwd/pwd.h: Likewise.
	* signal/signal.h: Likewise.
	* sysdeps/generic/stdint.h: Likewise.
	* sysdeps/gnu/utmpx.h: Likewise.
	* termios/termios.h: Likewise.

1999-06-23  Ulrich Drepper  <drepper@cygnus.com>

	* stdio/fputc.c: Don't define alias if fputc is defined as a
	macro.
	* stdio/putc.c: Define weak alias here since it is not done
	anymore in fputc.c.

1999-06-23  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* assert/assert.h: Don't produce `defined' as part of macro
	expansion.

1999-06-23  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/read.c (__libc_read): Just call __pread with
	OFFSET argument of (off_t) -1.
	* sysdeps/mach/hurd/write.c (__libc_write): Just call __pwrite with
	OFFSET argument of (off_t) -1.

	* sysdeps/mach/hurd/pwrite.c: New file.
	* sysdeps/mach/hurd/pread.c: New file.

	* hurd/fd-read.c (_hurd_fd_read): Take new parameter OFFSET and
	pass it in the RPC instead of always -1.
	* hurd/fd-write.c (_hurd_fd_write): Likewise.
	* hurd/hurd/fd.h: Update decls.

1999-06-22  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libio/wscanf.c: Include <wchar.h> for prototype.

1999-06-22  Ulrich Drepper  <drepper@cygnus.com>

	* manual/io.texi. Fix typos.
	* manual/stdio.texi: Likewise.
	Patches by Brian Youmans <3diff@gnu.org>.

1999-06-22  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/powerpc/strcmp.S: Don't return a zero result if the high
	bits of two words differ.

1999-06-21  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* libio/Makefile (routines): Add putwchar and putwchar_u.

	* libio/putwchar.c: Include <wchar.h> instead of "stdio.h".
	* libio/putwchar_u.c: Likewise.  Use _IO_stdout instead of
	stdout.  Fix parameter name.

	* libio/getchar.c: Consistently use _IO_stdin instead of stdin.
	* libio/getchar_u.c: Likewise.

	* libio/putchar_u.c: Use _IO_stdout instead of stdout.

1999-06-21  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* include/features.h (__GNUC_PREREQ): Don't generate `defined' via
	macro expansion---it's undefined.  Properly parenthesize
	substituted parameters.
	(__GLIBC_PREREQ): Likewise.

1999-06-21  Ulrich Drepper  <drepper@cygnus.com>

	* Makeconfig (CPPFLAGS): Revert last change.  It has too many
	weird effects.

	* stdlib/longlong.h: Provide __P definition if not already
	defined.

	* include/wchar.h: Use __gnuc_va_list not va_list in prototype.

1999-06-18  Thorsten Kukuk  <kukuk@suse.de>

	* sysdeps/alpha/atomicity.h: Correct counting of subsections.

1999-06-17  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* stdlib/tst-strtoll.c: Avoid warning about huge constant.

1999-06-20  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* stdio-common/vfprintf.c (group_member): Make parameters and
	return types pointers to CHAR_T instead of UCHAR_T.
	(vfprintf): Change type of work_buffer, workend and string to
	CHAR_T pointer/array.
	(process_arg, process_string_arg): Adjust/remove casts.  Add
	missing use of L_ macro.
	(printf_unknown): Add missing uses of L_ macro.

1999-06-20  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* wcsmbs/wcschrnul.c: Explicitly cast return value to avoid
	warning.

1999-06-20  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* libio/wgenops.c (__wuflow): Fix use of WEOF vs. EOF.  Call
	_IO_switch_to_wget_mode instead of _IO_switch_to_get_mode.
	(__wunderflow): Likewise.
	(_IO_switch_to_wget_mode): Likewise.
	(_IO_init_wmarker): Likewise.

	* libio/wfileops.c (_IO_wfile_seekoff): Call
	_IO_switch_to_wget_mode, not _IO_switch_to_get_mode.
	(_IO_wfile_jumps): Fix pbackfail entry.

	* libio/iosetvbuf.c (_IO_setvbuf): Only call wide char setbuf
	function if the stream is currently unoriented.

1999-06-19  Zack Weinberg  <zack@rabi.columbia.edu>

	* wcsmbs/wchar.h: Define __need___va_list before including stdarg.h.
	Wrap all wide stream functions with #ifdef __USE_ISOC9X.  Use
	__gnuc_va_list in v*w(printf|scanf) prototypes.

1999-06-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libio/oldiopopen.c (_IO_old_proc_open): Apply change from
	1999-03-29 to iopopen also here.
	Reported by Richard Braakman <dark@xs4all.nl>.

1999-06-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* include/features.h: Use __GNUC_PREREQ.
	* sysdeps/i386/fpu/bits/mathinline.h: Likewise.

1999-06-19  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* stdio-common/vfscanf.c (ungetc, inchar) [COMPILE_WPRINTF]:
	Change EOF to WEOF and remove cast.
	(UNGETC): Remove macro.
	(_IO_vfwscanf): Change isspace to ISSPACE and UNGETC to ungetc.
	* stdio-common/printf-parse.h (find_spec) [!COMPILE_WPRINTF]:
	Change ISASCII to isascii and MBRLEN to mbrlen.
	(parse_one_spec): Compare info.spec always against wchar_t
	values.
	* stdio-common/vfprintf.c: Remove unused ISASCII and MBRLEN.
	(_itoa, _itoa_word) [COMPILE_WRPINTF]: Don't cast second argument.
	(NOT_IN_JUMP_RANGE, CHAR_CLASS): Change (int) to (INT_T), use L_.

1999-06-19  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* libio/Makefile (shared-only-routines): Add oldiofgetpos,
	oldiofgetpos64, oldiofsetpos and oldiofsetpos64.
	(routines): Include oldiofgetpos, oldiofgetpos64, oldiofsetpos and
	oldiofsetpos64 only if doing versioning.

1999-06-20  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wchar.h: Declare wcstof and wcstold for ISO C9x.

1999-06-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libio/libio.h: Fix last patch.

1999-06-20  Ulrich Drepper  <drepper@cygnus.com>

	* libio/libio.h (_IO_putwc): Correct type of first argument.
	* wcsmbs/wchar.h: (fputwc, putwc, putwchar, fputwc_unlocked,
	putwc_unlocked, putwchar_unlocked): Likewise.
	* libio/fputwc.c: Likewise.
	* libio/fputwc_unlocked.c: Likewise.
	* libio/putwc.c: Likewise.
	* libio/putwc_unlocked.c: Likewise.
	* libio/putwchar.c: Likewise.
	* libio/putwchar_unlocked.c: Likewise.

1999-06-19  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/gnu/siglist.h: File moved to ...
	* sysdeps/generic/siglist.h: ... here.  This file should be usable for
	any platform, since it just associates the SIG* macros with text names
	and descriptions. For any signal macros do not exist on every
	platform, we can use #ifdef tests here and still use this single
	common file for all platforms.
	* sysdeps/generic/siglist.c: Rewrite using <siglist.h>.  This file
	should be usable for all platforms after the binary compatibility
	stuff in the current sysdeps/gnu version is no longer required.
	* sysdeps/generic/Makefile: Remove rules for generating siglist.c.
	* sysdeps/generic/make_siglist.c: File removed.
	* sysdeps/mach/hurd/siglist.h: Use #include_next.
	* sysdeps/unix/sysv/linux/siglist.h: Likewise.

1999-06-16  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/unix/sysv/linux/siglist.c: Moved to ...
	* sysdeps/gnu/siglist.c: ... here.
	Use <siglist.h> instead of "siglist.h", to ensure sysdeps-search.
	Use <bits/wordsize.h> instead of <sizes.h> to determine PTR_SIZE_STR.
	* sysdeps/gnu/siglist.h: New file, contents from linux version.
	Add entry for SIGLOST protected by #ifdef.
	* sysdeps/unix/sysv/linux/siglist.h: Just #include that file,
	and define OLD_SIGLIST_SIZE_STR.
	* sysdeps/mach/hurd/siglist.h: New file, likewise.

1999-06-18  Zack Weinberg  <zack@rabi.columbia.edu>

	* include/features.h: Define new macros __GNUC_PREREQ and
	__GLIBC_PREREQ which can be used to test the version of gcc
	and glibc respectively.

	* assert/assert.h: Use __GNUC_PREREQ.
	* intl/libintl.h: Likewise.
	* math/complex.h: Likewise.
	* math/tgmath.h: Likewise.
	* misc/sys/cdefs.h: Likewise.
	* posix/sys/types.h: Likewise.
	* socket/sys/socket.h: Likewise.
	* string/bits/string2.h: Likewise.
	* sysdeps/alpha/fpu/bits/mathinline.h: Likewise.
	* sysdeps/i386/fpu/bits/mathinline.h: Likewise.

1999-06-18  Zack Weinberg  <zack@rabi.columbia.edu>

	* include/libintl.h: Declare _libc_intl_domainname here.
	Define _ and N_ here.
	* include/libc-symbols.h: Don't include <libintl.h>.  Don't
	define _ and N_.  Don't declare _libc_intl_domainname.
	* Makeconfig (CPPFLAGS): Use -imacros to read libc-symbols.h.

	* db2/config.h: Don't include sys/stat.h or define
	HAVE_ST_BLKSIZE here...
	* db2/compat.h: ...do it here.

	* linuxthreads/internals.h: Include bits/libc-tsd.h after all
	other headers.
	* linuxthreads/no-tsd.c: Include sys/cdefs.h for __P.
	* iconv/iconv.c: Include stddef.h for NULL.
	* malloc/malloc.h: Include features.h.
	* sysdeps/generic/morecore.c: Use __malloc_ptr_t not __ptr_t.

	* sysdeps/unix/make_errlist.c: Write an "#include <libintl.h>"
	into the generated file.
	* sysdeps/gnu/errlist.awk: Likewise.
	* sysdeps/gnu/errlist.c: Rebuilt.

	* assert/assert-perr.c: Include libintl.h.
	* assert/assert.c: Likewise.
	* elf/dl-open.c: Likewise.
	* elf/dlsym.c: Likewise.
	* elf/dlvsym.c: Likewise.
	* iconv/iconv_prog.c: Likewise.
	* inet/rcmd.c: Likewise.
	* inet/ruserpass.c: Likewise.
	* locale/programs/charset.c: Likewise.
	* locale/programs/ld-collate.c: Likewise.
	* locale/programs/ld-ctype.c: Likewise.
	* locale/programs/ld-messages.c: Likewise.
	* locale/programs/ld-monetary.c: Likewise.
	* locale/programs/ld-numeric.c: Likewise.
	* locale/programs/ld-time.c: Likewise.
	* locale/programs/locfile.c: Likewise.
	* locale/programs/repertoire.c: Likewise.
	* login/programs/database.c: Likewise.
	* login/programs/request.c: Likewise.
	* malloc/mcheck.c: Likewise.
	* misc/error.c: Likewise.
	* nis/nis_call.c: Likewise.
	* nis/nis_callback.c: Likewise.
	* nis/nis_error.c: Likewise.
	* nis/nis_local_names.c: Likewise.
	* nis/nis_print.c: Likewise.
	* nis/nis_print_group_entry.c: Likewise.
	* nis/ypclnt.c: Likewise.
	* nis/nss_nisplus/nisplus-publickey.c: Likewise.
	* nscd/cache.c: Likewise.
	* nscd/connections.c: Likewise.
	* nscd/grpcache.c: Likewise.
	* nscd/hstcache.c: Likewise.
	* nscd/nscd_conf.c: Likewise.
	* nscd/nscd_stat.c: Likewise.
	* nscd/pwdcache.c: Likewise.
	* posix/id.c: Likewise.
	* resolv/herror.c: Likewise.
	* stdio-common/psignal.c: Likewise.
	* string/strsignal.c: Likewise.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/clnt_perr.c: Likewise.
	* sunrpc/clnt_raw.c: Likewise.
	* sunrpc/clnt_tcp.c: Likewise.
	* sunrpc/clnt_udp.c: Likewise.
	* sunrpc/clnt_unix.c: Likewise.
	* sunrpc/get_myaddr.c: Likewise.
	* sunrpc/pm_getmaps.c: Likewise.
	* sunrpc/pmap_clnt.c: Likewise.
	* sunrpc/pmap_rmt.c: Likewise.
	* sunrpc/rpc_main.c: Likewise.
	* sunrpc/rpc_scan.c: Likewise.
	* sunrpc/svc_run.c: Likewise.
	* sunrpc/svc_simple.c: Likewise.
	* sunrpc/svc_tcp.c: Likewise.
	* sunrpc/svc_udp.c: Likewise.
	* sunrpc/svc_unix.c: Likewise.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_ref.c: Likewise.
	* sysdeps/mach/hurd/mips/dl-machine.c: Likewise.
	* sysdeps/posix/gai_strerror.c: Likewise.
	* sysdeps/unix/siglist.c: Likewise.
	* sysdeps/unix/sysv/linux/siglist.c: Likewise.
	* sysdeps/unix/sysv/linux/arm/siglist.c: Likewise.
	* sysdeps/unix/sysv/sysv4/solaris2/sparc/errlist.c: Likewise.
	* timezone/zic.c: Likewise.

1999-06-18  H.J. Lu  <hjl@gnu.org>

	* localedata/Makefile (charmaps): Exclude SCCS.
	(locales): Likewise.
	(repertoiremaps): Likewise.

1999-06-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/bsd-_setjmp.c: Include setjmp.h.
	* sysdeps/generic/bsd-setjmp.c: Likewise.

	* sunrpc/xdr_sizeof.c (x_inline): Cleanup pointer assignments.

	* iconv/gconv_open.c: Include string.h for memset prototype.

	* libio/libioP.h (FILEBUF_LITERAL): Add missing parameter to macro
	definitions.

	* sysdeps/unix/sysv/linux/init-first.h: Add extra cast in argc
	assignment to avoid warning on 64bit platforms.

1999-06-17  Ulrich Drepper  <drepper@cygnus.com>

	* libio/libio.h (_IO_codecvt): Change __P ot __PMT.

	* nss/getXXbyYY_r.c: Return error code not -1.
	* nss/getXXent_r.c: Likewise.
	* nss/getXXbyYY.c: Expect return value to be ERANGE if buffer is too
	small.
	* nscd/nscd_getgr_r.c: Return -1 in case nscd is not available and
	value > 0 for error.
	* nscd/nscd_gethst_r.c: Likewise.
	* nscd/nscd_getpw_r.c: Likewise.

1999-06-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/bits/ioctl-types.h: Add missing line
	disciplines.

1999-06-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nscd/nscd_nischeck.c: Fix typos.

1999-06-17  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/sigaction.c: Don't fail
	always when oact is NULL.
	Patch by Christian Meder <meder@isr.uni-stuttgart.de>.

1999-06-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (jn_test): Adjust delta.

1999-06-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* libio/vwprintf.c: Include <wchar.h> for prototypes.
	* libio/wprintf.c: Likewise.

1999-06-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/dl-load.c (_dl_init_paths): Add one more element to aelem
	to not write beyond allocated memory.
	Reported by John Reiser <jreiser@BitWagon.com>, closes PR libc/1167.

1999-06-17  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/mtrace.c: Keep lock while printing output lines.
	Patch by carsten.zimmermann@mediaways.net [PR libc/1166].

1999-06-16  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Add warnings about broken code.

	* Versions.def: Add GLIBC_2.2 for libc.

	* iconv/gconv.h: Make header suitable for inclusion in public header
	by protecting all names with __.
	* iconv/gconv.c: Adapt for symbol name changes.
	* iconv/gconv.h: Likewise.
	* iconv/gconv_builtin.c: Likewise.
	* iconv/gconv_close.c: Likewise.
	* iconv/gconv_db.c: Likewise.
	* iconv/gconv_dl.c: Likewise.
	* iconv/gconv_int.h: Likewise.
	* iconv/gconv_open.c: Likewise.
	* iconv/gconv_simple.c: Likewise.
	* iconv/iconv.c: Likewise.
	* iconv/iconv_close.c: Likewise.
	* iconv/iconv_open.c: Likewise.
	* iconv/loop.c: Likewise.
	* iconv/skeleton.c: Likewise.
	* iconvdata/8bit-gap.c: Likewise.
	* iconvdata/8bit-generic.c: Likewise.
	* iconvdata/ansi_x3.110.c: Likewise.
	* iconvdata/big5.c: Likewise.
	* iconvdata/cns11643.h: Likewise.
	* iconvdata/cns11643l1.h: Likewise.
	* iconvdata/euc-cn.c: Likewise.
	* iconvdata/euc-jp.c: Likewise.
	* iconvdata/euc-kr.c: Likewise.
	* iconvdata/euc-tw.c: Likewise.
	* iconvdata/gb2312.h: Likewise.
	* iconvdata/iso-2022-jp.c: Likewise.
	* iconvdata/iso-2022-kr.c: Likewise.
	* iconvdata/iso646.c: Likewise.
	* iconvdata/iso8859-1.c: Likewise.
	* iconvdata/iso_6937-2.c: Likewise.
	* iconvdata/iso_6937.c: Likewise.
	* iconvdata/jis0201.h: Likewise.
	* iconvdata/jis0208.h: Likewise.
	* iconvdata/jis0212.h: Likewise.
	* iconvdata/johab.c: Likewise.
	* iconvdata/ksc5601.h: Likewise.
	* iconvdata/sjis.c: Likewise.
	* iconvdata/t.61.c: Likewise.
	* iconvdata/uhc.c: Likewise.
	* stdlib/mblen.c: Likewise.
	* stdlib/mbtowc.c: Likewise.
	* stdlib/wctomb.c: Likewise.
	* wcsmbs/btowc.c: Likewise.
	* wcsmbs/mbrtowc.c: Likewise.
	* wcsmbs/mbsnrtowcs.c: Likewise.
	* wcsmbs/mbsrtowcs.c: Likewise.
	* wcsmbs/wchar.h: Likewise.
	* wcsmbs/wcrtomb.c: Likewise.
	* wcsmbs/wcsmbsload.c: Likewise.
	* wcsmbs/wcsmbsload.h: Likewise.
	* wcsmbs/wcsnrtombs.c: Likewise.
	* wcsmbs/wcsrtombs.c: Likewise.
	* wcsmbs/wctob.c: Likewise.

	* include/limits.h (MB_LEN_MAX): Increase to 16.

	* sysdeps/generic/_G_config.h: Define _G_fpos_t as struct.  Define
	_G_iconv_t.
	* sysdeps/unix/sysv/linux/_G_config.h: Likewise.
	* include/wchar.h: Change mbstate_t to __mbstate_t.

	* libio/Makefile (routines): Add wfiledoalloc, oldiofgetpos,
	oldiofgetpos64, oldiofsetpos, oldiofsetpos64, fputwc, fputwc_u,
	getwc, getwc_u, getwchar, getwchar_u, iofgetws, iofgetws_u,
	iofputws, iofputws_u, iogetwline, iowpadn, ioungetwc, putwc, putwc_u,
	putchar, putchar_u, swprintf, vwprintf, wprintf, wscanf, fwscanf,
	vwscanf, vswprintf, iovswscanf, swscanf, wgenops, wstrops, wfileops,
	and iofwide.
	(tests): Add tst_swprintf, tst_wprintf, tst_swscanf, and tst_wscanf.
	* libio/Versions: Add _IO_fgetpos, _IO_fgetpos64, _IO_fsetpos,
	_IO_fsetpos64, fgetpos, fgetpos64, fgetwc, fgetwc_unlocked, fgetws,
	fgetws_unlocked, fputwc, fputwc_unlocked, fputws, fputws_unlocked,
	fsetpos, fsetpos64, fwide, fwprintf, fwscanf, getwc, getwc_unlocked,
	getwchar, getwchar_unlocked, putwc, putwc_unlocked, putwchar,
	putwchar_unlocked, swprintf, swscanf, ungetwc, vfwprintf, vswprintf,
	vwprintf, vfwscanf, vswscanf, vwscanf, wprintf, and wscanf to
	GLIBC_2.2 for libc.
	* libio/libio.h: Define codecvt struct.  Define _IO_wide_data.
	Extend _IO_file contain pointer to codecvt, widedata and mode.
	(_IO_getwc_unlocked): New macro.
	(_IO_putwc_unlocked): New macro.
	(_IO_fwide): New macro.
	* libio/libioP.h: Add new prototypes and adjust existing declarations.
	* libio/fileops.c (_IO_new_file_close_it): Reset normal or widedata
	buffers based on mode.
	(new_do_write): Set _IO_write_end to _IO_buf_end if stream is wide
	oriented.
	(_IO_new_file_overflow): Don't depend only on _IO_CURRENTLY_PUTTING
	flag to be enough to signal unallocated buffer.  For wide oriented
	stream don't make it linebuffered.  Don't use _IO_do_flush, use
	_IO_new_do_write directly.
	(_IO_new_file_seekoff): Change return value type to _IO_off64_t.
	(_IO_file_seek): Likewise.
	* libio/genops.c (_IO_least_marker): Make global.
	(__underflow): Orient stream if not already done.
	(__uflow): Likewise.
	(_IO_default_seekpos): Change to type _IO_off64_t.
	(_IO_default_seekoff): Likewise.
	(_IO_default_seek): Likewise.
	(_IO_no_init): New function.  Similar to _IO_init but allows to orient
	in initialization.
	* libio/iolibio.h: Add prototype for _IO_vswprintf.  Change _IO_pos_BAD
	to use _IO_off64_t.
	* libio/ftello.c: Use _IO_off_t.  For now abort when use with wide
	char stream.
	* libio/ftello64.c: Likewise.
	* libio/ioftell.c: Likewise.
	* libio/iofopncook.c: Likewise.
	* libio/ioseekoff.c: Likewise.
	* libio/ioseekpos.c: Likewise.
	* libio/oldfileops.c: Likewise.
	* libio/iofgetpos.c: Store state of conversion if necessary.
	* libio/iofgetpos64.c: Likewise.
	* libio/iofsetpos.c: Restore conversion state if necessary.
	* libio/iofsetpos64.c: Likewise.
	* libio/iofdopen.c: Initialize so that stream can be wide oriented.
	* libio/iofopen.c: Likewise.
	* libio/iofopen64.c: Likewise.
	* libio/iopopen.c: Likewise.
	* libio/iovdprintf.c: Likewise.
	* libio/iovsprintf.c: Likewise.
	* libio/iovsscanf.c: Likewise.
	* libio/memstream.c: Likewise.
	* libio/obprintf.c: Likewise.
	* libio/iofputs.c: Orient stream if not already happened.
	* libio/iofputs_u.c: Likewise.
	* libio/iofwrite.c: Likewise.
	* libio/iofwrite_u.c: Likewise.
	* libio/ioputs.c: Likewise.
	* libio/iosetbuffer.c: Handle not yet oriented stream.
	* libio/iosetvbuf.c: Likewise.
	* libio/oldstdfiles.c: Adjust FILEBUF_LITERAL call.
	* libio/stdfiles.c: Likewise.
	* libio/strops.c (_IO_str_overflow): Correctly free buffer after
	failed allocation.
	(_IO_str_seekoff): Use _IO_off64_t.
	* libio/vasprintf.c: Pre-orient stream.
	* libio/vsnprintf.c: Likewise.
	* libio/fputwc.c: New file.
	* libio/fputwc_u.c: New file.
	* libio/fwprintf.c: New file.
	* libio/fwscanf.c: New file.
	* libio/getwc.c: New file.
	* libio/getwc_u.c: New file.
	* libio/getwchar.c: New file.
	* libio/getwchar_u.c: New file.
	* libio/iofgetws.c: New file.
	* libio/iofgetws_u.c: New file.
	* libio/iofputws.c: New file.
	* libio/iofputws_u.c: New file.
	* libio/iofwide.c: New file.
	* libio/iogetwline.c: New file.
	* libio/ioungetwc.c: New file.
	* libio/iovswscanf.c: New file.
	* libio/iowpadn.c: New file.
	* libio/oldiofgetpos.c: New file.
	* libio/oldiofgetpos64.c: New file.
	* libio/oldiofsetpos.c: New file.
	* libio/oldiofsetpos64.c: New file.
	* libio/putwc.c: New file.
	* libio/putwc_u.c: New file.
	* libio/putwchar.c: New file.
	* libio/putwchar_u.c: New file.
	* libio/swprintf.c: New file.
	* libio/swscanf.c: New file.
	* libio/tst_swprintf.c: New file.
	* libio/tst_swscanf.c: New file.
	* libio/tst_wprintf.c: New file.
	* libio/tst_wscanf.c: New file.
	* libio/tst_wscanf.input: New file.
	* libio/vswprintf.c: New file.
	* libio/vwprintf.c: New file.
	* libio/vwscanf.c: New file.
	* libio/wfiledoalloc.c: New file.
	* libio/wfileops.c: New file.
	* libio/wgenops.c: New file.
	* libio/wprintf.c: New file.
	* libio/wscanf.c: New file.
	* libio/wstrops.c: New file.
	* stdio-common/Makefile (routines): Add _itowa, itowa-digits,
	vfwprintf, and vfwscanf.
	* stdio-common/_itoa.c (base_table): Rename to _IO_base_table and
	make global.
	* stdio-common/_itowa.c: New file.
	* stdio-common/_itowa.h: New file.
	* stdio-common/itoa-digits.c: Minimal optimization.
	* stdio-common/itowa-digits.c: New file.
	* stdio-common/printf-parse.h: Allow use in wide character context.
	* stdio-common/printf-prs.c: Define ISASCII and MBRLEN.
	* stdio-common/printf.h (printf_info): Add wide bit.
	* stdio-common/printf_fp.c: Determine from wide bit whether stream
	is wide oriented or not.
	* stdio-common/printf_size.c: Likewise.
	* sysdeps/generic/printf_fphex.c: Likewise.
	* stdlib/strfmon.c: Call __printf_fp with wide bit cleared.
	* stdio-common/vfprintf.c: Rewrite to allow use in wide character
	context.
	* stdio-common/vfscand.c: Likewise.
	* stdio-common/vfwprintf.c: New file.
	* stdio-common/vfwscanf.c: New file.

	* time/Makefile (routines): Add wcsftime.
	(tests): Add tst_wcsftime.
	* time/Versions: Add wcsftime to GLIBC_2.2 for libc.
	* time/strftime.c: Make usable as wcsftime.
	* time/wcsftime.c: New file.
	* time/tst_wcsftime.c: New file.

	* wcsmbs/Makefile (routines): Add wmempcpy and wcschrnul.
	* wcsmbs/Versions: Add wmempcpy and wcschrnul to GLIBC_2.2 for libc.
	* wcsmbs/wcschrnul.c: New file.
	* wcsmbs/wmemcpy.c: New file.
	* wcsmbs/wmemcpy.c: Rename to __wmemcpy and make wmemcpy weak alias.
	* wcsmbs/wmemmove.c: Likewise for wmemmove.

	* manual/stdio.texi: Document is_char and wide element if printf_info.

	* manual/time.texi: Document wcsftime.

	* include/wchar.h: Add prototypes for __wmemcpy, __wmempcpy,
	__wmemmove, __wcschrnul, and __vfwscanf.

	* locale/langinfo.h: Add new LC_TIME entries for wchar_t data.
	* locale/C-time.c: Adapt for above change.
	* locale/categories.def: Likewise.
	* locale/localeinfo.h: Likewise.
	* localedata/Makefile: Don't run tests for now.

	* manual/errno.texi: Fix typos.
	* manual/memory.texi: Likewise.
	* manual/ctype.texi: Likewise.
	Patches by Brian Youmans <3diff@gnu.org>.

1999-06-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/netax25/ax25.h (AX25_PIDINCL): Added.

1999-06-14  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sys/sysmacros.h [!__GNUC__]: Use correct
	word order.
	* sysdeps/unix/sysv/linux/alpha/sys/sysmacros.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sys/sysmacros.h: New file.

1999-06-15  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* db2/db/db.c: Restore __nss_db_open alias.
	* db2/db_int.h: Use <db.h> instead of "db.h" to find header in
	include.
	* db2/os/os_rw.c (__os_write): Maintain const correctness.
	* db2/progs/db_load/db_load.c (main): Avoid ambiguous `else'.

1999-06-15  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/printf-parse.h (parse_one_spec): Don't set
	is_longlong if not necessary.

1999-06-15  H.J. Lu  <hjl@gnu.org>

	* Make-dist (sysdep_dirs): Exclude SCCS.
	* MakeTAGS (sysdep_dirs): Likewise.

1999-06-15  Ulrich Drepper  <drepper@cygnus.com>

	* posix/regex.c (re_error_msgid): Remove extra commas.

1999-06-14  Geoff Keating  <geoffk@ozemail.com.au>

	* stdlib/tst-strtoll.c: New file.
	* stdlib/Makefile (tests): Add tst-strtoll.c
	* stdlib/strtol.c: It is not generally true that if
	(unsigned)a*(unsigned)b overflows, then the result is
	less than 'a'.

1999-06-14  Thorsten Kukuk  <kukuk@suse.de>

	* nscd/connections.c (handle_request): Only root is allowed to
	send GETSTAT request in non secure mode.
	* nscd/nscd.c: Print error message if other then root try to
	use getstat.

1999-06-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/alpha/syscalls.list: Add __sysctl.

1999-06-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/time.texi (Limits on Resources): Describe RLIMIT_AS.
	Closes PR libc/1164, reported by sascha@schumann.2ns.de.

1999-06-13  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/generic/strchr.c: Include <memcopy.h> and use reg_char
	for character to search, to help the compiler.
	* sysdeps/generic/strchrnul.c: Likewise.
	* sysdeps/generic/memchr.c: Likewise.
	* sysdeps/generic/memccpy.c: Likewise.
	* sysdeps/generic/rawmemchr.c: Likewise.  Fix comment.

1999-06-13  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/m68k/memchr.S: New file.
	* sysdeps/m68k/rawmemchr.S: New file.
	* sysdeps/m68k/strchr.S: New file.
	* sysdeps/m68k/strchrnul.S: New file.

1999-06-13  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/powerpc/atomicity.h (exchange_and_add): Remove `volatile';
	add `memory' clobber; optimise for constant `val'.
	(atomic_add): Likewise.
	(test_and_set): Remove `volatile'; add `memory' clobber; be more
	like the original `test_and_set'.
	(compare_and_swap): Remove `volatile'; add `memory' clobber;
	optimise for constant `oldval'.
	(always_swap): Remove `volatile'; add `memory' clobber.

1999-06-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/i386/fpu/bits/mathinline.h: Disable signbit* inline
	functions for gcc <= 2.7.x.

1999-06-13  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdsock.c (_hurd_socket_server): Fix fencepost error in last
	change.

1999-06-13  Ulrich Drepper  <drepper@cygnus.com>

	* db2/Makefile (distribute): Remove files which do not exist
	anymore.

	* sysdeps/i386/fpu/bits/mathinline.h: Add __extension__ to signbit
	definitions to calm down gcc.

	* db2/db.h: Update from db 2.7.5.
	* db2/db_185.h: Likewise.
	* db2/db_int.h: Likewise.
	* db2/btree/bt_compare.c: Likewise.
	* db2/btree/bt_conv.c: Likewise.
	* db2/btree/bt_curadj.c: Likewise.
	* db2/btree/bt_cursor.c: Likewise.
	* db2/btree/bt_delete.c: Likewise.
	* db2/btree/bt_open.c: Likewise.
	* db2/btree/bt_page.c: Likewise.
	* db2/btree/bt_put.c: Likewise.
	* db2/btree/bt_rec.c: Likewise.
	* db2/btree/bt_recno.c: Likewise.
	* db2/btree/bt_rsearch.c: Likewise.
	* db2/btree/bt_search.c: Likewise.
	* db2/btree/bt_split.c: Likewise.
	* db2/btree/bt_stat.c: Likewise.
	* db2/btree/btree_auto.c: Likewise.
	* db2/common/db_appinit.c: Likewise.
	* db2/common/db_apprec.c: Likewise.
	* db2/common/db_err.c: Likewise.
	* db2/common/db_region.c: Likewise.
	* db2/common/db_salloc.c: Likewise.
	* db2/db/db.c: Likewise.
	* db2/db/db.src: Likewise.
	* db2/db/db_am.c: Likewise.
	* db2/db/db_auto.c: Likewise.
	* db2/db/db_dispatch.c: Likewise.
	* db2/db/db_dup.c: Likewise.
	* db2/db/db_iface.c: Likewise.
	* db2/db/db_join.c: Likewise.
	* db2/db/db_overflow.c: Likewise.
	* db2/db/db_pr.c: Likewise.
	* db2/db/db_rec.c: Likewise.
	* db2/db/db_ret.c: Likewise.
	* db2/db185/db185.c: Likewise.
	* db2/dbm/dbm.c: Likewise.
	* db2/hash/hash.c: Likewise.
	* db2/hash/hash_auto.c: Likewise.
	* db2/hash/hash_dup.c: Likewise.
	* db2/hash/hash_page.c: Likewise.
	* db2/hash/hash_rec.c: Likewise.
	* db2/hash/hash_stat.c: Likewise.
	* db2/include/btree.h: Likewise.
	* db2/include/btree_ext.h: Likewise.
	* db2/include/clib_ext.h: Likewise.
	* db2/include/common_ext.h: Likewise.
	* db2/include/db_am.h: Likewise.
	* db2/include/db_auto.h: Likewise.
	* db2/include/db_cxx.h: Likewise.
	* db2/include/db_ext.h: Likewise.
	* db2/include/db_join.h: Likewise.
	* db2/include/db_page.h: Likewise.
	* db2/include/hash.h: Likewise.
	* db2/include/hash_ext.h: Likewise.
	* db2/include/lock.h: Likewise.
	* db2/include/lock_ext.h: Likewise.
	* db2/include/log.h: Likewise.
	* db2/include/log_ext.h: Likewise.
	* db2/include/mp.h: Likewise.
	* db2/include/mp_ext.h: Likewise.
	* db2/include/os.h: Likewise.
	* db2/include/os_ext.h: Likewise.
	* db2/include/os_func.h: Likewise.
	* db2/include/txn.h: Likewise.
	* db2/include/txn_auto.h: Likewise.
	* db2/include/txn_ext.h: Likewise.
	* db2/include/xa.h: Likewise.
	* db2/include/xa_ext.h: Likewise.
	* db2/lock/lock.c: Likewise.
	* db2/lock/lock_conflict.c: Likewise.
	* db2/lock/lock_deadlock.c: Likewise.
	* db2/lock/lock_region.c: Likewise.
	* db2/lock/lock_util.c: Likewise.
	* db2/log/log.c: Likewise.
	* db2/log/log_archive.c: Likewise.
	* db2/log/log_auto.c: Likewise.
	* db2/log/log_findckp.c: Likewise.
	* db2/log/log_get.c: Likewise.
	* db2/log/log_put.c: Likewise.
	* db2/log/log_rec.c: Likewise.
	* db2/log/log_register.c: Likewise.
	* db2/mp/mp_bh.c: Likewise.
	* db2/mp/mp_fget.c: Likewise.
	* db2/mp/mp_fopen.c: Likewise.
	* db2/mp/mp_fput.c: Likewise.
	* db2/mp/mp_fset.c: Likewise.
	* db2/mp/mp_open.c: Likewise.
	* db2/mp/mp_pr.c: Likewise.
	* db2/mp/mp_region.c: Likewise.
	* db2/mp/mp_sync.c: Likewise.
	* db2/mutex/mutex.c: Likewise.
	* db2/mutex/uts4_cc.s: Likewise.
	* db2/os/os_abs.c: Likewise.
	* db2/os/os_alloc.c: Likewise.
	* db2/os/os_config.c: Likewise.
	* db2/os/os_dir.c: Likewise.
	* db2/os/os_fid.c: Likewise.
	* db2/os/os_fsync.c: Likewise.
	* db2/os/os_map.c: Likewise.
	* db2/os/os_oflags.c: Likewise.
	* db2/os/os_open.c: Likewise.
	* db2/os/os_rw.c: Likewise.
	* db2/os/os_seek.c: Likewise.
	* db2/os/os_sleep.c: Likewise.
	* db2/os/os_spin.c: Likewise.
	* db2/os/os_stat.c: Likewise.
	* db2/os/os_tmpdir.c: Likewise.
	* db2/os/os_unlink.c: Likewise.
	* db2/progs/db_archive/db_archive.c: Likewise.
	* db2/progs/db_checkpoint/db_checkpoint.c: Likewise.
	* db2/progs/db_deadlock/db_deadlock.c: Likewise.
	* db2/progs/db_dump/db_dump.c: Likewise.
	* db2/progs/db_load/db_load.c: Likewise.
	* db2/progs/db_printlog/README: Likewise.
	* db2/progs/db_printlog/commit.awk: Likewise.
	* db2/progs/db_printlog/count.awk: Likewise.
	* db2/progs/db_printlog/db_printlog.c: Likewise.
	* db2/progs/db_printlog/pgno.awk: Likewise.
	* db2/progs/db_printlog/range.awk: Likewise.
	* db2/progs/db_printlog/status.awk: Likewise.
	* db2/progs/db_printlog/txn.awk: Likewise.
	* db2/progs/db_recover/db_recover.c: Likewise.
	* db2/progs/db_stat/db_stat.c: Likewise.
	* db2/txn/txn.c: Likewise.
	* db2/txn/txn.src: Likewise.
	* db2/txn/txn_auto.c: Likewise.
	* db2/txn/txn_rec.c: Likewise.
	* db2/xa/xa.c: Likewise.
	* db2/xa/xa_db.c: Likewise.
	* db2/xa/xa_map.c: Likewise.

	* db2/btree/bt_close.c: Removed.
	* db2/db/db_thread.c: Likewise.
	* db2/hash/hash_debug.c: Likewise.
	* db2/include/db.h.src: Likewise.
	* db2/include/db_int.h.src: Likewise.
	* db2/include/os_jump.h: Likewise.
	* db2/mutex/alpha.dec: Likewise.
	* db2/mutex/alpha.gcc: Likewise.
	* db2/mutex/parisc.hp: Likewise.
	* db2/mutex/uts4.cc.s: Likewise.

	* db2/Makefile: Add new routines, remove old for 2.7.5.
	* db2/Versions: Add internal function names for the helper programs.
	* db2/makedb.c: Update for new cursor callback.
	* Versions.def: Define versions for libdb.

1999-06-13  Thorsten Kukuk  <kukuk@suse.de>

	* nscd/connections.c (nscd_run): Get user ID for all non-db services.
	* nscd/Makefile (others, install-sbin): Add nscd_nischeck.
	* nscd/nscd_nischeck.c: New file.
	* nscd/nscd.init: Enable use of nscd_nischeck and secure tables.

1999-06-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/bits/socket.h: Add some missing
	MSG_* flags from Linux 2.2.9.

1999-06-12  Mark Kettenis  <kettenis@gnu.org>

	* Makeconfig (static-start-installed-name): Set to
	$(start-installed-name) if not defined.
	(+link-static): Use $(static-start-installed-name) instead of
	$(start-installed-name).
	* sysdeps/mach/hurd/i386/Makefile (static-start-installed-name):
	Set to crt0.o.

1999-06-12  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/fork.c (__fork): Make use of `insert_type' when
	inserting a send right into the child instead of unconditionally
	copying the send right.

1999-06-12  Ulrich Drepper  <drepper@cygnus.com>

	* locale/lc-time.c: Add free_mem function to free if necessary
	statically allocated memory.

1999-06-10  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/libm-ieee754/s_truncl.c: Subtract exponent
	bias from the raw exponent.

1999-06-11  Ulrich Drepper  <drepper@cygnus.com>

	* inet/arpa/tftp.h: Move attribute declaration in right position.

1999-06-11  Thorsten Kukuk  <kukuk@suse.de>

	* nscd/nscd.c: Add -S options for separate caching of data for
	every user. So one user couldn't see the data another user
	has gotten with his credentials.
	* nscd/nscd.h: Add new prototypes.
	* nscd/cache.c: Compare owner of cache entry if in secure mode.
	* nscd/connections.c: Check on shutdown if caller really was root.
	In secure mode get uid of caller.
	* nscd/grpcache.c: Add support for new secure group mode.
	* nscd/hstcache.c: Add support for new secure hosts mode.
	* nscd/pwdcache.c: Add support for new secure passwd mode.

1999-06-11  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/nss_dns/dns-host.c (getanswer_r): Correctly track usage
	of user-provided buffer.

1999-06-11  Mark Kettenis  <kettenis@gnu.org>

	* hurd/hurdsock.c (max_domain): Initialize to `-1'.
	(_hurd_socket_server): Fix off-by-one error in setting `max_domain'.

1999-06-10  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/printf-parse.h (parse_one_spec): Add support for a
	and A format.

	* shadow/fgetspent_r.c (__fgetspent_r): Set errno to ENOENT for
	returning after last entry.
	* pwd/fgetpwent_r.c (__fgetpwent_r): Likewise.

1999-06-09  Ulrich Drepper  <drepper@cygnus.com>

	* misc/sysexits.h: Remove advertising clause of copyright.
	* resolv/getnetnamadr.c: Likewise.
	* sysdeps/vax/bcopy.s: Likewise.
	* sysdeps/vax/bzero.s: Likewise.
	* sysdeps/vax/ffs.s: Likewise.
	* sysdeps/vax/memchr.s: Likewise.
	* sysdeps/vax/memcmp.s: Likewise.
	* sysdeps/vax/memmove.s: Likewise.
	* sysdeps/vax/memset.s: Likewise.
	* sysdeps/vax/strcat.s: Likewise.
	* sysdeps/vax/strchr.s: Likewise.
	* sysdeps/vax/strcmp.s: Likewise.
	* sysdeps/vax/strcpy.s: Likewise.
	* sysdeps/vax/strcspn.s: Likewise.
	* sysdeps/vax/strlen.s: Likewise.
	* sysdeps/vax/strncat.s: Likewise.
	* sysdeps/vax/strncmp.s: Likewise.
	* sysdeps/vax/strncpy.s: Likewise.
	* sysdeps/vax/strpbrk.s: Likewise.
	* sysdeps/vax/strrchr.s: Likewise.
	* sysdeps/vax/strsep.s: Likewise.
	* sysdeps/vax/strspn.s: Likewise.
	* sysdeps/vax/strstr.s: Likewise.

	* libio/iofopncook.c: Adjust for renaming of structure elements.
	* libio/libio.h: Define cookie functions with all the names.

	* pwd/fgetpwent_r.c: Set errno in the correct way.
	* shadow/fgetspent_r.c: Likewise.
	* pwd/fgetpwent.c: Handle long lines correctly.  Little
	optimizations.  Free static buffer when debugging memory handling.
	* shadow/fgetspent.c: Likewise.

	* grp/fgetgrent.c: Little optimization in loop.

1999-06-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* grp/tst_fgetgrent.c (write_group): Fix generation of long line
	in a different way.

1999-06-09  Jakub Jelinek   <jj@ultra.linux.cz>

	* stdlib/longlong.h: gas changed sethi handling when without
	%hi(). Fix assembly.
	* sysdeps/generic/dl-cache.c (_dl_cache_lookup): Allow
	port specific cache id checks.
	* sysdeps/generic/dl-cache.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/dl-cache.h: New file.

1999-06-08  Ulrich Drepper  <drepper@cygnus.com>

	* gmon/gmon.c: Remove advertising clause of copyright.
	* gmon/mcount.c: Likewise.
	* gmon/sys/gmon.h: Likewise.
	* inet/arpa/ftp.h: Likewise.
	* inet/arpa/telnet.h: Likewise.
	* inet/arpa/tftp.h: Likewise.
	* inet/inet_lnaof.c: Likewise.
	* inet/inet_mkadr.c: Likewise.
	* inet/inet_net.c: Likewise.
	* inet/inet_netof.c: Likewise.
	* inet/protocols/routed.h: Likewise.
	* inet/protocols/rwhod.h: Likewise.
	* inet/protocols/talkd.h: Likewise.
	* inet/protocols/timed.h: Likewise.
	* inet/rcmd.c: Likewise.
	* inet/rexec.c: Likewise.
	* inet/ruserpass.c: Likewise.
	* io/fts.c: Likewise.
	* io/fts.h: Likewise.
	* login/login_tty.c: Likewise.
	* misc/fstab.h: Likewise.
	* misc/getttyent.c: Likewise.
	* misc/getusershell.c: Likewise.
	* misc/sys/queue.h: Likewise.
	* misc/sys/syslog.h: Likewise.
	* misc/syslog.c: Likewise.
	* misc/ttyent.h: Likewise.
	* misc/ttyslot.c: Likewise.
	* resolv/arpa/nameser.h: Likewise.
	* resolv/gethnamaddr.c: Likewise.
	* resolv/herror.c: Likewise.
	* resolv/inet_addr.c: Likewise.
	* resolv/mapv4v6addr.h: Likewise.
	* resolv/mapv4v6hostent.h: Likewise.
	* resolv/nss_dns/dns-host.c: Likewise.
	* resolv/nss_dns/dns-network.c: Likewise.
	* resolv/res_comp.c: Likewise.
	* resolv/res_data.c: Likewise.
	* resolv/res_debug.c: Likewise.
	* resolv/res_init.c: Likewise.
	* resolv/res_mkquery.c: Likewise.
	* resolv/res_query.c: Likewise.
	* resolv/res_send.c: Likewise.
	* resolv/resolv.h: Likewise.
	* sysdeps/generic/div.c: Likewise.
	* sysdeps/generic/netinet/ip.h: Likewise.
	* sysdeps/generic/netinet/tcp.h: Likewise.
	* sysdeps/generic/paths.h: Likewise.
	* sysdeps/generic/prof-freq.c: Likewise.
	* sysdeps/generic/sys/ttydefaults.h: Likewise.
	* sysdeps/gnu/netinet/ip_icmp.h: Likewise.
	* sysdeps/gnu/netinet/tcp.h: Likewise.
	* sysdeps/ieee754/support.c: Likewise.
	* sysdeps/mach/hurd/sys/param.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/bits/errno.h: Likewise.
	* sysdeps/unix/bsd/bsd4.4/bits/ioctls.h: Likewise.
	* sysdeps/unix/bsd/sun/sunos4/sys/ttydefaults.h: Likewise.
	* sysdeps/unix/bsd/sys/reboot.h: Likewise.
	* sysdeps/unix/sysv/linux/netinet/if_ether.h: Likewise.
	* sysdeps/unix/sysv/linux/netinet/igmp.h: Likewise.
	* sysdeps/unix/sysv/linux/netinet/ip.h: Likewise.
	* sysdeps/unix/sysv/linux/paths.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/quota.h: Likewise.
	* sysdeps/unix/sysv/linux/sys/ttydefaults.h: Likewise.
	* sysdeps/vax/DEFS.h: Likewise.
	* termios/sys/ttychars.h: Likewise.
	* misc/daemon.c: Likewise.  Call fork.

	* grp/fgetgrent.c (buffer): Make file local variable.
	(free_mem): New function.  Call for malloc debugging.

	* grp/tst_fgetgrent.c (write_users): Correctly generate long line.

1999-06-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* grp/Makefile: Add rules for tst_fgetgrent.

	* grp/tst_fgetgrent.c: Rewritten to read only one file.

	* grp/tst_fgetgrent.sh: New file.

1999-06-08  Ulrich Drepper  <drepper@cygnus.com>

	* grp/Makefile (tests): Add tst_fgetgrent.
	* grp/tst_fgetgrent.c: New file.
	Patches by Andreas Jaeger <aj@arthur.rhein-neckar.de>.

1999-06-07  Roland McGrath  <roland@baalperazim.frob.com>

	* db2/os/os_oflags.c (__db_oflags): Fix checking of O_ACCMODE bits to
	be POSIX compliant.  Prior definition was broken for Hurd.
	Reported by Mark Kettenis <kettenis@gnu.org>.

1999-06-08  Ulrich Drepper  <drepper@cygnus.com>

	* ctype/ctype.h: Protect __tobody code by __extension__.

1999-06-07  Ulrich Drepper  <drepper@cygnus.com>

	* grp/fgetgrent.c (fgetgrent): Remember position of stream before
	reading and reset in case the buffer was too small.

	* grp/fgetgrent_r.c (__fgetgrent_r): Set errno to ENOENT in case
	of EOF.

1999-06-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/if_index.c: Use SIGIOCGIFINDEX and fix
	another SIOGIFNAME typo.

1999-06-07  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-lookup.c: Remove duplicated assert.h inclusion.

	* sysdeps/generic/printf_fphex.c (__printf_fphex): Optimize a little
	bit.

1999-06-05  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/generic/printf_fphex.c (__printf_fphex): Don't ignore
	the precision if the mantissa is zero.

1999-06-05  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* manual/lang.texi (Floating Point Parameters): GCC already
	supports long double for a long time.

1999-06-05  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* math/libm-test.c (j0_test, j1_test, jn_test, y0_test, y1_test,
	yn_test): Increase some epsilons.

1999-06-07  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/sys/sysmacros.h (makedev): Handle signed
	parameters.

1999-06-06  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/kernel-features.h: Define
	__ASSUME_SIOCGIFNAME for kernel >= 2.1.50.
	* sysdeps/unix/sysv/linux/if_index.c: Correct typo (SIOGIFNAME ->
	SIOCGIFNAME) and use __ASSUME_SIOCGIFNAME.

	* sysdeps/libm-ieee754/w_j0.c: Remove __ from symbol definitions.
	* sysdeps/libm-ieee754/w_j0f.c: Likewise.
	* sysdeps/libm-ieee754/w_j0l.c: Likewise.
	* sysdeps/libm-ieee754/w_j1.c: Likewise.
	* sysdeps/libm-ieee754/w_j1f.c: Likewise.
	* sysdeps/libm-ieee754/w_j1l.c: Likewise.
	* sysdeps/libm-ieee754/w_jn.c: Likewise.
	* sysdeps/libm-ieee754/w_jnf.c: Likewise.
	* sysdeps/libm-ieee754/w_jnl.c: Likewise.

	* stdio-common/vfprintf.c: Correct typos.

	* math/libm-test.c (jn_test): Adjust delta.
	(y1_test): Likewise.
	(yn_test): Likewise.

	* elf/do-lookup.h: It should never happen that if we expect a versioned
	symbol from a file the file has no version table.  This should have
	been checked in dl-version.c.
	* elf/dl-lookup.c: Include assert.h.

	* sysdeps/unix/sysv/linux/i386/sigaction.c: Correct restorer
	function handling.

	* sysdeps/unix/sysv/linux/i386/sigaction.c (SA_RESTORER): New #define.

1999-06-06  Andi Kleen  <ak@muc.de>

	* sysdeps/unix/sysv/linux/i386/sigaction.c (__sigaction): Set
	SA_RESTORER flag.

1999-06-04  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (yn_test): Change one delta.
	(jn_test): Likewise.
	(j1_test): Likewise.
	(y0_test): Likewise.

1999-06-06  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c: Introduce local variable __libc_getpagesize to
	avoid multiple calls to getpagesize() which might be a syscall.

1999-06-06  Philip Blundell  <philb@gnu.org>

	* stdio-common/tstscanf.c (main): Test the half-word format "%hd".

1999-06-06  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Running make install): Correct typo in
	dynamic linker invocation.

1999-06-05  Philip Blundell  <philb@gnu.org>

	* sysdeps/arm/dl-machine.h (elf_machine_load_address): Fix
	problems with GOT addressing.

1999-06-05  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c (check_action): Change into bitmap so that both
	diagnostic and abort can be requested by setting it to 3.
	(mALLOC_SET_STATe): Disable malloc checking if necessary.

1999-06-03  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Few changes for HPUX.

	* scripts/config.guess: Update from latest version.
	* scripts/config.sub: Likewise.

1999-06-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* Makerules: Set LC_ALL explicitly to archieve correct sorting of
	map files.  Closes PR libc/1147.

1999-06-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* math/libm-test.c (main): Add new test functions.
	(jn_test): New tests.
	(j1_test): Add some more tests.
	(j0_test): Add some more tests.
	(y0_test): Add some more tests.
	(y1_test): Add some more tests.

1999-06-02  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/libm-ieee754/e_j0.c (__ieee754_y0): Fix array indices.
	Patch by mhagger@dera.gov.uk [PR libc/1145].

	* math/libm-test.c (y1_test): New tests.
	(y0_test): Likewise.
	(j1_test): Likewise.
	(j0_test): Likewise.
	(main): Added new tests.

1999-06-02  Jakub Jelinek  <jj@ultra.linux.cz>

	* stdlib/longlong.h: Define UDIV_TIME on sparc64.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigpending.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/pause.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigaction.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigprocmask.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigsuspend.c: New file.

1999-06-02  David S. Miller  <davem@redhat.com>

	* nscd/nscd_gethst_r.c (nscd_gethst_r): Align the h_addr_list
	pointers properly.

1999-06-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/i386/sigaction.c: Read kernel-features.h
	and elide compatibility code if possible.

1999-06-01  Ulrich Drepper  <drepper@cygnus.com>

	* manual/llio.texi: Remove menu entry for removed section.

1999-05-29  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/sigaction.c: Fix typo and avoid unused
	variables.

1999-06-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/net/if_arp.h (ARPHRD_DDCMP): Add it
	(from Linux 2.3.4).

1999-05-30  Ulrich Drepper  <drepper@cygnus.com>

	* inet/netinet/in.h: Mark ntoh* and hton* as constant functions.

1999-05-30  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/stdio.texi: Fix some typos.

1999-05-27  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* malloc/malloc.h: Properly handle future GCC versions.

1999-05-27  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/configure.in: Change version checks to
	use AC_EGREP_CPP.  Change sed pattern to not use alternation.  Fix
	text of error message.

	* aclocal.m4 (GLIBC_PROVIDES): Define AC_LANG to `C'.

1999-05-29  Ulrich Drepper  <drepper@cygnus.com>

	* manual/filesys.texi: Extend (f)truncate documentation.
	* manual/llio.texi: Remove duplicate (f)truncate definition.

1999-05-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/stdio.texi (Formatted Output Functions): Mention
	semantics of snprintf in glibc 2.0.
	Reported by Ben Pfaff <pfaffben@msu.edu>.

1999-05-29  Ulrich Drepper  <drepper@cygnus.com>

	* include/features.h (__GLIBC_MINOR__): Bump to 2.

1999-05-27  Ulrich Drepper  <drepper@cygnus.com>

	* math/libm-test.c: Adjust a few more deltas for the poor ARM
	FPU emulator.

1999-05-27  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* configure.in: Fix typo.

1999-05-27  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/socket.texi (Host Names): Remove statement that h_errno
	needs to be declared since this isn't true anymore.
	Closes PR libc/1138.

1999-05-26  Ulrich Drepper  <drepper@cygnus.com>

	* config.h.in: Add __LINUX_KERNEL_VERSION.
	* configure.in: Recognize --enable-kernel.
	* sysdeps/unix/sysv/linux/configure.in: Check for correct kernel
	headers if --enable-kernel is given and set __LINUX_KERNEL_VERSION
	appropriately.
	* sysdeps/unix/sysv/linux/init-first.c: If minimal kernel version is
	given perform runtime test.

	* sysdeps/unix/sysv/linux/kernel-features.h: New file.
	* sysdeps/unix/sysv/linux/getcwd.c: Elide compatibility code if
	minimal supported kernel is known to have the feature.
	* sysdeps/unix/sysv/linux/poll.c: Likewise.
	* sysdeps/unix/sysv/linux/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/pwrite64.c: Likewise.
	* sysdeps/unix/sysv/linux/seteuid.c: Likewise.
	* sysdeps/unix/sysv/linux/sigaction.c: Likewise.
	* sysdeps/unix/sysv/linux/sigprocmask.c: Likewise.
	* sysdeps/unix/sysv/linux/sigsuspend.c: Likewise.
	* sysdeps/unix/sysv/linux/testrtsig.h: Likewise.
	* sysdeps/unix/sysv/linux/i386/chown.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/pread.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/pread64.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/pwrite.c: Likewise.
	* sysdeps/unix/sysv/linux/i386/pwrite64.c: Likewise.

	* sysdeps/unix/sysv/linux/sysctl.c: Add __sysctl alias.

1999-05-25  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/getcwd.c (__getcwd): Fix potential memory leaks.

1999-05-26  Jakub Jelinek   <jj@ultra.linux.cz>

	* stdlib/longlong.h (add_ssaaaa, sub_ddmmss, umul_ppmm):
	Optimized sparc64 routines.

1999-05-25  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c (vfprintf): Don't handle long numbers if
	they are the same as ints.
	* stdio-common/vfscanf.c (_IO_vfscanf): Likewise.

	* version.h (VERSION): Bump to 2.1.90.
	(RELEASE): Mark as development.

	* stdio-common/vfprintf.c (vfprintf): Don't implement special
	handling for long long if it is the same as long.
	* stdio-common/vfscanf.c (_IO_vfscanf): Likewise.

	* stdlib/strtol.c: Moved to ...
	* sysdeps/generic/strtol.c: ...here.
	* stdlib/strtoul.c: Moved to ...
	* sysdeps/generic/strtoul.c: ...here.
	* stdlib/strtoll.c: Moved to ...
	* sysdeps/generic/strtoll.c: ...here.
	* stdlib/strtoull.c: Moved to ...
	* sysdeps/generic/strtoull.c: ...here.
	* stdlib/strtol_l.c: Moved to ...
	* sysdeps/generic/strtol_l.c: ...here.
	* stdlib/strtoul_l.c: Moved to ...
	* sysdeps/generic/strtoul_l.c: ...here.
	* stdlib/strtoll_l.c: Moved to ...
	* sysdeps/generic/strtoll_l.c: ...here.
	* stdlib/strtoull_l.c: Moved to ...
	* sysdeps/generic/strtoull_l.c: ...here.

	* sysdeps/wordsize-64/strtol.c: New file.
	* sysdeps/wordsize-64/strtoul.c: New file.
	* sysdeps/wordsize-64/strtoll.c: New file.
	* sysdeps/wordsize-64/strtoull.c: New file.
	* sysdeps/wordsize-64/strtol_l.c: New file.
	* sysdeps/wordsize-64/strtoul_l.c: New file.
	* sysdeps/wordsize-64/strtoll_l.c: New file.
	* sysdeps/wordsize-64/strtoull_l.c: New file.

	* wcsmbs/wcstol.c: Moved to ...
	* sysdeps/generic/wcstol.c: ...here.
	* wcsmbs/wcstoul.c: Moved to ...
	* sysdeps/generic/wcstoul.c: ...here.
	* wcsmbs/wcstoll.c: Moved to ...
	* sysdeps/generic/wcstoll.c: ...here.
	* wcsmbs/wcstoull.c: Moved to ...
	* sysdeps/generic/wcstoull.c: ...here.
	* wcsmbs/wcstol_l.c: Moved to ...
	* sysdeps/generic/wcstol_l.c: ...here.
	* wcsmbs/wcstoul_l.c: Moved to ...
	* sysdeps/generic/wcstoul_l.c: ...here.
	* wcsmbs/wcstoll_l.c: Moved to ...
	* sysdeps/generic/wcstoll_l.c: ...here.
	* wcsmbs/wcstoull_l.c: Moved to ...
	* sysdeps/generic/wcstoull_l.c: ...here.

	* sysdeps/wordsize-64/wcstol.c: New file.
	* sysdeps/wordsize-64/wcstoul.c: New file.
	* sysdeps/wordsize-64/wcstoll.c: New file.
	* sysdeps/wordsize-64/wcstoull.c: New file.
	* sysdeps/wordsize-64/wcstol_l.c: New file.
	* sysdeps/wordsize-64/wcstoul_l.c: New file.
	* sysdeps/wordsize-64/wcstoll_l.c: New file.
	* sysdeps/wordsize-64/wcstoull_l.c: New file.

1999-05-24  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/sparc/bits/wordsize.h: New file.
	* sysdeps/sparc/fpu/bits/fenv.h: New file.
	* sysdeps/sparc/fpu/fpu_control.h: New file.
	* sysdeps/sparc/gmp-mparam.h: New file.

	* sysdeps/sparc/sparc32/fpu/bits/fenv.h: Remove.
	* sysdeps/sparc/sparc32/fpu/fpu_control.h: Remove.
	* sysdeps/sparc/sparc64/bits/wordsize.h: Remove.
	* sysdeps/sparc/sparc64/fpu/bits/fenv.h: Remove.
	* sysdeps/sparc/sparc64/fpu/fpu_control.h: Remove.
	* sysdeps/sparc/sparc64/gmp-mparam.h: Remove.

	* sysdeps/unix/sysv/linux/sparc/bits/setjmp.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/types.h: New file.
	* sysdeps/unix/sysv/linux/sparc/bits/statfs.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sys/ucontext.h: New file.

	* sysdeps/unix/sysv/linux/sparc/sparc32/sys/ucontext.h: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/setjmp.h: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/types.h: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/statfs.h: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sys/ucontext.h: Remove.

1999-05-24  Ulrich Drepper  <drepper@cygnus.com>

	* login/openpty.c (openpty): Make sure pty does not because
	controlling TTY.

	* ctype/ctype.h: Don't optimize toupper/tolower for C++.

1999-05-23  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/set-host.c (_hurd_set_host_config): Use mode 0644, not 0600.
	Do proper error return.

1999-05-23  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* malloc/malloc.h: Add __THROW for __MALLOC_P to synch with usage
	of __P in the rest of glibc; define __MALLOC_PMT and use it.
	Reported by Stephan Kulow <coolo@kde.org>.

1999-05-23  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/alpha/fpu/bits/fenv.h: Pretty print.

	* sysdeps/sparc/sparc64/fpu/bits/fenv.h: Remove unneeded #if.

1999-05-22  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/m68k/fpu/bits/fenv.h (fenv_t): Prepend __ to member
	names to protect from user's macro namespace.
	* sysdeps/arm/fpu/bits/fenv.h (fenv_t): Likewise.
	* sysdeps/generic/bits/fenv.h (fexcept_t, fenv_t): Likewise.
	* sysdeps/i386/fpu/bits/fenv.h (fenv_t): Likewise.
	* sysdeps/mips/bits/fenv.h (fenv_t): Likewise.
	* sysdeps/m68k/fpu/feholdexcpt.c, sysdeps/m68k/fpu/fesetenv.c:
	Adapted.
	* sysdeps/arm/fpu/fegetenv.c, sysdeps/arm/fpu/feholdexcpt.c,
	sysdeps/arm/fpu/fesetenv.c: Likewise.
	* sysdeps/i386/fpu/fclrexcpt.c, sysdeps/i386/fpu/feholdexcpt.c,
	sysdeps/i386/fpu/fesetenv.c, sysdeps/i386/fpu/fraiseexcpt.c,
	sysdeps/i386/fpu/fsetexcptflg.c: Likewise.
	* sysdeps/mips/fesetenv.c: Likewise.

1999-05-22  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/generic/bits/sigstack.h (enum SS_*): Remove trailing comma.

1999-05-20  Ulrich Drepper  <drepper@cygnus.com>

	* configure.in: Recognize and allow gcc 2.95.

1999-05-19  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/generic/bits/elfclass.h: Version common to
	wordsize-32 and wordsize-64.
	* sysdeps/generic/bits/environments.h: Ditto.
	* sysdeps/generic/stdint.h: Ditto.
	* sysdeps/generic/inttypes.h: Ditto.

	* sysdeps/generic/bits/wordsize.h: New file.
	* stdlib/Makefile: Add bits/wordsize.h to headers.

	* sysdeps/sparc/sparc64/bits/wordsize.h: New file.

	* sysdeps/sparc/sparc64/fpu/bits/fenv.h: Allow the same exported
	headers to be used for 32bit and 64bit ABI compilations.
	* sysdeps/sparc/sparc64/fpu/fpu_control.h: Ditto.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/setjmp.h: Ditto.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/types.h: Ditto.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/statfs.h: Ditto.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sys/ucontext.h: Ditto.

	* sysdeps/wordsize-64/bits/elfclass.h: Remove.
	* sysdeps/wordsize-64/bits/environments.h: Remove.
	* sysdeps/wordsize-64/stdint.h: Remove.
	* sysdeps/wordsize-64/inttypes.h: Remove.
	* sysdeps/wordsize-64/bits/wordsize.h: New file.

	* sysdeps/wordsize-32/bits/elfclass.h: Remove.
	* sysdeps/wordsize-32/bits/environments.h: Remove.
	* sysdeps/wordsize-32/stdint.h: Remove.
	* sysdeps/wordsize-32/inttypes.h: Remove.
	* sysdeps/wordsize-32/bits/wordsize.h: New file.

1999-05-19  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/sparc/sparc64/memcpy.S (__align_cpy_4, __align_cpy_8,
	__align_cpy_16): New functions.
	(__align_cpy_2, __align_cpy_1): New aliases to memcpy.

	* sysdeps/sparc/sparc32/Versions: New file.
	* sysdeps/sparc/sparc64/Versions: New file.
	* sysdeps/sparc/Versions: Remove.

1999-05-19  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/unix/sysv/linux/configure.in:
	On sparc64-*-linux*, set slibdir to /lib64 if prefix
	is /usr, plus set libdir to ${exec_prefix}/lib64.
	* sysdeps/unix/sysv/linux/configure: Regenerated.
	* config.make.in: Propagate libdir settings from configure
	to the Makefiles.
	* shlib-versions: sparc64-*-linux* dynamic linker is
	/lib64/ld-linux.so.2.

1999-05-18  Thorsten Kukuk  <kukuk@suse.de>

	* nis/nis_lookup.c (nis_lookup): If we run out of memory, close
	RPC connection.

1999-05-18  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/sparc/sparc64/rawmemchr.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/rawmemchr.S: New file.

	* sysdeps/sparc/sparc64/memchr.S: Fix if the second argument
	contains garbage in bits 8-63.
	* sysdeps/sparc/sparc64/memset.S: Ditto.
	* sysdeps/sparc/sparc64/strchr.S: Ditto.

1999-05-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/wordsize-64/stdint.h (INTPTR_MAX): Add missing ).

1999-05-17  David S. Miller  <davem@redhat.com>

	* sysdeps/sparc/sparc32/atomicity.h: New file.
	* sysdeps/sparc/sparc32/sparcv9/atomicity.h: New file.
	* sysdeps/sparc/sparc64/atomicity.h: New file.
	* sysdeps/sparc/sparc32/sparcv9/Makefile: Add -Wa,-Av9a to
	sysdep-CFLAGS.

1999-05-18  Richard Henderson  <rth@twiddle.net>

	* sysdeps/alpha/memchr.S: Zap high byte of length.  Reschedule.

1999-05-04  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* argp/argp.h, assert/assert.h, misc/sys/cdefs.h,
	posix/sys/types.h: Handle the case of __GNUC__=3,
	__GNUC_MINOR__=(anything).

1999-05-18  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/i386/i486/bits/string.h (rawmemchr): Remove unneccessary
	if _FORCE_INLINES.

1999-05-17  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Makefile (distribute): Remove dl-origin.h.
	Add dl-dst.h and gen-trusted-dirs.awk.

1999-05-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/i386/i486/Versions: New file with inline functions from
	sysdeps/i386/i486/bits/string.h for now.

	* sysdeps/i386/Versions: Add inline functions from
	sysdeps/i386/bits/string.h.

	* string/Versions: Add inline functions from <bits/string2.h>.

	* string/Makefile (routines): Add string-inlines.
	* string/string-inlines.c: New file, used for implementation of
	extern inline functions.

	* sysdeps/i386/i486/bits/string.h: Use _FORCE_INLINES to generate
	non inlined versions of functions.
	* string/bits/string2.h: Likewise.
	* sysdeps/i386/bits/string.h: Likewise.

1999-05-17  Ulrich Drepper  <drepper@cygnus.com>

	* inet/arpa/tftp.h: Add second packed attribute.

1999-05-16  Wolfram Gloger  <wmglo@dent.med.uni-muenchen.de>

	* malloc/malloc.c: Cleanup to bring in line with released
	stand-alone version `ptmalloc'.  Update some comments.
	(internal_function): Move fallback definition so that the source
	compiles outside of libc, and use it in more places.
	(malloc_atfork): Fix when malloc_check is in use.

1999-05-16  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* stdlib/tst-strtod.c: Fix typo.

1999-05-16  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* elf/dl-close.c (_dl_close): Add cast to avoid warning about
	const incorrectness.

1999-05-16  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/generic/bits/termios.h (CRTSCTS): New macro.

1999-05-16  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/etc.rpc: Add portmapper, rstat_svc and pcnfs.
	* sunrpc/key_call.c: Fix memory leak, close file handle.
	* nis/nis_creategroup.c: Use malloc instead of calloc,
	set ctime and mtime.
	* nis/nis_subr.c: Check for realloc result.
	* nis/nis_file.c: Fix memory leak.
	* nis/nis_table.c: Pretty print.
	* nis/nis_getservlist.c: Likewise.
	* nis/nis_ismember.c: Likewise.
	* nis/nis_lookup.c: Likewise.
	* nis/nis_ping.c: Likewise.
	* nis/nis_removemember.c: Likewise.
	* nis/nis_util.c: Likewise, check calloc result.

1999-05-16  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/unix/sysv/linux/sys/socketvar.h: Moved to ...
	* sysdeps/generic/sys/socketvar.h: ... here.
	* sysdeps/unix/sysv/linux/netinet/in_systm.h: Moved to ...
	* sysdeps/generic/netinet/in_systm.h: ... here.
	* sysdeps/unix/sysv/linux/Dist: Remove netinet/in_systm.h,
	sys/socketvar.h.
	* sysdeps/unix/sysv/linux/Makefile (sysdep_headers): Likewise.
	* inet/Makefile (headers): Add netinet/in_systm.h here.
	* socket/Makefile (headers): Add sys/socketvar.h here.

1999-05-15  Ulrich Drepper  <drepper@cygnus.com>

	* stdlib/strtol.c: Optimize inner loop of long long versions.

	* sysdeps/gnu/utmpx.h: Add needed type definitions according to
	Unix98.  Add forward declaration of struct utmp.

1999-05-14  Ulrich Drepper  <drepper@cygnus.com>

	* nis/nis_getservlist.c (nis_getservlist): Use malloc instead of
	calloc.

	* nis/nis_checkpoint.c (nis_checkpoint): Fix memory leaks.
	* nis/nis_addmember.c (nis_addmember): Fix memory leak.  Test
	memory allocation results.

1999-05-14  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/generic/getutmp.c: Include <string.h>
	(getutmp): Rewrite to only copy those members that are really
	present in `struct utmp'.
	* sysdeps/generic/getutmpx.c: Likewise.

1999-05-14  Ulrich Drepper  <drepper@cygnus.com>

	* nss/getXXbyYY.c: Add free_mem function which disposes all
	statically allocated memory when debugging.
	* nss/getXXent.c: Likewise.
	* nss/nsswitch.c: Likewise.

1999-05-13  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/gnu/getutmpx.c: New file.
	* sysdeps/gnu/getutmp.c: New file.

1999-05-13  H.J. Lu  <hjl@gnu.org>

	* login/Versions (getutmpx): Added to GLIBC_2.1.1.
	(getutmp): Likewise.

	* sysdeps/gnu/Makefile (sysdep_routines): Add getutmp and
	getutmpx for login.

	* sysdeps/gnu/utmpx.h (getutmp): Added.
	(getutmpx): Likewise.

	* sysdeps/generic/getutmp.c: New file.

	* sysdeps/generic/getutmpx.c: New file.

1999-05-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* glibcbug.in (BUGGLIBC): Change address to
	libc-alpha@sourceware.cygnus.com.

1999-05-12  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* resolv/arpa/nameser.h: Add C++ protectors.

1999-05-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* iconvdata/gconv-modules: Fix alias for CP1255.  Reported by
	Elad Tsur <eladts@post.tau.ac.il>.

1999-05-11  Ulrich Drepper  <drepper@cygnus.com>

	* elf/Versions (ld.so) [GLIBC_2.1.1]: Add _dl_lazy.
	* elf/dl-open.c (_dl_open_worker): Only relocate newly loaded objects
	lazily if LD_BIND_NOW is not set.
	* elf/dl-support.c (_dl_lazy): New variable.
	(non_dynamic_init): Set _dl_lazy according to LD_BIND_NOW envvar.
	* elf/rtld.c (_dl_lazy): new global variable.
	( dl_main): Remove lazy, replace it by _dl_lazy.

1999-05-06  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* locale/setlocale.c (new_composite_name): Check also whether the
	first category name differs.

1999-05-11  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/ftime.c: Use the bsd implementation, not
	the generic one.

1999-05-11  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/generic/bits/socket.h (struct sockaddr_storage): New
	structure; storage suitable for any socket address.
	* sysdeps/unix/sysv/linux/bits/socket.h (struct sockaddr_storage):
	Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/socket.h (struct
	sockaddr_storage): Likewise.

	* inet/netinet/in.h: Use ULONG_MAX not ~0 to test for a 64-bit
	platform.

1999-05-10  Ulrich Drepper  <drepper@cygnus.com>

	* hesiod/Versions: Change _nss_hesiod_getpwuid and
	_nss_hesiod_getgrgid to _nss_hesiod_getpwuid_r and
	_nss_hesiod_getgrgid_r respectively.  Fixes pr libc/1115.

1999-05-09  Mark Kettenis  <kettenis@gnu.org>

	* hurd/get-host.c (_hurd_get_host_config): Return an empty value
	if the file is empty.

1999-05-07  Ulrich Drepper  <drepper@cygnus.com>

	* elf/do-lookup.h: Fix typo in comment.

	* sysdeps/unix/sysv/linux/fstatvfs.c (fstatvfs): Set f_frsize to
	f_bsize to help some broken programs.

	* stdio-common/tst-printf.c: Add test case for last _itoa problem.

	* stdio-common/vfprintf.c: Fix typo.

1999-05-06  Ulrich Drepper  <drepper@cygnus.com>

	* elf/link.h (struct link_map): New field l_phdr_allocated.
	* elf/dl-load.c (_dl_map_object_from_fd): Don't depend on having
	the program header being part of any loaded segment.  If it is not
	allocate memory and set l_phdr_allocated flag.
	* elf/dl-close.c (_dl_close): Free l_phdr if necessary.

	* nss/digits_dots.c: Correct return value interpretation of
	inet_ntoa.  Fix PR libc/1109.

1999-05-06  Zack Weinberg  <zack@rabi.columbia.edu>

	* sysdeps/sparc/sparc32/sparcv9/Dist: New file.

1999-05-06  Thorsten Kukuk  <kukuk@suse.de>

	* stdlib/fpioconst.c (__tens): Export also for 64bit platforms.
	* stdlib/fpioconst.c: Move #endif before end of struct.

1999-05-05  Ulrich Drepper  <drepper@cygnus.com>

	* Versions.def (ld.so): Add GLIBC_2.1.1.
	* elf/Makefile (routines): Add dl-origin.
	(tests): Add origtest.  Add dependencies for the program.
	* elf/Versions (ld.so) [GLIBC_2.1.1]: Add _dl_origin_path,
	_dl_platformlen, _dl_dst_count and _dl_dst_substitute.
	* elf/dl-deps.c (expand_dst): New macro.  Expand DSTs in filename.
	(_dl_map_object_deps): Use expand_dst to expand DSTs in DT_NEEDED,
	DT_AUXILIARY, and DT_FILTER filenames.
	* elf/dl-load.c (expand_dynamic_string_token): Explode into
	two functions and three macros.
	(_dl_dst_count, _dl_dst_substitute): New functions.
	* elf/dl-dst.h: New file.
	* elf/dl-open.c (_dl_open): Take extra parameter with address of
	caller.  Pass address in args structure.
	(dl_open_worker): Recognize and expand DSTs in filename.
	* elf/ldsodefs.h (_dl_open): Adapt prototype.
	* elf/dlopen.c (dlopen_doit): Pass caller address to _dl_open.
	(__dlopen_check): Pass caller address to dlopen_doit in args.
	* elf/dlopendoit.c: Likewise.
	* iconv/gconv_dl.c: Adapt call of _dl_open.
	* nss/nsswitch.c: Likewise.
	* elf/origtest.c: New file.
	* sysdeps/generic/dl-origin.h: Moved to...
	* sysdeps/generic/dl-origin.c: ...here.
	* sysdeps/unix/sysv/linux/dl-origin.h: Moved to...
	* sysdeps/unix/sysv/linux/dl-origin.c: ...here.

	* stdio-common/_itoa.c (_itoa): Fix special 32bit platform case
	with specific bases and only few bits set in second word.

	* timezone/Makefile (install-others): Create target directory
	before creating tzfiles.

1999-05-05  Thorsten Kukuk  <kukuk@suse.de>

	* nis/nis_file.c (readColdStartFile): Allocate memory only after
	the file is opened successfully.

	* nis/nis_table.c: Fix some memory leaks.

1999-05-04  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c (expand_dynamic_string_token): Rewrite to loose st
	variable.

	* elf/dl-load.c (expand_dynamic_string_token): Recognize { }
	around DST.  Correctly ignore ORIGIN IN SUID binaries.

1999-05-03  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/strtok_r.c: Use rawmemchr instead of strchr.
	* sysdeps/generic/strtok.c: Likewise.

	* string/tester.c: Add test of rawmemchr.

	* sysdeps/i386/bits/select.h (__FD_ZERO): Remove memory output
	specification.  It's not necessary.

	* elf/Makefile (trusted-dirs.st): Use gen-trusted-dirs.awk.
	* elf/gen-trusted-dirs.awk: New file.
	* elf/dl-load.c (systems_dirs): Moved into file scope.  Initialize
	from SYSTEM_DIRS macro.
	(system_dirs_len): New variable.  Contains lengths of system_dirs
	strings.
	(fillin_rpath): Rewrite for systems_dirs being a simple string.
	Improve string comparisons.  Change parameter trusted to be a flag.
	Change all callers.
	(_dt_init_paths): Improve using new format for system_dirs.

	* elf/dl-load.c (expand_dynamic_string_token): Don't expand
	$ORIGIN for SUID binaries.

	* sysdeps/unix/sysv/linux/arm/Dist: Add sigrestorer.S.

1999-05-02  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sunrpc/Makefile: Generate dependencies for all flavors of
	librpcsvc objects.
	(rpcgen-cmd): Pass -Y flag here and remove it from the macro
	invocations.

1999-05-02  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* elf/dlopenold.c: Move #if down after includes to get
	dependencies right.

1999-05-01  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/generic/bzero.c: Undefine __bzero.

1999-05-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/netax25/ax25.h: Update from kernel header.
	* sysdeps/unix/sysv/linux/netrom/netrom.h: Likewise.
	* sysdeps/unix/sysv/linux/netrose/rose.h: Likewise.
	Patch by Craig Small <csmall@scooter.eye-net.com.au>.

	* sysdeps/posix/getaddrinfo.c (gaih_inet_serv): Change fourth
	parameter to struct gaih_servtuple *.  Adapt appropriately.
	(gaih_inet): Use alloca to allocate room for gaih_inet_serv calls.
	This fixes a memory leak.
	Reported by Mikolaj J. Habryn <dichro-glibcbug@rcpt.to>.

	* sysdeps/unix/sysv/linux/sys/procfs.h: Remove greg_t, gregset_t,
	and fpregset_t definition.  They are defined in ucontext.h.

1999-04-14  Scott Bambrough  <scottb@netwinder.org>

	* sysdeps/unix/sysv/linux/arm/net/ethernet.h: struct ether_addr
	and struct ether_header must be packed on the ARM.  The default
	alignment constraints add padding to the end of the structures.

1999-04-14  Scott Bambrough  <scottb@netwinder.org>

	* inet/arpa/tftp.h: struct tftphdr must be packed on the ARM.  The
	default alignment constraints add padding to the end of the
	structure and between members.

1999-05-02  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/dl-cache.c (_dl_load_cache_lookup): Use
	_dl_cache_libcmp instead of strcmp.

	* sysdeps/generic/glob.c (glob_in_dir): It's no error if opendir
	fails on a file.
	Reported by Sergei Ivanov <svivanov@pdmi.ras.ru> [PR libc/1032].

1998-03-30  Joel Klecker  <espy@debian.org>

	* sysdeps/unix/sysv/linux/sparc/sparc32/Makefile
	(sysdep-others,install-bin): Add lddlibc4.

1999-05-02  H.J. Lu  <hjl@gnu.org>

	* timezone/zic.c (dolink): Remove the symlink destination first.

	* catgets/open_catalog.c (__open_catalog): Set catalog->status
	to "nonexisting" if failed to open the file.

1999-05-01  Ulrich Drepper  <drepper@cygnus.com>

	* string/bits/string2.h: Only use __builtin_memset for egcs 1.1 and
	gcc3.

	* sysdeps/i386/i486/bits/string.h: Don't use and define __memset_gg.
	Prevent warnings from multiplication with 0x01010101 by another cast.

1999-04-30  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* string/bits/string2.h (memset): Revert to previous version if
	unaligned writes are not available.

1999-04-30  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/i486/bits/string.h (__memset_gc): Help generating
	better code in presence of the asm.

1999-04-30  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* stdlib/fmtmsg.c (keywords): Increase array size for faster
	indexing.

	* locale/localeinfo.h (_nl_category_names): Increase array element
	size for faster indexing.
	* locale/setlocale.c (_nl_category_names): Adjusted.

1999-04-30  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* iconv/gconv_conf.c (add_alias): Remove wrong cast.

1999-05-01  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/m68k/stackinfo.h: New file.

1999-04-30  Ulrich Drepper  <drepper@cygnus.com>

	* string/tester.c (test_strchrnul): New function.
	(test_memset): Test one more special case.

	* sysdeps/i386/strchrnul.S: Fix bugs which lead to wrong results in
	25% of all cases.

	* sysdeps/i386/i486/bits/string.h: Replace __uintXX_t types with
	base types.

	* string/bits/string2.h: Fix bugs I introduced in last change.

	* sysdeps/i386/i486/bits/string.h (memcmp): Don't introduce partial
	register stall.
	Extend memset optimization.
	Correct i686 version of memchr.

1999-04-30  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/i386/bzero.c: Add #undef __bzero.

	* hurd/hurdinit.c (_hurd_new_proc_init): Don't do initial SIGTRAP if
	EXEC_SIGTRAP was set in the incoming exec flags--that indicates the
	exec server simulated a SIGTRAP before we even started up, so gdb is
	already happy.

1999-04-30  Ulrich Drepper  <drepper@cygnus.com>

	* nss/digits_dots.c: Always initialize not_ok.

1999-04-30 09:02 -0400  Zack Weinberg  <zack@rabi.columbia.edu>

	* string/bits/string2.h (memset): Avoid arithmetic overflow at
	compile time, which produces obnoxious warnings.  If GCCv2 is
	in use, map __bzero to __builtin_memset to enable that
	optimization.

1999-04-29  Ulrich Drepper  <drepper@cygnus.com>

	* string/bits/string2.h: Add more memset optimizations.

	* resolv/inet_addr.c (inet_aton): Optimize switch statement away.

	* resolv/inet_pton.c (inet_pton4): Little optimizations.
	(inet_pton6): Likewise.

	* nss/getXXbyYY_r.c: Include assert.h.
	* nss/getXXbyYY.c: Likewise.

1999-04-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* termios/tcgetsid.c (tcgetsid): Rename variable to
	tiocgsid_does_not_work.

1999-04-29  Ulrich Drepper  <drepper@cygnus.com>

	* inet/getnameinfo.c (nrl_domainname): Fix last patch.

1999-04-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nss/digits_dots.c: Use inet_aton to parse IPv4 numbers.
	This allows e.g. gethostbyname to accept "10.1234".
	Reported by Alexander V. Lukyanov <lav@long.yar.ru> [PR libc/1096].

	* nss/test-netdb.c (test_hosts): Add test for gethostbyname and
	non quad IPv4 numbers.

1999-04-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* resolv/res_hconf.c (_res_hconf_init): Remove unused variable end.

1999-04-28  Ulrich Drepper  <drepper@cygnus.com>

	* argp/argp-ba.c (argp_program_bug_address): Don't initialize with 0.
	* argp/argp-parse.c (_argp_hang): Likewise.
	* argp/argp-pv.c (argp_program_version): Likewise.
	* argp/argp-pvh.c (argp_program_version_hook): Likewise.
	* inet/ether_hton.c (ether_hton, startp): Likewise.
	* inet/ether_ntoh.c (ether_ntoh, startp): Likewise.
	* inet/getnetgrent_r.c (setup, startp): Likewise.
	* intl/loadmsgcat.c (_nl_msg_cat_cntr): Likewise.
	* intl/localealias.c (string_space, string_space_act, string_space_max,
	nmap, maxmap): Likewise.
	* libio/iopopen.c (proc_file_chain): Likewise.
	* libio/oldiopopen.c (old_proc_file_chain): Likewise.
	* locale/lc-collate.c (__collate_table, __collate_extra,
	__collate_element_hash, __collate_element_strings,
	__collate_element_values): Likewise.
	* malloc/mcheck.c (mcheck_used): Likewise.
	* malloc/mtrace.c (added_atexit_handler): Likewise.
	* malloc/set-freeres.c (already_called): Likewise.
	* misc/getpass.c (getpass) [buf, bufsize]: Likewise.
	* misc/syslog.c (LogStat, LogTag): Likewise.
	* nss/XXX-lookup.c (DATABASE_NAME_SYMBOL): Likewise.
	* nss/getXXbyYY_r.c (startp): Likewise.
	* posix/getopt.c (optarg, __getopt_initialized): Likewise.
	* posix/regex.c (init_syntax_once) [done]: Likewise.
	(debug): Likewise.
	* string/strfry.c (init): Likewise.
	* sunrpc/svc_run.c (svc_top): Likewise.
	* posix/euidaccess.c (have_ids): Likewise.
	* sysdeps/unix/sysv/linux/poll.c (must_emulate): Likewise.
	* sysdeps/unix/sysv/linux/ttyname.c (__ttyname, namelen): Likewise.
	* time/getdate.c (getdate_err): Likewise.
	* time/tzfile.c (transitions, type_idxs, types, zone_names, leaps):
	Likewise.
	* time/tzset.c (old_tz, is_initialized): Likewise.

	* inet/getnameinfo.c (nrl_domainname): Rewrite to allow initialization
	of static data with zero.
	* signal/allocrtsig.c (init): Likewise.

	* string/Makefile (routines): Add strchrnul.
	* string/Versions [GLIBC_2.1.1]: Add strchrnul.
	* string/string.c: Add strchrnul prototype.
	* include/string.h: Add __strchrnul prototype.
	* sysdeps/generic/strchrnul.c: New file.
	* sysdeps/i386/strchrnul.S: New file.
	* sysdeps/i386/bits/string.c: Add strchrnul optimization.
	* sysdeps/i386/i486/bits/string.c: Likewise.
	* argp/argp-help.c (argp_args_usage): Use __strchrnul.
	* inet/ether_line.c (ether_line): Likewise.
	* nscd/nscd_conf.c (nscd_parse_file): Likewise.
	* nss/nsswitch.c (nss_parse_file): Likewise.
	* posix/execvp.c (execvp): Likewise.
	* posix/fnmatch.c (internal_fnmatch): Likewise.
	* resolv/res_hconf.c (_res_hconv_init): Likewise.
	* resolv/res_init.c (res_init): Likewise.
	* stdlib/fmtmsg.c (init): Likewise.
	* stdlib/getsubopt.c (getsubopt): Likewise.

	* catgets/catgets.c (catopen): Only allocate one memory block.
	(catclose): Only one free call necessary.

	* catgets/open_catalog.c (__open_catalog): Simplify handling of
	file descriptor.

	* ctype/ctype-extn.c: Make __toascii_l and __isascii_l alias instead
	of real functions.  Simplify _tolower and _toupper.

	* grp/initgroups.c (compat_call): Remove unnecessary use of pointer
	variable.

	* iconv/gconv.h (struct gconv_info): Change data element from pointer
	to array of size 0.
	* iconv/gconv_open.c (__gconv_open): Allocate structures accordingly.
	* iconv/gconv_close.c (__gconv_close): Don't free data.

	* iconv/gconv_conf.c (add_alias): Avoid searching in tree twice to
	insert new alias.

	* iconv/gconv_db.c (add_derivation): More efficient copying.  Check
	for error while inserting in tree.

	* include/time.h: Pretty print.

	* inet/ruserpass.c: Rewrite use of toktab to avoid string pointers
	in table and lots of relocations.
	* posix/regex.c (regerror): Rewrite use of re_error_msgid to avoid
	string pointers in table and lots of relocations.

	* intl/finddomain.c: Remove definition of strchr macro.

	* io/ftw.c (nftw_arr, ftw_arr): Make const.

	* locale/loadlocale.c (_nl_load_locale): Optimize string copying.

	* locale/localeinfo.h (_nl_category_names): Change into an array with
	fixed width char string elements.
	* locale/setlocale.c (_nl_category_names): Likewise.
	(_nl_current): Make global.
	* locale/nl_langinfo.c (nldata): Removed.  Use _nl_current now.

	* malloc/Makefile (distribute): Add stackinfo.h.
	* sysdeps/generic/stackinfo.h: New file.
	* sysdeps/i386/stackinfo.h: New file.
	* posix/execl.c: Use stackinfo.h in optimizing alloca use.
	* posix/execle.c: Likewise.
	* posix/execlp.c: Likewise.

	* nis/nis_table.c (__create_ib_request): Always use realloc.

	* posix/execvp.c (execute): Rename to script_execute and keep only
	code to execute using shell.
	(execvp): Call execv directly and only fall back on script_execute.

	* resolv/inet_net_pton.c (inet_net_pton_ipv4): Remove digits define
	and always use xdigits instead.

	* resolv/res_init.c (res_init): Use rawmemchr instead of strchr
	where appropriate.

	* stdlib/fpioconst.h (__tens): New declaration.
	(struct mp_power): Remove array, add arrayoff element.
	* stdlib/fpioconst.c: Replace definitions of _ten_p* arrays by one
	__tens array and add in _fpioconst_pow10 offsets into __tens.
	* stdio-common/printf_fp.c: Rewrite to use new __tens array.
	* stdlib/strtod.c: Likewise.

	* stdlib/a64l.c (a64l_table): Avoid unnecessary elements.

	* stdlib/exit.c: Rewrite to use __exit_funcs being as sign for end
	of the list.
	* stdlib/atexit.c (__exit_funcs): Don't initialize.

	* stdlib/fmtmsg.c (keywords): Make name element fixed width array.

	* sunrpc/clnt_perr.c: Rewrite clnt_sperrno and auth_errmsg to use
	a single and an array with offsets.

	* sunrpc/des_soft.c (partab): Make it const.

	* sunrpc/key_call.c (trytimeout, tottimeout): Make const.
	(__key_encryptsession_pk_LOCAL): Don't initialize with 0.
	(__key_decryptsession_pk_LOCAL): Likewise.
	(__key_gendes_LOCAL): Likewise.
	(MESSENGER): Mark const.
	(key_call_private_main): Don't initialize with 0.
	(use_keyenvoy): Don't initialize with 0.
	(key_call): Rewrite to reverse logic of use_doors variable.

	* sunrpc/netname.c (OPSYS): Define as array, not pointer.
	(startp): Don't initialize with zero.

	* sunrpc/openchild.c (_openchild): Make first argument const.

	* sunrpc/pmap_rmt.c (timeout): Mark const.
	* sunrpc/xcrypt.c (hex): Likewise.

	* sysdeps/unix/sysv/linux/getcwd.c: Rewrite to allow omitting
	initialization of global variables.
	* sysdeps/unix/sysv/linux/getpt.c: Likewise.
	* sysdeps/unix/sysv/linux/if_index.c: Likewise.
	* termios/tcgetsid.c: Likewise.

	* sysdeps/unix/sysv/linux/i386/dl-procinfo.h (x86_cap_flags): Change
	fxsr to osfxsr.

	* time/tzfile.c (__tzfile_read): Rewrite to allocate only one memory
	block.  Add function to free memory if wanted.
	* time/tzset.c (tzset_internal): Pass extra argument to __tzfile_read.

	* wcsmbs/wcsmbsload.c (to_wc, to_mb): Correct initializers.

	* wcsmbs/wmemset.c: Little code optimization.

1999-04-23  Paul Eggert  <eggert@twinsun.com>

	* stdlib/strtoull.c: Surround strong_alias and weak_alias with
	ifdef _LIBC.

1999-04-28  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/getdents.c (__getdirentries): Remove
	implementation and just always fail with ENOSYS.  This entry point is
	obsolete.  Add link warning to that effect.

1999-04-27  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/get-host.c: Include <hurd/lookup.h>.

1999-04-28  Ulrich Drepper  <drepper@cygnus.com>

	* malloc/malloc.c (rEALLOc): Only free memory for size 0 if oldmem
	is != NULL.

1999-04-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* malloc/malloc.c (REALLOC_ZERO_BYTES_FREES): Define it to follow
	ISO C9x and Unix98.

1999-04-28  Ulrich Drepper  <drepper@cygnus.com>

	* libio/iofopncook.c (_IO_cookie_seek): Correct return value.
	Patch by Peter Miller <millerp@canb.auug.org.au>.

1999-04-27  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/pmap_clnt.c: Add own get_myaddress function, which
	prefers loopback device.

1999-04-28  Ulrich Drepper  <drepper@cygnus.com>

	* posix/fnmatch.c (internal_fnmatch): Finish incomplete
	no_leading_period change.

	* posix/testfnm.c: More test cases.

1999-04-27  Ulrich Drepper  <drepper@cygnus.com>

	* include/dirent.h: Remove __getdirentries declaration, add __getdents
	and __getdents64.
	* sysdeps/unix/readdir.c: Use __getdents, not __getdirentries.
	* sysdeps/unix/readdir_r.c: Likewise.
	* sysdeps/unix/sysv/linux/readdir64.c: Likewise.
	* sysdeps/unix/sysv/linux/readdir64_r.c: Likewise.
	* sysdeps/unix/sysv/linux/getdents.c: Define __getdents, not
	__getdirentries.  Remove fourth argument.
	* sysdeps/unix/sysv/linux/getdirentries.c: New file.
	* sysdeps/unix/sysv/linux/getdirentries64.c: New file.
	* sysdeps/unix/sysv/linux/Makefile [subdir=dirent] (sysdep_routines):
	Add getdirentries and getdirentries64.
	* sysdeps/unix/sysv/linux/Dist: Add getdirentries and getdirentries64.

	* posix/fnmatch.c (internal_fnmatch): Correctly reset string
	pointer in case of an invalid [[: expression.

	* posix/testfnm.c: Add more test cases.

1999-04-27  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdexec.c (_hurd_exec): If SIGKILL present in _hurdsig_traced
	set, pass EXEC_SIGTRAP flag in exec RPC.

1999-04-26  Ulrich Drepper  <drepper@cygnus.com>

	* posix/fnmatch.c (internal_fnmatch): Renamed from fnmatch.  Take
	extra parameter.  Fix several more bugs involving wildcard and
	ranges.
	(fnmatch): New function.  Call internal_fnmatch.

	* posix/testfnm.c: More test cases.

1999-04-03  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Configuring and compiling): Explain that
	files are changed in the source directory.
	Closes PR libc/981.
	(Configuring and compiling): Explain situation with PARALLELMFLAGS
	in the source directory.

1999-04-24  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* locale/programs/ld-ctype.c: Spelling fixes.
	(ctype_finish): Fix argument of error message format.
	* locale/programs/ld-messages.c: Spelling fixes.
	* locale/programs/ld-monetary.c: Spelling fixes.
	* locale/programs/ld-time.c (time_finish): Make sure that name and
	format of era_entries are adjacent.
	(time_output): Reduce the size of the io vector.

1999-04-25  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* manual/filesys.texi (Attribute Meanings): Move a misplaced
	paragraph.

1999-04-23  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* locale/programs/ld-collate.c (collate_output): Convert
	undefined_offset to an array index.  Fix computation of other
	endian extra table.

1999-04-26  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/get-host.c (_hurd_get_host_config): If ENOENT opening file,
	return success with empty value.

1999-04-26  Ulrich Drepper  <drepper@cygnus.com>

	* posix/fnmatch.c: Include string.h also for glibc.
	(fnmatch, case '?'): Optimize if cascades a bit.
	(fnmatch, case '*'): Correct handling if FNM_PATHNAME is set.

	* posix/testfnm.c: Add test cases for * with FNM_PATHNAME errors.

1999-04-24  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_builtin.h: Add definitions for UTF16 builtins.
	* iconv/gconv_int.h: Declare UTF16 functions.
	* iconv/gconv_simple.c: Add UTF16 conversion functions.

1999-04-20  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* posix/wordexp.c (parse_param): Fix type of offset to allow it to
	be used correctly as parameter for parse_dollars/parse_tilde.

1999-04-19  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* manual/conf.texi (Utility Limits): Remove duplicate description
	of BC_DIM_MAX.

1999-04-19  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/mbsnrtowcs.c (__mbsnrtowcs): Correctly initialize
	outbufend for dst==NULL.

1999-04-18  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/mbsrtowcs.c (__mbsrtowcs): Correctly initialize outbufend
	for dst==NULL.
	Fixes PR libc/1084.

	* socket/sys/socket.h: Define SHUT_RD, SHUT_WR, and SHUT_RDWR.
	Fixes PR libc/1083.

1999-04-18  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/Makefile: Remove special handling of bootparam.x,
	add rpcsvc/bootparam.h to headers.
	* sunrpc/rpcsvc/bootparam.h: New, for backward compatibility.
	* sunrpc/rpcsvc/bootparam.x: Renamed to...
	* sunrpc/rpcsvc/bootparam_prot.x: ...this.

1999-04-18  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/bsd/poll.c (__poll): Add more compatiblity code to
	detect and handle invalid descriptors.

1999-04-17  Thorsten Kukuk  <kukuk@suse.de>

	* timezone/zic.c (dolink): Append complete path not only filename
	to ../ list.

1999-04-17  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* iconvdata/ibm874.c (TABLES, CHARSET_NAME): Follow name change.

1999-04-17  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/gconv-modules: Rename CP874 to IBM874.
	* iconvdata/Makefile: Likewise.
	* iconvdata/cp874.h: Removed.
	* iconvdata/cp874.c: Renamed to...
	* iconvdata/ibm874.c: ...this.

1999-04-16  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/bits/types.h: Correct
	signed/unsigned-ness of blkcnt and fsblkcnt.
	* sysdeps/unix/sysv/linux/alpha/bits/types.h: Likewise.
	* sysdeps/unix/sysv/linux/mips/bits/types.h: Likewise.

	* sysdeps/unix/sysv/linux/bits/socket.h: Add SOL_PACKET, SOL_ATM,
	SOL_AAL, and SOL_IRDA.

1999-04-15  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/fstatvfs.c: Set f_frsize to zero.  Don't
	include "linux_fsinfo.h".
	Based on a patch by H.J. Lu <hjl@gnu.org>.

1999-04-16  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/rpc_cout.c (print_header): Use int32_t pointer, not long.

1999-04-16  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/cache.c (prune_cache): Only disable file checking for
	future if the file does not exist.
	Update file_mtime if cache was flushed.

1999-04-15  David S. Miller  <davem@redhat.com>

	* sysdeps/sparc/sparc32/strcat.S: Avoid using register g6.
	* sysdeps/sparc/sparc32/strcpy.S: Likewise.

1999-04-15  Scott Bambrough  <scottb@netwinder.org>

	* sysdeps/unix/sysv/linux/arm/sigaction.c: Fix typo in preventing
	compilation of file.

1999-04-15  Ulrich Drepper  <drepper@cygnus.com>

	* Versions.def: Add GLIBC_2.1.1 to libpthread.

	* iconvdata/Makefile (modules): Add KOI8-U.
	(distribute): Add koi8-u.c.
	(gen-8bit-gap-modules): Add koi8-u.
	* iconvdata/gconv-modules: Add KOI8-U entries.
	* iconvdata/koi8-u.c: New file.

1999-04-13  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/auth_des.c: 64bit fixes, security fixes.
	* sunrpc/auth_none.c: Pretty print.
	* sunrpc/auth_unix.c: Likewise.
	* sunrpc/authdes_prot.c: Likewise.
	* sunrpc/authuxprot.c: Likewise.
	* sunrpc/bindrsvprt.c: Likewise.
	* sunrpc/clnt_gen.c: Likewise.
	* sunrpc/rpc/xdr.h: Likewise.
	* sunrpc/rpc/auth_des.h: Add rpc_timeval struct.
	* sunrpc/rpc_cmsg.c: Don't use *long pointers.
	* sunrpc/rtime.c: Use new rpc_timeval.
	* sunrpc/svc_authux.c: Don't use *long pointers.
	* sunrpc/svcauth_des.c: Likewise + security fixes.
	* sunrpc/xdr_mem.c: Don't use *long pointers.
	* sunrpc/xdr_rec.c: Likewise.
	* sunrpc/xdr_sizeof.c: Likewise.
	* sunrpc/xdr_stdio.c: Likewise.

1999-04-15  Ulrich Drepper  <drepper@cygnus.com>

	* sunrpc/clnt_udp.c (clntudp_call): Move initialization of anyup
	so that it is redone for each sending.

1999-04-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sunrpc/clnt_udp.c (clntudp_call): Initialize anyup.

1999-04-15  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv_db.c (__gconv_find_transform): If conversion is
	known to not exist don't try to load shared objects.
	Patch by Petr Vandrovec Ing. VTEI <VANDROVE@vc.cvut.cz>.

	* nscd/cache.c (prune_cache): The table might not be unused.  In
	this case do nothing.

	* catgets/gencat.c (read_input_file): Don't drop white spaces
	between number/identifier and string.
	Patch by Dima Barsky <dima@pwd.hp.com>.
	If no white space at all follows number/identifier remove existing
	message with the number/identifier.

1999-04-14  H.J. Lu  <hjl@gnu.org>

	* sunrpc/clnt_udp.c (is_network_up): New function.
	(clntudp_call): Call is_network_up () to check if any network
	interface is up in case of timeout.

1999-04-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* wctype/test_wcfuncs.c: New file, tests towlower and towupper.
	* wctype/Makefile (tests): Add test_wcfuncs.

1999-04-14  Jakub Jelinek  <jj@ultra.linux.cz>

	* scripts/config.sub: Allow sparcv[6789]-* and sparcv8plus{,a}-*
	architectures.
	* sysdeps/sparc/sparc32/sparcv8/Makefile: Use sysdep-CFLAGS
	instead of CFLAGS.
	* sysdeps/sparc/sparc32/sparcv8/Makefile: Use sysdep-CFLAGS
	instead of CFLAGS. For gnulib and string directories use
	-Wa,-Av9a gcc ASFLAGS.
	* sysdeps/sparc/sparc32/sparcv9/memmove.c: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/dl-procinfo.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/dl-procinfo.h: New file.
	* shlib-versions: Handle sparcv[6789]-* and sparcv8plus{,a}-*
	the same way as sparc-*.

1999-04-14  Ulrich Drepper  <drepper@cygnus.com>

	* locale/programs/locfile.c (locfile_read): Fix typo.
	Patch by Kaoru Fukui <k_fukui@highway.ne.jp>.

1999-04-14  Scott Bambrough  <scottb@netwinder.org>

	* sysdeps/unix/sysv/linux/arm/socket.S: Socket calls could not be
	restarted after being interrupted by a signal.  The parameters on
	the stack were corrupted by the signal handler.

	* sysdeps/unix/sysv/linux/arm/mmap.S: mmap calls could not be
	restarted after being interrupted by a signal.  The parameters on
	the stack were corrupted by the signal handler.

1999-04-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* wctype/wcfuncs.c (towlower): Use __ctype_tolower.
	Reported by Kalle Olavi Niemitalo <tosi@ees2.oulu.fi>

1999-04-12  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp-test.c: In field-splitting test cases where
	subshells were involved, unset IFS first: some shells (ash) use
	IFS even when no expansion is performed.

1999-04-13  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* libio/obprintf.c (_IO_obstack_overflow): Put the write end at
	the real end of the chunk, not some random point inbetween.
	(_IO_obstack_xsputn): Likewise.  Actually copy the data into the
	obstack when growing.  Use fast version of obstack_blank when
	shrinking.
	(struct _IO_obstack_file): Use _IO_FILE_plus instead of explicitly
	allocating the vtable pointer.
	(_IO_obstack_vprintf): Adjust for above change and avoid
	unnecessary casts.  Use fast version of obstack_blank when
	shrinking.
	Fixes PR libc/1075.

1999-04-12  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/gconv-modules: Fix typo.  Add UJIS alias.
	Reported by GOTO Masanori <gotom@cs.titech.ac.jp>.

1999-04-11  Tim Waugh  <tim@cyberelk.demon.co.uk>

	* posix/wordexp.c (wordexp): Fix a leak when an invalid character
	is seen, as well as fixing semantics.  Don't reset the word count
	to zero when an invalid character is seen, but leave it as it was
	(this makes a difference with WRDE_APPEND).

	* posix/wordexp-test.c: More test cases.

	* posix/wordexp.c (parse_param): In words like ${var#pattern},
	always expand pattern when it is needed.  Also, handle quoting in
	pattern properly.

1999-04-12  Philip Blundell  <philb@gnu.org>

	* elf/elf.h: Update ARM definitions to match current gas2.

	* sysdeps/arm/bits/endian.h: Support big endian operation.

	* sysdeps/unix/sysv/linux/arm/ioperm.c (_outw, _outb, _outl):
	Don't bother range checking the port number.

	* sysdeps/unix/sysv/linux/arm/vfork.S: New file.

	* sysdeps/unix/sysv/linux/arm/sysdep.h (INLINE_SYSCALL): Include
	the syscall name in assembler output for ease of debugging.

	* sysdeps/unix/sysv/linux/arm/sigaction.c: Don't rely on undefined
	compiler behaviour.
	* sysdeps/unix/sysv/linux/arm/sigrestorer.S: New file.
	* sysdeps/unix/sysv/linux/arm/Makefile [$(subdir) = signal]
	(sysdep_routines): Add sigrestorer.

	* string/tester.c (test_strcpy): Add new tests for unaligned
	arguments.
	* sysdeps/arm/bits/string.h: Delete inline implementations of
	strcpy and stpcpy.

1999-04-11  Ulrich Drepper  <drepper@cygnus.com>

	* libio/Makefile (CPPFLAGS-.o): Don't define IO_DEBUG.

1999-04-10  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/Dist: Add clk_tck.c.

1999-04-10  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/Makefile (modules): Add TIS-620.
	(distribute): Add tis-620.c.
	(gen-8bit-gap-modules): tis-620.
	* iconvdata/tis-620.c: New file.
	* iconvdata/gconv-modules: Add TIS-620 entries.

	* iconvdata/asmo_449.c: Correct comment.

1999-04-10  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Configuring and compiling): Comment out
	description of --disable-static since this doesn't work currently
	(see change by Ulrich Drepper on 1998-12-07 for configure.in).

1999-04-10  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/dl-cache.c (_dl_load_cache_lookup): Rewrite to
	use binary search.
	Based on a patch by Jakub Jelinek <jj@sunsite.ms.mff.cuni.cz>.

1999-04-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* scripts/test-installation.pl (installation_problem): Skip
	libnss1_* libraries from glibc-compat add-on.

1999-04-07  H.J. Lu  <hjl@gnu.org>

	* io/Versions (__dup2, __pipe): Added to GLIBC_2.0 for
	libstdc++ 2.7.2.
	* posix/Versions (__waitpid): Likewise.

1999-04-08  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/install.texi (Reporting Bugs): Add section about reported
	bugs and correct email address of glibcbug script.

1999-04-01  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/Versions: Add new xdr functions to GLIBC_2.1.1
	* sunrpc/xdr.c: Add xdr_hyper, xdr_u_hyper, xdr_longlong_t and
	xdr_u_longlong_t. Based on patch from Dan Shechter
	<damageboy@isdn.net.il>.
	* sunrpc/xdr_intXX_t.c: Implement xdr_int64_t, xdr_uint64_t
	* sunrpc/rpc/xdr.h: Add prototypes for new xdr functions.

	* nis/nis_lookup.c (nis_lookup): Don't overwrite RPC error code.

1999-04-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/getdents.c (__getdirentries): Return
	directly if getdents returns with error set.

1999-04-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* locale/langinfo.h (THOUSEP): Rename second occurence of
	THOUSANDS_SEP to THOUSEP.
	Reported by Roman Belenov <roman@nstl.nnov.ru>.

1999-04-05  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/STATUS: File removed.  Moved items that are still relevant into
	TODO list in hurd source.

1999-03-26  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/bits/time.h: New file.
	* sysdeps/mach/hurd/getrusage.c: New file.
	* sysdeps/mach/hurd/clk_tck.c: New file.
	* sysdeps/mach/hurd/Versions (libc) [GLIBC_2.1.1]: Add __libc_clk_tck.
	* sysdeps/mach/hurd/Makefile [$(subdir) = posix]
	(sysdep_routines): Add clk_tck.
	* sysdeps/mach/hurd/times.c: Removed, since getrusage is now
	implemented.

1999-04-02  Ulrich Drepper  <drepper@cygnus.com>

	* misc/syslog.c (closelog_internal): Do not reset LogTag here.
	(closelog): But instead here.
	Patch by Alan Curry <pacman@cqc.com> [PR libc/1061].

1999-04-02  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/Makefile (CFLAGS-multiload.c): Change to allow building in
	the source directory.  Fixes PR libc/1059.

1999-04-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Terminate the string.
	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r): Likewise.

1999-04-01  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/TESTS: Add ISO-8859-14 and ISO-8859-15.
	* iconvdata/testdata/ISO-8859-14: New file.
	* iconvdata/testdata/ISO-8859-14..UTF8: New file.
	* iconvdata/testdata/ISO-8859-15: New file.
	* iconvdata/testdata/ISO-8859-15..UTF8: New file.

1999-03-31  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/testdata/CP1258: New file.
	* iconvdata/testdata/CP1258..UTF8: New file.
	* iconvdata/TESTS: Add CP1258 entry.

	* iconvdata/cp874.h (to_ucs4): Add Euro sign.

	* timezone/africa: Update from tzdata1999d.
	* timezone/europe: Likewise.
	* timezone/northamerica: Likewise.

1999-03-31  Mark Kettenis  <kettenis@gnu.org>

	* login/programs/pt_chown.c (main): Save effective user ID before
	dropping priviliges and use this to check if the program is
	properly installed.

1999-03-31  Ulrich Drepper  <drepper@cygnus.com>

	* iconvdata/testdata/CP1254: Update for charmap changes.
	* iconvdata/testdata/CP1254..UTF8: Likewise.
	* iconvdata/testdata/CP1255: Likewise.
	* iconvdata/testdata/CP1255..UTF8: Likewise.
	* iconvdata/testdata/CP1256: Likewise.
	* iconvdata/testdata/CP1256..UTF8: Likewise.
	* iconvdata/testdata/CP1257: Likewise.
	* iconvdata/testdata/CP1257..UTF8: Likewise.

	* iconvdata/Makefile (distribute): Remove cp1258.h.
	(gen-8bit-gap-modules): Add cp1258.
	* iconvdata/cp1258.h: Removed.

1999-03-30  Ulrich Drepper  <drepper@cygnus.com>

	* timezone/tst-timezone.c (tests): Add more cases.
	(check_tzvars): Mark errors clearer.
	(main): Likewise.

1999-03-30 20:59 -0500  Zack Weinberg  <zack@rabi.phys.columbia.edu>

	* login/programs/pt_chown.c: Drop privileges if invoked with
	arguments.  Don't close the master pty.

1999-03-30  Ulrich Drepper  <drepper@cygnus.com>

	* time/tzfile.c (__tzfile_read): Process transitions from the rear.
	Minor optimization.

1999-03-29  Ulrich Drepper  <drepper@cygnus.com>

	* elf/rtld.c (process_envvars): Do not automatically prevent lazy
	relocation for SUID binaries.

1999-03-29  Paul Eggert  <eggert@twinsun.com>

	* libio/iopopen.c (_IO_new_proc_open): Don't modify proc_file_chain
	while in child process.

1999-03-29  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/sparc/sparc32/sparcv8/Makefile: New file.
	* sysdeps/sparc/sparc32/sparcv8/rem.S: Delay after write %y.
	* sysdeps/sparc/sparc32/sparcv8/sdiv.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv8/udiv.S: Likewise.
	* sysdeps/sparc/sparc32/sparcv8/urem.S: Likewise.

	* sysdeps/sparc/sparc32/sparcv9/bcopy.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/bzero.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/memchr.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/memcmp.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/memcpy.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/memset.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/stpcpy.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strcat.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strchr.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strcmp.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strcpy.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strcspn.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strlen.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strncpy.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strpbrk.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strrchr.c: New file.
	* sysdeps/sparc/sparc32/sparcv9/strspn.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/dotmul.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/rem.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/sdiv.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/udiv.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/umul.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/urem.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/Makefile: New file.
	* sysdeps/sparc/sparc32/sparcv9/stpncpy.S: New file.
	* sysdeps/sparc/sparc32/sparcv9/strncmp.S: New file.

	* sysdeps/sparc/sparc32/bcopy.c: New file.
	* sysdeps/sparc/sparc32/bzero.c: New file.
	* sysdeps/sparc/sparc32/memchr.S: New file.
	* sysdeps/sparc/sparc32/memcpy.S: New file.
	* sysdeps/sparc/sparc32/memmove.c: New file.
	* sysdeps/sparc/sparc32/memset.S: New file.
	* sysdeps/sparc/sparc32/stpcpy.S: New file.
	* sysdeps/sparc/sparc32/strchr.S: New file.
	* sysdeps/sparc/sparc32/strrchr.c: New file.
	* sysdeps/sparc/sparc32/strcpy.S: New file.
	* sysdeps/sparc/sparc32/strlen.S: New file.
	* sysdeps/sparc/sparc32/strcat.S: New file.
	* sysdeps/sparc/sparc32/strcmp.S: New file.

	* sysdeps/sparc/sparc64/bcopy.c: New file.
	* sysdeps/sparc/sparc64/bzero.c: New file.
	* sysdeps/sparc/sparc64/memchr.S: New file.
	* sysdeps/sparc/sparc64/memcmp.S: New file.
	* sysdeps/sparc/sparc64/memcpy.S: New file.
	* sysdeps/sparc/sparc64/memset.S: New file.
	* sysdeps/sparc/sparc64/stpcpy.S: New file.
	* sysdeps/sparc/sparc64/strcat.S: New file.
	* sysdeps/sparc/sparc64/strchr.S: New file.
	* sysdeps/sparc/sparc64/strcmp.S: New file.
	* sysdeps/sparc/sparc64/strcpy.S: New file.
	* sysdeps/sparc/sparc64/strcspn.S: New file.
	* sysdeps/sparc/sparc64/strlen.S: New file.
	* sysdeps/sparc/sparc64/strncpy.S: New file.
	* sysdeps/sparc/sparc64/strpbrk.S: New file.
	* sysdeps/sparc/sparc64/strrchr.c: New file.
	* sysdeps/sparc/sparc64/strspn.S: New file.
	* sysdeps/sparc/sparc64/stpncpy.S: New file.
	* sysdeps/sparc/sparc64/strncmp.S: New file.

	* sysdeps/unix/sysv/linux/sparc/sparc32/Makefile (ASFLAGS-.os):
	Append -fPIC, don't replace.

	* configure.in: Recognize sparcv8plus / sparcv9.

1999-03-27  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* malloc/obstack.h (obstack_free): Explicitly convert __obj to
	char * to avoid C++ warning.
	Patch by yasushi@cs.washington.edu [PR libc/1035].

1999-03-29  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/filesys.texi (Temporary Files): mktemp and mkstemp are
	declared in stdlib.h, correct return value of mkstemp.
	Reported by Andries Brouwer <Andries.Brouwer@cwi.nl>.

	* sysdeps/unix/sysv/linux/net/if_arp.h (ARPHDRD_FC*): New defines
	from Linux 2.2.5.

1999-03-28  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* misc/regexp.h (compile): Cast some pointers to (char *) to avoid
	C++ warning.

	* ctype/ctype.h (tolower, toupper): Add __THROW declaration to
	inline functions.  Closes PR libc/1049.

1999-03-25  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* timezone/README: Update from tzdata1999c and tzcode1999c.

	* timezone/africa: Update from tzdata1999c.
	* timezone/antarctica: Likewise.
	* timezone/asia: Likewise.
	* timezone/australasia: Likewise.
	* timezone/europe: Likewise.
	* timezone/northamerica: Likewise.
	* timezone/southamerica: Likewise.
	* timezone/zone.tab: Likewise.

	* timezone/zic.c: Update from tzcode1999c.

1999-03-26  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* Makerules: Add $(common-objpfx)Versions.all to common-generated
	outside of ifndef avoid-generated.

	* libio/oldiofdopen.c (_IO_old_fdopen): Bring over recent changes
	in iofdopen.c.
	* libio/oldiofopen.c (_IO_old_fopen): Bring over recent changes in
	iofopen.c.
	* libio/oldiofclose.c (_IO_old_fclose): Bring over recent changes
	in iofclose.c.
	* libio/oldfileops.c (_IO_old_file_underflow, _IO_old_file_sync,
	_IO_old_file_seekoff): Bring over recent changes in fileops.c.

1999-03-26  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/Makefile: Only install libc_p.a linker script
	if we build the profiled library.

1999-03-26  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* math/Makefile (gmp-objs): Add inlines.  Reported by Andreas
	Jaeger <aj@arthur.rhein-neckar.de>

1999-03-25  Roland McGrath  <roland@yaumatei.ai.mit.edu>

	* sysdeps/mach/hurd/i386/Makefile [$(subdir) = csu]
	(CFLAGS-initfini.s): New variable, add -DWEAK_GMON_START.
	This does for Hurd/i386 what the 1998-09-08 change did for Linux/i386.

1999-03-24  Roland McGrath  <roland@baalperazim.frob.com>

	* Makeconfig (sysd-sorted): Use $(..) on rhs of patsubst, so this rule
	works properly in subdirs.

1999-03-23  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/Makefile: Undo last change.
	[$(subdir) = mach] (lib-noranlib): Depend on libmachuser-link.so.
	[$(subdir) = hurd] (lib-noranlib): Depend on libhurduser-link.so.

	* mach/Machrules (+preinit, +postinit, +interp,
	LDFLAGS-$(interface.so)): Variables removed.  Interface libraries get
	linked just like other shared libraries.
	(interface.so): Fix typo in defn, so it works.
	($(objpfx)$(interface.so)): Make it depend on libc.so.

1999-03-21  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/Makefile (subdir_lib): Depend on
	$(link-rpcuserlibs).

1999-03-22  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* elf/Makefile ($(inst_slibdir)/$(rtld-version-installed-name),
	$(inst_slibdir)/$(rtld-installed-name), ldso_install): Disable
	targets if not building shared libraries.

1999-03-22  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* configure.in: Also look in $PATH when searching for
	install-info.  Remove autoconf bug workaround and require autoconf
	2.13.

1999-03-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* db/Makefile: Don't try to install shared library link if not
	building with shared libs.

1999-03-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* rt/Makefile: Link against static library if no shared lib is
	available.

	* localedata/Makefile: The shells scripts implementing the test
	require the dynamic linker which is not available with
	--disable-shared.  Skip the test if --disable-shared is given.

	* linuxthreads/Makefile: Link test against static libpthread if no
	shared lib is available.

	* iconvdata/Makefile (tests): Run iconv-test only if we're
	building shared libraries.
	* elf/Makefile (tests): Likewise for elf tests.

	* posix/Makefile: The test frameworks globtest and wordexp-test
	require the dynamic linker which is not available with
	--disable-shared.  Skip the test if --disable-shared is given.

	* grp/Makefile (otherlibs): For static nss build link against
	necessary libs.

1999-03-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* debug/Makefile (install-bin): Install and build catchsegv only
	if build-shared == yes.  Reported by jussi@jlaako.pp.fi [PR
	libc/965].

1999-03-20  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* time/tzfile.c (__tzfile_read): Handle the case where there are
	transitions but no DST.

1999-03-20  Roland McGrath  <roland@baalperazim.frob.com>

	* mach/Machrules (extra-libs-others): Add $(interface-library) here
	too, so it gets built in the others pass rather than the lib pass.
	This is necessary since the RPC libraries need to be linked against
	libc.

1999-03-19  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/generic/segfault.c: Include <stdio-common/_itoa.h> for
	_itoa_word decl.

	* sysdeps/mach/hurd/Makefile (link-rpcuserlibs): New variable.
	($(common-objpfx)libc.so): Depend on that instead of $(rpcuserlibs).
	($(link-rpcuserlibs)): New static pattern rule; link intermediate
	versions of lib{mach,hurd}user.so without reference to libc.so,
	then link libc.so against that to get deps and symbol versions, then
	finally link real lib*user.so against libc.so.

	* sysdeps/mach/hurd/fcntl.c (__fcntl: case F_GETLK,F_SETLK,F_SETLKW):
	Support whole-file locking (only) by using the file_lock RPC.  This
	has very wrong semantics, but is better than nothing for the time
	being.  (Correct POSIX.1 locking will require new RPCs in the Hurd
	protocols that will be somewhat hairy to specify.)

1999-03-17  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/ptsname.c: New file.

1999-03-20  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* timezone/asia: Fix rule in Asia/Nicosia entry.

1999-03-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/getopt.texi (Using Getopt): Explain "::" in option
	string.  Reported by Yuri Niyazov <yuricake@geocities.com>.

1999-03-18  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/clnt_unix.c: Fix creation of parameters for
	sendmsg/recvmsg on non intel platforms.
	* sunrpc/svc_unix.c: Likewise.

1999-03-18  Philip Blundell  <philb@gnu.org>

	* sysdeps/unix/sysv/linux/arm/getgroups.c: New file.  Use the i386
	implementation.

1999-03-19  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* timezone/africa: Update from tzdata1999b.
	* timezone/asia: Likewise.
	* timezone/australasia: Likewise.
	* timezone/europe: Likewise.
	* timezone/northamerica: Likewise.
	* timezone/southamerica: Likewise.
	* timezone/zone.tab: Likewise.

	* timezone/README: Mention tzdata1999b.

1999-03-17  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/segfault.c (write_strsignal): New function.
	(catch_segfault): Use it instead of calling strsignal.

1999-03-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* iconv/gconv.c (__gconv): Change type of last_start to unsigned
	char to avoid warning.

1999-03-15  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/iconv.c (iconv): Correctly cast parameters for __gconv.

	* iconvdata/iso-2022-kr.c (EMIT_SHIFT_TO_INIT): Change type of
	outbuf to unsigned char to avoid warning.

1999-03-11  David S. Miller  <davem@redhat.com>

	* sysdeps/sparc/sparc32/fpu/fpu_control.h: Add missing trap enable
	masks.
	* sysdeps/sparc/sparc64/fpu/fpu_control.h: Likewise.

1999-03-15  Ulrich Drepper  <drepper@cygnus.com>

	* iconv/gconv.h (gconv_fct): Change parameter from `char' to
	`unsigned char'.
	(gconv_step_data): Likewise.
	* iconv/gconv_int.h (__gconv): Likewise.
	(__BUILINT_TRANS): Likewise.
	* iconv/gconv.c (__gconv): Likewise.
	* iconv/iconv.c (iconv): Add casts for call of __gconv.
	* iconv/skeleton.c: Change local parameters and variable from `char' to
	`unsigned char'.  Remove casts from calls into modules.
	* iconvdata/iso-2022-jp.c (gconv): Change local variable outbuf from
	`char' to `unsigned char'.
	* wcsmbs/btowc.c: Change pointers from `char *' to `unsigned char *'.
	* wcsmbs/mbrtowc.c: Likewise.
	* wcsmbs/mbsnrtowcs.c: Likewise.
	* wcsmbs/mbsrtowcs.c: Likewise.
	* wcsmbs/wcrtomb.c: Likewise.
	* wcsmbs/wcsnrtombs.c: Likewise.
	* wcsmbs/wcsrtombs.c: Likewise.
	* wcsmbs/wctob.c: Likewise.

1999-03-15  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/Versions (ld.so) [GLIBC_2.0]: Add
	__hurd_sigthread_stack_base, __hurd_sigthread_stack_end,
	__hurd_sigthread_variables, __hurd_threadvar_stack_mask,
	__hurd_threadvar_stack_offset, __close, __fxstat, __getcwd,
	__getpid, __libc_read, __libc_write, __lseek, __mmap, __open,
	__xstat, _exit, _hurd_intr_rpc_mach_msg and abort.

1999-03-15  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/poll.c (__poll): Correctly pass NULL to
	_hurd_select if TIMEMOUT is -1.

1999-03-15  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/recvfrom.c (recvfrom): Allow ADDR to be NULL.

1999-03-15  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c: Compute rtld_search_dir array size correctly.
	Reported by Yasushi Saito <yasushi@cs.washington.edu>.

1999-03-15  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* manual/libc.texinfo: Undo last change for now.

1999-03-15  Ulrich Drepper  <drepper@cygnus.com>

	* intl/locale.alias: Add entries for Croatian.
	Patch by Tomislav Vujec <tvujec@CARNet.hr>.

1999-03-13  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/unix/bsd/getpt.c (__getpt): Do not use `isatty' to check
	if the opened master pty really is a pty.  `isatty' checks for
	tty-ness and a pty is not a tty.  Return ENOENT instead of ENFILE
	if we are out of pty's.

1999-03-13  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/generic/utmp_file.c (setutent_file): Make sure the just
	opened file is closed on exec.
	* login/utmp_daemon.c (setutent_daemon): Likewise for the just
	opened socket.

1999-03-13  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/llio.texi (File Position Primitive): Reformat @end
	command.  Patch by Bruno Haible <haible@ilog.fr> [PR libc/1020].

1999-03-14  Ulrich Drepper  <drepper@cygnus.com>

	* nscd/nscd_getpw_r.c (nscd_getpw_r): Set `errno' correctly if no
	entry is found.
	* nscd/nscd_getgr_r.c (nscd_getgr_r): Likewise.
	* nscd/nscd_gethst_r.c (nscd_gethst_r): Likewise.

	* locale/programs/localedef.c (main): Initialize `cat' to please
	the compiler.

1999-03-14  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdlookup.c (__hurd_file_name_lookup_retry): Under O_NOFOLLOW,
	check for root-owned symlinks and reject them too.

1999-03-09  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* stdio-common/printf_fphex.c: Move to ...
	* sysdeps/generic/printf_fphex.c: ... here.  Fix exponent of
	extended precision number.
	* sysdeps/m68k/printf_fphex.c: New file.

1999-03-09  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* manual/stdio.texi: Fix typos.

1999-03-09  Ulrich Drepper  <drepper@cygnus.com>

	* version.h (VERSION): Bump to 2.1.1.

1999-03-09  Thorsten Kukuk  <kukuk@suse.de>

	* nis/ypclnt.c: Try only twice to connect to NIS server.

1999-03-09  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdexec.c (_hurd_exec): Add missing `else' in last change.

1999-03-09  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* stdlib/strtod.c (round_and_return): Fix rounding of denormals.
	(DENORM_EXP): New define.  Use it as the exponent for a denormal.
	* stdlib/strtold.c: Moved to ...
	* sysdeps/generic/strtold.c: ... here.
	* sysdeps/m68k/strtold.c: New file.

1999-03-09  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* stdio-common/printf_fphex.c (__printf_fphex): Print no decimal
	point if the precision is zero, even if the mantissa is non-zero.

1999-03-09  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/ioctl.c (__ioctl): Move the marshalling of the
	arguments into the request message buffer inside `send_rpc'
	subfunction.  We must repeat the marshalling when retrying the RPC
	after a SIGTTOU delivery.

	* hurd/ctty-input.c (_hurd_ctty_input): Use early short-circuit code
	path when there is no ctty port.
	* hurd/ctty-output.c (_hurd_ctty_output): Likewise.
	Move sigstate check inside loop so we recheck after handling a signal.

1999-03-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/llio.texi (Open-time Flags): Clarify that O_SHLOCK and
	O_EXLOCK are BSD extensions.
	Reported by Jochen Voss <voss@mathematik.uni-kl.de> [PR libc/985].

1999-03-08  Ulrich Drepper  <drepper@cygnus.com>

	* manual/signal.texi (Termination in Handler): Correct example.
	Install default handler before reraising the signal.
	Patch by Jochen Voss <voss@mathematik.uni-kl.de>.

1999-03-08  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdexec.c (_hurd_exec): Handle ARGV or ENVP parameters being
	null, in which case send an empty string.

1999-03-02  Mark Kettenis  <kettenis@gnu.org>

	* Makerules (LD_FLAGS-c.so): Add -u __register_frame to force the
	backward compatibility EH functions to be linked when using
	gcc-2.8.1.  Patch by Zack Weinberg <zack@rabi.columbia.edu>.

1999-03-08  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Undo last change.
	/dev/pts status may change during runtime.

1999-03-08  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r): Undo last
	change.  /dev/pts status can change during runtime.

1999-03-07  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/svc_tcp.c (readtcp): go into fatal error state if
	poll reports error.
	* nis/nss_nisplus/nisplus-parser.c: Avoid duplicate strlen calls,
	add some more sanity checks.
	* nis/nss_nisplus/nisplus-pwd.c: Include nisplus-parser.h for
	parser prototype.

1999-03-05  Thorsten Kukuk  <kukuk@suse.de>

	* sunrpc/rpc/xdr.h: Add x_getint32/x_putint32 to xdr_ops,
	change XDR_GETINT32/XDR_PUTINT32 to sue new functions.
	* sunrpc/xdr_mem.c: Add xdrmem_getint32, xdrmem_putint32.
	* sunrpc/xdr_rec.c: Add xdrrec_getint32, xdrrec_putint32.
	* sunrpc/xdr_sizeof.c: Add x_putint32, add dummy function
	for x_getint32.
	* sunrpc/xdr_stdio.c: Add xdrstdio_getint32, xdrstdio_putint32.
	* nis/nis_print.c: Fix ctime argument for platforms where
	sizeof (time_t) != sizeof (int).

1999-03-07  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/unix/bsd/clock.c (timeval_to_clock_t): Use
	CLOCKS_PER_SEC instead of CLK_TCK.

1999-03-05  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/ttyname_r.c (__ttyname_r): Remember
	whether /dev/pts is available.
	* sysdeps/unix/sysv/linux/ttyname.c (ttyname): Fix handling of
	dev_pts_available.

	* posix/globtest.sh: Make common_objpfx path absolute and and db2
	and hesiod directory to library path [PR libc/1007].

1999-03-05  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* resolv/inet_addr.c (inet_aton): Don't allow componets >
	255.  Patch by Bruno Haible <haible@ilog.fr> [PR libc/1010].

1999-03-05  Geoff Keating  <geoffk@ozemail.com.au>

	* sysdeps/powerpc/dl-machine.c (__elf_machine_runtime_setup):
	DT_PLTGOT has already been relocated.
	(__elf_machine_fixup_plt): Likewise.
	Minor cleanups.

1999-03-04  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdlookup.c (__hurd_file_name_lookup): Comment fix.

1999-03-03  Ulrich Drepper  <drepper@cygnus.com>

	* wcsmbs/wcsmbsload.c (add_slashes): Rename to norm_add_slashes
	and fold string to uppercase [PR libc/1005].

1999-03-03  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* elf/dl-load.c (lose): Fix return type.

1999-03-03  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/bits/fcntl.h
	[__USE_GNU] (O_NOFOLLOW, O_DIRECTORY): New macros.
	* hurd/hurdlookup.c (__hurd_file_name_lookup): If O_NOFOLLOW is set,
	set O_NOTRANS as well.
	(__hurd_file_name_lookup_retry): At successful end of lookup,
	if O_NOFOLLOW set, io_stat the resultant port and fail with ENOENT if
	it is a translated node not owned by root.
	(__hurd_file_name_lookup): If O_DIRECTORY is set, put a trailing slash
	on the file name passed to LOOKUP.

1999-03-02  Ulrich Drepper  <drepper@cygnus.com>

	* manual/time.texi (High Resolution Timer): Correct computation in
	example.  Reported by jjf@devel.cemsys.com.

1999-03-02  Philip Blundell  <pb@nexus.co.uk>

	* sysdeps/arm/dl-machine.h (elf_machine_runtime_setup): DT_PLTGOT
	entry is already relocated.

1999-03-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* resolv/res_hconf.c (parse_line): Skip empty lines.  Bug reported
	by Marcus Harnisch <marcus@harnisch.isdn.cs.tu-berlin.de>.

1999-03-01  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/i386/sys/ucontext.h (ucontext): Rename field uc_links to
	uc_link which is the right name according to Unix98.
	Reported by Craig Metz [PR libc/1001].
	* sysdeps/arm/sys/ucontext.h (ucontext): Likewise.
	* sysdeps/m68k/sys/ucontext.h (ucontext): Likewise.
	* sysdeps/mips/sys/ucontext.h (ucontext): Likewise.
	* sysdeps/unix/sysv/linux/alpha/sys/ucontext.h (ucontext): Likewise.
	* sysdeps/unix/sysv/linux/i386/sys/ucontext.h (ucontext): Likewise.
	* sysdeps/unix/sysv/linux/powerpc/sys/ucontext.h (ucontext): Likewise.

1999-02-25  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* manual/libc.texinfo: Wrap @top node inside @ifnottex instead of
	@ifinfo.

1999-02-25  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* iconvdata/Makefile: Always include iconv-rules, but disable rule
	to regenerate it if avoid-generated.

	* Makeconfig: Always include sys-dirs, but disable rule to
	regenerate it when avoid-generated.

	* sysdeps/unix/Makefile: Put `ifndef avoid-generated' only around
	rule to generate sysd-syscalls.

	* elf/Makefile (generated): Remove $(objpfx) from names.

1999-02-28  Mark Kettenis  <kettenis@gnu.org>

	* sysdeps/mach/hurd/getsockname.c (getsockname): Set *LEN to the
	actual length if the adress length is smaller than the input
	value.  Change type of *LEN paramater to socklen_t.
	* sysdeps/mach/hurd/getpeername.c (getpeername): Likewise.
	* sysdeps/mach/hurd/accept.c (accept): Likewise.
	* sysdeps/mach/hurd/recvfrom.c (recvfrom): Likewise.
	* sysdeps/mach/hurd/sendto.c (sendto): Change type of ADDR_LEN
	paramater to socklen_t.

1999-02-28  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurd-raise.c (_hurd_raise_signal): Send "poll request"
	msg_sig_post RPC (with SIGNO=0), rather than generating signal (again)
	with the RPC.

1999-02-27  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/getsysstats.c (__get_nprocs_conf, __get_nprocs,
	__get_phys_pages): Cast &HBI to silence warning.

	* hurd/Makefile (routines): Add hurdchdir and hurdfchdir.
	* hurd/hurdchdir.c: New file.
	* hurd/hurdfchdir.c: New file.
	* sysdeps/mach/hurd/chroot.c: Call
	_hurd_change_directory_port_from_name to do the work.
	* sysdeps/mach/hurd/chdir.c: Likewise.
	* sysdeps/mach/hurd/fchdir.c: Call
	_hurd_change_directory_port_from_fd to do the work.
	* hurd/fchroot.c: Likewise.
	* hurd/hurd.h: Declare them.

1999-02-27  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-load.c (lose): Add more comments to explain the `why'.
	(_dl_map_object): Remove redundant test.

1999-02-27  Roland McGrath  <roland@baalperazim.frob.com>

	* hurd/hurdselect.c (_hurd_select): When bailing for bogus fd, don't
	try to _hurd_port_free a lower-numbered descriptor that was not in any
	fd_set.

1999-02-26  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* wcsmbs/wcstold_l.c [__NO_LONG_DOUBLE_MATH]: Add prototype
	declaration for ____wcstod_l_internal.

	* stdlib/strtold.c [__NO_LONG_DOUBLE_MATH]: Include <stdlib.h> for
	__strtod_internal prototype.
	* stdlib/strtold_l.c [__NO_LONG_DOUBLE_MATH]
	(____strtold_l_internal): Add prototype declaration.
	(__strtold_l): Call correct function.

1999-02-24  Ulrich Drepper  <drepper@cygnus.com>

	* elf/elf.h: Add 32bit HPPA definitions.

1999-02-23  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* malloc/malloc.c (mALLOC_SET_STATe): Handle the case where a
	non-checked heap is restored when malloc checking was requested by
	the user.
	(struct malloc_state): Add using_malloc_checking.
	(MALLOC_STATE_VERSION): Increment minor.
	(using_malloc_checking, disallow_malloc_check): New variables.
	(__malloc_check_init): Use them.
	(mALLOC_GET_STATe): Use mALLOc to allocate the malloc_state, so
	that it can the chunk is properly instrumented when malloc
	checking is enabled.  Set the new using_malloc_checking field.
	(malloc_hook_ini): Correct signature when _LIBC is not defined.

1999-02-23  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/unix/sysv/linux/i386/dl-librecon.h
	(DISTINGUISH_LIB_VERSIONS): Don't relocate DT_STRTAB a second
	time.

	* elf/rtld.c (dl_main): Rename paths_initialized to rtld_is_main.
	Don't call elf_get_dynamic_info and _dl_setup_hash a second time
	if ld.so is the main program.

1999-02-23  Ulrich Drepper  <drepper@cygnus.com>

	* stdio-common/vfprintf.c (vfprintf): If precision or width is too
	large for work_buffer, allocate new buffer.
	(printf_unknown): Likewise.  [PR libc/988]

1999-02-22  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/unix/sysv/linux/ttyname.c: Use __xstat and __fxstat
	instead of stat and fstat.
	* sysdeps/unix/sysv/linux/ttyname_r.c: Likewise.

1999-02-23  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* elf/dl-error.c (_dl_signal_cerror): New function.
	(_dl_signal_error): Don't call receiver function.
	* elf/dl-lookup.c (_dl_lookup_symbol): Call _dl_signal_cerror
	instead of _dl_signal_error when reporting references to undefined
	symbols or versions.
	(_dl_lookup_versioned_symbol): Likewise.
	(_dl_lookup_versioned_symbol_skip): Likewise.
	* elf/dl-version.c (match_symbol): Likewise.

	* elf/ldsodefs.h: Declare _dl_signal_cerror.

1999-02-22  Ulrich Drepper  <drepper@cygnus.com>

	* misc/getttyent.c (getttyent): Release lock on stream later to
	also protect global variable zapchar.

	* sysdeps/unix/sysv/linux/clock.c: Don't test return value of
	__times [PR libc/990].

1999-02-21  David S. Miller  <davem@redhat.com>

	* sysdeps/unix/sysv/linux/sparc/sparc32/sigcontextinfo.h: Fix
	parentheses in Feb 2 changes.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigcontextinfo.h: Likewise.

1999-02-21  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/generic/glob.c (glob): Save previous errno.

1999-02-21  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/generic/glob.c (glob): Enlarge buffers for reentrant
	lookup functions if it is too small.

1999-02-20  Ulrich Drepper  <drepper@cygnus.com>

	* elf/dl-deps.c (_dl_map_object_deps): Don't add dummy objects created
	for tracing to the scope lists.
	* elf/do-lookup.h: Remove test for l_opencount == 0 after above change.
	DT_SYMTAB is always available according to ELF spec.

	* elf/dl-lookup.c (_dl_lookup_symbol_skip): Before first do_lookup
	call test whether there is any scope left.
	(_dl_lookup_versioned_symbol_skip): Likewise.

	* elf/Makefile (distribute): Add do-lookup.h.
	* elf/do-lookup.h: New file.  Split out from dl-lookup.c.
	* elf/dl-lookup.c: Move do_lookup function in separate file and
	include the file twice, for handling versioning and without it.

	* sysdeps/i386/dl-machine.h (elf_machine_runtime_setup): DT_PLTGOT
	entry is already relocated.
	* sysdeps/alpha/dl-machine.h (elf_machine_runtime_setup): Likewise.
	* sysdeps/m68k/dl-machine.h (elf_machine_runtime_setup): Likewise.
	* sysdeps/mips/dl-machine.h (elf_machine_runtime_setup): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_runtime_setup):
	Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_runtime_setup):
	Likewise.
	* sysdeps/mips/mips64/dl-machine.h (elf_machine_runtime_setup):
	Likewise.

	* elf/dynamic-link.h (elf_get_dynamic_info): Take new argument with
	load address.  Relocate d_ptr in DT_DTRTAB, DT_SYMTAB, DT_RELA, DT_REL,
	DT_JMPREL, DT_PLTGOT, and DT_VERSYM l_info entry.
	(_ELF_DYNAMIC_DO_RELOC): Take extra argument which specifies whether
	rel and rela relocations can both happen and skip one test if this
	is not possible.
	(ELF_DYNAMIC_DO_RELA, ELF_DYNAMIC_DO_REL): Call _ELF_DYNAMIC_DO_RELOC
	appropriately.
	* elf/dl-addr.c (_dl_addr): DT_SYMTAB and DT_STRTAB entries are
	already relocated.
	* elf/dl-deps.c (_dl_map_object_deps): DT_STRTAB entry is already
	relocated.
	* elf/dl-load.c (_dl_init_paths): DT_STRTAB entry is already relocated.
	(_dl_map_object_from_fd): Call elf_get_dynamic_info with new argument.
	(_dl_map_object): DT_STRTAB entry is already relocated.
	* elf/dl-lookup.c (do_lookup): DT_STRTAB and DT_SYMTAB entries are
	already relocated.
	* elf/dl-reloc.c (_dl_relocate_object): DT_STRTAB entry is already
	relocated.
	* elf/dl-runtime.c (fixup): DT_SYMTAB, DT_STRTAB, DT_JMPREL, and
	DT_VERSYM entries are already relocated.
	(profile_fixup): Likewise.
	* elf/dl-version.c: Rename VERSTAG macro into VERSYMIDX.  Replace
	all users.
	(match_symbol): DT_STRTAB entry is already relocated.
	(_dl_check_map_versions): Likewise.  Also fo DT_VERSYM.
	* elf/do-rel.h (elf_dynamic_do_rel): reladdr is now assumed to be
	relocated already.  DT_SYMTAB and DT_VERSYM entries are also relocated.
	* elf/rtld.c (_dl_start): Pass extra argument to elf_get_dynamic_info.
	(find_needed): DT_STRTAB entry is already relocated.
	(dl_main): Pass extra argument to elf_get_dynamic_info.
	DT_STRTAB entry is already relocated.
	* sysdeps/alpha/dl-machine.h (elf_machine_fixup_plt): DT_JMPREL and
	DT_PLTGOT entries are already relocated.
	(elf_machine_rela): Likewise for DT_SYMTAB.
	* sysdeps/arm/dl-machine.h (elf_machine_rel): DT_STRTAB is already
	relocated.
	* sysdeps/i386/dl-machine.h (elf_machine_rel): Likewise.
	* sysdeps/m68k/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/sparc/sparc32/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/sparc/sparc64/dl-machine.h (elf_machine_rela): Likewise.
	* sysdeps/powerpc/dl-machine.c (__process_machine_rela): Likewise.
	* sysdeps/mips/dl-machine.h (elf_machine_got_rel): Likewise.
	(elf_machine_got_rel): Likewise for DT_SYMTAB and DT_STRTAB.
	* sysdeps/mips/mips64/dl-machine.h: Likewise.

	* grp/initgroups.c (initgroups): If function in current module was
	successful don't stop but continue to process to get all the groups.

	* elf/dl-load.c (_dl_map_object_from_fd): Use global
	_dl_pf_to_proot array to convert p_flags value.
	* elf/dl-reloc.c (_dl_relocate_object): Likewise.

	* elf/dynamic-link.h (elf_get_dynamic_info): Use memset instead of
	loop to clear `info'.

	* sysdeps/i386/i486/bits/string.h: If fill byte is constant let gcc
	do the work and don't use inline assembler.

1999-02-19  Ulrich Drepper  <drepper@cygnus.com>

	* elf/ldsodefs.h (_dl_signal_error): Mark as __noreturn__.
	* elf/dl-load.c (lose): Make it a function at the toplevel, mark as
	noreturn, and prevent it from being inlined.
	Define LOSE appropriately.
	(_dl_map_object_from_fd): Compare all bytes in e_ident at once.
	Optimize decoding of p_flags for certain platforms.

1999-02-19  Philip Blundell  <pb@nexus.co.uk>

	* Makeconfig (link-libc): When doing a static link, make sure that
	libgcc.a is included both before and after libc.a.

1999-02-18  Thorsten Kukuk  <kukuk@suse.de>

	* nis/nss_compat/compat-spwd.c: Fix handling of default values for
	sp_warn, sp_inact, sp_expire and sp_flag.

1999-02-18  Ulrich Drepper  <drepper@cygnus.com>

	* elf/link.h (link_map): Add l_dev and l_ino.
	* elf/dl-load.c (_dl_map_object_from_fd): Test dev/ino of newly
	loaded shared object with all loaded objects.  Initialize l_ino
	and l_dev in case it's new.
	* elf/rtld.c (dl_main): Explain situation is l_dev/l_ino with main
	object.
	* elf/Makefile: Compile and run new test.
	* elf/multiload.c: New file.

	* nss/nsswitch.h (service_user): Change name field from const char *
	to char[0].
	(name_database_entry): Likewise.
	* nss/nsswitch.c (nss_parse_service_list): Adjust memory allocation
	for change of `service_user'.
	(nss_getline): Adjust memory allocation for change of
	`name_database_entry'.

	* catgets/catgets.c: Correctly handle NLSPATH from environment
	[PR libc/980].

	* io/Makefile (routines): Add lock64.
	* io/Versions: Add lockf64 for GLIBC_2.1.1.
	* sysdeps/generic/lockf64.c: New file.

1999-02-16  Ulrich Drepper  <drepper@cygnus.com>

	* string/bits/string2.h: Only use strncmp optimization if count
	argument is constant.

1999-02-16  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/revoke.c: New file.

1999-02-16  Ulrich Drepper  <drepper@cygnus.com>

	* wctype/wctype.h (_ISwbit): Cast result of shift operations to
	int to avoid warning about `ISO C restricts enumerator values to
	range of `int''.

1999-02-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/dlfcn.h: Fix typo.
	* sysdeps/generic/bits/dlfcn.h: Likewise.
	* sysdeps/mips/bits/dlfcn.h: Likewise.

1999-02-16  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/i386/i486/bits/string.h (memcmp): Correctly set flags
	for the case N == 0.

	* db2/Makefile (distribute): Add LICENSE.

1999-02-03  Jeff Bailey  <jbailey@nisa.net>

	* sysdeps/unix/make_errlist.c: Add i18n and copyright to
	generated files.

	* sysdeps/unix/sysv/sysv4/solaris2/sparc/errlist.c: Fix typo.

1999-02-16  Ulrich Drepper  <drepper@cygnus.com>

	* time/mktime.c: Use ISO C form for function definitions and
	remove unnecessary prototypes.

	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Fix typo in last change.

	* time/time.h: Avoid unneccesary #ifdef.

1999-02-15  Geoff Keating  <geoffk@ozemail.com.au>

	* stdio-common/_itoa.c (_itoa): Correct parameters to
	udiv_qrnnd_preinv.

1999-02-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* misc/sys/cdefs.h: Undefine __PMT since it might be defined
	before (e.g. in glob.h).
	Closes PR libc/959.

1999-02-16  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/mips/fpu_control.h: Fix typo.
	Patch by Sylvain Pion <Sylvain.Pion@sophia.inria.fr>.
	Remove __setfpucw.

1999-02-10  Roland McGrath  <roland@baalperazim.frob.com>

	* sysdeps/mach/hurd/pipe.c (__pipe): Don't call __socket_shutdown on
	the "unused" ends of the sockets.  Let pipes be bidirectional.

1999-02-15  Ulrich Drepper  <drepper@cygnus.com>

	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Correct test for
	invalid ai_flags.

1999-02-15  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* manual/llio.texi (Waiting for I/O): Correct meaning.  Patch by
	Jochen Voss <voss@mathematik.uni-kl.de> [PR libc/969].

	* manual/setjmp.texi (Non-Local Exits and Signals): Fix
	typo.  Patch by Jochen Voss <voss@mathematik.uni-kl.de> [PR libc/970].

1999-02-15  Ulrich Drepper  <drepper@cygnus.com>

	* string/Versions: Add __strverscmp to GLIBC_2.1.1.

1999-02-13  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* misc/syslog.c (vsyslog): Remember errno for %m format.  Fix
	check for priority mask.

1999-02-14  Ulrich Drepper  <drepper@cygnus.com>

	* resolv/netdb.h (AI_NUMERICHOST): Change to 4.
	Reported by Craig Metz <cmetz@inner.net> .

1999-02-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* stdio-common/Makefile (tests): tllformat added.

	* stdio-common/tllformat.c: New program, based on tiformat.c with
	examples from Franz Sirl <Franz.Sirl-kernel@lauterbach.com>.

1999-02-14  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* posix/test-vfork.c: Fix exit status test.

1999-02-14  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sysdeps/unix/sysv/linux/sa_len.c (__libc_sa_len): Add some
	missing cases.  Reported by Craig Metz <cmetz@inner.net> [PR libc/964].

1999-02-14  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/m68k/fpu/s_modf.c: Optimized by using __m81_test instead
	of separare explicit comparisons.

1999-02-11  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* sysdeps/wordsize-64/inttypes.h: Always define ldiv_t if not yet
	defined.

	* sysdeps/wordsize-32/inttypes.h: Always define lldiv_t if not yet
	defined.

1999-02-09  Ulrich Drepper  <drepper@cygnus.com>

	* po/el.po: Update from translation team.

1999-02-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* intl/locale.alias: Fix slovenian entry [PR libc/948].

1999-02-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* elf/sprof.c: assert.h isn't used anymore, remove inclusion.
	* inet/ruserpass.c: Likewise.
	* locale/programs/stringtrans.c: Likewise.
	* locale/programs/localedef.c: Likewise.
	* nscd/grpcache.c: Likewise.
	* nss/nss_files/files-XXX.c: Likewise.
	* stdlib/canonicalize.c: Likewise.
	* sysdeps/posix/sigwait.c: Likewise.

1999-02-09  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* sunrpc/pmap_rmt.c (clnt_broadcast): We need 32 bit comparison
	even on 64 bit platforms.

	* sunrpc/clnt_tcp.c (clnttcp_call): Likewise.
	Patch by Loic Prylli <Loic.Prylli@ens-lyon.fr>.

1999-02-09  Ulrich Drepper  <drepper@cygnus.com>

	* intl/dcgettext.c: Include locale.h is available.

1999-02-08  Ulrich Drepper  <drepper@cygnus.com>

	* po/nl.po: Update from translation team.

	* sysdeps/libm-i387/s_asinhf.S: Correct computing absolute value.

	* Makefile: Allow calling goals for po subdir.

	* sysdeps/unix/sysv/linux/alpha/bits/signum.h: Add missing RT
	signal definitions.

	* po/el.po: New file.

1999-02-07  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* elf/dl-load.c (_dl_map_object_from_fd): Replace magic constant
	when processing DT_SYMBOLIC objects.

1999-02-07  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>

	* elf/dl-load.c (_dl_map_object_from_fd): When looking for the
	program headers without PT_PHDR only require that they are
	contained within one of the loaded segments.  Don't use assert,
	since that would be a bug in the object, not the dynamic linker.

1999-02-08  Richard Henderson  <rth@cygnus.com>

	* sysdeps/alpha/dl-machine.h (TRAMPOLINE_TEMPLATE): Save and
	restore all call-clobbered fp regs.

1999-02-08  Ulrich Drepper  <drepper@cygnus.com>

	* po/cs.po: New file.

	* resolv/res_hconf.c (_res_hconf_init): Don't use ENV_HOSTCONF for
	SUID binaries.

1999-02-07  Ulrich Drepper  <drepper@cygnus.com>

	* signal/signal.h: Don't declare __libc_allocate_rtsig.
	* include/signal.h: Declare __libc_allocate_rtsig here.

	* elf/dl-lookup.c: Increment _dl_num_relocations in the four entry
	point functions, not do_lookup since the later can be called more
	than once.

1999-02-03  Jakub Jelinek  <jj@ultra.linux.cz>

	* sysdeps/generic/segfault.c: Add ADVANCE_STACK_FRAME
	macro, so that architectures which need to add some special
	offset to stack pointer can share this file.

	* sysdeps/unix/sysv/linux/sparc/sparc32/sigcontextinfo.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc32/register-dump.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sigcontextinfo.h: New file.
	* sysdeps/unix/sysv/linux/sparc/sparc64/register-dump.h: New file.

	* sysdeps/unix/sysv/linux/sparc/sparc32/bits/mman.h: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/bits/mman.h: Remove.
	* sysdeps/unix/sysv/linux/sparc/bits/mman.h: New file - common
	between sparc32 and sparc64.

	* sysdeps/unix/sysv/linux/sparc/sparc32/vfork.S: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/vfork.S: Remove.
	* sysdeps/unix/sysv/linux/sparc/vfork.S: New file - common
	between sparc32 and sparc64.

	* sysdeps/unix/sysv/linux/sparc/sparc32/fork.S: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/fork.S: Remove.
	* sysdeps/unix/sysv/linux/sparc/fork.S: New file - common
	between sparc32 and sparc64.

	* sysdeps/unix/sysv/linux/sparc/sparc32/sysdep.S: Remove.
	* sysdeps/unix/sysv/linux/sparc/sparc64/sysdep.S: Remove.
	* sysdeps/unix/sysv/linux/sparc/sysdep.S: New file - common
	between sparc32 and sparc64.

1999-02-07  Ulrich Drepper  <drepper@cygnus.com>

	* Versions.def: New version GLIBC_2.1.1 for libc.
	* stdlib/Versions: Add _Exit, imaxdiv, and imaxdiv to GLIBC_2.1.1.
	* stdlib/labs.c: Moved to...
	* sysdeps/generic/labs.c: ...here.
	* stdlib/llabs.c: Moved to...
	* sysdeps/generic/llabs.c: ...here.
	* stdlib/stdlib.h: Allow definition of ldiv_t and lldiv_t in other
	header.  Declare _Exit.
	* sysdeps/generic/_exit.c: Add alias _Exit.
	* sysdeps/mach/hurd/_exit.c: Likewise.
	* sysdeps/standalone/i386/force_cpu386/_exit.c: Likewise.
	* sysdeps/standalone/i960/nindy960/_exit.c: Likewise.
	* sysdeps/standalone/m68k/m68020/mvme136/_exit.c: Likewise.
	* sysdeps/unix/_exit.c: Likewise.
	* sysdeps/wordsize-32/inttypes.h: Define imaxdiv_t and declare
	imaxdiv and imaxabs.  Declare lldiv_t if necessary.
	* sysdeps/wordsize-64/inttypes.h: Likewise.
	* sysdeps/wordsize-32/llabs.c: New file.
	* sysdeps/wordsize-32/lldiv.c: New file.
	* sysdeps/wordsize-64/labs.c: New file.
	* sysdeps/wordsize-64/ldiv.c: New file.
	* manual/arith.texi: Document imaxabs, imaxdiv_t, and imaxdiv.
	* manual/startup.texi: Document _Exit.

1999-02-07  Andreas Jaeger  <aj@arthur.rhein-neckar.de>

	* nscd/cache.c: Include <arpa/inet.h> for inet_ntop.

1999-02-06  Ulrich Drepper  <drepper@cygnus.com>

	* Versions.def: Add versions for ld.so.
	* csu/Versions: Remove __libc_stack_end here.
	* elf/Versions: Split libc definitions in libc and ld.so definitions.
	* elf/Makefile (ld-map): Change to ld.so.map.
	* scripts/versions.awk: Recognize dot in library names.

	* ctype/ctype.h: Remove definitions of __tolower and __toupper.
	Don't use __tolower and __toupper in inline functions.
	Add optimizing macros for tolower and toupper.
	* ctype/ctype-extn.c (_tolower): Don't use __tolower.
	(_toupper): Don't use __toupper.
	* ctype/ctype.c (tolower): Don't use __tolower.
	(toupper): Don't use toupper.

	* nscd/cache.c (prune_cache): Correct printing of debugging messages.

	* resolv/Versions (libresolv): Export __ns_name_unpack and
	__ns_name_ntop.
	* resolv/res_comp.c: Rename ns_name_unpack to __ns_name_unpack and
	make it global.  Change all users.  Similar for ns_name_ntop.
	* resolv/nss_dns/dns-host.c: Don't use dn_expand when extracting in
	user-provided buffer.  Use __ns_name_unpack and __ns_name_ntop
	directly to detect too small buffer.
	* resolv/nss_dns/dns-network.c: Likewise.

	* stdio-common/Makefile (tests): Add scanf12.
	* stdio-common/scanf12.c: New file.
	* stdio-common/scanf12.input: New file.
	* stdio-common/vfscanf.c (__vfscanf): Handle +/- at beginning of
	floating-point correctly if the number is invalid.

	* stdio-common/vfscanf.c: Don't use non-reentrant multibyte conversion
	functions.
	* stdio-common/printf_fp.c: Likewise.
	* stdio-common/printf_fphex.c: Likewise.
	* stdio-common/vfprintf.c: Likewise.


See ChangeLog.9 for earlier changes.
