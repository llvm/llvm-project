def is_libclang_loadable():
    try:
        sys.path.append(os.path.join(config.clang_src_dir, "bindings/python"))
        from clang.cindex import Config
        conf = Config()
        Config.set_library_path(config.clang_lib_dir)
        conf.lib
        return True
    except Exception as e:
        # Benign error modes.
        if "wrong ELF class: ELFCLASS32" in str(e):
            return False
        elif "No such file or directory" in str(e):
            return False
        # Unknown error modes.
        else:
            return True

if is_libclang_loadable():
    config.available_features.add("libclang-loadable")

config.suffixes = ['.sh']
