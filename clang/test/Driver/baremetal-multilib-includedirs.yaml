# REQUIRES: shell
# UNSUPPORTED: system-windows

# This test demonstrates the new "IncludeDirs" field.
# This field allows specifying include directories through
# multilib.yaml configuration. When this field is present
# it is appended to the sysroot during header path
# resolution ignoring the default bare-metal assumptions.

# RUN: %clang --multi-lib-config=%s -no-canonical-prefixes -x c++ %s -### -o %t.out 2>&1 \
# RUN:     --target=thumbv7m-none-eabi -mfloat-abi=soft --sysroot= \
# RUN:   | FileCheck %s
# CHECK:      "-cc1" "-triple" "thumbv7m-unknown-none-eabi"
# CHECK-SAME: "-internal-isystem" "[[SYSROOT:[^"]*]]/bin/../lib/clang-runtimes/include/c++/v1"
# CHECK-SAME: "-internal-isystem" "[[SYSROOT]]/bin/../lib/clang-runtimes/include-libunwind/c++/v1"
# CHECK-SAME: "-internal-isystem" "[[SYSROOT]]/bin/../lib/clang-runtimes/soft/include/c++/v1"
# CHECK-SAME: "-internal-isystem" "[[SYSROOT]]/bin/../lib/clang-runtimes/include"
# CHECK-SAME: "-internal-isystem" "[[SYSROOT]]/bin/../lib/clang-runtimes/include-libunwind"
# CHECK-SAME: "-internal-isystem" "[[SYSROOT]]/bin/../lib/clang-runtimes/soft/include"

---
MultilibVersion: 1.0
Variants:
- Dir: soft
  Flags:
    - -mfloat-abi=soft
  IncludeDirs:
    - include
    - include-libunwind
    - soft/include

...
