import lit.util

if any(target in config.target_triple for target in ("aix", "zos")):
    config.unsupported = True

# Check for lld without calling use_lld() to avoid registering tool substitutions
# that interfere with other test suites (e.g., Driver tests).
lld_path = getattr(config, "lld_tools_dir", None) or getattr(config, "llvm_tools_dir", None)
if lld_path and lit.util.which("ld.lld", lld_path):
    config.available_features.add("lld")
