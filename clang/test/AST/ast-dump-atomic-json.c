// RUN: %clang_cc1 -triple x86_64-unknown-unknown -Wno-unused-value -ast-dump=json %s | FileCheck %s

int foo(int * ptr) {
  return __atomic_load_n(ptr, __ATOMIC_SEQ_CST);
}

// NOTE: CHECK lines have been autogenerated by gen_ast_dump_json_test.py
// using --filters=AtomicExpr


// CHECK-NOT: {{^}}Dumping
// CHECK:  "kind": "AtomicExpr",
// CHECK-NEXT:  "range": {
// CHECK-NEXT:   "begin": {
// CHECK-NEXT:    "offset": 132,
// CHECK-NEXT:    "col": 10,
// CHECK-NEXT:    "tokLen": 15
// CHECK-NEXT:   },
// CHECK-NEXT:   "end": {
// CHECK-NEXT:    "offset": 169,
// CHECK-NEXT:    "col": 47,
// CHECK-NEXT:    "tokLen": 1
// CHECK-NEXT:   }
// CHECK-NEXT:  },
// CHECK-NEXT:  "type": {
// CHECK-NEXT:   "qualType": "int"
// CHECK-NEXT:  },
// CHECK-NEXT:  "valueCategory": "prvalue",
// CHECK-NEXT:  "name": "__atomic_load_n",
// CHECK-NEXT:  "inner": [
// CHECK-NEXT:   {
// CHECK-NEXT:    "id": "0x{{.*}}",
// CHECK-NEXT:    "kind": "ImplicitCastExpr",
// CHECK-NEXT:    "range": {
// CHECK-NEXT:     "begin": {
// CHECK-NEXT:      "offset": 148,
// CHECK-NEXT:      "col": 26,
// CHECK-NEXT:      "tokLen": 3
// CHECK-NEXT:     },
// CHECK-NEXT:     "end": {
// CHECK-NEXT:      "offset": 148,
// CHECK-NEXT:      "col": 26,
// CHECK-NEXT:      "tokLen": 3
// CHECK-NEXT:     }
// CHECK-NEXT:    },
// CHECK-NEXT:    "type": {
// CHECK-NEXT:     "qualType": "int *"
// CHECK-NEXT:    },
// CHECK-NEXT:    "valueCategory": "prvalue",
// CHECK-NEXT:    "castKind": "LValueToRValue",
// CHECK-NEXT:    "inner": [
// CHECK-NEXT:     {
// CHECK-NEXT:      "id": "0x{{.*}}",
// CHECK-NEXT:      "kind": "DeclRefExpr",
// CHECK-NEXT:      "range": {
// CHECK-NEXT:       "begin": {
// CHECK-NEXT:        "offset": 148,
// CHECK-NEXT:        "col": 26,
// CHECK-NEXT:        "tokLen": 3
// CHECK-NEXT:       },
// CHECK-NEXT:       "end": {
// CHECK-NEXT:        "offset": 148,
// CHECK-NEXT:        "col": 26,
// CHECK-NEXT:        "tokLen": 3
// CHECK-NEXT:       }
// CHECK-NEXT:      },
// CHECK-NEXT:      "type": {
// CHECK-NEXT:       "qualType": "int *"
// CHECK-NEXT:      },
// CHECK-NEXT:      "valueCategory": "lvalue",
// CHECK-NEXT:      "referencedDecl": {
// CHECK-NEXT:       "id": "0x{{.*}}",
// CHECK-NEXT:       "kind": "ParmVarDecl",
// CHECK-NEXT:       "name": "ptr",
// CHECK-NEXT:       "type": {
// CHECK-NEXT:        "qualType": "int *"
// CHECK-NEXT:       }
// CHECK-NEXT:      }
// CHECK-NEXT:     }
// CHECK-NEXT:    ]
// CHECK-NEXT:   },
// CHECK-NEXT:   {
// CHECK-NEXT:    "id": "0x{{.*}}",
// CHECK-NEXT:    "kind": "IntegerLiteral",
// CHECK-NEXT:    "range": {
// CHECK-NEXT:     "begin": {
// CHECK-NEXT:      "spellingLoc": {
// CHECK-NEXT:       "offset": 417,
// CHECK-NEXT:       "file": "<built-in>",
// CHECK-NEXT:       "line": 13,
// CHECK-NEXT:       "presumedLine": 12,
// CHECK-NEXT:       "col": 26,
// CHECK-NEXT:       "tokLen": 1
// CHECK-NEXT:      },
// CHECK-NEXT:      "expansionLoc": {
// CHECK-NEXT:       "offset": 153,
// CHECK-NEXT:       "file": "{{.*}}",
// CHECK-NEXT:       "line": 4,
// CHECK-NEXT:       "col": 31,
// CHECK-NEXT:       "tokLen": 16
// CHECK-NEXT:      }
// CHECK-NEXT:     },
// CHECK-NEXT:     "end": {
// CHECK-NEXT:      "spellingLoc": {
// CHECK-NEXT:       "offset": 417,
// CHECK-NEXT:       "file": "<built-in>",
// CHECK-NEXT:       "line": 13,
// CHECK-NEXT:       "presumedLine": 12,
// CHECK-NEXT:       "col": 26,
// CHECK-NEXT:       "tokLen": 1
// CHECK-NEXT:      },
// CHECK-NEXT:      "expansionLoc": {
// CHECK-NEXT:       "offset": 153,
// CHECK-NEXT:       "file": "{{.*}}",
// CHECK-NEXT:       "line": 4,
// CHECK-NEXT:       "col": 31,
// CHECK-NEXT:       "tokLen": 16
// CHECK-NEXT:      }
// CHECK-NEXT:     }
// CHECK-NEXT:    },
// CHECK-NEXT:    "type": {
// CHECK-NEXT:     "qualType": "int"
// CHECK-NEXT:    },
// CHECK-NEXT:    "valueCategory": "prvalue",
// CHECK-NEXT:    "value": "5"
// CHECK-NEXT:   }
// CHECK-NEXT:  ]
// CHECK-NEXT: }
