// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py UTC_ARGS: --check-globals --prefix-filecheck-ir-name _ --global-value-regex ".offload_maptypes.*" ".offload_sizes.*" --global-hex-value-regex ".offload_maptypes.*"
// expected-no-diagnostics
#ifndef HEADER
#define HEADER

// powerpc64le-ibm-linux-gnu

// RUN: %clang_cc1 -verify -fopenmp -fopenmp-extensions \
// RUN:     -fopenmp-targets=powerpc64le-ibm-linux-gnu -x c++ \
// RUN:     -triple powerpc64le-unknown-unknown -emit-llvm %s -o - | \
// RUN:   FileCheck %s --check-prefixes=CHECK-PPC64LE
// RUN: %clang_cc1 -fopenmp -fopenmp-extensions \
// RUN:     -fopenmp-targets=powerpc64le-ibm-linux-gnu -x c++ -std=c++11 \
// RUN:     -triple powerpc64le-unknown-unknown -emit-pch -o %t %s
// RUN: %clang_cc1 -fopenmp -fopenmp-extensions \
// RUN:     -fopenmp-targets=powerpc64le-ibm-linux-gnu -x c++ \
// RUN:     -triple powerpc64le-unknown-unknown -std=c++11 -include-pch %t \
// RUN:     -verify %s -emit-llvm -o - | \
// RUN:   FileCheck %s --check-prefixes=CHECK-PPC64LE

// i386-pc-linux-gnu

// RUN: %clang_cc1 -verify -fopenmp -fopenmp-extensions \
// RUN:     -fopenmp-targets=i386-pc-linux-gnu -x c++ \
// RUN:     -triple i386-unknown-unknown -emit-llvm %s -o - | \
// RUN:   FileCheck %s --check-prefixes=CHECK-I386
// RUN: %clang_cc1 -fopenmp -fopenmp-extensions \
// RUN:     -fopenmp-targets=i386-pc-linux-gnu -x c++ -std=c++11 \
// RUN:     -triple i386-unknown-unknown -emit-pch -o %t %s
// RUN: %clang_cc1 -fopenmp -fopenmp-extensions \
// RUN:     -fopenmp-targets=i386-pc-linux-gnu -x c++ \
// RUN:     -triple i386-unknown-unknown -std=c++11 -include-pch %t -verify %s \
// RUN:     -emit-llvm -o - | \
// RUN:   FileCheck %s --check-prefixes=CHECK-I386

struct S1 {
  int i;
};
struct S2 {
  S1 s;
  struct S2 *ps;
};

// Map flags used in @.offload_maptypes* below:
//
//   TO          = 0x1
//   FROM        = 0x2
//   ALWAYS      = 0x4
//   PTR_AND_OBJ = 0x10
//   CLOSE       = 0x400
//   OMPX_HOLD   = 0x2000
//   ATTACH      = 0x4000
//   MEMBER_OF_1 = 0x1000000000000
//   MEMBER_OF_8 = 0x8000000000000

//.
// CHECK-PPC64LE: @.offload_sizes = private unnamed_addr constant [1 x i64] [i64 20]
// CHECK-PPC64LE: @.offload_maptypes = private unnamed_addr constant [1 x i64] [i64 [[#0x2001]]]
// CHECK-PPC64LE: @.offload_sizes.1 = private unnamed_addr constant [1 x i64] [i64 20]
// CHECK-PPC64LE: @.offload_maptypes.2 = private unnamed_addr constant [1 x i64] [i64 [[#0x2405]]]
// CHECK-PPC64LE: @.offload_sizes.3 = private unnamed_addr constant [1 x i64] [i64 4]
// CHECK-PPC64LE: @.offload_maptypes.4 = private unnamed_addr constant [1 x i64] [i64 [[#0x2003]]]
// CHECK-PPC64LE: @.offload_sizes.5 = private unnamed_addr constant [9 x i64] [i64 4, i64 8, i64 4, i64 8, i64 4, i64 4, i64 8, i64 4, i64 8]
// CHECK-PPC64LE: @.offload_maptypes.6 = private unnamed_addr constant [9 x i64] [i64 [[#0x3]], i64 [[#0x4000]], i64 [[#0x2003]], i64 [[#0x4000]], i64 [[#0x3]], i64 [[#0x2003]], i64 [[#0x4000]], i64 [[#0x3]], i64 [[#0x4000]]]
//.
// CHECK-I386: @.offload_sizes = private unnamed_addr constant [1 x i64] [i64 20]
// CHECK-I386: @.offload_maptypes = private unnamed_addr constant [1 x i64] [i64 [[#0x2001]]]
// CHECK-I386: @.offload_sizes.1 = private unnamed_addr constant [1 x i64] [i64 20]
// CHECK-I386: @.offload_maptypes.2 = private unnamed_addr constant [1 x i64] [i64 [[#0x2405]]]
// CHECK-I386: @.offload_sizes.3 = private unnamed_addr constant [1 x i64] [i64 4]
// CHECK-I386: @.offload_maptypes.4 = private unnamed_addr constant [1 x i64] [i64 [[#0x2003]]]
// CHECK-I386: @.offload_sizes.5 = private unnamed_addr constant [9 x i64] [i64 4, i64 4, i64 4, i64 4, i64 4, i64 4, i64 4, i64 4, i64 4]
// CHECK-I386: @.offload_maptypes.6 = private unnamed_addr constant [9 x i64] [i64 [[#0x3]], i64 [[#0x4000]], i64 [[#0x2003]], i64 [[#0x4000]], i64 [[#0x3]], i64 [[#0x2003]], i64 [[#0x4000]], i64 [[#0x3]], i64 [[#0x4000]]]
//.
// CHECK-PPC64LE-LABEL: @_Z3fooi(
// CHECK-PPC64LE-NEXT:  entry:
// CHECK-PPC64LE-NEXT:    [[ARG_ADDR:%.*]] = alloca i32, align 4
// CHECK-PPC64LE-NEXT:    [[LB:%.*]] = alloca [5 x float], align 4
// CHECK-PPC64LE-NEXT:    [[PS1:%.*]] = alloca ptr, align 8
// CHECK-PPC64LE-NEXT:    [[PS2:%.*]] = alloca ptr, align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_BASEPTRS:%.*]] = alloca [1 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_PTRS:%.*]] = alloca [1 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_MAPPERS:%.*]] = alloca [1 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_BASEPTRS1:%.*]] = alloca [1 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_PTRS2:%.*]] = alloca [1 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_MAPPERS3:%.*]] = alloca [1 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_BASEPTRS5:%.*]] = alloca [1 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_PTRS6:%.*]] = alloca [1 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_MAPPERS7:%.*]] = alloca [1 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_BASEPTRS23:%.*]] = alloca [9 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_PTRS24:%.*]] = alloca [9 x ptr], align 8
// CHECK-PPC64LE-NEXT:    [[DOTOFFLOAD_MAPPERS25:%.*]] = alloca [9 x ptr], align 8
// CHECK-PPC64LE-NEXT:    store i32 [[ARG:%.*]], ptr [[ARG_ADDR]], align 4
// CHECK-PPC64LE-NEXT:    [[TMP0:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_BASEPTRS]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    store ptr [[LB]], ptr [[TMP0]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP1:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_PTRS]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    store ptr [[LB]], ptr [[TMP1]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP2:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_MAPPERS]], i64 0, i64 0
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP2]], align 8
// CHECK-PPC64LE-NEXT:    call void @__tgt_target_data_begin_mapper(ptr @[[GLOB1:[0-9]+]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS]], ptr [[DOTOFFLOAD_PTRS]], ptr @.offload_sizes, ptr @.offload_maptypes, ptr null, ptr null)
// CHECK-PPC64LE-NEXT:    [[TMP3:%.*]] = load i32, ptr [[ARG_ADDR]], align 4
// CHECK-PPC64LE-NEXT:    [[INC:%.*]] = add nsw i32 [[TMP3]], 1
// CHECK-PPC64LE-NEXT:    store i32 [[INC]], ptr [[ARG_ADDR]], align 4
// CHECK-PPC64LE-NEXT:    call void @__tgt_target_data_end_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS]], ptr [[DOTOFFLOAD_PTRS]], ptr @.offload_sizes, ptr @.offload_maptypes, ptr null, ptr null)
// CHECK-PPC64LE-NEXT:    [[TMP4:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_BASEPTRS1]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    store ptr [[LB]], ptr [[TMP4]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_PTRS2]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    store ptr [[LB]], ptr [[TMP5]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP6:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_MAPPERS3]], i64 0, i64 0
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP6]], align 8
// CHECK-PPC64LE-NEXT:    call void @__tgt_target_data_begin_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS1]], ptr [[DOTOFFLOAD_PTRS2]], ptr @.offload_sizes.1, ptr @.offload_maptypes.2, ptr null, ptr null)
// CHECK-PPC64LE-NEXT:    [[TMP7:%.*]] = load i32, ptr [[ARG_ADDR]], align 4
// CHECK-PPC64LE-NEXT:    [[INC4:%.*]] = add nsw i32 [[TMP7]], 1
// CHECK-PPC64LE-NEXT:    store i32 [[INC4]], ptr [[ARG_ADDR]], align 4
// CHECK-PPC64LE-NEXT:    call void @__tgt_target_data_end_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS1]], ptr [[DOTOFFLOAD_PTRS2]], ptr @.offload_sizes.1, ptr @.offload_maptypes.2, ptr null, ptr null)
// CHECK-PPC64LE-NEXT:    [[TMP8:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_BASEPTRS5]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    store ptr [[ARG_ADDR]], ptr [[TMP8]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP9:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_PTRS6]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    store ptr [[ARG_ADDR]], ptr [[TMP9]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP10:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_MAPPERS7]], i64 0, i64 0
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP10]], align 8
// CHECK-PPC64LE-NEXT:    call void @__tgt_target_data_begin_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS5]], ptr [[DOTOFFLOAD_PTRS6]], ptr @.offload_sizes.3, ptr @.offload_maptypes.4, ptr null, ptr null)
// CHECK-PPC64LE-NEXT:    [[TMP11:%.*]] = load i32, ptr [[ARG_ADDR]], align 4
// CHECK-PPC64LE-NEXT:    [[INC8:%.*]] = add nsw i32 [[TMP11]], 1
// CHECK-PPC64LE-NEXT:    store i32 [[INC8]], ptr [[ARG_ADDR]], align 4
// CHECK-PPC64LE-NEXT:    call void @__tgt_target_data_end_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS5]], ptr [[DOTOFFLOAD_PTRS6]], ptr @.offload_sizes.3, ptr @.offload_maptypes.4, ptr null, ptr null)
// CHECK-PPC64LE-NEXT:    [[TMP12:%.*]] = load ptr, ptr [[PS1]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP13:%.*]] = load ptr, ptr [[PS1]], align 8
// CHECK-PPC64LE-NEXT:    [[S:%.*]] = getelementptr inbounds nuw [[STRUCT_S2:%.*]], ptr [[TMP13]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    [[TMP14:%.*]] = load ptr, ptr [[PS1]], align 8
// CHECK-PPC64LE-NEXT:    [[PS:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP14]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP15:%.*]] = load ptr, ptr [[PS]], align 8
// CHECK-PPC64LE-NEXT:    [[PS9:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP15]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP16:%.*]] = load ptr, ptr [[PS9]], align 8
// CHECK-PPC64LE-NEXT:    [[PS10:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP16]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP17:%.*]] = load ptr, ptr [[PS10]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP18:%.*]] = load ptr, ptr [[PS1]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP19:%.*]] = load ptr, ptr [[PS1]], align 8
// CHECK-PPC64LE-NEXT:    [[PS11:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP19]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP20:%.*]] = load ptr, ptr [[PS11]], align 8
// CHECK-PPC64LE-NEXT:    [[PS12:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP20]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP21:%.*]] = load ptr, ptr [[PS12]], align 8
// CHECK-PPC64LE-NEXT:    [[PS13:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP21]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP22:%.*]] = load ptr, ptr [[PS13]], align 8
// CHECK-PPC64LE-NEXT:    [[S14:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP22]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    [[TMP23:%.*]] = load ptr, ptr [[PS2]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP24:%.*]] = load ptr, ptr [[PS2]], align 8
// CHECK-PPC64LE-NEXT:    [[S15:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP24]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    [[TMP25:%.*]] = load ptr, ptr [[PS2]], align 8
// CHECK-PPC64LE-NEXT:    [[PS16:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP25]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP26:%.*]] = load ptr, ptr [[PS16]], align 8
// CHECK-PPC64LE-NEXT:    [[PS17:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP26]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP27:%.*]] = load ptr, ptr [[PS17]], align 8
// CHECK-PPC64LE-NEXT:    [[PS18:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP27]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP28:%.*]] = load ptr, ptr [[PS18]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP29:%.*]] = load ptr, ptr [[PS2]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP30:%.*]] = load ptr, ptr [[PS2]], align 8
// CHECK-PPC64LE-NEXT:    [[PS19:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP30]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP31:%.*]] = load ptr, ptr [[PS19]], align 8
// CHECK-PPC64LE-NEXT:    [[PS20:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP31]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP32:%.*]] = load ptr, ptr [[PS20]], align 8
// CHECK-PPC64LE-NEXT:    [[PS21:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP32]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    [[TMP33:%.*]] = load ptr, ptr [[PS21]], align 8
// CHECK-PPC64LE-NEXT:    [[S22:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP33]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    [[TMP34:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    store ptr [[TMP12]], ptr [[TMP34]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP35:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 0
// CHECK-PPC64LE-NEXT:    store ptr [[S]], ptr [[TMP35]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP36:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i64 0, i64 0
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP36]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP37:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    store ptr [[PS1]], ptr [[TMP37]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP38:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 1
// CHECK-PPC64LE-NEXT:    store ptr [[S]], ptr [[TMP38]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP39:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i64 0, i64 1
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP39]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP40:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 2
// CHECK-PPC64LE-NEXT:    store ptr [[TMP17]], ptr [[TMP40]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP41:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 2
// CHECK-PPC64LE-NEXT:    store ptr [[S14]], ptr [[TMP41]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP42:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i64 0, i64 2
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP42]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP43:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 3
// CHECK-PPC64LE-NEXT:    store ptr [[PS10]], ptr [[TMP43]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP44:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 3
// CHECK-PPC64LE-NEXT:    store ptr [[S14]], ptr [[TMP44]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP45:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i64 0, i64 3
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP45]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP46:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 4
// CHECK-PPC64LE-NEXT:    store ptr [[ARG_ADDR]], ptr [[TMP46]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP47:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 4
// CHECK-PPC64LE-NEXT:    store ptr [[ARG_ADDR]], ptr [[TMP47]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP48:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i64 0, i64 4
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP48]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP49:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 5
// CHECK-PPC64LE-NEXT:    store ptr [[TMP23]], ptr [[TMP49]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP50:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 5
// CHECK-PPC64LE-NEXT:    store ptr [[S15]], ptr [[TMP50]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP51:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i64 0, i64 5
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP51]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP52:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 6
// CHECK-PPC64LE-NEXT:    store ptr [[PS2]], ptr [[TMP52]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP53:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 6
// CHECK-PPC64LE-NEXT:    store ptr [[S15]], ptr [[TMP53]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP54:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i64 0, i64 6
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP54]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP55:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 7
// CHECK-PPC64LE-NEXT:    store ptr [[TMP28]], ptr [[TMP55]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP56:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 7
// CHECK-PPC64LE-NEXT:    store ptr [[S22]], ptr [[TMP56]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP57:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i64 0, i64 7
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP57]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP58:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 8
// CHECK-PPC64LE-NEXT:    store ptr [[PS18]], ptr [[TMP58]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP59:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 8
// CHECK-PPC64LE-NEXT:    store ptr [[S22]], ptr [[TMP59]], align 8
// CHECK-PPC64LE-NEXT:    [[TMP60:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i64 0, i64 8
// CHECK-PPC64LE-NEXT:    store ptr null, ptr [[TMP60]], align 8
// CHECK-PPC64LE-NEXT:    call void @__tgt_target_data_begin_mapper(ptr @[[GLOB1]], i64 -1, i32 9, ptr [[DOTOFFLOAD_BASEPTRS23]], ptr [[DOTOFFLOAD_PTRS24]], ptr @.offload_sizes.5, ptr @.offload_maptypes.6, ptr null, ptr null)
// CHECK-PPC64LE-NEXT:    [[TMP61:%.*]] = load i32, ptr [[ARG_ADDR]], align 4
// CHECK-PPC64LE-NEXT:    [[INC26:%.*]] = add nsw i32 [[TMP61]], 1
// CHECK-PPC64LE-NEXT:    store i32 [[INC26]], ptr [[ARG_ADDR]], align 4
// CHECK-PPC64LE-NEXT:    call void @__tgt_target_data_end_mapper(ptr @[[GLOB1]], i64 -1, i32 9, ptr [[DOTOFFLOAD_BASEPTRS23]], ptr [[DOTOFFLOAD_PTRS24]], ptr @.offload_sizes.5, ptr @.offload_maptypes.6, ptr null, ptr null)
// CHECK-PPC64LE-NEXT:    ret void
//
// CHECK-I386-LABEL: @_Z3fooi(
// CHECK-I386-NEXT:  entry:
// CHECK-I386-NEXT:    [[ARG_ADDR:%.*]] = alloca i32, align 4
// CHECK-I386-NEXT:    [[LB:%.*]] = alloca [5 x float], align 4
// CHECK-I386-NEXT:    [[PS1:%.*]] = alloca ptr, align 4
// CHECK-I386-NEXT:    [[PS2:%.*]] = alloca ptr, align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_BASEPTRS:%.*]] = alloca [1 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_PTRS:%.*]] = alloca [1 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_MAPPERS:%.*]] = alloca [1 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_BASEPTRS1:%.*]] = alloca [1 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_PTRS2:%.*]] = alloca [1 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_MAPPERS3:%.*]] = alloca [1 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_BASEPTRS5:%.*]] = alloca [1 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_PTRS6:%.*]] = alloca [1 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_MAPPERS7:%.*]] = alloca [1 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_BASEPTRS23:%.*]] = alloca [9 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_PTRS24:%.*]] = alloca [9 x ptr], align 4
// CHECK-I386-NEXT:    [[DOTOFFLOAD_MAPPERS25:%.*]] = alloca [9 x ptr], align 4
// CHECK-I386-NEXT:    store i32 [[ARG:%.*]], ptr [[ARG_ADDR]], align 4
// CHECK-I386-NEXT:    [[TMP0:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_BASEPTRS]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr [[LB]], ptr [[TMP0]], align 4
// CHECK-I386-NEXT:    [[TMP1:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_PTRS]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr [[LB]], ptr [[TMP1]], align 4
// CHECK-I386-NEXT:    [[TMP2:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_MAPPERS]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP2]], align 4
// CHECK-I386-NEXT:    call void @__tgt_target_data_begin_mapper(ptr @[[GLOB1:[0-9]+]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS]], ptr [[DOTOFFLOAD_PTRS]], ptr @.offload_sizes, ptr @.offload_maptypes, ptr null, ptr null)
// CHECK-I386-NEXT:    [[TMP3:%.*]] = load i32, ptr [[ARG_ADDR]], align 4
// CHECK-I386-NEXT:    [[INC:%.*]] = add nsw i32 [[TMP3]], 1
// CHECK-I386-NEXT:    store i32 [[INC]], ptr [[ARG_ADDR]], align 4
// CHECK-I386-NEXT:    call void @__tgt_target_data_end_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS]], ptr [[DOTOFFLOAD_PTRS]], ptr @.offload_sizes, ptr @.offload_maptypes, ptr null, ptr null)
// CHECK-I386-NEXT:    [[TMP4:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_BASEPTRS1]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr [[LB]], ptr [[TMP4]], align 4
// CHECK-I386-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_PTRS2]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr [[LB]], ptr [[TMP5]], align 4
// CHECK-I386-NEXT:    [[TMP6:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_MAPPERS3]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP6]], align 4
// CHECK-I386-NEXT:    call void @__tgt_target_data_begin_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS1]], ptr [[DOTOFFLOAD_PTRS2]], ptr @.offload_sizes.1, ptr @.offload_maptypes.2, ptr null, ptr null)
// CHECK-I386-NEXT:    [[TMP7:%.*]] = load i32, ptr [[ARG_ADDR]], align 4
// CHECK-I386-NEXT:    [[INC4:%.*]] = add nsw i32 [[TMP7]], 1
// CHECK-I386-NEXT:    store i32 [[INC4]], ptr [[ARG_ADDR]], align 4
// CHECK-I386-NEXT:    call void @__tgt_target_data_end_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS1]], ptr [[DOTOFFLOAD_PTRS2]], ptr @.offload_sizes.1, ptr @.offload_maptypes.2, ptr null, ptr null)
// CHECK-I386-NEXT:    [[TMP8:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_BASEPTRS5]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr [[ARG_ADDR]], ptr [[TMP8]], align 4
// CHECK-I386-NEXT:    [[TMP9:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_PTRS6]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr [[ARG_ADDR]], ptr [[TMP9]], align 4
// CHECK-I386-NEXT:    [[TMP10:%.*]] = getelementptr inbounds [1 x ptr], ptr [[DOTOFFLOAD_MAPPERS7]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP10]], align 4
// CHECK-I386-NEXT:    call void @__tgt_target_data_begin_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS5]], ptr [[DOTOFFLOAD_PTRS6]], ptr @.offload_sizes.3, ptr @.offload_maptypes.4, ptr null, ptr null)
// CHECK-I386-NEXT:    [[TMP11:%.*]] = load i32, ptr [[ARG_ADDR]], align 4
// CHECK-I386-NEXT:    [[INC8:%.*]] = add nsw i32 [[TMP11]], 1
// CHECK-I386-NEXT:    store i32 [[INC8]], ptr [[ARG_ADDR]], align 4
// CHECK-I386-NEXT:    call void @__tgt_target_data_end_mapper(ptr @[[GLOB1]], i64 -1, i32 1, ptr [[DOTOFFLOAD_BASEPTRS5]], ptr [[DOTOFFLOAD_PTRS6]], ptr @.offload_sizes.3, ptr @.offload_maptypes.4, ptr null, ptr null)
// CHECK-I386-NEXT:    [[TMP12:%.*]] = load ptr, ptr [[PS1]], align 4
// CHECK-I386-NEXT:    [[TMP13:%.*]] = load ptr, ptr [[PS1]], align 4
// CHECK-I386-NEXT:    [[S:%.*]] = getelementptr inbounds nuw [[STRUCT_S2:%.*]], ptr [[TMP13]], i32 0, i32 0
// CHECK-I386-NEXT:    [[TMP14:%.*]] = load ptr, ptr [[PS1]], align 4
// CHECK-I386-NEXT:    [[PS:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP14]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP15:%.*]] = load ptr, ptr [[PS]], align 4
// CHECK-I386-NEXT:    [[PS9:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP15]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP16:%.*]] = load ptr, ptr [[PS9]], align 4
// CHECK-I386-NEXT:    [[PS10:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP16]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP17:%.*]] = load ptr, ptr [[PS10]], align 4
// CHECK-I386-NEXT:    [[TMP18:%.*]] = load ptr, ptr [[PS1]], align 4
// CHECK-I386-NEXT:    [[TMP19:%.*]] = load ptr, ptr [[PS1]], align 4
// CHECK-I386-NEXT:    [[PS11:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP19]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP20:%.*]] = load ptr, ptr [[PS11]], align 4
// CHECK-I386-NEXT:    [[PS12:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP20]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP21:%.*]] = load ptr, ptr [[PS12]], align 4
// CHECK-I386-NEXT:    [[PS13:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP21]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP22:%.*]] = load ptr, ptr [[PS13]], align 4
// CHECK-I386-NEXT:    [[S14:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP22]], i32 0, i32 0
// CHECK-I386-NEXT:    [[TMP23:%.*]] = load ptr, ptr [[PS2]], align 4
// CHECK-I386-NEXT:    [[TMP24:%.*]] = load ptr, ptr [[PS2]], align 4
// CHECK-I386-NEXT:    [[S15:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP24]], i32 0, i32 0
// CHECK-I386-NEXT:    [[TMP25:%.*]] = load ptr, ptr [[PS2]], align 4
// CHECK-I386-NEXT:    [[PS16:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP25]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP26:%.*]] = load ptr, ptr [[PS16]], align 4
// CHECK-I386-NEXT:    [[PS17:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP26]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP27:%.*]] = load ptr, ptr [[PS17]], align 4
// CHECK-I386-NEXT:    [[PS18:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP27]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP28:%.*]] = load ptr, ptr [[PS18]], align 4
// CHECK-I386-NEXT:    [[TMP29:%.*]] = load ptr, ptr [[PS2]], align 4
// CHECK-I386-NEXT:    [[TMP30:%.*]] = load ptr, ptr [[PS2]], align 4
// CHECK-I386-NEXT:    [[PS19:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP30]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP31:%.*]] = load ptr, ptr [[PS19]], align 4
// CHECK-I386-NEXT:    [[PS20:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP31]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP32:%.*]] = load ptr, ptr [[PS20]], align 4
// CHECK-I386-NEXT:    [[PS21:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP32]], i32 0, i32 1
// CHECK-I386-NEXT:    [[TMP33:%.*]] = load ptr, ptr [[PS21]], align 4
// CHECK-I386-NEXT:    [[S22:%.*]] = getelementptr inbounds nuw [[STRUCT_S2]], ptr [[TMP33]], i32 0, i32 0
// CHECK-I386-NEXT:    [[TMP34:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr [[TMP12]], ptr [[TMP34]], align 4
// CHECK-I386-NEXT:    [[TMP35:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr [[S]], ptr [[TMP35]], align 4
// CHECK-I386-NEXT:    [[TMP36:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i32 0, i32 0
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP36]], align 4
// CHECK-I386-NEXT:    [[TMP37:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 1
// CHECK-I386-NEXT:    store ptr [[PS1]], ptr [[TMP37]], align 4
// CHECK-I386-NEXT:    [[TMP38:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 1
// CHECK-I386-NEXT:    store ptr [[S]], ptr [[TMP38]], align 4
// CHECK-I386-NEXT:    [[TMP39:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i32 0, i32 1
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP39]], align 4
// CHECK-I386-NEXT:    [[TMP40:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 2
// CHECK-I386-NEXT:    store ptr [[TMP17]], ptr [[TMP40]], align 4
// CHECK-I386-NEXT:    [[TMP41:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 2
// CHECK-I386-NEXT:    store ptr [[S14]], ptr [[TMP41]], align 4
// CHECK-I386-NEXT:    [[TMP42:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i32 0, i32 2
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP42]], align 4
// CHECK-I386-NEXT:    [[TMP43:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 3
// CHECK-I386-NEXT:    store ptr [[PS10]], ptr [[TMP43]], align 4
// CHECK-I386-NEXT:    [[TMP44:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 3
// CHECK-I386-NEXT:    store ptr [[S14]], ptr [[TMP44]], align 4
// CHECK-I386-NEXT:    [[TMP45:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i32 0, i32 3
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP45]], align 4
// CHECK-I386-NEXT:    [[TMP46:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 4
// CHECK-I386-NEXT:    store ptr [[ARG_ADDR]], ptr [[TMP46]], align 4
// CHECK-I386-NEXT:    [[TMP47:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 4
// CHECK-I386-NEXT:    store ptr [[ARG_ADDR]], ptr [[TMP47]], align 4
// CHECK-I386-NEXT:    [[TMP48:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i32 0, i32 4
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP48]], align 4
// CHECK-I386-NEXT:    [[TMP49:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 5
// CHECK-I386-NEXT:    store ptr [[TMP23]], ptr [[TMP49]], align 4
// CHECK-I386-NEXT:    [[TMP50:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 5
// CHECK-I386-NEXT:    store ptr [[S15]], ptr [[TMP50]], align 4
// CHECK-I386-NEXT:    [[TMP51:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i32 0, i32 5
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP51]], align 4
// CHECK-I386-NEXT:    [[TMP52:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 6
// CHECK-I386-NEXT:    store ptr [[PS2]], ptr [[TMP52]], align 4
// CHECK-I386-NEXT:    [[TMP53:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 6
// CHECK-I386-NEXT:    store ptr [[S15]], ptr [[TMP53]], align 4
// CHECK-I386-NEXT:    [[TMP54:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i32 0, i32 6
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP54]], align 4
// CHECK-I386-NEXT:    [[TMP55:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 7
// CHECK-I386-NEXT:    store ptr [[TMP28]], ptr [[TMP55]], align 4
// CHECK-I386-NEXT:    [[TMP56:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 7
// CHECK-I386-NEXT:    store ptr [[S22]], ptr [[TMP56]], align 4
// CHECK-I386-NEXT:    [[TMP57:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i32 0, i32 7
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP57]], align 4
// CHECK-I386-NEXT:    [[TMP58:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_BASEPTRS23]], i32 0, i32 8
// CHECK-I386-NEXT:    store ptr [[PS18]], ptr [[TMP58]], align 4
// CHECK-I386-NEXT:    [[TMP59:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_PTRS24]], i32 0, i32 8
// CHECK-I386-NEXT:    store ptr [[S22]], ptr [[TMP59]], align 4
// CHECK-I386-NEXT:    [[TMP60:%.*]] = getelementptr inbounds [9 x ptr], ptr [[DOTOFFLOAD_MAPPERS25]], i32 0, i32 8
// CHECK-I386-NEXT:    store ptr null, ptr [[TMP60]], align 4
// CHECK-I386-NEXT:    call void @__tgt_target_data_begin_mapper(ptr @[[GLOB1]], i64 -1, i32 9, ptr [[DOTOFFLOAD_BASEPTRS23]], ptr [[DOTOFFLOAD_PTRS24]], ptr @.offload_sizes.5, ptr @.offload_maptypes.6, ptr null, ptr null)
// CHECK-I386-NEXT:    [[TMP61:%.*]] = load i32, ptr [[ARG_ADDR]], align 4
// CHECK-I386-NEXT:    [[INC26:%.*]] = add nsw i32 [[TMP61]], 1
// CHECK-I386-NEXT:    store i32 [[INC26]], ptr [[ARG_ADDR]], align 4
// CHECK-I386-NEXT:    call void @__tgt_target_data_end_mapper(ptr @[[GLOB1]], i64 -1, i32 9, ptr [[DOTOFFLOAD_BASEPTRS23]], ptr [[DOTOFFLOAD_PTRS24]], ptr @.offload_sizes.5, ptr @.offload_maptypes.6, ptr null, ptr null)
// CHECK-I386-NEXT:    ret void
//
void foo(int arg) {
  float lb[5];
  S2 *ps1;
  S2 *ps2;

  #pragma omp target data map(ompx_hold, to: lb)
  {++arg;}

  #pragma omp target data map(always close ompx_hold, to: lb)
  {++arg;}

  #pragma omp target data map(ompx_hold, tofrom : arg)
  {++arg;}

  // Make sure the struct picks up ompx_hold even if another element of the
  // struct doesn't have ompx_hold.
  #pragma omp target data map(tofrom : ps1->s, arg)                           \
                          map(ompx_hold, tofrom : ps1->ps->ps->ps->s, ps2->s) \
                          map(tofrom : ps2->ps->ps->ps->s)
  {
    ++(arg);
  }
}

#endif
