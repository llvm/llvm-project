## Test that write failures to read-only directories are handled correctly.
## Unsupported on Windows as chmod doesn't work reliably there.

# UNSUPPORTED: system-windows
# REQUIRES: non-root-user

# RUN: rm -rf %t-readonly && mkdir -p %t-readonly
# RUN: chmod 444 %t-readonly
# RUN: not ssaf-serialization-format-test %S/Inputs/valid-empty.json -o %t-readonly/output.json 2>&1 | FileCheck %s
# RUN: chmod 755 %t-readonly && rm -rf %t-readonly

## Test that write error is reported when output directory is read-only
## This tests JSONFormat.cpp:89-92 (file open failure path)

# CHECK: failed to write TUSummary
# CHECK: failed to open
