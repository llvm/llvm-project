## Test that write flush failures are handled correctly.
## Uses /dev/full which always reports "disk full" errors on write.
## This special device file successfully opens but fails on write/flush operations.

# REQUIRES: system-linux

# RUN: not ssaf-serialization-format-test %S/Inputs/valid-defuse.json -o /dev/full 2>&1 | FileCheck %s

## Test that flush/write error is reported when device is full
## This tests JSONFormat.cpp:97-99 (write/flush failure path)

# CHECK: failed to write TUSummary
# CHECK: write failed
