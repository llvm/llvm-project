//===--- BuiltinsAMDGPUDocs.td - AMDGPU Builtin Documentation ---*- C++ -*-===//
//
// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.
// See https://llvm.org/LICENSE.txt for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
//
//===----------------------------------------------------------------------===//
//
// This file defines documentation records for AMDGPU builtins. It is included
// by BuiltinsAMDGPU.td and used by the -gen-builtin-docs TableGen backend to
// generate AMDGPUBuiltinReference.rst.
//
//===----------------------------------------------------------------------===//

//===----------------------------------------------------------------------===//
// Global introduction
//===----------------------------------------------------------------------===//

def GlobalDocumentation {
  code Intro = [{..
  -------------------------------------------------------------------
  NOTE: This file is automatically generated by running clang-tblgen
  -gen-builtin-docs. Do not edit this file by hand!!
  -------------------------------------------------------------------

===============
AMDGPU Builtins
===============

.. contents::
   :local:
   :depth: 2

This document describes the AMDGPU target-specific builtins available in Clang.
Most of these builtins provide direct access to AMDGPU hardware instructions
and intrinsics.

All AMDGPU builtins use the ``__builtin_amdgcn_`` prefix (or ``__builtin_r600_``
for R600 targets). Some arguments must be compile-time constant expressions;
this is noted in the descriptions where applicable.

.. warning::

   These builtins, including their names, arguments, and target requirements,
   are all subject to change without warning across LLVM releases.

.. note::

   This document is a work in progress. Not all builtins are fully documented
   yet. The initial descriptions were generated with AI assistance,
   cross-referencing the following sources:

   - ``clang/include/clang/Basic/BuiltinsAMDGPU.td`` (builtin definitions)
   - ``llvm/include/llvm/IR/IntrinsicsAMDGPU.td`` (intrinsic definitions)
   - ``clang/lib/Sema/SemaAMDGPU.cpp`` (argument validation and constraints)
   - ``clang/lib/CodeGen/TargetBuiltins/AMDGPU.cpp`` (lowering logic)
   - `GPUOpen Machine-Readable ISA <https://gpuopen.com/machine-readable-isa/>`_
     (ISA documents)
}];
}

//===----------------------------------------------------------------------===//
// Documentation categories
//===----------------------------------------------------------------------===//

def DocCatAMDGPUABI : DocumentationCategory<"ABI / Special Register Builtins"> {
  let Content = [{
These builtins provide access to kernel dispatch metadata, work-item and
workgroup identification, and other ABI-level information. They are available
on all SI+ targets unless otherwise noted.
}];
}

//===----------------------------------------------------------------------===//
// ABI / Special Register Builtins â€” Documentation records
//===----------------------------------------------------------------------===//

def DocABIDispatchPtr : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns a read-only pointer to the dispatch packet, which contains
workgroup size, grid size, and other dispatch parameters.
}];
}

def DocABIKernargSegmentPtr : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns a pointer to the beginning of the kernel argument segment.
}];
}

def DocABIImplicitargPtr : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns a pointer to the implicit arguments appended after explicit
kernel arguments. Layout depends on the code object version.
}];
}

def DocABIQueuePtr : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns a pointer to the ``queue_t`` object for the queue executing the
current kernel.
}];
}

def DocABIWorkgroupIdX : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the workgroup ID in the X dimension.
}];
}

def DocABIWorkgroupIdY : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the workgroup ID in the Y dimension.
}];
}

def DocABIWorkgroupIdZ : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the workgroup ID in the Z dimension.
}];
}

def DocABIClusterIdX : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the cluster ID in the X dimension.
}];
}

def DocABIClusterIdY : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the cluster ID in the Y dimension.
}];
}

def DocABIClusterIdZ : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the cluster ID in the Z dimension.
}];
}

def DocABIClusterWorkgroupIdX : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the workgroup ID within the cluster in the X dimension.
}];
}

def DocABIClusterWorkgroupIdY : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the workgroup ID within the cluster in the Y dimension.
}];
}

def DocABIClusterWorkgroupIdZ : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the workgroup ID within the cluster in the Z dimension.
}];
}

def DocABIClusterWorkgroupFlatId : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the flat (linearized) workgroup ID within the cluster.
}];
}

def DocABIClusterWorkgroupMaxIdX : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the maximum workgroup ID within the cluster in the X dimension.
}];
}

def DocABIClusterWorkgroupMaxIdY : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the maximum workgroup ID within the cluster in the Y dimension.
}];
}

def DocABIClusterWorkgroupMaxIdZ : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the maximum workgroup ID within the cluster in the Z dimension.
}];
}

def DocABIClusterWorkgroupMaxFlatId : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the maximum flat (linearized) workgroup ID within the cluster.
}];
}

def DocABIWorkitemIdX : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the work-item (thread) ID within the workgroup in the X dimension.
}];
}

def DocABIWorkitemIdY : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the work-item (thread) ID within the workgroup in the Y dimension.
}];
}

def DocABIWorkitemIdZ : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the work-item (thread) ID within the workgroup in the Z dimension.
}];
}

def DocABIWorkgroupSizeX : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the workgroup size in the X dimension.
}];
}

def DocABIWorkgroupSizeY : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the workgroup size in the Y dimension.
}];
}

def DocABIWorkgroupSizeZ : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the workgroup size in the Z dimension.
}];
}

def DocABIGridSizeX : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the total grid size in the X dimension.
}];
}

def DocABIGridSizeY : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the total grid size in the Y dimension.
}];
}

def DocABIGridSizeZ : Documentation {
  let Category = DocCatAMDGPUABI;
  let Content = [{
Returns the total grid size in the Z dimension.
}];
}
