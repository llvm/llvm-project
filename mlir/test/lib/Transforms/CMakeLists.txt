add_llvm_library(MLIRTestTransforms
  TestAffineDataCopy.cpp
  TestAllReduceLowering.cpp
  TestCallGraph.cpp
  TestConstantFold.cpp
  TestLoopFusion.cpp
  TestGpuMemoryPromotion.cpp
  TestGpuParallelLoopMapping.cpp
  TestInlining.cpp
  TestLinalgTransforms.cpp
  TestLiveness.cpp
  TestLoopMapping.cpp
  TestLoopParametricTiling.cpp
  TestOpaqueLoc.cpp
  TestMemRefBoundCheck.cpp
  TestMemRefDependenceCheck.cpp
  TestMemRefStrideCalculation.cpp
  TestParallelismDetection.cpp
  TestVectorToLoopsConversion.cpp
  TestVectorTransforms.cpp
  TestVectorizationUtils.cpp

  ADDITIONAL_HEADER_DIRS
  ${MLIR_MAIN_INCLUDE_DIR}/mlir/Transforms

  DEPENDS
  MLIRStandardOpsIncGen
  MLIRTestLinalgTransformPatternsIncGen
  MLIRTestVectorTransformPatternsIncGen
)

include_directories(${CMAKE_CURRENT_SOURCE_DIR}/../TestDialect)
include_directories(${CMAKE_CURRENT_BINARY_DIR}/../TestDialect)
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/../DeclarativeTransforms)
include_directories(${CMAKE_CURRENT_BINARY_DIR}/../DeclarativeTransforms)

target_link_libraries(MLIRTestTransforms
  PUBLIC
  MLIRAffineOps
  MLIRAnalysis
  MLIREDSC
  MLIRGPU
  MLIRLinalgOps
  MLIRLinalgTransforms
  MLIRLoopOps
  MLIRGPU
  MLIRPass
  MLIRTestDialect
  MLIRTransformUtils
  MLIRVectorToLoops
  MLIRVectorOps
  )
