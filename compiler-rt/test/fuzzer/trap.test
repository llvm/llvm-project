RUN: %cpp_compiler %S/TrapTest.cpp -o %t-TrapTest

RUN: not %run %t-TrapTest                  2>&1 | FileCheck %s --check-prefix=TrapTest
RUN: not %run %t-TrapTest -close_fd_mask=3 2>&1 | FileCheck %s --check-prefix=TrapTest
TrapTest: SUMMARY: libFuzzer: deadly signal
TrapTest: Test unit written to ./crash-
RUN: not %run %t-TrapTest  -artifact_prefix=ZZZ 2>&1 | FileCheck %s --check-prefix=TrapTestPrefix
TrapTestPrefix: Test unit written to ZZZcrash-
RUN: not %run %t-TrapTest  -artifact_prefix=ZZZ -exact_artifact_path=FOOBAR 2>&1 | FileCheck %s --check-prefix=TrapTestExactPath
TrapTestExactPath: Test unit written to FOOBAR
