//===--- RISC-V Nonstandard Relocation List ---------------------*- C++ -*-===//
//
// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.
// See https://llvm.org/LICENSE.txt for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
//
//===----------------------------------------------------------------------===//

// This file defines information about RISC-V's nonstandard relocation codes.
// This can be used when parsing relocations, or when printing them, to provide
// better information.
//
// Unlike the mappings provided in RISCV.def via `ELF_RELOC`, these are not
// expected to be 1:1 mappings - multiple vendors may reuse relocation IDs.

// For ease of use, `ELF_RISCV_NONSTANDARD_RELOC_ALL` invokes the macros for
// each vendor.

#ifdef ELF_RISCV_NONSTANDARD_RELOC_ALL
#define ELF_RISCV_NONSTANDARD_RELOC_QUALCOMM(NAME, ID) ELF_RISCV_NONSTANDARD_RELOC_ALL(NAME, ID)
#define ELF_RISCV_NONSTANDARD_RELOC_ANDES(NAME, ID) ELF_RISCV_NONSTANDARD_RELOC_ALL(NAME, ID)
#endif

// For each Vendor identifier, VENDOR, as associated with an `R_RISCV_VENDOR`,
// the `ELF_RISCV_NONSTANDARD_RELOC_<VENDOR>(NAME, ID)` macro defines the
// relocations available for that vendor identifier.

// QUALCOMM Nonstandard Relocations
#ifndef ELF_RISCV_NONSTANDARD_RELOC_QUALCOMM
#define ELF_RISCV_NONSTANDARD_RELOC_QUALCOMM(_NAME, _ID)
#endif

// Documented at
// https://github.com/quic/riscv-elf-psabi-quic-extensions/releases/latest
ELF_RISCV_NONSTANDARD_RELOC_QUALCOMM(R_RISCV_QC_ABS20_U,    192)
ELF_RISCV_NONSTANDARD_RELOC_QUALCOMM(R_RISCV_QC_E_BRANCH,   193)
ELF_RISCV_NONSTANDARD_RELOC_QUALCOMM(R_RISCV_QC_E_32,       194)
ELF_RISCV_NONSTANDARD_RELOC_QUALCOMM(R_RISCV_QC_E_CALL_PLT, 195)


// ANDES Nonstandard Relocations
#ifndef ELF_RISCV_NONSTANDARD_RELOC_ANDES
#define ELF_RISCV_NONSTANDARD_RELOC_ANDES(_NAME, _ID)
#endif

// Calculation: S + A - P (10-bit PC-relative branch offset)
ELF_RISCV_NONSTANDARD_RELOC_ANDES(R_RISCV_NDS_BRANCH_10,    241)

#undef ELF_RISCV_NONSTANDARD_RELOC_ALL
#undef ELF_RISCV_NONSTANDARD_RELOC_QUALCOMM
#undef ELF_RISCV_NONSTANDARD_RELOC_ANDES
