//===-- Select_SHRAi32_OpincaaCodeGen.h --------------------------*- C++ -*-===//
//
// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.
// See https://llvm.org/LICENSE.txt for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
//
//===----------------------------------------------------------------------===//
/// \file
// Code auto-generated by method Kernel::genLLVMISelManualCode()
//   from the OPINCAA lib, from kernel shra.i32.
// You should include this code in the Select() method of the [Target]SelectionDAGISel
//   class of your back end (or MAYBE in the ISelLowering pass).
// Number of instructions generated: 33.
//
//===----------------------------------------------------------------------===//


// From /home/asusu/LLVM/Tests/opincaa_standalone_apps/Emulate_i32/SHRAi32_manual/DumpISel_OpincaaCodeGen_old15_930.cpp


// IMPORTANT NOTE: the OPINCAA lib gives the following warnings when generating
//   the code below:
//    "Warning: instrCrt.getDest() = 21 - register not initialized before updated in WHERE - maybe wrong semantics. instrCrtOrig = R21 = R27 - R10;"
//    "Warning: instrCrt.getDest() = 22 - register not initialized before updated in WHERE - maybe wrong semantics. instrCrtOrig = R22 = R23 << R21;"
//    Therefore we need to manually add the initialization code (see below).
// Therefore had to add manually the following 2 nodes with opcode
// VLOAD_BOGUS_H actually NOT generating a real Connex assembly instruction,
// to have the later predicated instructions refer to via tied-to constraints
// (constraint: result of predicated instr the same as bogus result of VLOAD_BOGUS_H)

SDValue ct21Node = CurDAG->getSignedConstant(21, DL, MVT::i16, true, false);
SDNode *rct21Node = CurDAG->getMachineNode(
                                    Connex::VLOAD_BOGUS_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    ct21Node,
                                    // glue (or chain) input edge
                                    SDValue(nodeOpSrcCast1, 1)
                                    );

SDValue ct22Node = CurDAG->getSignedConstant(22, DL, MVT::i16, true, false);
SDNode *rct22Node = CurDAG->getMachineNode(
                                    Connex::VLOAD_BOGUS_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    ct22Node,
                                    // glue (or chain) input edge
                                    SDValue(rct21Node, 1)
                                    );




SDValue ct0 = CrtDAG->getSignedConstant(0, DL, MVT::i16, true, false);
// R31 = 0;// Instr #0
SDNode *vload0 = CrtDAG->getMachineNode(
                                    Connex::VLOAD_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    ct0,
                                    // glue (or chain) input edge
                                    // Alex: SDValue(nodeOpSrcCast1, 1)
                                    SDValue(rct22Node, 1) // Alex
                                    );

SDValue ct1 = CrtDAG->getSignedConstant(1, DL, MVT::i16, true, false);
// R30 = 1;// Instr #1
SDNode *vload1 = CrtDAG->getMachineNode(
                                    Connex::VLOAD_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    ct1,
                                    // glue (or chain) input edge
                                    SDValue(vload0, 1)
                                    );

SDValue ct2 = CrtDAG->getSignedConstant(16, DL, MVT::i16, true, false);
// R10 = 16;// Instr #2
SDNode *vload2 = CrtDAG->getMachineNode(
                                    Connex::VLOAD_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    ct2,
                                    // glue (or chain) input edge
                                    SDValue(vload1, 1)
                                    );

SDValue ct3 = CrtDAG->getSignedConstant(31, DL, MVT::i16, true, false);
// R08 = 31;// Instr #3
SDNode *vload3 = CrtDAG->getMachineNode(
                                    Connex::VLOAD_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    ct3,
                                    // glue (or chain) input edge
                                    SDValue(vload2, 1)
                                    );

// R27 = R27 & R08;// Instr #4
SDNode *and0 = CrtDAG->getMachineNode(
                                    Connex::ANDV_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(vload3, 0),
                                    SDValue(nodeOpSrcCast2, 0),
                                    // glue (or chain) input edge
                                    SDValue(vload3, 1)
                                    );

// R25 = INDEX;// Instr #5
SDNode *ldix0 = CrtDAG->getMachineNode(
                                    Connex::LDIX_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    // glue (or chain) input edge
                                    SDValue(and0, 1)
                                    );

// R25 = R25 & R30;// Instr #6
SDNode *and1 = CrtDAG->getMachineNode(
                                    Connex::ANDV_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(vload1, 0),
                                    SDValue(ldix0, 0),
                                    // glue (or chain) input edge
                                    SDValue(ldix0, 1)
                                    );

// CELL_SHR(R27, R25);// Instr #7
SDNode *cellshr0 = CrtDAG->getMachineNode(
                                    Connex::CELLSHR_H,
                                    DL,
                                    MVT::Glue,
                                    SDValue(and0, 0),
                                    SDValue(and1, 0),
                                    // glue (or chain) input edge
                                    SDValue(and1, 1)
                                    );

SDValue ct4 = CrtDAG->getSignedConstant(1 /* Num of cycles to NOP */, DL, MVT::i16, true, false);
// NOP;// Instr #8
SDNode *nop0 = CrtDAG->getMachineNode(
                                    Connex::NOP_BPF,
                                    DL,
                                    MVT::Glue,
                                    ct4,
                                    // glue (or chain) input edge
                                    SDValue(cellshr0, 0)
                                    );

// R27 = SHIFT_REG;// Instr #9
SDNode *ldsh0 = CrtDAG->getMachineNode(
                                    Connex::LDSH_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    // glue (or chain) input edge
                                    SDValue(nop0, 0)
                                    );

// R20 = R10 < R27;// Instr #10
SDNode *lt0 = CrtDAG->getMachineNode(
                                    Connex::LT_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(vload2, 0),
                                    SDValue(ldsh0, 0),
                                    // glue (or chain) input edge
                                    SDValue(ldsh0, 1)
                                    );

// R29 = SHRA(R28, R27);// Instr #11
SDNode *shra0 = CrtDAG->getMachineNode(
                                    Connex::SHRAV_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(nodeOpSrcCast1, 0),
                                    SDValue(ldsh0, 0),
                                    // glue (or chain) input edge
                                    SDValue(lt0, 1)
                                    );

// CELL_SHL(R28, R30);// Instr #12
SDNode *cellshl0 = CrtDAG->getMachineNode(
                                    Connex::CELLSHL_H,
                                    DL,
                                    MVT::Glue,
                                    SDValue(nodeOpSrcCast1, 0),
                                    SDValue(vload1, 0),
                                    // glue (or chain) input edge
                                    SDValue(shra0, 1)
                                    );

SDValue ct5 = CrtDAG->getSignedConstant(1 /* Num of cycles to NOP */, DL, MVT::i16, true, false);
// NOP;// Instr #13
SDNode *nop1 = CrtDAG->getMachineNode(
                                    Connex::NOP_BPF,
                                    DL,
                                    MVT::Glue,
                                    ct5,
                                    // glue (or chain) input edge
                                    SDValue(cellshl0, 0)
                                    );

// R23 = SHIFT_REG;// Instr #14
SDNode *ldsh1 = CrtDAG->getMachineNode(
                                    Connex::LDSH_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    // glue (or chain) input edge
                                    SDValue(nop1, 0)
                                    );

// R25 = R25 == R31;// Instr #15
SDNode *eq0 = CrtDAG->getMachineNode(
                                    Connex::EQ_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(and1, 0),
                                    SDValue(vload0, 0),
                                    // glue (or chain) input edge
                                    SDValue(ldsh1, 1)
                                    );

// R24 = R20 & R25;// Instr #16
SDNode *and2 = CrtDAG->getMachineNode(
                                    Connex::ANDV_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(eq0, 0),
                                    SDValue(lt0, 0),
                                    // glue (or chain) input edge
                                    SDValue(eq0, 1)
                                    );

// R19 = R24 == R30;// Instr #17
SDNode *eq1 = CrtDAG->getMachineNode(
                                    Connex::EQ_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(and2, 0),
                                    SDValue(vload1, 0),
                                    // glue (or chain) input edge
                                    SDValue(and2, 1)
                                    );

SDValue ct6 = CrtDAG->getSignedConstant(1 /* Num of cycles to NOP */, DL, MVT::i16, true, false);
// NOP;// Instr #18
SDNode *nop2 = CrtDAG->getMachineNode(
                                    Connex::NOP_BPF,
                                    DL,
                                    MVT::Glue,
                                    ct6,
                                    // glue (or chain) input edge
                                    SDValue(eq1, 1)
                                    );

// WHERE_EQ;// Instr #19
SDNode *whereeq0 = CrtDAG->getMachineNode(
                                    Connex::WHEREEQ,
                                    DL,
                                    MVT::Glue,
                                    // glue (or chain) input edge
                                    SDValue(nop2, 0)
                                    );

// R21 = R27 - R10;// Instr #20
SDNode *sub0 = CrtDAG->getMachineNode(
                                    Connex::SUBV_SPECIAL_H,
                                    DL,
                                    CrtDAG->getVTList(
                                    TYPE_VECTOR_I16,
                                    MVT::Glue
                                    ),
                                    {
                                    SDValue(ldsh0, 0),
                                    SDValue(vload2, 0),
                                    // Alex: SDValue(, 0),
                                    SDValue(rct21Node, 0), // Alex
                                    // glue (or chain) input edge
                                    SDValue(whereeq0, 0)
                                    }
                                    );

// R29 = SHRA(R23, R21);// Instr #21
SDNode *shra1 = CrtDAG->getMachineNode(
                                    Connex::SHRAV_SPECIAL_H,
                                    DL,
                                    CrtDAG->getVTList(
                                    TYPE_VECTOR_I16,
                                    MVT::Glue
                                    ),
                                    {
                                    SDValue(ldsh1, 0),
                                    SDValue(sub0, 0),
                                    SDValue(shra0, 0),
                                    // glue (or chain) input edge
                                    SDValue(sub0, 1)
                                    }
                                    );

// END_WHERE;// Instr #22
SDNode *endwhere0 = CrtDAG->getMachineNode(
                                    Connex::END_WHERE,
                                    DL,
                                    MVT::Glue,
                                    // glue (or chain) input edge
                                    SDValue(shra1, 1)
                                    );

// R20 = R30 - R20;// Instr #23
SDNode *sub1 = CrtDAG->getMachineNode(
                                    Connex::SUBV_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(vload1, 0),
                                    SDValue(lt0, 0),
                                    // glue (or chain) input edge
                                    SDValue(endwhere0, 0)
                                    );

// R24 = R20 & R25;// Instr #24
SDNode *and3 = CrtDAG->getMachineNode(
                                    Connex::ANDV_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(eq0, 0),
                                    SDValue(sub1, 0),
                                    // glue (or chain) input edge
                                    SDValue(sub1, 1)
                                    );

// R19 = R24 == R30;// Instr #25
SDNode *eq2 = CrtDAG->getMachineNode(
                                    Connex::EQ_H,
                                    DL,
                                    TYPE_VECTOR_I16,
                                    MVT::Glue,
                                    SDValue(and3, 0),
                                    SDValue(vload1, 0),
                                    // glue (or chain) input edge
                                    SDValue(and3, 1)
                                    );

SDValue ct7 = CrtDAG->getSignedConstant(1 /* Num of cycles to NOP */, DL, MVT::i16, true, false);
// NOP;// Instr #26
SDNode *nop3 = CrtDAG->getMachineNode(
                                    Connex::NOP_BPF,
                                    DL,
                                    MVT::Glue,
                                    ct7,
                                    // glue (or chain) input edge
                                    SDValue(eq2, 1)
                                    );

// WHERE_EQ;// Instr #27
SDNode *whereeq1 = CrtDAG->getMachineNode(
                                    Connex::WHEREEQ,
                                    DL,
                                    MVT::Glue,
                                    // glue (or chain) input edge
                                    SDValue(nop3, 0)
                                    );

// R21 = R10 - R27;// Instr #28
SDNode *sub2 = CrtDAG->getMachineNode(
                                    Connex::SUBV_SPECIAL_H,
                                    DL,
                                    CrtDAG->getVTList(
                                    TYPE_VECTOR_I16,
                                    MVT::Glue
                                    ),
                                    {
                                    SDValue(vload2, 0),
                                    SDValue(ldsh0, 0),
                                    SDValue(sub0, 0),
                                    // glue (or chain) input edge
                                    SDValue(whereeq1, 0)
                                    }
                                    );

// R22 = R23 << R21;// Instr #29
SDNode *shl0 = CrtDAG->getMachineNode(
                                    Connex::SHLV_SPECIAL_H,
                                    DL,
                                    CrtDAG->getVTList(
                                    TYPE_VECTOR_I16,
                                    MVT::Glue
                                    ),
                                    {
                                    SDValue(ldsh1, 0),
                                    SDValue(sub2, 0),
                                    // Alex: SDValue(, 0),
                                    SDValue(rct22Node, 0),
                                    // glue (or chain) input edge
                                    SDValue(sub2, 1)
                                    }
                                    );

// R29 = R28 >> R27;// Instr #30
SDNode *shr0 = CrtDAG->getMachineNode(
                                    Connex::SHRV_SPECIAL_H,
                                    DL,
                                    CrtDAG->getVTList(
                                    TYPE_VECTOR_I16,
                                    MVT::Glue
                                    ),
                                    {
                                    SDValue(nodeOpSrcCast1, 0),
                                    SDValue(ldsh0, 0),
                                    SDValue(shra1, 0),
                                    // glue (or chain) input edge
                                    SDValue(shl0, 1)
                                    }
                                    );

// R29 = R29 | R22;// Instr #31
SDNode *resH /*or0*/ = CrtDAG->getMachineNode(
                                    Connex::ORV_SPECIAL_H,
                                    DL,
                                    CrtDAG->getVTList(
                                    TYPE_VECTOR_I16,
                                    MVT::Glue
                                    ),
                                    {
                                    SDValue(shl0, 0),
                                    SDValue(shr0, 0),
                                    SDValue(shr0, 0),
                                    // glue (or chain) input edge
                                    SDValue(shr0, 1)
                                    }
                                    );

// END_WHERE;// Instr #32
SDNode *lastNode /*endwhere1*/ = CurDAG->getMachineNode(
                                    Connex::END_WHERE,
                                    DL,
//                                    MVT::Glue,
                                    MVT::Other,
                                    // glue (or chain) input edge
                                    SDValue(resH /*or0*/, 1)
                                    );

