; NOTE: Assertions have been autogenerated by utils/update_analyze_test_checks.py UTC_ARGS: --version 5
; RUN: opt -S -disable-output "-passes=print<scalar-evolution>" < %s 2>&1 | FileCheck %s

define i16 @test() {
; CHECK-LABEL: 'test'
; CHECK-NEXT:  Classifying expressions for: @test
; CHECK-NEXT:    %xor = xor i32 0, 3
; CHECK-NEXT:    --> %xor U: [3,4) S: [3,4)
; CHECK-NEXT:    %mul = mul i32 %xor, 329
; CHECK-NEXT:    --> (329 * %xor)<nuw><nsw> U: [987,988) S: [987,988)
; CHECK-NEXT:    %conv = trunc i32 %mul to i16
; CHECK-NEXT:    --> (329 * (trunc i32 %xor to i16))<nuw><nsw> U: [987,988) S: [987,988)
; CHECK-NEXT:    %sext = shl i16 %conv, 8
; CHECK-NEXT:    --> (18688 * (trunc i32 %xor to i16))<nuw> U: [-9472,-9471) S: [-9472,-9471)
; CHECK-NEXT:    %conv1 = ashr i16 %sext, 8
; CHECK-NEXT:    --> (sext i8 (73 * (trunc i32 %xor to i8))<nuw> to i16) U: [-37,-36) S: [-37,-36)
; CHECK-NEXT:  Determining loop execution counts for: @test
;
entry:
  %xor = xor i32 0, 3
  %mul = mul i32 %xor, 329
  %conv = trunc i32 %mul to i16
  %sext = shl i16 %conv, 8
  %conv1 = ashr i16 %sext, 8
  ret i16 %conv1
}
