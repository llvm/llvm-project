; NOTE: Assertions have been autogenerated by utils/update_analyze_test_checks.py
; RUN: opt < %s -passes="print<cost-model>" 2>&1 -disable-output -aarch64-sve-vector-bits-min=128 | FileCheck %s -D#VBITS=128

target triple = "aarch64-unknown-linux-gnu"

define void @scalable_sdiv() #0 {
; CHECK-LABEL: 'scalable_sdiv'
; CHECK-NEXT:  Cost Model: Found an estimated cost of 16 for instruction: %sdiv_nxv16i8 = sdiv <vscale x 16 x i8> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 8 for instruction: %sdiv_nxv8i16 = sdiv <vscale x 8 x i16> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %sdiv_nxv4i32 = sdiv <vscale x 4 x i32> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %sdiv_nxv2i64 = sdiv <vscale x 2 x i64> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret void
;
entry:
  %sdiv_nxv16i8 = sdiv <vscale x 16 x i8> undef, undef
  %sdiv_nxv8i16 = sdiv <vscale x 8 x i16> undef, undef
  %sdiv_nxv4i32 = sdiv <vscale x 4 x i32> undef, undef
  %sdiv_nxv2i64 = sdiv <vscale x 2 x i64> undef, undef

  ret void
}

define void @scalable_udiv() #0 {
; CHECK-LABEL: 'scalable_udiv'
; CHECK-NEXT:  Cost Model: Found an estimated cost of 16 for instruction: %udiv_nxv16i8 = udiv <vscale x 16 x i8> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 8 for instruction: %udiv_nxv8i16 = udiv <vscale x 8 x i16> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %udiv_nxv4i32 = udiv <vscale x 4 x i32> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 2 for instruction: %udiv_nxv2i64 = udiv <vscale x 2 x i64> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret void
;
entry:
  %udiv_nxv16i8 = udiv <vscale x 16 x i8> undef, undef
  %udiv_nxv8i16 = udiv <vscale x 8 x i16> undef, undef
  %udiv_nxv4i32 = udiv <vscale x 4 x i32> undef, undef
  %udiv_nxv2i64 = udiv <vscale x 2 x i64> undef, undef

  ret void
}

define void @scalable_mul() #0 {
; CHECK-LABEL: 'scalable_mul'
; CHECK-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %mul_nxv16i8 = mul <vscale x 16 x i8> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %mul_nxv8i16 = mul <vscale x 8 x i16> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %mul_nxv4i32 = mul <vscale x 4 x i32> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %mul_nxv2i64 = mul <vscale x 2 x i64> undef, undef
; CHECK-NEXT:  Cost Model: Invalid cost for instruction: %mul_nxv1i64 = mul <vscale x 1 x i64> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret void
;
entry:
  %mul_nxv16i8 = mul <vscale x 16 x i8> undef, undef
  %mul_nxv8i16 = mul <vscale x 8 x i16> undef, undef
  %mul_nxv4i32 = mul <vscale x 4 x i32> undef, undef
  %mul_nxv2i64 = mul <vscale x 2 x i64> undef, undef
  %mul_nxv1i64 = mul <vscale x 1 x i64> undef, undef

  ret void
}

define void @scalable_add() #0 {
; CHECK-LABEL: 'scalable_add'
; CHECK-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %add_nxv16i8 = add <vscale x 16 x i8> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %add_nxv8i16 = add <vscale x 8 x i16> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %add_nxv4i32 = add <vscale x 4 x i32> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 1 for instruction: %add_nxv2i64 = add <vscale x 2 x i64> undef, undef
; CHECK-NEXT:  Cost Model: Invalid cost for instruction: %add_nxv1i64 = add <vscale x 1 x i64> undef, undef
; CHECK-NEXT:  Cost Model: Found an estimated cost of 0 for instruction: ret void
;
entry:
  %add_nxv16i8 = add <vscale x 16 x i8> undef, undef
  %add_nxv8i16 = add <vscale x 8 x i16> undef, undef
  %add_nxv4i32 = add <vscale x 4 x i32> undef, undef
  %add_nxv2i64 = add <vscale x 2 x i64> undef, undef
  %add_nxv1i64 = add <vscale x 1 x i64> undef, undef

  ret void
}

attributes #0 = { "target-features"="+sve" }
