; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -mtriple=next32 --mcpu=next32gen1 < %s | FileCheck %s -check-prefix CHECK-PREFETCH
; RUN: llc -mtriple=next32 --mcpu=next32gen1 -filetype=obj -o - %s | llvm-objdump --triple=next32 --mcpu=next32gen1 -d - | FileCheck %s -check-prefix CHECK-PREFETCH

define i32 @foo(i32* nocapture readonly %p) {
; CHECK-PREFETCH-LABEL: foo
; CHECK-PREFETCH:    prefetch r2, r1, tid
entry:
  %0 = bitcast i32* %p to i8*
  tail call void @llvm.prefetch.p0i8(i8* %0, i32 0, i32 3, i32 1)
  ret i32 0
}

declare void @llvm.prefetch.p0i8(i8* nocapture readonly, i32 immarg, i32 immarg, i32)
