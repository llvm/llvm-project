; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc --mtriple=loongarch32 --relocation-model=static < %s | FileCheck %s --check-prefix=LA32NOPIC
; RUN: llc --mtriple=loongarch32 --relocation-model=pic < %s | FileCheck %s --check-prefix=LA32PIC
; RUN: llc --mtriple=loongarch64 --relocation-model=static < %s | FileCheck %s --check-prefix=LA64NOPIC
; RUN: llc --mtriple=loongarch64 --relocation-model=pic < %s | FileCheck %s --check-prefix=LA64PIC

@g = dso_local global i32 zeroinitializer, align 4
@G = global i32 zeroinitializer, align 4

define void @foo() nounwind {
; LA32NOPIC-LABEL: foo:
; LA32NOPIC:       # %bb.0:
; LA32NOPIC-NEXT:    pcalau12i $a0, %got_hi20(G)
; LA32NOPIC-NEXT:    ld.w $a0, $a0, %got_lo12(G)
; LA32NOPIC-NEXT:    ld.w $a0, $a0, 0
; LA32NOPIC-NEXT:    pcalau12i $a0, %pc_hi20(g)
; LA32NOPIC-NEXT:    addi.w $a0, $a0, %pc_lo12(g)
; LA32NOPIC-NEXT:    ld.w $a0, $a0, 0
; LA32NOPIC-NEXT:    ret
;
; LA32PIC-LABEL: foo:
; LA32PIC:       # %bb.0:
; LA32PIC-NEXT:    pcalau12i $a0, %got_hi20(G)
; LA32PIC-NEXT:    ld.w $a0, $a0, %got_lo12(G)
; LA32PIC-NEXT:    ld.w $a0, $a0, 0
; LA32PIC-NEXT:    pcalau12i $a0, %pc_hi20(.Lg$local)
; LA32PIC-NEXT:    addi.w $a0, $a0, %pc_lo12(.Lg$local)
; LA32PIC-NEXT:    ld.w $a0, $a0, 0
; LA32PIC-NEXT:    ret
;
; LA64NOPIC-LABEL: foo:
; LA64NOPIC:       # %bb.0:
; LA64NOPIC-NEXT:    pcalau12i $a0, %got_hi20(G)
; LA64NOPIC-NEXT:    ld.d $a0, $a0, %got_lo12(G)
; LA64NOPIC-NEXT:    ld.w $a0, $a0, 0
; LA64NOPIC-NEXT:    pcalau12i $a0, %pc_hi20(g)
; LA64NOPIC-NEXT:    addi.d $a0, $a0, %pc_lo12(g)
; LA64NOPIC-NEXT:    ld.w $a0, $a0, 0
; LA64NOPIC-NEXT:    ret
;
; LA64PIC-LABEL: foo:
; LA64PIC:       # %bb.0:
; LA64PIC-NEXT:    pcalau12i $a0, %got_hi20(G)
; LA64PIC-NEXT:    ld.d $a0, $a0, %got_lo12(G)
; LA64PIC-NEXT:    ld.w $a0, $a0, 0
; LA64PIC-NEXT:    pcalau12i $a0, %pc_hi20(.Lg$local)
; LA64PIC-NEXT:    addi.d $a0, $a0, %pc_lo12(.Lg$local)
; LA64PIC-NEXT:    ld.w $a0, $a0, 0
; LA64PIC-NEXT:    ret
  %V = load volatile i32, ptr @G
  %v = load volatile i32, ptr @g
  ret void
}
