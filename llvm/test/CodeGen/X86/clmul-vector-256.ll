; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=x86_64-- -mattr=+avx,+pclmul | FileCheck %s --check-prefixes=AVX1
; RUN: llc < %s -mtriple=x86_64-- -mattr=+avx2,+pclmul | FileCheck %s --check-prefixes=AVX2
; RUN: llc < %s -mtriple=x86_64-- -mattr=+avx2,+vpclmulqdq | FileCheck %s --check-prefixes=AVX2
; RUN: llc < %s -mtriple=x86_64-- -mattr=+avx512vl,+vpclmulqdq | FileCheck %s --check-prefixes=AVX512

define <32 x i8> @clmul_v32i8(<32 x i8> %a, <32 x i8> %b) nounwind {
; AVX1-LABEL: clmul_v32i8:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm2
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm3
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm3, %ymm4, %ymm3
; AVX1-NEXT:    vbroadcastf128 {{.*#+}} ymm4 = [255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0]
; AVX1-NEXT:    # ymm4 = mem[0,1,0,1]
; AVX1-NEXT:    vandps %ymm4, %ymm3, %ymm7
; AVX1-NEXT:    vbroadcastss {{.*#+}} ymm3 = [255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0]
; AVX1-NEXT:    vpandn %xmm5, %xmm3, %xmm5
; AVX1-NEXT:    vpmaddubsw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vpsllw $8, %xmm5, %xmm5
; AVX1-NEXT:    vpandn %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpmaddubsw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpsllw $8, %xmm6, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vorps %ymm5, %ymm7, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmullw %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmullw %xmm6, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps %ymm4, %ymm8, %ymm8
; AVX1-NEXT:    vpandn %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpmaddubsw %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllw $8, %xmm6, %xmm6
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm2, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vorps %ymm6, %ymm8, %ymm6
; AVX1-NEXT:    vxorps %ymm5, %ymm6, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmullw %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmullw %xmm6, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps %ymm4, %ymm8, %ymm8
; AVX1-NEXT:    vpandn %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpmaddubsw %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllw $8, %xmm6, %xmm6
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm2, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vorps %ymm6, %ymm8, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmullw %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm7, %xmm0, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps %ymm4, %ymm9, %ymm9
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vpandn %xmm8, %xmm3, %xmm8
; AVX1-NEXT:    vpmaddubsw %xmm8, %xmm2, %xmm8
; AVX1-NEXT:    vpsllw $8, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vorps %ymm7, %ymm9, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmullw %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmullw %xmm6, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps %ymm4, %ymm8, %ymm8
; AVX1-NEXT:    vpandn %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpmaddubsw %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllw $8, %xmm6, %xmm6
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm2, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vorps %ymm6, %ymm8, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmullw %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm7, %xmm0, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps %ymm4, %ymm9, %ymm9
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vpandn %xmm8, %xmm3, %xmm8
; AVX1-NEXT:    vpmaddubsw %xmm8, %xmm2, %xmm8
; AVX1-NEXT:    vpsllw $8, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vorps %ymm7, %ymm9, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmullw %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm7, %xmm0, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps %ymm4, %ymm9, %ymm4
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vpandn %xmm8, %xmm3, %xmm8
; AVX1-NEXT:    vpmaddubsw %xmm8, %xmm2, %xmm8
; AVX1-NEXT:    vpsllw $8, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vorps %ymm7, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm5, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm1, %xmm0, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm7, %ymm6
; AVX1-NEXT:    vandps %ymm3, %ymm6, %ymm6
; AVX1-NEXT:    vpandn %xmm1, %xmm3, %xmm1
; AVX1-NEXT:    vpmaddubsw %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vpsllw $8, %xmm0, %xmm0
; AVX1-NEXT:    vpandn %xmm5, %xmm3, %xmm1
; AVX1-NEXT:    vpmaddubsw %xmm1, %xmm2, %xmm1
; AVX1-NEXT:    vpsllw $8, %xmm1, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    vorps %ymm0, %ymm6, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm4, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmul_v32i8:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpbroadcastw {{.*#+}} ymm2 = [255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]
; AVX2-NEXT:    vpand %ymm2, %ymm4, %ymm4
; AVX2-NEXT:    vpandn %ymm3, %ymm2, %ymm3
; AVX2-NEXT:    vpmaddubsw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpsllw $8, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpand %ymm2, %ymm5, %ymm5
; AVX2-NEXT:    vpandn %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpmaddubsw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllw $8, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpand %ymm2, %ymm5, %ymm5
; AVX2-NEXT:    vpandn %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpmaddubsw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllw $8, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX2-NEXT:    vpmullw %ymm5, %ymm0, %ymm6
; AVX2-NEXT:    vpand %ymm2, %ymm6, %ymm6
; AVX2-NEXT:    vpandn %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpmaddubsw %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllw $8, %ymm5, %ymm5
; AVX2-NEXT:    vpor %ymm5, %ymm6, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpand %ymm2, %ymm5, %ymm5
; AVX2-NEXT:    vpandn %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpmaddubsw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllw $8, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX2-NEXT:    vpmullw %ymm5, %ymm0, %ymm6
; AVX2-NEXT:    vpand %ymm2, %ymm6, %ymm6
; AVX2-NEXT:    vpandn %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpmaddubsw %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllw $8, %ymm5, %ymm5
; AVX2-NEXT:    vpor %ymm5, %ymm6, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX2-NEXT:    vpmullw %ymm5, %ymm0, %ymm6
; AVX2-NEXT:    vpand %ymm2, %ymm6, %ymm6
; AVX2-NEXT:    vpandn %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpmaddubsw %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllw $8, %ymm5, %ymm5
; AVX2-NEXT:    vpor %ymm5, %ymm6, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX2-NEXT:    vpmullw %ymm1, %ymm0, %ymm4
; AVX2-NEXT:    vpand %ymm2, %ymm4, %ymm4
; AVX2-NEXT:    vpandn %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpmaddubsw %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpsllw $8, %ymm0, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmul_v32i8:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm3
; AVX512-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]
; AVX512-NEXT:    vpandn %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpmaddubsw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllw $8, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 | (ymm3 & ymm4)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm3, %ymm4, %ymm3
; AVX512-NEXT:    vpmaddubsw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpsllw $8, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpmaddubsw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllw $8, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm3, %ymm4, %ymm3
; AVX512-NEXT:    vpmaddubsw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpsllw $8, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpmaddubsw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllw $8, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm3, %ymm4, %ymm3
; AVX512-NEXT:    vpmaddubsw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpsllw $8, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpmaddubsw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllw $8, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm1
; AVX512-NEXT:    vpmullw %ymm1, %ymm0, %ymm3
; AVX512-NEXT:    vpand %ymm4, %ymm3, %ymm3
; AVX512-NEXT:    vpandn %ymm1, %ymm4, %ymm1
; AVX512-NEXT:    vpmaddubsw %ymm1, %ymm0, %ymm0
; AVX512-NEXT:    vpsllw $8, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    retq
  %res = call <32 x i8> @llvm.clmul.v32i8(<32 x i8> %a, <32 x i8> %b)
  ret <32 x i8> %res
}

define <16 x i16> @clmul_v16i16(<16 x i16> %a, <16 x i16> %b) nounwind {
; AVX1-LABEL: clmul_v16i16:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm2
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX1-NEXT:    vextractf128 $1, %ymm3, %xmm4
; AVX1-NEXT:    vpmullw %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpmullw %xmm3, %xmm0, %xmm3
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm3, %ymm4, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm2
; AVX1-NEXT:    vpmullw %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm2, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm4, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm3, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmul_v16i16:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm2
; AVX2-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX2-NEXT:    vpmullw %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmul_v16i16:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm2 ^ ymm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm1
; AVX512-NEXT:    vpmullw %ymm1, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm0 ^ ymm3 ^ ymm2
; AVX512-NEXT:    retq
  %res = call <16 x i16> @llvm.clmul.v16i16(<16 x i16> %a, <16 x i16> %b)
  ret <16 x i16> %res
}

define <8 x i32> @clmul_v8i32(<8 x i32> %a, <8 x i32> %b) nounwind {
; AVX1-LABEL: clmul_v8i32:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm2
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX1-NEXT:    vextractf128 $1, %ymm3, %xmm4
; AVX1-NEXT:    vpmulld %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpmulld %xmm3, %xmm0, %xmm3
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm3, %ymm4, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm2
; AVX1-NEXT:    vpmulld %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm2, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm4, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm3, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmul_v8i32:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm2 = [2,2,2,2,2,2,2,2]
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm2
; AVX2-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [1,1,1,1,1,1,1,1]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [4,4,4,4,4,4,4,4]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [8,8,8,8,8,8,8,8]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [16,16,16,16,16,16,16,16]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [32,32,32,32,32,32,32,32]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [64,64,64,64,64,64,64,64]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [128,128,128,128,128,128,128,128]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [256,256,256,256,256,256,256,256]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [512,512,512,512,512,512,512,512]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [1024,1024,1024,1024,1024,1024,1024,1024]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [2048,2048,2048,2048,2048,2048,2048,2048]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [4096,4096,4096,4096,4096,4096,4096,4096]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [8192,8192,8192,8192,8192,8192,8192,8192]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [16384,16384,16384,16384,16384,16384,16384,16384]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [32768,32768,32768,32768,32768,32768,32768,32768]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [65536,65536,65536,65536,65536,65536,65536,65536]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [131072,131072,131072,131072,131072,131072,131072,131072]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [262144,262144,262144,262144,262144,262144,262144,262144]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [524288,524288,524288,524288,524288,524288,524288,524288]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [1048576,1048576,1048576,1048576,1048576,1048576,1048576,1048576]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [2097152,2097152,2097152,2097152,2097152,2097152,2097152,2097152]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [4194304,4194304,4194304,4194304,4194304,4194304,4194304,4194304]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [8388608,8388608,8388608,8388608,8388608,8388608,8388608,8388608]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [16777216,16777216,16777216,16777216,16777216,16777216,16777216,16777216]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [33554432,33554432,33554432,33554432,33554432,33554432,33554432,33554432]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [67108864,67108864,67108864,67108864,67108864,67108864,67108864,67108864]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [134217728,134217728,134217728,134217728,134217728,134217728,134217728,134217728]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [268435456,268435456,268435456,268435456,268435456,268435456,268435456,268435456]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [536870912,536870912,536870912,536870912,536870912,536870912,536870912,536870912]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [1073741824,1073741824,1073741824,1073741824,1073741824,1073741824,1073741824,1073741824]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [2147483648,2147483648,2147483648,2147483648,2147483648,2147483648,2147483648,2147483648]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm1
; AVX2-NEXT:    vpmulld %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmul_v8i32:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm2 ^ ymm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm1
; AVX512-NEXT:    vpmulld %ymm1, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm0 = ymm0 ^ ymm3 ^ ymm2
; AVX512-NEXT:    retq
  %res = call <8 x i32> @llvm.clmul.v8i32(<8 x i32> %a, <8 x i32> %b)
  ret <8 x i32> %res
}

define <4 x i64> @clmul_v4i64(<4 x i64> %a, <4 x i64> %b) nounwind {
; AVX1-LABEL: clmul_v4i64:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm2
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm6
; AVX1-NEXT:    vpsrlq $32, %xmm2, %xmm3
; AVX1-NEXT:    vpmuludq %xmm4, %xmm3, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpor %xmm4, %xmm6, %xmm6
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm7
; AVX1-NEXT:    vpsrlq $32, %xmm0, %xmm4
; AVX1-NEXT:    vpmuludq %xmm5, %xmm4, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpor %xmm5, %xmm7, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm5, %ymm6, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm3
; AVX1-NEXT:    vpsllq $32, %xmm3, %xmm3
; AVX1-NEXT:    vpor %xmm3, %xmm9, %xmm3
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpor %xmm4, %xmm8, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm3, %ymm4, %ymm3
; AVX1-NEXT:    vxorps %ymm3, %ymm6, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vxorps %ymm3, %ymm5, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm5, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm5, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm5, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vpsrlq $32, %xmm1, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm0
; AVX1-NEXT:    vpsllq $32, %xmm0, %xmm0
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm1
; AVX1-NEXT:    vpsrlq $32, %xmm1, %xmm1
; AVX1-NEXT:    vpmuludq %xmm1, %xmm2, %xmm1
; AVX1-NEXT:    vpsllq $32, %xmm1, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm4, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm3, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmul_v4i64:
; AVX2:       # %bb.0:
; AVX2-NEXT:    subq $584, %rsp # imm = 0x248
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [2,2,2,2]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm0, %ymm3
; AVX2-NEXT:    vpsrlq $32, %ymm0, %ymm6
; AVX2-NEXT:    vpmuludq %ymm2, %ymm6, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [1,1,1,1]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [4,4,4,4]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [8,8,8,8]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [16,16,16,16]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [32,32,32,32]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [64,64,64,64]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [128,128,128,128]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [256,256,256,256]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [512,512,512,512]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [1024,1024,1024,1024]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [2048,2048,2048,2048]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [4096,4096,4096,4096]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [8192,8192,8192,8192]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [16384,16384,16384,16384]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [32768,32768,32768,32768]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [65536,65536,65536,65536]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [131072,131072,131072,131072]
; AVX2-NEXT:    vmovdqu %ymm4, (%rsp) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [262144,262144,262144,262144]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [524288,524288,524288,524288]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [1048576,1048576,1048576,1048576]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [2097152,2097152,2097152,2097152]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm15 = [4194304,4194304,4194304,4194304]
; AVX2-NEXT:    vpand %ymm1, %ymm15, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm14 = [8388608,8388608,8388608,8388608]
; AVX2-NEXT:    vpand %ymm1, %ymm14, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm13 = [16777216,16777216,16777216,16777216]
; AVX2-NEXT:    vpand %ymm1, %ymm13, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm12 = [33554432,33554432,33554432,33554432]
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm11 = [67108864,67108864,67108864,67108864]
; AVX2-NEXT:    vpand %ymm1, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm10 = [134217728,134217728,134217728,134217728]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm9 = [268435456,268435456,268435456,268435456]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm5
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm8 = [536870912,536870912,536870912,536870912]
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm4
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm7 = [1073741824,1073741824,1073741824,1073741824]
; AVX2-NEXT:    vpand %ymm7, %ymm1, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm0, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm6, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm4, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [2147483648,2147483648,2147483648,2147483648]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm6
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm6, %ymm6
; AVX2-NEXT:    vpor %ymm6, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpsrlq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm6
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand (%rsp), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm15, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm14, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm13, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm6, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm5
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm5
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm5
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm7, %ymm1, %ymm5
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    addq $584, %rsp # imm = 0x248
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmul_v4i64:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm3
; AVX512-NEXT:    vpsrlq $32, %ymm0, %ymm5
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm8 = [32,32,32,32]
; AVX512-NEXT:    vpand %ymm1, %ymm8, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm9 = [64,64,64,64]
; AVX512-NEXT:    vpand %ymm1, %ymm9, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm10 = [128,128,128,128]
; AVX512-NEXT:    vpand %ymm1, %ymm10, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm11 = [256,256,256,256]
; AVX512-NEXT:    vpand %ymm1, %ymm11, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm12 = [512,512,512,512]
; AVX512-NEXT:    vpand %ymm1, %ymm12, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm13 = [1024,1024,1024,1024]
; AVX512-NEXT:    vpand %ymm1, %ymm13, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm14 = [2048,2048,2048,2048]
; AVX512-NEXT:    vpand %ymm1, %ymm14, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm15 = [4096,4096,4096,4096]
; AVX512-NEXT:    vpand %ymm1, %ymm15, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm16 = [8192,8192,8192,8192]
; AVX512-NEXT:    vpandq %ymm16, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm17 = [16384,16384,16384,16384]
; AVX512-NEXT:    vpandq %ymm17, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm18 = [32768,32768,32768,32768]
; AVX512-NEXT:    vpandq %ymm18, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm19 = [65536,65536,65536,65536]
; AVX512-NEXT:    vpandq %ymm19, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm20 = [131072,131072,131072,131072]
; AVX512-NEXT:    vpandq %ymm20, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm21 = [262144,262144,262144,262144]
; AVX512-NEXT:    vpandq %ymm21, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm22 = [524288,524288,524288,524288]
; AVX512-NEXT:    vpandq %ymm22, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm23 = [1048576,1048576,1048576,1048576]
; AVX512-NEXT:    vpandq %ymm23, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm24 = [2097152,2097152,2097152,2097152]
; AVX512-NEXT:    vpandq %ymm24, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm25 = [4194304,4194304,4194304,4194304]
; AVX512-NEXT:    vpandq %ymm25, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm26 = [8388608,8388608,8388608,8388608]
; AVX512-NEXT:    vpandq %ymm26, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm27 = [16777216,16777216,16777216,16777216]
; AVX512-NEXT:    vpandq %ymm27, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm28 = [33554432,33554432,33554432,33554432]
; AVX512-NEXT:    vpandq %ymm28, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm29 = [67108864,67108864,67108864,67108864]
; AVX512-NEXT:    vpandq %ymm29, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm30 = [134217728,134217728,134217728,134217728]
; AVX512-NEXT:    vpandq %ymm30, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm31 = [268435456,268435456,268435456,268435456]
; AVX512-NEXT:    vpandq %ymm31, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm7 = [536870912,536870912,536870912,536870912]
; AVX512-NEXT:    vpand %ymm7, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm6 = [1073741824,1073741824,1073741824,1073741824]
; AVX512-NEXT:    vpand %ymm6, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [2147483648,2147483648,2147483648,2147483648]
; AVX512-NEXT:    vpand %ymm3, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm2 ^ (ymm5 | ymm4)
; AVX512-NEXT:    vpsrlq $32, %ymm1, %ymm1
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm8, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm9, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm10, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm11, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm12, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm13, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm14, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm15, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm16, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq %ymm17, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm18, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq %ymm19, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm20, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq %ymm21, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm22, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq %ymm23, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm24, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq %ymm25, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm26, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq %ymm27, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm28, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq %ymm29, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm30, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq %ymm31, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm7, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpand %ymm6, %ymm1, %ymm2
; AVX512-NEXT:    vpand %ymm3, %ymm1, %ymm1
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpmuludq %ymm1, %ymm0, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm0 ^ ymm4 ^ ymm1
; AVX512-NEXT:    retq
  %res = call <4 x i64> @llvm.clmul.v4i64(<4 x i64> %a, <4 x i64> %b)
  ret <4 x i64> %res
}
