; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=x86_64-- -mattr=+avx,+pclmul | FileCheck %s --check-prefixes=AVX1
; RUN: llc < %s -mtriple=x86_64-- -mattr=+avx2,+pclmul | FileCheck %s --check-prefixes=AVX2
; RUN: llc < %s -mtriple=x86_64-- -mattr=+avx2,+vpclmulqdq | FileCheck %s --check-prefixes=AVX2
; RUN: llc < %s -mtriple=x86_64-- -mattr=+avx512vl,+vpclmulqdq | FileCheck %s --check-prefixes=AVX512

define <32 x i8> @clmul_v32i8(<32 x i8> %a, <32 x i8> %b) nounwind {
; AVX1-LABEL: clmul_v32i8:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm2
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm3
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm3, %ymm4, %ymm3
; AVX1-NEXT:    vbroadcastf128 {{.*#+}} ymm4 = [255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0]
; AVX1-NEXT:    # ymm4 = mem[0,1,0,1]
; AVX1-NEXT:    vandps %ymm4, %ymm3, %ymm7
; AVX1-NEXT:    vbroadcastss {{.*#+}} ymm3 = [255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0]
; AVX1-NEXT:    vpandn %xmm5, %xmm3, %xmm5
; AVX1-NEXT:    vpmaddubsw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vpsllw $8, %xmm5, %xmm5
; AVX1-NEXT:    vpandn %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpmaddubsw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpsllw $8, %xmm6, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vorps %ymm5, %ymm7, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmullw %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmullw %xmm6, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps %ymm4, %ymm8, %ymm8
; AVX1-NEXT:    vpandn %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpmaddubsw %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllw $8, %xmm6, %xmm6
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm2, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vorps %ymm6, %ymm8, %ymm6
; AVX1-NEXT:    vxorps %ymm5, %ymm6, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmullw %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmullw %xmm6, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps %ymm4, %ymm8, %ymm8
; AVX1-NEXT:    vpandn %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpmaddubsw %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllw $8, %xmm6, %xmm6
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm2, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vorps %ymm6, %ymm8, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmullw %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm7, %xmm0, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps %ymm4, %ymm9, %ymm9
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vpandn %xmm8, %xmm3, %xmm8
; AVX1-NEXT:    vpmaddubsw %xmm8, %xmm2, %xmm8
; AVX1-NEXT:    vpsllw $8, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vorps %ymm7, %ymm9, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmullw %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmullw %xmm6, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps %ymm4, %ymm8, %ymm8
; AVX1-NEXT:    vpandn %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpmaddubsw %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllw $8, %xmm6, %xmm6
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm2, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vorps %ymm6, %ymm8, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmullw %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm7, %xmm0, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps %ymm4, %ymm9, %ymm9
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vpandn %xmm8, %xmm3, %xmm8
; AVX1-NEXT:    vpmaddubsw %xmm8, %xmm2, %xmm8
; AVX1-NEXT:    vpsllw $8, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vorps %ymm7, %ymm9, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmullw %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm7, %xmm0, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps %ymm4, %ymm9, %ymm4
; AVX1-NEXT:    vpandn %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpmaddubsw %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vpsllw $8, %xmm7, %xmm7
; AVX1-NEXT:    vpandn %xmm8, %xmm3, %xmm8
; AVX1-NEXT:    vpmaddubsw %xmm8, %xmm2, %xmm8
; AVX1-NEXT:    vpsllw $8, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vorps %ymm7, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm5, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm1, %xmm0, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm7, %ymm6
; AVX1-NEXT:    vandps %ymm3, %ymm6, %ymm6
; AVX1-NEXT:    vpandn %xmm1, %xmm3, %xmm1
; AVX1-NEXT:    vpmaddubsw %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vpsllw $8, %xmm0, %xmm0
; AVX1-NEXT:    vpandn %xmm5, %xmm3, %xmm1
; AVX1-NEXT:    vpmaddubsw %xmm1, %xmm2, %xmm1
; AVX1-NEXT:    vpsllw $8, %xmm1, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    vorps %ymm0, %ymm6, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm4, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmul_v32i8:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpbroadcastw {{.*#+}} ymm2 = [255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]
; AVX2-NEXT:    vpand %ymm2, %ymm4, %ymm4
; AVX2-NEXT:    vpandn %ymm3, %ymm2, %ymm3
; AVX2-NEXT:    vpmaddubsw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpsllw $8, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpand %ymm2, %ymm5, %ymm5
; AVX2-NEXT:    vpandn %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpmaddubsw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllw $8, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpand %ymm2, %ymm5, %ymm5
; AVX2-NEXT:    vpandn %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpmaddubsw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllw $8, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX2-NEXT:    vpmullw %ymm5, %ymm0, %ymm6
; AVX2-NEXT:    vpand %ymm2, %ymm6, %ymm6
; AVX2-NEXT:    vpandn %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpmaddubsw %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllw $8, %ymm5, %ymm5
; AVX2-NEXT:    vpor %ymm5, %ymm6, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpand %ymm2, %ymm5, %ymm5
; AVX2-NEXT:    vpandn %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpmaddubsw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllw $8, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX2-NEXT:    vpmullw %ymm5, %ymm0, %ymm6
; AVX2-NEXT:    vpand %ymm2, %ymm6, %ymm6
; AVX2-NEXT:    vpandn %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpmaddubsw %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllw $8, %ymm5, %ymm5
; AVX2-NEXT:    vpor %ymm5, %ymm6, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX2-NEXT:    vpmullw %ymm5, %ymm0, %ymm6
; AVX2-NEXT:    vpand %ymm2, %ymm6, %ymm6
; AVX2-NEXT:    vpandn %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpmaddubsw %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllw $8, %ymm5, %ymm5
; AVX2-NEXT:    vpor %ymm5, %ymm6, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX2-NEXT:    vpmullw %ymm1, %ymm0, %ymm4
; AVX2-NEXT:    vpand %ymm2, %ymm4, %ymm4
; AVX2-NEXT:    vpandn %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpmaddubsw %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpsllw $8, %ymm0, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmul_v32i8:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm3
; AVX512-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]
; AVX512-NEXT:    vpandn %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpmaddubsw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllw $8, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 | (ymm3 & ymm4)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm3, %ymm4, %ymm3
; AVX512-NEXT:    vpmaddubsw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpsllw $8, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpmaddubsw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllw $8, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm3, %ymm4, %ymm3
; AVX512-NEXT:    vpmaddubsw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpsllw $8, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpmaddubsw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllw $8, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm3, %ymm4, %ymm3
; AVX512-NEXT:    vpmaddubsw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpsllw $8, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm5
; AVX512-NEXT:    vpand %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpandn %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpmaddubsw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllw $8, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm5)
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm1
; AVX512-NEXT:    vpmullw %ymm1, %ymm0, %ymm3
; AVX512-NEXT:    vpand %ymm4, %ymm3, %ymm3
; AVX512-NEXT:    vpandn %ymm1, %ymm4, %ymm1
; AVX512-NEXT:    vpmaddubsw %ymm1, %ymm0, %ymm0
; AVX512-NEXT:    vpsllw $8, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    retq
  %res = call <32 x i8> @llvm.clmul.v32i8(<32 x i8> %a, <32 x i8> %b)
  ret <32 x i8> %res
}

define <16 x i16> @clmul_v16i16(<16 x i16> %a, <16 x i16> %b) nounwind {
; AVX1-LABEL: clmul_v16i16:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm2
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX1-NEXT:    vextractf128 $1, %ymm3, %xmm4
; AVX1-NEXT:    vpmullw %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpmullw %xmm3, %xmm0, %xmm3
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm3, %ymm4, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmullw %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm5
; AVX1-NEXT:    vpmullw %xmm5, %xmm2, %xmm2
; AVX1-NEXT:    vpmullw %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm2, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm4, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm3, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmul_v16i16:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm2
; AVX2-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX2-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX2-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX2-NEXT:    vpmullw %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmul_v16i16:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm2 ^ ymm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm1
; AVX512-NEXT:    vpmullw %ymm1, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm0 ^ ymm3 ^ ymm2
; AVX512-NEXT:    retq
  %res = call <16 x i16> @llvm.clmul.v16i16(<16 x i16> %a, <16 x i16> %b)
  ret <16 x i16> %res
}

define <8 x i32> @clmul_v8i32(<8 x i32> %a, <8 x i32> %b) nounwind {
; AVX1-LABEL: clmul_v8i32:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm2
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm3
; AVX1-NEXT:    vextractf128 $1, %ymm3, %xmm4
; AVX1-NEXT:    vpmulld %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpmulld %xmm3, %xmm0, %xmm3
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm3, %ymm4, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpmulld %xmm4, %xmm0, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm6
; AVX1-NEXT:    vpmulld %xmm6, %xmm2, %xmm6
; AVX1-NEXT:    vpmulld %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm5
; AVX1-NEXT:    vpmulld %xmm5, %xmm2, %xmm2
; AVX1-NEXT:    vpmulld %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm2, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm4, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm3, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmul_v8i32:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm2 = [2,2,2,2,2,2,2,2]
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm2
; AVX2-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [1,1,1,1,1,1,1,1]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [4,4,4,4,4,4,4,4]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [8,8,8,8,8,8,8,8]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [16,16,16,16,16,16,16,16]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [32,32,32,32,32,32,32,32]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [64,64,64,64,64,64,64,64]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [128,128,128,128,128,128,128,128]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [256,256,256,256,256,256,256,256]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [512,512,512,512,512,512,512,512]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [1024,1024,1024,1024,1024,1024,1024,1024]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [2048,2048,2048,2048,2048,2048,2048,2048]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [4096,4096,4096,4096,4096,4096,4096,4096]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [8192,8192,8192,8192,8192,8192,8192,8192]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [16384,16384,16384,16384,16384,16384,16384,16384]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [32768,32768,32768,32768,32768,32768,32768,32768]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [65536,65536,65536,65536,65536,65536,65536,65536]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [131072,131072,131072,131072,131072,131072,131072,131072]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [262144,262144,262144,262144,262144,262144,262144,262144]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [524288,524288,524288,524288,524288,524288,524288,524288]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [1048576,1048576,1048576,1048576,1048576,1048576,1048576,1048576]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [2097152,2097152,2097152,2097152,2097152,2097152,2097152,2097152]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [4194304,4194304,4194304,4194304,4194304,4194304,4194304,4194304]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [8388608,8388608,8388608,8388608,8388608,8388608,8388608,8388608]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [16777216,16777216,16777216,16777216,16777216,16777216,16777216,16777216]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [33554432,33554432,33554432,33554432,33554432,33554432,33554432,33554432]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [67108864,67108864,67108864,67108864,67108864,67108864,67108864,67108864]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [134217728,134217728,134217728,134217728,134217728,134217728,134217728,134217728]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [268435456,268435456,268435456,268435456,268435456,268435456,268435456,268435456]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm3 = [536870912,536870912,536870912,536870912,536870912,536870912,536870912,536870912]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [1073741824,1073741824,1073741824,1073741824,1073741824,1073741824,1073741824,1073741824]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm4 = [2147483648,2147483648,2147483648,2147483648,2147483648,2147483648,2147483648,2147483648]
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm1
; AVX2-NEXT:    vpmulld %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmul_v8i32:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm2 ^ ymm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm4
; AVX512-NEXT:    vpmulld %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm4 = ymm4 ^ ymm3 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm3
; AVX512-NEXT:    vpmulld %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm3 = ymm3 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm2
; AVX512-NEXT:    vpmulld %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %ymm1, %ymm1
; AVX512-NEXT:    vpmulld %ymm1, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogd {{.*#+}} ymm0 = ymm0 ^ ymm3 ^ ymm2
; AVX512-NEXT:    retq
  %res = call <8 x i32> @llvm.clmul.v8i32(<8 x i32> %a, <8 x i32> %b)
  ret <8 x i32> %res
}

define <4 x i64> @clmul_v4i64(<4 x i64> %a, <4 x i64> %b) nounwind {
; AVX1-LABEL: clmul_v4i64:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm2
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm6
; AVX1-NEXT:    vpsrlq $32, %xmm2, %xmm3
; AVX1-NEXT:    vpmuludq %xmm4, %xmm3, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpor %xmm4, %xmm6, %xmm6
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm7
; AVX1-NEXT:    vpsrlq $32, %xmm0, %xmm4
; AVX1-NEXT:    vpmuludq %xmm5, %xmm4, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpor %xmm5, %xmm7, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm5, %ymm6, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vxorps %ymm6, %ymm5, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX1-NEXT:    vextractf128 $1, %ymm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm2, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm8, %xmm7
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm8, %xmm6
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm9, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm9
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm9, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm6, %ymm6
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vpmuludq %xmm2, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm3, %xmm8, %xmm3
; AVX1-NEXT:    vpsllq $32, %xmm3, %xmm3
; AVX1-NEXT:    vpor %xmm3, %xmm9, %xmm3
; AVX1-NEXT:    vpmuludq %xmm7, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm7, %xmm4, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpor %xmm4, %xmm8, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm3, %ymm4, %ymm3
; AVX1-NEXT:    vxorps %ymm3, %ymm6, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm6, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vxorps %ymm3, %ymm5, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm5, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm5, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vxorps %ymm4, %ymm3, %ymm3
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vextractf128 $1, %ymm4, %xmm4
; AVX1-NEXT:    vpsrlq $32, %xmm4, %xmm4
; AVX1-NEXT:    vpmuludq %xmm4, %xmm2, %xmm4
; AVX1-NEXT:    vpsllq $32, %xmm4, %xmm4
; AVX1-NEXT:    vinsertf128 $1, %xmm4, %ymm5, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm0, %xmm6
; AVX1-NEXT:    vpsllq $32, %xmm6, %xmm6
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm5
; AVX1-NEXT:    vpsrlq $32, %xmm5, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm2, %xmm5
; AVX1-NEXT:    vpsllq $32, %xmm5, %xmm5
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm6, %ymm5
; AVX1-NEXT:    vxorps %ymm5, %ymm4, %ymm4
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vpsrlq $32, %xmm1, %xmm5
; AVX1-NEXT:    vpmuludq %xmm5, %xmm0, %xmm0
; AVX1-NEXT:    vpsllq $32, %xmm0, %xmm0
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm1
; AVX1-NEXT:    vpsrlq $32, %xmm1, %xmm1
; AVX1-NEXT:    vpmuludq %xmm1, %xmm2, %xmm1
; AVX1-NEXT:    vpsllq $32, %xmm1, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm4, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm3, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmul_v4i64:
; AVX2:       # %bb.0:
; AVX2-NEXT:    subq $584, %rsp # imm = 0x248
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [2,2,2,2]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm0, %ymm3
; AVX2-NEXT:    vpsrlq $32, %ymm0, %ymm6
; AVX2-NEXT:    vpmuludq %ymm2, %ymm6, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [1,1,1,1]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpxor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [4,4,4,4]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [8,8,8,8]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [16,16,16,16]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [32,32,32,32]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [64,64,64,64]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [128,128,128,128]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [256,256,256,256]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [512,512,512,512]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [1024,1024,1024,1024]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [2048,2048,2048,2048]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [4096,4096,4096,4096]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [8192,8192,8192,8192]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [16384,16384,16384,16384]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [32768,32768,32768,32768]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [65536,65536,65536,65536]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [131072,131072,131072,131072]
; AVX2-NEXT:    vmovdqu %ymm4, (%rsp) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [262144,262144,262144,262144]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [524288,524288,524288,524288]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [1048576,1048576,1048576,1048576]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm4 = [2097152,2097152,2097152,2097152]
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm4, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm15 = [4194304,4194304,4194304,4194304]
; AVX2-NEXT:    vpand %ymm1, %ymm15, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm14 = [8388608,8388608,8388608,8388608]
; AVX2-NEXT:    vpand %ymm1, %ymm14, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm13 = [16777216,16777216,16777216,16777216]
; AVX2-NEXT:    vpand %ymm1, %ymm13, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm12 = [33554432,33554432,33554432,33554432]
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm11 = [67108864,67108864,67108864,67108864]
; AVX2-NEXT:    vpand %ymm1, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm10 = [134217728,134217728,134217728,134217728]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm9 = [268435456,268435456,268435456,268435456]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm5
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpor %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm5
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm8 = [536870912,536870912,536870912,536870912]
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm6, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm4
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm7 = [1073741824,1073741824,1073741824,1073741824]
; AVX2-NEXT:    vpand %ymm7, %ymm1, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm0, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm6, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm4, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [2147483648,2147483648,2147483648,2147483648]
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm6, %ymm6
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm6, %ymm6
; AVX2-NEXT:    vpor %ymm6, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpsrlq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm5 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm6
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand (%rsp), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm1, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm15, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm14, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm13, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm6, %ymm2
; AVX2-NEXT:    vpand %ymm1, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm5
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm5
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm5
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm7, %ymm1, %ymm5
; AVX2-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX2-NEXT:    vpxor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpand %ymm3, %ymm1, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    addq $584, %rsp # imm = 0x248
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmul_v4i64:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm3
; AVX512-NEXT:    vpsrlq $32, %ymm0, %ymm5
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm8 = [32,32,32,32]
; AVX512-NEXT:    vpand %ymm1, %ymm8, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm9 = [64,64,64,64]
; AVX512-NEXT:    vpand %ymm1, %ymm9, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm10 = [128,128,128,128]
; AVX512-NEXT:    vpand %ymm1, %ymm10, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm11 = [256,256,256,256]
; AVX512-NEXT:    vpand %ymm1, %ymm11, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm12 = [512,512,512,512]
; AVX512-NEXT:    vpand %ymm1, %ymm12, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm13 = [1024,1024,1024,1024]
; AVX512-NEXT:    vpand %ymm1, %ymm13, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm14 = [2048,2048,2048,2048]
; AVX512-NEXT:    vpand %ymm1, %ymm14, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm15 = [4096,4096,4096,4096]
; AVX512-NEXT:    vpand %ymm1, %ymm15, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm16 = [8192,8192,8192,8192]
; AVX512-NEXT:    vpandq %ymm16, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm17 = [16384,16384,16384,16384]
; AVX512-NEXT:    vpandq %ymm17, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm18 = [32768,32768,32768,32768]
; AVX512-NEXT:    vpandq %ymm18, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm19 = [65536,65536,65536,65536]
; AVX512-NEXT:    vpandq %ymm19, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm20 = [131072,131072,131072,131072]
; AVX512-NEXT:    vpandq %ymm20, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm21 = [262144,262144,262144,262144]
; AVX512-NEXT:    vpandq %ymm21, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm22 = [524288,524288,524288,524288]
; AVX512-NEXT:    vpandq %ymm22, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm23 = [1048576,1048576,1048576,1048576]
; AVX512-NEXT:    vpandq %ymm23, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm24 = [2097152,2097152,2097152,2097152]
; AVX512-NEXT:    vpandq %ymm24, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm25 = [4194304,4194304,4194304,4194304]
; AVX512-NEXT:    vpandq %ymm25, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm26 = [8388608,8388608,8388608,8388608]
; AVX512-NEXT:    vpandq %ymm26, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm27 = [16777216,16777216,16777216,16777216]
; AVX512-NEXT:    vpandq %ymm27, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm28 = [33554432,33554432,33554432,33554432]
; AVX512-NEXT:    vpandq %ymm28, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm29 = [67108864,67108864,67108864,67108864]
; AVX512-NEXT:    vpandq %ymm29, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm30 = [134217728,134217728,134217728,134217728]
; AVX512-NEXT:    vpandq %ymm30, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm31 = [268435456,268435456,268435456,268435456]
; AVX512-NEXT:    vpandq %ymm31, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm7 = [536870912,536870912,536870912,536870912]
; AVX512-NEXT:    vpand %ymm7, %ymm1, %ymm3
; AVX512-NEXT:    vpmuludq %ymm3, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX512-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm2 ^ (ymm3 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm6 = [1073741824,1073741824,1073741824,1073741824]
; AVX512-NEXT:    vpand %ymm6, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm4
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm3 ^ (ymm2 | ymm4)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [2147483648,2147483648,2147483648,2147483648]
; AVX512-NEXT:    vpand %ymm3, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm5, %ymm5
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm2 ^ (ymm5 | ymm4)
; AVX512-NEXT:    vpsrlq $32, %ymm1, %ymm1
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm8, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm9, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm10, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm11, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm12, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm13, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm14, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpand %ymm1, %ymm15, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm16, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq %ymm17, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm18, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq %ymm19, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm20, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq %ymm21, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm22, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq %ymm23, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm24, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq %ymm25, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm26, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq %ymm27, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm28, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpandq %ymm29, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpandq %ymm30, %ymm1, %ymm5
; AVX512-NEXT:    vpmuludq %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vpsllq $32, %ymm5, %ymm5
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm5 = ymm5 ^ ymm4 ^ ymm2
; AVX512-NEXT:    vpandq %ymm31, %ymm1, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpand %ymm7, %ymm1, %ymm4
; AVX512-NEXT:    vpmuludq %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 ^ ymm5 ^ ymm2
; AVX512-NEXT:    vpand %ymm6, %ymm1, %ymm2
; AVX512-NEXT:    vpand %ymm3, %ymm1, %ymm1
; AVX512-NEXT:    vpmuludq %ymm2, %ymm0, %ymm2
; AVX512-NEXT:    vpmuludq %ymm1, %ymm0, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm0 ^ ymm4 ^ ymm1
; AVX512-NEXT:    retq
  %res = call <4 x i64> @llvm.clmul.v4i64(<4 x i64> %a, <4 x i64> %b)
  ret <4 x i64> %res
}

define <32 x i8> @clmulr_v32i8(<32 x i8> %a, <32 x i8> %b) nounwind {
; AVX1-LABEL: clmulr_v32i8:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm4
; AVX1-NEXT:    vbroadcastss {{.*#+}} xmm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX1-NEXT:    vpand %xmm2, %xmm4, %xmm5
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm3 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX1-NEXT:    vpshufb %xmm5, %xmm3, %xmm5
; AVX1-NEXT:    vpsrlw $4, %xmm4, %xmm4
; AVX1-NEXT:    vpand %xmm2, %xmm4, %xmm6
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm4 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm5, %xmm5
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm4, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm1, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm4, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpmullw %xmm1, %xmm9, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm4, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm7, %xmm0
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm7, %ymm6
; AVX1-NEXT:    vbroadcastf128 {{.*#+}} ymm7 = [255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0]
; AVX1-NEXT:    # ymm7 = mem[0,1,0,1]
; AVX1-NEXT:    vandps %ymm7, %ymm6, %ymm10
; AVX1-NEXT:    vbroadcastss {{.*#+}} ymm6 = [255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0]
; AVX1-NEXT:    vpandn %xmm8, %xmm6, %xmm8
; AVX1-NEXT:    vpmaddubsw %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vpsllw $8, %xmm8, %xmm8
; AVX1-NEXT:    vpandn %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmaddubsw %xmm9, %xmm1, %xmm9
; AVX1-NEXT:    vpsllw $8, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vorps %ymm8, %ymm10, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm1, %xmm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm12
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm12, %ymm11
; AVX1-NEXT:    vandps %ymm7, %ymm11, %ymm11
; AVX1-NEXT:    vpandn %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmaddubsw %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vpsllw $8, %xmm9, %xmm9
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm1, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vorps %ymm9, %ymm11, %ymm9
; AVX1-NEXT:    vxorps %ymm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm1, %xmm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm12
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm12, %ymm11
; AVX1-NEXT:    vandps %ymm7, %ymm11, %ymm11
; AVX1-NEXT:    vpandn %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmaddubsw %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vpsllw $8, %xmm9, %xmm9
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm1, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vorps %ymm9, %ymm11, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm1, %xmm11, %xmm12
; AVX1-NEXT:    vpmullw %xmm0, %xmm10, %xmm13
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm13, %ymm12
; AVX1-NEXT:    vandps %ymm7, %ymm12, %ymm12
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm0, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vpandn %xmm11, %xmm6, %xmm11
; AVX1-NEXT:    vpmaddubsw %xmm11, %xmm1, %xmm11
; AVX1-NEXT:    vpsllw $8, %xmm11, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vorps %ymm10, %ymm12, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm1, %xmm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm12
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm12, %ymm11
; AVX1-NEXT:    vandps %ymm7, %ymm11, %ymm11
; AVX1-NEXT:    vpandn %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmaddubsw %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vpsllw $8, %xmm9, %xmm9
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm1, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vorps %ymm9, %ymm11, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm1, %xmm11, %xmm12
; AVX1-NEXT:    vpmullw %xmm0, %xmm10, %xmm13
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm13, %ymm12
; AVX1-NEXT:    vandps %ymm7, %ymm12, %ymm12
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm0, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vpandn %xmm11, %xmm6, %xmm11
; AVX1-NEXT:    vpmaddubsw %xmm11, %xmm1, %xmm11
; AVX1-NEXT:    vpsllw $8, %xmm11, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vorps %ymm10, %ymm12, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm1, %xmm11, %xmm12
; AVX1-NEXT:    vpmullw %xmm0, %xmm10, %xmm13
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm13, %ymm12
; AVX1-NEXT:    vandps %ymm7, %ymm12, %ymm7
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm0, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vpandn %xmm11, %xmm6, %xmm11
; AVX1-NEXT:    vpmaddubsw %xmm11, %xmm1, %xmm11
; AVX1-NEXT:    vpsllw $8, %xmm11, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vorps %ymm7, %ymm10, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm9, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm8
; AVX1-NEXT:    vpmullw %xmm1, %xmm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps %ymm6, %ymm9, %ymm9
; AVX1-NEXT:    vpandn %xmm5, %xmm6, %xmm5
; AVX1-NEXT:    vpmaddubsw %xmm5, %xmm0, %xmm0
; AVX1-NEXT:    vpsllw $8, %xmm0, %xmm0
; AVX1-NEXT:    vpandn %xmm8, %xmm6, %xmm5
; AVX1-NEXT:    vpmaddubsw %xmm5, %xmm1, %xmm1
; AVX1-NEXT:    vpsllw $8, %xmm1, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    vorps %ymm0, %ymm9, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm7, %ymm0
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm5
; AVX1-NEXT:    vpshufb %xmm5, %xmm3, %xmm5
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm4, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm5
; AVX1-NEXT:    vpshufb %xmm5, %xmm3, %xmm3
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm4, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm3, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmulr_v32i8:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm2, %ymm0, %ymm4
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm4, %ymm3, %ymm4
; AVX2-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm2, %ymm0, %ymm5
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm0 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm0 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpsrlw $4, %ymm1, %ymm5
; AVX2-NEXT:    vpand %ymm2, %ymm5, %ymm5
; AVX2-NEXT:    vpshufb %ymm5, %ymm0, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm6, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm8
; AVX2-NEXT:    vpbroadcastw {{.*#+}} ymm5 = [255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpandn %ymm7, %ymm5, %ymm7
; AVX2-NEXT:    vpmaddubsw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpsllw $8, %ymm7, %ymm7
; AVX2-NEXT:    vpor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm6, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm8, %ymm5, %ymm8
; AVX2-NEXT:    vpmaddubsw %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpsllw $8, %ymm8, %ymm8
; AVX2-NEXT:    vpor %ymm8, %ymm9, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm6, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm8, %ymm5, %ymm8
; AVX2-NEXT:    vpmaddubsw %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpsllw $8, %ymm8, %ymm8
; AVX2-NEXT:    vpor %ymm8, %ymm9, %ymm8
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm6, %ymm6
; AVX2-NEXT:    vpmullw %ymm6, %ymm4, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm6, %ymm5, %ymm6
; AVX2-NEXT:    vpmaddubsw %ymm6, %ymm4, %ymm6
; AVX2-NEXT:    vpsllw $8, %ymm6, %ymm6
; AVX2-NEXT:    vpor %ymm6, %ymm9, %ymm6
; AVX2-NEXT:    vpxor %ymm6, %ymm8, %ymm6
; AVX2-NEXT:    vpxor %ymm6, %ymm7, %ymm6
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm3, %ymm1
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm8
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpandn %ymm7, %ymm5, %ymm7
; AVX2-NEXT:    vpmaddubsw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpsllw $8, %ymm7, %ymm7
; AVX2-NEXT:    vpor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm8, %ymm5, %ymm8
; AVX2-NEXT:    vpmaddubsw %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpsllw $8, %ymm8, %ymm8
; AVX2-NEXT:    vpor %ymm8, %ymm9, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm8, %ymm5, %ymm8
; AVX2-NEXT:    vpmaddubsw %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpsllw $8, %ymm8, %ymm8
; AVX2-NEXT:    vpor %ymm8, %ymm9, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX2-NEXT:    vpmullw %ymm1, %ymm4, %ymm7
; AVX2-NEXT:    vpand %ymm5, %ymm7, %ymm7
; AVX2-NEXT:    vpandn %ymm1, %ymm5, %ymm1
; AVX2-NEXT:    vpmaddubsw %ymm1, %ymm4, %ymm1
; AVX2-NEXT:    vpsllw $8, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm6, %ymm1
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm4
; AVX2-NEXT:    vpshufb %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpsrlw $4, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmulr_v32i8:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpmovzxbw {{.*#+}} ymm2 = xmm1[0],zero,xmm1[1],zero,xmm1[2],zero,xmm1[3],zero,xmm1[4],zero,xmm1[5],zero,xmm1[6],zero,xmm1[7],zero,xmm1[8],zero,xmm1[9],zero,xmm1[10],zero,xmm1[11],zero,xmm1[12],zero,xmm1[13],zero,xmm1[14],zero,xmm1[15],zero
; AVX512-NEXT:    vextracti128 $1, %ymm1, %xmm1
; AVX512-NEXT:    vpmovzxbw {{.*#+}} ymm1 = xmm1[0],zero,xmm1[1],zero,xmm1[2],zero,xmm1[3],zero,xmm1[4],zero,xmm1[5],zero,xmm1[6],zero,xmm1[7],zero,xmm1[8],zero,xmm1[9],zero,xmm1[10],zero,xmm1[11],zero,xmm1[12],zero,xmm1[13],zero,xmm1[14],zero,xmm1[15],zero
; AVX512-NEXT:    vinserti64x4 $1, %ymm1, %zmm2, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm3
; AVX512-NEXT:    vextracti64x4 $1, %zmm3, %ymm4
; AVX512-NEXT:    vextracti128 $1, %ymm0, %xmm1
; AVX512-NEXT:    vpmovzxbw {{.*#+}} ymm1 = xmm1[0],zero,xmm1[1],zero,xmm1[2],zero,xmm1[3],zero,xmm1[4],zero,xmm1[5],zero,xmm1[6],zero,xmm1[7],zero,xmm1[8],zero,xmm1[9],zero,xmm1[10],zero,xmm1[11],zero,xmm1[12],zero,xmm1[13],zero,xmm1[14],zero,xmm1[15],zero
; AVX512-NEXT:    vpmullw %ymm4, %ymm1, %ymm4
; AVX512-NEXT:    vpmovzxbw {{.*#+}} ymm0 = xmm0[0],zero,xmm0[1],zero,xmm0[2],zero,xmm0[3],zero,xmm0[4],zero,xmm0[5],zero,xmm0[6],zero,xmm0[7],zero,xmm0[8],zero,xmm0[9],zero,xmm0[10],zero,xmm0[11],zero,xmm0[12],zero,xmm0[13],zero,xmm0[14],zero,xmm0[15],zero
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vinserti64x4 $1, %ymm4, %zmm3, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm4
; AVX512-NEXT:    vextracti64x4 $1, %zmm4, %ymm5
; AVX512-NEXT:    vpmullw %ymm5, %ymm1, %ymm5
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vinserti64x4 $1, %ymm5, %zmm4, %zmm4
; AVX512-NEXT:    vpxorq %zmm3, %zmm4, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm4
; AVX512-NEXT:    vextracti64x4 $1, %zmm4, %ymm5
; AVX512-NEXT:    vpmullw %ymm5, %ymm1, %ymm5
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vinserti64x4 $1, %ymm5, %zmm4, %zmm4
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm5
; AVX512-NEXT:    vextracti64x4 $1, %zmm5, %ymm6
; AVX512-NEXT:    vpmullw %ymm6, %ymm1, %ymm6
; AVX512-NEXT:    vpmullw %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vinserti64x4 $1, %ymm6, %zmm5, %zmm5
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm5 = zmm5 ^ zmm3 ^ zmm4
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm3
; AVX512-NEXT:    vextracti64x4 $1, %zmm3, %ymm4
; AVX512-NEXT:    vpmullw %ymm4, %ymm1, %ymm4
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vinserti64x4 $1, %ymm4, %zmm3, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm4
; AVX512-NEXT:    vextracti64x4 $1, %zmm4, %ymm6
; AVX512-NEXT:    vpmullw %ymm6, %ymm1, %ymm6
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vinserti64x4 $1, %ymm6, %zmm4, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm5 ^ zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm3
; AVX512-NEXT:    vextracti64x4 $1, %zmm3, %ymm5
; AVX512-NEXT:    vpmullw %ymm5, %ymm1, %ymm5
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vinserti64x4 $1, %ymm5, %zmm3, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm2
; AVX512-NEXT:    vextracti64x4 $1, %zmm2, %ymm5
; AVX512-NEXT:    vpmullw %ymm5, %ymm1, %ymm1
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm0
; AVX512-NEXT:    vinserti64x4 $1, %ymm1, %zmm0, %zmm0
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm0 = zmm0 ^ zmm4 ^ zmm3
; AVX512-NEXT:    vpsrlw $7, %ymm0, %ymm1
; AVX512-NEXT:    vpmovzxwd {{.*#+}} zmm1 = ymm1[0],zero,ymm1[1],zero,ymm1[2],zero,ymm1[3],zero,ymm1[4],zero,ymm1[5],zero,ymm1[6],zero,ymm1[7],zero,ymm1[8],zero,ymm1[9],zero,ymm1[10],zero,ymm1[11],zero,ymm1[12],zero,ymm1[13],zero,ymm1[14],zero,ymm1[15],zero
; AVX512-NEXT:    vpmovdb %zmm1, %xmm1
; AVX512-NEXT:    vextracti64x4 $1, %zmm0, %ymm0
; AVX512-NEXT:    vpsrlw $7, %ymm0, %ymm0
; AVX512-NEXT:    vpmovzxwd {{.*#+}} zmm0 = ymm0[0],zero,ymm0[1],zero,ymm0[2],zero,ymm0[3],zero,ymm0[4],zero,ymm0[5],zero,ymm0[6],zero,ymm0[7],zero,ymm0[8],zero,ymm0[9],zero,ymm0[10],zero,ymm0[11],zero,ymm0[12],zero,ymm0[13],zero,ymm0[14],zero,ymm0[15],zero
; AVX512-NEXT:    vpmovdb %zmm0, %xmm0
; AVX512-NEXT:    vinserti128 $1, %xmm0, %ymm1, %ymm0
; AVX512-NEXT:    retq
  %a.ext = zext <32 x i8> %a to <32 x i16>
  %b.ext = zext <32 x i8> %b to <32 x i16>
  %clmul = call <32 x i16> @llvm.clmul.v32i16(<32 x i16> %a.ext, <32 x i16> %b.ext)
  %res.ext = lshr <32 x i16> %clmul, splat (i16 7)
  %res = trunc <32 x i16> %res.ext to <32 x i8>
  ret <32 x i8> %res
}

define <16 x i16> @clmulr_v16i16(<16 x i16> %a, <16 x i16> %b) nounwind {
; AVX1-LABEL: clmulr_v16i16:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm2
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm3 = [1,0,3,2,5,4,7,6,9,8,11,10,13,12,15,14]
; AVX1-NEXT:    vpshufb %xmm3, %xmm2, %xmm5
; AVX1-NEXT:    vbroadcastss {{.*#+}} xmm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm6
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm4 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm5, %xmm5
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm7
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm5 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX1-NEXT:    vpshufb %xmm7, %xmm5, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm7, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm1, %ymm1
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm9
; AVX1-NEXT:    vpshufb %xmm9, %xmm4, %xmm9
; AVX1-NEXT:    vpsrlw $4, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm5, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm9, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm9
; AVX1-NEXT:    vpshufb %xmm9, %xmm4, %xmm9
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm9, %xmm0
; AVX1-NEXT:    vpmullw %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm6
; AVX1-NEXT:    vpmullw %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm8, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm7, %ymm0
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm1
; AVX1-NEXT:    vpshufb %xmm3, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm3
; AVX1-NEXT:    vpshufb %xmm3, %xmm4, %xmm3
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm3, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmulr_v16i16:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vmovdqa {{.*#+}} ymm5 = [1,0,3,2,5,4,7,6,9,8,11,10,13,12,15,14,17,16,19,18,21,20,23,22,25,24,27,26,29,28,31,30]
; AVX2-NEXT:    vpshufb %ymm5, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm0 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm0, %ymm3, %ymm4
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpsrlw $4, %ymm3, %ymm3
; AVX2-NEXT:    vpand %ymm0, %ymm3, %ymm6
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm6, %ymm3, %ymm6
; AVX2-NEXT:    vpor %ymm6, %ymm4, %ymm4
; AVX2-NEXT:    vpshufb %ymm5, %ymm1, %ymm5
; AVX2-NEXT:    vpsrlw $4, %ymm5, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm3, %ymm1
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX2-NEXT:    vpmullw %ymm6, %ymm4, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpxor %ymm6, %ymm7, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpand %ymm0, %ymm5, %ymm5
; AVX2-NEXT:    vpshufb %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpsllw $8, %ymm6, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX2-NEXT:    vpmullw %ymm4, %ymm9, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX2-NEXT:    vpmullw %ymm4, %ymm9, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX2-NEXT:    vpmullw %ymm1, %ymm4, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm8, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm6, %ymm1
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm6
; AVX2-NEXT:    vpmullw %ymm6, %ymm4, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm6, %ymm8, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm6, %ymm8, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm5
; AVX2-NEXT:    vpmullw %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm1, %ymm1
; AVX2-NEXT:    vpsrlw $8, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm4
; AVX2-NEXT:    vpshufb %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpsrlw $4, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    vpshufb %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmulr_v16i16:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpmovzxwd {{.*#+}} zmm0 = ymm0[0],zero,ymm0[1],zero,ymm0[2],zero,ymm0[3],zero,ymm0[4],zero,ymm0[5],zero,ymm0[6],zero,ymm0[7],zero,ymm0[8],zero,ymm0[9],zero,ymm0[10],zero,ymm0[11],zero,ymm0[12],zero,ymm0[13],zero,ymm0[14],zero,ymm0[15],zero
; AVX512-NEXT:    vpmovzxwd {{.*#+}} zmm1 = ymm1[0],zero,ymm1[1],zero,ymm1[2],zero,ymm1[3],zero,ymm1[4],zero,ymm1[5],zero,ymm1[6],zero,ymm1[7],zero,ymm1[8],zero,ymm1[9],zero,ymm1[10],zero,ymm1[11],zero,ymm1[12],zero,ymm1[13],zero,ymm1[14],zero,ymm1[15],zero
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpxord %zmm2, %zmm3, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm4
; AVX512-NEXT:    vpmulld %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm4 = zmm4 ^ zmm2 ^ zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm4
; AVX512-NEXT:    vpmulld %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm4
; AVX512-NEXT:    vpmulld %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm1
; AVX512-NEXT:    vpmulld %zmm1, %zmm0, %zmm0
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm0 = zmm0 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpsrld $15, %zmm0, %zmm0
; AVX512-NEXT:    vpmovdw %zmm0, %ymm0
; AVX512-NEXT:    retq
  %a.ext = zext <16 x i16> %a to <16 x i32>
  %b.ext = zext <16 x i16> %b to <16 x i32>
  %clmul = call <16 x i32> @llvm.clmul.v16i32(<16 x i32> %a.ext, <16 x i32> %b.ext)
  %res.ext = lshr <16 x i32> %clmul, splat (i32 15)
  %res = trunc <16 x i32> %res.ext to <16 x i16>
  ret <16 x i16> %res
}

define <8 x i32> @clmulr_v8i32(<8 x i32> %a, <8 x i32> %b) nounwind {
; AVX1-LABEL: clmulr_v8i32:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm2
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm3 = [3,2,1,0,7,6,5,4,11,10,9,8,15,14,13,12]
; AVX1-NEXT:    vpshufb %xmm3, %xmm2, %xmm5
; AVX1-NEXT:    vbroadcastss {{.*#+}} xmm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm6
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm4 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm5, %xmm5
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm7
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm5 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX1-NEXT:    vpshufb %xmm7, %xmm5, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm7, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm1, %ymm1
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm9
; AVX1-NEXT:    vpshufb %xmm9, %xmm4, %xmm9
; AVX1-NEXT:    vpsrlw $4, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm5, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm9, %xmm6
; AVX1-NEXT:    vpmulld %xmm8, %xmm6, %xmm8
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm9
; AVX1-NEXT:    vpshufb %xmm9, %xmm4, %xmm9
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm9, %xmm0
; AVX1-NEXT:    vpmulld %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm6
; AVX1-NEXT:    vpmulld %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm8, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm7, %ymm0
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm1
; AVX1-NEXT:    vpshufb %xmm3, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm3
; AVX1-NEXT:    vpshufb %xmm3, %xmm4, %xmm3
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm3, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmulr_v8i32:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vmovdqa {{.*#+}} ymm5 = [3,2,1,0,7,6,5,4,11,10,9,8,15,14,13,12,19,18,17,16,23,22,21,20,27,26,25,24,31,30,29,28]
; AVX2-NEXT:    vpshufb %ymm5, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm0 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm0, %ymm3, %ymm4
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpsrlw $4, %ymm3, %ymm3
; AVX2-NEXT:    vpand %ymm0, %ymm3, %ymm6
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm6, %ymm3, %ymm6
; AVX2-NEXT:    vpor %ymm6, %ymm4, %ymm4
; AVX2-NEXT:    vpshufb %ymm5, %ymm1, %ymm5
; AVX2-NEXT:    vpsrlw $4, %ymm5, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm3, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm6 = [2,2,2,2,2,2,2,2]
; AVX2-NEXT:    vpand %ymm6, %ymm1, %ymm6
; AVX2-NEXT:    vpmulld %ymm6, %ymm4, %ymm6
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm7 = [1,1,1,1,1,1,1,1]
; AVX2-NEXT:    vpand %ymm7, %ymm1, %ymm7
; AVX2-NEXT:    vpmulld %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpxor %ymm6, %ymm7, %ymm6
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm7 = [4,4,4,4,4,4,4,4]
; AVX2-NEXT:    vpand %ymm7, %ymm1, %ymm7
; AVX2-NEXT:    vpmulld %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [8,8,8,8,8,8,8,8]
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpand %ymm0, %ymm5, %ymm5
; AVX2-NEXT:    vpshufb %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm7 = [16,16,16,16,16,16,16,16]
; AVX2-NEXT:    vpand %ymm7, %ymm5, %ymm7
; AVX2-NEXT:    vpmulld %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [32,32,32,32,32,32,32,32]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [64,64,64,64,64,64,64,64]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm7 = [128,128,128,128,128,128,128,128]
; AVX2-NEXT:    vpand %ymm7, %ymm5, %ymm7
; AVX2-NEXT:    vpmulld %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm7
; AVX2-NEXT:    vpslld $24, %ymm7, %ymm6
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [256,256,256,256,256,256,256,256]
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [512,512,512,512,512,512,512,512]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [1024,1024,1024,1024,1024,1024,1024,1024]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [2048,2048,2048,2048,2048,2048,2048,2048]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [4096,4096,4096,4096,4096,4096,4096,4096]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [8192,8192,8192,8192,8192,8192,8192,8192]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [16384,16384,16384,16384,16384,16384,16384,16384]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [32768,32768,32768,32768,32768,32768,32768,32768]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [65536,65536,65536,65536,65536,65536,65536,65536]
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [131072,131072,131072,131072,131072,131072,131072,131072]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [262144,262144,262144,262144,262144,262144,262144,262144]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [524288,524288,524288,524288,524288,524288,524288,524288]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [1048576,1048576,1048576,1048576,1048576,1048576,1048576,1048576]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [2097152,2097152,2097152,2097152,2097152,2097152,2097152,2097152]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [4194304,4194304,4194304,4194304,4194304,4194304,4194304,4194304]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [8388608,8388608,8388608,8388608,8388608,8388608,8388608,8388608]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm10 = [16777216,16777216,16777216,16777216,16777216,16777216,16777216,16777216]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm10
; AVX2-NEXT:    vpmulld %ymm10, %ymm4, %ymm10
; AVX2-NEXT:    vpxor %ymm10, %ymm9, %ymm9
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm10 = [33554432,33554432,33554432,33554432,33554432,33554432,33554432,33554432]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm10
; AVX2-NEXT:    vpmulld %ymm10, %ymm4, %ymm10
; AVX2-NEXT:    vpxor %ymm10, %ymm9, %ymm9
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm10 = [67108864,67108864,67108864,67108864,67108864,67108864,67108864,67108864]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm10
; AVX2-NEXT:    vpmulld %ymm10, %ymm4, %ymm10
; AVX2-NEXT:    vpxor %ymm10, %ymm9, %ymm9
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm10 = [134217728,134217728,134217728,134217728,134217728,134217728,134217728,134217728]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm1
; AVX2-NEXT:    vpmulld %ymm1, %ymm4, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm9, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [268435456,268435456,268435456,268435456,268435456,268435456,268435456,268435456]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm1, %ymm9, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [536870912,536870912,536870912,536870912,536870912,536870912,536870912,536870912]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm1, %ymm9, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [1073741824,1073741824,1073741824,1073741824,1073741824,1073741824,1073741824,1073741824]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm1, %ymm9, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm8, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [2147483648,2147483648,2147483648,2147483648,2147483648,2147483648,2147483648,2147483648]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm5
; AVX2-NEXT:    vpmulld %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb {{.*#+}} ymm4 = zero,ymm1[2],zero,zero,zero,ymm1[6],zero,zero,zero,ymm1[10],zero,zero,zero,ymm1[14],zero,zero,zero,ymm1[18],zero,zero,zero,ymm1[22],zero,zero,zero,ymm1[26],zero,zero,zero,ymm1[30],zero,zero
; AVX2-NEXT:    vpslld $8, %ymm7, %ymm5
; AVX2-NEXT:    vpsrld $24, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm5, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm5 = [16711935,16711935,16711935,16711935,16711935,16711935,16711935,16711935]
; AVX2-NEXT:    vpand %ymm5, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm6, %ymm1
; AVX2-NEXT:    vpor %ymm4, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm4
; AVX2-NEXT:    vpshufb %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpsrlw $4, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    vpshufb %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmulr_v8i32:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpmovzxdq {{.*#+}} zmm0 = ymm0[0],zero,ymm0[1],zero,ymm0[2],zero,ymm0[3],zero,ymm0[4],zero,ymm0[5],zero,ymm0[6],zero,ymm0[7],zero
; AVX512-NEXT:    vpmovzxdq {{.*#+}} zmm1 = ymm1[0],zero,ymm1[1],zero,ymm1[2],zero,ymm1[3],zero,ymm1[4],zero,ymm1[5],zero,ymm1[6],zero,ymm1[7],zero
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpxorq %zmm2, %zmm3, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm2 ^ zmm3
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm1
; AVX512-NEXT:    vpmuludq %zmm1, %zmm0, %zmm0
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm0 = zmm0 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpsrlq $31, %zmm0, %zmm0
; AVX512-NEXT:    vpmovqd %zmm0, %ymm0
; AVX512-NEXT:    retq
  %a.ext = zext <8 x i32> %a to <8 x i64>
  %b.ext = zext <8 x i32> %b to <8 x i64>
  %clmul = call <8 x i64> @llvm.clmul.v8i64(<8 x i64> %a.ext, <8 x i64> %b.ext)
  %res.ext = lshr <8 x i64> %clmul, splat (i64 31)
  %res = trunc <8 x i64> %res.ext to <8 x i32>
  ret <8 x i32> %res
}

define <4 x i64> @clmulr_v4i64(<4 x i64> %a, <4 x i64> %b) nounwind {
; AVX1-LABEL: clmulr_v4i64:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm2
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm3 = [7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8]
; AVX1-NEXT:    vpshufb %xmm3, %xmm2, %xmm5
; AVX1-NEXT:    vbroadcastss {{.*#+}} xmm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm6
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm4 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm5, %xmm5
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm7
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm5 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX1-NEXT:    vpshufb %xmm7, %xmm5, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm7, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm1, %ymm1
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm8
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm5, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm7, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm10
; AVX1-NEXT:    vpsrlq $32, %xmm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm10, %xmm10
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm8
; AVX1-NEXT:    vpshufb %xmm8, %xmm4, %xmm8
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm8, %xmm0
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm11
; AVX1-NEXT:    vpsrlq $32, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm9, %xmm8, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpor %xmm9, %xmm11, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm13, %xmm7
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm12, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm8, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm10, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm9, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vpsrlq $32, %xmm1, %xmm9
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm0
; AVX1-NEXT:    vpsllq $32, %xmm0, %xmm0
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm1
; AVX1-NEXT:    vpsrlq $32, %xmm1, %xmm1
; AVX1-NEXT:    vpmuludq %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpsllq $32, %xmm1, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm8, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm7, %ymm0
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm1
; AVX1-NEXT:    vpshufb {{.*#+}} xmm6 = xmm1[u,u,u,u,3],zero,zero,zero,xmm1[u,u,u,u,11],zero,zero,zero
; AVX1-NEXT:    vpshufb {{.*#+}} xmm7 = xmm1[u,u,u,u],zero,xmm1[2],zero,zero,xmm1[u,u,u,u],zero,xmm1[10],zero,zero
; AVX1-NEXT:    vpor %xmm6, %xmm7, %xmm6
; AVX1-NEXT:    vpshufb {{.*#+}} xmm7 = xmm1[u,u,u,u],zero,zero,xmm1[1,0,u,u,u,u],zero,zero,xmm1[9,8]
; AVX1-NEXT:    vpor %xmm6, %xmm7, %xmm6
; AVX1-NEXT:    vpshufb {{.*#+}} xmm1 = xmm1[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u]
; AVX1-NEXT:    vpblendw {{.*#+}} xmm1 = xmm1[0,1],xmm6[2,3],xmm1[4,5],xmm6[6,7]
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm3
; AVX1-NEXT:    vpshufb %xmm3, %xmm4, %xmm3
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm3, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmulr_v4i64:
; AVX2:       # %bb.0:
; AVX2-NEXT:    subq $648, %rsp # imm = 0x288
; AVX2-NEXT:    vpshufb {{.*#+}} ymm2 = ymm0[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u,23,22,21,20,u,u,u,u,31,30,29,28,u,u,u,u]
; AVX2-NEXT:    vpshufb {{.*#+}} ymm3 = ymm0[u,u,u,u,3],zero,zero,zero,ymm0[u,u,u,u,11],zero,zero,zero,ymm0[u,u,u,u,19],zero,zero,zero,ymm0[u,u,u,u,27],zero,zero,zero
; AVX2-NEXT:    vpshufb {{.*#+}} ymm4 = ymm0[u,u,u,u],zero,ymm0[2],zero,zero,ymm0[u,u,u,u],zero,ymm0[10],zero,zero,ymm0[u,u,u,u],zero,ymm0[18],zero,zero,ymm0[u,u,u,u],zero,ymm0[26],zero,zero
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpshufb {{.*#+}} ymm0 = ymm0[u,u,u,u],zero,zero,ymm0[1,0,u,u,u,u],zero,zero,ymm0[9,8,u,u,u,u],zero,zero,ymm0[17,16,u,u,u,u],zero,zero,ymm0[25,24]
; AVX2-NEXT:    vpor %ymm3, %ymm0, %ymm0
; AVX2-NEXT:    vpblendd {{.*#+}} ymm0 = ymm2[0],ymm0[1],ymm2[2],ymm0[3],ymm2[4],ymm0[5],ymm2[6],ymm0[7]
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm8 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm0, %ymm8, %ymm2
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm6 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm6 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm2, %ymm6, %ymm2
; AVX2-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm0, %ymm8, %ymm0
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm4 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm4 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm5
; AVX2-NEXT:    vpshufb {{.*#+}} ymm0 = ymm1[7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,23,22,21,20,19,18,17,16,31,30,29,28,27,26,25,24]
; AVX2-NEXT:    vpsrlw $4, %ymm0, %ymm1
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm4, %ymm7
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [2,2,2,2]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpsrlq $32, %ymm5, %ymm11
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [1,1,1,1]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [4,4,4,4]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [8,8,8,8]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm7, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm5, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm11, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm8, %ymm0
; AVX2-NEXT:    vpshufb %ymm0, %ymm6, %ymm12
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm0 = [16,16,16,16]
; AVX2-NEXT:    vmovdqu %ymm0, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm0, %ymm12, %ymm0
; AVX2-NEXT:    vpmuludq %ymm0, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm0, %ymm11, %ymm0
; AVX2-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [32,32,32,32]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [64,64,64,64]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [128,128,128,128]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm4
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm0 = [256,256,256,256]
; AVX2-NEXT:    vmovdqu %ymm0, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm0, %ymm7, %ymm0
; AVX2-NEXT:    vpmuludq %ymm0, %ymm5, %ymm1
; AVX2-NEXT:    vpmuludq %ymm0, %ymm11, %ymm0
; AVX2-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [512,512,512,512]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [1024,1024,1024,1024]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [2048,2048,2048,2048]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [4096,4096,4096,4096]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [8192,8192,8192,8192]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [16384,16384,16384,16384]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [32768,32768,32768,32768]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [65536,65536,65536,65536]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [131072,131072,131072,131072]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [262144,262144,262144,262144]
; AVX2-NEXT:    vmovdqu %ymm2, (%rsp) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpxor %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [524288,524288,524288,524288]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [1048576,1048576,1048576,1048576]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [2097152,2097152,2097152,2097152]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [4194304,4194304,4194304,4194304]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm15 = [8388608,8388608,8388608,8388608]
; AVX2-NEXT:    vpand %ymm15, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm14 = [16777216,16777216,16777216,16777216]
; AVX2-NEXT:    vpand %ymm7, %ymm14, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm13 = [33554432,33554432,33554432,33554432]
; AVX2-NEXT:    vpand %ymm7, %ymm13, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm4
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm10 = [67108864,67108864,67108864,67108864]
; AVX2-NEXT:    vpand %ymm7, %ymm10, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm9 = [134217728,134217728,134217728,134217728]
; AVX2-NEXT:    vpand %ymm7, %ymm9, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm8 = [268435456,268435456,268435456,268435456]
; AVX2-NEXT:    vpand %ymm8, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm6 = [536870912,536870912,536870912,536870912]
; AVX2-NEXT:    vpand %ymm6, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm0
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm1, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [1073741824,1073741824,1073741824,1073741824]
; AVX2-NEXT:    vpand %ymm3, %ymm12, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm0
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [2147483648,2147483648,2147483648,2147483648]
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm11
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm11, %ymm11
; AVX2-NEXT:    vpor %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpsrlq $32, %ymm7, %ymm7
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpsrlq $32, %ymm12, %ymm11
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand (%rsp), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm15, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm7, %ymm14, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm7, %ymm13, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm7, %ymm10, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm7, %ymm9, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm8, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm6, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm3, %ymm11, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm1
; AVX2-NEXT:    vmovdqu {{[-0-9]+}}(%r{{[sb]}}p), %ymm2 # 32-byte Reload
; AVX2-NEXT:    vpsllq $56, %ymm2, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm1
; AVX2-NEXT:    vpshufb {{.*#+}} ymm0 = ymm0[u,u,u,u,3,2],zero,zero,ymm0[u,u,u,u,11,10],zero,zero,ymm0[u,u,u,u,19,18],zero,zero,ymm0[u,u,u,u,27,26],zero,zero
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpshufb {{.*#+}} ymm2 = ymm1[u,u,u,u],zero,zero,ymm1[1],zero,ymm1[u,u,u,u],zero,zero,ymm1[9],zero,ymm1[u,u,u,u],zero,zero,ymm1[17],zero,ymm1[u,u,u,u],zero,zero,ymm1[25],zero
; AVX2-NEXT:    vpor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpshufb {{.*#+}} ymm1 = ymm1[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u,23,22,21,20,u,u,u,u,31,30,29,28,u,u,u,u]
; AVX2-NEXT:    vpblendd {{.*#+}} ymm0 = ymm1[0],ymm0[1],ymm1[2],ymm0[3],ymm1[4],ymm0[5],ymm1[6],ymm0[7]
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm2, %ymm0, %ymm1
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm1, %ymm3, %ymm1
; AVX2-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    addq $648, %rsp # imm = 0x288
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmulr_v4i64:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpshufb {{.*#+}} ymm2 = ymm0[u,u,u,u,3],zero,zero,zero,ymm0[u,u,u,u,11],zero,zero,zero,ymm0[u,u,u,u,19],zero,zero,zero,ymm0[u,u,u,u,27],zero,zero,zero
; AVX512-NEXT:    vpshufb {{.*#+}} ymm3 = ymm0[u,u,u,u],zero,ymm0[2],zero,zero,ymm0[u,u,u,u],zero,ymm0[10],zero,zero,ymm0[u,u,u,u],zero,ymm0[18],zero,zero,ymm0[u,u,u,u],zero,ymm0[26],zero,zero
; AVX512-NEXT:    vpshufb {{.*#+}} ymm4 = ymm0[u,u,u,u],zero,zero,ymm0[1,0,u,u,u,u],zero,zero,ymm0[9,8,u,u,u,u],zero,zero,ymm0[17,16,u,u,u,u],zero,zero,ymm0[25,24]
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 | ymm3 | ymm2
; AVX512-NEXT:    vpshufb {{.*#+}} ymm0 = ymm0[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u,23,22,21,20,u,u,u,u,31,30,29,28,u,u,u,u]
; AVX512-NEXT:    vpblendd {{.*#+}} ymm0 = ymm0[0],ymm4[1],ymm0[2],ymm4[3],ymm0[4],ymm4[5],ymm0[6],ymm4[7]
; AVX512-NEXT:    vpbroadcastd {{.*#+}} ymm13 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm2
; AVX512-NEXT:    vbroadcasti128 {{.*#+}} ymm4 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX512-NEXT:    # ymm4 = mem[0,1,0,1]
; AVX512-NEXT:    vpshufb %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm0
; AVX512-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX512-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX512-NEXT:    vpshufb %ymm0, %ymm3, %ymm0
; AVX512-NEXT:    vpor %ymm0, %ymm2, %ymm5
; AVX512-NEXT:    vpshufb {{.*#+}} ymm0 = ymm1[7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,23,22,21,20,19,18,17,16,31,30,29,28,27,26,25,24]
; AVX512-NEXT:    vpsrlw $4, %ymm0, %ymm1
; AVX512-NEXT:    vpand %ymm1, %ymm13, %ymm1
; AVX512-NEXT:    vpshufb %ymm1, %ymm3, %ymm6
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm1
; AVX512-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX512-NEXT:    vpsrlq $32, %ymm5, %ymm10
; AVX512-NEXT:    vpmuludq %ymm1, %ymm10, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX512-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm1 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm1
; AVX512-NEXT:    vpmuludq %ymm1, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm1, %ymm10, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm1 = ymm2 ^ (ymm1 | ymm3)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm1 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm0
; AVX512-NEXT:    vpshufb %ymm0, %ymm4, %ymm12
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm1
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm1)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm12, %ymm1
; AVX512-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX512-NEXT:    vpmuludq %ymm1, %ymm10, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm1 = ymm0 ^ (ymm1 | ymm2)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm2
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm1 ^ (ymm0 | ymm2)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm12, %ymm1
; AVX512-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX512-NEXT:    vpmuludq %ymm1, %ymm10, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm1, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm0 ^ (ymm4 | ymm2)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm17 = [256,256,256,256]
; AVX512-NEXT:    vpandq %ymm17, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm2
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm4 ^ (ymm0 | ymm2)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm18 = [512,512,512,512]
; AVX512-NEXT:    vpandq %ymm18, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm19 = [1024,1024,1024,1024]
; AVX512-NEXT:    vpandq %ymm19, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm20 = [2048,2048,2048,2048]
; AVX512-NEXT:    vpandq %ymm20, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm21 = [4096,4096,4096,4096]
; AVX512-NEXT:    vpandq %ymm21, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm22 = [8192,8192,8192,8192]
; AVX512-NEXT:    vpandq %ymm22, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm23 = [16384,16384,16384,16384]
; AVX512-NEXT:    vpandq %ymm23, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm24 = [32768,32768,32768,32768]
; AVX512-NEXT:    vpandq %ymm24, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm25 = [65536,65536,65536,65536]
; AVX512-NEXT:    vpandq %ymm25, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm26 = [131072,131072,131072,131072]
; AVX512-NEXT:    vpandq %ymm26, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm27 = [262144,262144,262144,262144]
; AVX512-NEXT:    vpandq %ymm27, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm28 = [524288,524288,524288,524288]
; AVX512-NEXT:    vpandq %ymm28, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm29 = [1048576,1048576,1048576,1048576]
; AVX512-NEXT:    vpandq %ymm29, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm30 = [2097152,2097152,2097152,2097152]
; AVX512-NEXT:    vpandq %ymm30, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm31 = [4194304,4194304,4194304,4194304]
; AVX512-NEXT:    vpandq %ymm31, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm16 = [8388608,8388608,8388608,8388608]
; AVX512-NEXT:    vpandq %ymm16, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm15 = [16777216,16777216,16777216,16777216]
; AVX512-NEXT:    vpand %ymm6, %ymm15, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm14 = [33554432,33554432,33554432,33554432]
; AVX512-NEXT:    vpand %ymm6, %ymm14, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm11 = [67108864,67108864,67108864,67108864]
; AVX512-NEXT:    vpand %ymm6, %ymm11, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm9 = [134217728,134217728,134217728,134217728]
; AVX512-NEXT:    vpand %ymm6, %ymm9, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm8 = [268435456,268435456,268435456,268435456]
; AVX512-NEXT:    vpand %ymm8, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm7 = [536870912,536870912,536870912,536870912]
; AVX512-NEXT:    vpand %ymm7, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm1
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm1)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [1073741824,1073741824,1073741824,1073741824]
; AVX512-NEXT:    vpand %ymm3, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm1
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm1)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [2147483648,2147483648,2147483648,2147483648]
; AVX512-NEXT:    vpand %ymm1, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm10
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm10, %ymm10
; AVX512-NEXT:    vpor %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsrlq $32, %ymm6, %ymm6
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm10
; AVX512-NEXT:    vpmuludq %ymm5, %ymm10, %ymm10
; AVX512-NEXT:    vpsllq $32, %ymm10, %ymm10
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm10 = ymm10 ^ ymm0 ^ ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm10 ^ ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpsrlq $32, %ymm12, %ymm10
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm10, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm10, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm17, %ymm6, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq %ymm18, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm19, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq %ymm20, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm21, %ymm10, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq %ymm22, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm23, %ymm10, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq %ymm24, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm25, %ymm6, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq %ymm26, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm27, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq %ymm28, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm29, %ymm10, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq %ymm30, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm31, %ymm10, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq %ymm16, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm6, %ymm15, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpand %ymm6, %ymm14, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm6, %ymm11, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpand %ymm6, %ymm9, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm8, %ymm10, %ymm6
; AVX512-NEXT:    vpmuludq %ymm6, %ymm5, %ymm6
; AVX512-NEXT:    vpsllq $32, %ymm6, %ymm6
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm6 = ymm6 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpand %ymm7, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm3, %ymm10, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm6 ^ ymm0
; AVX512-NEXT:    vpand %ymm1, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpshufb {{.*#+}} ymm1 = ymm2[u,u,u,u,3,2],zero,zero,ymm2[u,u,u,u,11,10],zero,zero,ymm2[u,u,u,u,19,18],zero,zero,ymm2[u,u,u,u,27,26],zero,zero
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX512-NEXT:    vpshufb {{.*#+}} ymm2 = ymm0[u,u,u,u],zero,zero,ymm0[1],zero,ymm0[u,u,u,u],zero,zero,ymm0[9],zero,ymm0[u,u,u,u],zero,zero,ymm0[17],zero,ymm0[u,u,u,u],zero,zero,ymm0[25],zero
; AVX512-NEXT:    vpsllq $56, %ymm4, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm3 | ymm1 | ymm2
; AVX512-NEXT:    vpshufb {{.*#+}} ymm0 = ymm0[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u,23,22,21,20,u,u,u,u,31,30,29,28,u,u,u,u]
; AVX512-NEXT:    vpblendd {{.*#+}} ymm0 = ymm0[0],ymm3[1],ymm0[2],ymm3[3],ymm0[4],ymm3[5],ymm0[6],ymm3[7]
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm1
; AVX512-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX512-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX512-NEXT:    vpshufb %ymm1, %ymm2, %ymm1
; AVX512-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm0
; AVX512-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX512-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX512-NEXT:    vpshufb %ymm0, %ymm2, %ymm0
; AVX512-NEXT:    vpor %ymm0, %ymm1, %ymm0
; AVX512-NEXT:    retq
  %a.ext = zext <4 x i64> %a to <4 x i128>
  %b.ext = zext <4 x i64> %b to <4 x i128>
  %clmul = call <4 x i128> @llvm.clmul.v4i128(<4 x i128> %a.ext, <4 x i128> %b.ext)
  %res.ext = lshr <4 x i128> %clmul, splat (i128 63)
  %res = trunc <4 x i128> %res.ext to <4 x i64>
  ret <4 x i64> %res
}

define <32 x i8> @clmulh_v32i8(<32 x i8> %a, <32 x i8> %b) nounwind {
; AVX1-LABEL: clmulh_v32i8:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm4
; AVX1-NEXT:    vbroadcastss {{.*#+}} xmm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX1-NEXT:    vpand %xmm2, %xmm4, %xmm5
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm3 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX1-NEXT:    vpshufb %xmm5, %xmm3, %xmm5
; AVX1-NEXT:    vpsrlw $4, %xmm4, %xmm4
; AVX1-NEXT:    vpand %xmm2, %xmm4, %xmm6
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm4 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm5, %xmm5
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm4, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm5, %ymm1, %ymm5
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm3, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm4, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpmullw %xmm1, %xmm9, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm3, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm4, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm7, %xmm0
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm7, %ymm6
; AVX1-NEXT:    vbroadcastf128 {{.*#+}} ymm7 = [255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0]
; AVX1-NEXT:    # ymm7 = mem[0,1,0,1]
; AVX1-NEXT:    vandps %ymm7, %ymm6, %ymm10
; AVX1-NEXT:    vbroadcastss {{.*#+}} ymm6 = [255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0]
; AVX1-NEXT:    vpandn %xmm8, %xmm6, %xmm8
; AVX1-NEXT:    vpmaddubsw %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vpsllw $8, %xmm8, %xmm8
; AVX1-NEXT:    vpandn %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmaddubsw %xmm9, %xmm1, %xmm9
; AVX1-NEXT:    vpsllw $8, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vorps %ymm8, %ymm10, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm1, %xmm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm12
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm12, %ymm11
; AVX1-NEXT:    vandps %ymm7, %ymm11, %ymm11
; AVX1-NEXT:    vpandn %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmaddubsw %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vpsllw $8, %xmm9, %xmm9
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm1, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vorps %ymm9, %ymm11, %ymm9
; AVX1-NEXT:    vxorps %ymm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm1, %xmm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm12
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm12, %ymm11
; AVX1-NEXT:    vandps %ymm7, %ymm11, %ymm11
; AVX1-NEXT:    vpandn %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmaddubsw %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vpsllw $8, %xmm9, %xmm9
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm1, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vorps %ymm9, %ymm11, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm1, %xmm11, %xmm12
; AVX1-NEXT:    vpmullw %xmm0, %xmm10, %xmm13
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm13, %ymm12
; AVX1-NEXT:    vandps %ymm7, %ymm12, %ymm12
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm0, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vpandn %xmm11, %xmm6, %xmm11
; AVX1-NEXT:    vpmaddubsw %xmm11, %xmm1, %xmm11
; AVX1-NEXT:    vpsllw $8, %xmm11, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vorps %ymm10, %ymm12, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm1, %xmm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm12
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm12, %ymm11
; AVX1-NEXT:    vandps %ymm7, %ymm11, %ymm11
; AVX1-NEXT:    vpandn %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmaddubsw %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vpsllw $8, %xmm9, %xmm9
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm1, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vorps %ymm9, %ymm11, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm1, %xmm11, %xmm12
; AVX1-NEXT:    vpmullw %xmm0, %xmm10, %xmm13
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm13, %ymm12
; AVX1-NEXT:    vandps %ymm7, %ymm12, %ymm12
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm0, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vpandn %xmm11, %xmm6, %xmm11
; AVX1-NEXT:    vpmaddubsw %xmm11, %xmm1, %xmm11
; AVX1-NEXT:    vpsllw $8, %xmm11, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vorps %ymm10, %ymm12, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmullw %xmm1, %xmm11, %xmm12
; AVX1-NEXT:    vpmullw %xmm0, %xmm10, %xmm13
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm13, %ymm12
; AVX1-NEXT:    vandps %ymm7, %ymm12, %ymm7
; AVX1-NEXT:    vpandn %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmaddubsw %xmm10, %xmm0, %xmm10
; AVX1-NEXT:    vpsllw $8, %xmm10, %xmm10
; AVX1-NEXT:    vpandn %xmm11, %xmm6, %xmm11
; AVX1-NEXT:    vpmaddubsw %xmm11, %xmm1, %xmm11
; AVX1-NEXT:    vpsllw $8, %xmm11, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vorps %ymm7, %ymm10, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm9, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm5
; AVX1-NEXT:    vextractf128 $1, %ymm5, %xmm8
; AVX1-NEXT:    vpmullw %xmm1, %xmm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm5, %xmm0, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps %ymm6, %ymm9, %ymm9
; AVX1-NEXT:    vpandn %xmm5, %xmm6, %xmm5
; AVX1-NEXT:    vpmaddubsw %xmm5, %xmm0, %xmm0
; AVX1-NEXT:    vpsllw $8, %xmm0, %xmm0
; AVX1-NEXT:    vpandn %xmm8, %xmm6, %xmm5
; AVX1-NEXT:    vpmaddubsw %xmm5, %xmm1, %xmm1
; AVX1-NEXT:    vpsllw $8, %xmm1, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    vorps %ymm0, %ymm9, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm7, %ymm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm3, %xmm1
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm5
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm5
; AVX1-NEXT:    vpshufb %xmm5, %xmm4, %xmm5
; AVX1-NEXT:    vpor %xmm5, %xmm1, %xmm1
; AVX1-NEXT:    vpsrlw $1, %xmm1, %xmm1
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm5
; AVX1-NEXT:    vpshufb %xmm5, %xmm3, %xmm3
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm4, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm3, %xmm0
; AVX1-NEXT:    vpsrlw $1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm0, %ymm1, %ymm0
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm0, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmulh_v32i8:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm2, %ymm0, %ymm4
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm4, %ymm3, %ymm4
; AVX2-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm2, %ymm0, %ymm5
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm0 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm0 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm5, %ymm0, %ymm5
; AVX2-NEXT:    vpor %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpsrlw $4, %ymm1, %ymm5
; AVX2-NEXT:    vpand %ymm2, %ymm5, %ymm5
; AVX2-NEXT:    vpshufb %ymm5, %ymm0, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm6, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm8
; AVX2-NEXT:    vpbroadcastw {{.*#+}} ymm5 = [255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpandn %ymm7, %ymm5, %ymm7
; AVX2-NEXT:    vpmaddubsw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpsllw $8, %ymm7, %ymm7
; AVX2-NEXT:    vpor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm6, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm8, %ymm5, %ymm8
; AVX2-NEXT:    vpmaddubsw %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpsllw $8, %ymm8, %ymm8
; AVX2-NEXT:    vpor %ymm8, %ymm9, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm6, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm8, %ymm5, %ymm8
; AVX2-NEXT:    vpmaddubsw %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpsllw $8, %ymm8, %ymm8
; AVX2-NEXT:    vpor %ymm8, %ymm9, %ymm8
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm6, %ymm6
; AVX2-NEXT:    vpmullw %ymm6, %ymm4, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm6, %ymm5, %ymm6
; AVX2-NEXT:    vpmaddubsw %ymm6, %ymm4, %ymm6
; AVX2-NEXT:    vpsllw $8, %ymm6, %ymm6
; AVX2-NEXT:    vpor %ymm6, %ymm9, %ymm6
; AVX2-NEXT:    vpxor %ymm6, %ymm8, %ymm6
; AVX2-NEXT:    vpxor %ymm6, %ymm7, %ymm6
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm3, %ymm1
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm8
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpandn %ymm7, %ymm5, %ymm7
; AVX2-NEXT:    vpmaddubsw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpsllw $8, %ymm7, %ymm7
; AVX2-NEXT:    vpor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm8, %ymm5, %ymm8
; AVX2-NEXT:    vpmaddubsw %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpsllw $8, %ymm8, %ymm8
; AVX2-NEXT:    vpor %ymm8, %ymm9, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm9
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpandn %ymm8, %ymm5, %ymm8
; AVX2-NEXT:    vpmaddubsw %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpsllw $8, %ymm8, %ymm8
; AVX2-NEXT:    vpor %ymm8, %ymm9, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX2-NEXT:    vpmullw %ymm1, %ymm4, %ymm7
; AVX2-NEXT:    vpand %ymm5, %ymm7, %ymm7
; AVX2-NEXT:    vpandn %ymm1, %ymm5, %ymm1
; AVX2-NEXT:    vpmaddubsw %ymm1, %ymm4, %ymm1
; AVX2-NEXT:    vpsllw $8, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm6, %ymm1
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm4
; AVX2-NEXT:    vpshufb %ymm4, %ymm3, %ymm3
; AVX2-NEXT:    vpsrlw $4, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    vpsrlw $1, %ymm0, %ymm0
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm0, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmulh_v32i8:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpmovzxbw {{.*#+}} ymm2 = xmm1[0],zero,xmm1[1],zero,xmm1[2],zero,xmm1[3],zero,xmm1[4],zero,xmm1[5],zero,xmm1[6],zero,xmm1[7],zero,xmm1[8],zero,xmm1[9],zero,xmm1[10],zero,xmm1[11],zero,xmm1[12],zero,xmm1[13],zero,xmm1[14],zero,xmm1[15],zero
; AVX512-NEXT:    vextracti128 $1, %ymm1, %xmm1
; AVX512-NEXT:    vpmovzxbw {{.*#+}} ymm1 = xmm1[0],zero,xmm1[1],zero,xmm1[2],zero,xmm1[3],zero,xmm1[4],zero,xmm1[5],zero,xmm1[6],zero,xmm1[7],zero,xmm1[8],zero,xmm1[9],zero,xmm1[10],zero,xmm1[11],zero,xmm1[12],zero,xmm1[13],zero,xmm1[14],zero,xmm1[15],zero
; AVX512-NEXT:    vinserti64x4 $1, %ymm1, %zmm2, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm3
; AVX512-NEXT:    vextracti64x4 $1, %zmm3, %ymm4
; AVX512-NEXT:    vextracti128 $1, %ymm0, %xmm1
; AVX512-NEXT:    vpmovzxbw {{.*#+}} ymm1 = xmm1[0],zero,xmm1[1],zero,xmm1[2],zero,xmm1[3],zero,xmm1[4],zero,xmm1[5],zero,xmm1[6],zero,xmm1[7],zero,xmm1[8],zero,xmm1[9],zero,xmm1[10],zero,xmm1[11],zero,xmm1[12],zero,xmm1[13],zero,xmm1[14],zero,xmm1[15],zero
; AVX512-NEXT:    vpmullw %ymm4, %ymm1, %ymm4
; AVX512-NEXT:    vpmovzxbw {{.*#+}} ymm0 = xmm0[0],zero,xmm0[1],zero,xmm0[2],zero,xmm0[3],zero,xmm0[4],zero,xmm0[5],zero,xmm0[6],zero,xmm0[7],zero,xmm0[8],zero,xmm0[9],zero,xmm0[10],zero,xmm0[11],zero,xmm0[12],zero,xmm0[13],zero,xmm0[14],zero,xmm0[15],zero
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vinserti64x4 $1, %ymm4, %zmm3, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm4
; AVX512-NEXT:    vextracti64x4 $1, %zmm4, %ymm5
; AVX512-NEXT:    vpmullw %ymm5, %ymm1, %ymm5
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vinserti64x4 $1, %ymm5, %zmm4, %zmm4
; AVX512-NEXT:    vpxorq %zmm3, %zmm4, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm4
; AVX512-NEXT:    vextracti64x4 $1, %zmm4, %ymm5
; AVX512-NEXT:    vpmullw %ymm5, %ymm1, %ymm5
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vinserti64x4 $1, %ymm5, %zmm4, %zmm4
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm5
; AVX512-NEXT:    vextracti64x4 $1, %zmm5, %ymm6
; AVX512-NEXT:    vpmullw %ymm6, %ymm1, %ymm6
; AVX512-NEXT:    vpmullw %ymm5, %ymm0, %ymm5
; AVX512-NEXT:    vinserti64x4 $1, %ymm6, %zmm5, %zmm5
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm5 = zmm5 ^ zmm3 ^ zmm4
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm3
; AVX512-NEXT:    vextracti64x4 $1, %zmm3, %ymm4
; AVX512-NEXT:    vpmullw %ymm4, %ymm1, %ymm4
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vinserti64x4 $1, %ymm4, %zmm3, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm4
; AVX512-NEXT:    vextracti64x4 $1, %zmm4, %ymm6
; AVX512-NEXT:    vpmullw %ymm6, %ymm1, %ymm6
; AVX512-NEXT:    vpmullw %ymm4, %ymm0, %ymm4
; AVX512-NEXT:    vinserti64x4 $1, %ymm6, %zmm4, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm5 ^ zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm3
; AVX512-NEXT:    vextracti64x4 $1, %zmm3, %ymm5
; AVX512-NEXT:    vpmullw %ymm5, %ymm1, %ymm5
; AVX512-NEXT:    vpmullw %ymm3, %ymm0, %ymm3
; AVX512-NEXT:    vinserti64x4 $1, %ymm5, %zmm3, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm2, %zmm2
; AVX512-NEXT:    vextracti64x4 $1, %zmm2, %ymm5
; AVX512-NEXT:    vpmullw %ymm5, %ymm1, %ymm1
; AVX512-NEXT:    vpmullw %ymm2, %ymm0, %ymm0
; AVX512-NEXT:    vinserti64x4 $1, %ymm1, %zmm0, %zmm0
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm0 = zmm0 ^ zmm4 ^ zmm3
; AVX512-NEXT:    vpsrlw $8, %ymm0, %ymm1
; AVX512-NEXT:    vpmovzxwd {{.*#+}} zmm1 = ymm1[0],zero,ymm1[1],zero,ymm1[2],zero,ymm1[3],zero,ymm1[4],zero,ymm1[5],zero,ymm1[6],zero,ymm1[7],zero,ymm1[8],zero,ymm1[9],zero,ymm1[10],zero,ymm1[11],zero,ymm1[12],zero,ymm1[13],zero,ymm1[14],zero,ymm1[15],zero
; AVX512-NEXT:    vpmovdb %zmm1, %xmm1
; AVX512-NEXT:    vextracti64x4 $1, %zmm0, %ymm0
; AVX512-NEXT:    vpsrlw $8, %ymm0, %ymm0
; AVX512-NEXT:    vpmovzxwd {{.*#+}} zmm0 = ymm0[0],zero,ymm0[1],zero,ymm0[2],zero,ymm0[3],zero,ymm0[4],zero,ymm0[5],zero,ymm0[6],zero,ymm0[7],zero,ymm0[8],zero,ymm0[9],zero,ymm0[10],zero,ymm0[11],zero,ymm0[12],zero,ymm0[13],zero,ymm0[14],zero,ymm0[15],zero
; AVX512-NEXT:    vpmovdb %zmm0, %xmm0
; AVX512-NEXT:    vinserti128 $1, %xmm0, %ymm1, %ymm0
; AVX512-NEXT:    retq
  %a.ext = zext <32 x i8> %a to <32 x i16>
  %b.ext = zext <32 x i8> %b to <32 x i16>
  %clmul = call <32 x i16> @llvm.clmul.v32i16(<32 x i16> %a.ext, <32 x i16> %b.ext)
  %res.ext = lshr <32 x i16> %clmul, splat (i16 8)
  %res = trunc <32 x i16> %res.ext to <32 x i8>
  ret <32 x i8> %res
}

define <16 x i16> @clmulh_v16i16(<16 x i16> %a, <16 x i16> %b) nounwind {
; AVX1-LABEL: clmulh_v16i16:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm2
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm3 = [1,0,3,2,5,4,7,6,9,8,11,10,13,12,15,14]
; AVX1-NEXT:    vpshufb %xmm3, %xmm2, %xmm5
; AVX1-NEXT:    vbroadcastss {{.*#+}} xmm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm6
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm4 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm5, %xmm5
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm7
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm5 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX1-NEXT:    vpshufb %xmm7, %xmm5, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm7, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm1, %ymm1
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm9
; AVX1-NEXT:    vpshufb %xmm9, %xmm4, %xmm9
; AVX1-NEXT:    vpsrlw $4, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm5, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm9, %xmm6
; AVX1-NEXT:    vpmullw %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm9
; AVX1-NEXT:    vpshufb %xmm9, %xmm4, %xmm9
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm9, %xmm0
; AVX1-NEXT:    vpmullw %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpmullw %xmm0, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmullw %xmm6, %xmm10, %xmm10
; AVX1-NEXT:    vpmullw %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm9
; AVX1-NEXT:    vpmullw %xmm6, %xmm9, %xmm6
; AVX1-NEXT:    vpmullw %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm8, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm7, %ymm0
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpsrlw $1, %xmm1, %xmm1
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm3
; AVX1-NEXT:    vpshufb %xmm3, %xmm4, %xmm3
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm3, %xmm0
; AVX1-NEXT:    vpsrlw $1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm0, %ymm1, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmulh_v16i16:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vmovdqa {{.*#+}} ymm5 = [1,0,3,2,5,4,7,6,9,8,11,10,13,12,15,14,17,16,19,18,21,20,23,22,25,24,27,26,29,28,31,30]
; AVX2-NEXT:    vpshufb %ymm5, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm0 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm0, %ymm3, %ymm4
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpsrlw $4, %ymm3, %ymm3
; AVX2-NEXT:    vpand %ymm0, %ymm3, %ymm6
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm6, %ymm3, %ymm6
; AVX2-NEXT:    vpor %ymm6, %ymm4, %ymm4
; AVX2-NEXT:    vpshufb %ymm5, %ymm1, %ymm5
; AVX2-NEXT:    vpsrlw $4, %ymm5, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm3, %ymm1
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm6
; AVX2-NEXT:    vpmullw %ymm6, %ymm4, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpxor %ymm6, %ymm7, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpand %ymm0, %ymm5, %ymm5
; AVX2-NEXT:    vpshufb %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm7
; AVX2-NEXT:    vpmullw %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpsllw $8, %ymm6, %ymm7
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX2-NEXT:    vpmullw %ymm4, %ymm9, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX2-NEXT:    vpmullw %ymm4, %ymm9, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX2-NEXT:    vpmullw %ymm1, %ymm4, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm8, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm6, %ymm1
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm6
; AVX2-NEXT:    vpmullw %ymm6, %ymm4, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm6, %ymm8, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm8
; AVX2-NEXT:    vpmullw %ymm4, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm6, %ymm8, %ymm6
; AVX2-NEXT:    vpand {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm5, %ymm5
; AVX2-NEXT:    vpmullw %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm6, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm1, %ymm1
; AVX2-NEXT:    vpsrlw $8, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm4
; AVX2-NEXT:    vpshufb %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpsrlw $4, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    vpshufb %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpsrlw $1, %ymm0, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmulh_v16i16:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpmovzxwd {{.*#+}} zmm0 = ymm0[0],zero,ymm0[1],zero,ymm0[2],zero,ymm0[3],zero,ymm0[4],zero,ymm0[5],zero,ymm0[6],zero,ymm0[7],zero,ymm0[8],zero,ymm0[9],zero,ymm0[10],zero,ymm0[11],zero,ymm0[12],zero,ymm0[13],zero,ymm0[14],zero,ymm0[15],zero
; AVX512-NEXT:    vpmovzxwd {{.*#+}} zmm1 = ymm1[0],zero,ymm1[1],zero,ymm1[2],zero,ymm1[3],zero,ymm1[4],zero,ymm1[5],zero,ymm1[6],zero,ymm1[7],zero,ymm1[8],zero,ymm1[9],zero,ymm1[10],zero,ymm1[11],zero,ymm1[12],zero,ymm1[13],zero,ymm1[14],zero,ymm1[15],zero
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpxord %zmm2, %zmm3, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm4
; AVX512-NEXT:    vpmulld %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm4 = zmm4 ^ zmm2 ^ zmm3
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm4
; AVX512-NEXT:    vpmulld %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm4
; AVX512-NEXT:    vpmulld %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm3
; AVX512-NEXT:    vpmulld %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm2
; AVX512-NEXT:    vpmulld %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandd {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to16}, %zmm1, %zmm1
; AVX512-NEXT:    vpmulld %zmm1, %zmm0, %zmm0
; AVX512-NEXT:    vpternlogd {{.*#+}} zmm0 = zmm0 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpsrld $16, %zmm0, %zmm0
; AVX512-NEXT:    vpmovdw %zmm0, %ymm0
; AVX512-NEXT:    retq
  %a.ext = zext <16 x i16> %a to <16 x i32>
  %b.ext = zext <16 x i16> %b to <16 x i32>
  %clmul = call <16 x i32> @llvm.clmul.v16i32(<16 x i32> %a.ext, <16 x i32> %b.ext)
  %res.ext = lshr <16 x i32> %clmul, splat (i32 16)
  %res = trunc <16 x i32> %res.ext to <16 x i16>
  ret <16 x i16> %res
}

define <8 x i32> @clmulh_v8i32(<8 x i32> %a, <8 x i32> %b) nounwind {
; AVX1-LABEL: clmulh_v8i32:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm2
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm3 = [3,2,1,0,7,6,5,4,11,10,9,8,15,14,13,12]
; AVX1-NEXT:    vpshufb %xmm3, %xmm2, %xmm5
; AVX1-NEXT:    vbroadcastss {{.*#+}} xmm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm6
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm4 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm5, %xmm5
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm7
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm5 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX1-NEXT:    vpshufb %xmm7, %xmm5, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm7, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm1, %ymm1
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm7
; AVX1-NEXT:    vextractf128 $1, %ymm7, %xmm8
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm9
; AVX1-NEXT:    vpshufb %xmm9, %xmm4, %xmm9
; AVX1-NEXT:    vpsrlw $4, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm5, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm9, %xmm6
; AVX1-NEXT:    vpmulld %xmm8, %xmm6, %xmm8
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm9
; AVX1-NEXT:    vpshufb %xmm9, %xmm4, %xmm9
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm9, %xmm0
; AVX1-NEXT:    vpmulld %xmm7, %xmm0, %xmm7
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm7, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm9
; AVX1-NEXT:    vpmulld %xmm8, %xmm0, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm10
; AVX1-NEXT:    vpmulld %xmm10, %xmm6, %xmm10
; AVX1-NEXT:    vpmulld %xmm9, %xmm0, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm9
; AVX1-NEXT:    vpmulld %xmm9, %xmm6, %xmm6
; AVX1-NEXT:    vpmulld %xmm1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm8, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm7, %ymm0
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpsrld $1, %xmm1, %xmm1
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm3
; AVX1-NEXT:    vpshufb %xmm3, %xmm4, %xmm3
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm3, %xmm0
; AVX1-NEXT:    vpsrld $1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm0, %ymm1, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmulh_v8i32:
; AVX2:       # %bb.0:
; AVX2-NEXT:    vmovdqa {{.*#+}} ymm5 = [3,2,1,0,7,6,5,4,11,10,9,8,15,14,13,12,19,18,17,16,23,22,21,20,27,26,25,24,31,30,29,28]
; AVX2-NEXT:    vpshufb %ymm5, %ymm0, %ymm3
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm0 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm0, %ymm3, %ymm4
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm4, %ymm2, %ymm4
; AVX2-NEXT:    vpsrlw $4, %ymm3, %ymm3
; AVX2-NEXT:    vpand %ymm0, %ymm3, %ymm6
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm6, %ymm3, %ymm6
; AVX2-NEXT:    vpor %ymm6, %ymm4, %ymm4
; AVX2-NEXT:    vpshufb %ymm5, %ymm1, %ymm5
; AVX2-NEXT:    vpsrlw $4, %ymm5, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm3, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm6 = [2,2,2,2,2,2,2,2]
; AVX2-NEXT:    vpand %ymm6, %ymm1, %ymm6
; AVX2-NEXT:    vpmulld %ymm6, %ymm4, %ymm6
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm7 = [1,1,1,1,1,1,1,1]
; AVX2-NEXT:    vpand %ymm7, %ymm1, %ymm7
; AVX2-NEXT:    vpmulld %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpxor %ymm6, %ymm7, %ymm6
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm7 = [4,4,4,4,4,4,4,4]
; AVX2-NEXT:    vpand %ymm7, %ymm1, %ymm7
; AVX2-NEXT:    vpmulld %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [8,8,8,8,8,8,8,8]
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpand %ymm0, %ymm5, %ymm5
; AVX2-NEXT:    vpshufb %ymm5, %ymm2, %ymm5
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm7 = [16,16,16,16,16,16,16,16]
; AVX2-NEXT:    vpand %ymm7, %ymm5, %ymm7
; AVX2-NEXT:    vpmulld %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [32,32,32,32,32,32,32,32]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [64,64,64,64,64,64,64,64]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm6
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm7 = [128,128,128,128,128,128,128,128]
; AVX2-NEXT:    vpand %ymm7, %ymm5, %ymm7
; AVX2-NEXT:    vpmulld %ymm7, %ymm4, %ymm7
; AVX2-NEXT:    vpxor %ymm7, %ymm6, %ymm7
; AVX2-NEXT:    vpslld $24, %ymm7, %ymm6
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [256,256,256,256,256,256,256,256]
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [512,512,512,512,512,512,512,512]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [1024,1024,1024,1024,1024,1024,1024,1024]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [2048,2048,2048,2048,2048,2048,2048,2048]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [4096,4096,4096,4096,4096,4096,4096,4096]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [8192,8192,8192,8192,8192,8192,8192,8192]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [16384,16384,16384,16384,16384,16384,16384,16384]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [32768,32768,32768,32768,32768,32768,32768,32768]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm7
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [65536,65536,65536,65536,65536,65536,65536,65536]
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm8
; AVX2-NEXT:    vpmulld %ymm8, %ymm4, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [131072,131072,131072,131072,131072,131072,131072,131072]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [262144,262144,262144,262144,262144,262144,262144,262144]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [524288,524288,524288,524288,524288,524288,524288,524288]
; AVX2-NEXT:    vpand %ymm1, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [1048576,1048576,1048576,1048576,1048576,1048576,1048576,1048576]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [2097152,2097152,2097152,2097152,2097152,2097152,2097152,2097152]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [4194304,4194304,4194304,4194304,4194304,4194304,4194304,4194304]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm9, %ymm8, %ymm8
; AVX2-NEXT:    vpxor %ymm7, %ymm8, %ymm8
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [8388608,8388608,8388608,8388608,8388608,8388608,8388608,8388608]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm10 = [16777216,16777216,16777216,16777216,16777216,16777216,16777216,16777216]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm10
; AVX2-NEXT:    vpmulld %ymm10, %ymm4, %ymm10
; AVX2-NEXT:    vpxor %ymm10, %ymm9, %ymm9
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm10 = [33554432,33554432,33554432,33554432,33554432,33554432,33554432,33554432]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm10
; AVX2-NEXT:    vpmulld %ymm10, %ymm4, %ymm10
; AVX2-NEXT:    vpxor %ymm10, %ymm9, %ymm9
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm10 = [67108864,67108864,67108864,67108864,67108864,67108864,67108864,67108864]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm10
; AVX2-NEXT:    vpmulld %ymm10, %ymm4, %ymm10
; AVX2-NEXT:    vpxor %ymm10, %ymm9, %ymm9
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm10 = [134217728,134217728,134217728,134217728,134217728,134217728,134217728,134217728]
; AVX2-NEXT:    vpand %ymm1, %ymm10, %ymm1
; AVX2-NEXT:    vpmulld %ymm1, %ymm4, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm9, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [268435456,268435456,268435456,268435456,268435456,268435456,268435456,268435456]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm1, %ymm9, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [536870912,536870912,536870912,536870912,536870912,536870912,536870912,536870912]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm1, %ymm9, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm9 = [1073741824,1073741824,1073741824,1073741824,1073741824,1073741824,1073741824,1073741824]
; AVX2-NEXT:    vpand %ymm5, %ymm9, %ymm9
; AVX2-NEXT:    vpmulld %ymm9, %ymm4, %ymm9
; AVX2-NEXT:    vpxor %ymm1, %ymm9, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm8, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm8 = [2147483648,2147483648,2147483648,2147483648,2147483648,2147483648,2147483648,2147483648]
; AVX2-NEXT:    vpand %ymm5, %ymm8, %ymm5
; AVX2-NEXT:    vpmulld %ymm5, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm1, %ymm1
; AVX2-NEXT:    vpshufb {{.*#+}} ymm4 = zero,ymm1[2],zero,zero,zero,ymm1[6],zero,zero,zero,ymm1[10],zero,zero,zero,ymm1[14],zero,zero,zero,ymm1[18],zero,zero,zero,ymm1[22],zero,zero,zero,ymm1[26],zero,zero,zero,ymm1[30],zero,zero
; AVX2-NEXT:    vpslld $8, %ymm7, %ymm5
; AVX2-NEXT:    vpsrld $24, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm5, %ymm1
; AVX2-NEXT:    vpbroadcastd {{.*#+}} ymm5 = [16711935,16711935,16711935,16711935,16711935,16711935,16711935,16711935]
; AVX2-NEXT:    vpand %ymm5, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm6, %ymm1
; AVX2-NEXT:    vpor %ymm4, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm4
; AVX2-NEXT:    vpshufb %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpsrlw $4, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    vpshufb %ymm0, %ymm3, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpsrld $1, %ymm0, %ymm0
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmulh_v8i32:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpmovzxdq {{.*#+}} zmm0 = ymm0[0],zero,ymm0[1],zero,ymm0[2],zero,ymm0[3],zero,ymm0[4],zero,ymm0[5],zero,ymm0[6],zero,ymm0[7],zero
; AVX512-NEXT:    vpmovzxdq {{.*#+}} zmm1 = ymm1[0],zero,ymm1[1],zero,ymm1[2],zero,ymm1[3],zero,ymm1[4],zero,ymm1[5],zero,ymm1[6],zero,ymm1[7],zero
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpxorq %zmm2, %zmm3, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm2 ^ zmm3
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm4
; AVX512-NEXT:    vpmuludq %zmm4, %zmm0, %zmm4
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm4 = zmm4 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm3
; AVX512-NEXT:    vpmuludq %zmm3, %zmm0, %zmm3
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm3 = zmm3 ^ zmm4 ^ zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm2
; AVX512-NEXT:    vpmuludq %zmm2, %zmm0, %zmm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to8}, %zmm1, %zmm1
; AVX512-NEXT:    vpmuludq %zmm1, %zmm0, %zmm0
; AVX512-NEXT:    vpternlogq {{.*#+}} zmm0 = zmm0 ^ zmm3 ^ zmm2
; AVX512-NEXT:    vpsrlq $32, %zmm0, %zmm0
; AVX512-NEXT:    vpmovqd %zmm0, %ymm0
; AVX512-NEXT:    retq
  %a.ext = zext <8 x i32> %a to <8 x i64>
  %b.ext = zext <8 x i32> %b to <8 x i64>
  %clmul = call <8 x i64> @llvm.clmul.v8i64(<8 x i64> %a.ext, <8 x i64> %b.ext)
  %res.ext = lshr <8 x i64> %clmul, splat (i64 32)
  %res = trunc <8 x i64> %res.ext to <8 x i32>
  ret <8 x i32> %res
}

define <4 x i64> @clmulh_v4i64(<4 x i64> %a, <4 x i64> %b) nounwind {
; AVX1-LABEL: clmulh_v4i64:
; AVX1:       # %bb.0:
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm2
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm3 = [7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8]
; AVX1-NEXT:    vpshufb %xmm3, %xmm2, %xmm5
; AVX1-NEXT:    vbroadcastss {{.*#+}} xmm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm6
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm4 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm5, %xmm5
; AVX1-NEXT:    vpand %xmm2, %xmm5, %xmm7
; AVX1-NEXT:    vmovdqa {{.*#+}} xmm5 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX1-NEXT:    vpshufb %xmm7, %xmm5, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm7, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm6, %ymm1, %ymm1
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm8
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm6
; AVX1-NEXT:    vpshufb %xmm3, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm7
; AVX1-NEXT:    vpshufb %xmm7, %xmm4, %xmm7
; AVX1-NEXT:    vpsrlw $4, %xmm6, %xmm6
; AVX1-NEXT:    vpand %xmm2, %xmm6, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm5, %xmm6
; AVX1-NEXT:    vpor %xmm6, %xmm7, %xmm6
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm10
; AVX1-NEXT:    vpsrlq $32, %xmm6, %xmm7
; AVX1-NEXT:    vpmuludq %xmm7, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm10, %xmm10
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm8
; AVX1-NEXT:    vpshufb %xmm8, %xmm4, %xmm8
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm8, %xmm0
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm11
; AVX1-NEXT:    vpsrlq $32, %xmm0, %xmm8
; AVX1-NEXT:    vpmuludq %xmm9, %xmm8, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpor %xmm9, %xmm11, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm9, %ymm10, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vxorps %ymm10, %ymm9, %ymm9
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm10
; AVX1-NEXT:    vextractf128 $1, %ymm10, %xmm11
; AVX1-NEXT:    vpmuludq %xmm6, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm7, %xmm11, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm12, %xmm11
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm12
; AVX1-NEXT:    vpmuludq %xmm10, %xmm8, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vpor %xmm10, %xmm12, %xmm10
; AVX1-NEXT:    vinsertf128 $1, %xmm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm12
; AVX1-NEXT:    vpsllq $32, %xmm12, %xmm12
; AVX1-NEXT:    vpor %xmm12, %xmm13, %xmm12
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm13
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm11
; AVX1-NEXT:    vpsllq $32, %xmm11, %xmm11
; AVX1-NEXT:    vpor %xmm11, %xmm13, %xmm11
; AVX1-NEXT:    vinsertf128 $1, %xmm12, %ymm11, %ymm11
; AVX1-NEXT:    vxorps %ymm11, %ymm10, %ymm10
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm11
; AVX1-NEXT:    vextractf128 $1, %ymm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm6, %xmm12, %xmm13
; AVX1-NEXT:    vpmuludq %xmm7, %xmm12, %xmm7
; AVX1-NEXT:    vpsllq $32, %xmm7, %xmm7
; AVX1-NEXT:    vpor %xmm7, %xmm13, %xmm7
; AVX1-NEXT:    vpmuludq %xmm0, %xmm11, %xmm12
; AVX1-NEXT:    vpmuludq %xmm11, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpor %xmm8, %xmm12, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm7, %ymm8, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm10, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm10, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vxorps %ymm7, %ymm9, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vxorps %ymm7, %ymm8, %ymm7
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm9
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vextractf128 $1, %ymm8, %xmm8
; AVX1-NEXT:    vpsrlq $32, %xmm8, %xmm8
; AVX1-NEXT:    vpmuludq %xmm6, %xmm8, %xmm8
; AVX1-NEXT:    vpsllq $32, %xmm8, %xmm8
; AVX1-NEXT:    vinsertf128 $1, %xmm8, %ymm9, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm10
; AVX1-NEXT:    vpmuludq %xmm0, %xmm10, %xmm10
; AVX1-NEXT:    vpsllq $32, %xmm10, %xmm10
; AVX1-NEXT:    vextractf128 $1, %ymm9, %xmm9
; AVX1-NEXT:    vpsrlq $32, %xmm9, %xmm9
; AVX1-NEXT:    vpmuludq %xmm6, %xmm9, %xmm9
; AVX1-NEXT:    vpsllq $32, %xmm9, %xmm9
; AVX1-NEXT:    vinsertf128 $1, %xmm9, %ymm10, %ymm9
; AVX1-NEXT:    vxorps %ymm9, %ymm8, %ymm8
; AVX1-NEXT:    vandps {{\.?LCPI[0-9]+_[0-9]+}}(%rip), %ymm1, %ymm1
; AVX1-NEXT:    vpsrlq $32, %xmm1, %xmm9
; AVX1-NEXT:    vpmuludq %xmm0, %xmm9, %xmm0
; AVX1-NEXT:    vpsllq $32, %xmm0, %xmm0
; AVX1-NEXT:    vextractf128 $1, %ymm1, %xmm1
; AVX1-NEXT:    vpsrlq $32, %xmm1, %xmm1
; AVX1-NEXT:    vpmuludq %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpsllq $32, %xmm1, %xmm1
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm8, %ymm0
; AVX1-NEXT:    vxorps %ymm0, %ymm7, %ymm0
; AVX1-NEXT:    vextractf128 $1, %ymm0, %xmm1
; AVX1-NEXT:    vpshufb {{.*#+}} xmm6 = xmm1[u,u,u,u,3],zero,zero,zero,xmm1[u,u,u,u,11],zero,zero,zero
; AVX1-NEXT:    vpshufb {{.*#+}} xmm7 = xmm1[u,u,u,u],zero,xmm1[2],zero,zero,xmm1[u,u,u,u],zero,xmm1[10],zero,zero
; AVX1-NEXT:    vpor %xmm6, %xmm7, %xmm6
; AVX1-NEXT:    vpshufb {{.*#+}} xmm7 = xmm1[u,u,u,u],zero,zero,xmm1[1,0,u,u,u,u],zero,zero,xmm1[9,8]
; AVX1-NEXT:    vpor %xmm6, %xmm7, %xmm6
; AVX1-NEXT:    vpshufb {{.*#+}} xmm1 = xmm1[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u]
; AVX1-NEXT:    vpblendw {{.*#+}} xmm1 = xmm1[0,1],xmm6[2,3],xmm1[4,5],xmm6[6,7]
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm6
; AVX1-NEXT:    vpshufb %xmm6, %xmm4, %xmm6
; AVX1-NEXT:    vpsrlw $4, %xmm1, %xmm1
; AVX1-NEXT:    vpand %xmm2, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm1, %xmm5, %xmm1
; AVX1-NEXT:    vpor %xmm1, %xmm6, %xmm1
; AVX1-NEXT:    vpsrlq $1, %xmm1, %xmm1
; AVX1-NEXT:    vpshufb %xmm3, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm3
; AVX1-NEXT:    vpshufb %xmm3, %xmm4, %xmm3
; AVX1-NEXT:    vpsrlw $4, %xmm0, %xmm0
; AVX1-NEXT:    vpand %xmm2, %xmm0, %xmm0
; AVX1-NEXT:    vpshufb %xmm0, %xmm5, %xmm0
; AVX1-NEXT:    vpor %xmm0, %xmm3, %xmm0
; AVX1-NEXT:    vpsrlq $1, %xmm0, %xmm0
; AVX1-NEXT:    vinsertf128 $1, %xmm1, %ymm0, %ymm0
; AVX1-NEXT:    retq
;
; AVX2-LABEL: clmulh_v4i64:
; AVX2:       # %bb.0:
; AVX2-NEXT:    subq $648, %rsp # imm = 0x288
; AVX2-NEXT:    vpshufb {{.*#+}} ymm2 = ymm0[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u,23,22,21,20,u,u,u,u,31,30,29,28,u,u,u,u]
; AVX2-NEXT:    vpshufb {{.*#+}} ymm3 = ymm0[u,u,u,u,3],zero,zero,zero,ymm0[u,u,u,u,11],zero,zero,zero,ymm0[u,u,u,u,19],zero,zero,zero,ymm0[u,u,u,u,27],zero,zero,zero
; AVX2-NEXT:    vpshufb {{.*#+}} ymm4 = ymm0[u,u,u,u],zero,ymm0[2],zero,zero,ymm0[u,u,u,u],zero,ymm0[10],zero,zero,ymm0[u,u,u,u],zero,ymm0[18],zero,zero,ymm0[u,u,u,u],zero,ymm0[26],zero,zero
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpshufb {{.*#+}} ymm0 = ymm0[u,u,u,u],zero,zero,ymm0[1,0,u,u,u,u],zero,zero,ymm0[9,8,u,u,u,u],zero,zero,ymm0[17,16,u,u,u,u],zero,zero,ymm0[25,24]
; AVX2-NEXT:    vpor %ymm3, %ymm0, %ymm0
; AVX2-NEXT:    vpblendd {{.*#+}} ymm0 = ymm2[0],ymm0[1],ymm2[2],ymm0[3],ymm2[4],ymm0[5],ymm2[6],ymm0[7]
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm8 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm0, %ymm8, %ymm2
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm6 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm6 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm2, %ymm6, %ymm2
; AVX2-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm0, %ymm8, %ymm0
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm4 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm4 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm5
; AVX2-NEXT:    vpshufb {{.*#+}} ymm0 = ymm1[7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,23,22,21,20,19,18,17,16,31,30,29,28,27,26,25,24]
; AVX2-NEXT:    vpsrlw $4, %ymm0, %ymm1
; AVX2-NEXT:    vpand %ymm1, %ymm8, %ymm1
; AVX2-NEXT:    vpshufb %ymm1, %ymm4, %ymm7
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [2,2,2,2]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpsrlq $32, %ymm5, %ymm11
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [1,1,1,1]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [4,4,4,4]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [8,8,8,8]
; AVX2-NEXT:    vmovdqu %ymm3, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm3, %ymm7, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm5, %ymm4
; AVX2-NEXT:    vpmuludq %ymm3, %ymm11, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpor %ymm3, %ymm4, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpand %ymm0, %ymm8, %ymm0
; AVX2-NEXT:    vpshufb %ymm0, %ymm6, %ymm12
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm0 = [16,16,16,16]
; AVX2-NEXT:    vmovdqu %ymm0, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm0, %ymm12, %ymm0
; AVX2-NEXT:    vpmuludq %ymm0, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm0, %ymm11, %ymm0
; AVX2-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [32,32,32,32]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [64,64,64,64]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [128,128,128,128]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm4
; AVX2-NEXT:    vmovdqu %ymm4, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm0 = [256,256,256,256]
; AVX2-NEXT:    vmovdqu %ymm0, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm0, %ymm7, %ymm0
; AVX2-NEXT:    vpmuludq %ymm0, %ymm5, %ymm1
; AVX2-NEXT:    vpmuludq %ymm0, %ymm11, %ymm0
; AVX2-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [512,512,512,512]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [1024,1024,1024,1024]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [2048,2048,2048,2048]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [4096,4096,4096,4096]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [8192,8192,8192,8192]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [16384,16384,16384,16384]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [32768,32768,32768,32768]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [65536,65536,65536,65536]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [131072,131072,131072,131072]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [262144,262144,262144,262144]
; AVX2-NEXT:    vmovdqu %ymm2, (%rsp) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm7, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpxor %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [524288,524288,524288,524288]
; AVX2-NEXT:    vmovdqu %ymm1, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm1, %ymm7, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [1048576,1048576,1048576,1048576]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [2097152,2097152,2097152,2097152]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm2 = [4194304,4194304,4194304,4194304]
; AVX2-NEXT:    vmovdqu %ymm2, {{[-0-9]+}}(%r{{[sb]}}p) # 32-byte Spill
; AVX2-NEXT:    vpand %ymm2, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm15 = [8388608,8388608,8388608,8388608]
; AVX2-NEXT:    vpand %ymm15, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm14 = [16777216,16777216,16777216,16777216]
; AVX2-NEXT:    vpand %ymm7, %ymm14, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm13 = [33554432,33554432,33554432,33554432]
; AVX2-NEXT:    vpand %ymm7, %ymm13, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm4
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm10 = [67108864,67108864,67108864,67108864]
; AVX2-NEXT:    vpand %ymm7, %ymm10, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm9 = [134217728,134217728,134217728,134217728]
; AVX2-NEXT:    vpand %ymm7, %ymm9, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm8 = [268435456,268435456,268435456,268435456]
; AVX2-NEXT:    vpand %ymm8, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm3, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm1, %ymm1
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm6 = [536870912,536870912,536870912,536870912]
; AVX2-NEXT:    vpand %ymm6, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm0
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm1, %ymm2
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [1073741824,1073741824,1073741824,1073741824]
; AVX2-NEXT:    vpand %ymm3, %ymm12, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm0
; AVX2-NEXT:    vpmuludq %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpor %ymm1, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [2147483648,2147483648,2147483648,2147483648]
; AVX2-NEXT:    vpand %ymm1, %ymm12, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm11, %ymm11
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm11, %ymm11
; AVX2-NEXT:    vpor %ymm2, %ymm11, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpsrlq $32, %ymm7, %ymm7
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpxor %ymm0, %ymm4, %ymm0
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpsrlq $32, %ymm12, %ymm11
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm2 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand (%rsp), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm7, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand {{[-0-9]+}}(%r{{[sb]}}p), %ymm11, %ymm4 # 32-byte Folded Reload
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm15, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm7, %ymm14, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm7, %ymm13, %ymm2
; AVX2-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm7, %ymm10, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm7, %ymm9, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm8, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm6, %ymm11, %ymm4
; AVX2-NEXT:    vpmuludq %ymm4, %ymm5, %ymm4
; AVX2-NEXT:    vpsllq $32, %ymm4, %ymm4
; AVX2-NEXT:    vpxor %ymm4, %ymm2, %ymm2
; AVX2-NEXT:    vpand %ymm3, %ymm11, %ymm3
; AVX2-NEXT:    vpmuludq %ymm3, %ymm5, %ymm3
; AVX2-NEXT:    vpsllq $32, %ymm3, %ymm3
; AVX2-NEXT:    vpxor %ymm3, %ymm2, %ymm2
; AVX2-NEXT:    vpxor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm1, %ymm11, %ymm1
; AVX2-NEXT:    vpmuludq %ymm1, %ymm5, %ymm1
; AVX2-NEXT:    vmovdqu {{[-0-9]+}}(%r{{[sb]}}p), %ymm2 # 32-byte Reload
; AVX2-NEXT:    vpsllq $56, %ymm2, %ymm2
; AVX2-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX2-NEXT:    vpxor %ymm1, %ymm0, %ymm1
; AVX2-NEXT:    vpshufb {{.*#+}} ymm0 = ymm0[u,u,u,u,3,2],zero,zero,ymm0[u,u,u,u,11,10],zero,zero,ymm0[u,u,u,u,19,18],zero,zero,ymm0[u,u,u,u,27,26],zero,zero
; AVX2-NEXT:    vpor %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpshufb {{.*#+}} ymm2 = ymm1[u,u,u,u],zero,zero,ymm1[1],zero,ymm1[u,u,u,u],zero,zero,ymm1[9],zero,ymm1[u,u,u,u],zero,zero,ymm1[17],zero,ymm1[u,u,u,u],zero,zero,ymm1[25],zero
; AVX2-NEXT:    vpor %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vpshufb {{.*#+}} ymm1 = ymm1[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u,23,22,21,20,u,u,u,u,31,30,29,28,u,u,u,u]
; AVX2-NEXT:    vpblendd {{.*#+}} ymm0 = ymm1[0],ymm0[1],ymm1[2],ymm0[3],ymm1[4],ymm0[5],ymm1[6],ymm0[7]
; AVX2-NEXT:    vpbroadcastb {{.*#+}} ymm2 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX2-NEXT:    vpand %ymm2, %ymm0, %ymm1
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX2-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm1, %ymm3, %ymm1
; AVX2-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX2-NEXT:    vpand %ymm2, %ymm0, %ymm0
; AVX2-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX2-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX2-NEXT:    vpshufb %ymm0, %ymm2, %ymm0
; AVX2-NEXT:    vpor %ymm0, %ymm1, %ymm0
; AVX2-NEXT:    vpsrlq $1, %ymm0, %ymm0
; AVX2-NEXT:    addq $648, %rsp # imm = 0x288
; AVX2-NEXT:    retq
;
; AVX512-LABEL: clmulh_v4i64:
; AVX512:       # %bb.0:
; AVX512-NEXT:    vpshufb {{.*#+}} ymm2 = ymm0[u,u,u,u,3],zero,zero,zero,ymm0[u,u,u,u,11],zero,zero,zero,ymm0[u,u,u,u,19],zero,zero,zero,ymm0[u,u,u,u,27],zero,zero,zero
; AVX512-NEXT:    vpshufb {{.*#+}} ymm3 = ymm0[u,u,u,u],zero,ymm0[2],zero,zero,ymm0[u,u,u,u],zero,ymm0[10],zero,zero,ymm0[u,u,u,u],zero,ymm0[18],zero,zero,ymm0[u,u,u,u],zero,ymm0[26],zero,zero
; AVX512-NEXT:    vpshufb {{.*#+}} ymm4 = ymm0[u,u,u,u],zero,zero,ymm0[1,0,u,u,u,u],zero,zero,ymm0[9,8,u,u,u,u],zero,zero,ymm0[17,16,u,u,u,u],zero,zero,ymm0[25,24]
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm4 | ymm3 | ymm2
; AVX512-NEXT:    vpshufb {{.*#+}} ymm0 = ymm0[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u,23,22,21,20,u,u,u,u,31,30,29,28,u,u,u,u]
; AVX512-NEXT:    vpblendd {{.*#+}} ymm0 = ymm0[0],ymm4[1],ymm0[2],ymm4[3],ymm0[4],ymm4[5],ymm0[6],ymm4[7]
; AVX512-NEXT:    vpbroadcastd {{.*#+}} ymm13 = [15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15]
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm2
; AVX512-NEXT:    vbroadcasti128 {{.*#+}} ymm4 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX512-NEXT:    # ymm4 = mem[0,1,0,1]
; AVX512-NEXT:    vpshufb %ymm2, %ymm4, %ymm2
; AVX512-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm0
; AVX512-NEXT:    vbroadcasti128 {{.*#+}} ymm3 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX512-NEXT:    # ymm3 = mem[0,1,0,1]
; AVX512-NEXT:    vpshufb %ymm0, %ymm3, %ymm0
; AVX512-NEXT:    vpor %ymm0, %ymm2, %ymm5
; AVX512-NEXT:    vpshufb {{.*#+}} ymm0 = ymm1[7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,23,22,21,20,19,18,17,16,31,30,29,28,27,26,25,24]
; AVX512-NEXT:    vpsrlw $4, %ymm0, %ymm1
; AVX512-NEXT:    vpand %ymm1, %ymm13, %ymm1
; AVX512-NEXT:    vpshufb %ymm1, %ymm3, %ymm6
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm1
; AVX512-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX512-NEXT:    vpsrlq $32, %ymm5, %ymm10
; AVX512-NEXT:    vpmuludq %ymm1, %ymm10, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX512-NEXT:    vpor %ymm1, %ymm2, %ymm1
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm1 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm1
; AVX512-NEXT:    vpmuludq %ymm1, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm1, %ymm10, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm1 = ymm2 ^ (ymm1 | ymm3)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm1 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm0
; AVX512-NEXT:    vpshufb %ymm0, %ymm4, %ymm12
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm1
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm1)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm12, %ymm1
; AVX512-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX512-NEXT:    vpmuludq %ymm1, %ymm10, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm1, %ymm1
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm1 = ymm0 ^ (ymm1 | ymm2)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm2
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm1 ^ (ymm0 | ymm2)
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm12, %ymm1
; AVX512-NEXT:    vpmuludq %ymm1, %ymm5, %ymm2
; AVX512-NEXT:    vpmuludq %ymm1, %ymm10, %ymm1
; AVX512-NEXT:    vpsllq $32, %ymm1, %ymm4
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm4 = ymm0 ^ (ymm4 | ymm2)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm17 = [256,256,256,256]
; AVX512-NEXT:    vpandq %ymm17, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm2
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm4 ^ (ymm0 | ymm2)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm18 = [512,512,512,512]
; AVX512-NEXT:    vpandq %ymm18, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm19 = [1024,1024,1024,1024]
; AVX512-NEXT:    vpandq %ymm19, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm20 = [2048,2048,2048,2048]
; AVX512-NEXT:    vpandq %ymm20, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm21 = [4096,4096,4096,4096]
; AVX512-NEXT:    vpandq %ymm21, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm22 = [8192,8192,8192,8192]
; AVX512-NEXT:    vpandq %ymm22, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm23 = [16384,16384,16384,16384]
; AVX512-NEXT:    vpandq %ymm23, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm24 = [32768,32768,32768,32768]
; AVX512-NEXT:    vpandq %ymm24, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm25 = [65536,65536,65536,65536]
; AVX512-NEXT:    vpandq %ymm25, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm26 = [131072,131072,131072,131072]
; AVX512-NEXT:    vpandq %ymm26, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm27 = [262144,262144,262144,262144]
; AVX512-NEXT:    vpandq %ymm27, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm28 = [524288,524288,524288,524288]
; AVX512-NEXT:    vpandq %ymm28, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm29 = [1048576,1048576,1048576,1048576]
; AVX512-NEXT:    vpandq %ymm29, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm30 = [2097152,2097152,2097152,2097152]
; AVX512-NEXT:    vpandq %ymm30, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm31 = [4194304,4194304,4194304,4194304]
; AVX512-NEXT:    vpandq %ymm31, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm16 = [8388608,8388608,8388608,8388608]
; AVX512-NEXT:    vpandq %ymm16, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm15 = [16777216,16777216,16777216,16777216]
; AVX512-NEXT:    vpand %ymm6, %ymm15, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm14 = [33554432,33554432,33554432,33554432]
; AVX512-NEXT:    vpand %ymm6, %ymm14, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm11 = [67108864,67108864,67108864,67108864]
; AVX512-NEXT:    vpand %ymm6, %ymm11, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm9 = [134217728,134217728,134217728,134217728]
; AVX512-NEXT:    vpand %ymm6, %ymm9, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm8 = [268435456,268435456,268435456,268435456]
; AVX512-NEXT:    vpand %ymm8, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm3
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm3)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm7 = [536870912,536870912,536870912,536870912]
; AVX512-NEXT:    vpand %ymm7, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm1
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm0 ^ (ymm2 | ymm1)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm3 = [1073741824,1073741824,1073741824,1073741824]
; AVX512-NEXT:    vpand %ymm3, %ymm12, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm1
; AVX512-NEXT:    vpmuludq %ymm0, %ymm10, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm0 = ymm2 ^ (ymm0 | ymm1)
; AVX512-NEXT:    vpbroadcastq {{.*#+}} ymm1 = [2147483648,2147483648,2147483648,2147483648]
; AVX512-NEXT:    vpand %ymm1, %ymm12, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm10, %ymm10
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm10, %ymm10
; AVX512-NEXT:    vpor %ymm2, %ymm10, %ymm2
; AVX512-NEXT:    vpsrlq $32, %ymm6, %ymm6
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm10
; AVX512-NEXT:    vpmuludq %ymm5, %ymm10, %ymm10
; AVX512-NEXT:    vpsllq $32, %ymm10, %ymm10
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm10 = ymm10 ^ ymm0 ^ ymm2
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm10 ^ ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpsrlq $32, %ymm12, %ymm10
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm10, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm10, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq {{\.?LCPI[0-9]+_[0-9]+}}(%rip){1to4}, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm17, %ymm6, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq %ymm18, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm19, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq %ymm20, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm21, %ymm10, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq %ymm22, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm23, %ymm10, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq %ymm24, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm25, %ymm6, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq %ymm26, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm27, %ymm6, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq %ymm28, %ymm6, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm29, %ymm10, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpandq %ymm30, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpandq %ymm31, %ymm10, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpandq %ymm16, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm6, %ymm15, %ymm12
; AVX512-NEXT:    vpmuludq %ymm5, %ymm12, %ymm12
; AVX512-NEXT:    vpsllq $32, %ymm12, %ymm12
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm12 = ymm12 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpand %ymm6, %ymm14, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm6, %ymm11, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm12 ^ ymm0
; AVX512-NEXT:    vpand %ymm6, %ymm9, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm8, %ymm10, %ymm6
; AVX512-NEXT:    vpmuludq %ymm6, %ymm5, %ymm6
; AVX512-NEXT:    vpsllq $32, %ymm6, %ymm6
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm6 = ymm6 ^ ymm2 ^ ymm0
; AVX512-NEXT:    vpand %ymm7, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm3, %ymm10, %ymm2
; AVX512-NEXT:    vpmuludq %ymm2, %ymm5, %ymm2
; AVX512-NEXT:    vpsllq $32, %ymm2, %ymm2
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm2 = ymm2 ^ ymm6 ^ ymm0
; AVX512-NEXT:    vpand %ymm1, %ymm10, %ymm0
; AVX512-NEXT:    vpmuludq %ymm0, %ymm5, %ymm0
; AVX512-NEXT:    vpshufb {{.*#+}} ymm1 = ymm2[u,u,u,u,3,2],zero,zero,ymm2[u,u,u,u,11,10],zero,zero,ymm2[u,u,u,u,19,18],zero,zero,ymm2[u,u,u,u,27,26],zero,zero
; AVX512-NEXT:    vpsllq $32, %ymm0, %ymm0
; AVX512-NEXT:    vpxor %ymm0, %ymm2, %ymm0
; AVX512-NEXT:    vpshufb {{.*#+}} ymm2 = ymm0[u,u,u,u],zero,zero,ymm0[1],zero,ymm0[u,u,u,u],zero,zero,ymm0[9],zero,ymm0[u,u,u,u],zero,zero,ymm0[17],zero,ymm0[u,u,u,u],zero,zero,ymm0[25],zero
; AVX512-NEXT:    vpsllq $56, %ymm4, %ymm3
; AVX512-NEXT:    vpternlogq {{.*#+}} ymm3 = ymm3 | ymm1 | ymm2
; AVX512-NEXT:    vpshufb {{.*#+}} ymm0 = ymm0[7,6,5,4,u,u,u,u,15,14,13,12,u,u,u,u,23,22,21,20,u,u,u,u,31,30,29,28,u,u,u,u]
; AVX512-NEXT:    vpblendd {{.*#+}} ymm0 = ymm0[0],ymm3[1],ymm0[2],ymm3[3],ymm0[4],ymm3[5],ymm0[6],ymm3[7]
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm1
; AVX512-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240]
; AVX512-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX512-NEXT:    vpshufb %ymm1, %ymm2, %ymm1
; AVX512-NEXT:    vpsrlw $4, %ymm0, %ymm0
; AVX512-NEXT:    vpand %ymm0, %ymm13, %ymm0
; AVX512-NEXT:    vbroadcasti128 {{.*#+}} ymm2 = [0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15,0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]
; AVX512-NEXT:    # ymm2 = mem[0,1,0,1]
; AVX512-NEXT:    vpshufb %ymm0, %ymm2, %ymm0
; AVX512-NEXT:    vpor %ymm0, %ymm1, %ymm0
; AVX512-NEXT:    vpsrlq $1, %ymm0, %ymm0
; AVX512-NEXT:    retq
  %a.ext = zext <4 x i64> %a to <4 x i128>
  %b.ext = zext <4 x i64> %b to <4 x i128>
  %clmul = call <4 x i128> @llvm.clmul.v4i128(<4 x i128> %a.ext, <4 x i128> %b.ext)
  %res.ext = lshr <4 x i128> %clmul, splat (i128 64)
  %res = trunc <4 x i128> %res.ext to <4 x i64>
  ret <4 x i64> %res
}
