; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc < %s -mtriple=x86_64-unknown-linux-gnu -mattr=+bmi | FileCheck %s

define i64 @pr90730(i64 %x, i64 %y, ptr %p) {
; CHECK-LABEL: pr90730:
; CHECK:       # %bb.0: # %entry
; CHECK-NEXT:    movabsq $33181731808, %rax # imm = 0x7B9C90BE0
; CHECK-NEXT:    andnq %rax, %rdi, %rax
; CHECK-NEXT:    movq $0, (%rdx)
; CHECK-NEXT:    retq
entry:
  %ext = and i64 %y, 1
  %xor1 = xor i64 %ext, 33181731817
  %and1 = and i64 %xor1, %x
  store i64 %and1, ptr %p, align 4
  %v = load i64, ptr %p, align 4
  %and2 = and i64 %v, 33181731808
  %xor2 = xor i64 %and2, 33181731808
  store i64 0, ptr %p, align 4
  ret i64 %xor2
}
