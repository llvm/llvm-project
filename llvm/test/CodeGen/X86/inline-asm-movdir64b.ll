; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 2
; RUN: llc < %s -mtriple=i686-unknown-unknown -mattr=+movdir64b | FileCheck %s --check-prefix=X86

define void @test_movdir64b() {
; X86-LABEL: test_movdir64b:
; X86:       # %bb.0: # %entry
; X86-NEXT:    subl $4000, %esp # imm = 0xFA0
; X86-NEXT:    .cfi_def_cfa_offset 4004
; X86-NEXT:    #APP
; X86-EMPTY:
; X86-NEXT:    movdir64b (%esp), %eax
; X86-EMPTY:
; X86-NEXT:    #NO_APP
; X86-NEXT:    addl $4000, %esp # imm = 0xFA0
; X86-NEXT:    .cfi_def_cfa_offset 4
; X86-NEXT:    retl
entry:
  %arr = alloca [1000 x i32], align 4
  call void asm sideeffect inteldialect "movdir64b eax, zmmword ptr $0", "*m,~{dirflag},~{fpsr},~{flags}"(ptr elementtype([1000 x i32]) %arr)
  ret void
}
