; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc < %s -mtriple=i686--
; RUN: llc < %s -mtriple=x86_64--
; RUN: llc < %s -mtriple=x86_64--  -global-isel -global-isel-abort=1 | FileCheck %s -check-prefixes=GISEL
; XRUN: llc < %s -mtriple=i686--   -global-isel -global-isel-abort=1 | FileCheck %s -check-prefixes=GISEL
; PR1033

define i64 @test1(double %t) {
; GISEL-LABEL: test1:
; GISEL:       # %bb.0:
; GISEL-NEXT:    movq %xmm0, %rax
; GISEL-NEXT:    retq
        %u = bitcast double %t to i64           ; <i64> [#uses=1]
        ret i64 %u
}

define double @test2(i64 %t) {
; GISEL-LABEL: test2:
; GISEL:       # %bb.0:
; GISEL-NEXT:    movq %rdi, %xmm0
; GISEL-NEXT:    retq
        %u = bitcast i64 %t to double           ; <double> [#uses=1]
        ret double %u
}

define i32 @test3(float %t) {
; GISEL-LABEL: test3:
; GISEL:       # %bb.0:
; GISEL-NEXT:    movd %xmm0, %eax
; GISEL-NEXT:    retq
        %u = bitcast float %t to i32            ; <i32> [#uses=1]
        ret i32 %u
}

define float @test4(i32 %t) {
; GISEL-LABEL: test4:
; GISEL:       # %bb.0:
; GISEL-NEXT:    movd %edi, %xmm0
; GISEL-NEXT:    retq
        %u = bitcast i32 %t to float            ; <float> [#uses=1]
        ret float %u
}

