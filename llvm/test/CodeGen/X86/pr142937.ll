; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: not llc %s -mtriple=i686-- -O0 -filetype=null 2>&1 | FileCheck %s
; RUN: not llc %s -mtriple=x86_64-- -O0 -filetype=null 2>&1 | FileCheck %s

; CHECK: must be lowered by the LowerTypeTests pass

define void @public_type_test() {
bb:
  %call = call i1 @llvm.public.type.test(ptr null, metadata !"typeinfo")
  br label %bb1

bb1:
  call void @llvm.assume(i1 %call)
  ret void
}

define void @type_test() {
bb:
  %call = tail call i1 @llvm.type.test(ptr null, metadata !"typeinfo")
  br i1 %call, label %bb2, label %bb1

bb1:
  tail call void @llvm.ubsantrap(i8 2)
  unreachable

bb2:
  ret void
}

declare i1 @llvm.public.type.test(ptr, metadata)
declare void @llvm.assume(i1 noundef)
declare i1 @llvm.type.test(ptr, metadata)
declare void @llvm.ubsantrap(i8 immarg)
