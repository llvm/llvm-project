; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 6
; RUN: llc < %s -mtriple=x86_64-unknown -mattr=-sse,+egpr --show-mc-encoding | FileCheck %s

define void @x87(ptr %0, ptr %1) nounwind {
; CHECK-LABEL: x87:
; CHECK:       # %bb.0:
; CHECK-NEXT:    pushq %r14 # encoding: [0x41,0x56]
; CHECK-NEXT:    pushq %rbx # encoding: [0x53]
; CHECK-NEXT:    movq %rsi, %rbx # encoding: [0x48,0x89,0xf3]
; CHECK-NEXT:    movq %rdi, %r14 # encoding: [0x49,0x89,0xfe]
; CHECK-NEXT:    #APP
; CHECK-NEXT:    nop # encoding: [0x90]
; CHECK-NEXT:    #NO_APP
; CHECK-NEXT:    flds (%r14) # encoding: [0x41,0xd9,0x06]
; CHECK-NEXT:    fstps (%rbx) # encoding: [0xd9,0x1b]
; CHECK-NEXT:    popq %rbx # encoding: [0x5b]
; CHECK-NEXT:    popq %r14 # encoding: [0x41,0x5e]
; CHECK-NEXT:    retq # encoding: [0xc3]
  tail call void asm sideeffect "nop", "~{eax},~{ecx},~{edx},~{esi},~{edi},~{r8},~{r9},~{r10},~{r11}"()
  %3 = load float, ptr %0
  store float %3, ptr %1
  ret void
}

