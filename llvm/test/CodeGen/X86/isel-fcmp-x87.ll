; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s                               -mtriple=x86_64-apple-darwin10 -mattr=+x87,-sse,-sse2 -verify-machineinstrs | FileCheck %s --check-prefix=SDAG-X64
; RUN: llc < %s -fast-isel -fast-isel-abort=1 -mtriple=x86_64-apple-darwin10 -mattr=+x87,-sse,-sse2 -verify-machineinstrs | FileCheck %s --check-prefix=FAST-X64
; RUN: llc < %s -global-isel -global-isel-abort=1 -mtriple=x86_64-apple-darwin10 -mattr=+x87,-sse,-sse2 -verify-machineinstrs | FileCheck %s --check-prefixes=GISEL-X64
; RUN: llc < %s                               -mtriple=i686-apple-darwin10 -mattr=+x87,-sse,-sse2 -verify-machineinstrs | FileCheck %s --check-prefixes=SDAG-X86
; Allow fast-isel to fallback to selection dag on x86
; RUN: llc < %s -fast-isel -mtriple=i686-apple-darwin10 -mattr=+x87,-sse,-sse2 -verify-machineinstrs | FileCheck %s --check-prefixes=FAST-X86
; RUN: llc < %s -global-isel -global-isel-abort=1 -mtriple=i686-apple-darwin10 -mattr=+x87,-sse,-sse2 -verify-machineinstrs | FileCheck %s --check-prefixes=GISEL-X86

  define i1 @fcmp_x86_fp80_oeq(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_oeq:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setnp %cl
; SDAG-X64-NEXT:    sete %al
; SDAG-X64-NEXT:    andb %cl, %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_oeq:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setnp %cl
; FAST-X64-NEXT:    sete %al
; FAST-X64-NEXT:    andb %cl, %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_oeq:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    sete %cl
; GISEL-X64-NEXT:    setnp %al
; GISEL-X64-NEXT:    andb %cl, %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_oeq:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setnp %cl
; SDAG-X86-NEXT:    sete %al
; SDAG-X86-NEXT:    andb %cl, %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_oeq:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setnp %cl
; FAST-X86-NEXT:    sete %al
; FAST-X86-NEXT:    andb %cl, %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_oeq:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    sete %cl
; GISEL-X86-NEXT:    setnp %al
; GISEL-X86-NEXT:    andb %cl, %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp oeq x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_ogt(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_ogt:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    seta %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_ogt:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    seta %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_ogt:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    seta %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_ogt:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    seta %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_ogt:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    seta %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_ogt:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    seta %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp ogt x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_oge(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_oge:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setae %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_oge:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setae %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_oge:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setae %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_oge:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setae %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_oge:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setae %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_oge:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setae %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp oge x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_olt(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_olt:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    seta %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_olt:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fxch %st(1)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    seta %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_olt:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    seta %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_olt:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    seta %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_olt:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fxch %st(1)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    seta %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_olt:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    seta %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp olt x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_ole(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_ole:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setae %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_ole:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fxch %st(1)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setae %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_ole:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setae %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_ole:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setae %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_ole:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fxch %st(1)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setae %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_ole:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setae %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp ole x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_one(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_one:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setne %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_one:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setne %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_one:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setne %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_one:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setne %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_one:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setne %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_one:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setne %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp one x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_ord(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_ord:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setnp %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_ord:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setnp %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_ord:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setnp %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_ord:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setnp %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_ord:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setnp %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_ord:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setnp %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp ord x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_uno(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_uno:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setp %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_uno:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setp %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_uno:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setp %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_uno:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setp %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_uno:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setp %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_uno:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setp %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp uno x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_ueq(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_ueq:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    sete %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_ueq:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    sete %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_ueq:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    sete %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_ueq:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    sete %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_ueq:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    sete %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_ueq:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    sete %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp ueq x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_ugt(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_ugt:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setb %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_ugt:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fxch %st(1)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setb %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_ugt:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setb %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_ugt:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setb %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_ugt:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fxch %st(1)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setb %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_ugt:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setb %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp ugt x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_uge(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_uge:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setbe %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_uge:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fxch %st(1)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setbe %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_uge:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setbe %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_uge:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setbe %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_uge:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fxch %st(1)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setbe %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_uge:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setbe %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp uge x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_ult(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_ult:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setb %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_ult:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setb %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_ult:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setb %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_ult:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setb %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_ult:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setb %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_ult:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setb %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp ult x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_ule(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_ule:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setbe %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_ule:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setbe %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_ule:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setbe %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_ule:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setbe %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_ule:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setbe %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_ule:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setbe %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp ule x86_fp80 %x, %y
    ret i1 %1
  }

  define i1 @fcmp_x86_fp80_une(x86_fp80 %x, x86_fp80 %y) {
; SDAG-X64-LABEL: fcmp_x86_fp80_une:
; SDAG-X64:       ## %bb.0:
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; SDAG-X64-NEXT:    fucompi %st(1), %st
; SDAG-X64-NEXT:    fstp %st(0)
; SDAG-X64-NEXT:    setp %cl
; SDAG-X64-NEXT:    setne %al
; SDAG-X64-NEXT:    orb %cl, %al
; SDAG-X64-NEXT:    retq
;
; FAST-X64-LABEL: fcmp_x86_fp80_une:
; FAST-X64:       ## %bb.0:
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; FAST-X64-NEXT:    fucompi %st(1), %st
; FAST-X64-NEXT:    fstp %st(0)
; FAST-X64-NEXT:    setp %cl
; FAST-X64-NEXT:    setne %al
; FAST-X64-NEXT:    orb %cl, %al
; FAST-X64-NEXT:    retq
;
; GISEL-X64-LABEL: fcmp_x86_fp80_une:
; GISEL-X64:       ## %bb.0:
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fldt {{[0-9]+}}(%rsp)
; GISEL-X64-NEXT:    fxch %st(1)
; GISEL-X64-NEXT:    fucompi %st(1), %st
; GISEL-X64-NEXT:    fstp %st(0)
; GISEL-X64-NEXT:    setne %cl
; GISEL-X64-NEXT:    setp %al
; GISEL-X64-NEXT:    orb %cl, %al
; GISEL-X64-NEXT:    retq
;
; SDAG-X86-LABEL: fcmp_x86_fp80_une:
; SDAG-X86:       ## %bb.0:
; SDAG-X86-NEXT:    subl $12, %esp
; SDAG-X86-NEXT:    .cfi_def_cfa_offset 16
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; SDAG-X86-NEXT:    fucompp
; SDAG-X86-NEXT:    fnstsw %ax
; SDAG-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; SDAG-X86-NEXT:    sahf
; SDAG-X86-NEXT:    setp %cl
; SDAG-X86-NEXT:    setne %al
; SDAG-X86-NEXT:    orb %cl, %al
; SDAG-X86-NEXT:    addl $12, %esp
; SDAG-X86-NEXT:    retl
;
; FAST-X86-LABEL: fcmp_x86_fp80_une:
; FAST-X86:       ## %bb.0:
; FAST-X86-NEXT:    subl $12, %esp
; FAST-X86-NEXT:    .cfi_def_cfa_offset 16
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; FAST-X86-NEXT:    fucompp
; FAST-X86-NEXT:    fnstsw %ax
; FAST-X86-NEXT:    ## kill: def $ah killed $ah killed $ax
; FAST-X86-NEXT:    sahf
; FAST-X86-NEXT:    setp %cl
; FAST-X86-NEXT:    setne %al
; FAST-X86-NEXT:    orb %cl, %al
; FAST-X86-NEXT:    addl $12, %esp
; FAST-X86-NEXT:    retl
;
; GISEL-X86-LABEL: fcmp_x86_fp80_une:
; GISEL-X86:       ## %bb.0:
; GISEL-X86-NEXT:    subl $12, %esp
; GISEL-X86-NEXT:    .cfi_def_cfa_offset 16
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fldt {{[0-9]+}}(%esp)
; GISEL-X86-NEXT:    fxch %st(1)
; GISEL-X86-NEXT:    fucompi %st(1), %st
; GISEL-X86-NEXT:    fstp %st(0)
; GISEL-X86-NEXT:    setne %cl
; GISEL-X86-NEXT:    setp %al
; GISEL-X86-NEXT:    orb %cl, %al
; GISEL-X86-NEXT:    addl $12, %esp
; GISEL-X86-NEXT:    retl
    %1 = fcmp une x86_fp80 %x, %y
    ret i1 %1
  }
