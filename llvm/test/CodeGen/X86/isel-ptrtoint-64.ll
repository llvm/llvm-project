; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -mtriple=x86_64-linux-gnu                                   -mattr=-sse2    -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,SDAG-SCALAR,NO-SSE,SDAG-NO-SSE
; RUN: llc -mtriple=x86_64-linux-gnu -fast-isel                        -mattr=-sse2    -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,FAST-SCALAR,NO-SSE,FAST-NO-SSE
; RUN: llc -mtriple=x86_64-linux-gnu -global-isel -global-isel-abort=1 -mattr=-sse2    -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,GISEL-SCALAR,NO-SSE,GISEL-NO-SSE
; RUN: llc -mtriple=x86_64-linux-gnu                                   -mattr=+sse2    -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,SDAG-SCALAR,SSE,SDAG-SSE
; RUN: llc -mtriple=x86_64-linux-gnu -fast-isel                        -mattr=+sse2    -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,FAST-SCALAR,SSE,FAST-SSE
; RUN: llc -mtriple=x86_64-linux-gnu -global-isel -global-isel-abort=1 -mattr=+sse2    -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,GISEL-SCALAR,SSE,GISEL-SSE
; RUN: llc -mtriple=x86_64-linux-gnu                                   -mattr=+avx     -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,SDAG-SCALAR,AVX,SDAG-AVX
; RUN: llc -mtriple=x86_64-linux-gnu -fast-isel                        -mattr=+avx     -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,FAST-SCALAR,AVX,FAST-AVX
; RUN: llc -mtriple=x86_64-linux-gnu -global-isel -global-isel-abort=1 -mattr=+avx     -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,GISEL-SCALAR,AVX,GISEL-AVX
; RUN: llc -mtriple=x86_64-linux-gnu                                   -mattr=+avx512f -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,SDAG-SCALAR,AVX512,SDAG-AVX512
; RUN: llc -mtriple=x86_64-linux-gnu -fast-isel                        -mattr=+avx512f -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,FAST-SCALAR,AVX512,FAST-AVX512
; RUN: llc -mtriple=x86_64-linux-gnu -global-isel -global-isel-abort=1 -mattr=+avx512f -verify-machineinstrs < %s -o - | FileCheck %s --check-prefixes=SCALAR,GISEL-SCALAR,AVX512,GISEL-AVX512

define i1 @ptrtoint_s1_p0(ptr %p) {
; SCALAR-LABEL: ptrtoint_s1_p0:
; SCALAR:       # %bb.0: # %entry
; SCALAR-NEXT:    movq %rdi, %rax
; SCALAR-NEXT:    # kill: def $al killed $al killed $rax
; SCALAR-NEXT:    retq
entry:
  %0 = ptrtoint ptr %p to i1
  ret i1 %0
}

define i8 @ptrtoint_s8_p0(ptr %p) {
; SCALAR-LABEL: ptrtoint_s8_p0:
; SCALAR:       # %bb.0: # %entry
; SCALAR-NEXT:    movq %rdi, %rax
; SCALAR-NEXT:    # kill: def $al killed $al killed $rax
; SCALAR-NEXT:    retq
entry:
  %0 = ptrtoint ptr %p to i8
  ret i8 %0
}

define i16 @ptrtoint_s16_p0(ptr %p) {
; SCALAR-LABEL: ptrtoint_s16_p0:
; SCALAR:       # %bb.0: # %entry
; SCALAR-NEXT:    movq %rdi, %rax
; SCALAR-NEXT:    # kill: def $ax killed $ax killed $rax
; SCALAR-NEXT:    retq
entry:
  %0 = ptrtoint ptr %p to i16
  ret i16 %0
}

define i32 @ptrtoint_s32_p0(ptr %p) {
; SCALAR-LABEL: ptrtoint_s32_p0:
; SCALAR:       # %bb.0: # %entry
; SCALAR-NEXT:    movq %rdi, %rax
; SCALAR-NEXT:    # kill: def $eax killed $eax killed $rax
; SCALAR-NEXT:    retq
entry:
  %0 = ptrtoint ptr %p to i32
  ret i32 %0
}

define i64 @ptrtoint_s64_p0(ptr %p) {
; SCALAR-LABEL: ptrtoint_s64_p0:
; SCALAR:       # %bb.0: # %entry
; SCALAR-NEXT:    movq %rdi, %rax
; SCALAR-NEXT:    retq
entry:
  %0 = ptrtoint ptr %p to i64
  ret i64 %0
}

define <2 x i1> @ptrtoint_v2s1_v2p0(<2 x ptr> %p) {
; SDAG-NO-SSE-LABEL: ptrtoint_v2s1_v2p0:
; SDAG-NO-SSE:       # %bb.0: # %entry
; SDAG-NO-SSE-NEXT:    movq %rsi, %rdx
; SDAG-NO-SSE-NEXT:    movq %rdi, %rax
; SDAG-NO-SSE-NEXT:    # kill: def $al killed $al killed $rax
; SDAG-NO-SSE-NEXT:    # kill: def $dl killed $dl killed $rdx
; SDAG-NO-SSE-NEXT:    retq
;
; FAST-NO-SSE-LABEL: ptrtoint_v2s1_v2p0:
; FAST-NO-SSE:       # %bb.0: # %entry
; FAST-NO-SSE-NEXT:    movq %rsi, %rdx
; FAST-NO-SSE-NEXT:    movq %rdi, %rax
; FAST-NO-SSE-NEXT:    # kill: def $al killed $al killed $rax
; FAST-NO-SSE-NEXT:    # kill: def $dl killed $dl killed $rdx
; FAST-NO-SSE-NEXT:    retq
;
; GISEL-NO-SSE-LABEL: ptrtoint_v2s1_v2p0:
; GISEL-NO-SSE:       # %bb.0: # %entry
; GISEL-NO-SSE-NEXT:    movq %rdi, %rax
; GISEL-NO-SSE-NEXT:    movq %rsi, %rdx
; GISEL-NO-SSE-NEXT:    # kill: def $al killed $al killed $rax
; GISEL-NO-SSE-NEXT:    # kill: def $dl killed $dl killed $rdx
; GISEL-NO-SSE-NEXT:    retq
;
; SSE-LABEL: ptrtoint_v2s1_v2p0:
; SSE:       # %bb.0: # %entry
; SSE-NEXT:    retq
;
; AVX-LABEL: ptrtoint_v2s1_v2p0:
; AVX:       # %bb.0: # %entry
; AVX-NEXT:    retq
;
; AVX512-LABEL: ptrtoint_v2s1_v2p0:
; AVX512:       # %bb.0: # %entry
; AVX512-NEXT:    retq
entry:
  %0 = ptrtoint <2 x ptr> %p to <2 x i1>
  ret <2 x i1> %0
}

define <2 x i64> @ptrtoint_v2s64_v2p0(<2 x ptr> %p) {
; SDAG-NO-SSE-LABEL: ptrtoint_v2s64_v2p0:
; SDAG-NO-SSE:       # %bb.0: # %entry
; SDAG-NO-SSE-NEXT:    movq %rsi, %rdx
; SDAG-NO-SSE-NEXT:    movq %rdi, %rax
; SDAG-NO-SSE-NEXT:    retq
;
; FAST-NO-SSE-LABEL: ptrtoint_v2s64_v2p0:
; FAST-NO-SSE:       # %bb.0: # %entry
; FAST-NO-SSE-NEXT:    movq %rsi, %rdx
; FAST-NO-SSE-NEXT:    movq %rdi, %rax
; FAST-NO-SSE-NEXT:    retq
;
; GISEL-NO-SSE-LABEL: ptrtoint_v2s64_v2p0:
; GISEL-NO-SSE:       # %bb.0: # %entry
; GISEL-NO-SSE-NEXT:    movq %rdi, %rax
; GISEL-NO-SSE-NEXT:    movq %rsi, %rdx
; GISEL-NO-SSE-NEXT:    retq
;
; SSE-LABEL: ptrtoint_v2s64_v2p0:
; SSE:       # %bb.0: # %entry
; SSE-NEXT:    retq
;
; AVX-LABEL: ptrtoint_v2s64_v2p0:
; AVX:       # %bb.0: # %entry
; AVX-NEXT:    retq
;
; AVX512-LABEL: ptrtoint_v2s64_v2p0:
; AVX512:       # %bb.0: # %entry
; AVX512-NEXT:    retq
entry:
  %0 = ptrtoint <2 x ptr> %p to <2 x i64>
  ret <2 x i64> %0
}

define <4 x i64> @ptrtoint_v4s64_v4p0(<4 x ptr> %p) {
; SDAG-NO-SSE-LABEL: ptrtoint_v4s64_v4p0:
; SDAG-NO-SSE:       # %bb.0: # %entry
; SDAG-NO-SSE-NEXT:    movq %rdi, %rax
; SDAG-NO-SSE-NEXT:    movq %r8, 24(%rdi)
; SDAG-NO-SSE-NEXT:    movq %rcx, 16(%rdi)
; SDAG-NO-SSE-NEXT:    movq %rdx, 8(%rdi)
; SDAG-NO-SSE-NEXT:    movq %rsi, (%rdi)
; SDAG-NO-SSE-NEXT:    retq
;
; FAST-NO-SSE-LABEL: ptrtoint_v4s64_v4p0:
; FAST-NO-SSE:       # %bb.0: # %entry
; FAST-NO-SSE-NEXT:    movq %rdi, %rax
; FAST-NO-SSE-NEXT:    movq %rsi, (%rdi)
; FAST-NO-SSE-NEXT:    movq %rdx, 8(%rdi)
; FAST-NO-SSE-NEXT:    movq %rcx, 16(%rdi)
; FAST-NO-SSE-NEXT:    movq %r8, 24(%rdi)
; FAST-NO-SSE-NEXT:    retq
;
; GISEL-NO-SSE-LABEL: ptrtoint_v4s64_v4p0:
; GISEL-NO-SSE:       # %bb.0: # %entry
; GISEL-NO-SSE-NEXT:    movq %rdi, %rax
; GISEL-NO-SSE-NEXT:    movq %rsi, (%rdi)
; GISEL-NO-SSE-NEXT:    movq %rdx, 8(%rdi)
; GISEL-NO-SSE-NEXT:    movq %rcx, 16(%rdi)
; GISEL-NO-SSE-NEXT:    movq %r8, 24(%rdi)
; GISEL-NO-SSE-NEXT:    retq
;
; SSE-LABEL: ptrtoint_v4s64_v4p0:
; SSE:       # %bb.0: # %entry
; SSE-NEXT:    retq
;
; AVX-LABEL: ptrtoint_v4s64_v4p0:
; AVX:       # %bb.0: # %entry
; AVX-NEXT:    retq
;
; AVX512-LABEL: ptrtoint_v4s64_v4p0:
; AVX512:       # %bb.0: # %entry
; AVX512-NEXT:    retq
entry:
  %0 = ptrtoint <4 x ptr> %p to <4 x i64>
  ret <4 x i64> %0
}

define <8 x i64> @ptrtoint_v8s64_v8p0(<8 x ptr> %p) {
; SDAG-NO-SSE-LABEL: ptrtoint_v8s64_v8p0:
; SDAG-NO-SSE:       # %bb.0: # %entry
; SDAG-NO-SSE-NEXT:    movq %rdi, %rax
; SDAG-NO-SSE-NEXT:    movq {{[0-9]+}}(%rsp), %rdi
; SDAG-NO-SSE-NEXT:    movq {{[0-9]+}}(%rsp), %r10
; SDAG-NO-SSE-NEXT:    movq {{[0-9]+}}(%rsp), %r11
; SDAG-NO-SSE-NEXT:    movq %r11, 56(%rax)
; SDAG-NO-SSE-NEXT:    movq %r10, 48(%rax)
; SDAG-NO-SSE-NEXT:    movq %rdi, 40(%rax)
; SDAG-NO-SSE-NEXT:    movq %r9, 32(%rax)
; SDAG-NO-SSE-NEXT:    movq %r8, 24(%rax)
; SDAG-NO-SSE-NEXT:    movq %rcx, 16(%rax)
; SDAG-NO-SSE-NEXT:    movq %rdx, 8(%rax)
; SDAG-NO-SSE-NEXT:    movq %rsi, (%rax)
; SDAG-NO-SSE-NEXT:    retq
;
; FAST-NO-SSE-LABEL: ptrtoint_v8s64_v8p0:
; FAST-NO-SSE:       # %bb.0: # %entry
; FAST-NO-SSE-NEXT:    movq %rdi, %rax
; FAST-NO-SSE-NEXT:    movq {{[0-9]+}}(%rsp), %rdi
; FAST-NO-SSE-NEXT:    movq {{[0-9]+}}(%rsp), %r10
; FAST-NO-SSE-NEXT:    movq {{[0-9]+}}(%rsp), %r11
; FAST-NO-SSE-NEXT:    movq %rsi, (%rax)
; FAST-NO-SSE-NEXT:    movq %rdx, 8(%rax)
; FAST-NO-SSE-NEXT:    movq %rcx, 16(%rax)
; FAST-NO-SSE-NEXT:    movq %r8, 24(%rax)
; FAST-NO-SSE-NEXT:    movq %r9, 32(%rax)
; FAST-NO-SSE-NEXT:    movq %r11, 40(%rax)
; FAST-NO-SSE-NEXT:    movq %r10, 48(%rax)
; FAST-NO-SSE-NEXT:    movq %rdi, 56(%rax)
; FAST-NO-SSE-NEXT:    retq
;
; GISEL-NO-SSE-LABEL: ptrtoint_v8s64_v8p0:
; GISEL-NO-SSE:       # %bb.0: # %entry
; GISEL-NO-SSE-NEXT:    movq %rdi, %rax
; GISEL-NO-SSE-NEXT:    movq {{[0-9]+}}(%rsp), %rdi
; GISEL-NO-SSE-NEXT:    movq {{[0-9]+}}(%rsp), %r10
; GISEL-NO-SSE-NEXT:    movq {{[0-9]+}}(%rsp), %r11
; GISEL-NO-SSE-NEXT:    movq %rsi, (%rax)
; GISEL-NO-SSE-NEXT:    movq %rdx, 8(%rax)
; GISEL-NO-SSE-NEXT:    movq %rcx, 16(%rax)
; GISEL-NO-SSE-NEXT:    movq %r8, 24(%rax)
; GISEL-NO-SSE-NEXT:    movq %r9, 32(%rax)
; GISEL-NO-SSE-NEXT:    movq %rdi, 40(%rax)
; GISEL-NO-SSE-NEXT:    movq %r10, 48(%rax)
; GISEL-NO-SSE-NEXT:    movq %r11, 56(%rax)
; GISEL-NO-SSE-NEXT:    retq
;
; SSE-LABEL: ptrtoint_v8s64_v8p0:
; SSE:       # %bb.0: # %entry
; SSE-NEXT:    retq
;
; AVX-LABEL: ptrtoint_v8s64_v8p0:
; AVX:       # %bb.0: # %entry
; AVX-NEXT:    retq
;
; AVX512-LABEL: ptrtoint_v8s64_v8p0:
; AVX512:       # %bb.0: # %entry
; AVX512-NEXT:    retq
entry:
  %0 = ptrtoint <8 x ptr> %p to <8 x i64>
  ret <8 x i64> %0
}
;; NOTE: These prefixes are unused and the list is autogenerated. Do not add tests below this line:
; FAST-AVX: {{.*}}
; FAST-AVX512: {{.*}}
; FAST-SCALAR: {{.*}}
; FAST-SSE: {{.*}}
; GISEL-AVX: {{.*}}
; GISEL-AVX512: {{.*}}
; GISEL-SCALAR: {{.*}}
; GISEL-SSE: {{.*}}
; NO-SSE: {{.*}}
; SDAG-AVX: {{.*}}
; SDAG-AVX512: {{.*}}
; SDAG-SCALAR: {{.*}}
; SDAG-SSE: {{.*}}
