; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 4
; REQUIRES: asserts
; RUN: llc < %s -mtriple=x86_64-- | FileCheck %s --check-prefix=X64
; RUN: llc < %s -mtriple=x86_64-- -o /dev/null -stats  -info-output-file - | grep asm-printer  | grep 12
; RUN: llc < %s -mtriple=i686-- | FileCheck %s --check-prefix=X86

declare void @bar(double %x)
declare void @barf(float %x)

define double @foo() nounwind {
; X64-LABEL: foo:
; X64:       # %bb.0:
; X64-NEXT:    pushq %rax
; X64-NEXT:    xorps %xmm0, %xmm0
; X64-NEXT:    callq bar@PLT
; X64-NEXT:    xorps %xmm0, %xmm0
; X64-NEXT:    popq %rax
; X64-NEXT:    retq
;
; X86-LABEL: foo:
; X86:       # %bb.0:
; X86-NEXT:    subl $8, %esp
; X86-NEXT:    fldz
; X86-NEXT:    fstpl (%esp)
; X86-NEXT:    calll bar@PLT
; X86-NEXT:    fldz
; X86-NEXT:    addl $8, %esp
; X86-NEXT:    retl
  call void @bar(double 0.0)
  ret double 0.0
}


define float @foof() nounwind {
; X64-LABEL: foof:
; X64:       # %bb.0:
; X64-NEXT:    pushq %rax
; X64-NEXT:    xorps %xmm0, %xmm0
; X64-NEXT:    callq barf@PLT
; X64-NEXT:    xorps %xmm0, %xmm0
; X64-NEXT:    popq %rax
; X64-NEXT:    retq
;
; X86-LABEL: foof:
; X86:       # %bb.0:
; X86-NEXT:    pushl $0
; X86-NEXT:    calll barf@PLT
; X86-NEXT:    addl $4, %esp
; X86-NEXT:    fldz
; X86-NEXT:    retl
  call void @barf(float 0.0)
  ret float 0.0
}
