; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=x86_64-- | FileCheck %s --check-prefixes=FAST
; RUN: llc < %s -mtriple=x86_64-- -mattr=+slow-shld | FileCheck %s --check-prefixes=SLOW

define  i64 @updateTop10Bits(i64  %A, i64  %B) {
; FAST-LABEL: updateTop10Bits:
; FAST:       # %bb.0:
; FAST-NEXT:    movq	%rdi, %rax
; FAST-NEXT:    shlq	$10, %rax
; FAST-NEXT:    shrdq	$10, %rsi, %rax
; FAST-NEXT:    retq
;
; SLOW-LABEL: updateTop10Bits:
; SLOW:       # %bb.0:
; SLOW-NEXT:    movabsq $18014398509481983, %rax
; SLOW-NEXT:    andq    %rdi, %rax
; SLOW-NEXT:    shlq    $54, %rsi
; SLOW-NEXT:    orq     %rsi, %rax
; SLOW-NEXT:    retq
entry:
  %and = and i64 %A, 18014398509481983
  %shl = shl i64 %B, 54
  %or = or disjoint i64 %shl, %and
  ret i64 %or
}
