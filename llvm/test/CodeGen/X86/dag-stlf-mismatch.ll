; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 6
; RUN: llc < %s -mtriple=x86_64-- | FileCheck %s

target datalayout = "e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-i128:128-f80:128-n8:16:32:64-S128"
target triple = "x86_64-unknown-linux-gnu"

define float @test_stlf_integer(ptr %p, float %v) {
; CHECK-LABEL: test_stlf_integer:
; CHECK:       # %bb.0:
; CHECK-NEXT:    movl $0, (%rdi)
; CHECK-NEXT:    xorps %xmm0, %xmm0
; CHECK-NEXT:    retq
  store i32 0, ptr %p, align 4
  %f = load float, ptr %p, align 4
  %r = fmul fast float %f, %v
  ret float %r
}

define float @test_stlf_vector(ptr %p, float %v) {
; CHECK-LABEL: test_stlf_vector:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xorps %xmm1, %xmm1
; CHECK-NEXT:    movups %xmm1, (%rdi)
; CHECK-NEXT:    mulss (%rdi), %xmm0
; CHECK-NEXT:    retq
  store <4 x float> zeroinitializer, ptr %p, align 4
  %f = load float, ptr %p, align 4
  %r = fmul fast float %f, %v
  ret float %r
}

define float @test_stlf_bitcast(ptr %p, float %v) {
; CHECK-LABEL: test_stlf_bitcast:
; CHECK:       # %bb.0:
; CHECK-NEXT:    xorps %xmm1, %xmm1
; CHECK-NEXT:    movups %xmm1, (%rdi)
; CHECK-NEXT:    mulss (%rdi), %xmm0
; CHECK-NEXT:    retq
  store <2 x i64> zeroinitializer, ptr %p, align 4
  %f = load float, ptr %p, align 4
  %r = fmul fast float %f, %v
  ret float %r
}
