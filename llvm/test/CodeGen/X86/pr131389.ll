; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc < %s -mtriple=x86_64-- | FileCheck %s
; RUN: llc < %s -mtriple=x86_64-- -use-constant-fp-for-fixed-length-splat | FileCheck %s --check-prefix=CHECK-CFP

define void @PR131389(ptr %p) {
; CHECK-LABEL: PR131389:
; CHECK:       # %bb.0:
; CHECK-NEXT:    movaps {{.*#+}} xmm0 = [0.0E+0,0.0E+0,1.0E+0,0.0E+0]
; CHECK-NEXT:    movups %xmm0, (%rax)
; CHECK-NEXT:    movss {{.*#+}} xmm0 = [?,?,?,?]
; CHECK-NEXT:    movss %xmm0, (%rdi)
; CHECK-NEXT:    retq
;
; CHECK-CFP-LABEL: PR131389:
; CHECK-CFP:       # %bb.0:
; CHECK-CFP-NEXT:    movaps {{.*#+}} xmm0 = [0.0E+0,0.0E+0,1.0E+0,0.0E+0]
; CHECK-CFP-NEXT:    movups %xmm0, (%rax)
; CHECK-CFP-NEXT:    movss {{.*#+}} xmm0 = [5.2635442471208903E-315,5.2635442471208903E-315,0.0E+0,0.0E+0,0.0E+0,0.0E+0,0.0E+0,0.0E+0]
; CHECK-CFP-NEXT:    movss %xmm0, (%rdi)
; CHECK-CFP-NEXT:    retq
  store <4 x float> <float 0.000000e+00, float 0.000000e+00, float 1.000000e+00, float 0.000000e+00>, ptr poison, align 8
  %ld = load <4 x float>, ptr poison, align 8
  %elt = extractelement <4 x float> %ld, i64 2
  store float %elt, ptr %p, align 4
  ret void
}
