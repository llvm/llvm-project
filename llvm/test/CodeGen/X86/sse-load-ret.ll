; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=i686-- -mcpu=yonah | FileCheck %s

define double @test1(ptr %P) {
; CHECK-LABEL: test1:
; CHECK:       # %bb.0:
; CHECK-NEXT:    movl {{[0-9]+}}(%esp), %eax
; CHECK-NEXT:    fldl (%eax)
; CHECK-NEXT:    retl
        %X = load double, ptr %P            ; <double> [#uses=1]
        ret double %X
}

define double @test2() {
; CHECK-LABEL: test2:
; CHECK:       # %bb.0:
; CHECK-NEXT:    fldl {{\.?LCPI[0-9]+_[0-9]+}}
; CHECK-NEXT:    retl
        ret double 1.234560e+03
}


define double @test3(i1 %B) {
; CHECK-LABEL: test3:
; CHECK:       # %bb.0:
; CHECK-NEXT:    testb $1, {{[0-9]+}}(%esp)
; CHECK-NEXT:    movl ${{\.?LCPI[0-9]+_[0-9]+}}, %eax
; CHECK-NEXT:    movl ${{\.?LCPI[0-9]+_[0-9]+}}, %ecx
; CHECK-NEXT:    cmovnel %eax, %ecx
; CHECK-NEXT:    fldl (%ecx)
; CHECK-NEXT:    retl
	%C = select i1 %B, double 123.412, double 523.01123123
	ret double %C
}

