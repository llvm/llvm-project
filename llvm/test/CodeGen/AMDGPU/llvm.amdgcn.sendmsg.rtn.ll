; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -march=amdgcn -mcpu=gfx1100 -verify-machineinstrs < %s | FileCheck --check-prefixes=GCN %s

define amdgpu_kernel void @test_interrupt() {
; GCN-LABEL: test_interrupt:
; GCN:       ; %bb.0:
; GCN-NEXT:    s_sendmsg_rtn_b32 s0, sendmsg(MSG_INTERRUPT)
; GCN-NEXT:    s_endpgm
  %ret = call i32 @llvm.amdgcn.s.sendmsg.rtn.i32(i32 1)
  ret void
}

define amdgpu_kernel void @test_gs_emit() {
; GCN-LABEL: test_gs_emit:
; GCN:       ; %bb.0:
; GCN-NEXT:    s_sendmsg_rtn_b64 s[0:1], sendmsg(MSG_HS_TESSFACTOR)
; GCN-NEXT:    s_endpgm
  %ret = call i64 @llvm.amdgcn.s.sendmsg.rtn.i64(i32 2)
  ret void
}

define amdgpu_kernel void @test_gs_cut() {
; GCN-LABEL: test_gs_cut:
; GCN:       ; %bb.0:
; GCN-NEXT:    s_sendmsg_rtn_b32 s0, sendmsg(MSG_DEALLOC_VGPRS)
; GCN-NEXT:    s_endpgm
  %ret = call i32 @llvm.amdgcn.s.sendmsg.rtn.i32(i32 3)
  ret void
}

define amdgpu_kernel void @test_gs_emit_cut() {
; GCN-LABEL: test_gs_emit_cut:
; GCN:       ; %bb.0:
; GCN-NEXT:    s_sendmsg_rtn_b32 s0, sendmsg(MSG_STALL_WAVE_GEN)
; GCN-NEXT:    s_endpgm
  %ret = call i32 @llvm.amdgcn.s.sendmsg.rtn.i32(i32 5)
  ret void
}

define amdgpu_kernel void @test_gs_done() {
; GCN-LABEL: test_gs_done:
; GCN:       ; %bb.0:
; GCN-NEXT:    s_sendmsg_rtn_b32 s0, sendmsg(MSG_SYSMSG, SYSMSG_OP_ECC_ERR_INTERRUPT)
; GCN-NEXT:    s_endpgm
  %ret = call i32 @llvm.amdgcn.s.sendmsg.rtn.i32(i32 31)
  ret void
}

declare i32 @llvm.amdgcn.s.sendmsg.rtn.i32(i32)
declare i64 @llvm.amdgcn.s.sendmsg.rtn.i64(i32)
