# RUN: llc -mtriple=amdgcn -mcpu=gfx1250 -mattr=+real-true16 -run-pass=si-shrink-instructions -o - %s | FileCheck --check-prefix=GCN %s

--- |
    define amdgpu_kernel void @rcp_f16_v127_lo16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v128_lo16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v256_lo16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v384_lo16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v512_lo16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v767_lo16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v768_lo16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v1023_lo16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v127_hi16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v128_hi16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v256_hi16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v384_hi16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v512_hi16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v767_hi16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v768_hi16() #0 { ret void }
    define amdgpu_kernel void @rcp_f16_v1023_hi16() #0 { ret void }

    attributes #0 = { "amdgpu-flat-work-group-size"="128,128" "amdgpu-waves-per-eu"="1,1" }
...

# GCN-LABEL: name:  rcp_f16_v127_lo16
# GCN: $vgpr127_lo16 = V_RCP_F16_t16_e32 killed $vgpr127_lo16
---
name: rcp_f16_v127_lo16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr127_lo16 = IMPLICIT_DEF
    $vgpr127_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr127_lo16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v128_lo16
# GCN: $vgpr128_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr128_lo16
---
name: rcp_f16_v128_lo16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr128_lo16 = IMPLICIT_DEF
    $vgpr128_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr128_lo16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v256_lo16
# GCN: $vgpr256_lo16 = V_RCP_F16_t16_e32 killed $vgpr256_lo16
---
name: rcp_f16_v256_lo16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr256_lo16 = IMPLICIT_DEF
    $vgpr256_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr256_lo16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v384_lo16
# GCN: $vgpr384_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr384_lo16
---
name: rcp_f16_v384_lo16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr384_lo16 = IMPLICIT_DEF
    $vgpr384_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr384_lo16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v512_lo16
# GCN: $vgpr512_lo16 = V_RCP_F16_t16_e32 killed $vgpr512_lo16
---
name: rcp_f16_v512_lo16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr512_lo16 = IMPLICIT_DEF
    $vgpr512_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr512_lo16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v767_lo16
# GCN: $vgpr767_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr767_lo16
---
name: rcp_f16_v767_lo16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr767_lo16 = IMPLICIT_DEF
    $vgpr767_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr767_lo16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v768_lo16
# GCN: $vgpr768_lo16 = V_RCP_F16_t16_e32 killed $vgpr768_lo16
---
name: rcp_f16_v768_lo16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr768_lo16 = IMPLICIT_DEF
    $vgpr768_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr768_lo16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v1023_lo16
# GCN: $vgpr1023_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr1023_lo16
---
name: rcp_f16_v1023_lo16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr1023_lo16 = IMPLICIT_DEF
    $vgpr1023_lo16 = V_RCP_F16_t16_e64 0, killed $vgpr1023_lo16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v127_hi16
# GCN: $vgpr127_hi16 = V_RCP_F16_t16_e32 killed $vgpr127_hi16
---
name: rcp_f16_v127_hi16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr127_hi16 = IMPLICIT_DEF
    $vgpr127_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr127_hi16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v128_hi16
# GCN: $vgpr128_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr128_hi16
---
name: rcp_f16_v128_hi16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr128_hi16 = IMPLICIT_DEF
    $vgpr128_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr128_hi16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v256_hi16
# GCN: $vgpr256_hi16 = V_RCP_F16_t16_e32 killed $vgpr256_hi16
---
name: rcp_f16_v256_hi16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr256_hi16 = IMPLICIT_DEF
    $vgpr256_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr256_hi16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v384_hi16
# GCN: $vgpr384_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr384_hi16
---
name: rcp_f16_v384_hi16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr384_hi16 = IMPLICIT_DEF
    $vgpr384_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr384_hi16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v512_hi16
# GCN: $vgpr512_hi16 = V_RCP_F16_t16_e32 killed $vgpr512_hi16
---
name: rcp_f16_v512_hi16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr512_hi16 = IMPLICIT_DEF
    $vgpr512_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr512_hi16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v767_hi16
# GCN: $vgpr767_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr767_hi16
---
name: rcp_f16_v767_hi16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr767_hi16 = IMPLICIT_DEF
    $vgpr767_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr767_hi16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v768_hi16
# GCN: $vgpr768_hi16 = V_RCP_F16_t16_e32 killed $vgpr768_hi16
---
name: rcp_f16_v768_hi16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr768_hi16 = IMPLICIT_DEF
    $vgpr768_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr768_hi16, 0, 0, 0, implicit $mode, implicit $exec
...

# GCN-LABEL: name:  rcp_f16_v1023_hi16
# GCN: $vgpr1023_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr1023_hi16
---
name: rcp_f16_v1023_hi16
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       1
body:             |
  bb.0:
    $vgpr1023_hi16 = IMPLICIT_DEF
    $vgpr1023_hi16 = V_RCP_F16_t16_e64 0, killed $vgpr1023_hi16, 0, 0, 0, implicit $mode, implicit $exec
...
