# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc  -march=amdgcn -mcpu=gfx1100 --verify-machineinstrs -run-pass post-RA-sched -o - %s | FileCheck -check-prefix=GFX11 %s

---
name: sched_understands_subreg_aliasing
tracksRegLiveness: true
body:             |
  bb.0:
    ; GFX11-LABEL: name: sched_understands_subreg_aliasing
    ; GFX11: $vgpr2 = V_MOV_B32_e32 3735928559, implicit $exec
    ; GFX11-NEXT: $vgpr0_hi16 = IMPLICIT_DEF
    ; GFX11-NEXT: $vgpr1 = IMPLICIT_DEF
    ; GFX11-NEXT: $vgpr2_hi16 = nofpexcept V_ADD_F16_T16_e32 $vgpr0_hi16, killed $vgpr1_hi16, implicit $mode, implicit $exec
    ; GFX11-NEXT: $vgpr2_lo16 = nofpexcept V_ADD_F16_T16_e64 0, killed $vgpr0_hi16, 0, killed $vgpr2_hi16, 0, 0, implicit $mode, implicit $exec
    $vgpr0_hi16 = IMPLICIT_DEF
    $vgpr1 = IMPLICIT_DEF
    $vgpr2 = V_MOV_B32_e32 3735928559, implicit $exec
    ; should not reorder add above the constant mov, since this would change results
    $vgpr2_hi16 = nofpexcept V_ADD_F16_T16_e32 $vgpr0_hi16, $vgpr1_hi16, implicit $mode, implicit $exec
    $vgpr2_lo16 = nofpexcept V_ADD_F16_T16_e64 0, $vgpr0_hi16, 0, $vgpr2_hi16, 0, 0, implicit $mode, implicit $exec

...
