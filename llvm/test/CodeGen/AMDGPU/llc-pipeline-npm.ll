; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc -enable-new-pm -mtriple=amdgcn--amdhsa -O0 -print-pipeline-passes < %s 2>&1 \
; RUN:   | sed 's/,/,\n/g' | FileCheck -check-prefix=GCN-O0 %s

; RUN: llc -enable-new-pm -mtriple=amdgcn--amdhsa -print-pipeline-passes < %s 2>&1 \
; RUN:   | sed 's/,/,\n/g' | FileCheck -check-prefix=GCN-O2 %s

; RUN: llc -O3 -enable-new-pm -mtriple=amdgcn--amdhsa -print-pipeline-passes < %s 2>&1 \
; RUN:   | sed 's/,/,\n/g' | FileCheck -check-prefix=GCN-O3 %s

; GCN-O0: require<MachineModuleAnalysis>,
; GCN-O0: require<profile-summary>,
; GCN-O0: require<collector-metadata>,
; GCN-O0: require<runtime-libcall-info>,
; GCN-O0: pre-isel-intrinsic-lowering,
; GCN-O0: function(expand-ir-insts<O0>),
; GCN-O0: amdgpu-remove-incompatible-functions,
; GCN-O0: amdgpu-printf-runtime-binding,
; GCN-O0: amdgpu-lower-ctor-dtor,
; GCN-O0: function(amdgpu-uniform-intrinsic-combine),
; GCN-O0: expand-variadics,
; GCN-O0: amdgpu-always-inline,
; GCN-O0: always-inline,
; GCN-O0: amdgpu-export-kernel-runtime-handles,
; GCN-O0: amdgpu-lower-exec-sync,
; GCN-O0: amdgpu-sw-lower-lds,
; GCN-O0: amdgpu-lower-module-lds,
; GCN-O0: function(atomic-expand,
; GCN-O0: verify,
; GCN-O0: unreachableblockelim,
; GCN-O0: ee-instrument<post-inline>,
; GCN-O0: scalarize-masked-mem-intrin,
; GCN-O0: expand-reductions,
; GCN-O0: amdgpu-lower-kernel-arguments),
; GCN-O0: amdgpu-lower-buffer-fat-pointers,
; GCN-O0: amdgpu-lower-intrinsics,
; GCN-O0: cgscc(function(lower-switch,
; GCN-O0: lower-invoke,
; GCN-O0: unreachableblockelim)),
; GCN-O0: require<amdgpu-argument-usage>,
; GCN-O0: cgscc(function(amdgpu-unify-divergent-exit-nodes,
; GCN-O0: fix-irreducible,
; GCN-O0: unify-loop-exits,
; GCN-O0: StructurizeCFGPass,
; GCN-O0: amdgpu-annotate-uniform,
; GCN-O0: si-annotate-control-flow,
; GCN-O0: amdgpu-rewrite-undef-for-phi,
; GCN-O0: lcssa,
; GCN-O0: require<uniformity>,
; GCN-O0: callbr-prepare,
; GCN-O0: safe-stack,
; GCN-O0: stack-protector,
; GCN-O0: verify)),
; GCN-O0: cgscc(function(machine-function(amdgpu-isel,
; GCN-O0: si-fix-sgpr-copies,
; GCN-O0: si-i1-copies,
; GCN-O0: finalize-isel,
; GCN-O0: localstackalloc))),
; GCN-O0: require<reg-usage>,
; GCN-O0: cgscc(function(machine-function(reg-usage-propagation,
; GCN-O0: phi-node-elimination,
; GCN-O0: two-address-instruction,
; GCN-O0: regallocfast,
; GCN-O0: si-fix-vgpr-copies,
; GCN-O0: remove-redundant-debug-values,
; GCN-O0: fixup-statepoint-caller-saved,
; GCN-O0: prolog-epilog,
; GCN-O0: post-ra-pseudos,
; GCN-O0: si-post-ra-bundler,
; GCN-O0: fentry-insert,
; GCN-O0: xray-instrumentation,
; GCN-O0: si-memory-legalizer,
; GCN-O0: si-insert-waitcnts,
; GCN-O0: si-mode-register,
; GCN-O0: si-late-branch-lowering,
; GCN-O0: post-RA-hazard-rec,
; GCN-O0: amdgpu-wait-sgpr-hazards,
; GCN-O0: amdgpu-lower-vgpr-encoding,
; GCN-O0: branch-relaxation))),
; GCN-O0: require<reg-usage>,
; GCN-O0: cgscc(function(machine-function(reg-usage-collector,
; GCN-O0: remove-loads-into-fake-uses,
; GCN-O0: live-debug-values,
; GCN-O0: machine-sanmd,
; GCN-O0: amdgpu-preload-kern-arg-prolog,
; GCN-O0: stack-frame-layout,
; GCN-O0: verify),
; GCN-O0: free-machine-function))

; GCN-O2: require<MachineModuleAnalysis>,
; GCN-O2: require<profile-summary>,
; GCN-O2: require<collector-metadata>,
; GCN-O2: require<runtime-libcall-info>,
; GCN-O2: pre-isel-intrinsic-lowering,
; GCN-O2: function(expand-ir-insts<O2>),
; GCN-O2: amdgpu-remove-incompatible-functions,
; GCN-O2: amdgpu-printf-runtime-binding,
; GCN-O2: amdgpu-lower-ctor-dtor,
; GCN-O2: function(amdgpu-image-intrinsic-opt,
; GCN-O2: amdgpu-uniform-intrinsic-combine),
; GCN-O2: expand-variadics,
; GCN-O2: amdgpu-always-inline,
; GCN-O2: always-inline,
; GCN-O2: amdgpu-export-kernel-runtime-handles,
; GCN-O2: amdgpu-lower-exec-sync,
; GCN-O2: amdgpu-sw-lower-lds,
; GCN-O2: amdgpu-lower-module-lds,
; GCN-O2: function(amdgpu-atomic-optimizer,
; GCN-O2: atomic-expand,
; GCN-O2: amdgpu-promote-alloca,
; GCN-O2: separate-const-offset-from-gep<>,
; GCN-O2: slsr,
; GCN-O2: early-cse<>,
; GCN-O2: nary-reassociate,
; GCN-O2: early-cse<>,
; GCN-O2: amdgpu-codegenprepare,
; GCN-O2: loop-mssa(licm<allowspeculation>),
; GCN-O2: verify,
; GCN-O2: loop-mssa(canon-freeze,
; GCN-O2: loop-reduce),
; GCN-O2: mergeicmps,
; GCN-O2: expand-memcmp,
; GCN-O2: unreachableblockelim,
; GCN-O2: consthoist,
; GCN-O2: replace-with-veclib,
; GCN-O2: partially-inline-libcalls,
; GCN-O2: ee-instrument<post-inline>,
; GCN-O2: scalarize-masked-mem-intrin,
; GCN-O2: expand-reductions,
; GCN-O2: early-cse<>),
; GCN-O2: amdgpu-preload-kernel-arguments,
; GCN-O2: function(amdgpu-lower-kernel-arguments,
; GCN-O2: codegenprepare,
; GCN-O2: load-store-vectorizer),
; GCN-O2: amdgpu-lower-buffer-fat-pointers,
; GCN-O2: amdgpu-lower-intrinsics,
; GCN-O2: cgscc(function(lower-switch,
; GCN-O2: lower-invoke,
; GCN-O2: unreachableblockelim)),
; GCN-O2: require<amdgpu-argument-usage>,
; GCN-O2: cgscc(function(flatten-cfg,
; GCN-O2: sink,
; GCN-O2: amdgpu-late-codegenprepare,
; GCN-O2: amdgpu-unify-divergent-exit-nodes,
; GCN-O2: fix-irreducible,
; GCN-O2: unify-loop-exits,
; GCN-O2: StructurizeCFGPass,
; GCN-O2: amdgpu-annotate-uniform,
; GCN-O2: si-annotate-control-flow,
; GCN-O2: amdgpu-rewrite-undef-for-phi,
; GCN-O2: lcssa)),
; GCN-O2: amdgpu-perf-hint,
; GCN-O2: cgscc(function(require<uniformity>,
; GCN-O2: objc-arc-contract,
; GCN-O2: callbr-prepare,
; GCN-O2: safe-stack,
; GCN-O2: stack-protector,
; GCN-O2: verify)),
; GCN-O2: cgscc(function(machine-function(amdgpu-isel,
; GCN-O2: si-fix-sgpr-copies,
; GCN-O2: si-i1-copies,
; GCN-O2: finalize-isel,
; GCN-O2: early-tailduplication,
; GCN-O2: opt-phis,
; GCN-O2: stack-coloring,
; GCN-O2: localstackalloc,
; GCN-O2: dead-mi-elimination,
; GCN-O2: early-machinelicm,
; GCN-O2: machine-cse,
; GCN-O2: machine-sink,
; GCN-O2: peephole-opt,
; GCN-O2: dead-mi-elimination,
; GCN-O2: si-fold-operands,
; GCN-O2: gcn-dpp-combine,
; GCN-O2: si-load-store-opt,
; GCN-O2: si-peephole-sdwa,
; GCN-O2: early-machinelicm,
; GCN-O2: machine-cse,
; GCN-O2: si-fold-operands,
; GCN-O2: dead-mi-elimination,
; GCN-O2: si-shrink-instructions))),
; GCN-O2: require<reg-usage>,
; GCN-O2: cgscc(function(machine-function(reg-usage-propagation,
; GCN-O2: amdgpu-prepare-agpr-alloc,
; GCN-O2: detect-dead-lanes,
; GCN-O2: dead-mi-elimination,
; GCN-O2: init-undef,
; GCN-O2: process-imp-defs,
; GCN-O2: unreachable-mbb-elimination,
; GCN-O2: require<live-vars>,
; GCN-O2: si-opt-vgpr-liverange,
; GCN-O2: require<machine-loops>,
; GCN-O2: phi-node-elimination,
; GCN-O2: si-lower-control-flow,
; GCN-O2: two-address-instruction,
; GCN-O2: register-coalescer,
; GCN-O2: rename-independent-subregs,
; GCN-O2: amdgpu-rewrite-partial-reg-uses,
; GCN-O2: machine-scheduler,
; GCN-O2: amdgpu-pre-ra-optimizations,
; GCN-O2: si-wqm,
; GCN-O2: si-optimize-exec-masking-pre-ra,
; GCN-O2: si-form-memory-clauses,
; GCN-O2: amdgpu-pre-ra-long-branch-reg,
; GCN-O2: greedy<sgpr>,
; GCN-O2: virt-reg-rewriter<no-clear-vregs>,
; GCN-O2: stack-slot-coloring,
; GCN-O2: si-lower-sgpr-spills,
; GCN-O2: si-pre-allocate-wwm-regs,
; GCN-O2: greedy<wwm>,
; GCN-O2: si-lower-wwm-copies,
; GCN-O2: virt-reg-rewriter<no-clear-vregs>,
; GCN-O2: amdgpu-reserve-wwm-regs,
; GCN-O2: greedy<vgpr>,
; GCN-O2: amdgpu-nsa-reassign,
; GCN-O2: virt-reg-rewriter,
; GCN-O2: amdgpu-mark-last-scratch-load,
; GCN-O2: stack-slot-coloring,
; GCN-O2: machine-cp,
; GCN-O2: machinelicm,
; GCN-O2: si-fix-vgpr-copies,
; GCN-O2: si-optimize-exec-masking,
; GCN-O2: remove-redundant-debug-values,
; GCN-O2: fixup-statepoint-caller-saved,
; GCN-O2: postra-machine-sink,
; GCN-O2: shrink-wrap,
; GCN-O2: prolog-epilog,
; GCN-O2: machine-latecleanup,
; GCN-O2: branch-folder,
; GCN-O2: tailduplication,
; GCN-O2: machine-cp,
; GCN-O2: post-ra-pseudos,
; GCN-O2: si-shrink-instructions,
; GCN-O2: si-post-ra-bundler,
; GCN-O2: postmisched,
; GCN-O2: block-placement,
; GCN-O2: fentry-insert,
; GCN-O2: xray-instrumentation,
; GCN-O2: gcn-create-vopd,
; GCN-O2: si-memory-legalizer,
; GCN-O2: si-insert-waitcnts,
; GCN-O2: si-mode-register,
; GCN-O2: si-insert-hard-clauses,
; GCN-O2: si-late-branch-lowering,
; GCN-O2: si-pre-emit-peephole,
; GCN-O2: post-RA-hazard-rec,
; GCN-O2: amdgpu-wait-sgpr-hazards,
; GCN-O2: amdgpu-lower-vgpr-encoding,
; GCN-O2: amdgpu-insert-delay-alu,
; GCN-O2: branch-relaxation))),
; GCN-O2: require<reg-usage>,
; GCN-O2: cgscc(function(machine-function(reg-usage-collector,
; GCN-O2: remove-loads-into-fake-uses,
; GCN-O2: live-debug-values,
; GCN-O2: machine-sanmd,
; GCN-O2: amdgpu-preload-kern-arg-prolog,
; GCN-O2: stack-frame-layout,
; GCN-O2: verify),
; GCN-O2: free-machine-function))

; GCN-O3: require<MachineModuleAnalysis>,
; GCN-O3: require<profile-summary>,
; GCN-O3: require<collector-metadata>,
; GCN-O3: require<runtime-libcall-info>,
; GCN-O3: pre-isel-intrinsic-lowering,
; GCN-O3: function(expand-ir-insts<O3>),
; GCN-O3: amdgpu-remove-incompatible-functions,
; GCN-O3: amdgpu-printf-runtime-binding,
; GCN-O3: amdgpu-lower-ctor-dtor,
; GCN-O3: function(amdgpu-image-intrinsic-opt,
; GCN-O3: amdgpu-uniform-intrinsic-combine),
; GCN-O3: expand-variadics,
; GCN-O3: amdgpu-always-inline,
; GCN-O3: always-inline,
; GCN-O3: amdgpu-export-kernel-runtime-handles,
; GCN-O3: amdgpu-lower-exec-sync,
; GCN-O3: amdgpu-sw-lower-lds,
; GCN-O3: amdgpu-lower-module-lds,
; GCN-O3: function(amdgpu-atomic-optimizer,
; GCN-O3: atomic-expand,
; GCN-O3: amdgpu-promote-alloca,
; GCN-O3: separate-const-offset-from-gep<>,
; GCN-O3: slsr,
; GCN-O3: gvn<>,
; GCN-O3: nary-reassociate,
; GCN-O3: early-cse<>,
; GCN-O3: amdgpu-codegenprepare,
; GCN-O3: loop-mssa(licm<allowspeculation>),
; GCN-O3: verify,
; GCN-O3: loop-mssa(canon-freeze,
; GCN-O3: loop-reduce),
; GCN-O3: mergeicmps,
; GCN-O3: expand-memcmp,
; GCN-O3: unreachableblockelim,
; GCN-O3: consthoist,
; GCN-O3: replace-with-veclib,
; GCN-O3: partially-inline-libcalls,
; GCN-O3: ee-instrument<post-inline>,
; GCN-O3: scalarize-masked-mem-intrin,
; GCN-O3: expand-reductions,
; GCN-O3: gvn<>),
; GCN-O3: amdgpu-preload-kernel-arguments,
; GCN-O3: function(amdgpu-lower-kernel-arguments,
; GCN-O3: codegenprepare,
; GCN-O3: load-store-vectorizer),
; GCN-O3: amdgpu-lower-buffer-fat-pointers,
; GCN-O3: amdgpu-lower-intrinsics,
; GCN-O3: cgscc(function(lower-switch,
; GCN-O3: lower-invoke,
; GCN-O3: unreachableblockelim)),
; GCN-O3: require<amdgpu-argument-usage>,
; GCN-O3: cgscc(function(flatten-cfg,
; GCN-O3: sink,
; GCN-O3: amdgpu-late-codegenprepare,
; GCN-O3: amdgpu-unify-divergent-exit-nodes,
; GCN-O3: fix-irreducible,
; GCN-O3: unify-loop-exits,
; GCN-O3: StructurizeCFGPass,
; GCN-O3: amdgpu-annotate-uniform,
; GCN-O3: si-annotate-control-flow,
; GCN-O3: amdgpu-rewrite-undef-for-phi,
; GCN-O3: lcssa)),
; GCN-O3: amdgpu-perf-hint,
; GCN-O3: cgscc(function(require<uniformity>,
; GCN-O3: objc-arc-contract,
; GCN-O3: callbr-prepare,
; GCN-O3: safe-stack,
; GCN-O3: stack-protector,
; GCN-O3: verify)),
; GCN-O3: cgscc(function(machine-function(amdgpu-isel,
; GCN-O3: si-fix-sgpr-copies,
; GCN-O3: si-i1-copies,
; GCN-O3: finalize-isel,
; GCN-O3: early-tailduplication,
; GCN-O3: opt-phis,
; GCN-O3: stack-coloring,
; GCN-O3: localstackalloc,
; GCN-O3: dead-mi-elimination,
; GCN-O3: early-machinelicm,
; GCN-O3: machine-cse,
; GCN-O3: machine-sink,
; GCN-O3: peephole-opt,
; GCN-O3: dead-mi-elimination,
; GCN-O3: si-fold-operands,
; GCN-O3: gcn-dpp-combine,
; GCN-O3: si-load-store-opt,
; GCN-O3: si-peephole-sdwa,
; GCN-O3: early-machinelicm,
; GCN-O3: machine-cse,
; GCN-O3: si-fold-operands,
; GCN-O3: dead-mi-elimination,
; GCN-O3: si-shrink-instructions))),
; GCN-O3: require<reg-usage>,
; GCN-O3: cgscc(function(machine-function(reg-usage-propagation,
; GCN-O3: amdgpu-prepare-agpr-alloc,
; GCN-O3: detect-dead-lanes,
; GCN-O3: dead-mi-elimination,
; GCN-O3: init-undef,
; GCN-O3: process-imp-defs,
; GCN-O3: unreachable-mbb-elimination,
; GCN-O3: require<live-vars>,
; GCN-O3: si-opt-vgpr-liverange,
; GCN-O3: require<machine-loops>,
; GCN-O3: phi-node-elimination,
; GCN-O3: si-lower-control-flow,
; GCN-O3: two-address-instruction,
; GCN-O3: register-coalescer,
; GCN-O3: rename-independent-subregs,
; GCN-O3: amdgpu-rewrite-partial-reg-uses,
; GCN-O3: machine-scheduler,
; GCN-O3: amdgpu-pre-ra-optimizations,
; GCN-O3: si-wqm,
; GCN-O3: si-optimize-exec-masking-pre-ra,
; GCN-O3: si-form-memory-clauses,
; GCN-O3: amdgpu-pre-ra-long-branch-reg,
; GCN-O3: greedy<sgpr>,
; GCN-O3: virt-reg-rewriter<no-clear-vregs>,
; GCN-O3: stack-slot-coloring,
; GCN-O3: si-lower-sgpr-spills,
; GCN-O3: si-pre-allocate-wwm-regs,
; GCN-O3: greedy<wwm>,
; GCN-O3: si-lower-wwm-copies,
; GCN-O3: virt-reg-rewriter<no-clear-vregs>,
; GCN-O3: amdgpu-reserve-wwm-regs,
; GCN-O3: greedy<vgpr>,
; GCN-O3: amdgpu-nsa-reassign,
; GCN-O3: virt-reg-rewriter,
; GCN-O3: amdgpu-mark-last-scratch-load,
; GCN-O3: stack-slot-coloring,
; GCN-O3: machine-cp,
; GCN-O3: machinelicm,
; GCN-O3: si-fix-vgpr-copies,
; GCN-O3: si-optimize-exec-masking,
; GCN-O3: remove-redundant-debug-values,
; GCN-O3: fixup-statepoint-caller-saved,
; GCN-O3: postra-machine-sink,
; GCN-O3: shrink-wrap,
; GCN-O3: prolog-epilog,
; GCN-O3: machine-latecleanup,
; GCN-O3: branch-folder,
; GCN-O3: tailduplication,
; GCN-O3: machine-cp,
; GCN-O3: post-ra-pseudos,
; GCN-O3: si-shrink-instructions,
; GCN-O3: si-post-ra-bundler,
; GCN-O3: postmisched,
; GCN-O3: block-placement,
; GCN-O3: fentry-insert,
; GCN-O3: xray-instrumentation,
; GCN-O3: gcn-create-vopd,
; GCN-O3: si-memory-legalizer,
; GCN-O3: si-insert-waitcnts,
; GCN-O3: si-mode-register,
; GCN-O3: si-insert-hard-clauses,
; GCN-O3: si-late-branch-lowering,
; GCN-O3: si-pre-emit-peephole,
; GCN-O3: post-RA-hazard-rec,
; GCN-O3: amdgpu-wait-sgpr-hazards,
; GCN-O3: amdgpu-lower-vgpr-encoding,
; GCN-O3: amdgpu-insert-delay-alu,
; GCN-O3: branch-relaxation))),
; GCN-O3: require<reg-usage>,
; GCN-O3: cgscc(function(machine-function(reg-usage-collector,
; GCN-O3: remove-loads-into-fake-uses,
; GCN-O3: live-debug-values,
; GCN-O3: machine-sanmd,
; GCN-O3: amdgpu-preload-kern-arg-prolog,
; GCN-O3: stack-frame-layout,
; GCN-O3: verify),
; GCN-O3: free-machine-function))

define void @empty() {
  ret void
}
;; NOTE: These prefixes are unused and the list is autogenerated. Do not add tests below this line:
; GCN-O0: {{.*}}
; GCN-O2: {{.*}}
; GCN-O3: {{.*}}
