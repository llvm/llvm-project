# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 2
# RUN: llc -march=amdgcn -mcpu=gfx1210 -verify-machineinstrs -run-pass=gcn-create-vopd %s -o - | FileCheck -check-prefix=GCN %s

---
name:            vopd_combine_low_vgprs
tracksRegLiveness: true
body:             |
  bb.0:

    ; GCN-LABEL: name: vopd_combine_low_vgprs
    ; GCN: $vgpr0 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr1 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr3, $vgpr6 = V_DUAL_SUB_F32_e32_X_MUL_F32_e32_gfx12 $vgpr1, $vgpr1, killed $vgpr0, $vgpr0, implicit $mode, implicit $exec, implicit $mode, implicit $exec, implicit $mode, implicit $exec
    $vgpr0 = IMPLICIT_DEF
    $vgpr1 = IMPLICIT_DEF
    $vgpr3 = V_SUB_F32_e32 $vgpr1, $vgpr1, implicit $mode, implicit $exec
    $vgpr6 = V_MUL_F32_e32 killed $vgpr0, $vgpr0, implicit $mode, implicit $exec
...

---
name:            vopd_combine_hi_vgprs
tracksRegLiveness: true
body:             |
  bb.0:

    ; GCN-LABEL: name: vopd_combine_hi_vgprs
    ; GCN: $vgpr0 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr1 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr303, $vgpr306 = V_DUAL_SUB_F32_e32_X_MUL_F32_e32_gfx12 $vgpr301, $vgpr301, killed $vgpr300, $vgpr300, implicit $mode, implicit $exec, implicit $mode, implicit $exec, implicit $mode, implicit $exec
    $vgpr0 = IMPLICIT_DEF
    $vgpr1 = IMPLICIT_DEF
    $vgpr303 = V_SUB_F32_e32 $vgpr301, $vgpr301, implicit $mode, implicit $exec
    $vgpr306 = V_MUL_F32_e32 killed $vgpr300, $vgpr300, implicit $mode, implicit $exec
...

---
name:            mixed_vgprs_low_and_hi_dst
tracksRegLiveness: true
body:             |
  bb.0:

    ; GCN-LABEL: name: mixed_vgprs_low_and_hi_dst
    ; GCN: $vgpr0 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr1 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr303 = V_SUB_F32_e32 $vgpr1, $vgpr1, implicit $mode, implicit $exec
    ; GCN-NEXT: $vgpr6 = V_MUL_F32_e32 killed $vgpr0, $vgpr0, implicit $mode, implicit $exec
    $vgpr0 = IMPLICIT_DEF
    $vgpr1 = IMPLICIT_DEF
    $vgpr303 = V_SUB_F32_e32 $vgpr1, $vgpr1, implicit $mode, implicit $exec
    $vgpr6 = V_MUL_F32_e32 killed $vgpr0, $vgpr0, implicit $mode, implicit $exec
...

---
name:            mixed_vgprs_low_and_hi_scr0
tracksRegLiveness: true
body:             |
  bb.0:

    ; GCN-LABEL: name: mixed_vgprs_low_and_hi_scr0
    ; GCN: $vgpr0 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr1 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr3 = V_SUB_F32_e32 $vgpr1, $vgpr1, implicit $mode, implicit $exec
    ; GCN-NEXT: $vgpr6 = V_MUL_F32_e32 killed $vgpr300, $vgpr0, implicit $mode, implicit $exec
    $vgpr0 = IMPLICIT_DEF
    $vgpr1 = IMPLICIT_DEF
    $vgpr3 = V_SUB_F32_e32 $vgpr1, $vgpr1, implicit $mode, implicit $exec
    $vgpr6 = V_MUL_F32_e32 killed $vgpr300, $vgpr0, implicit $mode, implicit $exec
...

---
name:            mixed_vgprs_low_and_hi_scr1
tracksRegLiveness: true
body:             |
  bb.0:

    ; GCN-LABEL: name: mixed_vgprs_low_and_hi_scr1
    ; GCN: $vgpr0 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr1 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr3 = V_SUB_F32_e32 $vgpr1, $vgpr301, implicit $mode, implicit $exec
    ; GCN-NEXT: $vgpr6 = V_MUL_F32_e32 killed $vgpr300, $vgpr0, implicit $mode, implicit $exec
    $vgpr0 = IMPLICIT_DEF
    $vgpr1 = IMPLICIT_DEF
    $vgpr3 = V_SUB_F32_e32 $vgpr1, $vgpr301, implicit $mode, implicit $exec
    $vgpr6 = V_MUL_F32_e32 killed $vgpr300, $vgpr0, implicit $mode, implicit $exec
...

---
name:            vopd_combine_sgpr_src0
tracksRegLiveness: true
body:             |
  bb.0:

    ; GCN-LABEL: name: vopd_combine_sgpr_src0
    ; GCN: $vgpr0 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr1 = IMPLICIT_DEF
    ; GCN-NEXT: $sgpr0 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr3, $vgpr6 = V_DUAL_SUB_F32_e32_X_MUL_F32_e32_gfx12 $sgpr0, $vgpr1, killed $vgpr300, $vgpr0, implicit $mode, implicit $exec, implicit $mode, implicit $exec, implicit $mode, implicit $exec
    $vgpr0 = IMPLICIT_DEF
    $vgpr1 = IMPLICIT_DEF
    $sgpr0 = IMPLICIT_DEF
    $vgpr3 = V_SUB_F32_e32 $sgpr0, $vgpr1, implicit $mode, implicit $exec
    $vgpr6 = V_MUL_F32_e32 killed $vgpr300, $vgpr0, implicit $mode, implicit $exec
...

---
name:            vopd_combine_imm_src0
tracksRegLiveness: true
body:             |
  bb.0:

    ; GCN-LABEL: name: vopd_combine_imm_src0
    ; GCN: $vgpr0 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr1 = IMPLICIT_DEF
    ; GCN-NEXT: $vgpr3, $vgpr6 = V_DUAL_SUB_F32_e32_X_MUL_F32_e32_gfx12 0, $vgpr1, killed $vgpr300, $vgpr0, implicit $mode, implicit $exec, implicit $mode, implicit $exec, implicit $mode, implicit $exec
    $vgpr0 = IMPLICIT_DEF
    $vgpr1 = IMPLICIT_DEF
    $vgpr3 = V_SUB_F32_e32 0, $vgpr1, implicit $mode, implicit $exec
    $vgpr6 = V_MUL_F32_e32 killed $vgpr300, $vgpr0, implicit $mode, implicit $exec
...
