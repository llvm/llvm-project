; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -global-isel=0 -march=amdgcn -mcpu=gfx1210 < %s | FileCheck -check-prefixes=GFX1210 %s
; RUN: llc -global-isel=1 -march=amdgcn -mcpu=gfx1210 < %s | FileCheck -check-prefixes=GFX1210 %s

declare void @llvm.amdgcn.tensor.load.to.lds(<4 x i32> %D0, <8 x i32> %D1, <4 x i32> %D2, <4 x i32> %D3, i32 %cpol)
declare void @llvm.amdgcn.tensor.load.to.lds.d2(<4 x i32> %D0, <8 x i32> %D1, i32 %cpol)
declare void @llvm.amdgcn.tensor.store.from.lds(<4 x i32> %D0, <8 x i32> %D1, <4 x i32> %D2, <4 x i32> %D3, i32 %cpol)
declare void @llvm.amdgcn.tensor.store.from.lds.d2(<4 x i32> %D0, <8 x i32> %D1, i32 %cpol)

define amdgpu_ps void @tensor_load_to_lds(<4 x i32> inreg %D0, <8 x i32> inreg %D1, <4 x i32> inreg %D2, <4 x i32> inreg %D3) {
; GFX1210-LABEL: tensor_load_to_lds:
; GFX1210:       ; %bb.0: ; %entry
; GFX1210-NEXT:    tensor_load_to_lds s[0:3], s[4:11], s[12:15], s[16:19] r128
; GFX1210-NEXT:    s_endpgm
entry:
  call void @llvm.amdgcn.tensor.load.to.lds(<4 x i32> %D0, <8 x i32> %D1, <4 x i32> %D2, <4 x i32> %D3, i32 0)
  ret void
}

define amdgpu_ps void @tensor_load_to_lds_d2(<4 x i32> inreg %D0, <8 x i32> inreg %D1) {
; GFX1210-LABEL: tensor_load_to_lds_d2:
; GFX1210:       ; %bb.0: ; %entry
; GFX1210-NEXT:    tensor_load_to_lds s[0:3], s[4:11] r128 th:TH_LOAD_BYPASS scope:SCOPE_SYS
; GFX1210-NEXT:    s_endpgm
entry:
  call void @llvm.amdgcn.tensor.load.to.lds.d2(<4 x i32> %D0, <8 x i32> %D1, i32 27)
  ret void
}

define amdgpu_ps void @tensor_store_from_lds(<4 x i32> inreg %D0, <8 x i32> inreg %D1, <4 x i32> inreg %D2, <4 x i32> inreg %D3) {
; GFX1210-LABEL: tensor_store_from_lds:
; GFX1210:       ; %bb.0: ; %entry
; GFX1210-NEXT:    tensor_store_from_lds s[0:3], s[4:11], s[12:15], s[16:19] r128 th:TH_STORE_NT_HT scope:SCOPE_DEV
; GFX1210-NEXT:    s_endpgm
entry:
  call void @llvm.amdgcn.tensor.store.from.lds(<4 x i32> %D0, <8 x i32> %D1, <4 x i32> %D2, <4 x i32> %D3, i32 22)
  ret void
}

define amdgpu_ps void @tensor_store_from_lds_d2(<4 x i32> inreg %D0, <8 x i32> inreg %D1) {
; GFX1210-LABEL: tensor_store_from_lds_d2:
; GFX1210:       ; %bb.0: ; %entry
; GFX1210-NEXT:    tensor_store_from_lds s[0:3], s[4:11] r128
; GFX1210-NEXT:    s_endpgm
entry:
  call void @llvm.amdgcn.tensor.store.from.lds.d2(<4 x i32> %D0, <8 x i32> %D1, i32 0)
  ret void
}
