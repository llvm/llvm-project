# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=amdgcn -mcpu=fiji -run-pass="amdgpu-regbankselect,amdgpu-regbanklegalize" -verify-machineinstrs -o - %s | FileCheck %s

---
name: zextload_constant_i8_to_i32_uniform
legalized: true

body: |
  bb.0:
    liveins: $sgpr0_sgpr1
    ; CHECK-LABEL: name: zextload_constant_i8_to_i32_uniform
    ; CHECK: liveins: $sgpr0_sgpr1
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: [[COPY:%[0-9]+]]:sgpr(p4) = COPY $sgpr0_sgpr1
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:vgpr(p4) = COPY [[COPY]](p4)
    ; CHECK-NEXT: [[ZEXTLOAD:%[0-9]+]]:vgpr(i32) = G_ZEXTLOAD [[COPY1]](p4) :: (load (i8), addrspace 4)
    ; CHECK-NEXT: [[AMDGPU_READANYLANE:%[0-9]+]]:sgpr(i32) = G_AMDGPU_READANYLANE [[ZEXTLOAD]]
    %0:_(p4) = COPY $sgpr0_sgpr1
    %1:_(i32) = G_ZEXTLOAD %0(p4) :: (load (i8), addrspace 4)
...

---
name: zextload_global_i8_to_i32_uniform
legalized: true

body: |
  bb.0:
    liveins: $sgpr0_sgpr1

    ; CHECK-LABEL: name: zextload_global_i8_to_i32_uniform
    ; CHECK: liveins: $sgpr0_sgpr1
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: [[COPY:%[0-9]+]]:sgpr(p4) = COPY $sgpr0_sgpr1
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:vgpr(p4) = COPY [[COPY]](p4)
    ; CHECK-NEXT: [[ZEXTLOAD:%[0-9]+]]:vgpr(i32) = G_ZEXTLOAD [[COPY1]](p4) :: (load (i8), addrspace 1)
    ; CHECK-NEXT: [[AMDGPU_READANYLANE:%[0-9]+]]:sgpr(i32) = G_AMDGPU_READANYLANE [[ZEXTLOAD]]
    %0:_(p4) = COPY $sgpr0_sgpr1
    %1:_(i32) = G_ZEXTLOAD %0(p4) :: (load (i8), addrspace 1)
...

---
name: zextload_constant_i16_to_i32_uniform
legalized: true

body: |
  bb.0:
    liveins: $sgpr0_sgpr1

    ; CHECK-LABEL: name: zextload_constant_i16_to_i32_uniform
    ; CHECK: liveins: $sgpr0_sgpr1
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: [[COPY:%[0-9]+]]:sgpr(p4) = COPY $sgpr0_sgpr1
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:vgpr(p4) = COPY [[COPY]](p4)
    ; CHECK-NEXT: [[ZEXTLOAD:%[0-9]+]]:vgpr(i32) = G_ZEXTLOAD [[COPY1]](p4) :: (load (i16), addrspace 4)
    ; CHECK-NEXT: [[AMDGPU_READANYLANE:%[0-9]+]]:sgpr(i32) = G_AMDGPU_READANYLANE [[ZEXTLOAD]]
    %0:_(p4) = COPY $sgpr0_sgpr1
    %1:_(i32) = G_ZEXTLOAD %0(p4) :: (load (i16), addrspace 4)
...

---
name: zextload_global_i16_to_i32_uniform
legalized: true

body: |
  bb.0:
    liveins: $sgpr0_sgpr1

    ; CHECK-LABEL: name: zextload_global_i16_to_i32_uniform
    ; CHECK: liveins: $sgpr0_sgpr1
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: [[COPY:%[0-9]+]]:sgpr(p4) = COPY $sgpr0_sgpr1
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:vgpr(p4) = COPY [[COPY]](p4)
    ; CHECK-NEXT: [[ZEXTLOAD:%[0-9]+]]:vgpr(i32) = G_ZEXTLOAD [[COPY1]](p4) :: (load (i16), addrspace 1)
    ; CHECK-NEXT: [[AMDGPU_READANYLANE:%[0-9]+]]:sgpr(i32) = G_AMDGPU_READANYLANE [[ZEXTLOAD]]
    %0:_(p4) = COPY $sgpr0_sgpr1
    %1:_(i32) = G_ZEXTLOAD %0(p4) :: (load (i16), addrspace 1)
...

---
name: zextload_local_i8_to_i32_uniform
legalized: true

body: |
  bb.0:
    liveins: $sgpr0
    ; CHECK-LABEL: name: zextload_local_i8_to_i32_uniform
    ; CHECK: liveins: $sgpr0
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: [[COPY:%[0-9]+]]:sgpr(p3) = COPY $sgpr0
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:vgpr(p3) = COPY [[COPY]](p3)
    ; CHECK-NEXT: [[ZEXTLOAD:%[0-9]+]]:vgpr(i32) = G_ZEXTLOAD [[COPY1]](p3) :: (load (i8), addrspace 3)
    ; CHECK-NEXT: [[AMDGPU_READANYLANE:%[0-9]+]]:sgpr(i32) = G_AMDGPU_READANYLANE [[ZEXTLOAD]]
    %0:_(p3) = COPY $sgpr0
    %1:_(i32) = G_ZEXTLOAD %0(p3) :: (load (i8), addrspace 3)
...

---
name: zextload_local_i16_to_i32_uniform
legalized: true

body: |
  bb.0:
    liveins: $sgpr0

    ; CHECK-LABEL: name: zextload_local_i16_to_i32_uniform
    ; CHECK: liveins: $sgpr0
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: [[COPY:%[0-9]+]]:sgpr(p3) = COPY $sgpr0
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:vgpr(p3) = COPY [[COPY]](p3)
    ; CHECK-NEXT: [[ZEXTLOAD:%[0-9]+]]:vgpr(i32) = G_ZEXTLOAD [[COPY1]](p3) :: (load (i16), addrspace 3)
    ; CHECK-NEXT: [[AMDGPU_READANYLANE:%[0-9]+]]:sgpr(i32) = G_AMDGPU_READANYLANE [[ZEXTLOAD]]
    %0:_(p3) = COPY $sgpr0
    %1:_(i32) = G_ZEXTLOAD %0(p3) :: (load (i16), addrspace 3)
...
