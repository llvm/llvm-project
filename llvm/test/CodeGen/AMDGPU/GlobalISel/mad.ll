; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -global-isel -new-reg-bank-select -mtriple=amdgcn-amd-amdhsa -mcpu=gfx1100 -o - %s | FileCheck %s

define amdgpu_ps void @s_mul_i64(i64 inreg %a, i64 inreg %b, ptr addrspace(1) %out) {
; CHECK-LABEL: s_mul_i64:
; CHECK:       ; %bb.0:
; CHECK-NEXT:    s_mul_hi_u32 s4, s0, s2
; CHECK-NEXT:    s_mul_i32 s3, s0, s3
; CHECK-NEXT:    s_mul_i32 s1, s1, s2
; CHECK-NEXT:    s_add_i32 s3, s4, s3
; CHECK-NEXT:    s_mul_i32 s0, s0, s2
; CHECK-NEXT:    s_add_i32 s1, s3, s1
; CHECK-NEXT:    s_delay_alu instid0(SALU_CYCLE_1)
; CHECK-NEXT:    v_dual_mov_b32 v3, s1 :: v_dual_mov_b32 v2, s0
; CHECK-NEXT:    global_store_b64 v[0:1], v[2:3], off
; CHECK-NEXT:    s_endpgm
  %result = mul i64 %a, %b
  store i64 %result, ptr addrspace(1) %out
  ret void
}

define amdgpu_ps void @v_mul_i64(i64 %a, i64 %b, ptr addrspace(1) %out) {
; CHECK-LABEL: v_mul_i64:
; CHECK:       ; %bb.0:
; CHECK-NEXT:    v_mad_u64_u32 v[6:7], null, v0, v2, 0
; CHECK-NEXT:    s_delay_alu instid0(VALU_DEP_1) | instskip(NEXT) | instid1(VALU_DEP_1)
; CHECK-NEXT:    v_mad_u64_u32 v[9:10], null, v0, v3, v[7:8]
; CHECK-NEXT:    v_mad_u64_u32 v[7:8], null, v1, v2, v[9:10]
; CHECK-NEXT:    global_store_b64 v[4:5], v[6:7], off
; CHECK-NEXT:    s_endpgm
  %result = mul i64 %a, %b
  store i64 %result, ptr addrspace(1) %out
  ret void
}
