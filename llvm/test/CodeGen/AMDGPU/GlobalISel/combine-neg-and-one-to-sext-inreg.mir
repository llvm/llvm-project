# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 5
# RUN: llc -o - -mtriple=amdgcn -run-pass=amdgpu-prelegalizer-combiner %s | FileCheck %s
---
name: test_combine_neg_and_one_to_sext_inreg_v2i32
body: |
  bb.1:
  liveins: $vgpr0_vgpr1
    ; CHECK-LABEL: name: test_combine_neg_and_one_to_sext_inreg_v2i32
    ; CHECK: liveins: $vgpr0_vgpr1
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: %x:_(<2 x s32>) = COPY $vgpr0_vgpr1
    ; CHECK-NEXT: %res:_(<2 x s32>) = G_SEXT_INREG %x, 1
    ; CHECK-NEXT: $vgpr0_vgpr1 = COPY %res(<2 x s32>)
    %x:_(<2 x s32>) = COPY $vgpr0_vgpr1
    %one:_(s32) = G_CONSTANT i32 1
    %ones:_(<2 x s32>) = G_BUILD_VECTOR %one, %one
    %zero:_(s32) = G_CONSTANT i32 0
    %zeros:_(<2 x s32>) = G_BUILD_VECTOR %zero, %zero
    %and:_(<2 x s32>) = G_AND %x:_, %ones:_
    %res:_(<2 x s32>) = G_SUB %zeros:_, %and:_
    $vgpr0_vgpr1 = COPY %res:_(<2 x s32>)
...
