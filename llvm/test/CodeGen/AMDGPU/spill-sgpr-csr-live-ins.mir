# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=amdgcn-amd-amdhsa -verify-machineinstrs -run-pass=si-lower-sgpr-spills -o - %s | FileCheck %s

---
name: spill_csr_sgpr_argument
tracksRegLiveness: true
liveins:
  - { reg: '$sgpr50' }
body:             |
  bb.0:
    liveins: $sgpr50
    ; CHECK-LABEL: name: spill_csr_sgpr_argument
    ; CHECK: liveins: $sgpr50
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: [[DEF:%[0-9]+]]:vgpr_32 = IMPLICIT_DEF
    ; CHECK-NEXT: [[V_WRITELANE_B32_:%[0-9]+]]:vgpr_32 = V_WRITELANE_B32 $sgpr50, 0, [[V_WRITELANE_B32_]]
    ; CHECK-NEXT: S_NOP 0, implicit $sgpr50
    ; CHECK-NEXT: $sgpr50 = S_MOV_B32 0
    S_NOP 0, implicit $sgpr50
    $sgpr50 = S_MOV_B32 0

...
