# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=amdgcn-amd-amdhsa -mcpu=fiji -verify-machineinstrs -run-pass=prologepilog %s -o - | FileCheck -check-prefix=GFX8 %s
# RUN: llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx900 -verify-machineinstrs -run-pass=prologepilog %s -o - | FileCheck -check-prefix=GFX9 %s
# RUN: llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx900 -verify-machineinstrs -run-pass=prologepilog -mattr=+enable-flat-scratch %s -o - | FileCheck -check-prefix=GFX9-FLATSCR %s

# Test case where spilling a VGPR to an emergency slot is needed during frame index elimination.

---
name: pei_scavenge_vgpr_spill
tracksRegLiveness: true

stack:
  - { id: 0, type: default, offset: 0, size: 4, alignment: 8192 }
  - { id: 1, type: default, offset: 0, size: 4, alignment: 8192 }

machineFunctionInfo:
  isEntryFunction: false
  scratchRSrcReg:  $sgpr0_sgpr1_sgpr2_sgpr3
  frameOffsetReg:  $sgpr33
  stackPtrOffsetReg:  $sgpr32

body:             |
  bb.0:
    liveins: $vgpr0_vgpr1_vgpr2_vgpr3_vgpr4_vgpr5_vgpr6_vgpr7_vgpr8_vgpr9_vgpr10_vgpr11_vgpr12_vgpr13_vgpr14_vgpr15, $vgpr16_vgpr17_vgpr18_vgpr19_vgpr20_vgpr21_vgpr22_vgpr23_vgpr24_vgpr25_vgpr26_vgpr27_vgpr28_vgpr29_vgpr30_vgpr31, $vgpr32_vgpr33_vgpr34_vgpr35_vgpr36_vgpr37_vgpr38_vgpr39_vgpr40_vgpr41_vgpr42_vgpr43_vgpr44_vgpr45_vgpr46_vgpr47, $vgpr48_vgpr49_vgpr50_vgpr51_vgpr52_vgpr53_vgpr54_vgpr55_vgpr56_vgpr57_vgpr58_vgpr59_vgpr60_vgpr61_vgpr62_vgpr63, $vgpr64_vgpr65_vgpr66_vgpr67_vgpr68_vgpr69_vgpr70_vgpr71_vgpr72_vgpr73_vgpr74_vgpr75_vgpr76_vgpr77_vgpr78_vgpr79, $vgpr80_vgpr81_vgpr82_vgpr83_vgpr84_vgpr85_vgpr86_vgpr87_vgpr88_vgpr89_vgpr90_vgpr91_vgpr92_vgpr93_vgpr94_vgpr95, $vgpr96_vgpr97_vgpr98_vgpr99_vgpr100_vgpr101_vgpr102_vgpr103_vgpr104_vgpr105_vgpr106_vgpr107_vgpr108_vgpr109_vgpr110_vgpr111, $vgpr112_vgpr113_vgpr114_vgpr115_vgpr116_vgpr117_vgpr118_vgpr119_vgpr120_vgpr121_vgpr122_vgpr123_vgpr124_vgpr125_vgpr126_vgpr127, $vgpr128_vgpr129_vgpr130_vgpr131_vgpr132_vgpr133_vgpr134_vgpr135_vgpr136_vgpr137_vgpr138_vgpr139_vgpr140_vgpr141_vgpr142_vgpr143, $vgpr144_vgpr145_vgpr146_vgpr147_vgpr148_vgpr149_vgpr150_vgpr151_vgpr152_vgpr153_vgpr154_vgpr155_vgpr156_vgpr157_vgpr158_vgpr159, $vgpr160_vgpr161_vgpr162_vgpr163_vgpr164_vgpr165_vgpr166_vgpr167_vgpr168_vgpr169_vgpr170_vgpr171_vgpr172_vgpr173_vgpr174_vgpr175, $vgpr176_vgpr177_vgpr178_vgpr179_vgpr180_vgpr181_vgpr182_vgpr183_vgpr184_vgpr185_vgpr186_vgpr187_vgpr188_vgpr189_vgpr190_vgpr191, $vgpr192_vgpr193_vgpr194_vgpr195_vgpr196_vgpr197_vgpr198_vgpr199_vgpr200_vgpr201_vgpr202_vgpr203_vgpr204_vgpr205_vgpr206_vgpr207, $vgpr208_vgpr209_vgpr210_vgpr211_vgpr212_vgpr213_vgpr214_vgpr215_vgpr216_vgpr217_vgpr218_vgpr219_vgpr220_vgpr221_vgpr222_vgpr223, $vgpr224_vgpr225_vgpr226_vgpr227_vgpr228_vgpr229_vgpr230_vgpr231_vgpr232_vgpr233_vgpr234_vgpr235_vgpr236_vgpr237_vgpr238_vgpr239, $vgpr240_vgpr241_vgpr242_vgpr243_vgpr244_vgpr245_vgpr246_vgpr247, $vgpr248_vgpr249_vgpr250_vgpr251, $vgpr252_vgpr253_vgpr254_vgpr255

    ; GFX8-LABEL: name: pei_scavenge_vgpr_spill
    ; GFX8: liveins: $vgpr2, $vgpr248_vgpr249_vgpr250_vgpr251, $vgpr252_vgpr253_vgpr254_vgpr255, $vgpr240_vgpr241_vgpr242_vgpr243_vgpr244_vgpr245_vgpr246_vgpr247, $vgpr0_vgpr1_vgpr2_vgpr3_vgpr4_vgpr5_vgpr6_vgpr7_vgpr8_vgpr9_vgpr10_vgpr11_vgpr12_vgpr13_vgpr14_vgpr15, $vgpr16_vgpr17_vgpr18_vgpr19_vgpr20_vgpr21_vgpr22_vgpr23_vgpr24_vgpr25_vgpr26_vgpr27_vgpr28_vgpr29_vgpr30_vgpr31, $vgpr32_vgpr33_vgpr34_vgpr35_vgpr36_vgpr37_vgpr38_vgpr39_vgpr40_vgpr41_vgpr42_vgpr43_vgpr44_vgpr45_vgpr46_vgpr47, $vgpr48_vgpr49_vgpr50_vgpr51_vgpr52_vgpr53_vgpr54_vgpr55_vgpr56_vgpr57_vgpr58_vgpr59_vgpr60_vgpr61_vgpr62_vgpr63, $vgpr64_vgpr65_vgpr66_vgpr67_vgpr68_vgpr69_vgpr70_vgpr71_vgpr72_vgpr73_vgpr74_vgpr75_vgpr76_vgpr77_vgpr78_vgpr79, $vgpr80_vgpr81_vgpr82_vgpr83_vgpr84_vgpr85_vgpr86_vgpr87_vgpr88_vgpr89_vgpr90_vgpr91_vgpr92_vgpr93_vgpr94_vgpr95, $vgpr96_vgpr97_vgpr98_vgpr99_vgpr100_vgpr101_vgpr102_vgpr103_vgpr104_vgpr105_vgpr106_vgpr107_vgpr108_vgpr109_vgpr110_vgpr111, $vgpr112_vgpr113_vgpr114_vgpr115_vgpr116_vgpr117_vgpr118_vgpr119_vgpr120_vgpr121_vgpr122_vgpr123_vgpr124_vgpr125_vgpr126_vgpr127, $vgpr128_vgpr129_vgpr130_vgpr131_vgpr132_vgpr133_vgpr134_vgpr135_vgpr136_vgpr137_vgpr138_vgpr139_vgpr140_vgpr141_vgpr142_vgpr143, $vgpr144_vgpr145_vgpr146_vgpr147_vgpr148_vgpr149_vgpr150_vgpr151_vgpr152_vgpr153_vgpr154_vgpr155_vgpr156_vgpr157_vgpr158_vgpr159, $vgpr160_vgpr161_vgpr162_vgpr163_vgpr164_vgpr165_vgpr166_vgpr167_vgpr168_vgpr169_vgpr170_vgpr171_vgpr172_vgpr173_vgpr174_vgpr175, $vgpr176_vgpr177_vgpr178_vgpr179_vgpr180_vgpr181_vgpr182_vgpr183_vgpr184_vgpr185_vgpr186_vgpr187_vgpr188_vgpr189_vgpr190_vgpr191, $vgpr192_vgpr193_vgpr194_vgpr195_vgpr196_vgpr197_vgpr198_vgpr199_vgpr200_vgpr201_vgpr202_vgpr203_vgpr204_vgpr205_vgpr206_vgpr207, $vgpr208_vgpr209_vgpr210_vgpr211_vgpr212_vgpr213_vgpr214_vgpr215_vgpr216_vgpr217_vgpr218_vgpr219_vgpr220_vgpr221_vgpr222_vgpr223, $vgpr224_vgpr225_vgpr226_vgpr227_vgpr228_vgpr229_vgpr230_vgpr231_vgpr232_vgpr233_vgpr234_vgpr235_vgpr236_vgpr237_vgpr238_vgpr239
    ; GFX8-NEXT: {{  $}}
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION llvm_def_aspace_cfa $sgpr32, 0, 6
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION llvm_register_pair $pc_reg, $sgpr30, 32, $sgpr31, 32
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $vgpr0
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr0
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr1
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr2
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr3
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr4
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr5
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr6
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr7
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr8
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr9
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr10
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr11
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr12
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr13
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr14
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr15
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr16
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr17
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr18
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr19
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr20
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr21
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr22
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr23
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr24
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr25
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr26
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr27
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr28
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr29
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr40
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr41
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr42
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr43
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr44
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr45
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr46
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr47
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr56
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr57
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr58
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr59
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr60
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr61
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr62
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr63
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr72
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr73
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr74
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr75
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr76
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr77
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr78
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr79
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr88
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr89
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr90
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr91
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr92
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr93
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr94
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr95
    ; GFX8-NEXT: $sgpr4 = COPY $sgpr33
    ; GFX8-NEXT: $sgpr33 = frame-setup S_ADD_I32 $sgpr32, 524224, implicit-def $scc
    ; GFX8-NEXT: $sgpr33 = frame-setup S_AND_B32 killed $sgpr33, 4294443008, implicit-def dead $scc
    ; GFX8-NEXT: $sgpr6_sgpr7 = S_XOR_SAVEEXEC_B64 -1, implicit-def $exec, implicit-def dead $scc, implicit $exec
    ; GFX8-NEXT: $sgpr5 = S_ADD_I32 $sgpr33, 1048832, implicit-def dead $scc
    ; GFX8-NEXT: BUFFER_STORE_DWORD_OFFSET $vgpr2, $sgpr0_sgpr1_sgpr2_sgpr3, killed $sgpr5, 0, 0, 0, implicit $exec :: (store (s32) into %stack.3, addrspace 5)
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION offset $vgpr2, 1048832
    ; GFX8-NEXT: $exec = S_MOV_B64 killed $sgpr6_sgpr7
    ; GFX8-NEXT: $vgpr2 = SI_SPILL_S32_TO_VGPR $sgpr4, 0, undef $vgpr2
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION llvm_vector_registers $sgpr33, $vgpr2, 0, 32
    ; GFX8-NEXT: $vgpr2 = SI_SPILL_S32_TO_VGPR $sgpr34, 1, undef $vgpr2
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION llvm_vector_registers $sgpr34, $vgpr2, 1, 32
    ; GFX8-NEXT: $sgpr34 = frame-setup COPY $sgpr32
    ; GFX8-NEXT: frame-setup CFI_INSTRUCTION def_cfa_register $sgpr33
    ; GFX8-NEXT: $sgpr32 = frame-setup S_ADD_I32 $sgpr32, 2097152, implicit-def dead $scc
    ; GFX8-NEXT: $vgpr0 = V_LSHRREV_B32_e64 6, $sgpr33, implicit $exec
    ; GFX8-NEXT: $vcc_lo = S_MOV_B32 8192
    ; GFX8-NEXT: $vgpr0, dead $vcc = V_ADD_CO_U32_e64 killed $vcc_lo, killed $vgpr0, 0, implicit $exec
    ; GFX8-NEXT: $vgpr3 = V_LSHRREV_B32_e64 6, $sgpr33, implicit $exec
    ; GFX8-NEXT: $vcc_lo = S_MOV_B32 16384
    ; GFX8-NEXT: $vgpr3, dead $vcc = V_ADD_CO_U32_e64 killed $vcc_lo, killed $vgpr3, 0, implicit $exec
    ; GFX8-NEXT: $vgpr0 = V_OR_B32_e32 killed $vgpr3, $vgpr1, implicit $exec
    ; GFX8-NEXT: $sgpr32 = frame-destroy COPY $sgpr34
    ; GFX8-NEXT: $sgpr4 = SI_RESTORE_S32_FROM_VGPR $vgpr2, 0
    ; GFX8-NEXT: $sgpr34 = SI_RESTORE_S32_FROM_VGPR $vgpr2, 1
    ; GFX8-NEXT: $sgpr6_sgpr7 = S_XOR_SAVEEXEC_B64 -1, implicit-def $exec, implicit-def dead $scc, implicit $exec
    ; GFX8-NEXT: $sgpr5 = S_ADD_I32 $sgpr33, 1048832, implicit-def dead $scc
    ; GFX8-NEXT: $vgpr2 = BUFFER_LOAD_DWORD_OFFSET $sgpr0_sgpr1_sgpr2_sgpr3, killed $sgpr5, 0, 0, 0, implicit $exec :: (load (s32) from %stack.3, addrspace 5)
    ; GFX8-NEXT: $exec = S_MOV_B64 killed $sgpr6_sgpr7
    ; GFX8-NEXT: frame-destroy CFI_INSTRUCTION def_cfa_register $sgpr32
    ; GFX8-NEXT: $sgpr33 = COPY $sgpr4
    ; GFX8-NEXT: S_ENDPGM 0, amdgpu_allvgprs
    ;
    ; GFX9-LABEL: name: pei_scavenge_vgpr_spill
    ; GFX9: liveins: $vgpr2, $vgpr248_vgpr249_vgpr250_vgpr251, $vgpr252_vgpr253_vgpr254_vgpr255, $vgpr240_vgpr241_vgpr242_vgpr243_vgpr244_vgpr245_vgpr246_vgpr247, $vgpr0_vgpr1_vgpr2_vgpr3_vgpr4_vgpr5_vgpr6_vgpr7_vgpr8_vgpr9_vgpr10_vgpr11_vgpr12_vgpr13_vgpr14_vgpr15, $vgpr16_vgpr17_vgpr18_vgpr19_vgpr20_vgpr21_vgpr22_vgpr23_vgpr24_vgpr25_vgpr26_vgpr27_vgpr28_vgpr29_vgpr30_vgpr31, $vgpr32_vgpr33_vgpr34_vgpr35_vgpr36_vgpr37_vgpr38_vgpr39_vgpr40_vgpr41_vgpr42_vgpr43_vgpr44_vgpr45_vgpr46_vgpr47, $vgpr48_vgpr49_vgpr50_vgpr51_vgpr52_vgpr53_vgpr54_vgpr55_vgpr56_vgpr57_vgpr58_vgpr59_vgpr60_vgpr61_vgpr62_vgpr63, $vgpr64_vgpr65_vgpr66_vgpr67_vgpr68_vgpr69_vgpr70_vgpr71_vgpr72_vgpr73_vgpr74_vgpr75_vgpr76_vgpr77_vgpr78_vgpr79, $vgpr80_vgpr81_vgpr82_vgpr83_vgpr84_vgpr85_vgpr86_vgpr87_vgpr88_vgpr89_vgpr90_vgpr91_vgpr92_vgpr93_vgpr94_vgpr95, $vgpr96_vgpr97_vgpr98_vgpr99_vgpr100_vgpr101_vgpr102_vgpr103_vgpr104_vgpr105_vgpr106_vgpr107_vgpr108_vgpr109_vgpr110_vgpr111, $vgpr112_vgpr113_vgpr114_vgpr115_vgpr116_vgpr117_vgpr118_vgpr119_vgpr120_vgpr121_vgpr122_vgpr123_vgpr124_vgpr125_vgpr126_vgpr127, $vgpr128_vgpr129_vgpr130_vgpr131_vgpr132_vgpr133_vgpr134_vgpr135_vgpr136_vgpr137_vgpr138_vgpr139_vgpr140_vgpr141_vgpr142_vgpr143, $vgpr144_vgpr145_vgpr146_vgpr147_vgpr148_vgpr149_vgpr150_vgpr151_vgpr152_vgpr153_vgpr154_vgpr155_vgpr156_vgpr157_vgpr158_vgpr159, $vgpr160_vgpr161_vgpr162_vgpr163_vgpr164_vgpr165_vgpr166_vgpr167_vgpr168_vgpr169_vgpr170_vgpr171_vgpr172_vgpr173_vgpr174_vgpr175, $vgpr176_vgpr177_vgpr178_vgpr179_vgpr180_vgpr181_vgpr182_vgpr183_vgpr184_vgpr185_vgpr186_vgpr187_vgpr188_vgpr189_vgpr190_vgpr191, $vgpr192_vgpr193_vgpr194_vgpr195_vgpr196_vgpr197_vgpr198_vgpr199_vgpr200_vgpr201_vgpr202_vgpr203_vgpr204_vgpr205_vgpr206_vgpr207, $vgpr208_vgpr209_vgpr210_vgpr211_vgpr212_vgpr213_vgpr214_vgpr215_vgpr216_vgpr217_vgpr218_vgpr219_vgpr220_vgpr221_vgpr222_vgpr223, $vgpr224_vgpr225_vgpr226_vgpr227_vgpr228_vgpr229_vgpr230_vgpr231_vgpr232_vgpr233_vgpr234_vgpr235_vgpr236_vgpr237_vgpr238_vgpr239
    ; GFX9-NEXT: {{  $}}
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION llvm_def_aspace_cfa $sgpr32, 0, 6
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION llvm_register_pair $pc_reg, $sgpr30, 32, $sgpr31, 32
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $vgpr0
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr0
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr1
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr2
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr3
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr4
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr5
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr6
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr7
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr8
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr9
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr10
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr11
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr12
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr13
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr14
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr15
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr16
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr17
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr18
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr19
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr20
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr21
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr22
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr23
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr24
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr25
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr26
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr27
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr28
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr29
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr40
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr41
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr42
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr43
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr44
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr45
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr46
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr47
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr56
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr57
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr58
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr59
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr60
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr61
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr62
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr63
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr72
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr73
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr74
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr75
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr76
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr77
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr78
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr79
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr88
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr89
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr90
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr91
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr92
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr93
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr94
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr95
    ; GFX9-NEXT: $sgpr4 = COPY $sgpr33
    ; GFX9-NEXT: $sgpr33 = frame-setup S_ADD_I32 $sgpr32, 524224, implicit-def $scc
    ; GFX9-NEXT: $sgpr33 = frame-setup S_AND_B32 killed $sgpr33, 4294443008, implicit-def dead $scc
    ; GFX9-NEXT: $sgpr6_sgpr7 = S_XOR_SAVEEXEC_B64 -1, implicit-def $exec, implicit-def dead $scc, implicit $exec
    ; GFX9-NEXT: $sgpr5 = S_ADD_I32 $sgpr33, 1048832, implicit-def dead $scc
    ; GFX9-NEXT: BUFFER_STORE_DWORD_OFFSET $vgpr2, $sgpr0_sgpr1_sgpr2_sgpr3, killed $sgpr5, 0, 0, 0, implicit $exec :: (store (s32) into %stack.3, addrspace 5)
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION offset $vgpr2, 1048832
    ; GFX9-NEXT: $exec = S_MOV_B64 killed $sgpr6_sgpr7
    ; GFX9-NEXT: $vgpr2 = SI_SPILL_S32_TO_VGPR $sgpr4, 0, undef $vgpr2
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION llvm_vector_registers $sgpr33, $vgpr2, 0, 32
    ; GFX9-NEXT: $vgpr2 = SI_SPILL_S32_TO_VGPR $sgpr34, 1, undef $vgpr2
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION llvm_vector_registers $sgpr34, $vgpr2, 1, 32
    ; GFX9-NEXT: $sgpr34 = frame-setup COPY $sgpr32
    ; GFX9-NEXT: frame-setup CFI_INSTRUCTION def_cfa_register $sgpr33
    ; GFX9-NEXT: $sgpr32 = frame-setup S_ADD_I32 $sgpr32, 2097152, implicit-def dead $scc
    ; GFX9-NEXT: $vgpr0 = V_LSHRREV_B32_e64 6, $sgpr33, implicit $exec
    ; GFX9-NEXT: $vgpr0 = V_ADD_U32_e32 8192, killed $vgpr0, implicit $exec
    ; GFX9-NEXT: $vgpr3 = V_LSHRREV_B32_e64 6, $sgpr33, implicit $exec
    ; GFX9-NEXT: $vgpr3 = V_ADD_U32_e32 16384, killed $vgpr3, implicit $exec
    ; GFX9-NEXT: $vgpr0 = V_OR_B32_e32 killed $vgpr3, $vgpr1, implicit $exec
    ; GFX9-NEXT: $sgpr32 = frame-destroy COPY $sgpr34
    ; GFX9-NEXT: $sgpr4 = SI_RESTORE_S32_FROM_VGPR $vgpr2, 0
    ; GFX9-NEXT: $sgpr34 = SI_RESTORE_S32_FROM_VGPR $vgpr2, 1
    ; GFX9-NEXT: $sgpr6_sgpr7 = S_XOR_SAVEEXEC_B64 -1, implicit-def $exec, implicit-def dead $scc, implicit $exec
    ; GFX9-NEXT: $sgpr5 = S_ADD_I32 $sgpr33, 1048832, implicit-def dead $scc
    ; GFX9-NEXT: $vgpr2 = BUFFER_LOAD_DWORD_OFFSET $sgpr0_sgpr1_sgpr2_sgpr3, killed $sgpr5, 0, 0, 0, implicit $exec :: (load (s32) from %stack.3, addrspace 5)
    ; GFX9-NEXT: $exec = S_MOV_B64 killed $sgpr6_sgpr7
    ; GFX9-NEXT: frame-destroy CFI_INSTRUCTION def_cfa_register $sgpr32
    ; GFX9-NEXT: $sgpr33 = COPY $sgpr4
    ; GFX9-NEXT: S_ENDPGM 0, amdgpu_allvgprs
    ;
    ; GFX9-FLATSCR-LABEL: name: pei_scavenge_vgpr_spill
    ; GFX9-FLATSCR: liveins: $vgpr2, $vgpr248_vgpr249_vgpr250_vgpr251, $vgpr252_vgpr253_vgpr254_vgpr255, $vgpr240_vgpr241_vgpr242_vgpr243_vgpr244_vgpr245_vgpr246_vgpr247, $vgpr0_vgpr1_vgpr2_vgpr3_vgpr4_vgpr5_vgpr6_vgpr7_vgpr8_vgpr9_vgpr10_vgpr11_vgpr12_vgpr13_vgpr14_vgpr15, $vgpr16_vgpr17_vgpr18_vgpr19_vgpr20_vgpr21_vgpr22_vgpr23_vgpr24_vgpr25_vgpr26_vgpr27_vgpr28_vgpr29_vgpr30_vgpr31, $vgpr32_vgpr33_vgpr34_vgpr35_vgpr36_vgpr37_vgpr38_vgpr39_vgpr40_vgpr41_vgpr42_vgpr43_vgpr44_vgpr45_vgpr46_vgpr47, $vgpr48_vgpr49_vgpr50_vgpr51_vgpr52_vgpr53_vgpr54_vgpr55_vgpr56_vgpr57_vgpr58_vgpr59_vgpr60_vgpr61_vgpr62_vgpr63, $vgpr64_vgpr65_vgpr66_vgpr67_vgpr68_vgpr69_vgpr70_vgpr71_vgpr72_vgpr73_vgpr74_vgpr75_vgpr76_vgpr77_vgpr78_vgpr79, $vgpr80_vgpr81_vgpr82_vgpr83_vgpr84_vgpr85_vgpr86_vgpr87_vgpr88_vgpr89_vgpr90_vgpr91_vgpr92_vgpr93_vgpr94_vgpr95, $vgpr96_vgpr97_vgpr98_vgpr99_vgpr100_vgpr101_vgpr102_vgpr103_vgpr104_vgpr105_vgpr106_vgpr107_vgpr108_vgpr109_vgpr110_vgpr111, $vgpr112_vgpr113_vgpr114_vgpr115_vgpr116_vgpr117_vgpr118_vgpr119_vgpr120_vgpr121_vgpr122_vgpr123_vgpr124_vgpr125_vgpr126_vgpr127, $vgpr128_vgpr129_vgpr130_vgpr131_vgpr132_vgpr133_vgpr134_vgpr135_vgpr136_vgpr137_vgpr138_vgpr139_vgpr140_vgpr141_vgpr142_vgpr143, $vgpr144_vgpr145_vgpr146_vgpr147_vgpr148_vgpr149_vgpr150_vgpr151_vgpr152_vgpr153_vgpr154_vgpr155_vgpr156_vgpr157_vgpr158_vgpr159, $vgpr160_vgpr161_vgpr162_vgpr163_vgpr164_vgpr165_vgpr166_vgpr167_vgpr168_vgpr169_vgpr170_vgpr171_vgpr172_vgpr173_vgpr174_vgpr175, $vgpr176_vgpr177_vgpr178_vgpr179_vgpr180_vgpr181_vgpr182_vgpr183_vgpr184_vgpr185_vgpr186_vgpr187_vgpr188_vgpr189_vgpr190_vgpr191, $vgpr192_vgpr193_vgpr194_vgpr195_vgpr196_vgpr197_vgpr198_vgpr199_vgpr200_vgpr201_vgpr202_vgpr203_vgpr204_vgpr205_vgpr206_vgpr207, $vgpr208_vgpr209_vgpr210_vgpr211_vgpr212_vgpr213_vgpr214_vgpr215_vgpr216_vgpr217_vgpr218_vgpr219_vgpr220_vgpr221_vgpr222_vgpr223, $vgpr224_vgpr225_vgpr226_vgpr227_vgpr228_vgpr229_vgpr230_vgpr231_vgpr232_vgpr233_vgpr234_vgpr235_vgpr236_vgpr237_vgpr238_vgpr239
    ; GFX9-FLATSCR-NEXT: {{  $}}
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION escape 0x0f, 0x09, 0x90, 0x40, 0x94, 0x04, 0x36, 0x24, 0x36, 0xe9, 0x02
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION llvm_register_pair $pc_reg, $sgpr30, 32, $sgpr31, 32
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $vgpr0
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr0
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr1
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr2
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr3
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr4
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr5
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr6
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr7
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr8
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr9
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr10
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr11
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr12
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr13
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr14
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr15
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr16
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr17
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr18
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr19
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr20
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr21
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr22
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr23
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr24
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr25
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr26
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr27
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr28
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr29
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr40
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr41
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr42
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr43
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr44
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr45
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr46
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr47
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr56
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr57
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr58
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr59
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr60
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr61
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr62
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr63
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr72
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr73
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr74
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr75
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr76
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr77
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr78
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr79
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr88
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr89
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr90
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr91
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr92
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr93
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr94
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION undefined $sgpr95
    ; GFX9-FLATSCR-NEXT: $sgpr4 = COPY $sgpr33
    ; GFX9-FLATSCR-NEXT: $sgpr33 = frame-setup S_ADD_I32 $sgpr32, 8191, implicit-def $scc
    ; GFX9-FLATSCR-NEXT: $sgpr33 = frame-setup S_AND_B32 killed $sgpr33, 4294959104, implicit-def dead $scc
    ; GFX9-FLATSCR-NEXT: $sgpr6_sgpr7 = S_XOR_SAVEEXEC_B64 -1, implicit-def $exec, implicit-def dead $scc, implicit $exec
    ; GFX9-FLATSCR-NEXT: $sgpr5 = S_ADD_I32 $sgpr33, 16388, implicit-def dead $scc
    ; GFX9-FLATSCR-NEXT: SCRATCH_STORE_DWORD_SADDR $vgpr2, killed $sgpr5, 0, 0, implicit $exec, implicit $flat_scr :: (store (s32) into %stack.3, addrspace 5)
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION offset $vgpr2, 1048832
    ; GFX9-FLATSCR-NEXT: $exec = S_MOV_B64 killed $sgpr6_sgpr7
    ; GFX9-FLATSCR-NEXT: $vgpr2 = SI_SPILL_S32_TO_VGPR $sgpr4, 0, undef $vgpr2
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION llvm_vector_registers $sgpr33, $vgpr2, 0, 32
    ; GFX9-FLATSCR-NEXT: $vgpr2 = SI_SPILL_S32_TO_VGPR $sgpr34, 1, undef $vgpr2
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION llvm_vector_registers $sgpr34, $vgpr2, 1, 32
    ; GFX9-FLATSCR-NEXT: $sgpr34 = frame-setup COPY $sgpr32
    ; GFX9-FLATSCR-NEXT: frame-setup CFI_INSTRUCTION escape 0x0f, 0x09, 0x90, 0x41, 0x94, 0x04, 0x36, 0x24, 0x36, 0xe9, 0x02
    ; GFX9-FLATSCR-NEXT: $sgpr32 = frame-setup S_ADD_I32 $sgpr32, 32768, implicit-def dead $scc
    ; GFX9-FLATSCR-NEXT: $sgpr4 = S_ADD_I32 $sgpr33, 8192, implicit-def $scc
    ; GFX9-FLATSCR-NEXT: $vgpr0 = V_MOV_B32_e32 killed $sgpr4, implicit $exec
    ; GFX9-FLATSCR-NEXT: $sgpr4 = S_ADD_I32 $sgpr33, 16384, implicit-def $scc
    ; GFX9-FLATSCR-NEXT: $vgpr0 = V_OR_B32_e32 killed $sgpr4, $vgpr1, implicit $exec
    ; GFX9-FLATSCR-NEXT: $sgpr32 = frame-destroy COPY $sgpr34
    ; GFX9-FLATSCR-NEXT: $sgpr4 = SI_RESTORE_S32_FROM_VGPR $vgpr2, 0
    ; GFX9-FLATSCR-NEXT: $sgpr34 = SI_RESTORE_S32_FROM_VGPR $vgpr2, 1
    ; GFX9-FLATSCR-NEXT: $sgpr6_sgpr7 = S_XOR_SAVEEXEC_B64 -1, implicit-def $exec, implicit-def dead $scc, implicit $exec
    ; GFX9-FLATSCR-NEXT: $sgpr5 = S_ADD_I32 $sgpr33, 16388, implicit-def dead $scc
    ; GFX9-FLATSCR-NEXT: $vgpr2 = SCRATCH_LOAD_DWORD_SADDR killed $sgpr5, 0, 0, implicit $exec, implicit $flat_scr :: (load (s32) from %stack.3, addrspace 5)
    ; GFX9-FLATSCR-NEXT: $exec = S_MOV_B64 killed $sgpr6_sgpr7
    ; GFX9-FLATSCR-NEXT: frame-destroy CFI_INSTRUCTION escape 0x0f, 0x09, 0x90, 0x40, 0x94, 0x04, 0x36, 0x24, 0x36, 0xe9, 0x02
    ; GFX9-FLATSCR-NEXT: $sgpr33 = COPY $sgpr4
    ; GFX9-FLATSCR-NEXT: S_ENDPGM 0, amdgpu_allvgprs
    $vgpr0 = V_MOV_B32_e32 %stack.0, implicit $exec
    $vgpr0 = V_OR_B32_e32 %stack.1, $vgpr1, implicit $exec
    S_ENDPGM 0, amdgpu_allvgprs
...
