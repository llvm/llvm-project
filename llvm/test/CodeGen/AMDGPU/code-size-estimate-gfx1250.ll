; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc -mtriple=amdgcn -mcpu=gfx1250 -show-mc-encoding < %s | FileCheck -check-prefixes=GFX1250 %s
; RUN: llc -mtriple=amdgcn -mcpu=gfx1300 -show-mc-encoding < %s | FileCheck -check-prefixes=GFX1300 %s

define i16 @cvt_pk_bf8_f16_v(ptr addrspace(1) %out) {
; GFX1250-LABEL: cvt_pk_bf8_f16_v:
; GFX1250:       ; %bb.0:
; GFX1250-NEXT:    s_wait_loadcnt_dscnt 0x0 ; encoding: [0x00,0x00,0xc8,0xbf]
; GFX1250-NEXT:    s_wait_kmcnt 0x0 ; encoding: [0x00,0x00,0xc7,0xbf]
; GFX1250-NEXT:    v_cvt_pk_bf8_f16 v0, 0x38003800 ; encoding: [0x00,0x00,0x73,0xd7,0xff,0x00,0x00,0x00,0x00,0x38,0x00,0x38]
; GFX1250-NEXT:    s_set_pc_i64 s[30:31] ; encoding: [0x1e,0x48,0x80,0xbe]
;
; GFX1300-LABEL: cvt_pk_bf8_f16_v:
; GFX1300:       ; %bb.0:
; GFX1300-NEXT:    s_wait_loadcnt_dscnt 0x0 ; encoding: [0x00,0x00,0xc8,0xbf]
; GFX1300-NEXT:    s_wait_expcnt 0x0 ; encoding: [0x00,0x00,0xc4,0xbf]
; GFX1300-NEXT:    s_wait_samplecnt 0x0 ; encoding: [0x00,0x00,0xc2,0xbf]
; GFX1300-NEXT:    s_wait_rtscnt 0x0 ; encoding: [0x00,0x00,0xcc,0xbf]
; GFX1300-NEXT:    s_wait_kmcnt 0x0 ; encoding: [0x00,0x00,0xc7,0xbf]
; GFX1300-NEXT:    v_cvt_pk_bf8_f16 v0, 0x38003800 ; encoding: [0x00,0x00,0xad,0xd5,0xff,0x00,0x00,0x00,0x00,0x38,0x00,0x38]
; GFX1300-NEXT:    s_set_pc_i64 s[30:31] ; encoding: [0x1e,0x20,0x80,0xbe]
  %cvt = tail call i16 @llvm.amdgcn.cvt.pk.bf8.f16(<2 x half> <half 0xH3800, half 0xH3800>)
  ret i16 %cvt
}

; GFX1250: codeLenInByte = 24
; GFX1300: codeLenInByte = 36

define i16 @cvt_pk_fp8_f16_v(ptr addrspace(1) %out) {
; GFX1250-LABEL: cvt_pk_fp8_f16_v:
; GFX1250:       ; %bb.0:
; GFX1250-NEXT:    s_wait_loadcnt_dscnt 0x0 ; encoding: [0x00,0x00,0xc8,0xbf]
; GFX1250-NEXT:    s_wait_kmcnt 0x0 ; encoding: [0x00,0x00,0xc7,0xbf]
; GFX1250-NEXT:    v_cvt_pk_fp8_f16 v0, 0x3800 ; encoding: [0x00,0x00,0x72,0xd7,0xff,0x00,0x00,0x00,0x00,0x38,0x00,0x00]
; GFX1250-NEXT:    s_set_pc_i64 s[30:31] ; encoding: [0x1e,0x48,0x80,0xbe]
;
; GFX1300-LABEL: cvt_pk_fp8_f16_v:
; GFX1300:       ; %bb.0:
; GFX1300-NEXT:    s_wait_loadcnt_dscnt 0x0 ; encoding: [0x00,0x00,0xc8,0xbf]
; GFX1300-NEXT:    s_wait_expcnt 0x0 ; encoding: [0x00,0x00,0xc4,0xbf]
; GFX1300-NEXT:    s_wait_samplecnt 0x0 ; encoding: [0x00,0x00,0xc2,0xbf]
; GFX1300-NEXT:    s_wait_rtscnt 0x0 ; encoding: [0x00,0x00,0xcc,0xbf]
; GFX1300-NEXT:    s_wait_kmcnt 0x0 ; encoding: [0x00,0x00,0xc7,0xbf]
; GFX1300-NEXT:    v_cvt_pk_fp8_f16 v0, 0.5 ; encoding: [0x00,0x00,0xac,0xd5,0xf0,0x00,0x00,0x00]
; GFX1300-NEXT:    s_set_pc_i64 s[30:31] ; encoding: [0x1e,0x20,0x80,0xbe]
  %cvt = tail call i16 @llvm.amdgcn.cvt.pk.fp8.f16(<2 x half> <half 0xH3800, half 0xH0>)
  ret i16 %cvt
}

; GFX1250: codeLenInByte = 24
; GFX3000: codeLenInByte = 32
