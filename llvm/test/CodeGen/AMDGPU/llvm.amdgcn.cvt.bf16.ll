; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 4
; RUN: llc -global-isel=0 -march=amdgcn -mcpu=gfx1210 -verify-machineinstrs < %s | FileCheck -check-prefix=GCN %s
; RUN: llc -global-isel=1 -march=amdgcn -mcpu=gfx1210 -verify-machineinstrs < %s | FileCheck -check-prefix=GCN %s

declare float @llvm.amdgcn.cvt.f32.bf16(i16) #0

define amdgpu_ps float @cvt_f32_bf16_v(i16 %src) #1 {
; GCN-LABEL: cvt_f32_bf16_v:
; GCN:       ; %bb.0:
; GCN-NEXT:    v_cvt_f32_bf16_e32 v0, v0
; GCN-NEXT:    ; return to shader part epilog
  %cvt = call float @llvm.amdgcn.cvt.f32.bf16(i16 %src) #0
  ret float %cvt
}

define amdgpu_ps float @cvt_f32_bf16_s(i16 inreg %src) #1 {
; GCN-LABEL: cvt_f32_bf16_s:
; GCN:       ; %bb.0:
; GCN-NEXT:    v_cvt_f32_bf16_e32 v0, s0
; GCN-NEXT:    ; return to shader part epilog
  %cvt = call float @llvm.amdgcn.cvt.f32.bf16(i16 %src) #0
  ret float %cvt
}

define amdgpu_ps float @cvt_f32_bf16_constant_100() #1 {
; GCN-LABEL: cvt_f32_bf16_constant_100:
; GCN:       ; %bb.0:
; GCN-NEXT:    v_cvt_f32_bf16_e32 v0, 0x64
; GCN-NEXT:    ; return to shader part epilog
  %cvt = call float @llvm.amdgcn.cvt.f32.bf16(i16 100) #0
  ret float %cvt
}

attributes #0 = { nounwind readnone }
attributes #1 = { nounwind }
