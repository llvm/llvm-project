; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 4
; RUN: opt -mtriple=amdgcn-- -amdgpu-codegenprepare -S < %s | FileCheck -check-prefix=OPT %s

; Check that CGP doesn't try to create a amdgcn.addrspace.nonnull of vector, as that's not supported.

define <4 x ptr> @vec_of_local_to_flat_nonnull_arg() {
; OPT-LABEL: define <4 x ptr> @vec_of_local_to_flat_nonnull_arg() {
; OPT-NEXT:    [[X:%.*]] = addrspacecast <4 x ptr addrspace(3)> zeroinitializer to <4 x ptr>
; OPT-NEXT:    ret <4 x ptr> [[X]]
;
  %x = addrspacecast <4 x ptr addrspace(3)> zeroinitializer to <4 x ptr>
  ret <4 x ptr> %x
}
