# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 6
# RUN: llc -mtriple=amdgcn-amd-amdhsa -mcpu=gfx900 -run-pass=register-coalescer -o - %s | FileCheck %s

# The register budget for this function does not permit using 1024-bit
# registers. The coalescer should not introduce a 1024-bit virtual
# register which will fail to allocate.

--- |
  define void @no_introduce_vreg_1024() #0 {
    ret void
  }

  attributes #0 = { "amdgpu-waves-per-eu"="10,10" }
...
---
name:            no_introduce_vreg_1024
tracksRegLiveness: true
machineFunctionInfo:
  occupancy:       10
body:             |
  bb.0:
    liveins: $vgpr0_vgpr1_vgpr2_vgpr3_vgpr4_vgpr5_vgpr6_vgpr7

    ; CHECK-LABEL: name: no_introduce_vreg_1024
    ; CHECK: liveins: $vgpr0_vgpr1_vgpr2_vgpr3_vgpr4_vgpr5_vgpr6_vgpr7
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: [[COPY:%[0-9]+]]:vreg_256 = COPY $vgpr0_vgpr1_vgpr2_vgpr3_vgpr4_vgpr5_vgpr6_vgpr7
    ; CHECK-NEXT: undef [[COPY1:%[0-9]+]].sub9:vreg_512 = COPY [[COPY]].sub0
    ; CHECK-NEXT: SI_RETURN implicit [[COPY1]]
    %0:vreg_256 = COPY $vgpr0_vgpr1_vgpr2_vgpr3_vgpr4_vgpr5_vgpr6_vgpr7
    undef %1.sub9:vreg_512 = COPY %0.sub0
    SI_RETURN implicit %1

...
