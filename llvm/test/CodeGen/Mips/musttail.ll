; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -mtriple=mips-unknown-linux-gnu < %s | FileCheck %s --check-prefix=MIPS32
; RUN: llc -mtriple=mips64-unknown-linux-gnu < %s | FileCheck %s --check-prefix=MIPS64

; Test musttail support for MIPS

define dso_local i32 @callee_args(i32 %a, i32 %b, i32 %c) {
  ret i32 %a;
}

define i32 @test_musttail_args(i32 %x, i32 %y, i32 %z) {
; MIPS32-LABEL: test_musttail_args:
; MIPS32:       # %bb.0:
; MIPS32-NEXT:    j callee_args
; MIPS32-NEXT:    nop
;
; MIPS64-LABEL: test_musttail_args:
; MIPS64:       # %bb.0:
; MIPS64-NEXT:    j callee_args
; MIPS64-NEXT:    nop
  %ret = musttail call i32 @callee_args(i32 %x, i32 %y, i32 %z)
  ret i32 %ret
}
