; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -mtriple=next32 < %s | FileCheck %s

define dso_local i32 @test(i32* noundef %0, i32* noundef %1) {
; CHECK-LABEL: test
; CHECK:    dup r2, tid
; CHECK:    dup tid, r2
  %3 = ptrtoint i32* %0 to i64
  %4 = trunc i64 %3 to i32
  store i32 %4, i32* %1, align 4
  %5 = ptrtoint i32* %1 to i64
  %6 = trunc i64 %5 to i32
  ret i32 %6
}
