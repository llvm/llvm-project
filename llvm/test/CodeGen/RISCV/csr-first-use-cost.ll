; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc %s -mtriple=riscv64 -regalloc-csr-first-time-cost=0 | FileCheck %s -check-prefix=ZERO-COST
; RUN: llc %s -mtriple=riscv64 -regalloc-csr-first-time-cost=64 | FileCheck %s -check-prefix=SOME-COST

define fastcc void @Perl_sv_setnv(ptr %.str.54.3682) nounwind {
; ZERO-COST-LABEL: Perl_sv_setnv:
; ZERO-COST:       # %bb.0: # %entry
; ZERO-COST-NEXT:    addi sp, sp, -32
; ZERO-COST-NEXT:    sd ra, 24(sp) # 8-byte Folded Spill
; ZERO-COST-NEXT:    sd s0, 16(sp) # 8-byte Folded Spill
; ZERO-COST-NEXT:    sd s1, 8(sp) # 8-byte Folded Spill
; ZERO-COST-NEXT:    bnez zero, .LBB0_5
; ZERO-COST-NEXT:  # %bb.1: # %entry
; ZERO-COST-NEXT:    li a1, 1
; ZERO-COST-NEXT:    bnez a1, .LBB0_6
; ZERO-COST-NEXT:  .LBB0_2: # %entry
; ZERO-COST-NEXT:    mv s0, a0
; ZERO-COST-NEXT:    beqz zero, .LBB0_4
; ZERO-COST-NEXT:  # %bb.3: # %sw.bb34.i
; ZERO-COST-NEXT:    li s0, 0
; ZERO-COST-NEXT:  .LBB0_4: # %Perl_sv_reftype.exit
; ZERO-COST-NEXT:    li s1, 0
; ZERO-COST-NEXT:    li a0, 0
; ZERO-COST-NEXT:    li a1, 0
; ZERO-COST-NEXT:    jalr s1
; ZERO-COST-NEXT:    li a0, 0
; ZERO-COST-NEXT:    mv a1, s0
; ZERO-COST-NEXT:    li a2, 0
; ZERO-COST-NEXT:    jalr s1
; ZERO-COST-NEXT:  .LBB0_5: # %entry
; ZERO-COST-NEXT:    beqz zero, .LBB0_2
; ZERO-COST-NEXT:  .LBB0_6: # %sw.bb3
; ZERO-COST-NEXT:    ld ra, 24(sp) # 8-byte Folded Reload
; ZERO-COST-NEXT:    ld s0, 16(sp) # 8-byte Folded Reload
; ZERO-COST-NEXT:    ld s1, 8(sp) # 8-byte Folded Reload
; ZERO-COST-NEXT:    addi sp, sp, 32
; ZERO-COST-NEXT:    ret
;
; SOME-COST-LABEL: Perl_sv_setnv:
; SOME-COST:       # %bb.0: # %entry
; SOME-COST-NEXT:    addi sp, sp, -32
; SOME-COST-NEXT:    sd ra, 24(sp) # 8-byte Folded Spill
; SOME-COST-NEXT:    sd s0, 16(sp) # 8-byte Folded Spill
; SOME-COST-NEXT:    bnez zero, .LBB0_5
; SOME-COST-NEXT:  # %bb.1: # %entry
; SOME-COST-NEXT:    li a1, 1
; SOME-COST-NEXT:    bnez a1, .LBB0_6
; SOME-COST-NEXT:  .LBB0_2: # %entry
; SOME-COST-NEXT:    sd a0, 8(sp) # 8-byte Folded Spill
; SOME-COST-NEXT:    beqz zero, .LBB0_4
; SOME-COST-NEXT:  # %bb.3: # %sw.bb34.i
; SOME-COST-NEXT:    sd zero, 8(sp) # 8-byte Folded Spill
; SOME-COST-NEXT:  .LBB0_4: # %Perl_sv_reftype.exit
; SOME-COST-NEXT:    li s0, 0
; SOME-COST-NEXT:    li a0, 0
; SOME-COST-NEXT:    li a1, 0
; SOME-COST-NEXT:    jalr s0
; SOME-COST-NEXT:    li a0, 0
; SOME-COST-NEXT:    ld a1, 8(sp) # 8-byte Folded Reload
; SOME-COST-NEXT:    li a2, 0
; SOME-COST-NEXT:    jalr s0
; SOME-COST-NEXT:  .LBB0_5: # %entry
; SOME-COST-NEXT:    beqz zero, .LBB0_2
; SOME-COST-NEXT:  .LBB0_6: # %sw.bb3
; SOME-COST-NEXT:    ld ra, 24(sp) # 8-byte Folded Reload
; SOME-COST-NEXT:    ld s0, 16(sp) # 8-byte Folded Reload
; SOME-COST-NEXT:    addi sp, sp, 32
; SOME-COST-NEXT:    ret
entry:
  switch i8 0, label %Perl_sv_reftype.exit [
    i8 1, label %sw.bb4
    i8 12, label %sw.bb34.i
    i8 3, label %sw.bb3
    i8 0, label %sw.bb3
  ]

sw.bb3:                                           ; preds = %entry, %entry
  ret void

sw.bb4:                                           ; preds = %entry
  br label %Perl_sv_reftype.exit

sw.bb34.i:                                        ; preds = %entry
  br label %Perl_sv_reftype.exit

Perl_sv_reftype.exit:                             ; preds = %sw.bb34.i, %sw.bb4, %entry
  %retval.0.i = phi ptr [ null, %sw.bb34.i ], [ null, %sw.bb4 ], [ %.str.54.3682, %entry ]
  %call17 = tail call fastcc i64 null(ptr null, i32 0)
  tail call void (ptr, ...) null(ptr null, ptr %retval.0.i, ptr null)
  unreachable
}
