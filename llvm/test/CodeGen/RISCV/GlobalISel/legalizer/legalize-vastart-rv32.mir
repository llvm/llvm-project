# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=riscv32 -run-pass=legalizer %s -o - | FileCheck --check-prefix=RV32 %s

---
name:            test_va_start
tracksRegLiveness: true
fixedStack:
  - { id: 0, size: 4, alignment: 16, isImmutable: true }
stack:
  - { id: 0, size: 4, alignment: 4 }
machineFunctionInfo:
  varArgsFrameIndex: -1
  varArgsSaveSize: 0
body:             |
  bb.1:
    liveins: $x10, $x11, $x12, $x13, $x14, $x15, $x16, $x17

    ; RV32-LABEL: name: test_va_start
    ; RV32: liveins: $x10, $x11, $x12, $x13, $x14, $x15, $x16, $x17
    ; RV32-NEXT: {{  $}}
    ; RV32-NEXT: [[FRAME_INDEX:%[0-9]+]]:_(p0) = G_FRAME_INDEX %stack.0
    ; RV32-NEXT: [[FRAME_INDEX1:%[0-9]+]]:_(p0) = G_FRAME_INDEX %fixed-stack.0
    ; RV32-NEXT: G_STORE [[FRAME_INDEX1]](p0), [[FRAME_INDEX]](p0) :: (store (s32))
    ; RV32-NEXT: PseudoRET
    %8:_(p0) = G_FRAME_INDEX %stack.0
    G_VASTART %8(p0) :: (store (s32))
    PseudoRET

...
