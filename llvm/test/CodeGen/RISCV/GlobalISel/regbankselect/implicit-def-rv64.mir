# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=riscv64 -mattr=+d -run-pass=regbankselect -simplify-mir -verify-machineinstrs %s -o - \
# RUN: | FileCheck -check-prefix=RV64D %s

---
name:            implicit_def_gpr
legalized:       true
body:             |
  bb.0:
    ; RV64D-LABEL: name: implicit_def_gpr
    ; RV64D: [[DEF:%[0-9]+]]:gprb(s64) = G_IMPLICIT_DEF
    ; RV64D-NEXT: [[ADD:%[0-9]+]]:gprb(s64) = G_ADD [[DEF]], [[DEF]]
    ; RV64D-NEXT: $x10 = COPY [[ADD]](s64)
    %0:_(s64) = G_IMPLICIT_DEF
    %1:_(s64) = G_ADD %0, %0
    $x10 = COPY %1(s64)
...
---
name:            implicit_def_copy_gpr
legalized:       true
body:             |
  bb.0:
    ; RV64D-LABEL: name: implicit_def_copy_gpr
    ; RV64D: [[DEF:%[0-9]+]]:gprb(s64) = G_IMPLICIT_DEF
    ; RV64D-NEXT: [[COPY:%[0-9]+]]:gprb(s64) = COPY [[DEF]](s64)
    ; RV64D-NEXT: $x10 = COPY [[COPY]](s64)
    %0:_(s64) = G_IMPLICIT_DEF
    %1:_(s64) = COPY %0(s64)
    $x10 = COPY %1(s64)
...

---
name:            implicit_def_fpr
legalized:       true
body:             |
  bb.0:
    ; RV64D-LABEL: name: implicit_def_fpr
    ; RV64D: [[DEF:%[0-9]+]]:fprb(s64) = G_IMPLICIT_DEF
    ; RV64D-NEXT: [[FADD:%[0-9]+]]:fprb(s64) = G_FADD [[DEF]], [[DEF]]
    ; RV64D-NEXT: $f10_d = COPY [[FADD]](s64)
    %0:_(s64) = G_IMPLICIT_DEF
    %1:_(s64) = G_FADD %0, %0
    $f10_d = COPY %1(s64)
...
---
name:            implicit_def_copy_fpr
legalized:       true
body:             |
  bb.0:
    %0:_(s64) = G_IMPLICIT_DEF
    $f10_d = COPY %0(s64)
...
