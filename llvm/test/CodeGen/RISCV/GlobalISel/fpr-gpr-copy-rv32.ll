; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 3
; RUN: llc -mtriple=riscv32 -global-isel -mattr=+f -target-abi=ilp32 \
; RUN:   -verify-machineinstrs < %s | FileCheck -check-prefix=RV32I %s

; Test copying between FPR32 and GPR on RV32.
; FIXME: This test should be replaced with a more general calling convention
; test once we have more FP implemented.

define float @fadd(float %x, float %y) {
; RV32I-LABEL: fadd:
; RV32I:       # %bb.0:
; RV32I-NEXT:    fmv.w.x fa5, a0
; RV32I-NEXT:    fmv.w.x fa4, a1
; RV32I-NEXT:    fadd.s fa5, fa5, fa4
; RV32I-NEXT:    fmv.x.w a0, fa5
; RV32I-NEXT:    ret
  %a = fadd float %x, %y
  ret float %a
}
