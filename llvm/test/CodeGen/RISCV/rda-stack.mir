# RUN: llc %s -mtriple=riscv64 --passes='print<reaching-def>'  -o - 2>&1 | FileCheck %s

---
name:            test0
tracksRegLiveness: true
stack:
  - { id: 0, name: '', type: default, offset: 0, size: 4, alignment: 4,
      stack-id: default, callee-saved-register: '', callee-saved-restored: true,
      debug-info-variable: '', debug-info-expression: '', debug-info-location: '' }
body:             |
  ; CHECK-LABEL: Reaching definitions for for machine function: test0
  ; CHECK-NEXT: %bb.0:
  ; CHECK-NEXT: %stack.0:{ }
  ; CHECK-NEXT:0: $x10 = LD %stack.0, 0 :: (load (s64))
  ; CHECK-EMPTY:
  ; CHECK-NEXT: implicit $x10:{ 0 }
  ; CHECK-NEXT:1: PseudoRET implicit $x10

  bb.0.entry:
    $x10 = LD %stack.0, 0 :: (load (s64))
    PseudoRET implicit $x10

# COM: ...
# COM: ---
# COM: name:            test1
# COM: tracksRegLiveness: true
# COM: stack:
# COM:   - { id: 0, name: '', type: default, offset: 0, size: 4, alignment: 4,
# COM:       stack-id: default, callee-saved-register: '', callee-saved-restored: true,
# COM:       debug-info-variable: '', debug-info-expression: '', debug-info-location: '' }
# COM:   - { id: 1, name: '', type: default, offset: 0, size: 4, alignment: 4,
# COM:       stack-id: default, callee-saved-register: '', callee-saved-restored: true,
# COM:       debug-info-variable: '', debug-info-expression: '', debug-info-location: '' }
# COM: body:             |
# COM:   ; CHECK-LABEL: Reaching definitions for for machine function: test1
# COM:   ; CHECK-NEXT: %bb.0:
# COM:   ; CHECK-NEXT: %stack.0:{ }
# COM:   ; CHECK-NEXT: 0: $x10 = LD %stack.0, 0 :: (load (s64))
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: %stack.1:{ }
# COM:   ; CHECK-NEXT: 1: $x11 = LD %stack.1, 0 :: (load (s64))
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: $x10:{ 0 }
# COM:   ; CHECK-NEXT: $x11:{ 1 }
# COM:   ; CHECK-NEXT: 2: $x10 = ADD $x10, $x11
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: implicit $x10:{ 2 }
# COM:   ; CHECK-NEXT: 3: PseudoRET implicit $x10
# COM: 
# COM:   bb.0.entry:
# COM:     $x10 = LD %stack.0, 0 :: (load (s64))
# COM:     $x11 = LD %stack.1, 0 :: (load (s64))
# COM:     $x10 = ADD $x10, $x11
# COM:     PseudoRET implicit $x10
# COM: 
# COM: ...
# COM: ---
# COM: name:            test2
# COM: tracksRegLiveness: true
# COM: stack:
# COM:   - { id: 0, name: '', type: default, offset: 0, size: 4, alignment: 4,
# COM:       stack-id: default, callee-saved-register: '', callee-saved-restored: true,
# COM:       debug-info-variable: '', debug-info-expression: '', debug-info-location: '' }
# COM:   - { id: 1, name: '', type: default, offset: 0, size: 4, alignment: 4,
# COM:       stack-id: default, callee-saved-register: '', callee-saved-restored: true,
# COM:       debug-info-variable: '', debug-info-expression: '', debug-info-location: '' }
# COM: body:             |
# COM:   ; CHECK-LABEL: Reaching definitions for for machine function: test2
# COM:   ; CHECK-NEXT: %bb.0:
# COM:   ; CHECK-NEXT: %stack.0:{ }
# COM:   ; CHECK-NEXT: 0: $x10 = LD %stack.0, 0 :: (load (s64))
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: %stack.1:{ }
# COM:   ; CHECK-NEXT: 1: $x11 = LD %stack.1, 0 :: (load (s64))
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: $x10:{ 0 }
# COM:   ; CHECK-NEXT: $x11:{ 1 }
# COM:   ; CHECK-NEXT: 2: $x10 = ADD $x10, $x11
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: $x10:{ 2 }
# COM:   ; CHECK-NEXT: %stack.0:{ }
# COM:   ; CHECK-NEXT: 3: SD $x10, %stack.0, 0 :: (store (s64))
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: %stack.0:{ 3 }
# COM:   ; CHECK-NEXT: 4: $x10 = LD %stack.0, 0 :: (load (s64))
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: implicit $x10:{ 4 }
# COM:   ; CHECK-NEXT: 5: PseudoRET implicit $x10
# COM: 
# COM:   bb.0.entry:
# COM:     $x10 = LD %stack.0, 0 :: (load (s64))
# COM:     $x11 = LD %stack.1, 0 :: (load (s64))
# COM:     $x10 = ADD $x10, $x11
# COM:     SD $x10, %stack.0, 0 :: (store (s64))
# COM:     $x10 = LD %stack.0, 0 :: (load (s64))
# COM:     PseudoRET implicit $x10
# COM: 
# COM: ...
# COM: ---
# COM: name:            test3
# COM: tracksRegLiveness: true
# COM: stack:
# COM:   - { id: 0, name: '', type: default, offset: 0, size: 4, alignment: 4,
# COM:       stack-id: default, callee-saved-register: '', callee-saved-restored: true,
# COM:       debug-info-variable: '', debug-info-expression: '', debug-info-location: '' }
# COM: body:             |
# COM:   ; CHECK-LABEL: Reaching definitions for for machine function: test3
# COM:   ; CHECK-NEXT: %bb.0:
# COM:   ; CHECK-NEXT: $x10:{ livein }
# COM:   ; CHECK-NEXT: $x0:{ }
# COM:   ; CHECK-NEXT: 0: BEQ $x10, $x0, %bb.2
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: %bb.1:
# COM:   ; CHECK-NEXT: $x10:{ livein }
# COM:   ; CHECK-NEXT: 1: $x10 = ADDI $x10, 1
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: $x10:{ 1 }
# COM:   ; CHECK-NEXT: %stack.0:{ }
# COM:   ; CHECK-NEXT: 2: SD $x10, %stack.0, 0 :: (store (s64))
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: 3: PseudoBR %bb.3
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: %bb.2:
# COM:   ; CHECK-NEXT: $x10:{ livein }
# COM:   ; CHECK-NEXT: 4: $x10 = ADDI $x10, 2
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: $x10:{ 4 }
# COM:   ; CHECK-NEXT: %stack.0:{ }
# COM:   ; CHECK-NEXT: 5: SD $x10, %stack.0, 0 :: (store (s64))
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: %bb.3:
# COM:   ; CHECK-NEXT: %stack.0:{ 2 5 }
# COM:   ; CHECK-NEXT: 6: $x10 = LD %stack.0, 0 :: (load (s64))
# COM:   ; CHECK-EMPTY: 
# COM:   ; CHECK-NEXT: implicit $x10:{ 6 }
# COM:   ; CHECK-NEXT: 7: PseudoRET implicit $x10
# COM: 
# COM:   bb.0.entry:
# COM:     liveins: $x10
# COM:     BEQ $x10, $x0, %bb.2
# COM: 
# COM:   bb.1:
# COM:     liveins: $x10
# COM:     $x10 = ADDI $x10, 1
# COM:     SD $x10, %stack.0, 0 :: (store (s64))
# COM:     PseudoBR %bb.3
# COM: 
# COM:   bb.2:
# COM:     liveins: $x10
# COM:     $x10 = ADDI $x10, 2
# COM:     SD $x10, %stack.0, 0 :: (store (s64))
# COM: 
# COM:   bb.3:
# COM:     $x10 = LD %stack.0, 0 :: (load (s64))
# COM:     PseudoRET implicit $x10
# COM: ...
# COM: ---
# COM: name:            test4
# COM: tracksRegLiveness: true
# COM: fixedStack:
# COM:   - { id: 0, type: default, offset: 0, size: 4, alignment: 16,
# COM:       isImmutable: true, isAliased: false }
# COM: stack:
# COM:   - { id: 0, name: '', type: default, offset: 0, size: 4, alignment: 4,
# COM:       stack-id: default, callee-saved-register: '', callee-saved-restored: true,
# COM:       debug-info-variable: '', debug-info-expression: '', debug-info-location: '' }
# COM:   - { id: 1, name: '', type: default, offset: 0, size: 4, alignment: 4,
# COM:       stack-id: default, callee-saved-register: '', callee-saved-restored: true,
# COM:       debug-info-variable: '', debug-info-expression: '', debug-info-location: '' }
# COM: body:             |
# COM:   ; CHECK-LABEL: Reaching definitions for for machine function: test4
# COM:   ; CHECK-NEXT: %bb.0:
# COM:   ; CHECK-NEXT: $x10:{ livein }
# COM:   ; CHECK-NEXT: %stack.0:{ }
# COM:   ; CHECK-NEXT: 0: SD $x10, %stack.0, 0 :: (store (s64))
# COM:   ; CHECK-EMPTY:
# COM:   ; CHECK-NEXT: $x11:{ livein }
# COM:   ; CHECK-NEXT: %stack.0:{ 0 }
# COM:   ; CHECK-NEXT: 1: SD $x11, %stack.0, 0 :: (store (s64))
# COM:   ; CHECK-EMPTY:
# COM:   ; CHECK-NEXT: $x10:{ livein }
# COM:   ; CHECK-NEXT: %stack.1:{ }
# COM:   ; CHECK-NEXT: 2: SD $x10, %stack.1, 0 :: (store (s64))
# COM:   ; CHECK-EMPTY:
# COM:   ; CHECK-NEXT: $x11:{ livein }
# COM:   ; CHECK-NEXT: %stack.1:{ 2 }
# COM:   ; CHECK-NEXT: 3: SD $x11, %stack.1, 0 :: (store (s64))
# COM:   ; CHECK-EMPTY:
# COM:   ; CHECK-NEXT: 4: PseudoRET
# COM:   bb.0.entry:
# COM:     liveins: $x10, $x11
# COM:     SD $x10, %stack.0, 0 :: (store (s64))
# COM:     SD $x11, %stack.0, 0 :: (store (s64))
# COM:     SD $x10, %stack.1, 0 :: (store (s64))
# COM:     SD $x11, %stack.1, 0 :: (store (s64))
# COM:     PseudoRET
# COM: ...
