# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 5
# RUN: llc %s -o - -mtriple=riscv64 -mattr=+v -run-pass=riscv-vector-peephole -verify-machineinstrs | FileCheck %s

# Take into account that the masked vcpop pseudo doesn't have a passthru
---
name: vcpop.m
body: |
  bb.0:
    ; CHECK-LABEL: name: vcpop.m
    ; CHECK: %allones:vr = PseudoVMSET_M_B64 $noreg, 0 /* e8 */
    ; CHECK-NEXT: $v0 = COPY %allones
    ; CHECK-NEXT: [[PseudoVCPOP_M_B64_:%[0-9]+]]:gpr = PseudoVCPOP_M_B64 $noreg, 42, 0 /* e8 */
    %allones:vr = PseudoVMSET_M_B64 $noreg, 0
    $v0 = COPY %allones
    %2:gpr = PseudoVCPOP_M_B64_MASK $noreg, $v0, 42, 0
...
