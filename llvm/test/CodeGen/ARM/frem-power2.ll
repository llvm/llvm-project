; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 4
; RUN: llc -mtriple=thumbv8m.main-none-eabi %s -o - | FileCheck %s --check-prefix=CHECK-SOFT
; RUN: llc -mtriple=thumbv8m.main-none-eabi -mattr=+fp-armv8 %s -o - | FileCheck %s --check-prefix=CHECK-FP
; RUN: llc -mtriple=thumbv8m.main-none-eabi -mattr=+fp-armv8,+slowfpvfmx %s -o - | FileCheck %s --check-prefix=CHECK-M33

define float @frem4(float %x) {
; CHECK-SOFT-LABEL: frem4:
; CHECK-SOFT:       @ %bb.0: @ %entry
; CHECK-SOFT-NEXT:    .save {r7, lr}
; CHECK-SOFT-NEXT:    push {r7, lr}
; CHECK-SOFT-NEXT:    mov.w r1, #1082130432
; CHECK-SOFT-NEXT:    bl fmodf
; CHECK-SOFT-NEXT:    pop {r7, pc}
;
; CHECK-FP-LABEL: frem4:
; CHECK-FP:       @ %bb.0: @ %entry
; CHECK-FP-NEXT:    mov.w r1, #1082130432
; CHECK-FP-NEXT:    b fmodf
;
; CHECK-M33-LABEL: frem4:
; CHECK-M33:       @ %bb.0: @ %entry
; CHECK-M33-NEXT:    mov.w r1, #1082130432
; CHECK-M33-NEXT:    b fmodf
entry:
  %fmod = frem float %x, 4.0
  ret float %fmod
}

define float @frem4_nsz(float %x) {
; CHECK-SOFT-LABEL: frem4_nsz:
; CHECK-SOFT:       @ %bb.0: @ %entry
; CHECK-SOFT-NEXT:    .save {r7, lr}
; CHECK-SOFT-NEXT:    push {r7, lr}
; CHECK-SOFT-NEXT:    mov.w r1, #1082130432
; CHECK-SOFT-NEXT:    bl fmodf
; CHECK-SOFT-NEXT:    pop {r7, pc}
;
; CHECK-FP-LABEL: frem4_nsz:
; CHECK-FP:       @ %bb.0: @ %entry
; CHECK-FP-NEXT:    mov.w r1, #1082130432
; CHECK-FP-NEXT:    b fmodf
;
; CHECK-M33-LABEL: frem4_nsz:
; CHECK-M33:       @ %bb.0: @ %entry
; CHECK-M33-NEXT:    mov.w r1, #1082130432
; CHECK-M33-NEXT:    b fmodf
entry:
  %fmod = frem nsz float %x, 4.0
  ret float %fmod
}
