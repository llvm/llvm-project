; RUN: llc -mtriple=arm-eabi -mattr=+v5t %s -o - | FileCheck %s -check-prefixes=CHECK,INLINE
; RUN: llc -mtriple=arm-eabi %s -o - | FileCheck %s -check-prefixes=CHECK,LIBCALL

declare i32 @llvm.ctlz.i32(i32, i1)

define i32 @test(i32 %x) {
; CHECK-LABEL: test
; INLINE: clz r0, r0
; LIBCALL: b __clzsi2
        %tmp.1 = call i32 @llvm.ctlz.i32( i32 %x, i1 true )
        ret i32 %tmp.1
}

define i32 @no_undef_zero(i32 %x) {
; INLINE-LABEL: no_undef_zero:
; INLINE:       @ %bb.0:
; INLINE-NEXT:    cmp r0, #0
; INLINE-NEXT:    clzne r0, r0
; INLINE-NEXT:    moveq r0, #32
; INLINE-NEXT:    bx lr
;
; LIBCALL-LABEL: no_undef_zero:
; LIBCALL:       @ %bb.0:
; LIBCALL-NEXT:    cmp r0, #0
; LIBCALL-NEXT:    moveq r0, #32
; LIBCALL-NEXT:    moveq pc, lr
; LIBCALL-NEXT:  .LBB1_1: @ %cond.false
; LIBCALL-NEXT:    .save {r11, lr}
; LIBCALL-NEXT:    push {r11, lr}
; LIBCALL-NEXT:    bl __clzsi2
; LIBCALL-NEXT:    pop {r11, lr}
; LIBCALL-NEXT:    mov pc, lr
        %tmp.1 = call i32 @llvm.ctlz.i32( i32 %x, i1 false )
        ret i32 %tmp.1
}
;; NOTE: These prefixes are unused and the list is autogenerated. Do not add tests below this line:
; CHECK: {{.*}}
