# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -o - %s -mtriple=armv7-unknown-linux-gnu -verify-machineinstrs -run-pass=arm-pseudo | FileCheck %s
---
name: func
tracksRegLiveness: true
body: |
  bb.0:
    liveins: $r0_r1, $r4_r5, $r3, $lr
    ; CHECK-LABEL: name: func
    ; CHECK: successors: %bb.1(0x80000000)
    ; CHECK: liveins: $r0_r1, $r4_r5, $r3, $lr
    ; CHECK: .1:
    ; CHECK: successors: %bb.3(0x40000000), %bb.2(0x40000000)
    ; CHECK: liveins: $r4_r5, $r3
    ; CHECK: $r0_r1 = LDREXD $r3, 14 /* CC::al */, $noreg
    ; CHECK: CMPrr killed $r0, $r4, 14 /* CC::al */, $noreg, implicit-def $cpsr
    ; CHECK: CMPrr killed $r1, $r5, 0 /* CC::eq */, killed $cpsr, implicit-def $cpsr
    ; CHECK: Bcc %bb.3, 1 /* CC::ne */, killed $cpsr
    ; CHECK: .2:
    ; CHECK: successors: %bb.1(0x40000000), %bb.3(0x40000000)
    ; CHECK: liveins: $r4_r5, $r3
    ; CHECK: early-clobber $r2 = STREXD $r4_r5, $r3, 14 /* CC::al */, $noreg
    ; CHECK: CMPri killed $r2, 0, 14 /* CC::al */, $noreg, implicit-def $cpsr
    ; CHECK: Bcc %bb.1, 1 /* CC::ne */, killed $cpsr
    ; CHECK: .3:
    dead early-clobber renamable $r0_r1, dead early-clobber renamable $r2 = CMP_SWAP_64 killed renamable $r3, killed renamable $r4_r5, renamable $r4_r5 :: (volatile load store monotonic monotonic 8)
...
