
# After IRTranslator
# Machine code for function foo: IsSSA, TracksLiveness

bb.1.entry:
  %6:type(s64) = OpTypePointer 5, %5:type(s64)
  %7:type(s64) = OpTypeBool
  %9:type(s64) = OpTypeVoid
  %10:type(s64) = OpTypeFunction %9:type(s64), %6:type(s64), %6:type(s64), %5:type(s64), %5:type(s64), %7:type(s64)
  %5:type(s64) = OpTypeInt 32, 0
  OpName %0:pid(p1), 1684107116, 1768910943, 1919251566, 0
  OpName %1:pid(p1), 1919906931, 1869635429, 1702129257, 114
  OpName %2:iid(s32), 1634100580, 1601465461, 1970037110, 101
  OpName %3:iid(s32), 1919906931, 1651466085, 1952671082, 0
  OpName %4:iid(s1), 1684370032, 1952539497, 101
  OpDecorate %4:iid(s1), 38, 0
  %8:iid(s64) = OpFunction %9:type(s64), 0, %10:type(s64)
  %0:pid(p1) = OpFunctionParameter %6:type(s64)
  %1:pid(p1) = OpFunctionParameter %6:type(s64)
  %2:iid(s32) = OpFunctionParameter %5:type(s64)
  %3:iid(s32) = OpFunctionParameter %5:type(s64)
  %4:iid(s1) = OpFunctionParameter %7:type(s64)
  OpName %8:iid(s64), 7303014
  OpDecorate %8:iid(s64), 41, 7303014, 0
  %13:iid(s32) = G_CONSTANT i32 0
  G_INTRINSIC_W_SIDE_EFFECTS intrinsic(@llvm.spv.assign.ptr.type), %0:pid(p1), <0x63fe33472928>, 1
  OpPredicatedLoadINTEL %0:pid(p1), %4:iid(s1), %2:iid(s32)
  G_INTRINSIC_W_SIDE_EFFECTS intrinsic(@llvm.spv.assign.type), %11:iid(s32), <0x63fe33472928>
  OpPredicatedLoadINTEL %0:pid(p1), %4:iid(s1), %2:iid(s32), %13:iid(s32)
  G_INTRINSIC_W_SIDE_EFFECTS intrinsic(@llvm.spv.assign.type), %12:iid(s32), <0x63fe33472928>
  G_INTRINSIC_W_SIDE_EFFECTS intrinsic(@llvm.spv.assign.ptr.type), %1:pid(p1), <0x63fe33472928>, 1
  OpPredicatedStoreINTEL %1:pid(p1), %3:iid(s32), %4:iid(s1)
  OpPredicatedStoreINTEL %1:pid(p1), %3:iid(s32), %4:iid(s1), %13:iid(s32)
  OpReturn

# End machine code for function foo.

*** Bad machine code: Too few operands ***
- function:    foo
- basic block: %bb.1 entry (0x63fe334751e8)
- instruction: OpPredicatedLoadINTEL %0:pid(p1), %4:iid(s1), %2:iid(s32)
4 operands expected, but 3 given.

*** Bad machine code: Explicit definition marked as use ***
- function:    foo
- basic block: %bb.1 entry (0x63fe334751e8)
- instruction: OpPredicatedLoadINTEL %0:pid(p1), %4:iid(s1), %2:iid(s32)
- operand 0:   %0:pid

*** Bad machine code: Reading virtual register without a def ***
- function:    foo
- basic block: %bb.1 entry (0x63fe334751e8)
- instruction: G_INTRINSIC_W_SIDE_EFFECTS intrinsic(@llvm.spv.assign.type), %11:iid(s32), <0x63fe33472928>
- operand 1:   %11:iid

*** Bad machine code: Explicit definition marked as use ***
- function:    foo
- basic block: %bb.1 entry (0x63fe334751e8)
- instruction: OpPredicatedLoadINTEL %0:pid(p1), %4:iid(s1), %2:iid(s32), %13:iid(s32)
- operand 0:   %0:pid

*** Bad machine code: Reading virtual register without a def ***
- function:    foo
- basic block: %bb.1 entry (0x63fe334751e8)
- instruction: G_INTRINSIC_W_SIDE_EFFECTS intrinsic(@llvm.spv.assign.type), %12:iid(s32), <0x63fe33472928>
- operand 1:   %12:iid

*** Bad machine code: Extra explicit operand on non-variadic instruction ***
- function:    foo
- basic block: %bb.1 entry (0x63fe334751e8)
- instruction: OpPredicatedStoreINTEL %1:pid(p1), %3:iid(s32), %4:iid(s1), %13:iid(s32)
- operand 3:   %13:iid
LLVM ERROR: Found 6 machine code errors.
PLEASE submit a bug report to https://github.com/llvm/llvm-project/issues/ and include the crash backtrace and instructions to reproduce the bug.
Stack dump:
0.	Program arguments: llc -O0 -verify-machineinstrs -mtriple=spirv64-unknown-unknown --spirv-ext=+SPV_INTEL_predicated_io predicated_io_generic.ll -o 1
1.	Running pass 'Function Pass Manager' on module 'predicated_io_generic.ll'.
2.	Running pass 'Verify generated machine code' on function '@foo'
 #0 0x000063fe28fe129e llvm::sys::PrintStackTrace(llvm::raw_ostream&, int) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/Support/Unix/Signals.inc:834:22
 #1 0x000063fe28fe171f PrintStackTraceSignalHandler(void*) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/Support/Unix/Signals.inc:917:1
 #2 0x000063fe28fde897 llvm::sys::RunSignalHandlers() /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/Support/Signals.cpp:104:20
 #3 0x000063fe28fe0adb SignalHandler(int, siginfo_t*, void*) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/Support/Unix/Signals.inc:426:14
 #4 0x00007fd7bc445320 (/lib/x86_64-linux-gnu/libc.so.6+0x45320)
 #5 0x00007fd7bc49eb1c __pthread_kill_implementation ./nptl/pthread_kill.c:44:76
 #6 0x00007fd7bc49eb1c __pthread_kill_internal ./nptl/pthread_kill.c:78:10
 #7 0x00007fd7bc49eb1c pthread_kill ./nptl/pthread_kill.c:89:10
 #8 0x00007fd7bc44526e raise ./signal/../sysdeps/posix/raise.c:27:6
 #9 0x00007fd7bc4288ff abort ./stdlib/abort.c:81:7
#10 0x000063fe28ef122a llvm::report_fatal_error(llvm::Twine const&, bool) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/Support/ErrorHandling.cpp:137:9
#11 0x000063fe279b127e (anonymous namespace)::MachineVerifier::ReportedErrors::~ReportedErrors() /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/CodeGen/MachineVerifier.cpp:262:33
#12 0x000063fe279b1416 (anonymous namespace)::MachineVerifier::~MachineVerifier() /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/CodeGen/MachineVerifier.cpp:102:8
#13 0x000063fe279b155c (anonymous namespace)::MachineVerifierLegacyPass::runOnMachineFunction(llvm::MachineFunction&) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/CodeGen/MachineVerifier.cpp:390:12
#14 0x000063fe27814feb llvm::MachineFunctionPass::runOnFunction(llvm::Function&) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/CodeGen/MachineFunctionPass.cpp:108:30
#15 0x000063fe2813b39a llvm::FPPassManager::runOnFunction(llvm::Function&) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/IR/LegacyPassManager.cpp:1398:20
#16 0x000063fe2813b670 llvm::FPPassManager::runOnModule(llvm::Module&) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/IR/LegacyPassManager.cpp:1444:13
#17 0x000063fe2813bacf (anonymous namespace)::MPPassManager::runOnModule(llvm::Module&) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/IR/LegacyPassManager.cpp:1513:20
#18 0x000063fe28136a5a llvm::legacy::PassManagerImpl::run(llvm::Module&) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/IR/LegacyPassManager.cpp:531:13
#19 0x000063fe2813c3c5 llvm::legacy::PassManager::run(llvm::Module&) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/lib/IR/LegacyPassManager.cpp:1641:1
#20 0x000063fe2416b360 compileModule(char**, llvm::LLVMContext&) /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/tools/llc/llc.cpp:761:34
#21 0x000063fe24168941 main /localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/llvm/tools/llc/llc.cpp:404:35
#22 0x00007fd7bc42a1ca __libc_start_call_main ./csu/../sysdeps/nptl/libc_start_call_main.h:74:3
#23 0x00007fd7bc42a28b call_init ./csu/../csu/libc-start.c:128:20
#24 0x00007fd7bc42a28b __libc_start_main ./csu/../csu/libc-start.c:347:5
#25 0x000063fe24167425 _start (/localdisk3/yixingzh/add_support_spv_intel_predicated_io/llvm-project/build/bin/llc+0xbbc425)
