; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 6
; RUN: llc -verify-machineinstrs -O0 -mtriple=spirv64-unknown-unknown %s -o - | FileCheck %s
; RUN: %if spirv-tools %{ llc -O0 -mtriple=spirv64-unknown-unknown %s -o - -filetype=obj | spirv-val %}
; RUN: llc -verify-machineinstrs -O0 -mtriple=spirv32-unknown-unknown %s -o - | FileCheck %s
; RUN: %if spirv-tools %{ llc -O0 -mtriple=spirv32-unknown-unknown %s -o - -filetype=obj | spirv-val %}

@ui = common dso_local addrspace(1) global i32 0, align 4

define dso_local spir_func void @atomicrmw_uinc_udec_wrap() local_unnamed_addr {
; CHECK-LABEL: atomicrmw_uinc_udec_wrap
; CHECK:       %20 = OpFunction %7 None %8 ; -- Begin function atomicrmw_uinc_udec_wrap
; CHECK-NEXT:    %2 = OpLabel
; CHECK-NEXT:    %21 = OpBitcast %12 %19
; CHECK-NEXT:    %22 = OpBitcast %12 %19
; CHECK-NEXT:    %23 = OpLoad %9 %19 Aligned 4
; CHECK-NEXT:    OpBranch %3
; CHECK-NEXT:    %3 = OpLabel
; CHECK-NEXT:    %24 = OpPhi %9 %23 %2 %25 %3
; CHECK-NEXT:    %26 = OpIAdd %9 %24 %17
; CHECK-NEXT:    %27 = OpUGreaterThanEqual %10 %24 %16
; CHECK-NEXT:    %28 = OpSelect %9 %27 %18 %26
; CHECK-NEXT:    %29 = OpBitcast %13 %21
; CHECK-NEXT:    %30 = OpAtomicCompareExchange %9 %29 %18 %15 %15 %28 %24
; CHECK-NEXT:    %31 = OpIEqual %10 %30 %24
; CHECK-NEXT:    %32 = OpCompositeInsert %11 %30 %14 0
; CHECK-NEXT:    %33 = OpCompositeInsert %11 %31 %32 1
; CHECK-NEXT:    %34 = OpCompositeExtract %10 %33 1
; CHECK-NEXT:    %25 = OpCompositeExtract %9 %33 0
; CHECK-NEXT:    OpBranchConditional %34 %4 %3
; CHECK-NEXT:    %4 = OpLabel
; CHECK-NEXT:    %35 = OpLoad %9 %19 Aligned 4
; CHECK-NEXT:    OpBranch %5
; CHECK-NEXT:    %5 = OpLabel
; CHECK-NEXT:    %36 = OpPhi %9 %35 %4 %37 %5
; CHECK-NEXT:    %38 = OpISub %9 %36 %17
; CHECK-NEXT:    %39 = OpIEqual %10 %36 %18
; CHECK-NEXT:    %40 = OpUGreaterThan %10 %36 %16
; CHECK-NEXT:    %41 = OpLogicalOr %10 %39 %40
; CHECK-NEXT:    %42 = OpSelect %9 %41 %16 %38
; CHECK-NEXT:    %43 = OpBitcast %13 %22
; CHECK-NEXT:    %44 = OpAtomicCompareExchange %9 %43 %18 %15 %15 %42 %36
; CHECK-NEXT:    %45 = OpIEqual %10 %44 %36
; CHECK-NEXT:    %46 = OpCompositeInsert %11 %44 %14 0
; CHECK-NEXT:    %47 = OpCompositeInsert %11 %45 %46 1
; CHECK-NEXT:    %48 = OpCompositeExtract %10 %47 1
; CHECK-NEXT:    %37 = OpCompositeExtract %9 %47 0
; CHECK-NEXT:    OpBranchConditional %48 %6 %5
; CHECK-NEXT:    %6 = OpLabel
; CHECK-NEXT:    OpReturn
; CHECK-NEXT:    OpFunctionEnd
entry:
  %0 = atomicrmw uinc_wrap ptr addrspace(1) @ui, i32 42 seq_cst
  %1 = atomicrmw udec_wrap ptr addrspace(1) @ui, i32 42 seq_cst
  ret void
}
