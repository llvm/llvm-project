# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 5
# RUN: not llc -mtriple=amdgcn -mcpu=gfx1200 -run-pass none -filetype=null %s 2>&1 | FileCheck %s

--- |
  define void @expect_id(ptr %ptr, float %data) #0 {
    %1 = atomicrmw fadd ptr %ptr, float %data syncscope("agent") seq_cst, align 4, !noalias.addrspace !0
    ret void
  }

  attributes #0 = { "target-cpu"="gfx1200" }

  !0 = !{i32 5, i32 6}
...

---
name: expect_id

body: |
  bb.1 (%ir-block.0):
    liveins: $vgpr0, $vgpr1, $vgpr2

    ; CHECK: expected metadata id after '!'
    %2:vgpr_32 = COPY $vgpr0
    %3:vgpr_32 = COPY $vgpr1
    %0:vreg_64 = REG_SEQUENCE %2, %subreg.sub0, %3, %subreg.sub1
    %1:vgpr_32 = COPY $vgpr2
    FLAT_ATOMIC_ADD_F32 %0, %1, 0, 0, implicit $exec, implicit $flat_scr :: (load store syncscope("agent") seq_cst (s32) on %ir.ptr, !noalias.addrspace !!)
    S_ENDPGM 0
...
