; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mattr=-sign-ext | FileCheck %s

target triple = "wasm32-unknown-unknown"

define i8 @ashr(i8 %v, i8 %x) {
; CHECK-LABEL: ashr:
; CHECK:         .functype ashr (i32, i32) -> (i32)
; CHECK-NEXT:  # %bb.0:
; CHECK-NEXT:    local.get 0
; CHECK-NEXT:    i32.const 24
; CHECK-NEXT:    i32.shl
; CHECK-NEXT:    i32.const 24
; CHECK-NEXT:    i32.shr_s
; CHECK-NEXT:    local.get 1
; CHECK-NEXT:    i32.const 255
; CHECK-NEXT:    i32.and
; CHECK-NEXT:    i32.shr_s
; CHECK-NEXT:    # fallthrough-return
  %a = ashr i8 %v, %x
  ret i8 %a
}
