; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=wasm32 -mattr=+simd128 | FileCheck %s

;; Regression test for a bug in which BUILD_VECTOR nodes with large unsigned
;; lane constants were not properly selected.
define <4 x i8> @test(<4 x i8> %0) {
; CHECK-LABEL: test:
; CHECK:         .functype test (v128) -> (v128)
; CHECK-NEXT:  # %bb.0:
; CHECK-NEXT:    v128.const 255, 17, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
; CHECK-NEXT:    # fallthrough-return
  %V1 = or <4 x i8> <i8 255, i8 255, i8 255, i8 255>, %0
  %V2 = insertelement <4 x i8> %V1, i8 17, i32 1
  ret <4 x i8> %V2
}
