; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 6
; RUN: llc < %s -mtriple=wasm32-unknown-unknown -mattr=+simd128,+relaxed-simd | FileCheck %s

; Test that fminnum and fminimumnum get transformed to relaxed_min

target triple = "wasm32"

define <4 x float> @test_minnum_f32x4(<4 x float> %a, <4 x float> %b) {
; CHECK-LABEL: test_minnum_f32x4:
; CHECK:         .functype test_minnum_f32x4 (v128, v128) -> (v128)
; CHECK-NEXT:  # %bb.0:
; CHECK-NEXT:    local.get 0
; CHECK-NEXT:    local.get 1
; CHECK-NEXT:    f32x4.relaxed_min
; CHECK-NEXT:    # fallthrough-return
  %result = call <4 x float> @llvm.minnum.v4f32(<4 x float> %a, <4 x float> %b)
  ret <4 x float> %result
}

define <4 x float> @test_minimumnum_f32x4(<4 x float> %a, <4 x float> %b) {
; CHECK-LABEL: test_minimumnum_f32x4:
; CHECK:         .functype test_minimumnum_f32x4 (v128, v128) -> (v128)
; CHECK-NEXT:  # %bb.0:
; CHECK-NEXT:    local.get 0
; CHECK-NEXT:    local.get 1
; CHECK-NEXT:    f32x4.relaxed_min
; CHECK-NEXT:    # fallthrough-return
  %result = call <4 x float> @llvm.minimumnum.v4f32(<4 x float> %a, <4 x float> %b)
  ret <4 x float> %result
}

define <2 x double> @test_minnum_f64x2(<2 x double> %a, <2 x double> %b) {
; CHECK-LABEL: test_minnum_f64x2:
; CHECK:         .functype test_minnum_f64x2 (v128, v128) -> (v128)
; CHECK-NEXT:  # %bb.0:
; CHECK-NEXT:    local.get 0
; CHECK-NEXT:    local.get 1
; CHECK-NEXT:    f64x2.relaxed_min
; CHECK-NEXT:    # fallthrough-return
  %result = call <2 x double> @llvm.minnum.v2f64(<2 x double> %a, <2 x double> %b)
  ret <2 x double> %result
}

define <2 x double> @test_minimumnum_f64x2(<2 x double> %a, <2 x double> %b) {
; CHECK-LABEL: test_minimumnum_f64x2:
; CHECK:         .functype test_minimumnum_f64x2 (v128, v128) -> (v128)
; CHECK-NEXT:  # %bb.0:
; CHECK-NEXT:    local.get 0
; CHECK-NEXT:    local.get 1
; CHECK-NEXT:    f64x2.relaxed_min
; CHECK-NEXT:    # fallthrough-return
  %result = call <2 x double> @llvm.minimumnum.v2f64(<2 x double> %a, <2 x double> %b)
  ret <2 x double> %result
}

declare <4 x float> @llvm.minnum.v4f32(<4 x float>, <4 x float>)
declare <4 x float> @llvm.fminimumnum.v4f32(<4 x float>, <4 x float>)
declare <2 x double> @llvm.minnum.v2f64(<2 x double>, <2 x double>)
declare <2 x double> @llvm.fminimumnum.v2f64(<2 x double>, <2 x double>)
