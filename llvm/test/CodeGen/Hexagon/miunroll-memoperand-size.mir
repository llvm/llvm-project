# RUN: llc -mtriple=hexagon-unknown-elf -run-pass=machine-unroller %s -o - | FileCheck %s

# Test that the machine unroller updates the memoperand with 'unknown size'
# instead of using MAX_INT, which doesn't work anymore.

# CHECK: S2_storeri_io %1, 0, %{{[0-9]+}} :: (store (s32)
# CHECK: S2_storeri_io %1, 0, %{{[0-9]+}} :: (store unknown-size

...
---
name:            test
alignment:       4
tracksRegLiveness: true
body:             |
  bb.0:
    successors: %bb.2(0x80000000)

    %2:intregs = A2_tfrsi 0
    %3:intregs = IMPLICIT_DEF
    %5:intregs = IMPLICIT_DEF
    %6:intregs = COPY %5
    J2_loop0r %bb.2, %6, implicit-def $lc0, implicit-def $sa0, implicit-def $usr
    J2_jump %bb.2, implicit-def dead $pc

  bb.1:
    successors:

  bb.2:
    successors: %bb.2(0x7fffffff), %bb.1(0x00000001)

    %0:intregs = PHI %2, %bb.0, %1, %bb.2
    %1:intregs = A2_addi %0, 1
    S2_storeri_io %3, 0, %1 :: (store 4 into `i32* undef`)
    ENDLOOP0 %bb.2, implicit-def $pc, implicit-def $lc0, implicit $sa0, implicit $lc0
    J2_jump %bb.1, implicit-def dead $pc

...
