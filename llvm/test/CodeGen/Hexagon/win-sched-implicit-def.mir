# RUN: llc -mtriple=hexagon -run-pass pipeliner %s -o - | FileCheck %s
# REQUIRES: asserts
# Ensure WindowScheduler copies IMPLICIT_DEF into the triple-MBB region
# so LiveIntervals no longer hits LR.verify()
# CHECK: foo

--- |
  define void @foo() {
    ret void
  }
...

---
name:            foo
tracksRegLiveness: true

body:             |
  bb.0:
    successors: %bb.1(0x60000000), %bb.2(0x20000000)
    liveins: $r0, $r1, $r2

    %bb0_e75bf3f0bba6b3ae__1:hvxqr = IMPLICIT_DEF
    %bb0_e75bf3f0bba6b3ae__2:intregslow8 = IMPLICIT_DEF
    %bb0_e75bf3f0bba6b3ae__3:predregs = IMPLICIT_DEF
    %bb0_e75bf3f0bba6b3ae__4:intregs = IMPLICIT_DEF
    J2_jumpf undef %bb0_e75bf3f0bba6b3ae__3, %bb.2, implicit-def $pc
    J2_jump %bb.1, implicit-def $pc

  bb.1:
    successors: %bb.4(0x55555555), %bb.2(0x2aaaaaab)

    J2_jumpt undef %bb0_e75bf3f0bba6b3ae__3, %bb.4, implicit-def $pc
    J2_jump %bb.2, implicit-def $pc

  bb.2:
    successors: %bb.3(0x80000000)

    J2_loop0r %bb.3, undef %bb0_e75bf3f0bba6b3ae__4, implicit-def $lc0, implicit-def $sa0, implicit-def $usr
    J2_jump %bb.3, implicit-def $pc

  bb.3 (machine-block-address-taken):
    successors: %bb.4(0x04000000), %bb.3(0x7c000000)

    %bb3_e75bf3f0bba6b3ae__1:hvxwr = IMPLICIT_DEF
    %bb3_d787b15822067ced__1:hvxvr = V6_vL32Ub_ai undef %bb0_e75bf3f0bba6b3ae__4, 0 :: (load (s1024), align 8)
    %bb3_734170929685adbc__1:hvxvr = V6_vlalignb undef %bb3_e75bf3f0bba6b3ae__1.vsub_lo, undef %bb3_d787b15822067ced__1, undef %bb0_e75bf3f0bba6b3ae__2
    %bb3_ba5a00bd10a880fa__1:hvxvr = V6_vlalignb %bb3_e75bf3f0bba6b3ae__1.vsub_lo, undef %bb3_e75bf3f0bba6b3ae__1.vsub_hi, undef %bb0_e75bf3f0bba6b3ae__2
    V6_vS32b_qpred_ai undef %bb0_e75bf3f0bba6b3ae__1, undef %bb0_e75bf3f0bba6b3ae__4, 0, %bb3_ba5a00bd10a880fa__1 :: (store (s1024))
    ENDLOOP0 %bb.3, implicit-def $pc, implicit-def $lc0, implicit $sa0, implicit $lc0
    J2_jump %bb.4, implicit-def $pc

  bb.4:
    PS_jmpret $r31, implicit-def $pc
...
