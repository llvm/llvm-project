; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc -O0 -mtriple=aarch64-unknown-linux-gnu < %s | FileCheck %s

; GlobalISel cannot legalize this phi, so we fall back to SDAG.
define void @test() nounwind {
; CHECK-LABEL: test:
; CHECK:       // %bb.0: // %entry
; CHECK-NEXT:    sub sp, sp, #16 // =16
; CHECK-NEXT:    mov x1, xzr
; CHECK-NEXT:    mov x0, x1
; CHECK-NEXT:    str x1, [sp] // 8-byte Folded Spill
; CHECK-NEXT:    str x0, [sp, #8] // 8-byte Folded Spill
; CHECK-NEXT:    b .LBB0_1
; CHECK-NEXT:  .LBB0_1: // %loop
; CHECK-NEXT:    // =>This Inner Loop Header: Depth=1
; CHECK-NEXT:    ldr x0, [sp, #8] // 8-byte Folded Reload
; CHECK-NEXT:    ldr x1, [sp] // 8-byte Folded Reload
; CHECK-NEXT:    str x1, [sp] // 8-byte Folded Spill
; CHECK-NEXT:    str x0, [sp, #8] // 8-byte Folded Spill
; CHECK-NEXT:    b .LBB0_1
entry:
  br label %loop

loop:
  %p = phi i72 [ 0, %entry ], [ %p, %loop ]
  br label %loop
}
