; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 6
; RUN: llc -mtriple=aarch64 -mattr=+v8.9a --global-isel=0 < %s | FileCheck %s
; RUN: llc -mtriple=aarch64 -mattr=+v8.9a --global-isel=1 --global-isel-abort=1 < %s | FileCheck %s
; RUN: llc -mtriple=aarch64 -mattr=+v8.9a -mattr=+rprfm --global-isel=0 < %s | FileCheck %s
; RUN: llc -mtriple=aarch64 -mattr=+v8.9a -mattr=+rprfm --global-isel=1 --global-isel-abort=1 < %s | FileCheck %s

define void @test(ptr %a, ptr %b) {
; CHECK-LABEL: test:
; CHECK:      mov   x8, #-562675075514369
; CHECK-NEXT: mov   x9, #4192256
; CHECK-NEXT: movk  x8, #2040
; CHECK-NEXT: orr   x9, x9, #0x1fe0000000000
; CHECK-NEXT: movk  x8, #65472, lsl #16

; CHECK-NEXT: rprfm pldkeep, x8, [x0]
  call void @llvm.aarch64.range.prefetch(ptr %a, i32 0, i32 0, i32 15, i32 -2048, i32 65535, i32 2040)

; CHECK-NEXT: rprfm pstkeep, x8, [x1]
  call void @llvm.aarch64.range.prefetch(ptr %b, i32 1, i32 0, i32 15, i32 -2048, i32 65535, i32 2040)

; CHECK-NEXT: rprfm pldstrm, x9, [x0]
  call void @llvm.aarch64.range.prefetch(ptr %a, i32 0, i32 1, i32 0, i32 2040, i32 0, i32 -2048)

; CHECK-NEXT: rprfm pststrm, x9, [x1]
  call void @llvm.aarch64.range.prefetch(ptr %b, i32 1, i32 1, i32 0, i32 2040, i32 0, i32 -2048)

  ret void
}
