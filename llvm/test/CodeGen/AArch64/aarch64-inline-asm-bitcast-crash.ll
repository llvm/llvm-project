; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 6
; RUN: llc < %s -mtriple=aarch64-none-linux-gnu -verify-machineinstrs | FileCheck %s

; Check for the crash in https://github.com/llvm/llvm-project/issues/173483
define void @f(<2 x i8> %1) {
; CHECK-LABEL: f:
; CHECK:       // %bb.0:
; CHECK-NEXT:    sub sp, sp, #16
; CHECK-NEXT:    .cfi_def_cfa_offset 16
; CHECK-NEXT:    // kill: def $d0 killed $d0 def $q0
; CHECK-NEXT:    mov s1, v0.s[1]
; CHECK-NEXT:    str b0, [sp, #12]
; CHECK-NEXT:    stur b1, [sp, #13]
; CHECK-NEXT:    ldrh w8, [sp, #12]
; CHECK-NEXT:    fmov s0, w8
; CHECK-NEXT:    //APP
; CHECK-NEXT:    //NO_APP
; CHECK-NEXT:    add sp, sp, #16
; CHECK-NEXT:    ret
  call void asm sideeffect "", "w"(<2 x i8> %1)
  ret void
}
