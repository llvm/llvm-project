; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 5
; RUN: llc -mtriple=aarch64-linux-gnu -O0 -fast-isel -fast-isel-abort=1 -verify-machineinstrs < %s | FileCheck %s --check-prefix=CHECK

; even in -O0, cmp should be cmp
define i1 @cmp(i32 %0) {
; CHECK-LABEL: cmp:
; CHECK:       // %bb.0:
; CHECK-NEXT:    subs w8, w0, #5
; CHECK-NEXT:    cset w0, gt
; CHECK-NEXT:    // kill: def $w1 killed $w0
; CHECK-NEXT:    ret
  %2 = icmp sgt i32 %0, 5
  ret i1 %2
}

define i1 @cmn(i32 %0) {
; CHECK-LABEL: cmn:
; CHECK:       // %bb.0:
; CHECK-NEXT:    adds w8, w0, #5
; CHECK-NEXT:    cset w0, gt
; CHECK-NEXT:    // kill: def $w1 killed $w0
; CHECK-NEXT:    ret
  %2 = icmp sgt i32 %0, -5
  ret i1 %2
}

; Test that 0 is cmp
define i1 @cmp0(i32 %0) {
; CHECK-LABEL: cmp0:
; CHECK:       // %bb.0:
; CHECK-NEXT:    subs w8, w0, #0
; CHECK-NEXT:    cset w0, gt
; CHECK-NEXT:    // kill: def $w1 killed $w0
; CHECK-NEXT:    ret
  %2 = icmp sgt i32 %0, 0
  ret i1 %2
}

