; RUN: llc -mtriple=aarch64-- -o - < %s | FileCheck %s --check-prefixes=CHECK,CHECK-SD
; RUN: llc -mtriple=aarch64-- -mattr=+cssc -o - < %s | FileCheck %s --check-prefixes=CHECK,CHECK-CSSC

target datalayout = "e-m:e-i8:8:32-i16:16:32-i64:64-i128:128-n32:64-S128"
target triple = "aarch64-unknown-linux-gnu"

; auto icmpi64(long x0) { return x0 != 0; }
define i1 @icmpi64(i64 noundef %0) {
; CHECK-SD-LABEL: icmpi64:
; CHECK-SD:       // %bb.0: // %entry
; CHECK-SD-NEXT:    cmp x0, #0
; CHECK-SD-NEXT:    cset w0, ne
; CHECK-SD-NEXT:    ret
;
; CHECK-CSSC-LABEL: icmpi64:
; CHECK-CSSC:       // %bb.0: // %entry
; CHECK-CSSC-NEXT:    umin x0, x0, #1
; CHECK-CSSC-NEXT:    // kill: def $w0 killed $w0 killed $x0
; CHECK-CSSC-NEXT:    ret
;
entry:
  %2 = icmp ne i64 %0, 0
  ret i1 %2
}

; auto icmpi32(int x0) { return x0 != 0; }
define i1 @icmpi32(i32 noundef %0) {
; CHECK-SD-LABEL: icmpi32:
; CHECK-SD:       // %bb.0: // %entry
; CHECK-SD-NEXT:    cmp w0, #0
; CHECK-SD-NEXT:    cset w0, ne
; CHECK-SD-NEXT:    ret
;
; CHECK-CSSC-LABEL: icmpi32:
; CHECK-CSSC:       // %bb.0: // %entry
; CHECK-CSSC-NEXT:    umin w0, w0, #1
; CHECK-CSSC-NEXT:    ret
;
entry:
  %2 = icmp ne i32 %0, 0
  ret i1 %2
}

; auto icmpi16(short x0) { return x0 != 0; }
define i1 @icmpi16(i16 noundef %0) {
; CHECK-SD-LABEL: icmpi16:
; CHECK-SD:       // %bb.0: // %entry
; CHECK-SD-NEXT:    tst w0, #0xffff
; CHECK-SD-NEXT:    cset w0, ne
; CHECK-SD-NEXT:    ret
;
; CHECK-CSSC-LABEL: icmpi16:
; CHECK-CSSC:       // %bb.0: // %entry
; CHECK-CSSC-NEXT:    and	w8, w0, #0xffff
; CHECK-CSSC-NEXT:    umin w0, w8, #1
; CHECK-CSSC-NEXT:    ret
;
entry:
  %2 = icmp ne i16 %0, 0
  ret i1 %2
}

; auto icmpi8(char x0) { return x0 != 0; }
define i1 @icmpi8(i8 noundef %0) {
; CHECK-SD-LABEL: icmpi8:
; CHECK-SD:       // %bb.0: // %entry
; CHECK-SD-NEXT:    tst w0, #0xff
; CHECK-SD-NEXT:    cset w0, ne
; CHECK-SD-NEXT:    ret
;
; CHECK-CSSC-LABEL: icmpi8:
; CHECK-CSSC:       // %bb.0: // %entry
; CHECK-CSSC-NEXT:    and w8, w0, #0xff
; CHECK-CSSC-NEXT:    umin w0, w8, #1
; CHECK-CSSC-NEXT:    ret
;
entry:
  %2 = icmp ne i8 %0, 0
  ret i1 %2
}
;; NOTE: These prefixes are unused and the list is autogenerated. Do not add tests below this line:
; CHECK: {{.*}}