; NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 6
; RUN: llc -O0 -mtriple=aarch64-unknown-unknown -stop-after=irtranslator -o - %s | FileCheck %s

target datalayout = "e-m:o-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128"

define void @snork() {
  ; CHECK-LABEL: name: snork
  ; CHECK: bb.1.bb:
  ; CHECK-NEXT:   [[C:%[0-9]+]]:_(p0) = G_CONSTANT i64 0
  ; CHECK-NEXT:   [[C1:%[0-9]+]]:_(i64) = G_CONSTANT i64 4
  ; CHECK-NEXT:   [[C2:%[0-9]+]]:_(p0) = G_CONSTANT i64 4
  ; CHECK-NEXT:   [[LOAD:%[0-9]+]]:_(i16) = G_LOAD [[C]](p0) :: (load (i16) from `ptr null`, !tbaa !0)
  ; CHECK-NEXT:   G_STORE [[LOAD]](i16), [[C2]](p0) :: (store (i16) into %ir.tmp5, !tbaa !0)
  ; CHECK-NEXT:   RET_ReallyLR
bb:
  %tmp5 = getelementptr i16, ptr null, i64 2
  %tmp6 = load i16, ptr null, align 2, !tbaa !0
  store i16 %tmp6, ptr %tmp5, align 2, !tbaa !0
  ret void
}

!0 = !{!1, !1, i64 0}
!1 = !{!"short", !2, i64 0}
!2 = !{!"omnipotent char", !3, i64 0}
!3 = !{!"Simple C/C++ TBAA"}
