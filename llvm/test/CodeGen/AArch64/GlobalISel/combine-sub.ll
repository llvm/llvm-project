; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=aarch64-unknown-unknown -global-isel | FileCheck %s --check-prefixes=GISEL

; fold (sub -1, a) -> (xor a, -1)
define i64 @sub_minus_one(i64 %a) {
; GISEL-LABEL: sub_minus_one:
; GISEL:       // %bb.0: // %entry
; GISEL-NEXT:    mov x8, #-1 // =0xffffffffffffffff
; GISEL-NEXT:    sub x0, x8, x0
; GISEL-NEXT:    ret
entry:
; fold (A - (0 - B)) to (A + B)
  %sub1 = sub i64 -1, %a
  ret i64 %sub1
}

; fold (A - B) - 1  ->  add (xor B, -1), A
define i64 @sub_one_from_sub(i64 %a, i64 %b) {
; GISEL-LABEL: sub_one_from_sub:
; GISEL:       // %bb.0: // %entry
; GISEL-NEXT:    neg x8, x1
; GISEL-NEXT:    sub x0, x0, x8
; GISEL-NEXT:    ret
entry:
; fold (A - (0 - B)) to (A + B)
  %sub1 = sub i64 0, %b
  %sub2 = sub i64 %a, %sub1
  ret i64 %sub2
}
