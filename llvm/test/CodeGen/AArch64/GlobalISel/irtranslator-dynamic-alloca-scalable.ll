; NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
; RUN: llc -mtriple=aarch64 -mattr=+sve -global-isel -aarch64-enable-gisel-sve %s -o - -stop-after=irtranslator | FileCheck %s
; Tests for scalable vector allocas in GlobalISel

; Test basic scalable vector alloca (single allocation)
define ptr @test_single_scalable_alloca() {
  ; CHECK-LABEL: name: test_single_scalable_alloca
  ; CHECK: bb.1 (%ir-block.0):
  ; CHECK-NEXT:   [[FRAME_INDEX:%[0-9]+]]:_(p0) = G_FRAME_INDEX %stack.0.local0
  ; CHECK-NEXT:   $x0 = COPY [[FRAME_INDEX]](p0)
  ; CHECK-NEXT:   RET_ReallyLR implicit $x0
  %local0 = alloca <vscale x 16 x i8>
  ret ptr %local0
}