# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py UTC_ARGS: --version 4
# RUN: llc -O0 -mtriple=aarch64-linux-gnu -relocation-model=pic -run-pass=instruction-select -global-isel-abort=1 -verify-machineinstrs %s -o - | FileCheck %s

--- |
  @var_got = external global i8
  define ptr @loadgotauth_implicit_defs() { ret ptr null }

  !llvm.module.flags = !{!0}
  !0 = !{i32 8, !"ptrauth-elf-got", i32 1}
...

---
name:            loadgotauth_implicit_defs
legalized:       true
regBankSelected: true
body:             |
  bb.0:
    ; CHECK-LABEL: name: loadgotauth_implicit_defs
    ; CHECK: [[LOADgotAUTH:%[0-9]+]]:gpr64common = LOADgotAUTH target-flags(aarch64-got) @var_got, implicit-def $x16, implicit-def $x17, implicit-def $nzcv
    ; CHECK-NEXT: $x0 = COPY [[LOADgotAUTH]]
    %0:gpr(p0) = G_GLOBAL_VALUE @var_got
    $x0 = COPY %0(p0)
...
