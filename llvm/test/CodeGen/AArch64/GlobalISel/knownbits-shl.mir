# NOTE: Assertions have been autogenerated by utils/update_givaluetracking_test_checks.py UTC_ARGS: --version 5
# RUN: llc -mtriple aarch64 -passes="print<gisel-value-tracking>" %s -o - 2>&1 | FileCheck %s

---
name:            Cst
body:             |
  bb.1:
  ; CHECK-LABEL: name: @Cst
  ; CHECK-NEXT: %0:_ KnownBits:11100000 SignBits:3
  ; CHECK-NEXT: %1:_ KnownBits:00000010 SignBits:6
  ; CHECK-NEXT: %2:_ KnownBits:10000000 SignBits:1
    %0:_(s8) = G_CONSTANT i8 224
    %1:_(s8) = G_CONSTANT i8 2
    %2:_(s8) = G_SHL %0, %1
...
---
name:            CstBig
body:             |
  bb.1:
  ; CHECK-LABEL: name: @CstBig
  ; CHECK-NEXT: %0:_ KnownBits:11111001 SignBits:5
  ; CHECK-NEXT: %1:_ KnownBits:00000110 SignBits:5
  ; CHECK-NEXT: %2:_ KnownBits:01000000 SignBits:1
    %0:_(s8) = G_CONSTANT i8 249
    %1:_(s8) = G_CONSTANT i8 6
    %2:_(s8) = G_SHL %0, %1
...
---
name:            CstSext
body:             |
  bb.1:
  ; CHECK-LABEL: name: @CstSext
  ; CHECK-NEXT: %0:_ KnownBits:10000001 SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:00000100 SignBits:5
  ; CHECK-NEXT: %2:_ KnownBits:11111000 SignBits:5
  ; CHECK-NEXT: %3:_ KnownBits:00000011 SignBits:6
  ; CHECK-NEXT: %4:_ KnownBits:11000000 SignBits:2
    %0:_(s8) = G_CONSTANT i8 129
    %1:_(s8) = G_CONSTANT i8 4
    %2:_(s8) = G_ASHR %0, %1
    %3:_(s8) = G_CONSTANT i8 3
    %4:_(s8) = G_SHL %2, %3
...
---
name:            CstSextBig
body:             |
  bb.1:
  ; CHECK-LABEL: name: @CstSextBig
  ; CHECK-NEXT: %0:_ KnownBits:10000001 SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:00000100 SignBits:5
  ; CHECK-NEXT: %2:_ KnownBits:11111000 SignBits:5
  ; CHECK-NEXT: %3:_ KnownBits:00000110 SignBits:5
  ; CHECK-NEXT: %4:_ KnownBits:00000000 SignBits:8
    %0:_(s8) = G_CONSTANT i8 129
    %1:_(s8) = G_CONSTANT i8 4
    %2:_(s8) = G_ASHR %0, %1
    %3:_(s8) = G_CONSTANT i8 6
    %4:_(s8) = G_SHL %2, %3
...
---
name:            ScalarVar
body:             |
  bb.1:
  ; CHECK-LABEL: name: @ScalarVar
  ; CHECK-NEXT: %0:_ KnownBits:???????? SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:???????? SignBits:1
  ; CHECK-NEXT: %2:_ KnownBits:???????? SignBits:1
    %0:_(s8) = COPY $b0
    %1:_(s8) = COPY $b1
    %2:_(s8) = G_SHL %0, %1
...
---
name:            ScalarCst
body:             |
  bb.1:
  ; CHECK-LABEL: name: @ScalarCst
  ; CHECK-NEXT: %0:_ KnownBits:???????? SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:00000011 SignBits:6
  ; CHECK-NEXT: %2:_ KnownBits:?????000 SignBits:1
    %0:_(s8) = COPY $b0
    %1:_(s8) = G_CONSTANT i8 3
    %2:_(s8) = G_SHL %0, %1
...
---
name:            VectorVar
body:             |
  bb.1:
  ; CHECK-LABEL: name: @VectorVar
  ; CHECK-NEXT: %0:_ KnownBits:???????????????? SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:???????????????? SignBits:1
  ; CHECK-NEXT: %2:_ KnownBits:???????????????? SignBits:1
    %0:_(<4 x s16>) = COPY $d0
    %1:_(<4 x s16>) = COPY $d1
    %2:_(<4 x s16>) = G_SHL %0, %1
...
---
name:            VectorCst
body:             |
  bb.1:
  ; CHECK-LABEL: name: @VectorCst
  ; CHECK-NEXT: %0:_ KnownBits:???????????????? SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:0000000000000011 SignBits:14
  ; CHECK-NEXT: %2:_ KnownBits:0000000000000011 SignBits:14
  ; CHECK-NEXT: %3:_ KnownBits:?????????????000 SignBits:1
    %0:_(<4 x s16>) = COPY $d0
    %1:_(s16) = G_CONSTANT i16 3
    %2:_(<4 x s16>) = G_BUILD_VECTOR %1, %1, %1, %1
    %3:_(<4 x s16>) = G_SHL %0, %2
...
---
name:            VectorCst36
body:             |
  bb.1:
  ; CHECK-LABEL: name: @VectorCst36
  ; CHECK-NEXT: %0:_ KnownBits:0000000000000011 SignBits:14
  ; CHECK-NEXT: %1:_ KnownBits:0000000000000110 SignBits:13
  ; CHECK-NEXT: %2:_ KnownBits:0000000000000?1? SignBits:13
  ; CHECK-NEXT: %3:_ KnownBits:0000000000000?1? SignBits:13
  ; CHECK-NEXT: %4:_ KnownBits:000000????????00 SignBits:7
    %0:_(s16) = G_CONSTANT i16 3
    %1:_(s16) = G_CONSTANT i16 6
    %2:_(<4 x s16>) = G_BUILD_VECTOR %0, %1, %1, %0
    %3:_(<4 x s16>) = G_BUILD_VECTOR %0, %1, %1, %0
    %4:_(<4 x s16>) = G_SHL %2, %3
...

---
name:            VectorCst3unknown
body:             |
  bb.1:
  ; CHECK-LABEL: name: @VectorCst3unknown
  ; CHECK-NEXT: %0:_ KnownBits:???????????????? SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:???????????????? SignBits:1
  ; CHECK-NEXT: %2:_ KnownBits:0000000000000011 SignBits:14
  ; CHECK-NEXT: %3:_ KnownBits:???????????????? SignBits:1
  ; CHECK-NEXT: %4:_ KnownBits:???????????????? SignBits:1
    %0:_(<4 x s16>) = COPY $d0
    %2:_(s16) = COPY $h0
    %1:_(s16) = G_CONSTANT i16 3
    %3:_(<4 x s16>) = G_BUILD_VECTOR %1, %2, %2, %1
    %4:_(<4 x s16>) = G_SHL %0, %3
...
---
name:            VectorSext
body:             |
  bb.1:
  ; CHECK-LABEL: name: @VectorSext
  ; CHECK-NEXT: %0:_ KnownBits:11101110 SignBits:3
  ; CHECK-NEXT: %1:_ KnownBits:1111111111101110 SignBits:11
  ; CHECK-NEXT: %2:_ KnownBits:1111111111101110 SignBits:11
  ; CHECK-NEXT: %3:_ KnownBits:0000000000000011 SignBits:14
  ; CHECK-NEXT: %4:_ KnownBits:0000000000000110 SignBits:13
  ; CHECK-NEXT: %5:_ KnownBits:0000000000000?1? SignBits:13
  ; CHECK-NEXT: %6:_ KnownBits:1111??11?????000 SignBits:5
    %0:_(s8) = G_CONSTANT i8 238
    %1:_(s16) = G_SEXT %0(s8)
    %2:_(<4 x s16>) = G_BUILD_VECTOR %1, %1, %1, %1
    %3:_(s16) = G_CONSTANT i16 3
    %4:_(s16) = G_CONSTANT i16 6
    %5:_(<4 x s16>) = G_BUILD_VECTOR %3, %4, %4, %3
    %6:_(<4 x s16>) = G_SHL %2, %5
...
---
name:            VectorSextBig
body:             |
  bb.1:
  ; CHECK-LABEL: name: @VectorSextBig
  ; CHECK-NEXT: %0:_ KnownBits:11101110 SignBits:3
  ; CHECK-NEXT: %1:_ KnownBits:1111111111101110 SignBits:11
  ; CHECK-NEXT: %2:_ KnownBits:1111111111101110 SignBits:11
  ; CHECK-NEXT: %3:_ KnownBits:0000000000001000 SignBits:12
  ; CHECK-NEXT: %4:_ KnownBits:0000000000001001 SignBits:12
  ; CHECK-NEXT: %5:_ KnownBits:000000000000100? SignBits:12
  ; CHECK-NEXT: %6:_ KnownBits:11??11?000000000 SignBits:2
    %0:_(s8) = G_CONSTANT i8 238
    %1:_(s16) = G_SEXT %0(s8)
    %2:_(<4 x s16>) = G_BUILD_VECTOR %1, %1, %1, %1
    %3:_(s16) = G_CONSTANT i16 8
    %4:_(s16) = G_CONSTANT i16 9
    %5:_(<4 x s16>) = G_BUILD_VECTOR %3, %4, %4, %3
    %6:_(<4 x s16>) = G_SHL %2, %5
...
---
name:            SHLless
body:             |
  bb.1:
  ; CHECK-LABEL: name: @SHLless
  ; CHECK-NEXT: %0:_ KnownBits:???????? SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:???????????????? SignBits:9
  ; CHECK-NEXT: %2:_ KnownBits:0000000000000011 SignBits:14
  ; CHECK-NEXT: %3:_ KnownBits:?????????????000 SignBits:6
    %0:_(s8) = COPY $b0
    %1:_(s16) = G_SEXT %0(s8)
    %2:_(s16) = G_CONSTANT i16 3
    %3:_(s16) = G_SHL %1, %2
...
---
name:            SHLeq
body:             |
  bb.1:
  ; CHECK-LABEL: name: @SHLeq
  ; CHECK-NEXT: %0:_ KnownBits:???????? SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:???????????????? SignBits:9
  ; CHECK-NEXT: %2:_ KnownBits:0000000000001000 SignBits:12
  ; CHECK-NEXT: %3:_ KnownBits:????????00000000 SignBits:1
    %0:_(s8) = COPY $b0
    %1:_(s16) = G_SEXT %0(s8)
    %2:_(s16) = G_CONSTANT i16 8
    %3:_(s16) = G_SHL %1, %2
...
---
name:            SHLmore
body:             |
  bb.1:
  ; CHECK-LABEL: name: @SHLmore
  ; CHECK-NEXT: %0:_ KnownBits:???????? SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:???????????????? SignBits:9
  ; CHECK-NEXT: %2:_ KnownBits:0000000000001101 SignBits:12
  ; CHECK-NEXT: %3:_ KnownBits:???0000000000000 SignBits:1
    %0:_(s8) = COPY $b0
    %1:_(s16) = G_SEXT %0(s8)
    %2:_(s16) = G_CONSTANT i16 13
    %3:_(s16) = G_SHL %1, %2
...
---
name:            SignBitsThroughZext
body:             |
  bb.1:
  ; CHECK-LABEL: name: @SignBitsThroughZext
  ; CHECK-NEXT: %0:_ KnownBits:???????? SignBits:1
  ; CHECK-NEXT: %1:_ KnownBits:0000000000000011 SignBits:14
  ; CHECK-NEXT: %2:_ KnownBits:???????? SignBits:4
  ; CHECK-NEXT: %3:_ KnownBits:00000000???????? SignBits:8
  ; CHECK-NEXT: %4:_ KnownBits:0000000000001000 SignBits:12
  ; CHECK-NEXT: %5:_ KnownBits:????????00000000 SignBits:4
    %0:_(s8) = COPY $b0
    %1:_(s16) = G_CONSTANT i16 3
    %2:_(s8) = G_ASHR %0, %1
    %3:_(s16) = G_ZEXT %2
    %4:_(s16) = G_CONSTANT i16 8
    %5:_(s16) = G_SHL %3, %4
...
