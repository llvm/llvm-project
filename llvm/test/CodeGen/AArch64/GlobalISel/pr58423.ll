; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: llc < %s -mtriple=aarch64-none-linux-gnu -global-isel -global-isel-abort=0 | FileCheck %s

; this used to crash
define i32 @f(i32 %a) {
; CHECK-LABEL: f:
; CHECK:       // %bb.0:
; CHECK-NEXT:    lsl w8, w0, #8
; CHECK-NEXT:    orr w0, w8, w0, lsl #16
; CHECK-NEXT:    ret
  %shl = shl i32 %a, 8
  %or = or i32 %a, %shl
  %r = shl i32 %or, 8
  ret i32 %r
}
