; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py UTC_ARGS: --version 6
; RUN: llc   -mtriple=powerpc-ibm-aix7.2.0.0  -verify-machineinstrs -mcpu=pwr9 < %s | FileCheck --check-prefix=AIX-PWR9 %s
; RUN: llc   -mtriple=powerpc-ibm-aix7.2.0.0  -verify-machineinstrs -mcpu=pwr10 < %s | FileCheck --check-prefix=AIX-PWR10 %s
; RUN: llc   -mtriple=powerpc-ibm64-aix7.2.0.0  -verify-machineinstrs -mcpu=pwr9 < %s | FileCheck --check-prefix=AIX-PWR9 %s
; RUN: llc   -mtriple=powerpc-ibm64-aix7.2.0.0  -verify-machineinstrs -mcpu=pwr10 < %s | FileCheck --check-prefix=AIX-PWR10 %s
; RUN: llc   -mtriple=powerpc64le-unknown-unknown  -verify-machineinstrs -mcpu=pwr9 < %s | FileCheck --check-prefix=LNXLE64-PWR9 %s
; RUN: llc   -mtriple=powerpc64le-unknown-unknown  -verify-machineinstrs -mcpu=pwr10 < %s | FileCheck --check-prefix=LNXLE64-PWR10 %s
; RUN: llc   -mtriple=powerpcle-unknown-unknown  -verify-machineinstrs -mcpu=pwr9 < %s | FileCheck --check-prefix=LNXLE-PWR9 %s
; RUN: llc   -mtriple=powerpcle-unknown-unknown  -verify-machineinstrs -mcpu=pwr10 < %s | FileCheck --check-prefix=LNXLE-PWR10 %s
define noundef zeroext i1 @_Z16ossIsValidDoubled(double noundef %in) local_unnamed_addr  {
; AIX-PWR9-LABEL: _Z16ossIsValidDoubled:
; AIX-PWR9:       # %bb.0: # %entry
; AIX-PWR9-NEXT:    xststdcdp 0, 1, 115
; AIX-PWR9-NEXT:    li 3, 0
; AIX-PWR9-NEXT:    li 4, 1
; AIX-PWR9-NEXT:    iseleq 3, 4, 3
; AIX-PWR9-NEXT:    cntlzw 3, 3
; AIX-PWR9-NEXT:    rlwinm 3, 3, 27, 31, 31
; AIX-PWR9-NEXT:    blr
;
; AIX-PWR10-LABEL: _Z16ossIsValidDoubled:
; AIX-PWR10:       # %bb.0: # %entry
; AIX-PWR10-NEXT:    xststdcdp 0, 1, 115
; AIX-PWR10-NEXT:    li 3, 0
; AIX-PWR10-NEXT:    li 4, 1
; AIX-PWR10-NEXT:    iseleq 3, 4, 3
; AIX-PWR10-NEXT:    cntlzw 3, 3
; AIX-PWR10-NEXT:    rlwinm 3, 3, 27, 31, 31
; AIX-PWR10-NEXT:    blr
;
; LNXLE64-PWR9-LABEL: _Z16ossIsValidDoubled:
; LNXLE64-PWR9:       # %bb.0: # %entry
; LNXLE64-PWR9-NEXT:    xststdcdp 0, 1, 115
; LNXLE64-PWR9-NEXT:    li 3, 0
; LNXLE64-PWR9-NEXT:    li 4, 1
; LNXLE64-PWR9-NEXT:    iseleq 3, 4, 3
; LNXLE64-PWR9-NEXT:    cntlzw 3, 3
; LNXLE64-PWR9-NEXT:    srwi 3, 3, 5
; LNXLE64-PWR9-NEXT:    blr
;
; LNXLE64-PWR10-LABEL: _Z16ossIsValidDoubled:
; LNXLE64-PWR10:       # %bb.0: # %entry
; LNXLE64-PWR10-NEXT:    xststdcdp 0, 1, 115
; LNXLE64-PWR10-NEXT:    li 3, 0
; LNXLE64-PWR10-NEXT:    li 4, 1
; LNXLE64-PWR10-NEXT:    iseleq 3, 4, 3
; LNXLE64-PWR10-NEXT:    cntlzw 3, 3
; LNXLE64-PWR10-NEXT:    rlwinm 3, 3, 27, 31, 31
; LNXLE64-PWR10-NEXT:    blr
;
; LNXLE-PWR9-LABEL: _Z16ossIsValidDoubled:
; LNXLE-PWR9:       # %bb.0: # %entry
; LNXLE-PWR9-NEXT:    xststdcdp 0, 1, 115
; LNXLE-PWR9-NEXT:    li 3, 0
; LNXLE-PWR9-NEXT:    li 4, 1
; LNXLE-PWR9-NEXT:    iseleq 3, 4, 3
; LNXLE-PWR9-NEXT:    cntlzw 3, 3
; LNXLE-PWR9-NEXT:    rlwinm 3, 3, 27, 31, 31
; LNXLE-PWR9-NEXT:    blr
;
; LNXLE-PWR10-LABEL: _Z16ossIsValidDoubled:
; LNXLE-PWR10:       # %bb.0: # %entry
; LNXLE-PWR10-NEXT:    xststdcdp 0, 1, 115
; LNXLE-PWR10-NEXT:    li 3, 0
; LNXLE-PWR10-NEXT:    li 4, 1
; LNXLE-PWR10-NEXT:    iseleq 3, 4, 3
; LNXLE-PWR10-NEXT:    cntlzw 3, 3
; LNXLE-PWR10-NEXT:    rlwinm 3, 3, 27, 31, 31
; LNXLE-PWR10-NEXT:    blr
entry:
  %test_data_class = tail call i32 @llvm.ppc.test.data.class.f64(double %in, i32 115)
  %tobool.not = icmp eq i32 %test_data_class, 0
  ret i1 %tobool.not
}

declare i32 @llvm.ppc.test.data.class.f64(double, i32 immarg)

