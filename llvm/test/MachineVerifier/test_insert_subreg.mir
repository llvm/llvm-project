#RUN: not --crash llc -march=aarch64 -o - -run-pass=none -verify-machineinstrs %s 2>&1 | FileCheck %s
# REQUIRES: aarch64-registered-target

---
name:            test_insert_subreg
legalized:       true
regBankSelected: false
selected:        false
tracksRegLiveness: true
liveins:
body:             |
  bb.0:
    liveins: $s0, $h1

    %0:fpr32 = COPY $s0

    ; CHECK: *** Bad machine code: INSERT_SUBREG expected matching subreg size for operand 2 ***
    %1:fpr128 = IMPLICIT_DEF
    %2:fpr128 = INSERT_SUBREG %1:fpr128, %0:fpr32, %subreg.hsub

    ; CHECK: *** Bad machine code: INSERT_SUBREG expected matching subreg size for operand 2 ***
    %3:fpr128 = IMPLICIT_DEF
    %4:fpr128 = INSERT_SUBREG %3:fpr128, %0:fpr32, %subreg.dsub

    ; CHECK-NOT: *** Bad machine code:
    %7:fpr128 = IMPLICIT_DEF
    %8:fpr128 = INSERT_SUBREG %7:fpr128, %0:fpr32, %subreg.ssub

...
