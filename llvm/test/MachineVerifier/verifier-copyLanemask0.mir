# RUN: not --crash llc -o - -mtriple=amdgcn-amd-amdhsa -run-pass=none -verify-machineinstrs %s 2>&1 | FileCheck %s
# REQUIRES: amdgpu-registered-target

# CHECK: *** Bad machine code: Lanemask takes up the zero value ***
# CHECK-NEXT: - function:    test_copy_lanemask_instruction_0
# CHECK-NEXT: - basic block: %bb.0
# CHECK-NEXT: - instruction: $vgpr2 = COPY_LANEMASK $vgpr0, lanemask(0x0000000000000000)

# CHECK: *** Bad machine code: Copy Instruction can be used instead of copy with lanemask ***
# CHECK-NEXT: - function:    test_copy_lanemask_instruction_0
# CHECK-NEXT: - basic block: %bb.0
# CHECK-NEXT: - instruction: $vgpr3 = COPY_LANEMASK $vgpr1, lanemask(0xFFFFFFFFFFFFFFFF)

---
name: test_copy_lanemask_instruction_0
tracksRegLiveness: true
body:             |
  bb.0:
    liveins: $vgpr0, $vgpr1

    $vgpr2 = COPY_LANEMASK $vgpr0, lanemask(0)
    $vgpr3 = COPY_LANEMASK $vgpr1, lanemask(0xFFFFFFFFFFFFFFFF)
    S_ENDPGM 0
...
