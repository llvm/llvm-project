; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -S -passes=memcpyopt < %s | FileCheck %s

define void @f(ptr nocapture noundef writeonly %r, <vscale x 2 x i32> %x) {
; CHECK-LABEL: @f(
; CHECK-NEXT:  entry:
; CHECK-NEXT:    [[X_ADDR:%.*]] = alloca <vscale x 2 x i32>, align 8
; CHECK-NEXT:    store <vscale x 2 x i32> [[X:%.*]], ptr [[X_ADDR]], align 8
; CHECK-NEXT:    [[TMP0:%.*]] = load i64, ptr [[X_ADDR]], align 8
; CHECK-NEXT:    store i64 [[TMP0]], ptr [[R:%.*]], align 1
; CHECK-NEXT:    ret void
;
entry:
  %x.addr = alloca <vscale x 2 x i32>, align 8
  store <vscale x 2 x i32> %x, ptr %x.addr, align 8
  %0 = load i64, ptr %x.addr, align 8
  store i64 %0, ptr %r, align 1
  ret void
}
