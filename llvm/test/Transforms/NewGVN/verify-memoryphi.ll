; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 4
; Skip dead MemoryPhis when performing memory congruency verification
; in NewGVN.
; RUN: opt -S -passes=newgvn %s | FileCheck %s
; REQUIRES: asserts


declare void @llvm.lifetime.start.p0(ptr nocapture)

define void @tinkywinky() {
; CHECK-LABEL: define void @tinkywinky() {
; CHECK-NEXT:  entry:
; CHECK-NEXT:    [[A:%.*]] = alloca i8, align 1
; CHECK-NEXT:    br i1 false, label [[BODY:%.*]], label [[END:%.*]]
; CHECK:       body:
; CHECK-NEXT:    store i8 poison, ptr null, align 1
; CHECK-NEXT:    br label [[END]]
; CHECK:       end:
; CHECK-NEXT:    ret void
;
entry:
  %a = alloca i8
  call void @llvm.lifetime.start.p0(ptr %a)
  br i1 false, label %body, label %end

body:
  call void @llvm.lifetime.start.p0(ptr %a)
  br label %end

end:
  ret void
}
