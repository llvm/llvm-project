; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt -S -passes=newgvn < %s | FileCheck %s

; Test created to verify compilation without crashing.

@mem = addrspace(3) global i32 poison, align 4

define i32 @foo() {
; CHECK-LABEL: define i32 @foo() {
; CHECK-NEXT:    call void @llvm.amdgcn.s.barrier()
; CHECK-NEXT:    [[OUT:%.*]] = load i32, ptr addrspace(3) @mem, align 4
; CHECK-NEXT:    ret i32 [[OUT]]
;
  call void @llvm.amdgcn.s.barrier()
  %out = load i32, ptr addrspace(3) @mem, align 4
  ret i32 %out
}
