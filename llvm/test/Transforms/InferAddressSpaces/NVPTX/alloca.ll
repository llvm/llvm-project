; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt -S -passes=infer-address-spaces %s | FileCheck %s

target triple = "nvptx64-nvidia-cuda"


define float @load_alloca() {
; CHECK-LABEL: define float @load_alloca() {
; CHECK-NEXT:    [[ADDR:%.*]] = alloca float, align 4
; CHECK-NEXT:    [[TMP1:%.*]] = addrspacecast ptr [[ADDR]] to ptr addrspace(5)
; CHECK-NEXT:    [[VAL:%.*]] = load float, ptr addrspace(5) [[TMP1]], align 4
; CHECK-NEXT:    ret float [[VAL]]
;
  %addr = alloca float
  %val = load float, ptr %addr
  ret float %val
}
