; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -passes='sroa<preserve-cfg>' -S | FileCheck %s --check-prefixes=CHECK,CHECK-PRESERVE-CFG
; RUN: opt < %s -passes='sroa<modify-cfg>' -S | FileCheck %s --check-prefixes=CHECK,CHECK-MODIFY-CFG

target datalayout = "e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128"
target triple = "x86_64-unknown-linux-gnu"

%struct.n.2 = type { i8 }
%struct.bi = type { %class.as }
%class.as = type { %class.ao }
%class.ao = type { %class.ai }
%class.ai = type { i32, i32 }

define void @_ZN2bg2baIiEC2ES_(i64 %v) {
; CHECK-LABEL: @_ZN2bg2baIiEC2ES_(
; CHECK-NEXT:  entry:
; CHECK-NEXT:    call void @llvm.assume(i1 true) [ "ignore"(ptr undef) ]
; CHECK-NEXT:    ret void
;
entry:
  %y = alloca i64, align 8
  store i64 %v, ptr %y, align 8
  call void @llvm.assume(i1 true) [ "nonnull"(ptr %y) ]
  ret void
}

; Function Attrs: nofree norecurse nounwind willreturn
declare void @llvm.assume(i1) #0

attributes #0 = { nofree norecurse nounwind willreturn }
;; NOTE: These prefixes are unused and the list is autogenerated. Do not add tests below this line:
; CHECK-MODIFY-CFG: {{.*}}
; CHECK-PRESERVE-CFG: {{.*}}
