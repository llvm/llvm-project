; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt < %s -passes=reassociate,instcombine -S | FileCheck %s

; With shl->mul reassociation, we can see that this is (shl A, 9) * A
define i32 @test(i32 %A) {
; CHECK-LABEL: define i32 @test(
; CHECK-SAME: i32 [[A:%.*]]) {
; CHECK-NEXT:    [[Y:%.*]] = shl i32 [[A]], 9
; CHECK-NEXT:    [[Z:%.*]] = mul i32 [[Y]], [[A]]
; CHECK-NEXT:    ret i32 [[Z]]
;
  %X = shl i32 %A, 5		; <i32> [#uses=1]
  %Y = shl i32 %A, 4		; <i32> [#uses=1]
  %Z = mul i32 %Y, %X		; <i32> [#uses=1]
  ret i32 %Z
}

