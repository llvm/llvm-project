; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 6
; RUN: opt -passes='default<O2>' -S %s | FileCheck %s

target datalayout = "E-m:e-i1:8:16-i8:8:16-i64:64-f128:64-a:8:16-n32:64"
target triple = "systemz"

@ARR = internal global [100 x i32] zeroinitializer, align 4

; This test uses 'sub' instructions for gep offsets to allow
; codegen (LSR) to create optimal asm. If 'sub' is canonicalized
; to 'xor', then the backend needs to be able to see through
; that transform to produce optimal asm.

define dso_local zeroext i32 @foo(ptr noundef %a) #0 {
; CHECK-LABEL: define dso_local zeroext i32 @foo(
; CHECK-SAME: ptr noundef readnone captures(none) [[A:%.*]]) local_unnamed_addr #[[ATTR0:[0-9]+]] {
; CHECK-NEXT:  [[ENTRY:.*]]:
; CHECK-NEXT:    tail call void @populate(ptr noundef nonnull @ARR) #[[ATTR2:[0-9]+]]
; CHECK-NEXT:    [[TMP0:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), align 4, !tbaa [[INT_TBAA3:![0-9]+]]
; CHECK-NEXT:    [[TMP1:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 392), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_112:%.*]] = add i32 [[TMP1]], [[TMP0]]
; CHECK-NEXT:    [[TMP2:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 388), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_218:%.*]] = add i32 [[TMP2]], [[ADD_112]]
; CHECK-NEXT:    [[TMP3:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 384), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_3:%.*]] = add i32 [[TMP3]], [[ADD_218]]
; CHECK-NEXT:    [[TMP4:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 380), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_4:%.*]] = add i32 [[TMP4]], [[ADD_3]]
; CHECK-NEXT:    [[TMP5:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 376), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_5:%.*]] = add i32 [[TMP5]], [[ADD_4]]
; CHECK-NEXT:    [[TMP6:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 372), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_6:%.*]] = add i32 [[TMP6]], [[ADD_5]]
; CHECK-NEXT:    [[TMP7:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 368), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_7:%.*]] = add i32 [[TMP7]], [[ADD_6]]
; CHECK-NEXT:    [[TMP32:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 364), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_8:%.*]] = add i32 [[TMP32]], [[ADD_7]]
; CHECK-NEXT:    [[TMP33:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 360), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_9:%.*]] = add i32 [[TMP33]], [[ADD_8]]
; CHECK-NEXT:    [[TMP34:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 356), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_10:%.*]] = add i32 [[TMP34]], [[ADD_9]]
; CHECK-NEXT:    [[TMP36:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 352), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_11:%.*]] = add i32 [[TMP36]], [[ADD_10]]
; CHECK-NEXT:    [[TMP37:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 348), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_12:%.*]] = add i32 [[TMP37]], [[ADD_11]]
; CHECK-NEXT:    [[TMP39:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 344), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_13:%.*]] = add i32 [[TMP39]], [[ADD_12]]
; CHECK-NEXT:    [[TMP40:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 340), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_14:%.*]] = add i32 [[TMP40]], [[ADD_13]]
; CHECK-NEXT:    [[TMP42:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 336), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_15:%.*]] = add i32 [[TMP42]], [[ADD_14]]
; CHECK-NEXT:    [[TMP43:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 332), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_16:%.*]] = add i32 [[TMP43]], [[ADD_15]]
; CHECK-NEXT:    [[TMP45:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 328), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_17:%.*]] = add i32 [[TMP45]], [[ADD_16]]
; CHECK-NEXT:    [[TMP46:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 324), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_18:%.*]] = add i32 [[TMP46]], [[ADD_17]]
; CHECK-NEXT:    [[TMP48:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 320), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_19:%.*]] = add i32 [[TMP48]], [[ADD_18]]
; CHECK-NEXT:    [[TMP49:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 316), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_20:%.*]] = add i32 [[TMP49]], [[ADD_19]]
; CHECK-NEXT:    [[TMP51:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 312), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_21:%.*]] = add i32 [[TMP51]], [[ADD_20]]
; CHECK-NEXT:    [[TMP52:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 308), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_22:%.*]] = add i32 [[TMP52]], [[ADD_21]]
; CHECK-NEXT:    [[TMP53:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 304), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_23:%.*]] = add i32 [[TMP53]], [[ADD_22]]
; CHECK-NEXT:    [[TMP54:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 300), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_24:%.*]] = add i32 [[TMP54]], [[ADD_23]]
; CHECK-NEXT:    [[TMP55:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 296), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_25:%.*]] = add i32 [[TMP55]], [[ADD_24]]
; CHECK-NEXT:    [[TMP57:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 292), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_26:%.*]] = add i32 [[TMP57]], [[ADD_25]]
; CHECK-NEXT:    [[TMP59:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 288), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_27:%.*]] = add i32 [[TMP59]], [[ADD_26]]
; CHECK-NEXT:    [[TMP61:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 284), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_28:%.*]] = add i32 [[TMP61]], [[ADD_27]]
; CHECK-NEXT:    [[TMP63:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 280), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_29:%.*]] = add i32 [[TMP63]], [[ADD_28]]
; CHECK-NEXT:    [[TMP65:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 276), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_30:%.*]] = add i32 [[TMP65]], [[ADD_29]]
; CHECK-NEXT:    [[TMP67:%.*]] = load i32, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 272), align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[ADD_31:%.*]] = add i32 [[TMP67]], [[ADD_30]]
; CHECK-NEXT:    br label %[[FOR_BODY4:.*]]
; CHECK:       [[FOR_BODY4]]:
; CHECK-NEXT:    [[INDVARS_IV_1:%.*]] = phi i64 [ 0, %[[ENTRY]] ], [ [[INDVARS_IV_NEXT_1_7:%.*]], %[[FOR_BODY4]] ]
; CHECK-NEXT:    [[SUM_11_1:%.*]] = phi i32 [ [[ADD_31]], %[[ENTRY]] ], [ [[ADD_1_7:%.*]], %[[FOR_BODY4]] ]
; CHECK-NEXT:    [[DOTNEG7:%.*]] = mul nsw i64 [[INDVARS_IV_1]], -4
; CHECK-NEXT:    [[ADD_PTR_1:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG7]]
; CHECK-NEXT:    [[TMP8:%.*]] = load i32, ptr [[ADD_PTR_1]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[INDVARS_IV_NEXT_1_NEG:%.*]] = xor i64 [[INDVARS_IV_1]], -1
; CHECK-NEXT:    [[DOTNEG7_1:%.*]] = shl nsw i64 [[INDVARS_IV_NEXT_1_NEG]], 2
; CHECK-NEXT:    [[ADD_PTR_1_1:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG7_1]]
; CHECK-NEXT:    [[TMP9:%.*]] = load i32, ptr [[ADD_PTR_1_1]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[TMP10:%.*]] = add i32 [[TMP8]], [[TMP9]]
; CHECK-NEXT:    [[TMP35:%.*]] = shl i64 [[INDVARS_IV_1]], 2
; CHECK-NEXT:    [[DOTNEG7_2:%.*]] = sub nuw nsw i64 -8, [[TMP35]]
; CHECK-NEXT:    [[ADD_PTR_1_2:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG7_2]]
; CHECK-NEXT:    [[TMP11:%.*]] = load i32, ptr [[ADD_PTR_1_2]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[TMP12:%.*]] = add i32 [[TMP10]], [[TMP11]]
; CHECK-NEXT:    [[TMP38:%.*]] = shl i64 [[INDVARS_IV_1]], 2
; CHECK-NEXT:    [[DOTNEG7_3:%.*]] = sub nuw nsw i64 -12, [[TMP38]]
; CHECK-NEXT:    [[ADD_PTR_1_3:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG7_3]]
; CHECK-NEXT:    [[TMP13:%.*]] = load i32, ptr [[ADD_PTR_1_3]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[TMP14:%.*]] = add i32 [[TMP12]], [[TMP13]]
; CHECK-NEXT:    [[TMP41:%.*]] = shl i64 [[INDVARS_IV_1]], 2
; CHECK-NEXT:    [[DOTNEG7_4:%.*]] = sub nuw nsw i64 -16, [[TMP41]]
; CHECK-NEXT:    [[ADD_PTR_1_4:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG7_4]]
; CHECK-NEXT:    [[TMP15:%.*]] = load i32, ptr [[ADD_PTR_1_4]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[TMP16:%.*]] = add i32 [[TMP14]], [[TMP15]]
; CHECK-NEXT:    [[TMP44:%.*]] = shl i64 [[INDVARS_IV_1]], 2
; CHECK-NEXT:    [[DOTNEG7_5:%.*]] = sub nuw nsw i64 -20, [[TMP44]]
; CHECK-NEXT:    [[ADD_PTR_1_5:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG7_5]]
; CHECK-NEXT:    [[TMP17:%.*]] = load i32, ptr [[ADD_PTR_1_5]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[TMP18:%.*]] = add i32 [[TMP16]], [[TMP17]]
; CHECK-NEXT:    [[TMP47:%.*]] = shl i64 [[INDVARS_IV_1]], 2
; CHECK-NEXT:    [[DOTNEG7_6:%.*]] = sub nuw nsw i64 -24, [[TMP47]]
; CHECK-NEXT:    [[ADD_PTR_1_6:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG7_6]]
; CHECK-NEXT:    [[TMP19:%.*]] = load i32, ptr [[ADD_PTR_1_6]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[TMP20:%.*]] = add i32 [[TMP18]], [[TMP19]]
; CHECK-NEXT:    [[TMP50:%.*]] = shl i64 [[INDVARS_IV_1]], 2
; CHECK-NEXT:    [[DOTNEG7_7:%.*]] = sub nuw nsw i64 -28, [[TMP50]]
; CHECK-NEXT:    [[ADD_PTR_1_7:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG7_7]]
; CHECK-NEXT:    [[TMP21:%.*]] = load i32, ptr [[ADD_PTR_1_7]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[TMP22:%.*]] = add i32 [[TMP20]], [[TMP21]]
; CHECK-NEXT:    [[TMP23:%.*]] = shl i32 [[TMP22]], 1
; CHECK-NEXT:    [[ADD_1_7]] = add i32 [[TMP23]], [[SUM_11_1]]
; CHECK-NEXT:    [[INDVARS_IV_NEXT_1_7]] = add nuw nsw i64 [[INDVARS_IV_1]], 8
; CHECK-NEXT:    [[EXITCOND_1_NOT_7:%.*]] = icmp eq i64 [[INDVARS_IV_NEXT_1_7]], 32
; CHECK-NEXT:    br i1 [[EXITCOND_1_NOT_7]], label %[[FOR_BODY4_2:.*]], label %[[FOR_BODY4]], !llvm.loop [[LOOP7:![0-9]+]]
; CHECK:       [[FOR_BODY4_2]]:
; CHECK-NEXT:    [[INDVARS_IV_2:%.*]] = phi i64 [ [[INDVARS_IV_NEXT_2_7:%.*]], %[[FOR_BODY4_2]] ], [ 0, %[[FOR_BODY4]] ]
; CHECK-NEXT:    [[SUM_11_2:%.*]] = phi i32 [ [[ADD_2_7:%.*]], %[[FOR_BODY4_2]] ], [ [[ADD_1_7]], %[[FOR_BODY4]] ]
; CHECK-NEXT:    [[DOTNEG8:%.*]] = mul nsw i64 [[INDVARS_IV_2]], -4
; CHECK-NEXT:    [[ADD_PTR_2:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG8]]
; CHECK-NEXT:    [[TMP24:%.*]] = load i32, ptr [[ADD_PTR_2]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[MUL_2:%.*]] = mul i32 [[TMP24]], 3
; CHECK-NEXT:    [[ADD_2:%.*]] = add i32 [[MUL_2]], [[SUM_11_2]]
; CHECK-NEXT:    [[INDVARS_IV_NEXT_2_NEG:%.*]] = xor i64 [[INDVARS_IV_2]], -1
; CHECK-NEXT:    [[DOTNEG8_1:%.*]] = shl nsw i64 [[INDVARS_IV_NEXT_2_NEG]], 2
; CHECK-NEXT:    [[ADD_PTR_2_1:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG8_1]]
; CHECK-NEXT:    [[TMP25:%.*]] = load i32, ptr [[ADD_PTR_2_1]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[MUL_2_1:%.*]] = mul i32 [[TMP25]], 3
; CHECK-NEXT:    [[ADD_2_1:%.*]] = add i32 [[MUL_2_1]], [[ADD_2]]
; CHECK-NEXT:    [[TMP56:%.*]] = shl i64 [[INDVARS_IV_2]], 2
; CHECK-NEXT:    [[DOTNEG8_2:%.*]] = sub nuw nsw i64 -8, [[TMP56]]
; CHECK-NEXT:    [[ADD_PTR_2_2:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG8_2]]
; CHECK-NEXT:    [[TMP26:%.*]] = load i32, ptr [[ADD_PTR_2_2]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[MUL_2_2:%.*]] = mul i32 [[TMP26]], 3
; CHECK-NEXT:    [[ADD_2_2:%.*]] = add i32 [[MUL_2_2]], [[ADD_2_1]]
; CHECK-NEXT:    [[TMP58:%.*]] = shl i64 [[INDVARS_IV_2]], 2
; CHECK-NEXT:    [[DOTNEG8_3:%.*]] = sub nuw nsw i64 -12, [[TMP58]]
; CHECK-NEXT:    [[ADD_PTR_2_3:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG8_3]]
; CHECK-NEXT:    [[TMP27:%.*]] = load i32, ptr [[ADD_PTR_2_3]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[MUL_2_3:%.*]] = mul i32 [[TMP27]], 3
; CHECK-NEXT:    [[ADD_2_3:%.*]] = add i32 [[MUL_2_3]], [[ADD_2_2]]
; CHECK-NEXT:    [[TMP60:%.*]] = shl i64 [[INDVARS_IV_2]], 2
; CHECK-NEXT:    [[DOTNEG8_4:%.*]] = sub nuw nsw i64 -16, [[TMP60]]
; CHECK-NEXT:    [[ADD_PTR_2_4:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG8_4]]
; CHECK-NEXT:    [[TMP28:%.*]] = load i32, ptr [[ADD_PTR_2_4]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[MUL_2_4:%.*]] = mul i32 [[TMP28]], 3
; CHECK-NEXT:    [[ADD_2_4:%.*]] = add i32 [[MUL_2_4]], [[ADD_2_3]]
; CHECK-NEXT:    [[TMP62:%.*]] = shl i64 [[INDVARS_IV_2]], 2
; CHECK-NEXT:    [[DOTNEG8_5:%.*]] = sub nuw nsw i64 -20, [[TMP62]]
; CHECK-NEXT:    [[ADD_PTR_2_5:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG8_5]]
; CHECK-NEXT:    [[TMP29:%.*]] = load i32, ptr [[ADD_PTR_2_5]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[MUL_2_5:%.*]] = mul i32 [[TMP29]], 3
; CHECK-NEXT:    [[ADD_2_5:%.*]] = add i32 [[MUL_2_5]], [[ADD_2_4]]
; CHECK-NEXT:    [[TMP64:%.*]] = shl i64 [[INDVARS_IV_2]], 2
; CHECK-NEXT:    [[DOTNEG8_6:%.*]] = sub nuw nsw i64 -24, [[TMP64]]
; CHECK-NEXT:    [[ADD_PTR_2_6:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG8_6]]
; CHECK-NEXT:    [[TMP30:%.*]] = load i32, ptr [[ADD_PTR_2_6]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[MUL_2_6:%.*]] = mul i32 [[TMP30]], 3
; CHECK-NEXT:    [[ADD_2_6:%.*]] = add i32 [[MUL_2_6]], [[ADD_2_5]]
; CHECK-NEXT:    [[TMP66:%.*]] = shl i64 [[INDVARS_IV_2]], 2
; CHECK-NEXT:    [[DOTNEG8_7:%.*]] = sub nuw nsw i64 -28, [[TMP66]]
; CHECK-NEXT:    [[ADD_PTR_2_7:%.*]] = getelementptr inbounds i8, ptr getelementptr inbounds nuw (i8, ptr @ARR, i64 396), i64 [[DOTNEG8_7]]
; CHECK-NEXT:    [[TMP31:%.*]] = load i32, ptr [[ADD_PTR_2_7]], align 4, !tbaa [[INT_TBAA3]]
; CHECK-NEXT:    [[MUL_2_7:%.*]] = mul i32 [[TMP31]], 3
; CHECK-NEXT:    [[ADD_2_7]] = add i32 [[MUL_2_7]], [[ADD_2_6]]
; CHECK-NEXT:    [[INDVARS_IV_NEXT_2_7]] = add nuw nsw i64 [[INDVARS_IV_2]], 8
; CHECK-NEXT:    [[EXITCOND_2_NOT_7:%.*]] = icmp eq i64 [[INDVARS_IV_NEXT_2_7]], 32
; CHECK-NEXT:    br i1 [[EXITCOND_2_NOT_7]], label %[[FOR_INC5_2:.*]], label %[[FOR_BODY4_2]], !llvm.loop [[LOOP7]]
; CHECK:       [[FOR_INC5_2]]:
; CHECK-NEXT:    ret i32 [[ADD_2_7]]
;
entry:
  call void @populate(ptr noundef @ARR)
  br label %for.cond

for.cond:                                         ; preds = %for.inc5, %entry
  %j.0 = phi i32 [ 1, %entry ], [ %inc6, %for.inc5 ]
  %sum.0 = phi i32 [ 0, %entry ], [ %sum.1, %for.inc5 ]
  %cmp = icmp slt i32 %j.0, 4
  br i1 %cmp, label %for.body, label %for.cond.cleanup

for.cond.cleanup:                                 ; preds = %for.cond
  br label %for.end7

for.body:                                         ; preds = %for.cond
  br label %for.cond1

for.cond1:                                        ; preds = %for.inc, %for.body
  %sum.1 = phi i32 [ %sum.0, %for.body ], [ %add, %for.inc ]
  %i.0 = phi i32 [ 0, %for.body ], [ %inc, %for.inc ]
  %cmp2 = icmp slt i32 %i.0, 32
  br i1 %cmp2, label %for.body4, label %for.cond.cleanup3

for.cond.cleanup3:                                ; preds = %for.cond1
  br label %for.end

for.body4:                                        ; preds = %for.cond1
  %idx.ext = sext i32 %i.0 to i64
  %idx.neg = sub i64 0, %idx.ext
  %add.ptr = getelementptr inbounds i32, ptr getelementptr inbounds ([100 x i32], ptr @ARR, i64 0, i64 99), i64 %idx.neg
  %0 = load i32, ptr %add.ptr, align 4, !tbaa !3
  %mul = mul i32 %j.0, %0
  %add = add i32 %sum.1, %mul
  br label %for.inc

for.inc:                                          ; preds = %for.body4
  %inc = add nsw i32 %i.0, 1
  br label %for.cond1, !llvm.loop !7

for.end:                                          ; preds = %for.cond.cleanup3
  br label %for.inc5

for.inc5:                                         ; preds = %for.end
  %inc6 = add nsw i32 %j.0, 1
  br label %for.cond, !llvm.loop !9

for.end7:                                         ; preds = %for.cond.cleanup
  ret i32 %sum.0
}

declare dso_local void @populate(ptr noundef) #1

attributes #0 = { nounwind "frame-pointer"="all" "min-legal-vector-width"="0" "no-trapping-math"="true" "stack-protector-buffer-size"="8" "target-cpu"="z10" }
attributes #1 = { "frame-pointer"="all" "no-trapping-math"="true" "stack-protector-buffer-size"="8" "target-cpu"="z10" }
attributes #2 = { argmemonly nocallback nofree nosync nounwind willreturn }

!llvm.module.flags = !{!0, !1}
!llvm.ident = !{!2}

!0 = !{i32 1, !"wchar_size", i32 4}
!1 = !{i32 7, !"frame-pointer", i32 2}
!2 = !{!"clang version 15.0.0 (https://github.com/llvm/llvm-project.git 0bfef0669075f229fd325d8c8521c9adfb453f83)"}
!3 = !{!4, !4, i64 0}
!4 = !{!"int", !5, i64 0}
!5 = !{!"omnipotent char", !6, i64 0}
!6 = !{!"Simple C/C++ TBAA"}
!7 = distinct !{!7, !8}
!8 = !{!"llvm.loop.mustprogress"}
!9 = distinct !{!9, !8}
;.
; CHECK: [[INT_TBAA3]] = !{[[META4:![0-9]+]], [[META4]], i64 0}
; CHECK: [[META4]] = !{!"int", [[META5:![0-9]+]], i64 0}
; CHECK: [[META5]] = !{!"omnipotent char", [[META6:![0-9]+]], i64 0}
; CHECK: [[META6]] = !{!"Simple C/C++ TBAA"}
; CHECK: [[LOOP7]] = distinct !{[[LOOP7]], [[META8:![0-9]+]]}
; CHECK: [[META8]] = !{!"llvm.loop.mustprogress"}
;.
