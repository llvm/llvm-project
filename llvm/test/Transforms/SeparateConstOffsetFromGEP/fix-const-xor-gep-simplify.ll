; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 6
; RUN: opt -S -passes=separate-const-offset-from-gep %s | FileCheck %s

define ptr @src(i32 %0) {
; CHECK-LABEL: define ptr @src(
; CHECK-SAME: i32 [[TMP0:%.*]]) {
; CHECK-NEXT:    [[BASE:%.*]] = alloca [4 x i32], align 16
; CHECK-NEXT:    [[TMP2:%.*]] = xor i64 0, 3
; CHECK-NEXT:    [[GEP:%.*]] = getelementptr [4 x i32], ptr [[BASE]], i64 0, i64 [[TMP2]]
; CHECK-NEXT:    ret ptr [[GEP]]
;
  %base = alloca [4 x i32], align 16
  %xor = xor i64 0, 3
  %gep = getelementptr [4 x i32], ptr %base, i64 0, i64 %xor
  ret ptr %gep
}
