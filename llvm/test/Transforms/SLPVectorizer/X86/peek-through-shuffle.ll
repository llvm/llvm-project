; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -S < %s -mtriple=x86_64-unknown-linux-gnu -o - | FileCheck %s

define void @foo(ptr %0, <4 x float> %1) {
; CHECK-LABEL: @foo(
; CHECK-NEXT:  entry:
; CHECK-NEXT:    [[TMP2:%.*]] = getelementptr float, ptr null, i64 22
; CHECK-NEXT:    [[TMP3:%.*]] = load float, ptr [[TMP2]], align 8
; CHECK-NEXT:    [[TMP4:%.*]] = insertelement <4 x float> zeroinitializer, float [[TMP3]], i64 0
; CHECK-NEXT:    [[TMP5:%.*]] = getelementptr float, ptr null, i64 23
; CHECK-NEXT:    [[TMP6:%.*]] = load float, ptr [[TMP5]], align 4
; CHECK-NEXT:    [[TMP7:%.*]] = insertelement <4 x float> [[TMP4]], float [[TMP6]], i64 1
; CHECK-NEXT:    [[TMP8:%.*]] = shufflevector <4 x float> [[TMP1:%.*]], <4 x float> zeroinitializer, <4 x i32> <i32 0, i32 5, i32 6, i32 undef>
; CHECK-NEXT:    [[TMP9:%.*]] = insertelement <4 x float> [[TMP8]], float [[TMP3]], i64 3
; CHECK-NEXT:    [[TMP10:%.*]] = fpext <4 x float> [[TMP9]] to <4 x double>
; CHECK-NEXT:    store <4 x double> [[TMP10]], ptr [[TMP0:%.*]], align 32
; CHECK-NEXT:    ret void
;
entry:
  %2 = getelementptr float, ptr null, i64 22
  %3 = load float, ptr %2, align 8
  %4 = insertelement <4 x float> zeroinitializer, float %3, i64 0
  %5 = getelementptr float, ptr null, i64 23
  %6 = load float, ptr %5, align 4
  %7 = insertelement <4 x float> %4, float %6, i64 1
  %8 = shufflevector <4 x float> %1, <4 x float> zeroinitializer, <4 x i32> <i32 0, i32 5, i32 6, i32 undef>
  %9 = insertelement <4 x float> %8, float %3, i64 3
  %10 = fpext <4 x float> %9 to <4 x double>
  store <4 x double> %10, ptr %0, align 32
  ret void
}
