; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 4
; RUN: opt -S --passes=slp-vectorizer < %s | FileCheck %s

define i32 @test(i4 %0) {
; CHECK-LABEL: define i32 @test(
; CHECK-SAME: i4 [[TMP0:%.*]]) {
; CHECK-NEXT:  entry:
; CHECK-NEXT:    [[TMP1:%.*]] = insertelement <2 x i4> <i4 poison, i4 0>, i4 [[TMP0]], i32 0
; CHECK-NEXT:    [[TMP2:%.*]] = or <2 x i4> zeroinitializer, [[TMP1]]
; CHECK-NEXT:    [[ADD_R:%.*]] = extractelement <2 x i4> [[TMP2]], i32 0
; CHECK-NEXT:    [[ADD_R14:%.*]] = extractelement <2 x i4> [[TMP2]], i32 1
; CHECK-NEXT:    [[CMP_NOT:%.*]] = icmp eq i4 [[ADD_R]], [[ADD_R14]]
; CHECK-NEXT:    ret i32 0
;
entry:
  %1 = trunc i8 0 to i4
  %2 = trunc i8 0 to i4
  %add.r = or i4 %1, %0
  %add.r14 = or i4 0, %2
  %cmp.not = icmp eq i4 %add.r, %add.r14
  ret i32 0
}
