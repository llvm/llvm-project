; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -S -loop-vectorize < %s | FileCheck %s

target datalayout = "e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-n8:16:32:64-S128"

@a = global i32* null, align 8
@b = global i32* null, align 8
@c = global i32* null, align 8

; Don't create an exponetial IR for the edge masks needed when if-converting
; this code.

; PR16472

; CHECK-NOT: %6000000 =

define void @_Z3fn4i(i32 %p1) {
; CHECK-LABEL: @_Z3fn4i(
; CHECK-NEXT:  entry:
; CHECK-NEXT:    [[CMP88:%.*]] = icmp sgt i32 [[P1:%.*]], 0
; CHECK-NEXT:    br i1 [[CMP88]], label [[FOR_BODY_LR_PH:%.*]], label [[FOR_END:%.*]]
; CHECK:       for.body.lr.ph:
; CHECK-NEXT:    [[TMP0:%.*]] = load i32*, i32** @b, align 8
; CHECK-NEXT:    [[TMP1:%.*]] = load i32*, i32** @a, align 8
; CHECK-NEXT:    [[TMP2:%.*]] = load i32*, i32** @c, align 8
; CHECK-NEXT:    br label [[FOR_BODY:%.*]]
; CHECK:       for.body:
; CHECK-NEXT:    [[INDVARS_IV:%.*]] = phi i64 [ 0, [[FOR_BODY_LR_PH]] ], [ [[INDVARS_IV_NEXT:%.*]], [[_ZL3FN3II_EXIT58:%.*]] ]
; CHECK-NEXT:    [[ARRAYIDX:%.*]] = getelementptr inbounds i32, i32* [[TMP0]], i64 [[INDVARS_IV]]
; CHECK-NEXT:    [[TMP3:%.*]] = load i32, i32* [[ARRAYIDX]], align 4
; CHECK-NEXT:    [[TMP4:%.*]] = trunc i64 [[INDVARS_IV]] to i32
; CHECK-NEXT:    [[AND_I:%.*]] = and i32 [[TMP4]], 1
; CHECK-NEXT:    [[TOBOOL_I_I:%.*]] = icmp eq i32 [[AND_I]], 0
; CHECK-NEXT:    br i1 [[TOBOOL_I_I]], label [[IF_END_I:%.*]], label [[IF_THEN_I:%.*]]
; CHECK:       if.then.i:
; CHECK-NEXT:    [[AND_I_I:%.*]] = lshr i32 [[TMP3]], 2
; CHECK-NEXT:    [[AND_LOBIT_I_I:%.*]] = and i32 [[AND_I_I]], 1
; CHECK-NEXT:    [[TMP5:%.*]] = xor i32 [[AND_LOBIT_I_I]], 1
; CHECK-NEXT:    [[OR_I_I:%.*]] = or i32 [[TMP5]], [[TMP3]]
; CHECK-NEXT:    [[CMP_I:%.*]] = icmp sgt i32 [[OR_I_I]], 0
; CHECK-NEXT:    [[CONV_I:%.*]] = zext i1 [[CMP_I]] to i32
; CHECK-NEXT:    br label [[IF_END_I]]
; CHECK:       if.end.i:
; CHECK-NEXT:    [[TOBOOL_I87:%.*]] = phi i1 [ true, [[IF_THEN_I]] ], [ false, [[FOR_BODY]] ]
; CHECK-NEXT:    [[P1_ADDR_0_I:%.*]] = phi i32 [ [[CONV_I]], [[IF_THEN_I]] ], [ [[TMP3]], [[FOR_BODY]] ]
; CHECK-NEXT:    [[TMP6:%.*]] = trunc i64 [[INDVARS_IV]] to i32
; CHECK-NEXT:    [[AND1_I:%.*]] = and i32 [[TMP6]], 7
; CHECK-NEXT:    [[TOBOOL2_I:%.*]] = icmp eq i32 [[AND1_I]], 0
; CHECK-NEXT:    br i1 [[TOBOOL2_I]], label [[IF_END7_I:%.*]], label [[IF_THEN3_I:%.*]]
; CHECK:       if.then3.i:
; CHECK-NEXT:    [[P1_ADDR_0_LOBIT_I:%.*]] = lshr i32 [[P1_ADDR_0_I]], 31
; CHECK-NEXT:    [[AND6_I:%.*]] = and i32 [[P1_ADDR_0_I]], 1
; CHECK-NEXT:    [[OR_I:%.*]] = or i32 [[P1_ADDR_0_LOBIT_I]], [[AND6_I]]
; CHECK-NEXT:    br label [[IF_END7_I]]
; CHECK:       if.end7.i:
; CHECK-NEXT:    [[P1_ADDR_1_I:%.*]] = phi i32 [ [[OR_I]], [[IF_THEN3_I]] ], [ [[P1_ADDR_0_I]], [[IF_END_I]] ]
; CHECK-NEXT:    br i1 [[TOBOOL_I87]], label [[IF_THEN10_I:%.*]], label [[IF_END13_I:%.*]]
; CHECK:       if.then10.i:
; CHECK-NEXT:    [[CMP11_I:%.*]] = icmp sgt i32 [[P1_ADDR_1_I]], 0
; CHECK-NEXT:    [[CONV12_I:%.*]] = zext i1 [[CMP11_I]] to i32
; CHECK-NEXT:    br label [[IF_END13_I]]
; CHECK:       if.end13.i:
; CHECK-NEXT:    [[P1_ADDR_2_I:%.*]] = phi i32 [ [[CONV12_I]], [[IF_THEN10_I]] ], [ [[P1_ADDR_1_I]], [[IF_END7_I]] ]
; CHECK-NEXT:    br i1 [[TOBOOL_I_I]], label [[_Z3FN2III_EXIT:%.*]], label [[IF_THEN16_I:%.*]]
; CHECK:       if.then16.i:
; CHECK-NEXT:    [[AND17_I:%.*]] = lshr i32 [[P1_ADDR_2_I]], 3
; CHECK-NEXT:    [[AND17_LOBIT_I:%.*]] = and i32 [[AND17_I]], 1
; CHECK-NEXT:    br label [[_Z3FN2III_EXIT]]
; CHECK:       _Z3fn2iii.exit:
; CHECK-NEXT:    [[P1_ADDR_3_I:%.*]] = phi i32 [ [[AND17_LOBIT_I]], [[IF_THEN16_I]] ], [ [[P1_ADDR_2_I]], [[IF_END13_I]] ]
; CHECK-NEXT:    [[TMP7:%.*]] = trunc i64 [[INDVARS_IV]] to i32
; CHECK-NEXT:    [[SHR_I:%.*]] = ashr i32 [[TMP7]], 1
; CHECK-NEXT:    [[AND_I18_I:%.*]] = and i32 [[SHR_I]], 1
; CHECK-NEXT:    [[TOBOOL_I19_I:%.*]] = icmp ne i32 [[AND_I18_I]], 0
; CHECK-NEXT:    br i1 [[TOBOOL_I19_I]], label [[IF_THEN_I20_I:%.*]], label [[IF_END_I_I:%.*]]
; CHECK:       if.then.i20.i:
; CHECK-NEXT:    [[CMP_I_I:%.*]] = icmp sgt i32 [[P1_ADDR_3_I]], 0
; CHECK-NEXT:    [[CONV_I_I:%.*]] = zext i1 [[CMP_I_I]] to i32
; CHECK-NEXT:    br label [[IF_END_I_I]]
; CHECK:       if.end.i.i:
; CHECK-NEXT:    [[P1_ADDR_0_I21_I:%.*]] = phi i32 [ [[CONV_I_I]], [[IF_THEN_I20_I]] ], [ [[P1_ADDR_3_I]], [[_Z3FN2III_EXIT]] ]
; CHECK-NEXT:    [[AND1_I_I:%.*]] = and i32 [[SHR_I]], 7
; CHECK-NEXT:    [[TOBOOL2_I_I:%.*]] = icmp eq i32 [[AND1_I_I]], 0
; CHECK-NEXT:    br i1 [[TOBOOL2_I_I]], label [[IF_END7_I_I:%.*]], label [[IF_THEN3_I_I:%.*]]
; CHECK:       if.then3.i.i:
; CHECK-NEXT:    [[P1_ADDR_0_LOBIT_I_I:%.*]] = lshr i32 [[P1_ADDR_0_I21_I]], 31
; CHECK-NEXT:    [[AND6_I_I:%.*]] = and i32 [[P1_ADDR_0_I21_I]], 1
; CHECK-NEXT:    [[OR_I22_I:%.*]] = or i32 [[P1_ADDR_0_LOBIT_I_I]], [[AND6_I_I]]
; CHECK-NEXT:    br label [[IF_END7_I_I]]
; CHECK:       if.end7.i.i:
; CHECK-NEXT:    [[P1_ADDR_1_I_I:%.*]] = phi i32 [ [[OR_I22_I]], [[IF_THEN3_I_I]] ], [ [[P1_ADDR_0_I21_I]], [[IF_END_I_I]] ]
; CHECK-NEXT:    br i1 [[TOBOOL_I19_I]], label [[IF_THEN10_I_I:%.*]], label [[IF_END13_I_I:%.*]]
; CHECK:       if.then10.i.i:
; CHECK-NEXT:    [[CMP11_I_I:%.*]] = icmp sgt i32 [[P1_ADDR_1_I_I]], 0
; CHECK-NEXT:    [[CONV12_I_I:%.*]] = zext i1 [[CMP11_I_I]] to i32
; CHECK-NEXT:    br label [[IF_END13_I_I]]
; CHECK:       if.end13.i.i:
; CHECK-NEXT:    [[P1_ADDR_2_I_I:%.*]] = phi i32 [ [[CONV12_I_I]], [[IF_THEN10_I_I]] ], [ [[P1_ADDR_1_I_I]], [[IF_END7_I_I]] ]
; CHECK-NEXT:    [[AND14_I_I:%.*]] = and i32 [[SHR_I]], 5
; CHECK-NEXT:    [[TOBOOL15_I_I:%.*]] = icmp eq i32 [[AND14_I_I]], 0
; CHECK-NEXT:    br i1 [[TOBOOL15_I_I]], label [[_Z3FN2III_EXIT_I:%.*]], label [[IF_THEN16_I_I:%.*]]
; CHECK:       if.then16.i.i:
; CHECK-NEXT:    [[AND17_I_I:%.*]] = lshr i32 [[P1_ADDR_2_I_I]], 3
; CHECK-NEXT:    [[AND17_LOBIT_I_I:%.*]] = and i32 [[AND17_I_I]], 1
; CHECK-NEXT:    br label [[_Z3FN2III_EXIT_I]]
; CHECK:       _Z3fn2iii.exit.i:
; CHECK-NEXT:    [[P1_ADDR_3_I_I:%.*]] = phi i32 [ [[AND17_LOBIT_I_I]], [[IF_THEN16_I_I]] ], [ [[P1_ADDR_2_I_I]], [[IF_END13_I_I]] ]
; CHECK-NEXT:    [[TMP8:%.*]] = trunc i64 [[INDVARS_IV]] to i32
; CHECK-NEXT:    [[TOBOOL_I11_I:%.*]] = icmp eq i32 [[TMP8]], 0
; CHECK-NEXT:    br i1 [[TOBOOL_I11_I]], label [[_ZL3FN3II_EXIT:%.*]], label [[IF_THEN_I15_I:%.*]]
; CHECK:       if.then.i15.i:
; CHECK-NEXT:    [[AND_I12_I:%.*]] = lshr i32 [[P1_ADDR_3_I_I]], 2
; CHECK-NEXT:    [[AND_LOBIT_I13_I:%.*]] = and i32 [[AND_I12_I]], 1
; CHECK-NEXT:    [[TMP9:%.*]] = xor i32 [[AND_LOBIT_I13_I]], 1
; CHECK-NEXT:    [[OR_I14_I:%.*]] = or i32 [[TMP9]], [[P1_ADDR_3_I_I]]
; CHECK-NEXT:    br label [[_ZL3FN3II_EXIT]]
; CHECK:       _ZL3fn3ii.exit:
; CHECK-NEXT:    [[P1_ADDR_0_I16_I:%.*]] = phi i32 [ [[OR_I14_I]], [[IF_THEN_I15_I]] ], [ [[P1_ADDR_3_I_I]], [[_Z3FN2III_EXIT_I]] ]
; CHECK-NEXT:    [[ARRAYIDX2:%.*]] = getelementptr inbounds i32, i32* [[TMP1]], i64 [[INDVARS_IV]]
; CHECK-NEXT:    store i32 [[P1_ADDR_0_I16_I]], i32* [[ARRAYIDX2]], align 4
; CHECK-NEXT:    [[ARRAYIDX4:%.*]] = getelementptr inbounds i32, i32* [[TMP0]], i64 [[INDVARS_IV]]
; CHECK-NEXT:    [[TMP10:%.*]] = load i32, i32* [[ARRAYIDX4]], align 4
; CHECK-NEXT:    br i1 [[TOBOOL_I_I]], label [[_Z3FN1II_EXIT_I26:%.*]], label [[IF_THEN_I_I21:%.*]]
; CHECK:       if.then.i.i21:
; CHECK-NEXT:    [[AND_I_I18:%.*]] = lshr i32 [[TMP10]], 2
; CHECK-NEXT:    [[AND_LOBIT_I_I19:%.*]] = and i32 [[AND_I_I18]], 1
; CHECK-NEXT:    [[TMP11:%.*]] = xor i32 [[AND_LOBIT_I_I19]], 1
; CHECK-NEXT:    [[OR_I_I20:%.*]] = or i32 [[TMP11]], [[TMP10]]
; CHECK-NEXT:    br label [[_Z3FN1II_EXIT_I26]]
; CHECK:       _Z3fn1ii.exit.i26:
; CHECK-NEXT:    [[P1_ADDR_0_I_I22:%.*]] = phi i32 [ [[OR_I_I20]], [[IF_THEN_I_I21]] ], [ [[TMP10]], [[_ZL3FN3II_EXIT]] ]
; CHECK-NEXT:    br i1 [[TOBOOL_I87]], label [[IF_THEN_I63:%.*]], label [[IF_END_I67:%.*]]
; CHECK:       if.then.i63:
; CHECK-NEXT:    [[CMP_I61:%.*]] = icmp sgt i32 [[P1_ADDR_0_I_I22]], 0
; CHECK-NEXT:    [[CONV_I62:%.*]] = zext i1 [[CMP_I61]] to i32
; CHECK-NEXT:    br label [[IF_END_I67]]
; CHECK:       if.end.i67:
; CHECK-NEXT:    [[P1_ADDR_0_I64:%.*]] = phi i32 [ [[CONV_I62]], [[IF_THEN_I63]] ], [ [[P1_ADDR_0_I_I22]], [[_Z3FN1II_EXIT_I26]] ]
; CHECK-NEXT:    br i1 [[TOBOOL2_I]], label [[IF_END7_I73:%.*]], label [[IF_THEN3_I71:%.*]]
; CHECK:       if.then3.i71:
; CHECK-NEXT:    [[P1_ADDR_0_LOBIT_I68:%.*]] = lshr i32 [[P1_ADDR_0_I64]], 31
; CHECK-NEXT:    [[AND6_I69:%.*]] = and i32 [[P1_ADDR_0_I64]], 1
; CHECK-NEXT:    [[OR_I70:%.*]] = or i32 [[P1_ADDR_0_LOBIT_I68]], [[AND6_I69]]
; CHECK-NEXT:    br label [[IF_END7_I73]]
; CHECK:       if.end7.i73:
; CHECK-NEXT:    [[P1_ADDR_1_I72:%.*]] = phi i32 [ [[OR_I70]], [[IF_THEN3_I71]] ], [ [[P1_ADDR_0_I64]], [[IF_END_I67]] ]
; CHECK-NEXT:    br i1 [[TOBOOL_I87]], label [[IF_THEN10_I76:%.*]], label [[IF_END13_I80:%.*]]
; CHECK:       if.then10.i76:
; CHECK-NEXT:    [[CMP11_I74:%.*]] = icmp sgt i32 [[P1_ADDR_1_I72]], 0
; CHECK-NEXT:    [[CONV12_I75:%.*]] = zext i1 [[CMP11_I74]] to i32
; CHECK-NEXT:    br label [[IF_END13_I80]]
; CHECK:       if.end13.i80:
; CHECK-NEXT:    [[P1_ADDR_2_I77:%.*]] = phi i32 [ [[CONV12_I75]], [[IF_THEN10_I76]] ], [ [[P1_ADDR_1_I72]], [[IF_END7_I73]] ]
; CHECK-NEXT:    br i1 [[TOBOOL_I_I]], label [[_Z3FN2III_EXIT85:%.*]], label [[IF_THEN16_I83:%.*]]
; CHECK:       if.then16.i83:
; CHECK-NEXT:    [[AND17_I81:%.*]] = lshr i32 [[P1_ADDR_2_I77]], 3
; CHECK-NEXT:    [[AND17_LOBIT_I82:%.*]] = and i32 [[AND17_I81]], 1
; CHECK-NEXT:    br label [[_Z3FN2III_EXIT85]]
; CHECK:       _Z3fn2iii.exit85:
; CHECK-NEXT:    [[P1_ADDR_3_I84:%.*]] = phi i32 [ [[AND17_LOBIT_I82]], [[IF_THEN16_I83]] ], [ [[P1_ADDR_2_I77]], [[IF_END13_I80]] ]
; CHECK-NEXT:    br i1 [[TOBOOL_I19_I]], label [[IF_THEN_I20_I29:%.*]], label [[IF_END_I_I33:%.*]]
; CHECK:       if.then.i20.i29:
; CHECK-NEXT:    [[CMP_I_I27:%.*]] = icmp sgt i32 [[P1_ADDR_3_I84]], 0
; CHECK-NEXT:    [[CONV_I_I28:%.*]] = zext i1 [[CMP_I_I27]] to i32
; CHECK-NEXT:    br label [[IF_END_I_I33]]
; CHECK:       if.end.i.i33:
; CHECK-NEXT:    [[P1_ADDR_0_I21_I30:%.*]] = phi i32 [ [[CONV_I_I28]], [[IF_THEN_I20_I29]] ], [ [[P1_ADDR_3_I84]], [[_Z3FN2III_EXIT85]] ]
; CHECK-NEXT:    br i1 [[TOBOOL2_I_I]], label [[IF_END7_I_I39:%.*]], label [[IF_THEN3_I_I37:%.*]]
; CHECK:       if.then3.i.i37:
; CHECK-NEXT:    [[P1_ADDR_0_LOBIT_I_I34:%.*]] = lshr i32 [[P1_ADDR_0_I21_I30]], 31
; CHECK-NEXT:    [[AND6_I_I35:%.*]] = and i32 [[P1_ADDR_0_I21_I30]], 1
; CHECK-NEXT:    [[OR_I22_I36:%.*]] = or i32 [[P1_ADDR_0_LOBIT_I_I34]], [[AND6_I_I35]]
; CHECK-NEXT:    br label [[IF_END7_I_I39]]
; CHECK:       if.end7.i.i39:
; CHECK-NEXT:    [[P1_ADDR_1_I_I38:%.*]] = phi i32 [ [[OR_I22_I36]], [[IF_THEN3_I_I37]] ], [ [[P1_ADDR_0_I21_I30]], [[IF_END_I_I33]] ]
; CHECK-NEXT:    br i1 [[TOBOOL_I19_I]], label [[IF_THEN10_I_I42:%.*]], label [[IF_END13_I_I46:%.*]]
; CHECK:       if.then10.i.i42:
; CHECK-NEXT:    [[CMP11_I_I40:%.*]] = icmp sgt i32 [[P1_ADDR_1_I_I38]], 0
; CHECK-NEXT:    [[CONV12_I_I41:%.*]] = zext i1 [[CMP11_I_I40]] to i32
; CHECK-NEXT:    br label [[IF_END13_I_I46]]
; CHECK:       if.end13.i.i46:
; CHECK-NEXT:    [[P1_ADDR_2_I_I43:%.*]] = phi i32 [ [[CONV12_I_I41]], [[IF_THEN10_I_I42]] ], [ [[P1_ADDR_1_I_I38]], [[IF_END7_I_I39]] ]
; CHECK-NEXT:    br i1 [[TOBOOL15_I_I]], label [[_Z3FN2III_EXIT_I52:%.*]], label [[IF_THEN16_I_I49:%.*]]
; CHECK:       if.then16.i.i49:
; CHECK-NEXT:    [[AND17_I_I47:%.*]] = lshr i32 [[P1_ADDR_2_I_I43]], 3
; CHECK-NEXT:    [[AND17_LOBIT_I_I48:%.*]] = and i32 [[AND17_I_I47]], 1
; CHECK-NEXT:    br label [[_Z3FN2III_EXIT_I52]]
; CHECK:       _Z3fn2iii.exit.i52:
; CHECK-NEXT:    [[P1_ADDR_3_I_I50:%.*]] = phi i32 [ [[AND17_LOBIT_I_I48]], [[IF_THEN16_I_I49]] ], [ [[P1_ADDR_2_I_I43]], [[IF_END13_I_I46]] ]
; CHECK-NEXT:    br i1 [[TOBOOL_I11_I]], label [[_ZL3FN3II_EXIT58]], label [[IF_THEN_I15_I56:%.*]]
; CHECK:       if.then.i15.i56:
; CHECK-NEXT:    [[AND_I12_I53:%.*]] = lshr i32 [[P1_ADDR_3_I_I50]], 2
; CHECK-NEXT:    [[AND_LOBIT_I13_I54:%.*]] = and i32 [[AND_I12_I53]], 1
; CHECK-NEXT:    [[TMP12:%.*]] = xor i32 [[AND_LOBIT_I13_I54]], 1
; CHECK-NEXT:    [[OR_I14_I55:%.*]] = or i32 [[TMP12]], [[P1_ADDR_3_I_I50]]
; CHECK-NEXT:    br label [[_ZL3FN3II_EXIT58]]
; CHECK:       _ZL3fn3ii.exit58:
; CHECK-NEXT:    [[P1_ADDR_0_I16_I57:%.*]] = phi i32 [ [[OR_I14_I55]], [[IF_THEN_I15_I56]] ], [ [[P1_ADDR_3_I_I50]], [[_Z3FN2III_EXIT_I52]] ]
; CHECK-NEXT:    [[ARRAYIDX7:%.*]] = getelementptr inbounds i32, i32* [[TMP2]], i64 [[INDVARS_IV]]
; CHECK-NEXT:    store i32 [[P1_ADDR_0_I16_I57]], i32* [[ARRAYIDX7]], align 4
; CHECK-NEXT:    [[INDVARS_IV_NEXT]] = add i64 [[INDVARS_IV]], 1
; CHECK-NEXT:    [[LFTR_WIDEIV:%.*]] = trunc i64 [[INDVARS_IV_NEXT]] to i32
; CHECK-NEXT:    [[EXITCOND:%.*]] = icmp ne i32 [[LFTR_WIDEIV]], [[P1]]
; CHECK-NEXT:    br i1 [[EXITCOND]], label [[FOR_BODY]], label [[FOR_COND_FOR_END_CRIT_EDGE:%.*]]
; CHECK:       for.cond.for.end_crit_edge:
; CHECK-NEXT:    br label [[FOR_END]]
; CHECK:       for.end:
; CHECK-NEXT:    ret void
;
entry:
  %cmp88 = icmp sgt i32 %p1, 0
  br i1 %cmp88, label %for.body.lr.ph, label %for.end

for.body.lr.ph:
  %0 = load i32*, i32** @b, align 8
  %1 = load i32*, i32** @a, align 8
  %2 = load i32*, i32** @c, align 8
  br label %for.body

for.body:
  %indvars.iv = phi i64 [ 0, %for.body.lr.ph ], [ %indvars.iv.next, %_ZL3fn3ii.exit58 ]
  %arrayidx = getelementptr inbounds i32, i32* %0, i64 %indvars.iv
  %3 = load i32, i32* %arrayidx, align 4  %4 = trunc i64 %indvars.iv to i32
  %and.i = and i32 %4, 1
  %tobool.i.i = icmp eq i32 %and.i, 0
  br i1 %tobool.i.i, label %if.end.i, label %if.then.i

if.then.i:
  %and.i.i = lshr i32 %3, 2
  %and.lobit.i.i = and i32 %and.i.i, 1
  %5 = xor i32 %and.lobit.i.i, 1
  %or.i.i = or i32 %5, %3
  %cmp.i = icmp sgt i32 %or.i.i, 0
  %conv.i = zext i1 %cmp.i to i32
  br label %if.end.i

if.end.i:
  %tobool.i87 = phi i1 [ true, %if.then.i ], [ false, %for.body ]
  %p1.addr.0.i = phi i32 [ %conv.i, %if.then.i ], [ %3, %for.body ]
  %6 = trunc i64 %indvars.iv to i32
  %and1.i = and i32 %6, 7
  %tobool2.i = icmp eq i32 %and1.i, 0
  br i1 %tobool2.i, label %if.end7.i, label %if.then3.i

if.then3.i:
  %p1.addr.0.lobit.i = lshr i32 %p1.addr.0.i, 31
  %and6.i = and i32 %p1.addr.0.i, 1
  %or.i = or i32 %p1.addr.0.lobit.i, %and6.i
  br label %if.end7.i

if.end7.i:
  %p1.addr.1.i = phi i32 [ %or.i, %if.then3.i ], [ %p1.addr.0.i, %if.end.i ]
  br i1 %tobool.i87, label %if.then10.i, label %if.end13.i

if.then10.i:
  %cmp11.i = icmp sgt i32 %p1.addr.1.i, 0
  %conv12.i = zext i1 %cmp11.i to i32
  br label %if.end13.i

if.end13.i:
  %p1.addr.2.i = phi i32 [ %conv12.i, %if.then10.i ], [ %p1.addr.1.i, %if.end7.i ]
  br i1 %tobool.i.i, label %_Z3fn2iii.exit, label %if.then16.i

if.then16.i:
  %and17.i = lshr i32 %p1.addr.2.i, 3
  %and17.lobit.i = and i32 %and17.i, 1
  br label %_Z3fn2iii.exit

_Z3fn2iii.exit:
  %p1.addr.3.i = phi i32 [ %and17.lobit.i, %if.then16.i ], [ %p1.addr.2.i, %if.end13.i ]
  %7 = trunc i64 %indvars.iv to i32
  %shr.i = ashr i32 %7, 1
  %and.i18.i = and i32 %shr.i, 1
  %tobool.i19.i = icmp ne i32 %and.i18.i, 0
  br i1 %tobool.i19.i, label %if.then.i20.i, label %if.end.i.i

if.then.i20.i:
  %cmp.i.i = icmp sgt i32 %p1.addr.3.i, 0
  %conv.i.i = zext i1 %cmp.i.i to i32
  br label %if.end.i.i

if.end.i.i:
  %p1.addr.0.i21.i = phi i32 [ %conv.i.i, %if.then.i20.i ], [ %p1.addr.3.i, %_Z3fn2iii.exit ]
  %and1.i.i = and i32 %shr.i, 7
  %tobool2.i.i = icmp eq i32 %and1.i.i, 0
  br i1 %tobool2.i.i, label %if.end7.i.i, label %if.then3.i.i

if.then3.i.i:
  %p1.addr.0.lobit.i.i = lshr i32 %p1.addr.0.i21.i, 31
  %and6.i.i = and i32 %p1.addr.0.i21.i, 1
  %or.i22.i = or i32 %p1.addr.0.lobit.i.i, %and6.i.i
  br label %if.end7.i.i

if.end7.i.i:
  %p1.addr.1.i.i = phi i32 [ %or.i22.i, %if.then3.i.i ], [ %p1.addr.0.i21.i, %if.end.i.i ]
  br i1 %tobool.i19.i, label %if.then10.i.i, label %if.end13.i.i

if.then10.i.i:
  %cmp11.i.i = icmp sgt i32 %p1.addr.1.i.i, 0
  %conv12.i.i = zext i1 %cmp11.i.i to i32
  br label %if.end13.i.i

if.end13.i.i:
  %p1.addr.2.i.i = phi i32 [ %conv12.i.i, %if.then10.i.i ], [ %p1.addr.1.i.i, %if.end7.i.i ]
  %and14.i.i = and i32 %shr.i, 5
  %tobool15.i.i = icmp eq i32 %and14.i.i, 0
  br i1 %tobool15.i.i, label %_Z3fn2iii.exit.i, label %if.then16.i.i

if.then16.i.i:
  %and17.i.i = lshr i32 %p1.addr.2.i.i, 3
  %and17.lobit.i.i = and i32 %and17.i.i, 1
  br label %_Z3fn2iii.exit.i

_Z3fn2iii.exit.i:
  %p1.addr.3.i.i = phi i32 [ %and17.lobit.i.i, %if.then16.i.i ], [ %p1.addr.2.i.i, %if.end13.i.i ]
  %8 = trunc i64 %indvars.iv to i32
  %tobool.i11.i = icmp eq i32 %8, 0
  br i1 %tobool.i11.i, label %_ZL3fn3ii.exit, label %if.then.i15.i

if.then.i15.i:
  %and.i12.i = lshr i32 %p1.addr.3.i.i, 2
  %and.lobit.i13.i = and i32 %and.i12.i, 1
  %9 = xor i32 %and.lobit.i13.i, 1
  %or.i14.i = or i32 %9, %p1.addr.3.i.i
  br label %_ZL3fn3ii.exit

_ZL3fn3ii.exit:
  %p1.addr.0.i16.i = phi i32 [ %or.i14.i, %if.then.i15.i ], [ %p1.addr.3.i.i, %_Z3fn2iii.exit.i ]
  %arrayidx2 = getelementptr inbounds i32, i32* %1, i64 %indvars.iv
  store i32 %p1.addr.0.i16.i, i32* %arrayidx2, align 4  %arrayidx4 = getelementptr inbounds i32, i32* %0, i64 %indvars.iv
  %10 = load i32, i32* %arrayidx4, align 4  br i1 %tobool.i.i, label %_Z3fn1ii.exit.i26, label %if.then.i.i21

if.then.i.i21:
  %and.i.i18 = lshr i32 %10, 2
  %and.lobit.i.i19 = and i32 %and.i.i18, 1
  %11 = xor i32 %and.lobit.i.i19, 1
  %or.i.i20 = or i32 %11, %10
  br label %_Z3fn1ii.exit.i26

_Z3fn1ii.exit.i26:
  %p1.addr.0.i.i22 = phi i32 [ %or.i.i20, %if.then.i.i21 ], [ %10, %_ZL3fn3ii.exit ]
  br i1 %tobool.i87, label %if.then.i63, label %if.end.i67

if.then.i63:
  %cmp.i61 = icmp sgt i32 %p1.addr.0.i.i22, 0
  %conv.i62 = zext i1 %cmp.i61 to i32
  br label %if.end.i67

if.end.i67:
  %p1.addr.0.i64 = phi i32 [ %conv.i62, %if.then.i63 ], [ %p1.addr.0.i.i22, %_Z3fn1ii.exit.i26 ]
  br i1 %tobool2.i, label %if.end7.i73, label %if.then3.i71

if.then3.i71:
  %p1.addr.0.lobit.i68 = lshr i32 %p1.addr.0.i64, 31
  %and6.i69 = and i32 %p1.addr.0.i64, 1
  %or.i70 = or i32 %p1.addr.0.lobit.i68, %and6.i69
  br label %if.end7.i73

if.end7.i73:
  %p1.addr.1.i72 = phi i32 [ %or.i70, %if.then3.i71 ], [ %p1.addr.0.i64, %if.end.i67 ]
  br i1 %tobool.i87, label %if.then10.i76, label %if.end13.i80

if.then10.i76:
  %cmp11.i74 = icmp sgt i32 %p1.addr.1.i72, 0
  %conv12.i75 = zext i1 %cmp11.i74 to i32
  br label %if.end13.i80

if.end13.i80:
  %p1.addr.2.i77 = phi i32 [ %conv12.i75, %if.then10.i76 ], [ %p1.addr.1.i72, %if.end7.i73 ]
  br i1 %tobool.i.i, label %_Z3fn2iii.exit85, label %if.then16.i83

if.then16.i83:
  %and17.i81 = lshr i32 %p1.addr.2.i77, 3
  %and17.lobit.i82 = and i32 %and17.i81, 1
  br label %_Z3fn2iii.exit85

_Z3fn2iii.exit85:
  %p1.addr.3.i84 = phi i32 [ %and17.lobit.i82, %if.then16.i83 ], [ %p1.addr.2.i77, %if.end13.i80 ]
  br i1 %tobool.i19.i, label %if.then.i20.i29, label %if.end.i.i33

if.then.i20.i29:
  %cmp.i.i27 = icmp sgt i32 %p1.addr.3.i84, 0
  %conv.i.i28 = zext i1 %cmp.i.i27 to i32
  br label %if.end.i.i33

if.end.i.i33:
  %p1.addr.0.i21.i30 = phi i32 [ %conv.i.i28, %if.then.i20.i29 ], [ %p1.addr.3.i84, %_Z3fn2iii.exit85 ]
  br i1 %tobool2.i.i, label %if.end7.i.i39, label %if.then3.i.i37

if.then3.i.i37:
  %p1.addr.0.lobit.i.i34 = lshr i32 %p1.addr.0.i21.i30, 31
  %and6.i.i35 = and i32 %p1.addr.0.i21.i30, 1
  %or.i22.i36 = or i32 %p1.addr.0.lobit.i.i34, %and6.i.i35
  br label %if.end7.i.i39

if.end7.i.i39:
  %p1.addr.1.i.i38 = phi i32 [ %or.i22.i36, %if.then3.i.i37 ], [ %p1.addr.0.i21.i30, %if.end.i.i33 ]
  br i1 %tobool.i19.i, label %if.then10.i.i42, label %if.end13.i.i46

if.then10.i.i42:
  %cmp11.i.i40 = icmp sgt i32 %p1.addr.1.i.i38, 0
  %conv12.i.i41 = zext i1 %cmp11.i.i40 to i32
  br label %if.end13.i.i46

if.end13.i.i46:
  %p1.addr.2.i.i43 = phi i32 [ %conv12.i.i41, %if.then10.i.i42 ], [ %p1.addr.1.i.i38, %if.end7.i.i39 ]
  br i1 %tobool15.i.i, label %_Z3fn2iii.exit.i52, label %if.then16.i.i49

if.then16.i.i49:
  %and17.i.i47 = lshr i32 %p1.addr.2.i.i43, 3
  %and17.lobit.i.i48 = and i32 %and17.i.i47, 1
  br label %_Z3fn2iii.exit.i52

_Z3fn2iii.exit.i52:
  %p1.addr.3.i.i50 = phi i32 [ %and17.lobit.i.i48, %if.then16.i.i49 ], [ %p1.addr.2.i.i43, %if.end13.i.i46 ]
  br i1 %tobool.i11.i, label %_ZL3fn3ii.exit58, label %if.then.i15.i56

if.then.i15.i56:
  %and.i12.i53 = lshr i32 %p1.addr.3.i.i50, 2
  %and.lobit.i13.i54 = and i32 %and.i12.i53, 1
  %12 = xor i32 %and.lobit.i13.i54, 1
  %or.i14.i55 = or i32 %12, %p1.addr.3.i.i50
  br label %_ZL3fn3ii.exit58

_ZL3fn3ii.exit58:
  %p1.addr.0.i16.i57 = phi i32 [ %or.i14.i55, %if.then.i15.i56 ], [ %p1.addr.3.i.i50, %_Z3fn2iii.exit.i52 ]
  %arrayidx7 = getelementptr inbounds i32, i32* %2, i64 %indvars.iv
  store i32 %p1.addr.0.i16.i57, i32* %arrayidx7, align 4  %indvars.iv.next = add i64 %indvars.iv, 1
  %lftr.wideiv = trunc i64 %indvars.iv.next to i32
  %exitcond = icmp ne i32 %lftr.wideiv, %p1
  br i1 %exitcond, label %for.body, label %for.cond.for.end_crit_edge

for.cond.for.end_crit_edge:
  br label %for.end

for.end:
  ret void
}
