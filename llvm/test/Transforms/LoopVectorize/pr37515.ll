; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -passes='loop-vectorize' -S -pass-remarks-missed=loop-vectorize < %s 2>&1 | FileCheck %s
;
; FP primary induction is not supported in LV. Make sure Legal bails out.
;
; CHECK: loop not vectorized

define void @PR37515() {
; CHECK-LABEL: @PR37515(
; CHECK-NEXT:  entry:
; CHECK-NEXT:    br label [[LOOP:%.*]]
; CHECK:       loop:
; CHECK-NEXT:    [[P:%.*]] = phi float [ 1.900000e+01, [[ENTRY:%.*]] ], [ [[A:%.*]], [[LOOP]] ]
; CHECK-NEXT:    [[A]] = fadd fast float [[P]], -1.000000e+00
; CHECK-NEXT:    [[M:%.*]] = fmul fast float [[A]], [[A]]
; CHECK-NEXT:    [[C:%.*]] = fcmp fast ugt float [[A]], 2.000000e+00
; CHECK-NEXT:    br i1 [[C]], label [[LOOP]], label [[EXIT:%.*]]
; CHECK:       exit:
; CHECK-NEXT:    unreachable
;
entry:
  br label %loop

loop:
  %p = phi float [ 19.0, %entry ], [ %a, %loop ]
  %a = fadd fast float %p, -1.0
  %m = fmul fast float %a, %a
  %c = fcmp fast ugt float %a, 2.0
  br i1 %c, label %loop, label %exit

exit:
  unreachable
}
