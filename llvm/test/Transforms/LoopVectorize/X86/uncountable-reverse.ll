; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 6
; RUN: opt < %s -passes=loop-vectorize -S | FileCheck %s

target triple = "x86_64-unknown-linux-gnu"

@gg = constant [80 x i8] c"22                                                                              "

define i1 @test() #0 {
entry:
  br label %loop

loop:
  %iv = phi i64 [ 79, %entry ], [ %iv.next, %loop ]
  %iv.next = add i64 %iv, -1
  %bound.check = icmp ne i64 %iv, 0
  %gep = getelementptr [1 x i8], ptr @gg, i64 %iv
  %load = load i8, ptr %gep, align 1
  %cmp = icmp eq i8 %load, 32
  %continue = and i1 %cmp, %bound.check
  br i1 %continue, label %loop, label %exit

exit:
  ret i1 %cmp
}

attributes #0 = { "target-cpu"="znver3" }
