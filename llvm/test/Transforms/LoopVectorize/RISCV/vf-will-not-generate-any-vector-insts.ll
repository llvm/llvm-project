; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt  -mattr=+v -passes=loop-vectorize -S %s | FileCheck %s

target datalayout = "e-m:e-p:64:64-i64:64-i128:128-n32:64-S128"
target triple = "riscv64-unknown-unknown-elf"

define void @vf_will_not_generate_any_vector_insts(ptr %src, ptr %dst) {
; CHECK-LABEL: define void @vf_will_not_generate_any_vector_insts(
; CHECK-SAME: ptr [[SRC:%.*]], ptr [[DST:%.*]]) #[[ATTR0:[0-9]+]] {
; CHECK-NEXT:  [[ENTRY:.*]]:
; CHECK-NEXT:    br label %[[LOOP:.*]]
; CHECK:       [[LOOP]]:
; CHECK-NEXT:    [[TMP2:%.*]] = phi i64 [ 0, %[[ENTRY]] ], [ [[TMP3:%.*]], %[[LOOP]] ]
; CHECK-NEXT:    [[DOTPRE:%.*]] = load i32, ptr [[SRC]], align 4
; CHECK-NEXT:    store i32 [[DOTPRE]], ptr [[DST]], align 4
; CHECK-NEXT:    [[TMP3]] = add nuw i64 [[TMP2]], 1
; CHECK-NEXT:    [[EC:%.*]] = icmp eq i64 [[TMP3]], 100
; CHECK-NEXT:    br i1 [[EC]], label %[[EXIT:.*]], label %[[LOOP]]
; CHECK:       [[EXIT]]:
; CHECK-NEXT:    ret void
;
entry:
  br label %loop

loop:
  %0 = phi i64 [ 0, %entry ], [ %1, %loop ]
  %.pre = load i32, ptr %src, align 4
  store i32 %.pre, ptr %dst, align 4
  %1 = add nuw i64 %0, 1
  %ec = icmp eq i64 %1, 100
  br i1 %ec, label %exit, label %loop

exit:
  ret void
}
