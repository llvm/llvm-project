; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -S -passes=partially-inline-libcalls -mtriple=x86_64-unknown-linux-gnu -pass-remarks-missed=partially-inline-libcalls 2>%t < %s | FileCheck %s
; RUN: FileCheck %s -check-prefix=CHECK-REMARK --input-file=%t

define double @foo(double %x) {
; CHECK-LABEL: @foo(
; CHECK-REMARK: could not consider library function for partial inlining: must tail call
; CHECK-NEXT:    [[R:%.*]] = musttail call double @sqrt(double [[X:%.*]])
; CHECK-NEXT:    ret double [[R]]
;
  %r = musttail call double @sqrt(double %x)
  ret double %r
}

declare double @sqrt(double)
