; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -passes=partial-inliner -S < %s | FileCheck %s
declare i1 @llvm.public.type.test(ptr, metadata)

define void @dummy() {
; CHECK-LABEL: @dummy(
; CHECK-NEXT:  entry:
; CHECK-NEXT:    br i1 false, label [[WHILE_END:%.*]], label [[WHILE_BODY:%.*]]
; CHECK:       while.body:
; CHECK-NEXT:    call void @dummy.1.while.body()
; CHECK-NEXT:    br label [[WHILE_END]]
; CHECK:       while.end:
; CHECK-NEXT:    ret void
;
entry:
  br i1 false, label %while.end, label %while.body

while.body:                                       ; preds = %entry
  call void @dummy()
  br label %while.end

unreachable.block:               ; No predecessors!
  %0 = tail call i1 @llvm.public.type.test(ptr null, metadata !"test-function")
  %result = getelementptr ptr, ptr null, i64 1
  br label %while.end

while.end:                                        ; preds = %unreachable.block, %while.body, %entry
  ret void
}
