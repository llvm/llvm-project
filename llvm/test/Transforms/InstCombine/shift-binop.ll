; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -passes=instcombine -S | FileCheck %s

define i32 @src1(i32 %arg0) {
; CHECK-LABEL: @src1(
; CHECK-NEXT:    [[SHL:%.*]] = shl nuw i32 [[ARG0:%.*]], 2
; CHECK-NEXT:    [[OUTMIN:%.*]] = call i32 @llvm.umin.i32(i32 [[SHL]], i32 8)
; CHECK-NEXT:    ret i32 [[OUTMIN]]
;
  %1 = call i32 @llvm.umin.i32(i32 %arg0, i32 2)
  %2 = shl nuw i32 %1, 2
  %3 = call i32 @llvm.umin.i32(i32 %2, i32 16)
  ret i32 %3
}

define i32 @src2(i32 %arg0) {
; CHECK-LABEL: @src2(
; CHECK-NEXT:    [[INMAX:%.*]] = call i32 @llvm.smax.i32(i32 [[ARG0:%.*]], i32 2)
; CHECK-NEXT:    [[SHL:%.*]] = shl nsw i32 [[INMAX]], 18
; CHECK-NEXT:    [[OUTMAX:%.*]] = call i32 @llvm.smax.i32(i32 [[SHL]], i32 10)
; CHECK-NEXT:    ret i32 [[OUTMAX]]
;
  %1 = call i32 @llvm.smax.i32(i32 %arg0, i32 2)
  %2 = shl nsw i32 %1, 18
  %3 = call i32 @llvm.smax.i32(i32 %2, i32 10)
  ret i32 %3
}
