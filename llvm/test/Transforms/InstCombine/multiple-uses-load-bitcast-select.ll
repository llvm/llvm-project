; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -passes=instcombine -S -data-layout="E-m:e-i1:8:16-i8:8:16-i64:64-f128:64-v128:64-a:8:16-n32:64" | FileCheck %s

define void @PR35618(ptr %st1, ptr %st2) {
; CHECK-LABEL: @PR35618(
; CHECK-NEXT:    ret void
;
  %y1 = alloca double
  %z1 = alloca double
  %ld1 = load double, ptr %y1
  %ld2 = load double, ptr %z1
  %tmp = fcmp olt double %ld1, %ld2
  %sel = select i1 %tmp, ptr %y1, ptr %z1
  %tmp12 = load i64, ptr %sel
  store i64 %tmp12, ptr %st1
  store i64 %tmp12, ptr %st2
  ret void
}

define void @PR35618_asan(ptr %st1, ptr %st2) sanitize_address {
; CHECK-LABEL: @PR35618_asan(
; CHECK-NEXT:    ret void
;
  %y1 = alloca double
  %z1 = alloca double
  %ld1 = load double, ptr %y1
  %ld2 = load double, ptr %z1
  %tmp = fcmp olt double %ld1, %ld2
  %sel = select i1 %tmp, ptr %y1, ptr %z1
  %tmp12 = load i64, ptr %sel
  store i64 %tmp12, ptr %st1
  store i64 %tmp12, ptr %st2
  ret void
}

