; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 6
; RUN: opt -passes=instcombine -S < %s | FileCheck %s

define i64 @f(i1 %c) {
; CHECK-LABEL: define i64 @f(
; CHECK-SAME: i1 [[C:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    ret i64 poison
;
entry:
  %sel = select i1 %c, i64 3, i64 0
  %trunc = trunc i64 %sel to i8
  %div = sdiv i8 -1, %trunc
  %rem = srem i8 -1, %div
  %cmp = icmp ult i8 %trunc, %rem
  %zext = zext i1 %cmp to i64
  %res = select i1 false, i64 %sel, i64 %zext
  ret i64 %res
}
