; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -passes=instcombine -S | FileCheck %s

; This used to crash, depending on the particular worklist iteration order.
define void @pr59613(<6 x i16> %0) {
; CHECK-LABEL: @pr59613(
; CHECK-NEXT:    store <6 x i16> poison, ptr null, align 16
; CHECK-NEXT:    ret void
;
  %cmp1 = icmp ne <6 x i16> %0, zeroinitializer
  %or = or <6 x i1> <i1 true, i1 false, i1 false, i1 false, i1 undef, i1 undef>, %cmp1
  %sext = sext <6 x i1> %or to <6 x i16>
  %not = xor <6 x i16> %sext, <i16 -1, i16 -1, i16 -1, i16 -1, i16 -1, i16 -1>
  store <6 x i16> %not, ptr null, align 16
  ret void
}
