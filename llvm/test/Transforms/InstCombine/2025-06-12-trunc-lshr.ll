; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 5
; RUN: opt -S -passes=instcombine < %s | FileCheck %s

define i1 @src(i32 %0, ptr writeonly captures(none) initializes((0, 4)) %p) local_unnamed_addr #0 {
; CHECK-LABEL: define i1 @src(
; CHECK-SAME: i32 [[TMP0:%.*]], ptr writeonly captures(none) initializes((0, 4)) [[P:%.*]]) local_unnamed_addr #[[ATTR0:[0-9]+]] {
; CHECK-NEXT:  [[COMMON_RET1:.*:]]
; CHECK-NEXT:    [[DOTLOBIT:%.*]] = lshr i32 [[TMP0]], 31
; CHECK-NEXT:    store i32 [[DOTLOBIT]], ptr [[P]], align 1
; CHECK-NEXT:    ret i1 false
;
common.ret1:
  %.lobit = lshr i32 %0, 31
  %1 = trunc nuw i32 %.lobit to i1
  %2 = icmp slt i32 %0, 0
  %not. = xor i1 %1, true
  %common.ret1.op = select i1 %not., i1 %2, i1 false
  store i32 %.lobit, ptr %p, align 1
  ret i1 %common.ret1.op
}

attributes #0 = { mustprogress nofree norecurse nosync nounwind willreturn memory(argmem: write) }

