; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt -passes=instcombine -S < %s | FileCheck %s

define <4 x ptr> @PR41270(ptr %x) {
; CHECK-LABEL: @PR41270(
; CHECK-NEXT:    [[T3:%.*]] = getelementptr inbounds nuw i8, ptr [[X:%.*]], i64 6
; CHECK-NEXT:    [[INS2:%.*]] = insertelement <4 x ptr> <ptr poison, ptr undef, ptr undef, ptr undef>, ptr [[T3]], i64 0
; CHECK-NEXT:    ret <4 x ptr> [[INS2]]
;
  %ins = insertelement <4 x ptr> undef, ptr %x, i32 0
  %splat = shufflevector <4 x ptr> %ins, <4 x ptr> undef, <4 x i32> zeroinitializer
  %t2 = getelementptr inbounds [4 x i16], <4 x ptr> %splat, i32 0, i32 3
  %t3 = extractelement <4 x ptr> %t2, i32 3
  %ins2 = insertelement <4 x ptr> undef, ptr %t3, i32 0
  ret <4 x ptr> %ins2
}
