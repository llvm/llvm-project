; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 6
; RUN: opt -mtriple=nvptx64-nvidia-cuda -passes=load-store-vectorizer -S -o - %s | FileCheck %s

; Vectorize and emit valid code (Issue #54896).

define void @int8x3a2(ptr nocapture align 2 %ptr) {
; CHECK-LABEL: define void @int8x3a2(
; CHECK-SAME: ptr align 2 captures(none) [[PTR:%.*]]) {
; CHECK-NEXT:    [[PTR0:%.*]] = getelementptr i8, ptr [[PTR]], i64 0
; CHECK-NEXT:    [[PTR2:%.*]] = getelementptr i8, ptr [[PTR]], i64 2
; CHECK-NEXT:    [[TMP1:%.*]] = load <2 x i8>, ptr [[PTR0]], align 2
; CHECK-NEXT:    [[L01:%.*]] = extractelement <2 x i8> [[TMP1]], i32 0
; CHECK-NEXT:    [[L12:%.*]] = extractelement <2 x i8> [[TMP1]], i32 1
; CHECK-NEXT:    [[L2:%.*]] = load i8, ptr [[PTR2]], align 2
; CHECK-NEXT:    [[TMP2:%.*]] = insertelement <2 x i8> poison, i8 [[L2]], i32 0
; CHECK-NEXT:    [[TMP3:%.*]] = insertelement <2 x i8> [[TMP2]], i8 [[L12]], i32 1
; CHECK-NEXT:    store <2 x i8> [[TMP3]], ptr [[PTR0]], align 2
; CHECK-NEXT:    store i8 [[L01]], ptr [[PTR2]], align 2
; CHECK-NEXT:    ret void
;
  %ptr0 = getelementptr i8, ptr %ptr, i64 0
  %ptr1 = getelementptr i8, ptr %ptr, i64 1
  %ptr2 = getelementptr i8, ptr %ptr, i64 2

  %l0 = load i8, ptr %ptr0, align 2
  %l1 = load i8, ptr %ptr1, align 1
  %l2 = load i8, ptr %ptr2, align 2

  store i8 %l2, ptr %ptr0, align 2
  store i8 %l1, ptr %ptr1, align 1
  store i8 %l0, ptr %ptr2, align 2

  ret void

}

define void @int8x3a4(ptr nocapture align 4 %ptr) {
; CHECK-LABEL: define void @int8x3a4(
; CHECK-SAME: ptr align 4 captures(none) [[PTR:%.*]]) {
; CHECK-NEXT:    [[PTR0:%.*]] = getelementptr i8, ptr [[PTR]], i64 0
; CHECK-NEXT:    [[PTR2:%.*]] = getelementptr i8, ptr [[PTR]], i64 2
; CHECK-NEXT:    [[TMP1:%.*]] = call <4 x i8> @llvm.masked.load.v4i8.p0(ptr align 4 [[PTR0]], <4 x i1> <i1 true, i1 true, i1 true, i1 false>, <4 x i8> poison)
; CHECK-NEXT:    [[L01:%.*]] = extractelement <4 x i8> [[TMP1]], i32 0
; CHECK-NEXT:    [[L12:%.*]] = extractelement <4 x i8> [[TMP1]], i32 1
; CHECK-NEXT:    [[L23:%.*]] = extractelement <4 x i8> [[TMP1]], i32 2
; CHECK-NEXT:    [[EXTEND4:%.*]] = extractelement <4 x i8> [[TMP1]], i32 3
; CHECK-NEXT:    [[TMP2:%.*]] = insertelement <2 x i8> poison, i8 [[L23]], i32 0
; CHECK-NEXT:    [[TMP3:%.*]] = insertelement <2 x i8> [[TMP2]], i8 [[L12]], i32 1
; CHECK-NEXT:    store <2 x i8> [[TMP3]], ptr [[PTR0]], align 4
; CHECK-NEXT:    store i8 [[L01]], ptr [[PTR2]], align 2
; CHECK-NEXT:    ret void
;
  %ptr0 = getelementptr i8, ptr %ptr, i64 0
  %ptr1 = getelementptr i8, ptr %ptr, i64 1
  %ptr2 = getelementptr i8, ptr %ptr, i64 2

  %l0 = load i8, ptr %ptr0, align 4
  %l1 = load i8, ptr %ptr1, align 1
  %l2 = load i8, ptr %ptr2, align 2

  store i8 %l2, ptr %ptr0, align 4
  store i8 %l1, ptr %ptr1, align 1
  store i8 %l0, ptr %ptr2, align 2

  ret void

}

define void @int8x12a4(ptr nocapture align 4 %ptr) {
; CHECK-LABEL: define void @int8x12a4(
; CHECK-SAME: ptr align 4 captures(none) [[PTR:%.*]]) {
; CHECK-NEXT:    [[PTR0:%.*]] = getelementptr i8, ptr [[PTR]], i64 0
; CHECK-NEXT:    [[PTR4:%.*]] = getelementptr i8, ptr [[PTR]], i64 4
; CHECK-NEXT:    [[PTR8:%.*]] = getelementptr i8, ptr [[PTR]], i64 8
; CHECK-NEXT:    [[TMP1:%.*]] = load <4 x i8>, ptr [[PTR0]], align 4
; CHECK-NEXT:    [[L01:%.*]] = extractelement <4 x i8> [[TMP1]], i32 0
; CHECK-NEXT:    [[L12:%.*]] = extractelement <4 x i8> [[TMP1]], i32 1
; CHECK-NEXT:    [[L23:%.*]] = extractelement <4 x i8> [[TMP1]], i32 2
; CHECK-NEXT:    [[L34:%.*]] = extractelement <4 x i8> [[TMP1]], i32 3
; CHECK-NEXT:    [[TMP2:%.*]] = load <4 x i8>, ptr [[PTR4]], align 4
; CHECK-NEXT:    [[L45:%.*]] = extractelement <4 x i8> [[TMP2]], i32 0
; CHECK-NEXT:    [[L56:%.*]] = extractelement <4 x i8> [[TMP2]], i32 1
; CHECK-NEXT:    [[L67:%.*]] = extractelement <4 x i8> [[TMP2]], i32 2
; CHECK-NEXT:    [[L78:%.*]] = extractelement <4 x i8> [[TMP2]], i32 3
; CHECK-NEXT:    [[TMP3:%.*]] = load <4 x i8>, ptr [[PTR8]], align 4
; CHECK-NEXT:    [[L89:%.*]] = extractelement <4 x i8> [[TMP3]], i32 0
; CHECK-NEXT:    [[L910:%.*]] = extractelement <4 x i8> [[TMP3]], i32 1
; CHECK-NEXT:    [[LA11:%.*]] = extractelement <4 x i8> [[TMP3]], i32 2
; CHECK-NEXT:    [[LB12:%.*]] = extractelement <4 x i8> [[TMP3]], i32 3
; CHECK-NEXT:    [[TMP4:%.*]] = insertelement <4 x i8> poison, i8 [[LB12]], i32 0
; CHECK-NEXT:    [[TMP5:%.*]] = insertelement <4 x i8> [[TMP4]], i8 [[LA11]], i32 1
; CHECK-NEXT:    [[TMP6:%.*]] = insertelement <4 x i8> [[TMP5]], i8 [[L910]], i32 2
; CHECK-NEXT:    [[TMP7:%.*]] = insertelement <4 x i8> [[TMP6]], i8 [[L89]], i32 3
; CHECK-NEXT:    store <4 x i8> [[TMP7]], ptr [[PTR0]], align 4
; CHECK-NEXT:    [[TMP8:%.*]] = insertelement <4 x i8> poison, i8 [[L78]], i32 0
; CHECK-NEXT:    [[TMP9:%.*]] = insertelement <4 x i8> [[TMP8]], i8 [[L67]], i32 1
; CHECK-NEXT:    [[TMP10:%.*]] = insertelement <4 x i8> [[TMP9]], i8 [[L56]], i32 2
; CHECK-NEXT:    [[TMP11:%.*]] = insertelement <4 x i8> [[TMP10]], i8 [[L45]], i32 3
; CHECK-NEXT:    store <4 x i8> [[TMP11]], ptr [[PTR4]], align 4
; CHECK-NEXT:    [[TMP12:%.*]] = insertelement <4 x i8> poison, i8 [[L34]], i32 0
; CHECK-NEXT:    [[TMP13:%.*]] = insertelement <4 x i8> [[TMP12]], i8 [[L23]], i32 1
; CHECK-NEXT:    [[TMP14:%.*]] = insertelement <4 x i8> [[TMP13]], i8 [[L12]], i32 2
; CHECK-NEXT:    [[TMP15:%.*]] = insertelement <4 x i8> [[TMP14]], i8 [[L01]], i32 3
; CHECK-NEXT:    store <4 x i8> [[TMP15]], ptr [[PTR8]], align 4
; CHECK-NEXT:    ret void
;
  %ptr0 = getelementptr i8, ptr %ptr, i64 0
  %ptr1 = getelementptr i8, ptr %ptr, i64 1
  %ptr2 = getelementptr i8, ptr %ptr, i64 2
  %ptr3 = getelementptr i8, ptr %ptr, i64 3
  %ptr4 = getelementptr i8, ptr %ptr, i64 4
  %ptr5 = getelementptr i8, ptr %ptr, i64 5
  %ptr6 = getelementptr i8, ptr %ptr, i64 6
  %ptr7 = getelementptr i8, ptr %ptr, i64 7
  %ptr8 = getelementptr i8, ptr %ptr, i64 8
  %ptr9 = getelementptr i8, ptr %ptr, i64 9
  %ptra = getelementptr i8, ptr %ptr, i64 10
  %ptrb = getelementptr i8, ptr %ptr, i64 11

  %l0 = load i8, ptr %ptr0, align 4
  %l1 = load i8, ptr %ptr1, align 1
  %l2 = load i8, ptr %ptr2, align 2
  %l3 = load i8, ptr %ptr3, align 1
  %l4 = load i8, ptr %ptr4, align 4
  %l5 = load i8, ptr %ptr5, align 1
  %l6 = load i8, ptr %ptr6, align 2
  %l7 = load i8, ptr %ptr7, align 1
  %l8 = load i8, ptr %ptr8, align 4
  %l9 = load i8, ptr %ptr9, align 1
  %la = load i8, ptr %ptra, align 2
  %lb = load i8, ptr %ptrb, align 1

  store i8 %lb, ptr %ptr0, align 4
  store i8 %la, ptr %ptr1, align 1
  store i8 %l9, ptr %ptr2, align 2
  store i8 %l8, ptr %ptr3, align 1
  store i8 %l7, ptr %ptr4, align 4
  store i8 %l6, ptr %ptr5, align 1
  store i8 %l5, ptr %ptr6, align 2
  store i8 %l4, ptr %ptr7, align 1
  store i8 %l3, ptr %ptr8, align 4
  store i8 %l2, ptr %ptr9, align 1
  store i8 %l1, ptr %ptra, align 2
  store i8 %l0, ptr %ptrb, align 1

  ret void

}


define void @int8x16a4(ptr nocapture align 4 %ptr) {
; CHECK-LABEL: define void @int8x16a4(
; CHECK-SAME: ptr align 4 captures(none) [[PTR:%.*]]) {
; CHECK-NEXT:    [[PTR0:%.*]] = getelementptr i8, ptr [[PTR]], i64 0
; CHECK-NEXT:    [[PTR4:%.*]] = getelementptr i8, ptr [[PTR]], i64 4
; CHECK-NEXT:    [[PTR8:%.*]] = getelementptr i8, ptr [[PTR]], i64 8
; CHECK-NEXT:    [[PTRC:%.*]] = getelementptr i8, ptr [[PTR]], i64 12
; CHECK-NEXT:    [[TMP1:%.*]] = load <4 x i8>, ptr [[PTR0]], align 4
; CHECK-NEXT:    [[L01:%.*]] = extractelement <4 x i8> [[TMP1]], i32 0
; CHECK-NEXT:    [[L12:%.*]] = extractelement <4 x i8> [[TMP1]], i32 1
; CHECK-NEXT:    [[L23:%.*]] = extractelement <4 x i8> [[TMP1]], i32 2
; CHECK-NEXT:    [[L34:%.*]] = extractelement <4 x i8> [[TMP1]], i32 3
; CHECK-NEXT:    [[TMP2:%.*]] = load <4 x i8>, ptr [[PTR4]], align 4
; CHECK-NEXT:    [[L45:%.*]] = extractelement <4 x i8> [[TMP2]], i32 0
; CHECK-NEXT:    [[L56:%.*]] = extractelement <4 x i8> [[TMP2]], i32 1
; CHECK-NEXT:    [[L67:%.*]] = extractelement <4 x i8> [[TMP2]], i32 2
; CHECK-NEXT:    [[L78:%.*]] = extractelement <4 x i8> [[TMP2]], i32 3
; CHECK-NEXT:    [[TMP3:%.*]] = load <4 x i8>, ptr [[PTR8]], align 4
; CHECK-NEXT:    [[L89:%.*]] = extractelement <4 x i8> [[TMP3]], i32 0
; CHECK-NEXT:    [[L910:%.*]] = extractelement <4 x i8> [[TMP3]], i32 1
; CHECK-NEXT:    [[LA11:%.*]] = extractelement <4 x i8> [[TMP3]], i32 2
; CHECK-NEXT:    [[LB12:%.*]] = extractelement <4 x i8> [[TMP3]], i32 3
; CHECK-NEXT:    [[TMP4:%.*]] = load <4 x i8>, ptr [[PTRC]], align 4
; CHECK-NEXT:    [[LC13:%.*]] = extractelement <4 x i8> [[TMP4]], i32 0
; CHECK-NEXT:    [[LD14:%.*]] = extractelement <4 x i8> [[TMP4]], i32 1
; CHECK-NEXT:    [[LE15:%.*]] = extractelement <4 x i8> [[TMP4]], i32 2
; CHECK-NEXT:    [[LF16:%.*]] = extractelement <4 x i8> [[TMP4]], i32 3
; CHECK-NEXT:    [[TMP5:%.*]] = insertelement <4 x i8> poison, i8 [[LF16]], i32 0
; CHECK-NEXT:    [[TMP6:%.*]] = insertelement <4 x i8> [[TMP5]], i8 [[LE15]], i32 1
; CHECK-NEXT:    [[TMP7:%.*]] = insertelement <4 x i8> [[TMP6]], i8 [[LD14]], i32 2
; CHECK-NEXT:    [[TMP8:%.*]] = insertelement <4 x i8> [[TMP7]], i8 [[LC13]], i32 3
; CHECK-NEXT:    store <4 x i8> [[TMP8]], ptr [[PTRC]], align 4
; CHECK-NEXT:    [[TMP9:%.*]] = insertelement <4 x i8> poison, i8 [[LB12]], i32 0
; CHECK-NEXT:    [[TMP10:%.*]] = insertelement <4 x i8> [[TMP9]], i8 [[LA11]], i32 1
; CHECK-NEXT:    [[TMP11:%.*]] = insertelement <4 x i8> [[TMP10]], i8 [[L910]], i32 2
; CHECK-NEXT:    [[TMP12:%.*]] = insertelement <4 x i8> [[TMP11]], i8 [[L89]], i32 3
; CHECK-NEXT:    store <4 x i8> [[TMP12]], ptr [[PTR0]], align 4
; CHECK-NEXT:    [[TMP13:%.*]] = insertelement <4 x i8> poison, i8 [[L78]], i32 0
; CHECK-NEXT:    [[TMP14:%.*]] = insertelement <4 x i8> [[TMP13]], i8 [[L67]], i32 1
; CHECK-NEXT:    [[TMP15:%.*]] = insertelement <4 x i8> [[TMP14]], i8 [[L56]], i32 2
; CHECK-NEXT:    [[TMP16:%.*]] = insertelement <4 x i8> [[TMP15]], i8 [[L45]], i32 3
; CHECK-NEXT:    store <4 x i8> [[TMP16]], ptr [[PTR4]], align 4
; CHECK-NEXT:    [[TMP17:%.*]] = insertelement <4 x i8> poison, i8 [[L34]], i32 0
; CHECK-NEXT:    [[TMP18:%.*]] = insertelement <4 x i8> [[TMP17]], i8 [[L23]], i32 1
; CHECK-NEXT:    [[TMP19:%.*]] = insertelement <4 x i8> [[TMP18]], i8 [[L12]], i32 2
; CHECK-NEXT:    [[TMP20:%.*]] = insertelement <4 x i8> [[TMP19]], i8 [[L01]], i32 3
; CHECK-NEXT:    store <4 x i8> [[TMP20]], ptr [[PTR8]], align 4
; CHECK-NEXT:    ret void
;
  %ptr0 = getelementptr i8, ptr %ptr, i64 0
  %ptr1 = getelementptr i8, ptr %ptr, i64 1
  %ptr2 = getelementptr i8, ptr %ptr, i64 2
  %ptr3 = getelementptr i8, ptr %ptr, i64 3
  %ptr4 = getelementptr i8, ptr %ptr, i64 4
  %ptr5 = getelementptr i8, ptr %ptr, i64 5
  %ptr6 = getelementptr i8, ptr %ptr, i64 6
  %ptr7 = getelementptr i8, ptr %ptr, i64 7
  %ptr8 = getelementptr i8, ptr %ptr, i64 8
  %ptr9 = getelementptr i8, ptr %ptr, i64 9
  %ptra = getelementptr i8, ptr %ptr, i64 10
  %ptrb = getelementptr i8, ptr %ptr, i64 11
  %ptrc = getelementptr i8, ptr %ptr, i64 12
  %ptrd = getelementptr i8, ptr %ptr, i64 13
  %ptre = getelementptr i8, ptr %ptr, i64 14
  %ptrf = getelementptr i8, ptr %ptr, i64 15

  %l0 = load i8, ptr %ptr0, align 4
  %l1 = load i8, ptr %ptr1, align 1
  %l2 = load i8, ptr %ptr2, align 2
  %l3 = load i8, ptr %ptr3, align 1
  %l4 = load i8, ptr %ptr4, align 4
  %l5 = load i8, ptr %ptr5, align 1
  %l6 = load i8, ptr %ptr6, align 2
  %l7 = load i8, ptr %ptr7, align 1
  %l8 = load i8, ptr %ptr8, align 4
  %l9 = load i8, ptr %ptr9, align 1
  %la = load i8, ptr %ptra, align 2
  %lb = load i8, ptr %ptrb, align 1
  %lc = load i8, ptr %ptrc, align 4
  %ld = load i8, ptr %ptrd, align 1
  %le = load i8, ptr %ptre, align 2
  %lf = load i8, ptr %ptrf, align 1

  store i8 %lf, ptr %ptrc, align 4
  store i8 %le, ptr %ptrd, align 1
  store i8 %ld, ptr %ptre, align 2
  store i8 %lc, ptr %ptrf, align 1
  store i8 %lb, ptr %ptr0, align 4
  store i8 %la, ptr %ptr1, align 1
  store i8 %l9, ptr %ptr2, align 2
  store i8 %l8, ptr %ptr3, align 1
  store i8 %l7, ptr %ptr4, align 4
  store i8 %l6, ptr %ptr5, align 1
  store i8 %l5, ptr %ptr6, align 2
  store i8 %l4, ptr %ptr7, align 1
  store i8 %l3, ptr %ptr8, align 4
  store i8 %l2, ptr %ptr9, align 1
  store i8 %l1, ptr %ptra, align 2
  store i8 %l0, ptr %ptrb, align 1

  ret void

}

define void @int8x8a8(ptr nocapture align 8 %ptr) {
; CHECK-LABEL: define void @int8x8a8(
; CHECK-SAME: ptr align 8 captures(none) [[PTR:%.*]]) {
; CHECK-NEXT:    [[PTR0:%.*]] = getelementptr i8, ptr [[PTR]], i64 0
; CHECK-NEXT:    [[TMP1:%.*]] = load <8 x i8>, ptr [[PTR0]], align 8
; CHECK-NEXT:    [[L01:%.*]] = extractelement <8 x i8> [[TMP1]], i32 0
; CHECK-NEXT:    [[L12:%.*]] = extractelement <8 x i8> [[TMP1]], i32 1
; CHECK-NEXT:    [[L23:%.*]] = extractelement <8 x i8> [[TMP1]], i32 2
; CHECK-NEXT:    [[L34:%.*]] = extractelement <8 x i8> [[TMP1]], i32 3
; CHECK-NEXT:    [[L45:%.*]] = extractelement <8 x i8> [[TMP1]], i32 4
; CHECK-NEXT:    [[L56:%.*]] = extractelement <8 x i8> [[TMP1]], i32 5
; CHECK-NEXT:    [[L67:%.*]] = extractelement <8 x i8> [[TMP1]], i32 6
; CHECK-NEXT:    [[L78:%.*]] = extractelement <8 x i8> [[TMP1]], i32 7
; CHECK-NEXT:    [[TMP2:%.*]] = insertelement <8 x i8> poison, i8 [[L78]], i32 0
; CHECK-NEXT:    [[TMP3:%.*]] = insertelement <8 x i8> [[TMP2]], i8 [[L67]], i32 1
; CHECK-NEXT:    [[TMP4:%.*]] = insertelement <8 x i8> [[TMP3]], i8 [[L56]], i32 2
; CHECK-NEXT:    [[TMP5:%.*]] = insertelement <8 x i8> [[TMP4]], i8 [[L45]], i32 3
; CHECK-NEXT:    [[TMP6:%.*]] = insertelement <8 x i8> [[TMP5]], i8 [[L34]], i32 4
; CHECK-NEXT:    [[TMP7:%.*]] = insertelement <8 x i8> [[TMP6]], i8 [[L23]], i32 5
; CHECK-NEXT:    [[TMP8:%.*]] = insertelement <8 x i8> [[TMP7]], i8 [[L12]], i32 6
; CHECK-NEXT:    [[TMP9:%.*]] = insertelement <8 x i8> [[TMP8]], i8 [[L01]], i32 7
; CHECK-NEXT:    store <8 x i8> [[TMP9]], ptr [[PTR0]], align 8
; CHECK-NEXT:    ret void
;
  %ptr0 = getelementptr i8, ptr %ptr, i64 0
  %ptr1 = getelementptr i8, ptr %ptr, i64 1
  %ptr2 = getelementptr i8, ptr %ptr, i64 2
  %ptr3 = getelementptr i8, ptr %ptr, i64 3
  %ptr4 = getelementptr i8, ptr %ptr, i64 4
  %ptr5 = getelementptr i8, ptr %ptr, i64 5
  %ptr6 = getelementptr i8, ptr %ptr, i64 6
  %ptr7 = getelementptr i8, ptr %ptr, i64 7

  %l0 = load i8, ptr %ptr0, align 8
  %l1 = load i8, ptr %ptr1, align 1
  %l2 = load i8, ptr %ptr2, align 2
  %l3 = load i8, ptr %ptr3, align 1
  %l4 = load i8, ptr %ptr4, align 4
  %l5 = load i8, ptr %ptr5, align 1
  %l6 = load i8, ptr %ptr6, align 2
  %l7 = load i8, ptr %ptr7, align 1

  store i8 %l7, ptr %ptr0, align 8
  store i8 %l6, ptr %ptr1, align 1
  store i8 %l5, ptr %ptr2, align 2
  store i8 %l4, ptr %ptr3, align 1
  store i8 %l3, ptr %ptr4, align 4
  store i8 %l2, ptr %ptr5, align 1
  store i8 %l1, ptr %ptr6, align 2
  store i8 %l0, ptr %ptr7, align 1

  ret void

}

define void @int8x12a8(ptr nocapture align 8 %ptr) {
; CHECK-LABEL: define void @int8x12a8(
; CHECK-SAME: ptr align 8 captures(none) [[PTR:%.*]]) {
; CHECK-NEXT:    [[PTR0:%.*]] = getelementptr i8, ptr [[PTR]], i64 0
; CHECK-NEXT:    [[PTR8:%.*]] = getelementptr i8, ptr [[PTR]], i64 8
; CHECK-NEXT:    [[TMP1:%.*]] = load <8 x i8>, ptr [[PTR0]], align 8
; CHECK-NEXT:    [[L01:%.*]] = extractelement <8 x i8> [[TMP1]], i32 0
; CHECK-NEXT:    [[L12:%.*]] = extractelement <8 x i8> [[TMP1]], i32 1
; CHECK-NEXT:    [[L23:%.*]] = extractelement <8 x i8> [[TMP1]], i32 2
; CHECK-NEXT:    [[L34:%.*]] = extractelement <8 x i8> [[TMP1]], i32 3
; CHECK-NEXT:    [[L45:%.*]] = extractelement <8 x i8> [[TMP1]], i32 4
; CHECK-NEXT:    [[L56:%.*]] = extractelement <8 x i8> [[TMP1]], i32 5
; CHECK-NEXT:    [[L67:%.*]] = extractelement <8 x i8> [[TMP1]], i32 6
; CHECK-NEXT:    [[L78:%.*]] = extractelement <8 x i8> [[TMP1]], i32 7
; CHECK-NEXT:    [[TMP2:%.*]] = load <4 x i8>, ptr [[PTR8]], align 8
; CHECK-NEXT:    [[L89:%.*]] = extractelement <4 x i8> [[TMP2]], i32 0
; CHECK-NEXT:    [[L910:%.*]] = extractelement <4 x i8> [[TMP2]], i32 1
; CHECK-NEXT:    [[LA11:%.*]] = extractelement <4 x i8> [[TMP2]], i32 2
; CHECK-NEXT:    [[LB12:%.*]] = extractelement <4 x i8> [[TMP2]], i32 3
; CHECK-NEXT:    [[TMP3:%.*]] = insertelement <8 x i8> poison, i8 [[LB12]], i32 0
; CHECK-NEXT:    [[TMP4:%.*]] = insertelement <8 x i8> [[TMP3]], i8 [[LA11]], i32 1
; CHECK-NEXT:    [[TMP5:%.*]] = insertelement <8 x i8> [[TMP4]], i8 [[L910]], i32 2
; CHECK-NEXT:    [[TMP6:%.*]] = insertelement <8 x i8> [[TMP5]], i8 [[L89]], i32 3
; CHECK-NEXT:    [[TMP7:%.*]] = insertelement <8 x i8> [[TMP6]], i8 [[L78]], i32 4
; CHECK-NEXT:    [[TMP8:%.*]] = insertelement <8 x i8> [[TMP7]], i8 [[L67]], i32 5
; CHECK-NEXT:    [[TMP9:%.*]] = insertelement <8 x i8> [[TMP8]], i8 [[L56]], i32 6
; CHECK-NEXT:    [[TMP10:%.*]] = insertelement <8 x i8> [[TMP9]], i8 [[L45]], i32 7
; CHECK-NEXT:    store <8 x i8> [[TMP10]], ptr [[PTR0]], align 8
; CHECK-NEXT:    [[TMP11:%.*]] = insertelement <4 x i8> poison, i8 [[L34]], i32 0
; CHECK-NEXT:    [[TMP12:%.*]] = insertelement <4 x i8> [[TMP11]], i8 [[L23]], i32 1
; CHECK-NEXT:    [[TMP13:%.*]] = insertelement <4 x i8> [[TMP12]], i8 [[L12]], i32 2
; CHECK-NEXT:    [[TMP14:%.*]] = insertelement <4 x i8> [[TMP13]], i8 [[L01]], i32 3
; CHECK-NEXT:    store <4 x i8> [[TMP14]], ptr [[PTR8]], align 8
; CHECK-NEXT:    ret void
;
  %ptr0 = getelementptr i8, ptr %ptr, i64 0
  %ptr1 = getelementptr i8, ptr %ptr, i64 1
  %ptr2 = getelementptr i8, ptr %ptr, i64 2
  %ptr3 = getelementptr i8, ptr %ptr, i64 3
  %ptr4 = getelementptr i8, ptr %ptr, i64 4
  %ptr5 = getelementptr i8, ptr %ptr, i64 5
  %ptr6 = getelementptr i8, ptr %ptr, i64 6
  %ptr7 = getelementptr i8, ptr %ptr, i64 7
  %ptr8 = getelementptr i8, ptr %ptr, i64 8
  %ptr9 = getelementptr i8, ptr %ptr, i64 9
  %ptra = getelementptr i8, ptr %ptr, i64 10
  %ptrb = getelementptr i8, ptr %ptr, i64 11

  %l0 = load i8, ptr %ptr0, align 8
  %l1 = load i8, ptr %ptr1, align 1
  %l2 = load i8, ptr %ptr2, align 2
  %l3 = load i8, ptr %ptr3, align 1
  %l4 = load i8, ptr %ptr4, align 4
  %l5 = load i8, ptr %ptr5, align 1
  %l6 = load i8, ptr %ptr6, align 2
  %l7 = load i8, ptr %ptr7, align 1
  %l8 = load i8, ptr %ptr8, align 8
  %l9 = load i8, ptr %ptr9, align 1
  %la = load i8, ptr %ptra, align 2
  %lb = load i8, ptr %ptrb, align 1

  store i8 %lb, ptr %ptr0, align 8
  store i8 %la, ptr %ptr1, align 1
  store i8 %l9, ptr %ptr2, align 2
  store i8 %l8, ptr %ptr3, align 1
  store i8 %l7, ptr %ptr4, align 4
  store i8 %l6, ptr %ptr5, align 1
  store i8 %l5, ptr %ptr6, align 2
  store i8 %l4, ptr %ptr7, align 1
  store i8 %l3, ptr %ptr8, align 8
  store i8 %l2, ptr %ptr9, align 1
  store i8 %l1, ptr %ptra, align 2
  store i8 %l0, ptr %ptrb, align 1

  ret void

}


define void @int8x16a8(ptr nocapture align 8 %ptr) {
; CHECK-LABEL: define void @int8x16a8(
; CHECK-SAME: ptr align 8 captures(none) [[PTR:%.*]]) {
; CHECK-NEXT:    [[PTR0:%.*]] = getelementptr i8, ptr [[PTR]], i64 0
; CHECK-NEXT:    [[PTR8:%.*]] = getelementptr i8, ptr [[PTR]], i64 8
; CHECK-NEXT:    [[TMP1:%.*]] = load <8 x i8>, ptr [[PTR0]], align 8
; CHECK-NEXT:    [[L01:%.*]] = extractelement <8 x i8> [[TMP1]], i32 0
; CHECK-NEXT:    [[L12:%.*]] = extractelement <8 x i8> [[TMP1]], i32 1
; CHECK-NEXT:    [[L23:%.*]] = extractelement <8 x i8> [[TMP1]], i32 2
; CHECK-NEXT:    [[L34:%.*]] = extractelement <8 x i8> [[TMP1]], i32 3
; CHECK-NEXT:    [[L45:%.*]] = extractelement <8 x i8> [[TMP1]], i32 4
; CHECK-NEXT:    [[L56:%.*]] = extractelement <8 x i8> [[TMP1]], i32 5
; CHECK-NEXT:    [[L67:%.*]] = extractelement <8 x i8> [[TMP1]], i32 6
; CHECK-NEXT:    [[L78:%.*]] = extractelement <8 x i8> [[TMP1]], i32 7
; CHECK-NEXT:    [[TMP2:%.*]] = load <8 x i8>, ptr [[PTR8]], align 8
; CHECK-NEXT:    [[L89:%.*]] = extractelement <8 x i8> [[TMP2]], i32 0
; CHECK-NEXT:    [[L910:%.*]] = extractelement <8 x i8> [[TMP2]], i32 1
; CHECK-NEXT:    [[LA11:%.*]] = extractelement <8 x i8> [[TMP2]], i32 2
; CHECK-NEXT:    [[LB12:%.*]] = extractelement <8 x i8> [[TMP2]], i32 3
; CHECK-NEXT:    [[LC13:%.*]] = extractelement <8 x i8> [[TMP2]], i32 4
; CHECK-NEXT:    [[LD14:%.*]] = extractelement <8 x i8> [[TMP2]], i32 5
; CHECK-NEXT:    [[LE15:%.*]] = extractelement <8 x i8> [[TMP2]], i32 6
; CHECK-NEXT:    [[LF16:%.*]] = extractelement <8 x i8> [[TMP2]], i32 7
; CHECK-NEXT:    [[TMP3:%.*]] = insertelement <8 x i8> poison, i8 [[LF16]], i32 0
; CHECK-NEXT:    [[TMP4:%.*]] = insertelement <8 x i8> [[TMP3]], i8 [[LE15]], i32 1
; CHECK-NEXT:    [[TMP5:%.*]] = insertelement <8 x i8> [[TMP4]], i8 [[LD14]], i32 2
; CHECK-NEXT:    [[TMP6:%.*]] = insertelement <8 x i8> [[TMP5]], i8 [[LC13]], i32 3
; CHECK-NEXT:    [[TMP7:%.*]] = insertelement <8 x i8> [[TMP6]], i8 [[LB12]], i32 4
; CHECK-NEXT:    [[TMP8:%.*]] = insertelement <8 x i8> [[TMP7]], i8 [[LA11]], i32 5
; CHECK-NEXT:    [[TMP9:%.*]] = insertelement <8 x i8> [[TMP8]], i8 [[L910]], i32 6
; CHECK-NEXT:    [[TMP10:%.*]] = insertelement <8 x i8> [[TMP9]], i8 [[L89]], i32 7
; CHECK-NEXT:    store <8 x i8> [[TMP10]], ptr [[PTR0]], align 8
; CHECK-NEXT:    [[TMP11:%.*]] = insertelement <8 x i8> poison, i8 [[L78]], i32 0
; CHECK-NEXT:    [[TMP12:%.*]] = insertelement <8 x i8> [[TMP11]], i8 [[L67]], i32 1
; CHECK-NEXT:    [[TMP13:%.*]] = insertelement <8 x i8> [[TMP12]], i8 [[L56]], i32 2
; CHECK-NEXT:    [[TMP14:%.*]] = insertelement <8 x i8> [[TMP13]], i8 [[L45]], i32 3
; CHECK-NEXT:    [[TMP15:%.*]] = insertelement <8 x i8> [[TMP14]], i8 [[L34]], i32 4
; CHECK-NEXT:    [[TMP16:%.*]] = insertelement <8 x i8> [[TMP15]], i8 [[L23]], i32 5
; CHECK-NEXT:    [[TMP17:%.*]] = insertelement <8 x i8> [[TMP16]], i8 [[L12]], i32 6
; CHECK-NEXT:    [[TMP18:%.*]] = insertelement <8 x i8> [[TMP17]], i8 [[L01]], i32 7
; CHECK-NEXT:    store <8 x i8> [[TMP18]], ptr [[PTR8]], align 8
; CHECK-NEXT:    ret void
;
  %ptr0 = getelementptr i8, ptr %ptr, i64 0
  %ptr1 = getelementptr i8, ptr %ptr, i64 1
  %ptr2 = getelementptr i8, ptr %ptr, i64 2
  %ptr3 = getelementptr i8, ptr %ptr, i64 3
  %ptr4 = getelementptr i8, ptr %ptr, i64 4
  %ptr5 = getelementptr i8, ptr %ptr, i64 5
  %ptr6 = getelementptr i8, ptr %ptr, i64 6
  %ptr7 = getelementptr i8, ptr %ptr, i64 7
  %ptr8 = getelementptr i8, ptr %ptr, i64 8
  %ptr9 = getelementptr i8, ptr %ptr, i64 9
  %ptra = getelementptr i8, ptr %ptr, i64 10
  %ptrb = getelementptr i8, ptr %ptr, i64 11
  %ptrc = getelementptr i8, ptr %ptr, i64 12
  %ptrd = getelementptr i8, ptr %ptr, i64 13
  %ptre = getelementptr i8, ptr %ptr, i64 14
  %ptrf = getelementptr i8, ptr %ptr, i64 15

  %l0 = load i8, ptr %ptr0, align 8
  %l1 = load i8, ptr %ptr1, align 1
  %l2 = load i8, ptr %ptr2, align 2
  %l3 = load i8, ptr %ptr3, align 1
  %l4 = load i8, ptr %ptr4, align 4
  %l5 = load i8, ptr %ptr5, align 1
  %l6 = load i8, ptr %ptr6, align 2
  %l7 = load i8, ptr %ptr7, align 1
  %l8 = load i8, ptr %ptr8, align 8
  %l9 = load i8, ptr %ptr9, align 1
  %la = load i8, ptr %ptra, align 2
  %lb = load i8, ptr %ptrb, align 1
  %lc = load i8, ptr %ptrc, align 4
  %ld = load i8, ptr %ptrd, align 1
  %le = load i8, ptr %ptre, align 2
  %lf = load i8, ptr %ptrf, align 1

  store i8 %lf, ptr %ptr0, align 8
  store i8 %le, ptr %ptr1, align 1
  store i8 %ld, ptr %ptr2, align 2
  store i8 %lc, ptr %ptr3, align 1
  store i8 %lb, ptr %ptr4, align 4
  store i8 %la, ptr %ptr5, align 1
  store i8 %l9, ptr %ptr6, align 2
  store i8 %l8, ptr %ptr7, align 1
  store i8 %l7, ptr %ptr8, align 8
  store i8 %l6, ptr %ptr9, align 1
  store i8 %l5, ptr %ptra, align 2
  store i8 %l4, ptr %ptrb, align 1
  store i8 %l3, ptr %ptrc, align 4
  store i8 %l2, ptr %ptrd, align 1
  store i8 %l1, ptr %ptre, align 2
  store i8 %l0, ptr %ptrf, align 1

  ret void

}
