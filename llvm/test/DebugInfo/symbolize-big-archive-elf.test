// Test archive member recognition by name (ELF format)
// REQUIRES: system-linux || system-aix

// Generate object files from YAML
// RUN: yaml2obj -o %t-1.o %S/Inputs/big-archive-elf-1.yaml
// RUN: yaml2obj -o %t-2.o %S/Inputs/big-archive-elf-2.yaml

// Create archive with differently named members
// RUN: rm -f %t.a
// RUN: llvm-ar crv %t.a %t-1.o %t-2.o

// Test symbolization by member name (using just base names)
// RUN: MEMBER1=$(basename %t-1.o)
// RUN: llvm-symbolizer --default-arch=ppc64le --obj="%t.a($MEMBER1)" 0x0 | FileCheck %s --check-prefix=CHECK-1
// RUN: llvm-symbolizer --obj="%t.a($MEMBER1):ppc64le" 0x0 | FileCheck %s --check-prefix=CHECK-1
// RUN: MEMBER2=$(basename %t-2.o)
// RUN: llvm-symbolizer --default-arch=ppc64le --obj="%t.a($MEMBER2)" 0x0 | FileCheck %s --check-prefix=CHECK-2
// RUN: llvm-symbolizer --obj="%t.a($MEMBER2):ppc64le" 0x0 | FileCheck %s --check-prefix=CHECK-2
// CHECK-1: foo1
// CHECK-2: foo2

// Test error cases
// RUN: not llvm-symbolizer --obj="%t.a(nonexistent.o)" 0x1000 2>&1 | FileCheck %s --check-prefix=CHECK-ERROR
// CHECK-ERROR: error: {{.*}}No matching member{{.*}}
