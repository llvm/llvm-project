# NOTE: Assertions have been autogenerated by utils/update_mca_test_checks.py
# RUN: llvm-mca -mtriple=riscv64 -mattr=+rva22u64 -mcpu=spacemit-x60 -iterations=1 < %s | FileCheck %s

# Zalrsc
lr.w t0, (t1)
lr.w.aq t1, (t2)
lr.w.rl t2, (t3)
lr.w.aqrl t3, (t4)
sc.w t6, t5, (t4)
sc.w.aq t5, t4, (t3)
sc.w.rl t4, t3, (t2)
sc.w.aqrl t3, t2, (t1)

lr.d t0, (t1)
lr.d.aq t1, (t2)
lr.d.rl t2, (t3)
lr.d.aqrl t3, (t4)
sc.d t6, t5, (t4)
sc.d.aq t5, t4, (t3)
sc.d.rl t4, t3, (t2)
sc.d.aqrl t3, t2, (t1)

# Zaamo
amoswap.w a4, ra, (s0)
amoadd.w a1, a2, (a3)
amoxor.w a2, a3, (a4)
amoand.w a3, a4, (a5)
amoor.w a4, a5, (a6)
amomin.w a5, a6, (a7)
amomax.w s7, s6, (s5)
amominu.w s6, s5, (s4)
amomaxu.w s5, s4, (s3)

amoswap.w.aq a4, ra, (s0)
amoadd.w.aq a1, a2, (a3)
amoxor.w.aq a2, a3, (a4)
amoand.w.aq a3, a4, (a5)
amoor.w.aq a4, a5, (a6)
amomin.w.aq a5, a6, (a7)
amomax.w.aq s7, s6, (s5)
amominu.w.aq s6, s5, (s4)
amomaxu.w.aq s5, s4, (s3)

amoswap.w.rl a4, ra, (s0)
amoadd.w.rl a1, a2, (a3)
amoxor.w.rl a2, a3, (a4)
amoand.w.rl a3, a4, (a5)
amoor.w.rl a4, a5, (a6)
amomin.w.rl a5, a6, (a7)
amomax.w.rl s7, s6, (s5)
amominu.w.rl s6, s5, (s4)
amomaxu.w.rl s5, s4, (s3)

amoswap.w.aqrl a4, ra, (s0)
amoadd.w.aqrl a1, a2, (a3)
amoxor.w.aqrl a2, a3, (a4)
amoand.w.aqrl a3, a4, (a5)
amoor.w.aqrl a4, a5, (a6)
amomin.w.aqrl a5, a6, (a7)
amomax.w.aqrl s7, s6, (s5)
amominu.w.aqrl s6, s5, (s4)
amomaxu.w.aqrl s5, s4, (s3)

amoswap.d a4, ra, (s0)
amoadd.d a1, a2, (a3)
amoxor.d a2, a3, (a4)
amoand.d a3, a4, (a5)
amoor.d a4, a5, (a6)
amomin.d a5, a6, (a7)
amomax.d s7, s6, (s5)
amominu.d s6, s5, (s4)
amomaxu.d s5, s4, (s3)

amoswap.d.aq a4, ra, (s0)
amoadd.d.aq a1, a2, (a3)
amoxor.d.aq a2, a3, (a4)
amoand.d.aq a3, a4, (a5)
amoor.d.aq a4, a5, (a6)
amomin.d.aq a5, a6, (a7)
amomax.d.aq s7, s6, (s5)
amominu.d.aq s6, s5, (s4)
amomaxu.d.aq s5, s4, (s3)

amoswap.d.rl a4, ra, (s0)
amoadd.d.rl a1, a2, (a3)
amoxor.d.rl a2, a3, (a4)
amoand.d.rl a3, a4, (a5)
amoor.d.rl a4, a5, (a6)
amomin.d.rl a5, a6, (a7)
amomax.d.rl s7, s6, (s5)
amominu.d.rl s6, s5, (s4)
amomaxu.d.rl s5, s4, (s3)

amoswap.d.aqrl a4, ra, (s0)
amoadd.d.aqrl a1, a2, (a3)
amoxor.d.aqrl a2, a3, (a4)
amoand.d.aqrl a3, a4, (a5)
amoor.d.aqrl a4, a5, (a6)
amomin.d.aqrl a5, a6, (a7)
amomax.d.aqrl s7, s6, (s5)
amominu.d.aqrl s6, s5, (s4)
amomaxu.d.aqrl s5, s4, (s3)

# CHECK:      Iterations:        1
# CHECK-NEXT: Instructions:      88
# CHECK-NEXT: Total Cycles:      86
# CHECK-NEXT: Total uOps:        88

# CHECK:      Dispatch Width:    2
# CHECK-NEXT: uOps Per Cycle:    1.02
# CHECK-NEXT: IPC:               1.02
# CHECK-NEXT: Block RThroughput: 44.0

# CHECK:      Instruction Info:
# CHECK-NEXT: [1]: #uOps
# CHECK-NEXT: [2]: Latency
# CHECK-NEXT: [3]: RThroughput
# CHECK-NEXT: [4]: MayLoad
# CHECK-NEXT: [5]: MayStore
# CHECK-NEXT: [6]: HasSideEffects (U)

# CHECK:      [1]    [2]    [3]    [4]    [5]    [6]    Instructions:
# CHECK-NEXT:  1      5     0.50    *                   lr.w	t0, (t1)
# CHECK-NEXT:  1      5     0.50    *                   lr.w.aq	t1, (t2)
# CHECK-NEXT:  1      5     0.50    *                   lr.w.rl	t2, (t3)
# CHECK-NEXT:  1      5     0.50    *                   lr.w.aqrl	t3, (t4)
# CHECK-NEXT:  1      3     0.50           *            sc.w	t6, t5, (t4)
# CHECK-NEXT:  1      3     0.50           *            sc.w.aq	t5, t4, (t3)
# CHECK-NEXT:  1      3     0.50           *            sc.w.rl	t4, t3, (t2)
# CHECK-NEXT:  1      3     0.50           *            sc.w.aqrl	t3, t2, (t1)
# CHECK-NEXT:  1      5     0.50    *                   lr.d	t0, (t1)
# CHECK-NEXT:  1      5     0.50    *                   lr.d.aq	t1, (t2)
# CHECK-NEXT:  1      5     0.50    *                   lr.d.rl	t2, (t3)
# CHECK-NEXT:  1      5     0.50    *                   lr.d.aqrl	t3, (t4)
# CHECK-NEXT:  1      3     0.50           *            sc.d	t6, t5, (t4)
# CHECK-NEXT:  1      3     0.50           *            sc.d.aq	t5, t4, (t3)
# CHECK-NEXT:  1      3     0.50           *            sc.d.rl	t4, t3, (t2)
# CHECK-NEXT:  1      3     0.50           *            sc.d.aqrl	t3, t2, (t1)
# CHECK-NEXT:  1      5     0.50    *      *            amoswap.w	a4, ra, (s0)
# CHECK-NEXT:  1      5     0.50    *      *            amoadd.w	a1, a2, (a3)
# CHECK-NEXT:  1      5     0.50    *      *            amoxor.w	a2, a3, (a4)
# CHECK-NEXT:  1      5     0.50    *      *            amoand.w	a3, a4, (a5)
# CHECK-NEXT:  1      5     0.50    *      *            amoor.w	a4, a5, (a6)
# CHECK-NEXT:  1      5     0.50    *      *            amomin.w	a5, a6, (a7)
# CHECK-NEXT:  1      5     0.50    *      *            amomax.w	s7, s6, (s5)
# CHECK-NEXT:  1      5     0.50    *      *            amominu.w	s6, s5, (s4)
# CHECK-NEXT:  1      5     0.50    *      *            amomaxu.w	s5, s4, (s3)
# CHECK-NEXT:  1      5     0.50    *      *            amoswap.w.aq	a4, ra, (s0)
# CHECK-NEXT:  1      5     0.50    *      *            amoadd.w.aq	a1, a2, (a3)
# CHECK-NEXT:  1      5     0.50    *      *            amoxor.w.aq	a2, a3, (a4)
# CHECK-NEXT:  1      5     0.50    *      *            amoand.w.aq	a3, a4, (a5)
# CHECK-NEXT:  1      5     0.50    *      *            amoor.w.aq	a4, a5, (a6)
# CHECK-NEXT:  1      5     0.50    *      *            amomin.w.aq	a5, a6, (a7)
# CHECK-NEXT:  1      5     0.50    *      *            amomax.w.aq	s7, s6, (s5)
# CHECK-NEXT:  1      5     0.50    *      *            amominu.w.aq	s6, s5, (s4)
# CHECK-NEXT:  1      5     0.50    *      *            amomaxu.w.aq	s5, s4, (s3)
# CHECK-NEXT:  1      5     0.50    *      *            amoswap.w.rl	a4, ra, (s0)
# CHECK-NEXT:  1      5     0.50    *      *            amoadd.w.rl	a1, a2, (a3)
# CHECK-NEXT:  1      5     0.50    *      *            amoxor.w.rl	a2, a3, (a4)
# CHECK-NEXT:  1      5     0.50    *      *            amoand.w.rl	a3, a4, (a5)
# CHECK-NEXT:  1      5     0.50    *      *            amoor.w.rl	a4, a5, (a6)
# CHECK-NEXT:  1      5     0.50    *      *            amomin.w.rl	a5, a6, (a7)
# CHECK-NEXT:  1      5     0.50    *      *            amomax.w.rl	s7, s6, (s5)
# CHECK-NEXT:  1      5     0.50    *      *            amominu.w.rl	s6, s5, (s4)
# CHECK-NEXT:  1      5     0.50    *      *            amomaxu.w.rl	s5, s4, (s3)
# CHECK-NEXT:  1      5     0.50    *      *            amoswap.w.aqrl	a4, ra, (s0)
# CHECK-NEXT:  1      5     0.50    *      *            amoadd.w.aqrl	a1, a2, (a3)
# CHECK-NEXT:  1      5     0.50    *      *            amoxor.w.aqrl	a2, a3, (a4)
# CHECK-NEXT:  1      5     0.50    *      *            amoand.w.aqrl	a3, a4, (a5)
# CHECK-NEXT:  1      5     0.50    *      *            amoor.w.aqrl	a4, a5, (a6)
# CHECK-NEXT:  1      5     0.50    *      *            amomin.w.aqrl	a5, a6, (a7)
# CHECK-NEXT:  1      5     0.50    *      *            amomax.w.aqrl	s7, s6, (s5)
# CHECK-NEXT:  1      5     0.50    *      *            amominu.w.aqrl	s6, s5, (s4)
# CHECK-NEXT:  1      5     0.50    *      *            amomaxu.w.aqrl	s5, s4, (s3)
# CHECK-NEXT:  1      5     0.50    *      *            amoswap.d	a4, ra, (s0)
# CHECK-NEXT:  1      5     0.50    *      *            amoadd.d	a1, a2, (a3)
# CHECK-NEXT:  1      5     0.50    *      *            amoxor.d	a2, a3, (a4)
# CHECK-NEXT:  1      5     0.50    *      *            amoand.d	a3, a4, (a5)
# CHECK-NEXT:  1      5     0.50    *      *            amoor.d	a4, a5, (a6)
# CHECK-NEXT:  1      5     0.50    *      *            amomin.d	a5, a6, (a7)
# CHECK-NEXT:  1      5     0.50    *      *            amomax.d	s7, s6, (s5)
# CHECK-NEXT:  1      5     0.50    *      *            amominu.d	s6, s5, (s4)
# CHECK-NEXT:  1      5     0.50    *      *            amomaxu.d	s5, s4, (s3)
# CHECK-NEXT:  1      5     0.50    *      *            amoswap.d.aq	a4, ra, (s0)
# CHECK-NEXT:  1      5     0.50    *      *            amoadd.d.aq	a1, a2, (a3)
# CHECK-NEXT:  1      5     0.50    *      *            amoxor.d.aq	a2, a3, (a4)
# CHECK-NEXT:  1      5     0.50    *      *            amoand.d.aq	a3, a4, (a5)
# CHECK-NEXT:  1      5     0.50    *      *            amoor.d.aq	a4, a5, (a6)
# CHECK-NEXT:  1      5     0.50    *      *            amomin.d.aq	a5, a6, (a7)
# CHECK-NEXT:  1      5     0.50    *      *            amomax.d.aq	s7, s6, (s5)
# CHECK-NEXT:  1      5     0.50    *      *            amominu.d.aq	s6, s5, (s4)
# CHECK-NEXT:  1      5     0.50    *      *            amomaxu.d.aq	s5, s4, (s3)
# CHECK-NEXT:  1      5     0.50    *      *            amoswap.d.rl	a4, ra, (s0)
# CHECK-NEXT:  1      5     0.50    *      *            amoadd.d.rl	a1, a2, (a3)
# CHECK-NEXT:  1      5     0.50    *      *            amoxor.d.rl	a2, a3, (a4)
# CHECK-NEXT:  1      5     0.50    *      *            amoand.d.rl	a3, a4, (a5)
# CHECK-NEXT:  1      5     0.50    *      *            amoor.d.rl	a4, a5, (a6)
# CHECK-NEXT:  1      5     0.50    *      *            amomin.d.rl	a5, a6, (a7)
# CHECK-NEXT:  1      5     0.50    *      *            amomax.d.rl	s7, s6, (s5)
# CHECK-NEXT:  1      5     0.50    *      *            amominu.d.rl	s6, s5, (s4)
# CHECK-NEXT:  1      5     0.50    *      *            amomaxu.d.rl	s5, s4, (s3)
# CHECK-NEXT:  1      5     0.50    *      *            amoswap.d.aqrl	a4, ra, (s0)
# CHECK-NEXT:  1      5     0.50    *      *            amoadd.d.aqrl	a1, a2, (a3)
# CHECK-NEXT:  1      5     0.50    *      *            amoxor.d.aqrl	a2, a3, (a4)
# CHECK-NEXT:  1      5     0.50    *      *            amoand.d.aqrl	a3, a4, (a5)
# CHECK-NEXT:  1      5     0.50    *      *            amoor.d.aqrl	a4, a5, (a6)
# CHECK-NEXT:  1      5     0.50    *      *            amomin.d.aqrl	a5, a6, (a7)
# CHECK-NEXT:  1      5     0.50    *      *            amomax.d.aqrl	s7, s6, (s5)
# CHECK-NEXT:  1      5     0.50    *      *            amominu.d.aqrl	s6, s5, (s4)
# CHECK-NEXT:  1      5     0.50    *      *            amomaxu.d.aqrl	s5, s4, (s3)

# CHECK:      Resources:
# CHECK-NEXT: [0]   - SMX60_FP
# CHECK-NEXT: [1.0] - SMX60_IEU
# CHECK-NEXT: [1.1] - SMX60_IEU
# CHECK-NEXT: [2.0] - SMX60_LS
# CHECK-NEXT: [2.1] - SMX60_LS

# CHECK:      Resource pressure per iteration:
# CHECK-NEXT: [0]    [1.0]  [1.1]  [2.0]  [2.1]
# CHECK-NEXT:  -      -      -     44.00  44.00

# CHECK:      Resource pressure by instruction:
# CHECK-NEXT: [0]    [1.0]  [1.1]  [2.0]  [2.1]  Instructions:
# CHECK-NEXT:  -      -      -      -     1.00   lr.w	t0, (t1)
# CHECK-NEXT:  -      -      -     1.00    -     lr.w.aq	t1, (t2)
# CHECK-NEXT:  -      -      -      -     1.00   lr.w.rl	t2, (t3)
# CHECK-NEXT:  -      -      -     1.00    -     lr.w.aqrl	t3, (t4)
# CHECK-NEXT:  -      -      -      -     1.00   sc.w	t6, t5, (t4)
# CHECK-NEXT:  -      -      -     1.00    -     sc.w.aq	t5, t4, (t3)
# CHECK-NEXT:  -      -      -      -     1.00   sc.w.rl	t4, t3, (t2)
# CHECK-NEXT:  -      -      -     1.00    -     sc.w.aqrl	t3, t2, (t1)
# CHECK-NEXT:  -      -      -      -     1.00   lr.d	t0, (t1)
# CHECK-NEXT:  -      -      -     1.00    -     lr.d.aq	t1, (t2)
# CHECK-NEXT:  -      -      -      -     1.00   lr.d.rl	t2, (t3)
# CHECK-NEXT:  -      -      -     1.00    -     lr.d.aqrl	t3, (t4)
# CHECK-NEXT:  -      -      -      -     1.00   sc.d	t6, t5, (t4)
# CHECK-NEXT:  -      -      -     1.00    -     sc.d.aq	t5, t4, (t3)
# CHECK-NEXT:  -      -      -      -     1.00   sc.d.rl	t4, t3, (t2)
# CHECK-NEXT:  -      -      -     1.00    -     sc.d.aqrl	t3, t2, (t1)
# CHECK-NEXT:  -      -      -      -     1.00   amoswap.w	a4, ra, (s0)
# CHECK-NEXT:  -      -      -     1.00    -     amoadd.w	a1, a2, (a3)
# CHECK-NEXT:  -      -      -      -     1.00   amoxor.w	a2, a3, (a4)
# CHECK-NEXT:  -      -      -     1.00    -     amoand.w	a3, a4, (a5)
# CHECK-NEXT:  -      -      -      -     1.00   amoor.w	a4, a5, (a6)
# CHECK-NEXT:  -      -      -     1.00    -     amomin.w	a5, a6, (a7)
# CHECK-NEXT:  -      -      -      -     1.00   amomax.w	s7, s6, (s5)
# CHECK-NEXT:  -      -      -     1.00    -     amominu.w	s6, s5, (s4)
# CHECK-NEXT:  -      -      -      -     1.00   amomaxu.w	s5, s4, (s3)
# CHECK-NEXT:  -      -      -     1.00    -     amoswap.w.aq	a4, ra, (s0)
# CHECK-NEXT:  -      -      -      -     1.00   amoadd.w.aq	a1, a2, (a3)
# CHECK-NEXT:  -      -      -     1.00    -     amoxor.w.aq	a2, a3, (a4)
# CHECK-NEXT:  -      -      -      -     1.00   amoand.w.aq	a3, a4, (a5)
# CHECK-NEXT:  -      -      -     1.00    -     amoor.w.aq	a4, a5, (a6)
# CHECK-NEXT:  -      -      -      -     1.00   amomin.w.aq	a5, a6, (a7)
# CHECK-NEXT:  -      -      -     1.00    -     amomax.w.aq	s7, s6, (s5)
# CHECK-NEXT:  -      -      -      -     1.00   amominu.w.aq	s6, s5, (s4)
# CHECK-NEXT:  -      -      -     1.00    -     amomaxu.w.aq	s5, s4, (s3)
# CHECK-NEXT:  -      -      -      -     1.00   amoswap.w.rl	a4, ra, (s0)
# CHECK-NEXT:  -      -      -     1.00    -     amoadd.w.rl	a1, a2, (a3)
# CHECK-NEXT:  -      -      -      -     1.00   amoxor.w.rl	a2, a3, (a4)
# CHECK-NEXT:  -      -      -     1.00    -     amoand.w.rl	a3, a4, (a5)
# CHECK-NEXT:  -      -      -      -     1.00   amoor.w.rl	a4, a5, (a6)
# CHECK-NEXT:  -      -      -     1.00    -     amomin.w.rl	a5, a6, (a7)
# CHECK-NEXT:  -      -      -      -     1.00   amomax.w.rl	s7, s6, (s5)
# CHECK-NEXT:  -      -      -     1.00    -     amominu.w.rl	s6, s5, (s4)
# CHECK-NEXT:  -      -      -      -     1.00   amomaxu.w.rl	s5, s4, (s3)
# CHECK-NEXT:  -      -      -     1.00    -     amoswap.w.aqrl	a4, ra, (s0)
# CHECK-NEXT:  -      -      -      -     1.00   amoadd.w.aqrl	a1, a2, (a3)
# CHECK-NEXT:  -      -      -     1.00    -     amoxor.w.aqrl	a2, a3, (a4)
# CHECK-NEXT:  -      -      -      -     1.00   amoand.w.aqrl	a3, a4, (a5)
# CHECK-NEXT:  -      -      -     1.00    -     amoor.w.aqrl	a4, a5, (a6)
# CHECK-NEXT:  -      -      -      -     1.00   amomin.w.aqrl	a5, a6, (a7)
# CHECK-NEXT:  -      -      -     1.00    -     amomax.w.aqrl	s7, s6, (s5)
# CHECK-NEXT:  -      -      -      -     1.00   amominu.w.aqrl	s6, s5, (s4)
# CHECK-NEXT:  -      -      -     1.00    -     amomaxu.w.aqrl	s5, s4, (s3)
# CHECK-NEXT:  -      -      -      -     1.00   amoswap.d	a4, ra, (s0)
# CHECK-NEXT:  -      -      -     1.00    -     amoadd.d	a1, a2, (a3)
# CHECK-NEXT:  -      -      -      -     1.00   amoxor.d	a2, a3, (a4)
# CHECK-NEXT:  -      -      -     1.00    -     amoand.d	a3, a4, (a5)
# CHECK-NEXT:  -      -      -      -     1.00   amoor.d	a4, a5, (a6)
# CHECK-NEXT:  -      -      -     1.00    -     amomin.d	a5, a6, (a7)
# CHECK-NEXT:  -      -      -      -     1.00   amomax.d	s7, s6, (s5)
# CHECK-NEXT:  -      -      -     1.00    -     amominu.d	s6, s5, (s4)
# CHECK-NEXT:  -      -      -      -     1.00   amomaxu.d	s5, s4, (s3)
# CHECK-NEXT:  -      -      -     1.00    -     amoswap.d.aq	a4, ra, (s0)
# CHECK-NEXT:  -      -      -      -     1.00   amoadd.d.aq	a1, a2, (a3)
# CHECK-NEXT:  -      -      -     1.00    -     amoxor.d.aq	a2, a3, (a4)
# CHECK-NEXT:  -      -      -      -     1.00   amoand.d.aq	a3, a4, (a5)
# CHECK-NEXT:  -      -      -     1.00    -     amoor.d.aq	a4, a5, (a6)
# CHECK-NEXT:  -      -      -      -     1.00   amomin.d.aq	a5, a6, (a7)
# CHECK-NEXT:  -      -      -     1.00    -     amomax.d.aq	s7, s6, (s5)
# CHECK-NEXT:  -      -      -      -     1.00   amominu.d.aq	s6, s5, (s4)
# CHECK-NEXT:  -      -      -     1.00    -     amomaxu.d.aq	s5, s4, (s3)
# CHECK-NEXT:  -      -      -      -     1.00   amoswap.d.rl	a4, ra, (s0)
# CHECK-NEXT:  -      -      -     1.00    -     amoadd.d.rl	a1, a2, (a3)
# CHECK-NEXT:  -      -      -      -     1.00   amoxor.d.rl	a2, a3, (a4)
# CHECK-NEXT:  -      -      -     1.00    -     amoand.d.rl	a3, a4, (a5)
# CHECK-NEXT:  -      -      -      -     1.00   amoor.d.rl	a4, a5, (a6)
# CHECK-NEXT:  -      -      -     1.00    -     amomin.d.rl	a5, a6, (a7)
# CHECK-NEXT:  -      -      -      -     1.00   amomax.d.rl	s7, s6, (s5)
# CHECK-NEXT:  -      -      -     1.00    -     amominu.d.rl	s6, s5, (s4)
# CHECK-NEXT:  -      -      -      -     1.00   amomaxu.d.rl	s5, s4, (s3)
# CHECK-NEXT:  -      -      -     1.00    -     amoswap.d.aqrl	a4, ra, (s0)
# CHECK-NEXT:  -      -      -      -     1.00   amoadd.d.aqrl	a1, a2, (a3)
# CHECK-NEXT:  -      -      -     1.00    -     amoxor.d.aqrl	a2, a3, (a4)
# CHECK-NEXT:  -      -      -      -     1.00   amoand.d.aqrl	a3, a4, (a5)
# CHECK-NEXT:  -      -      -     1.00    -     amoor.d.aqrl	a4, a5, (a6)
# CHECK-NEXT:  -      -      -      -     1.00   amomin.d.aqrl	a5, a6, (a7)
# CHECK-NEXT:  -      -      -     1.00    -     amomax.d.aqrl	s7, s6, (s5)
# CHECK-NEXT:  -      -      -      -     1.00   amominu.d.aqrl	s6, s5, (s4)
# CHECK-NEXT:  -      -      -     1.00    -     amomaxu.d.aqrl	s5, s4, (s3)
