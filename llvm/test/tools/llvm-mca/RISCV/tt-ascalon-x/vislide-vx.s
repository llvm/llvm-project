# NOTE: Assertions have been autogenerated by utils/update_mca_test_checks.py
# RUN: llvm-mca -mtriple=riscv64 -mcpu=tt-ascalon-x -instruction-tables=full -iterations=1 < %s | FileCheck %s

vsetvli zero, zero, e32, m2, tu, mu
vslidedown.vx v5, v7, x6

vsetvli zero, zero, e32, m4, tu, mu
vslidedown.vx v5, v7, x6

vsetvli zero, zero, e32, m8, tu, mu
vslidedown.vx v5, v7, x6

vsetvli zero, zero, e32, m2, tu, mu
vslideup.vx v5, v7, x6

vsetvli zero, zero, e32, m4, tu, mu
vslideup.vx v5, v7, x6

vsetvli zero, zero, e32, m8, tu, mu
vslideup.vx v5, v7, x6

vsetvli zero, zero, e32, m2, tu, mu
vslideup.vx v5, v7, x6, v0.t

vsetvli zero, zero, e32, m4, tu, mu
vslideup.vx v5, v7, x6, v0.t

vsetvli zero, zero, e32, m8, tu, mu
vslideup.vx v5, v7, x6, v0.t

# CHECK:      Resources:
# CHECK-NEXT: [0]   - AscalonFP:2 AscalonFPA, AscalonFPB
# CHECK-NEXT: [1]   - AscalonFPA:1
# CHECK-NEXT: [2]   - AscalonFPB:1
# CHECK-NEXT: [3]   - AscalonFX:6 AscalonFXA, AscalonFXB, AscalonFXC, AscalonFXC, AscalonFXD, AscalonFXD
# CHECK-NEXT: [4]   - AscalonFXA:1
# CHECK-NEXT: [5]   - AscalonFXB:1
# CHECK-NEXT: [6]   - AscalonFXC:2
# CHECK-NEXT: [7]   - AscalonFXD:2
# CHECK-NEXT: [8]   - AscalonLS:3
# CHECK-NEXT: [9]   - AscalonV:2  AscalonVA, AscalonVB
# CHECK-NEXT: [10]  - AscalonVA:1
# CHECK-NEXT: [11]  - AscalonVB:1

# CHECK:      Instruction Info:
# CHECK-NEXT: [1]: #uOps
# CHECK-NEXT: [2]: Latency
# CHECK-NEXT: [3]: RThroughput
# CHECK-NEXT: [4]: MayLoad
# CHECK-NEXT: [5]: MayStore
# CHECK-NEXT: [6]: HasSideEffects (U)
# CHECK-NEXT: [7]: Bypass Latency
# CHECK-NEXT: [8]: Resources (<Name> | <Name>[<ReleaseAtCycle>] | <Name>[<AcquireAtCycle>,<ReleaseAtCycle])
# CHECK-NEXT: [9]: LLVM Opcode Name

# CHECK:      [1]    [2]    [3]    [4]    [5]    [6]    [7]    [8]                                        [9]                        Instructions:
# CHECK-NEXT:  1      1     0.50                  U      0     AscalonV                                   VSETVLI                    vsetvli	zero, zero, e32, m2, tu, mu
# CHECK-NEXT:  1      4     1.00                         4     AscalonFX,AscalonV[1,3]                    VSLIDEDOWN_VX              vslidedown.vx	v5, v7, t1
# CHECK-NEXT:  1      1     0.50                  U      0     AscalonV                                   VSETVLI                    vsetvli	zero, zero, e32, m4, tu, mu
# CHECK-NEXT:  1      4     2.00                         4     AscalonFX,AscalonV[1,5]                    VSLIDEDOWN_VX              vslidedown.vx	v5, v7, t1
# CHECK-NEXT:  1      1     0.50                  U      0     AscalonV                                   VSETVLI                    vsetvli	zero, zero, e32, m8, tu, mu
# CHECK-NEXT:  1      4     4.00                         4     AscalonFX,AscalonV[1,9]                    VSLIDEDOWN_VX              vslidedown.vx	v5, v7, t1
# CHECK-NEXT:  1      1     0.50                  U      0     AscalonV                                   VSETVLI                    vsetvli	zero, zero, e32, m2, tu, mu
# CHECK-NEXT:  1      4     1.00                         4     AscalonFX,AscalonV[1,3]                    VSLIDEUP_VX                vslideup.vx	v5, v7, t1
# CHECK-NEXT:  1      1     0.50                  U      0     AscalonV                                   VSETVLI                    vsetvli	zero, zero, e32, m4, tu, mu
# CHECK-NEXT:  1      4     2.00                         4     AscalonFX,AscalonV[1,5]                    VSLIDEUP_VX                vslideup.vx	v5, v7, t1
# CHECK-NEXT:  1      1     0.50                  U      0     AscalonV                                   VSETVLI                    vsetvli	zero, zero, e32, m8, tu, mu
# CHECK-NEXT:  1      4     4.00                         4     AscalonFX,AscalonV[1,9]                    VSLIDEUP_VX                vslideup.vx	v5, v7, t1
# CHECK-NEXT:  1      1     0.50                  U      0     AscalonV                                   VSETVLI                    vsetvli	zero, zero, e32, m2, tu, mu
# CHECK-NEXT:  1      4     1.00                         4     AscalonFX,AscalonV[1,3]                    VSLIDEUP_VX                vslideup.vx	v5, v7, t1, v0.t
# CHECK-NEXT:  1      1     0.50                  U      0     AscalonV                                   VSETVLI                    vsetvli	zero, zero, e32, m4, tu, mu
# CHECK-NEXT:  1      4     2.00                         4     AscalonFX,AscalonV[1,5]                    VSLIDEUP_VX                vslideup.vx	v5, v7, t1, v0.t
# CHECK-NEXT:  1      1     0.50                  U      0     AscalonV                                   VSETVLI                    vsetvli	zero, zero, e32, m8, tu, mu
# CHECK-NEXT:  1      4     4.00                         4     AscalonFX,AscalonV[1,9]                    VSLIDEUP_VX                vslideup.vx	v5, v7, t1, v0.t

# CHECK:      Resources:
# CHECK-NEXT: [0]   - AscalonFPA
# CHECK-NEXT: [1]   - AscalonFPB
# CHECK-NEXT: [2]   - AscalonFXA
# CHECK-NEXT: [3]   - AscalonFXB
# CHECK-NEXT: [4.0] - AscalonFXC
# CHECK-NEXT: [4.1] - AscalonFXC
# CHECK-NEXT: [5.0] - AscalonFXD
# CHECK-NEXT: [5.1] - AscalonFXD
# CHECK-NEXT: [6.0] - AscalonLS
# CHECK-NEXT: [6.1] - AscalonLS
# CHECK-NEXT: [6.2] - AscalonLS
# CHECK-NEXT: [7]   - AscalonVA
# CHECK-NEXT: [8]   - AscalonVB

# CHECK:      Resource pressure per iteration:
# CHECK-NEXT: [0]    [1]    [2]    [3]    [4.0]  [4.1]  [5.0]  [5.1]  [6.0]  [6.1]  [6.2]  [7]    [8]
# CHECK-NEXT:  -      -     1.50   1.50   1.50   1.50   1.50   1.50    -      -      -     30.00  30.00

# CHECK:      Resource pressure by instruction:
# CHECK-NEXT: [0]    [1]    [2]    [3]    [4.0]  [4.1]  [5.0]  [5.1]  [6.0]  [6.1]  [6.2]  [7]    [8]    Instructions:
# CHECK-NEXT:  -      -      -      -      -      -      -      -      -      -      -     0.50   0.50   vsetvli	zero, zero, e32, m2, tu, mu
# CHECK-NEXT:  -      -     0.17   0.17   0.17   0.17   0.17   0.17    -      -      -     1.50   1.50   vslidedown.vx	v5, v7, t1
# CHECK-NEXT:  -      -      -      -      -      -      -      -      -      -      -     0.50   0.50   vsetvli	zero, zero, e32, m4, tu, mu
# CHECK-NEXT:  -      -     0.17   0.17   0.17   0.17   0.17   0.17    -      -      -     2.50   2.50   vslidedown.vx	v5, v7, t1
# CHECK-NEXT:  -      -      -      -      -      -      -      -      -      -      -     0.50   0.50   vsetvli	zero, zero, e32, m8, tu, mu
# CHECK-NEXT:  -      -     0.17   0.17   0.17   0.17   0.17   0.17    -      -      -     4.50   4.50   vslidedown.vx	v5, v7, t1
# CHECK-NEXT:  -      -      -      -      -      -      -      -      -      -      -     0.50   0.50   vsetvli	zero, zero, e32, m2, tu, mu
# CHECK-NEXT:  -      -     0.17   0.17   0.17   0.17   0.17   0.17    -      -      -     1.50   1.50   vslideup.vx	v5, v7, t1
# CHECK-NEXT:  -      -      -      -      -      -      -      -      -      -      -     0.50   0.50   vsetvli	zero, zero, e32, m4, tu, mu
# CHECK-NEXT:  -      -     0.17   0.17   0.17   0.17   0.17   0.17    -      -      -     2.50   2.50   vslideup.vx	v5, v7, t1
# CHECK-NEXT:  -      -      -      -      -      -      -      -      -      -      -     0.50   0.50   vsetvli	zero, zero, e32, m8, tu, mu
# CHECK-NEXT:  -      -     0.17   0.17   0.17   0.17   0.17   0.17    -      -      -     4.50   4.50   vslideup.vx	v5, v7, t1
# CHECK-NEXT:  -      -      -      -      -      -      -      -      -      -      -     0.50   0.50   vsetvli	zero, zero, e32, m2, tu, mu
# CHECK-NEXT:  -      -     0.17   0.17   0.17   0.17   0.17   0.17    -      -      -     1.50   1.50   vslideup.vx	v5, v7, t1, v0.t
# CHECK-NEXT:  -      -      -      -      -      -      -      -      -      -      -     0.50   0.50   vsetvli	zero, zero, e32, m4, tu, mu
# CHECK-NEXT:  -      -     0.17   0.17   0.17   0.17   0.17   0.17    -      -      -     2.50   2.50   vslideup.vx	v5, v7, t1, v0.t
# CHECK-NEXT:  -      -      -      -      -      -      -      -      -      -      -     0.50   0.50   vsetvli	zero, zero, e32, m8, tu, mu
# CHECK-NEXT:  -      -     0.17   0.17   0.17   0.17   0.17   0.17    -      -      -     4.50   4.50   vslideup.vx	v5, v7, t1, v0.t
