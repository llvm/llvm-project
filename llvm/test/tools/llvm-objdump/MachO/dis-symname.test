# RUN: llvm-objdump --macho -d %p/Inputs/exeThread.macho-x86_64 --dis-symname start --no-show-raw-insn --full-leading-addr --print-imm-hex | FileCheck %s
# RUN: llvm-otool -tV %p/Inputs/exeThread.macho-x86_64 -p start | FileCheck %s

# CHECK: (__TEXT,__text) section
# CHECK: start:
# CHECK: 0000000100000d00	pushq	$0x0
# CHECK: 0000000100000d02	movq	%rsp, %rbp
# CHECK: 0000000100000d05	andq	$-0x10, %rsp
# CHECK: 0000000100000d09	movq	0x8(%rbp), %rdi
# CHECK: 0000000100000d0d	leaq	0x10(%rbp), %rsi
# CHECK: 0000000100000d11	movl	%edi, %edx
# CHECK: 0000000100000d13	addl	$0x1, %edx
# CHECK: 0000000100000d16	shll	$0x3, %edx
# CHECK: 0000000100000d19	addq	%rsi, %rdx
# CHECK: 0000000100000d1c	callq	__start
# CHECK: 0000000100000d21	hlt

# CHECK-NOT: __start:
# CHECK-NOT: 0000000100000d22
# CHECK-NOT: _main:

# RUN: llvm-objdump --macho -d %p/Inputs/exeThread.macho-x86_64 --dis-symname _nonexistent 2>&1 | FileCheck --check-prefix BAD-OBJDUMP-NOTFOUND %s
BAD-OBJDUMP-NOTFOUND: Can't find --dis-symname: _nonexistent

# RUN: llvm-objdump --macho -d %p/Inputs/exeThread.macho-x86_64 --dis-symname _environ 2>&1 | FileCheck --check-prefix BAD-SYMAME-1 %s
BAD-SYMAME-1: --dis-symname: _environ not in the section

# RUN: llvm-objdump --macho -d %p/Inputs/exeThread.macho-x86_64 --dis-symname __mh_execute_header 2>&1 | FileCheck --check-prefix BAD-SYMAME-2 %s
BAD-SYMAME-2: --dis-symname: __mh_execute_header not in any section

# RUN: llvm-otool -tV %p/Inputs/exeThread.macho-x86_64 -p _nonexistent 2>&1 | FileCheck --check-prefix BAD-OTOOL-NOTFOUND %s
BAD-OTOOL-NOTFOUND: Can't find -p symbol: _nonexistent

# RUN: llvm-otool -tV %p/Inputs/exeThread.macho-x86_64 -p _environ 2>&1 | FileCheck --check-prefix BAD-OTOOL-NOTSECTION %s
BAD-OTOOL-NOTSECTION: -p symbol: _environ not in the section

# RUN: llvm-otool -tV %p/Inputs/exeThread.macho-x86_64 -p __mh_execute_header 2>&1 | FileCheck --check-prefix BAD-OTOOL-NOSECTION %s
BAD-OTOOL-NOSECTION: -p symbol: __mh_execute_header not in any section
