; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 6
; RUN: opt < %s -S | FileCheck %s

define void @foo(i32 %v) {
; CHECK-LABEL: define void @foo(
; CHECK-SAME: i32 [[V:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    br i1 false, label %[[CASE2:.*]], label %[[IF_ELSE:.*]]
; CHECK:       [[IF_ELSE]]:
; CHECK-NEXT:    switch i32 [[V]], label %[[DEFAULT:.*]] [
; CHECK-NEXT:      i32 3, label %[[EXIT:.*]]
; CHECK-NEXT:      i32 2, label %[[CASE2]]
; CHECK-NEXT:      i32 1, label %[[CASE1:.*]]
; CHECK-NEXT:    ]
; CHECK:       [[CASE1]]:
; CHECK-NEXT:    br label %[[DEFAULT]]
; CHECK:       [[CASE2]]:
; CHECK-NEXT:    br label %[[DEFAULT]]
; CHECK:       [[DEFAULT]]:
; CHECK-NEXT:    [[PHI:%.*]] = phi i32 [ 1, %[[CASE1]] ], [ 2, %[[CASE2]] ], [ [[V]], %[[IF_ELSE]] ]
; CHECK-NEXT:    br label %[[SWITCH:.*]]
; CHECK:       [[SWITCH]]:
; CHECK-NEXT:    br label %[[EXIT]]
; CHECK:       [[UNREACH:.*:]]
; CHECK-NEXT:    br label %[[EXIT]]
; CHECK:       [[EXIT]]:
; CHECK-NEXT:    ret void
;
entry:
  br i1 false, label %case2, label %if.else

if.else:                                          ; preds = %entry
  switch i32 %v, label %default [
  i32 3, label %exit
  i32 2, label %case2
  i32 1, label %case1
  ]

case1:                                            ; preds = %if.else
  br label %default

case2:                                            ; preds = %if.else, %entry
  br label %default

default:                                          ; preds = %case2, %case1, %if.else
  %phi = phi i32 [ 1, %case1 ], [ 2, %case2 ], [ %v, %if.else ]
  br label %switch

switch:                                           ; preds = %default
  br label %exit

unreach:                                          ; No predecessors!
  br label %exit

exit:                                             ; preds = %unreach, %switch, %if.else
  ret void
}
