; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --filter-out-after "^b2:" --version 5
; RUN: opt < %s -S | FileCheck %s

define i32 @func({i32, i32} %x, i32 %y, i1 %cond) {
; CHECK-LABEL: define i32 @func(
; CHECK-SAME: { i32, i32 } [[X:%.*]], i32 [[Y:%.*]], i1 [[COND:%.*]]) {
; CHECK-NEXT:  [[ENTRY:.*:]]
; CHECK-NEXT:    br i1 [[COND]], label %[[B1:.*]], label %[[B2:.*]]
; CHECK:       [[B1]]:
; CHECK-NEXT:    [[X_IDX0:%.*]] = extractvalue { i32, i32 } [[X]], 0
; CHECK-NEXT:    [[ADD1:%.*]] = add i32 [[Y]], 1
; CHECK-NEXT:    [[ADD2:%.*]] = add i32 [[X_IDX0]], [[ADD1]]
; CHECK-NEXT:    [[MUL:%.*]] = mul i32 [[ADD2]], 3
; CHECK-NEXT:    br label %[[B2]]
; CHECK:       [[B2]]:
;
entry:
  br i1 %cond, label %b1, label %b2

b1:
  %x.idx0 = extractvalue {i32, i32} %x, 0
  %add1 = add i32 %y, 1
  %add2 = add i32 %x.idx0, %add1
  %mul = mul i32 %add2, 3
  br label %b2

b2:
  %res = phi i32 [ -1, %entry ], [ %mul, %b1 ]
  ret i32 %res
}
