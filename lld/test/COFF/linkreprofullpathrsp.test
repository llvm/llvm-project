# REQUIRES: x86
# Unsupported on Windows due to maximum path length limitations.
# UNSUPPORTED: system-windows

# RUN: rm -rf %t.dir

Test link.exe-style /linkreprofullpathrsp: flag.
# RUN: mkdir -p %t.dir/build1
# RUN: cd %t.dir/build1
# RUN: lld-link %t.obj %p/Inputs/std32.lib /subsystem:console /defaultlib:%p/Inputs/library.lib \
# RUN:  /libpath:%p/Inputs /defaultlib:std64.lib ret42.lib /entry:main@0 /linkreprofullpathrsp:%t.rsp \
# RUN:  /out:%t.exe
# RUN: FileCheck %s --check-prefix=RSP -DT=%t -DP=%p < %t.rsp

# RSP: [[T]].obj
# RSP-NEXT: "[[P]]/Inputs/std32.lib"
# RSP-NEXT: "[[P]]/Inputs/ret42.lib"
# RSP-NEXT: "/defaultlib:[[P]]/Inputs/library.lib"
# RSP-NEXT: "/defaultlib:[[P]]/Inputs/std64.lib"

#--- drectve.s
        .section .drectve, "yn"
        .ascii "/defaultlib:std32"

#--- archive.s
	.text
	.intel_syntax noprefix
	.globl	exportfn3
	.p2align	4
exportfn3:
	ret

	.section	.drectve,"yni"
	.ascii	" /EXPORT:exportfn3"
