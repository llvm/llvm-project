# REQUIRES: manifest_tool

# RUN: yaml2obj %p/Inputs/ret42.yaml -o %t.obj
# RUN: lld-link /out:%t.exe /entry:main \
# RUN:   /manifest:embed \
# RUN:   /manifestuac:"level='requireAdministrator'" \
# RUN:   /manifestinput:%p/Inputs/manifestinput.test %t.obj
# RUN: llvm-readobj --coff-resources --file-headers %t.exe | FileCheck %s

CHECK:          ResourceTableRVA: 0x2000
CHECK-NEXT:     ResourceTableSize: 0x2C8
CHECK-DAG:      Resources [
CHECK-NEXT:       Total Number of Resources: 1
CHECK-DAG:        Number of String Entries: 0
CHECK-NEXT:       Number of ID Entries: 1
CHECK-NEXT:       Type: MANIFEST (ID 24) [
CHECK-NEXT:         Table Offset: 0x18
CHECK-NEXT:         Number of String Entries: 0
CHECK-NEXT:         Number of ID Entries: 1
CHECK-NEXT:         Name: (ID 1) [
CHECK-NEXT:           Table Offset: 0x30
CHECK-NEXT:           Number of String Entries: 0
CHECK-NEXT:           Number of ID Entries: 1
CHECK-NEXT:           Language: (ID 1033) [
CHECK-NEXT:             Entry Offset: 0x48
