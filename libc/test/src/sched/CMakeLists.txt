add_libc_testsuite(libc_sched_unittests)

add_libc_unittest(
  affinity_test
  SUITE
    libc_sched_unittests
  SRCS
    affinity_test.cpp
  DEPENDS
    libc.include.sched
    libc.include.sys_syscall
    libc.src.__support.OSUtil.osutil
    libc.src.errno.errno
    libc.src.sched.sched_getaffinity
    libc.src.sched.sched_setaffinity
    libc.test.errno_setter_matcher
)

add_libc_unittest(
  yield_test
  SUITE
    libc_sched_unittests
  SRCS
    yield_test.cpp
  DEPENDS
    libc.src.errno.errno
    libc.src.sched.sched_yield
)

add_libc_unittest(
  cpu_count_test
  SUITE
    libc_sched_unittests
  SRCS
    cpu_count_test.cpp
  DEPENDS
    libc.include.sched
    libc.include.sys_syscall
    libc.src.__support.OSUtil.osutil
    libc.src.errno.errno
    libc.src.sched.sched_getaffinity
    libc.src.sched.__sched_getcpucount
    libc.test.errno_setter_matcher
)
